"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[179],{2090:(Ee,se,D)=>{D.d(se,{BH:()=>Me,DV:()=>Kn,G6:()=>hn,GJ:()=>Pt,L:()=>W,LL:()=>rr,P0:()=>$e,Pz:()=>Le,Sg:()=>yt,UI:()=>zi,US:()=>te,Wl:()=>ei,Yr:()=>It,ZR:()=>gn,aH:()=>Je,b$:()=>Ke,cI:()=>un,dS:()=>or,eu:()=>on,g5:()=>J,gK:()=>Ur,gQ:()=>In,h$:()=>X,hl:()=>Jn,hu:()=>C,m9:()=>bt,ne:()=>Yn,p$:()=>Y,pd:()=>br,q4:()=>je,r3:()=>kn,ru:()=>Xe,tV:()=>ee,uI:()=>Ye,ug:()=>wi,vZ:()=>ir,w1:()=>qe,w9:()=>ft,xO:()=>Kr,xb:()=>Nr,z$:()=>Et,zd:()=>Cr});const m={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},C=function(de,me){if(!de)throw J(me)},J=function(de){return new Error("Firebase Database ("+m.SDK_VERSION+") INTERNAL ASSERT FAILED: "+de)},V=function(de){const me=[];let De=0;for(let rt=0;rt<de.length;rt++){let Ne=de.charCodeAt(rt);Ne<128?me[De++]=Ne:Ne<2048?(me[De++]=Ne>>6|192,me[De++]=63&Ne|128):55296==(64512&Ne)&&rt+1<de.length&&56320==(64512&de.charCodeAt(rt+1))?(Ne=65536+((1023&Ne)<<10)+(1023&de.charCodeAt(++rt)),me[De++]=Ne>>18|240,me[De++]=Ne>>12&63|128,me[De++]=Ne>>6&63|128,me[De++]=63&Ne|128):(me[De++]=Ne>>12|224,me[De++]=Ne>>6&63|128,me[De++]=63&Ne|128)}return me},te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(de,me){if(!Array.isArray(de))throw Error("encodeByteArray takes an array as a parameter");this.init_();const De=me?this.byteToCharMapWebSafe_:this.byteToCharMap_,rt=[];for(let Ne=0;Ne<de.length;Ne+=3){const Mt=de[Ne],Bt=Ne+1<de.length,Oe=Bt?de[Ne+1]:0,we=Ne+2<de.length,ue=we?de[Ne+2]:0;let Nt=(15&Oe)<<2|ue>>6,Qt=63&ue;we||(Qt=64,Bt||(Nt=64)),rt.push(De[Mt>>2],De[(3&Mt)<<4|Oe>>4],De[Nt],De[Qt])}return rt.join("")},encodeString(de,me){return this.HAS_NATIVE_SUPPORT&&!me?btoa(de):this.encodeByteArray(V(de),me)},decodeString(de,me){return this.HAS_NATIVE_SUPPORT&&!me?atob(de):function(de){const me=[];let De=0,rt=0;for(;De<de.length;){const Ne=de[De++];if(Ne<128)me[rt++]=String.fromCharCode(Ne);else if(Ne>191&&Ne<224){const Mt=de[De++];me[rt++]=String.fromCharCode((31&Ne)<<6|63&Mt)}else if(Ne>239&&Ne<365){const we=((7&Ne)<<18|(63&de[De++])<<12|(63&de[De++])<<6|63&de[De++])-65536;me[rt++]=String.fromCharCode(55296+(we>>10)),me[rt++]=String.fromCharCode(56320+(1023&we))}else{const Mt=de[De++],Bt=de[De++];me[rt++]=String.fromCharCode((15&Ne)<<12|(63&Mt)<<6|63&Bt)}}return me.join("")}(this.decodeStringToByteArray(de,me))},decodeStringToByteArray(de,me){this.init_();const De=me?this.charToByteMapWebSafe_:this.charToByteMap_,rt=[];for(let Ne=0;Ne<de.length;){const Mt=De[de.charAt(Ne++)],Oe=Ne<de.length?De[de.charAt(Ne)]:0;++Ne;const ue=Ne<de.length?De[de.charAt(Ne)]:64;++Ne;const ze=Ne<de.length?De[de.charAt(Ne)]:64;if(++Ne,null==Mt||null==Oe||null==ue||null==ze)throw Error();rt.push(Mt<<2|Oe>>4),64!==ue&&(rt.push(Oe<<4&240|ue>>2),64!==ze&&rt.push(ue<<6&192|ze))}return rt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let de=0;de<this.ENCODED_VALS.length;de++)this.byteToCharMap_[de]=this.ENCODED_VALS.charAt(de),this.charToByteMap_[this.byteToCharMap_[de]]=de,this.byteToCharMapWebSafe_[de]=this.ENCODED_VALS_WEBSAFE.charAt(de),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[de]]=de,de>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(de)]=de,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(de)]=de)}}},X=function(de){const me=V(de);return te.encodeByteArray(me,!0)},W=function(de){return X(de).replace(/\./g,"")},ee=function(de){try{return te.decodeString(de,!0)}catch(me){console.error("base64Decode failed: ",me)}return null};function Y(de){return le(void 0,de)}function le(de,me){if(!(me instanceof Object))return me;switch(me.constructor){case Date:return new Date(me.getTime());case Object:void 0===de&&(de={});break;case Array:de=[];break;default:return me}for(const De in me)!me.hasOwnProperty(De)||!he(De)||(de[De]=le(de[De],me[De]));return de}function he(de){return"__proto__"!==de}const ke=()=>{try{return function Pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const de=process.env.__FIREBASE_DEFAULTS__;return de?JSON.parse(de):void 0})()||(()=>{if(typeof document>"u")return;let de;try{de=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const me=de&&ee(de[1]);return me&&JSON.parse(me)})()}catch(de){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${de}`)}},je=de=>{var me,De;return null===(De=null===(me=ke())||void 0===me?void 0:me.emulatorHosts)||void 0===De?void 0:De[de]},$e=de=>{const me=je(de);if(!me)return;const De=me.lastIndexOf(":");if(De<=0||De+1===me.length)throw new Error(`Invalid host ${me} with no separate hostname and port!`);const rt=parseInt(me.substring(De+1),10);return"["===me[0]?[me.substring(1,De-1),rt]:[me.substring(0,De),rt]},Je=()=>{var de;return null===(de=ke())||void 0===de?void 0:de.config},Le=de=>{var me;return null===(me=ke())||void 0===me?void 0:me[`_${de}`]};class Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((me,De)=>{this.resolve=me,this.reject=De})}wrapCallback(me){return(De,rt)=>{De?this.reject(De):this.resolve(rt),"function"==typeof me&&(this.promise.catch(()=>{}),1===me.length?me(De):me(De,rt))}}}function yt(de,me){if(de.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const rt=me||"demo-project",Ne=de.iat||0,Mt=de.sub||de.user_id;if(!Mt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Bt=Object.assign({iss:`https://securetoken.google.com/${rt}`,aud:rt,iat:Ne,exp:Ne+3600,auth_time:Ne,sub:Mt,user_id:Mt,firebase:{sign_in_provider:"custom",identities:{}}},de);return[W(JSON.stringify({alg:"none",type:"JWT"})),W(JSON.stringify(Bt)),""].join(".")}function Et(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ye(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function Xe(){const de="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof de&&void 0!==de.id}function Ke(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function qe(){const de=Et();return de.indexOf("MSIE ")>=0||de.indexOf("Trident/")>=0}function It(){return!0===m.NODE_CLIENT||!0===m.NODE_ADMIN}function hn(){return!function Ot(){var de;const me=null===(de=ke())||void 0===de?void 0:de.forceEnvironment;if("node"===me)return!0;if("browser"===me)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jn(){try{return"object"==typeof indexedDB}catch{return!1}}function on(){return new Promise((de,me)=>{try{let De=!0;const rt="validate-browser-context-for-indexeddb-analytics-module",Ne=self.indexedDB.open(rt);Ne.onsuccess=()=>{Ne.result.close(),De||self.indexedDB.deleteDatabase(rt),de(!0)},Ne.onupgradeneeded=()=>{De=!1},Ne.onerror=()=>{var Mt;me((null===(Mt=Ne.error)||void 0===Mt?void 0:Mt.message)||"")}}catch(De){me(De)}})}class gn extends Error{constructor(me,De,rt){super(De),this.code=me,this.customData=rt,this.name="FirebaseError",Object.setPrototypeOf(this,gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rr.prototype.create)}}class rr{constructor(me,De,rt){this.service=me,this.serviceName=De,this.errors=rt}create(me,...De){const rt=De[0]||{},Ne=`${this.service}/${me}`,Mt=this.errors[me],Bt=Mt?function zr(de,me){return de.replace(bn,(De,rt)=>{const Ne=me[rt];return null!=Ne?String(Ne):`<${rt}?>`})}(Mt,rt):"Error";return new gn(Ne,`${this.serviceName}: ${Bt} (${Ne}).`,rt)}}const bn=/\{\$([^}]+)}/g;function un(de){return JSON.parse(de)}function ei(de){return JSON.stringify(de)}const vt=function(de){let me={},De={},rt={},Ne="";try{const Mt=de.split(".");me=un(ee(Mt[0])||""),De=un(ee(Mt[1])||""),Ne=Mt[2],rt=De.d||{},delete De.d}catch{}return{header:me,claims:De,data:rt,signature:Ne}},ft=function(de){const De=vt(de).claims;return!!De&&"object"==typeof De&&De.hasOwnProperty("iat")},Pt=function(de){const me=vt(de).claims;return"object"==typeof me&&!0===me.admin};function kn(de,me){return Object.prototype.hasOwnProperty.call(de,me)}function Kn(de,me){if(Object.prototype.hasOwnProperty.call(de,me))return de[me]}function Nr(de){for(const me in de)if(Object.prototype.hasOwnProperty.call(de,me))return!1;return!0}function zi(de,me,De){const rt={};for(const Ne in de)Object.prototype.hasOwnProperty.call(de,Ne)&&(rt[Ne]=me.call(De,de[Ne],Ne,de));return rt}function ir(de,me){if(de===me)return!0;const De=Object.keys(de),rt=Object.keys(me);for(const Ne of De){if(!rt.includes(Ne))return!1;const Mt=de[Ne],Bt=me[Ne];if(nn(Mt)&&nn(Bt)){if(!ir(Mt,Bt))return!1}else if(Mt!==Bt)return!1}for(const Ne of rt)if(!De.includes(Ne))return!1;return!0}function nn(de){return null!==de&&"object"==typeof de}function Kr(de){const me=[];for(const[De,rt]of Object.entries(de))Array.isArray(rt)?rt.forEach(Ne=>{me.push(encodeURIComponent(De)+"="+encodeURIComponent(Ne))}):me.push(encodeURIComponent(De)+"="+encodeURIComponent(rt));return me.length?"&"+me.join("&"):""}function Cr(de){const me={};return de.replace(/^\?/,"").split("&").forEach(rt=>{if(rt){const[Ne,Mt]=rt.split("=");me[decodeURIComponent(Ne)]=decodeURIComponent(Mt)}}),me}function br(de){const me=de.indexOf("?");if(!me)return"";const De=de.indexOf("#",me);return de.substring(me,De>0?De:void 0)}class In{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let me=1;me<this.blockSize;++me)this.pad_[me]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(me,De){De||(De=0);const rt=this.W_;if("string"==typeof me)for(let ze=0;ze<16;ze++)rt[ze]=me.charCodeAt(De)<<24|me.charCodeAt(De+1)<<16|me.charCodeAt(De+2)<<8|me.charCodeAt(De+3),De+=4;else for(let ze=0;ze<16;ze++)rt[ze]=me[De]<<24|me[De+1]<<16|me[De+2]<<8|me[De+3],De+=4;for(let ze=16;ze<80;ze++){const Nt=rt[ze-3]^rt[ze-8]^rt[ze-14]^rt[ze-16];rt[ze]=4294967295&(Nt<<1|Nt>>>31)}let ue,Se,Ne=this.chain_[0],Mt=this.chain_[1],Bt=this.chain_[2],Oe=this.chain_[3],we=this.chain_[4];for(let ze=0;ze<80;ze++){ze<40?ze<20?(ue=Oe^Mt&(Bt^Oe),Se=1518500249):(ue=Mt^Bt^Oe,Se=1859775393):ze<60?(ue=Mt&Bt|Oe&(Mt|Bt),Se=2400959708):(ue=Mt^Bt^Oe,Se=3395469782);const Nt=(Ne<<5|Ne>>>27)+ue+we+Se+rt[ze]&4294967295;we=Oe,Oe=Bt,Bt=4294967295&(Mt<<30|Mt>>>2),Mt=Ne,Ne=Nt}this.chain_[0]=this.chain_[0]+Ne&4294967295,this.chain_[1]=this.chain_[1]+Mt&4294967295,this.chain_[2]=this.chain_[2]+Bt&4294967295,this.chain_[3]=this.chain_[3]+Oe&4294967295,this.chain_[4]=this.chain_[4]+we&4294967295}update(me,De){if(null==me)return;void 0===De&&(De=me.length);const rt=De-this.blockSize;let Ne=0;const Mt=this.buf_;let Bt=this.inbuf_;for(;Ne<De;){if(0===Bt)for(;Ne<=rt;)this.compress_(me,Ne),Ne+=this.blockSize;if("string"==typeof me){for(;Ne<De;)if(Mt[Bt]=me.charCodeAt(Ne),++Bt,++Ne,Bt===this.blockSize){this.compress_(Mt),Bt=0;break}}else for(;Ne<De;)if(Mt[Bt]=me[Ne],++Bt,++Ne,Bt===this.blockSize){this.compress_(Mt),Bt=0;break}}this.inbuf_=Bt,this.total_+=De}digest(){const me=[];let De=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Ne=this.blockSize-1;Ne>=56;Ne--)this.buf_[Ne]=255&De,De/=256;this.compress_(this.buf_);let rt=0;for(let Ne=0;Ne<5;Ne++)for(let Mt=24;Mt>=0;Mt-=8)me[rt]=this.chain_[Ne]>>Mt&255,++rt;return me}}function Yn(de,me){const De=new sr(de,me);return De.subscribe.bind(De)}class sr{constructor(me,De){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=De,this.task.then(()=>{me(this)}).catch(rt=>{this.error(rt)})}next(me){this.forEachObserver(De=>{De.next(me)})}error(me){this.forEachObserver(De=>{De.error(me)}),this.close(me)}complete(){this.forEachObserver(me=>{me.complete()}),this.close()}subscribe(me,De,rt){let Ne;if(void 0===me&&void 0===De&&void 0===rt)throw new Error("Missing Observer.");Ne=function Yt(de,me){if("object"!=typeof de||null===de)return!1;for(const De of me)if(De in de&&"function"==typeof de[De])return!0;return!1}(me,["next","error","complete"])?me:{next:me,error:De,complete:rt},void 0===Ne.next&&(Ne.next=Qn),void 0===Ne.error&&(Ne.error=Qn),void 0===Ne.complete&&(Ne.complete=Qn);const Mt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ne.error(this.finalError):Ne.complete()}catch{}}),this.observers.push(Ne),Mt}unsubscribeOne(me){void 0===this.observers||void 0===this.observers[me]||(delete this.observers[me],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(me){if(!this.finalized)for(let De=0;De<this.observers.length;De++)this.sendOne(De,me)}sendOne(me,De){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[me])try{De(this.observers[me])}catch(rt){typeof console<"u"&&console.error&&console.error(rt)}})}close(me){this.finalized||(this.finalized=!0,void 0!==me&&(this.finalError=me),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qn(){}function Ur(de,me){return`${de} failed: ${me} argument `}const or=function(de){const me=[];let De=0;for(let rt=0;rt<de.length;rt++){let Ne=de.charCodeAt(rt);if(Ne>=55296&&Ne<=56319){const Mt=Ne-55296;rt++,C(rt<de.length,"Surrogate pair missing trail surrogate."),Ne=65536+(Mt<<10)+(de.charCodeAt(rt)-56320)}Ne<128?me[De++]=Ne:Ne<2048?(me[De++]=Ne>>6|192,me[De++]=63&Ne|128):Ne<65536?(me[De++]=Ne>>12|224,me[De++]=Ne>>6&63|128,me[De++]=63&Ne|128):(me[De++]=Ne>>18|240,me[De++]=Ne>>12&63|128,me[De++]=Ne>>6&63|128,me[De++]=63&Ne|128)}return me},wi=function(de){let me=0;for(let De=0;De<de.length;De++){const rt=de.charCodeAt(De);rt<128?me++:rt<2048?me+=2:rt>=55296&&rt<=56319?(me+=4,De++):me+=3}return me};function bt(de){return de&&de._delegate?de._delegate:de}},8285:(Ee,se,D)=>{D.d(se,{Y:()=>J});var m=D(4650),C=(()=>{return(V=C||(C={}))[V.slideToLeft=1]="slideToLeft",V[V.slideToRight=2]="slideToRight",V[V.slideToTop=3]="slideToTop",V[V.slideToBottom=4]="slideToBottom",C;var V})();let J=(()=>{class V{constructor(){this.routeAnimation=null}setRouteAnimation(te){this.routeAnimation=C[te]}get currentRouteAnimation(){return this.routeAnimation}static#e=this.\u0275fac=function(X){return new(X||V)};static#t=this.\u0275prov=m.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"})}return V})()},7777:(Ee,se,D)=>{D.d(se,{t:()=>he});var m=D(1135),C=D(2843),J=D(3900),V=D(9646),q=D(6805),X=D(262),W=D(8505),ee=D(4004),Y=D(4650),le=D(529);let he=(()=>{class Pe{constructor(Ae){this.http=Ae,this.alertSubject=new m.X(null),this.alertObservable=this.alertSubject.asObservable()}getUser(Ae){return this.http.get(`https://jsonplaceholder.typicode.com/users/${Ae}`).pipe((0,X.K)(Ue=>(0,C._)(Ue)))}getToDo(Ae){return this.http.get(`https://jsonplaceholder.typicode.com/todos?userId=${Ae}`).pipe((0,X.K)(Ue=>(0,C._)(Ue)))}setUser(Ae){console.log(Ae)}setToDos(Ae){console.log(Ae)}initialiseAppUsingObservables(){return this.getUser(5).pipe((0,J.w)(Ae=>(this.setUser(Ae),this.getToDo(Ae.id).pipe((0,W.b)(Ue=>this.setToDos(Ue))))),(0,X.K)(Ae=>(this.alertSubject.next(Ae),(0,V.of)(Ae))))}initialiseAppUsingPromises(){return function te(Pe,He){const Ae="object"==typeof He;return new Promise((Ue,ke)=>{let $e,je=!1;Pe.subscribe({next:Je=>{$e=Je,je=!0},error:ke,complete:()=>{je?Ue($e):Ae?Ue(He.defaultValue):ke(new q.K)}})})}(this.initialiseAppUsingObservables())}getAlbums(){return this.http.get("https://jsonplaceholder.typicode.com/albums").pipe((0,ee.U)(Ae=>Ae))}getPhotos(){return this.http.get("https://jsonplaceholder.typicode.com/photos").pipe((0,ee.U)(Ae=>Ae))}getComments(){return this.http.get("https://jsonplaceholder.typicode.com/comments").pipe((0,ee.U)(Ae=>Ae))}deleteToDo(){return this.http.delete("https://jsonplaceholder.typicode.com/todos/2").pipe((0,ee.U)(Ae=>Ae))}getToDos(){return this.http.get("https://jsonplaceholder.typicode.com/todos").pipe((0,ee.U)(Ae=>Ae))}static#e=this.\u0275fac=function(Ue){return new(Ue||Pe)(Y.LFG(le.eN))};static#t=this.\u0275prov=Y.Yz7({token:Pe,factory:Pe.\u0275fac,providedIn:"root"})}return Pe})()},8311:(Ee,se,D)=>{D.d(se,{g:()=>q});var m=D(1135),C=D(8646),J=D(8343),V=D(4650);let q=(()=>{class te{constructor(){this._notification=new m.X(null),this.notification$=this._notification.asObservable().pipe((0,C.n)(),(0,J.x)())}notify(W){this._notification.next(W),setTimeout(()=>this._notification.next(null),3e3)}static#e=this.\u0275fac=function(ee){return new(ee||te)};static#t=this.\u0275prov=V.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"})}return te})()},9662:(Ee,se,D)=>{D.d(se,{O:()=>ke});var m=D(2805),C=D(4351),J=D(576),q=D(4128),te=D(4707),X=D(4086),W=D(5625),ee=D(262),Y=D(8505),le=D(9770),he=D(4782),Pe=D(2843),He=D(4650),Ae=D(529),Ue=(()=>{return(je=Ue||(Ue={})).LOADING="LOADING",je.SUCCESS="SUCCESS",je.ERROR="ERROR",Ue;var je})();let ke=(()=>{class je{constructor(Je){this.http=Je}getNotifications(){return this.http.get("http://api").pipe(this.poll(1e3))}poll(Je,Le=0){return function(Me){return(0,m.H)(Le,Je).pipe(function V(je,$e){return(0,J.m)($e)?(0,C.b)(()=>je,$e):(0,C.b)(()=>je)}(Me))}}get(Je){return this.http.get(Je)}post(Je,Le){return this.http.post(Je,Le)}getSwapi(){let Je=this.http.get("https://swapi.dev/api/people/1/"),Le=this.http.get("https://swapi.dev/api/planets/1/");(0,q.D)([Je,Le]).subscribe(Me=>{Me[0].homeworld=Me[1],this.loadedCharacter=Me[0]})}load(Je){const Le=new te.t,Me=this.http.get(`https://swapi.dev/api/people/${Je}/`).pipe((0,X.g)(2e3),(0,W.X)(2),(0,ee.K)(Et=>{throw Le.next(Ue.ERROR),"error loading user"}),(0,Y.b)(()=>Le.next(Ue.SUCCESS)));return{data:(0,le.P)(()=>(Le.next(Ue.LOADING),Me)),status:Le}}share(){this.rawData$=this.http.get("https://jsonplaceholder.typicode.com/todos/1").pipe((0,he.d)())}GetData(){return this.rawData$.toPromise()}getRandomjoke(){return this.http.get("https://icanhazdadjoke.com/slack").pipe((0,ee.K)(this.handleError))}handleError(){return(0,Pe._)("Network Error Occured")}static#e=this.\u0275fac=function(Le){return new(Le||je)(He.LFG(Ae.eN))};static#t=this.\u0275prov=He.Yz7({token:je,factory:je.\u0275fac,providedIn:"root"})}return je})()},4185:(Ee,se,D)=>{D.d(se,{N:()=>q,g:()=>te});var m=D(4650),C=D(529);class J{constructor(){this.http=(0,m.f3M)(C.eN)}post(W,ee){return this.http.post(`${this.databaseURL}/${W}`,ee)}get(W,ee){return this.http.get(`${this.databaseURL}/${W}`,{params:ee})}delete(W){return this.http.delete(`${this.databaseURL}/${W}`)}put(W,ee){return this.http.put(`${this.databaseURL}/${W}`,ee)}patch(W,ee){return this.http.patch(`${this.databaseURL}/${W}`,ee)}}var V=D(197);class q{}let te=(()=>{class X extends J{constructor(){super(...arguments),this.databaseURL=V.w.databaseURL}static#e=this.\u0275fac=function(){let ee;return function(le){return(ee||(ee=m.n5z(X)))(le||X)}}();static#t=this.\u0275prov=m.Yz7({token:X,factory:X.\u0275fac})}return X})()},8405:(Ee,se,D)=>{D.d(se,{R1:()=>J,ex:()=>te,lt:()=>q,zI:()=>V});var m=D(4650),C=D(7697);const J=new m.OlP("GenericFirebaseDbInterface");class V{}let q=(()=>{class X extends C.s{static#e=this.\u0275fac=function(){let ee;return function(le){return(ee||(ee=m.n5z(X)))(le||X)}}();static#t=this.\u0275prov=m.Yz7({token:X,factory:X.\u0275fac})}return X})(),te=(()=>{class X extends C.s{static#e=this.\u0275fac=function(){let ee;return function(le){return(ee||(ee=m.n5z(X)))(le||X)}}();static#t=this.\u0275prov=m.Yz7({token:X,factory:X.\u0275fac})}return X})()},7697:(Ee,se,D)=>{D.d(se,{s:()=>V});var m=D(9671),C=D(6197),J=D(9751);class V{constructor(){this.db=(0,C.N8)()}create(te,X={}){let W=(0,C.VF)((0,C.iH)(this.db,te));return(0,C.t8)(W,{key:W.key,createdAt:(0,C.Bt)(),updatedAt:(0,C.Bt)(),...X}).then(),Promise.resolve({key:W.key})}set(te,X={}){var W=this;return(0,m.Z)(function*(){const ee=(0,C.iH)(W.db,te);yield(0,C.t8)(ee,X)})()}update(te,X={}){var W=this;return(0,m.Z)(function*(){const ee=(0,C.iH)(W.db,te);yield(0,C.Vx)(ee,{updatedAt:(0,C.Bt)(),...X})})()}remove(te){var X=this;return(0,m.Z)(function*(){const W=(0,C.iH)(X.db,te);yield(0,C.Od)(W)})()}readRealtime$(te){return new J.y(X=>{(0,C.jM)((0,C.iH)(this.db,te),W=>{let ee=[];W.exists()?(W.forEach(Y=>{ee.push({key:Y.key,...Y.val()})}),X.next(ee)):X.next([])})})}readRealtimeOriginal$(te){return new J.y(X=>{(0,C.jM)((0,C.iH)(this.db,te),W=>{W.exists()?X.next(W.val()):X.next(null)})})}readOnceWithObserver(te){return(0,C.jM)((0,C.iH)(this.db,te),X=>X.val(),{onlyOnce:!0})}readOnce(te){return new Promise((X,W)=>{(0,C.U2)((0,C.iH)(this.db,te)).then(ee=>{let Y=[];ee.exists()?(ee.forEach(le=>{Y.push({key:le.key,...le.val()})}),X(Y)):X([])}).catch(ee=>{W(ee)})})}readOnceOriginal(te){return new Promise((X,W)=>{(0,C.U2)((0,C.iH)(this.db,te)).then(ee=>{ee.exists()?X(ee.val()):X([])}).catch(ee=>{W(ee)})})}checkPresence(te){const X=(0,C.iH)(this.db,`${te}/connections`),W=(0,C.iH)(this.db,`${te}/lastOnline`),ee=(0,C.iH)(this.db,".info/connected");(0,C.jM)(ee,Y=>{if(!0===Y.val()){const le=(0,C.VF)(X);(0,C.ae)(le).remove().then(),(0,C.t8)(le,!0).then(),(0,C.ae)(W).set((0,C.Bt)()).then()}})}onDisconnect(te){const X=(0,C.iH)(this.db,te);return(0,C.ae)(X)}detectingConnectionState(){return new J.y(te=>{const X=(0,C.iH)(this.db,".info/connected");(0,C.jM)(X,W=>{te.next(W.val())})})}updateCounter(te,X=!0){return new Promise((W,ee)=>{const Y=(0,C.iH)(this.db);(0,C.U2)((0,C.iU)(Y,"counter")).then(le=>{(0,C.Vx)((0,C.iH)(this.db,te),{counter:(0,C.nP)(X?1:-1)}).then(he=>{W(he)})})})}others(){}}},4466:(Ee,se,D)=>{D.d(se,{m:()=>q});var m=D(6895),C=D(4006),J=D(4793),V=D(4650);let q=(()=>{class te{static#e=this.\u0275fac=function(ee){return new(ee||te)};static#t=this.\u0275mod=V.oAB({type:te});static#n=this.\u0275inj=V.cJS({imports:[m.ez,J.Bz,C.u5,C.UX,C.u5,C.UX]})}return te})()},255:(Ee,se,D)=>{D.d(se,{u:()=>m});class m{}},7522:(Ee,se,D)=>{D.d(se,{Yk:()=>m,wJ:()=>C});var m=(()=>{return(V=m||(m={})).Clear="Clear",V.Snow="Snow",V.Rain="Rain",V.Clouds="Clouds",V.Thunderstorm="Thunderstorm",V.Atmosphere="Atmosphere",V.Drizzle="Drizzle",V.Unknown="Unknown",m;var V})();function C(V){return(new Map).set("Thunderstorm",m.Thunderstorm).set("Drizzle",m.Drizzle).set("Rain",m.Rain).set("Snow",m.Snow).set("Atmosphere",m.Atmosphere).set("Clouds",m.Clouds).set("Clear",m.Clear).get(V.main)||m.Unknown}},1944:(Ee,se,D)=>{D.d(se,{$0:()=>te,$f:()=>V,$s:()=>q,GO:()=>C,HD:()=>X,JW:()=>le,Xt:()=>Pe,hS:()=>he,m0:()=>J,mm:()=>Y,n3:()=>W,rc:()=>ee});var m=D(8555);const C=(0,m.PH)("[ARTICLE] Show All"),J=(0,m.PH)("[ARTICLE] Show All Success",(0,m.Ky)()),V=(0,m.PH)("[ARTICLE] Create",(0,m.Ky)()),q=(0,m.PH)("[ARTICLE] Create Success",(0,m.Ky)()),te=(0,m.PH)("[ARTICLE] Create Failure",(0,m.Ky)()),X=(0,m.PH)("[ARTICLE] Get by Id",(0,m.Ky)()),W=(0,m.PH)("[ARTICLE] Get by Id Success",(0,m.Ky)()),ee=(0,m.PH)("[ARTICLE] Reset"),Y=(0,m.PH)("[Product] Add to cart",(0,m.Ky)()),le=(0,m.PH)("[Product] Remove from cart",(0,m.Ky)()),he=(0,m.PH)("[Products] Load items from server"),Pe=(0,m.PH)("[Products] Load success",(0,m.Ky)())},8713:(Ee,se,D)=>{D.d(se,{FC:()=>ee,N5:()=>He,Zz:()=>W,kk:()=>Pe,ll:()=>Ae});var m=D(8555),C=D(1944);const q=(0,m.Lq)({articles:[],message:""},(0,m.on)(C.m0,(Ue,{payload:ke})=>({articles:ke,message:"Success"})),(0,m.on)(C.$s,(Ue,{payload:ke})=>({articles:[ke],message:"Article Created."})),(0,m.on)(C.$0,(Ue,{payload:ke})=>({articles:[],message:ke})),(0,m.on)(C.n3,(Ue,{payload:ke})=>({articles:ke,message:"Success"})),(0,m.on)(C.rc,Ue=>({articles:[],message:""}))),X=(0,m.ZF)("articleState"),W=(0,m.P1)(X,Ue=>Ue.articles),ee=(0,m.P1)(X,Ue=>Ue.message),Y=(0,m.Lq)({products:[],cart:[]},(0,m.on)(C.Xt,(Ue,{payload:ke})=>({...Ue,products:ke})),(0,m.on)(C.mm,(Ue,{payload:ke})=>({...Ue,cart:[...Ue.cart,ke]})),(0,m.on)(C.JW,(Ue,{payload:ke})=>({...Ue,cart:[...Ue.cart.filter(je=>je.name!==ke.name)]}))),he=(0,m.ZF)("productState1"),Pe=(0,m.P1)(he,Ue=>Ue.products),He=(0,m.P1)(he,Ue=>Ue.cart),Ae={articleState:function te(Ue,ke){return q(Ue,ke)},productState1:function le(Ue,ke){return Y(Ue,ke)}}},9884:(Ee,se,D)=>{D.d(se,{y:()=>J});var m=D(7579),C=D(1135);class J{constructor(q){this.reducer=q,this.action=new m.x;const te={type:"@ngrx/store/init"},X=q(void 0,te);this.state=new C.X(X),this.state$=this.state.asObservable(),this.action$=this.action.asObservable(),this.action.next(te)}dispatch(q){const te=this.state.getValue(),X=this.reducer(te,q);this.state.next(X),this.action.next(q)}}},8625:(Ee,se,D)=>{D.d(se,{IH:()=>q,Mj:()=>V,nP:()=>J,zD:()=>te});var m=D(8555),C=(()=>{return(X=C||(C={})).INCREMENT="Increment Article",X.DECREMENT="Decrememnt Article",X.ADD="Add Article",X.LOAD="Load Articles",C;var X})();const J=(0,m.PH)(C.INCREMENT,(0,m.Ky)()),V=(0,m.PH)(C.DECREMENT,(0,m.Ky)()),q=(0,m.PH)(C.ADD,(0,m.Ky)()),te=(0,m.PH)(C.LOAD)},7369:(Ee,se,D)=>{D.d(se,{Jl:()=>te,UN:()=>J});var m=D(8555),C=D(8625);const J="article",q=(0,m.Lq)({articles:[]},(0,m.on)(C.nP,(X,W)=>({...X,articles:X.articles.map(ee=>ee.id==W.id?{...ee,points:ee.points+1}:ee)})),(0,m.on)(C.Mj,(X,W)=>({...X,articles:X.articles.map(ee=>ee.id==W.id?{...ee,points:ee.points-1}:ee)})),(0,m.on)(C.IH,(X,{payload:W})=>({...X,articles:[...X.articles,W]})));function te(X,W){return q(X,W)}},3550:(Ee,se,D)=>{D.d(se,{T:()=>W});var m=D(8555),C=D(8625),J=D(7369);const V=(0,m.ZF)(J.UN),q=(0,m.P1)(V,ee=>ee.articles);class te{constructor(Y,le,he,Pe){this.id=Y,this.title=le,this.link=he,this.points=Pe||0,this.time=new Date}}var X=D(4650);let W=(()=>{class ee{constructor(le){this.store=le,this.id=0}getArticle(){return this.store.pipe((0,m.Ys)(q))}incArticle(le){this.store.dispatch(C.nP(le))}decArticle(le){this.store.dispatch(C.Mj(le))}addArticle(le){let he=new te(++this.id,le.title,le.link,0);this.store.dispatch(C.IH({payload:he}))}loadArticle(le){this.store.dispatch(C.zD())}static#e=this.\u0275fac=function(he){return new(he||ee)(X.LFG(m.yh))};static#t=this.\u0275prov=X.Yz7({token:ee,factory:ee.\u0275fac})}return ee})()},5054:(Ee,se,D)=>{D.d(se,{e:()=>X});var m=D(8555),C=D(4579),J=D(2852);const V=(0,m.ZF)(J.UN),q=(0,m.P1)(V,W=>W.count);var te=D(4650);let X=(()=>{class W{constructor(Y){this.store=Y}getCount(){return this.store.pipe((0,m.Ys)(q))}incrementCount(){this.store.dispatch(C.nP())}decrementCount(){this.store.dispatch(C.Mj())}resetCount(){this.store.dispatch(C.mc())}setValue(Y){this.store.dispatch(C.Zf({newValue:Y}))}loadValue(){this.store.dispatch(C.zK())}static#e=this.\u0275fac=function(le){return new(le||W)(te.LFG(m.yh))};static#t=this.\u0275prov=te.Yz7({token:W,factory:W.\u0275fac})}return W})()},4579:(Ee,se,D)=>{D.d(se,{Mj:()=>V,Zf:()=>te,mc:()=>q,nP:()=>J,zK:()=>X});var m=D(8555),C=(()=>{return(W=C||(C={})).INCREMENT="[Counter Component] Increment",W.DECREMENT="[Counter Component] Decrement",W.RESET="[Counter Component] Reset",W.SETVALUE="[Counter Component] Set Value",W.LOADVALUE="[Counter Component] Load Value",C;var W})();const J=(0,m.PH)(C.INCREMENT),V=(0,m.PH)(C.DECREMENT),q=(0,m.PH)(C.RESET),te=(0,m.PH)(C.SETVALUE,(0,m.Ky)()),X=(0,m.PH)(C.LOADVALUE)},2852:(Ee,se,D)=>{D.d(se,{UN:()=>J,jX:()=>te});var m=D(8555),C=D(4579);const J="counter",q=(0,m.Lq)({count:0},(0,m.on)(C.nP,X=>({...X,count:X.count+1})),(0,m.on)(C.Mj,X=>({...X,count:X.count-1})),(0,m.on)(C.mc,X=>({...X,count:0})),(0,m.on)(C.Zf,(X,W)=>({...X,count:W.newValue})));function te(X,W){return q(X,W)}},2542:(Ee,se,D)=>{D.d(se,{F3:()=>V,WU:()=>q,mu:()=>J});var m=D(8555),C=(()=>{return(te=C||(C={})).loadData="[loadData] load",te.loadDataSuccess="[loadData] success",te.loadDataFailure="[loadData] failure",C;var te})();const J=(0,m.PH)(C.loadData),V=(0,m.PH)(C.loadDataSuccess,(0,m.Ky)()),q=(0,m.PH)(C.loadDataFailure,(0,m.Ky)())},3880:(Ee,se,D)=>{D.d(se,{B5:()=>te,UN:()=>J});var m=D(8555),C=D(2542);const J="load-data",q=(0,m.Lq)({data:null,loading:!1,error:null},(0,m.on)(C.mu,X=>({...X,loading:!0})),(0,m.on)(C.F3,(X,{payload:W})=>({...X,loading:!1,data:W})),(0,m.on)(C.WU,(X,{payload:W})=>({...X,loading:!1,error:W})));function te(X,W){return q(X,W)}},9610:(Ee,se,D)=>{D.d(se,{L:()=>X});var m=D(8555),C=D(3880);const J=(0,m.ZF)(C.UN),V=(0,m.P1)(J,W=>W.data);var q=D(2542),te=D(4650);let X=(()=>{class W{constructor(Y){this.store=Y}getData(){return this.store.pipe((0,m.Ys)(V))}loadData(){this.store.dispatch(q.mu())}loadDataSuccess(Y){this.store.dispatch(q.F3(Y))}loadDataFailure(Y){this.store.dispatch(q.WU(Y))}static#e=this.\u0275fac=function(le){return new(le||W)(te.LFG(m.yh))};static#t=this.\u0275prov=te.Yz7({token:W,factory:W.\u0275fac})}return W})()},7403:(Ee,se,D)=>{D.d(se,{a:()=>q});var m=D(4004),C=D(4650),J=D(529);let q=(()=>{class te{constructor(W){this.http=W}register(W){return this.http.post("https://conduit.productionready.io/api/users",W).pipe((0,m.U)(ee=>ee.user))}static#e=this.\u0275fac=function(ee){return new(ee||te)(C.LFG(J.eN))};static#t=this.\u0275prov=C.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"})}return te})()},2766:(Ee,se,D)=>{D.d(se,{Pw:()=>V,_0:()=>J,zH:()=>q});var m=D(8555),C=(()=>{return(te=C||(C={})).REGISTER="[AUTH] REGISTER",te.REGISTER_SUCCESS="[AUTH] REGISTER SUCCESS",te.REGISTER_FAILURE="[AUTH] REGISTER FAILURE",C;var te})();const J=(0,m.PH)(C.REGISTER,(0,m.Ky)()),V=(0,m.PH)(C.REGISTER_SUCCESS,(0,m.Ky)()),q=(0,m.PH)(C.REGISTER_FAILURE,(0,m.Ky)())},5650:(Ee,se,D)=>{D.d(se,{UN:()=>V,xw:()=>te});var m=D(8555),C=D(2766);const V="Register",q=(0,m.Lq)({isSubmitting:!1,currentUser:null,isLoggedIn:null,validationErrors:null},(0,m.on)(C._0,X=>({...X,isSubmitting:!0,validationErrors:null})),(0,m.on)(C.Pw,(X,W)=>({...X,isSubmitting:!1,isLoggedIn:!0,currentUser:W.currentUser})),(0,m.on)(C.zH,(X,W)=>({...X,isSubmitting:!1,validationErrors:W.errors})));function te(X,W){return q(X,W)}},4964:(Ee,se,D)=>{D.d(se,{q:()=>W});var m=D(8555),C=D(2766),J=D(5650);const V=(0,m.ZF)(J.UN),q=(0,m.P1)(V,ee=>ee.isSubmitting),te=(0,m.P1)(V,ee=>ee.validationErrors);var X=D(4650);let W=(()=>{class ee{constructor(le){this.store=le}register(le){this.store.dispatch((0,C._0)(le))}isSubmitting(){return this.store.pipe((0,m.Ys)(q))}backendErrors(){return this.store.pipe((0,m.Ys)(te))}static#e=this.\u0275fac=function(he){return new(he||ee)(X.LFG(m.yh))};static#t=this.\u0275prov=X.Yz7({token:ee,factory:ee.\u0275fac})}return ee})()},817:(Ee,se,D)=>{D.d(se,{N2:()=>q,Ni:()=>V,PR:()=>J});var m=D(8555),C=(()=>{return(te=C||(C={})).GET_USER="[User] Get User",te.GET_USER_SUCCESS="[User] Get User Success",te.GET_USER_FAILED="[User] Get User Failed",C;var te})();const J=(0,m.PH)(C.GET_USER),V=(0,m.PH)(C.GET_USER_SUCCESS,(0,m.Ky)()),q=(0,m.PH)(C.GET_USER_FAILED,(0,m.Ky)())},173:(Ee,se,D)=>{D.d(se,{U:()=>V,M:()=>te});var m=D(8555),J=D(817);const V="user_info",q=(0,m.Lq)({user:{userId:null,name:null,lastName:null,email:null},error:null},(0,m.on)(J.Ni,(X,{user:W})=>({...X,user:W,error:null})),(0,m.on)(J.N2,(X,{error:W})=>({...X,user:{userId:null,name:null,lastName:null,email:null},error:W})));function te(X,W){return q(X,W)}},2842:(Ee,se,D)=>{D.d(se,{p:()=>X});var m=D(8555),C=D(817),J=D(173);const V=(0,m.ZF)(J.U),q=(0,m.P1)(V,W=>W.user);var te=D(4650);let X=(()=>{class W{constructor(Y){this.store=Y}userInfo$(){return this.store.pipe((0,m.Ys)(q))}getUserInfo(){this.store.dispatch(C.PR())}static#e=this.\u0275fac=function(le){return new(le||W)(te.LFG(m.yh))};static#t=this.\u0275prov=te.Yz7({token:W,factory:W.\u0275fac})}return W})()},2944:(Ee,se,D)=>{D.d(se,{s:()=>J});var m=D(4650),C=D(529);let J=(()=>{class V{constructor(te){this.http=te}login(te,X){return this.http.post("login",{username:te,password:X})}getProducts(){return this.http.get("products",{headers:{}})}static#e=this.\u0275fac=function(X){return new(X||V)(m.LFG(C.eN))};static#t=this.\u0275prov=m.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"})}return V})()},7385:(Ee,se,D)=>{D.d(se,{e:()=>q});var m=D(1135),C=D(8505),J=D(4650),V=D(2944);let q=(()=>{class te{constructor(W){this.apiService=W,this._isLoggedIn$=new m.X(!1),this.isLoggedIn$=this._isLoggedIn$.asObservable(),this.TOKEN_NAME="profanis_auth",this._isLoggedIn$.next(!!this.token),this.user=this.getUser(this.token)}get token(){return localStorage.getItem(this.TOKEN_NAME)}login(W,ee){return this.apiService.login(W,ee).pipe((0,C.b)(Y=>{this._isLoggedIn$.next(!0),localStorage.setItem(this.TOKEN_NAME,Y.token),this.user=this.getUser(Y.token)}))}getUser(W){return W?JSON.parse(atob(W.split(".")[1])):null}hasRole(W){return this.user?.Role.includes(W)||!1}static#e=this.\u0275fac=function(ee){return new(ee||te)(J.LFG(V.s))};static#t=this.\u0275prov=J.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"})}return te})()},2340:(Ee,se,D)=>{D.d(se,{N:()=>C});var m=D(197);const C={production:!0,version:D(4147).i8,firebaseConfig:m.w}},197:(Ee,se,D)=>{D.d(se,{w:()=>m});const m={apiKey:"AIzaSyAQszHYa_YW__6DdJDCqlKOsRBpszVz8sQ",authDomain:"rktect-rest.firebaseapp.com",databaseURL:"https://rktect-rest-default-rtdb.firebaseio.com",projectId:"rktect-rest",storageBucket:"rktect-rest.appspot.com",messagingSenderId:"797842765239",appId:"1:797842765239:web:e3ddfbb57fbdff9dd42432",auth_Token:"kpPiWBeAJJ3KlXNQ1tULjJcYLWZoLMwdEpDRzKSc"}},8988:(Ee,se,D)=>{var m=D(1481),C=D(4650),J=D(9671),V=D(4793),q=D(7340);const te=[(0,q.IO)(":enter, :leave",(0,q.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,q.IO)(":leave",(0,q.oB)({transform:"translateX(0%)"}),{optional:!0}),(0,q.IO)(":enter",(0,q.oB)({transform:"translateX(100%)"}),{optional:!0}),(0,q.ru)([(0,q.IO)(":leave",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateX(-100%)"}))],{optional:!0}),(0,q.IO)(":enter",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateX(0%)"}))],{optional:!0})])],X=[(0,q.IO)(":enter, :leave",(0,q.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,q.IO)(":leave",(0,q.oB)({transform:"translateX(0%)"}),{optional:!0}),(0,q.IO)(":enter",(0,q.oB)({transform:"translateX(-100%)"}),{optional:!0}),(0,q.ru)([(0,q.IO)(":leave",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateX(100%)"}))],{optional:!0}),(0,q.IO)(":enter",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateX(0%)"}))],{optional:!0})])],W=[(0,q.IO)(":enter, :leave",(0,q.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,q.IO)(":leave",(0,q.oB)({transform:"translateY(0%)"}),{optional:!0}),(0,q.IO)(":enter",(0,q.oB)({transform:"translateY(100%)"}),{optional:!0}),(0,q.ru)([(0,q.IO)(":leave",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateY(-100%)"}))],{optional:!0}),(0,q.IO)(":enter",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateY(0%)"}))],{optional:!0})])],ee=[(0,q.IO)(":enter, :leave",(0,q.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,q.IO)(":leave",(0,q.oB)({transform:"translateY(0%)"}),{optional:!0}),(0,q.IO)(":enter",(0,q.oB)({transform:"translateY(-100%)"}),{optional:!0}),(0,q.ru)([(0,q.IO)(":leave",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateY(100%)"}))],{optional:!0}),(0,q.IO)(":enter",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateY(0%)"}))],{optional:!0})])],Y=(0,q.X$)("slideTransition",[(0,q.eR)("* => slideToLeft",te),(0,q.eR)("* => slideToRight",X),(0,q.eR)("* => slideToTop",W),(0,q.eR)("* => slideToBottom",ee)]);var le=D(8285),he=D(6895);function Pe(a,l){if(1&a&&(C.TgZ(0,"li",11)(1,"a",12),C._uU(2),C.qZA()()),2&a){const c=l.$implicit;C.xp6(1),C.Q6J("routerLink",null==c?null:c.path),C.xp6(1),C.Oqu((null==c?null:c.name)||(null==c?null:c.path))}}function He(a,l){if(1&a&&(C.TgZ(0,"a",13),C._uU(1),C.qZA()),2&a){const c=l.$implicit;C.xp6(1),C.Oqu(c)}}const Ae=function(){return["navbar-dark","bg-dark"]},Ue=function(){return["navbar-light","bg-light"]},ke=function(a){return{show:a}};let je=(()=>{class a{constructor(){this.isCollapsed=!1,this.routes=[],this.template="DARK",this.languages=["English","Hindi"]}ngOnInit(){}toggleNavbar(){this.isCollapsed=!this.isCollapsed}static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275cmp=C.Xpm({type:a,selectors:[["app-navbar"]],inputs:{routes:"routes",template:"template"},decls:13,vars:10,consts:[[1,"navbar","navbar-expand-lg","sticky-top1",3,"ngClass"],["href","/",1,"navbar-brand"],["type","button",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse",3,"ngClass"],[1,"navbar-nav","mr-auto"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item","dropdown","align-right",3,"click"],["id","navbarDropdown","role","button","data-toggle","dropdown","aria-expanded","false","aria-haspopup","true",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["class","dropdown-item",4,"ngFor","ngForOf"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"dropdown-item"]],template:function(v,b){1&v&&(C.TgZ(0,"nav",0)(1,"a",1),C._uU(2,"Navbar"),C.qZA(),C.TgZ(3,"button",2),C.NdJ("click",function(){return b.toggleNavbar()}),C._UZ(4,"span",3),C.qZA(),C.TgZ(5,"div",4)(6,"ul",5),C.YNc(7,Pe,3,2,"li",6),C.TgZ(8,"li",7),C.NdJ("click",function(){return b.show=!b.show}),C.TgZ(9,"a",8),C._uU(10,"Language"),C.qZA(),C.TgZ(11,"div",9),C.YNc(12,He,2,1,"a",10),C.qZA()()()()()),2&v&&(C.Q6J("ngClass","DARK"===b.template?C.DdM(6,Ae):C.DdM(7,Ue)),C.xp6(5),C.Q6J("ngClass",C.VKq(8,ke,b.isCollapsed)),C.xp6(2),C.Q6J("ngForOf",b.routes),C.xp6(4),C.ekj("show",b.show),C.xp6(1),C.Q6J("ngForOf",b.languages))},dependencies:[he.mk,he.sg,V.rH,V.Od],styles:["nav[_ngcontent-%COMP%]{border-bottom:1px solid hsla(0,0%,100%,.07);box-shadow:0 2.2px 2.2px #00000012,0 5.3px 5.3px #0000000d,0 10px 10px #0000000a,0 17.9px 17.9px #0000000a,0 33.4px 33.4px #00000008,0 80px 80px #00000005}"]})}return a})();const Je=[{path:"application",loadChildren:()=>Promise.all([D.e(8592),D.e(8270)]).then(D.bind(D,8270)).then(a=>a.ApplicationModule)},{path:"v2",loadChildren:()=>Promise.all([D.e(6073),D.e(8592),D.e(3819)]).then(D.bind(D,3819)).then(a=>a.PersonalModule)},{path:"audios",loadChildren:()=>Promise.all([D.e(6619),D.e(4859)]).then(D.bind(D,870)).then(a=>a.AudiosModule)},{path:"books",loadChildren:()=>Promise.all([D.e(6619),D.e(1839)]).then(D.bind(D,1839)).then(a=>a.BooksModule)},{path:"bootstrap-design",loadChildren:()=>Promise.all([D.e(6619),D.e(5170),D.e(8521)]).then(D.bind(D,8521)).then(a=>a.BootstrapDesignModule)},{path:"cocktail",loadChildren:()=>Promise.all([D.e(6619),D.e(7539)]).then(D.bind(D,7539)).then(a=>a.CocktailModule)},{path:"cookbook",loadChildren:()=>Promise.all([D.e(6619),D.e(3261)]).then(D.bind(D,3261)).then(a=>a.CookBookModule)},{path:"covid",loadChildren:()=>Promise.all([D.e(6619),D.e(8592),D.e(3980)]).then(D.bind(D,3980)).then(a=>a.CovidModule)},{path:"github",loadChildren:()=>Promise.all([D.e(6619),D.e(6506),D.e(8592),D.e(8580)]).then(D.bind(D,8580)).then(a=>a.GithubModule)},{path:"hacker-ranks",loadChildren:()=>Promise.all([D.e(5238),D.e(8592),D.e(2737)]).then(D.bind(D,2737)).then(a=>a.HackerRanksModule)},{path:"itunes",loadChildren:()=>Promise.all([D.e(6619),D.e(94)]).then(D.bind(D,94)).then(a=>a.ItunesModule)},{path:"movies",loadChildren:()=>Promise.all([D.e(6619),D.e(8592),D.e(9045)]).then(D.bind(D,9045)).then(a=>a.MoviesModule)},{path:"encapsulating",loadChildren:()=>D.e(4333).then(D.bind(D,4333)).then(a=>a.EncapsulatingModule)},{path:"sports",loadChildren:()=>Promise.all([D.e(6619),D.e(7968)]).then(D.bind(D,7968)).then(a=>a.SportsModule)},{path:"shop",loadChildren:()=>Promise.all([D.e(8592),D.e(3787)]).then(D.bind(D,3787)).then(a=>a.ShopModule)},{path:"store",loadChildren:()=>D.e(9065).then(D.bind(D,9065)).then(a=>a.StoreModule)},{path:"ngrx-store",loadChildren:()=>D.e(2138).then(D.bind(D,2138)).then(a=>a.NgrxStoreModule)},{path:"survey",loadChildren:()=>D.e(1801).then(D.bind(D,1801)).then(a=>a.SurveyPollVoterPridictionModule)},{path:"abstract-animation",loadChildren:()=>D.e(2792).then(D.bind(D,2792)).then(a=>a.AbstractAnimationModule)},{path:"animation-game",loadChildren:()=>D.e(6295).then(D.bind(D,6295)).then(a=>a.AnimationGameModule)},{path:"responsive-site",loadChildren:()=>D.e(6085).then(D.bind(D,6085)).then(a=>a.ResponsiveSiteModule)},{path:"mockApi",loadChildren:()=>D.e(7784).then(D.bind(D,7784)).then(a=>a.MockapiModule)},{path:"routeReuse",loadChildren:()=>D.e(772).then(D.bind(D,772)).then(a=>a.RouteReuseStrategyTutsModule)},{path:"sample",loadChildren:()=>D.e(1827).then(D.bind(D,1827)).then(a=>a.SampleModule)},{path:"navigations",component:(()=>{class a{constructor(c){this.animationService=c,this.routes=[{path:"resume"},{path:"my-site"},{path:"../personal",name:"Personal"},{path:"form"},{path:"svg"},{path:"svg/customize"},{path:"task"},{path:"unit-testing"}],this.links=[{name:"Home",url:["home"],iconClass:"fa fa-home"},{name:"About",url:["/navigations/form/invoice"],iconClass:"fa fa-user-circle"}],this.animationService.setRouteAnimation(1)}ngOnInit(){}getRouteAnimation(c){return c.activatedRouteData.animation}static#e=this.\u0275fac=function(v){return new(v||a)(C.Y36(le.Y))};static#t=this.\u0275cmp=C.Xpm({type:a,selectors:[["app-navigations"]],decls:3,vars:2,consts:[[3,"routes","template"]],template:function(v,b){1&v&&(C._UZ(0,"app-navbar",0),C.TgZ(1,"main"),C._UZ(2,"router-outlet"),C.qZA()),2&v&&C.Q6J("routes",b.routes)("template","LIGHT")},dependencies:[V.lC,je],data:{animation:[Y]}})}return a})(),children:[{path:"my-site",loadChildren:()=>D.e(7391).then(D.bind(D,7391)).then(a=>a.MysiteModule)},{path:"svg",loadChildren:()=>D.e(3971).then(D.bind(D,3971)).then(a=>a.SvgRendererModule)},{path:"task",loadChildren:()=>Promise.all([D.e(5238),D.e(8592),D.e(5470)]).then(D.bind(D,5470)).then(a=>a.TaskModule)},{path:"unit-testing",loadChildren:()=>D.e(4376).then(D.bind(D,4376)).then(a=>a.UnitTestingModule)}]},{path:"apps",loadChildren:()=>Promise.all([D.e(5170),D.e(4524),D.e(8592),D.e(7071)]).then(D.bind(D,7071)).then(a=>a.UsefullAppsModule)},{path:"library-ex",loadChildren:()=>Promise.all([D.e(5238),D.e(5170),D.e(4524),D.e(8592),D.e(2943)]).then(D.bind(D,2943)).then(a=>a.LibraryExModule)},{path:"firebase",loadChildren:()=>Promise.all([D.e(5170),D.e(4524),D.e(8592),D.e(7230)]).then(D.bind(D,7230)).then(a=>a.FirebaseModule)},{path:"tutorials",loadChildren:()=>Promise.all([D.e(5170),D.e(42)]).then(D.bind(D,42)).then(a=>a.TutorialsModule)},{path:"css",loadChildren:()=>Promise.all([D.e(5238),D.e(8592),D.e(1076)]).then(D.bind(D,1076)).then(a=>a.CssLearnModule)},{path:"code-task",loadChildren:()=>D.e(3724).then(D.bind(D,3724)).then(a=>a.CodeTaskModule)},{path:"custom",loadComponent:(a=(0,J.Z)(function*(){return(yield Promise.all([D.e(5238),D.e(8592),D.e(8738)]).then(D.bind(D,8738))).CustomComponent}),function(){return a.apply(this,arguments)})},{path:"declarative",loadChildren:function(){var a=(0,J.Z)(function*(){return(yield D.e(8123).then(D.bind(D,8123))).DeclarativeModule});return function(){return a.apply(this,arguments)}}()},{path:"sidenav",loadChildren:function(){var a=(0,J.Z)(function*(){return(yield D.e(1592).then(D.bind(D,1592))).SidenavModule});return function(){return a.apply(this,arguments)}}()},{path:"certificate",loadChildren:function(){var a=(0,J.Z)(function*(){return(yield D.e(1918).then(D.bind(D,1918))).CertificateModule});return function(){return a.apply(this,arguments)}}()},{path:"systems",loadChildren:function(){var a=(0,J.Z)(function*(){return(yield D.e(8589).then(D.bind(D,8589))).SystemsModule});return function(){return a.apply(this,arguments)}}()},{path:"assignment",loadChildren:function(){var a=(0,J.Z)(function*(){return(yield Promise.all([D.e(8592),D.e(8296)]).then(D.bind(D,8296))).AssignmentModule});return function(){return a.apply(this,arguments)}}()},{path:"",loadChildren:function(){var a=(0,J.Z)(function*(){return(yield Promise.all([D.e(5238),D.e(6073),D.e(8592),D.e(8535)]).then(D.bind(D,8535))).WebsiteModule});return function(){return a.apply(this,arguments)}}()},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:""}];var a;let Le=(()=>{class a{static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275mod=C.oAB({type:a});static#n=this.\u0275inj=C.cJS({imports:[V.Bz.forRoot(Je,{anchorScrolling:"enabled",scrollPositionRestoration:"enabled",useHash:!1}),V.Bz]})}return a})();var Me=D(529);let yt=(()=>{class a{constructor(c){this.http=c,this.CONFIGURATION_URL="assets/config/configuration.json"}loadConfiguration(){return this.http.get(this.CONFIGURATION_URL).toPromise().then(c=>(this.configuration=c,c)).catch(c=>{console.error(c)})}getConfiguration(){return this.configuration}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(Me.eN))};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var Et=D(7777),Ye=D(8311);function Ot(a,l){if(1&a){const c=C.EpF();C.TgZ(0,"div",1),C.NdJ("click",function(){C.CHM(c);const b=C.oxw();return C.KtG(b.showNotification=!b.showNotification)}),C.TgZ(1,"p"),C._uU(2),C.qZA()()}if(2&a){const c=C.oxw();C.xp6(2),C.Oqu(c.notification)}}let At=(()=>{class a{constructor(c){this.notificationService=c,this.notificationService.notification$.subscribe(v=>{this.notification=v,console.log(this.notification),this.showNotification=!0})}ngOnInit(){}static#e=this.\u0275fac=function(v){return new(v||a)(C.Y36(Ye.g))};static#t=this.\u0275cmp=C.Xpm({type:a,selectors:[["app-notification"]],decls:1,vars:1,consts:[["class","notification",3,"click",4,"ngIf"],[1,"notification",3,"click"]],template:function(v,b){1&v&&C.YNc(0,Ot,3,1,"div",0),2&v&&C.Q6J("ngIf",b.notification&&b.showNotification)},dependencies:[he.O5],styles:[".notification[_ngcontent-%COMP%]{position:absolute;z-index:1;top:5px;line-height:20px;text-align:center;right:5px;background:linear-gradient(-90deg,#cb5cd2,#cc3fa0);color:#fff;font-style:oblique;text-transform:capitalize;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f;min-height:20px;min-width:160px;max-width:300px;padding:15px;cursor:pointer}"]})}return a})(),Xe=(()=>{class a{constructor(c,v,b){this.configurationService=c,this.jsonPlaceholderService=v,this.route=b,this.title="portfolio-all-in-one",this.version=C.q4F.major}ngOnInit(){window.addEventListener("beforeinstallprompt",c=>{console.log("'beforeinstallprompt' event was fired.")})}static#e=this.\u0275fac=function(v){return new(v||a)(C.Y36(yt),C.Y36(Et.t),C.Y36(V.gz))};static#t=this.\u0275cmp=C.Xpm({type:a,selectors:[["app-root"]],decls:2,vars:0,template:function(v,b){1&v&&C._UZ(0,"app-notification")(1,"router-outlet")},dependencies:[V.lC,At]})}return a})();function ut(a){return new C.vHH(3e3,!1)}function Ur(){return typeof window<"u"&&typeof window.document<"u"}function ti(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function vr(a){switch(a.length){case 0:return new q.ZN;case 1:return a[0];default:return new q.ZE(a)}}function ni(a,l,c,v,b=new Map,H=new Map){const ne=[],ge=[];let be=-1,We=null;if(v.forEach(mt=>{const Ht=mt.get("offset"),Dn=Ht==be,wn=Dn&&We||new Map;mt.forEach((tn,yn)=>{let Er=yn,jn=tn;if("offset"!==yn)switch(Er=l.normalizePropertyName(Er,ne),jn){case q.k1:jn=b.get(yn);break;case q.l3:jn=H.get(yn);break;default:jn=l.normalizeStyleValue(yn,Er,jn,ne)}wn.set(Er,jn)}),Dn||ge.push(wn),We=wn,be=Ht}),ne.length)throw function ir(a){return new C.vHH(3502,!1)}();return ge}function or(a,l,c,v){switch(l){case"start":a.onStart(()=>v(c&&wi(c,"start",a)));break;case"done":a.onDone(()=>v(c&&wi(c,"done",a)));break;case"destroy":a.onDestroy(()=>v(c&&wi(c,"destroy",a)))}}function wi(a,l,c){const H=Un(a.element,a.triggerName,a.fromState,a.toState,l||a.phaseName,c.totalTime??a.totalTime,!!c.disabled),ne=a._data;return null!=ne&&(H._data=ne),H}function Un(a,l,c,v,b="",H=0,ne){return{element:a,triggerName:l,fromState:c,toState:v,phaseName:b,totalTime:H,disabled:!!ne}}function Vr(a,l,c){let v=a.get(l);return v||a.set(l,v=c),v}function er(a){const l=a.indexOf(":");return[a.substring(1,l),a.slice(l+1)]}let yi=(a,l)=>!1,Yr=(a,l,c)=>[],Qe=null;function Ie(a){const l=a.parentNode||a.host;return l===Qe?null:l}(ti()||typeof Element<"u")&&(Ur()?(Qe=(()=>document.documentElement)(),yi=(a,l)=>{for(;l;){if(l===a)return!0;l=Ie(l)}return!1}):yi=(a,l)=>a.contains(l),Yr=(a,l,c)=>{if(c)return Array.from(a.querySelectorAll(l));const v=a.querySelector(l);return v?[v]:[]});let de=null,me=!1;const Mt=yi,Bt=Yr;let we=(()=>{class a{validateStyleProperty(c){return function De(a){de||(de=function Ne(){return typeof document<"u"?document.body:null}()||{},me=!!de.style&&"WebkitAppearance"in de.style);let l=!0;return de.style&&!function bt(a){return"ebkit"==a.substring(1,6)}(a)&&(l=a in de.style,!l&&me&&(l="Webkit"+a.charAt(0).toUpperCase()+a.slice(1)in de.style)),l}(c)}matchesElement(c,v){return!1}containsElement(c,v){return Mt(c,v)}getParentElement(c){return Ie(c)}query(c,v,b){return Bt(c,v,b)}computeStyle(c,v,b){return b||""}animate(c,v,b,H,ne,ge=[],be){return new q.ZN(b,H)}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac}),a})(),ue=(()=>{class a{}return a.NOOP=new we,a})();const Se=1e3,Qt="ng-enter",$n="ng-leave",pr="ng-trigger",fi=".ng-trigger",ct="ng-animating",Ze=".ng-animating";function Ct(a){if("number"==typeof a)return a;const l=a.match(/^(-?[\.\d]+)(m?s)/);return!l||l.length<2?0:Wt(parseFloat(l[1]),l[2])}function Wt(a,l){return"s"===l?a*Se:a}function Tn(a,l,c){return a.hasOwnProperty("duration")?a:function qn(a,l,c){let b,H=0,ne="";if("string"==typeof a){const ge=a.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ge)return l.push(ut()),{duration:0,delay:0,easing:""};b=Wt(parseFloat(ge[1]),ge[2]);const be=ge[3];null!=be&&(H=Wt(parseFloat(be),ge[4]));const We=ge[5];We&&(ne=We)}else b=a;if(!c){let ge=!1,be=l.length;b<0&&(l.push(function qe(){return new C.vHH(3100,!1)}()),ge=!0),H<0&&(l.push(function xt(){return new C.vHH(3101,!1)}()),ge=!0),ge&&l.splice(be,0,ut())}return{duration:b,delay:H,easing:ne}}(a,l,c)}function en(a,l={}){return Object.keys(a).forEach(c=>{l[c]=a[c]}),l}function gr(a){const l=new Map;return Object.keys(a).forEach(c=>{l.set(c,a[c])}),l}function Ar(a,l=new Map,c){if(c)for(let[v,b]of c)l.set(v,b);for(let[v,b]of a)l.set(v,b);return l}function Ns(a,l,c){return c?l+":"+c+";":""}function Ls(a){let l="";for(let c=0;c<a.style.length;c++){const v=a.style.item(c);l+=Ns(0,v,a.style.getPropertyValue(v))}for(const c in a.style)a.style.hasOwnProperty(c)&&!c.startsWith("_")&&(l+=Ns(0,Ki(c),a.style[c]));a.setAttribute("style",l)}function pi(a,l,c){a.style&&(l.forEach((v,b)=>{const H=wr(b);c&&!c.has(b)&&c.set(b,a.style[H]),a.style[H]=v}),ti()&&Ls(a))}function Mr(a,l){a.style&&(l.forEach((c,v)=>{const b=wr(v);a.style[b]=""}),ti()&&Ls(a))}function Rt(a){return Array.isArray(a)?1==a.length?a[0]:(0,q.vP)(a):a}const cn=new RegExp("{{\\s*(.+?)\\s*}}","g");function Cn(a){let l=[];if("string"==typeof a){let c;for(;c=cn.exec(a);)l.push(c[1]);cn.lastIndex=0}return l}function fn(a,l,c){const v=a.toString(),b=v.replace(cn,(H,ne)=>{let ge=l[ne];return null==ge&&(c.push(function hn(a){return new C.vHH(3003,!1)}()),ge=""),ge.toString()});return b==v?a:b}function lr(a){const l=[];let c=a.next();for(;!c.done;)l.push(c.value),c=a.next();return l}const mr=/-+([a-z0-9])/g;function wr(a){return a.replace(mr,(...l)=>l[1].toUpperCase())}function Ki(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Bn(a,l,c){switch(l.type){case 7:return a.visitTrigger(l,c);case 0:return a.visitState(l,c);case 1:return a.visitTransition(l,c);case 2:return a.visitSequence(l,c);case 3:return a.visitGroup(l,c);case 4:return a.visitAnimate(l,c);case 5:return a.visitKeyframes(l,c);case 6:return a.visitStyle(l,c);case 8:return a.visitReference(l,c);case 9:return a.visitAnimateChild(l,c);case 10:return a.visitAnimateRef(l,c);case 11:return a.visitQuery(l,c);case 12:return a.visitStagger(l,c);default:throw function Jn(a){return new C.vHH(3004,!1)}()}}function Rn(a,l){return window.getComputedStyle(a)[l]}const jt="*";function dn(a,l){const c=[];return"string"==typeof a?a.split(/\s*,\s*/).forEach(v=>function dr(a,l,c){if(":"==a[0]){const be=function yr(a,l){switch(a){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(c,v)=>parseFloat(v)>parseFloat(c);case":decrement":return(c,v)=>parseFloat(v)<parseFloat(c);default:return l.push(function kn(a){return new C.vHH(3016,!1)}()),"* => *"}}(a,c);if("function"==typeof be)return void l.push(be);a=be}const v=a.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==v||v.length<4)return c.push(function Pt(a){return new C.vHH(3015,!1)}()),l;const b=v[1],H=v[2],ne=v[3];l.push(Tr(b,ne));"<"==H[0]&&!(b==jt&&ne==jt)&&l.push(Tr(ne,b))}(v,c,l)):c.push(a),c}const ai=new Set(["true","1"]),ur=new Set(["false","0"]);function Tr(a,l){const c=ai.has(a)||ur.has(a),v=ai.has(l)||ur.has(l);return(b,H)=>{let ne=a==jt||a==b,ge=l==jt||l==H;return!ne&&c&&"boolean"==typeof b&&(ne=b?ai.has(a):ur.has(a)),!ge&&v&&"boolean"==typeof H&&(ge=H?ai.has(l):ur.has(l)),ne&&ge}}const Qr=new RegExp("s*:selfs*,?","g");function So(a,l,c,v){return new En(a).build(l,c,v)}class En{constructor(l){this._driver=l}build(l,c,v){const b=new ss(c);return this._resetContextStyleTimingState(b),Bn(this,Rt(l),b)}_resetContextStyleTimingState(l){l.currentQuerySelector="",l.collectedStyles=new Map,l.collectedStyles.set("",new Map),l.currentTime=0}visitTrigger(l,c){let v=c.queryCount=0,b=c.depCount=0;const H=[],ne=[];return"@"==l.name.charAt(0)&&c.errors.push(function $t(){return new C.vHH(3006,!1)}()),l.definitions.forEach(ge=>{if(this._resetContextStyleTimingState(c),0==ge.type){const be=ge,We=be.name;We.toString().split(/\s*,\s*/).forEach(mt=>{be.name=mt,H.push(this.visitState(be,c))}),be.name=We}else if(1==ge.type){const be=this.visitTransition(ge,c);v+=be.queryCount,b+=be.depCount,ne.push(be)}else c.errors.push(function On(){return new C.vHH(3007,!1)}())}),{type:7,name:l.name,states:H,transitions:ne,queryCount:v,depCount:b,options:null}}visitState(l,c){const v=this.visitStyle(l.styles,c),b=l.options&&l.options.params||null;if(v.containsDynamicStyles){const H=new Set,ne=b||{};v.styles.forEach(ge=>{ge instanceof Map&&ge.forEach(be=>{Cn(be).forEach(We=>{ne.hasOwnProperty(We)||H.add(We)})})}),H.size&&(lr(H.values()),c.errors.push(function gn(a,l){return new C.vHH(3008,!1)}()))}return{type:0,name:l.name,style:v,options:b?{params:b}:null}}visitTransition(l,c){c.queryCount=0,c.depCount=0;const v=Bn(this,Rt(l.animation),c);return{type:1,matchers:dn(l.expr,c.errors),animation:v,queryCount:c.queryCount,depCount:c.depCount,options:qr(l.options)}}visitSequence(l,c){return{type:2,steps:l.steps.map(v=>Bn(this,v,c)),options:qr(l.options)}}visitGroup(l,c){const v=c.currentTime;let b=0;const H=l.steps.map(ne=>{c.currentTime=v;const ge=Bn(this,ne,c);return b=Math.max(b,c.currentTime),ge});return c.currentTime=b,{type:3,steps:H,options:qr(l.options)}}visitAnimate(l,c){const v=function yo(a,l){if(a.hasOwnProperty("duration"))return a;if("number"==typeof a)return os(Tn(a,l).duration,0,"");const c=a;if(c.split(/\s+/).some(H=>"{"==H.charAt(0)&&"{"==H.charAt(1))){const H=os(0,0,"");return H.dynamic=!0,H.strValue=c,H}const b=Tn(c,l);return os(b.duration,b.delay,b.easing)}(l.timings,c.errors);c.currentAnimateTimings=v;let b,H=l.styles?l.styles:(0,q.oB)({});if(5==H.type)b=this.visitKeyframes(H,c);else{let ne=l.styles,ge=!1;if(!ne){ge=!0;const We={};v.easing&&(We.easing=v.easing),ne=(0,q.oB)(We)}c.currentTime+=v.duration+v.delay;const be=this.visitStyle(ne,c);be.isEmptyStep=ge,b=be}return c.currentAnimateTimings=null,{type:4,timings:v,style:b,options:null}}visitStyle(l,c){const v=this._makeStyleAst(l,c);return this._validateStyleAst(v,c),v}_makeStyleAst(l,c){const v=[],b=Array.isArray(l.styles)?l.styles:[l.styles];for(let ge of b)"string"==typeof ge?ge===q.l3?v.push(ge):c.errors.push(new C.vHH(3002,!1)):v.push(gr(ge));let H=!1,ne=null;return v.forEach(ge=>{if(ge instanceof Map&&(ge.has("easing")&&(ne=ge.get("easing"),ge.delete("easing")),!H))for(let be of ge.values())if(be.toString().indexOf("{{")>=0){H=!0;break}}),{type:6,styles:v,easing:ne,offset:l.offset,containsDynamicStyles:H,options:null}}_validateStyleAst(l,c){const v=c.currentAnimateTimings;let b=c.currentTime,H=c.currentTime;v&&H>0&&(H-=v.duration+v.delay),l.styles.forEach(ne=>{"string"!=typeof ne&&ne.forEach((ge,be)=>{const We=c.collectedStyles.get(c.currentQuerySelector),mt=We.get(be);let Ht=!0;mt&&(H!=b&&H>=mt.startTime&&b<=mt.endTime&&(c.errors.push(function bn(a,l,c,v,b){return new C.vHH(3010,!1)}()),Ht=!1),H=mt.startTime),Ht&&We.set(be,{startTime:H,endTime:b}),c.options&&function Mn(a,l,c){const v=l.params||{},b=Cn(a);b.length&&b.forEach(H=>{v.hasOwnProperty(H)||c.push(function It(a){return new C.vHH(3001,!1)}())})}(ge,c.options,c.errors)})})}visitKeyframes(l,c){const v={type:5,styles:[],options:null};if(!c.currentAnimateTimings)return c.errors.push(function un(){return new C.vHH(3011,!1)}()),v;let H=0;const ne=[];let ge=!1,be=!1,We=0;const mt=l.steps.map(jn=>{const An=this._makeStyleAst(jn,c);let Di=null!=An.offset?An.offset:function hr(a){if("string"==typeof a)return null;let l=null;if(Array.isArray(a))a.forEach(c=>{if(c instanceof Map&&c.has("offset")){const v=c;l=parseFloat(v.get("offset")),v.delete("offset")}});else if(a instanceof Map&&a.has("offset")){const c=a;l=parseFloat(c.get("offset")),c.delete("offset")}return l}(An.styles),Oi=0;return null!=Di&&(H++,Oi=An.offset=Di),be=be||Oi<0||Oi>1,ge=ge||Oi<We,We=Oi,ne.push(Oi),An});be&&c.errors.push(function ei(){return new C.vHH(3012,!1)}()),ge&&c.errors.push(function vt(){return new C.vHH(3200,!1)}());const Ht=l.steps.length;let Dn=0;H>0&&H<Ht?c.errors.push(function at(){return new C.vHH(3202,!1)}()):0==H&&(Dn=1/(Ht-1));const wn=Ht-1,tn=c.currentTime,yn=c.currentAnimateTimings,Er=yn.duration;return mt.forEach((jn,An)=>{const Di=Dn>0?An==wn?1:Dn*An:ne[An],Oi=Di*Er;c.currentTime=tn+yn.delay+Oi,yn.duration=Oi,this._validateStyleAst(jn,c),jn.offset=Di,v.styles.push(jn)}),v}visitReference(l,c){return{type:8,animation:Bn(this,Rt(l.animation),c),options:qr(l.options)}}visitAnimateChild(l,c){return c.depCount++,{type:9,options:qr(l.options)}}visitAnimateRef(l,c){return{type:10,animation:this.visitReference(l.animation,c),options:qr(l.options)}}visitQuery(l,c){const v=c.currentQuerySelector,b=l.options||{};c.queryCount++,c.currentQuery=l;const[H,ne]=function Is(a){const l=!!a.split(/\s*,\s*/).find(c=>":self"==c);return l&&(a=a.replace(Qr,"")),a=a.replace(/@\*/g,fi).replace(/@\w+/g,c=>fi+"-"+c.slice(1)).replace(/:animating/g,Ze),[a,l]}(l.selector);c.currentQuerySelector=v.length?v+" "+H:H,Vr(c.collectedStyles,c.currentQuerySelector,new Map);const ge=Bn(this,Rt(l.animation),c);return c.currentQuery=null,c.currentQuerySelector=v,{type:11,selector:H,limit:b.limit||0,optional:!!b.optional,includeSelf:ne,animation:ge,originalSelector:l.selector,options:qr(l.options)}}visitStagger(l,c){c.currentQuery||c.errors.push(function Fe(){return new C.vHH(3013,!1)}());const v="full"===l.timings?{duration:0,delay:0,easing:"full"}:Tn(l.timings,c.errors,!0);return{type:12,animation:Bn(this,Rt(l.animation),c),timings:v,options:null}}}class ss{constructor(l){this.errors=l,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function qr(a){return a?(a=en(a)).params&&(a.params=function Gs(a){return a?en(a):null}(a.params)):a={},a}function os(a,l,c){return{duration:a,delay:l,easing:c}}function Gn(a,l,c,v,b,H,ne=null,ge=!1){return{type:1,element:a,keyframes:l,preStyleProps:c,postStyleProps:v,duration:b,delay:H,totalTime:b+H,easing:ne,subTimeline:ge}}class Ws{constructor(){this._map=new Map}get(l){return this._map.get(l)||[]}append(l,c){let v=this._map.get(l);v||this._map.set(l,v=[]),v.push(...c)}has(l){return this._map.has(l)}clear(){this._map.clear()}}const Cl=new RegExp(":enter","g"),bo=new RegExp(":leave","g");function oo(a,l,c,v,b,H=new Map,ne=new Map,ge,be,We=[]){return(new Fs).buildKeyframes(a,l,c,v,b,H,ne,ge,be,We)}class Fs{buildKeyframes(l,c,v,b,H,ne,ge,be,We,mt=[]){We=We||new Ws;const Ht=new _o(l,c,We,b,H,mt,[]);Ht.options=be;const Dn=be.delay?Ct(be.delay):0;Ht.currentTimeline.delayNextStep(Dn),Ht.currentTimeline.setStyles([ne],null,Ht.errors,be),Bn(this,v,Ht);const wn=Ht.timelines.filter(tn=>tn.containsAnimation());if(wn.length&&ge.size){let tn;for(let yn=wn.length-1;yn>=0;yn--){const Er=wn[yn];if(Er.element===c){tn=Er;break}}tn&&!tn.allowOnlyTimelineStyles()&&tn.setStyles([ge],null,Ht.errors,be)}return wn.length?wn.map(tn=>tn.buildKeyframes()):[Gn(c,[],[],[],0,Dn,"",!1)]}visitTrigger(l,c){}visitState(l,c){}visitTransition(l,c){}visitAnimateChild(l,c){const v=c.subInstructions.get(c.element);if(v){const b=c.createSubContext(l.options),H=c.currentTimeline.currentTime,ne=this._visitSubInstructions(v,b,b.options);H!=ne&&c.transformIntoNewTimeline(ne)}c.previousNode=l}visitAnimateRef(l,c){const v=c.createSubContext(l.options);v.transformIntoNewTimeline(),this._applyAnimationRefDelays([l.options,l.animation.options],c,v),this.visitReference(l.animation,v),c.transformIntoNewTimeline(v.currentTimeline.currentTime),c.previousNode=l}_applyAnimationRefDelays(l,c,v){for(const b of l){const H=b?.delay;if(H){const ne="number"==typeof H?H:Ct(fn(H,b?.params??{},c.errors));v.delayNextStep(ne)}}}_visitSubInstructions(l,c,v){let H=c.currentTimeline.currentTime;const ne=null!=v.duration?Ct(v.duration):null,ge=null!=v.delay?Ct(v.delay):null;return 0!==ne&&l.forEach(be=>{const We=c.appendInstructionToTimeline(be,ne,ge);H=Math.max(H,We.duration+We.delay)}),H}visitReference(l,c){c.updateOptions(l.options,!0),Bn(this,l.animation,c),c.previousNode=l}visitSequence(l,c){const v=c.subContextCount;let b=c;const H=l.options;if(H&&(H.params||H.delay)&&(b=c.createSubContext(H),b.transformIntoNewTimeline(),null!=H.delay)){6==b.previousNode.type&&(b.currentTimeline.snapshotCurrentStyles(),b.previousNode=la);const ne=Ct(H.delay);b.delayNextStep(ne)}l.steps.length&&(l.steps.forEach(ne=>Bn(this,ne,b)),b.currentTimeline.applyStylesToKeyframe(),b.subContextCount>v&&b.transformIntoNewTimeline()),c.previousNode=l}visitGroup(l,c){const v=[];let b=c.currentTimeline.currentTime;const H=l.options&&l.options.delay?Ct(l.options.delay):0;l.steps.forEach(ne=>{const ge=c.createSubContext(l.options);H&&ge.delayNextStep(H),Bn(this,ne,ge),b=Math.max(b,ge.currentTimeline.currentTime),v.push(ge.currentTimeline)}),v.forEach(ne=>c.currentTimeline.mergeTimelineCollectedStyles(ne)),c.transformIntoNewTimeline(b),c.previousNode=l}_visitTiming(l,c){if(l.dynamic){const v=l.strValue;return Tn(c.params?fn(v,c.params,c.errors):v,c.errors)}return{duration:l.duration,delay:l.delay,easing:l.easing}}visitAnimate(l,c){const v=c.currentAnimateTimings=this._visitTiming(l.timings,c),b=c.currentTimeline;v.delay&&(c.incrementTime(v.delay),b.snapshotCurrentStyles());const H=l.style;5==H.type?this.visitKeyframes(H,c):(c.incrementTime(v.duration),this.visitStyle(H,c),b.applyStylesToKeyframe()),c.currentAnimateTimings=null,c.previousNode=l}visitStyle(l,c){const v=c.currentTimeline,b=c.currentAnimateTimings;!b&&v.hasCurrentStyleProperties()&&v.forwardFrame();const H=b&&b.easing||l.easing;l.isEmptyStep?v.applyEmptyStep(H):v.setStyles(l.styles,H,c.errors,c.options),c.previousNode=l}visitKeyframes(l,c){const v=c.currentAnimateTimings,b=c.currentTimeline.duration,H=v.duration,ge=c.createSubContext().currentTimeline;ge.easing=v.easing,l.styles.forEach(be=>{ge.forwardTime((be.offset||0)*H),ge.setStyles(be.styles,be.easing,c.errors,c.options),ge.applyStylesToKeyframe()}),c.currentTimeline.mergeTimelineCollectedStyles(ge),c.transformIntoNewTimeline(b+H),c.previousNode=l}visitQuery(l,c){const v=c.currentTimeline.currentTime,b=l.options||{},H=b.delay?Ct(b.delay):0;H&&(6===c.previousNode.type||0==v&&c.currentTimeline.hasCurrentStyleProperties())&&(c.currentTimeline.snapshotCurrentStyles(),c.previousNode=la);let ne=v;const ge=c.invokeQuery(l.selector,l.originalSelector,l.limit,l.includeSelf,!!b.optional,c.errors);c.currentQueryTotal=ge.length;let be=null;ge.forEach((We,mt)=>{c.currentQueryIndex=mt;const Ht=c.createSubContext(l.options,We);H&&Ht.delayNextStep(H),We===c.element&&(be=Ht.currentTimeline),Bn(this,l.animation,Ht),Ht.currentTimeline.applyStylesToKeyframe(),ne=Math.max(ne,Ht.currentTimeline.currentTime)}),c.currentQueryIndex=0,c.currentQueryTotal=0,c.transformIntoNewTimeline(ne),be&&(c.currentTimeline.mergeTimelineCollectedStyles(be),c.currentTimeline.snapshotCurrentStyles()),c.previousNode=l}visitStagger(l,c){const v=c.parentContext,b=c.currentTimeline,H=l.timings,ne=Math.abs(H.duration),ge=ne*(c.currentQueryTotal-1);let be=ne*c.currentQueryIndex;switch(H.duration<0?"reverse":H.easing){case"reverse":be=ge-be;break;case"full":be=v.currentStaggerTime}const mt=c.currentTimeline;be&&mt.delayNextStep(be);const Ht=mt.currentTime;Bn(this,l.animation,c),c.previousNode=l,v.currentStaggerTime=b.currentTime-Ht+(b.startTime-v.currentTimeline.startTime)}}const la={};class _o{constructor(l,c,v,b,H,ne,ge,be){this._driver=l,this.element=c,this.subInstructions=v,this._enterClassName=b,this._leaveClassName=H,this.errors=ne,this.timelines=ge,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=la,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=be||new Bi(this._driver,c,0),ge.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(l,c){if(!l)return;const v=l;let b=this.options;null!=v.duration&&(b.duration=Ct(v.duration)),null!=v.delay&&(b.delay=Ct(v.delay));const H=v.params;if(H){let ne=b.params;ne||(ne=this.options.params={}),Object.keys(H).forEach(ge=>{(!c||!ne.hasOwnProperty(ge))&&(ne[ge]=fn(H[ge],ne,this.errors))})}}_copyOptions(){const l={};if(this.options){const c=this.options.params;if(c){const v=l.params={};Object.keys(c).forEach(b=>{v[b]=c[b]})}}return l}createSubContext(l=null,c,v){const b=c||this.element,H=new _o(this._driver,b,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(b,v||0));return H.previousNode=this.previousNode,H.currentAnimateTimings=this.currentAnimateTimings,H.options=this._copyOptions(),H.updateOptions(l),H.currentQueryIndex=this.currentQueryIndex,H.currentQueryTotal=this.currentQueryTotal,H.parentContext=this,this.subContextCount++,H}transformIntoNewTimeline(l){return this.previousNode=la,this.currentTimeline=this.currentTimeline.fork(this.element,l),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(l,c,v){const b={duration:c??l.duration,delay:this.currentTimeline.currentTime+(v??0)+l.delay,easing:""},H=new Qi(this._driver,l.element,l.keyframes,l.preStyleProps,l.postStyleProps,b,l.stretchStartingKeyframe);return this.timelines.push(H),b}incrementTime(l){this.currentTimeline.forwardTime(this.currentTimeline.duration+l)}delayNextStep(l){l>0&&this.currentTimeline.delayNextStep(l)}invokeQuery(l,c,v,b,H,ne){let ge=[];if(b&&ge.push(this.element),l.length>0){l=(l=l.replace(Cl,"."+this._enterClassName)).replace(bo,"."+this._leaveClassName);let We=this._driver.query(this.element,l,1!=v);0!==v&&(We=v<0?We.slice(We.length+v,We.length):We.slice(0,v)),ge.push(...We)}return!H&&0==ge.length&&ne.push(function ft(a){return new C.vHH(3014,!1)}()),ge}}class Bi{constructor(l,c,v,b){this._driver=l,this.element=c,this.startTime=v,this._elementTimelineStylesLookup=b,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(c),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(c,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(l){const c=1===this._keyframes.size&&this._pendingStyles.size;this.duration||c?(this.forwardTime(this.currentTime+l),c&&this.snapshotCurrentStyles()):this.startTime+=l}fork(l,c){return this.applyStylesToKeyframe(),new Bi(this._driver,l,c||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(l){this.applyStylesToKeyframe(),this.duration=l,this._loadKeyframe()}_updateStyle(l,c){this._localTimelineStyles.set(l,c),this._globalTimelineStyles.set(l,c),this._styleSummary.set(l,{time:this.currentTime,value:c})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(l){l&&this._previousKeyframe.set("easing",l);for(let[c,v]of this._globalTimelineStyles)this._backFill.set(c,v||q.l3),this._currentKeyframe.set(c,q.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(l,c,v,b){c&&this._previousKeyframe.set("easing",c);const H=b&&b.params||{},ne=function Br(a,l){const c=new Map;let v;return a.forEach(b=>{if("*"===b){v=v||l.keys();for(let H of v)c.set(H,q.l3)}else Ar(b,c)}),c}(l,this._globalTimelineStyles);for(let[ge,be]of ne){const We=fn(be,H,v);this._pendingStyles.set(ge,We),this._localTimelineStyles.has(ge)||this._backFill.set(ge,this._globalTimelineStyles.get(ge)??q.l3),this._updateStyle(ge,We)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((l,c)=>{this._currentKeyframe.set(c,l)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((l,c)=>{this._currentKeyframe.has(c)||this._currentKeyframe.set(c,l)}))}snapshotCurrentStyles(){for(let[l,c]of this._localTimelineStyles)this._pendingStyles.set(l,c),this._updateStyle(l,c)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const l=[];for(let c in this._currentKeyframe)l.push(c);return l}mergeTimelineCollectedStyles(l){l._styleSummary.forEach((c,v)=>{const b=this._styleSummary.get(v);(!b||c.time>b.time)&&this._updateStyle(v,c.value)})}buildKeyframes(){this.applyStylesToKeyframe();const l=new Set,c=new Set,v=1===this._keyframes.size&&0===this.duration;let b=[];this._keyframes.forEach((ge,be)=>{const We=Ar(ge,new Map,this._backFill);We.forEach((mt,Ht)=>{mt===q.k1?l.add(Ht):mt===q.l3&&c.add(Ht)}),v||We.set("offset",be/this.duration),b.push(We)});const H=l.size?lr(l.values()):[],ne=c.size?lr(c.values()):[];if(v){const ge=b[0],be=new Map(ge);ge.set("offset",0),be.set("offset",1),b=[ge,be]}return Gn(this.element,b,H,ne,this.duration,this.startTime,this.easing,!1)}}class Qi extends Bi{constructor(l,c,v,b,H,ne,ge=!1){super(l,c,ne.delay),this.keyframes=v,this.preStyleProps=b,this.postStyleProps=H,this._stretchStartingKeyframe=ge,this.timings={duration:ne.duration,delay:ne.delay,easing:ne.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let l=this.keyframes,{delay:c,duration:v,easing:b}=this.timings;if(this._stretchStartingKeyframe&&c){const H=[],ne=v+c,ge=c/ne,be=Ar(l[0]);be.set("offset",0),H.push(be);const We=Ar(l[0]);We.set("offset",Ks(ge)),H.push(We);const mt=l.length-1;for(let Ht=1;Ht<=mt;Ht++){let Dn=Ar(l[Ht]);const wn=Dn.get("offset");Dn.set("offset",Ks((c+wn*v)/ne)),H.push(Dn)}v=ne,c=0,b="",l=H}return Gn(this.element,l,this.preStyleProps,this.postStyleProps,v,c,b,!0)}}function Ks(a,l=3){const c=Math.pow(10,l-1);return Math.round(a*c)/c}class vo{}const lo=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class ua extends vo{normalizePropertyName(l,c){return wr(l)}normalizeStyleValue(l,c,v,b){let H="";const ne=v.toString().trim();if(lo.has(c)&&0!==v&&"0"!==v)if("number"==typeof v)H="px";else{const ge=v.match(/^[+-]?[\d\.]+([a-z]*)$/);ge&&0==ge[1].length&&b.push(function on(a,l){return new C.vHH(3005,!1)}())}return ne+H}}function fs(a,l,c,v,b,H,ne,ge,be,We,mt,Ht,Dn){return{type:0,element:a,triggerName:l,isRemovalTransition:b,fromState:c,fromStyles:H,toState:v,toStyles:ne,timelines:ge,queriedElements:be,preStyleProps:We,postStyleProps:mt,totalTime:Ht,errors:Dn}}const Cs={};class xn{constructor(l,c,v){this._triggerName=l,this.ast=c,this._stateStyles=v}match(l,c,v,b){return function ws(a,l,c,v,b){return a.some(H=>H(l,c,v,b))}(this.ast.matchers,l,c,v,b)}buildStyles(l,c,v){let b=this._stateStyles.get("*");return void 0!==l&&(b=this._stateStyles.get(l?.toString())||b),b?b.buildStyles(c,v):new Map}build(l,c,v,b,H,ne,ge,be,We,mt){const Ht=[],Dn=this.ast.options&&this.ast.options.params||Cs,tn=this.buildStyles(v,ge&&ge.params||Cs,Ht),yn=be&&be.params||Cs,Er=this.buildStyles(b,yn,Ht),jn=new Set,An=new Map,Di=new Map,Oi="void"===b,eo={params:Ca(yn,Dn),delay:this.ast.options?.delay},Na=mt?[]:oo(l,c,this.ast.animation,H,ne,tn,Er,eo,We,Ht);let jr=0;if(Na.forEach(Co=>{jr=Math.max(Co.duration+Co.delay,jr)}),Ht.length)return fs(c,this._triggerName,v,b,Oi,tn,Er,[],[],An,Di,jr,Ht);Na.forEach(Co=>{const La=Co.element,ea=Vr(An,La,new Set);Co.preStyleProps.forEach(sl=>ea.add(sl));const Zl=Vr(Di,La,new Set);Co.postStyleProps.forEach(sl=>Zl.add(sl)),La!==c&&jn.add(La)});const Jo=lr(jn.values());return fs(c,this._triggerName,v,b,Oi,tn,Er,Na,Jo,An,Di,jr)}}function Ca(a,l){const c=en(l);for(const v in a)a.hasOwnProperty(v)&&null!=a[v]&&(c[v]=a[v]);return c}class Fr{constructor(l,c,v){this.styles=l,this.defaultParams=c,this.normalizer=v}buildStyles(l,c){const v=new Map,b=en(this.defaultParams);return Object.keys(l).forEach(H=>{const ne=l[H];null!==ne&&(b[H]=ne)}),this.styles.styles.forEach(H=>{"string"!=typeof H&&H.forEach((ne,ge)=>{ne&&(ne=fn(ne,b,c));const be=this.normalizer.normalizePropertyName(ge,c);ne=this.normalizer.normalizeStyleValue(ge,be,ne,c),v.set(ge,ne)})}),v}}class Ho{constructor(l,c,v){this.name=l,this.ast=c,this._normalizer=v,this.transitionFactories=[],this.states=new Map,c.states.forEach(b=>{this.states.set(b.name,new Fr(b.style,b.options&&b.options.params||{},v))}),uo(this.states,"true","1"),uo(this.states,"false","0"),c.transitions.forEach(b=>{this.transitionFactories.push(new xn(l,b,this.states))}),this.fallbackTransition=function vi(a,l,c){return new xn(a,{type:1,animation:{type:2,steps:[],options:null},matchers:[(ne,ge)=>!0],options:null,queryCount:0,depCount:0},l)}(l,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(l,c,v,b){return this.transitionFactories.find(ne=>ne.match(l,c,v,b))||null}matchStyles(l,c,v){return this.fallbackTransition.buildStyles(l,c,v)}}function uo(a,l,c){a.has(l)?a.has(c)||a.set(c,a.get(l)):a.has(c)&&a.set(l,a.get(c))}const ps=new Ws;class $r{constructor(l,c,v){this.bodyNode=l,this._driver=c,this._normalizer=v,this._animations=new Map,this._playersById=new Map,this.players=[]}register(l,c){const v=[],b=[],H=So(this._driver,c,v,b);if(v.length)throw function nn(a){return new C.vHH(3503,!1)}();this._animations.set(l,H)}_buildPlayer(l,c,v){const b=l.element,H=ni(0,this._normalizer,0,l.keyframes,c,v);return this._driver.animate(b,H,l.duration,l.delay,l.easing,[],!0)}create(l,c,v={}){const b=[],H=this._animations.get(l);let ne;const ge=new Map;if(H?(ne=oo(this._driver,c,H,Qt,$n,new Map,new Map,v,ps,b),ne.forEach(mt=>{const Ht=Vr(ge,mt.element,new Map);mt.postStyleProps.forEach(Dn=>Ht.set(Dn,null))})):(b.push(function Ri(){return new C.vHH(3300,!1)}()),ne=[]),b.length)throw function Kr(a){return new C.vHH(3504,!1)}();ge.forEach((mt,Ht)=>{mt.forEach((Dn,wn)=>{mt.set(wn,this._driver.computeStyle(Ht,wn,q.l3))})});const We=vr(ne.map(mt=>{const Ht=ge.get(mt.element);return this._buildPlayer(mt,new Map,Ht)}));return this._playersById.set(l,We),We.onDestroy(()=>this.destroy(l)),this.players.push(We),We}destroy(l){const c=this._getPlayer(l);c.destroy(),this._playersById.delete(l);const v=this.players.indexOf(c);v>=0&&this.players.splice(v,1)}_getPlayer(l){const c=this._playersById.get(l);if(!c)throw function Cr(a){return new C.vHH(3301,!1)}();return c}listen(l,c,v,b){const H=Un(c,"","","");return or(this._getPlayer(l),v,H,b),()=>{}}command(l,c,v,b){if("register"==v)return void this.register(l,b[0]);if("create"==v)return void this.create(l,c,b[0]||{});const H=this._getPlayer(l);switch(v){case"play":H.play();break;case"pause":H.pause();break;case"reset":H.reset();break;case"restart":H.restart();break;case"finish":H.finish();break;case"init":H.init();break;case"setPosition":H.setPosition(parseFloat(b[0]));break;case"destroy":this.destroy(l)}}}const ji="ng-animate-queued",ui="ng-animate-disabled",Hi=[],Mo={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Ts={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},gs="__ng_removed";class ks{get params(){return this.options.params}constructor(l,c=""){this.namespaceId=c;const v=l&&l.hasOwnProperty("value");if(this.value=function F(a){return a??null}(v?l.value:l),v){const H=en(l);delete H.value,this.options=H}else this.options={};this.options.params||(this.options.params={})}absorbOptions(l){const c=l.params;if(c){const v=this.options.params;Object.keys(c).forEach(b=>{null==v[b]&&(v[b]=c[b])})}}}const Po="void",Oo=new ks(Po);class Ln{constructor(l,c,v){this.id=l,this.hostElement=c,this._engine=v,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+l,Nn(c,this._hostClassName)}listen(l,c,v,b){if(!this._triggers.has(c))throw function br(a,l){return new C.vHH(3302,!1)}();if(null==v||0==v.length)throw function In(a){return new C.vHH(3303,!1)}();if(!function tt(a){return"start"==a||"done"==a}(v))throw function Yn(a,l){return new C.vHH(3400,!1)}();const H=Vr(this._elementListeners,l,[]),ne={name:c,phase:v,callback:b};H.push(ne);const ge=Vr(this._engine.statesByElement,l,new Map);return ge.has(c)||(Nn(l,pr),Nn(l,pr+"-"+c),ge.set(c,Oo)),()=>{this._engine.afterFlush(()=>{const be=H.indexOf(ne);be>=0&&H.splice(be,1),this._triggers.has(c)||ge.delete(c)})}}register(l,c){return!this._triggers.has(l)&&(this._triggers.set(l,c),!0)}_getTrigger(l){const c=this._triggers.get(l);if(!c)throw function sr(a){return new C.vHH(3401,!1)}();return c}trigger(l,c,v,b=!0){const H=this._getTrigger(c),ne=new j(this.id,c,l);let ge=this._engine.statesByElement.get(l);ge||(Nn(l,pr),Nn(l,pr+"-"+c),this._engine.statesByElement.set(l,ge=new Map));let be=ge.get(c);const We=new ks(v,this.id);if(!(v&&v.hasOwnProperty("value"))&&be&&We.absorbOptions(be.options),ge.set(c,We),be||(be=Oo),We.value!==Po&&be.value===We.value){if(!function $i(a,l){const c=Object.keys(a),v=Object.keys(l);if(c.length!=v.length)return!1;for(let b=0;b<c.length;b++){const H=c[b];if(!l.hasOwnProperty(H)||a[H]!==l[H])return!1}return!0}(be.params,We.params)){const yn=[],Er=H.matchStyles(be.value,be.params,yn),jn=H.matchStyles(We.value,We.params,yn);yn.length?this._engine.reportError(yn):this._engine.afterFlush(()=>{Mr(l,Er),pi(l,jn)})}return}const Dn=Vr(this._engine.playersByElement,l,[]);Dn.forEach(yn=>{yn.namespaceId==this.id&&yn.triggerName==c&&yn.queued&&yn.destroy()});let wn=H.matchTransition(be.value,We.value,l,We.params),tn=!1;if(!wn){if(!b)return;wn=H.fallbackTransition,tn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:l,triggerName:c,transition:wn,fromState:be,toState:We,player:ne,isFallbackTransition:tn}),tn||(Nn(l,ji),ne.onStart(()=>{Us(l,ji)})),ne.onDone(()=>{let yn=this.players.indexOf(ne);yn>=0&&this.players.splice(yn,1);const Er=this._engine.playersByElement.get(l);if(Er){let jn=Er.indexOf(ne);jn>=0&&Er.splice(jn,1)}}),this.players.push(ne),Dn.push(ne),ne}deregister(l){this._triggers.delete(l),this._engine.statesByElement.forEach(c=>c.delete(l)),this._elementListeners.forEach((c,v)=>{this._elementListeners.set(v,c.filter(b=>b.name!=l))})}clearElementCache(l){this._engine.statesByElement.delete(l),this._elementListeners.delete(l);const c=this._engine.playersByElement.get(l);c&&(c.forEach(v=>v.destroy()),this._engine.playersByElement.delete(l))}_signalRemovalForInnerTriggers(l,c){const v=this._engine.driver.query(l,fi,!0);v.forEach(b=>{if(b[gs])return;const H=this._engine.fetchNamespacesByElement(b);H.size?H.forEach(ne=>ne.triggerLeaveAnimation(b,c,!1,!0)):this.clearElementCache(b)}),this._engine.afterFlushAnimationsDone(()=>v.forEach(b=>this.clearElementCache(b)))}triggerLeaveAnimation(l,c,v,b){const H=this._engine.statesByElement.get(l),ne=new Map;if(H){const ge=[];if(H.forEach((be,We)=>{if(ne.set(We,be.value),this._triggers.has(We)){const mt=this.trigger(l,We,Po,b);mt&&ge.push(mt)}}),ge.length)return this._engine.markElementAsRemoved(this.id,l,!0,c,ne),v&&vr(ge).onDone(()=>this._engine.processLeaveNode(l)),!0}return!1}prepareLeaveAnimationListeners(l){const c=this._elementListeners.get(l),v=this._engine.statesByElement.get(l);if(c&&v){const b=new Set;c.forEach(H=>{const ne=H.name;if(b.has(ne))return;b.add(ne);const be=this._triggers.get(ne).fallbackTransition,We=v.get(ne)||Oo,mt=new ks(Po),Ht=new j(this.id,ne,l);this._engine.totalQueuedPlayers++,this._queue.push({element:l,triggerName:ne,transition:be,fromState:We,toState:mt,player:Ht,isFallbackTransition:!0})})}}removeNode(l,c){const v=this._engine;if(l.childElementCount&&this._signalRemovalForInnerTriggers(l,c),this.triggerLeaveAnimation(l,c,!0))return;let b=!1;if(v.totalAnimations){const H=v.players.length?v.playersByQueriedElement.get(l):[];if(H&&H.length)b=!0;else{let ne=l;for(;ne=ne.parentNode;)if(v.statesByElement.get(ne)){b=!0;break}}}if(this.prepareLeaveAnimationListeners(l),b)v.markElementAsRemoved(this.id,l,!1,c);else{const H=l[gs];(!H||H===Mo)&&(v.afterFlush(()=>this.clearElementCache(l)),v.destroyInnerAnimations(l),v._onRemovalComplete(l,c))}}insertNode(l,c){Nn(l,this._hostClassName)}drainQueuedTransitions(l){const c=[];return this._queue.forEach(v=>{const b=v.player;if(b.destroyed)return;const H=v.element,ne=this._elementListeners.get(H);ne&&ne.forEach(ge=>{if(ge.name==v.triggerName){const be=Un(H,v.triggerName,v.fromState.value,v.toState.value);be._data=l,or(v.player,ge.phase,be,ge.callback)}}),b.markedForDestroy?this._engine.afterFlush(()=>{b.destroy()}):c.push(v)}),this._queue=[],c.sort((v,b)=>{const H=v.transition.ast.depCount,ne=b.transition.ast.depCount;return 0==H||0==ne?H-ne:this._engine.driver.containsElement(v.element,b.element)?1:-1})}destroy(l){this.players.forEach(c=>c.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,l)}elementContainsData(l){let c=!1;return this._elementListeners.has(l)&&(c=!0),c=!!this._queue.find(v=>v.element===l)||c,c}}class Wo{_onRemovalComplete(l,c){this.onRemovalComplete(l,c)}constructor(l,c,v){this.bodyNode=l,this.driver=c,this._normalizer=v,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(b,H)=>{}}get queuedPlayers(){const l=[];return this._namespaceList.forEach(c=>{c.players.forEach(v=>{v.queued&&l.push(v)})}),l}createNamespace(l,c){const v=new Ln(l,c,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,c)?this._balanceNamespaceList(v,c):(this.newHostElements.set(c,v),this.collectEnterElement(c)),this._namespaceLookup[l]=v}_balanceNamespaceList(l,c){const v=this._namespaceList,b=this.namespacesByHostElement;if(v.length-1>=0){let ne=!1,ge=this.driver.getParentElement(c);for(;ge;){const be=b.get(ge);if(be){const We=v.indexOf(be);v.splice(We+1,0,l),ne=!0;break}ge=this.driver.getParentElement(ge)}ne||v.unshift(l)}else v.push(l);return b.set(c,l),l}register(l,c){let v=this._namespaceLookup[l];return v||(v=this.createNamespace(l,c)),v}registerTrigger(l,c,v){let b=this._namespaceLookup[l];b&&b.register(c,v)&&this.totalAnimations++}destroy(l,c){if(!l)return;const v=this._fetchNamespace(l);this.afterFlush(()=>{this.namespacesByHostElement.delete(v.hostElement),delete this._namespaceLookup[l];const b=this._namespaceList.indexOf(v);b>=0&&this._namespaceList.splice(b,1)}),this.afterFlushAnimationsDone(()=>v.destroy(c))}_fetchNamespace(l){return this._namespaceLookup[l]}fetchNamespacesByElement(l){const c=new Set,v=this.statesByElement.get(l);if(v)for(let b of v.values())if(b.namespaceId){const H=this._fetchNamespace(b.namespaceId);H&&c.add(H)}return c}trigger(l,c,v,b){if(oe(c)){const H=this._fetchNamespace(l);if(H)return H.trigger(c,v,b),!0}return!1}insertNode(l,c,v,b){if(!oe(c))return;const H=c[gs];if(H&&H.setForRemoval){H.setForRemoval=!1,H.setForMove=!0;const ne=this.collectedLeaveElements.indexOf(c);ne>=0&&this.collectedLeaveElements.splice(ne,1)}if(l){const ne=this._fetchNamespace(l);ne&&ne.insertNode(c,v)}b&&this.collectEnterElement(c)}collectEnterElement(l){this.collectedEnterElements.push(l)}markElementAsDisabled(l,c){c?this.disabledNodes.has(l)||(this.disabledNodes.add(l),Nn(l,ui)):this.disabledNodes.has(l)&&(this.disabledNodes.delete(l),Us(l,ui))}removeNode(l,c,v,b){if(oe(c)){const H=l?this._fetchNamespace(l):null;if(H?H.removeNode(c,b):this.markElementAsRemoved(l,c,!1,b),v){const ne=this.namespacesByHostElement.get(c);ne&&ne.id!==l&&ne.removeNode(c,b)}}else this._onRemovalComplete(c,b)}markElementAsRemoved(l,c,v,b,H){this.collectedLeaveElements.push(c),c[gs]={namespaceId:l,setForRemoval:b,hasAnimation:v,removedBeforeQueried:!1,previousTriggersValues:H}}listen(l,c,v,b,H){return oe(c)?this._fetchNamespace(l).listen(c,v,b,H):()=>{}}_buildInstruction(l,c,v,b,H){return l.transition.build(this.driver,l.element,l.fromState.value,l.toState.value,v,b,l.fromState.options,l.toState.options,c,H)}destroyInnerAnimations(l){let c=this.driver.query(l,fi,!0);c.forEach(v=>this.destroyActiveAnimationsForElement(v)),0!=this.playersByQueriedElement.size&&(c=this.driver.query(l,Ze,!0),c.forEach(v=>this.finishActiveQueriedAnimationOnElement(v)))}destroyActiveAnimationsForElement(l){const c=this.playersByElement.get(l);c&&c.forEach(v=>{v.queued?v.markedForDestroy=!0:v.destroy()})}finishActiveQueriedAnimationOnElement(l){const c=this.playersByQueriedElement.get(l);c&&c.forEach(v=>v.finish())}whenRenderingDone(){return new Promise(l=>{if(this.players.length)return vr(this.players).onDone(()=>l());l()})}processLeaveNode(l){const c=l[gs];if(c&&c.setForRemoval){if(l[gs]=Mo,c.namespaceId){this.destroyInnerAnimations(l);const v=this._fetchNamespace(c.namespaceId);v&&v.clearElementCache(l)}this._onRemovalComplete(l,c.setForRemoval)}l.classList?.contains(ui)&&this.markElementAsDisabled(l,!1),this.driver.query(l,".ng-animate-disabled",!0).forEach(v=>{this.markElementAsDisabled(v,!1)})}flush(l=-1){let c=[];if(this.newHostElements.size&&(this.newHostElements.forEach((v,b)=>this._balanceNamespaceList(v,b)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let v=0;v<this.collectedEnterElements.length;v++)Nn(this.collectedEnterElements[v],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const v=[];try{c=this._flushAnimations(v,l)}finally{for(let b=0;b<v.length;b++)v[b]()}}else for(let v=0;v<this.collectedLeaveElements.length;v++)this.processLeaveNode(this.collectedLeaveElements[v]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(v=>v()),this._flushFns=[],this._whenQuietFns.length){const v=this._whenQuietFns;this._whenQuietFns=[],c.length?vr(c).onDone(()=>{v.forEach(b=>b())}):v.forEach(b=>b())}}reportError(l){throw function rn(a){return new C.vHH(3402,!1)}()}_flushAnimations(l,c){const v=new Ws,b=[],H=new Map,ne=[],ge=new Map,be=new Map,We=new Map,mt=new Set;this.disabledNodes.forEach(Ft=>{mt.add(Ft);const Sn=this.driver.query(Ft,".ng-animate-queued",!0);for(let Fn=0;Fn<Sn.length;Fn++)mt.add(Sn[Fn])});const Ht=this.bodyNode,Dn=Array.from(this.statesByElement.keys()),wn=ht(Dn,this.collectedEnterElements),tn=new Map;let yn=0;wn.forEach((Ft,Sn)=>{const Fn=Qt+yn++;tn.set(Sn,Fn),Ft.forEach(Pr=>Nn(Pr,Fn))});const Er=[],jn=new Set,An=new Set;for(let Ft=0;Ft<this.collectedLeaveElements.length;Ft++){const Sn=this.collectedLeaveElements[Ft],Fn=Sn[gs];Fn&&Fn.setForRemoval&&(Er.push(Sn),jn.add(Sn),Fn.hasAnimation?this.driver.query(Sn,".ng-star-inserted",!0).forEach(Pr=>jn.add(Pr)):An.add(Sn))}const Di=new Map,Oi=ht(Dn,Array.from(jn));Oi.forEach((Ft,Sn)=>{const Fn=$n+yn++;Di.set(Sn,Fn),Ft.forEach(Pr=>Nn(Pr,Fn))}),l.push(()=>{wn.forEach((Ft,Sn)=>{const Fn=tn.get(Sn);Ft.forEach(Pr=>Us(Pr,Fn))}),Oi.forEach((Ft,Sn)=>{const Fn=Di.get(Sn);Ft.forEach(Pr=>Us(Pr,Fn))}),Er.forEach(Ft=>{this.processLeaveNode(Ft)})});const eo=[],Na=[];for(let Ft=this._namespaceList.length-1;Ft>=0;Ft--)this._namespaceList[Ft].drainQueuedTransitions(c).forEach(Fn=>{const Pr=Fn.player,Es=Fn.element;if(eo.push(Pr),this.collectedEnterElements.length){const to=Es[gs];if(to&&to.setForMove){if(to.previousTriggersValues&&to.previousTriggersValues.has(Fn.triggerName)){const Ll=to.previousTriggersValues.get(Fn.triggerName),ta=this.statesByElement.get(Fn.element);if(ta&&ta.has(Fn.triggerName)){const Fl=ta.get(Fn.triggerName);Fl.value=Ll,ta.set(Fn.triggerName,Fl)}}return void Pr.destroy()}}const Ga=!Ht||!this.driver.containsElement(Ht,Es),wo=Di.get(Es),Nl=tn.get(Es),Vi=this._buildInstruction(Fn,v,Nl,wo,Ga);if(Vi.errors&&Vi.errors.length)return void Na.push(Vi);if(Ga)return Pr.onStart(()=>Mr(Es,Vi.fromStyles)),Pr.onDestroy(()=>pi(Es,Vi.toStyles)),void b.push(Pr);if(Fn.isFallbackTransition)return Pr.onStart(()=>Mr(Es,Vi.fromStyles)),Pr.onDestroy(()=>pi(Es,Vi.toStyles)),void b.push(Pr);const Uc=[];Vi.timelines.forEach(to=>{to.stretchStartingKeyframe=!0,this.disabledNodes.has(to.element)||Uc.push(to)}),Vi.timelines=Uc,v.append(Es,Vi.timelines),ne.push({instruction:Vi,player:Pr,element:Es}),Vi.queriedElements.forEach(to=>Vr(ge,to,[]).push(Pr)),Vi.preStyleProps.forEach((to,Ll)=>{if(to.size){let ta=be.get(Ll);ta||be.set(Ll,ta=new Set),to.forEach((Fl,sc)=>ta.add(sc))}}),Vi.postStyleProps.forEach((to,Ll)=>{let ta=We.get(Ll);ta||We.set(Ll,ta=new Set),to.forEach((Fl,sc)=>ta.add(sc))})});if(Na.length){const Ft=[];Na.forEach(Sn=>{Ft.push(function Qn(a,l){return new C.vHH(3505,!1)}())}),eo.forEach(Sn=>Sn.destroy()),this.reportError(Ft)}const jr=new Map,Jo=new Map;ne.forEach(Ft=>{const Sn=Ft.element;v.has(Sn)&&(Jo.set(Sn,Sn),this._beforeAnimationBuild(Ft.player.namespaceId,Ft.instruction,jr))}),b.forEach(Ft=>{const Sn=Ft.element;this._getPreviousPlayers(Sn,!1,Ft.namespaceId,Ft.triggerName,null).forEach(Pr=>{Vr(jr,Sn,[]).push(Pr),Pr.destroy()})});const Co=Er.filter(Ft=>Ss(Ft,be,We)),La=new Map;Zr(La,this.driver,An,We,q.l3).forEach(Ft=>{Ss(Ft,be,We)&&Co.push(Ft)});const Zl=new Map;wn.forEach((Ft,Sn)=>{Zr(Zl,this.driver,new Set(Ft),be,q.k1)}),Co.forEach(Ft=>{const Sn=La.get(Ft),Fn=Zl.get(Ft);La.set(Ft,new Map([...Array.from(Sn?.entries()??[]),...Array.from(Fn?.entries()??[])]))});const sl=[],kc=[],ic={};ne.forEach(Ft=>{const{element:Sn,player:Fn,instruction:Pr}=Ft;if(v.has(Sn)){if(mt.has(Sn))return Fn.onDestroy(()=>pi(Sn,Pr.toStyles)),Fn.disabled=!0,Fn.overrideTotalTime(Pr.totalTime),void b.push(Fn);let Es=ic;if(Jo.size>1){let wo=Sn;const Nl=[];for(;wo=wo.parentNode;){const Vi=Jo.get(wo);if(Vi){Es=Vi;break}Nl.push(wo)}Nl.forEach(Vi=>Jo.set(Vi,Es))}const Ga=this._buildAnimation(Fn.namespaceId,Pr,jr,H,Zl,La);if(Fn.setRealPlayer(Ga),Es===ic)sl.push(Fn);else{const wo=this.playersByElement.get(Es);wo&&wo.length&&(Fn.parentPlayer=vr(wo)),b.push(Fn)}}else Mr(Sn,Pr.fromStyles),Fn.onDestroy(()=>pi(Sn,Pr.toStyles)),kc.push(Fn),mt.has(Sn)&&b.push(Fn)}),kc.forEach(Ft=>{const Sn=H.get(Ft.element);if(Sn&&Sn.length){const Fn=vr(Sn);Ft.setRealPlayer(Fn)}}),b.forEach(Ft=>{Ft.parentPlayer?Ft.syncPlayerEvents(Ft.parentPlayer):Ft.destroy()});for(let Ft=0;Ft<Er.length;Ft++){const Sn=Er[Ft],Fn=Sn[gs];if(Us(Sn,$n),Fn&&Fn.hasAnimation)continue;let Pr=[];if(ge.size){let Ga=ge.get(Sn);Ga&&Ga.length&&Pr.push(...Ga);let wo=this.driver.query(Sn,Ze,!0);for(let Nl=0;Nl<wo.length;Nl++){let Vi=ge.get(wo[Nl]);Vi&&Vi.length&&Pr.push(...Vi)}}const Es=Pr.filter(Ga=>!Ga.destroyed);Es.length?nu(this,Sn,Es):this.processLeaveNode(Sn)}return Er.length=0,sl.forEach(Ft=>{this.players.push(Ft),Ft.onDone(()=>{Ft.destroy();const Sn=this.players.indexOf(Ft);this.players.splice(Sn,1)}),Ft.play()}),sl}elementContainsData(l,c){let v=!1;const b=c[gs];return b&&b.setForRemoval&&(v=!0),this.playersByElement.has(c)&&(v=!0),this.playersByQueriedElement.has(c)&&(v=!0),this.statesByElement.has(c)&&(v=!0),this._fetchNamespace(l).elementContainsData(c)||v}afterFlush(l){this._flushFns.push(l)}afterFlushAnimationsDone(l){this._whenQuietFns.push(l)}_getPreviousPlayers(l,c,v,b,H){let ne=[];if(c){const ge=this.playersByQueriedElement.get(l);ge&&(ne=ge)}else{const ge=this.playersByElement.get(l);if(ge){const be=!H||H==Po;ge.forEach(We=>{We.queued||!be&&We.triggerName!=b||ne.push(We)})}}return(v||b)&&(ne=ne.filter(ge=>!(v&&v!=ge.namespaceId||b&&b!=ge.triggerName))),ne}_beforeAnimationBuild(l,c,v){const H=c.element,ne=c.isRemovalTransition?void 0:l,ge=c.isRemovalTransition?void 0:c.triggerName;for(const be of c.timelines){const We=be.element,mt=We!==H,Ht=Vr(v,We,[]);this._getPreviousPlayers(We,mt,ne,ge,c.toState).forEach(wn=>{const tn=wn.getRealPlayer();tn.beforeDestroy&&tn.beforeDestroy(),wn.destroy(),Ht.push(wn)})}Mr(H,c.fromStyles)}_buildAnimation(l,c,v,b,H,ne){const ge=c.triggerName,be=c.element,We=[],mt=new Set,Ht=new Set,Dn=c.timelines.map(tn=>{const yn=tn.element;mt.add(yn);const Er=yn[gs];if(Er&&Er.removedBeforeQueried)return new q.ZN(tn.duration,tn.delay);const jn=yn!==be,An=function Li(a){const l=[];return wa(a,l),l}((v.get(yn)||Hi).map(jr=>jr.getRealPlayer())).filter(jr=>!!jr.element&&jr.element===yn),Di=H.get(yn),Oi=ne.get(yn),eo=ni(0,this._normalizer,0,tn.keyframes,Di,Oi),Na=this._buildPlayer(tn,eo,An);if(tn.subTimeline&&b&&Ht.add(yn),jn){const jr=new j(l,ge,yn);jr.setRealPlayer(Na),We.push(jr)}return Na});We.forEach(tn=>{Vr(this.playersByQueriedElement,tn.element,[]).push(tn),tn.onDone(()=>function B(a,l,c){let v=a.get(l);if(v){if(v.length){const b=v.indexOf(c);v.splice(b,1)}0==v.length&&a.delete(l)}return v}(this.playersByQueriedElement,tn.element,tn))}),mt.forEach(tn=>Nn(tn,ct));const wn=vr(Dn);return wn.onDestroy(()=>{mt.forEach(tn=>Us(tn,ct)),pi(be,c.toStyles)}),Ht.forEach(tn=>{Vr(b,tn,[]).push(wn)}),wn}_buildPlayer(l,c,v){return c.length>0?this.driver.animate(l.element,c,l.duration,l.delay,l.easing,v):new q.ZN(l.duration,l.delay)}}class j{constructor(l,c,v){this.namespaceId=l,this.triggerName=c,this.element=v,this._player=new q.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(l){this._containsRealPlayer||(this._player=l,this._queuedCallbacks.forEach((c,v)=>{c.forEach(b=>or(l,v,void 0,b))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(l.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(l){this.totalTime=l}syncPlayerEvents(l){const c=this._player;c.triggerCallback&&l.onStart(()=>c.triggerCallback("start")),l.onDone(()=>this.finish()),l.onDestroy(()=>this.destroy())}_queueEvent(l,c){Vr(this._queuedCallbacks,l,[]).push(c)}onDone(l){this.queued&&this._queueEvent("done",l),this._player.onDone(l)}onStart(l){this.queued&&this._queueEvent("start",l),this._player.onStart(l)}onDestroy(l){this.queued&&this._queueEvent("destroy",l),this._player.onDestroy(l)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(l){this.queued||this._player.setPosition(l)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(l){const c=this._player;c.triggerCallback&&c.triggerCallback(l)}}function oe(a){return a&&1===a.nodeType}function sn(a,l){const c=a.style.display;return a.style.display=l??"none",c}function Zr(a,l,c,v,b){const H=[];c.forEach(be=>H.push(sn(be)));const ne=[];v.forEach((be,We)=>{const mt=new Map;be.forEach(Ht=>{const Dn=l.computeStyle(We,Ht,b);mt.set(Ht,Dn),(!Dn||0==Dn.length)&&(We[gs]=Ts,ne.push(We))}),a.set(We,mt)});let ge=0;return c.forEach(be=>sn(be,H[ge++])),ne}function ht(a,l){const c=new Map;if(a.forEach(ge=>c.set(ge,[])),0==l.length)return c;const v=1,b=new Set(l),H=new Map;function ne(ge){if(!ge)return v;let be=H.get(ge);if(be)return be;const We=ge.parentNode;return be=c.has(We)?We:b.has(We)?v:ne(We),H.set(ge,be),be}return l.forEach(ge=>{const be=ne(ge);be!==v&&c.get(be).push(ge)}),c}function Nn(a,l){a.classList?.add(l)}function Us(a,l){a.classList?.remove(l)}function nu(a,l,c){vr(c).onDone(()=>a.processLeaveNode(l))}function wa(a,l){for(let c=0;c<a.length;c++){const v=a[c];v instanceof q.ZE?wa(v.players,l):l.push(v)}}function Ss(a,l,c){const v=c.get(a);if(!v)return!1;let b=l.get(a);return b?v.forEach(H=>b.add(H)):l.set(a,v),c.delete(a),!0}class co{constructor(l,c,v){this.bodyNode=l,this._driver=c,this._normalizer=v,this._triggerCache={},this.onRemovalComplete=(b,H)=>{},this._transitionEngine=new Wo(l,c,v),this._timelineEngine=new $r(l,c,v),this._transitionEngine.onRemovalComplete=(b,H)=>this.onRemovalComplete(b,H)}registerTrigger(l,c,v,b,H){const ne=l+"-"+b;let ge=this._triggerCache[ne];if(!ge){const be=[],We=[],mt=So(this._driver,H,be,We);if(be.length)throw function zi(a,l){return new C.vHH(3404,!1)}();ge=function Ni(a,l,c){return new Ho(a,l,c)}(b,mt,this._normalizer),this._triggerCache[ne]=ge}this._transitionEngine.registerTrigger(c,b,ge)}register(l,c){this._transitionEngine.register(l,c)}destroy(l,c){this._transitionEngine.destroy(l,c)}onInsert(l,c,v,b){this._transitionEngine.insertNode(l,c,v,b)}onRemove(l,c,v,b){this._transitionEngine.removeNode(l,c,b||!1,v)}disableAnimations(l,c){this._transitionEngine.markElementAsDisabled(l,c)}process(l,c,v,b){if("@"==v.charAt(0)){const[H,ne]=er(v);this._timelineEngine.command(H,c,ne,b)}else this._transitionEngine.trigger(l,c,v,b)}listen(l,c,v,b,H){if("@"==v.charAt(0)){const[ne,ge]=er(v);return this._timelineEngine.listen(ne,c,ge,H)}return this._transitionEngine.listen(l,c,v,b,H)}flush(l=-1){this._transitionEngine.flush(l)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let da=(()=>{class a{constructor(c,v,b){this._element=c,this._startStyles=v,this._endStyles=b,this._state=0;let H=a.initialStylesByElement.get(c);H||a.initialStylesByElement.set(c,H=new Map),this._initialStyles=H}start(){this._state<1&&(this._startStyles&&pi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(pi(this._element,this._initialStyles),this._endStyles&&(pi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(a.initialStylesByElement.delete(this._element),this._startStyles&&(Mr(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mr(this._element,this._endStyles),this._endStyles=null),pi(this._element,this._initialStyles),this._state=3)}}return a.initialStylesByElement=new WeakMap,a})();function ho(a){let l=null;return a.forEach((c,v)=>{(function bs(a){return"display"===a||"position"===a})(v)&&(l=l||new Map,l.set(v,c))}),l}class Ti{constructor(l,c,v,b){this.element=l,this.keyframes=c,this.options=v,this._specialStyles=b,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=v.duration,this._delay=v.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(l=>l()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const l=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,l,this.options),this._finalKeyframe=l.length?l[l.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(l){const c=[];return l.forEach(v=>{c.push(Object.fromEntries(v))}),c}_triggerWebAnimation(l,c,v){return l.animate(this._convertKeyframesToObject(c),v)}onStart(l){this._originalOnStartFns.push(l),this._onStartFns.push(l)}onDone(l){this._originalOnDoneFns.push(l),this._onDoneFns.push(l)}onDestroy(l){this._onDestroyFns.push(l)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(l=>l()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(l=>l()),this._onDestroyFns=[])}setPosition(l){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=l*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const l=new Map;this.hasStarted()&&this._finalKeyframe.forEach((v,b)=>{"offset"!==b&&l.set(b,this._finished?v:Rn(this.element,b))}),this.currentSnapshot=l}triggerCallback(l){const c="start"===l?this._onStartFns:this._onDoneFns;c.forEach(v=>v()),c.length=0}}class ri{validateStyleProperty(l){return!0}validateAnimatableStyleProperty(l){return!0}matchesElement(l,c){return!1}containsElement(l,c){return Mt(l,c)}getParentElement(l){return Ie(l)}query(l,c,v){return Bt(l,c,v)}computeStyle(l,c,v){return window.getComputedStyle(l)[c]}animate(l,c,v,b,H,ne=[]){const be={duration:v,delay:b,fill:0==b?"both":"forwards"};H&&(be.easing=H);const We=new Map,mt=ne.filter(wn=>wn instanceof Ti);(function Yi(a,l){return 0===a||0===l})(v,b)&&mt.forEach(wn=>{wn.currentSnapshot.forEach((tn,yn)=>We.set(yn,tn))});let Ht=function ar(a){return a.length?a[0]instanceof Map?a:a.map(l=>gr(l)):[]}(c).map(wn=>Ar(wn));Ht=function Vn(a,l,c){if(c.size&&l.length){let v=l[0],b=[];if(c.forEach((H,ne)=>{v.has(ne)||b.push(ne),v.set(ne,H)}),b.length)for(let H=1;H<l.length;H++){let ne=l[H];b.forEach(ge=>ne.set(ge,Rn(a,ge)))}}return l}(l,Ht,We);const Dn=function ca(a,l){let c=null,v=null;return Array.isArray(l)&&l.length?(c=ho(l[0]),l.length>1&&(v=ho(l[l.length-1]))):l instanceof Map&&(c=ho(l)),c||v?new da(a,c,v):null}(l,Ht);return new Ti(l,Ht,be,Dn)}}let Ta=(()=>{class a extends q._j{constructor(c,v){super(),this._nextAnimationId=0,this._renderer=c.createRenderer(v.body,{id:"0",encapsulation:C.ifc.None,styles:[],data:{animation:[]}})}build(c){const v=this._nextAnimationId.toString();this._nextAnimationId++;const b=Array.isArray(c)?(0,q.vP)(c):c;return za(this._renderer,null,v,"register",[b]),new zo(v,this._renderer)}}return a.\u0275fac=function(c){return new(c||a)(C.LFG(C.FYo),C.LFG(he.K0))},a.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac}),a})();class zo extends q.LC{constructor(l,c){super(),this._id=l,this._renderer=c}create(l,c){return new ms(this._id,l,c||{},this._renderer)}}class ms{constructor(l,c,v,b){this.id=l,this.element=c,this._renderer=b,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",v)}_listen(l,c){return this._renderer.listen(this.element,`@@${this.id}:${l}`,c)}_command(l,...c){return za(this._renderer,this.element,this.id,l,c)}onDone(l){this._listen("done",l)}onStart(l){this._listen("start",l)}onDestroy(l){this._listen("destroy",l)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(l){this._command("setPosition",l)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function za(a,l,c,v,b){return a.setProperty(l,`@@${c}:${v}`,b)}const bi="@.disabled";let Ko=(()=>{class a{constructor(c,v,b){this.delegate=c,this.engine=v,this._zone=b,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),v.onRemovalComplete=(H,ne)=>{const ge=ne?.parentNode(H);ge&&ne.removeChild(ge,H)}}createRenderer(c,v){const H=this.delegate.createRenderer(c,v);if(!(c&&v&&v.data&&v.data.animation)){let mt=this._rendererCache.get(H);return mt||(mt=new Ys("",H,this.engine,()=>this._rendererCache.delete(H)),this._rendererCache.set(H,mt)),mt}const ne=v.id,ge=v.id+"-"+this._currentId;this._currentId++,this.engine.register(ge,c);const be=mt=>{Array.isArray(mt)?mt.forEach(be):this.engine.registerTrigger(ne,ge,c,mt.name,mt)};return v.data.animation.forEach(be),new Zi(this,ge,H,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(c,v,b){c>=0&&c<this._microtaskId?this._zone.run(()=>v(b)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(H=>{const[ne,ge]=H;ne(ge)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([v,b]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return a.\u0275fac=function(c){return new(c||a)(C.LFG(C.FYo),C.LFG(co),C.LFG(C.R0b))},a.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac}),a})();class Ys{constructor(l,c,v,b){this.namespaceId=l,this.delegate=c,this.engine=v,this._onDestroy=b,this.destroyNode=this.delegate.destroyNode?H=>c.destroyNode(H):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(l,c){return this.delegate.createElement(l,c)}createComment(l){return this.delegate.createComment(l)}createText(l){return this.delegate.createText(l)}appendChild(l,c){this.delegate.appendChild(l,c),this.engine.onInsert(this.namespaceId,c,l,!1)}insertBefore(l,c,v,b=!0){this.delegate.insertBefore(l,c,v),this.engine.onInsert(this.namespaceId,c,l,b)}removeChild(l,c,v){this.engine.onRemove(this.namespaceId,c,this.delegate,v)}selectRootElement(l,c){return this.delegate.selectRootElement(l,c)}parentNode(l){return this.delegate.parentNode(l)}nextSibling(l){return this.delegate.nextSibling(l)}setAttribute(l,c,v,b){this.delegate.setAttribute(l,c,v,b)}removeAttribute(l,c,v){this.delegate.removeAttribute(l,c,v)}addClass(l,c){this.delegate.addClass(l,c)}removeClass(l,c){this.delegate.removeClass(l,c)}setStyle(l,c,v,b){this.delegate.setStyle(l,c,v,b)}removeStyle(l,c,v){this.delegate.removeStyle(l,c,v)}setProperty(l,c,v){"@"==c.charAt(0)&&c==bi?this.disableAnimations(l,!!v):this.delegate.setProperty(l,c,v)}setValue(l,c){this.delegate.setValue(l,c)}listen(l,c,v){return this.delegate.listen(l,c,v)}disableAnimations(l,c){this.engine.disableAnimations(l,c)}}class Zi extends Ys{constructor(l,c,v,b,H){super(c,v,b,H),this.factory=l,this.namespaceId=c}setProperty(l,c,v){"@"==c.charAt(0)?"."==c.charAt(1)&&c==bi?this.disableAnimations(l,v=void 0===v||!!v):this.engine.process(this.namespaceId,l,c.slice(1),v):this.delegate.setProperty(l,c,v)}listen(l,c,v){if("@"==c.charAt(0)){const b=function Yo(a){switch(a){case"body":return document.body;case"document":return document;case"window":return window;default:return a}}(l);let H=c.slice(1),ne="";return"@"!=H.charAt(0)&&([H,ne]=function Ka(a){const l=a.indexOf(".");return[a.substring(0,l),a.slice(l+1)]}(H)),this.engine.listen(this.namespaceId,b,H,ne,ge=>{this.factory.scheduleListenerCallback(ge._data||-1,v,ge)})}return this.delegate.listen(l,c,v)}}let wl=(()=>{class a extends co{constructor(c,v,b,H){super(c.body,v,b)}ngOnDestroy(){this.flush()}}return a.\u0275fac=function(c){return new(c||a)(C.LFG(he.K0),C.LFG(ue),C.LFG(vo),C.LFG(C.z2F))},a.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac}),a})();const Sa=[{provide:q._j,useClass:Ta},{provide:vo,useFactory:function ii(){return new ua}},{provide:co,useClass:wl},{provide:C.FYo,useFactory:function Qs(a,l,c){return new Ko(a,l,c)},deps:[m.se,co,C.R0b]}],ba=[{provide:ue,useFactory:()=>new ri},{provide:C.QbO,useValue:"BrowserAnimations"},...Sa],Aa=[{provide:ue,useClass:we},{provide:C.QbO,useValue:"NoopAnimations"},...Sa];let Ya=(()=>{class a{static withConfig(c){return{ngModule:a,providers:c.disableAnimations?Aa:ba}}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275mod=C.oAB({type:a}),a.\u0275inj=C.cJS({providers:ba,imports:[m.b2]}),a})();var ci=D(8505),Ji=D(1135);let Gr=(()=>{class a{constructor(c){this.router=c,this.loadCount=0,this.loadState=new Ji.X(!1),this.router.events.subscribe(v=>{this.navigationInterceptor(v)})}showLoader(){this.loadCount+=1,this.loadState.next(!0)}hideLoader(){this.loadCount=this.loadCount?--this.loadCount:0,this.loadCount||this.loadState.next(!1)}navigationInterceptor(c){c instanceof V.OD&&this.showLoader(),c instanceof V.m2&&this.hideLoader(),c instanceof V.gk&&this.hideLoader(),c instanceof V.Q3&&this.hideLoader()}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(V.F0))};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})(),Lt=(()=>{class a{constructor(c){this.loaderService=c}intercept(c,v){return this.loaderService.showLoader(),v.handle(c).pipe((0,ci.b)(b=>{b instanceof Me.Zn&&this.loaderService.hideLoader()},b=>{this.loaderService.hideLoader()}))}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(Gr))};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac})}return a})();const Ai={provide:Me.TP,useClass:Lt,multi:!0};var Qo=D(9770),Qa=D(2843),an=D(4968),Xt=D(9646),qa=D(7272),zt=D(7579),lt=D(9751),M=D(5032);const z=new lt.y(M.Z);var ie=D(6451),ye=D(4004),it=D(9300),pt=D(3900),ln=D(8646),Dr=D(5698),Wr=D(4086);const tr="Service workers are disabled or not supported by this browser";class Zn{constructor(l){if(this.serviceWorker=l,l){const v=(0,an.R)(l,"controllerchange").pipe((0,ye.U)(()=>l.controller)),b=(0,Qo.P)(()=>(0,Xt.of)(l.controller)),H=(0,qa.z)(b,v);this.worker=H.pipe((0,it.h)(mt=>!!mt)),this.registration=this.worker.pipe((0,pt.w)(()=>l.getRegistration()));const We=(0,an.R)(l,"message").pipe((0,ye.U)(mt=>mt.data)).pipe((0,it.h)(mt=>mt&&mt.type)).pipe((0,ln.n)());We.connect(),this.events=We}else this.worker=this.events=this.registration=function cr(a){return(0,Qo.P)(()=>(0,Qa._)(new Error(a)))}(tr)}postMessage(l,c){return this.worker.pipe((0,Dr.q)(1),(0,ci.b)(v=>{v.postMessage({action:l,...c})})).toPromise().then(()=>{})}postMessageWithOperation(l,c,v){const b=this.waitForOperationCompleted(v),H=this.postMessage(l,c);return Promise.all([H,b]).then(([,ne])=>ne)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(l){let c;return c="string"==typeof l?v=>v.type===l:v=>l.includes(v.type),this.events.pipe((0,it.h)(c))}nextEventOfType(l){return this.eventsOfType(l).pipe((0,Dr.q)(1))}waitForOperationCompleted(l){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,it.h)(c=>c.nonce===l),(0,Dr.q)(1),(0,ye.U)(c=>{if(void 0!==c.result)return c.result;throw new Error(c.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Jt=(()=>{class a{get isEnabled(){return this.sw.isEnabled}constructor(c){if(this.sw=c,this.pushManager=null,this.subscriptionChanges=new zt.x,!c.isEnabled)return this.messages=z,this.notificationClicks=z,void(this.subscription=z);this.messages=this.sw.eventsOfType("PUSH").pipe((0,ye.U)(b=>b.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,ye.U)(b=>b.data)),this.pushManager=this.sw.registration.pipe((0,ye.U)(b=>b.pushManager));const v=this.pushManager.pipe((0,pt.w)(b=>b.getSubscription()));this.subscription=(0,ie.T)(v,this.subscriptionChanges)}requestSubscription(c){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(tr));const v={userVisibleOnly:!0};let b=this.decodeBase64(c.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),H=new Uint8Array(new ArrayBuffer(b.length));for(let ne=0;ne<b.length;ne++)H[ne]=b.charCodeAt(ne);return v.applicationServerKey=H,this.pushManager.pipe((0,pt.w)(ne=>ne.subscribe(v)),(0,Dr.q)(1)).toPromise().then(ne=>(this.subscriptionChanges.next(ne),ne))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Dr.q)(1),(0,pt.w)(v=>{if(null===v)throw new Error("Not subscribed to push notifications.");return v.unsubscribe().then(b=>{if(!b)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(tr))}decodeBase64(c){return atob(c)}}return a.\u0275fac=function(c){return new(c||a)(C.LFG(Zn))},a.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac}),a})(),Xr=(()=>{class a{get isEnabled(){return this.sw.isEnabled}constructor(c){if(this.sw=c,!c.isEnabled)return this.versionUpdates=z,this.available=z,this.activated=z,void(this.unrecoverable=z);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe((0,it.h)(v=>"VERSION_READY"===v.type),(0,ye.U)(v=>({type:"UPDATE_AVAILABLE",current:v.currentVersion,available:v.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(tr));const c=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:c},c)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(tr));const c=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:c},c)}}return a.\u0275fac=function(c){return new(c||a)(C.LFG(Zn))},a.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac}),a})();class Vs{}const _r=new C.OlP("NGSW_REGISTER_SCRIPT");function mn(a,l,c,v){return()=>{if(!(0,he.NF)(v)||!("serviceWorker"in navigator)||!1===c.enabled)return;let b;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof c.registrationStrategy)b=c.registrationStrategy();else{const[ne,...ge]=(c.registrationStrategy||"registerWhenStable:30000").split(":");switch(ne){case"registerImmediately":b=(0,Xt.of)(null);break;case"registerWithDelay":b=Fi(+ge[0]||0);break;case"registerWhenStable":b=ge[0]?(0,ie.T)(Wn(a),Fi(+ge[0])):Wn(a);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${c.registrationStrategy}`)}}a.get(C.R0b).runOutsideAngular(()=>b.pipe((0,Dr.q)(1)).subscribe(()=>navigator.serviceWorker.register(l,{scope:c.scope}).catch(ne=>console.error("Service worker registration failed with:",ne))))}}function Fi(a){return(0,Xt.of)(null).pipe((0,Wr.g)(a))}function Wn(a){return a.get(C.z2F).isStable.pipe((0,it.h)(c=>c))}function fa(a,l){return new Zn((0,he.NF)(l)&&!1!==a.enabled?navigator.serviceWorker:void 0)}let Rr=(()=>{class a{static register(c,v={}){return{ngModule:a,providers:[{provide:_r,useValue:c},{provide:Vs,useValue:v},{provide:Zn,useFactory:fa,deps:[Vs,C.Lbi]},{provide:C.ip1,useFactory:mn,deps:[C.zs3,_r,Vs,C.Lbi],multi:!0}]}}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275mod=C.oAB({type:a}),a.\u0275inj=C.cJS({providers:[Jt,Xr]}),a})();var Gt=D(2340);let Eo=(()=>{class a{constructor(c){this.injector=c}handleError(c){const v=this.injector.get(Ye.g);this.injector.get(V.F0),c instanceof Me.UA?(navigator.onLine||v.notify("No Internet Connection"),v.notify(`${c.status} - ${c.message}`)):v.notify(c),console.error(c)}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(C.zs3))};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac})}return a})();function Ma(a,l){if(1&a&&(C.TgZ(0,"div")(1,"h1"),C._uU(2),C.qZA(),C.TgZ(3,"a",2)(4,"h5"),C._uU(5,"Go to Home"),C.qZA()()()),2&a){const c=C.oxw();C.xp6(2),C.hij("ERROR ",null==c.routeParams?null:c.routeParams.error,""),C.xp6(1),C.Q6J("routerLink","/")}}const ol=[{path:"error",component:(()=>{class a{constructor(c){this.activatedRoute=c}ngOnInit(){this.routeParams=this.activatedRoute.snapshot.queryParams}static#e=this.\u0275fac=function(v){return new(v||a)(C.Y36(V.gz))};static#t=this.\u0275cmp=C.Xpm({type:a,selectors:[["app-errors"]],decls:2,vars:1,consts:[[1,"error-container"],[4,"ngIf"],[3,"routerLink"]],template:function(v,b){1&v&&(C.TgZ(0,"div",0),C.YNc(1,Ma,6,2,"div",1),C.qZA()),2&v&&(C.xp6(1),C.Q6J("ngIf",null==b.routeParams?null:b.routeParams.error))},dependencies:[he.O5,V.rH],styles:[".error-container[_ngcontent-%COMP%]{width:220px;margin:50% auto 0;transform:translateY(-50%);text-align:center}"]})}return a})()}];let as=(()=>{class a{static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275mod=C.oAB({type:a});static#n=this.\u0275inj=C.cJS({imports:[V.Bz.forChild(ol),V.Bz]})}return a})();var go=D(5625),As=D(262);const al={provide:Me.TP,useClass:class Pa{intercept(l,c){return c.handle(l).pipe((0,go.X)(0),(0,As.K)(this.handleError))}handleError(l){let c="";return c=l.error instanceof ErrorEvent?`Error: ${l.error.message}`:`Error Code: ${l.status}\\nMessage: ${l.message}`,(0,Qa._)(l)}},multi:!0};let Bs=(()=>{class a{static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275mod=C.oAB({type:a});static#n=this.\u0275inj=C.cJS({providers:[{provide:C.qLn,useClass:Eo},al],imports:[he.ez,as]})}return a})();var Tl=D(4466);let ru=(()=>{class a{static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275mod=C.oAB({type:a});static#n=this.\u0275inj=C.cJS({providers:[Ai],imports:[he.ez]})}return a})();var Hl=D(9884);const Ro={todos:[]},Za=(a=Ro,l)=>{switch(l.type){case"ADD":return{todos:[...a.todos,{index:a.todos.length,text:l.text,done:!1,saved:!1}]};case"TOGGLE":return{todos:a.todos.map((c,v)=>v===l.index?{...c,done:!c.done}:c)};case"REMOVE":return{todos:a.todos.splice(a.todos.findIndex(c=>c.index===l.index),1)};case"SAVED":return{todos:a.todos.map((c,v)=>v===l.index?{...c,saved:!0}:c)};default:return a}};var et=D(457),qs=D(5577),ys=D(9468);let Sl=(()=>{class a{constructor(){this.recordTimeoutMs=500,this.localStorageKey="__lastActive",this.events=["keydown","click","wheel","mousemove"];const c=this.getLastActiveFromLocalStorage()??new Date;this.lastActive=new Ji.X(c),this.lastActive$=this.lastActive.asObservable()}setUp(){(0,et.D)(this.events).pipe((0,qs.z)(c=>(0,an.R)(document,c)),(0,ys.p)(this.recordTimeoutMs)).subscribe(c=>this.recordLastActiveDate()),(0,an.R)(window,"storage").pipe((0,it.h)(c=>c.storageArea===localStorage&&c.key===this.localStorageKey&&!!c.newValue),(0,ye.U)(c=>new Date(c.newValue))).subscribe(c=>this.lastActive.next(c))}getLastActiveDate(){return this.lastActive.value}recordLastActiveDate(){var c=new Date;localStorage.setItem(this.localStorageKey,c.toString()),this.lastActive.next(c)}getLastActiveFromLocalStorage(){const c=localStorage.getItem(this.localStorageKey);return c?new Date(c):null}static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();const Zs={provide:C.ip1,multi:!0,deps:[Sl],useFactory:a=>()=>a.setUp()};let ls=1;class Xa{constructor(){this.userName="Philip Marlowe"}}let xo=(()=>{class a{constructor(c){this.id=ls++,this._userName="Sherlock Holmes",c&&(this._userName=c.userName)}get userName(){return this._userName+(this.id>1?` times ${this.id}`:"")}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(Xa,8))};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac})}return a})(),Ja=(()=>{class a{constructor(c){if(c)throw new Error("CoreModule is already loaded. Import it in the AppModule only")}static forRoot(c){return{ngModule:a,providers:[{provide:Xa,useValue:c}]}}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(a,12))};static#t=this.\u0275mod=C.oAB({type:a});static#n=this.\u0275inj=C.cJS({providers:[xo],imports:[he.ez]})}return a})();var $l=D(4440),es=D(8555),Oa=D(7369),js=D(3550);let iu=(()=>{class a{static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275mod=C.oAB({type:a});static#n=this.\u0275inj=C.cJS({providers:[js.T],imports:[es.Aw.forFeature(Oa.UN,Oa.Jl)]})}return a})();var No=D(2852),Xs=D(8502),Js=D(515),ga=D(576);class Ms{constructor(l,c,v){this.kind=l,this.value=c,this.error=v,this.hasValue="N"===l}observe(l){return qo(this,l)}do(l,c,v){const{kind:b,value:H,error:ne}=this;return"N"===b?l?.(H):"E"===b?c?.(ne):v?.()}accept(l,c,v){var b;return(0,ga.m)(null===(b=l)||void 0===b?void 0:b.next)?this.observe(l):this.do(l,c,v)}toObservable(){const{kind:l,value:c,error:v}=this,b="N"===l?(0,Xt.of)(c):"E"===l?(0,Qa._)(()=>v):"C"===l?Js.E:0;if(!b)throw new TypeError(`Unexpected notification kind ${l}`);return b}static createNext(l){return new Ms("N",l)}static createError(l){return new Ms("E",void 0,l)}static createComplete(){return Ms.completeNotification}}function qo(a,l){var c,v,b;const{kind:H,value:ne,error:ge}=a;if("string"!=typeof H)throw new TypeError('Invalid notification, missing "kind"');"N"===H?null===(c=l.next)||void 0===c||c.call(l,ne):"E"===H?null===(v=l.error)||void 0===v||v.call(l,ge):null===(b=l.complete)||void 0===b||b.call(l)}Ms.completeNotification=new Ms("C");var ka=D(4482),Gi=D(5403),Ua=D(8421);function gi(a,l,c,v){return(0,ka.e)((b,H)=>{let ne;l&&"function"!=typeof l?({duration:c,element:ne,connector:v}=l):ne=l;const ge=new Map,be=Dn=>{ge.forEach(Dn),Dn(H)},We=Dn=>be(wn=>wn.error(Dn)),mt=new ll(H,Dn=>{try{const wn=a(Dn);let tn=ge.get(wn);if(!tn){ge.set(wn,tn=v?v():new zt.x);const yn=function Ht(Dn,wn){const tn=new lt.y(yn=>{mt.activeGroups++;const Er=wn.subscribe(yn);return()=>{Er.unsubscribe(),0==--mt.activeGroups&&mt.teardownAttempted&&mt.unsubscribe()}});return tn.key=Dn,tn}(wn,tn);if(H.next(yn),c){const Er=new Gi.Q(tn,()=>{tn.complete(),Er?.unsubscribe()},void 0,void 0,()=>ge.delete(wn));mt.add((0,Ua.Xf)(c(yn)).subscribe(Er))}}tn.next(ne?ne(Dn):Dn)}catch(wn){We(wn)}},()=>be(Dn=>Dn.complete()),We,()=>ge.clear());b.subscribe(mt)})}class ll extends Gi.Q{constructor(){super(...arguments),this.activeGroups=0,this.teardownAttempted=!1}unsubscribe(){this.teardownAttempted=!0,0===this.activeGroups&&super.unsubscribe()}}var Fo=D(6129);const Ba={dispatch:!0,useEffectsErrorHandler:!0},ma="__@ngrx/effects_create__";function us(a,l){const c=a(),v={...Ba,...l};return Object.defineProperty(c,ma,{value:v}),c}function ya(a){return Object.getOwnPropertyNames(a).filter(v=>!(!a[v]||!a[v].hasOwnProperty(ma))&&a[v][ma].hasOwnProperty("dispatch")).map(v=>({propertyName:v,...a[v][ma]}))}function cs(a){return Object.getPrototypeOf(a)}const di="__@ngrx/effects__";function P(a){return(0,es.qC)($,cs)(a)}function $(a){return function w(a){return a.constructor.hasOwnProperty(di)}(a)?a.constructor[di]:[]}function Ve(a,l,c){const v=cs(a).constructor.name,b=function ce(a){return[P,ya].reduce((c,v)=>c.concat(v(a)),[])}(a).map(({propertyName:H,dispatch:ne,useEffectsErrorHandler:ge})=>{const be="function"==typeof a[H]?a[H]():a[H],We=ge?c(be,l):be;return!1===ne?We.pipe((0,Xs.l)()):We.pipe(function Jr(){return(0,ka.e)((a,l)=>{a.subscribe(new Gi.Q(l,c=>{l.next(Ms.createNext(c))},()=>{l.next(Ms.createComplete()),l.complete()},c=>{l.next(Ms.createError(c)),l.complete()}))})}()).pipe((0,ye.U)(Ht=>({effect:a[H],notification:Ht,propertyName:H,sourceName:v,sourceInstance:a})))});return(0,ie.T)(...b)}const Dt=10;function qt(a,l,c=Dt){return a.pipe((0,As.K)(v=>(l&&l.handleError(v),c<=1?a:qt(a,l,c-1))))}let Zt=(()=>{class a extends lt.y{constructor(c){super(),c&&(this.source=c)}lift(c){const v=new a;return v.source=this,v.operator=c,v}}return a.\u0275fac=function(c){return new(c||a)(C.LFG(es.Y$))},a.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function nr(...a){return(0,it.h)(l=>a.some(c=>"string"==typeof c?c===l.type:c.type===l.type))}const kr=new C.OlP("@ngrx/effects Internal Root Guard"),_s=new C.OlP("@ngrx/effects User Provided Effects"),ki=new C.OlP("@ngrx/effects Internal Root Effects"),Ra=new C.OlP("@ngrx/effects Root Effects"),Wi=new C.OlP("@ngrx/effects Internal Feature Effects"),el=new C.OlP("@ngrx/effects Feature Effects"),xa=new C.OlP("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>qt}),ul="@ngrx/effects/init";(0,es.PH)(ul);const fl="ngrxOnIdentifyEffects",Al="ngrxOnInitEffects";function Fu(a){return pl(a,Al)}function pl(a,l){return a&&l in a&&"function"==typeof a[l]}let va=(()=>{class a extends zt.x{constructor(c,v){super(),this.errorHandler=c,this.effectsErrorHandler=v}addEffects(c){this.next(c)}toActions(){return this.pipe(gi(cs),(0,qs.z)(c=>c.pipe(gi(su))),(0,qs.z)(c=>{const v=c.pipe((0,Fo.z)(H=>function vu(a,l){return c=>{const v=Ve(c,a,l);return function Zo(a){return pl(a,"ngrxOnRunEffects")}(c)?c.ngrxOnRunEffects(v):v}}(this.errorHandler,this.effectsErrorHandler)(H)),(0,ye.U)(H=>(function hi(a,l){if("N"===a.notification.kind){const c=a.notification.value;!function cl(a){return"function"!=typeof a&&a&&a.type&&"string"==typeof a.type}(c)&&l.handleError(new Error(`Effect ${function dl({propertyName:a,sourceInstance:l,sourceName:c}){const v="function"==typeof l[a];return`"${c}.${String(a)}${v?"()":""}"`}(a)} dispatched an invalid action: ${function hl(a){try{return JSON.stringify(a)}catch{return a}}(c)}`))}}(H,this.errorHandler),H.notification)),(0,it.h)(H=>"N"===H.kind&&null!=H.value),function Va(){return(0,ka.e)((a,l)=>{a.subscribe(new Gi.Q(l,c=>qo(c,l)))})}()),b=c.pipe((0,Dr.q)(1),(0,it.h)(Fu),(0,ye.U)(H=>H.ngrxOnInitEffects()));return(0,ie.T)(v,b)}))}}return a.\u0275fac=function(c){return new(c||a)(C.LFG(C.qLn),C.LFG(xa))},a.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function su(a){return function _a(a){return pl(a,fl)}(a)?a.ngrxOnIdentifyEffects():""}let ja=(()=>{class a{constructor(c,v){this.effectSources=c,this.store=v,this.effectsSubscription=null}get isStarted(){return!!this.effectsSubscription}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return a.\u0275fac=function(c){return new(c||a)(C.LFG(va),C.LFG(es.yh))},a.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Ea=(()=>{class a{constructor(c,v,b,H,ne,ge,be){this.sources=c,v.start(),H.forEach(We=>c.addEffects(We)),b.dispatch({type:ul})}addEffects(c){this.sources.addEffects(c)}}return a.\u0275fac=function(c){return new(c||a)(C.LFG(va),C.LFG(ja),C.LFG(es.yh),C.LFG(Ra),C.LFG(es.cr,8),C.LFG(es.CK,8),C.LFG(kr,8))},a.\u0275mod=C.oAB({type:a}),a.\u0275inj=C.cJS({}),a})(),Ml=(()=>{class a{constructor(c,v,b,H){v.forEach(ne=>ne.forEach(ge=>c.addEffects(ge)))}}return a.\u0275fac=function(c){return new(c||a)(C.LFG(Ea),C.LFG(el),C.LFG(es.cr,8),C.LFG(es.CK,8))},a.\u0275mod=C.oAB({type:a}),a.\u0275inj=C.cJS({}),a})(),Xo=(()=>{class a{static forFeature(c=[]){return{ngModule:Ml,providers:[c,{provide:Wi,multi:!0,useValue:c},{provide:_s,multi:!0,useValue:[]},{provide:el,multi:!0,useFactory:nc,deps:[C.zs3,Wi,_s]}]}}static forRoot(c=[]){return{ngModule:Ea,providers:[c,{provide:ki,useValue:[c]},{provide:kr,useFactory:tl,deps:[[ja,new C.FiY,new C.tp0],[ki,new C.PiD]]},{provide:_s,multi:!0,useValue:[]},{provide:Ra,useFactory:nc,deps:[C.zs3,ki,_s]}]}}}return a.\u0275fac=function(c){return new(c||a)},a.\u0275mod=C.oAB({type:a}),a.\u0275inj=C.cJS({}),a})();function nc(a,l,c){const v=[];for(const b of l)v.push(...b);for(const b of c)v.push(...b);return function Mi(a,l){return l.map(c=>a.get(c))}(a,v)}function tl(a,l){if((1!==l.length||0!==l[0].length)&&a)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}var Ps=D(4579);let ts=(()=>{class a{loadCounter(){return(0,Xt.of)(1999)}static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})(),Os=(()=>{class a{constructor(c,v){this.actions$=c,this.counterService=v,this.loadData$=us(()=>this.actions$.pipe(nr(Ps.zK),(0,qs.z)(()=>this.counterService.loadCounter().pipe((0,ye.U)(b=>Ps.Zf({newValue:b}))))))}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(Zt),C.LFG(ts))};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac})}return a})();var Eu=D(5054);let si=(()=>{class a{static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275mod=C.oAB({type:a});static#n=this.\u0275inj=C.cJS({providers:[Eu.e],imports:[es.Aw.forFeature(No.UN,No.jX),Xo.forFeature([Os])]})}return a})();var Wl=D(3880),nl=D(2542);let gl=(()=>{class a{constructor(c,v){this.actions$=c,this.http=v,this.loadData$=us(()=>this.actions$.pipe(nr(nl.mu),(0,pt.w)(()=>this.http.get("https://jsonplaceholder.typicode.com/posts").pipe((0,ye.U)(b=>nl.F3({payload:b})),(0,As.K)(b=>(0,Xt.of)(nl.WU({payload:b})))))))}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(Zt),C.LFG(Me.eN))};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac})}return a})();var Do=D(9610);let rl=(()=>{class a{static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275mod=C.oAB({type:a});static#n=this.\u0275inj=C.cJS({providers:[Do.L],imports:[es.Aw.forFeature(Wl.UN,Wl.B5),Xo.forFeature([gl])]})}return a})();var ml=D(173),Pl=D(817);let ku=(()=>{class a{constructor(c){this.actions$=c,this.getUser$=us(()=>this.actions$.pipe(nr(Pl.PR),(0,qs.z)(()=>(0,Xt.of)({userId:"1",name:"trilok",lastName:"singh",email:"trilok@gmaill.com"}).pipe((0,ye.U)(v=>Pl.Ni({user:v})),(0,As.K)(v=>(console.error("An error occurred while getting user information.",v.message),(0,Xt.of)(Pl.N2({error:"Unable to retrieve user information."}))))))))}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(Zt))};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac})}return a})();var Ui=D(2842);let Uu=(()=>{class a{static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275mod=C.oAB({type:a});static#n=this.\u0275inj=C.cJS({providers:[Ui.p],imports:[es.Aw.forFeature(ml.U,ml.M),Xo.forFeature([ku])]})}return a})();var Ol=D(5650),Vu=D(4964),zl=D(2766),Kl=D(7403);let Du=(()=>{class a{set(c,v){try{localStorage.setItem(c,JSON.stringify(v))}catch(b){console.error("Error saving to localStorage",b)}}get(c){try{return JSON.parse(localStorage.getItem(c))}catch(v){return console.error("Error getting data from localStorage",v),null}}static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})(),Ha=(()=>{class a{constructor(c,v,b,H){this.actions$=c,this.registerService=v,this.persistenceService=b,this.router=H,this.register$=us(()=>this.actions$.pipe(nr(zl._0),(0,pt.w)(({request:ne})=>this.registerService.register(ne).pipe((0,ye.U)(ge=>(this.persistenceService.set("accessToken1",ge.token),(0,zl.Pw)({currentUser:ge}))),(0,As.K)(ge=>(console.log(ge),(0,Xt.of)((0,zl.zH)({errors:ge.error.errors})))))))),this.redirectAfterSubmit$=us(()=>this.actions$.pipe(nr(zl.Pw),(0,ci.b)(()=>{this.router.navigateByUrl("/")})),{dispatch:!1})}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(Zt),C.LFG(Kl.a),C.LFG(Du),C.LFG(V.F0))};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac})}return a})(),ns=(()=>{class a{static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275mod=C.oAB({type:a});static#n=this.\u0275inj=C.cJS({providers:[Vu.q],imports:[es.Aw.forFeature(Ol.UN,Ol.xw),Xo.forFeature([Ha])]})}return a})();var Yl=D(8713),Io=D(1944),yl=D(8372),ko=D(9662);let Rl=(()=>{class a{constructor(c){this.http=c,this.url="http://localhost:4000/articles"}getAll(){return this.http.get("http://localhost:4000/fruits")}getAllArticles(){return this.http.get(this.url)}createArticle(c){return this.http.post(this.url,c)}getArticleById(c){return this.http.get(this.url+"/"+c)}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(ko.O))};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})(),Ql=(()=>{class a{constructor(c,v){this.actions$=c,this.fruitsService=v,this.loadAllArticles$=us(()=>this.actions$.pipe(nr(Io.GO),(0,pt.w)(()=>this.fruitsService.getAllArticles().pipe((0,ye.U)(b=>Io.m0({payload:b})))))),this.createArticle$=us(()=>this.actions$.pipe(nr(Io.$f),(0,ye.U)(b=>b.payload),(0,qs.z)(b=>this.fruitsService.createArticle(b).pipe((0,ye.U)(H=>Io.$s({payload:H})),(0,As.K)(H=>(0,Xt.of)(Io.$0({payload:H}))))))),this.searchArticleById$=us(()=>this.actions$.pipe(nr(Io.HD),(0,yl.b)(500),(0,ye.U)(b=>b.payload),(0,pt.w)(b=>this.fruitsService.getArticleById(b).pipe((0,ye.U)(H=>Io.n3({payload:H})))))),this.loadProducts$=us(()=>this.actions$.pipe(nr(Io.hS),(0,qs.z)(()=>this.fruitsService.getAll().pipe((0,ye.U)(b=>Io.Xt({payload:b}))))))}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(Zt),C.LFG(Rl))};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac})}return a})();var ou=D(825);let au=(()=>{class a{static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275mod=C.oAB({type:a});static#n=this.\u0275inj=C.cJS({imports:[es.Aw.forRoot(Yl.ll),Xo.forRoot([Ql]),iu,si,rl,Uu,ns,ou.FT.instrument({maxAge:25,logOnly:!Gt.N.production})]})}return a})();const lu="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJDb2RlIFNob3RzIFdpdGggUHJvZmFuaXMiLCJpYXQiOjE2MjQyNzU1MjUsImV4cCI6MTY1NTgxMTUyNSwiYXVkIjoiQ29kZSBTaG90IFdpdGggUHJvZmFuaXMgU3Vic2NyaWJlcnMiLCJzdWIiOiJDb2RlIFNob3QgV2l0aCBQcm9mYW5pcyBTdWJzY3JpYmVycyIsIlVzZXJuYW1lIjoicHJvZmFuaXMiLCJGaXJzdE5hbWUiOiJGYW5pcyIsIlJvbGUiOlsiQWRtaW4iLCJTdXBlciBBZG1pbiJdfQ.mT1UD7DXTWRm4etsW9BuWcg5bj2CaeAQVXaoEOIwB7o";let uu=(()=>{class a{constructor(){}intercept(c,v){const{url:b,method:H,headers:ne}=c;return b.endsWith("login")&&"POST"===H?function be(){return(0,Xt.of)(new Me.Zn({status:200,body:{id:"1",username:"profanis",token:lu}}))}():b.endsWith("products")&&"GET"===H?function We(){if(!function ge(){return ne.get("authorization")===lu}())return(0,Qa._)({status:401,error:{message:"Unauthorized"}});const mt=[...new Array(20).keys()].map(Ht=>({id:Ht,name:`Product ${Ht}`,weight:30,symbol:"ngf"}));return(0,Xt.of)(new Me.Zn({status:200,body:mt}))}():v.handle(c)}static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac})}return a})();const Iu={provide:Me.TP,useClass:uu,multi:!0};D(7385);let ju=(()=>{class a{static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275mod=C.oAB({type:a});static#n=this.\u0275inj=C.cJS({})}return a})();var vs=D(4185);let $a=(()=>{class a{constructor(c){this.realtimeDbService=c}handleError(c){console.log(c),Gt.N.production&&this.realtimeDbService.post("2023/logging.json",c).subscribe()}handleError1(c){c instanceof Me.UA?c.error instanceof ErrorEvent?console.error("Error Event"):console.log(`error status : ${c.status} ${c.statusText}`):console.error("some thing else happened")}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(vs.N))};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac})}return a})();const Uo={provide:C.qLn,useClass:$a};class Da{static get injector(){return this._injector}static set injector(l){this._injector=l}}var Pi=D(8405);const il=[{provide:Pi.R1,useClass:Pi.lt},{provide:Pi.zI,useClass:Pi.ex},{provide:vs.N,useClass:vs.g}];var Ia=D(255),ql=D(7522);let _l=(()=>{class a{get apiKey(){return"5a4b2d457ecbef9eb2a71e480b947604"}static#e=this.\u0275fac=function(v){return new(v||a)};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})(),xl=(()=>{class a extends Ia.u{constructor(c,v){super(),this.http=c,this.config=v}getCurrentWeather(c,v){const H=this.getParams(c,v);return this.http.get("https://api.openweathermap.org/data/2.5/weather",{params:H}).pipe((0,ye.U)(ne=>({temperature:ne.main.temp,temperatureMin:ne.main.temp_min,temperatureMax:ne.main.temp_max,city:ne.name,conditions:(0,ql.wJ)(ne.weather[0]),date:new Date(ne.dt),zipCode:c,countryCode:v})))}getWeatherForecast(c,v){const H=this.getParams(c,v);return this.http.get("https://api.openweathermap.org/data/2.5/forecast/daily",{params:H}).pipe((0,ye.U)(ne=>ne.list.map(ge=>({temperature:ge.temp.day,temperatureMin:ge.temp.min,temperatureMax:ge.temp.max,city:ne.city.name,conditions:(0,ql.wJ)(ge.weather[0]),date:new Date(1e3*ge.dt),zipCode:c,countryCode:v}))))}getParams(c,v="us"){return new Me.LE({fromObject:{zip:`${c},${v}`,appid:this.config.apiKey}})}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(Me.eN),C.LFG(_l))};static#t=this.\u0275prov=C.Yz7({token:a,factory:a.\u0275fac})}return a})(),O=(()=>{class a{constructor(c){this.injector=c,Da.injector=c}static#e=this.\u0275fac=function(v){return new(v||a)(C.LFG(C.zs3))};static#t=this.\u0275mod=C.oAB({type:a,bootstrap:[Xe]});static#n=this.\u0275inj=C.cJS({providers:[Ai,{provide:Ia.u,useClass:xl},he.uU,Me.JF,{provide:Hl.y,useValue:new Hl.y(Za)},Zs,Iu,Uo,il],imports:[m.b2,Ya,Me.JF,Me.Ed,Tl.m,Le,Bs,Rr.register("ngsw-worker.js",{enabled:Gt.N.production,registrationStrategy:"registerWhenStable:30000"}),au,ru,Ja.forRoot({userName:"Trilok Singh"}),$l.G2.initializeApp(Gt.N.firebaseConfig),$l.G2.initialize({activityInRouter:!0,activityOfAnonymousUser:!0,activityInHttp:!0}),ju,Ya]})}return a})();Gt.N.production&&(0,C.G48)(),m.q6().bootstrapModule(O).catch(a=>console.error(a))},1135:(Ee,se,D)=>{D.d(se,{X:()=>C});var m=D(7579);class C extends m.x{constructor(V){super(),this._value=V}get value(){return this.getValue()}_subscribe(V){const q=super._subscribe(V);return!q.closed&&V.next(this._value),q}getValue(){const{hasError:V,thrownError:q,_value:te}=this;if(V)throw q;return this._throwIfClosed(),te}next(V){super.next(this._value=V)}}},9751:(Ee,se,D)=>{D.d(se,{y:()=>W});var m=D(930),C=D(727),J=D(8822),V=D(9635),q=D(2416),te=D(576),X=D(2806);let W=(()=>{class he{constructor(He){He&&(this._subscribe=He)}lift(He){const Ae=new he;return Ae.source=this,Ae.operator=He,Ae}subscribe(He,Ae,Ue){const ke=function le(he){return he&&he instanceof m.Lv||function Y(he){return he&&(0,te.m)(he.next)&&(0,te.m)(he.error)&&(0,te.m)(he.complete)}(he)&&(0,C.Nn)(he)}(He)?He:new m.Hp(He,Ae,Ue);return(0,X.x)(()=>{const{operator:je,source:$e}=this;ke.add(je?je.call(ke,$e):$e?this._subscribe(ke):this._trySubscribe(ke))}),ke}_trySubscribe(He){try{return this._subscribe(He)}catch(Ae){He.error(Ae)}}forEach(He,Ae){return new(Ae=ee(Ae))((Ue,ke)=>{const je=new m.Hp({next:$e=>{try{He($e)}catch(Je){ke(Je),je.unsubscribe()}},error:ke,complete:Ue});this.subscribe(je)})}_subscribe(He){var Ae;return null===(Ae=this.source)||void 0===Ae?void 0:Ae.subscribe(He)}[J.L](){return this}pipe(...He){return(0,V.U)(He)(this)}toPromise(He){return new(He=ee(He))((Ae,Ue)=>{let ke;this.subscribe(je=>ke=je,je=>Ue(je),()=>Ae(ke))})}}return he.create=Pe=>new he(Pe),he})();function ee(he){var Pe;return null!==(Pe=he??q.v.Promise)&&void 0!==Pe?Pe:Promise}},4707:(Ee,se,D)=>{D.d(se,{t:()=>J});var m=D(7579),C=D(6063);class J extends m.x{constructor(q=1/0,te=1/0,X=C.l){super(),this._bufferSize=q,this._windowTime=te,this._timestampProvider=X,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=te===1/0,this._bufferSize=Math.max(1,q),this._windowTime=Math.max(1,te)}next(q){const{isStopped:te,_buffer:X,_infiniteTimeWindow:W,_timestampProvider:ee,_windowTime:Y}=this;te||(X.push(q),!W&&X.push(ee.now()+Y)),this._trimBuffer(),super.next(q)}_subscribe(q){this._throwIfClosed(),this._trimBuffer();const te=this._innerSubscribe(q),{_infiniteTimeWindow:X,_buffer:W}=this,ee=W.slice();for(let Y=0;Y<ee.length&&!q.closed;Y+=X?1:2)q.next(ee[Y]);return this._checkFinalizedStatuses(q),te}_trimBuffer(){const{_bufferSize:q,_timestampProvider:te,_buffer:X,_infiniteTimeWindow:W}=this,ee=(W?1:2)*q;if(q<1/0&&ee<X.length&&X.splice(0,X.length-ee),!W){const Y=te.now();let le=0;for(let he=1;he<X.length&&X[he]<=Y;he+=2)le=he;le&&X.splice(0,le+1)}}}},7579:(Ee,se,D)=>{D.d(se,{x:()=>X});var m=D(9751),C=D(727);const V=(0,D(3888).d)(ee=>function(){ee(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var q=D(8737),te=D(2806);let X=(()=>{class ee extends m.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(le){const he=new W(this,this);return he.operator=le,he}_throwIfClosed(){if(this.closed)throw new V}next(le){(0,te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const he=this.observers.slice();for(const Pe of he)Pe.next(le)}})}error(le){(0,te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=le;const{observers:he}=this;for(;he.length;)he.shift().error(le)}})}complete(){(0,te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:le}=this;for(;le.length;)le.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var le;return(null===(le=this.observers)||void 0===le?void 0:le.length)>0}_trySubscribe(le){return this._throwIfClosed(),super._trySubscribe(le)}_subscribe(le){return this._throwIfClosed(),this._checkFinalizedStatuses(le),this._innerSubscribe(le)}_innerSubscribe(le){const{hasError:he,isStopped:Pe,observers:He}=this;return he||Pe?C.Lc:(He.push(le),new C.w0(()=>(0,q.P)(He,le)))}_checkFinalizedStatuses(le){const{hasError:he,thrownError:Pe,isStopped:He}=this;he?le.error(Pe):He&&le.complete()}asObservable(){const le=new m.y;return le.source=this,le}}return ee.create=(Y,le)=>new W(Y,le),ee})();class W extends X{constructor(Y,le){super(),this.destination=Y,this.source=le}next(Y){var le,he;null===(he=null===(le=this.destination)||void 0===le?void 0:le.next)||void 0===he||he.call(le,Y)}error(Y){var le,he;null===(he=null===(le=this.destination)||void 0===le?void 0:le.error)||void 0===he||he.call(le,Y)}complete(){var Y,le;null===(le=null===(Y=this.destination)||void 0===Y?void 0:Y.complete)||void 0===le||le.call(Y)}_subscribe(Y){var le,he;return null!==(he=null===(le=this.source)||void 0===le?void 0:le.subscribe(Y))&&void 0!==he?he:C.Lc}}},930:(Ee,se,D)=>{D.d(se,{Hp:()=>Pe,Lv:()=>he});var m=D(576),C=D(727),J=D(2416),V=D(7849),q=D(5032);const te=ee("C",void 0,void 0);function ee(je,$e,Je){return{kind:je,value:$e,error:Je}}var Y=D(3410),le=D(2806);class he extends C.w0{constructor($e){super(),this.isStopped=!1,$e?(this.destination=$e,(0,C.Nn)($e)&&$e.add(this)):this.destination=ke}static create($e,Je,Le){return new Pe($e,Je,Le)}next($e){this.isStopped?Ue(function W(je){return ee("N",je,void 0)}($e),this):this._next($e)}error($e){this.isStopped?Ue(function X(je){return ee("E",void 0,je)}($e),this):(this.isStopped=!0,this._error($e))}complete(){this.isStopped?Ue(te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next($e){this.destination.next($e)}_error($e){try{this.destination.error($e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Pe extends he{constructor($e,Je,Le){let Me;if(super(),(0,m.m)($e))Me=$e;else if($e){let yt;({next:Me,error:Je,complete:Le}=$e),this&&J.v.useDeprecatedNextContext?(yt=Object.create($e),yt.unsubscribe=()=>this.unsubscribe()):yt=$e,Me=Me?.bind(yt),Je=Je?.bind(yt),Le=Le?.bind(yt)}this.destination={next:Me?He(Me):q.Z,error:He(Je??Ae),complete:Le?He(Le):q.Z}}}function He(je,$e){return(...Je)=>{try{je(...Je)}catch(Le){J.v.useDeprecatedSynchronousErrorHandling?(0,le.O)(Le):(0,V.h)(Le)}}}function Ae(je){throw je}function Ue(je,$e){const{onStoppedNotification:Je}=J.v;Je&&Y.z.setTimeout(()=>Je(je,$e))}const ke={closed:!0,next:q.Z,error:Ae,complete:q.Z}},727:(Ee,se,D)=>{D.d(se,{Lc:()=>te,w0:()=>q,Nn:()=>X});var m=D(576);const J=(0,D(3888).d)(ee=>function(le){ee(this),this.message=le?`${le.length} errors occurred during unsubscription:\n${le.map((he,Pe)=>`${Pe+1}) ${he.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=le});var V=D(8737);class q{constructor(Y){this.initialTeardown=Y,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let Y;if(!this.closed){this.closed=!0;const{_parentage:le}=this;if(le)if(this._parentage=null,Array.isArray(le))for(const He of le)He.remove(this);else le.remove(this);const{initialTeardown:he}=this;if((0,m.m)(he))try{he()}catch(He){Y=He instanceof J?He.errors:[He]}const{_teardowns:Pe}=this;if(Pe){this._teardowns=null;for(const He of Pe)try{W(He)}catch(Ae){Y=Y??[],Ae instanceof J?Y=[...Y,...Ae.errors]:Y.push(Ae)}}if(Y)throw new J(Y)}}add(Y){var le;if(Y&&Y!==this)if(this.closed)W(Y);else{if(Y instanceof q){if(Y.closed||Y._hasParent(this))return;Y._addParent(this)}(this._teardowns=null!==(le=this._teardowns)&&void 0!==le?le:[]).push(Y)}}_hasParent(Y){const{_parentage:le}=this;return le===Y||Array.isArray(le)&&le.includes(Y)}_addParent(Y){const{_parentage:le}=this;this._parentage=Array.isArray(le)?(le.push(Y),le):le?[le,Y]:Y}_removeParent(Y){const{_parentage:le}=this;le===Y?this._parentage=null:Array.isArray(le)&&(0,V.P)(le,Y)}remove(Y){const{_teardowns:le}=this;le&&(0,V.P)(le,Y),Y instanceof q&&Y._removeParent(this)}}q.EMPTY=(()=>{const ee=new q;return ee.closed=!0,ee})();const te=q.EMPTY;function X(ee){return ee instanceof q||ee&&"closed"in ee&&(0,m.m)(ee.remove)&&(0,m.m)(ee.add)&&(0,m.m)(ee.unsubscribe)}function W(ee){(0,m.m)(ee)?ee():ee.unsubscribe()}},2416:(Ee,se,D)=>{D.d(se,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(Ee,se,D)=>{D.d(se,{c:()=>te});var m=D(9751),C=D(727),J=D(8343),V=D(5403),q=D(4482);class te extends m.y{constructor(W,ee){super(),this.source=W,this.subjectFactory=ee,this._subject=null,this._refCount=0,this._connection=null,(0,q.A)(W)&&(this.lift=W.lift)}_subscribe(W){return this.getSubject().subscribe(W)}getSubject(){const W=this._subject;return(!W||W.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:W}=this;this._subject=this._connection=null,W?.unsubscribe()}connect(){let W=this._connection;if(!W){W=this._connection=new C.w0;const ee=this.getSubject();W.add(this.source.subscribe(new V.Q(ee,void 0,()=>{this._teardown(),ee.complete()},Y=>{this._teardown(),ee.error(Y)},()=>this._teardown()))),W.closed&&(this._connection=null,W=C.w0.EMPTY)}return W}refCount(){return(0,J.x)()(this)}}},9841:(Ee,se,D)=>{D.d(se,{a:()=>Y});var m=D(9751),C=D(4742),J=D(457),V=D(4671),q=D(3268),te=D(3269),X=D(1810),W=D(5403),ee=D(9672);function Y(...Pe){const He=(0,te.yG)(Pe),Ae=(0,te.jO)(Pe),{args:Ue,keys:ke}=(0,C.D)(Pe);if(0===Ue.length)return(0,J.D)([],He);const je=new m.y(function le(Pe,He,Ae=V.y){return Ue=>{he(He,()=>{const{length:ke}=Pe,je=new Array(ke);let $e=ke,Je=ke;for(let Le=0;Le<ke;Le++)he(He,()=>{const Me=(0,J.D)(Pe[Le],He);let yt=!1;Me.subscribe(new W.Q(Ue,Et=>{je[Le]=Et,yt||(yt=!0,Je--),Je||Ue.next(Ae(je.slice()))},()=>{--$e||Ue.complete()}))},Ue)},Ue)}}(Ue,He,ke?$e=>(0,X.n)(ke,$e):V.y));return Ae?je.pipe((0,q.Z)(Ae)):je}function he(Pe,He,Ae){Pe?(0,ee.f)(Ae,Pe,He):He()}},7272:(Ee,se,D)=>{D.d(se,{z:()=>q});var m=D(8189),J=D(3269),V=D(457);function q(...te){return function C(){return(0,m.J)(1)}()((0,V.D)(te,(0,J.yG)(te)))}},9770:(Ee,se,D)=>{D.d(se,{P:()=>J});var m=D(9751),C=D(8421);function J(V){return new m.y(q=>{(0,C.Xf)(V()).subscribe(q)})}},515:(Ee,se,D)=>{D.d(se,{E:()=>C,c:()=>J});var m=D(9751);const C=new m.y(q=>q.complete());function J(q){return q?function V(q){return new m.y(te=>q.schedule(()=>te.complete()))}(q):C}},4128:(Ee,se,D)=>{D.d(se,{D:()=>W});var m=D(9751),C=D(4742),J=D(8421),V=D(3269),q=D(5403),te=D(3268),X=D(1810);function W(...ee){const Y=(0,V.jO)(ee),{args:le,keys:he}=(0,C.D)(ee),Pe=new m.y(He=>{const{length:Ae}=le;if(!Ae)return void He.complete();const Ue=new Array(Ae);let ke=Ae,je=Ae;for(let $e=0;$e<Ae;$e++){let Je=!1;(0,J.Xf)(le[$e]).subscribe(new q.Q(He,Le=>{Je||(Je=!0,je--),Ue[$e]=Le},()=>ke--,void 0,()=>{(!ke||!Je)&&(je||He.next(he?(0,X.n)(he,Ue):Ue),He.complete())}))}});return Y?Pe.pipe((0,te.Z)(Y)):Pe}},457:(Ee,se,D)=>{D.d(se,{D:()=>yt});var m=D(8421),C=D(5363),J=D(4482);function V(Et,Ye=0){return(0,J.e)((Ot,At)=>{At.add(Et.schedule(()=>Ot.subscribe(At),Ye))})}var X=D(9751),ee=D(2202),Y=D(576),le=D(9672);function Pe(Et,Ye){if(!Et)throw new Error("Iterable cannot be null");return new X.y(Ot=>{(0,le.f)(Ot,Ye,()=>{const At=Et[Symbol.asyncIterator]();(0,le.f)(Ot,Ye,()=>{At.next().then(Xe=>{Xe.done?Ot.complete():Ot.next(Xe.value)})},0,!0)})})}var He=D(3670),Ae=D(8239),Ue=D(1144),ke=D(6495),je=D(2206),$e=D(4532),Je=D(3260);function yt(Et,Ye){return Ye?function Me(Et,Ye){if(null!=Et){if((0,He.c)(Et))return function q(Et,Ye){return(0,m.Xf)(Et).pipe(V(Ye),(0,C.Q)(Ye))}(Et,Ye);if((0,Ue.z)(Et))return function W(Et,Ye){return new X.y(Ot=>{let At=0;return Ye.schedule(function(){At===Et.length?Ot.complete():(Ot.next(Et[At++]),Ot.closed||this.schedule())})})}(Et,Ye);if((0,Ae.t)(Et))return function te(Et,Ye){return(0,m.Xf)(Et).pipe(V(Ye),(0,C.Q)(Ye))}(Et,Ye);if((0,je.D)(Et))return Pe(Et,Ye);if((0,ke.T)(Et))return function he(Et,Ye){return new X.y(Ot=>{let At;return(0,le.f)(Ot,Ye,()=>{At=Et[ee.h](),(0,le.f)(Ot,Ye,()=>{let Xe,Ke;try{({value:Xe,done:Ke}=At.next())}catch(ut){return void Ot.error(ut)}Ke?Ot.complete():Ot.next(Xe)},0,!0)}),()=>(0,Y.m)(At?.return)&&At.return()})}(Et,Ye);if((0,Je.L)(Et))return function Le(Et,Ye){return Pe((0,Je.Q)(Et),Ye)}(Et,Ye)}throw(0,$e.z)(Et)}(Et,Ye):(0,m.Xf)(Et)}},4968:(Ee,se,D)=>{D.d(se,{R:()=>Y});var m=D(8421),C=D(9751),J=D(5577),V=D(1144),q=D(576),te=D(3268);const X=["addListener","removeListener"],W=["addEventListener","removeEventListener"],ee=["on","off"];function Y(Ae,Ue,ke,je){if((0,q.m)(ke)&&(je=ke,ke=void 0),je)return Y(Ae,Ue,ke).pipe((0,te.Z)(je));const[$e,Je]=function He(Ae){return(0,q.m)(Ae.addEventListener)&&(0,q.m)(Ae.removeEventListener)}(Ae)?W.map(Le=>Me=>Ae[Le](Ue,Me,ke)):function he(Ae){return(0,q.m)(Ae.addListener)&&(0,q.m)(Ae.removeListener)}(Ae)?X.map(le(Ae,Ue)):function Pe(Ae){return(0,q.m)(Ae.on)&&(0,q.m)(Ae.off)}(Ae)?ee.map(le(Ae,Ue)):[];if(!$e&&(0,V.z)(Ae))return(0,J.z)(Le=>Y(Le,Ue,ke))((0,m.Xf)(Ae));if(!$e)throw new TypeError("Invalid event target");return new C.y(Le=>{const Me=(...yt)=>Le.next(1<yt.length?yt:yt[0]);return $e(Me),()=>Je(Me)})}function le(Ae,Ue){return ke=>je=>Ae[ke](Ue,je)}},8421:(Ee,se,D)=>{D.d(se,{Xf:()=>Pe});var m=D(655),C=D(1144),J=D(8239),V=D(9751),q=D(3670),te=D(2206),X=D(4532),W=D(6495),ee=D(3260),Y=D(576),le=D(7849),he=D(8822);function Pe(Le){if(Le instanceof V.y)return Le;if(null!=Le){if((0,q.c)(Le))return function He(Le){return new V.y(Me=>{const yt=Le[he.L]();if((0,Y.m)(yt.subscribe))return yt.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,C.z)(Le))return function Ae(Le){return new V.y(Me=>{for(let yt=0;yt<Le.length&&!Me.closed;yt++)Me.next(Le[yt]);Me.complete()})}(Le);if((0,J.t)(Le))return function Ue(Le){return new V.y(Me=>{Le.then(yt=>{Me.closed||(Me.next(yt),Me.complete())},yt=>Me.error(yt)).then(null,le.h)})}(Le);if((0,te.D)(Le))return je(Le);if((0,W.T)(Le))return function ke(Le){return new V.y(Me=>{for(const yt of Le)if(Me.next(yt),Me.closed)return;Me.complete()})}(Le);if((0,ee.L)(Le))return function $e(Le){return je((0,ee.Q)(Le))}(Le)}throw(0,X.z)(Le)}function je(Le){return new V.y(Me=>{(function Je(Le,Me){var yt,Et,Ye,Ot;return(0,m.mG)(this,void 0,void 0,function*(){try{for(yt=(0,m.KL)(Le);!(Et=yield yt.next()).done;)if(Me.next(Et.value),Me.closed)return}catch(At){Ye={error:At}}finally{try{Et&&!Et.done&&(Ot=yt.return)&&(yield Ot.call(yt))}finally{if(Ye)throw Ye.error}}Me.complete()})})(Le,Me).catch(yt=>Me.error(yt))})}},6451:(Ee,se,D)=>{D.d(se,{T:()=>te});var m=D(8189),C=D(8421),J=D(515),V=D(3269),q=D(457);function te(...X){const W=(0,V.yG)(X),ee=(0,V._6)(X,1/0),Y=X;return Y.length?1===Y.length?(0,C.Xf)(Y[0]):(0,m.J)(ee)((0,q.D)(Y,W)):J.E}},9646:(Ee,se,D)=>{D.d(se,{of:()=>J});var m=D(3269),C=D(457);function J(...V){const q=(0,m.yG)(V);return(0,C.D)(V,q)}},2843:(Ee,se,D)=>{D.d(se,{_:()=>J});var m=D(9751),C=D(576);function J(V,q){const te=(0,C.m)(V)?V:()=>V,X=W=>W.error(te());return new m.y(q?W=>q.schedule(X,0,W):X)}},2805:(Ee,se,D)=>{D.d(se,{H:()=>q});var m=D(9751),C=D(4986),J=D(3532),V=D(1165);function q(te=0,X,W=C.P){let ee=-1;return null!=X&&((0,J.K)(X)?W=X:ee=X),new m.y(Y=>{let le=(0,V.q)(te)?+te-W.now():te;le<0&&(le=0);let he=0;return W.schedule(function(){Y.closed||(Y.next(he++),0<=ee?this.schedule(void 0,ee):Y.complete())},le)})}},5403:(Ee,se,D)=>{D.d(se,{Q:()=>C});var m=D(930);class C extends m.Lv{constructor(V,q,te,X,W){super(V),this.onFinalize=W,this._next=q?function(ee){try{q(ee)}catch(Y){V.error(Y)}}:super._next,this._error=X?function(ee){try{X(ee)}catch(Y){V.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=te?function(){try{te()}catch(ee){V.error(ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var V;const{closed:q}=this;super.unsubscribe(),!q&&(null===(V=this.onFinalize)||void 0===V||V.call(this))}}},262:(Ee,se,D)=>{D.d(se,{K:()=>V});var m=D(8421),C=D(5403),J=D(4482);function V(q){return(0,J.e)((te,X)=>{let Y,W=null,ee=!1;W=te.subscribe(new C.Q(X,void 0,void 0,le=>{Y=(0,m.Xf)(q(le,V(q)(te))),W?(W.unsubscribe(),W=null,Y.subscribe(X)):ee=!0})),ee&&(W.unsubscribe(),W=null,Y.subscribe(X))})}},4351:(Ee,se,D)=>{D.d(se,{b:()=>J});var m=D(5577),C=D(576);function J(V,q){return(0,C.m)(q)?(0,m.z)(V,q,1):(0,m.z)(V,1)}},8372:(Ee,se,D)=>{D.d(se,{b:()=>V});var m=D(4986),C=D(4482),J=D(5403);function V(q,te=m.z){return(0,C.e)((X,W)=>{let ee=null,Y=null,le=null;const he=()=>{if(ee){ee.unsubscribe(),ee=null;const He=Y;Y=null,W.next(He)}};function Pe(){const He=le+q,Ae=te.now();if(Ae<He)return ee=this.schedule(void 0,He-Ae),void W.add(ee);he()}X.subscribe(new J.Q(W,He=>{Y=He,le=te.now(),ee||(ee=te.schedule(Pe,q),W.add(ee))},()=>{he(),W.complete()},void 0,()=>{Y=ee=null}))})}},6590:(Ee,se,D)=>{D.d(se,{d:()=>J});var m=D(4482),C=D(5403);function J(V){return(0,m.e)((q,te)=>{let X=!1;q.subscribe(new C.Q(te,W=>{X=!0,te.next(W)},()=>{X||te.next(V),te.complete()}))})}},4086:(Ee,se,D)=>{D.d(se,{g:()=>ee});var m=D(4986),C=D(7272),J=D(5698),V=D(8502),q=D(9718),te=D(5577);function X(Y,le){return le?he=>(0,C.z)(le.pipe((0,J.q)(1),(0,V.l)()),he.pipe(X(Y))):(0,te.z)((he,Pe)=>Y(he,Pe).pipe((0,J.q)(1),(0,q.h)(he)))}var W=D(2805);function ee(Y,le=m.z){const he=(0,W.H)(Y,le);return X(()=>he)}},1884:(Ee,se,D)=>{D.d(se,{x:()=>V});var m=D(4671),C=D(4482),J=D(5403);function V(te,X=m.y){return te=te??q,(0,C.e)((W,ee)=>{let Y,le=!0;W.subscribe(new J.Q(ee,he=>{const Pe=X(he);(le||!te(Y,Pe))&&(le=!1,Y=Pe,ee.next(he))}))})}function q(te,X){return te===X}},6129:(Ee,se,D)=>{D.d(se,{z:()=>q});var m=D(4004),C=D(8421),J=D(4482),V=D(5403);function q(te,X){return X?W=>W.pipe(q((ee,Y)=>(0,C.Xf)(te(ee,Y)).pipe((0,m.U)((le,he)=>X(ee,le,Y,he))))):(0,J.e)((W,ee)=>{let Y=0,le=null,he=!1;W.subscribe(new V.Q(ee,Pe=>{le||(le=new V.Q(ee,void 0,()=>{le=null,he&&ee.complete()}),(0,C.Xf)(te(Pe,Y++)).subscribe(le))},()=>{he=!0,!le&&ee.complete()}))})}},9300:(Ee,se,D)=>{D.d(se,{h:()=>J});var m=D(4482),C=D(5403);function J(V,q){return(0,m.e)((te,X)=>{let W=0;te.subscribe(new C.Q(X,ee=>V.call(q,ee,W++)&&X.next(ee)))})}},8746:(Ee,se,D)=>{D.d(se,{x:()=>C});var m=D(4482);function C(J){return(0,m.e)((V,q)=>{try{V.subscribe(q)}finally{q.add(J)}})}},590:(Ee,se,D)=>{D.d(se,{P:()=>X});var m=D(6805),C=D(9300),J=D(5698),V=D(6590),q=D(8068),te=D(4671);function X(W,ee){const Y=arguments.length>=2;return le=>le.pipe(W?(0,C.h)((he,Pe)=>W(he,Pe,le)):te.y,(0,J.q)(1),Y?(0,V.d)(ee):(0,q.T)(()=>new m.K))}},8502:(Ee,se,D)=>{D.d(se,{l:()=>V});var m=D(4482),C=D(5403),J=D(5032);function V(){return(0,m.e)((q,te)=>{q.subscribe(new C.Q(te,J.Z))})}},3103:(Ee,se,D)=>{D.d(se,{Z:()=>X});var m=D(6805),C=D(9300),J=D(2035),V=D(8068),q=D(6590),te=D(4671);function X(W,ee){const Y=arguments.length>=2;return le=>le.pipe(W?(0,C.h)((he,Pe)=>W(he,Pe,le)):te.y,(0,J.h)(1),Y?(0,q.d)(ee):(0,V.T)(()=>new m.K))}},4004:(Ee,se,D)=>{D.d(se,{U:()=>J});var m=D(4482),C=D(5403);function J(V,q){return(0,m.e)((te,X)=>{let W=0;te.subscribe(new C.Q(X,ee=>{X.next(V.call(q,ee,W++))}))})}},9718:(Ee,se,D)=>{D.d(se,{h:()=>C});var m=D(4004);function C(J){return(0,m.U)(()=>J)}},8189:(Ee,se,D)=>{D.d(se,{J:()=>J});var m=D(5577),C=D(4671);function J(V=1/0){return(0,m.z)(C.y,V)}},5577:(Ee,se,D)=>{D.d(se,{z:()=>W});var m=D(4004),C=D(8421),J=D(4482),V=D(9672),q=D(5403),X=D(576);function W(ee,Y,le=1/0){return(0,X.m)(Y)?W((he,Pe)=>(0,m.U)((He,Ae)=>Y(he,He,Pe,Ae))((0,C.Xf)(ee(he,Pe))),le):("number"==typeof Y&&(le=Y),(0,J.e)((he,Pe)=>function te(ee,Y,le,he,Pe,He,Ae,Ue){const ke=[];let je=0,$e=0,Je=!1;const Le=()=>{Je&&!ke.length&&!je&&Y.complete()},Me=Et=>je<he?yt(Et):ke.push(Et),yt=Et=>{He&&Y.next(Et),je++;let Ye=!1;(0,C.Xf)(le(Et,$e++)).subscribe(new q.Q(Y,Ot=>{Pe?.(Ot),He?Me(Ot):Y.next(Ot)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(je--;ke.length&&je<he;){const Ot=ke.shift();Ae?(0,V.f)(Y,Ae,()=>yt(Ot)):yt(Ot)}Le()}catch(Ot){Y.error(Ot)}}))};return ee.subscribe(new q.Q(Y,Me,()=>{Je=!0,Le()})),()=>{Ue?.()}}(he,Pe,ee,le)))}},5363:(Ee,se,D)=>{D.d(se,{Q:()=>V});var m=D(9672),C=D(4482),J=D(5403);function V(q,te=0){return(0,C.e)((X,W)=>{X.subscribe(new J.Q(W,ee=>(0,m.f)(W,q,()=>W.next(ee),te),()=>(0,m.f)(W,q,()=>W.complete(),te),ee=>(0,m.f)(W,q,()=>W.error(ee),te)))})}},4813:(Ee,se,D)=>{D.d(se,{j:()=>C});var m=D(4004);function C(...J){const V=J.length;if(0===V)throw new Error("list of properties cannot be empty.");return(0,m.U)(q=>{let te=q;for(let X=0;X<V;X++){const W=te?.[J[X]];if(!(typeof W<"u"))return;te=W}return te})}},8646:(Ee,se,D)=>{D.d(se,{n:()=>le});var m=D(7579),C=D(4033),J=D(576),V=D(457),q=D(4482),te=D(9751);const W={connector:()=>new m.x};function ee(he,Pe=W){const{connector:He}=Pe;return(0,q.e)((Ae,Ue)=>{const ke=He();(0,V.D)(he(function X(he){return new te.y(Pe=>he.subscribe(Pe))}(ke))).subscribe(Ue),Ue.add(Ae.subscribe(ke))})}function le(he){return he?Pe=>ee(he)(Pe):Pe=>function Y(he,Pe){const He=(0,J.m)(he)?he:()=>he;return(0,J.m)(Pe)?ee(Pe,{connector:He}):Ae=>new C.c(Ae,He)}(new m.x)(Pe)}},8343:(Ee,se,D)=>{D.d(se,{x:()=>J});var m=D(4482),C=D(5403);function J(){return(0,m.e)((V,q)=>{let te=null;V._refCount++;const X=new C.Q(q,void 0,void 0,void 0,()=>{if(!V||V._refCount<=0||0<--V._refCount)return void(te=null);const W=V._connection,ee=te;te=null,W&&(!ee||W===ee)&&W.unsubscribe(),q.unsubscribe()});V.subscribe(X),X.closed||(te=V.connect())})}},5625:(Ee,se,D)=>{D.d(se,{X:()=>te});var m=D(4482),C=D(5403),J=D(4671),V=D(2805),q=D(8421);function te(X=1/0){let W;W=X&&"object"==typeof X?X:{count:X};const{count:ee=1/0,delay:Y,resetOnSuccess:le=!1}=W;return ee<=0?J.y:(0,m.e)((he,Pe)=>{let Ae,He=0;const Ue=()=>{let ke=!1;Ae=he.subscribe(new C.Q(Pe,je=>{le&&(He=0),Pe.next(je)},void 0,je=>{if(He++<ee){const $e=()=>{Ae?(Ae.unsubscribe(),Ae=null,Ue()):ke=!0};if(null!=Y){const Je="number"==typeof Y?(0,V.H)(Y):(0,q.Xf)(Y(je,He)),Le=new C.Q(Pe,()=>{Le.unsubscribe(),$e()},()=>{Pe.complete()});Je.subscribe(Le)}else $e()}else Pe.error(je)})),ke&&(Ae.unsubscribe(),Ae=null,Ue())};Ue()})}},5026:(Ee,se,D)=>{D.d(se,{R:()=>V});var m=D(4482),C=D(5403);function V(q,te){return(0,m.e)(function J(q,te,X,W,ee){return(Y,le)=>{let he=X,Pe=te,He=0;Y.subscribe(new C.Q(le,Ae=>{const Ue=He++;Pe=he?q(Pe,Ae,Ue):(he=!0,Ae),W&&le.next(Pe)},ee&&(()=>{he&&le.next(Pe),le.complete()})))}}(q,te,arguments.length>=2,!0))}},3099:(Ee,se,D)=>{D.d(se,{B:()=>te});var m=D(457),C=D(5698),J=D(7579),V=D(930),q=D(4482);function te(W={}){const{connector:ee=(()=>new J.x),resetOnError:Y=!0,resetOnComplete:le=!0,resetOnRefCountZero:he=!0}=W;return Pe=>{let He=null,Ae=null,Ue=null,ke=0,je=!1,$e=!1;const Je=()=>{Ae?.unsubscribe(),Ae=null},Le=()=>{Je(),He=Ue=null,je=$e=!1},Me=()=>{const yt=He;Le(),yt?.unsubscribe()};return(0,q.e)((yt,Et)=>{ke++,!$e&&!je&&Je();const Ye=Ue=Ue??ee();Et.add(()=>{ke--,0===ke&&!$e&&!je&&(Ae=X(Me,he))}),Ye.subscribe(Et),He||(He=new V.Hp({next:Ot=>Ye.next(Ot),error:Ot=>{$e=!0,Je(),Ae=X(Le,Y,Ot),Ye.error(Ot)},complete:()=>{je=!0,Je(),Ae=X(Le,le),Ye.complete()}}),(0,m.D)(yt).subscribe(He))})(Pe)}}function X(W,ee,...Y){return!0===ee?(W(),null):!1===ee?null:ee(...Y).pipe((0,C.q)(1)).subscribe(()=>W())}},4782:(Ee,se,D)=>{D.d(se,{d:()=>J});var m=D(4707),C=D(3099);function J(V,q,te){var X,W;let ee,Y=!1;return V&&"object"==typeof V?(ee=null!==(X=V.bufferSize)&&void 0!==X?X:1/0,q=null!==(W=V.windowTime)&&void 0!==W?W:1/0,Y=!!V.refCount,te=V.scheduler):ee=V??1/0,(0,C.B)({connector:()=>new m.t(ee,q,te),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Y})}},5684:(Ee,se,D)=>{D.d(se,{T:()=>C});var m=D(9300);function C(J){return(0,m.h)((V,q)=>J<=q)}},8675:(Ee,se,D)=>{D.d(se,{O:()=>V});var m=D(7272),C=D(3269),J=D(4482);function V(...q){const te=(0,C.yG)(q);return(0,J.e)((X,W)=>{(te?(0,m.z)(q,X,te):(0,m.z)(q,X)).subscribe(W)})}},3900:(Ee,se,D)=>{D.d(se,{w:()=>V});var m=D(8421),C=D(4482),J=D(5403);function V(q,te){return(0,C.e)((X,W)=>{let ee=null,Y=0,le=!1;const he=()=>le&&!ee&&W.complete();X.subscribe(new J.Q(W,Pe=>{ee?.unsubscribe();let He=0;const Ae=Y++;(0,m.Xf)(q(Pe,Ae)).subscribe(ee=new J.Q(W,Ue=>W.next(te?te(Pe,Ue,Ae,He++):Ue),()=>{ee=null,he()}))},()=>{le=!0,he()}))})}},5698:(Ee,se,D)=>{D.d(se,{q:()=>V});var m=D(515),C=D(4482),J=D(5403);function V(q){return q<=0?()=>m.E:(0,C.e)((te,X)=>{let W=0;te.subscribe(new J.Q(X,ee=>{++W<=q&&(X.next(ee),q<=W&&X.complete())}))})}},2035:(Ee,se,D)=>{D.d(se,{h:()=>V});var m=D(515),C=D(4482),J=D(5403);function V(q){return q<=0?()=>m.E:(0,C.e)((te,X)=>{let W=[];te.subscribe(new J.Q(X,ee=>{W.push(ee),q<W.length&&W.shift()},()=>{for(const ee of W)X.next(ee);X.complete()},void 0,()=>{W=null}))})}},2722:(Ee,se,D)=>{D.d(se,{R:()=>q});var m=D(4482),C=D(5403),J=D(8421),V=D(5032);function q(te){return(0,m.e)((X,W)=>{(0,J.Xf)(te).subscribe(new C.Q(W,()=>W.complete(),V.Z)),!W.closed&&X.subscribe(W)})}},2529:(Ee,se,D)=>{D.d(se,{o:()=>J});var m=D(4482),C=D(5403);function J(V,q=!1){return(0,m.e)((te,X)=>{let W=0;te.subscribe(new C.Q(X,ee=>{const Y=V(ee,W++);(Y||q)&&X.next(ee),!Y&&X.complete()}))})}},8505:(Ee,se,D)=>{D.d(se,{b:()=>q});var m=D(576),C=D(4482),J=D(5403),V=D(4671);function q(te,X,W){const ee=(0,m.m)(te)||X||W?{next:te,error:X,complete:W}:te;return ee?(0,C.e)((Y,le)=>{var he;null===(he=ee.subscribe)||void 0===he||he.call(ee);let Pe=!0;Y.subscribe(new J.Q(le,He=>{var Ae;null===(Ae=ee.next)||void 0===Ae||Ae.call(ee,He),le.next(He)},()=>{var He;Pe=!1,null===(He=ee.complete)||void 0===He||He.call(ee),le.complete()},He=>{var Ae;Pe=!1,null===(Ae=ee.error)||void 0===Ae||Ae.call(ee,He),le.error(He)},()=>{var He,Ae;Pe&&(null===(He=ee.unsubscribe)||void 0===He||He.call(ee)),null===(Ae=ee.finalize)||void 0===Ae||Ae.call(ee)}))}):V.y}},9468:(Ee,se,D)=>{D.d(se,{p:()=>W});var m=D(4986),C=D(4482),J=D(5403),V=D(8421);const q={leading:!0,trailing:!1};var X=D(2805);function W(ee,Y=m.z,le=q){const he=(0,X.H)(ee,Y);return function te(ee,Y=q){return(0,C.e)((le,he)=>{const{leading:Pe,trailing:He}=Y;let Ae=!1,Ue=null,ke=null,je=!1;const $e=()=>{ke?.unsubscribe(),ke=null,He&&(Me(),je&&he.complete())},Je=()=>{ke=null,je&&he.complete()},Le=yt=>ke=(0,V.Xf)(ee(yt)).subscribe(new J.Q(he,$e,Je)),Me=()=>{if(Ae){Ae=!1;const yt=Ue;Ue=null,he.next(yt),!je&&Le(yt)}};le.subscribe(new J.Q(he,yt=>{Ae=!0,Ue=yt,(!ke||ke.closed)&&(Pe?Me():Le(yt))},()=>{je=!0,(!(He&&Ae&&ke)||ke.closed)&&he.complete()}))})}(()=>he,le)}},8068:(Ee,se,D)=>{D.d(se,{T:()=>V});var m=D(6805),C=D(4482),J=D(5403);function V(te=q){return(0,C.e)((X,W)=>{let ee=!1;X.subscribe(new J.Q(W,Y=>{ee=!0,W.next(Y)},()=>ee?W.complete():W.error(te())))})}function q(){return new m.K}},7414:(Ee,se,D)=>{D.d(se,{V:()=>ee});var m=D(4986),C=D(1165),J=D(4482),V=D(8421),q=D(3888),te=D(5403),X=D(9672);const W=(0,q.d)(le=>function(Pe=null){le(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=Pe});function ee(le,he){const{first:Pe,each:He,with:Ae=Y,scheduler:Ue=he??m.z,meta:ke=null}=(0,C.q)(le)?{first:le}:"number"==typeof le?{each:le}:le;if(null==Pe&&null==He)throw new TypeError("No timeout provided.");return(0,J.e)((je,$e)=>{let Je,Le,Me=null,yt=0;const Et=Ye=>{Le=(0,X.f)($e,Ue,()=>{try{Je.unsubscribe(),(0,V.Xf)(Ae({meta:ke,lastValue:Me,seen:yt})).subscribe($e)}catch(Ot){$e.error(Ot)}},Ye)};Je=je.subscribe(new te.Q($e,Ye=>{Le?.unsubscribe(),yt++,$e.next(Me=Ye),He>0&&Et(He)},void 0,void 0,()=>{Le?.closed||Le?.unsubscribe(),Me=null})),Et(null!=Pe?"number"==typeof Pe?Pe:+Pe-Ue.now():He)})}function Y(le){throw new W(le)}},1365:(Ee,se,D)=>{D.d(se,{M:()=>X});var m=D(4482),C=D(5403),J=D(8421),V=D(4671),q=D(5032),te=D(3269);function X(...W){const ee=(0,te.jO)(W);return(0,m.e)((Y,le)=>{const he=W.length,Pe=new Array(he);let He=W.map(()=>!1),Ae=!1;for(let Ue=0;Ue<he;Ue++)(0,J.Xf)(W[Ue]).subscribe(new C.Q(le,ke=>{Pe[Ue]=ke,!Ae&&!He[Ue]&&(He[Ue]=!0,(Ae=He.every(V.y))&&(He=null))},q.Z));Y.subscribe(new C.Q(le,Ue=>{if(Ae){const ke=[Ue,...Pe];le.next(ee?ee(...ke):ke)}}))})}},4408:(Ee,se,D)=>{D.d(se,{o:()=>q});var m=D(727);class C extends m.w0{constructor(X,W){super()}schedule(X,W=0){return this}}const J={setInterval(...te){const{delegate:X}=J;return(X?.setInterval||setInterval)(...te)},clearInterval(te){const{delegate:X}=J;return(X?.clearInterval||clearInterval)(te)},delegate:void 0};var V=D(8737);class q extends C{constructor(X,W){super(X,W),this.scheduler=X,this.work=W,this.pending=!1}schedule(X,W=0){if(this.closed)return this;this.state=X;const ee=this.id,Y=this.scheduler;return null!=ee&&(this.id=this.recycleAsyncId(Y,ee,W)),this.pending=!0,this.delay=W,this.id=this.id||this.requestAsyncId(Y,this.id,W),this}requestAsyncId(X,W,ee=0){return J.setInterval(X.flush.bind(X,this),ee)}recycleAsyncId(X,W,ee=0){if(null!=ee&&this.delay===ee&&!1===this.pending)return W;J.clearInterval(W)}execute(X,W){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ee=this._execute(X,W);if(ee)return ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(X,W){let Y,ee=!1;try{this.work(X)}catch(le){ee=!0,Y=le||new Error("Scheduled action threw falsy error")}if(ee)return this.unsubscribe(),Y}unsubscribe(){if(!this.closed){const{id:X,scheduler:W}=this,{actions:ee}=W;this.work=this.state=this.scheduler=null,this.pending=!1,(0,V.P)(ee,this),null!=X&&(this.id=this.recycleAsyncId(W,X,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ee,se,D)=>{D.d(se,{v:()=>J});var m=D(6063);class C{constructor(q,te=C.now){this.schedulerActionCtor=q,this.now=te}schedule(q,te=0,X){return new this.schedulerActionCtor(this,q).schedule(X,te)}}C.now=m.l.now;class J extends C{constructor(q,te=C.now){super(q,te),this.actions=[],this._active=!1,this._scheduled=void 0}flush(q){const{actions:te}=this;if(this._active)return void te.push(q);let X;this._active=!0;do{if(X=q.execute(q.state,q.delay))break}while(q=te.shift());if(this._active=!1,X){for(;q=te.shift();)q.unsubscribe();throw X}}}},4986:(Ee,se,D)=>{D.d(se,{P:()=>V,z:()=>J});var m=D(4408);const J=new(D(7565).v)(m.o),V=J},6063:(Ee,se,D)=>{D.d(se,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},233:(Ee,se,D)=>{D.d(se,{N:()=>q});var m=D(4408),J=D(7565);const q=new class V extends J.v{}(class C extends m.o{constructor(W,ee){super(W,ee),this.scheduler=W,this.work=ee}schedule(W,ee=0){return ee>0?super.schedule(W,ee):(this.delay=ee,this.state=W,this.scheduler.flush(this),this)}execute(W,ee){return ee>0||this.closed?super.execute(W,ee):this._execute(W,ee)}requestAsyncId(W,ee,Y=0){return null!=Y&&Y>0||null==Y&&this.delay>0?super.requestAsyncId(W,ee,Y):W.flush(this)}})},3410:(Ee,se,D)=>{D.d(se,{z:()=>m});const m={setTimeout(...C){const{delegate:J}=m;return(J?.setTimeout||setTimeout)(...C)},clearTimeout(C){const{delegate:J}=m;return(J?.clearTimeout||clearTimeout)(C)},delegate:void 0}},2202:(Ee,se,D)=>{D.d(se,{h:()=>C});const C=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ee,se,D)=>{D.d(se,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Ee,se,D)=>{D.d(se,{K:()=>C});const C=(0,D(3888).d)(J=>function(){J(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Ee,se,D)=>{D.d(se,{_6:()=>te,jO:()=>V,yG:()=>q});var m=D(576),C=D(3532);function J(X){return X[X.length-1]}function V(X){return(0,m.m)(J(X))?X.pop():void 0}function q(X){return(0,C.K)(J(X))?X.pop():void 0}function te(X,W){return"number"==typeof J(X)?X.pop():W}},4742:(Ee,se,D)=>{D.d(se,{D:()=>q});const{isArray:m}=Array,{getPrototypeOf:C,prototype:J,keys:V}=Object;function q(X){if(1===X.length){const W=X[0];if(m(W))return{args:W,keys:null};if(function te(X){return X&&"object"==typeof X&&C(X)===J}(W)){const ee=V(W);return{args:ee.map(Y=>W[Y]),keys:ee}}}return{args:X,keys:null}}},8737:(Ee,se,D)=>{function m(C,J){if(C){const V=C.indexOf(J);0<=V&&C.splice(V,1)}}D.d(se,{P:()=>m})},3888:(Ee,se,D)=>{function m(C){const V=C(q=>{Error.call(q),q.stack=(new Error).stack});return V.prototype=Object.create(Error.prototype),V.prototype.constructor=V,V}D.d(se,{d:()=>m})},1810:(Ee,se,D)=>{function m(C,J){return C.reduce((V,q,te)=>(V[q]=J[te],V),{})}D.d(se,{n:()=>m})},2806:(Ee,se,D)=>{D.d(se,{O:()=>V,x:()=>J});var m=D(2416);let C=null;function J(q){if(m.v.useDeprecatedSynchronousErrorHandling){const te=!C;if(te&&(C={errorThrown:!1,error:null}),q(),te){const{errorThrown:X,error:W}=C;if(C=null,X)throw W}}else q()}function V(q){m.v.useDeprecatedSynchronousErrorHandling&&C&&(C.errorThrown=!0,C.error=q)}},9672:(Ee,se,D)=>{function m(C,J,V,q=0,te=!1){const X=J.schedule(function(){V(),te?C.add(this.schedule(null,q)):this.unsubscribe()},q);if(C.add(X),!te)return X}D.d(se,{f:()=>m})},4671:(Ee,se,D)=>{function m(C){return C}D.d(se,{y:()=>m})},1144:(Ee,se,D)=>{D.d(se,{z:()=>m});const m=C=>C&&"number"==typeof C.length&&"function"!=typeof C},2206:(Ee,se,D)=>{D.d(se,{D:()=>C});var m=D(576);function C(J){return Symbol.asyncIterator&&(0,m.m)(J?.[Symbol.asyncIterator])}},1165:(Ee,se,D)=>{function m(C){return C instanceof Date&&!isNaN(C)}D.d(se,{q:()=>m})},576:(Ee,se,D)=>{function m(C){return"function"==typeof C}D.d(se,{m:()=>m})},3670:(Ee,se,D)=>{D.d(se,{c:()=>J});var m=D(8822),C=D(576);function J(V){return(0,C.m)(V[m.L])}},6495:(Ee,se,D)=>{D.d(se,{T:()=>J});var m=D(2202),C=D(576);function J(V){return(0,C.m)(V?.[m.h])}},8239:(Ee,se,D)=>{D.d(se,{t:()=>C});var m=D(576);function C(J){return(0,m.m)(J?.then)}},3260:(Ee,se,D)=>{D.d(se,{L:()=>V,Q:()=>J});var m=D(655),C=D(576);function J(q){return(0,m.FC)(this,arguments,function*(){const X=q.getReader();try{for(;;){const{value:W,done:ee}=yield(0,m.qq)(X.read());if(ee)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(W)}}finally{X.releaseLock()}})}function V(q){return(0,C.m)(q?.getReader)}},3532:(Ee,se,D)=>{D.d(se,{K:()=>C});var m=D(576);function C(J){return J&&(0,m.m)(J.schedule)}},4482:(Ee,se,D)=>{D.d(se,{A:()=>C,e:()=>J});var m=D(576);function C(V){return(0,m.m)(V?.lift)}function J(V){return q=>{if(C(q))return q.lift(function(te){try{return V(te,this)}catch(X){this.error(X)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Ee,se,D)=>{D.d(se,{Z:()=>V});var m=D(4004);const{isArray:C}=Array;function V(q){return(0,m.U)(te=>function J(q,te){return C(te)?q(...te):q(te)}(q,te))}},5032:(Ee,se,D)=>{function m(){}D.d(se,{Z:()=>m})},9635:(Ee,se,D)=>{D.d(se,{U:()=>J,z:()=>C});var m=D(4671);function C(...V){return J(V)}function J(V){return 0===V.length?m.y:1===V.length?V[0]:function(te){return V.reduce((X,W)=>W(X),te)}}},7849:(Ee,se,D)=>{D.d(se,{h:()=>J});var m=D(2416),C=D(3410);function J(V){C.z.setTimeout(()=>{const{onUnhandledError:q}=m.v;if(!q)throw V;q(V)})}},4532:(Ee,se,D)=>{function m(C){return new TypeError(`You provided ${null!==C&&"object"==typeof C?"an invalid object":`'${C}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}D.d(se,{z:()=>m})},655:(Ee,se,D)=>{function V(Xe,Ke){var ut={};for(var qe in Xe)Object.prototype.hasOwnProperty.call(Xe,qe)&&Ke.indexOf(qe)<0&&(ut[qe]=Xe[qe]);if(null!=Xe&&"function"==typeof Object.getOwnPropertySymbols){var xt=0;for(qe=Object.getOwnPropertySymbols(Xe);xt<qe.length;xt++)Ke.indexOf(qe[xt])<0&&Object.prototype.propertyIsEnumerable.call(Xe,qe[xt])&&(ut[qe[xt]]=Xe[qe[xt]])}return ut}function q(Xe,Ke,ut,qe){var hn,xt=arguments.length,It=xt<3?Ke:null===qe?qe=Object.getOwnPropertyDescriptor(Ke,ut):qe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)It=Reflect.decorate(Xe,Ke,ut,qe);else for(var Jn=Xe.length-1;Jn>=0;Jn--)(hn=Xe[Jn])&&(It=(xt<3?hn(It):xt>3?hn(Ke,ut,It):hn(Ke,ut))||It);return xt>3&&It&&Object.defineProperty(Ke,ut,It),It}function W(Xe,Ke,ut,qe){return new(ut||(ut=Promise))(function(It,hn){function Jn(On){try{$t(qe.next(On))}catch(gn){hn(gn)}}function on(On){try{$t(qe.throw(On))}catch(gn){hn(gn)}}function $t(On){On.done?It(On.value):function xt(It){return It instanceof ut?It:new ut(function(hn){hn(It)})}(On.value).then(Jn,on)}$t((qe=qe.apply(Xe,Ke||[])).next())})}function ke(Xe){return this instanceof ke?(this.v=Xe,this):new ke(Xe)}function je(Xe,Ke,ut){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xt,qe=ut.apply(Xe,Ke||[]),It=[];return xt={},hn("next"),hn("throw"),hn("return"),xt[Symbol.asyncIterator]=function(){return this},xt;function hn(rr){qe[rr]&&(xt[rr]=function(zr){return new Promise(function(bn,un){It.push([rr,zr,bn,un])>1||Jn(rr,zr)})})}function Jn(rr,zr){try{!function on(rr){rr.value instanceof ke?Promise.resolve(rr.value.v).then($t,On):gn(It[0][2],rr)}(qe[rr](zr))}catch(bn){gn(It[0][3],bn)}}function $t(rr){Jn("next",rr)}function On(rr){Jn("throw",rr)}function gn(rr,zr){rr(zr),It.shift(),It.length&&Jn(It[0][0],It[0][1])}}function Je(Xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ut,Ke=Xe[Symbol.asyncIterator];return Ke?Ke.call(Xe):(Xe=function he(Xe){var Ke="function"==typeof Symbol&&Symbol.iterator,ut=Ke&&Xe[Ke],qe=0;if(ut)return ut.call(Xe);if(Xe&&"number"==typeof Xe.length)return{next:function(){return Xe&&qe>=Xe.length&&(Xe=void 0),{value:Xe&&Xe[qe++],done:!Xe}}};throw new TypeError(Ke?"Object is not iterable.":"Symbol.iterator is not defined.")}(Xe),ut={},qe("next"),qe("throw"),qe("return"),ut[Symbol.asyncIterator]=function(){return this},ut);function qe(It){ut[It]=Xe[It]&&function(hn){return new Promise(function(Jn,on){!function xt(It,hn,Jn,on){Promise.resolve(on).then(function($t){It({value:$t,done:Jn})},hn)}(Jn,on,(hn=Xe[It](hn)).done,hn.value)})}}}D.d(se,{FC:()=>je,KL:()=>Je,_T:()=>V,gn:()=>q,mG:()=>W,qq:()=>ke})},9671:(Ee,se,D)=>{function m(J,V,q,te,X,W,ee){try{var Y=J[W](ee),le=Y.value}catch(he){return void q(he)}Y.done?V(le):Promise.resolve(le).then(te,X)}function C(J){return function(){var V=this,q=arguments;return new Promise(function(te,X){var W=J.apply(V,q);function ee(le){m(W,te,X,ee,Y,"next",le)}function Y(le){m(W,te,X,ee,Y,"throw",le)}ee(void 0)})}}D.d(se,{Z:()=>C})},7340:(Ee,se,D)=>{D.d(se,{EY:()=>Ue,F4:()=>Y,IO:()=>Ae,LC:()=>C,SB:()=>ee,X$:()=>V,ZE:()=>$e,ZN:()=>je,_j:()=>m,eR:()=>le,jt:()=>q,k1:()=>Je,l3:()=>J,oB:()=>W,pV:()=>Pe,ru:()=>te,vP:()=>X});class m{}class C{}const J="*";function V(Le,Me){return{type:7,name:Le,definitions:Me,options:{}}}function q(Le,Me=null){return{type:4,styles:Me,timings:Le}}function te(Le,Me=null){return{type:3,steps:Le,options:Me}}function X(Le,Me=null){return{type:2,steps:Le,options:Me}}function W(Le){return{type:6,styles:Le,offset:null}}function ee(Le,Me,yt){return{type:0,name:Le,styles:Me,options:yt}}function Y(Le){return{type:5,steps:Le}}function le(Le,Me,yt=null){return{type:1,expr:Le,animation:Me,options:yt}}function Pe(Le=null){return{type:9,options:Le}}function Ae(Le,Me,yt=null){return{type:11,selector:Le,animation:Me,options:yt}}function Ue(Le,Me){return{type:12,timings:Le,animation:Me}}function ke(Le){Promise.resolve().then(Le)}class je{constructor(Me=0,yt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Me+yt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Me=>Me()),this._onDoneFns=[])}onStart(Me){this._originalOnStartFns.push(Me),this._onStartFns.push(Me)}onDone(Me){this._originalOnDoneFns.push(Me),this._onDoneFns.push(Me)}onDestroy(Me){this._onDestroyFns.push(Me)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ke(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Me=>Me()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Me=>Me()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Me){this._position=this.totalTime?Me*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Me){const yt="start"==Me?this._onStartFns:this._onDoneFns;yt.forEach(Et=>Et()),yt.length=0}}class $e{constructor(Me){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Me;let yt=0,Et=0,Ye=0;const Ot=this.players.length;0==Ot?ke(()=>this._onFinish()):this.players.forEach(At=>{At.onDone(()=>{++yt==Ot&&this._onFinish()}),At.onDestroy(()=>{++Et==Ot&&this._onDestroy()}),At.onStart(()=>{++Ye==Ot&&this._onStart()})}),this.totalTime=this.players.reduce((At,Xe)=>Math.max(At,Xe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Me=>Me()),this._onDoneFns=[])}init(){this.players.forEach(Me=>Me.init())}onStart(Me){this._onStartFns.push(Me)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Me=>Me()),this._onStartFns=[])}onDone(Me){this._onDoneFns.push(Me)}onDestroy(Me){this._onDestroyFns.push(Me)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Me=>Me.play())}pause(){this.players.forEach(Me=>Me.pause())}restart(){this.players.forEach(Me=>Me.restart())}finish(){this._onFinish(),this.players.forEach(Me=>Me.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Me=>Me.destroy()),this._onDestroyFns.forEach(Me=>Me()),this._onDestroyFns=[])}reset(){this.players.forEach(Me=>Me.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Me){const yt=Me*this.totalTime;this.players.forEach(Et=>{const Ye=Et.totalTime?Math.min(1,yt/Et.totalTime):1;Et.setPosition(Ye)})}getPosition(){const Me=this.players.reduce((yt,Et)=>null===yt||Et.totalTime>yt.totalTime?Et:yt,null);return null!=Me?Me.getPosition():0}beforeDestroy(){this.players.forEach(Me=>{Me.beforeDestroy&&Me.beforeDestroy()})}triggerCallback(Me){const yt="start"==Me?this._onStartFns:this._onDoneFns;yt.forEach(Et=>Et()),yt.length=0}}const Je="!"},6895:(Ee,se,D)=>{D.d(se,{Do:()=>$e,ED:()=>_e,EM:()=>Cs,Gx:()=>qr,H9:()=>bo,HT:()=>V,JF:()=>Fr,JJ:()=>Cl,K0:()=>te,Mx:()=>pi,NF:()=>vo,Nd:()=>zs,O5:()=>Yi,OU:()=>la,Ov:()=>_i,PC:()=>Vt,RF:()=>Lr,S$:()=>Ue,Ts:()=>Gn,V_:()=>ee,Ye:()=>Je,Zx:()=>Bo,_K:()=>os,b0:()=>je,bD:()=>Qi,ez:()=>Bi,gd:()=>En,i8:()=>Qr,mk:()=>Mn,n9:()=>Ds,p6:()=>Qn,q:()=>J,rS:()=>li,sg:()=>mr,tP:()=>jt,uU:()=>hr,w_:()=>q});var m=D(4650);let C=null;function J(){return C}function V(M){C||(C=M)}class q{}const te=new m.OlP("DocumentToken");let X=(()=>{class M{historyGo(k){throw new Error("Not implemented")}}return M.\u0275fac=function(k){return new(k||M)},M.\u0275prov=m.Yz7({token:M,factory:function(){return function W(){return(0,m.LFG)(Y)}()},providedIn:"platform"}),M})();const ee=new m.OlP("Location Initialized");let Y=(()=>{class M extends X{constructor(k){super(),this._doc=k,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return J().getBaseHref(this._doc)}onPopState(k){const ie=J().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("popstate",k,!1),()=>ie.removeEventListener("popstate",k)}onHashChange(k){const ie=J().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("hashchange",k,!1),()=>ie.removeEventListener("hashchange",k)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(k){this._location.pathname=k}pushState(k,ie,ye){le()?this._history.pushState(k,ie,ye):this._location.hash=ye}replaceState(k,ie,ye){le()?this._history.replaceState(k,ie,ye):this._location.hash=ye}forward(){this._history.forward()}back(){this._history.back()}historyGo(k=0){this._history.go(k)}getState(){return this._history.state}}return M.\u0275fac=function(k){return new(k||M)(m.LFG(te))},M.\u0275prov=m.Yz7({token:M,factory:function(){return function he(){return new Y((0,m.LFG)(te))}()},providedIn:"platform"}),M})();function le(){return!!window.history.pushState}function Pe(M,z){if(0==M.length)return z;if(0==z.length)return M;let k=0;return M.endsWith("/")&&k++,z.startsWith("/")&&k++,2==k?M+z.substring(1):1==k?M+z:M+"/"+z}function He(M){const z=M.match(/#|\?|$/),k=z&&z.index||M.length;return M.slice(0,k-("/"===M[k-1]?1:0))+M.slice(k)}function Ae(M){return M&&"?"!==M[0]?"?"+M:M}let Ue=(()=>{class M{historyGo(k){throw new Error("Not implemented")}}return M.\u0275fac=function(k){return new(k||M)},M.\u0275prov=m.Yz7({token:M,factory:function(){return(0,m.f3M)(je)},providedIn:"root"}),M})();const ke=new m.OlP("appBaseHref");let je=(()=>{class M extends Ue{constructor(k,ie){super(),this._platformLocation=k,this._removeListenerFns=[],this._baseHref=ie??this._platformLocation.getBaseHrefFromDOM()??(0,m.f3M)(te).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}prepareExternalUrl(k){return Pe(this._baseHref,k)}path(k=!1){const ie=this._platformLocation.pathname+Ae(this._platformLocation.search),ye=this._platformLocation.hash;return ye&&k?`${ie}${ye}`:ie}pushState(k,ie,ye,it){const pt=this.prepareExternalUrl(ye+Ae(it));this._platformLocation.pushState(k,ie,pt)}replaceState(k,ie,ye,it){const pt=this.prepareExternalUrl(ye+Ae(it));this._platformLocation.replaceState(k,ie,pt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){this._platformLocation.historyGo?.(k)}}return M.\u0275fac=function(k){return new(k||M)(m.LFG(X),m.LFG(ke,8))},M.\u0275prov=m.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})(),$e=(()=>{class M extends Ue{constructor(k,ie){super(),this._platformLocation=k,this._baseHref="",this._removeListenerFns=[],null!=ie&&(this._baseHref=ie)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}path(k=!1){let ie=this._platformLocation.hash;return null==ie&&(ie="#"),ie.length>0?ie.substring(1):ie}prepareExternalUrl(k){const ie=Pe(this._baseHref,k);return ie.length>0?"#"+ie:ie}pushState(k,ie,ye,it){let pt=this.prepareExternalUrl(ye+Ae(it));0==pt.length&&(pt=this._platformLocation.pathname),this._platformLocation.pushState(k,ie,pt)}replaceState(k,ie,ye,it){let pt=this.prepareExternalUrl(ye+Ae(it));0==pt.length&&(pt=this._platformLocation.pathname),this._platformLocation.replaceState(k,ie,pt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){this._platformLocation.historyGo?.(k)}}return M.\u0275fac=function(k){return new(k||M)(m.LFG(X),m.LFG(ke,8))},M.\u0275prov=m.Yz7({token:M,factory:M.\u0275fac}),M})(),Je=(()=>{class M{constructor(k){this._subject=new m.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=k;const ie=this._locationStrategy.getBaseHref();this._basePath=function Et(M){if(new RegExp("^(https?:)?//").test(M)){const[,k]=M.split(/\/\/[^\/]+/);return k}return M}(He(yt(ie))),this._locationStrategy.onPopState(ye=>{this._subject.emit({url:this.path(!0),pop:!0,state:ye.state,type:ye.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(k=!1){return this.normalize(this._locationStrategy.path(k))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(k,ie=""){return this.path()==this.normalize(k+Ae(ie))}normalize(k){return M.stripTrailingSlash(function Me(M,z){if(!M||!z.startsWith(M))return z;const k=z.substring(M.length);return""===k||["/",";","?","#"].includes(k[0])?k:z}(this._basePath,yt(k)))}prepareExternalUrl(k){return k&&"/"!==k[0]&&(k="/"+k),this._locationStrategy.prepareExternalUrl(k)}go(k,ie="",ye=null){this._locationStrategy.pushState(ye,"",k,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Ae(ie)),ye)}replaceState(k,ie="",ye=null){this._locationStrategy.replaceState(ye,"",k,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Ae(ie)),ye)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(k=0){this._locationStrategy.historyGo?.(k)}onUrlChange(k){return this._urlChangeListeners.push(k),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ie=>{this._notifyUrlChangeListeners(ie.url,ie.state)})),()=>{const ie=this._urlChangeListeners.indexOf(k);this._urlChangeListeners.splice(ie,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(k="",ie){this._urlChangeListeners.forEach(ye=>ye(k,ie))}subscribe(k,ie,ye){return this._subject.subscribe({next:k,error:ie,complete:ye})}}return M.normalizeQueryParams=Ae,M.joinWithSlash=Pe,M.stripTrailingSlash=He,M.\u0275fac=function(k){return new(k||M)(m.LFG(Ue))},M.\u0275prov=m.Yz7({token:M,factory:function(){return function Le(){return new Je((0,m.LFG)(Ue))}()},providedIn:"root"}),M})();function yt(M){return M.replace(/\/index.html$/,"")}const Ye={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var Ot=(()=>((Ot=Ot||{})[Ot.Decimal=0]="Decimal",Ot[Ot.Percent=1]="Percent",Ot[Ot.Currency=2]="Currency",Ot[Ot.Scientific=3]="Scientific",Ot))(),At=(()=>((At=At||{})[At.Zero=0]="Zero",At[At.One=1]="One",At[At.Two=2]="Two",At[At.Few=3]="Few",At[At.Many=4]="Many",At[At.Other=5]="Other",At))(),Xe=(()=>((Xe=Xe||{})[Xe.Format=0]="Format",Xe[Xe.Standalone=1]="Standalone",Xe))(),Ke=(()=>((Ke=Ke||{})[Ke.Narrow=0]="Narrow",Ke[Ke.Abbreviated=1]="Abbreviated",Ke[Ke.Wide=2]="Wide",Ke[Ke.Short=3]="Short",Ke))(),ut=(()=>((ut=ut||{})[ut.Short=0]="Short",ut[ut.Medium=1]="Medium",ut[ut.Long=2]="Long",ut[ut.Full=3]="Full",ut))(),qe=(()=>((qe=qe||{})[qe.Decimal=0]="Decimal",qe[qe.Group=1]="Group",qe[qe.List=2]="List",qe[qe.PercentSign=3]="PercentSign",qe[qe.PlusSign=4]="PlusSign",qe[qe.MinusSign=5]="MinusSign",qe[qe.Exponential=6]="Exponential",qe[qe.SuperscriptingExponent=7]="SuperscriptingExponent",qe[qe.PerMille=8]="PerMille",qe[qe.Infinity=9]="Infinity",qe[qe.NaN=10]="NaN",qe[qe.TimeSeparator=11]="TimeSeparator",qe[qe.CurrencyDecimal=12]="CurrencyDecimal",qe[qe.CurrencyGroup=13]="CurrencyGroup",qe))();function rr(M,z){return ir((0,m.cg1)(M)[m.wAp.DateFormat],z)}function zr(M,z){return ir((0,m.cg1)(M)[m.wAp.TimeFormat],z)}function bn(M,z){return ir((0,m.cg1)(M)[m.wAp.DateTimeFormat],z)}function un(M,z){const k=(0,m.cg1)(M),ie=k[m.wAp.NumberSymbols][z];if(typeof ie>"u"){if(z===qe.CurrencyDecimal)return k[m.wAp.NumberSymbols][qe.Decimal];if(z===qe.CurrencyGroup)return k[m.wAp.NumberSymbols][qe.Group]}return ie}function ei(M,z){return(0,m.cg1)(M)[m.wAp.NumberFormats][z]}const Pt=m.kL8;function kn(M){if(!M[m.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${M[m.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function ir(M,z){for(let k=z;k>-1;k--)if(typeof M[k]<"u")return M[k];throw new Error("Locale data API: locale data undefined")}function nn(M){const[z,k]=M.split(":");return{hours:+z,minutes:+k}}const Kr=2,br=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,In={},Yn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var sr=(()=>((sr=sr||{})[sr.Short=0]="Short",sr[sr.ShortGMT=1]="ShortGMT",sr[sr.Long=2]="Long",sr[sr.Extended=3]="Extended",sr))(),rn=(()=>((rn=rn||{})[rn.FullYear=0]="FullYear",rn[rn.Month=1]="Month",rn[rn.Date=2]="Date",rn[rn.Hours=3]="Hours",rn[rn.Minutes=4]="Minutes",rn[rn.Seconds=5]="Seconds",rn[rn.FractionalSeconds=6]="FractionalSeconds",rn[rn.Day=7]="Day",rn))(),Yt=(()=>((Yt=Yt||{})[Yt.DayPeriods=0]="DayPeriods",Yt[Yt.Days=1]="Days",Yt[Yt.Months=2]="Months",Yt[Yt.Eras=3]="Eras",Yt))();function Qn(M,z,k,ie){let ye=function Mt(M){if(Oe(M))return M;if("number"==typeof M&&!isNaN(M))return new Date(M);if("string"==typeof M){if(M=M.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(M)){const[ye,it=1,pt=1]=M.split("-").map(ln=>+ln);return mi(ye,it-1,pt)}const k=parseFloat(M);if(!isNaN(M-k))return new Date(k);let ie;if(ie=M.match(br))return function Bt(M){const z=new Date(0);let k=0,ie=0;const ye=M[8]?z.setUTCFullYear:z.setFullYear,it=M[8]?z.setUTCHours:z.setHours;M[9]&&(k=Number(M[9]+M[10]),ie=Number(M[9]+M[11])),ye.call(z,Number(M[1]),Number(M[2])-1,Number(M[3]));const pt=Number(M[4]||0)-k,ln=Number(M[5]||0)-ie,Dr=Number(M[6]||0),Wr=Math.floor(1e3*parseFloat("0."+(M[7]||0)));return it.call(z,pt,ln,Dr,Wr),z}(ie)}const z=new Date(M);if(!Oe(z))throw new Error(`Unable to convert "${M}" into a date`);return z}(M);z=Ur(k,z)||z;let ln,pt=[];for(;z;){if(ln=Yn.exec(z),!ln){pt.push(z);break}{pt=pt.concat(ln.slice(1));const tr=pt.pop();if(!tr)break;z=tr}}let Dr=ye.getTimezoneOffset();ie&&(Dr=De(ie,Dr),ye=function Ne(M,z,k){const ie=k?-1:1,ye=M.getTimezoneOffset();return function rt(M,z){return(M=new Date(M.getTime())).setMinutes(M.getMinutes()+z),M}(M,ie*(De(z,ye)-ye))}(ye,ie,!0));let Wr="";return pt.forEach(tr=>{const cr=function me(M){if(de[M])return de[M];let z;switch(M){case"G":case"GG":case"GGG":z=Un(Yt.Eras,Ke.Abbreviated);break;case"GGGG":z=Un(Yt.Eras,Ke.Wide);break;case"GGGGG":z=Un(Yt.Eras,Ke.Narrow);break;case"y":z=or(rn.FullYear,1,0,!1,!0);break;case"yy":z=or(rn.FullYear,2,0,!0,!0);break;case"yyy":z=or(rn.FullYear,3,0,!1,!0);break;case"yyyy":z=or(rn.FullYear,4,0,!1,!0);break;case"Y":z=bt(1);break;case"YY":z=bt(2,!0);break;case"YYY":z=bt(3);break;case"YYYY":z=bt(4);break;case"M":case"L":z=or(rn.Month,1,1);break;case"MM":case"LL":z=or(rn.Month,2,1);break;case"MMM":z=Un(Yt.Months,Ke.Abbreviated);break;case"MMMM":z=Un(Yt.Months,Ke.Wide);break;case"MMMMM":z=Un(Yt.Months,Ke.Narrow);break;case"LLL":z=Un(Yt.Months,Ke.Abbreviated,Xe.Standalone);break;case"LLLL":z=Un(Yt.Months,Ke.Wide,Xe.Standalone);break;case"LLLLL":z=Un(Yt.Months,Ke.Narrow,Xe.Standalone);break;case"w":z=Re(1);break;case"ww":z=Re(2);break;case"W":z=Re(1,!0);break;case"d":z=or(rn.Date,1);break;case"dd":z=or(rn.Date,2);break;case"c":case"cc":z=or(rn.Day,1);break;case"ccc":z=Un(Yt.Days,Ke.Abbreviated,Xe.Standalone);break;case"cccc":z=Un(Yt.Days,Ke.Wide,Xe.Standalone);break;case"ccccc":z=Un(Yt.Days,Ke.Narrow,Xe.Standalone);break;case"cccccc":z=Un(Yt.Days,Ke.Short,Xe.Standalone);break;case"E":case"EE":case"EEE":z=Un(Yt.Days,Ke.Abbreviated);break;case"EEEE":z=Un(Yt.Days,Ke.Wide);break;case"EEEEE":z=Un(Yt.Days,Ke.Narrow);break;case"EEEEEE":z=Un(Yt.Days,Ke.Short);break;case"a":case"aa":case"aaa":z=Un(Yt.DayPeriods,Ke.Abbreviated);break;case"aaaa":z=Un(Yt.DayPeriods,Ke.Wide);break;case"aaaaa":z=Un(Yt.DayPeriods,Ke.Narrow);break;case"b":case"bb":case"bbb":z=Un(Yt.DayPeriods,Ke.Abbreviated,Xe.Standalone,!0);break;case"bbbb":z=Un(Yt.DayPeriods,Ke.Wide,Xe.Standalone,!0);break;case"bbbbb":z=Un(Yt.DayPeriods,Ke.Narrow,Xe.Standalone,!0);break;case"B":case"BB":case"BBB":z=Un(Yt.DayPeriods,Ke.Abbreviated,Xe.Format,!0);break;case"BBBB":z=Un(Yt.DayPeriods,Ke.Wide,Xe.Format,!0);break;case"BBBBB":z=Un(Yt.DayPeriods,Ke.Narrow,Xe.Format,!0);break;case"h":z=or(rn.Hours,1,-12);break;case"hh":z=or(rn.Hours,2,-12);break;case"H":z=or(rn.Hours,1);break;case"HH":z=or(rn.Hours,2);break;case"m":z=or(rn.Minutes,1);break;case"mm":z=or(rn.Minutes,2);break;case"s":z=or(rn.Seconds,1);break;case"ss":z=or(rn.Seconds,2);break;case"S":z=or(rn.FractionalSeconds,1);break;case"SS":z=or(rn.FractionalSeconds,2);break;case"SSS":z=or(rn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":z=er(sr.Short);break;case"ZZZZZ":z=er(sr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":z=er(sr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":z=er(sr.Long);break;default:return null}return de[M]=z,z}(tr);Wr+=cr?cr(ye,k,Dr):"''"===tr?"'":tr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Wr}function mi(M,z,k){const ie=new Date(0);return ie.setFullYear(M,z,k),ie.setHours(0,0,0),ie}function Ur(M,z){const k=function It(M){return(0,m.cg1)(M)[m.wAp.LocaleId]}(M);if(In[k]=In[k]||{},In[k][z])return In[k][z];let ie="";switch(z){case"shortDate":ie=rr(M,ut.Short);break;case"mediumDate":ie=rr(M,ut.Medium);break;case"longDate":ie=rr(M,ut.Long);break;case"fullDate":ie=rr(M,ut.Full);break;case"shortTime":ie=zr(M,ut.Short);break;case"mediumTime":ie=zr(M,ut.Medium);break;case"longTime":ie=zr(M,ut.Long);break;case"fullTime":ie=zr(M,ut.Full);break;case"short":const ye=Ur(M,"shortTime"),it=Ur(M,"shortDate");ie=ti(bn(M,ut.Short),[ye,it]);break;case"medium":const pt=Ur(M,"mediumTime"),ln=Ur(M,"mediumDate");ie=ti(bn(M,ut.Medium),[pt,ln]);break;case"long":const Dr=Ur(M,"longTime"),Wr=Ur(M,"longDate");ie=ti(bn(M,ut.Long),[Dr,Wr]);break;case"full":const tr=Ur(M,"fullTime"),cr=Ur(M,"fullDate");ie=ti(bn(M,ut.Full),[tr,cr])}return ie&&(In[k][z]=ie),ie}function ti(M,z){return z&&(M=M.replace(/\{([^}]+)}/g,function(k,ie){return null!=z&&ie in z?z[ie]:k})),M}function vr(M,z,k="-",ie,ye){let it="";(M<0||ye&&M<=0)&&(ye?M=1-M:(M=-M,it=k));let pt=String(M);for(;pt.length<z;)pt="0"+pt;return ie&&(pt=pt.slice(pt.length-z)),it+pt}function or(M,z,k=0,ie=!1,ye=!1){return function(it,pt){let ln=function wi(M,z){switch(M){case rn.FullYear:return z.getFullYear();case rn.Month:return z.getMonth();case rn.Date:return z.getDate();case rn.Hours:return z.getHours();case rn.Minutes:return z.getMinutes();case rn.Seconds:return z.getSeconds();case rn.FractionalSeconds:return z.getMilliseconds();case rn.Day:return z.getDay();default:throw new Error(`Unknown DateType value "${M}".`)}}(M,it);if((k>0||ln>-k)&&(ln+=k),M===rn.Hours)0===ln&&-12===k&&(ln=12);else if(M===rn.FractionalSeconds)return function ni(M,z){return vr(M,3).substring(0,z)}(ln,z);const Dr=un(pt,qe.MinusSign);return vr(ln,z,Dr,ie,ye)}}function Un(M,z,k=Xe.Format,ie=!1){return function(ye,it){return function Vr(M,z,k,ie,ye,it){switch(k){case Yt.Months:return function on(M,z,k){const ie=(0,m.cg1)(M),it=ir([ie[m.wAp.MonthsFormat],ie[m.wAp.MonthsStandalone]],z);return ir(it,k)}(z,ye,ie)[M.getMonth()];case Yt.Days:return function Jn(M,z,k){const ie=(0,m.cg1)(M),it=ir([ie[m.wAp.DaysFormat],ie[m.wAp.DaysStandalone]],z);return ir(it,k)}(z,ye,ie)[M.getDay()];case Yt.DayPeriods:const pt=M.getHours(),ln=M.getMinutes();if(it){const Wr=function Kn(M){const z=(0,m.cg1)(M);return kn(z),(z[m.wAp.ExtraData][2]||[]).map(ie=>"string"==typeof ie?nn(ie):[nn(ie[0]),nn(ie[1])])}(z),tr=function Nr(M,z,k){const ie=(0,m.cg1)(M);kn(ie);const it=ir([ie[m.wAp.ExtraData][0],ie[m.wAp.ExtraData][1]],z)||[];return ir(it,k)||[]}(z,ye,ie),cr=Wr.findIndex(Zn=>{if(Array.isArray(Zn)){const[Jt,Xr]=Zn,Vs=pt>=Jt.hours&&ln>=Jt.minutes,_r=pt<Xr.hours||pt===Xr.hours&&ln<Xr.minutes;if(Jt.hours<Xr.hours){if(Vs&&_r)return!0}else if(Vs||_r)return!0}else if(Zn.hours===pt&&Zn.minutes===ln)return!0;return!1});if(-1!==cr)return tr[cr]}return function hn(M,z,k){const ie=(0,m.cg1)(M),it=ir([ie[m.wAp.DayPeriodsFormat],ie[m.wAp.DayPeriodsStandalone]],z);return ir(it,k)}(z,ye,ie)[pt<12?0:1];case Yt.Eras:return function $t(M,z){return ir((0,m.cg1)(M)[m.wAp.Eras],z)}(z,ie)[M.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${k}`)}}(ye,it,M,z,k,ie)}}function er(M){return function(z,k,ie){const ye=-1*ie,it=un(k,qe.MinusSign),pt=ye>0?Math.floor(ye/60):Math.ceil(ye/60);switch(M){case sr.Short:return(ye>=0?"+":"")+vr(pt,2,it)+vr(Math.abs(ye%60),2,it);case sr.ShortGMT:return"GMT"+(ye>=0?"+":"")+vr(pt,1,it);case sr.Long:return"GMT"+(ye>=0?"+":"")+vr(pt,2,it)+":"+vr(Math.abs(ye%60),2,it);case sr.Extended:return 0===ie?"Z":(ye>=0?"+":"")+vr(pt,2,it)+":"+vr(Math.abs(ye%60),2,it);default:throw new Error(`Unknown zone width "${M}"`)}}}const yi=0,Yr=4;function Ie(M){return mi(M.getFullYear(),M.getMonth(),M.getDate()+(Yr-M.getDay()))}function Re(M,z=!1){return function(k,ie){let ye;if(z){const it=new Date(k.getFullYear(),k.getMonth(),1).getDay()-1,pt=k.getDate();ye=1+Math.floor((pt+it)/7)}else{const it=Ie(k),pt=function Qe(M){const z=mi(M,yi,1).getDay();return mi(M,0,1+(z<=Yr?Yr:Yr+7)-z)}(it.getFullYear()),ln=it.getTime()-pt.getTime();ye=1+Math.round(ln/6048e5)}return vr(ye,M,un(ie,qe.MinusSign))}}function bt(M,z=!1){return function(k,ie){return vr(Ie(k).getFullYear(),M,un(ie,qe.MinusSign),z)}}const de={};function De(M,z){M=M.replace(/:/g,"");const k=Date.parse("Jan 01, 1970 00:00:00 "+M)/6e4;return isNaN(k)?z:k}function Oe(M){return M instanceof Date&&!isNaN(M.valueOf())}const we=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ue=22,Se=".",ze="0",Nt=";",Qt=",",$n="#",pr="\xa4";function ct(M,z,k,ie,ye,it,pt=!1){let ln="",Dr=!1;if(isFinite(M)){let Wr=function en(M){let ie,ye,it,pt,ln,z=Math.abs(M)+"",k=0;for((ye=z.indexOf(Se))>-1&&(z=z.replace(Se,"")),(it=z.search(/e/i))>0?(ye<0&&(ye=it),ye+=+z.slice(it+1),z=z.substring(0,it)):ye<0&&(ye=z.length),it=0;z.charAt(it)===ze;it++);if(it===(ln=z.length))ie=[0],ye=1;else{for(ln--;z.charAt(ln)===ze;)ln--;for(ye-=it,ie=[],pt=0;it<=ln;it++,pt++)ie[pt]=Number(z.charAt(it))}return ye>ue&&(ie=ie.splice(0,ue-1),k=ye-1,ye=1),{digits:ie,exponent:k,integerLen:ye}}(M);pt&&(Wr=function qn(M){if(0===M.digits[0])return M;const z=M.digits.length-M.integerLen;return M.exponent?M.exponent+=2:(0===z?M.digits.push(0,0):1===z&&M.digits.push(0),M.integerLen+=2),M}(Wr));let tr=z.minInt,cr=z.minFrac,Zn=z.maxFrac;if(it){const Fi=it.match(we);if(null===Fi)throw new Error(`${it} is not a valid digit info`);const Wn=Fi[1],fa=Fi[3],Rr=Fi[5];null!=Wn&&(tr=ar(Wn)),null!=fa&&(cr=ar(fa)),null!=Rr?Zn=ar(Rr):null!=fa&&cr>Zn&&(Zn=cr)}!function gr(M,z,k){if(z>k)throw new Error(`The minimum number of digits after fraction (${z}) is higher than the maximum (${k}).`);let ie=M.digits,ye=ie.length-M.integerLen;const it=Math.min(Math.max(z,ye),k);let pt=it+M.integerLen,ln=ie[pt];if(pt>0){ie.splice(Math.max(M.integerLen,pt));for(let cr=pt;cr<ie.length;cr++)ie[cr]=0}else{ye=Math.max(0,ye),M.integerLen=1,ie.length=Math.max(1,pt=it+1),ie[0]=0;for(let cr=1;cr<pt;cr++)ie[cr]=0}if(ln>=5)if(pt-1<0){for(let cr=0;cr>pt;cr--)ie.unshift(0),M.integerLen++;ie.unshift(1),M.integerLen++}else ie[pt-1]++;for(;ye<Math.max(0,it);ye++)ie.push(0);let Dr=0!==it;const Wr=z+M.integerLen,tr=ie.reduceRight(function(cr,Zn,Jt,Xr){return Xr[Jt]=(Zn+=cr)<10?Zn:Zn-10,Dr&&(0===Xr[Jt]&&Jt>=Wr?Xr.pop():Dr=!1),Zn>=10?1:0},0);tr&&(ie.unshift(tr),M.integerLen++)}(Wr,cr,Zn);let Jt=Wr.digits,Xr=Wr.integerLen;const Vs=Wr.exponent;let _r=[];for(Dr=Jt.every(Fi=>!Fi);Xr<tr;Xr++)Jt.unshift(0);for(;Xr<0;Xr++)Jt.unshift(0);Xr>0?_r=Jt.splice(Xr,Jt.length):(_r=Jt,Jt=[0]);const mn=[];for(Jt.length>=z.lgSize&&mn.unshift(Jt.splice(-z.lgSize,Jt.length).join(""));Jt.length>z.gSize;)mn.unshift(Jt.splice(-z.gSize,Jt.length).join(""));Jt.length&&mn.unshift(Jt.join("")),ln=mn.join(un(k,ie)),_r.length&&(ln+=un(k,ye)+_r.join("")),Vs&&(ln+=un(k,qe.Exponential)+"+"+Vs)}else ln=un(k,qe.Infinity);return ln=M<0&&!Dr?z.negPre+ln+z.negSuf:z.posPre+ln+z.posSuf,ln}function Tn(M,z="-"){const k={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},ie=M.split(Nt),ye=ie[0],it=ie[1],pt=-1!==ye.indexOf(Se)?ye.split(Se):[ye.substring(0,ye.lastIndexOf(ze)+1),ye.substring(ye.lastIndexOf(ze)+1)],ln=pt[0],Dr=pt[1]||"";k.posPre=ln.substring(0,ln.indexOf($n));for(let tr=0;tr<Dr.length;tr++){const cr=Dr.charAt(tr);cr===ze?k.minFrac=k.maxFrac=tr+1:cr===$n?k.maxFrac=tr+1:k.posSuf+=cr}const Wr=ln.split(Qt);if(k.gSize=Wr[1]?Wr[1].length:0,k.lgSize=Wr[2]||Wr[1]?(Wr[2]||Wr[1]).length:0,it){const tr=ye.length-k.posPre.length-k.posSuf.length,cr=it.indexOf($n);k.negPre=it.substring(0,cr).replace(/'/g,""),k.negSuf=it.slice(cr+tr).replace(/'/g,"")}else k.negPre=z+k.posPre,k.negSuf=k.posSuf;return k}function ar(M){const z=parseInt(M);if(isNaN(z))throw new Error("Invalid integer literal when parsing "+M);return z}let oi=(()=>{class M{}return M.\u0275fac=function(k){return new(k||M)},M.\u0275prov=m.Yz7({token:M,factory:function(k){let ie=null;return k?ie=new k:(ye=m.LFG(m.soG),ie=new Ns(ye)),ie;var ye},providedIn:"root"}),M})();let Ns=(()=>{class M extends oi{constructor(k){super(),this.locale=k}getPluralCategory(k,ie){switch(Pt(ie||this.locale)(k)){case At.Zero:return"zero";case At.One:return"one";case At.Two:return"two";case At.Few:return"few";case At.Many:return"many";default:return"other"}}}return M.\u0275fac=function(k){return new(k||M)(m.LFG(m.soG))},M.\u0275prov=m.Yz7({token:M,factory:M.\u0275fac}),M})();function pi(M,z){z=encodeURIComponent(z);for(const k of M.split(";")){const ie=k.indexOf("="),[ye,it]=-1==ie?[k,""]:[k.slice(0,ie),k.slice(ie+1)];if(ye.trim()===z)return decodeURIComponent(it)}return null}const Mr=/\s+/,Rt=[];let Mn=(()=>{class M{constructor(k,ie,ye,it){this._iterableDiffers=k,this._keyValueDiffers=ie,this._ngEl=ye,this._renderer=it,this.initialClasses=Rt,this.stateMap=new Map}set klass(k){this.initialClasses=null!=k?k.trim().split(Mr):Rt}set ngClass(k){this.rawClass="string"==typeof k?k.trim().split(Mr):k}ngDoCheck(){for(const ie of this.initialClasses)this._updateState(ie,!0);const k=this.rawClass;if(Array.isArray(k)||k instanceof Set)for(const ie of k)this._updateState(ie,!0);else if(null!=k)for(const ie of Object.keys(k))this._updateState(ie,Boolean(k[ie]));this._applyStateDiff()}_updateState(k,ie){const ye=this.stateMap.get(k);void 0!==ye?(ye.enabled!==ie&&(ye.changed=!0,ye.enabled=ie),ye.touched=!0):this.stateMap.set(k,{enabled:ie,changed:!0,touched:!0})}_applyStateDiff(){for(const k of this.stateMap){const ie=k[0],ye=k[1];ye.changed?(this._toggleClass(ie,ye.enabled),ye.changed=!1):ye.touched||(ye.enabled&&this._toggleClass(ie,!1),this.stateMap.delete(ie)),ye.touched=!1}}_toggleClass(k,ie){(k=k.trim()).length>0&&k.split(Mr).forEach(ye=>{ie?this._renderer.addClass(this._ngEl.nativeElement,ye):this._renderer.removeClass(this._ngEl.nativeElement,ye)})}}return M.\u0275fac=function(k){return new(k||M)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},M.\u0275dir=m.lG2({type:M,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),M})();class lr{constructor(z,k,ie,ye){this.$implicit=z,this.ngForOf=k,this.index=ie,this.count=ye}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let mr=(()=>{class M{set ngForOf(k){this._ngForOf=k,this._ngForOfDirty=!0}set ngForTrackBy(k){this._trackByFn=k}get ngForTrackBy(){return this._trackByFn}constructor(k,ie,ye){this._viewContainer=k,this._template=ie,this._differs=ye,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(k){k&&(this._template=k)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const k=this._ngForOf;!this._differ&&k&&(this._differ=this._differs.find(k).create(this.ngForTrackBy))}if(this._differ){const k=this._differ.diff(this._ngForOf);k&&this._applyChanges(k)}}_applyChanges(k){const ie=this._viewContainer;k.forEachOperation((ye,it,pt)=>{if(null==ye.previousIndex)ie.createEmbeddedView(this._template,new lr(ye.item,this._ngForOf,-1,-1),null===pt?void 0:pt);else if(null==pt)ie.remove(null===it?void 0:it);else if(null!==it){const ln=ie.get(it);ie.move(ln,pt),wr(ln,ye)}});for(let ye=0,it=ie.length;ye<it;ye++){const ln=ie.get(ye).context;ln.index=ye,ln.count=it,ln.ngForOf=this._ngForOf}k.forEachIdentityChange(ye=>{wr(ie.get(ye.currentIndex),ye)})}static ngTemplateContextGuard(k,ie){return!0}}return M.\u0275fac=function(k){return new(k||M)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},M.\u0275dir=m.lG2({type:M,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),M})();function wr(M,z){M.context.$implicit=z.item}let Yi=(()=>{class M{constructor(k,ie){this._viewContainer=k,this._context=new Vn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ie}set ngIf(k){this._context.$implicit=this._context.ngIf=k,this._updateView()}set ngIfThen(k){Bn("ngIfThen",k),this._thenTemplateRef=k,this._thenViewRef=null,this._updateView()}set ngIfElse(k){Bn("ngIfElse",k),this._elseTemplateRef=k,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(k,ie){return!0}}return M.\u0275fac=function(k){return new(k||M)(m.Y36(m.s_b),m.Y36(m.Rgc))},M.\u0275dir=m.lG2({type:M,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),M})();class Vn{constructor(){this.$implicit=null,this.ngIf=null}}function Bn(M,z){if(z&&!z.createEmbeddedView)throw new Error(`${M} must be a TemplateRef, but received '${(0,m.AaK)(z)}'.`)}class Rn{constructor(z,k){this._viewContainerRef=z,this._templateRef=k,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(z){z&&!this._created?this.create():!z&&this._created&&this.destroy()}}let Lr=(()=>{class M{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(k){this._ngSwitch=k,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(k){this._defaultViews.push(k)}_matchCase(k){const ie=k==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ie,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ie}_updateDefaultCases(k){if(this._defaultViews.length>0&&k!==this._defaultUsed){this._defaultUsed=k;for(const ie of this._defaultViews)ie.enforceState(k)}}}return M.\u0275fac=function(k){return new(k||M)},M.\u0275dir=m.lG2({type:M,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),M})(),Ds=(()=>{class M{constructor(k,ie,ye){this.ngSwitch=ye,ye._addCase(),this._view=new Rn(k,ie)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return M.\u0275fac=function(k){return new(k||M)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(Lr,9))},M.\u0275dir=m.lG2({type:M,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),M})(),_e=(()=>{class M{constructor(k,ie,ye){ye._addDefault(new Rn(k,ie))}}return M.\u0275fac=function(k){return new(k||M)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(Lr,9))},M.\u0275dir=m.lG2({type:M,selectors:[["","ngSwitchDefault",""]],standalone:!0}),M})(),Vt=(()=>{class M{constructor(k,ie,ye){this._ngEl=k,this._differs=ie,this._renderer=ye,this._ngStyle=null,this._differ=null}set ngStyle(k){this._ngStyle=k,!this._differ&&k&&(this._differ=this._differs.find(k).create())}ngDoCheck(){if(this._differ){const k=this._differ.diff(this._ngStyle);k&&this._applyChanges(k)}}_setStyle(k,ie){const[ye,it]=k.split("."),pt=-1===ye.indexOf("-")?void 0:m.JOm.DashCase;null!=ie?this._renderer.setStyle(this._ngEl.nativeElement,ye,it?`${ie}${it}`:ie,pt):this._renderer.removeStyle(this._ngEl.nativeElement,ye,pt)}_applyChanges(k){k.forEachRemovedItem(ie=>this._setStyle(ie.key,null)),k.forEachAddedItem(ie=>this._setStyle(ie.key,ie.currentValue)),k.forEachChangedItem(ie=>this._setStyle(ie.key,ie.currentValue))}}return M.\u0275fac=function(k){return new(k||M)(m.Y36(m.SBq),m.Y36(m.aQg),m.Y36(m.Qsj))},M.\u0275dir=m.lG2({type:M,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),M})(),jt=(()=>{class M{constructor(k){this._viewContainerRef=k,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(k){if(k.ngTemplateOutlet||k.ngTemplateOutletInjector){const ie=this._viewContainerRef;if(this._viewRef&&ie.remove(ie.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ye,ngTemplateOutletContext:it,ngTemplateOutletInjector:pt}=this;this._viewRef=ie.createEmbeddedView(ye,it,pt?{injector:pt}:void 0)}else this._viewRef=null}else this._viewRef&&k.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return M.\u0275fac=function(k){return new(k||M)(m.Y36(m.s_b))},M.\u0275dir=m.lG2({type:M,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[m.TTD]}),M})();function dr(M,z){return new m.vHH(2100,!1)}class yr{createSubscription(z,k){return z.subscribe({next:k,error:ie=>{throw ie}})}dispose(z){z.unsubscribe()}}class ai{createSubscription(z,k){return z.then(k,ie=>{throw ie})}dispose(z){}}const ur=new ai,Tr=new yr;let _i=(()=>{class M{constructor(k){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=k}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(k){return this._obj?k!==this._obj?(this._dispose(),this.transform(k)):this._latestValue:(k&&this._subscribe(k),this._latestValue)}_subscribe(k){this._obj=k,this._strategy=this._selectStrategy(k),this._subscription=this._strategy.createSubscription(k,ie=>this._updateLatestValue(k,ie))}_selectStrategy(k){if((0,m.QGY)(k))return ur;if((0,m.F4k)(k))return Tr;throw dr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(k,ie){k===this._obj&&(this._latestValue=ie,this._ref.markForCheck())}}return M.\u0275fac=function(k){return new(k||M)(m.Y36(m.sBO,16))},M.\u0275pipe=m.Yjl({name:"async",type:M,pure:!1,standalone:!0}),M})(),Qr=(()=>{class M{transform(k){if(null==k)return null;if("string"!=typeof k)throw dr();return k.toLowerCase()}}return M.\u0275fac=function(k){return new(k||M)},M.\u0275pipe=m.Yjl({name:"lowercase",type:M,pure:!0,standalone:!0}),M})();const So=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let li=(()=>{class M{transform(k){if(null==k)return null;if("string"!=typeof k)throw dr();return k.replace(So,ie=>ie[0].toUpperCase()+ie.slice(1).toLowerCase())}}return M.\u0275fac=function(k){return new(k||M)},M.\u0275pipe=m.Yjl({name:"titlecase",type:M,pure:!0,standalone:!0}),M})(),En=(()=>{class M{transform(k){if(null==k)return null;if("string"!=typeof k)throw dr();return k.toUpperCase()}}return M.\u0275fac=function(k){return new(k||M)},M.\u0275pipe=m.Yjl({name:"uppercase",type:M,pure:!0,standalone:!0}),M})();const Gs=new m.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),ss=new m.OlP("DATE_PIPE_DEFAULT_OPTIONS");let hr=(()=>{class M{constructor(k,ie,ye){this.locale=k,this.defaultTimezone=ie,this.defaultOptions=ye}transform(k,ie,ye,it){if(null==k||""===k||k!=k)return null;try{return Qn(k,ie??this.defaultOptions?.dateFormat??"mediumDate",it||this.locale,ye??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(pt){throw dr()}}}return M.\u0275fac=function(k){return new(k||M)(m.Y36(m.soG,16),m.Y36(Gs,24),m.Y36(ss,24))},M.\u0275pipe=m.Yjl({name:"date",type:M,pure:!0,standalone:!0}),M})();const yo=/#/g;let qr=(()=>{class M{constructor(k){this._localization=k}transform(k,ie,ye){if(null==k)return"";if("object"!=typeof ie||null===ie)throw dr();return ie[function Ar(M,z,k,ie){let ye=`=${M}`;if(z.indexOf(ye)>-1||(ye=k.getPluralCategory(M,ie),z.indexOf(ye)>-1))return ye;if(z.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${M}"`)}(k,Object.keys(ie),this._localization,ye)].replace(yo,k.toString())}}return M.\u0275fac=function(k){return new(k||M)(m.Y36(oi,16))},M.\u0275pipe=m.Yjl({name:"i18nPlural",type:M,pure:!0,standalone:!0}),M})(),os=(()=>{class M{transform(k,ie){if(null==k)return"";if("object"!=typeof ie||"string"!=typeof k)throw dr();return ie.hasOwnProperty(k)?ie[k]:ie.hasOwnProperty("other")?ie.other:""}}return M.\u0275fac=function(k){return new(k||M)},M.\u0275pipe=m.Yjl({name:"i18nSelect",type:M,pure:!0,standalone:!0}),M})(),Gn=(()=>{class M{transform(k){return JSON.stringify(k,null,2)}}return M.\u0275fac=function(k){return new(k||M)},M.\u0275pipe=m.Yjl({name:"json",type:M,pure:!1,standalone:!0}),M})(),zs=(()=>{class M{constructor(k){this.differs=k,this.keyValues=[],this.compareFn=so}transform(k,ie=so){if(!k||!(k instanceof Map)&&"object"!=typeof k)return null;this.differ||(this.differ=this.differs.find(k).create());const ye=this.differ.diff(k),it=ie!==this.compareFn;return ye&&(this.keyValues=[],ye.forEachItem(pt=>{this.keyValues.push(function Ws(M,z){return{key:M,value:z}}(pt.key,pt.currentValue))})),(ye||it)&&(this.keyValues.sort(ie),this.compareFn=ie),this.keyValues}}return M.\u0275fac=function(k){return new(k||M)(m.Y36(m.aQg,16))},M.\u0275pipe=m.Yjl({name:"keyvalue",type:M,pure:!1,standalone:!0}),M})();function so(M,z){const k=M.key,ie=z.key;if(k===ie)return 0;if(void 0===k)return 1;if(void 0===ie)return-1;if(null===k)return 1;if(null===ie)return-1;if("string"==typeof k&&"string"==typeof ie)return k<ie?-1:1;if("number"==typeof k&&"number"==typeof ie)return k-ie;if("boolean"==typeof k&&"boolean"==typeof ie)return k<ie?-1:1;const ye=String(k),it=String(ie);return ye==it?0:ye<it?-1:1}let Cl=(()=>{class M{constructor(k){this._locale=k}transform(k,ie,ye){if(!oo(k))return null;ye=ye||this._locale;try{return function Wt(M,z,k){return ct(M,Tn(ei(z,Ot.Decimal),un(z,qe.MinusSign)),z,qe.Group,qe.Decimal,k)}(Fs(k),ye,ie)}catch(it){throw dr()}}}return M.\u0275fac=function(k){return new(k||M)(m.Y36(m.soG,16))},M.\u0275pipe=m.Yjl({name:"number",type:M,pure:!0,standalone:!0}),M})(),Bo=(()=>{class M{constructor(k){this._locale=k}transform(k,ie,ye){if(!oo(k))return null;ye=ye||this._locale;try{return function Ct(M,z,k){return ct(M,Tn(ei(z,Ot.Percent),un(z,qe.MinusSign)),z,qe.Group,qe.Decimal,k,!0).replace(new RegExp("%","g"),un(z,qe.PercentSign))}(Fs(k),ye,ie)}catch(it){throw dr()}}}return M.\u0275fac=function(k){return new(k||M)(m.Y36(m.soG,16))},M.\u0275pipe=m.Yjl({name:"percent",type:M,pure:!0,standalone:!0}),M})(),bo=(()=>{class M{constructor(k,ie="USD"){this._locale=k,this._defaultCurrencyCode=ie}transform(k,ie=this._defaultCurrencyCode,ye="symbol",it,pt){if(!oo(k))return null;pt=pt||this._locale,"boolean"==typeof ye&&(ye=ye?"symbol":"code");let ln=ie||this._defaultCurrencyCode;"code"!==ye&&(ln="symbol"===ye||"symbol-narrow"===ye?function Ri(M,z,k="en"){const ie=function ft(M){return(0,m.cg1)(M)[m.wAp.Currencies]}(k)[M]||Ye[M]||[],ye=ie[1];return"narrow"===z&&"string"==typeof ye?ye:ie[0]||M}(ln,"symbol"===ye?"wide":"narrow",pt):ye);try{return function Ze(M,z,k,ie,ye){const pt=Tn(ei(z,Ot.Currency),un(z,qe.MinusSign));return pt.minFrac=function Cr(M){let z;const k=Ye[M];return k&&(z=k[2]),"number"==typeof z?z:Kr}(ie),pt.maxFrac=pt.minFrac,ct(M,pt,z,qe.CurrencyGroup,qe.CurrencyDecimal,ye).replace(pr,k).replace(pr,"").trim()}(Fs(k),pt,ln,ie,it)}catch(Dr){throw dr()}}}return M.\u0275fac=function(k){return new(k||M)(m.Y36(m.soG,16),m.Y36(m.EJc,16))},M.\u0275pipe=m.Yjl({name:"currency",type:M,pure:!0,standalone:!0}),M})();function oo(M){return!(null==M||""===M||M!=M)}function Fs(M){if("string"==typeof M&&!isNaN(Number(M)-parseFloat(M)))return Number(M);if("number"!=typeof M)throw new Error(`${M} is not a number`);return M}let la=(()=>{class M{transform(k,ie,ye){if(null==k)return null;if(!this.supports(k))throw dr();return k.slice(ie,ye)}supports(k){return"string"==typeof k||Array.isArray(k)}}return M.\u0275fac=function(k){return new(k||M)},M.\u0275pipe=m.Yjl({name:"slice",type:M,pure:!1,standalone:!0}),M})(),Bi=(()=>{class M{}return M.\u0275fac=function(k){return new(k||M)},M.\u0275mod=m.oAB({type:M}),M.\u0275inj=m.cJS({}),M})();const Qi="browser";function vo(M){return M===Qi}let Cs=(()=>{class M{}return M.\u0275prov=(0,m.Yz7)({token:M,providedIn:"root",factory:()=>new xn((0,m.LFG)(te),window)}),M})();class xn{constructor(z,k){this.document=z,this.window=k,this.offset=()=>[0,0]}setOffset(z){this.offset=Array.isArray(z)?()=>z:z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(z){this.supportsScrolling()&&this.window.scrollTo(z[0],z[1])}scrollToAnchor(z){if(!this.supportsScrolling())return;const k=function ws(M,z){const k=M.getElementById(z)||M.getElementsByName(z)[0];if(k)return k;if("function"==typeof M.createTreeWalker&&M.body&&(M.body.createShadowRoot||M.body.attachShadow)){const ie=M.createTreeWalker(M.body,NodeFilter.SHOW_ELEMENT);let ye=ie.currentNode;for(;ye;){const it=ye.shadowRoot;if(it){const pt=it.getElementById(z)||it.querySelector(`[name="${z}"]`);if(pt)return pt}ye=ie.nextNode()}}return null}(this.document,z);k&&(this.scrollToElement(k),k.focus())}setHistoryScrollRestoration(z){if(this.supportScrollRestoration()){const k=this.window.history;k&&k.scrollRestoration&&(k.scrollRestoration=z)}}scrollToElement(z){const k=z.getBoundingClientRect(),ie=k.left+this.window.pageXOffset,ye=k.top+this.window.pageYOffset,it=this.offset();this.window.scrollTo(ie-it[0],ye-it[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const z=jo(this.window.history)||jo(Object.getPrototypeOf(this.window.history));return!(!z||!z.writable&&!z.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function jo(M){return Object.getOwnPropertyDescriptor(M,"scrollRestoration")}class Fr{}},529:(Ee,se,D)=>{D.d(se,{Ed:()=>yi,JF:()=>er,LE:()=>je,TP:()=>$t,UA:()=>qe,WM:()=>Y,Zn:()=>ut,eN:()=>It});var m=D(6895),C=D(4650),J=D(9646),V=D(9751),q=D(4351),te=D(9300),X=D(4004);class W{}class ee{}class Y{constructor(Ie){this.normalizedNames=new Map,this.lazyUpdate=null,Ie?this.lazyInit="string"==typeof Ie?()=>{this.headers=new Map,Ie.split("\n").forEach(Re=>{const bt=Re.indexOf(":");if(bt>0){const de=Re.slice(0,bt),me=de.toLowerCase(),De=Re.slice(bt+1).trim();this.maybeSetNormalizedName(de,me),this.headers.has(me)?this.headers.get(me).push(De):this.headers.set(me,[De])}})}:()=>{this.headers=new Map,Object.entries(Ie).forEach(([Re,bt])=>{let de;if(de="string"==typeof bt?[bt]:"number"==typeof bt?[bt.toString()]:bt.map(me=>me.toString()),de.length>0){const me=Re.toLowerCase();this.headers.set(me,de),this.maybeSetNormalizedName(Re,me)}})}:this.headers=new Map}has(Ie){return this.init(),this.headers.has(Ie.toLowerCase())}get(Ie){this.init();const Re=this.headers.get(Ie.toLowerCase());return Re&&Re.length>0?Re[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ie){return this.init(),this.headers.get(Ie.toLowerCase())||null}append(Ie,Re){return this.clone({name:Ie,value:Re,op:"a"})}set(Ie,Re){return this.clone({name:Ie,value:Re,op:"s"})}delete(Ie,Re){return this.clone({name:Ie,value:Re,op:"d"})}maybeSetNormalizedName(Ie,Re){this.normalizedNames.has(Re)||this.normalizedNames.set(Re,Ie)}init(){this.lazyInit&&(this.lazyInit instanceof Y?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ie=>this.applyUpdate(Ie)),this.lazyUpdate=null))}copyFrom(Ie){Ie.init(),Array.from(Ie.headers.keys()).forEach(Re=>{this.headers.set(Re,Ie.headers.get(Re)),this.normalizedNames.set(Re,Ie.normalizedNames.get(Re))})}clone(Ie){const Re=new Y;return Re.lazyInit=this.lazyInit&&this.lazyInit instanceof Y?this.lazyInit:this,Re.lazyUpdate=(this.lazyUpdate||[]).concat([Ie]),Re}applyUpdate(Ie){const Re=Ie.name.toLowerCase();switch(Ie.op){case"a":case"s":let bt=Ie.value;if("string"==typeof bt&&(bt=[bt]),0===bt.length)return;this.maybeSetNormalizedName(Ie.name,Re);const de=("a"===Ie.op?this.headers.get(Re):void 0)||[];de.push(...bt),this.headers.set(Re,de);break;case"d":const me=Ie.value;if(me){let De=this.headers.get(Re);if(!De)return;De=De.filter(rt=>-1===me.indexOf(rt)),0===De.length?(this.headers.delete(Re),this.normalizedNames.delete(Re)):this.headers.set(Re,De)}else this.headers.delete(Re),this.normalizedNames.delete(Re)}}forEach(Ie){this.init(),Array.from(this.normalizedNames.keys()).forEach(Re=>Ie(this.normalizedNames.get(Re),this.headers.get(Re)))}}class he{encodeKey(Ie){return Ue(Ie)}encodeValue(Ie){return Ue(Ie)}decodeKey(Ie){return decodeURIComponent(Ie)}decodeValue(Ie){return decodeURIComponent(Ie)}}const He=/%(\d[a-f0-9])/gi,Ae={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ue(Qe){return encodeURIComponent(Qe).replace(He,(Ie,Re)=>Ae[Re]??Ie)}function ke(Qe){return`${Qe}`}class je{constructor(Ie={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ie.encoder||new he,Ie.fromString){if(Ie.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Pe(Qe,Ie){const Re=new Map;return Qe.length>0&&Qe.replace(/^\?/,"").split("&").forEach(de=>{const me=de.indexOf("="),[De,rt]=-1==me?[Ie.decodeKey(de),""]:[Ie.decodeKey(de.slice(0,me)),Ie.decodeValue(de.slice(me+1))],Ne=Re.get(De)||[];Ne.push(rt),Re.set(De,Ne)}),Re}(Ie.fromString,this.encoder)}else Ie.fromObject?(this.map=new Map,Object.keys(Ie.fromObject).forEach(Re=>{const bt=Ie.fromObject[Re],de=Array.isArray(bt)?bt.map(ke):[ke(bt)];this.map.set(Re,de)})):this.map=null}has(Ie){return this.init(),this.map.has(Ie)}get(Ie){this.init();const Re=this.map.get(Ie);return Re?Re[0]:null}getAll(Ie){return this.init(),this.map.get(Ie)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ie,Re){return this.clone({param:Ie,value:Re,op:"a"})}appendAll(Ie){const Re=[];return Object.keys(Ie).forEach(bt=>{const de=Ie[bt];Array.isArray(de)?de.forEach(me=>{Re.push({param:bt,value:me,op:"a"})}):Re.push({param:bt,value:de,op:"a"})}),this.clone(Re)}set(Ie,Re){return this.clone({param:Ie,value:Re,op:"s"})}delete(Ie,Re){return this.clone({param:Ie,value:Re,op:"d"})}toString(){return this.init(),this.keys().map(Ie=>{const Re=this.encoder.encodeKey(Ie);return this.map.get(Ie).map(bt=>Re+"="+this.encoder.encodeValue(bt)).join("&")}).filter(Ie=>""!==Ie).join("&")}clone(Ie){const Re=new je({encoder:this.encoder});return Re.cloneFrom=this.cloneFrom||this,Re.updates=(this.updates||[]).concat(Ie),Re}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ie=>this.map.set(Ie,this.cloneFrom.map.get(Ie))),this.updates.forEach(Ie=>{switch(Ie.op){case"a":case"s":const Re=("a"===Ie.op?this.map.get(Ie.param):void 0)||[];Re.push(ke(Ie.value)),this.map.set(Ie.param,Re);break;case"d":if(void 0===Ie.value){this.map.delete(Ie.param);break}{let bt=this.map.get(Ie.param)||[];const de=bt.indexOf(ke(Ie.value));-1!==de&&bt.splice(de,1),bt.length>0?this.map.set(Ie.param,bt):this.map.delete(Ie.param)}}}),this.cloneFrom=this.updates=null)}}class Je{constructor(){this.map=new Map}set(Ie,Re){return this.map.set(Ie,Re),this}get(Ie){return this.map.has(Ie)||this.map.set(Ie,Ie.defaultValue()),this.map.get(Ie)}delete(Ie){return this.map.delete(Ie),this}has(Ie){return this.map.has(Ie)}keys(){return this.map.keys()}}function Me(Qe){return typeof ArrayBuffer<"u"&&Qe instanceof ArrayBuffer}function yt(Qe){return typeof Blob<"u"&&Qe instanceof Blob}function Et(Qe){return typeof FormData<"u"&&Qe instanceof FormData}class Ot{constructor(Ie,Re,bt,de){let me;if(this.url=Re,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ie.toUpperCase(),function Le(Qe){switch(Qe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||de?(this.body=void 0!==bt?bt:null,me=de):me=bt,me&&(this.reportProgress=!!me.reportProgress,this.withCredentials=!!me.withCredentials,me.responseType&&(this.responseType=me.responseType),me.headers&&(this.headers=me.headers),me.context&&(this.context=me.context),me.params&&(this.params=me.params)),this.headers||(this.headers=new Y),this.context||(this.context=new Je),this.params){const De=this.params.toString();if(0===De.length)this.urlWithParams=Re;else{const rt=Re.indexOf("?");this.urlWithParams=Re+(-1===rt?"?":rt<Re.length-1?"&":"")+De}}else this.params=new je,this.urlWithParams=Re}serializeBody(){return null===this.body?null:Me(this.body)||yt(this.body)||Et(this.body)||function Ye(Qe){return typeof URLSearchParams<"u"&&Qe instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof je?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Et(this.body)?null:yt(this.body)?this.body.type||null:Me(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof je?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ie={}){const Re=Ie.method||this.method,bt=Ie.url||this.url,de=Ie.responseType||this.responseType,me=void 0!==Ie.body?Ie.body:this.body,De=void 0!==Ie.withCredentials?Ie.withCredentials:this.withCredentials,rt=void 0!==Ie.reportProgress?Ie.reportProgress:this.reportProgress;let Ne=Ie.headers||this.headers,Mt=Ie.params||this.params;const Bt=Ie.context??this.context;return void 0!==Ie.setHeaders&&(Ne=Object.keys(Ie.setHeaders).reduce((Oe,we)=>Oe.set(we,Ie.setHeaders[we]),Ne)),Ie.setParams&&(Mt=Object.keys(Ie.setParams).reduce((Oe,we)=>Oe.set(we,Ie.setParams[we]),Mt)),new Ot(Re,bt,me,{params:Mt,headers:Ne,context:Bt,reportProgress:rt,responseType:de,withCredentials:De})}}var At=(()=>((At=At||{})[At.Sent=0]="Sent",At[At.UploadProgress=1]="UploadProgress",At[At.ResponseHeader=2]="ResponseHeader",At[At.DownloadProgress=3]="DownloadProgress",At[At.Response=4]="Response",At[At.User=5]="User",At))();class Xe{constructor(Ie,Re=200,bt="OK"){this.headers=Ie.headers||new Y,this.status=void 0!==Ie.status?Ie.status:Re,this.statusText=Ie.statusText||bt,this.url=Ie.url||null,this.ok=this.status>=200&&this.status<300}}class Ke extends Xe{constructor(Ie={}){super(Ie),this.type=At.ResponseHeader}clone(Ie={}){return new Ke({headers:Ie.headers||this.headers,status:void 0!==Ie.status?Ie.status:this.status,statusText:Ie.statusText||this.statusText,url:Ie.url||this.url||void 0})}}class ut extends Xe{constructor(Ie={}){super(Ie),this.type=At.Response,this.body=void 0!==Ie.body?Ie.body:null}clone(Ie={}){return new ut({body:void 0!==Ie.body?Ie.body:this.body,headers:Ie.headers||this.headers,status:void 0!==Ie.status?Ie.status:this.status,statusText:Ie.statusText||this.statusText,url:Ie.url||this.url||void 0})}}class qe extends Xe{constructor(Ie){super(Ie,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ie.url||"(unknown url)"}`:`Http failure response for ${Ie.url||"(unknown url)"}: ${Ie.status} ${Ie.statusText}`,this.error=Ie.error||null}}function xt(Qe,Ie){return{body:Ie,headers:Qe.headers,context:Qe.context,observe:Qe.observe,params:Qe.params,reportProgress:Qe.reportProgress,responseType:Qe.responseType,withCredentials:Qe.withCredentials}}let It=(()=>{class Qe{constructor(Re){this.handler=Re}request(Re,bt,de={}){let me;if(Re instanceof Ot)me=Re;else{let Ne,Mt;Ne=de.headers instanceof Y?de.headers:new Y(de.headers),de.params&&(Mt=de.params instanceof je?de.params:new je({fromObject:de.params})),me=new Ot(Re,bt,void 0!==de.body?de.body:null,{headers:Ne,context:de.context,params:Mt,reportProgress:de.reportProgress,responseType:de.responseType||"json",withCredentials:de.withCredentials})}const De=(0,J.of)(me).pipe((0,q.b)(Ne=>this.handler.handle(Ne)));if(Re instanceof Ot||"events"===de.observe)return De;const rt=De.pipe((0,te.h)(Ne=>Ne instanceof ut));switch(de.observe||"body"){case"body":switch(me.responseType){case"arraybuffer":return rt.pipe((0,X.U)(Ne=>{if(null!==Ne.body&&!(Ne.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Ne.body}));case"blob":return rt.pipe((0,X.U)(Ne=>{if(null!==Ne.body&&!(Ne.body instanceof Blob))throw new Error("Response is not a Blob.");return Ne.body}));case"text":return rt.pipe((0,X.U)(Ne=>{if(null!==Ne.body&&"string"!=typeof Ne.body)throw new Error("Response is not a string.");return Ne.body}));default:return rt.pipe((0,X.U)(Ne=>Ne.body))}case"response":return rt;default:throw new Error(`Unreachable: unhandled observe type ${de.observe}}`)}}delete(Re,bt={}){return this.request("DELETE",Re,bt)}get(Re,bt={}){return this.request("GET",Re,bt)}head(Re,bt={}){return this.request("HEAD",Re,bt)}jsonp(Re,bt){return this.request("JSONP",Re,{params:(new je).append(bt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Re,bt={}){return this.request("OPTIONS",Re,bt)}patch(Re,bt,de={}){return this.request("PATCH",Re,xt(de,bt))}post(Re,bt,de={}){return this.request("POST",Re,xt(de,bt))}put(Re,bt,de={}){return this.request("PUT",Re,xt(de,bt))}}return Qe.\u0275fac=function(Re){return new(Re||Qe)(C.LFG(W))},Qe.\u0275prov=C.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();function hn(Qe,Ie){return Ie(Qe)}function Jn(Qe,Ie){return(Re,bt)=>Ie.intercept(Re,{handle:de=>Qe(de,bt)})}const $t=new C.OlP("HTTP_INTERCEPTORS"),On=new C.OlP("HTTP_INTERCEPTOR_FNS");function gn(){let Qe=null;return(Ie,Re)=>(null===Qe&&(Qe=((0,C.f3M)($t,{optional:!0})??[]).reduceRight(Jn,hn)),Qe(Ie,Re))}let bn,rr=(()=>{class Qe extends W{constructor(Re,bt){super(),this.backend=Re,this.injector=bt,this.chain=null}handle(Re){if(null===this.chain){const bt=Array.from(new Set(this.injector.get(On)));this.chain=bt.reduceRight((de,me)=>function on(Qe,Ie,Re){return(bt,de)=>Re.runInContext(()=>Ie(bt,me=>Qe(me,de)))}(de,me,this.injector),hn)}return this.chain(Re,bt=>this.backend.handle(bt))}}return Qe.\u0275fac=function(Re){return new(Re||Qe)(C.LFG(ee),C.LFG(C.lqb))},Qe.\u0275prov=C.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})(),zr=0;class Fe{}function ft(){return"object"==typeof window?window:{}}let Pt=(()=>{class Qe{constructor(Re,bt){this.callbackMap=Re,this.document=bt,this.resolvedPromise=Promise.resolve()}nextCallback(){return"ng_jsonp_callback_"+zr++}handle(Re){if("JSONP"!==Re.method)throw new Error("JSONP requests must use JSONP request method.");if("json"!==Re.responseType)throw new Error("JSONP requests must use Json response type.");if(Re.headers.keys().length>0)throw new Error("JSONP requests do not support headers.");return new V.y(bt=>{const de=this.nextCallback(),me=Re.urlWithParams.replace(/=JSONP_CALLBACK(&|$)/,`=${de}$1`),De=this.document.createElement("script");De.src=me;let rt=null,Ne=!1;this.callbackMap[de]=we=>{delete this.callbackMap[de],rt=we,Ne=!0};const Mt=()=>{De.parentNode&&De.parentNode.removeChild(De),delete this.callbackMap[de]};return De.addEventListener("load",we=>{this.resolvedPromise.then(()=>{Mt(),Ne?(bt.next(new ut({body:rt,status:200,statusText:"OK",url:me})),bt.complete()):bt.error(new qe({url:me,status:0,statusText:"JSONP Error",error:new Error("JSONP injected script did not invoke callback.")}))})}),De.addEventListener("error",we=>{Mt(),bt.error(new qe({error:we,status:0,statusText:"JSONP Error",url:me}))}),this.document.body.appendChild(De),bt.next({type:At.Sent}),()=>{Ne||this.removeListeners(De),Mt()}})}removeListeners(Re){bn||(bn=this.document.implementation.createHTMLDocument()),bn.adoptNode(Re)}}return Qe.\u0275fac=function(Re){return new(Re||Qe)(C.LFG(Fe),C.LFG(m.K0))},Qe.\u0275prov=C.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();function kn(Qe,Ie){return"JSONP"===Qe.method?(0,C.f3M)(Pt).handle(Qe):Ie(Qe)}const Nr=/^\)\]\}',?\n/;let ir=(()=>{class Qe{constructor(Re){this.xhrFactory=Re}handle(Re){if("JSONP"===Re.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new V.y(bt=>{const de=this.xhrFactory.build();if(de.open(Re.method,Re.urlWithParams),Re.withCredentials&&(de.withCredentials=!0),Re.headers.forEach((ue,Se)=>de.setRequestHeader(ue,Se.join(","))),Re.headers.has("Accept")||de.setRequestHeader("Accept","application/json, text/plain, */*"),!Re.headers.has("Content-Type")){const ue=Re.detectContentTypeHeader();null!==ue&&de.setRequestHeader("Content-Type",ue)}if(Re.responseType){const ue=Re.responseType.toLowerCase();de.responseType="json"!==ue?ue:"text"}const me=Re.serializeBody();let De=null;const rt=()=>{if(null!==De)return De;const ue=de.statusText||"OK",Se=new Y(de.getAllResponseHeaders()),ze=function zi(Qe){return"responseURL"in Qe&&Qe.responseURL?Qe.responseURL:/^X-Request-URL:/m.test(Qe.getAllResponseHeaders())?Qe.getResponseHeader("X-Request-URL"):null}(de)||Re.url;return De=new Ke({headers:Se,status:de.status,statusText:ue,url:ze}),De},Ne=()=>{let{headers:ue,status:Se,statusText:ze,url:Nt}=rt(),Qt=null;204!==Se&&(Qt=typeof de.response>"u"?de.responseText:de.response),0===Se&&(Se=Qt?200:0);let $n=Se>=200&&Se<300;if("json"===Re.responseType&&"string"==typeof Qt){const pr=Qt;Qt=Qt.replace(Nr,"");try{Qt=""!==Qt?JSON.parse(Qt):null}catch(fi){Qt=pr,$n&&($n=!1,Qt={error:fi,text:Qt})}}$n?(bt.next(new ut({body:Qt,headers:ue,status:Se,statusText:ze,url:Nt||void 0})),bt.complete()):bt.error(new qe({error:Qt,headers:ue,status:Se,statusText:ze,url:Nt||void 0}))},Mt=ue=>{const{url:Se}=rt(),ze=new qe({error:ue,status:de.status||0,statusText:de.statusText||"Unknown Error",url:Se||void 0});bt.error(ze)};let Bt=!1;const Oe=ue=>{Bt||(bt.next(rt()),Bt=!0);let Se={type:At.DownloadProgress,loaded:ue.loaded};ue.lengthComputable&&(Se.total=ue.total),"text"===Re.responseType&&de.responseText&&(Se.partialText=de.responseText),bt.next(Se)},we=ue=>{let Se={type:At.UploadProgress,loaded:ue.loaded};ue.lengthComputable&&(Se.total=ue.total),bt.next(Se)};return de.addEventListener("load",Ne),de.addEventListener("error",Mt),de.addEventListener("timeout",Mt),de.addEventListener("abort",Mt),Re.reportProgress&&(de.addEventListener("progress",Oe),null!==me&&de.upload&&de.upload.addEventListener("progress",we)),de.send(me),bt.next({type:At.Sent}),()=>{de.removeEventListener("error",Mt),de.removeEventListener("abort",Mt),de.removeEventListener("load",Ne),de.removeEventListener("timeout",Mt),Re.reportProgress&&(de.removeEventListener("progress",Oe),null!==me&&de.upload&&de.upload.removeEventListener("progress",we)),de.readyState!==de.DONE&&de.abort()}})}}return Qe.\u0275fac=function(Re){return new(Re||Qe)(C.LFG(m.JF))},Qe.\u0275prov=C.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();const nn=new C.OlP("XSRF_ENABLED"),Kr=new C.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),br=new C.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class In{}let Yn=(()=>{class Qe{constructor(Re,bt,de){this.doc=Re,this.platform=bt,this.cookieName=de,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Re=this.doc.cookie||"";return Re!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,m.Mx)(Re,this.cookieName),this.lastCookieString=Re),this.lastToken}}return Qe.\u0275fac=function(Re){return new(Re||Qe)(C.LFG(m.K0),C.LFG(C.Lbi),C.LFG(Kr))},Qe.\u0275prov=C.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();function sr(Qe,Ie){const Re=Qe.url.toLowerCase();if(!(0,C.f3M)(nn)||"GET"===Qe.method||"HEAD"===Qe.method||Re.startsWith("http://")||Re.startsWith("https://"))return Ie(Qe);const bt=(0,C.f3M)(In).getToken(),de=(0,C.f3M)(br);return null!=bt&&!Qe.headers.has(de)&&(Qe=Qe.clone({headers:Qe.headers.set(de,bt)})),Ie(Qe)}var Yt=(()=>((Yt=Yt||{})[Yt.Interceptors=0]="Interceptors",Yt[Yt.LegacyInterceptors=1]="LegacyInterceptors",Yt[Yt.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Yt[Yt.NoXsrfProtection=3]="NoXsrfProtection",Yt[Yt.JsonpSupport=4]="JsonpSupport",Yt[Yt.RequestsMadeViaParent=5]="RequestsMadeViaParent",Yt))();function Qn(Qe,Ie){return{\u0275kind:Qe,\u0275providers:Ie}}function mi(...Qe){const Ie=[It,ir,rr,{provide:W,useExisting:rr},{provide:ee,useExisting:ir},{provide:On,useValue:sr,multi:!0},{provide:nn,useValue:!0},{provide:In,useClass:Yn}];for(const Re of Qe)Ie.push(...Re.\u0275providers);return(0,C.MR2)(Ie)}const ti=new C.OlP("LEGACY_INTERCEPTOR_FN");let er=(()=>{class Qe{}return Qe.\u0275fac=function(Re){return new(Re||Qe)},Qe.\u0275mod=C.oAB({type:Qe}),Qe.\u0275inj=C.cJS({providers:[mi(Qn(Yt.LegacyInterceptors,[{provide:ti,useFactory:gn},{provide:On,useExisting:ti,multi:!0}]))]}),Qe})(),yi=(()=>{class Qe{}return Qe.\u0275fac=function(Re){return new(Re||Qe)},Qe.\u0275mod=C.oAB({type:Qe}),Qe.\u0275inj=C.cJS({providers:[Qn(Yt.JsonpSupport,[Pt,{provide:Fe,useFactory:ft},{provide:On,useValue:kn,multi:!0}]).\u0275providers]}),Qe})()},4650:(Ee,se,D)=>{D.d(se,{$8M:()=>No,$WT:()=>oi,$Z:()=>id,AFp:()=>EE,ALo:()=>Uv,AaK:()=>W,Akn:()=>Dl,AsE:()=>Om,B6R:()=>pr,BQk:()=>gd,CHM:()=>Us,CRH:()=>Zv,CZH:()=>Xm,CqO:()=>ih,D6c:()=>CI,DdM:()=>Av,Dn7:()=>jv,EJc:()=>UD,EiD:()=>Df,EpF:()=>Jh,F$t:()=>pm,F4k:()=>ef,FYo:()=>Su,FiY:()=>_a,G48:()=>sI,G7q:()=>Hv,Gf:()=>Qv,GfV:()=>Tg,GkF:()=>Xh,Gpc:()=>le,Gre:()=>Gy,HOy:()=>ch,HTZ:()=>Rv,Hsn:()=>gm,IAx:()=>Zr,Ikx:()=>Wm,IyS:()=>hh,JOm:()=>ko,JVY:()=>kl,JZr:()=>Ue,Jf7:()=>Of,Jzz:()=>Qp,KtG:()=>nu,L6k:()=>Ih,LAX:()=>Ch,LFG:()=>er,LMc:()=>TI,LSH:()=>Cu,Lbi:()=>ND,Lck:()=>U0,MAs:()=>th,MGl:()=>oh,MMx:()=>l_,MR2:()=>pg,MT6:()=>Lm,NdJ:()=>sh,O4$:()=>Lt,OlP:()=>Jr,Oqu:()=>Pm,P3R:()=>Tf,PXZ:()=>JD,PiD:()=>bl,Q6J:()=>Rp,QGY:()=>rh,QbO:()=>LD,Qsj:()=>wg,R0b:()=>_u,RDi:()=>Rd,Rgc:()=>sg,SBq:()=>gu,Sil:()=>BD,Suo:()=>qv,TTD:()=>fs,TgZ:()=>qh,Tol:()=>Sm,Udp:()=>xc,VKq:()=>Mv,W1O:()=>tE,WLB:()=>Pv,X6Q:()=>iI,XFs:()=>nn,Xpm:()=>$n,Xts:()=>Gc,Y36:()=>Mu,YKP:()=>vv,YNc:()=>Op,Yjl:()=>qn,Yz7:()=>un,Z0I:()=>Fe,ZZ4:()=>N_,_Bn:()=>_v,_UZ:()=>xp,_Vd:()=>Zc,_c5:()=>DI,_uU:()=>vd,aQg:()=>L_,c2e:()=>FD,cJS:()=>vt,cg1:()=>ph,d8E:()=>Zp,dDg:()=>QD,dqk:()=>Yn,eBb:()=>Hc,eFA:()=>xE,eJc:()=>__,ekj:()=>cf,eoX:()=>ME,evT:()=>Mg,f3M:()=>Yr,fQ9:()=>sn,g9A:()=>IE,gL8:()=>Ed,h0i:()=>pf,hGG:()=>II,hij:()=>xu,iGM:()=>Yv,ifc:()=>Ne,ip1:()=>vE,jDz:()=>Dv,kEZ:()=>Ov,kL8:()=>Jy,kcU:()=>Qo,lG2:()=>Tn,lcZ:()=>Vv,lnq:()=>Rm,lqb:()=>yc,lri:()=>bE,mCW:()=>E,n5z:()=>es,oAB:()=>Ze,oJD:()=>Wu,oxw:()=>Pc,pB0:()=>lg,q3G:()=>xs,q4F:()=>Sg,qLn:()=>Ud,qOj:()=>Ep,qZA:()=>Zh,qzn:()=>dc,rWj:()=>AE,s9C:()=>kp,sBO:()=>oI,s_b:()=>Qm,soG:()=>Jm,tBr:()=>fl,tb:()=>OE,tp0:()=>Zo,uIk:()=>Ap,uOi:()=>pc,vHH:()=>ke,vpe:()=>tc,wAp:()=>Xn,xi3:()=>Bv,xp6:()=>kg,ynx:()=>nh,z2F:()=>ey,z3N:()=>Rs,zSh:()=>Th,zs3:()=>Au});var m=D(7579),C=D(727),J=D(9751),V=D(6451),q=D(3099);function te(n){for(let r in n)if(n[r]===te)return r;throw Error("Could not find renamed property on target object.")}function X(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function W(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(W).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function ee(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const Y=te({__forward_ref__:te});function le(n){return n.__forward_ref__=le,n.toString=function(){return W(this())},n}function he(n){return Pe(n)?n():n}function Pe(n){return"function"==typeof n&&n.hasOwnProperty(Y)&&n.__forward_ref__===le}function He(n){return n&&!!n.\u0275providers}const Ue="https://g.co/ng/security#xss";class ke extends Error{constructor(r,s){super(je(r,s)),this.code=r}}function je(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}function $e(n){return"string"==typeof n?n:null==n?"":String(n)}function Et(n,r){throw new ke(-201,!1)}function On(n,r){null==n&&function gn(n,r,s,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${s} ${u} ${r} <=Actual]`))}(r,n,null,"!=")}function un(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vt(n){return{providers:n.providers||[],imports:n.imports||[]}}function at(n){return ft(n,Kn)||ft(n,zi)}function Fe(n){return null!==at(n)}function ft(n,r){return n.hasOwnProperty(r)?n[r]:null}function kn(n){return n&&(n.hasOwnProperty(Nr)||n.hasOwnProperty(ir))?n[Nr]:null}const Kn=te({\u0275prov:te}),Nr=te({\u0275inj:te}),zi=te({ngInjectableDef:te}),ir=te({ngInjectorDef:te});var nn=(()=>((nn=nn||{})[nn.Default=0]="Default",nn[nn.Host=1]="Host",nn[nn.Self=2]="Self",nn[nn.SkipSelf=4]="SkipSelf",nn[nn.Optional=8]="Optional",nn))();let Ri;function Cr(n){const r=Ri;return Ri=n,r}function br(n,r,s){const u=at(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:s&nn.Optional?null:void 0!==r?r:void Et(W(n))}const Yn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Qn={},mi="__NG_DI_FLAG__",Ur="ngTempTokenPath",ti="ngTokenPath",vr=/\n/gm,ni="\u0275",or="__source";let wi;function Un(n){const r=wi;return wi=n,r}function Vr(n,r=nn.Default){if(void 0===wi)throw new ke(-203,!1);return null===wi?br(n,void 0,r):wi.get(n,r&nn.Optional?null:void 0,r)}function er(n,r=nn.Default){return(function Kr(){return Ri}()||Vr)(he(n),r)}function Yr(n,r=nn.Default){return er(n,Qe(r))}function Qe(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ie(n){const r=[];for(let s=0;s<n.length;s++){const u=he(n[s]);if(Array.isArray(u)){if(0===u.length)throw new ke(900,!1);let p,_=nn.Default;for(let T=0;T<u.length;T++){const R=u[T],L=bt(R);"number"==typeof L?-1===L?p=R.token:_|=L:p=R}r.push(er(p,_))}else r.push(er(u))}return r}function Re(n,r){return n[mi]=r,n.prototype[mi]=r,n}function bt(n){return n[mi]}function De(n){return{toString:n}.toString()}var rt=(()=>((rt=rt||{})[rt.OnPush=0]="OnPush",rt[rt.Default=1]="Default",rt))(),Ne=(()=>{return(n=Ne||(Ne={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ne;var n})();const Mt={},Bt=[],Oe=te({\u0275cmp:te}),we=te({\u0275dir:te}),ue=te({\u0275pipe:te}),Se=te({\u0275mod:te}),ze=te({\u0275fac:te}),Nt=te({__NG_ELEMENT_ID__:te});let Qt=0;function $n(n){return De(()=>{const r=Ns(n),s={...r,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===rt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||Ne.Emulated,id:"c"+Qt++,styles:n.styles||Bt,_:null,schemas:n.schemas||null,tView:null};Ls(s);const u=n.dependencies;return s.directiveDefs=pi(u,!1),s.pipeDefs=pi(u,!0),s})}function pr(n,r,s){const u=n.\u0275cmp;u.directiveDefs=pi(r,!1),u.pipeDefs=pi(s,!0)}function fi(n){return en(n)||gr(n)}function ct(n){return null!==n}function Ze(n){return De(()=>({type:n.type,bootstrap:n.bootstrap||Bt,declarations:n.declarations||Bt,imports:n.imports||Bt,exports:n.exports||Bt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Wt(n,r){if(null==n)return Mt;const s={};for(const u in n)if(n.hasOwnProperty(u)){let p=n[u],_=p;Array.isArray(p)&&(_=p[1],p=p[0]),s[p]=u,r&&(r[p]=_)}return s}function Tn(n){return De(()=>{const r=Ns(n);return Ls(r),r})}function qn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function en(n){return n[Oe]||null}function gr(n){return n[we]||null}function ar(n){return n[ue]||null}function oi(n){const r=en(n)||gr(n)||ar(n);return null!==r&&r.standalone}function Ar(n,r){const s=n[Se]||null;if(!s&&!0===r)throw new Error(`Type ${W(n)} does not have '\u0275mod' property.`);return s}function Ns(n){const r={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Bt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Wt(n.inputs,r),outputs:Wt(n.outputs)}}function Ls(n){n.features?.forEach(r=>r(n))}function pi(n,r){if(!n)return null;const s=r?ar:fi;return()=>("function"==typeof n?n():n).map(u=>s(u)).filter(ct)}const Mr=0,Rt=1,Mn=2,cn=3,Cn=4,fn=5,lr=6,mr=7,wr=8,Ki=9,Yi=10,Vn=11,Bn=12,Rn=13,Lr=14,Ds=15,_e=16,nt=17,Ge=18,dt=19,Vt=20,jt=21,dn=22,yr=1,ai=2,ur=7,Tr=8,_i=9,Qr=10;function li(n){return Array.isArray(n)&&"object"==typeof n[yr]}function En(n){return Array.isArray(n)&&!0===n[yr]}function Is(n){return 0!=(4&n.flags)}function Gs(n){return n.componentOffset>-1}function ss(n){return 1==(1&n.flags)}function hr(n){return!!n.template}function yo(n){return 0!=(256&n[Mn])}function lo(n,r){return n.hasOwnProperty(ze)?n[ze]:null}class ua{constructor(r,s,u){this.previousValue=r,this.currentValue=s,this.firstChange=u}isFirstChange(){return this.firstChange}}function fs(){return Cs}function Cs(n){return n.type.prototype.ngOnChanges&&(n.setInput=jo),xn}function xn(){const n=Ca(this),r=n?.current;if(r){const s=n.previous;if(s===Mt)n.previous=r;else for(let u in r)s[u]=r[u];n.current=null,this.ngOnChanges(r)}}function jo(n,r,s,u){const p=this.declaredInputs[s],_=Ca(n)||function Fr(n,r){return n[ws]=r}(n,{previous:Mt,current:null}),T=_.current||(_.current={}),R=_.previous,L=R[p];T[p]=new ua(L&&L.currentValue,r,R===Mt),n[u]=r}fs.ngInherit=!0;const ws="__ngSimpleChanges__";function Ca(n){return n[ws]||null}const vi=function(n,r,s){},uo="svg";function $r(n){for(;Array.isArray(n);)n=n[Mr];return n}function $o(n,r){return $r(r[n])}function ui(n,r){return $r(r[n.index])}function Go(n,r){return n.data[r]}function Sr(n,r){return n[r]}function Hi(n,r){const s=r[n];return li(s)?s:s[Mr]}function Ts(n){return 64==(64&n[Mn])}function ks(n,r){return null==r?null:n[r]}function Po(n){n[Ge]=0}function Oo(n,r){n[fn]+=r;let s=n,u=n[cn];for(;null!==u&&(1===r&&1===s[fn]||-1===r&&0===s[fn]);)u[fn]+=r,s=u,u=u[cn]}const Ln={lFrame:ba(null),bindingsEnabled:!0};function tt(){return Ln.bindingsEnabled}function sn(){Ln.bindingsEnabled=!0}function Zr(){Ln.bindingsEnabled=!1}function ht(){return Ln.lFrame.lView}function Nn(){return Ln.lFrame.tView}function Us(n){return Ln.lFrame.contextLView=n,n[wr]}function nu(n){return Ln.lFrame.contextLView=null,n}function Li(){let n=wa();for(;null!==n&&64===n.type;)n=n.parent;return n}function wa(){return Ln.lFrame.currentTNode}function Ss(n,r){const s=Ln.lFrame;s.currentTNode=n,s.isParent=r}function co(){return Ln.lFrame.isParent}function ca(){Ln.lFrame.isParent=!1}function Ti(){const n=Ln.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function ri(){return Ln.lFrame.bindingIndex}function zo(){return Ln.lFrame.bindingIndex++}function ms(n){const r=Ln.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function bi(n,r){const s=Ln.lFrame;s.bindingIndex=s.bindingRootIndex=n,Ys(r)}function Ys(n){Ln.lFrame.currentDirectiveIndex=n}function Zi(n){const r=Ln.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function Yo(){return Ln.lFrame.currentQueryIndex}function Ka(n){Ln.lFrame.currentQueryIndex=n}function wl(n){const r=n[Rt];return 2===r.type?r.declTNode:1===r.type?n[lr]:null}function ii(n,r,s){if(s&nn.SkipSelf){let p=r,_=n;for(;!(p=p.parent,null!==p||s&nn.Host||(p=wl(_),null===p||(_=_[Ds],10&p.type))););if(null===p)return!1;r=p,n=_}const u=Ln.lFrame=Sa();return u.currentTNode=r,u.lView=n,!0}function Qs(n){const r=Sa(),s=n[Rt];Ln.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Sa(){const n=Ln.lFrame,r=null===n?null:n.child;return null===r?ba(n):r}function ba(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Aa(){const n=Ln.lFrame;return Ln.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Ya=Aa;function ha(){const n=Aa();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ci(){return Ln.lFrame.selectedIndex}function Ji(n){Ln.lFrame.selectedIndex=n}function Gr(){const n=Ln.lFrame;return Go(n.tView,n.selectedIndex)}function Lt(){Ln.lFrame.currentNamespace=uo}function Qo(){!function Qa(){Ln.lFrame.currentNamespace=null}()}function qa(n,r){for(let s=r.directiveStart,u=r.directiveEnd;s<u;s++){const _=n.data[s].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:R,ngAfterViewInit:L,ngAfterViewChecked:Q,ngOnDestroy:ae}=_;T&&(n.contentHooks??(n.contentHooks=[])).push(-s,T),R&&((n.contentHooks??(n.contentHooks=[])).push(s,R),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(s,R)),L&&(n.viewHooks??(n.viewHooks=[])).push(-s,L),Q&&((n.viewHooks??(n.viewHooks=[])).push(s,Q),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(s,Q)),null!=ae&&(n.destroyHooks??(n.destroyHooks=[])).push(s,ae)}}function zt(n,r,s){z(n,r,3,s)}function lt(n,r,s,u){(3&n[Mn])===s&&z(n,r,s,u)}function M(n,r){let s=n[Mn];(3&s)===r&&(s&=2047,s+=1,n[Mn]=s)}function z(n,r,s,u){const _=u??-1,T=r.length-1;let R=0;for(let L=void 0!==u?65535&n[Ge]:0;L<T;L++)if("number"==typeof r[L+1]){if(R=r[L],null!=u&&R>=u)break}else r[L]<0&&(n[Ge]+=65536),(R<_||-1==_)&&(k(n,s,r,L),n[Ge]=(4294901760&n[Ge])+L+2),L++}function k(n,r,s,u){const p=s[u]<0,_=s[u+1],R=n[p?-s[u]:s[u]];if(p){if(n[Mn]>>11<n[Ge]>>16&&(3&n[Mn])===r){n[Mn]+=2048,vi(4,R,_);try{_.call(R)}finally{vi(5,R,_)}}}else{vi(4,R,_);try{_.call(R)}finally{vi(5,R,_)}}}const ie=-1;class ye{constructor(r,s,u){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=u}}function Jt(n,r,s){let u=0;for(;u<s.length;){const p=s[u];if("number"==typeof p){if(0!==p)break;u++;const _=s[u++],T=s[u++],R=s[u++];n.setAttribute(r,T,R,_)}else{const _=p,T=s[++u];Vs(_)?n.setProperty(r,_,T):n.setAttribute(r,_,T),u++}}return u}function Xr(n){return 3===n||4===n||6===n}function Vs(n){return 64===n.charCodeAt(0)}function _r(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let u=0;u<r.length;u++){const p=r[u];"number"==typeof p?s=p:0===s||mn(n,s,p,null,-1===s||2===s?r[++u]:null)}}return n}function mn(n,r,s,u,p){let _=0,T=n.length;if(-1===r)T=-1;else for(;_<n.length;){const R=n[_++];if("number"==typeof R){if(R===r){T=-1;break}if(R>r){T=_-1;break}}}for(;_<n.length;){const R=n[_];if("number"==typeof R)break;if(R===s){if(null===u)return void(null!==p&&(n[_+1]=p));if(u===n[_+1])return void(n[_+2]=p)}_++,null!==u&&_++,null!==p&&_++}-1!==T&&(n.splice(T,0,r),_=T+1),n.splice(_++,0,s),null!==u&&n.splice(_++,0,u),null!==p&&n.splice(_++,0,p)}function Fi(n){return n!==ie}function Wn(n){return 32767&n}function Rr(n,r){let s=function fa(n){return n>>16}(n),u=r;for(;s>0;)u=u[Ds],s--;return u}let Gt=!0;function Eo(n){const r=Gt;return Gt=n,r}const pa=255,ol=5;let as=0;const go={};function Pa(n,r){const s=Bs(n,r);if(-1!==s)return s;const u=r[Rt];u.firstCreatePass&&(n.injectorIndex=r.length,al(u.data,n),al(r,null),al(u.blueprint,null));const p=Tl(n,r),_=n.injectorIndex;if(Fi(p)){const T=Wn(p),R=Rr(p,r),L=R[Rt].data;for(let Q=0;Q<8;Q++)r[_+Q]=R[T+Q]|L[T+Q]}return r[_+8]=p,_}function al(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Bs(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Tl(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,u=null,p=r;for(;null!==p;){if(u=iu(p),null===u)return ie;if(s++,p=p[Ds],-1!==u.injectorIndex)return u.injectorIndex|s<<16}return ie}function ru(n,r,s){!function As(n,r,s){let u;"string"==typeof s?u=s.charCodeAt(0)||0:s.hasOwnProperty(Nt)&&(u=s[Nt]),null==u&&(u=s[Nt]=as++);const p=u&pa;r.data[n+(p>>ol)]|=1<<p}(n,r,s)}function Ro(n,r,s){if(s&nn.Optional||void 0!==n)return n;Et()}function Za(n,r,s,u){if(s&nn.Optional&&void 0===u&&(u=null),!(s&(nn.Self|nn.Host))){const p=n[Ki],_=Cr(void 0);try{return p?p.get(r,u,s&nn.Optional):br(r,u,s&nn.Optional)}finally{Cr(_)}}return Ro(u,0,s)}function et(n,r,s,u=nn.Default,p){if(null!==n){if(1024&r[Mn]){const T=function js(n,r,s,u,p){let _=n,T=r;for(;null!==_&&null!==T&&1024&T[Mn]&&!(256&T[Mn]);){const R=qs(_,T,s,u|nn.Self,go);if(R!==go)return R;let L=_.parent;if(!L){const Q=T[jt];if(Q){const ae=Q.get(s,go,u);if(ae!==go)return ae}L=iu(T),T=T[Ds]}_=L}return p}(n,r,s,u,go);if(T!==go)return T}const _=qs(n,r,s,u,go);if(_!==go)return _}return Za(r,s,u,p)}function qs(n,r,s,u,p){const _=function ls(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Nt)?n[Nt]:void 0;return"number"==typeof r?r>=0?r&pa:$l:r}(s);if("function"==typeof _){if(!ii(r,n,u))return u&nn.Host?Ro(p,0,u):Za(r,s,u,p);try{const T=_(u);if(null!=T||u&nn.Optional)return T;Et()}finally{Ya()}}else if("number"==typeof _){let T=null,R=Bs(n,r),L=ie,Q=u&nn.Host?r[_e][lr]:null;for((-1===R||u&nn.SkipSelf)&&(L=-1===R?Tl(n,r):r[R+8],L!==ie&&xo(u,!1)?(T=r[Rt],R=Wn(L),r=Rr(L,r)):R=-1);-1!==R;){const ae=r[Rt];if(Xa(_,R,ae.data)){const ve=ys(R,r,s,T,u,Q);if(ve!==go)return ve}L=r[R+8],L!==ie&&xo(u,r[Rt].data[R+8]===Q)&&Xa(_,R,r)?(T=ae,R=Wn(L),r=Rr(L,r)):R=-1}}return p}function ys(n,r,s,u,p,_){const T=r[Rt],R=T.data[n+8],ae=Sl(R,T,s,null==u?Gs(R)&&Gt:u!=T&&0!=(3&R.type),p&nn.Host&&_===R);return null!==ae?Zs(r,T,ae,R):go}function Sl(n,r,s,u,p){const _=n.providerIndexes,T=r.data,R=1048575&_,L=n.directiveStart,ae=_>>20,Be=p?R+ae:n.directiveEnd;for(let ot=u?R:R+ae;ot<Be;ot++){const wt=T[ot];if(ot<L&&s===wt||ot>=L&&wt.type===s)return ot}if(p){const ot=T[L];if(ot&&hr(ot)&&ot.type===s)return L}return null}function Zs(n,r,s,u){let p=n[s];const _=r.data;if(function it(n){return n instanceof ye}(p)){const T=p;T.resolving&&function Le(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new ke(-200,`Circular dependency in DI detected for ${n}${s}`)}(function Je(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():$e(n)}(_[s]));const R=Eo(T.canSeeViewProviders);T.resolving=!0;const L=T.injectImpl?Cr(T.injectImpl):null;ii(n,u,nn.Default);try{p=n[s]=T.factory(void 0,_,n,u),r.firstCreatePass&&s>=u.directiveStart&&function Xt(n,r,s){const{ngOnChanges:u,ngOnInit:p,ngDoCheck:_}=r.type.prototype;if(u){const T=Cs(r);(s.preOrderHooks??(s.preOrderHooks=[])).push(n,T),(s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(n,T)}p&&(s.preOrderHooks??(s.preOrderHooks=[])).push(0-n,p),_&&((s.preOrderHooks??(s.preOrderHooks=[])).push(n,_),(s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(n,_))}(s,_[s],r)}finally{null!==L&&Cr(L),Eo(R),T.resolving=!1,Ya()}}return p}function Xa(n,r,s){return!!(s[r+(n>>ol)]&1<<n)}function xo(n,r){return!(n&nn.Self||n&nn.Host&&r)}class Ja{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,u){return et(this._tNode,this._lView,r,Qe(u),s)}}function $l(){return new Ja(Li(),ht())}function es(n){return De(()=>{const r=n.prototype.constructor,s=r[ze]||Oa(r),u=Object.prototype;let p=Object.getPrototypeOf(n.prototype).constructor;for(;p&&p!==u;){const _=p[ze]||Oa(p);if(_&&_!==s)return _;p=Object.getPrototypeOf(p)}return _=>new _})}function Oa(n){return Pe(n)?()=>{const r=Oa(he(n));return r&&r()}:lo(n)}function iu(n){const r=n[Rt],s=r.type;return 2===s?r.declTNode:1===s?n[lr]:null}function No(n){return function Hl(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const u=s.length;let p=0;for(;p<u;){const _=s[p];if(Xr(_))break;if(0===_)p+=2;else if("number"==typeof _)for(p++;p<u&&"string"==typeof s[p];)p++;else{if(_===r)return s[p+1];p+=2}}}return null}(Li(),n)}const Js="__parameters__";function qo(n,r,s){return De(()=>{const u=function Ms(n){return function(...s){if(n){const u=n(...s);for(const p in u)this[p]=u[p]}}}(r);function p(..._){if(this instanceof p)return u.apply(this,_),this;const T=new p(..._);return R.annotation=T,R;function R(L,Q,ae){const ve=L.hasOwnProperty(Js)?L[Js]:Object.defineProperty(L,Js,{value:[]})[Js];for(;ve.length<=ae;)ve.push(null);return(ve[ae]=ve[ae]||[]).push(T),L}}return s&&(p.prototype=Object.create(s.prototype)),p.prototype.ngMetadataName=n,p.annotationCls=p,p})}class Jr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=un({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function $(n,r){n.forEach(s=>Array.isArray(s)?$(s,r):r(s))}function re(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function ce(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Ve(n,r){const s=[];for(let u=0;u<n;u++)s.push(r);return s}function kr(n,r,s){let u=ki(n,r);return u>=0?n[1|u]=s:(u=~u,function Zt(n,r,s,u){let p=n.length;if(p==r)n.push(s,u);else if(1===p)n.push(u,n[0]),n[0]=s;else{for(p--,n.push(n[p-1],n[p]);p>r;)n[p]=n[p-2],p--;n[r]=s,n[r+1]=u}}(n,u,r,s)),u}function _s(n,r){const s=ki(n,r);if(s>=0)return n[1|s]}function ki(n,r){return function Wi(n,r,s){let u=0,p=n.length>>s;for(;p!==u;){const _=u+(p-u>>1),T=n[_<<s];if(r===T)return _<<s;T>r?p=_:u=_+1}return~(p<<s)}(n,r,1)}const fl=Re(qo("Inject",n=>({token:n})),-1),_a=Re(qo("Optional"),8),bl=Re(qo("Self"),2),Zo=Re(qo("SkipSelf"),4);var ko=(()=>((ko=ko||{})[ko.Important=1]="Important",ko[ko.DashCase=2]="DashCase",ko))();const lu=new Map;let uu=0;const Da="__ngContext__";function Pi(n,r){li(r)?(n[Da]=r[Vt],function Bu(n){lu.set(n[Vt],n)}(r)):n[Da]=r}let H;function ne(n,r){return H(n,r)}function be(n){const r=n[cn];return En(r)?r[cn]:r}function Ht(n){return wn(n[Rn])}function Dn(n){return wn(n[Cn])}function wn(n){for(;null!==n&&!En(n);)n=n[Cn];return n}function tn(n,r,s,u,p){if(null!=u){let _,T=!1;En(u)?_=u:li(u)&&(T=!0,u=u[Mr]);const R=$r(u);0===n&&null!==s?null==p?Fn(r,s,R):Sn(r,s,R,p||null,!0):1===n&&null!==s?Sn(r,s,R,p||null,!0):2===n?function Sd(n,r,s){const u=wo(n,r);u&&function Es(n,r,s,u){n.removeChild(r,s,u)}(n,u,r,s)}(r,R,T):3===n&&r.destroyNode(R),null!=_&&function oc(n,r,s,u,p){const _=s[ur];_!==$r(s)&&tn(r,n,u,_,p);for(let R=Qr;R<s.length;R++){const L=s[R];ds(L[Rt],L,n,r,u,_)}}(r,n,_,s,p)}}function An(n,r,s){return n.createElement(r,s)}function Co(n,r){const s=n[_i],u=s.indexOf(r),p=r[cn];512&r[Mn]&&(r[Mn]&=-513,Oo(p,-1)),s.splice(u,1)}function La(n,r){if(n.length<=Qr)return;const s=Qr+r,u=n[s];if(u){const p=u[nt];null!==p&&p!==n&&Co(p,u),r>0&&(n[s-1][Cn]=u[Cn]);const _=ce(n,Qr+r);!function Di(n,r){ds(n,r,r[Vn],2,null,null),r[Mr]=null,r[lr]=null}(u[Rt],u);const T=_[dt];null!==T&&T.detachView(_[Rt]),u[cn]=null,u[Cn]=null,u[Mn]&=-65}return u}function ea(n,r){if(!(128&r[Mn])){const s=r[Vn];s.destroyNode&&ds(n,r,s,3,null,null),function Na(n){let r=n[Rn];if(!r)return Zl(n[Rt],n);for(;r;){let s=null;if(li(r))s=r[Rn];else{const u=r[Qr];u&&(s=u)}if(!s){for(;r&&!r[Cn]&&r!==n;)li(r)&&Zl(r[Rt],r),r=r[cn];null===r&&(r=n),li(r)&&Zl(r[Rt],r),s=r&&r[Cn]}r=s}}(r)}}function Zl(n,r){if(!(128&r[Mn])){r[Mn]&=-65,r[Mn]|=128,function kc(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let u=0;u<s.length;u+=2){const p=r[s[u]];if(!(p instanceof ye)){const _=s[u+1];if(Array.isArray(_))for(let T=0;T<_.length;T+=2){const R=p[_[T]],L=_[T+1];vi(4,R,L);try{L.call(R)}finally{vi(5,R,L)}}else{vi(4,p,_);try{_.call(p)}finally{vi(5,p,_)}}}}}(n,r),function sl(n,r){const s=n.cleanup,u=r[mr];let p=-1;if(null!==s)for(let _=0;_<s.length-1;_+=2)if("string"==typeof s[_]){const T=s[_+3];T>=0?u[p=T]():u[p=-T].unsubscribe(),_+=2}else{const T=u[p=s[_+1]];s[_].call(T)}if(null!==u){for(let _=p+1;_<u.length;_++)(0,u[_])();r[mr]=null}}(n,r),1===r[Rt].type&&r[Vn].destroy();const s=r[nt];if(null!==s&&En(r[cn])){s!==r[cn]&&Co(s,r);const u=r[dt];null!==u&&u.detachView(n)}!function rc(n){lu.delete(n[Vt])}(r)}}function ic(n,r,s){return function Ft(n,r,s){let u=r;for(;null!==u&&40&u.type;)u=(r=u).parent;if(null===u)return s[Mr];{const{componentOffset:p}=u;if(p>-1){const{encapsulation:_}=n.data[u.directiveStart+p];if(_===Ne.None||_===Ne.Emulated)return null}return ui(u,s)}}(n,r.parent,s)}function Sn(n,r,s,u,p){n.insertBefore(r,s,u,p)}function Fn(n,r,s){n.appendChild(r,s)}function Pr(n,r,s,u,p){null!==u?Sn(n,r,s,u,p):Fn(n,r,s)}function wo(n,r){return n.parentNode(r)}function Vi(n,r,s){return Hu(n,r,s)}let to,Vc,ac,lc,Hu=function Uc(n,r,s){return 40&n.type?ui(n,s):null};function ta(n,r,s,u){const p=ic(n,u,r),_=r[Vn],R=Vi(u.parent||r[lr],u,r);if(null!=p)if(Array.isArray(s))for(let L=0;L<s.length;L++)Pr(_,p,s[L],R,!1);else Pr(_,p,s,R,!1);void 0!==to&&to(_,u,r,s,p)}function Fl(n,r){if(null!==r){const s=r.type;if(3&s)return ui(r,n);if(4&s)return du(-1,n[r.index]);if(8&s){const u=r.child;if(null!==u)return Fl(n,u);{const p=n[r.index];return En(p)?du(-1,p):$r(p)}}if(32&s)return ne(r,n)()||$r(n[r.index]);{const u=sc(n,r);return null!==u?Array.isArray(u)?u[0]:Fl(be(n[_e]),u):Fl(n,r.next)}}return null}function sc(n,r){return null!==r?n[_e][lr].projection[r.projection]:null}function du(n,r){const s=Qr+n+1;if(s<r.length){const u=r[s],p=u[Rt].firstChild;if(null!==p)return Fl(u,p)}return r[ur]}function bd(n,r,s,u,p,_,T){for(;null!=s;){const R=u[s.index],L=s.type;if(T&&0===r&&(R&&Pi($r(R),u),s.flags|=2),32!=(32&s.flags))if(8&L)bd(n,r,s.child,u,p,_,!1),tn(r,n,p,R,_);else if(32&L){const Q=ne(s,u);let ae;for(;ae=Q();)tn(r,n,p,ae,_);tn(r,n,p,R,_)}else 16&L?mh(n,r,u,s,p,_):tn(r,n,p,R,_);s=T?s.projectionNext:s.next}}function ds(n,r,s,u,p,_){bd(s,u,n.firstChild,r,p,_,!1)}function mh(n,r,s,u,p,_){const T=s[_e],L=T[lr].projection[u.projection];if(Array.isArray(L))for(let Q=0;Q<L.length;Q++)tn(r,n,p,L[Q],_);else bd(n,r,L,T[cn],p,_,!0)}function yh(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function $u(n,r,s){const{mergedAttrs:u,classes:p,styles:_}=s;null!==u&&Jt(n,r,u),null!==p&&yh(n,r,p),null!==_&&function Md(n,r,s){n.setAttribute(r,"style",s)}(n,r,_)}function Gu(n){return function Bc(){if(void 0===Vc&&(Vc=null,Yn.trustedTypes))try{Vc=Yn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Vc}()?.createHTML(n)||n}function Rd(n){ac=n}function xd(){if(void 0===lc&&(lc=null,Yn.trustedTypes))try{lc=Yn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return lc}function Nd(n){return xd()?.createHTML(n)||n}function vh(n){return xd()?.createScriptURL(n)||n}class hu{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ue})`}}class uc extends hu{getTypeName(){return"HTML"}}class cc extends hu{getTypeName(){return"Style"}}class Eh extends hu{getTypeName(){return"Script"}}class _f extends hu{getTypeName(){return"URL"}}class vf extends hu{getTypeName(){return"ResourceURL"}}function Rs(n){return n instanceof hu?n.changingThisBreaksApplicationSecurity:n}function dc(n,r){const s=function Dh(n){return n instanceof hu&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Ue})`)}return s===r}function kl(n){return new uc(n)}function Ih(n){return new cc(n)}function Hc(n){return new Eh(n)}function Ch(n){return new _f(n)}function lg(n){return new vf(n)}class ug{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(Gu(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class g{constructor(r){this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(r){const s=this.inertDocument.createElement("template");return s.innerHTML=Gu(r),s}}const f=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function E(n){return(n=String(n)).match(f)?n:"unsafe:"+n}function A(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function U(...n){const r={};for(const s of n)for(const u in s)s.hasOwnProperty(u)&&(r[u]=!0);return r}const K=A("area,br,col,hr,img,wbr"),fe=A("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ce=A("rp,rt"),Tt=U(K,U(fe,A("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),U(Ce,A("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),U(Ce,fe)),_n=A("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),To=U(_n,A("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),A("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),fu=A("script,style,template");class $s{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,u=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?u=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,u&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let p=this.checkClobberedElement(s,s.nextSibling);if(p){s=p;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!Tt.hasOwnProperty(s))return this.sanitizedSomething=!0,!fu.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const u=r.attributes;for(let p=0;p<u.length;p++){const _=u.item(p),T=_.name,R=T.toLowerCase();if(!To.hasOwnProperty(R)){this.sanitizedSomething=!0;continue}let L=_.value;_n[R]&&(L=E(L)),this.buf.push(" ",T,'="',wh(L),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();Tt.hasOwnProperty(s)&&!K.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(wh(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const hc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ld=/([^\#-~ |!])/g;function wh(n){return n.replace(/&/g,"&amp;").replace(hc,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Ld,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Jl;function Df(n,r){let s=null;try{Jl=Jl||function Ef(n){const r=new g(n);return function h(){try{return!!(new window.DOMParser).parseFromString(Gu(""),"text/html")}catch{return!1}}()?new ug(r):r}(n);let u=r?String(r):"";s=Jl.getInertBodyElement(u);let p=5,_=u;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,u=_,_=s.innerHTML,s=Jl.getInertBodyElement(u)}while(u!==_);return Gu((new $s).sanitizeChildren(If(s)||s))}finally{if(s){const u=If(s)||s;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function If(n){return"content"in n&&function cg(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var xs=(()=>((xs=xs||{})[xs.NONE=0]="NONE",xs[xs.HTML=1]="HTML",xs[xs.STYLE=2]="STYLE",xs[xs.SCRIPT=3]="SCRIPT",xs[xs.URL=4]="URL",xs[xs.RESOURCE_URL=5]="RESOURCE_URL",xs))();function Wu(n){const r=$c();return r?Nd(r.sanitize(xs.HTML,n)||""):dc(n,"HTML")?Nd(Rs(n)):Df(function jc(){return void 0!==ac?ac:typeof document<"u"?document:void 0}(),$e(n))}function Cu(n){const r=$c();return r?r.sanitize(xs.URL,n)||"":dc(n,"URL")?Rs(n):E($e(n))}function pc(n){const r=$c();if(r)return vh(r.sanitize(xs.RESOURCE_URL,n)||"");if(dc(n,"ResourceURL"))return vh(Rs(n));throw new ke(904,!1)}function Tf(n,r,s){return function hg(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?pc:Cu}(r,s)(n)}function $c(){const n=ht();return n&&n[Bn]}const Gc=new Jr("ENVIRONMENT_INITIALIZER"),Wc=new Jr("INJECTOR",-1),zu=new Jr("INJECTOR_DEF_TYPES");class fg{get(r,s=Qn){if(s===Qn){const u=new Error(`NullInjectorError: No provider for ${W(r)}!`);throw u.name="NullInjectorError",u}return s}}function pg(n){return{\u0275providers:n}}function sy(...n){return{\u0275providers:gg(0,n),\u0275fromNgModule:!0}}function gg(n,...r){const s=[],u=new Set;let p;return $(r,_=>{const T=_;gc(T,s,[],u)&&(p||(p=[]),p.push(T))}),void 0!==p&&mg(p,s),s}function mg(n,r){for(let s=0;s<n.length;s++){const{providers:p}=n[s];pu(p,_=>{r.push(_)})}}function gc(n,r,s,u){if(!(n=he(n)))return!1;let p=null,_=kn(n);const T=!_&&en(n);if(_||T){if(T&&!T.standalone)return!1;p=n}else{const L=n.ngModule;if(_=kn(L),!_)return!1;p=L}const R=u.has(p);if(T){if(R)return!1;if(u.add(p),T.dependencies){const L="function"==typeof T.dependencies?T.dependencies():T.dependencies;for(const Q of L)gc(Q,r,s,u)}}else{if(!_)return!1;{if(null!=_.imports&&!R){let Q;u.add(p);try{$(_.imports,ae=>{gc(ae,r,s,u)&&(Q||(Q=[]),Q.push(ae))})}finally{}void 0!==Q&&mg(Q,r)}if(!R){const Q=lo(p)||(()=>new p);r.push({provide:p,useFactory:Q,deps:Bt},{provide:zu,useValue:p,multi:!0},{provide:Gc,useValue:()=>er(p),multi:!0})}const L=_.providers;null==L||R||pu(L,ae=>{r.push(ae)})}}return p!==n&&void 0!==n.providers}function pu(n,r){for(let s of n)He(s)&&(s=s.\u0275providers),Array.isArray(s)?pu(s,r):r(s)}const yg=te({provide:String,useValue:te});function Sf(n){return null!==n&&"object"==typeof n&&yg in n}function wu(n){return"function"==typeof n}const Th=new Jr("Set Injector scope."),Kc={},Mf={};let Sh;function mc(){return void 0===Sh&&(Sh=new fg),Sh}class yc{}class bh extends yc{get destroyed(){return this._destroyed}constructor(r,s,u,p){super(),this.parent=s,this.source=u,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fa(r,T=>this.processProvider(T)),this.records.set(Wc,Tu(void 0,this)),p.has("environment")&&this.records.set(yc,Tu(void 0,this));const _=this.records.get(Th);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(zu.multi,Bt,nn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=Un(this),u=Cr(void 0);try{return r()}finally{Un(s),Cr(u)}}get(r,s=Qn,u=nn.Default){this.assertNotDestroyed(),u=Qe(u);const p=Un(this),_=Cr(void 0);try{if(!(u&nn.SkipSelf)){let R=this.records.get(r);if(void 0===R){const L=function Dg(n){return"function"==typeof n||"object"==typeof n&&n instanceof Jr}(r)&&at(r);R=L&&this.injectableDefInScope(L)?Tu(Yc(r),Kc):null,this.records.set(r,R)}if(null!=R)return this.hydrate(r,R)}return(u&nn.Self?mc():this.parent).get(r,s=u&nn.Optional&&s===Qn?null:s)}catch(T){if("NullInjectorError"===T.name){if((T[Ur]=T[Ur]||[]).unshift(W(r)),p)throw T;return function de(n,r,s,u){const p=n[Ur];throw r[or]&&p.unshift(r[or]),n.message=function me(n,r,s,u=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==ni?n.slice(2):n;let p=W(r);if(Array.isArray(r))p=r.map(W).join(" -> ");else if("object"==typeof r){let _=[];for(let T in r)if(r.hasOwnProperty(T)){let R=r[T];_.push(T+":"+("string"==typeof R?JSON.stringify(R):W(R)))}p=`{${_.join(", ")}}`}return`${s}${u?"("+u+")":""}[${p}]: ${n.replace(vr,"\n  ")}`}("\n"+n.message,p,s,u),n[ti]=p,n[Ur]=null,n}(T,r,"R3InjectorError",this.source)}throw T}finally{Cr(_),Un(p)}}resolveInjectorInitializers(){const r=Un(this),s=Cr(void 0);try{const u=this.get(Gc.multi,Bt,nn.Self);for(const p of u)p()}finally{Un(r),Cr(s)}}toString(){const r=[],s=this.records;for(const u of s.keys())r.push(W(u));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processProvider(r){let s=wu(r=he(r))?r:he(r&&r.provide);const u=function vg(n){return Sf(n)?Tu(void 0,n.useValue):Tu(Qc(n),Kc)}(r);if(wu(r)||!0!==r.multi)this.records.get(s);else{let p=this.records.get(s);p||(p=Tu(void 0,Kc,!0),p.factory=()=>Ie(p.multi),this.records.set(s,p)),s=r,p.multi.push(r)}this.records.set(s,u)}hydrate(r,s){return s.value===Kc&&(s.value=Mf,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Eg(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=he(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Yc(n){const r=at(n),s=null!==r?r.factory:lo(n);if(null!==s)return s;if(n instanceof Jr)throw new ke(204,!1);if(n instanceof Function)return function oy(n){const r=n.length;if(r>0)throw Ve(r,"?"),new ke(204,!1);const s=function Pt(n){return n&&(n[Kn]||n[zi])||null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new ke(204,!1)}function Qc(n,r,s){let u;if(wu(n)){const p=he(n);return lo(p)||Yc(p)}if(Sf(n))u=()=>he(n.useValue);else if(function _g(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...Ie(n.deps||[]));else if(function bf(n){return!(!n||!n.useExisting)}(n))u=()=>er(he(n.useExisting));else{const p=he(n&&(n.useClass||n.provide));if(!function Fd(n){return!!n.deps}(n))return lo(p)||Yc(p);u=()=>new p(...Ie(n.deps))}return u}function Tu(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Fa(n,r){for(const s of n)Array.isArray(s)?Fa(s,r):s&&He(s)?Fa(s.\u0275providers,r):r(s)}class Ig{}class kd{}class qc{resolveComponentFactory(r){throw function Ah(n){const r=Error(`No component factory found for ${W(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Zc=(()=>{class n{}return n.NULL=new qc,n})();function vc(){return Xc(Li(),ht())}function Xc(n,r){return new gu(ui(n,r))}let gu=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=vc,n})();function Cg(n){return n instanceof gu?n.nativeElement:n}class Su{}let wg=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function ay(){const n=ht(),s=Hi(Li().index,n);return(li(s)?s:n)[Vn]}(),n})(),ly=(()=>{class n{}return n.\u0275prov=un({token:n,providedIn:"root",factory:()=>null}),n})();class Tg{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Sg=new Tg("15.2.10"),Jc={},Mh="ngOriginalError";function Ph(n){return n[Mh]}class Ud{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Ph(r);for(;s&&Ph(s);)s=Ph(s);return s||null}}function Of(n){return n.ownerDocument.defaultView}function Mg(n){return n.ownerDocument}function bu(n){return n instanceof Function?n():n}function xf(n,r,s){let u=n.length;for(;;){const p=n.indexOf(r,s);if(-1===p)return p;if(0===p||n.charCodeAt(p-1)<=32){const _=r.length;if(p+_===u||n.charCodeAt(p+_)<=32)return p}s=p+1}}const Rg="ng-template";function Oh(n,r,s){let u=0,p=!0;for(;u<n.length;){let _=n[u++];if("string"==typeof _&&p){const T=n[u++];if(s&&"class"===_&&-1!==xf(T.toLowerCase(),r,0))return!0}else{if(1===_){for(;u<n.length&&"string"==typeof(_=n[u++]);)if(_.toLowerCase()===r)return!0;return!1}"number"==typeof _&&(p=!1)}}return!1}function xg(n){return 4===n.type&&n.value!==Rg}function Ng(n,r,s){return r===(4!==n.type||s?n.value:Rg)}function Nf(n,r,s){let u=4;const p=n.attrs||[],_=function Ff(n){for(let r=0;r<n.length;r++)if(Xr(n[r]))return r;return n.length}(p);let T=!1;for(let R=0;R<r.length;R++){const L=r[R];if("number"!=typeof L){if(!T)if(4&u){if(u=2|1&u,""!==L&&!Ng(n,L,s)||""===L&&1===r.length){if(vl(u))return!1;T=!0}}else{const Q=8&u?L:r[++R];if(8&u&&null!==n.attrs){if(!Oh(n.attrs,Q,s)){if(vl(u))return!1;T=!0}continue}const ve=Bd(8&u?"class":L,p,xg(n),s);if(-1===ve){if(vl(u))return!1;T=!0;continue}if(""!==Q){let Be;Be=ve>_?"":p[ve+1].toLowerCase();const ot=8&u?Be:null;if(ot&&-1!==xf(ot,Q,0)||2&u&&Q!==Be){if(vl(u))return!1;T=!0}}}}else{if(!T&&!vl(u)&&!vl(L))return!1;if(T&&vl(L))continue;T=!1,u=L|1&u}}return vl(u)||T}function vl(n){return 0==(1&n)}function Bd(n,r,s,u){if(null===r)return-1;let p=0;if(u||!s){let _=!1;for(;p<r.length;){const T=r[p];if(T===n)return p;if(3===T||6===T)_=!0;else{if(1===T||2===T){let R=r[++p];for(;"string"==typeof R;)R=r[++p];continue}if(4===T)break;if(0===T){p+=4;continue}}p+=_?1:2}return-1}return function Lg(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const u=n[s];if("number"==typeof u)return-1;if(u===r)return s;s++}return-1}(r,n)}function jd(n,r,s=!1){for(let u=0;u<r.length;u++)if(Nf(n,r[u],s))return!0;return!1}function cy(n,r){e:for(let s=0;s<r.length;s++){const u=r[s];if(n.length===u.length){for(let p=0;p<n.length;p++)if(n[p]!==u[p])continue e;return!0}}return!1}function kf(n,r){return n?":not("+r.trim()+")":r}function Fg(n){let r=n[0],s=1,u=2,p="",_=!1;for(;s<n.length;){let T=n[s];if("string"==typeof T)if(2&u){const R=n[++s];p+="["+T+(R.length>0?'="'+R+'"':"")+"]"}else 8&u?p+="."+T:4&u&&(p+=" "+T);else""!==p&&!vl(T)&&(r+=kf(_,p),p=""),u=T,_=_||!vl(u);s++}return""!==p&&(r+=kf(_,p)),r}const Ir={};function kg(n){Vf(Nn(),ht(),ci()+n,!1)}function Vf(n,r,s,u){if(!u)if(3==(3&r[Mn])){const _=n.preOrderCheckHooks;null!==_&&zt(r,_,s)}else{const _=n.preOrderHooks;null!==_&&lt(r,_,0,s)}Ji(s)}function Nh(n,r=null,s=null,u){const p=jg(n,r,s,u);return p.resolveInjectorInitializers(),p}function jg(n,r=null,s=null,u,p=new Set){const _=[s||Bt,sy(n)];return u=u||("object"==typeof n?void 0:W(n)),new bh(_,r||mc(),u||null,p)}let Au=(()=>{class n{static create(s,u){if(Array.isArray(s))return Nh({name:""},u,s,"");{const p=s.name??"";return Nh({name:p},s.parent,s.providers,p)}}}return n.THROW_IF_NOT_FOUND=Qn,n.NULL=new fg,n.\u0275prov=un({token:n,providedIn:"any",factory:()=>er(Wc)}),n.__NG_ELEMENT_ID__=-1,n})();function Mu(n,r=nn.Default){const s=ht();return null===s?er(n,r):et(Li(),s,he(n),r)}function id(){throw new Error("invalid")}function zf(n,r){const s=n.contentQueries;if(null!==s)for(let u=0;u<s.length;u+=2){const _=s[u+1];if(-1!==_){const T=n.data[_];Ka(s[u]),T.contentQueries(2,r[_],_)}}}function Ul(n,r,s,u,p,_,T,R,L,Q,ae){const ve=r.blueprint.slice();return ve[Mr]=p,ve[Mn]=76|u,(null!==ae||n&&1024&n[Mn])&&(ve[Mn]|=1024),Po(ve),ve[cn]=ve[Ds]=n,ve[wr]=s,ve[Yi]=T||n&&n[Yi],ve[Vn]=R||n&&n[Vn],ve[Bn]=L||n&&n[Bn]||null,ve[Ki]=Q||n&&n[Ki]||null,ve[lr]=_,ve[Vt]=function Iu(){return uu++}(),ve[jt]=ae,ve[_e]=2==r.type?n[_e]:ve,ve}function Ic(n,r,s,u,p){let _=n.data[r];if(null===_)_=function Qf(n,r,s,u,p){const _=wa(),T=co(),L=n.data[r]=function Xg(n,r,s,u,p,_){return{type:s,index:u,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?_:_&&_.parent,s,r,u,p);return null===n.firstChild&&(n.firstChild=L),null!==_&&(T?null==_.child&&null!==L.parent&&(_.child=L):null===_.next&&(_.next=L,L.prev=_)),L}(n,r,s,u,p),function za(){return Ln.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=s,_.value=u,_.attrs=p;const T=function $i(){const n=Ln.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();_.injectorIndex=null===T?-1:T.injectorIndex}return Ss(_,!0),_}function Cc(n,r,s,u){if(0===s)return-1;const p=r.length;for(let _=0;_<s;_++)r.push(u),n.blueprint.push(u),n.data.push(null);return p}function qf(n,r,s){Qs(r);try{const u=n.viewQuery;null!==u&&hp(1,u,s);const p=n.template;null!==p&&qg(n,r,p,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&zf(n,r),n.staticViewQueries&&hp(2,n.viewQuery,s);const _=n.components;null!==_&&function Yf(n,r){for(let s=0;s<r.length;s++)nm(n,r[s])}(r,_)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{r[Mn]&=-5,ha()}}function sd(n,r,s,u){const p=r[Mn];if(128!=(128&p)){Qs(r);try{Po(r),function Ta(n){return Ln.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&qg(n,r,s,2,u);const T=3==(3&p);if(T){const Q=n.preOrderCheckHooks;null!==Q&&zt(r,Q,null)}else{const Q=n.preOrderHooks;null!==Q&&lt(r,Q,0,null),M(r,0)}if(function up(n){for(let r=Ht(n);null!==r;r=Dn(r)){if(!r[ai])continue;const s=r[_i];for(let u=0;u<s.length;u++){const p=s[u];512&p[Mn]||Oo(p[cn],1),p[Mn]|=512}}}(r),function Cy(n){for(let r=Ht(n);null!==r;r=Dn(r))for(let s=Qr;s<r.length;s++){const u=r[s],p=u[Rt];Ts(u)&&sd(p,u,p.template,u[wr])}}(r),null!==n.contentQueries&&zf(n,r),T){const Q=n.contentCheckHooks;null!==Q&&zt(r,Q)}else{const Q=n.contentHooks;null!==Q&&lt(r,Q,1),M(r,1)}!function Wf(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let u=0;u<s.length;u++){const p=s[u];if(p<0)Ji(~p);else{const _=p,T=s[++u],R=s[++u];bi(T,_),R(2,r[_])}}}finally{Ji(-1)}}(n,r);const R=n.components;null!==R&&function Kf(n,r){for(let s=0;s<r.length;s++)cp(n,r[s])}(r,R);const L=n.viewQuery;if(null!==L&&hp(2,L,u),T){const Q=n.viewCheckHooks;null!==Q&&zt(r,Q)}else{const Q=n.viewHooks;null!==Q&&lt(r,Q,2),M(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[Mn]&=-41,512&r[Mn]&&(r[Mn]&=-513,Oo(r[cn],-1))}finally{ha()}}}function qg(n,r,s,u,p){const _=ci(),T=2&u;try{Ji(-1),T&&r.length>dn&&Vf(n,r,dn,!1),vi(T?2:0,p),s(u,p)}finally{Ji(_),vi(T?3:1,p)}}function zd(n,r,s){if(Is(r)){const p=r.directiveEnd;for(let _=r.directiveStart;_<p;_++){const T=n.data[_];T.contentQueries&&T.contentQueries(1,s[_],_)}}}function od(n,r,s){tt()&&(function sp(n,r,s,u){const p=s.directiveStart,_=s.directiveEnd;Gs(s)&&function Iy(n,r,s){const u=ui(r,n),p=Zf(s),_=n[Yi],T=qd(n,Ul(n,p,null,s.onPush?32:16,u,r,_,_.createRenderer(u,s),null,null,null));n[r.index]=T}(r,s,n.data[p+s.componentOffset]),n.firstCreatePass||Pa(s,r),Pi(u,r);const T=s.initialInputs;for(let R=p;R<_;R++){const L=n.data[R],Q=Zs(r,n,R,s);Pi(Q,r),null!==T&&ap(0,R-p,Q,L,0,T),hr(L)&&(Hi(s.index,r)[wr]=Zs(r,n,R,s))}}(n,r,s,ui(s,r)),64==(64&s.flags)&&wc(n,r,s))}function Kd(n,r,s=ui){const u=r.localNames;if(null!==u){let p=r.index+1;for(let _=0;_<u.length;_+=2){const T=u[_+1],R=-1===T?s(r,n):n[T];n[p++]=R}}}function Zf(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Ku(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Ku(n,r,s,u,p,_,T,R,L,Q){const ae=dn+u,ve=ae+p,Be=function Xf(n,r){const s=[];for(let u=0;u<r;u++)s.push(u<n?null:Ir);return s}(ae,ve),ot="function"==typeof Q?Q():Q;return Be[Rt]={type:n,blueprint:Be,template:s,queries:null,viewQuery:R,declTNode:r,data:Be.slice().fill(null,ae),bindingStartIndex:ae,expandoStartIndex:ve,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:L,consts:ot,incompleteFirstPass:!1}}function Zg(n,r,s,u){const p=rm(r);null===s?p.push(u):(p.push(s),n.firstCreatePass&&im(n).push(u,p.length-1))}function Jf(n,r,s,u){for(let p in n)if(n.hasOwnProperty(p)){s=null===s?{}:s;const _=n[p];null===u?Jg(s,r,p,_):u.hasOwnProperty(p)&&Jg(s,r,u[p],_)}return s}function Jg(n,r,s,u){n.hasOwnProperty(s)?n[s].push(r,u):n[s]=[r,u]}function Wa(n,r,s,u,p,_,T,R){const L=ui(r,s);let ae,Q=r.inputs;!R&&null!=Q&&(ae=Q[u])?(Jd(n,s,ae,u,p),Gs(r)&&function Ey(n,r){const s=Hi(r,n);16&s[Mn]||(s[Mn]|=32)}(s,r.index)):3&r.type&&(u=function vy(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),p=null!=T?T(p,r.value||"",u):p,_.setProperty(L,u,p))}function Yd(n,r,s,u){if(tt()){const p=null===u?null:{"":-1},_=function op(n,r){const s=n.directiveRegistry;let u=null,p=null;if(s)for(let _=0;_<s.length;_++){const T=s[_];if(jd(r,T.selectors,!1))if(u||(u=[]),hr(T))if(null!==T.findHostDirectiveDefs){const R=[];p=p||new Map,T.findHostDirectiveDefs(T,R,p),u.unshift(...R,T),Qu(n,r,R.length)}else u.unshift(T),Qu(n,r,0);else p=p||new Map,T.findHostDirectiveDefs?.(T,u,p),u.push(T)}return null===u?null:[u,p]}(n,s);let T,R;null===_?T=R=null:[T,R]=_,null!==T&&np(n,r,s,T,p,R),p&&function ad(n,r,s){if(r){const u=n.localNames=[];for(let p=0;p<r.length;p+=2){const _=s[r[p+1]];if(null==_)throw new ke(-301,!1);u.push(r[p],_)}}}(s,u,p)}s.mergedAttrs=_r(s.mergedAttrs,s.attrs)}function np(n,r,s,u,p,_){for(let Q=0;Q<u.length;Q++)ru(Pa(s,r),n,u[Q].type);!function ld(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}(s,n.data.length,u.length);for(let Q=0;Q<u.length;Q++){const ae=u[Q];ae.providersResolver&&ae.providersResolver(ae)}let T=!1,R=!1,L=Cc(n,r,u.length,null);for(let Q=0;Q<u.length;Q++){const ae=u[Q];s.mergedAttrs=_r(s.mergedAttrs,ae.hostAttrs),Dy(n,s,r,L,ae),em(L,ae,p),null!==ae.contentQueries&&(s.flags|=4),(null!==ae.hostBindings||null!==ae.hostAttrs||0!==ae.hostVars)&&(s.flags|=64);const ve=ae.type.prototype;!T&&(ve.ngOnChanges||ve.ngOnInit||ve.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(s.index),T=!0),!R&&(ve.ngOnChanges||ve.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(s.index),R=!0),L++}!function ep(n,r,s){const p=r.directiveEnd,_=n.data,T=r.attrs,R=[];let L=null,Q=null;for(let ae=r.directiveStart;ae<p;ae++){const ve=_[ae],Be=s?s.get(ve):null,wt=Be?Be.outputs:null;L=Jf(ve.inputs,ae,L,Be?Be.inputs:null),Q=Jf(ve.outputs,ae,Q,wt);const Kt=null===L||null===T||xg(r)?null:lp(L,ae,T);R.push(Kt)}null!==L&&(L.hasOwnProperty("class")&&(r.flags|=8),L.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=R,r.inputs=L,r.outputs=Q}(n,s,_)}function wc(n,r,s){const u=s.directiveStart,p=s.directiveEnd,_=s.index,T=function Ko(){return Ln.lFrame.currentDirectiveIndex}();try{Ji(_);for(let R=u;R<p;R++){const L=n.data[R],Q=r[R];Ys(R),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&Yu(L,Q)}}finally{Ji(-1),Ys(T)}}function Yu(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Qu(n,r,s){r.componentOffset=s,(n.components??(n.components=[])).push(r.index)}function em(n,r,s){if(s){if(r.exportAs)for(let u=0;u<r.exportAs.length;u++)s[r.exportAs[u]]=n;hr(r)&&(s[""]=n)}}function Dy(n,r,s,u,p){n.data[u]=p;const _=p.factory||(p.factory=lo(p.type)),T=new ye(_,hr(p),Mu);n.blueprint[u]=T,s[u]=T,function rp(n,r,s,u,p){const _=p.hostBindings;if(_){let T=n.hostBindingOpCodes;null===T&&(T=n.hostBindingOpCodes=[]);const R=~r.index;(function ip(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(T)!=R&&T.push(R),T.push(s,u,_)}}(n,r,u,Cc(n,s,p.hostVars,Ir),p)}function Vl(n,r,s,u,p,_){const T=ui(n,r);!function Qd(n,r,s,u,p,_,T){if(null==_)n.removeAttribute(r,p,s);else{const R=null==T?$e(_):T(_,u||"",p);n.setAttribute(r,p,R,s)}}(r[Vn],T,_,n.value,s,u,p)}function ap(n,r,s,u,p,_){const T=_[r];if(null!==T){const R=u.setInput;for(let L=0;L<T.length;){const Q=T[L++],ae=T[L++],ve=T[L++];null!==R?u.setInput(s,ve,Q,ae):s[ae]=ve}}}function lp(n,r,s){let u=null,p=0;for(;p<s.length;){const _=s[p];if(0!==_)if(5!==_){if("number"==typeof _)break;if(n.hasOwnProperty(_)){null===u&&(u=[]);const T=n[_];for(let R=0;R<T.length;R+=2)if(T[R]===r){u.push(_,T[R+1],s[p+1]);break}}p+=2}else p+=2;else p+=4}return u}function tm(n,r,s,u){return[n,!0,!1,r,null,0,u,s,null,null]}function cp(n,r){const s=Hi(r,n);if(Ts(s)){const u=s[Rt];48&s[Mn]?sd(u,s,u.template,s[wr]):s[fn]>0&&dp(s)}}function dp(n){for(let u=Ht(n);null!==u;u=Dn(u))for(let p=Qr;p<u.length;p++){const _=u[p];if(Ts(_))if(512&_[Mn]){const T=_[Rt];sd(T,_,T.template,_[wr])}else _[fn]>0&&dp(_)}const s=n[Rt].components;if(null!==s)for(let u=0;u<s.length;u++){const p=Hi(s[u],n);Ts(p)&&p[fn]>0&&dp(p)}}function nm(n,r){const s=Hi(r,n),u=s[Rt];(function wy(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(u,s),qf(u,s,s[wr])}function qd(n,r){return n[Rn]?n[Lr][Cn]=r:n[Rn]=r,n[Lr]=r,r}function Zd(n){for(;n;){n[Mn]|=32;const r=be(n);if(yo(n)&&!r)return n;n=r}return null}function Xd(n,r,s,u=!0){const p=r[Yi];p.begin&&p.begin();try{sd(n,r,n.template,s)}catch(T){throw u&&$h(r,T),T}finally{p.end&&p.end()}}function hp(n,r,s){Ka(0),r(n,s)}function rm(n){return n[mr]||(n[mr]=[])}function im(n){return n.cleanup||(n.cleanup=[])}function $h(n,r){const s=n[Ki],u=s?s.get(Ud,null):null;u&&u.handleError(r)}function Jd(n,r,s,u,p){for(let _=0;_<s.length;){const T=s[_++],R=s[_++],L=r[T],Q=n.data[T];null!==Q.setInput?Q.setInput(L,p,u,R):L[R]=p}}function Pu(n,r,s){const u=$o(r,n);!function Er(n,r,s){n.setValue(r,s)}(n[Vn],u,s)}function ud(n,r,s){let u=s?n.styles:null,p=s?n.classes:null,_=0;if(null!==r)for(let T=0;T<r.length;T++){const R=r[T];"number"==typeof R?_=R:1==_?p=ee(p,R):2==_&&(u=ee(u,R+": "+r[++T]+";"))}s?n.styles=u:n.stylesWithoutHost=u,s?n.classes=p:n.classesWithoutHost=p}function Gh(n,r,s,u,p=!1){for(;null!==s;){const _=r[s.index];if(null!==_&&u.push($r(_)),En(_))for(let R=Qr;R<_.length;R++){const L=_[R],Q=L[Rt].firstChild;null!==Q&&Gh(L[Rt],L,Q,u)}const T=s.type;if(8&T)Gh(n,r,s.child,u);else if(32&T){const R=ne(s,r);let L;for(;L=R();)u.push(L)}else if(16&T){const R=sc(r,s);if(Array.isArray(R))u.push(...R);else{const L=be(r[_e]);Gh(L[Rt],L,R,u,!0)}}s=p?s.projectionNext:s.next}return u}class Tc{get rootNodes(){const r=this._lView,s=r[Rt];return Gh(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[wr]}set context(r){this._lView[wr]=r}get destroyed(){return 128==(128&this._lView[Mn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[cn];if(En(r)){const s=r[Tr],u=s?s.indexOf(this):-1;u>-1&&(La(r,u),ce(s,u))}this._attachedToViewContainer=!1}ea(this._lView[Rt],this._lView)}onDestroy(r){Zg(this._lView[Rt],this._lView,null,r)}markForCheck(){Zd(this._cdRefInjectingView||this._lView)}detach(){this._lView[Mn]&=-65}reattach(){this._lView[Mn]|=64}detectChanges(){Xd(this._lView[Rt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ke(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function eo(n,r){ds(n,r,r[Vn],2,null,null)}(this._lView[Rt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ke(902,!1);this._appRef=r}}class sm extends Tc{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Xd(r[Rt],r,r[wr],!1)}checkNoChanges(){}get context(){return null}}class Wh extends Zc{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=en(r);return new eh(s,this.ngModule)}}function fp(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class pp{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,u){u=Qe(u);const p=this.injector.get(r,Jc,u);return p!==Jc||s===Jc?p:this.parentInjector.get(r,s,u)}}class eh extends kd{get inputs(){return fp(this.componentDef.inputs)}get outputs(){return fp(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Uf(n){return n.map(Fg).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,u,p){let _=(p=p||this.ngModule)instanceof yc?p:p?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const T=_?new pp(r,_):r,R=T.get(Su,null);if(null===R)throw new ke(407,!1);const L=T.get(ly,null),Q=R.createRenderer(null,this.componentDef),ae=this.componentDef.selectors[0][0]||"div",ve=u?function _y(n,r,s){return n.selectRootElement(r,s===Ne.ShadowDom)}(Q,u,this.componentDef.encapsulation):An(Q,ae,function Sy(n){const r=n.toLowerCase();return"svg"===r?uo:"math"===r?"math":null}(ae)),Be=this.componentDef.onPush?288:272,ot=Ku(0,null,null,1,0,null,null,null,null,null),wt=Ul(null,ot,null,Be,null,null,R,Q,L,T,null);let Kt,pn;Qs(wt);try{const Pn=this.componentDef;let fr,Ut=null;Pn.findHostDirectiveDefs?(fr=[],Ut=new Map,Pn.findHostDirectiveDefs(Pn,fr,Ut),fr.push(Pn)):fr=[Pn];const Or=function mp(n,r){const s=n[Rt],u=dn;return n[u]=r,Ic(s,u,2,"#host",null)}(wt,ve),io=function by(n,r,s,u,p,_,T,R){const L=p[Rt];!function yp(n,r,s,u){for(const p of n)r.mergedAttrs=_r(r.mergedAttrs,p.hostAttrs);null!==r.mergedAttrs&&(ud(r,r.mergedAttrs,!0),null!==s&&$u(u,s,r))}(u,n,r,T);const Q=_.createRenderer(r,s),ae=Ul(p,Zf(s),null,s.onPush?32:16,p[n.index],n,_,Q,R||null,null,null);return L.firstCreatePass&&Qu(L,n,u.length-1),qd(p,ae),p[n.index]=ae}(Or,ve,Pn,fr,wt,R,Q);pn=Go(ot,dn),ve&&function vp(n,r,s,u){if(u)Jt(n,s,["ng-version",Sg.full]);else{const{attrs:p,classes:_}=function dy(n){const r=[],s=[];let u=1,p=2;for(;u<n.length;){let _=n[u];if("string"==typeof _)2===p?""!==_&&r.push(_,n[++u]):8===p&&s.push(_);else{if(!vl(p))break;p=_}u++}return{attrs:r,classes:s}}(r.selectors[0]);p&&Jt(n,s,p),_&&_.length>0&&yh(n,s,_.join(" "))}}(Q,Pn,ve,u),void 0!==s&&function cd(n,r,s){const u=n.projection=[];for(let p=0;p<r.length;p++){const _=s[p];u.push(null!=_?Array.from(_):null)}}(pn,this.ngContentSelectors,s),Kt=function _p(n,r,s,u,p,_){const T=Li(),R=p[Rt],L=ui(T,p);np(R,p,T,s,null,u);for(let ae=0;ae<s.length;ae++)Pi(Zs(p,R,T.directiveStart+ae,T),p);wc(R,p,T),L&&Pi(L,p);const Q=Zs(p,R,T.directiveStart+T.componentOffset,T);if(n[wr]=p[wr]=Q,null!==_)for(const ae of _)ae(Q,r);return zd(R,T,n),Q}(io,Pn,fr,Ut,wt,[om]),qf(ot,wt,null)}finally{ha()}return new gp(this.componentType,Kt,Xc(pn,wt),wt,pn)}}class gp extends Ig{constructor(r,s,u,p,_){super(),this.location=u,this._rootLView=p,this._tNode=_,this.instance=s,this.hostView=this.changeDetectorRef=new sm(p),this.componentType=r}setInput(r,s){const u=this._tNode.inputs;let p;if(null!==u&&(p=u[r])){const _=this._rootLView;Jd(_[Rt],_,p,r,s),Zd(Hi(this._tNode.index,_))}}get injector(){return new Ja(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function om(){const n=Li();qa(ht()[Rt],n)}function Ep(n){let r=function zh(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const u=[n];for(;r;){let p;if(hr(n))p=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ke(903,!1);p=r.\u0275dir}if(p){if(s){u.push(p);const T=n;T.inputs=eu(n.inputs),T.declaredInputs=eu(n.declaredInputs),T.outputs=eu(n.outputs);const R=p.hostBindings;R&&Cp(n,R);const L=p.viewQuery,Q=p.contentQueries;if(L&&Ip(n,L),Q&&Ay(n,Q),X(n.inputs,p.inputs),X(n.declaredInputs,p.declaredInputs),X(n.outputs,p.outputs),hr(p)&&p.data.animation){const ae=n.data;ae.animation=(ae.animation||[]).concat(p.data.animation)}}const _=p.features;if(_)for(let T=0;T<_.length;T++){const R=_[T];R&&R.ngInherit&&R(n),R===Ep&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Dp(n){let r=0,s=null;for(let u=n.length-1;u>=0;u--){const p=n[u];p.hostVars=r+=p.hostVars,p.hostAttrs=_r(p.hostAttrs,s=_r(s,p.hostAttrs))}}(u)}function eu(n){return n===Mt?{}:n===Bt?[]:n}function Ip(n,r){const s=n.viewQuery;n.viewQuery=s?(u,p)=>{r(u,p),s(u,p)}:r}function Ay(n,r){const s=n.contentQueries;n.contentQueries=s?(u,p,_)=>{r(u,p,_),s(u,p,_)}:r}function Cp(n,r){const s=n.hostBindings;n.hostBindings=s?(u,p)=>{r(u,p),s(u,p)}:r}function dd(n){return!!Sp(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Sp(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function mu(n,r,s){return n[r]=s}function Sc(n,r){return n[r]}function ra(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Ou(n,r,s,u){const p=ra(n,r,s);return ra(n,r+1,u)||p}function Qh(n,r,s,u,p){const _=Ou(n,r,s,u);return ra(n,r+2,p)||_}function El(n,r,s,u,p,_){const T=Ou(n,r,s,u);return Ou(n,r+2,p,_)||T}function Ap(n,r,s,u){const p=ht();return ra(p,zo(),r)&&(Nn(),Vl(Gr(),p,n,r,s,u)),Ap}function qu(n,r,s,u){return ra(n,zo(),s)?r+$e(s)+u:Ir}function Zu(n,r,s,u,p,_){const R=Ou(n,ri(),s,p);return ms(2),R?r+$e(s)+u+$e(p)+_:Ir}function fd(n,r,s,u,p,_,T,R){const Q=Qh(n,ri(),s,p,T);return ms(3),Q?r+$e(s)+u+$e(p)+_+$e(T)+R:Ir}function Op(n,r,s,u,p,_,T,R){const L=ht(),Q=Nn(),ae=n+dn,ve=Q.firstCreatePass?function W_(n,r,s,u,p,_,T,R,L){const Q=r.consts,ae=Ic(r,n,4,T||null,ks(Q,R));Yd(r,s,ae,ks(Q,L)),qa(r,ae);const ve=ae.tView=Ku(2,ae,u,p,_,r.directiveRegistry,r.pipeRegistry,null,r.schemas,Q);return null!==r.queries&&(r.queries.template(r,ae),ve.queries=r.queries.embeddedTView(ae)),ae}(ae,Q,L,r,s,u,p,_,T):Q.data[ae];Ss(ve,!1);const Be=L[Vn].createComment("");ta(Q,L,Be,ve),Pi(Be,L),qd(L,L[ae]=tm(Be,L,Be,ve)),ss(ve)&&od(Q,L,ve),null!=T&&Kd(L,ve,R)}function th(n){return Sr(function da(){return Ln.lFrame.contextLView}(),dn+n)}function Rp(n,r,s){const u=ht();return ra(u,zo(),r)&&Wa(Nn(),Gr(),u,n,r,u[Vn],s,!1),Rp}function fm(n,r,s,u,p){const T=p?"class":"style";Jd(n,s,r.inputs[T],T,u)}function qh(n,r,s,u){const p=ht(),_=Nn(),T=dn+n,R=p[Vn],L=_.firstCreatePass?function Ly(n,r,s,u,p,_){const T=r.consts,L=Ic(r,n,2,u,ks(T,p));return Yd(r,s,L,ks(T,_)),null!==L.attrs&&ud(L,L.attrs,!1),null!==L.mergedAttrs&&ud(L,L.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,L),L}(T,_,p,r,s,u):_.data[T],Q=p[T]=An(R,r,function an(){return Ln.lFrame.currentNamespace}()),ae=ss(L);return Ss(L,!0),$u(R,Q,L),32!=(32&L.flags)&&ta(_,p,Q,L),0===function B(){return Ln.lFrame.elementDepthCount}()&&Pi(Q,p),function F(){Ln.lFrame.elementDepthCount++}(),ae&&(od(_,p,L),zd(_,L,p)),null!==u&&Kd(p,L),qh}function Zh(){let n=Li();co()?ca():(n=n.parent,Ss(n,!1));const r=n;!function oe(){Ln.lFrame.elementDepthCount--}();const s=Nn();return s.firstCreatePass&&(qa(s,n),Is(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Wr(n){return 0!=(8&n.flags)}(r)&&fm(s,r,ht(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function tr(n){return 0!=(16&n.flags)}(r)&&fm(s,r,ht(),r.stylesWithoutHost,!1),Zh}function xp(n,r,s,u){return qh(n,r,s,u),Zh(),xp}function nh(n,r,s){const u=ht(),p=Nn(),_=n+dn,T=p.firstCreatePass?function Fy(n,r,s,u,p){const _=r.consts,T=ks(_,u),R=Ic(r,n,8,"ng-container",T);return null!==T&&ud(R,T,!0),Yd(r,s,R,ks(_,p)),null!==r.queries&&r.queries.elementStart(r,R),R}(_,p,u,r,s):p.data[_];Ss(T,!0);const R=u[_]=u[Vn].createComment("");return ta(p,u,R,T),Pi(R,u),ss(T)&&(od(p,u,T),zd(p,T,u)),null!=s&&Kd(u,T),nh}function gd(){let n=Li();const r=Nn();return co()?ca():(n=n.parent,Ss(n,!1)),r.firstCreatePass&&(qa(r,n),Is(n)&&r.queries.elementEnd(n)),gd}function Xh(n,r,s){return nh(n,r,s),gd(),Xh}function Jh(){return ht()}function rh(n){return!!n&&"function"==typeof n.then}function ef(n){return!!n&&"function"==typeof n.subscribe}const ih=ef;function sh(n,r,s,u){const p=ht(),_=Nn(),T=Li();return function nf(n,r,s,u,p,_,T){const R=ss(u),Q=n.firstCreatePass&&im(n),ae=r[wr],ve=rm(r);let Be=!0;if(3&u.type||T){const Kt=ui(u,r),pn=T?T(Kt):Kt,Pn=ve.length,fr=T?Or=>T($r(Or[u.index])):u.index;let Ut=null;if(!T&&R&&(Ut=function tf(n,r,s,u){const p=n.cleanup;if(null!=p)for(let _=0;_<p.length-1;_+=2){const T=p[_];if(T===s&&p[_+1]===u){const R=r[mr],L=p[_+2];return R.length>L?R[L]:null}"string"==typeof T&&(_+=2)}return null}(n,r,p,u.index)),null!==Ut)(Ut.__ngLastListenerFn__||Ut).__ngNextListenerFn__=_,Ut.__ngLastListenerFn__=_,Be=!1;else{_=Lp(u,r,ae,_,!1);const Or=s.listen(pn,p,_);ve.push(_,Or),Q&&Q.push(p,fr,Pn,Pn+1)}}else _=Lp(u,r,ae,_,!1);const ot=u.outputs;let wt;if(Be&&null!==ot&&(wt=ot[p])){const Kt=wt.length;if(Kt)for(let pn=0;pn<Kt;pn+=2){const io=r[wt[pn]][wt[pn+1]].subscribe(_),Vo=ve.length;ve.push(_,io),Q&&Q.push(p,u.index,Vo,-(Vo+1))}}}(_,p,p[Vn],T,n,r,u),sh}function rf(n,r,s,u){try{return vi(6,r,s),!1!==s(u)}catch(p){return $h(n,p),!1}finally{vi(7,r,s)}}function Lp(n,r,s,u,p){return function _(T){if(T===Function)return u;Zd(n.componentOffset>-1?Hi(n.index,r):r);let L=rf(r,s,u,T),Q=_.__ngNextListenerFn__;for(;Q;)L=rf(r,s,Q,T)&&L,Q=Q.__ngNextListenerFn__;return p&&!1===L&&(T.preventDefault(),T.returnValue=!1),L}}function Pc(n=1){return function Xi(n){return(Ln.lFrame.contextLView=function po(n,r){for(;n>0;)r=r[Ds],n--;return r}(n,Ln.lFrame.contextLView))[wr]}(n)}function Fp(n,r){let s=null;const u=function Lf(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(n);for(let p=0;p<r.length;p++){const _=r[p];if("*"!==_){if(null===u?jd(n,_,!0):cy(u,_))return p}else s=p}return s}function pm(n){const r=ht()[_e][lr];if(!r.projection){const u=r.projection=Ve(n?n.length:1,null),p=u.slice();let _=r.child;for(;null!==_;){const T=n?Fp(_,n):0;null!==T&&(p[T]?p[T].projectionNext=_:u[T]=_,p[T]=_),_=_.next}}}function gm(n,r=0,s){const u=ht(),p=Nn(),_=Ic(p,dn+n,16,null,s||null);null===_.projection&&(_.projection=r),ca(),32!=(32&_.flags)&&function Ad(n,r,s){mh(r[Vn],0,r,s,ic(n,s,r),Vi(s.parent||r[lr],s,r))}(p,u,_)}function kp(n,r,s){return oh(n,"",r,"",s),kp}function oh(n,r,s,u,p){const _=ht(),T=qu(_,r,s,u);return T!==Ir&&Wa(Nn(),Gr(),_,n,T,_[Vn],p,!1),oh}function Vp(n,r){return n<<17|r<<2}function Si(n){return n>>17&32767}function ro(n){return 2|n}function Xu(n){return(131068&n)>>2}function Bp(n,r){return-131069&n|r<<2}function af(n){return 1|n}function Uy(n,r,s,u,p){const _=n[s+1],T=null===r;let R=u?Si(_):Xu(_),L=!1;for(;0!==R&&(!1===L||T);){const ae=n[R+1];q_(n[R],r)&&(L=!0,n[R+1]=u?af(ae):ro(ae)),R=u?Si(ae):Xu(ae)}L&&(n[s+1]=u?ro(_):af(_))}function q_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&ki(n,r)>=0}const sa={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jp(n){return n.substring(sa.key,sa.keyEnd)}function Oc(n){return n.substring(sa.value,sa.valueEnd)}function Vy(n,r){const s=sa.textEnd;return s===r?-1:(r=sa.keyEnd=function Cm(n,r,s){for(;r<s&&n.charCodeAt(r)>32;)r++;return r}(n,sa.key=r,s),yd(n,r,s))}function uf(n,r){const s=sa.textEnd;let u=sa.key=yd(n,r,s);return s===u?-1:(u=sa.keyEnd=function wm(n,r,s){let u;for(;r<s&&(45===(u=n.charCodeAt(r))||95===u||(-33&u)>=65&&(-33&u)<=90||u>=48&&u<=57);)r++;return r}(n,u,s),u=ah(n,u,s),u=sa.value=yd(n,u,s),u=sa.valueEnd=function By(n,r,s){let u=-1,p=-1,_=-1,T=r,R=T;for(;T<s;){const L=n.charCodeAt(T++);if(59===L)return R;34===L||39===L?R=T=Rc(n,L,T,s):r===T-4&&85===_&&82===p&&76===u&&40===L?R=T=Rc(n,41,T,s):L>32&&(R=T),_=p,p=u,u=-33&L}return R}(n,u,s),ah(n,u,s))}function Im(n){sa.key=0,sa.keyEnd=0,sa.value=0,sa.valueEnd=0,sa.textEnd=n.length}function yd(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function ah(n,r,s,u){return(r=yd(n,r,s))<s&&r++,r}function Rc(n,r,s,u){let p=-1,_=s;for(;_<u;){const T=n.charCodeAt(_++);if(T==r&&92!==p)return _;p=92==T&&92===p?0:T}throw new Error}function xc(n,r,s){return Bl(n,r,s,!1),xc}function cf(n,r){return Bl(n,r,null,!0),cf}function Dl(n){jl(zp,jy,n,!1)}function jy(n,r){for(let s=function lf(n){return Im(n),uf(n,yd(n,0,sa.textEnd))}(r);s>=0;s=uf(r,s))zp(n,jp(r),Oc(r))}function Sm(n){jl(Kp,yu,n,!0)}function yu(n,r){for(let s=function md(n){return Im(n),Vy(n,yd(n,0,sa.textEnd))}(r);s>=0;s=Vy(r,s))kr(n,jp(r),!0)}function Bl(n,r,s,u){const p=ht(),_=Nn(),T=ms(2);_.firstUpdatePass&&Ju(_,n,T,u),r!==Ir&&ra(p,T,r)&&lh(_,_.data[ci()],p,p[Vn],n,p[T+1]=function uh(n,r){return null==n||""===n||("string"==typeof r?n+=r:"object"==typeof n&&(n=W(Rs(n)))),n}(r,s),u,T)}function jl(n,r,s,u){const p=Nn(),_=ms(2);p.firstUpdatePass&&Ju(p,null,_,u);const T=ht();if(s!==Ir&&ra(T,_,s)){const R=p.data[ci()];if(Mm(R,u)&&!Hp(p,_)){let L=u?R.classesWithoutHost:R.stylesWithoutHost;null!==L&&(s=ee(L,s||"")),fm(p,R,T,s,u)}else!function Hy(n,r,s,u,p,_,T,R){p===Ir&&(p=Bt);let L=0,Q=0,ae=0<p.length?p[0]:null,ve=0<_.length?_[0]:null;for(;null!==ae||null!==ve;){const Be=L<p.length?p[L+1]:void 0,ot=Q<_.length?_[Q+1]:void 0;let Kt,wt=null;ae===ve?(L+=2,Q+=2,Be!==ot&&(wt=ve,Kt=ot)):null===ve||null!==ae&&ae<ve?(L+=2,wt=ae):(Q+=2,wt=ve,Kt=ot),null!==wt&&lh(n,r,s,u,wt,Kt,T,R),ae=L<p.length?p[L]:null,ve=Q<_.length?_[Q]:null}}(p,R,T,T[Vn],T[_+1],T[_+1]=function df(n,r,s){if(null==s||""===s)return Bt;const u=[],p=Rs(s);if(Array.isArray(p))for(let _=0;_<p.length;_++)n(u,p[_],!0);else if("object"==typeof p)for(const _ in p)p.hasOwnProperty(_)&&n(u,_,p[_]);else"string"==typeof p&&r(u,p);return u}(n,r,s),u,_)}}function Hp(n,r){return r>=n.expandoStartIndex}function Ju(n,r,s,u){const p=n.data;if(null===p[s+1]){const _=p[ci()],T=Hp(n,s);Mm(_,u)&&null===r&&!T&&(r=!1),r=function bm(n,r,s,u){const p=Zi(n);let _=u?r.residualClasses:r.residualStyles;if(null===p)0===(u?r.classBindings:r.styleBindings)&&(s=ec(s=Wp(null,n,r,s,u),r.attrs,u),_=null);else{const T=r.directiveStylingLast;if(-1===T||n[T]!==p)if(s=Wp(p,n,r,s,u),null===_){let L=function Am(n,r,s){const u=s?r.classBindings:r.styleBindings;if(0!==Xu(u))return n[Si(u)]}(n,r,u);void 0!==L&&Array.isArray(L)&&(L=Wp(null,n,r,L[1],u),L=ec(L,r.attrs,u),function $p(n,r,s,u){n[Si(s?r.classBindings:r.styleBindings)]=u}(n,r,u,L))}else _=function Gp(n,r,s){let u;const p=r.directiveEnd;for(let _=1+r.directiveStylingLast;_<p;_++)u=ec(u,n[_].hostAttrs,s);return ec(u,r.attrs,s)}(n,r,u)}return void 0!==_&&(u?r.residualClasses=_:r.residualStyles=_),s}(p,_,r,u),function Y_(n,r,s,u,p,_){let T=_?r.classBindings:r.styleBindings,R=Si(T),L=Xu(T);n[u]=s;let ae,Q=!1;if(Array.isArray(s)?(ae=s[1],(null===ae||ki(s,ae)>0)&&(Q=!0)):ae=s,p)if(0!==L){const Be=Si(n[R+1]);n[u+1]=Vp(Be,R),0!==Be&&(n[Be+1]=Bp(n[Be+1],u)),n[R+1]=function ky(n,r){return 131071&n|r<<17}(n[R+1],u)}else n[u+1]=Vp(R,0),0!==R&&(n[R+1]=Bp(n[R+1],u)),R=u;else n[u+1]=Vp(L,0),0===R?R=u:n[L+1]=Bp(n[L+1],u),L=u;Q&&(n[u+1]=ro(n[u+1])),Uy(n,ae,u,!0),Uy(n,ae,u,!1),function Q_(n,r,s,u,p){const _=p?n.residualClasses:n.residualStyles;null!=_&&"string"==typeof r&&ki(_,r)>=0&&(s[u+1]=af(s[u+1]))}(r,ae,n,u,_),T=Vp(R,L),_?r.classBindings=T:r.styleBindings=T}(p,_,r,s,T,u)}}function Wp(n,r,s,u,p){let _=null;const T=s.directiveEnd;let R=s.directiveStylingLast;for(-1===R?R=s.directiveStart:R++;R<T&&(_=r[R],u=ec(u,_.hostAttrs,p),_!==n);)R++;return null!==n&&(s.directiveStylingLast=R),u}function ec(n,r,s){const u=s?1:2;let p=-1;if(null!==r)for(let _=0;_<r.length;_++){const T=r[_];"number"==typeof T?p=T:p===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),kr(n,T,!!s||r[++_]))}return void 0===n?null:n}function zp(n,r,s){kr(n,r,Rs(s))}function Kp(n,r,s){const u=String(r);""!==u&&!u.includes(" ")&&kr(n,u,s)}function lh(n,r,s,u,p,_,T,R){if(!(3&r.type))return;const L=n.data,Q=L[R+1],ae=function K_(n){return 1==(1&n)}(Q)?Yp(L,r,s,p,Xu(Q),T):void 0;_d(ae)||(_d(_)||function z_(n){return 2==(2&n)}(Q)&&(_=Yp(L,null,s,p,R,T)),function Xl(n,r,s,u,p){if(r)p?n.addClass(s,u):n.removeClass(s,u);else{let _=-1===u.indexOf("-")?void 0:ko.DashCase;null==p?n.removeStyle(s,u,_):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),_|=ko.Important),n.setStyle(s,u,p,_))}}(u,T,$o(ci(),s),p,_))}function Yp(n,r,s,u,p,_){const T=null===r;let R;for(;p>0;){const L=n[p],Q=Array.isArray(L),ae=Q?L[1]:L,ve=null===ae;let Be=s[p+1];Be===Ir&&(Be=ve?Bt:void 0);let ot=ve?_s(Be,u):ae===u?Be:void 0;if(Q&&!_d(ot)&&(ot=_s(L,u)),_d(ot)&&(R=ot,T))return R;const wt=n[p+1];p=T?Si(wt):Xu(wt)}if(null!==r){let L=_?r.residualClasses:r.residualStyles;null!=L&&(R=_s(L,u))}return R}function _d(n){return void 0!==n}function Mm(n,r){return 0!=(n.flags&(r?8:16))}function vd(n,r=""){const s=ht(),u=Nn(),p=n+dn,_=u.firstCreatePass?Ic(u,p,1,r,null):u.data[p],T=s[p]=function yn(n,r){return n.createText(r)}(s[Vn],r);ta(u,s,T,_),Ss(_,!1)}function Pm(n){return xu("",n,""),Pm}function xu(n,r,s){const u=ht(),p=qu(u,n,r,s);return p!==Ir&&Pu(u,ci(),p),xu}function Om(n,r,s,u,p){const _=ht(),T=Zu(_,n,r,s,u,p);return T!==Ir&&Pu(_,ci(),T),Om}function Rm(n,r,s,u,p,_,T){const R=ht(),L=fd(R,n,r,s,u,p,_,T);return L!==Ir&&Pu(R,ci(),L),Rm}function ch(n,r,s,u,p,_,T,R,L){const Q=ht(),ae=function bc(n,r,s,u,p,_,T,R,L,Q){const ve=El(n,ri(),s,p,T,L);return ms(4),ve?r+$e(s)+u+$e(p)+_+$e(T)+R+$e(L)+Q:Ir}(Q,n,r,s,u,p,_,T,R,L);return ae!==Ir&&Pu(Q,ci(),ae),ch}function Ed(n,r,s,u,p,_,T,R,L,Q,ae,ve,Be){const ot=ht(),wt=function Ru(n,r,s,u,p,_,T,R,L,Q,ae,ve,Be,ot){const wt=ri();let Kt=El(n,wt,s,p,T,L);return Kt=Ou(n,wt+4,ae,Be)||Kt,ms(6),Kt?r+$e(s)+u+$e(p)+_+$e(T)+R+$e(L)+Q+$e(ae)+ve+$e(Be)+ot:Ir}(ot,n,r,s,u,p,_,T,R,L,Q,ae,ve,Be);return wt!==Ir&&Pu(ot,ci(),wt),Ed}function Gy(n,r,s){jl(kr,yu,qu(ht(),n,r,s),!0)}function Lm(n,r,s,u,p){jl(kr,yu,Zu(ht(),n,r,s,u,p),!0)}function hh(n,r,s,u,p,_,T){jl(kr,yu,fd(ht(),n,r,s,u,p,_,T),!0)}function Qp(n,r,s){Dl(qu(ht(),n,r,s))}function Wm(n,r,s){const u=ht();return ra(u,zo(),r)&&Wa(Nn(),Gr(),u,n,r,u[Vn],s,!0),Wm}function Zp(n,r,s){const u=ht();if(ra(u,zo(),r)){const _=Nn(),T=Gr();Wa(_,T,u,n,r,function Hh(n,r,s){return(null===n||hr(n))&&(s=function ji(n){for(;Array.isArray(n);){if("object"==typeof n[yr])return n;n=n[Mr]}return null}(s[r.index])),s[Vn]}(Zi(_.data),T,u),s,!0)}return Zp}const Lc=void 0;var Xy=["en",[["a","p"],["AM","PM"],Lc],[["AM","PM"],Lc,Lc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Lc,"{1} 'at' {0}",Lc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Zy(n){const s=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===u?1:5}];let fh={};function ph(n){const r=function e_(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=zm(r);if(s)return s;const u=r.split("-")[0];if(s=zm(u),s)return s;if("en"===u)return Xy;throw new ke(701,!1)}function Jy(n){return ph(n)[Xn.PluralCase]}function zm(n){return n in fh||(fh[n]=Yn.ng&&Yn.ng.common&&Yn.ng.common.locales&&Yn.ng.common.locales[n]),fh[n]}var Xn=(()=>((Xn=Xn||{})[Xn.LocaleId=0]="LocaleId",Xn[Xn.DayPeriodsFormat=1]="DayPeriodsFormat",Xn[Xn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Xn[Xn.DaysFormat=3]="DaysFormat",Xn[Xn.DaysStandalone=4]="DaysStandalone",Xn[Xn.MonthsFormat=5]="MonthsFormat",Xn[Xn.MonthsStandalone=6]="MonthsStandalone",Xn[Xn.Eras=7]="Eras",Xn[Xn.FirstDayOfWeek=8]="FirstDayOfWeek",Xn[Xn.WeekendRange=9]="WeekendRange",Xn[Xn.DateFormat=10]="DateFormat",Xn[Xn.TimeFormat=11]="TimeFormat",Xn[Xn.DateTimeFormat=12]="DateTimeFormat",Xn[Xn.NumberSymbols=13]="NumberSymbols",Xn[Xn.NumberFormats=14]="NumberFormats",Xn[Xn.CurrencyCode=15]="CurrencyCode",Xn[Xn.CurrencySymbol=16]="CurrencySymbol",Xn[Xn.CurrencyName=17]="CurrencyName",Xn[Xn.Currencies=18]="Currencies",Xn[Xn.Directionality=19]="Directionality",Xn[Xn.PluralCase=20]="PluralCase",Xn[Xn.ExtraData=21]="ExtraData",Xn))();const Cd="en-US";let eg=Cd;function r_(n,r,s,u,p){if(n=he(n),Array.isArray(n))for(let _=0;_<n.length;_++)r_(n[_],r,s,u,p);else{const _=Nn(),T=ht();let R=wu(n)?n:he(n.provide),L=Qc(n);const Q=Li(),ae=1048575&Q.providerIndexes,ve=Q.directiveStart,Be=Q.providerIndexes>>20;if(wu(n)||!n.multi){const ot=new ye(L,p,Mu),wt=s_(R,r,p?ae:ae+Be,ve);-1===wt?(ru(Pa(Q,T),_,R),i_(_,n,r.length),r.push(R),Q.directiveStart++,Q.directiveEnd++,p&&(Q.providerIndexes+=1048576),s.push(ot),T.push(ot)):(s[wt]=ot,T[wt]=ot)}else{const ot=s_(R,r,ae+Be,ve),wt=s_(R,r,ae,ae+Be),pn=wt>=0&&s[wt];if(p&&!pn||!p&&!(ot>=0&&s[ot])){ru(Pa(Q,T),_,R);const Pn=function k0(n,r,s,u,p){const _=new ye(n,s,Mu);return _.multi=[],_.index=r,_.componentProviders=0,yv(_,p,u&&!s),_}(p?F0:L0,s.length,p,u,L);!p&&pn&&(s[wt].providerFactory=Pn),i_(_,n,r.length,0),r.push(R),Q.directiveStart++,Q.directiveEnd++,p&&(Q.providerIndexes+=1048576),s.push(Pn),T.push(Pn)}else i_(_,n,ot>-1?ot:wt,yv(s[p?wt:ot],L,!p&&u));!p&&u&&pn&&s[wt].componentProviders++}}}function i_(n,r,s,u){const p=wu(r),_=function Af(n){return!!n.useClass}(r);if(p||_){const L=(_?he(r.useClass):r).prototype.ngOnDestroy;if(L){const Q=n.destroyHooks||(n.destroyHooks=[]);if(!p&&r.multi){const ae=Q.indexOf(s);-1===ae?Q.push(s,[u,L]):Q[ae+1].push(u,L)}else Q.push(s,L)}}}function yv(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function s_(n,r,s,u){for(let p=s;p<u;p++)if(r[p]===n)return p;return-1}function L0(n,r,s,u){return o_(this.multi,[])}function F0(n,r,s,u){const p=this.multi;let _;if(this.providerFactory){const T=this.providerFactory.componentProviders,R=Zs(s,s[Rt],this.providerFactory.index,u);_=R.slice(0,T),o_(p,_);for(let L=T;L<R.length;L++)_.push(R[L])}else _=[],o_(p,_);return _}function o_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function _v(n,r=[]){return s=>{s.providersResolver=(u,p)=>function N0(n,r,s){const u=Nn();if(u.firstCreatePass){const p=hr(n);r_(s,u.data,u.blueprint,p,!0),r_(r,u.data,u.blueprint,p,!1)}}(u,p?p(n):n,r)}}class pf{}class vv{}function U0(n,r){return new Ev(n,r??null)}class Ev extends pf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Wh(this);const u=Ar(r);this._bootstrapComponents=bu(u.bootstrap),this._r3Injector=jg(r,s,[{provide:pf,useValue:this},{provide:Zc,useValue:this.componentFactoryResolver}],W(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class a_ extends vv{constructor(r){super(),this.moduleType=r}create(r){return new Ev(this.moduleType,r)}}class V0 extends pf{constructor(r,s,u){super(),this.componentFactoryResolver=new Wh(this),this.instance=null;const p=new bh([...r,{provide:pf,useValue:this},{provide:Zc,useValue:this.componentFactoryResolver}],s||mc(),u,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function l_(n,r,s=null){return new V0(n,r,s).injector}let B0=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const u=gg(0,s.type),p=u.length>0?l_([u],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,p)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=un({token:n,providedIn:"environment",factory:()=>new n(er(yc))}),n})();function Dv(n){n.getStandaloneInjector=r=>r.get(B0).getOrCreateStandaloneInjector(n)}function Av(n,r,s){const u=Ti()+n,p=ht();return p[u]===Ir?mu(p,u,s?r.call(s):r()):Sc(p,u)}function Mv(n,r,s,u){return xv(ht(),Ti(),n,r,s,u)}function Pv(n,r,s,u,p){return Nv(ht(),Ti(),n,r,s,u,p)}function Ov(n,r,s,u,p,_){return Lv(ht(),Ti(),n,r,s,u,p,_)}function Rv(n,r,s,u,p,_,T,R,L){const Q=Ti()+n,ae=ht(),ve=El(ae,Q,s,u,p,_);return Ou(ae,Q+4,T,R)||ve?mu(ae,Q+6,L?r.call(L,s,u,p,_,T,R):r(s,u,p,_,T,R)):Sc(ae,Q+6)}function rg(n,r){const s=n[r];return s===Ir?void 0:s}function xv(n,r,s,u,p,_){const T=r+s;return ra(n,T,p)?mu(n,T+1,_?u.call(_,p):u(p)):rg(n,T+1)}function Nv(n,r,s,u,p,_,T){const R=r+s;return Ou(n,R,p,_)?mu(n,R+2,T?u.call(T,p,_):u(p,_)):rg(n,R+2)}function Lv(n,r,s,u,p,_,T,R){const L=r+s;return Qh(n,L,p,_,T)?mu(n,L+3,R?u.call(R,p,_,T):u(p,_,T)):rg(n,L+3)}function Uv(n,r){const s=Nn();let u;const p=n+dn;s.firstCreatePass?(u=function eD(n,r){if(r)for(let s=r.length-1;s>=0;s--){const u=r[s];if(n===u.name)return u}}(r,s.pipeRegistry),s.data[p]=u,u.onDestroy&&(s.destroyHooks??(s.destroyHooks=[])).push(p,u.onDestroy)):u=s.data[p];const _=u.factory||(u.factory=lo(u.type)),T=Cr(Mu);try{const R=Eo(!1),L=_();return Eo(R),function hm(n,r,s,u){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=u}(s,ht(),p,L),L}finally{Cr(T)}}function Vv(n,r,s){const u=n+dn,p=ht(),_=Sr(p,u);return ig(p,u)?xv(p,Ti(),r,_.transform,s,_):_.transform(s)}function Bv(n,r,s,u){const p=n+dn,_=ht(),T=Sr(_,p);return ig(_,p)?Nv(_,Ti(),r,T.transform,s,u,T):T.transform(s,u)}function jv(n,r,s,u,p){const _=n+dn,T=ht(),R=Sr(T,_);return ig(T,_)?Lv(T,Ti(),r,R.transform,s,u,p,R):R.transform(s,u,p)}function Hv(n,r,s){const u=n+dn,p=ht(),_=Sr(p,u);return ig(p,u)?function kv(n,r,s,u,p,_){let T=r+s,R=!1;for(let L=0;L<p.length;L++)ra(n,T++,p[L])&&(R=!0);return R?mu(n,T,u.apply(_,p)):rg(n,T)}(p,Ti(),r,_.transform,s,_):_.transform.apply(_,s)}function ig(n,r){return n[Rt].data[r].pure}function c_(n){return r=>{setTimeout(n,void 0,r)}}const tc=class nD extends m.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,u){let p=r,_=s||(()=>null),T=u;if(r&&"object"==typeof r){const L=r;p=L.next?.bind(L),_=L.error?.bind(L),T=L.complete?.bind(L)}this.__isAsync&&(_=c_(_),p&&(p=c_(p)),T&&(T=c_(T)));const R=super.subscribe({next:p,error:_,complete:T});return r instanceof C.w0&&r.add(R),R}};function rD(){return this._results[Symbol.iterator]()}class d_{get changes(){return this._changes||(this._changes=new tc)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=d_.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=rD)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const u=this;u.dirty=!1;const p=function N(n){return n.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function w(n,r,s){if(n.length!==r.length)return!1;for(let u=0;u<n.length;u++){let p=n[u],_=r[u];if(s&&(p=s(p),_=s(_)),_!==p)return!1}return!0}(u._results,p,s))&&(u._results=p,u.length=p.length,u.last=p[this.length-1],u.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let sg=(()=>{class n{}return n.__NG_ELEMENT_ID__=oD,n})();const iD=sg,sD=class extends iD{constructor(r,s,u){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=u}createEmbeddedView(r,s){const u=this._declarationTContainer.tView,p=Ul(this._declarationLView,u,r,16,null,u.declTNode,null,null,null,null,s||null);p[nt]=this._declarationLView[this._declarationTContainer.index];const T=this._declarationLView[dt];return null!==T&&(p[dt]=T.createEmbeddedView(u)),qf(u,p,r),new Tc(p)}};function oD(){return Ym(Li(),ht())}function Ym(n,r){return 4&n.type?new sD(r,n,Xc(n,r)):null}let Qm=(()=>{class n{}return n.__NG_ELEMENT_ID__=aD,n})();function aD(){return Wv(Li(),ht())}const lD=Qm,$v=class extends lD{constructor(r,s,u){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=u}get element(){return Xc(this._hostTNode,this._hostLView)}get injector(){return new Ja(this._hostTNode,this._hostLView)}get parentInjector(){const r=Tl(this._hostTNode,this._hostLView);if(Fi(r)){const s=Rr(r,this._hostLView),u=Wn(r);return new Ja(s[Rt].data[u+8],s)}return new Ja(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Gv(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-Qr}createEmbeddedView(r,s,u){let p,_;"number"==typeof u?p=u:null!=u&&(p=u.index,_=u.injector);const T=r.createEmbeddedView(s||{},_);return this.insert(T,p),T}createComponent(r,s,u,p,_){const T=r&&!function P(n){return"function"==typeof n}(r);let R;if(T)R=s;else{const ve=s||{};R=ve.index,u=ve.injector,p=ve.projectableNodes,_=ve.environmentInjector||ve.ngModuleRef}const L=T?r:new eh(en(r)),Q=u||this.parentInjector;if(!_&&null==L.ngModule){const Be=(T?Q:this.parentInjector).get(yc,null);Be&&(_=Be)}const ae=L.create(Q,p,void 0,_);return this.insert(ae.hostView,R),ae}insert(r,s){const u=r._lView,p=u[Rt];if(function gs(n){return En(n[cn])}(u)){const ae=this.indexOf(r);if(-1!==ae)this.detach(ae);else{const ve=u[cn],Be=new $v(ve,ve[lr],ve[cn]);Be.detach(Be.indexOf(r))}}const _=this._adjustIndex(s),T=this._lContainer;!function jr(n,r,s,u){const p=Qr+u,_=s.length;u>0&&(s[p-1][Cn]=r),u<_-Qr?(r[Cn]=s[p],re(s,Qr+u,r)):(s.push(r),r[Cn]=null),r[cn]=s;const T=r[nt];null!==T&&s!==T&&function Jo(n,r){const s=n[_i];r[_e]!==r[cn][cn][_e]&&(n[ai]=!0),null===s?n[_i]=[r]:s.push(r)}(T,r);const R=r[dt];null!==R&&R.insertView(n),r[Mn]|=64}(p,u,T,_);const R=du(_,T),L=u[Vn],Q=wo(L,T[ur]);return null!==Q&&function Oi(n,r,s,u,p,_){u[Mr]=p,u[lr]=r,ds(n,u,s,1,p,_)}(p,T[lr],L,u,Q,R),r.attachToViewContainerRef(),re(h_(T),_,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Gv(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),u=La(this._lContainer,s);u&&(ce(h_(this._lContainer),s),ea(u[Rt],u))}detach(r){const s=this._adjustIndex(r,-1),u=La(this._lContainer,s);return u&&null!=ce(h_(this._lContainer),s)?new Tc(u):null}_adjustIndex(r,s=0){return r??this.length+s}};function Gv(n){return n[Tr]}function h_(n){return n[Tr]||(n[Tr]=[])}function Wv(n,r){let s;const u=r[n.index];if(En(u))s=u;else{let p;if(8&n.type)p=$r(u);else{const _=r[Vn];p=_.createComment("");const T=ui(n,r);Sn(_,wo(_,T),p,function Nl(n,r){return n.nextSibling(r)}(_,T),!1)}r[n.index]=s=tm(u,r,p,n),qd(r,s)}return new $v(s,n,r)}class f_{constructor(r){this.queryList=r,this.matches=null}clone(){return new f_(this.queryList)}setDirty(){this.queryList.setDirty()}}class p_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const u=null!==r.contentQueries?r.contentQueries[0]:s.length,p=[];for(let _=0;_<u;_++){const T=s.getByIndex(_);p.push(this.queries[T.indexInDeclarationView].clone())}return new p_(p)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==eE(r,s).matches&&this.queries[s].setDirty()}}class zv{constructor(r,s,u=null){this.predicate=r,this.flags=s,this.read=u}}class g_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let u=0;u<this.length;u++){const p=null!==s?s.length:0,_=this.getByIndex(u).embeddedTView(r,p);_&&(_.indexInDeclarationView=u,null!==s?s.push(_):s=[_])}return null!==s?new g_(s):null}template(r,s){for(let u=0;u<this.queries.length;u++)this.queries[u].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class m_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new m_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let u=r.parent;for(;null!==u&&8&u.type&&u.index!==s;)u=u.parent;return s===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const u=this.metadata.predicate;if(Array.isArray(u))for(let p=0;p<u.length;p++){const _=u[p];this.matchTNodeWithReadOption(r,s,uD(s,_)),this.matchTNodeWithReadOption(r,s,Sl(s,r,_,!1,!1))}else u===sg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Sl(s,r,u,!1,!1))}matchTNodeWithReadOption(r,s,u){if(null!==u){const p=this.metadata.read;if(null!==p)if(p===gu||p===Qm||p===sg&&4&s.type)this.addMatch(s.index,-2);else{const _=Sl(s,r,p,!1,!1);null!==_&&this.addMatch(s.index,_)}else this.addMatch(s.index,u)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function uD(n,r){const s=n.localNames;if(null!==s)for(let u=0;u<s.length;u+=2)if(s[u]===r)return s[u+1];return null}function dD(n,r,s,u){return-1===s?function cD(n,r){return 11&n.type?Xc(n,r):4&n.type?Ym(n,r):null}(r,n):-2===s?function hD(n,r,s){return s===gu?Xc(r,n):s===sg?Ym(r,n):s===Qm?Wv(r,n):void 0}(n,r,u):Zs(n,n[Rt],s,r)}function Kv(n,r,s,u){const p=r[dt].queries[u];if(null===p.matches){const _=n.data,T=s.matches,R=[];for(let L=0;L<T.length;L+=2){const Q=T[L];R.push(Q<0?null:dD(r,_[Q],T[L+1],s.metadata.read))}p.matches=R}return p.matches}function y_(n,r,s,u){const p=n.queries.getByIndex(s),_=p.matches;if(null!==_){const T=Kv(n,r,p,s);for(let R=0;R<_.length;R+=2){const L=_[R];if(L>0)u.push(T[R/2]);else{const Q=_[R+1],ae=r[-L];for(let ve=Qr;ve<ae.length;ve++){const Be=ae[ve];Be[nt]===Be[cn]&&y_(Be[Rt],Be,Q,u)}if(null!==ae[_i]){const ve=ae[_i];for(let Be=0;Be<ve.length;Be++){const ot=ve[Be];y_(ot[Rt],ot,Q,u)}}}}}return u}function Yv(n){const r=ht(),s=Nn(),u=Yo();Ka(u+1);const p=eE(s,u);if(n.dirty&&function Mo(n){return 4==(4&n[Mn])}(r)===(2==(2&p.metadata.flags))){if(null===p.matches)n.reset([]);else{const _=p.crossesNgTemplate?y_(s,r,u,[]):Kv(s,r,p,u);n.reset(_,Cg),n.notifyOnChanges()}return!0}return!1}function Qv(n,r,s){const u=Nn();u.firstCreatePass&&(Jv(u,new zv(n,r,s),-1),2==(2&r)&&(u.staticViewQueries=!0)),Xv(u,ht(),r)}function qv(n,r,s,u){const p=Nn();if(p.firstCreatePass){const _=Li();Jv(p,new zv(r,s,u),_.index),function pD(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(p,n),2==(2&s)&&(p.staticContentQueries=!0)}Xv(p,ht(),s)}function Zv(){return function fD(n,r){return n[dt].queries[r].queryList}(ht(),Yo())}function Xv(n,r,s){const u=new d_(4==(4&s));Zg(n,r,u,u.destroy),null===r[dt]&&(r[dt]=new p_),r[dt].queries.push(new f_(u))}function Jv(n,r,s){null===n.queries&&(n.queries=new g_),n.queries.track(new m_(r,s))}function eE(n,r){return n.queries.getByIndex(r)}function tE(n,r){return Ym(n,r)}function __(n){return!!Ar(n)}function Zm(...n){}const vE=new Jr("Application Initializer");let Xm=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Zm,this.reject=Zm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,p)=>{this.resolve=u,this.reject=p})}runInitializers(){if(this.initialized)return;const s=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const _=this.appInits[p]();if(rh(_))s.push(_);else if(ih(_)){const T=new Promise((R,L)=>{_.subscribe({complete:R,error:L})});s.push(T)}}Promise.all(s).then(()=>{u()}).catch(p=>{this.reject(p)}),0===s.length&&u(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(er(vE,8))},n.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const EE=new Jr("AppId",{providedIn:"root",factory:function DE(){return`${C_()}${C_()}${C_()}`}});function C_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const IE=new Jr("Platform Initializer"),ND=new Jr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),LD=new Jr("AnimationModuleType");let FD=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Jm=new Jr("LocaleId",{providedIn:"root",factory:()=>Yr(Jm,nn.Optional|nn.SkipSelf)||function kD(){return typeof $localize<"u"&&$localize.locale||Cd}()}),UD=new Jr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class VD{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let BD=(()=>{class n{compileModuleSync(s){return new a_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const u=this.compileModuleSync(s),_=bu(Ar(s).declarations).reduce((T,R)=>{const L=en(R);return L&&T.push(new eh(L)),T},[]);return new VD(u,_)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $D=(()=>Promise.resolve(0))();function w_(n){typeof Zone>"u"?$D.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class _u{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tc(!1),this.onMicrotaskEmpty=new tc(!1),this.onStable=new tc(!1),this.onError=new tc(!1),typeof Zone>"u")throw new ke(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!u&&s,p.shouldCoalesceRunChangeDetection=u,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function GD(){let n=Yn.requestAnimationFrame,r=Yn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const u=r[Zone.__symbol__("OriginalDelegate")];u&&(r=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function KD(n){const r=()=>{!function zD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Yn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,S_(n),n.isCheckStableRunning=!0,T_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),S_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,u,p,_,T,R)=>{try{return TE(n),s.invokeTask(p,_,T,R)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||n.shouldCoalesceRunChangeDetection)&&r(),SE(n)}},onInvoke:(s,u,p,_,T,R,L)=>{try{return TE(n),s.invoke(p,_,T,R,L)}finally{n.shouldCoalesceRunChangeDetection&&r(),SE(n)}},onHasTask:(s,u,p,_)=>{s.hasTask(p,_),u===p&&("microTask"==_.change?(n._hasPendingMicrotasks=_.microTask,S_(n),T_(n)):"macroTask"==_.change&&(n.hasPendingMacrotasks=_.macroTask))},onHandleError:(s,u,p,_)=>(s.handleError(p,_),n.runOutsideAngular(()=>n.onError.emit(_)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_u.isInAngularZone())throw new ke(909,!1)}static assertNotInAngularZone(){if(_u.isInAngularZone())throw new ke(909,!1)}run(r,s,u){return this._inner.run(r,s,u)}runTask(r,s,u,p){const _=this._inner,T=_.scheduleEventTask("NgZoneEvent: "+p,r,WD,Zm,Zm);try{return _.runTask(T,s,u)}finally{_.cancelTask(T)}}runGuarded(r,s,u){return this._inner.runGuarded(r,s,u)}runOutsideAngular(r){return this._outer.run(r)}}const WD={};function T_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function S_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function TE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function SE(n){n._nesting--,T_(n)}class YD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tc,this.onMicrotaskEmpty=new tc,this.onStable=new tc,this.onError=new tc}run(r,s,u){return r.apply(s,u)}runGuarded(r,s,u){return r.apply(s,u)}runOutsideAngular(r){return r()}runTask(r,s,u,p){return r.apply(s,u)}}const bE=new Jr(""),AE=new Jr("");let b_,QD=(()=>{class n{constructor(s,u,p){this._ngZone=s,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,b_||(function qD(n){b_=n}(p),p.addToWindow(u)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_u.assertNotInAngularZone(),w_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())w_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(s)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,u,p){let _=-1;u&&u>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==_),s(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:s,timeoutId:_,updateCb:p})}whenStable(s,u,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,u,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,u,p){return[]}}return n.\u0275fac=function(s){return new(s||n)(er(_u),er(ME),er(AE))},n.\u0275prov=un({token:n,factory:n.\u0275fac}),n})(),ME=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,u){this._applications.set(s,u)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,u=!0){return b_?.findTestabilityInTree(this,s,u)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Fc=!1;let Td=null;const PE=new Jr("AllowMultipleToken"),A_=new Jr("PlatformDestroyListeners"),OE=new Jr("appBootstrapListener");class JD{constructor(r,s){this.name=r,this.token=s}}function xE(n,r,s=[]){const u=`Platform: ${r}`,p=new Jr(u);return(_=[])=>{let T=M_();if(!T||T.injector.get(PE,!1)){const R=[...s,..._,{provide:p,useValue:!0}];n?n(R):function eI(n){if(Td&&!Td.get(PE,!1))throw new ke(400,!1);Td=n;const r=n.get(LE);(function RE(n){const r=n.get(IE,null);r&&r.forEach(s=>s())})(n)}(function NE(n=[],r){return Au.create({name:r,providers:[{provide:Th,useValue:"platform"},{provide:A_,useValue:new Set([()=>Td=null])},...n]})}(R,u))}return function nI(n){const r=M_();if(!r)throw new ke(401,!1);return r}()}}function M_(){return Td?.get(LE)??null}let LE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,u){const p=function kE(n,r){let s;return s="noop"===n?new YD:("zone.js"===n?void 0:n)||new _u(r),s}(u?.ngZone,function FE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),_=[{provide:_u,useValue:p}];return p.run(()=>{const T=Au.create({providers:_,parent:this.injector,name:s.moduleType.name}),R=s.create(T),L=R.injector.get(Ud,null);if(!L)throw new ke(402,!1);return p.runOutsideAngular(()=>{const Q=p.onError.subscribe({next:ae=>{L.handleError(ae)}});R.onDestroy(()=>{ty(this._modules,R),Q.unsubscribe()})}),function UE(n,r,s){try{const u=s();return rh(u)?u.catch(p=>{throw r.runOutsideAngular(()=>n.handleError(p)),p}):u}catch(u){throw r.runOutsideAngular(()=>n.handleError(u)),u}}(L,p,()=>{const Q=R.injector.get(Xm);return Q.runInitializers(),Q.donePromise.then(()=>(function i(n){On(n,"Expected localeId to be defined"),"string"==typeof n&&(eg=n.toLowerCase().replace(/_/g,"-"))}(R.injector.get(Jm,Cd)||Cd),this._moduleDoBootstrap(R),R))})})}bootstrapModule(s,u=[]){const p=VE({},u);return function ZD(n,r,s){const u=new a_(s);return Promise.resolve(u)}(0,0,s).then(_=>this.bootstrapModuleFactory(_,p))}_moduleDoBootstrap(s){const u=s.injector.get(ey);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(p=>u.bootstrap(p));else{if(!s.instance.ngDoBootstrap)throw new ke(-403,!1);s.instance.ngDoBootstrap(u)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const s=this._injector.get(A_,null);s&&(s.forEach(u=>u()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(er(Au))},n.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function VE(n,r){return Array.isArray(r)?r.reduce(VE,n):{...n,...r}}let ey=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(s,u,p){this._zone=s,this._injector=u,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new J.y(R=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{R.next(this._stable),R.complete()})}),T=new J.y(R=>{let L;this._zone.runOutsideAngular(()=>{L=this._zone.onStable.subscribe(()=>{_u.assertNotInAngularZone(),w_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,R.next(!0))})})});const Q=this._zone.onUnstable.subscribe(()=>{_u.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{R.next(!1)}))});return()=>{L.unsubscribe(),Q.unsubscribe()}});this.isStable=(0,V.T)(_,T.pipe((0,q.B)()))}bootstrap(s,u){const p=s instanceof kd;if(!this._injector.get(Xm).done){!p&&oi(s);throw new ke(405,Fc)}let T;T=p?s:this._injector.get(Zc).resolveComponentFactory(s),this.componentTypes.push(T.componentType);const R=function XD(n){return n.isBoundToModule}(T)?void 0:this._injector.get(pf),Q=T.create(Au.NULL,[],u||T.selector,R),ae=Q.location.nativeElement,ve=Q.injector.get(bE,null);return ve?.registerApplication(ae),Q.onDestroy(()=>{this.detachView(Q.hostView),ty(this.components,Q),ve?.unregisterApplication(ae)}),this._loadComponent(Q),Q}tick(){if(this._runningTick)throw new ke(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const u=s;this._views.push(u),u.attachToAppRef(this)}detachView(s){const u=s;ty(this._views,u),u.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const u=this._injector.get(OE,[]);u.push(...this._bootstrapListeners),u.forEach(p=>p(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>ty(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new ke(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(er(_u),er(yc),er(Ud))},n.\u0275prov=un({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ty(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}function iI(){return!1}function sI(){}let oI=(()=>{class n{}return n.__NG_ELEMENT_ID__=aI,n})();function aI(n){return function lI(n,r,s){if(Gs(n)&&!s){const u=Hi(n.index,r);return new Tc(u,u)}return 47&n.type?new Tc(r[_e],r):null}(Li(),ht(),16==(16&n))}class GE{constructor(){}supports(r){return dd(r)}create(r){return new pI(r)}}const fI=(n,r)=>r;class pI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||fI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,u=this._removalsHead,p=0,_=null;for(;s||u;){const T=!u||s&&s.currentIndex<zE(u,p,_)?s:u,R=zE(T,p,_),L=T.currentIndex;if(T===u)p--,u=u._nextRemoved;else if(s=s._next,null==T.previousIndex)p++;else{_||(_=[]);const Q=R-p,ae=L-p;if(Q!=ae){for(let Be=0;Be<Q;Be++){const ot=Be<_.length?_[Be]:_[Be]=0,wt=ot+Be;ae<=wt&&wt<Q&&(_[Be]=ot+1)}_[T.previousIndex]=ae-Q}}R!==L&&r(T,R,L)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!dd(r))throw new ke(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let p,_,T,s=this._itHead,u=!1;if(Array.isArray(r)){this.length=r.length;for(let R=0;R<this.length;R++)_=r[R],T=this._trackByFn(R,_),null!==s&&Object.is(s.trackById,T)?(u&&(s=this._verifyReinsertion(s,_,T,R)),Object.is(s.item,_)||this._addIdentityChange(s,_)):(s=this._mismatch(s,_,T,R),u=!0),s=s._next}else p=0,function xy(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Symbol.iterator]();let u;for(;!(u=s.next()).done;)r(u.value)}}(r,R=>{T=this._trackByFn(p,R),null!==s&&Object.is(s.trackById,T)?(u&&(s=this._verifyReinsertion(s,R,T,p)),Object.is(s.item,R)||this._addIdentityChange(s,R)):(s=this._mismatch(s,R,T,p),u=!0),s=s._next,p++}),this.length=p;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,u,p){let _;return null===r?_=this._itTail:(_=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,_,p)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(u,p))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,_,p)):r=this._addAfter(new gI(s,u),_,p),r}_verifyReinsertion(r,s,u,p){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==_?r=this._reinsertAfter(_,r._prev,p):r.currentIndex!=p&&(r.currentIndex=p,this._addToMoves(r,p)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const p=r._prevRemoved,_=r._nextRemoved;return null===p?this._removalsHead=_:p._nextRemoved=_,null===_?this._removalsTail=p:_._prevRemoved=p,this._insertAfter(r,s,u),this._addToMoves(r,u),r}_moveAfter(r,s,u){return this._unlink(r),this._insertAfter(r,s,u),this._addToMoves(r,u),r}_addAfter(r,s,u){return this._insertAfter(r,s,u),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,u){const p=null===s?this._itHead:s._next;return r._next=p,r._prev=s,null===p?this._itTail=r:p._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new WE),this._linkedRecords.put(r),r.currentIndex=u,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,u=r._next;return null===s?this._itHead=u:s._next=u,null===u?this._itTail=s:u._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new WE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class gI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===s||s<=u.currentIndex)&&Object.is(u.trackById,r))return u;return null}remove(r){const s=r._prevDup,u=r._nextDup;return null===s?this._head=u:s._nextDup=u,null===u?this._tail=s:u._prevDup=s,null===this._head}}class WE{constructor(){this.map=new Map}put(r){const s=r.trackById;let u=this.map.get(s);u||(u=new mI,this.map.set(s,u)),u.add(r)}get(r,s){const p=this.map.get(r);return p?p.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zE(n,r,s){const u=n.previousIndex;if(null===u)return u;let p=0;return s&&u<s.length&&(p=s[u]),u+r+p}class KE{constructor(){}supports(r){return r instanceof Map||Sp(r)}create(){return new yI}}class yI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Sp(r)))throw new ke(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(u,p)=>{if(s&&s.key===p)this._maybeAddToChanges(s,u),this._appendAfter=s,s=s._next;else{const _=this._getOrCreateRecordForKey(p,u);s=this._insertBeforeOrAppend(s,_)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let u=s;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const u=r._prev;return s._next=r,s._prev=u,r._prev=s,u&&(u._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const p=this._records.get(r);this._maybeAddToChanges(p,s);const _=p._prev,T=p._next;return _&&(_._next=T),T&&(T._prev=_),p._next=null,p._prev=null,p}const u=new _I(r);return this._records.set(r,u),u.currentValue=s,this._addToAdditions(u),u}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(u=>s(r[u],u))}}class _I{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function YE(){return new N_([new GE])}let N_=(()=>{class n{constructor(s){this.factories=s}static create(s,u){if(null!=u){const p=u.factories.slice();s=s.concat(p)}return new n(s)}static extend(s){return{provide:n,useFactory:u=>n.create(s,u||YE()),deps:[[n,new Zo,new _a]]}}find(s){const u=this.factories.find(p=>p.supports(s));if(null!=u)return u;throw new ke(901,!1)}}return n.\u0275prov=un({token:n,providedIn:"root",factory:YE}),n})();function QE(){return new L_([new KE])}let L_=(()=>{class n{constructor(s){this.factories=s}static create(s,u){if(u){const p=u.factories.slice();s=s.concat(p)}return new n(s)}static extend(s){return{provide:n,useFactory:u=>n.create(s,u||QE()),deps:[[n,new Zo,new _a]]}}find(s){const u=this.factories.find(p=>p.supports(s));if(u)return u;throw new ke(901,!1)}}return n.\u0275prov=un({token:n,providedIn:"root",factory:QE}),n})();const DI=xE(null,"core",[]);let II=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(er(ey))},n.\u0275mod=Ze({type:n}),n.\u0275inj=vt({}),n})();function CI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function TI(n,r){const s=en(n),u=r.elementInjector||mc();return new eh(s).create(u,r.projectableNodes,r.hostElement,r.environmentInjector)}},4006:(Ee,se,D)=>{D.d(se,{CE:()=>Gn,Cf:()=>je,EJ:()=>oo,F:()=>lr,Fd:()=>ua,Fj:()=>He,JJ:()=>ir,JL:()=>nn,JU:()=>W,K7:()=>Ks,Kr:()=>Br,Mq:()=>Ge,NI:()=>Ki,Oe:()=>Sr,On:()=>jt,Q7:()=>ws,UX:()=>Wo,Wl:()=>Y,YN:()=>Fs,_:()=>Qr,_Y:()=>dn,a5:()=>kn,c5:()=>ji,cw:()=>Ne,eT:()=>li,gN:()=>Pt,kI:()=>Le,nD:()=>ps,oH:()=>Gs,qQ:()=>Cs,qu:()=>gs,sg:()=>hr,u:()=>so,u5:()=>Ln,wO:()=>vi,wV:()=>yr,x0:()=>qr});var m=D(4650),C=D(6895),J=D(457),V=D(4128),q=D(4004);let te=(()=>{class j{constructor(F,oe){this._renderer=F,this._elementRef=oe,this.onChange=tt=>{},this.onTouched=()=>{}}setProperty(F,oe){this._renderer.setProperty(this._elementRef.nativeElement,F,oe)}registerOnTouched(F){this.onTouched=F}registerOnChange(F){this.onChange=F}setDisabledState(F){this.setProperty("disabled",F)}}return j.\u0275fac=function(F){return new(F||j)(m.Y36(m.Qsj),m.Y36(m.SBq))},j.\u0275dir=m.lG2({type:j}),j})(),X=(()=>{class j extends te{}return j.\u0275fac=function(){let B;return function(oe){return(B||(B=m.n5z(j)))(oe||j)}}(),j.\u0275dir=m.lG2({type:j,features:[m.qOj]}),j})();const W=new m.OlP("NgValueAccessor"),ee={provide:W,useExisting:(0,m.Gpc)(()=>Y),multi:!0};let Y=(()=>{class j extends X{writeValue(F){this.setProperty("checked",F)}}return j.\u0275fac=function(){let B;return function(oe){return(B||(B=m.n5z(j)))(oe||j)}}(),j.\u0275dir=m.lG2({type:j,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(F,oe){1&F&&m.NdJ("change",function(sn){return oe.onChange(sn.target.checked)})("blur",function(){return oe.onTouched()})},features:[m._Bn([ee]),m.qOj]}),j})();const le={provide:W,useExisting:(0,m.Gpc)(()=>He),multi:!0},Pe=new m.OlP("CompositionEventMode");let He=(()=>{class j extends te{constructor(F,oe,tt){super(F,oe),this._compositionMode=tt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function he(){const j=(0,C.q)()?(0,C.q)().getUserAgent():"";return/android (\d+)/.test(j.toLowerCase())}())}writeValue(F){this.setProperty("value",F??"")}_handleInput(F){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(F)}_compositionStart(){this._composing=!0}_compositionEnd(F){this._composing=!1,this._compositionMode&&this.onChange(F)}}return j.\u0275fac=function(F){return new(F||j)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(Pe,8))},j.\u0275dir=m.lG2({type:j,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(F,oe){1&F&&m.NdJ("input",function(sn){return oe._handleInput(sn.target.value)})("blur",function(){return oe.onTouched()})("compositionstart",function(){return oe._compositionStart()})("compositionend",function(sn){return oe._compositionEnd(sn.target.value)})},features:[m._Bn([le]),m.qOj]}),j})();const Ae=!1;function Ue(j){return null==j||("string"==typeof j||Array.isArray(j))&&0===j.length}function ke(j){return null!=j&&"number"==typeof j.length}const je=new m.OlP("NgValidators"),$e=new m.OlP("NgAsyncValidators"),Je=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Le{static min(B){return Me(B)}static max(B){return yt(B)}static required(B){return Et(B)}static requiredTrue(B){return function Ye(j){return!0===j.value?null:{required:!0}}(B)}static email(B){return function Ot(j){return Ue(j.value)||Je.test(j.value)?null:{email:!0}}(B)}static minLength(B){return At(B)}static maxLength(B){return Xe(B)}static pattern(B){return Ke(B)}static nullValidator(B){return null}static compose(B){return $t(B)}static composeAsync(B){return gn(B)}}function Me(j){return B=>{if(Ue(B.value)||Ue(j))return null;const F=parseFloat(B.value);return!isNaN(F)&&F<j?{min:{min:j,actual:B.value}}:null}}function yt(j){return B=>{if(Ue(B.value)||Ue(j))return null;const F=parseFloat(B.value);return!isNaN(F)&&F>j?{max:{max:j,actual:B.value}}:null}}function Et(j){return Ue(j.value)?{required:!0}:null}function At(j){return B=>Ue(B.value)||!ke(B.value)?null:B.value.length<j?{minlength:{requiredLength:j,actualLength:B.value.length}}:null}function Xe(j){return B=>ke(B.value)&&B.value.length>j?{maxlength:{requiredLength:j,actualLength:B.value.length}}:null}function Ke(j){if(!j)return ut;let B,F;return"string"==typeof j?(F="","^"!==j.charAt(0)&&(F+="^"),F+=j,"$"!==j.charAt(j.length-1)&&(F+="$"),B=new RegExp(F)):(F=j.toString(),B=j),oe=>{if(Ue(oe.value))return null;const tt=oe.value;return B.test(tt)?null:{pattern:{requiredPattern:F,actualValue:tt}}}}function ut(j){return null}function qe(j){return null!=j}function xt(j){const B=(0,m.QGY)(j)?(0,J.D)(j):j;if(Ae&&!(0,m.CqO)(B)){let F="Expected async validator to return Promise or Observable.";throw"object"==typeof j&&(F+=" Are you using a synchronous validator where an async validator is expected?"),new m.vHH(-1101,F)}return B}function It(j){let B={};return j.forEach(F=>{B=null!=F?{...B,...F}:B}),0===Object.keys(B).length?null:B}function hn(j,B){return B.map(F=>F(j))}function on(j){return j.map(B=>function Jn(j){return!j.validate}(B)?B:F=>B.validate(F))}function $t(j){if(!j)return null;const B=j.filter(qe);return 0==B.length?null:function(F){return It(hn(F,B))}}function On(j){return null!=j?$t(on(j)):null}function gn(j){if(!j)return null;const B=j.filter(qe);return 0==B.length?null:function(F){const oe=hn(F,B).map(xt);return(0,V.D)(oe).pipe((0,q.U)(It))}}function rr(j){return null!=j?gn(on(j)):null}function zr(j,B){return null===j?[B]:Array.isArray(j)?[...j,B]:[j,B]}function bn(j){return j._rawValidators}function un(j){return j._rawAsyncValidators}function ei(j){return j?Array.isArray(j)?j:[j]:[]}function vt(j,B){return Array.isArray(j)?j.includes(B):j===B}function at(j,B){const F=ei(B);return ei(j).forEach(tt=>{vt(F,tt)||F.push(tt)}),F}function Fe(j,B){return ei(B).filter(F=>!vt(j,F))}class ft{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(B){this._rawValidators=B||[],this._composedValidatorFn=On(this._rawValidators)}_setAsyncValidators(B){this._rawAsyncValidators=B||[],this._composedAsyncValidatorFn=rr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(B){this._onDestroyCallbacks.push(B)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(B=>B()),this._onDestroyCallbacks=[]}reset(B){this.control&&this.control.reset(B)}hasError(B,F){return!!this.control&&this.control.hasError(B,F)}getError(B,F){return this.control?this.control.getError(B,F):null}}class Pt extends ft{get formDirective(){return null}get path(){return null}}class kn extends ft{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Kn{constructor(B){this._cd=B}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ir=(()=>{class j extends Kn{constructor(F){super(F)}}return j.\u0275fac=function(F){return new(F||j)(m.Y36(kn,2))},j.\u0275dir=m.lG2({type:j,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(F,oe){2&F&&m.ekj("ng-untouched",oe.isUntouched)("ng-touched",oe.isTouched)("ng-pristine",oe.isPristine)("ng-dirty",oe.isDirty)("ng-valid",oe.isValid)("ng-invalid",oe.isInvalid)("ng-pending",oe.isPending)},features:[m.qOj]}),j})(),nn=(()=>{class j extends Kn{constructor(F){super(F)}}return j.\u0275fac=function(F){return new(F||j)(m.Y36(Pt,10))},j.\u0275dir=m.lG2({type:j,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(F,oe){2&F&&m.ekj("ng-untouched",oe.isUntouched)("ng-touched",oe.isTouched)("ng-pristine",oe.isPristine)("ng-dirty",oe.isDirty)("ng-valid",oe.isValid)("ng-invalid",oe.isInvalid)("ng-pending",oe.isPending)("ng-submitted",oe.isSubmitted)},features:[m.qOj]}),j})();function vr(j,B){return j?`with name: '${B}'`:`at index: ${B}`}const Un=!1,Vr="VALID",er="INVALID",yi="PENDING",Yr="DISABLED";function Qe(j){return(de(j)?j.validators:j)||null}function Re(j,B){return(de(B)?B.asyncValidators:j)||null}function de(j){return null!=j&&!Array.isArray(j)&&"object"==typeof j}function me(j,B,F){const oe=j.controls;if(!(B?Object.keys(oe):oe).length)throw new m.vHH(1e3,Un?function ni(j){return`\n    There are no form controls registered with this ${j?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(B):"");if(!oe[F])throw new m.vHH(1001,Un?function or(j,B){return`Cannot find form control ${vr(j,B)}`}(B,F):"")}function De(j,B,F){j._forEachChild((oe,tt)=>{if(void 0===F[tt])throw new m.vHH(1002,Un?function wi(j,B){return`Must supply a value for form control ${vr(j,B)}`}(B,tt):"")})}class rt{constructor(B,F){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(B),this._assignAsyncValidators(F)}get validator(){return this._composedValidatorFn}set validator(B){this._rawValidators=this._composedValidatorFn=B}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(B){this._rawAsyncValidators=this._composedAsyncValidatorFn=B}get parent(){return this._parent}get valid(){return this.status===Vr}get invalid(){return this.status===er}get pending(){return this.status==yi}get disabled(){return this.status===Yr}get enabled(){return this.status!==Yr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(B){this._assignValidators(B)}setAsyncValidators(B){this._assignAsyncValidators(B)}addValidators(B){this.setValidators(at(B,this._rawValidators))}addAsyncValidators(B){this.setAsyncValidators(at(B,this._rawAsyncValidators))}removeValidators(B){this.setValidators(Fe(B,this._rawValidators))}removeAsyncValidators(B){this.setAsyncValidators(Fe(B,this._rawAsyncValidators))}hasValidator(B){return vt(this._rawValidators,B)}hasAsyncValidator(B){return vt(this._rawAsyncValidators,B)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(B={}){this.touched=!0,this._parent&&!B.onlySelf&&this._parent.markAsTouched(B)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(B=>B.markAllAsTouched())}markAsUntouched(B={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(F=>{F.markAsUntouched({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}markAsDirty(B={}){this.pristine=!1,this._parent&&!B.onlySelf&&this._parent.markAsDirty(B)}markAsPristine(B={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(F=>{F.markAsPristine({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}markAsPending(B={}){this.status=yi,!1!==B.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!B.onlySelf&&this._parent.markAsPending(B)}disable(B={}){const F=this._parentMarkedDirty(B.onlySelf);this.status=Yr,this.errors=null,this._forEachChild(oe=>{oe.disable({...B,onlySelf:!0})}),this._updateValue(),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...B,skipPristineCheck:F}),this._onDisabledChange.forEach(oe=>oe(!0))}enable(B={}){const F=this._parentMarkedDirty(B.onlySelf);this.status=Vr,this._forEachChild(oe=>{oe.enable({...B,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent}),this._updateAncestors({...B,skipPristineCheck:F}),this._onDisabledChange.forEach(oe=>oe(!1))}_updateAncestors(B){this._parent&&!B.onlySelf&&(this._parent.updateValueAndValidity(B),B.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(B){this._parent=B}getRawValue(){return this.value}updateValueAndValidity(B={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vr||this.status===yi)&&this._runAsyncValidator(B.emitEvent)),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!B.onlySelf&&this._parent.updateValueAndValidity(B)}_updateTreeValidity(B={emitEvent:!0}){this._forEachChild(F=>F._updateTreeValidity(B)),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yr:Vr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(B){if(this.asyncValidator){this.status=yi,this._hasOwnPendingAsyncValidator=!0;const F=xt(this.asyncValidator(this));this._asyncValidationSubscription=F.subscribe(oe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(oe,{emitEvent:B})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(B,F={}){this.errors=B,this._updateControlsErrors(!1!==F.emitEvent)}get(B){let F=B;return null==F||(Array.isArray(F)||(F=F.split(".")),0===F.length)?null:F.reduce((oe,tt)=>oe&&oe._find(tt),this)}getError(B,F){const oe=F?this.get(F):this;return oe&&oe.errors?oe.errors[B]:null}hasError(B,F){return!!this.getError(B,F)}get root(){let B=this;for(;B._parent;)B=B._parent;return B}_updateControlsErrors(B){this.status=this._calculateStatus(),B&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(B)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?Yr:this.errors?er:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(yi)?yi:this._anyControlsHaveStatus(er)?er:Vr}_anyControlsHaveStatus(B){return this._anyControls(F=>F.status===B)}_anyControlsDirty(){return this._anyControls(B=>B.dirty)}_anyControlsTouched(){return this._anyControls(B=>B.touched)}_updatePristine(B={}){this.pristine=!this._anyControlsDirty(),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}_updateTouched(B={}){this.touched=this._anyControlsTouched(),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}_registerOnCollectionChange(B){this._onCollectionChange=B}_setUpdateStrategy(B){de(B)&&null!=B.updateOn&&(this._updateOn=B.updateOn)}_parentMarkedDirty(B){return!B&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(B){return null}_assignValidators(B){this._rawValidators=Array.isArray(B)?B.slice():B,this._composedValidatorFn=function Ie(j){return Array.isArray(j)?On(j):j||null}(this._rawValidators)}_assignAsyncValidators(B){this._rawAsyncValidators=Array.isArray(B)?B.slice():B,this._composedAsyncValidatorFn=function bt(j){return Array.isArray(j)?rr(j):j||null}(this._rawAsyncValidators)}}class Ne extends rt{constructor(B,F,oe){super(Qe(F),Re(oe,F)),this.controls=B,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(B,F){return this.controls[B]?this.controls[B]:(this.controls[B]=F,F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange),F)}addControl(B,F,oe={}){this.registerControl(B,F),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}removeControl(B,F={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}setControl(B,F,oe={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],F&&this.registerControl(B,F),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}contains(B){return this.controls.hasOwnProperty(B)&&this.controls[B].enabled}setValue(B,F={}){De(this,!0,B),Object.keys(B).forEach(oe=>{me(this,!0,oe),this.controls[oe].setValue(B[oe],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(B,F={}){null!=B&&(Object.keys(B).forEach(oe=>{const tt=this.controls[oe];tt&&tt.patchValue(B[oe],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(B={},F={}){this._forEachChild((oe,tt)=>{oe.reset(B[tt],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this._reduceChildren({},(B,F,oe)=>(B[oe]=F.getRawValue(),B))}_syncPendingControls(){let B=this._reduceChildren(!1,(F,oe)=>!!oe._syncPendingControls()||F);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_forEachChild(B){Object.keys(this.controls).forEach(F=>{const oe=this.controls[F];oe&&B(oe,F)})}_setUpControls(){this._forEachChild(B=>{B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(B){for(const[F,oe]of Object.entries(this.controls))if(this.contains(F)&&B(oe))return!0;return!1}_reduceValue(){return this._reduceChildren({},(F,oe,tt)=>((oe.enabled||this.disabled)&&(F[tt]=oe.value),F))}_reduceChildren(B,F){let oe=B;return this._forEachChild((tt,sn)=>{oe=F(oe,tt,sn)}),oe}_allControlsDisabled(){for(const B of Object.keys(this.controls))if(this.controls[B].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(B){return this.controls.hasOwnProperty(B)?this.controls[B]:null}}class Oe extends Ne{}const ue=new m.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Se}),Se="always";function ze(j,B){return[...B.path,j]}function Nt(j,B,F=Se){fi(j,B),B.valueAccessor.writeValue(j.value),(j.disabled||"always"===F)&&B.valueAccessor.setDisabledState?.(j.disabled),function Ze(j,B){B.valueAccessor.registerOnChange(F=>{j._pendingValue=F,j._pendingChange=!0,j._pendingDirty=!0,"change"===j.updateOn&&Wt(j,B)})}(j,B),function Tn(j,B){const F=(oe,tt)=>{B.valueAccessor.writeValue(oe),tt&&B.viewToModelUpdate(oe)};j.registerOnChange(F),B._registerOnDestroy(()=>{j._unregisterOnChange(F)})}(j,B),function Ct(j,B){B.valueAccessor.registerOnTouched(()=>{j._pendingTouched=!0,"blur"===j.updateOn&&j._pendingChange&&Wt(j,B),"submit"!==j.updateOn&&j.markAsTouched()})}(j,B),function pr(j,B){if(B.valueAccessor.setDisabledState){const F=oe=>{B.valueAccessor.setDisabledState(oe)};j.registerOnDisabledChange(F),B._registerOnDestroy(()=>{j._unregisterOnDisabledChange(F)})}}(j,B)}function Qt(j,B,F=!0){const oe=()=>{};B.valueAccessor&&(B.valueAccessor.registerOnChange(oe),B.valueAccessor.registerOnTouched(oe)),ct(j,B),j&&(B._invokeOnDestroyCallbacks(),j._registerOnCollectionChange(()=>{}))}function $n(j,B){j.forEach(F=>{F.registerOnValidatorChange&&F.registerOnValidatorChange(B)})}function fi(j,B){const F=bn(j);null!==B.validator?j.setValidators(zr(F,B.validator)):"function"==typeof F&&j.setValidators([F]);const oe=un(j);null!==B.asyncValidator?j.setAsyncValidators(zr(oe,B.asyncValidator)):"function"==typeof oe&&j.setAsyncValidators([oe]);const tt=()=>j.updateValueAndValidity();$n(B._rawValidators,tt),$n(B._rawAsyncValidators,tt)}function ct(j,B){let F=!1;if(null!==j){if(null!==B.validator){const tt=bn(j);if(Array.isArray(tt)&&tt.length>0){const sn=tt.filter(Zr=>Zr!==B.validator);sn.length!==tt.length&&(F=!0,j.setValidators(sn))}}if(null!==B.asyncValidator){const tt=un(j);if(Array.isArray(tt)&&tt.length>0){const sn=tt.filter(Zr=>Zr!==B.asyncValidator);sn.length!==tt.length&&(F=!0,j.setAsyncValidators(sn))}}}const oe=()=>{};return $n(B._rawValidators,oe),$n(B._rawAsyncValidators,oe),F}function Wt(j,B){j._pendingDirty&&j.markAsDirty(),j.setValue(j._pendingValue,{emitModelToViewChange:!1}),B.viewToModelUpdate(j._pendingValue),j._pendingChange=!1}function qn(j,B){fi(j,B)}function Ls(j,B){if(!j.hasOwnProperty("model"))return!1;const F=j.model;return!!F.isFirstChange()||!Object.is(B,F.currentValue)}function Mr(j,B){j._syncPendingControls(),B.forEach(F=>{const oe=F.control;"submit"===oe.updateOn&&oe._pendingChange&&(F.viewToModelUpdate(oe._pendingValue),oe._pendingChange=!1)})}function Rt(j,B){if(!B)return null;let F,oe,tt;return Array.isArray(B),B.forEach(sn=>{sn.constructor===He?F=sn:function pi(j){return Object.getPrototypeOf(j.constructor)===X}(sn)?oe=sn:tt=sn}),tt||oe||F||null}const Cn={provide:Pt,useExisting:(0,m.Gpc)(()=>lr)},fn=(()=>Promise.resolve())();let lr=(()=>{class j extends Pt{constructor(F,oe,tt){super(),this.callSetDisabledState=tt,this.submitted=!1,this._directives=new Set,this.ngSubmit=new m.vpe,this.form=new Ne({},On(F),rr(oe))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(F){fn.then(()=>{const oe=this._findContainer(F.path);F.control=oe.registerControl(F.name,F.control),Nt(F.control,F,this.callSetDisabledState),F.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(F)})}getControl(F){return this.form.get(F.path)}removeControl(F){fn.then(()=>{const oe=this._findContainer(F.path);oe&&oe.removeControl(F.name),this._directives.delete(F)})}addFormGroup(F){fn.then(()=>{const oe=this._findContainer(F.path),tt=new Ne({});qn(tt,F),oe.registerControl(F.name,tt),tt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(F){fn.then(()=>{const oe=this._findContainer(F.path);oe&&oe.removeControl(F.name)})}getFormGroup(F){return this.form.get(F.path)}updateModel(F,oe){fn.then(()=>{this.form.get(F.path).setValue(oe)})}setValue(F){this.control.setValue(F)}onSubmit(F){return this.submitted=!0,Mr(this.form,this._directives),this.ngSubmit.emit(F),"dialog"===F?.target?.method}onReset(){this.resetForm()}resetForm(F){this.form.reset(F),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(F){return F.pop(),F.length?this.form.get(F):this.form}}return j.\u0275fac=function(F){return new(F||j)(m.Y36(je,10),m.Y36($e,10),m.Y36(ue,8))},j.\u0275dir=m.lG2({type:j,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(F,oe){1&F&&m.NdJ("submit",function(sn){return oe.onSubmit(sn)})("reset",function(){return oe.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([Cn]),m.qOj]}),j})();function mr(j,B){const F=j.indexOf(B);F>-1&&j.splice(F,1)}function wr(j){return"object"==typeof j&&null!==j&&2===Object.keys(j).length&&"value"in j&&"disabled"in j}const Ki=class extends rt{constructor(B=null,F,oe){super(Qe(F),Re(oe,F)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(B),this._setUpdateStrategy(F),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),de(F)&&(F.nonNullable||F.initialValueIsDefault)&&(this.defaultValue=wr(B)?B.value:B)}setValue(B,F={}){this.value=this._pendingValue=B,this._onChange.length&&!1!==F.emitModelToViewChange&&this._onChange.forEach(oe=>oe(this.value,!1!==F.emitViewToModelChange)),this.updateValueAndValidity(F)}patchValue(B,F={}){this.setValue(B,F)}reset(B=this.defaultValue,F={}){this._applyFormState(B),this.markAsPristine(F),this.markAsUntouched(F),this.setValue(this.value,F),this._pendingChange=!1}_updateValue(){}_anyControls(B){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(B){this._onChange.push(B)}_unregisterOnChange(B){mr(this._onChange,B)}registerOnDisabledChange(B){this._onDisabledChange.push(B)}_unregisterOnDisabledChange(B){mr(this._onDisabledChange,B)}_forEachChild(B){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(B){wr(B)?(this.value=this._pendingValue=B.value,B.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=B}};let Bn=(()=>{class j extends Pt{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return ze(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return j.\u0275fac=function(){let B;return function(oe){return(B||(B=m.n5z(j)))(oe||j)}}(),j.\u0275dir=m.lG2({type:j,features:[m.qOj]}),j})();const nt={provide:Pt,useExisting:(0,m.Gpc)(()=>Ge)};let Ge=(()=>{class j extends Bn{constructor(F,oe,tt){super(),this._parent=F,this._setValidators(oe),this._setAsyncValidators(tt)}_checkParentType(){}}return j.\u0275fac=function(F){return new(F||j)(m.Y36(Pt,5),m.Y36(je,10),m.Y36($e,10))},j.\u0275dir=m.lG2({type:j,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[m._Bn([nt]),m.qOj]}),j})();const dt={provide:kn,useExisting:(0,m.Gpc)(()=>jt)},Vt=(()=>Promise.resolve())();let jt=(()=>{class j extends kn{constructor(F,oe,tt,sn,Zr,ht){super(),this._changeDetectorRef=Zr,this.callSetDisabledState=ht,this.control=new Ki,this._registered=!1,this.update=new m.vpe,this._parent=F,this._setValidators(oe),this._setAsyncValidators(tt),this.valueAccessor=Rt(0,sn)}ngOnChanges(F){if(this._checkForErrors(),!this._registered||"name"in F){if(this._registered&&(this._checkName(),this.formDirective)){const oe=F.name.previousValue;this.formDirective.removeControl({name:oe,path:this._getPath(oe)})}this._setUpControl()}"isDisabled"in F&&this._updateDisabled(F),Ls(F,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Nt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(F){Vt.then(()=>{this.control.setValue(F,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(F){const oe=F.isDisabled.currentValue,tt=0!==oe&&(0,m.D6c)(oe);Vt.then(()=>{tt&&!this.control.disabled?this.control.disable():!tt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(F){return this._parent?ze(F,this._parent):[F]}}return j.\u0275fac=function(F){return new(F||j)(m.Y36(Pt,9),m.Y36(je,10),m.Y36($e,10),m.Y36(W,10),m.Y36(m.sBO,8),m.Y36(ue,8))},j.\u0275dir=m.lG2({type:j,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([dt]),m.qOj,m.TTD]}),j})(),dn=(()=>{class j{}return j.\u0275fac=function(F){return new(F||j)},j.\u0275dir=m.lG2({type:j,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),j})();const dr={provide:W,useExisting:(0,m.Gpc)(()=>yr),multi:!0};let yr=(()=>{class j extends X{writeValue(F){this.setProperty("value",F??"")}registerOnChange(F){this.onChange=oe=>{F(""==oe?null:parseFloat(oe))}}}return j.\u0275fac=function(){let B;return function(oe){return(B||(B=m.n5z(j)))(oe||j)}}(),j.\u0275dir=m.lG2({type:j,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(F,oe){1&F&&m.NdJ("input",function(sn){return oe.onChange(sn.target.value)})("blur",function(){return oe.onTouched()})},features:[m._Bn([dr]),m.qOj]}),j})();const ai={provide:W,useExisting:(0,m.Gpc)(()=>Qr),multi:!0};let Tr=(()=>{class j{}return j.\u0275fac=function(F){return new(F||j)},j.\u0275mod=m.oAB({type:j}),j.\u0275inj=m.cJS({}),j})(),_i=(()=>{class j{constructor(){this._accessors=[]}add(F,oe){this._accessors.push([F,oe])}remove(F){for(let oe=this._accessors.length-1;oe>=0;--oe)if(this._accessors[oe][1]===F)return void this._accessors.splice(oe,1)}select(F){this._accessors.forEach(oe=>{this._isSameGroup(oe,F)&&oe[1]!==F&&oe[1].fireUncheck(F.value)})}_isSameGroup(F,oe){return!!F[0].control&&F[0]._parent===oe._control._parent&&F[1].name===oe.name}}return j.\u0275fac=function(F){return new(F||j)},j.\u0275prov=m.Yz7({token:j,factory:j.\u0275fac,providedIn:Tr}),j})(),Qr=(()=>{class j extends X{constructor(F,oe,tt,sn){super(F,oe),this._registry=tt,this._injector=sn,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,m.f3M)(ue,{optional:!0})??Se}ngOnInit(){this._control=this._injector.get(kn),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(F){this._state=F===this.value,this.setProperty("checked",this._state)}registerOnChange(F){this._fn=F,this.onChange=()=>{F(this.value),this._registry.select(this)}}setDisabledState(F){(this.setDisabledStateFired||F||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",F),this.setDisabledStateFired=!0}fireUncheck(F){this.writeValue(F)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return j.\u0275fac=function(F){return new(F||j)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(_i),m.Y36(m.zs3))},j.\u0275dir=m.lG2({type:j,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(F,oe){1&F&&m.NdJ("change",function(){return oe.onChange()})("blur",function(){return oe.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[m._Bn([ai]),m.qOj]}),j})();const So={provide:W,useExisting:(0,m.Gpc)(()=>li),multi:!0};let li=(()=>{class j extends X{writeValue(F){this.setProperty("value",parseFloat(F))}registerOnChange(F){this.onChange=oe=>{F(""==oe?null:parseFloat(oe))}}}return j.\u0275fac=function(){let B;return function(oe){return(B||(B=m.n5z(j)))(oe||j)}}(),j.\u0275dir=m.lG2({type:j,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(F,oe){1&F&&m.NdJ("change",function(sn){return oe.onChange(sn.target.value)})("input",function(sn){return oe.onChange(sn.target.value)})("blur",function(){return oe.onTouched()})},features:[m._Bn([So]),m.qOj]}),j})();const En=new m.OlP("NgModelWithFormControlWarning"),Is={provide:kn,useExisting:(0,m.Gpc)(()=>Gs)};let Gs=(()=>{class j extends kn{set isDisabled(F){}constructor(F,oe,tt,sn,Zr){super(),this._ngModelWarningConfig=sn,this.callSetDisabledState=Zr,this.update=new m.vpe,this._ngModelWarningSent=!1,this._setValidators(F),this._setAsyncValidators(oe),this.valueAccessor=Rt(0,tt)}ngOnChanges(F){if(this._isControlChanged(F)){const oe=F.form.previousValue;oe&&Qt(oe,this,!1),Nt(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Ls(F,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Qt(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}_isControlChanged(F){return F.hasOwnProperty("form")}}return j._ngModelWarningSentOnce=!1,j.\u0275fac=function(F){return new(F||j)(m.Y36(je,10),m.Y36($e,10),m.Y36(W,10),m.Y36(En,8),m.Y36(ue,8))},j.\u0275dir=m.lG2({type:j,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[m._Bn([Is]),m.qOj,m.TTD]}),j})();const ss={provide:Pt,useExisting:(0,m.Gpc)(()=>hr)};let hr=(()=>{class j extends Pt{constructor(F,oe,tt){super(),this.callSetDisabledState=tt,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new m.vpe,this._setValidators(F),this._setAsyncValidators(oe)}ngOnChanges(F){this._checkFormPresent(),F.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ct(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(F){const oe=this.form.get(F.path);return Nt(oe,F,this.callSetDisabledState),oe.updateValueAndValidity({emitEvent:!1}),this.directives.push(F),oe}getControl(F){return this.form.get(F.path)}removeControl(F){Qt(F.control||null,F,!1),function Mn(j,B){const F=j.indexOf(B);F>-1&&j.splice(F,1)}(this.directives,F)}addFormGroup(F){this._setUpFormContainer(F)}removeFormGroup(F){this._cleanUpFormContainer(F)}getFormGroup(F){return this.form.get(F.path)}addFormArray(F){this._setUpFormContainer(F)}removeFormArray(F){this._cleanUpFormContainer(F)}getFormArray(F){return this.form.get(F.path)}updateModel(F,oe){this.form.get(F.path).setValue(oe)}onSubmit(F){return this.submitted=!0,Mr(this.form,this.directives),this.ngSubmit.emit(F),"dialog"===F?.target?.method}onReset(){this.resetForm()}resetForm(F){this.form.reset(F),this.submitted=!1}_updateDomValue(){this.directives.forEach(F=>{const oe=F.control,tt=this.form.get(F.path);oe!==tt&&(Qt(oe||null,F),(j=>j instanceof Ki)(tt)&&(Nt(tt,F,this.callSetDisabledState),F.control=tt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(F){const oe=this.form.get(F.path);qn(oe,F),oe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(F){if(this.form){const oe=this.form.get(F.path);oe&&function en(j,B){return ct(j,B)}(oe,F)&&oe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){fi(this.form,this),this._oldForm&&ct(this._oldForm,this)}_checkFormPresent(){}}return j.\u0275fac=function(F){return new(F||j)(m.Y36(je,10),m.Y36($e,10),m.Y36(ue,8))},j.\u0275dir=m.lG2({type:j,selectors:[["","formGroup",""]],hostBindings:function(F,oe){1&F&&m.NdJ("submit",function(sn){return oe.onSubmit(sn)})("reset",function(){return oe.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m._Bn([ss]),m.qOj,m.TTD]}),j})();const yo={provide:Pt,useExisting:(0,m.Gpc)(()=>qr)};let qr=(()=>{class j extends Bn{constructor(F,oe,tt){super(),this._parent=F,this._setValidators(oe),this._setAsyncValidators(tt)}_checkParentType(){Ws(this._parent)}}return j.\u0275fac=function(F){return new(F||j)(m.Y36(Pt,13),m.Y36(je,10),m.Y36($e,10))},j.\u0275dir=m.lG2({type:j,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[m._Bn([yo]),m.qOj]}),j})();const os={provide:Pt,useExisting:(0,m.Gpc)(()=>Gn)};let Gn=(()=>{class j extends Pt{constructor(F,oe,tt){super(),this._parent=F,this._setValidators(oe),this._setAsyncValidators(tt)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return ze(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Ws(this._parent)}}return j.\u0275fac=function(F){return new(F||j)(m.Y36(Pt,13),m.Y36(je,10),m.Y36($e,10))},j.\u0275dir=m.lG2({type:j,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[m._Bn([os]),m.qOj]}),j})();function Ws(j){return!(j instanceof qr||j instanceof hr||j instanceof Gn)}const zs={provide:kn,useExisting:(0,m.Gpc)(()=>so)};let so=(()=>{class j extends kn{set isDisabled(F){}constructor(F,oe,tt,sn,Zr){super(),this._ngModelWarningConfig=Zr,this._added=!1,this.update=new m.vpe,this._ngModelWarningSent=!1,this._parent=F,this._setValidators(oe),this._setAsyncValidators(tt),this.valueAccessor=Rt(0,sn)}ngOnChanges(F){this._added||this._setUpControl(),Ls(F,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}get path(){return ze(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return j._ngModelWarningSentOnce=!1,j.\u0275fac=function(F){return new(F||j)(m.Y36(Pt,13),m.Y36(je,10),m.Y36($e,10),m.Y36(W,10),m.Y36(En,8))},j.\u0275dir=m.lG2({type:j,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[m._Bn([zs]),m.qOj,m.TTD]}),j})();const Cl={provide:W,useExisting:(0,m.Gpc)(()=>oo),multi:!0};function Bo(j,B){return null==j?`${B}`:(B&&"object"==typeof B&&(B="Object"),`${j}: ${B}`.slice(0,50))}let oo=(()=>{class j extends X{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(F){this._compareWith=F}writeValue(F){this.value=F;const tt=Bo(this._getOptionId(F),F);this.setProperty("value",tt)}registerOnChange(F){this.onChange=oe=>{this.value=this._getOptionValue(oe),F(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(F){for(const oe of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(oe),F))return oe;return null}_getOptionValue(F){const oe=function bo(j){return j.split(":")[0]}(F);return this._optionMap.has(oe)?this._optionMap.get(oe):F}}return j.\u0275fac=function(){let B;return function(oe){return(B||(B=m.n5z(j)))(oe||j)}}(),j.\u0275dir=m.lG2({type:j,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(F,oe){1&F&&m.NdJ("change",function(sn){return oe.onChange(sn.target.value)})("blur",function(){return oe.onTouched()})},inputs:{compareWith:"compareWith"},features:[m._Bn([Cl]),m.qOj]}),j})(),Fs=(()=>{class j{constructor(F,oe,tt){this._element=F,this._renderer=oe,this._select=tt,this._select&&(this.id=this._select._registerOption())}set ngValue(F){null!=this._select&&(this._select._optionMap.set(this.id,F),this._setElementValue(Bo(this.id,F)),this._select.writeValue(this._select.value))}set value(F){this._setElementValue(F),this._select&&this._select.writeValue(this._select.value)}_setElementValue(F){this._renderer.setProperty(this._element.nativeElement,"value",F)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return j.\u0275fac=function(F){return new(F||j)(m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(oo,9))},j.\u0275dir=m.lG2({type:j,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),j})();const la={provide:W,useExisting:(0,m.Gpc)(()=>Ks),multi:!0};function _o(j,B){return null==j?`${B}`:("string"==typeof B&&(B=`'${B}'`),B&&"object"==typeof B&&(B="Object"),`${j}: ${B}`.slice(0,50))}let Ks=(()=>{class j extends X{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(F){this._compareWith=F}writeValue(F){let oe;if(this.value=F,Array.isArray(F)){const tt=F.map(sn=>this._getOptionId(sn));oe=(sn,Zr)=>{sn._setSelected(tt.indexOf(Zr.toString())>-1)}}else oe=(tt,sn)=>{tt._setSelected(!1)};this._optionMap.forEach(oe)}registerOnChange(F){this.onChange=oe=>{const tt=[],sn=oe.selectedOptions;if(void 0!==sn){const Zr=sn;for(let ht=0;ht<Zr.length;ht++){const Us=this._getOptionValue(Zr[ht].value);tt.push(Us)}}else{const Zr=oe.options;for(let ht=0;ht<Zr.length;ht++){const Nn=Zr[ht];if(Nn.selected){const Us=this._getOptionValue(Nn.value);tt.push(Us)}}}this.value=tt,F(tt)}}_registerOption(F){const oe=(this._idCounter++).toString();return this._optionMap.set(oe,F),oe}_getOptionId(F){for(const oe of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(oe)._value,F))return oe;return null}_getOptionValue(F){const oe=function Bi(j){return j.split(":")[0]}(F);return this._optionMap.has(oe)?this._optionMap.get(oe)._value:F}}return j.\u0275fac=function(){let B;return function(oe){return(B||(B=m.n5z(j)))(oe||j)}}(),j.\u0275dir=m.lG2({type:j,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(F,oe){1&F&&m.NdJ("change",function(sn){return oe.onChange(sn.target)})("blur",function(){return oe.onTouched()})},inputs:{compareWith:"compareWith"},features:[m._Bn([la]),m.qOj]}),j})(),Br=(()=>{class j{constructor(F,oe,tt){this._element=F,this._renderer=oe,this._select=tt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(F){null!=this._select&&(this._value=F,this._setElementValue(_o(this.id,F)),this._select.writeValue(this._select.value))}set value(F){this._select?(this._value=F,this._setElementValue(_o(this.id,F)),this._select.writeValue(this._select.value)):this._setElementValue(F)}_setElementValue(F){this._renderer.setProperty(this._element.nativeElement,"value",F)}_setSelected(F){this._renderer.setProperty(this._element.nativeElement,"selected",F)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return j.\u0275fac=function(F){return new(F||j)(m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(Ks,9))},j.\u0275dir=m.lG2({type:j,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),j})();function Ao(j){return"number"==typeof j?j:parseInt(j,10)}function vo(j){return"number"==typeof j?j:parseFloat(j)}let ao=(()=>{class j{constructor(){this._validator=ut}ngOnChanges(F){if(this.inputName in F){const oe=this.normalizeInput(F[this.inputName].currentValue);this._enabled=this.enabled(oe),this._validator=this._enabled?this.createValidator(oe):ut,this._onChange&&this._onChange()}}validate(F){return this._validator(F)}registerOnValidatorChange(F){this._onChange=F}enabled(F){return null!=F}}return j.\u0275fac=function(F){return new(F||j)},j.\u0275dir=m.lG2({type:j,features:[m.TTD]}),j})();const lo={provide:je,useExisting:(0,m.Gpc)(()=>ua),multi:!0};let ua=(()=>{class j extends ao{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=F=>vo(F),this.createValidator=F=>yt(F)}}return j.\u0275fac=function(){let B;return function(oe){return(B||(B=m.n5z(j)))(oe||j)}}(),j.\u0275dir=m.lG2({type:j,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(F,oe){2&F&&m.uIk("max",oe._enabled?oe.max:null)},inputs:{max:"max"},features:[m._Bn([lo]),m.qOj]}),j})();const fs={provide:je,useExisting:(0,m.Gpc)(()=>Cs),multi:!0};let Cs=(()=>{class j extends ao{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=F=>vo(F),this.createValidator=F=>Me(F)}}return j.\u0275fac=function(){let B;return function(oe){return(B||(B=m.n5z(j)))(oe||j)}}(),j.\u0275dir=m.lG2({type:j,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(F,oe){2&F&&m.uIk("min",oe._enabled?oe.min:null)},inputs:{min:"min"},features:[m._Bn([fs]),m.qOj]}),j})();const xn={provide:je,useExisting:(0,m.Gpc)(()=>ws),multi:!0};let ws=(()=>{class j extends ao{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=m.D6c,this.createValidator=F=>Et}enabled(F){return F}}return j.\u0275fac=function(){let B;return function(oe){return(B||(B=m.n5z(j)))(oe||j)}}(),j.\u0275dir=m.lG2({type:j,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(F,oe){2&F&&m.uIk("required",oe._enabled?"":null)},inputs:{required:"required"},features:[m._Bn([xn]),m.qOj]}),j})();const Ho={provide:je,useExisting:(0,m.Gpc)(()=>vi),multi:!0};let vi=(()=>{class j extends ao{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=F=>Ao(F),this.createValidator=F=>At(F)}}return j.\u0275fac=function(){let B;return function(oe){return(B||(B=m.n5z(j)))(oe||j)}}(),j.\u0275dir=m.lG2({type:j,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(F,oe){2&F&&m.uIk("minlength",oe._enabled?oe.minlength:null)},inputs:{minlength:"minlength"},features:[m._Bn([Ho]),m.qOj]}),j})();const uo={provide:je,useExisting:(0,m.Gpc)(()=>ps),multi:!0};let ps=(()=>{class j extends ao{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=F=>Ao(F),this.createValidator=F=>Xe(F)}}return j.\u0275fac=function(){let B;return function(oe){return(B||(B=m.n5z(j)))(oe||j)}}(),j.\u0275dir=m.lG2({type:j,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(F,oe){2&F&&m.uIk("maxlength",oe._enabled?oe.maxlength:null)},inputs:{maxlength:"maxlength"},features:[m._Bn([uo]),m.qOj]}),j})();const $r={provide:je,useExisting:(0,m.Gpc)(()=>ji),multi:!0};let ji=(()=>{class j extends ao{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=F=>F,this.createValidator=F=>Ke(F)}}return j.\u0275fac=function(){let B;return function(oe){return(B||(B=m.n5z(j)))(oe||j)}}(),j.\u0275dir=m.lG2({type:j,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(F,oe){2&F&&m.uIk("pattern",oe._enabled?oe.pattern:null)},inputs:{pattern:"pattern"},features:[m._Bn([$r]),m.qOj]}),j})(),Go=(()=>{class j{}return j.\u0275fac=function(F){return new(F||j)},j.\u0275mod=m.oAB({type:j}),j.\u0275inj=m.cJS({imports:[Tr]}),j})();class Sr extends rt{constructor(B,F,oe){super(Qe(F),Re(oe,F)),this.controls=B,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(B){return this.controls[this._adjustIndex(B)]}push(B,F={}){this.controls.push(B),this._registerControl(B),this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}insert(B,F,oe={}){this.controls.splice(B,0,F),this._registerControl(F),this.updateValueAndValidity({emitEvent:oe.emitEvent})}removeAt(B,F={}){let oe=this._adjustIndex(B);oe<0&&(oe=0),this.controls[oe]&&this.controls[oe]._registerOnCollectionChange(()=>{}),this.controls.splice(oe,1),this.updateValueAndValidity({emitEvent:F.emitEvent})}setControl(B,F,oe={}){let tt=this._adjustIndex(B);tt<0&&(tt=0),this.controls[tt]&&this.controls[tt]._registerOnCollectionChange(()=>{}),this.controls.splice(tt,1),F&&(this.controls.splice(tt,0,F),this._registerControl(F)),this.updateValueAndValidity({emitEvent:oe.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(B,F={}){De(this,!1,B),B.forEach((oe,tt)=>{me(this,!1,tt),this.at(tt).setValue(oe,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(B,F={}){null!=B&&(B.forEach((oe,tt)=>{this.at(tt)&&this.at(tt).patchValue(oe,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(B=[],F={}){this._forEachChild((oe,tt)=>{oe.reset(B[tt],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this.controls.map(B=>B.getRawValue())}clear(B={}){this.controls.length<1||(this._forEachChild(F=>F._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:B.emitEvent}))}_adjustIndex(B){return B<0?B+this.length:B}_syncPendingControls(){let B=this.controls.reduce((F,oe)=>!!oe._syncPendingControls()||F,!1);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_forEachChild(B){this.controls.forEach((F,oe)=>{B(F,oe)})}_updateValue(){this.value=this.controls.filter(B=>B.enabled||this.disabled).map(B=>B.value)}_anyControls(B){return this.controls.some(F=>F.enabled&&B(F))}_setUpControls(){this._forEachChild(B=>this._registerControl(B))}_allControlsDisabled(){for(const B of this.controls)if(B.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(B){B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)}_find(B){return this.at(B)??null}}function Ts(j){return!!j&&(void 0!==j.asyncValidators||void 0!==j.validators||void 0!==j.updateOn)}let gs=(()=>{class j{constructor(){this.useNonNullable=!1}get nonNullable(){const F=new j;return F.useNonNullable=!0,F}group(F,oe=null){const tt=this._reduceControls(F);let sn={};return Ts(oe)?sn=oe:null!==oe&&(sn.validators=oe.validator,sn.asyncValidators=oe.asyncValidator),new Ne(tt,sn)}record(F,oe=null){const tt=this._reduceControls(F);return new Oe(tt,oe)}control(F,oe,tt){let sn={};return this.useNonNullable?(Ts(oe)?sn=oe:(sn.validators=oe,sn.asyncValidators=tt),new Ki(F,{...sn,nonNullable:!0})):new Ki(F,oe,tt)}array(F,oe,tt){const sn=F.map(Zr=>this._createControl(Zr));return new Sr(sn,oe,tt)}_reduceControls(F){const oe={};return Object.keys(F).forEach(tt=>{oe[tt]=this._createControl(F[tt])}),oe}_createControl(F){return F instanceof Ki||F instanceof rt?F:Array.isArray(F)?this.control(F[0],F.length>1?F[1]:null,F.length>2?F[2]:null):this.control(F)}}return j.\u0275fac=function(F){return new(F||j)},j.\u0275prov=m.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})(),Ln=(()=>{class j{static withConfig(F){return{ngModule:j,providers:[{provide:ue,useValue:F.callSetDisabledState??Se}]}}}return j.\u0275fac=function(F){return new(F||j)},j.\u0275mod=m.oAB({type:j}),j.\u0275inj=m.cJS({imports:[Go]}),j})(),Wo=(()=>{class j{static withConfig(F){return{ngModule:j,providers:[{provide:En,useValue:F.warnOnNgModelWithFormControl??"always"},{provide:ue,useValue:F.callSetDisabledState??Se}]}}}return j.\u0275fac=function(F){return new(F||j)},j.\u0275mod=m.oAB({type:j}),j.\u0275inj=m.cJS({imports:[Go]}),j})()},1481:(Ee,se,D)=>{D.d(se,{Dx:()=>sr,H7:()=>rt,b2:()=>Kr,h_:()=>br,q6:()=>zi,se:()=>qe});var m=D(6895),C=D(4650);class J extends m.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class V extends J{static makeCurrent(){(0,m.HT)(new V)}onAndCancel(we,ue,Se){return we.addEventListener(ue,Se,!1),()=>{we.removeEventListener(ue,Se,!1)}}dispatchEvent(we,ue){we.dispatchEvent(ue)}remove(we){we.parentNode&&we.parentNode.removeChild(we)}createElement(we,ue){return(ue=ue||this.getDefaultDocument()).createElement(we)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(we){return we.nodeType===Node.ELEMENT_NODE}isShadowRoot(we){return we instanceof DocumentFragment}getGlobalEventTarget(we,ue){return"window"===ue?window:"document"===ue?we:"body"===ue?we.body:null}getBaseHref(we){const ue=function te(){return q=q||document.querySelector("base"),q?q.getAttribute("href"):null}();return null==ue?null:function W(Oe){X=X||document.createElement("a"),X.setAttribute("href",Oe);const we=X.pathname;return"/"===we.charAt(0)?we:`/${we}`}(ue)}resetBaseElement(){q=null}getUserAgent(){return window.navigator.userAgent}getCookie(we){return(0,m.Mx)(document.cookie,we)}}let X,q=null;const ee=new C.OlP("TRANSITION_ID"),le=[{provide:C.ip1,useFactory:function Y(Oe,we,ue){return()=>{ue.get(C.CZH).donePromise.then(()=>{const Se=(0,m.q)(),ze=we.querySelectorAll(`style[ng-transition="${Oe}"]`);for(let Nt=0;Nt<ze.length;Nt++)Se.remove(ze[Nt])})}},deps:[ee,m.K0,C.zs3],multi:!0}];let Pe=(()=>{class Oe{build(){return new XMLHttpRequest}}return Oe.\u0275fac=function(ue){return new(ue||Oe)},Oe.\u0275prov=C.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const He=new C.OlP("EventManagerPlugins");let Ae=(()=>{class Oe{constructor(ue,Se){this._zone=Se,this._eventNameToPlugin=new Map,ue.forEach(ze=>{ze.manager=this}),this._plugins=ue.slice().reverse()}addEventListener(ue,Se,ze){return this._findPluginFor(Se).addEventListener(ue,Se,ze)}addGlobalEventListener(ue,Se,ze){return this._findPluginFor(Se).addGlobalEventListener(ue,Se,ze)}getZone(){return this._zone}_findPluginFor(ue){const Se=this._eventNameToPlugin.get(ue);if(Se)return Se;const ze=this._plugins;for(let Nt=0;Nt<ze.length;Nt++){const Qt=ze[Nt];if(Qt.supports(ue))return this._eventNameToPlugin.set(ue,Qt),Qt}throw new Error(`No event manager plugin found for event ${ue}`)}}return Oe.\u0275fac=function(ue){return new(ue||Oe)(C.LFG(He),C.LFG(C.R0b))},Oe.\u0275prov=C.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();class Ue{constructor(we){this._doc=we}addGlobalEventListener(we,ue,Se){const ze=(0,m.q)().getGlobalEventTarget(this._doc,we);if(!ze)throw new Error(`Unsupported event target ${ze} for event ${ue}`);return this.addEventListener(ze,ue,Se)}}let ke=(()=>{class Oe{constructor(){this.usageCount=new Map}addStyles(ue){for(const Se of ue)1===this.changeUsageCount(Se,1)&&this.onStyleAdded(Se)}removeStyles(ue){for(const Se of ue)0===this.changeUsageCount(Se,-1)&&this.onStyleRemoved(Se)}onStyleRemoved(ue){}onStyleAdded(ue){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(ue,Se){const ze=this.usageCount;let Nt=ze.get(ue)??0;return Nt+=Se,Nt>0?ze.set(ue,Nt):ze.delete(ue),Nt}ngOnDestroy(){for(const ue of this.getAllStyles())this.onStyleRemoved(ue);this.usageCount.clear()}}return Oe.\u0275fac=function(ue){return new(ue||Oe)},Oe.\u0275prov=C.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})(),je=(()=>{class Oe extends ke{constructor(ue){super(),this.doc=ue,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(ue){for(const Se of this.hostNodes)this.addStyleToHost(Se,ue)}onStyleRemoved(ue){const Se=this.styleRef;Se.get(ue)?.forEach(Nt=>Nt.remove()),Se.delete(ue)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(ue){this.hostNodes.add(ue);for(const Se of this.getAllStyles())this.addStyleToHost(ue,Se)}removeHost(ue){this.hostNodes.delete(ue)}addStyleToHost(ue,Se){const ze=this.doc.createElement("style");ze.textContent=Se,ue.appendChild(ze);const Nt=this.styleRef.get(Se);Nt?Nt.push(ze):this.styleRef.set(Se,[ze])}resetHostNodes(){const ue=this.hostNodes;ue.clear(),ue.add(this.doc.head)}}return Oe.\u0275fac=function(ue){return new(ue||Oe)(C.LFG(m.K0))},Oe.\u0275prov=C.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const $e={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Je=/%COMP%/g,Ot=new C.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ke(Oe,we){return we.flat(100).map(ue=>ue.replace(Je,Oe))}function ut(Oe){return we=>{if("__ngUnwrap__"===we)return Oe;!1===Oe(we)&&(we.preventDefault(),we.returnValue=!1)}}let qe=(()=>{class Oe{constructor(ue,Se,ze,Nt){this.eventManager=ue,this.sharedStylesHost=Se,this.appId=ze,this.removeStylesOnCompDestory=Nt,this.rendererByCompId=new Map,this.defaultRenderer=new xt(ue)}createRenderer(ue,Se){if(!ue||!Se)return this.defaultRenderer;const ze=this.getOrCreateRenderer(ue,Se);return ze instanceof On?ze.applyToHost(ue):ze instanceof $t&&ze.applyStyles(),ze}getOrCreateRenderer(ue,Se){const ze=this.rendererByCompId;let Nt=ze.get(Se.id);if(!Nt){const Qt=this.eventManager,$n=this.sharedStylesHost,pr=this.removeStylesOnCompDestory;switch(Se.encapsulation){case C.ifc.Emulated:Nt=new On(Qt,$n,Se,this.appId,pr);break;case C.ifc.ShadowDom:return new on(Qt,$n,ue,Se);default:Nt=new $t(Qt,$n,Se,pr)}Nt.onDestroy=()=>ze.delete(Se.id),ze.set(Se.id,Nt)}return Nt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Oe.\u0275fac=function(ue){return new(ue||Oe)(C.LFG(Ae),C.LFG(je),C.LFG(C.AFp),C.LFG(Ot))},Oe.\u0275prov=C.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();class xt{constructor(we){this.eventManager=we,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(we,ue){return ue?document.createElementNS($e[ue]||ue,we):document.createElement(we)}createComment(we){return document.createComment(we)}createText(we){return document.createTextNode(we)}appendChild(we,ue){(Jn(we)?we.content:we).appendChild(ue)}insertBefore(we,ue,Se){we&&(Jn(we)?we.content:we).insertBefore(ue,Se)}removeChild(we,ue){we&&we.removeChild(ue)}selectRootElement(we,ue){let Se="string"==typeof we?document.querySelector(we):we;if(!Se)throw new Error(`The selector "${we}" did not match any elements`);return ue||(Se.textContent=""),Se}parentNode(we){return we.parentNode}nextSibling(we){return we.nextSibling}setAttribute(we,ue,Se,ze){if(ze){ue=ze+":"+ue;const Nt=$e[ze];Nt?we.setAttributeNS(Nt,ue,Se):we.setAttribute(ue,Se)}else we.setAttribute(ue,Se)}removeAttribute(we,ue,Se){if(Se){const ze=$e[Se];ze?we.removeAttributeNS(ze,ue):we.removeAttribute(`${Se}:${ue}`)}else we.removeAttribute(ue)}addClass(we,ue){we.classList.add(ue)}removeClass(we,ue){we.classList.remove(ue)}setStyle(we,ue,Se,ze){ze&(C.JOm.DashCase|C.JOm.Important)?we.style.setProperty(ue,Se,ze&C.JOm.Important?"important":""):we.style[ue]=Se}removeStyle(we,ue,Se){Se&C.JOm.DashCase?we.style.removeProperty(ue):we.style[ue]=""}setProperty(we,ue,Se){we[ue]=Se}setValue(we,ue){we.nodeValue=ue}listen(we,ue,Se){return"string"==typeof we?this.eventManager.addGlobalEventListener(we,ue,ut(Se)):this.eventManager.addEventListener(we,ue,ut(Se))}}function Jn(Oe){return"TEMPLATE"===Oe.tagName&&void 0!==Oe.content}class on extends xt{constructor(we,ue,Se,ze){super(we),this.sharedStylesHost=ue,this.hostEl=Se,this.shadowRoot=Se.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Nt=Ke(ze.id,ze.styles);for(const Qt of Nt){const $n=document.createElement("style");$n.textContent=Qt,this.shadowRoot.appendChild($n)}}nodeOrShadowRoot(we){return we===this.hostEl?this.shadowRoot:we}appendChild(we,ue){return super.appendChild(this.nodeOrShadowRoot(we),ue)}insertBefore(we,ue,Se){return super.insertBefore(this.nodeOrShadowRoot(we),ue,Se)}removeChild(we,ue){return super.removeChild(this.nodeOrShadowRoot(we),ue)}parentNode(we){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(we)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class $t extends xt{constructor(we,ue,Se,ze,Nt=Se.id){super(we),this.sharedStylesHost=ue,this.removeStylesOnCompDestory=ze,this.rendererUsageCount=0,this.styles=Ke(Nt,Se.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class On extends $t{constructor(we,ue,Se,ze,Nt){const Qt=ze+"-"+Se.id;super(we,ue,Se,Nt,Qt),this.contentAttr=function At(Oe){return"_ngcontent-%COMP%".replace(Je,Oe)}(Qt),this.hostAttr=function Xe(Oe){return"_nghost-%COMP%".replace(Je,Oe)}(Qt)}applyToHost(we){this.applyStyles(),this.setAttribute(we,this.hostAttr,"")}createElement(we,ue){const Se=super.createElement(we,ue);return super.setAttribute(Se,this.contentAttr,""),Se}}let gn=(()=>{class Oe extends Ue{constructor(ue){super(ue)}supports(ue){return!0}addEventListener(ue,Se,ze){return ue.addEventListener(Se,ze,!1),()=>this.removeEventListener(ue,Se,ze)}removeEventListener(ue,Se,ze){return ue.removeEventListener(Se,ze)}}return Oe.\u0275fac=function(ue){return new(ue||Oe)(C.LFG(m.K0))},Oe.\u0275prov=C.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const rr=["alt","control","meta","shift"],zr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bn={alt:Oe=>Oe.altKey,control:Oe=>Oe.ctrlKey,meta:Oe=>Oe.metaKey,shift:Oe=>Oe.shiftKey};let un=(()=>{class Oe extends Ue{constructor(ue){super(ue)}supports(ue){return null!=Oe.parseEventName(ue)}addEventListener(ue,Se,ze){const Nt=Oe.parseEventName(Se),Qt=Oe.eventCallback(Nt.fullKey,ze,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,m.q)().onAndCancel(ue,Nt.domEventName,Qt))}static parseEventName(ue){const Se=ue.toLowerCase().split("."),ze=Se.shift();if(0===Se.length||"keydown"!==ze&&"keyup"!==ze)return null;const Nt=Oe._normalizeKey(Se.pop());let Qt="",$n=Se.indexOf("code");if($n>-1&&(Se.splice($n,1),Qt="code."),rr.forEach(fi=>{const ct=Se.indexOf(fi);ct>-1&&(Se.splice(ct,1),Qt+=fi+".")}),Qt+=Nt,0!=Se.length||0===Nt.length)return null;const pr={};return pr.domEventName=ze,pr.fullKey=Qt,pr}static matchEventFullKeyCode(ue,Se){let ze=zr[ue.key]||ue.key,Nt="";return Se.indexOf("code.")>-1&&(ze=ue.code,Nt="code."),!(null==ze||!ze)&&(ze=ze.toLowerCase()," "===ze?ze="space":"."===ze&&(ze="dot"),rr.forEach(Qt=>{Qt!==ze&&(0,bn[Qt])(ue)&&(Nt+=Qt+".")}),Nt+=ze,Nt===Se)}static eventCallback(ue,Se,ze){return Nt=>{Oe.matchEventFullKeyCode(Nt,ue)&&ze.runGuarded(()=>Se(Nt))}}static _normalizeKey(ue){return"esc"===ue?"escape":ue}}return Oe.\u0275fac=function(ue){return new(ue||Oe)(C.LFG(m.K0))},Oe.\u0275prov=C.Yz7({token:Oe,factory:Oe.\u0275fac}),Oe})();const zi=(0,C.eFA)(C._c5,"browser",[{provide:C.Lbi,useValue:m.bD},{provide:C.g9A,useValue:function Pt(){V.makeCurrent()},multi:!0},{provide:m.K0,useFactory:function Kn(){return(0,C.RDi)(document),document},deps:[]}]),ir=new C.OlP(""),nn=[{provide:C.rWj,useClass:class he{addToWindow(we){C.dqk.getAngularTestability=(Se,ze=!0)=>{const Nt=we.findTestabilityInTree(Se,ze);if(null==Nt)throw new Error("Could not find testability for element.");return Nt},C.dqk.getAllAngularTestabilities=()=>we.getAllTestabilities(),C.dqk.getAllAngularRootElements=()=>we.getAllRootElements(),C.dqk.frameworkStabilizers||(C.dqk.frameworkStabilizers=[]),C.dqk.frameworkStabilizers.push(Se=>{const ze=C.dqk.getAllAngularTestabilities();let Nt=ze.length,Qt=!1;const $n=function(pr){Qt=Qt||pr,Nt--,0==Nt&&Se(Qt)};ze.forEach(function(pr){pr.whenStable($n)})})}findTestabilityInTree(we,ue,Se){return null==ue?null:we.getTestability(ue)??(Se?(0,m.q)().isShadowRoot(ue)?this.findTestabilityInTree(we,ue.host,!0):this.findTestabilityInTree(we,ue.parentElement,!0):null)}},deps:[]},{provide:C.lri,useClass:C.dDg,deps:[C.R0b,C.eoX,C.rWj]},{provide:C.dDg,useClass:C.dDg,deps:[C.R0b,C.eoX,C.rWj]}],Ri=[{provide:C.zSh,useValue:"root"},{provide:C.qLn,useFactory:function kn(){return new C.qLn},deps:[]},{provide:He,useClass:gn,multi:!0,deps:[m.K0,C.R0b,C.Lbi]},{provide:He,useClass:un,multi:!0,deps:[m.K0]},{provide:qe,useClass:qe,deps:[Ae,je,C.AFp,Ot]},{provide:C.FYo,useExisting:qe},{provide:ke,useExisting:je},{provide:je,useClass:je,deps:[m.K0]},{provide:Ae,useClass:Ae,deps:[He,C.R0b]},{provide:m.JF,useClass:Pe,deps:[]},[]];let Kr=(()=>{class Oe{constructor(ue){}static withServerTransition(ue){return{ngModule:Oe,providers:[{provide:C.AFp,useValue:ue.appId},{provide:ee,useExisting:C.AFp},le]}}}return Oe.\u0275fac=function(ue){return new(ue||Oe)(C.LFG(ir,12))},Oe.\u0275mod=C.oAB({type:Oe}),Oe.\u0275inj=C.cJS({providers:[...Ri,...nn],imports:[m.ez,C.hGG]}),Oe})(),br=(()=>{class Oe{constructor(ue){this._doc=ue,this._dom=(0,m.q)()}addTag(ue,Se=!1){return ue?this._getOrCreateElement(ue,Se):null}addTags(ue,Se=!1){return ue?ue.reduce((ze,Nt)=>(Nt&&ze.push(this._getOrCreateElement(Nt,Se)),ze),[]):[]}getTag(ue){return ue&&this._doc.querySelector(`meta[${ue}]`)||null}getTags(ue){if(!ue)return[];const Se=this._doc.querySelectorAll(`meta[${ue}]`);return Se?[].slice.call(Se):[]}updateTag(ue,Se){if(!ue)return null;Se=Se||this._parseSelector(ue);const ze=this.getTag(Se);return ze?this._setMetaElementAttributes(ue,ze):this._getOrCreateElement(ue,!0)}removeTag(ue){this.removeTagElement(this.getTag(ue))}removeTagElement(ue){ue&&this._dom.remove(ue)}_getOrCreateElement(ue,Se=!1){if(!Se){const Qt=this._parseSelector(ue),$n=this.getTags(Qt).filter(pr=>this._containsAttributes(ue,pr))[0];if(void 0!==$n)return $n}const ze=this._dom.createElement("meta");return this._setMetaElementAttributes(ue,ze),this._doc.getElementsByTagName("head")[0].appendChild(ze),ze}_setMetaElementAttributes(ue,Se){return Object.keys(ue).forEach(ze=>Se.setAttribute(this._getMetaKeyMap(ze),ue[ze])),Se}_parseSelector(ue){const Se=ue.name?"name":"property";return`${Se}="${ue[Se]}"`}_containsAttributes(ue,Se){return Object.keys(ue).every(ze=>Se.getAttribute(this._getMetaKeyMap(ze))===ue[ze])}_getMetaKeyMap(ue){return In[ue]||ue}}return Oe.\u0275fac=function(ue){return new(ue||Oe)(C.LFG(m.K0))},Oe.\u0275prov=C.Yz7({token:Oe,factory:function(ue){let Se=null;return Se=ue?new ue:function Cr(){return new br((0,C.LFG)(m.K0))}(),Se},providedIn:"root"}),Oe})();const In={httpEquiv:"http-equiv"};let sr=(()=>{class Oe{constructor(ue){this._doc=ue}getTitle(){return this._doc.title}setTitle(ue){this._doc.title=ue||""}}return Oe.\u0275fac=function(ue){return new(ue||Oe)(C.LFG(m.K0))},Oe.\u0275prov=C.Yz7({token:Oe,factory:function(ue){let Se=null;return Se=ue?new ue:function Yn(){return new sr((0,C.LFG)(m.K0))}(),Se},providedIn:"root"}),Oe})();typeof window<"u"&&window;let rt=(()=>{class Oe{}return Oe.\u0275fac=function(ue){return new(ue||Oe)},Oe.\u0275prov=C.Yz7({token:Oe,factory:function(ue){let Se=null;return Se=ue?new(ue||Oe):C.LFG(Mt),Se},providedIn:"root"}),Oe})(),Mt=(()=>{class Oe extends rt{constructor(ue){super(),this._doc=ue}sanitize(ue,Se){if(null==Se)return null;switch(ue){case C.q3G.NONE:return Se;case C.q3G.HTML:return(0,C.qzn)(Se,"HTML")?(0,C.z3N)(Se):(0,C.EiD)(this._doc,String(Se)).toString();case C.q3G.STYLE:return(0,C.qzn)(Se,"Style")?(0,C.z3N)(Se):Se;case C.q3G.SCRIPT:if((0,C.qzn)(Se,"Script"))return(0,C.z3N)(Se);throw new Error("unsafe value used in a script context");case C.q3G.URL:return(0,C.qzn)(Se,"URL")?(0,C.z3N)(Se):(0,C.mCW)(String(Se));case C.q3G.RESOURCE_URL:if((0,C.qzn)(Se,"ResourceURL"))return(0,C.z3N)(Se);throw new Error(`unsafe value used in a resource URL context (see ${C.JZr})`);default:throw new Error(`Unexpected SecurityContext ${ue} (see ${C.JZr})`)}}bypassSecurityTrustHtml(ue){return(0,C.JVY)(ue)}bypassSecurityTrustStyle(ue){return(0,C.L6k)(ue)}bypassSecurityTrustScript(ue){return(0,C.eBb)(ue)}bypassSecurityTrustUrl(ue){return(0,C.LAX)(ue)}bypassSecurityTrustResourceUrl(ue){return(0,C.pB0)(ue)}}return Oe.\u0275fac=function(ue){return new(ue||Oe)(C.LFG(m.K0))},Oe.\u0275prov=C.Yz7({token:Oe,factory:function(ue){let Se=null;return Se=ue?new ue:function Ne(Oe){return new Mt(Oe.get(m.K0))}(C.LFG(C.zs3)),Se},providedIn:"root"}),Oe})()},4793:(Ee,se,D)=>{D.d(se,{Bz:()=>ll,F0:()=>as,OD:()=>Mn,Od:()=>Pa,Q3:()=>lr,gk:()=>Cn,gz:()=>En,lC:()=>Ks,m2:()=>cn,rH:()=>As,wN:()=>Vs,yS:()=>As});var m=D(4650),C=D(457),J=D(9646),V=D(1135),q=D(6805),te=D(9841),X=D(7272),W=D(9770),ee=D(9635),Y=D(2843),le=D(9751),he=D(515),Pe=D(4033),He=D(7579),Ae=D(6895),Ue=D(4004),ke=D(3900),je=D(5698),$e=D(8675),Je=D(9300),Le=D(5577),Me=D(590),yt=D(4351),Et=D(8505),Ye=D(262),Ot=D(5026),At=D(3103),Xe=D(2529),Ke=D(6590),ut=D(2035),qe=D(9718),xt=D(8746),It=D(8343),hn=D(8189),Jn=D(1481);const on="primary",$t=Symbol("RouteTitle");class On{constructor(P){this.params=P||{}}has(P){return Object.prototype.hasOwnProperty.call(this.params,P)}get(P){if(this.has(P)){const w=this.params[P];return Array.isArray(w)?w[0]:w}return null}getAll(P){if(this.has(P)){const w=this.params[P];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function gn(S){return new On(S)}function rr(S,P,w){const N=w.path.split("/");if(N.length>S.length||"full"===w.pathMatch&&(P.hasChildren()||N.length<S.length))return null;const $={};for(let re=0;re<N.length;re++){const ce=N[re],Ve=S[re];if(ce.startsWith(":"))$[ce.substring(1)]=Ve;else if(ce!==Ve.path)return null}return{consumed:S.slice(0,N.length),posParams:$}}function bn(S,P){const w=S?Object.keys(S):void 0,N=P?Object.keys(P):void 0;if(!w||!N||w.length!=N.length)return!1;let $;for(let re=0;re<w.length;re++)if($=w[re],!un(S[$],P[$]))return!1;return!0}function un(S,P){if(Array.isArray(S)&&Array.isArray(P)){if(S.length!==P.length)return!1;const w=[...S].sort(),N=[...P].sort();return w.every(($,re)=>N[re]===$)}return S===P}function ei(S){return Array.prototype.concat.apply([],S)}function vt(S){return S.length>0?S[S.length-1]:null}function Fe(S,P){for(const w in S)S.hasOwnProperty(w)&&P(S[w],w)}function ft(S){return(0,m.CqO)(S)?S:(0,m.QGY)(S)?(0,C.D)(Promise.resolve(S)):(0,J.of)(S)}const Pt=!1,kn={exact:function ir(S,P,w){if(!rn(S.segments,P.segments)||!Cr(S.segments,P.segments,w)||S.numberOfChildren!==P.numberOfChildren)return!1;for(const N in P.children)if(!S.children[N]||!ir(S.children[N],P.children[N],w))return!1;return!0},subset:Ri},Kn={exact:function zi(S,P){return bn(S,P)},subset:function nn(S,P){return Object.keys(P).length<=Object.keys(S).length&&Object.keys(P).every(w=>un(S[w],P[w]))},ignored:()=>!0};function Nr(S,P,w){return kn[w.paths](S.root,P.root,w.matrixParams)&&Kn[w.queryParams](S.queryParams,P.queryParams)&&!("exact"===w.fragment&&S.fragment!==P.fragment)}function Ri(S,P,w){return Kr(S,P,P.segments,w)}function Kr(S,P,w,N){if(S.segments.length>w.length){const $=S.segments.slice(0,w.length);return!(!rn($,w)||P.hasChildren()||!Cr($,w,N))}if(S.segments.length===w.length){if(!rn(S.segments,w)||!Cr(S.segments,w,N))return!1;for(const $ in P.children)if(!S.children[$]||!Ri(S.children[$],P.children[$],N))return!1;return!0}{const $=w.slice(0,S.segments.length),re=w.slice(S.segments.length);return!!(rn(S.segments,$)&&Cr(S.segments,$,N)&&S.children[on])&&Kr(S.children[on],P,re,N)}}function Cr(S,P,w){return P.every((N,$)=>Kn[w](S[$].parameters,N.parameters))}class br{constructor(P=new In([],{}),w={},N=null){this.root=P,this.queryParams=w,this.fragment=N}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gn(this.queryParams)),this._queryParamMap}toString(){return Ur.serialize(this)}}class In{constructor(P,w){this.segments=P,this.children=w,this.parent=null,Fe(w,(N,$)=>N.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ti(this)}}class Yn{constructor(P,w){this.path=P,this.parameters=w}get parameterMap(){return this._parameterMap||(this._parameterMap=gn(this.parameters)),this._parameterMap}toString(){return yi(this)}}function rn(S,P){return S.length===P.length&&S.every((w,N)=>w.path===P[N].path)}let Qn=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=m.Yz7({token:S,factory:function(){return new mi},providedIn:"root"}),S})();class mi{parse(P){const w=new rt(P);return new br(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(P){const w=`/${vr(P.root,!0)}`,N=function Qe(S){const P=Object.keys(S).map(w=>{const N=S[w];return Array.isArray(N)?N.map($=>`${or(w)}=${or($)}`).join("&"):`${or(w)}=${or(N)}`}).filter(w=>!!w);return P.length?`?${P.join("&")}`:""}(P.queryParams);return`${w}${N}${"string"==typeof P.fragment?`#${function wi(S){return encodeURI(S)}(P.fragment)}`:""}`}}const Ur=new mi;function ti(S){return S.segments.map(P=>yi(P)).join("/")}function vr(S,P){if(!S.hasChildren())return ti(S);if(P){const w=S.children[on]?vr(S.children[on],!1):"",N=[];return Fe(S.children,($,re)=>{re!==on&&N.push(`${re}:${vr($,!1)}`)}),N.length>0?`${w}(${N.join("//")})`:w}{const w=function Yt(S,P){let w=[];return Fe(S.children,(N,$)=>{$===on&&(w=w.concat(P(N,$)))}),Fe(S.children,(N,$)=>{$!==on&&(w=w.concat(P(N,$)))}),w}(S,(N,$)=>$===on?[vr(S.children[on],!1)]:[`${$}:${vr(N,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[on]?`${ti(S)}/${w[0]}`:`${ti(S)}/(${w.join("//")})`}}function ni(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function or(S){return ni(S).replace(/%3B/gi,";")}function Un(S){return ni(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vr(S){return decodeURIComponent(S)}function er(S){return Vr(S.replace(/\+/g,"%20"))}function yi(S){return`${Un(S.path)}${function Yr(S){return Object.keys(S).map(P=>`;${Un(P)}=${Un(S[P])}`).join("")}(S.parameters)}`}const Ie=/^[^\/()?;=#]+/;function Re(S){const P=S.match(Ie);return P?P[0]:""}const bt=/^[^=?&#]+/,me=/^[^&#]+/;class rt{constructor(P){this.url=P,this.remaining=P}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new In([],{}):new In([],this.parseChildren())}parseQueryParams(){const P={};if(this.consumeOptional("?"))do{this.parseQueryParam(P)}while(this.consumeOptional("&"));return P}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const P=[];for(this.peekStartsWith("(")||P.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),P.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(P.length>0||Object.keys(w).length>0)&&(N[on]=new In(P,w)),N}parseSegment(){const P=Re(this.remaining);if(""===P&&this.peekStartsWith(";"))throw new m.vHH(4009,Pt);return this.capture(P),new Yn(Vr(P),this.parseMatrixParams())}parseMatrixParams(){const P={};for(;this.consumeOptional(";");)this.parseParam(P);return P}parseParam(P){const w=Re(this.remaining);if(!w)return;this.capture(w);let N="";if(this.consumeOptional("=")){const $=Re(this.remaining);$&&(N=$,this.capture(N))}P[Vr(w)]=Vr(N)}parseQueryParam(P){const w=function de(S){const P=S.match(bt);return P?P[0]:""}(this.remaining);if(!w)return;this.capture(w);let N="";if(this.consumeOptional("=")){const ce=function De(S){const P=S.match(me);return P?P[0]:""}(this.remaining);ce&&(N=ce,this.capture(N))}const $=er(w),re=er(N);if(P.hasOwnProperty($)){let ce=P[$];Array.isArray(ce)||(ce=[ce],P[$]=ce),ce.push(re)}else P[$]=re}parseParens(P){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const N=Re(this.remaining),$=this.remaining[N.length];if("/"!==$&&")"!==$&&";"!==$)throw new m.vHH(4010,Pt);let re;N.indexOf(":")>-1?(re=N.slice(0,N.indexOf(":")),this.capture(re),this.capture(":")):P&&(re=on);const ce=this.parseChildren();w[re]=1===Object.keys(ce).length?ce[on]:new In([],ce),this.consumeOptional("//")}return w}peekStartsWith(P){return this.remaining.startsWith(P)}consumeOptional(P){return!!this.peekStartsWith(P)&&(this.remaining=this.remaining.substring(P.length),!0)}capture(P){if(!this.consumeOptional(P))throw new m.vHH(4011,Pt)}}function Ne(S){return S.segments.length>0?new In([],{[on]:S}):S}function Mt(S){const P={};for(const N of Object.keys(S.children)){const re=Mt(S.children[N]);(re.segments.length>0||re.hasChildren())&&(P[N]=re)}return function Bt(S){if(1===S.numberOfChildren&&S.children[on]){const P=S.children[on];return new In(S.segments.concat(P.segments),P.children)}return S}(new In(S.segments,P))}function Oe(S){return S instanceof br}const we=!1;function Nt(S,P,w,N,$){if(0===w.length)return pr(P.root,P.root,P.root,N,$);const re=function Ze(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new ct(!0,0,S);let P=0,w=!1;const N=S.reduce(($,re,ce)=>{if("object"==typeof re&&null!=re){if(re.outlets){const Ve={};return Fe(re.outlets,(Dt,qt)=>{Ve[qt]="string"==typeof Dt?Dt.split("/"):Dt}),[...$,{outlets:Ve}]}if(re.segmentPath)return[...$,re.segmentPath]}return"string"!=typeof re?[...$,re]:0===ce?(re.split("/").forEach((Ve,Dt)=>{0==Dt&&"."===Ve||(0==Dt&&""===Ve?w=!0:".."===Ve?P++:""!=Ve&&$.push(Ve))}),$):[...$,re]},[]);return new ct(w,P,N)}(w);return re.toRoot()?pr(P.root,P.root,new In([],{}),N,$):function ce(Dt){const qt=function Tn(S,P,w,N){if(S.isAbsolute)return new Ct(P.root,!0,0);if(-1===N)return new Ct(w,w===P.root,0);return function qn(S,P,w){let N=S,$=P,re=w;for(;re>$;){if(re-=$,N=N.parent,!N)throw new m.vHH(4005,we&&"Invalid number of '../'");$=N.segments.length}return new Ct(N,!1,$-re)}(w,N+(Qt(S.commands[0])?0:1),S.numberOfDoubleDots)}(re,P,S.snapshot?._urlSegment,Dt),Zt=qt.processChildren?ar(qt.segmentGroup,qt.index,re.commands):gr(qt.segmentGroup,qt.index,re.commands);return pr(P.root,qt.segmentGroup,Zt,N,$)}(S.snapshot?._lastPathIndex)}function Qt(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function $n(S){return"object"==typeof S&&null!=S&&S.outlets}function pr(S,P,w,N,$){let ce,re={};N&&Fe(N,(Dt,qt)=>{re[qt]=Array.isArray(Dt)?Dt.map(Zt=>`${Zt}`):`${Dt}`}),ce=S===P?w:fi(S,P,w);const Ve=Ne(Mt(ce));return new br(Ve,re,$)}function fi(S,P,w){const N={};return Fe(S.children,($,re)=>{N[re]=$===P?w:fi($,P,w)}),new In(S.segments,N)}class ct{constructor(P,w,N){if(this.isAbsolute=P,this.numberOfDoubleDots=w,this.commands=N,P&&N.length>0&&Qt(N[0]))throw new m.vHH(4003,we&&"Root segment cannot have matrix parameters");const $=N.find($n);if($&&$!==vt(N))throw new m.vHH(4004,we&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ct{constructor(P,w,N){this.segmentGroup=P,this.processChildren=w,this.index=N}}function gr(S,P,w){if(S||(S=new In([],{})),0===S.segments.length&&S.hasChildren())return ar(S,P,w);const N=function oi(S,P,w){let N=0,$=P;const re={match:!1,pathIndex:0,commandIndex:0};for(;$<S.segments.length;){if(N>=w.length)return re;const ce=S.segments[$],Ve=w[N];if($n(Ve))break;const Dt=`${Ve}`,qt=N<w.length-1?w[N+1]:null;if($>0&&void 0===Dt)break;if(Dt&&qt&&"object"==typeof qt&&void 0===qt.outlets){if(!pi(Dt,qt,ce))return re;N+=2}else{if(!pi(Dt,{},ce))return re;N++}$++}return{match:!0,pathIndex:$,commandIndex:N}}(S,P,w),$=w.slice(N.commandIndex);if(N.match&&N.pathIndex<S.segments.length){const re=new In(S.segments.slice(0,N.pathIndex),{});return re.children[on]=new In(S.segments.slice(N.pathIndex),S.children),ar(re,0,$)}return N.match&&0===$.length?new In(S.segments,{}):N.match&&!S.hasChildren()?Ar(S,P,w):N.match?ar(S,0,$):Ar(S,P,w)}function ar(S,P,w){if(0===w.length)return new In(S.segments,{});{const N=function en(S){return $n(S[0])?S[0].outlets:{[on]:S}}(w),$={};if(!N[on]&&S.children[on]&&1===S.numberOfChildren&&0===S.children[on].segments.length){const re=ar(S.children[on],P,w);return new In(S.segments,re.children)}return Fe(N,(re,ce)=>{"string"==typeof re&&(re=[re]),null!==re&&($[ce]=gr(S.children[ce],P,re))}),Fe(S.children,(re,ce)=>{void 0===N[ce]&&($[ce]=re)}),new In(S.segments,$)}}function Ar(S,P,w){const N=S.segments.slice(0,P);let $=0;for(;$<w.length;){const re=w[$];if($n(re)){const Dt=Ns(re.outlets);return new In(N,Dt)}if(0===$&&Qt(w[0])){N.push(new Yn(S.segments[P].path,Ls(w[0]))),$++;continue}const ce=$n(re)?re.outlets[on]:`${re}`,Ve=$<w.length-1?w[$+1]:null;ce&&Ve&&Qt(Ve)?(N.push(new Yn(ce,Ls(Ve))),$+=2):(N.push(new Yn(ce,{})),$++)}return new In(N,{})}function Ns(S){const P={};return Fe(S,(w,N)=>{"string"==typeof w&&(w=[w]),null!==w&&(P[N]=Ar(new In([],{}),0,w))}),P}function Ls(S){const P={};return Fe(S,(w,N)=>P[N]=`${w}`),P}function pi(S,P,w){return S==w.path&&bn(P,w.parameters)}const Mr="imperative";class Rt{constructor(P,w){this.id=P,this.url=w}}class Mn extends Rt{constructor(P,w,N="imperative",$=null){super(P,w),this.type=0,this.navigationTrigger=N,this.restoredState=$}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class cn extends Rt{constructor(P,w,N){super(P,w),this.urlAfterRedirects=N,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Cn extends Rt{constructor(P,w,N,$){super(P,w),this.reason=N,this.code=$,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fn extends Rt{constructor(P,w,N,$){super(P,w),this.reason=N,this.code=$,this.type=16}}class lr extends Rt{constructor(P,w,N,$){super(P,w),this.error=N,this.target=$,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class mr extends Rt{constructor(P,w,N,$){super(P,w),this.urlAfterRedirects=N,this.state=$,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wr extends Rt{constructor(P,w,N,$){super(P,w),this.urlAfterRedirects=N,this.state=$,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ki extends Rt{constructor(P,w,N,$,re){super(P,w),this.urlAfterRedirects=N,this.state=$,this.shouldActivate=re,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Yi extends Rt{constructor(P,w,N,$){super(P,w),this.urlAfterRedirects=N,this.state=$,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vn extends Rt{constructor(P,w,N,$){super(P,w),this.urlAfterRedirects=N,this.state=$,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bn{constructor(P){this.route=P,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Rn{constructor(P){this.route=P,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Lr{constructor(P){this.snapshot=P,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ds{constructor(P){this.snapshot=P,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _e{constructor(P){this.snapshot=P,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nt{constructor(P){this.snapshot=P,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ge{constructor(P,w,N){this.routerEvent=P,this.position=w,this.anchor=N,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let jt=(()=>{class S{createUrlTree(w,N,$,re,ce,Ve){return Nt(w||N.root,$,re,ce,Ve)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac}),S})(),dr=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=m.Yz7({token:S,factory:function(P){return jt.\u0275fac(P)},providedIn:"root"}),S})();class yr{constructor(P){this._root=P}get root(){return this._root.value}parent(P){const w=this.pathFromRoot(P);return w.length>1?w[w.length-2]:null}children(P){const w=ai(P,this._root);return w?w.children.map(N=>N.value):[]}firstChild(P){const w=ai(P,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(P){const w=ur(P,this._root);return w.length<2?[]:w[w.length-2].children.map($=>$.value).filter($=>$!==P)}pathFromRoot(P){return ur(P,this._root).map(w=>w.value)}}function ai(S,P){if(S===P.value)return P;for(const w of P.children){const N=ai(S,w);if(N)return N}return null}function ur(S,P){if(S===P.value)return[P];for(const w of P.children){const N=ur(S,w);if(N.length)return N.unshift(P),N}return[]}class Tr{constructor(P,w){this.value=P,this.children=w}toString(){return`TreeNode(${this.value})`}}function _i(S){const P={};return S&&S.children.forEach(w=>P[w.value.outlet]=w),P}class Qr extends yr{constructor(P,w){super(P),this.snapshot=w,yo(this,P)}toString(){return this.snapshot.toString()}}function So(S,P){const w=function li(S,P){const ce=new ss([],{},{},"",{},on,P,null,S.root,-1,{});return new hr("",new Tr(ce,[]))}(S,P),N=new V.X([new Yn("",{})]),$=new V.X({}),re=new V.X({}),ce=new V.X({}),Ve=new V.X(""),Dt=new En(N,$,ce,Ve,re,on,P,w.root);return Dt.snapshot=w.root,new Qr(new Tr(Dt,[]),w)}class En{constructor(P,w,N,$,re,ce,Ve,Dt){this.url=P,this.params=w,this.queryParams=N,this.fragment=$,this.data=re,this.outlet=ce,this.component=Ve,this.title=this.data?.pipe((0,Ue.U)(qt=>qt[$t]))??(0,J.of)(void 0),this._futureSnapshot=Dt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ue.U)(P=>gn(P)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ue.U)(P=>gn(P)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Is(S,P="emptyOnly"){const w=S.pathFromRoot;let N=0;if("always"!==P)for(N=w.length-1;N>=1;){const $=w[N],re=w[N-1];if($.routeConfig&&""===$.routeConfig.path)N--;else{if(re.component)break;N--}}return function Gs(S){return S.reduce((P,w)=>({params:{...P.params,...w.params},data:{...P.data,...w.data},resolve:{...w.data,...P.resolve,...w.routeConfig?.data,...w._resolvedData}}),{params:{},data:{},resolve:{}})}(w.slice(N))}class ss{get title(){return this.data?.[$t]}constructor(P,w,N,$,re,ce,Ve,Dt,qt,Zt,nr){this.url=P,this.params=w,this.queryParams=N,this.fragment=$,this.data=re,this.outlet=ce,this.component=Ve,this.routeConfig=Dt,this._urlSegment=qt,this._lastPathIndex=Zt,this._resolve=nr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(N=>N.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hr extends yr{constructor(P,w){super(w),this.url=P,yo(this,w)}toString(){return qr(this._root)}}function yo(S,P){P.value._routerState=S,P.children.forEach(w=>yo(S,w))}function qr(S){const P=S.children.length>0?` { ${S.children.map(qr).join(", ")} } `:"";return`${S.value}${P}`}function os(S){if(S.snapshot){const P=S.snapshot,w=S._futureSnapshot;S.snapshot=w,bn(P.queryParams,w.queryParams)||S.queryParams.next(w.queryParams),P.fragment!==w.fragment&&S.fragment.next(w.fragment),bn(P.params,w.params)||S.params.next(w.params),function zr(S,P){if(S.length!==P.length)return!1;for(let w=0;w<S.length;++w)if(!bn(S[w],P[w]))return!1;return!0}(P.url,w.url)||S.url.next(w.url),bn(P.data,w.data)||S.data.next(w.data)}else S.snapshot=S._futureSnapshot,S.data.next(S._futureSnapshot.data)}function Gn(S,P){const w=bn(S.params,P.params)&&function sr(S,P){return rn(S,P)&&S.every((w,N)=>bn(w.parameters,P[N].parameters))}(S.url,P.url);return w&&!(!S.parent!=!P.parent)&&(!S.parent||Gn(S.parent,P.parent))}function zs(S,P,w){if(w&&S.shouldReuseRoute(P.value,w.value.snapshot)){const N=w.value;N._futureSnapshot=P.value;const $=function so(S,P,w){return P.children.map(N=>{for(const $ of w.children)if(S.shouldReuseRoute(N.value,$.value.snapshot))return zs(S,N,$);return zs(S,N)})}(S,P,w);return new Tr(N,$)}{if(S.shouldAttach(P.value)){const re=S.retrieve(P.value);if(null!==re){const ce=re.route;return ce.value._futureSnapshot=P.value,ce.children=P.children.map(Ve=>zs(S,Ve)),ce}}const N=function Cl(S){return new En(new V.X(S.url),new V.X(S.params),new V.X(S.queryParams),new V.X(S.fragment),new V.X(S.data),S.outlet,S.component,S)}(P.value),$=P.children.map(re=>zs(S,re));return new Tr(N,$)}}const Bo="ngNavigationCancelingError";function bo(S,P){const{redirectTo:w,navigationBehaviorOptions:N}=Oe(P)?{redirectTo:P,navigationBehaviorOptions:void 0}:P,$=oo(!1,0,P);return $.url=w,$.navigationBehaviorOptions=N,$}function oo(S,P,w){const N=new Error("NavigationCancelingError: "+(S||""));return N[Bo]=!0,N.cancellationCode=P,w&&(N.url=w),N}function Fs(S){return la(S)&&Oe(S.url)}function la(S){return S&&S[Bo]}class _o{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Bi,this.attachRef=null}}let Bi=(()=>{class S{constructor(){this.contexts=new Map}onChildOutletCreated(w,N){const $=this.getOrCreateContext(w);$.outlet=N,this.contexts.set(w,$)}onChildOutletDestroyed(w){const N=this.getContext(w);N&&(N.outlet=null,N.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let N=this.getContext(w);return N||(N=new _o,this.contexts.set(w,N)),N}getContext(w){return this.contexts.get(w)||null}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Qi=!1;let Ks=(()=>{class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=on,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.parentContexts=(0,m.f3M)(Bi),this.location=(0,m.f3M)(m.s_b),this.changeDetector=(0,m.f3M)(m.sBO),this.environmentInjector=(0,m.f3M)(m.lqb)}ngOnChanges(w){if(w.name){const{firstChange:N,previousValue:$}=w.name;if(N)return;this.isTrackedInParentContexts($)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed($)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(w){return this.parentContexts.getContext(w)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);w?.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.vHH(4012,Qi);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.vHH(4012,Qi);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.vHH(4012,Qi);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,N){this.activated=w,this._activatedRoute=N,this.location.insert(w.hostView),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,N){if(this.isActivated)throw new m.vHH(4013,Qi);this._activatedRoute=w;const $=this.location,ce=w.snapshot.component,Ve=this.parentContexts.getOrCreateContext(this.name).children,Dt=new Br(w,Ve,$.injector);if(N&&function Ao(S){return!!S.resolveComponentFactory}(N)){const qt=N.resolveComponentFactory(ce);this.activated=$.createComponent(qt,$.length,Dt)}else this.activated=$.createComponent(ce,{index:$.length,injector:Dt,environmentInjector:N??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275dir=m.lG2({type:S,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[m.TTD]}),S})();class Br{constructor(P,w,N){this.route=P,this.childContexts=w,this.parent=N}get(P,w){return P===En?this.route:P===Bi?this.childContexts:this.parent.get(P,w)}}let vo=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275cmp=m.Xpm({type:S,selectors:[["ng-component"]],standalone:!0,features:[m.jDz],decls:1,vars:0,template:function(w,N){1&w&&m._UZ(0,"router-outlet")},dependencies:[Ks],encapsulation:2}),S})();function ao(S,P){return S.providers&&!S._injector&&(S._injector=(0,m.MMx)(S.providers,P,`Route: ${S.path}`)),S._injector??P}function Fr(S){const P=S.children&&S.children.map(Fr),w=P?{...S,children:P}:{...S};return!w.component&&!w.loadComponent&&(P||w.loadChildren)&&w.outlet&&w.outlet!==on&&(w.component=vo),w}function Ni(S){return S.outlet||on}function Ho(S,P){const w=S.filter(N=>Ni(N)===P);return w.push(...S.filter(N=>Ni(N)!==P)),w}function vi(S){if(!S)return null;if(S.routeConfig?._injector)return S.routeConfig._injector;for(let P=S.parent;P;P=P.parent){const w=P.routeConfig;if(w?._loadedInjector)return w._loadedInjector;if(w?._injector)return w._injector}return null}class ps{constructor(P,w,N,$){this.routeReuseStrategy=P,this.futureState=w,this.currState=N,this.forwardEvent=$}activate(P){const w=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,N,P),os(this.futureState.root),this.activateChildRoutes(w,N,P)}deactivateChildRoutes(P,w,N){const $=_i(w);P.children.forEach(re=>{const ce=re.value.outlet;this.deactivateRoutes(re,$[ce],N),delete $[ce]}),Fe($,(re,ce)=>{this.deactivateRouteAndItsChildren(re,N)})}deactivateRoutes(P,w,N){const $=P.value,re=w?w.value:null;if($===re)if($.component){const ce=N.getContext($.outlet);ce&&this.deactivateChildRoutes(P,w,ce.children)}else this.deactivateChildRoutes(P,w,N);else re&&this.deactivateRouteAndItsChildren(w,N)}deactivateRouteAndItsChildren(P,w){P.value.component&&this.routeReuseStrategy.shouldDetach(P.value.snapshot)?this.detachAndStoreRouteSubtree(P,w):this.deactivateRouteAndOutlet(P,w)}detachAndStoreRouteSubtree(P,w){const N=w.getContext(P.value.outlet),$=N&&P.value.component?N.children:w,re=_i(P);for(const ce of Object.keys(re))this.deactivateRouteAndItsChildren(re[ce],$);if(N&&N.outlet){const ce=N.outlet.detach(),Ve=N.children.onOutletDeactivated();this.routeReuseStrategy.store(P.value.snapshot,{componentRef:ce,route:P,contexts:Ve})}}deactivateRouteAndOutlet(P,w){const N=w.getContext(P.value.outlet),$=N&&P.value.component?N.children:w,re=_i(P);for(const ce of Object.keys(re))this.deactivateRouteAndItsChildren(re[ce],$);N&&(N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated()),N.attachRef=null,N.resolver=null,N.route=null)}activateChildRoutes(P,w,N){const $=_i(w);P.children.forEach(re=>{this.activateRoutes(re,$[re.value.outlet],N),this.forwardEvent(new nt(re.value.snapshot))}),P.children.length&&this.forwardEvent(new Ds(P.value.snapshot))}activateRoutes(P,w,N){const $=P.value,re=w?w.value:null;if(os($),$===re)if($.component){const ce=N.getOrCreateContext($.outlet);this.activateChildRoutes(P,w,ce.children)}else this.activateChildRoutes(P,w,N);else if($.component){const ce=N.getOrCreateContext($.outlet);if(this.routeReuseStrategy.shouldAttach($.snapshot)){const Ve=this.routeReuseStrategy.retrieve($.snapshot);this.routeReuseStrategy.store($.snapshot,null),ce.children.onOutletReAttached(Ve.contexts),ce.attachRef=Ve.componentRef,ce.route=Ve.route.value,ce.outlet&&ce.outlet.attach(Ve.componentRef,Ve.route.value),os(Ve.route.value),this.activateChildRoutes(P,null,ce.children)}else{const Ve=vi($.snapshot),Dt=Ve?.get(m._Vd)??null;ce.attachRef=null,ce.route=$,ce.resolver=Dt,ce.injector=Ve,ce.outlet&&ce.outlet.activateWith($,ce.injector),this.activateChildRoutes(P,null,ce.children)}}else this.activateChildRoutes(P,null,N)}}class $r{constructor(P){this.path=P,this.route=this.path[this.path.length-1]}}class ji{constructor(P,w){this.component=P,this.route=w}}function $o(S,P,w){const N=S._root;return Go(N,P?P._root:null,w,[N.value])}function qi(S,P){const w=Symbol(),N=P.get(S,w);return N===w?"function"!=typeof S||(0,m.Z0I)(S)?P.get(S):S:N}function Go(S,P,w,N,$={canDeactivateChecks:[],canActivateChecks:[]}){const re=_i(P);return S.children.forEach(ce=>{(function Sr(S,P,w,N,$={canDeactivateChecks:[],canActivateChecks:[]}){const re=S.value,ce=P?P.value:null,Ve=w?w.getContext(S.value.outlet):null;if(ce&&re.routeConfig===ce.routeConfig){const Dt=function Hi(S,P,w){if("function"==typeof w)return w(S,P);switch(w){case"pathParamsChange":return!rn(S.url,P.url);case"pathParamsOrQueryParamsChange":return!rn(S.url,P.url)||!bn(S.queryParams,P.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gn(S,P)||!bn(S.queryParams,P.queryParams);default:return!Gn(S,P)}}(ce,re,re.routeConfig.runGuardsAndResolvers);Dt?$.canActivateChecks.push(new $r(N)):(re.data=ce.data,re._resolvedData=ce._resolvedData),Go(S,P,re.component?Ve?Ve.children:null:w,N,$),Dt&&Ve&&Ve.outlet&&Ve.outlet.isActivated&&$.canDeactivateChecks.push(new ji(Ve.outlet.component,ce))}else ce&&Mo(P,Ve,$),$.canActivateChecks.push(new $r(N)),Go(S,null,re.component?Ve?Ve.children:null:w,N,$)})(ce,re[ce.value.outlet],w,N.concat([ce.value]),$),delete re[ce.value.outlet]}),Fe(re,(ce,Ve)=>Mo(ce,w.getContext(Ve),$)),$}function Mo(S,P,w){const N=_i(S),$=S.value;Fe(N,(re,ce)=>{Mo(re,$.component?P?P.children.getContext(ce):null:P,w)}),w.canDeactivateChecks.push(new ji($.component&&P&&P.outlet&&P.outlet.isActivated?P.outlet.component:null,$))}function Ts(S){return"function"==typeof S}function F(S){return S instanceof q.K||"EmptyError"===S?.name}const oe=Symbol("INITIAL_VALUE");function tt(){return(0,ke.w)(S=>(0,te.a)(S.map(P=>P.pipe((0,je.q)(1),(0,$e.O)(oe)))).pipe((0,Ue.U)(P=>{for(const w of P)if(!0!==w){if(w===oe)return oe;if(!1===w||w instanceof br)return w}return!0}),(0,Je.h)(P=>P!==oe),(0,je.q)(1)))}function Ss(S){return(0,ee.z)((0,Et.b)(P=>{if(Oe(P))throw bo(0,P)}),(0,Ue.U)(P=>!0===P))}const ca={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function da(S,P,w,N,$){const re=ho(S,P,w);return re.matched?function co(S,P,w,N){const $=P.canMatch;if(!$||0===$.length)return(0,J.of)(!0);const re=$.map(ce=>{const Ve=qi(ce,S);return ft(function Wo(S){return S&&Ts(S.canMatch)}(Ve)?Ve.canMatch(P,w):S.runInContext(()=>Ve(P,w)))});return(0,J.of)(re).pipe(tt(),Ss())}(N=ao(P,N),P,w).pipe((0,Ue.U)(ce=>!0===ce?re:{...ca})):(0,J.of)(re)}function ho(S,P,w){if(""===P.path)return"full"===P.pathMatch&&(S.hasChildren()||w.length>0)?{...ca}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const $=(P.matcher||rr)(w,S,P);if(!$)return{...ca};const re={};Fe($.posParams,(Ve,Dt)=>{re[Dt]=Ve.path});const ce=$.consumed.length>0?{...re,...$.consumed[$.consumed.length-1].parameters}:re;return{matched:!0,consumedSegments:$.consumed,remainingSegments:w.slice($.consumed.length),parameters:ce,positionalParamSegments:$.posParams??{}}}function bs(S,P,w,N){if(w.length>0&&function Ta(S,P,w){return w.some(N=>ms(S,P,N)&&Ni(N)!==on)}(S,w,N)){const re=new In(P,function ri(S,P,w,N){const $={};$[on]=N,N._sourceSegment=S,N._segmentIndexShift=P.length;for(const re of w)if(""===re.path&&Ni(re)!==on){const ce=new In([],{});ce._sourceSegment=S,ce._segmentIndexShift=P.length,$[Ni(re)]=ce}return $}(S,P,N,new In(w,S.children)));return re._sourceSegment=S,re._segmentIndexShift=P.length,{segmentGroup:re,slicedSegments:[]}}if(0===w.length&&function zo(S,P,w){return w.some(N=>ms(S,P,N))}(S,w,N)){const re=new In(S.segments,function Ti(S,P,w,N,$){const re={};for(const ce of N)if(ms(S,w,ce)&&!$[Ni(ce)]){const Ve=new In([],{});Ve._sourceSegment=S,Ve._segmentIndexShift=P.length,re[Ni(ce)]=Ve}return{...$,...re}}(S,P,w,N,S.children));return re._sourceSegment=S,re._segmentIndexShift=P.length,{segmentGroup:re,slicedSegments:w}}const $=new In(S.segments,S.children);return $._sourceSegment=S,$._segmentIndexShift=P.length,{segmentGroup:$,slicedSegments:w}}function ms(S,P,w){return(!(S.hasChildren()||P.length>0)||"full"!==w.pathMatch)&&""===w.path}function za(S,P,w,N){return!!(Ni(S)===N||N!==on&&ms(P,w,S))&&("**"===S.path||ho(P,S,w).matched)}function fo(S,P,w){return 0===P.length&&!S.children[w]}const bi=!1;class Ko{constructor(P){this.segmentGroup=P||null}}class Ys{constructor(P){this.urlTree=P}}function Zi(S){return(0,Y._)(new Ko(S))}function Yo(S){return(0,Y._)(new Ys(S))}class Qs{constructor(P,w,N,$,re){this.injector=P,this.configLoader=w,this.urlSerializer=N,this.urlTree=$,this.config=re,this.allowRedirects=!0}apply(){const P=bs(this.urlTree.root,[],[],this.config).segmentGroup,w=new In(P.segments,P.children);return this.expandSegmentGroup(this.injector,this.config,w,on).pipe((0,Ue.U)(re=>this.createUrlTree(Mt(re),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Ye.K)(re=>{if(re instanceof Ys)return this.allowRedirects=!1,this.match(re.urlTree);throw re instanceof Ko?this.noMatchError(re):re}))}match(P){return this.expandSegmentGroup(this.injector,this.config,P.root,on).pipe((0,Ue.U)($=>this.createUrlTree(Mt($),P.queryParams,P.fragment))).pipe((0,Ye.K)($=>{throw $ instanceof Ko?this.noMatchError($):$}))}noMatchError(P){return new m.vHH(4002,bi)}createUrlTree(P,w,N){const $=Ne(P);return new br($,w,N)}expandSegmentGroup(P,w,N,$){return 0===N.segments.length&&N.hasChildren()?this.expandChildren(P,w,N).pipe((0,Ue.U)(re=>new In([],re))):this.expandSegment(P,N,w,N.segments,$,!0)}expandChildren(P,w,N){const $=[];for(const re of Object.keys(N.children))"primary"===re?$.unshift(re):$.push(re);return(0,C.D)($).pipe((0,yt.b)(re=>{const ce=N.children[re],Ve=Ho(w,re);return this.expandSegmentGroup(P,Ve,ce,re).pipe((0,Ue.U)(Dt=>({segment:Dt,outlet:re})))}),(0,Ot.R)((re,ce)=>(re[ce.outlet]=ce.segment,re),{}),(0,At.Z)())}expandSegment(P,w,N,$,re,ce){return(0,C.D)(N).pipe((0,yt.b)(Ve=>this.expandSegmentAgainstRoute(P,w,N,Ve,$,re,ce).pipe((0,Ye.K)(qt=>{if(qt instanceof Ko)return(0,J.of)(null);throw qt}))),(0,Me.P)(Ve=>!!Ve),(0,Ye.K)((Ve,Dt)=>{if(F(Ve))return fo(w,$,re)?(0,J.of)(new In([],{})):Zi(w);throw Ve}))}expandSegmentAgainstRoute(P,w,N,$,re,ce,Ve){return za($,w,re,ce)?void 0===$.redirectTo?this.matchSegmentAgainstRoute(P,w,$,re,ce):Ve&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(P,w,N,$,re,ce):Zi(w):Zi(w)}expandSegmentAgainstRouteUsingRedirect(P,w,N,$,re,ce){return"**"===$.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(P,N,$,ce):this.expandRegularSegmentAgainstRouteUsingRedirect(P,w,N,$,re,ce)}expandWildCardWithParamsAgainstRouteUsingRedirect(P,w,N,$){const re=this.applyRedirectCommands([],N.redirectTo,{});return N.redirectTo.startsWith("/")?Yo(re):this.lineralizeSegments(N,re).pipe((0,Le.z)(ce=>{const Ve=new In(ce,{});return this.expandSegment(P,Ve,w,ce,$,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(P,w,N,$,re,ce){const{matched:Ve,consumedSegments:Dt,remainingSegments:qt,positionalParamSegments:Zt}=ho(w,$,re);if(!Ve)return Zi(w);const nr=this.applyRedirectCommands(Dt,$.redirectTo,Zt);return $.redirectTo.startsWith("/")?Yo(nr):this.lineralizeSegments($,nr).pipe((0,Le.z)(kr=>this.expandSegment(P,w,N,kr.concat(qt),ce,!1)))}matchSegmentAgainstRoute(P,w,N,$,re){return"**"===N.path?(P=ao(N,P),N.loadChildren?(N._loadedRoutes?(0,J.of)({routes:N._loadedRoutes,injector:N._loadedInjector}):this.configLoader.loadChildren(P,N)).pipe((0,Ue.U)(Ve=>(N._loadedRoutes=Ve.routes,N._loadedInjector=Ve.injector,new In($,{})))):(0,J.of)(new In($,{}))):da(w,N,$,P).pipe((0,ke.w)(({matched:ce,consumedSegments:Ve,remainingSegments:Dt})=>ce?this.getChildConfig(P=N._injector??P,N,$).pipe((0,Le.z)(Zt=>{const nr=Zt.injector??P,kr=Zt.routes,{segmentGroup:_s,slicedSegments:ki}=bs(w,Ve,Dt,kr),Ra=new In(_s.segments,_s.children);if(0===ki.length&&Ra.hasChildren())return this.expandChildren(nr,kr,Ra).pipe((0,Ue.U)(ul=>new In(Ve,ul)));if(0===kr.length&&0===ki.length)return(0,J.of)(new In(Ve,{}));const Wi=Ni(N)===re;return this.expandSegment(nr,Ra,kr,ki,Wi?on:re,!0).pipe((0,Ue.U)(xa=>new In(Ve.concat(xa.segments),xa.children)))})):Zi(w)))}getChildConfig(P,w,N){return w.children?(0,J.of)({routes:w.children,injector:P}):w.loadChildren?void 0!==w._loadedRoutes?(0,J.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function $i(S,P,w,N){const $=P.canLoad;if(void 0===$||0===$.length)return(0,J.of)(!0);const re=$.map(ce=>{const Ve=qi(ce,S);return ft(function ks(S){return S&&Ts(S.canLoad)}(Ve)?Ve.canLoad(P,w):S.runInContext(()=>Ve(P,w)))});return(0,J.of)(re).pipe(tt(),Ss())}(P,w,N).pipe((0,Le.z)($=>$?this.configLoader.loadChildren(P,w).pipe((0,Et.b)(re=>{w._loadedRoutes=re.routes,w._loadedInjector=re.injector})):function wl(S){return(0,Y._)(oo(bi,3))}())):(0,J.of)({routes:[],injector:P})}lineralizeSegments(P,w){let N=[],$=w.root;for(;;){if(N=N.concat($.segments),0===$.numberOfChildren)return(0,J.of)(N);if($.numberOfChildren>1||!$.children[on])return P.redirectTo,(0,Y._)(new m.vHH(4e3,bi));$=$.children[on]}}applyRedirectCommands(P,w,N){return this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),P,N)}applyRedirectCreateUrlTree(P,w,N,$){const re=this.createSegmentGroup(P,w.root,N,$);return new br(re,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(P,w){const N={};return Fe(P,($,re)=>{if("string"==typeof $&&$.startsWith(":")){const Ve=$.substring(1);N[re]=w[Ve]}else N[re]=$}),N}createSegmentGroup(P,w,N,$){const re=this.createSegments(P,w.segments,N,$);let ce={};return Fe(w.children,(Ve,Dt)=>{ce[Dt]=this.createSegmentGroup(P,Ve,N,$)}),new In(re,ce)}createSegments(P,w,N,$){return w.map(re=>re.path.startsWith(":")?this.findPosParam(P,re,$):this.findOrReturn(re,N))}findPosParam(P,w,N){const $=N[w.path.substring(1)];if(!$)throw new m.vHH(4001,bi);return $}findOrReturn(P,w){let N=0;for(const $ of w){if($.path===P.path)return w.splice(N),$;N++}return P}}class Aa{}class Xi{constructor(P,w,N,$,re,ce,Ve){this.injector=P,this.rootComponentType=w,this.config=N,this.urlTree=$,this.url=re,this.paramsInheritanceStrategy=ce,this.urlSerializer=Ve}recognize(){const P=bs(this.urlTree.root,[],[],this.config.filter(w=>void 0===w.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,P,on).pipe((0,Ue.U)(w=>{if(null===w)return null;const N=new ss([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},on,this.rootComponentType,null,this.urlTree.root,-1,{}),$=new Tr(N,w),re=new hr(this.url,$);return this.inheritParamsAndData(re._root),re}))}inheritParamsAndData(P){const w=P.value,N=Is(w,this.paramsInheritanceStrategy);w.params=Object.freeze(N.params),w.data=Object.freeze(N.data),P.children.forEach($=>this.inheritParamsAndData($))}processSegmentGroup(P,w,N,$){return 0===N.segments.length&&N.hasChildren()?this.processChildren(P,w,N):this.processSegment(P,w,N,N.segments,$)}processChildren(P,w,N){return(0,C.D)(Object.keys(N.children)).pipe((0,yt.b)($=>{const re=N.children[$],ce=Ho(w,$);return this.processSegmentGroup(P,ce,re,$)}),(0,Ot.R)(($,re)=>$&&re?($.push(...re),$):null),(0,Xe.o)($=>null!==$),(0,Ke.d)(null),(0,At.Z)(),(0,Ue.U)($=>{if(null===$)return null;const re=Gr($);return function po(S){S.sort((P,w)=>P.value.outlet===on?-1:w.value.outlet===on?1:P.value.outlet.localeCompare(w.value.outlet))}(re),re}))}processSegment(P,w,N,$,re){return(0,C.D)(w).pipe((0,yt.b)(ce=>this.processSegmentAgainstRoute(ce._injector??P,ce,N,$,re)),(0,Me.P)(ce=>!!ce),(0,Ye.K)(ce=>{if(F(ce))return fo(N,$,re)?(0,J.of)([]):(0,J.of)(null);throw ce}))}processSegmentAgainstRoute(P,w,N,$,re){if(w.redirectTo||!za(w,N,$,re))return(0,J.of)(null);let ce;if("**"===w.path){const Ve=$.length>0?vt($).parameters:{},Dt=Qo(N)+$.length,qt=new ss($,Ve,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,an(w),Ni(w),w.component??w._loadedComponent??null,w,Ai(N),Dt,Xt(w));ce=(0,J.of)({snapshot:qt,consumedSegments:[],remainingSegments:[]})}else ce=da(N,w,$,P).pipe((0,Ue.U)(({matched:Ve,consumedSegments:Dt,remainingSegments:qt,parameters:Zt})=>{if(!Ve)return null;const nr=Qo(N)+Dt.length;return{snapshot:new ss(Dt,Zt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,an(w),Ni(w),w.component??w._loadedComponent??null,w,Ai(N),nr,Xt(w)),consumedSegments:Dt,remainingSegments:qt}}));return ce.pipe((0,ke.w)(Ve=>{if(null===Ve)return(0,J.of)(null);const{snapshot:Dt,consumedSegments:qt,remainingSegments:Zt}=Ve;P=w._injector??P;const nr=w._loadedInjector??P,kr=function ci(S){return S.children?S.children:S.loadChildren?S._loadedRoutes:[]}(w),{segmentGroup:_s,slicedSegments:ki}=bs(N,qt,Zt,kr.filter(Wi=>void 0===Wi.redirectTo));if(0===ki.length&&_s.hasChildren())return this.processChildren(nr,kr,_s).pipe((0,Ue.U)(Wi=>null===Wi?null:[new Tr(Dt,Wi)]));if(0===kr.length&&0===ki.length)return(0,J.of)([new Tr(Dt,[])]);const Ra=Ni(w)===re;return this.processSegment(nr,kr,_s,ki,Ra?on:re).pipe((0,Ue.U)(Wi=>null===Wi?null:[new Tr(Dt,Wi)]))}))}}function Ji(S){const P=S.value.routeConfig;return P&&""===P.path&&void 0===P.redirectTo}function Gr(S){const P=[],w=new Set;for(const N of S){if(!Ji(N)){P.push(N);continue}const $=P.find(re=>N.value.routeConfig===re.value.routeConfig);void 0!==$?($.children.push(...N.children),w.add($)):P.push(N)}for(const N of w){const $=Gr(N.children);P.push(new Tr(N.value,$))}return P.filter(N=>!w.has(N))}function Ai(S){let P=S;for(;P._sourceSegment;)P=P._sourceSegment;return P}function Qo(S){let P=S,w=P._segmentIndexShift??0;for(;P._sourceSegment;)P=P._sourceSegment,w+=P._segmentIndexShift??0;return w-1}function an(S){return S.data||{}}function Xt(S){return S.resolve||{}}function ie(S){return"string"==typeof S.title||null===S.title}function ye(S){return(0,ke.w)(P=>{const w=S(P);return w?(0,C.D)(w).pipe((0,Ue.U)(()=>P)):(0,J.of)(P)})}const pt=new m.OlP("ROUTES");let ln=(()=>{class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,m.f3M)(m.Sil)}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,J.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const N=ft(w.loadComponent()).pipe((0,Ue.U)(Wr),(0,Et.b)(re=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=re}),(0,xt.x)(()=>{this.componentLoaders.delete(w)})),$=new Pe.c(N,()=>new He.x).pipe((0,It.x)());return this.componentLoaders.set(w,$),$}loadChildren(w,N){if(this.childrenLoaders.get(N))return this.childrenLoaders.get(N);if(N._loadedRoutes)return(0,J.of)({routes:N._loadedRoutes,injector:N._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(N);const re=this.loadModuleFactoryOrRoutes(N.loadChildren).pipe((0,Ue.U)(Ve=>{this.onLoadEndListener&&this.onLoadEndListener(N);let Dt,qt,Zt=!1;Array.isArray(Ve)?qt=Ve:(Dt=Ve.create(w).injector,qt=ei(Dt.get(pt,[],m.XFs.Self|m.XFs.Optional)));return{routes:qt.map(Fr),injector:Dt}}),(0,xt.x)(()=>{this.childrenLoaders.delete(N)})),ce=new Pe.c(re,()=>new He.x).pipe((0,It.x)());return this.childrenLoaders.set(N,ce),ce}loadModuleFactoryOrRoutes(w){return ft(w()).pipe((0,Ue.U)(Wr),(0,Le.z)(N=>N instanceof m.YKP||Array.isArray(N)?(0,J.of)(N):(0,C.D)(this.compiler.compileModuleAsync(N))))}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Wr(S){return function Dr(S){return S&&"object"==typeof S&&"default"in S}(S)?S.default:S}let cr=(()=>{class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new He.x,this.configLoader=(0,m.f3M)(ln),this.environmentInjector=(0,m.f3M)(m.lqb),this.urlSerializer=(0,m.f3M)(Qn),this.rootContexts=(0,m.f3M)(Bi),this.navigationId=0,this.afterPreactivation=()=>(0,J.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=$=>this.events.next(new Rn($)),this.configLoader.onLoadStartListener=$=>this.events.next(new Bn($))}complete(){this.transitions?.complete()}handleNavigationRequest(w){const N=++this.navigationId;this.transitions?.next({...this.transitions.value,...w,id:N})}setupNavigations(w){return this.transitions=new V.X({id:0,targetPageId:0,currentUrlTree:w.currentUrlTree,currentRawUrl:w.currentUrlTree,extractedUrl:w.urlHandlingStrategy.extract(w.currentUrlTree),urlAfterRedirects:w.urlHandlingStrategy.extract(w.currentUrlTree),rawUrl:w.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Mr,restoredState:null,currentSnapshot:w.routerState.snapshot,targetSnapshot:null,currentRouterState:w.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Je.h)(N=>0!==N.id),(0,Ue.U)(N=>({...N,extractedUrl:w.urlHandlingStrategy.extract(N.rawUrl)})),(0,ke.w)(N=>{let $=!1,re=!1;return(0,J.of)(N).pipe((0,Et.b)(ce=>{this.currentNavigation={id:ce.id,initialUrl:ce.rawUrl,extractedUrl:ce.extractedUrl,trigger:ce.source,extras:ce.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ke.w)(ce=>{const Ve=w.browserUrlTree.toString(),Dt=!w.navigated||ce.extractedUrl.toString()!==Ve||Ve!==w.currentUrlTree.toString();if(!Dt&&"reload"!==(ce.extras.onSameUrlNavigation??w.onSameUrlNavigation)){const Zt="";return this.events.next(new fn(ce.id,w.serializeUrl(N.rawUrl),Zt,0)),w.rawUrlTree=ce.rawUrl,ce.resolve(null),he.E}if(w.urlHandlingStrategy.shouldProcessUrl(ce.rawUrl))return Zn(ce.source)&&(w.browserUrlTree=ce.extractedUrl),(0,J.of)(ce).pipe((0,ke.w)(Zt=>{const nr=this.transitions?.getValue();return this.events.next(new Mn(Zt.id,this.urlSerializer.serialize(Zt.extractedUrl),Zt.source,Zt.restoredState)),nr!==this.transitions?.getValue()?he.E:Promise.resolve(Zt)}),function Sa(S,P,w,N){return(0,ke.w)($=>function ii(S,P,w,N,$){return new Qs(S,P,w,N,$).apply()}(S,P,w,$.extractedUrl,N).pipe((0,Ue.U)(re=>({...$,urlAfterRedirects:re}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,w.config),(0,Et.b)(Zt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Zt.urlAfterRedirects},N.urlAfterRedirects=Zt.urlAfterRedirects}),function qa(S,P,w,N,$){return(0,Le.z)(re=>function ha(S,P,w,N,$,re,ce="emptyOnly"){return new Xi(S,P,w,N,$,ce,re).recognize().pipe((0,ke.w)(Ve=>null===Ve?function Ya(S){return new le.y(P=>P.error(S))}(new Aa):(0,J.of)(Ve)))}(S,P,w,re.urlAfterRedirects,N.serialize(re.urlAfterRedirects),N,$).pipe((0,Ue.U)(ce=>({...re,targetSnapshot:ce}))))}(this.environmentInjector,this.rootComponentType,w.config,this.urlSerializer,w.paramsInheritanceStrategy),(0,Et.b)(Zt=>{if(N.targetSnapshot=Zt.targetSnapshot,"eager"===w.urlUpdateStrategy){if(!Zt.extras.skipLocationChange){const kr=w.urlHandlingStrategy.merge(Zt.urlAfterRedirects,Zt.rawUrl);w.setBrowserUrl(kr,Zt)}w.browserUrlTree=Zt.urlAfterRedirects}const nr=new mr(Zt.id,this.urlSerializer.serialize(Zt.extractedUrl),this.urlSerializer.serialize(Zt.urlAfterRedirects),Zt.targetSnapshot);this.events.next(nr)}));if(Dt&&w.urlHandlingStrategy.shouldProcessUrl(w.rawUrlTree)){const{id:Zt,extractedUrl:nr,source:kr,restoredState:_s,extras:ki}=ce,Ra=new Mn(Zt,this.urlSerializer.serialize(nr),kr,_s);this.events.next(Ra);const Wi=So(nr,this.rootComponentType).snapshot;return N={...ce,targetSnapshot:Wi,urlAfterRedirects:nr,extras:{...ki,skipLocationChange:!1,replaceUrl:!1}},(0,J.of)(N)}{const Zt="";return this.events.next(new fn(ce.id,w.serializeUrl(N.extractedUrl),Zt,1)),w.rawUrlTree=ce.rawUrl,ce.resolve(null),he.E}}),(0,Et.b)(ce=>{const Ve=new wr(ce.id,this.urlSerializer.serialize(ce.extractedUrl),this.urlSerializer.serialize(ce.urlAfterRedirects),ce.targetSnapshot);this.events.next(Ve)}),(0,Ue.U)(ce=>N={...ce,guards:$o(ce.targetSnapshot,ce.currentSnapshot,this.rootContexts)}),function sn(S,P){return(0,Le.z)(w=>{const{targetSnapshot:N,currentSnapshot:$,guards:{canActivateChecks:re,canDeactivateChecks:ce}}=w;return 0===ce.length&&0===re.length?(0,J.of)({...w,guardsResult:!0}):function Zr(S,P,w,N){return(0,C.D)(S).pipe((0,Le.z)($=>function wa(S,P,w,N,$){const re=P&&P.routeConfig?P.routeConfig.canDeactivate:null;if(!re||0===re.length)return(0,J.of)(!0);const ce=re.map(Ve=>{const Dt=vi(P)??$,qt=qi(Ve,Dt);return ft(function Ln(S){return S&&Ts(S.canDeactivate)}(qt)?qt.canDeactivate(S,P,w,N):Dt.runInContext(()=>qt(S,P,w,N))).pipe((0,Me.P)())});return(0,J.of)(ce).pipe(tt())}($.component,$.route,w,P,N)),(0,Me.P)($=>!0!==$,!0))}(ce,N,$,S).pipe((0,Le.z)(Ve=>Ve&&function gs(S){return"boolean"==typeof S}(Ve)?function ht(S,P,w,N){return(0,C.D)(P).pipe((0,yt.b)($=>(0,X.z)(function Us(S,P){return null!==S&&P&&P(new Lr(S)),(0,J.of)(!0)}($.route.parent,N),function Nn(S,P){return null!==S&&P&&P(new _e(S)),(0,J.of)(!0)}($.route,N),function Li(S,P,w){const N=P[P.length-1],re=P.slice(0,P.length-1).reverse().map(ce=>function ui(S){const P=S.routeConfig?S.routeConfig.canActivateChild:null;return P&&0!==P.length?{node:S,guards:P}:null}(ce)).filter(ce=>null!==ce).map(ce=>(0,W.P)(()=>{const Ve=ce.guards.map(Dt=>{const qt=vi(ce.node)??w,Zt=qi(Dt,qt);return ft(function Oo(S){return S&&Ts(S.canActivateChild)}(Zt)?Zt.canActivateChild(N,S):qt.runInContext(()=>Zt(N,S))).pipe((0,Me.P)())});return(0,J.of)(Ve).pipe(tt())}));return(0,J.of)(re).pipe(tt())}(S,$.path,w),function nu(S,P,w){const N=P.routeConfig?P.routeConfig.canActivate:null;if(!N||0===N.length)return(0,J.of)(!0);const $=N.map(re=>(0,W.P)(()=>{const ce=vi(P)??w,Ve=qi(re,ce);return ft(function Po(S){return S&&Ts(S.canActivate)}(Ve)?Ve.canActivate(P,S):ce.runInContext(()=>Ve(P,S))).pipe((0,Me.P)())}));return(0,J.of)($).pipe(tt())}(S,$.route,w))),(0,Me.P)($=>!0!==$,!0))}(N,re,S,P):(0,J.of)(Ve)),(0,Ue.U)(Ve=>({...w,guardsResult:Ve})))})}(this.environmentInjector,ce=>this.events.next(ce)),(0,Et.b)(ce=>{if(N.guardsResult=ce.guardsResult,Oe(ce.guardsResult))throw bo(0,ce.guardsResult);const Ve=new Ki(ce.id,this.urlSerializer.serialize(ce.extractedUrl),this.urlSerializer.serialize(ce.urlAfterRedirects),ce.targetSnapshot,!!ce.guardsResult);this.events.next(Ve)}),(0,Je.h)(ce=>!!ce.guardsResult||(w.restoreHistory(ce),this.cancelNavigationTransition(ce,"",3),!1)),ye(ce=>{if(ce.guards.canActivateChecks.length)return(0,J.of)(ce).pipe((0,Et.b)(Ve=>{const Dt=new Yi(Ve.id,this.urlSerializer.serialize(Ve.extractedUrl),this.urlSerializer.serialize(Ve.urlAfterRedirects),Ve.targetSnapshot);this.events.next(Dt)}),(0,ke.w)(Ve=>{let Dt=!1;return(0,J.of)(Ve).pipe(function zt(S,P){return(0,Le.z)(w=>{const{targetSnapshot:N,guards:{canActivateChecks:$}}=w;if(!$.length)return(0,J.of)(w);let re=0;return(0,C.D)($).pipe((0,yt.b)(ce=>function lt(S,P,w,N){const $=S.routeConfig,re=S._resolve;return void 0!==$?.title&&!ie($)&&(re[$t]=$.title),function M(S,P,w,N){const $=function z(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===$.length)return(0,J.of)({});const re={};return(0,C.D)($).pipe((0,Le.z)(ce=>function k(S,P,w,N){const $=vi(P)??N,re=qi(S,$);return ft(re.resolve?re.resolve(P,w):$.runInContext(()=>re(P,w)))}(S[ce],P,w,N).pipe((0,Me.P)(),(0,Et.b)(Ve=>{re[ce]=Ve}))),(0,ut.h)(1),(0,qe.h)(re),(0,Ye.K)(ce=>F(ce)?he.E:(0,Y._)(ce)))}(re,S,P,N).pipe((0,Ue.U)(ce=>(S._resolvedData=ce,S.data=Is(S,w).resolve,$&&ie($)&&(S.data[$t]=$.title),null)))}(ce.route,N,S,P)),(0,Et.b)(()=>re++),(0,ut.h)(1),(0,Le.z)(ce=>re===$.length?(0,J.of)(w):he.E))})}(w.paramsInheritanceStrategy,this.environmentInjector),(0,Et.b)({next:()=>Dt=!0,complete:()=>{Dt||(w.restoreHistory(Ve),this.cancelNavigationTransition(Ve,"",2))}}))}),(0,Et.b)(Ve=>{const Dt=new Vn(Ve.id,this.urlSerializer.serialize(Ve.extractedUrl),this.urlSerializer.serialize(Ve.urlAfterRedirects),Ve.targetSnapshot);this.events.next(Dt)}))}),ye(ce=>{const Ve=Dt=>{const qt=[];Dt.routeConfig?.loadComponent&&!Dt.routeConfig._loadedComponent&&qt.push(this.configLoader.loadComponent(Dt.routeConfig).pipe((0,Et.b)(Zt=>{Dt.component=Zt}),(0,Ue.U)(()=>{})));for(const Zt of Dt.children)qt.push(...Ve(Zt));return qt};return(0,te.a)(Ve(ce.targetSnapshot.root)).pipe((0,Ke.d)(),(0,je.q)(1))}),ye(()=>this.afterPreactivation()),(0,Ue.U)(ce=>{const Ve=function Ws(S,P,w){const N=zs(S,P._root,w?w._root:void 0);return new Qr(N,P)}(w.routeReuseStrategy,ce.targetSnapshot,ce.currentRouterState);return N={...ce,targetRouterState:Ve}}),(0,Et.b)(ce=>{w.currentUrlTree=ce.urlAfterRedirects,w.rawUrlTree=w.urlHandlingStrategy.merge(ce.urlAfterRedirects,ce.rawUrl),w.routerState=ce.targetRouterState,"deferred"===w.urlUpdateStrategy&&(ce.extras.skipLocationChange||w.setBrowserUrl(w.rawUrlTree,ce),w.browserUrlTree=ce.urlAfterRedirects)}),((S,P,w)=>(0,Ue.U)(N=>(new ps(P,N.targetRouterState,N.currentRouterState,w).activate(S),N)))(this.rootContexts,w.routeReuseStrategy,ce=>this.events.next(ce)),(0,je.q)(1),(0,Et.b)({next:ce=>{$=!0,this.lastSuccessfulNavigation=this.currentNavigation,w.navigated=!0,this.events.next(new cn(ce.id,this.urlSerializer.serialize(ce.extractedUrl),this.urlSerializer.serialize(w.currentUrlTree))),w.titleStrategy?.updateTitle(ce.targetRouterState.snapshot),ce.resolve(!0)},complete:()=>{$=!0}}),(0,xt.x)(()=>{$||re||this.cancelNavigationTransition(N,"",1),this.currentNavigation?.id===N.id&&(this.currentNavigation=null)}),(0,Ye.K)(ce=>{if(re=!0,la(ce)){Fs(ce)||(w.navigated=!0,w.restoreHistory(N,!0));const Ve=new Cn(N.id,this.urlSerializer.serialize(N.extractedUrl),ce.message,ce.cancellationCode);if(this.events.next(Ve),Fs(ce)){const Dt=w.urlHandlingStrategy.merge(ce.url,w.rawUrlTree),qt={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===w.urlUpdateStrategy||Zn(N.source)};w.scheduleNavigation(Dt,Mr,null,qt,{resolve:N.resolve,reject:N.reject,promise:N.promise})}else N.resolve(!1)}else{w.restoreHistory(N,!0);const Ve=new lr(N.id,this.urlSerializer.serialize(N.extractedUrl),ce,N.targetSnapshot??void 0);this.events.next(Ve);try{N.resolve(w.errorHandler(ce))}catch(Dt){N.reject(Dt)}}return he.E}))}))}cancelNavigationTransition(w,N,$){const re=new Cn(w.id,this.urlSerializer.serialize(w.extractedUrl),N,$);this.events.next(re),w.resolve(!1)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Zn(S){return S!==Mr}let Jt=(()=>{class S{buildTitle(w){let N,$=w.root;for(;void 0!==$;)N=this.getResolvedTitleForRoute($)??N,$=$.children.find(re=>re.outlet===on);return N}getResolvedTitleForRoute(w){return w.data[$t]}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=m.Yz7({token:S,factory:function(){return(0,m.f3M)(Xr)},providedIn:"root"}),S})(),Xr=(()=>{class S extends Jt{constructor(w){super(),this.title=w}updateTitle(w){const N=this.buildTitle(w);void 0!==N&&this.title.setTitle(N)}}return S.\u0275fac=function(w){return new(w||S)(m.LFG(Jn.Dx))},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Vs=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=m.Yz7({token:S,factory:function(){return(0,m.f3M)(mn)},providedIn:"root"}),S})();class _r{shouldDetach(P){return!1}store(P,w){}shouldAttach(P){return!1}retrieve(P){return null}shouldReuseRoute(P,w){return P.routeConfig===w.routeConfig}}let mn=(()=>{class S extends _r{}return S.\u0275fac=function(){let P;return function(N){return(P||(P=m.n5z(S)))(N||S)}}(),S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Wn=new m.OlP("",{providedIn:"root",factory:()=>({})});let fa=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=m.Yz7({token:S,factory:function(){return(0,m.f3M)(Rr)},providedIn:"root"}),S})(),Rr=(()=>{class S{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,N){return w}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Eo(S){throw S}function Ma(S,P,w){return P.parse("/")}const pa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ol={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let as=(()=>{class S{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,m.f3M)(m.c2e),this.isNgZoneEnabled=!1,this.options=(0,m.f3M)(Wn,{optional:!0})||{},this.errorHandler=this.options.errorHandler||Eo,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Ma,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,m.f3M)(fa),this.routeReuseStrategy=(0,m.f3M)(Vs),this.urlCreationStrategy=(0,m.f3M)(dr),this.titleStrategy=(0,m.f3M)(Jt),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ei((0,m.f3M)(pt,{optional:!0})??[]),this.navigationTransitions=(0,m.f3M)(cr),this.urlSerializer=(0,m.f3M)(Qn),this.location=(0,m.f3M)(Ae.Ye),this.isNgZoneEnabled=(0,m.f3M)(m.R0b)instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new br,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=So(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(w=>{this.lastSuccessfulId=w.id,this.currentPageId=this.browserPageId??0},w=>{this.console.warn(`Unhandled Navigation Error: ${w}`)})}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const w=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Mr,w)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(w=>{const N="popstate"===w.type?"popstate":"hashchange";"popstate"===N&&setTimeout(()=>{this.navigateToSyncWithBrowser(w.url,N,w.state)},0)}))}navigateToSyncWithBrowser(w,N,$){const re={replaceUrl:!0},ce=$?.navigationId?$:null;if($){const Dt={...$};delete Dt.navigationId,delete Dt.\u0275routerPageId,0!==Object.keys(Dt).length&&(re.state=Dt)}const Ve=this.parseUrl(w);this.scheduleNavigation(Ve,N,ce,re)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(w){this.config=w.map(Fr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(w,N={}){const{relativeTo:$,queryParams:re,fragment:ce,queryParamsHandling:Ve,preserveFragment:Dt}=N,qt=Dt?this.currentUrlTree.fragment:ce;let Zt=null;switch(Ve){case"merge":Zt={...this.currentUrlTree.queryParams,...re};break;case"preserve":Zt=this.currentUrlTree.queryParams;break;default:Zt=re||null}return null!==Zt&&(Zt=this.removeEmptyProps(Zt)),this.urlCreationStrategy.createUrlTree($,this.routerState,this.currentUrlTree,w,Zt,qt??null)}navigateByUrl(w,N={skipLocationChange:!1}){const $=Oe(w)?w:this.parseUrl(w),re=this.urlHandlingStrategy.merge($,this.rawUrlTree);return this.scheduleNavigation(re,Mr,null,N)}navigate(w,N={skipLocationChange:!1}){return function go(S){for(let P=0;P<S.length;P++){const w=S[P];if(null==w)throw new m.vHH(4008,false)}}(w),this.navigateByUrl(this.createUrlTree(w,N),N)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){let N;try{N=this.urlSerializer.parse(w)}catch($){N=this.malformedUriErrorHandler($,this.urlSerializer,w)}return N}isActive(w,N){let $;if($=!0===N?{...pa}:!1===N?{...ol}:N,Oe(w))return Nr(this.currentUrlTree,w,$);const re=this.parseUrl(w);return Nr(this.currentUrlTree,re,$)}removeEmptyProps(w){return Object.keys(w).reduce((N,$)=>{const re=w[$];return null!=re&&(N[$]=re),N},{})}scheduleNavigation(w,N,$,re,ce){if(this.disposed)return Promise.resolve(!1);let Ve,Dt,qt,Zt;return ce?(Ve=ce.resolve,Dt=ce.reject,qt=ce.promise):qt=new Promise((nr,kr)=>{Ve=nr,Dt=kr}),Zt="computed"===this.canceledNavigationResolution?$&&$.\u0275routerPageId?$.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Zt,source:N,restoredState:$,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:w,extras:re,resolve:Ve,reject:Dt,promise:qt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),qt.catch(nr=>Promise.reject(nr))}setBrowserUrl(w,N){const $=this.urlSerializer.serialize(w);if(this.location.isCurrentPathEqualTo($)||N.extras.replaceUrl){const ce={...N.extras.state,...this.generateNgRouterState(N.id,this.browserPageId)};this.location.replaceState($,"",ce)}else{const re={...N.extras.state,...this.generateNgRouterState(N.id,N.targetPageId)};this.location.go($,"",re)}}restoreHistory(w,N=!1){if("computed"===this.canceledNavigationResolution){const re=this.currentPageId-(this.browserPageId??this.currentPageId);0!==re?this.location.historyGo(re):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===re&&(this.resetState(w),this.browserUrlTree=w.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=w.currentRouterState,this.currentUrlTree=w.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,N){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:N}:{navigationId:w}}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),As=(()=>{class S{constructor(w,N,$,re,ce,Ve){this.router=w,this.route=N,this.tabIndexAttribute=$,this.renderer=re,this.el=ce,this.locationStrategy=Ve,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new He.x;const Dt=ce.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Dt||"area"===Dt,this.isAnchorElement?this.subscription=w.events.subscribe(qt=>{qt instanceof cn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(w){this._preserveFragment=(0,m.D6c)(w)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(w){this._skipLocationChange=(0,m.D6c)(w)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(w){this._replaceUrl=(0,m.D6c)(w)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,N,$,re,ce){return!!(null===this.urlTree||this.isAnchorElement&&(0!==w||N||$||re||ce||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const w=null===this.href?null:(0,m.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",w)}applyAttributeValue(w,N){const $=this.renderer,re=this.el.nativeElement;null!==N?$.setAttribute(re,w,N):$.removeAttribute(re,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return S.\u0275fac=function(w){return new(w||S)(m.Y36(as),m.Y36(En),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(Ae.S$))},S.\u0275dir=m.lG2({type:S,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(w,N){1&w&&m.NdJ("click",function(re){return N.onClick(re.button,re.ctrlKey,re.shiftKey,re.altKey,re.metaKey)}),2&w&&m.uIk("target",N.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[m.TTD]}),S})(),Pa=(()=>{class S{get isActive(){return this._isActive}constructor(w,N,$,re,ce){this.router=w,this.element=N,this.renderer=$,this.cdr=re,this.link=ce,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new m.vpe,this.routerEventsSubscription=w.events.subscribe(Ve=>{Ve instanceof cn&&this.update()})}ngAfterContentInit(){(0,J.of)(this.links.changes,(0,J.of)(null)).pipe((0,hn.J)()).subscribe(w=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const w=[...this.links.toArray(),this.link].filter(N=>!!N).map(N=>N.onChanges);this.linkInputChangesSubscription=(0,C.D)(w).pipe((0,hn.J)()).subscribe(N=>{this._isActive!==this.isLinkActive(this.router)(N)&&this.update()})}set routerLinkActive(w){const N=Array.isArray(w)?w:w.split(" ");this.classes=N.filter($=>!!$)}ngOnChanges(w){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const w=this.hasActiveLinks();this._isActive!==w&&(this._isActive=w,this.cdr.markForCheck(),this.classes.forEach(N=>{w?this.renderer.addClass(this.element.nativeElement,N):this.renderer.removeClass(this.element.nativeElement,N)}),w&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(w))})}isLinkActive(w){const N=function al(S){return!!S.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return $=>!!$.urlTree&&w.isActive($.urlTree,N)}hasActiveLinks(){const w=this.isLinkActive(this.router);return this.link&&w(this.link)||this.links.some(w)}}return S.\u0275fac=function(w){return new(w||S)(m.Y36(as),m.Y36(m.SBq),m.Y36(m.Qsj),m.Y36(m.sBO),m.Y36(As,8))},S.\u0275dir=m.lG2({type:S,selectors:[["","routerLinkActive",""]],contentQueries:function(w,N,$){if(1&w&&m.Suo($,As,5),2&w){let re;m.iGM(re=m.CRH())&&(N.links=re)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[m.TTD]}),S})();class Bs{}let Hl=(()=>{class S{constructor(w,N,$,re,ce){this.router=w,this.injector=$,this.preloadingStrategy=re,this.loader=ce}setUpPreloading(){this.subscription=this.router.events.pipe((0,Je.h)(w=>w instanceof cn),(0,yt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,N){const $=[];for(const re of N){re.providers&&!re._injector&&(re._injector=(0,m.MMx)(re.providers,w,`Route: ${re.path}`));const ce=re._injector??w,Ve=re._loadedInjector??ce;(re.loadChildren&&!re._loadedRoutes&&void 0===re.canLoad||re.loadComponent&&!re._loadedComponent)&&$.push(this.preloadConfig(ce,re)),(re.children||re._loadedRoutes)&&$.push(this.processRoutes(Ve,re.children??re._loadedRoutes))}return(0,C.D)($).pipe((0,hn.J)())}preloadConfig(w,N){return this.preloadingStrategy.preload(N,()=>{let $;$=N.loadChildren&&void 0===N.canLoad?this.loader.loadChildren(w,N):(0,J.of)(null);const re=$.pipe((0,Le.z)(ce=>null===ce?(0,J.of)(void 0):(N._loadedRoutes=ce.routes,N._loadedInjector=ce.injector,this.processRoutes(ce.injector??w,ce.routes))));if(N.loadComponent&&!N._loadedComponent){const ce=this.loader.loadComponent(N);return(0,C.D)([re,ce]).pipe((0,hn.J)())}return re})}}return S.\u0275fac=function(w){return new(w||S)(m.LFG(as),m.LFG(m.Sil),m.LFG(m.lqb),m.LFG(Bs),m.LFG(ln))},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Ro=new m.OlP("");let Za=(()=>{class S{constructor(w,N,$,re,ce={}){this.urlSerializer=w,this.transitions=N,this.viewportScroller=$,this.zone=re,this.options=ce,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ce.scrollPositionRestoration=ce.scrollPositionRestoration||"disabled",ce.anchorScrolling=ce.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Mn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof cn&&(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Ge&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,N){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ge(w,"popstate"===this.lastSource?this.store[this.restoredId]:null,N))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return S.\u0275fac=function(w){m.$Z()},S.\u0275prov=m.Yz7({token:S,factory:S.\u0275fac}),S})();var et=(()=>((et=et||{})[et.COMPLETE=0]="COMPLETE",et[et.FAILED=1]="FAILED",et[et.REDIRECTING=2]="REDIRECTING",et))();const ys=!1;function ls(S,P){return{\u0275kind:S,\u0275providers:P}}const Xa=new m.OlP("",{providedIn:"root",factory:()=>!1});function es(){const S=(0,m.f3M)(m.zs3);return P=>{const w=S.get(m.z2F);if(P!==w.components[0])return;const N=S.get(as),$=S.get(Oa);1===S.get(js)&&N.initialNavigation(),S.get(Js,null,m.XFs.Optional)?.setUpPreloading(),S.get(Ro,null,m.XFs.Optional)?.init(),N.resetRootComponentType(w.componentTypes[0]),$.closed||($.next(),$.complete(),$.unsubscribe())}}const Oa=new m.OlP(ys?"bootstrap done indicator":"",{factory:()=>new He.x}),js=new m.OlP(ys?"initial navigation":"",{providedIn:"root",factory:()=>1});function Xs(){let S=[];return S=ys?[{provide:m.Xts,multi:!0,useFactory:()=>{const P=(0,m.f3M)(as);return()=>P.events.subscribe(w=>{console.group?.(`Router Event: ${w.constructor.name}`),console.log(function dt(S){if(!("type"in S))return`Unknown Router Event: ${S.constructor.name}`;switch(S.type){case 14:return`ActivationEnd(path: '${S.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${S.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${S.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${S.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state}, shouldActivate: ${S.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 2:return`NavigationCancel(id: ${S.id}, url: '${S.url}')`;case 16:return`NavigationSkipped(id: ${S.id}, url: '${S.url}')`;case 1:return`NavigationEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${S.id}, url: '${S.url}', error: ${S.error})`;case 0:return`NavigationStart(id: ${S.id}, url: '${S.url}')`;case 6:return`ResolveEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 5:return`ResolveStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 10:return`RouteConfigLoadEnd(path: ${S.route.path})`;case 9:return`RouteConfigLoadStart(path: ${S.route.path})`;case 4:return`RoutesRecognized(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 15:return`Scroll(anchor: '${S.anchor}', position: '${S.position?`${S.position[0]}, ${S.position[1]}`:null}')`}}(w)),console.log(w),console.groupEnd?.()})}}]:[],ls(1,S)}const Js=new m.OlP(ys?"router preloader":"");function ga(S){return ls(0,[{provide:Js,useExisting:Hl},{provide:Bs,useExisting:S}])}const ka=!1,Jr=new m.OlP(ka?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Ua=[Ae.Ye,{provide:Qn,useClass:mi},as,Bi,{provide:En,useFactory:function Zs(S){return S.routerState.root},deps:[as]},ln,ka?{provide:Xa,useValue:!0}:[]];function gi(){return new m.PXZ("Router",as)}let ll=(()=>{class S{constructor(w){}static forRoot(w,N){return{ngModule:S,providers:[Ua,ka&&N?.enableTracing?Xs().\u0275providers:[],{provide:pt,multi:!0,useValue:w},{provide:Jr,useFactory:ma,deps:[[as,new m.FiY,new m.tp0]]},{provide:Wn,useValue:N||{}},N?.useHash?{provide:Ae.S$,useClass:Ae.Do}:{provide:Ae.S$,useClass:Ae.b0},{provide:Ro,useFactory:()=>{const S=(0,m.f3M)(Ae.EM),P=(0,m.f3M)(m.R0b),w=(0,m.f3M)(Wn),N=(0,m.f3M)(cr),$=(0,m.f3M)(Qn);return w.scrollOffset&&S.setOffset(w.scrollOffset),new Za($,N,S,P,w)}},N?.preloadingStrategy?ga(N.preloadingStrategy).\u0275providers:[],{provide:m.PXZ,multi:!0,useFactory:gi},N?.initialNavigation?us(N):[],[{provide:ya,useFactory:es},{provide:m.tb,multi:!0,useExisting:ya}]]}}static forChild(w){return{ngModule:S,providers:[{provide:pt,multi:!0,useValue:w}]}}}return S.\u0275fac=function(w){return new(w||S)(m.LFG(Jr,8))},S.\u0275mod=m.oAB({type:S}),S.\u0275inj=m.cJS({imports:[vo]}),S})();function ma(S){if(ka&&S)throw new m.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function us(S){return["disabled"===S.initialNavigation?ls(3,[{provide:m.ip1,multi:!0,useFactory:()=>{const P=(0,m.f3M)(as);return()=>{P.setUpLocationChangeListener()}}},{provide:js,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?ls(2,[{provide:js,useValue:0},{provide:m.ip1,multi:!0,deps:[m.zs3],useFactory:P=>{const w=P.get(Ae.V_,Promise.resolve());return()=>w.then(()=>new Promise(N=>{const $=P.get(as),re=P.get(Oa);(function qs(S,P){S.events.pipe((0,Je.h)(w=>w instanceof cn||w instanceof Cn||w instanceof lr||w instanceof fn),(0,Ue.U)(w=>w instanceof cn||w instanceof fn?et.COMPLETE:w instanceof Cn&&(0===w.code||1===w.code)?et.REDIRECTING:et.FAILED),(0,Je.h)(w=>w!==et.REDIRECTING),(0,je.q)(1)).subscribe(()=>{P()})})($,()=>{N(!0)}),P.get(cr).afterPreactivation=()=>(N(!0),re.closed?(0,J.of)(void 0):re),$.initialNavigation()}))}}]).\u0275providers:[]]}const ya=new m.OlP(ka?"Router Initializer":"")},6881:(Ee,se,D)=>{D.d(se,{Jn:()=>wi,qX:()=>mi,Xd:()=>Qn,Mq:()=>Vr,C6:()=>er,ZF:()=>Un,KN:()=>Qe});var m=D(9671),C=D(4859),J=D(1877),V=D(2090);const q=(ct,Ze)=>Ze.some(Ct=>ct instanceof Ct);let te,X;const Y=new WeakMap,le=new WeakMap,he=new WeakMap,Pe=new WeakMap,He=new WeakMap;let ke={get(ct,Ze,Ct){if(ct instanceof IDBTransaction){if("done"===Ze)return le.get(ct);if("objectStoreNames"===Ze)return ct.objectStoreNames||he.get(ct);if("store"===Ze)return Ct.objectStoreNames[1]?void 0:Ct.objectStore(Ct.objectStoreNames[0])}return Le(ct[Ze])},set:(ct,Ze,Ct)=>(ct[Ze]=Ct,!0),has:(ct,Ze)=>ct instanceof IDBTransaction&&("done"===Ze||"store"===Ze)||Ze in ct};function Je(ct){return"function"==typeof ct?function $e(ct){return ct!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ee(){return X||(X=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ct)?function(...Ze){return ct.apply(Me(this),Ze),Le(Y.get(this))}:function(...Ze){return Le(ct.apply(Me(this),Ze))}:function(Ze,...Ct){const Wt=ct.call(Me(this),Ze,...Ct);return he.set(Wt,Ze.sort?Ze.sort():[Ze]),Le(Wt)}}(ct):(ct instanceof IDBTransaction&&function Ue(ct){if(le.has(ct))return;const Ze=new Promise((Ct,Wt)=>{const Tn=()=>{ct.removeEventListener("complete",qn),ct.removeEventListener("error",en),ct.removeEventListener("abort",en)},qn=()=>{Ct(),Tn()},en=()=>{Wt(ct.error||new DOMException("AbortError","AbortError")),Tn()};ct.addEventListener("complete",qn),ct.addEventListener("error",en),ct.addEventListener("abort",en)});le.set(ct,Ze)}(ct),q(ct,function W(){return te||(te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ct,ke):ct)}function Le(ct){if(ct instanceof IDBRequest)return function Ae(ct){const Ze=new Promise((Ct,Wt)=>{const Tn=()=>{ct.removeEventListener("success",qn),ct.removeEventListener("error",en)},qn=()=>{Ct(Le(ct.result)),Tn()},en=()=>{Wt(ct.error),Tn()};ct.addEventListener("success",qn),ct.addEventListener("error",en)});return Ze.then(Ct=>{Ct instanceof IDBCursor&&Y.set(Ct,ct)}).catch(()=>{}),He.set(Ze,ct),Ze}(ct);if(Pe.has(ct))return Pe.get(ct);const Ze=Je(ct);return Ze!==ct&&(Pe.set(ct,Ze),He.set(Ze,ct)),Ze}const Me=ct=>He.get(ct),Ye=["get","getKey","getAll","getAllKeys","count"],Ot=["put","add","delete","clear"],At=new Map;function Xe(ct,Ze){if(!(ct instanceof IDBDatabase)||Ze in ct||"string"!=typeof Ze)return;if(At.get(Ze))return At.get(Ze);const Ct=Ze.replace(/FromIndex$/,""),Wt=Ze!==Ct,Tn=Ot.includes(Ct);if(!(Ct in(Wt?IDBIndex:IDBObjectStore).prototype)||!Tn&&!Ye.includes(Ct))return;const qn=function(){var en=(0,m.Z)(function*(gr,...ar){const oi=this.transaction(gr,Tn?"readwrite":"readonly");let Ar=oi.store;return Wt&&(Ar=Ar.index(ar.shift())),(yield Promise.all([Ar[Ct](...ar),Tn&&oi.done]))[0]});return function(ar){return en.apply(this,arguments)}}();return At.set(Ze,qn),qn}!function je(ct){ke=ct(ke)}(ct=>({...ct,get:(Ze,Ct,Wt)=>Xe(Ze,Ct)||ct.get(Ze,Ct,Wt),has:(Ze,Ct)=>!!Xe(Ze,Ct)||ct.has(Ze,Ct)}));class Ke{constructor(Ze){this.container=Ze}getPlatformInfoString(){return this.container.getProviders().map(Ct=>{if(function ut(ct){return"VERSION"===ct.getComponent()?.type}(Ct)){const Wt=Ct.getImmediate();return`${Wt.library}/${Wt.version}`}return null}).filter(Ct=>Ct).join(" ")}}const qe="@firebase/app",It=new J.Yd("@firebase/app"),br="[DEFAULT]",In={[qe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yn=new Map,sr=new Map;function rn(ct,Ze){try{ct.container.addComponent(Ze)}catch(Ct){It.debug(`Component ${Ze.name} failed to register with FirebaseApp ${ct.name}`,Ct)}}function Qn(ct){const Ze=ct.name;if(sr.has(Ze))return It.debug(`There were multiple attempts to register component ${Ze}.`),!1;sr.set(Ze,ct);for(const Ct of Yn.values())rn(Ct,ct);return!0}function mi(ct,Ze){const Ct=ct.container.getProvider("heartbeat").getImmediate({optional:!0});return Ct&&Ct.triggerHeartbeat(),ct.container.getProvider(Ze)}const ni=new V.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class or{constructor(Ze,Ct,Wt){this._isDeleted=!1,this._options=Object.assign({},Ze),this._config=Object.assign({},Ct),this._name=Ct.name,this._automaticDataCollectionEnabled=Ct.automaticDataCollectionEnabled,this._container=Wt,this.container.addComponent(new C.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ze}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ze){this._isDeleted=Ze}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}}const wi="9.17.1";function Un(ct,Ze={}){let Ct=ct;"object"!=typeof Ze&&(Ze={name:Ze});const Wt=Object.assign({name:br,automaticDataCollectionEnabled:!1},Ze),Tn=Wt.name;if("string"!=typeof Tn||!Tn)throw ni.create("bad-app-name",{appName:String(Tn)});if(Ct||(Ct=(0,V.aH)()),!Ct)throw ni.create("no-options");const qn=Yn.get(Tn);if(qn){if((0,V.vZ)(Ct,qn.options)&&(0,V.vZ)(Wt,qn.config))return qn;throw ni.create("duplicate-app",{appName:Tn})}const en=new C.H0(Tn);for(const ar of sr.values())en.addComponent(ar);const gr=new or(Ct,Wt,en);return Yn.set(Tn,gr),gr}function Vr(ct=br){const Ze=Yn.get(ct);if(!Ze&&ct===br)return Un();if(!Ze)throw ni.create("no-app",{appName:ct});return Ze}function er(){return Array.from(Yn.values())}function Qe(ct,Ze,Ct){var Wt;let Tn=null!==(Wt=In[ct])&&void 0!==Wt?Wt:ct;Ct&&(Tn+=`-${Ct}`);const qn=Tn.match(/\s|\//),en=Ze.match(/\s|\//);if(qn||en){const gr=[`Unable to register library "${Tn}" with version "${Ze}":`];return qn&&gr.push(`library name "${Tn}" contains illegal characters (whitespace or "/")`),qn&&en&&gr.push("and"),en&&gr.push(`version name "${Ze}" contains illegal characters (whitespace or "/")`),void It.warn(gr.join(" "))}Qn(new C.wA(`${Tn}-version`,()=>({library:Tn,version:Ze}),"VERSION"))}const bt="firebase-heartbeat-database",de=1,me="firebase-heartbeat-store";let De=null;function rt(){return De||(De=function yt(ct,Ze,{blocked:Ct,upgrade:Wt,blocking:Tn,terminated:qn}={}){const en=indexedDB.open(ct,Ze),gr=Le(en);return Wt&&en.addEventListener("upgradeneeded",ar=>{Wt(Le(en.result),ar.oldVersion,ar.newVersion,Le(en.transaction))}),Ct&&en.addEventListener("blocked",()=>Ct()),gr.then(ar=>{qn&&ar.addEventListener("close",()=>qn()),Tn&&ar.addEventListener("versionchange",()=>Tn())}).catch(()=>{}),gr}(bt,de,{upgrade:(ct,Ze)=>{0===Ze&&ct.createObjectStore(me)}}).catch(ct=>{throw ni.create("idb-open",{originalErrorMessage:ct.message})})),De}function Mt(){return(Mt=(0,m.Z)(function*(ct){try{return(yield rt()).transaction(me).objectStore(me).get(we(ct))}catch(Ze){if(Ze instanceof V.ZR)It.warn(Ze.message);else{const Ct=ni.create("idb-get",{originalErrorMessage:Ze?.message});It.warn(Ct.message)}}})).apply(this,arguments)}function Bt(ct,Ze){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,m.Z)(function*(ct,Ze){try{const Wt=(yield rt()).transaction(me,"readwrite");return yield Wt.objectStore(me).put(Ze,we(ct)),Wt.done}catch(Ct){if(Ct instanceof V.ZR)It.warn(Ct.message);else{const Wt=ni.create("idb-set",{originalErrorMessage:Ct?.message});It.warn(Wt.message)}}})).apply(this,arguments)}function we(ct){return`${ct.name}!${ct.options.appId}`}class ze{constructor(Ze){this.container=Ze,this._heartbeatsCache=null;const Ct=this.container.getProvider("app").getImmediate();this._storage=new $n(Ct),this._heartbeatsCachePromise=this._storage.read().then(Wt=>(this._heartbeatsCache=Wt,Wt))}triggerHeartbeat(){var Ze=this;return(0,m.Z)(function*(){const Wt=Ze.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tn=Nt();if(null===Ze._heartbeatsCache&&(Ze._heartbeatsCache=yield Ze._heartbeatsCachePromise),Ze._heartbeatsCache.lastSentHeartbeatDate!==Tn&&!Ze._heartbeatsCache.heartbeats.some(qn=>qn.date===Tn))return Ze._heartbeatsCache.heartbeats.push({date:Tn,agent:Wt}),Ze._heartbeatsCache.heartbeats=Ze._heartbeatsCache.heartbeats.filter(qn=>{const en=new Date(qn.date).valueOf();return Date.now()-en<=2592e6}),Ze._storage.overwrite(Ze._heartbeatsCache)})()}getHeartbeatsHeader(){var Ze=this;return(0,m.Z)(function*(){if(null===Ze._heartbeatsCache&&(yield Ze._heartbeatsCachePromise),null===Ze._heartbeatsCache||0===Ze._heartbeatsCache.heartbeats.length)return"";const Ct=Nt(),{heartbeatsToSend:Wt,unsentEntries:Tn}=function Qt(ct,Ze=1024){const Ct=[];let Wt=ct.slice();for(const Tn of ct){const qn=Ct.find(en=>en.agent===Tn.agent);if(qn){if(qn.dates.push(Tn.date),pr(Ct)>Ze){qn.dates.pop();break}}else if(Ct.push({agent:Tn.agent,dates:[Tn.date]}),pr(Ct)>Ze){Ct.pop();break}Wt=Wt.slice(1)}return{heartbeatsToSend:Ct,unsentEntries:Wt}}(Ze._heartbeatsCache.heartbeats),qn=(0,V.L)(JSON.stringify({version:2,heartbeats:Wt}));return Ze._heartbeatsCache.lastSentHeartbeatDate=Ct,Tn.length>0?(Ze._heartbeatsCache.heartbeats=Tn,yield Ze._storage.overwrite(Ze._heartbeatsCache)):(Ze._heartbeatsCache.heartbeats=[],Ze._storage.overwrite(Ze._heartbeatsCache)),qn})()}}function Nt(){return(new Date).toISOString().substring(0,10)}class $n{constructor(Ze){this.app=Ze,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,V.hl)()&&(0,V.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ze=this;return(0,m.Z)(function*(){return(yield Ze._canUseIndexedDBPromise)&&(yield function Ne(ct){return Mt.apply(this,arguments)}(Ze.app))||{heartbeats:[]}})()}overwrite(Ze){var Ct=this;return(0,m.Z)(function*(){var Wt;if(yield Ct._canUseIndexedDBPromise){const qn=yield Ct.read();return Bt(Ct.app,{lastSentHeartbeatDate:null!==(Wt=Ze.lastSentHeartbeatDate)&&void 0!==Wt?Wt:qn.lastSentHeartbeatDate,heartbeats:Ze.heartbeats})}})()}add(Ze){var Ct=this;return(0,m.Z)(function*(){var Wt;if(yield Ct._canUseIndexedDBPromise){const qn=yield Ct.read();return Bt(Ct.app,{lastSentHeartbeatDate:null!==(Wt=Ze.lastSentHeartbeatDate)&&void 0!==Wt?Wt:qn.lastSentHeartbeatDate,heartbeats:[...qn.heartbeats,...Ze.heartbeats]})}})()}}function pr(ct){return(0,V.L)(JSON.stringify({version:2,heartbeats:ct})).length}!function fi(ct){Qn(new C.wA("platform-logger",Ze=>new Ke(Ze),"PRIVATE")),Qn(new C.wA("heartbeat",Ze=>new ze(Ze),"PRIVATE")),Qe(qe,"0.9.3",ct),Qe(qe,"0.9.3","esm2017"),Qe("fire-js","")}("")},4859:(Ee,se,D)=>{D.d(se,{H0:()=>W,wA:()=>J});var m=D(9671),C=D(2090);class J{constructor(Y,le,he){this.name=Y,this.instanceFactory=le,this.type=he,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Y){return this.instantiationMode=Y,this}setMultipleInstances(Y){return this.multipleInstances=Y,this}setServiceProps(Y){return this.serviceProps=Y,this}setInstanceCreatedCallback(Y){return this.onInstanceCreated=Y,this}}const V="[DEFAULT]";class q{constructor(Y,le){this.name=Y,this.container=le,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Y){const le=this.normalizeInstanceIdentifier(Y);if(!this.instancesDeferred.has(le)){const he=new C.BH;if(this.instancesDeferred.set(le,he),this.isInitialized(le)||this.shouldAutoInitialize())try{const Pe=this.getOrInitializeService({instanceIdentifier:le});Pe&&he.resolve(Pe)}catch{}}return this.instancesDeferred.get(le).promise}getImmediate(Y){var le;const he=this.normalizeInstanceIdentifier(Y?.identifier),Pe=null!==(le=Y?.optional)&&void 0!==le&&le;if(!this.isInitialized(he)&&!this.shouldAutoInitialize()){if(Pe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:he})}catch(He){if(Pe)return null;throw He}}getComponent(){return this.component}setComponent(Y){if(Y.name!==this.name)throw Error(`Mismatching Component ${Y.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Y,this.shouldAutoInitialize()){if(function X(ee){return"EAGER"===ee.instantiationMode}(Y))try{this.getOrInitializeService({instanceIdentifier:V})}catch{}for(const[le,he]of this.instancesDeferred.entries()){const Pe=this.normalizeInstanceIdentifier(le);try{const He=this.getOrInitializeService({instanceIdentifier:Pe});he.resolve(He)}catch{}}}}clearInstance(Y=V){this.instancesDeferred.delete(Y),this.instancesOptions.delete(Y),this.instances.delete(Y)}delete(){var Y=this;return(0,m.Z)(function*(){const le=Array.from(Y.instances.values());yield Promise.all([...le.filter(he=>"INTERNAL"in he).map(he=>he.INTERNAL.delete()),...le.filter(he=>"_delete"in he).map(he=>he._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Y=V){return this.instances.has(Y)}getOptions(Y=V){return this.instancesOptions.get(Y)||{}}initialize(Y={}){const{options:le={}}=Y,he=this.normalizeInstanceIdentifier(Y.instanceIdentifier);if(this.isInitialized(he))throw Error(`${this.name}(${he}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Pe=this.getOrInitializeService({instanceIdentifier:he,options:le});for(const[He,Ae]of this.instancesDeferred.entries())he===this.normalizeInstanceIdentifier(He)&&Ae.resolve(Pe);return Pe}onInit(Y,le){var he;const Pe=this.normalizeInstanceIdentifier(le),He=null!==(he=this.onInitCallbacks.get(Pe))&&void 0!==he?he:new Set;He.add(Y),this.onInitCallbacks.set(Pe,He);const Ae=this.instances.get(Pe);return Ae&&Y(Ae,Pe),()=>{He.delete(Y)}}invokeOnInitCallbacks(Y,le){const he=this.onInitCallbacks.get(le);if(he)for(const Pe of he)try{Pe(Y,le)}catch{}}getOrInitializeService({instanceIdentifier:Y,options:le={}}){let he=this.instances.get(Y);if(!he&&this.component&&(he=this.component.instanceFactory(this.container,{instanceIdentifier:(ee=Y,ee===V?void 0:ee),options:le}),this.instances.set(Y,he),this.instancesOptions.set(Y,le),this.invokeOnInitCallbacks(he,Y),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Y,he)}catch{}var ee;return he||null}normalizeInstanceIdentifier(Y=V){return this.component?this.component.multipleInstances?Y:V:Y}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class W{constructor(Y){this.name=Y,this.providers=new Map}addComponent(Y){const le=this.getProvider(Y.name);if(le.isComponentSet())throw new Error(`Component ${Y.name} has already been registered with ${this.name}`);le.setComponent(Y)}addOrOverwriteComponent(Y){this.getProvider(Y.name).isComponentSet()&&this.providers.delete(Y.name),this.addComponent(Y)}getProvider(Y){if(this.providers.has(Y))return this.providers.get(Y);const le=new q(Y,this);return this.providers.set(Y,le),le}getProviders(){return Array.from(this.providers.values())}}},1877:(Ee,se,D)=>{D.d(se,{Yd:()=>X,in:()=>C});const m=[];var C=(()=>{return(Y=C||(C={}))[Y.DEBUG=0]="DEBUG",Y[Y.VERBOSE=1]="VERBOSE",Y[Y.INFO=2]="INFO",Y[Y.WARN=3]="WARN",Y[Y.ERROR=4]="ERROR",Y[Y.SILENT=5]="SILENT",C;var Y})();const J={debug:C.DEBUG,verbose:C.VERBOSE,info:C.INFO,warn:C.WARN,error:C.ERROR,silent:C.SILENT},V=C.INFO,q={[C.DEBUG]:"log",[C.VERBOSE]:"log",[C.INFO]:"info",[C.WARN]:"warn",[C.ERROR]:"error"},te=(Y,le,...he)=>{if(le<Y.logLevel)return;const Pe=(new Date).toISOString(),He=q[le];if(!He)throw new Error(`Attempted to log a message with an invalid logType (value: ${le})`);console[He](`[${Pe}]  ${Y.name}:`,...he)};class X{constructor(le){this.name=le,this._logLevel=V,this._logHandler=te,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(le){if(!(le in C))throw new TypeError(`Invalid value "${le}" assigned to \`logLevel\``);this._logLevel=le}setLogLevel(le){this._logLevel="string"==typeof le?J[le]:le}get logHandler(){return this._logHandler}set logHandler(le){if("function"!=typeof le)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=le}get userLogHandler(){return this._userLogHandler}set userLogHandler(le){this._userLogHandler=le}debug(...le){this._userLogHandler&&this._userLogHandler(this,C.DEBUG,...le),this._logHandler(this,C.DEBUG,...le)}log(...le){this._userLogHandler&&this._userLogHandler(this,C.VERBOSE,...le),this._logHandler(this,C.VERBOSE,...le)}info(...le){this._userLogHandler&&this._userLogHandler(this,C.INFO,...le),this._logHandler(this,C.INFO,...le)}warn(...le){this._userLogHandler&&this._userLogHandler(this,C.WARN,...le),this._logHandler(this,C.WARN,...le)}error(...le){this._userLogHandler&&this._userLogHandler(this,C.ERROR,...le),this._logHandler(this,C.ERROR,...le)}}},825:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4650),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8555),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(515),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9751),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(9646),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6451),rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(233),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(4707),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3099),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9300),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4004),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4351),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7414),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8372),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(262),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5698),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2722),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(3900),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(5684),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5363),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1365),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(5026);const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(se,D){if(this.action=se,this.timestamp=D,this.type=PERFORM_ACTION,typeof se.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(se){this.timestamp=se,this.type=RESET}}class Rollback{constructor(se){this.timestamp=se,this.type=ROLLBACK}}class Commit{constructor(se){this.timestamp=se,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(se){this.id=se,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(se,D,m=!0){this.start=se,this.end=D,this.active=m,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(se){this.index=se,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(se){this.actionId=se,this.type=JUMP_TO_ACTION}}class ImportState{constructor(se){this.nextLiftedState=se,this.type=IMPORT_STATE}}class LockChanges{constructor(se){this.status=se,this.type=LOCK_CHANGES}}class PauseRecording{constructor(se){this.status=se,this.type=PAUSE_RECORDING}}class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(Ee){const se={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},D="function"==typeof Ee?Ee():Ee,J=Object.assign({},se,{features:D.features||!!D.logOnly&&{pause:!0,export:!0,test:!0}||se.features},D);if(J.maxAge&&J.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${J.maxAge}`);return J}function difference(Ee,se){return Ee.filter(D=>se.indexOf(D)<0)}function unliftState(Ee){const{computedStates:se,currentStateIndex:D}=Ee;if(D>=se.length){const{state:C}=se[se.length-1];return C}const{state:m}=se[D];return m}function unliftAction(Ee){return Ee.actionsById[Ee.nextActionId-1]}function liftAction(Ee){return new PerformAction(Ee,+Date.now())}function sanitizeActions(Ee,se){return Object.keys(se).reduce((D,m)=>{const C=Number(m);return D[C]=sanitizeAction(Ee,se[C],C),D},{})}function sanitizeAction(Ee,se,D){return{...se,action:Ee(se.action,D)}}function sanitizeStates(Ee,se){return se.map((D,m)=>({state:sanitizeState(Ee,D.state,m),error:D.error}))}function sanitizeState(Ee,se,D){return Ee(se,D)}function shouldFilterActions(Ee){return Ee.predicate||Ee.actionsSafelist||Ee.actionsBlocklist}function filterLiftedState(Ee,se,D,m){const C=[],J={},V=[];return Ee.stagedActionIds.forEach((q,te)=>{const X=Ee.actionsById[q];X&&(te&&isActionFiltered(Ee.computedStates[te],X,se,D,m)||(J[q]=X,C.push(q),V.push(Ee.computedStates[te])))}),{...Ee,stagedActionIds:C,actionsById:J,computedStates:V}}function isActionFiltered(Ee,se,D,m,C){const J=D&&!D(Ee,se.action),V=m&&!se.action.type.match(m.map(te=>escapeRegExp(te)).join("|")),q=C&&se.action.type.match(C.map(te=>escapeRegExp(te)).join("|"));return J||V||q}function escapeRegExp(Ee){return Ee.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}let DevtoolsDispatcher=(()=>{class Ee extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO{}return Ee.\u0275fac=function(){let se;return function(m){return(se||(se=_angular_core__WEBPACK_IMPORTED_MODULE_0__.n5z(Ee)))(m||Ee)}}(),Ee.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Redux Devtools Extension");let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(Ee,se,D){this.config=se,this.dispatcher=D,this.devtoolsExtension=Ee,this.createActionStreams()}notify(Ee,se){if(this.devtoolsExtension)if(Ee.type===PERFORM_ACTION){if(se.isLocked||se.isPaused)return;const D=unliftState(se);if(shouldFilterActions(this.config)&&isActionFiltered(D,Ee,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const m=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,D,se.currentStateIndex):D,C=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,Ee,se.nextActionId):Ee;this.sendToReduxDevtools(()=>this.extensionConnection.send(C,m))}else{const D={...se,stagedActionIds:se.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,se.actionsById):se.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,se.computedStates):se.computedStates};this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,D,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.y(Ee=>{const se=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=se,se.init(),se.subscribe(D=>Ee.next(D)),se.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.E}createActionStreams(){const Ee=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()),se=Ee.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(q=>q.type===ExtensionActionTypes.START)),D=Ee.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(q=>q.type===ExtensionActionTypes.STOP)),m=Ee.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(q=>q.type===ExtensionActionTypes.DISPATCH),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(q=>this.unwrapAction(q.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)(q=>q.type===IMPORT_STATE?this.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(te=>te.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(()=>q),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.K)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(q)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(q))),J=Ee.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(q=>q.type===ExtensionActionTypes.ACTION),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(q=>this.unwrapAction(q.payload))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(D)),V=m.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(D));this.start$=se.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(D)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>J)),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>V))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(Ee){const se={name:Ee.name,features:Ee.features,serialize:Ee.serialize,autoPause:Ee.autoPause??!1};return!1!==Ee.maxAge&&(se.maxAge=Ee.maxAge),se}sendToReduxDevtools(Ee){try{Ee()}catch(se){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",se)}}}return DevtoolsExtension.\u0275fac=function Ee(se){return new(se||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})();const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(Ee,se,D,m,C){if(m)return{state:D,error:"Interrupted by an error up the chain"};let V,J=D;try{J=Ee(D,se)}catch(q){V=q.toString(),C.handleError(q)}return{state:J,error:V}}function recomputeStates(Ee,se,D,m,C,J,V,q,te){if(se>=Ee.length&&Ee.length===J.length)return Ee;const X=Ee.slice(0,se),W=J.length-(te?1:0);for(let ee=se;ee<W;ee++){const Y=J[ee],le=C[Y].action,he=X[ee-1],Pe=he?he.state:m,He=he?he.error:void 0,Ue=V.indexOf(Y)>-1?he:computeNextEntry(D,le,Pe,He,q);X.push(Ue)}return te&&X.push(Ee[Ee.length-1]),X}function liftInitialState(Ee,se){return{monitorState:se(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:Ee,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(Ee,se,D,m,C={}){return J=>(V,q)=>{let{monitorState:te,actionsById:X,nextActionId:W,stagedActionIds:ee,skippedActionIds:Y,committedState:le,currentStateIndex:he,computedStates:Pe,isLocked:He,isPaused:Ae}=V||se;function Ue($e){let Je=$e,Le=ee.slice(1,Je+1);for(let Me=0;Me<Le.length;Me++){if(Pe[Me+1].error){Je=Me,Le=ee.slice(1,Je+1);break}delete X[Le[Me]]}Y=Y.filter(Me=>-1===Le.indexOf(Me)),ee=[0,...ee.slice(Je+1)],le=Pe[Je].state,Pe=Pe.slice(Je),he=he>Je?he-Je:0}function ke(){X={0:liftAction(INIT_ACTION)},W=1,ee=[0],Y=[],le=Pe[he].state,he=0,Pe=[]}V||(X=Object.create(X));let je=0;switch(q.type){case LOCK_CHANGES:He=q.status,je=1/0;break;case PAUSE_RECORDING:Ae=q.status,Ae?(ee=[...ee,W],X[W]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),W++,je=ee.length-1,Pe=Pe.concat(Pe[Pe.length-1]),he===ee.length-2&&he++,je=1/0):ke();break;case RESET:X={0:liftAction(INIT_ACTION)},W=1,ee=[0],Y=[],le=Ee,he=0,Pe=[];break;case COMMIT:ke();break;case ROLLBACK:X={0:liftAction(INIT_ACTION)},W=1,ee=[0],Y=[],he=0,Pe=[];break;case TOGGLE_ACTION:{const{id:$e}=q;Y=-1===Y.indexOf($e)?[$e,...Y]:Y.filter(Le=>Le!==$e),je=ee.indexOf($e);break}case SET_ACTIONS_ACTIVE:{const{start:$e,end:Je,active:Le}=q,Me=[];for(let yt=$e;yt<Je;yt++)Me.push(yt);Y=Le?difference(Y,Me):[...Y,...Me],je=ee.indexOf($e);break}case JUMP_TO_STATE:he=q.index,je=1/0;break;case JUMP_TO_ACTION:{const $e=ee.indexOf(q.actionId);-1!==$e&&(he=$e),je=1/0;break}case SWEEP:ee=difference(ee,Y),Y=[],he=Math.min(he,ee.length-1);break;case PERFORM_ACTION:{if(He)return V||se;if(Ae||V&&isActionFiltered(V.computedStates[he],q,C.predicate,C.actionsSafelist,C.actionsBlocklist)){const Je=Pe[Pe.length-1];Pe=[...Pe.slice(0,-1),computeNextEntry(J,q.action,Je.state,Je.error,D)],je=1/0;break}C.maxAge&&ee.length===C.maxAge&&Ue(1),he===ee.length-1&&he++;const $e=W++;X[$e]=q,ee=[...ee,$e],je=ee.length-1;break}case IMPORT_STATE:({monitorState:te,actionsById:X,nextActionId:W,stagedActionIds:ee,skippedActionIds:Y,committedState:le,currentStateIndex:he,computedStates:Pe,isLocked:He,isPaused:Ae}=q.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg:je=0,C.maxAge&&ee.length>C.maxAge&&(Pe=recomputeStates(Pe,je,J,le,X,ee,Y,D,Ae),Ue(ee.length-C.maxAge),je=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb:if(Pe.filter(Je=>Je.error).length>0)je=0,C.maxAge&&ee.length>C.maxAge&&(Pe=recomputeStates(Pe,je,J,le,X,ee,Y,D,Ae),Ue(ee.length-C.maxAge),je=1/0);else{if(!Ae&&!He){he===ee.length-1&&he++;const Je=W++;X[Je]=new PerformAction(q,+Date.now()),ee=[...ee,Je],je=ee.length-1,Pe=recomputeStates(Pe,je,J,le,X,ee,Y,D,Ae)}Pe=Pe.map(Je=>({...Je,state:J(Je.state,RECOMPUTE_ACTION)})),he=ee.length-1,C.maxAge&&ee.length>C.maxAge&&Ue(ee.length-C.maxAge),je=1/0}break;default:je=1/0}return Pe=recomputeStates(Pe,je,J,le,X,ee,Y,D,Ae),te=m(te,q),{monitorState:te,actionsById:X,nextActionId:W,stagedActionIds:ee,skippedActionIds:Y,committedState:le,currentStateIndex:he,computedStates:Pe,isLocked:He,isPaused:Ae}}}let StoreDevtools=(()=>{class Ee{constructor(D,m,C,J,V,q,te,X){const W=liftInitialState(te,X.monitor),ee=liftReducerWith(te,W,q,X.monitor,X),Y=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)(m.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.T)(1)),J.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(liftAction)),D,J.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Q)(rxjs__WEBPACK_IMPORTED_MODULE_18__.N)),le=C.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(ee)),he=new rxjs__WEBPACK_IMPORTED_MODULE_19__.t(1),Pe=Y.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.M)(le),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.R)(({state:ke},[je,$e])=>{let Je=$e(ke,je);return je.type!==PERFORM_ACTION&&shouldFilterActions(X)&&(Je=filterLiftedState(Je,X.predicate,X.actionsSafelist,X.actionsBlocklist)),J.notify(je,Je),{state:Je,action:je}},{state:W,action:null})).subscribe(({state:ke,action:je})=>{he.next(ke),je.type===PERFORM_ACTION&&V.next(je.action)}),He=J.start$.subscribe(()=>{this.refresh()}),Ae=he.asObservable(),Ue=Ae.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(unliftState));this.extensionStartSubscription=He,this.stateSubscription=Pe,this.dispatcher=D,this.liftedState=Ae,this.state=Ue}dispatch(D){this.dispatcher.next(D)}next(D){this.dispatcher.next(D)}error(D){}complete(){}performAction(D){this.dispatch(new PerformAction(D,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(D){this.dispatch(new ToggleAction(D))}jumpToAction(D){this.dispatch(new JumpToAction(D))}jumpToState(D){this.dispatch(new JumpToState(D))}importState(D){this.dispatch(new ImportState(D))}lockChanges(D){this.dispatch(new LockChanges(D))}pauseRecording(D){this.dispatch(new PauseRecording(D))}}return Ee.\u0275fac=function(D){return new(D||Ee)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_0__.qLn),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG))},Ee.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(Ee,se){return Boolean(Ee)||se.monitor!==noMonitor}function createReduxDevtoolsExtension(){const Ee="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&typeof window[Ee]<"u"?window[Ee]:null}function provideStoreDevtools(Ee={}){return{\u0275providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:Ee},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.mK,useExisting:DevtoolsDispatcher}]}}function createStateObservable(Ee){return Ee.state}let StoreDevtoolsModule=(()=>{class Ee{static instrument(D={}){return{ngModule:Ee,providers:[...provideStoreDevtools(D).\u0275providers]}}}return Ee.\u0275fac=function(D){return new(D||Ee)},Ee.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.oAB({type:Ee}),Ee.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.cJS({}),Ee})()},8555:(Ee,se,D)=>{D.d(se,{Aw:()=>Rn,CK:()=>Bn,FR:()=>Yn,Ky:()=>Ae,Lq:()=>Ds,P1:()=>Bt,PH:()=>He,UO:()=>Et,Y$:()=>br,Y6:()=>Xe,Ys:()=>Ur,ZF:()=>ue,cr:()=>Vn,mK:()=>nn,n$:()=>ir,on:()=>Lr,qC:()=>Kn,qg:()=>yt,wb:()=>Ri,yh:()=>Qn});var m=D(4650),C=D(1135),J=D(9751),V=D(7579),q=D(233),te=D(5363),X=D(1365),W=D(5026),ee=D(4813),Y=D(4004),le=D(1884);const he={};function He(_e,nt){if(he[_e]=(he[_e]||0)+1,"function"==typeof nt)return ke(_e,(...dt)=>({...nt(...dt),type:_e}));switch(nt?nt._as:"empty"){case"empty":return ke(_e,()=>({type:_e}));case"props":return ke(_e,dt=>({...dt,type:_e}));default:throw new Error("Unexpected config.")}}function Ae(){return{_as:"props",_p:void 0}}function ke(_e,nt){return Object.defineProperty(nt,"type",{value:_e,writable:!1})}const yt="@ngrx/store/init";let Et=(()=>{class _e extends C.X{constructor(){super({type:yt})}next(Ge){if("function"==typeof Ge)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof Ge>"u")throw new TypeError("Actions must be objects");if(typeof Ge.type>"u")throw new TypeError("Actions must have a type property");super.next(Ge)}complete(){}ngOnDestroy(){super.complete()}}return _e.\u0275fac=function(Ge){return new(Ge||_e)},_e.\u0275prov=m.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const Ye=[Et],Ot=new m.OlP("@ngrx/store Internal Root Guard"),At=new m.OlP("@ngrx/store Internal Initial State"),Xe=new m.OlP("@ngrx/store Initial State"),Ke=new m.OlP("@ngrx/store Reducer Factory"),ut=new m.OlP("@ngrx/store Internal Reducer Factory Provider"),qe=new m.OlP("@ngrx/store Initial Reducers"),xt=new m.OlP("@ngrx/store Internal Initial Reducers"),It=new m.OlP("@ngrx/store Store Features"),hn=new m.OlP("@ngrx/store Internal Store Reducers"),Jn=new m.OlP("@ngrx/store Internal Feature Reducers"),on=new m.OlP("@ngrx/store Internal Feature Configs"),$t=new m.OlP("@ngrx/store Internal Store Features"),On=new m.OlP("@ngrx/store Internal Feature Reducers Token"),gn=new m.OlP("@ngrx/store Feature Reducers"),rr=new m.OlP("@ngrx/store User Provided Meta Reducers"),zr=new m.OlP("@ngrx/store Meta Reducers"),bn=new m.OlP("@ngrx/store Internal Resolved Meta Reducers"),un=new m.OlP("@ngrx/store User Runtime Checks Config"),ei=new m.OlP("@ngrx/store Internal User Runtime Checks Config"),vt=new m.OlP("@ngrx/store Internal Runtime Checks"),at=new m.OlP("@ngrx/store Check if Action types are unique");function Pt(_e,nt={}){const Ge=Object.keys(_e),dt={};for(let jt=0;jt<Ge.length;jt++){const dn=Ge[jt];"function"==typeof _e[dn]&&(dt[dn]=_e[dn])}const Vt=Object.keys(dt);return function(dn,dr){dn=void 0===dn?nt:dn;let yr=!1;const ai={};for(let ur=0;ur<Vt.length;ur++){const Tr=Vt[ur],Qr=dn[Tr],So=(0,dt[Tr])(Qr,dr);ai[Tr]=So,yr=yr||So!==Qr}return yr?ai:dn}}function Kn(..._e){return function(nt){if(0===_e.length)return nt;const Ge=_e[_e.length-1];return _e.slice(0,-1).reduceRight((Vt,jt)=>jt(Vt),Ge(nt))}}function Nr(_e,nt){return Array.isArray(nt)&&nt.length>0&&(_e=Kn.apply(null,[...nt,_e])),(Ge,dt)=>{const Vt=_e(Ge);return(jt,dn)=>Vt(jt=void 0===jt?dt:jt,dn)}}new m.OlP("@ngrx/store Root Store Provider"),new m.OlP("@ngrx/store Feature State Provider");class ir extends J.y{}class nn extends Et{}const Ri="@ngrx/store/update-reducers";let Kr=(()=>{class _e extends C.X{constructor(Ge,dt,Vt,jt){super(jt(Vt,dt)),this.dispatcher=Ge,this.initialState=dt,this.reducers=Vt,this.reducerFactory=jt}get currentReducers(){return this.reducers}addFeature(Ge){this.addFeatures([Ge])}addFeatures(Ge){const dt=Ge.reduce((Vt,{reducers:jt,reducerFactory:dn,metaReducers:dr,initialState:yr,key:ai})=>{const ur="function"==typeof jt?function zi(_e){const nt=Array.isArray(_e)&&_e.length>0?Kn(..._e):Ge=>Ge;return(Ge,dt)=>(Ge=nt(Ge),(Vt,jt)=>Ge(Vt=void 0===Vt?dt:Vt,jt))}(dr)(jt,yr):Nr(dn,dr)(jt,yr);return Vt[ai]=ur,Vt},{});this.addReducers(dt)}removeFeature(Ge){this.removeFeatures([Ge])}removeFeatures(Ge){this.removeReducers(Ge.map(dt=>dt.key))}addReducer(Ge,dt){this.addReducers({[Ge]:dt})}addReducers(Ge){this.reducers={...this.reducers,...Ge},this.updateReducers(Object.keys(Ge))}removeReducer(Ge){this.removeReducers([Ge])}removeReducers(Ge){Ge.forEach(dt=>{this.reducers=function kn(_e,nt){return Object.keys(_e).filter(Ge=>Ge!==nt).reduce((Ge,dt)=>Object.assign(Ge,{[dt]:_e[dt]}),{})}(this.reducers,dt)}),this.updateReducers(Ge)}updateReducers(Ge){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:Ri,features:Ge})}ngOnDestroy(){this.complete()}}return _e.\u0275fac=function(Ge){return new(Ge||_e)(m.LFG(nn),m.LFG(Xe),m.LFG(qe),m.LFG(Ke))},_e.\u0275prov=m.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const Cr=[Kr,{provide:ir,useExisting:Kr},{provide:nn,useExisting:Et}];let br=(()=>{class _e extends V.x{ngOnDestroy(){this.complete()}}return _e.\u0275fac=function(){let nt;return function(dt){return(nt||(nt=m.n5z(_e)))(dt||_e)}}(),_e.\u0275prov=m.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const In=[br];class Yn extends J.y{}let sr=(()=>{class _e extends C.X{constructor(Ge,dt,Vt,jt){super(jt);const ai=Ge.pipe((0,te.Q)(q.N)).pipe((0,X.M)(dt)).pipe((0,W.R)(rn,{state:jt}));this.stateSubscription=ai.subscribe(({state:ur,action:Tr})=>{this.next(ur),Vt.next(Tr)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return _e.INIT=yt,_e.\u0275fac=function(Ge){return new(Ge||_e)(m.LFG(Et),m.LFG(ir),m.LFG(br),m.LFG(Xe))},_e.\u0275prov=m.Yz7({token:_e,factory:_e.\u0275fac}),_e})();function rn(_e={state:void 0},[nt,Ge]){const{state:dt}=_e;return{state:Ge(dt,nt),action:nt}}const Yt=[sr,{provide:Yn,useExisting:sr}];let Qn=(()=>{class _e extends J.y{constructor(Ge,dt,Vt){super(),this.actionsObserver=dt,this.reducerManager=Vt,this.source=Ge}select(Ge,...dt){return Ur.call(null,Ge,...dt)(this)}lift(Ge){const dt=new _e(this,this.actionsObserver,this.reducerManager);return dt.operator=Ge,dt}dispatch(Ge){this.actionsObserver.next(Ge)}next(Ge){this.actionsObserver.next(Ge)}error(Ge){this.actionsObserver.error(Ge)}complete(){this.actionsObserver.complete()}addReducer(Ge,dt){this.reducerManager.addReducer(Ge,dt)}removeReducer(Ge){this.reducerManager.removeReducer(Ge)}}return _e.\u0275fac=function(Ge){return new(Ge||_e)(m.LFG(Yn),m.LFG(Et),m.LFG(Kr))},_e.\u0275prov=m.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const mi=[Qn];function Ur(_e,nt,...Ge){return function(Vt){let jt;if("string"==typeof _e){const dn=[nt,...Ge].filter(Boolean);jt=Vt.pipe((0,ee.j)(_e,...dn))}else{if("function"!=typeof _e)throw new TypeError(`Unexpected type '${typeof _e}' in select operator, expected 'string' or 'function'`);jt=Vt.pipe((0,Y.U)(dn=>_e(dn,nt)))}return jt.pipe((0,le.x)())}}const ti="https://ngrx.io/guide/store/configuration/runtime-checks";function vr(_e){return void 0===_e}function ni(_e){return null===_e}function or(_e){return Array.isArray(_e)}function er(_e){return"object"==typeof _e&&null!==_e}function Qe(_e){return"function"==typeof _e}let bt=!1;function De(_e,nt){return _e===nt}function Mt(_e,nt=De,Ge=De){let jt,dt=null,Vt=null;return{memoized:function ai(){if(void 0!==jt)return jt.result;if(!dt)return Vt=_e.apply(null,arguments),dt=arguments,Vt;if(!function rt(_e,nt,Ge){for(let dt=0;dt<_e.length;dt++)if(!Ge(_e[dt],nt[dt]))return!0;return!1}(arguments,dt,nt))return Vt;const ur=_e.apply(null,arguments);return dt=arguments,Ge(Vt,ur)?Vt:(Vt=ur,ur)},reset:function dn(){dt=null,Vt=null},setResult:function dr(ur){jt={result:ur}},clearResult:function yr(){jt=void 0}}}function Bt(..._e){return function we(_e,nt={stateFn:Oe}){return function(...Ge){let dt=Ge;if(Array.isArray(dt[0])){const[ur,...Tr]=dt;dt=[...ur,...Tr]}const Vt=dt.slice(0,dt.length-1),jt=dt[dt.length-1],dn=Vt.filter(ur=>ur.release&&"function"==typeof ur.release),dr=_e(function(...ur){return jt.apply(null,ur)}),yr=Mt(function(ur,Tr){return nt.stateFn.apply(null,[ur,Vt,Tr,dr])});return Object.assign(yr.memoized,{release:function ai(){yr.reset(),dr.reset(),dn.forEach(ur=>ur.release())},projector:dr.memoized,setResult:yr.setResult,clearResult:yr.clearResult})}}(Mt)(..._e)}function Oe(_e,nt,Ge,dt){if(void 0===Ge){const jt=nt.map(dn=>dn(_e));return dt.memoized.apply(null,jt)}const Vt=nt.map(jt=>jt(_e,Ge));return dt.memoized.apply(null,[...Vt,Ge])}function ue(_e){return Bt(nt=>{const Ge=nt[_e];return!function me(){return bt}()&&(0,m.X6Q)()&&!(_e in nt)&&console.warn(`@ngrx/store: The feature name "${_e}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${_e}', ...) or StoreModule.forFeature('${_e}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),Ge},nt=>nt)}function Qt(_e,nt){return nt instanceof m.OlP?_e.get(nt):nt}function $n(_e,nt,Ge){return Ge.map((dt,Vt)=>{if(nt[Vt]instanceof m.OlP){const jt=_e.get(nt[Vt]);return{key:dt.key,reducerFactory:jt.reducerFactory?jt.reducerFactory:Pt,metaReducers:jt.metaReducers?jt.metaReducers:[],initialState:jt.initialState}}return dt})}function pr(_e,nt){return nt.map(dt=>dt instanceof m.OlP?_e.get(dt):dt)}function fi(_e){return"function"==typeof _e?_e():_e}function ct(_e,nt){return _e.concat(nt)}function Ze(_e){if(_e)throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function Wt(_e){Object.freeze(_e);const nt=Qe(_e);return Object.getOwnPropertyNames(_e).forEach(Ge=>{if(!Ge.startsWith("\u0275")&&function Re(_e,nt){return Object.prototype.hasOwnProperty.call(_e,nt)}(_e,Ge)&&(!nt||"caller"!==Ge&&"callee"!==Ge&&"arguments"!==Ge)){const dt=_e[Ge];(er(dt)||Qe(dt))&&!Object.isFrozen(dt)&&Wt(dt)}}),_e}function qn(_e,nt=[]){return(vr(_e)||ni(_e))&&0===nt.length?{path:["root"],value:_e}:Object.keys(_e).reduce((dt,Vt)=>{if(dt)return dt;const jt=_e[Vt];return function Ie(_e){return Qe(_e)&&_e.hasOwnProperty("\u0275cmp")}(jt)?dt:!(vr(jt)||ni(jt)||function Vr(_e){return"number"==typeof _e}(jt)||function Un(_e){return"boolean"==typeof _e}(jt)||function wi(_e){return"string"==typeof _e}(jt)||or(jt))&&(function Yr(_e){if(!function yi(_e){return er(_e)&&!or(_e)}(_e))return!1;const nt=Object.getPrototypeOf(_e);return nt===Object.prototype||null===nt}(jt)?qn(jt,[...nt,Vt]):{path:[...nt,Vt],value:jt})},!1)}function en(_e,nt){if(!1===_e)return;const Ge=_e.path.join("."),dt=new Error(`Detected unserializable ${nt} at "${Ge}". ${ti}#strict${nt}serializability`);throw dt.value=_e.value,dt.unserializablePath=Ge,dt}function ar(_e){return(0,m.X6Q)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,..._e}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function oi({strictActionSerializability:_e,strictStateSerializability:nt}){return Ge=>_e||nt?function Tn(_e,nt){return function(Ge,dt){nt.action(dt)&&en(qn(dt),"action");const Vt=_e(Ge,dt);return nt.state()&&en(qn(Vt),"state"),Vt}}(Ge,{action:dt=>_e&&!Ns(dt),state:()=>nt}):Ge}function Ar({strictActionImmutability:_e,strictStateImmutability:nt}){return Ge=>_e||nt?function Ct(_e,nt){return function(Ge,dt){const Vt=nt.action(dt)?Wt(dt):dt,jt=_e(Ge,Vt);return nt.state()?Wt(jt):jt}}(Ge,{action:dt=>_e&&!Ns(dt),state:()=>nt}):Ge}function Ns(_e){return _e.type.startsWith("@ngrx")}function Ls({strictActionWithinNgZone:_e}){return nt=>_e?function gr(_e,nt){return function(Ge,dt){if(nt.action(dt)&&!m.R0b.isInAngularZone())throw new Error(`Action '${dt.type}' running outside NgZone. ${ti}#strictactionwithinngzone`);return _e(Ge,dt)}}(nt,{action:Ge=>_e&&!Ns(Ge)}):nt}function pi(_e){return[{provide:ei,useValue:_e},{provide:un,useFactory:Rt,deps:[ei]},{provide:vt,deps:[un],useFactory:ar},{provide:zr,multi:!0,deps:[vt],useFactory:Ar},{provide:zr,multi:!0,deps:[vt],useFactory:oi},{provide:zr,multi:!0,deps:[vt],useFactory:Ls}]}function Mr(){return[{provide:at,multi:!0,deps:[vt],useFactory:Mn}]}function Rt(_e){return _e}function Mn(_e){if(!_e.strictActionTypeUniqueness)return;const nt=Object.entries(he).filter(([,Ge])=>Ge>1).map(([Ge])=>Ge);if(nt.length)throw new Error(`Action types are registered more than once, ${nt.map(Ge=>`"${Ge}"`).join(", ")}. ${ti}#strictactiontypeuniqueness`)}function Cn(_e,nt){return[{provide:Ot,useFactory:Ze,deps:[[Qn,new m.FiY,new m.tp0]]},{provide:At,useValue:nt.initialState},{provide:Xe,useFactory:fi,deps:[At]},{provide:xt,useValue:_e},{provide:hn,useExisting:_e instanceof m.OlP?_e:xt},{provide:qe,deps:[m.zs3,xt,[new m.tBr(hn)]],useFactory:Qt},{provide:rr,useValue:nt.metaReducers?nt.metaReducers:[]},{provide:bn,deps:[zr,rr],useFactory:ct},{provide:ut,useValue:nt.reducerFactory?nt.reducerFactory:Pt},{provide:Ke,deps:[ut,bn],useFactory:Nr},Ye,Cr,In,Yt,mi,pi(nt.runtimeChecks),Mr()]}function Yi(_e,nt,Ge={}){return[{provide:on,multi:!0,useValue:_e instanceof Object?{}:Ge},{provide:It,multi:!0,useValue:{key:_e instanceof Object?_e.name:_e,reducerFactory:Ge instanceof m.OlP||!Ge.reducerFactory?Pt:Ge.reducerFactory,metaReducers:Ge instanceof m.OlP||!Ge.metaReducers?[]:Ge.metaReducers,initialState:Ge instanceof m.OlP||!Ge.initialState?void 0:Ge.initialState}},{provide:$t,deps:[m.zs3,on,It],useFactory:$n},{provide:Jn,multi:!0,useValue:_e instanceof Object?_e.reducer:nt},{provide:On,multi:!0,useExisting:nt instanceof m.OlP?nt:Jn},{provide:gn,multi:!0,deps:[m.zs3,Jn,[new m.tBr(On)]],useFactory:pr},Mr()]}let Vn=(()=>{class _e{constructor(Ge,dt,Vt,jt,dn,dr){}}return _e.\u0275fac=function(Ge){return new(Ge||_e)(m.LFG(Et),m.LFG(ir),m.LFG(br),m.LFG(Qn),m.LFG(Ot,8),m.LFG(at,8))},_e.\u0275mod=m.oAB({type:_e}),_e.\u0275inj=m.cJS({}),_e})(),Bn=(()=>{class _e{constructor(Ge,dt,Vt,jt,dn){this.features=Ge,this.featureReducers=dt,this.reducerManager=Vt;const dr=Ge.map((yr,ai)=>{const Tr=dt.shift()[ai];return{...yr,reducers:Tr,initialState:fi(yr.initialState)}});Vt.addFeatures(dr)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return _e.\u0275fac=function(Ge){return new(Ge||_e)(m.LFG($t),m.LFG(gn),m.LFG(Kr),m.LFG(Vn),m.LFG(at,8))},_e.\u0275mod=m.oAB({type:_e}),_e.\u0275inj=m.cJS({}),_e})(),Rn=(()=>{class _e{static forRoot(Ge,dt={}){return{ngModule:Vn,providers:[...Cn(Ge,dt)]}}static forFeature(Ge,dt,Vt={}){return{ngModule:Bn,providers:[...Yi(Ge,dt,Vt)]}}}return _e.\u0275fac=function(Ge){return new(Ge||_e)},_e.\u0275mod=m.oAB({type:_e}),_e.\u0275inj=m.cJS({}),_e})();function Lr(..._e){return{reducer:_e.pop(),types:_e.map(dt=>dt.type)}}function Ds(_e,...nt){const Ge=new Map;for(const dt of nt)for(const Vt of dt.types){const jt=Ge.get(Vt);Ge.set(Vt,jt?(dr,yr)=>dt.reducer(jt(dr,yr),yr):dt.reducer)}return function(dt=_e,Vt){const jt=Ge.get(Vt.type);return jt?jt(dt,Vt):dt}}},4440:(Ee,se,D)=>{D.d(se,{C5:()=>ei,G2:()=>rr,gm:()=>un});var m=D(9671),C=D(4650),J=D(6197),V=D(9751),q=D(4004),te=D(6895),X=D(4793),W=D(529),ee=D(259),Y=D(9996),le=D(4716);class Xe{constructor(){this.db=(0,J.N8)()}create(at,Fe={}){let ft=(0,J.VF)((0,J.iH)(this.db,at));return(0,J.t8)(ft,{key:ft.key,...Fe}).then(),Promise.resolve({key:ft.key})}set(at,Fe={}){var ft=this;return(0,m.Z)(function*(){const Pt=(0,J.iH)(ft.db,at);yield(0,J.t8)(Pt,Fe)})()}update(at,Fe={}){var ft=this;return(0,m.Z)(function*(){const Pt=(0,J.iH)(ft.db,at);yield(0,J.Vx)(Pt,Fe)})()}remove(at){var Fe=this;return(0,m.Z)(function*(){const ft=(0,J.iH)(Fe.db,at);yield(0,J.Od)(ft)})()}readRealTime(at){return new V.y(Fe=>{(0,J.jM)((0,J.iH)(this.db,at),ft=>{let Pt=[];ft.exists()?(ft.forEach(kn=>{Pt.push({key:kn.key,...kn.val()})}),Fe.next(Pt)):Fe.next([])})})}readOnceWithObserver(at){return(0,J.jM)((0,J.iH)(this.db,at),Fe=>Fe.val(),{onlyOnce:!0})}readOnce(at){return new Promise((Fe,ft)=>{(0,J.U2)((0,J.iH)(this.db,at)).then(Pt=>{Pt.exists()?Fe({key:Pt.key,...Pt.val()}):Fe([])}).catch(Pt=>{ft(Pt)})})}readReal(at){return new V.y(Fe=>{(0,J.jM)((0,J.iH)(this.db,at),ft=>{ft.exists()?Fe.next(ft.val()):Fe.next(null)})})}updateCounter(at,Fe=!0){return new Promise((ft,Pt)=>{const kn=(0,J.iH)(this.db);(0,J.U2)((0,J.iU)(kn,"counter")).then(Kn=>{(0,J.Vx)((0,J.iH)(this.db,at),{counter:(0,J.nP)(Fe?1:-1)}).then(Nr=>{ft(Nr)})})})}others(){}checkPresence(at){const Fe=(0,J.iH)(this.db,`${at}/connections`),ft=(0,J.iH)(this.db,`${at}/lastOnline`),Pt=(0,J.iH)(this.db,".info/connected");(0,J.jM)(Pt,kn=>{if(!0===kn.val()){const Kn=(0,J.VF)(Fe);(0,J.ae)(Kn).remove().then(),(0,J.t8)(Kn,!0).then(),(0,J.ae)(ft).set((0,J.Bt)()).then()}})}onDisconnect(at){const Fe=(0,J.iH)(this.db,at);return(0,J.ae)(Fe)}detectingConnectionState(){return new V.y(at=>{const Fe=(0,J.iH)(this.db,".info/connected");(0,J.jM)(Fe,ft=>{at.next(ft.val())})})}}let Ke=(()=>{class vt extends Xe{constructor(){super()}get timestamp(){return(new Date).getTime()}getPresence(Fe){return this.readReal(`status/${Fe}`)}getUserOnlineCounts(){return this.readRealTime("status").pipe((0,q.U)(Fe=>Fe.reduce((ft,Pt)=>"online"===Pt.status?++ft:ft,0)))}getTotalUserCounts(){return this.readRealTime("status").pipe((0,q.U)(Fe=>Fe))}setPresence(Fe,ft){return this.set(`status/${Fe}`,{status:ft,timestamp:this.timestamp})}updateOnAway(Fe){document.onvisibilitychange=ft=>{"hidden"===document.visibilityState?this.setPresence(Fe,"away"):this.setPresence(Fe,"online")}}updateOnUser(Fe){this.detectingConnectionState().pipe((0,q.U)(Pt=>Pt?"online":"offline")).subscribe(Pt=>this.setPresence(Fe,Pt))}updateOnDisconnect(Fe){this.onDisconnect(`status/${Fe}`).update({status:"offline",timestamp:this.timestamp})}configure(Fe){this.updateOnAway(Fe),this.updateOnUser(Fe),this.updateOnDisconnect(Fe)}configureUserPresenceByLocal(){let Fe=localStorage.getItem("uid");this.checkingUser(Fe)}configureUserPresenceByLogin(Fe,ft={}){this.checkingUser(Fe,ft)}checkingUser(Fe,ft={}){Fe?this.configure(Fe):this.create("status",{uid:Fe,...ft}).then(Pt=>{localStorage.setItem("uid",Pt.key),this.configure(Pt.key)})}}return vt.\u0275fac=function(Fe){return new(Fe||vt)},vt.\u0275prov=C.Yz7({token:vt,factory:vt.\u0275fac}),vt})();const qe={provide:C.ip1,useFactory:function ut(vt){return()=>new Promise(function(){var at=(0,m.Z)(function*(Fe,ft){yield vt.configureUserPresenceByLocal(),Fe("done")});return function(Fe,ft){return at.apply(this,arguments)}}())},deps:[Ke],multi:!0};let It=(()=>{class vt extends Xe{constructor(Fe){super(),this.router=Fe}config(){this.router.events.subscribe(Fe=>{Fe instanceof X.m2&&(/[#$\[\]'?]/g.test(Fe.url)||this.updateCounter(`router-activities${Fe.url}`).then())})}}return vt.\u0275fac=function(Fe){return new(Fe||vt)(C.LFG(X.F0))},vt.\u0275prov=C.Yz7({token:vt,factory:vt.\u0275fac}),vt})();const Jn={provide:C.ip1,useFactory:vt=>()=>vt.config(),multi:!0,deps:[It]},$t={provide:W.TP,useClass:(()=>{class vt extends Xe{constructor(){super()}intercept(Fe,ft){return this.updateCounter("server-activities").then(),ft.handle(Fe)}}return vt.\u0275fac=function(Fe){return new(Fe||vt)},vt.\u0275prov=C.Yz7({token:vt,factory:vt.\u0275fac}),vt})(),multi:!0},On=new C.OlP(null);function gn(vt){return()=>{const at=(0,ee.ZF)(vt);(0,J.N8)(at),(0,Y.ad)(at),console.log(`no of Firebase app:: ${(0,ee.C6)().length}`)}}let rr=(()=>{class vt{constructor(Fe){this.config=Fe}static initializeApp(Fe){return{ngModule:vt,providers:[{provide:On,useFactory:gn(Fe)}]}}static initialize(Fe){let ft=[];return Fe.activityInHttp&&ft.push($t),Fe.activityInRouter&&ft.push(Jn),Fe.activityOfAnonymousUser&&ft.push(qe),{ngModule:vt,providers:ft}}}return vt.\u0275fac=function(Fe){return new(Fe||vt)(C.LFG(On))},vt.\u0275mod=C.oAB({type:vt}),vt.\u0275inj=C.cJS({providers:[It,Ke],imports:[te.ez]}),vt})();const zr="https://rktect-rest-default-rtdb.firebaseio.com/users.json",bn="kpPiWBeAJJ3KlXNQ1tULjJcYLWZoLMwdEpDRzKSc";let un=(()=>{class vt{constructor(Fe){this.http=Fe}getUsers(){return this.http.get(zr,{params:{auth:bn}})}createUser(Fe){return this.http.post(zr,Fe,{params:{auth:bn}})}}return vt.\u0275fac=function(Fe){return new(Fe||vt)(C.LFG(W.eN))},vt.\u0275prov=C.Yz7({token:vt,factory:vt.\u0275fac,providedIn:"root"}),vt})();class ei{constructor(){this.db=(0,Y.ad)(),this.auth=(0,le.v0)(),(0,Y.ST)(this.db).catch(at=>{"failed-precondition"==at.code?console.log("persistance failed"):"unimplemented"==at.code&&console.log("persistance not available")})}get colRef(){return(0,Y.hJ)(this.db,this.collectionPath)}getCollectionData(){return new Promise((at,Fe)=>{(0,Y.PL)(this.colRef).then(ft=>{let Pt=this.setData2(ft);at(Pt)}).catch(ft=>{Fe(ft.message)})})}getSingleDoc(at){const Fe=(0,Y.JU)(this.db,this.collectionPath,at);return new Promise((ft,Pt)=>(0,Y.QT)(Fe).then(kn=>{let Kn=this.transformSingleDoc(kn);ft(Kn)}).catch(kn=>{Pt(kn.message)}))}getSingleDocFromCache(at){var Fe=this;return(0,m.Z)(function*(){const ft=(0,Y.JU)(Fe.db,Fe.collectionPath,at);try{const Pt=yield(0,Y.kl)(ft);console.log("Cached document data:",Pt.data())}catch(Pt){console.log("Error getting cached document:",Pt)}})()}getCollectionRealTime(at){return this.unsubscribe=(0,Y.cf)(this.colRef,Fe=>{at(this.setData2(Fe))})}getDocRealTime(at,Fe){const ft=(0,Y.JU)(this.db,this.collectionPath,at);return(0,Y.cf)(ft,Pt=>{Fe(this.transformSingleDoc(Pt))})}g(){(0,Y.cf)(void 0,Fe=>{Fe.docChanges().forEach(ft=>{"added"===ft.type&&console.log("New city: ",ft.doc.data()),"modified"===ft.type&&console.log("Modified city: ",ft.doc.data()),"removed"===ft.type&&console.log("Removed city: ",ft.doc.data())})})}addingDoc(at={}){return(0,Y.ET)(this.colRef,{createdAt:(0,Y.Bt)(),updatedAt:(0,Y.Bt)(),...at})}deletingDoc(at){const Fe=(0,Y.JU)(this.db,this.collectionPath,at);return(0,Y.oe)(Fe)}updatingDoc(at,Fe){const ft=(0,Y.JU)(this.db,this.collectionPath,at);return(0,Y.r7)(ft,{updatedAt:(0,Y.Bt)(),...Fe})}signUpWithEmailPass({email:at,password:Fe}){return(0,le.Xb)(this.auth,at,Fe).then(ft=>Promise.resolve(ft.user)).catch(ft=>Promise.reject(ft.message))}signInWithEmailPass({email:at,password:Fe}){return(0,le.e5)(this.auth,at,Fe).then(ft=>Promise.resolve(ft.user)).catch(ft=>Promise.reject(ft.message))}onSignOut(){return(0,le.w7)(this.auth).then(at=>Promise.resolve(at)).catch(at=>Promise.reject(at.message))}subscribingAuthChangedRealTime(at){return(0,le.Aj)(this.auth,Fe=>{at(Fe)})}getPaginationData1(at={latestDoc:null,empty:!1,data:[]},Fe=5){return new Promise((ft,Pt)=>{const kn=(0,Y.IO)(this.colRef,(0,Y.Xo)("createdAt"),(0,Y.TQ)(at.latestDoc||0),(0,Y.b9)(Fe));(0,Y.PL)(kn).then(Kn=>{let Nr=this.setData2(Kn);at.latestDoc=Kn.docs[Kn.docs.length-1],at.data=[...at.data,...Nr],at.empty=Kn.empty,ft(at)}).catch(Kn=>{Pt(Kn.message)})})}getPaginationData(at={latestDoc:null,empty:!1,data:[],size:0},Fe=5){var ft=this;return(0,m.Z)(function*(){if(!at.empty)try{const Pt=(0,Y.IO)(ft.colRef,(0,Y.Xo)("createdAt"),(0,Y.TQ)(at.latestDoc||0),(0,Y.b9)(Fe)),kn=yield(0,Y.PL)(Pt);let Kn=ft.setData2(kn);return at.latestDoc=kn.docs[kn.docs.length-1],at.data=[...at.data,...Kn],at.empty=kn.empty,at.size=kn.size,at}catch(Pt){return Pt}})()}unsubscribeRealTime(){this.unsubscribe()}nextPage(at={latestDoc:null,empty:!1,data:[],size:0},Fe=5){var ft=this;return(0,m.Z)(function*(){const Pt=(0,Y.IO)(ft.colRef,(0,Y.Xo)("createdAt"),(0,Y.TQ)(at.latestDoc||0),(0,Y.b9)(Fe));return yield ft.handlePagination(Pt)})()}prePage(at={latestDoc:null,empty:!1,data:[],size:0},Fe=5){var ft=this;return(0,m.Z)(function*(){const Pt=(0,Y.IO)(ft.colRef,(0,Y.Xo)("createdAt"),(0,Y.Lx)(at.latestDoc||0),(0,Y.b9)(Fe));return yield ft.handlePagination(Pt,!1)})()}setData(at){return at.docs.map(Fe=>({id:Fe.id,...Fe.data()}))}setData2(at){let Fe=[];return at.docs.forEach(ft=>{Fe.push({...ft.data(),id:ft.id})}),Fe}transformSingleDoc(at){return{...at.data(),id:at.id}}handlePagination(at,Fe=!0){var ft=this;return(0,m.Z)(function*(){try{const Pt=yield(0,Y.PL)(at);let kn=ft.setData2(Pt);return{latestDoc:Fe?Pt.docs[Pt.docs.length-1]:Pt.docs[0],data:kn,empty:Pt.empty,size:Pt.size}}catch(Pt){return Pt}})()}}},259:(Ee,se,D)=>{D.d(se,{C6:()=>m.C6,ZF:()=>m.ZF});var m=D(6881);(0,m.KN)("firebase","9.17.1","app")},4716:(Ee,se,D)=>{D.d(se,{hJ:()=>so,Xb:()=>tt,gK:()=>Qs,v0:()=>xl,cx:()=>su,Aj:()=>Ya,e5:()=>Zr,rh:()=>ce,w7:()=>po});var m=D(9671),C=D(2090),J=D(6881),V=D(1877),q=D(655),te=D(4859);const Ae=function Pe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ue=new C.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),je=new V.Yd("@firebase/auth");function $e(O,...a){je.logLevel<=V.in.ERROR&&je.error(`Auth (${J.Jn}): ${O}`,...a)}function Je(O,...a){throw Et(O,...a)}function Le(O,...a){return Et(O,...a)}function Me(O,a,l){const c=Object.assign(Object.assign({},Ae()),{[a]:l});return new C.LL("auth","Firebase",c).create(a,{appName:O.name})}function Et(O,...a){if("string"!=typeof O){const l=a[0],c=[...a.slice(1)];return c[0]&&(c[0].appName=O.name),O._errorFactory.create(l,...c)}return Ue.create(O,...a)}function Ye(O,a,...l){if(!O)throw Et(a,...l)}function Ot(O){const a="INTERNAL ASSERTION FAILED: "+O;throw $e(a),new Error(a)}function At(O,a){O||Ot(a)}const Xe=new Map;function Ke(O){At(O instanceof Function,"Expected a class definition");let a=Xe.get(O);return a?(At(a instanceof O,"Instance stored in cache mismatched with class"),a):(a=new O,Xe.set(O,a),a)}function xt(){var O;return typeof self<"u"&&(null===(O=self.location)||void 0===O?void 0:O.href)||""}function hn(){var O;return typeof self<"u"&&(null===(O=self.location)||void 0===O?void 0:O.protocol)||null}class $t{constructor(a,l){this.shortDelay=a,this.longDelay=l,At(l>a,"Short delay should be less than long delay!"),this.isMobile=(0,C.uI)()||(0,C.b$)()}get(){return function Jn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function It(){return"http:"===hn()||"https:"===hn()}()||(0,C.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function On(O,a){At(O.emulator,"Emulator should always be set here");const{url:l}=O.emulator;return a?`${l}${a.startsWith("/")?a.slice(1):a}`:l}class gn{static initialize(a,l,c){this.fetchImpl=a,l&&(this.headersImpl=l),c&&(this.responseImpl=c)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const rr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},zr=new $t(3e4,6e4);function bn(O,a){return O.tenantId&&!a.tenantId?Object.assign(Object.assign({},a),{tenantId:O.tenantId}):a}function un(O,a,l,c){return ei.apply(this,arguments)}function ei(){return(ei=(0,m.Z)(function*(O,a,l,c,v={}){return vt(O,v,(0,m.Z)(function*(){let b={},H={};c&&("GET"===a?H=c:b={body:JSON.stringify(c)});const ne=(0,C.xO)(Object.assign({key:O.config.apiKey},H)).slice(1),ge=yield O._getAdditionalHeaders();return ge["Content-Type"]="application/json",O.languageCode&&(ge["X-Firebase-Locale"]=O.languageCode),gn.fetch()(Pt(O,O.config.apiHost,l,ne),Object.assign({method:a,headers:ge,referrerPolicy:"no-referrer"},b))}))})).apply(this,arguments)}function vt(O,a,l){return at.apply(this,arguments)}function at(){return(at=(0,m.Z)(function*(O,a,l){O._canInitEmulator=!1;const c=Object.assign(Object.assign({},rr),a);try{const v=new kn(O),b=yield Promise.race([l(),v.promise]);v.clearNetworkTimeout();const H=yield b.json();if("needConfirmation"in H)throw Kn(O,"account-exists-with-different-credential",H);if(b.ok&&!("errorMessage"in H))return H;{const ne=b.ok?H.errorMessage:H.error.message,[ge,be]=ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ge)throw Kn(O,"credential-already-in-use",H);if("EMAIL_EXISTS"===ge)throw Kn(O,"email-already-in-use",H);if("USER_DISABLED"===ge)throw Kn(O,"user-disabled",H);const We=c[ge]||ge.toLowerCase().replace(/[_\s]+/g,"-");if(be)throw Me(O,We,be);Je(O,We)}}catch(v){if(v instanceof C.ZR)throw v;Je(O,"network-request-failed")}})).apply(this,arguments)}function Fe(O,a,l,c){return ft.apply(this,arguments)}function ft(){return(ft=(0,m.Z)(function*(O,a,l,c,v={}){const b=yield un(O,a,l,c,v);return"mfaPendingCredential"in b&&Je(O,"multi-factor-auth-required",{_serverResponse:b}),b})).apply(this,arguments)}function Pt(O,a,l,c){const v=`${a}${l}?${c}`;return O.config.emulator?On(O.config,v):`${O.config.apiScheme}://${v}`}class kn{constructor(a){this.auth=a,this.timer=null,this.promise=new Promise((l,c)=>{this.timer=setTimeout(()=>c(Le(this.auth,"network-request-failed")),zr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kn(O,a,l){const c={appName:O.name};l.email&&(c.email=l.email),l.phoneNumber&&(c.phoneNumber=l.phoneNumber);const v=Le(O,a,c);return v.customData._tokenResponse=l,v}function zi(){return(zi=(0,m.Z)(function*(O,a){return un(O,"POST","/v1/accounts:delete",a)})).apply(this,arguments)}function Kr(){return(Kr=(0,m.Z)(function*(O,a){return un(O,"POST","/v1/accounts:lookup",a)})).apply(this,arguments)}function Cr(O){if(O)try{const a=new Date(Number(O));if(!isNaN(a.getTime()))return a.toUTCString()}catch{}}function Yn(){return(Yn=(0,m.Z)(function*(O,a=!1){const l=(0,C.m9)(O),c=yield l.getIdToken(a),v=rn(c);Ye(v&&v.exp&&v.auth_time&&v.iat,l.auth,"internal-error");const b="object"==typeof v.firebase?v.firebase:void 0,H=b?.sign_in_provider;return{claims:v,token:c,authTime:Cr(sr(v.auth_time)),issuedAtTime:Cr(sr(v.iat)),expirationTime:Cr(sr(v.exp)),signInProvider:H||null,signInSecondFactor:b?.sign_in_second_factor||null}})).apply(this,arguments)}function sr(O){return 1e3*Number(O)}function rn(O){const[a,l,c]=O.split(".");if(void 0===a||void 0===l||void 0===c)return $e("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,C.tV)(l);return v?JSON.parse(v):($e("Failed to decode base64 JWT payload"),null)}catch(v){return $e("Caught error parsing JWT payload as JSON",v?.toString()),null}}function Qn(O,a){return mi.apply(this,arguments)}function mi(){return(mi=(0,m.Z)(function*(O,a,l=!1){if(l)return a;try{return yield a}catch(c){throw c instanceof C.ZR&&function Ur({code:O}){return"auth/user-disabled"===O||"auth/user-token-expired"===O}(c)&&O.auth.currentUser===O&&(yield O.auth.signOut()),c}})).apply(this,arguments)}class ti{constructor(a){this.user=a,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(a){var l;if(a){const c=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),c}{this.errorBackoff=3e4;const v=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(a=!1){var l=this;if(!this.isRunning)return;const c=this.getInterval(a);this.timerId=setTimeout((0,m.Z)(function*(){yield l.iteration()}),c)}iteration(){var a=this;return(0,m.Z)(function*(){try{yield a.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&a.schedule(!0))}a.schedule()})()}}class vr{constructor(a,l){this.createdAt=a,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cr(this.lastLoginAt),this.creationTime=Cr(this.createdAt)}_copy(a){this.createdAt=a.createdAt,this.lastLoginAt=a.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ni(O){return or.apply(this,arguments)}function or(){return or=(0,m.Z)(function*(O){var a;const l=O.auth,c=yield O.getIdToken(),v=yield Qn(O,function Ri(O,a){return Kr.apply(this,arguments)}(l,{idToken:c}));Ye(v?.users.length,l,"internal-error");const b=v.users[0];O._notifyReloadListener(b);const H=null!==(a=b.providerUserInfo)&&void 0!==a&&a.length?function er(O){return O.map(a=>{var{providerId:l}=a,c=(0,q._T)(a,["providerId"]);return{providerId:l,uid:c.rawId||"",displayName:c.displayName||null,email:c.email||null,phoneNumber:c.phoneNumber||null,photoURL:c.photoUrl||null}})}(b.providerUserInfo):[],ne=function Vr(O,a){return[...O.filter(c=>!a.some(v=>v.providerId===c.providerId)),...a]}(O.providerData,H),We=!!O.isAnonymous&&!(O.email&&b.passwordHash||ne?.length),mt={uid:b.localId,displayName:b.displayName||null,photoURL:b.photoUrl||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,tenantId:b.tenantId||null,providerData:ne,metadata:new vr(b.createdAt,b.lastLoginAt),isAnonymous:We};Object.assign(O,mt)}),or.apply(this,arguments)}function Un(){return(Un=(0,m.Z)(function*(O){const a=(0,C.m9)(O);yield ni(a),yield a.auth._persistUserIfCurrent(a),a.auth._notifyListenersIfCurrent(a)})).apply(this,arguments)}function Yr(){return(Yr=(0,m.Z)(function*(O,a){const l=yield vt(O,{},(0,m.Z)(function*(){const c=(0,C.xO)({grant_type:"refresh_token",refresh_token:a}).slice(1),{tokenApiHost:v,apiKey:b}=O.config,H=Pt(O,v,"/v1/token",`key=${b}`),ne=yield O._getAdditionalHeaders();return ne["Content-Type"]="application/x-www-form-urlencoded",gn.fetch()(H,{method:"POST",headers:ne,body:c})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}class Qe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(a){Ye(a.idToken,"internal-error"),Ye(typeof a.idToken<"u","internal-error"),Ye(typeof a.refreshToken<"u","internal-error");const l="expiresIn"in a&&typeof a.expiresIn<"u"?Number(a.expiresIn):function Yt(O){const a=rn(O);return Ye(a,"internal-error"),Ye(typeof a.exp<"u","internal-error"),Ye(typeof a.iat<"u","internal-error"),Number(a.exp)-Number(a.iat)}(a.idToken);this.updateTokensAndExpiration(a.idToken,a.refreshToken,l)}getToken(a,l=!1){var c=this;return(0,m.Z)(function*(){return Ye(!c.accessToken||c.refreshToken,a,"user-token-expired"),l||!c.accessToken||c.isExpired?c.refreshToken?(yield c.refresh(a,c.refreshToken),c.accessToken):null:c.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(a,l){var c=this;return(0,m.Z)(function*(){const{accessToken:v,refreshToken:b,expiresIn:H}=yield function yi(O,a){return Yr.apply(this,arguments)}(a,l);c.updateTokensAndExpiration(v,b,Number(H))})()}updateTokensAndExpiration(a,l,c){this.refreshToken=l||null,this.accessToken=a||null,this.expirationTime=Date.now()+1e3*c}static fromJSON(a,l){const{refreshToken:c,accessToken:v,expirationTime:b}=l,H=new Qe;return c&&(Ye("string"==typeof c,"internal-error",{appName:a}),H.refreshToken=c),v&&(Ye("string"==typeof v,"internal-error",{appName:a}),H.accessToken=v),b&&(Ye("number"==typeof b,"internal-error",{appName:a}),H.expirationTime=b),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(a){this.accessToken=a.accessToken,this.refreshToken=a.refreshToken,this.expirationTime=a.expirationTime}_clone(){return Object.assign(new Qe,this.toJSON())}_performRefresh(){return Ot("not implemented")}}function Ie(O,a){Ye("string"==typeof O||typeof O>"u","internal-error",{appName:a})}class Re{constructor(a){var{uid:l,auth:c,stsTokenManager:v}=a,b=(0,q._T)(a,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ti(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=c,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=b.displayName||null,this.email=b.email||null,this.emailVerified=b.emailVerified||!1,this.phoneNumber=b.phoneNumber||null,this.photoURL=b.photoURL||null,this.isAnonymous=b.isAnonymous||!1,this.tenantId=b.tenantId||null,this.providerData=b.providerData?[...b.providerData]:[],this.metadata=new vr(b.createdAt||void 0,b.lastLoginAt||void 0)}getIdToken(a){var l=this;return(0,m.Z)(function*(){const c=yield Qn(l,l.stsTokenManager.getToken(l.auth,a));return Ye(c,l.auth,"internal-error"),l.accessToken!==c&&(l.accessToken=c,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),c})()}getIdTokenResult(a){return function In(O){return Yn.apply(this,arguments)}(this,a)}reload(){return function wi(O){return Un.apply(this,arguments)}(this)}_assign(a){this!==a&&(Ye(this.uid===a.uid,this.auth,"internal-error"),this.displayName=a.displayName,this.photoURL=a.photoURL,this.email=a.email,this.emailVerified=a.emailVerified,this.phoneNumber=a.phoneNumber,this.isAnonymous=a.isAnonymous,this.tenantId=a.tenantId,this.providerData=a.providerData.map(l=>Object.assign({},l)),this.metadata._copy(a.metadata),this.stsTokenManager._assign(a.stsTokenManager))}_clone(a){return new Re(Object.assign(Object.assign({},this),{auth:a,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(a){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=a,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(a){this.reloadListener?this.reloadListener(a):this.reloadUserInfo=a}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(a,l=!1){var c=this;return(0,m.Z)(function*(){let v=!1;a.idToken&&a.idToken!==c.stsTokenManager.accessToken&&(c.stsTokenManager.updateFromServerResponse(a),v=!0),l&&(yield ni(c)),yield c.auth._persistUserIfCurrent(c),v&&c.auth._notifyListenersIfCurrent(c)})()}delete(){var a=this;return(0,m.Z)(function*(){const l=yield a.getIdToken();return yield Qn(a,function Nr(O,a){return zi.apply(this,arguments)}(a.auth,{idToken:l})),a.stsTokenManager.clearRefreshToken(),a.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(a=>Object.assign({},a)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(a,l){var c,v,b,H,ne,ge,be,We;const mt=null!==(c=l.displayName)&&void 0!==c?c:void 0,Ht=null!==(v=l.email)&&void 0!==v?v:void 0,Dn=null!==(b=l.phoneNumber)&&void 0!==b?b:void 0,wn=null!==(H=l.photoURL)&&void 0!==H?H:void 0,tn=null!==(ne=l.tenantId)&&void 0!==ne?ne:void 0,yn=null!==(ge=l._redirectEventId)&&void 0!==ge?ge:void 0,Er=null!==(be=l.createdAt)&&void 0!==be?be:void 0,jn=null!==(We=l.lastLoginAt)&&void 0!==We?We:void 0,{uid:An,emailVerified:Di,isAnonymous:Oi,providerData:eo,stsTokenManager:Na}=l;Ye(An&&Na,a,"internal-error");const jr=Qe.fromJSON(this.name,Na);Ye("string"==typeof An,a,"internal-error"),Ie(mt,a.name),Ie(Ht,a.name),Ye("boolean"==typeof Di,a,"internal-error"),Ye("boolean"==typeof Oi,a,"internal-error"),Ie(Dn,a.name),Ie(wn,a.name),Ie(tn,a.name),Ie(yn,a.name),Ie(Er,a.name),Ie(jn,a.name);const Jo=new Re({uid:An,auth:a,email:Ht,emailVerified:Di,displayName:mt,isAnonymous:Oi,photoURL:wn,phoneNumber:Dn,tenantId:tn,stsTokenManager:jr,createdAt:Er,lastLoginAt:jn});return eo&&Array.isArray(eo)&&(Jo.providerData=eo.map(Co=>Object.assign({},Co))),yn&&(Jo._redirectEventId=yn),Jo}static _fromIdTokenResponse(a,l,c=!1){return(0,m.Z)(function*(){const v=new Qe;v.updateFromServerResponse(l);const b=new Re({uid:l.localId,auth:a,stsTokenManager:v,isAnonymous:c});return yield ni(b),b})()}}const de=(()=>{class O{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(l,c){var v=this;return(0,m.Z)(function*(){v.storage[l]=c})()}_get(l){var c=this;return(0,m.Z)(function*(){const v=c.storage[l];return void 0===v?null:v})()}_remove(l){var c=this;return(0,m.Z)(function*(){delete c.storage[l]})()}_addListener(l,c){}_removeListener(l,c){}}return O.type="NONE",O})();function me(O,a,l){return`firebase:${O}:${a}:${l}`}class De{constructor(a,l,c){this.persistence=a,this.auth=l,this.userKey=c;const{config:v,name:b}=this.auth;this.fullUserKey=me(this.userKey,v.apiKey,b),this.fullPersistenceKey=me("persistence",v.apiKey,b),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(a){return this.persistence._set(this.fullUserKey,a.toJSON())}getCurrentUser(){var a=this;return(0,m.Z)(function*(){const l=yield a.persistence._get(a.fullUserKey);return l?Re._fromJSON(a.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(a){var l=this;return(0,m.Z)(function*(){if(l.persistence===a)return;const c=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=a,c?l.setCurrentUser(c):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(a,l,c="authUser"){return(0,m.Z)(function*(){if(!l.length)return new De(Ke(de),a,c);const v=(yield Promise.all(l.map(function(){var be=(0,m.Z)(function*(We){if(yield We._isAvailable())return We});return function(We){return be.apply(this,arguments)}}()))).filter(be=>be);let b=v[0]||Ke(de);const H=me(c,a.config.apiKey,a.name);let ne=null;for(const be of l)try{const We=yield be._get(H);if(We){const mt=Re._fromJSON(a,We);be!==b&&(ne=mt),b=be;break}}catch{}const ge=v.filter(be=>be._shouldAllowMigration);return b._shouldAllowMigration&&ge.length?(b=ge[0],ne&&(yield b._set(H,ne.toJSON())),yield Promise.all(l.map(function(){var be=(0,m.Z)(function*(We){if(We!==b)try{yield We._remove(H)}catch{}});return function(We){return be.apply(this,arguments)}}())),new De(b,a,c)):new De(b,a,c)})()}}function rt(O){const a=O.toLowerCase();if(a.includes("opera/")||a.includes("opr/")||a.includes("opios/"))return"Opera";if(Oe(a))return"IEMobile";if(a.includes("msie")||a.includes("trident/"))return"IE";if(a.includes("edge/"))return"Edge";if(Ne(a))return"Firefox";if(a.includes("silk/"))return"Silk";if(ue(a))return"Blackberry";if(Se(a))return"Webos";if(Mt(a))return"Safari";if((a.includes("chrome/")||Bt(a))&&!a.includes("edge/"))return"Chrome";if(we(a))return"Android";{const c=O.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===c?.length)return c[1]}return"Other"}function Ne(O=(0,C.z$)()){return/firefox\//i.test(O)}function Mt(O=(0,C.z$)()){const a=O.toLowerCase();return a.includes("safari/")&&!a.includes("chrome/")&&!a.includes("crios/")&&!a.includes("android")}function Bt(O=(0,C.z$)()){return/crios\//i.test(O)}function Oe(O=(0,C.z$)()){return/iemobile/i.test(O)}function we(O=(0,C.z$)()){return/android/i.test(O)}function ue(O=(0,C.z$)()){return/blackberry/i.test(O)}function Se(O=(0,C.z$)()){return/webos/i.test(O)}function ze(O=(0,C.z$)()){return/iphone|ipad|ipod/i.test(O)||/macintosh/i.test(O)&&/mobile/i.test(O)}function pr(O=(0,C.z$)()){return ze(O)||we(O)||Se(O)||ue(O)||/windows phone/i.test(O)||Oe(O)}function ct(O,a=[]){let l;switch(O){case"Browser":l=rt((0,C.z$)());break;case"Worker":l=`${rt((0,C.z$)())}-${O}`;break;default:l=O}const c=a.length?a.join(","):"FirebaseCore-web";return`${l}/JsCore/${J.Jn}/${c}`}class Ze{constructor(a){this.auth=a,this.queue=[]}pushCallback(a,l){const c=b=>new Promise((H,ne)=>{try{H(a(b))}catch(ge){ne(ge)}});c.onAbort=l,this.queue.push(c);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(a){var l=this;return(0,m.Z)(function*(){if(l.auth.currentUser===a)return;const c=[];try{for(const v of l.queue)yield v(a),v.onAbort&&c.push(v.onAbort)}catch(v){c.reverse();for(const b of c)try{b()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}class Ct{constructor(a,l,c){this.app=a,this.heartbeatServiceProvider=l,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tn(this),this.idTokenSubscription=new Tn(this),this.beforeStateQueue=new Ze(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=a.name,this.clientVersion=c.sdkClientVersion}_initializeWithPersistence(a,l){var c=this;return l&&(this._popupRedirectResolver=Ke(l)),this._initializationPromise=this.queue((0,m.Z)(function*(){var v,b;if(!c._deleted&&(c.persistenceManager=yield De.create(c,a),!c._deleted)){if(null!==(v=c._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield c._popupRedirectResolver._initialize(c)}catch{}yield c.initializeCurrentUser(l),c.lastNotifiedUid=(null===(b=c.currentUser)||void 0===b?void 0:b.uid)||null,!c._deleted&&(c._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var a=this;return(0,m.Z)(function*(){if(a._deleted)return;const l=yield a.assertedPersistence.getCurrentUser();if(a.currentUser||l){if(a.currentUser&&l&&a.currentUser.uid===l.uid)return a._currentUser._assign(l),void(yield a.currentUser.getIdToken());yield a._updateCurrentUser(l,!0)}})()}initializeCurrentUser(a){var l=this;return(0,m.Z)(function*(){var c;const v=yield l.assertedPersistence.getCurrentUser();let b=v,H=!1;if(a&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const ne=null===(c=l.redirectUser)||void 0===c?void 0:c._redirectEventId,ge=b?._redirectEventId,be=yield l.tryRedirectSignIn(a);(!ne||ne===ge)&&be?.user&&(b=be.user,H=!0)}if(!b)return l.directlySetCurrentUser(null);if(!b._redirectEventId){if(H)try{yield l.beforeStateQueue.runMiddleware(b)}catch(ne){b=v,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(ne))}return b?l.reloadAndSetCurrentUserOrClear(b):l.directlySetCurrentUser(null)}return Ye(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===b._redirectEventId?l.directlySetCurrentUser(b):l.reloadAndSetCurrentUserOrClear(b)})()}tryRedirectSignIn(a){var l=this;return(0,m.Z)(function*(){let c=null;try{c=yield l._popupRedirectResolver._completeRedirectFn(l,a,!0)}catch{yield l._setRedirectUser(null)}return c})()}reloadAndSetCurrentUserOrClear(a){var l=this;return(0,m.Z)(function*(){try{yield ni(a)}catch(c){if("auth/network-request-failed"!==c?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(a)})()}useDeviceLanguage(){this.languageCode=function on(){if(typeof navigator>"u")return null;const O=navigator;return O.languages&&O.languages[0]||O.language||null}()}_delete(){var a=this;return(0,m.Z)(function*(){a._deleted=!0})()}updateCurrentUser(a){var l=this;return(0,m.Z)(function*(){const c=a?(0,C.m9)(a):null;return c&&Ye(c.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(c&&c._clone(l))})()}_updateCurrentUser(a,l=!1){var c=this;return(0,m.Z)(function*(){if(!c._deleted)return a&&Ye(c.tenantId===a.tenantId,c,"tenant-id-mismatch"),l||(yield c.beforeStateQueue.runMiddleware(a)),c.queue((0,m.Z)(function*(){yield c.directlySetCurrentUser(a),c.notifyAuthListeners()}))})()}signOut(){var a=this;return(0,m.Z)(function*(){return yield a.beforeStateQueue.runMiddleware(null),(a.redirectPersistenceManager||a._popupRedirectResolver)&&(yield a._setRedirectUser(null)),a._updateCurrentUser(null,!0)})()}setPersistence(a){var l=this;return this.queue((0,m.Z)(function*(){yield l.assertedPersistence.setPersistence(Ke(a))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(a){this._errorFactory=new C.LL("auth","Firebase",a())}onAuthStateChanged(a,l,c){return this.registerStateListener(this.authStateSubscription,a,l,c)}beforeAuthStateChanged(a,l){return this.beforeStateQueue.pushCallback(a,l)}onIdTokenChanged(a,l,c){return this.registerStateListener(this.idTokenSubscription,a,l,c)}toJSON(){var a;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(a=this._currentUser)||void 0===a?void 0:a.toJSON()}}_setRedirectUser(a,l){var c=this;return(0,m.Z)(function*(){const v=yield c.getOrInitRedirectPersistenceManager(l);return null===a?v.removeCurrentUser():v.setCurrentUser(a)})()}getOrInitRedirectPersistenceManager(a){var l=this;return(0,m.Z)(function*(){if(!l.redirectPersistenceManager){const c=a&&Ke(a)||l._popupRedirectResolver;Ye(c,l,"argument-error"),l.redirectPersistenceManager=yield De.create(l,[Ke(c._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(a){var l=this;return(0,m.Z)(function*(){var c,v;return l._isInitialized&&(yield l.queue((0,m.Z)(function*(){}))),(null===(c=l._currentUser)||void 0===c?void 0:c._redirectEventId)===a?l._currentUser:(null===(v=l.redirectUser)||void 0===v?void 0:v._redirectEventId)===a?l.redirectUser:null})()}_persistUserIfCurrent(a){var l=this;return(0,m.Z)(function*(){if(a===l.currentUser)return l.queue((0,m.Z)(function*(){return l.directlySetCurrentUser(a)}))})()}_notifyListenersIfCurrent(a){a===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var a,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const c=null!==(l=null===(a=this.currentUser)||void 0===a?void 0:a.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==c&&(this.lastNotifiedUid=c,this.authStateSubscription.next(this.currentUser))}registerStateListener(a,l,c,v){if(this._deleted)return()=>{};const b="function"==typeof l?l:l.next.bind(l),H=this._isInitialized?Promise.resolve():this._initializationPromise;return Ye(H,this,"internal-error"),H.then(()=>b(this.currentUser)),"function"==typeof l?a.addObserver(l,c,v):a.addObserver(l)}directlySetCurrentUser(a){var l=this;return(0,m.Z)(function*(){l.currentUser&&l.currentUser!==a&&l._currentUser._stopProactiveRefresh(),a&&l.isProactiveRefreshEnabled&&a._startProactiveRefresh(),l.currentUser=a,a?yield l.assertedPersistence.setCurrentUser(a):yield l.assertedPersistence.removeCurrentUser()})()}queue(a){return this.operations=this.operations.then(a,a),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(a){!a||this.frameworks.includes(a)||(this.frameworks.push(a),this.frameworks.sort(),this.clientVersion=ct(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var a=this;return(0,m.Z)(function*(){var l;const c={"X-Client-Version":a.clientVersion};a.app.options.appId&&(c["X-Firebase-gmpid"]=a.app.options.appId);const v=yield null===(l=a.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();return v&&(c["X-Firebase-Client"]=v),c})()}}function Wt(O){return(0,C.m9)(O)}class Tn{constructor(a){this.auth=a,this.observer=null,this.addObserver=(0,C.ne)(l=>this.observer=l)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function en(O){const a=O.indexOf(":");return a<0?"":O.substr(0,a+1)}function ar(O){if(!O)return null;const a=Number(O);return isNaN(a)?null:a}class Ar{constructor(a,l){this.providerId=a,this.signInMethod=l}toJSON(){return Ot("not implemented")}_getIdTokenResponse(a){return Ot("not implemented")}_linkToIdToken(a,l){return Ot("not implemented")}_getReauthenticationResolver(a){return Ot("not implemented")}}function pi(O,a){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,m.Z)(function*(O,a){return un(O,"POST","/v1/accounts:update",a)})).apply(this,arguments)}function Cn(){return(Cn=(0,m.Z)(function*(O,a){return Fe(O,"POST","/v1/accounts:signInWithPassword",bn(O,a))})).apply(this,arguments)}function _e(){return(_e=(0,m.Z)(function*(O,a){return Fe(O,"POST","/v1/accounts:signInWithEmailLink",bn(O,a))})).apply(this,arguments)}function Ge(){return(Ge=(0,m.Z)(function*(O,a){return Fe(O,"POST","/v1/accounts:signInWithEmailLink",bn(O,a))})).apply(this,arguments)}class dt extends Ar{constructor(a,l,c,v=null){super("password",c),this._email=a,this._password=l,this._tenantId=v}static _fromEmailAndPassword(a,l){return new dt(a,l,"password")}static _fromEmailAndCode(a,l,c=null){return new dt(a,l,"emailLink",c)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(a){const l="string"==typeof a?JSON.parse(a):a;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(a){var l=this;return(0,m.Z)(function*(){switch(l.signInMethod){case"password":return function cn(O,a){return Cn.apply(this,arguments)}(a,{returnSecureToken:!0,email:l._email,password:l._password});case"emailLink":return function Ds(O,a){return _e.apply(this,arguments)}(a,{email:l._email,oobCode:l._password});default:Je(a,"internal-error")}})()}_linkToIdToken(a,l){var c=this;return(0,m.Z)(function*(){switch(c.signInMethod){case"password":return pi(a,{idToken:l,returnSecureToken:!0,email:c._email,password:c._password});case"emailLink":return function nt(O,a){return Ge.apply(this,arguments)}(a,{idToken:l,email:c._email,oobCode:c._password});default:Je(a,"internal-error")}})()}_getReauthenticationResolver(a){return this._getIdTokenResponse(a)}}function Vt(O,a){return jt.apply(this,arguments)}function jt(){return(jt=(0,m.Z)(function*(O,a){return Fe(O,"POST","/v1/accounts:signInWithIdp",bn(O,a))})).apply(this,arguments)}class dr extends Ar{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(a){const l=new dr(a.providerId,a.signInMethod);return a.idToken||a.accessToken?(a.idToken&&(l.idToken=a.idToken),a.accessToken&&(l.accessToken=a.accessToken),a.nonce&&!a.pendingToken&&(l.nonce=a.nonce),a.pendingToken&&(l.pendingToken=a.pendingToken)):a.oauthToken&&a.oauthTokenSecret?(l.accessToken=a.oauthToken,l.secret=a.oauthTokenSecret):Je("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(a){const l="string"==typeof a?JSON.parse(a):a,{providerId:c,signInMethod:v}=l,b=(0,q._T)(l,["providerId","signInMethod"]);if(!c||!v)return null;const H=new dr(c,v);return H.idToken=b.idToken||void 0,H.accessToken=b.accessToken||void 0,H.secret=b.secret,H.nonce=b.nonce,H.pendingToken=b.pendingToken||null,H}_getIdTokenResponse(a){return Vt(a,this.buildRequest())}_linkToIdToken(a,l){const c=this.buildRequest();return c.idToken=l,Vt(a,c)}_getReauthenticationResolver(a){const l=this.buildRequest();return l.autoCreate=!1,Vt(a,l)}buildRequest(){const a={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)a.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),a.postBody=(0,C.xO)(l)}return a}}class hr{constructor(a){var l,c,v,b,H,ne;const ge=(0,C.zd)((0,C.pd)(a)),be=null!==(l=ge.apiKey)&&void 0!==l?l:null,We=null!==(c=ge.oobCode)&&void 0!==c?c:null,mt=function Gs(O){switch(O){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=ge.mode)&&void 0!==v?v:null);Ye(be&&We&&mt,"argument-error"),this.apiKey=be,this.operation=mt,this.code=We,this.continueUrl=null!==(b=ge.continueUrl)&&void 0!==b?b:null,this.languageCode=null!==(H=ge.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(ne=ge.tenantId)&&void 0!==ne?ne:null}static parseLink(a){const l=function ss(O){const a=(0,C.zd)((0,C.pd)(O)).link,l=a?(0,C.zd)((0,C.pd)(a)).deep_link_id:null,c=(0,C.zd)((0,C.pd)(O)).deep_link_id;return(c?(0,C.zd)((0,C.pd)(c)).link:null)||c||l||a||O}(a);try{return new hr(l)}catch{return null}}}let qr=(()=>{class O{constructor(){this.providerId=O.PROVIDER_ID}static credential(l,c){return dt._fromEmailAndPassword(l,c)}static credentialWithLink(l,c){const v=hr.parseLink(c);return Ye(v,"argument-error"),dt._fromEmailAndCode(l,v.code,v.tenantId)}}return O.PROVIDER_ID="password",O.EMAIL_PASSWORD_SIGN_IN_METHOD="password",O.EMAIL_LINK_SIGN_IN_METHOD="emailLink",O})();class os{constructor(a){this.providerId=a,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(a){this.defaultLanguageCode=a}setCustomParameters(a){return this.customParameters=a,this}getCustomParameters(){return this.customParameters}}class Gn extends os{constructor(){super(...arguments),this.scopes=[]}addScope(a){return this.scopes.includes(a)||this.scopes.push(a),this}getScopes(){return[...this.scopes]}}let so=(()=>{class O extends Gn{constructor(){super("google.com"),this.addScope("profile")}static credential(l,c){return dr._fromParams({providerId:O.PROVIDER_ID,signInMethod:O.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:c})}static credentialFromResult(l){return O.credentialFromTaggedObject(l)}static credentialFromError(l){return O.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:c,oauthAccessToken:v}=l;if(!c&&!v)return null;try{return O.credential(c,v)}catch{return null}}}return O.GOOGLE_SIGN_IN_METHOD="google.com",O.PROVIDER_ID="google.com",O})();function _o(O,a){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,m.Z)(function*(O,a){return Fe(O,"POST","/v1/accounts:signUp",bn(O,a))})).apply(this,arguments)}class Qi{constructor(a){this.user=a.user,this.providerId=a.providerId,this._tokenResponse=a._tokenResponse,this.operationType=a.operationType}static _fromIdTokenResponse(a,l,c,v=!1){return(0,m.Z)(function*(){const b=yield Re._fromIdTokenResponse(a,c,v),H=Ks(c);return new Qi({user:b,providerId:H,_tokenResponse:c,operationType:l})})()}static _forOperation(a,l,c){return(0,m.Z)(function*(){yield a._updateTokensIfNecessary(c,!0);const v=Ks(c);return new Qi({user:a,providerId:v,_tokenResponse:c,operationType:l})})()}}function Ks(O){return O.providerId?O.providerId:"phoneNumber"in O?"phone":null}class vo extends C.ZR{constructor(a,l,c,v){var b;super(l.code,l.message),this.operationType=c,this.user=v,Object.setPrototypeOf(this,vo.prototype),this.customData={appName:a.name,tenantId:null!==(b=a.tenantId)&&void 0!==b?b:void 0,_serverResponse:l.customData._serverResponse,operationType:c}}static _fromErrorAndOperation(a,l,c,v){return new vo(a,l,c,v)}}function ao(O,a,l,c){return("reauthenticate"===a?l._getReauthenticationResolver(O):l._getIdTokenResponse(O)).catch(b=>{throw"auth/multi-factor-auth-required"===b.code?vo._fromErrorAndOperation(O,b,a,c):b})}function Cs(O,a){return xn.apply(this,arguments)}function xn(){return(xn=(0,m.Z)(function*(O,a,l=!1){const c=yield Qn(O,a._linkToIdToken(O.auth,yield O.getIdToken()),l);return Qi._forOperation(O,"link",c)})).apply(this,arguments)}function Ca(O,a){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,m.Z)(function*(O,a,l=!1){const{auth:c}=O,v="reauthenticate";try{const b=yield Qn(O,ao(c,v,a,O),l);Ye(b.idToken,c,"internal-error");const H=rn(b.idToken);Ye(H,c,"internal-error");const{sub:ne}=H;return Ye(O.uid===ne,c,"user-mismatch"),Qi._forOperation(O,v,b)}catch(b){throw"auth/user-not-found"===b?.code&&Je(c,"user-mismatch"),b}})).apply(this,arguments)}function Ni(O,a){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,m.Z)(function*(O,a,l=!1){const c="signIn",v=yield ao(O,c,a),b=yield Qi._fromIdTokenResponse(O,c,v);return l||(yield O._updateCurrentUser(b.user)),b})).apply(this,arguments)}function vi(O,a){return uo.apply(this,arguments)}function uo(){return(uo=(0,m.Z)(function*(O,a){return Ni(Wt(O),a)})).apply(this,arguments)}function tt(O,a,l){return sn.apply(this,arguments)}function sn(){return(sn=(0,m.Z)(function*(O,a,l){const c=Wt(O),v=yield _o(c,{returnSecureToken:!0,email:a,password:l}),b=yield Qi._fromIdTokenResponse(c,"signIn",v);return yield c._updateCurrentUser(b.user),b})).apply(this,arguments)}function Zr(O,a,l){return vi((0,C.m9)(O),qr.credential(a,l))}class Ys{constructor(a,l,c={}){this.isNewUser=a,this.providerId=l,this.profile=c}}class Zi extends Ys{constructor(a,l,c,v){super(a,l,c),this.username=v}}class Yo extends Ys{constructor(a,l){super(a,"facebook.com",l)}}class Ka extends Zi{constructor(a,l){super(a,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class wl extends Ys{constructor(a,l){super(a,"google.com",l)}}class ii extends Zi{constructor(a,l,c){super(a,"twitter.com",l,c)}}function Qs(O){const{user:a,_tokenResponse:l}=O;return a.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function Ko(O){var a,l;if(!O)return null;const{providerId:c}=O,v=O.rawUserInfo?JSON.parse(O.rawUserInfo):{},b=O.isNewUser||"identitytoolkit#SignupNewUserResponse"===O.kind;if(!c&&O?.idToken){const H=null===(l=null===(a=rn(O.idToken))||void 0===a?void 0:a.firebase)||void 0===l?void 0:l.sign_in_provider;if(H)return new Ys(b,"anonymous"!==H&&"custom"!==H?H:null)}if(!c)return null;switch(c){case"facebook.com":return new Yo(b,v);case"github.com":return new Ka(b,v);case"google.com":return new wl(b,v);case"twitter.com":return new ii(b,v,O.screenName||null);case"custom":case"anonymous":return new Ys(b,null);default:return new Ys(b,c,v)}}(l)}function Ya(O,a,l,c){return(0,C.m9)(O).onAuthStateChanged(a,l,c)}function po(O){return(0,C.m9)(O).signOut()}const lt="__sak";class M{constructor(a,l){this.storageRetriever=a,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(lt,"1"),this.storage.removeItem(lt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(a,l){return this.storage.setItem(a,JSON.stringify(l)),Promise.resolve()}_get(a){const l=this.storage.getItem(a);return Promise.resolve(l?JSON.parse(l):null)}_remove(a){return this.storage.removeItem(a),Promise.resolve()}get storage(){return this.storageRetriever()}}const it=(()=>{class O extends M{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,c)=>this.onStorageEvent(l,c),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function z(){const O=(0,C.z$)();return Mt(O)||ze(O)}()&&function fi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=pr(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const c of Object.keys(this.listeners)){const v=this.storage.getItem(c),b=this.localCache[c];v!==b&&l(c,b,v)}}onStorageEvent(l,c=!1){if(!l.key)return void this.forAllChangedKeys((ne,ge,be)=>{this.notifyListeners(ne,be)});const v=l.key;if(c?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ne=this.storage.getItem(v);if(l.newValue!==ne)null!==l.newValue?this.storage.setItem(v,l.newValue):this.storage.removeItem(v);else if(this.localCache[v]===l.newValue&&!c)return}const b=()=>{const ne=this.storage.getItem(v);!c&&this.localCache[v]===ne||this.notifyListeners(v,ne)},H=this.storage.getItem(v);!function $n(){return(0,C.w1)()&&10===document.documentMode}()||H===l.newValue||l.newValue===l.oldValue?b():setTimeout(b,10)}notifyListeners(l,c){this.localCache[l]=c;const v=this.listeners[l];if(v)for(const b of Array.from(v))b(c&&JSON.parse(c))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,c,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:c,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,c){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(c)}_removeListener(l,c){this.listeners[l]&&(this.listeners[l].delete(c),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,c){var v=()=>super._set,b=this;return(0,m.Z)(function*(){yield v().call(b,l,c),b.localCache[l]=JSON.stringify(c)})()}_get(l){var c=()=>super._get,v=this;return(0,m.Z)(function*(){const b=yield c().call(v,l);return v.localCache[l]=JSON.stringify(b),b})()}_remove(l){var c=()=>super._remove,v=this;return(0,m.Z)(function*(){yield c().call(v,l),delete v.localCache[l]})()}}return O.type="LOCAL",O})(),ln=(()=>{class O extends M{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,c){}_removeListener(l,c){}}return O.type="SESSION",O})();let Wr=(()=>{class O{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const c=this.receivers.find(b=>b.isListeningto(l));if(c)return c;const v=new O(l);return this.receivers.push(v),v}isListeningto(l){return this.eventTarget===l}handleEvent(l){var c=this;return(0,m.Z)(function*(){const v=l,{eventId:b,eventType:H,data:ne}=v.data,ge=c.handlersMap[H];if(!ge?.size)return;v.ports[0].postMessage({status:"ack",eventId:b,eventType:H});const be=Array.from(ge).map(function(){var mt=(0,m.Z)(function*(Ht){return Ht(v.origin,ne)});return function(Ht){return mt.apply(this,arguments)}}()),We=yield function Dr(O){return Promise.all(O.map(function(){var a=(0,m.Z)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(c){return{fulfilled:!1,reason:c}}});return function(l){return a.apply(this,arguments)}}()))}(be);v.ports[0].postMessage({status:"done",eventId:b,eventType:H,response:We})})()}_subscribe(l,c){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(c)}_unsubscribe(l,c){this.handlersMap[l]&&c&&this.handlersMap[l].delete(c),(!c||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return O.receivers=[],O})();function tr(O="",a=10){let l="";for(let c=0;c<a;c++)l+=Math.floor(10*Math.random());return O+l}class cr{constructor(a){this.target=a,this.handlers=new Set}removeMessageHandler(a){a.messageChannel&&(a.messageChannel.port1.removeEventListener("message",a.onMessage),a.messageChannel.port1.close()),this.handlers.delete(a)}_send(a,l,c=50){var v=this;return(0,m.Z)(function*(){const b=typeof MessageChannel<"u"?new MessageChannel:null;if(!b)throw new Error("connection_unavailable");let H,ne;return new Promise((ge,be)=>{const We=tr("",20);b.port1.start();const mt=setTimeout(()=>{be(new Error("unsupported_event"))},c);ne={messageChannel:b,onMessage(Ht){const Dn=Ht;if(Dn.data.eventId===We)switch(Dn.data.status){case"ack":clearTimeout(mt),H=setTimeout(()=>{be(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),ge(Dn.data.response);break;default:clearTimeout(mt),clearTimeout(H),be(new Error("invalid_response"))}}},v.handlers.add(ne),b.port1.addEventListener("message",ne.onMessage),v.target.postMessage({eventType:a,eventId:We,data:l},[b.port2])}).finally(()=>{ne&&v.removeMessageHandler(ne)})})()}}function Zn(){return window}function Xr(){return typeof Zn().WorkerGlobalScope<"u"&&"function"==typeof Zn().importScripts}function _r(){return(_r=(0,m.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Wn="firebaseLocalStorageDb",fa=1,Rr="firebaseLocalStorage",Gt="fbase_key";class Eo{constructor(a){this.request=a}toPromise(){return new Promise((a,l)=>{this.request.addEventListener("success",()=>{a(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function Ma(O,a){return O.transaction([Rr],a?"readwrite":"readonly").objectStore(Rr)}function ol(){const O=indexedDB.open(Wn,fa);return new Promise((a,l)=>{O.addEventListener("error",()=>{l(O.error)}),O.addEventListener("upgradeneeded",()=>{const c=O.result;try{c.createObjectStore(Rr,{keyPath:Gt})}catch(v){l(v)}}),O.addEventListener("success",(0,m.Z)(function*(){const c=O.result;c.objectStoreNames.contains(Rr)?a(c):(c.close(),yield function pa(){const O=indexedDB.deleteDatabase(Wn);return new Eo(O).toPromise()}(),a(yield ol()))}))})}function as(O,a,l){return go.apply(this,arguments)}function go(){return(go=(0,m.Z)(function*(O,a,l){const c=Ma(O,!0).put({[Gt]:a,value:l});return new Eo(c).toPromise()})).apply(this,arguments)}function Pa(){return(Pa=(0,m.Z)(function*(O,a){const l=Ma(O,!1).get(a),c=yield new Eo(l).toPromise();return void 0===c?null:c.value})).apply(this,arguments)}function al(O,a){const l=Ma(O,!0).delete(a);return new Eo(l).toPromise()}const Hl=(()=>{class O{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,m.Z)(function*(){return l.db||(l.db=yield ol()),l.db})()}_withRetries(l){var c=this;return(0,m.Z)(function*(){let v=0;for(;;)try{const b=yield c._openDb();return yield l(b)}catch(b){if(v++>3)throw b;c.db&&(c.db.close(),c.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,m.Z)(function*(){return Xr()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,m.Z)(function*(){l.receiver=Wr._getInstance(function Fi(){return Xr()?self:null}()),l.receiver._subscribe("keyChanged",function(){var c=(0,m.Z)(function*(v,b){return{keyProcessed:(yield l._poll()).includes(b.key)}});return function(v,b){return c.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var c=(0,m.Z)(function*(v,b){return["keyChanged"]});return function(v,b){return c.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,m.Z)(function*(){var c,v;if(l.activeServiceWorker=yield function Vs(){return _r.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new cr(l.activeServiceWorker);const b=yield l.sender._send("ping",{},800);b&&null!==(c=b[0])&&void 0!==c&&c.fulfilled&&null!==(v=b[0])&&void 0!==v&&v.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var c=this;return(0,m.Z)(function*(){if(c.sender&&c.activeServiceWorker&&function mn(){var O;return(null===(O=navigator?.serviceWorker)||void 0===O?void 0:O.controller)||null}()===c.activeServiceWorker)try{yield c.sender._send("keyChanged",{key:l},c.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const l=yield ol();return yield as(l,lt,"1"),yield al(l,lt),!0}catch{}return!1})()}_withPendingWrite(l){var c=this;return(0,m.Z)(function*(){c.pendingWrites++;try{yield l()}finally{c.pendingWrites--}})()}_set(l,c){var v=this;return(0,m.Z)(function*(){return v._withPendingWrite((0,m.Z)(function*(){return yield v._withRetries(b=>as(b,l,c)),v.localCache[l]=c,v.notifyServiceWorker(l)}))})()}_get(l){var c=this;return(0,m.Z)(function*(){const v=yield c._withRetries(b=>function As(O,a){return Pa.apply(this,arguments)}(b,l));return c.localCache[l]=v,v})()}_remove(l){var c=this;return(0,m.Z)(function*(){return c._withPendingWrite((0,m.Z)(function*(){return yield c._withRetries(v=>al(v,l)),delete c.localCache[l],c.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,m.Z)(function*(){const c=yield l._withRetries(H=>{const ne=Ma(H,!1).getAll();return new Eo(ne).toPromise()});if(!c)return[];if(0!==l.pendingWrites)return[];const v=[],b=new Set;for(const{fbase_key:H,value:ne}of c)b.add(H),JSON.stringify(l.localCache[H])!==JSON.stringify(ne)&&(l.notifyListeners(H,ne),v.push(H));for(const H of Object.keys(l.localCache))l.localCache[H]&&!b.has(H)&&(l.notifyListeners(H,null),v.push(H));return v})()}notifyListeners(l,c){this.localCache[l]=c;const v=this.listeners[l];if(v)for(const b of Array.from(v))b(c)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,c){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(c)}_removeListener(l,c){this.listeners[l]&&(this.listeners[l].delete(c),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return O.type="LOCAL",O})();function Zs(O){return`__${O}${Math.floor(1e6*Math.random())}`}function cs(O,a){return a?Ke(a):(Ye(O._popupRedirectResolver,O,"argument-error"),O._popupRedirectResolver)}Zs("rcb"),new $t(3e4,6e4);class di extends Ar{constructor(a){super("custom","custom"),this.params=a}_getIdTokenResponse(a){return Vt(a,this._buildIdpRequest())}_linkToIdToken(a,l){return Vt(a,this._buildIdpRequest(l))}_getReauthenticationResolver(a){return Vt(a,this._buildIdpRequest())}_buildIdpRequest(a){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return a&&(l.idToken=a),l}}function S(O){return Ni(O.auth,new di(O),O.bypassAuthState)}function P(O){const{auth:a,user:l}=O;return Ye(l,a,"internal-error"),Ca(l,new di(O),O.bypassAuthState)}function w(O){return N.apply(this,arguments)}function N(){return(N=(0,m.Z)(function*(O){const{auth:a,user:l}=O;return Ye(l,a,"internal-error"),Cs(l,new di(O),O.bypassAuthState)})).apply(this,arguments)}class ${constructor(a,l,c,v,b=!1){this.auth=a,this.resolver=c,this.user=v,this.bypassAuthState=b,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var a=this;return new Promise(function(){var l=(0,m.Z)(function*(c,v){a.pendingPromise={resolve:c,reject:v};try{a.eventManager=yield a.resolver._initialize(a.auth),yield a.onExecution(),a.eventManager.registerConsumer(a)}catch(b){a.reject(b)}});return function(c,v){return l.apply(this,arguments)}}())}onAuthEvent(a){var l=this;return(0,m.Z)(function*(){const{urlResponse:c,sessionId:v,postBody:b,tenantId:H,error:ne,type:ge}=a;if(ne)return void l.reject(ne);const be={auth:l.auth,requestUri:c,sessionId:v,tenantId:H||void 0,postBody:b||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(ge)(be))}catch(We){l.reject(We)}})()}onError(a){this.reject(a)}getIdpTask(a){switch(a){case"signInViaPopup":case"signInViaRedirect":return S;case"linkViaPopup":case"linkViaRedirect":return w;case"reauthViaPopup":case"reauthViaRedirect":return P;default:Je(this.auth,"internal-error")}}resolve(a){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(a),this.unregisterAndCleanUp()}reject(a){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(a),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const re=new $t(2e3,1e4);function ce(O,a,l){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,m.Z)(function*(O,a,l){const c=Wt(O);!function yt(O,a,l){if(!(a instanceof l))throw l.name!==a.constructor.name&&Je(O,"argument-error"),Me(O,"argument-error",`Type of ${a.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(O,a,os);const v=cs(c,l);return new kr(c,"signInViaPopup",a,v).executeNotNull()})).apply(this,arguments)}let kr=(()=>{class O extends ${constructor(l,c,v,b,H){super(l,c,b,H),this.provider=v,this.authWindow=null,this.pollId=null,O.currentPopupAction&&O.currentPopupAction.cancel(),O.currentPopupAction=this}executeNotNull(){var l=this;return(0,m.Z)(function*(){const c=yield l.execute();return Ye(c,l.auth,"internal-error"),c})()}onExecution(){var l=this;return(0,m.Z)(function*(){At(1===l.filter.length,"Popup operations only handle one event");const c=tr();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],c),l.authWindow.associatedEvent=c,l.resolver._originValidation(l.auth).catch(v=>{l.reject(v)}),l.resolver._isIframeWebStorageSupported(l.auth,v=>{v||l.reject(Le(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(Le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,O.currentPopupAction=null}pollUserCancellation(){const l=()=>{var c,v;this.pollId=null!==(v=null===(c=this.authWindow)||void 0===c?void 0:c.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(l,re.get())};l()}}return O.currentPopupAction=null,O})();const _s="pendingRedirect",ki=new Map;class Ra extends ${constructor(a,l,c=!1){super(a,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,c),this.eventId=null}execute(){var a=()=>super.execute,l=this;return(0,m.Z)(function*(){let c=ki.get(l.auth._key());if(!c){try{const b=(yield function Wi(O,a){return el.apply(this,arguments)}(l.resolver,l.auth))?yield a().call(l):null;c=()=>Promise.resolve(b)}catch(v){c=()=>Promise.reject(v)}ki.set(l.auth._key(),c)}return l.bypassAuthState||ki.set(l.auth._key(),()=>Promise.resolve(null)),c()})()}onAuthEvent(a){var l=()=>super.onAuthEvent,c=this;return(0,m.Z)(function*(){if("signInViaRedirect"===a.type)return l().call(c,a);if("unknown"!==a.type){if(a.eventId){const v=yield c.auth._redirectUserForId(a.eventId);if(v)return c.user=v,l().call(c,a);c.resolve(null)}}else c.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function el(){return(el=(0,m.Z)(function*(O,a){const l=function dl(O){return me(_s,O.config.apiKey,O.name)}(a),c=function cl(O){return Ke(O._redirectPersistence)}(O);if(!(yield c._isAvailable()))return!1;const v="true"===(yield c._get(l));return yield c._remove(l),v})).apply(this,arguments)}function hi(O,a){ki.set(O._key(),a)}function su(O,a){return vu.apply(this,arguments)}function vu(){return(vu=(0,m.Z)(function*(O,a){return yield Wt(O)._initializationPromise,ja(O,a,!1)})).apply(this,arguments)}function ja(O,a){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,m.Z)(function*(O,a,l=!1){const c=Wt(O),v=cs(c,a),H=yield new Ra(c,v,l).execute();return H&&!l&&(delete H.user._redirectEventId,yield c._persistUserIfCurrent(H.user),yield c._setRedirectUser(null,a)),H})).apply(this,arguments)}class Mi{constructor(a){this.auth=a,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(a){this.consumers.add(a),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,a)&&(this.sendToConsumer(this.queuedRedirectEvent,a),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(a){this.consumers.delete(a)}onEvent(a){if(this.hasEventBeenHandled(a))return!1;let l=!1;return this.consumers.forEach(c=>{this.isEventForConsumer(a,c)&&(l=!0,this.sendToConsumer(a,c),this.saveEventToCache(a))}),this.hasHandledPotentialRedirect||!function Ei(O){switch(O.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hs(O);default:return!1}}(a)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=a,l=!0)),l}sendToConsumer(a,l){var c;if(a.error&&!Hs(a)){const v=(null===(c=a.error.code)||void 0===c?void 0:c.split("auth/")[1])||"internal-error";l.onError(Le(this.auth,v))}else l.onAuthEvent(a)}isEventForConsumer(a,l){const c=null===l.eventId||!!a.eventId&&a.eventId===l.eventId;return l.filter.includes(a.type)&&c}hasEventBeenHandled(a){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tl(a))}saveEventToCache(a){this.cachedEventUids.add(tl(a)),this.lastProcessedEventTime=Date.now()}}function tl(O){return[O.type,O.eventId,O.sessionId,O.tenantId].filter(a=>a).join("-")}function Hs({type:O,error:a}){return"unknown"===O&&"auth/no-auth-event"===a?.code}function Ps(){return(Ps=(0,m.Z)(function*(O,a={}){return un(O,"GET","/v1/projects",a)})).apply(this,arguments)}const ts=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Os=/^https?/;function si(){return si=(0,m.Z)(function*(O){if(O.config.emulator)return;const{authorizedDomains:a}=yield function Gl(O){return Ps.apply(this,arguments)}(O);for(const l of a)try{if(Wl(l))return}catch{}Je(O,"unauthorized-domain")}),si.apply(this,arguments)}function Wl(O){const a=xt(),{protocol:l,hostname:c}=new URL(a);if(O.startsWith("chrome-extension://")){const H=new URL(O);return""===H.hostname&&""===c?"chrome-extension:"===l&&O.replace("chrome-extension://","")===a.replace("chrome-extension://",""):"chrome-extension:"===l&&H.hostname===c}if(!Os.test(l))return!1;if(ts.test(O))return c===O;const v=O.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(c)}const nl=new $t(3e4,6e4);function gl(){const O=Zn().___jsl;if(O?.H)for(const a of Object.keys(O.H))if(O.H[a].r=O.H[a].r||[],O.H[a].L=O.H[a].L||[],O.H[a].r=[...O.H[a].L],O.CP)for(let l=0;l<O.CP.length;l++)O.CP[l]=null}let rl=null;function ml(O){return rl=rl||function Do(O){return new Promise((a,l)=>{var c,v,b;function H(){gl(),gapi.load("gapi.iframes",{callback:()=>{a(gapi.iframes.getContext())},ontimeout:()=>{gl(),l(Le(O,"network-request-failed"))},timeout:nl.get()})}if(null!==(v=null===(c=Zn().gapi)||void 0===c?void 0:c.iframes)&&void 0!==v&&v.Iframe)a(gapi.iframes.getContext());else{if(null===(b=Zn().gapi)||void 0===b||!b.load){const ne=Zs("iframefcb");return Zn()[ne]=()=>{gapi.load?H():l(Le(O,"network-request-failed"))},function Sl(O){return new Promise((a,l)=>{const c=document.createElement("script");c.setAttribute("src",O),c.onload=a,c.onerror=v=>{const b=Le("internal-error");b.customData=v,l(b)},c.type="text/javascript",c.charset="UTF-8",function ys(){var O,a;return null!==(a=null===(O=document.getElementsByTagName("head"))||void 0===O?void 0:O[0])&&void 0!==a?a:document}().appendChild(c)})}(`https://apis.google.com/js/api.js?onload=${ne}`).catch(ge=>l(ge))}H()}}).catch(a=>{throw rl=null,a})}(O),rl}const Pl=new $t(5e3,15e3),ku="__/auth/iframe",Ui="emulator/auth/iframe",Uu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ol=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vu(O){const a=O.config;Ye(a.authDomain,O,"auth-domain-config-required");const l=a.emulator?On(a,Ui):`https://${O.config.authDomain}/${ku}`,c={apiKey:a.apiKey,appName:O.name,v:J.Jn},v=Ol.get(O.config.apiHost);v&&(c.eid=v);const b=O._getFrameworks();return b.length&&(c.fw=b.join(",")),`${l}?${(0,C.xO)(c).slice(1)}`}function Kl(){return Kl=(0,m.Z)(function*(O){const a=yield ml(O),l=Zn().gapi;return Ye(l,O,"internal-error"),a.open({where:document.body,url:Vu(O),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uu,dontclear:!0},c=>new Promise(function(){var v=(0,m.Z)(function*(b,H){yield c.restyle({setHideOnLeave:!1});const ne=Le(O,"network-request-failed"),ge=Zn().setTimeout(()=>{H(ne)},Pl.get());function be(){Zn().clearTimeout(ge),b(c)}c.ping(be).then(be,()=>{H(ne)})});return function(b,H){return v.apply(this,arguments)}}()))}),Kl.apply(this,arguments)}const Du={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ha=500,ns=600,Yl="_blank",Io="http://localhost";class yl{constructor(a){this.window=a,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ql="__/auth/handler",ou="emulator/auth/handler";function au(O,a,l,c,v,b){Ye(O.config.authDomain,O,"auth-domain-config-required"),Ye(O.config.apiKey,O,"invalid-api-key");const H={apiKey:O.config.apiKey,appName:O.name,authType:l,redirectUrl:c,v:J.Jn,eventId:v};if(a instanceof os){a.setDefaultLanguage(O.languageCode),H.providerId=a.providerId||"",(0,C.xb)(a.getCustomParameters())||(H.customParameters=JSON.stringify(a.getCustomParameters()));for(const[ge,be]of Object.entries(b||{}))H[ge]=be}if(a instanceof Gn){const ge=a.getScopes().filter(be=>""!==be);ge.length>0&&(H.scopes=ge.join(","))}O.tenantId&&(H.tid=O.tenantId);const ne=H;for(const ge of Object.keys(ne))void 0===ne[ge]&&delete ne[ge];return`${function lu({config:O}){return O.emulator?On(O,ou):`https://${O.authDomain}/${Ql}`}(O)}?${(0,C.xO)(ne).slice(1)}`}const uu="webStorageSupport",Bu=class Iu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ln,this._completeRedirectFn=ja,this._overrideRedirectResult=hi}_openPopup(a,l,c,v){var b=this;return(0,m.Z)(function*(){var H;At(null===(H=b.eventManagers[a._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const ne=au(a,l,c,xt(),v);return function ko(O,a,l,c=Ha,v=ns){const b=Math.max((window.screen.availHeight-v)/2,0).toString(),H=Math.max((window.screen.availWidth-c)/2,0).toString();let ne="";const ge=Object.assign(Object.assign({},Du),{width:c.toString(),height:v.toString(),top:b,left:H}),be=(0,C.z$)().toLowerCase();l&&(ne=Bt(be)?Yl:l),Ne(be)&&(a=a||Io,ge.scrollbars="yes");const We=Object.entries(ge).reduce((Ht,[Dn,wn])=>`${Ht}${Dn}=${wn},`,"");if(function Qt(O=(0,C.z$)()){var a;return ze(O)&&!(null===(a=window.navigator)||void 0===a||!a.standalone)}(be)&&"_self"!==ne)return function Rl(O,a){const l=document.createElement("a");l.href=O,l.target=a;const c=document.createEvent("MouseEvent");c.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(c)}(a||"",ne),new yl(null);const mt=window.open(a||"",ne,We);Ye(mt,O,"popup-blocked");try{mt.focus()}catch{}return new yl(mt)}(a,ne,tr())})()}_openRedirect(a,l,c,v){var b=this;return(0,m.Z)(function*(){return yield b._originValidation(a),function Jt(O){Zn().location.href=O}(au(a,l,c,xt(),v)),new Promise(()=>{})})()}_initialize(a){const l=a._key();if(this.eventManagers[l]){const{manager:v,promise:b}=this.eventManagers[l];return v?Promise.resolve(v):(At(b,"If manager is not set, promise should be"),b)}const c=this.initAndGetManager(a);return this.eventManagers[l]={promise:c},c.catch(()=>{delete this.eventManagers[l]}),c}initAndGetManager(a){var l=this;return(0,m.Z)(function*(){const c=yield function zl(O){return Kl.apply(this,arguments)}(a),v=new Mi(a);return c.register("authEvent",b=>(Ye(b?.authEvent,a,"invalid-auth-event"),{status:v.onEvent(b.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[a._key()]={manager:v},l.iframes[a._key()]=c,v})()}_isIframeWebStorageSupported(a,l){this.iframes[a._key()].send(uu,{type:uu},v=>{var b;const H=null===(b=v?.[0])||void 0===b?void 0:b[uu];void 0!==H&&l(!!H),Je(a,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(a){const l=a._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Eu(O){return si.apply(this,arguments)}(a)),this.originValidationPromises[l]}get _shouldInitProactively(){return pr()||Mt()||ze()}};var vs="@firebase/auth";class Uo{constructor(a){this.auth=a,this.internalListeners=new Map}getUid(){var a;return this.assertAuthConfigured(),(null===(a=this.auth.currentUser)||void 0===a?void 0:a.uid)||null}getToken(a){var l=this;return(0,m.Z)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(a)}:null})()}addAuthTokenListener(a){if(this.assertAuthConfigured(),this.internalListeners.has(a))return;const l=this.auth.onIdTokenChanged(c=>{a(c?.stsTokenManager.accessToken||null)});this.internalListeners.set(a,l),this.updateProactiveRefresh()}removeAuthTokenListener(a){this.assertAuthConfigured();const l=this.internalListeners.get(a);l&&(this.internalListeners.delete(a),l(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ia=(0,C.Pz)("authIdTokenMaxAge")||300;let ql=null;const _l=O=>function(){var a=(0,m.Z)(function*(l){const c=l&&(yield l.getIdTokenResult()),v=c&&((new Date).getTime()-Date.parse(c.issuedAtTime))/1e3;if(v&&v>Ia)return;const b=c?.token;ql!==b&&(ql=b,yield fetch(O,{method:b?"POST":"DELETE",headers:b?{Authorization:`Bearer ${b}`}:{}}))});return function(l){return a.apply(this,arguments)}}();function xl(O=(0,J.Mq)()){const a=(0,J.qX)(O,"auth");if(a.isInitialized())return a.getImmediate();const l=function ut(O,a){const l=(0,J.qX)(O,"auth");if(l.isInitialized()){const v=l.getImmediate(),b=l.getOptions();if((0,C.vZ)(b,a??{}))return v;Je(v,"already-initialized")}return l.initialize({options:a})}(O,{popupRedirectResolver:Bu,persistence:[Hl,it,ln]}),c=(0,C.Pz)("authTokenSyncURL");if(c){const b=_l(c);(function Aa(O,a,l){(0,C.m9)(O).beforeAuthStateChanged(a,l)})(l,b,()=>b(l.currentUser)),function ba(O,a,l,c){(0,C.m9)(O).onIdTokenChanged(a,l,c)}(l,H=>b(H))}const v=(0,C.q4)("auth");return v&&function qn(O,a,l){const c=Wt(O);Ye(c._canInitEmulator,c,"emulator-config-failed"),Ye(/^https?:\/\//.test(a),c,"invalid-emulator-scheme");const v=!!l?.disableWarnings,b=en(a),{host:H,port:ne}=function gr(O){const a=en(O),l=/(\/\/)?([^?#/]+)/.exec(O.substr(a.length));if(!l)return{host:"",port:null};const c=l[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(c);if(v){const b=v[1];return{host:b,port:ar(c.substr(b.length+1))}}{const[b,H]=c.split(":");return{host:b,port:ar(H)}}}(a);c.config.emulator={url:`${b}//${H}${null===ne?"":`:${ne}`}/`},c.settings.appVerificationDisabledForTesting=!0,c.emulatorConfig=Object.freeze({host:H,port:ne,protocol:b.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function oi(){function O(){const a=document.createElement("p"),l=a.style;a.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",a.classList.add("firebase-emulator-warning"),document.body.appendChild(a)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",O):O())}()}(l,`http://${v}`),l}!function Pi(O){(0,J.Xd)(new te.wA("auth",(a,{options:l})=>{const c=a.getProvider("app").getImmediate(),v=a.getProvider("heartbeat"),{apiKey:b,authDomain:H}=c.options;return((ne,ge)=>{Ye(b&&!b.includes(":"),"invalid-api-key",{appName:ne.name}),Ye(!H?.includes(":"),"argument-error",{appName:ne.name});const be={apiKey:b,authDomain:H,clientPlatform:O,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ct(O)},We=new Ct(ne,ge,be);return function qe(O,a){const l=a?.persistence||[],c=(Array.isArray(l)?l:[l]).map(Ke);a?.errorMap&&O._updateErrorMap(a.errorMap),O._initializeWithPersistence(c,a?.popupRedirectResolver)}(We,l),We})(c,v)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((a,l,c)=>{a.getProvider("auth-internal").initialize()})),(0,J.Xd)(new te.wA("auth-internal",a=>{const l=Wt(a.getProvider("auth").getImmediate());return new Uo(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,J.KN)(vs,"0.21.3",function Da(O){switch(O){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(O)),(0,J.KN)(vs,"0.21.3","esm2017")}("Browser")},6197:(Ee,se,D)=>{D.d(se,{iU:()=>jr,U2:()=>ic,N8:()=>Eh,nP:()=>Hc,S1:()=>Vi,ae:()=>Jo,jM:()=>Pr,VF:()=>Co,iH:()=>eo,Od:()=>La,Bt:()=>Ih,t8:()=>ea,Vx:()=>kc});var m=D(9671),C=D(6881),J=D(4859),V=D(2090),q=D(1877);const te="@firebase/database",X="0.14.3";let W="";class Y{constructor(h){this.domStorage_=h,this.prefix_="firebase:"}set(h,f){null==f?this.domStorage_.removeItem(this.prefixedName_(h)):this.domStorage_.setItem(this.prefixedName_(h),(0,V.Wl)(f))}get(h){const f=this.domStorage_.getItem(this.prefixedName_(h));return null==f?null:(0,V.cI)(f)}remove(h){this.domStorage_.removeItem(this.prefixedName_(h))}prefixedName_(h){return this.prefix_+h}toString(){return this.domStorage_.toString()}}class le{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(h,f){null==f?delete this.cache_[h]:this.cache_[h]=f}get(h){return(0,V.r3)(this.cache_,h)?this.cache_[h]:null}remove(h){delete this.cache_[h]}}const he=function(g){try{if(typeof window<"u"&&typeof window[g]<"u"){const h=window[g];return h.setItem("firebase:sentinel","cache"),h.removeItem("firebase:sentinel"),new Y(h)}}catch{}return new le},Pe=he("localStorage"),He=he("sessionStorage"),Ae=new q.Yd("@firebase/database"),Ue=function(){let g=1;return function(){return g++}}(),ke=function(g){const h=(0,V.dS)(g),f=new V.gQ;f.update(h);const E=f.digest();return V.US.encodeByteArray(E)},je=function(...g){let h="";for(let f=0;f<g.length;f++){const E=g[f];Array.isArray(E)||E&&"object"==typeof E&&"number"==typeof E.length?h+=je.apply(null,E):h+="object"==typeof E?(0,V.Wl)(E):E,h+=" "}return h};let $e=null,Je=!0;const Me=function(...g){if(!0===Je&&(Je=!1,null===$e&&!0===He.get("logging_enabled")&&function(g,h){(0,V.hu)(!h||!0===g||!1===g,"Can't turn on custom loggers persistently."),!0===g?(Ae.logLevel=q.in.VERBOSE,$e=Ae.log.bind(Ae),h&&He.set("logging_enabled",!0)):"function"==typeof g?$e=g:($e=null,He.remove("logging_enabled"))}(!0)),$e){const h=je.apply(null,g);$e(h)}},yt=function(g){return function(...h){Me(g,...h)}},Et=function(...g){const h="FIREBASE INTERNAL ERROR: "+je(...g);Ae.error(h)},Ye=function(...g){const h=`FIREBASE FATAL ERROR: ${je(...g)}`;throw Ae.error(h),new Error(h)},Ot=function(...g){const h="FIREBASE WARNING: "+je(...g);Ae.warn(h)},Xe=function(g){return"number"==typeof g&&(g!=g||g===Number.POSITIVE_INFINITY||g===Number.NEGATIVE_INFINITY)},ut="[MIN_NAME]",qe="[MAX_NAME]",xt=function(g,h){if(g===h)return 0;if(g===ut||h===qe)return-1;if(h===ut||g===qe)return 1;{const f=vt(g),E=vt(h);return null!==f?null!==E?f-E==0?g.length-h.length:f-E:-1:null!==E?1:g<h?-1:1}},It=function(g,h){return g===h?0:g<h?-1:1},hn=function(g,h){if(h&&g in h)return h[g];throw new Error("Missing required key ("+g+") in object: "+(0,V.Wl)(h))},Jn=function(g){if("object"!=typeof g||null===g)return(0,V.Wl)(g);const h=[];for(const E in g)h.push(E);h.sort();let f="{";for(let E=0;E<h.length;E++)0!==E&&(f+=","),f+=(0,V.Wl)(h[E]),f+=":",f+=Jn(g[h[E]]);return f+="}",f},on=function(g,h){const f=g.length;if(f<=h)return[g];const E=[];for(let A=0;A<f;A+=h)E.push(g.substring(A,A+h>f?f:A+h));return E};function $t(g,h){for(const f in g)g.hasOwnProperty(f)&&h(f,g[f])}const On=function(g){(0,V.hu)(!Xe(g),"Invalid JSON number");const E=1023;let A,U,K,fe,Ce;0===g?(U=0,K=0,A=1/g==-1/0?1:0):(A=g<0,(g=Math.abs(g))>=Math.pow(2,1-E)?(fe=Math.min(Math.floor(Math.log(g)/Math.LN2),E),U=fe+E,K=Math.round(g*Math.pow(2,52-fe)-Math.pow(2,52))):(U=0,K=Math.round(g/Math.pow(2,-1074))));const xe=[];for(Ce=52;Ce;Ce-=1)xe.push(K%2?1:0),K=Math.floor(K/2);for(Ce=11;Ce;Ce-=1)xe.push(U%2?1:0),U=Math.floor(U/2);xe.push(A?1:0),xe.reverse();const gt=xe.join("");let _t="";for(Ce=0;Ce<64;Ce+=8){let Tt=parseInt(gt.substr(Ce,8),2).toString(16);1===Tt.length&&(Tt="0"+Tt),_t+=Tt}return _t.toLowerCase()},bn=new RegExp("^-?(0*)\\d{1,10}$"),vt=function(g){if(bn.test(g)){const h=Number(g);if(h>=-2147483648&&h<=2147483647)return h}return null},at=function(g){try{g()}catch(h){setTimeout(()=>{throw Ot("Exception was thrown by user callback.",h.stack||""),h},Math.floor(0))}},Fe=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ft=function(g,h){const f=setTimeout(g,h);return"number"==typeof f&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(f):"object"==typeof f&&f.unref&&f.unref(),f};class Pt{constructor(h,f){this.appName_=h,this.appCheckProvider=f,this.appCheck=f?.getImmediate({optional:!0}),this.appCheck||f?.get().then(E=>this.appCheck=E)}getToken(h){return this.appCheck?this.appCheck.getToken(h):new Promise((f,E)=>{setTimeout(()=>{this.appCheck?this.getToken(h).then(f,E):f(null)},0)})}addTokenChangeListener(h){var f;null===(f=this.appCheckProvider)||void 0===f||f.get().then(E=>E.addTokenListener(h))}notifyForInvalidToken(){Ot(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class kn{constructor(h,f,E){this.appName_=h,this.firebaseOptions_=f,this.authProvider_=E,this.auth_=null,this.auth_=E.getImmediate({optional:!0}),this.auth_||E.onInit(A=>this.auth_=A)}getToken(h){return this.auth_?this.auth_.getToken(h).catch(f=>f&&"auth/token-not-initialized"===f.code?(Me("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(f)):new Promise((f,E)=>{setTimeout(()=>{this.auth_?this.getToken(h).then(f,E):f(null)},0)})}addTokenChangeListener(h){this.auth_?this.auth_.addAuthTokenListener(h):this.authProvider_.get().then(f=>f.addAuthTokenListener(h))}removeTokenChangeListener(h){this.authProvider_.get().then(f=>f.removeAuthTokenListener(h))}notifyForInvalidToken(){let h='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';h+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ot(h)}}let Kn=(()=>{class g{constructor(f){this.accessToken=f}getToken(f){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(f){f(this.accessToken)}removeTokenChangeListener(f){}notifyForInvalidToken(){}}return g.OWNER="owner",g})();const Kr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Yn="websocket",sr="long_polling";class rn{constructor(h,f,E,A,U=!1,K="",fe=!1,Ce=!1){this.secure=f,this.namespace=E,this.webSocketOnly=A,this.nodeAdmin=U,this.persistenceKey=K,this.includeNamespaceInQueryParams=fe,this.isUsingEmulator=Ce,this._host=h.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Pe.get("host:"+h)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(h){h!==this.internalHost&&(this.internalHost=h,this.isCacheableHost()&&Pe.set("host:"+this._host,this.internalHost))}toString(){let h=this.toURLString();return this.persistenceKey&&(h+="<"+this.persistenceKey+">"),h}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Qn(g,h,f){let E;if((0,V.hu)("string"==typeof h,"typeof type must == string"),(0,V.hu)("object"==typeof f,"typeof params must == object"),h===Yn)E=(g.secure?"wss://":"ws://")+g.internalHost+"/.ws?";else{if(h!==sr)throw new Error("Unknown connection type: "+h);E=(g.secure?"https://":"http://")+g.internalHost+"/.lp?"}(function Yt(g){return g.host!==g.internalHost||g.isCustomHost()||g.includeNamespaceInQueryParams})(g)&&(f.ns=g.namespace);const A=[];return $t(f,(U,K)=>{A.push(U+"="+K)}),E+A.join("&")}class mi{constructor(){this.counters_={}}incrementCounter(h,f=1){(0,V.r3)(this.counters_,h)||(this.counters_[h]=0),this.counters_[h]+=f}get(){return(0,V.p$)(this.counters_)}}const Ur={},ti={};function vr(g){const h=g.toString();return Ur[h]||(Ur[h]=new mi),Ur[h]}class or{constructor(h){this.onMessage_=h,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(h,f){this.closeAfterResponse=h,this.onClose=f,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(h,f){for(this.pendingResponses[h]=f;this.pendingResponses[this.currentResponseNum];){const E=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let A=0;A<E.length;++A)E[A]&&at(()=>{this.onMessage_(E[A])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Oe{constructor(h,f,E,A,U,K,fe){this.connId=h,this.repoInfo=f,this.applicationId=E,this.appCheckToken=A,this.authToken=U,this.transportSessionId=K,this.lastSessionId=fe,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yt(h),this.stats_=vr(f),this.urlFn=Ce=>(this.appCheckToken&&(Ce.ac=this.appCheckToken),Qn(f,sr,Ce))}open(h,f){this.curSegmentNum=0,this.onDisconnect_=f,this.myPacketOrderer=new or(h),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(g){if((0,V.Yr)()||"complete"===document.readyState)g();else{let h=!1;const f=function(){document.body?h||(h=!0,g()):setTimeout(f,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&f()}),window.attachEvent("onload",f))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new we((...U)=>{const[K,fe,Ce,xe,gt]=U;if(this.incrementIncomingBytes_(U),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===K)this.id=fe,this.password=Ce;else{if("close"!==K)throw new Error("Unrecognized command received: "+K);fe?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(fe,()=>{this.onClosed_()})):this.onClosed_()}},(...U)=>{const[K,fe]=U;this.incrementIncomingBytes_(U),this.myPacketOrderer.handleResponse(K,fe)},()=>{this.onClosed_()},this.urlFn);const E={start:"t"};E.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(E.cb=this.scriptTagHolder.uniqueCallbackIdentifier),E.v="5",this.transportSessionId&&(E.s=this.transportSessionId),this.lastSessionId&&(E.ls=this.lastSessionId),this.applicationId&&(E.p=this.applicationId),this.appCheckToken&&(E.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Kr.test(location.hostname)&&(E.r="f");const A=this.urlFn(E);this.log_("Connecting via long-poll to "+A),this.scriptTagHolder.addTag(A,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Oe.forceAllow_=!0}static forceDisallow(){Oe.forceDisallow_=!0}static isAvailable(){return!((0,V.Yr)()||!Oe.forceAllow_&&(Oe.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(h){const f=(0,V.Wl)(h);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);const E=(0,V.h$)(f),A=on(E,1840);for(let U=0;U<A.length;U++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,A.length,A[U]),this.curSegmentNum++}addDisconnectPingFrame(h,f){if((0,V.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const E={dframe:"t"};E.id=h,E.pw=f,this.myDisconnFrame.src=this.urlFn(E),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(h){const f=(0,V.Wl)(h).length;this.bytesReceived+=f,this.stats_.incrementCounter("bytes_received",f)}}class we{constructor(h,f,E,A){if(this.onDisconnect=E,this.urlFn=A,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,V.Yr)())this.commandCB=h,this.onMessageCB=f;else{this.uniqueCallbackIdentifier=Ue(),window["pLPCommand"+this.uniqueCallbackIdentifier]=h,window["pRTLPCB"+this.uniqueCallbackIdentifier]=f,this.myIFrame=we.createIFrame_();let U="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(U='<script>document.domain="'+document.domain+'";<\/script>');const K="<html><body>"+U+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(K),this.myIFrame.doc.close()}catch(fe){Me("frame writing exception"),fe.stack&&Me(fe.stack),Me(fe)}}}static createIFrame_(){const h=document.createElement("iframe");if(h.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(h);try{h.contentWindow.document||Me("No IE domain setting required")}catch{const E=document.domain;h.src="javascript:void((function(){document.open();document.domain='"+E+"';document.close();})())"}return h.contentDocument?h.doc=h.contentDocument:h.contentWindow?h.doc=h.contentWindow.document:h.document&&(h.doc=h.document),h}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const h=this.onDisconnect;h&&(this.onDisconnect=null,h())}startLongPoll(h,f){for(this.myID=h,this.myPW=f,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const h={};h.id=this.myID,h.pw=this.myPW,h.ser=this.currentSerial;let f=this.urlFn(h),E="",A=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+E.length<=1870;){const K=this.pendingSegs.shift();E=E+"&seg"+A+"="+K.seg+"&ts"+A+"="+K.ts+"&d"+A+"="+K.d,A++}return f+=E,this.addLongPollTag_(f,this.currentSerial),!0}return!1}enqueueSegment(h,f,E){this.pendingSegs.push({seg:h,ts:f,d:E}),this.alive&&this.newRequest_()}addLongPollTag_(h,f){this.outstandingRequests.add(f);const E=()=>{this.outstandingRequests.delete(f),this.newRequest_()},A=setTimeout(E,Math.floor(25e3));this.addTag(h,()=>{clearTimeout(A),E()})}addTag(h,f){(0,V.Yr)()?this.doNodeLongPoll(h,f):setTimeout(()=>{try{if(!this.sendNewPolls)return;const E=this.myIFrame.doc.createElement("script");E.type="text/javascript",E.async=!0,E.src=h,E.onload=E.onreadystatechange=function(){const A=E.readyState;(!A||"loaded"===A||"complete"===A)&&(E.onload=E.onreadystatechange=null,E.parentNode&&E.parentNode.removeChild(E),f())},E.onerror=()=>{Me("Long-poll script failed to load: "+h),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(E)}catch{}},Math.floor(1))}}let ze=null;typeof MozWebSocket<"u"?ze=MozWebSocket:typeof WebSocket<"u"&&(ze=WebSocket);let Nt=(()=>{class g{constructor(f,E,A,U,K,fe,Ce){this.connId=f,this.applicationId=A,this.appCheckToken=U,this.authToken=K,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yt(this.connId),this.stats_=vr(E),this.connURL=g.connectionURL_(E,fe,Ce,U,A),this.nodeAdmin=E.nodeAdmin}static connectionURL_(f,E,A,U,K){const fe={v:"5"};return!(0,V.Yr)()&&typeof location<"u"&&location.hostname&&Kr.test(location.hostname)&&(fe.r="f"),E&&(fe.s=E),A&&(fe.ls=A),U&&(fe.ac=U),K&&(fe.p=K),Qn(f,Yn,fe)}open(f,E){this.onDisconnect=E,this.onMessage=f,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Pe.set("previous_websocket_failure",!0);try{let A;if((0,V.Yr)()){A={headers:{"User-Agent":`Firebase/5/${W}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(A.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(A.headers["X-Firebase-AppCheck"]=this.appCheckToken);const K=process.env,fe=0===this.connURL.indexOf("wss://")?K.HTTPS_PROXY||K.https_proxy:K.HTTP_PROXY||K.http_proxy;fe&&(A.proxy={origin:fe})}this.mySock=new ze(this.connURL,[],A)}catch(A){this.log_("Error instantiating WebSocket.");const U=A.message||A.data;return U&&this.log_(U),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=A=>{this.handleIncomingFrame(A)},this.mySock.onerror=A=>{this.log_("WebSocket error.  Closing connection.");const U=A.message||A.data;U&&this.log_(U),this.onClosed_()}}start(){}static forceDisallow(){g.forceDisallow_=!0}static isAvailable(){let f=!1;if(typeof navigator<"u"&&navigator.userAgent){const A=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);A&&A.length>1&&parseFloat(A[1])<4.4&&(f=!0)}return!f&&null!==ze&&!g.forceDisallow_}static previouslyFailed(){return Pe.isInMemoryStorage||!0===Pe.get("previous_websocket_failure")}markConnectionHealthy(){Pe.remove("previous_websocket_failure")}appendFrame_(f){if(this.frames.push(f),this.frames.length===this.totalFrames){const E=this.frames.join("");this.frames=null;const A=(0,V.cI)(E);this.onMessage(A)}}handleNewFrameCount_(f){this.totalFrames=f,this.frames=[]}extractFrameCount_(f){if((0,V.hu)(null===this.frames,"We already have a frame buffer"),f.length<=6){const E=Number(f);if(!isNaN(E))return this.handleNewFrameCount_(E),null}return this.handleNewFrameCount_(1),f}handleIncomingFrame(f){if(null===this.mySock)return;const E=f.data;if(this.bytesReceived+=E.length,this.stats_.incrementCounter("bytes_received",E.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(E);else{const A=this.extractFrameCount_(E);null!==A&&this.appendFrame_(A)}}send(f){this.resetKeepAlive();const E=(0,V.Wl)(f);this.bytesSent+=E.length,this.stats_.incrementCounter("bytes_sent",E.length);const A=on(E,16384);A.length>1&&this.sendString_(String(A.length));for(let U=0;U<A.length;U++)this.sendString_(A[U])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(f){try{this.mySock.send(f)}catch(E){this.log_("Exception thrown from WebSocket.send():",E.message||E.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return g.responsesRequiredToBeHealthy=2,g.healthyTimeout=3e4,g})(),Qt=(()=>{class g{constructor(f){this.initTransports_(f)}static get ALL_TRANSPORTS(){return[Oe,Nt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(f){const E=Nt&&Nt.isAvailable();let A=E&&!Nt.previouslyFailed();if(f.webSocketOnly&&(E||Ot("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),A=!0),A)this.transports_=[Nt];else{const U=this.transports_=[];for(const K of g.ALL_TRANSPORTS)K&&K.isAvailable()&&U.push(K);g.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return g.globalTransportInitialized_=!1,g})();class Ns{constructor(h,f,E,A,U,K,fe,Ce,xe,gt){this.id=h,this.repoInfo_=f,this.applicationId_=E,this.appCheckToken_=A,this.authToken_=U,this.onMessage_=K,this.onReady_=fe,this.onDisconnect_=Ce,this.onKill_=xe,this.lastSessionId=gt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yt("c:"+this.id+":"),this.transportManager_=new Qt(f),this.log_("Connection created"),this.start_()}start_(){const h=this.transportManager_.initialTransport();this.conn_=new h(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=h.responsesRequiredToBeHealthy||0;const f=this.connReceiver_(this.conn_),E=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(f,E)},Math.floor(0));const A=h.healthyTimeout||0;A>0&&(this.healthyTimeout_=ft(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(A)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(h){return f=>{h===this.conn_?this.onConnectionLost_(f):h===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(h){return f=>{2!==this.state_&&(h===this.rx_?this.onPrimaryMessageReceived_(f):h===this.secondaryConn_?this.onSecondaryMessageReceived_(f):this.log_("message on old connection"))}}sendRequest(h){this.sendData_({t:"d",d:h})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(h){if("t"in h){const f=h.t;"a"===f?this.upgradeIfSecondaryHealthy_():"r"===f?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===f&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(h){const f=hn("t",h),E=hn("d",h);if("c"===f)this.onSecondaryControl_(E);else{if("d"!==f)throw new Error("Unknown protocol layer: "+f);this.pendingDataMessages.push(E)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(h){const f=hn("t",h),E=hn("d",h);"c"===f?this.onControl_(E):"d"===f&&this.onDataMessage_(E)}onDataMessage_(h){this.onPrimaryResponse_(),this.onMessage_(h)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(h){const f=hn("t",h);if("d"in h){const E=h.d;if("h"===f){const A=Object.assign({},E);this.repoInfo_.isUsingEmulator&&(A.h=this.repoInfo_.host),this.onHandshake_(A)}else if("n"===f){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let A=0;A<this.pendingDataMessages.length;++A)this.onDataMessage_(this.pendingDataMessages[A]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===f?this.onConnectionShutdown_(E):"r"===f?this.onReset_(E):"e"===f?Et("Server Error: "+E):"o"===f?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Et("Unknown control packet command: "+f)}}onHandshake_(h){const f=h.ts,E=h.v,A=h.h;this.sessionId=h.s,this.repoInfo_.host=A,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,f),"5"!==E&&Ot("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const h=this.transportManager_.upgradeTransport();h&&this.startUpgrade_(h)}startUpgrade_(h){this.secondaryConn_=new h(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=h.responsesRequiredToBeHealthy||0;const f=this.connReceiver_(this.secondaryConn_),E=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(f,E),ft(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(h){this.log_("Reset packet received.  New host: "+h),this.repoInfo_.host=h,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(h,f){this.log_("Realtime connection established."),this.conn_=h,this.state_=1,this.onReady_&&(this.onReady_(f,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ft(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const h=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===h||this.rx_===h)&&this.close()}onConnectionLost_(h){this.conn_=null,h||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Pe.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(h){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(h),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(h){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(h)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ls{put(h,f,E,A){}merge(h,f,E,A){}refreshAuthToken(h){}refreshAppCheckToken(h){}onDisconnectPut(h,f,E){}onDisconnectMerge(h,f,E){}onDisconnectCancel(h,f){}reportStats(h){}}class pi{constructor(h){this.allowedEvents_=h,this.listeners_={},(0,V.hu)(Array.isArray(h)&&h.length>0,"Requires a non-empty array")}trigger(h,...f){if(Array.isArray(this.listeners_[h])){const E=[...this.listeners_[h]];for(let A=0;A<E.length;A++)E[A].callback.apply(E[A].context,f)}}on(h,f,E){this.validateEventType_(h),this.listeners_[h]=this.listeners_[h]||[],this.listeners_[h].push({callback:f,context:E});const A=this.getInitialEvent(h);A&&f.apply(E,A)}off(h,f,E){this.validateEventType_(h);const A=this.listeners_[h]||[];for(let U=0;U<A.length;U++)if(A[U].callback===f&&(!E||E===A[U].context))return void A.splice(U,1)}validateEventType_(h){(0,V.hu)(this.allowedEvents_.find(f=>f===h),"Unknown event: "+h)}}class Mr extends pi{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,V.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Mr}getInitialEvent(h){return(0,V.hu)("online"===h,"Unknown event type: "+h),[this.online_]}currentlyOnline(){return this.online_}}const Rt=32,Mn=768;class cn{constructor(h,f){if(void 0===f){this.pieces_=h.split("/");let E=0;for(let A=0;A<this.pieces_.length;A++)this.pieces_[A].length>0&&(this.pieces_[E]=this.pieces_[A],E++);this.pieces_.length=E,this.pieceNum_=0}else this.pieces_=h,this.pieceNum_=f}toString(){let h="";for(let f=this.pieceNum_;f<this.pieces_.length;f++)""!==this.pieces_[f]&&(h+="/"+this.pieces_[f]);return h||"/"}}function Cn(){return new cn("")}function fn(g){return g.pieceNum_>=g.pieces_.length?null:g.pieces_[g.pieceNum_]}function lr(g){return g.pieces_.length-g.pieceNum_}function mr(g){let h=g.pieceNum_;return h<g.pieces_.length&&h++,new cn(g.pieces_,h)}function wr(g){return g.pieceNum_<g.pieces_.length?g.pieces_[g.pieces_.length-1]:null}function Yi(g,h=0){return g.pieces_.slice(g.pieceNum_+h)}function Vn(g){if(g.pieceNum_>=g.pieces_.length)return null;const h=[];for(let f=g.pieceNum_;f<g.pieces_.length-1;f++)h.push(g.pieces_[f]);return new cn(h,0)}function Bn(g,h){const f=[];for(let E=g.pieceNum_;E<g.pieces_.length;E++)f.push(g.pieces_[E]);if(h instanceof cn)for(let E=h.pieceNum_;E<h.pieces_.length;E++)f.push(h.pieces_[E]);else{const E=h.split("/");for(let A=0;A<E.length;A++)E[A].length>0&&f.push(E[A])}return new cn(f,0)}function Rn(g){return g.pieceNum_>=g.pieces_.length}function Lr(g,h){const f=fn(g),E=fn(h);if(null===f)return h;if(f===E)return Lr(mr(g),mr(h));throw new Error("INTERNAL ERROR: innerPath ("+h+") is not within outerPath ("+g+")")}function Ds(g,h){const f=Yi(g,0),E=Yi(h,0);for(let A=0;A<f.length&&A<E.length;A++){const U=xt(f[A],E[A]);if(0!==U)return U}return f.length===E.length?0:f.length<E.length?-1:1}function _e(g,h){if(lr(g)!==lr(h))return!1;for(let f=g.pieceNum_,E=h.pieceNum_;f<=g.pieces_.length;f++,E++)if(g.pieces_[f]!==h.pieces_[E])return!1;return!0}function nt(g,h){let f=g.pieceNum_,E=h.pieceNum_;if(lr(g)>lr(h))return!1;for(;f<g.pieces_.length;){if(g.pieces_[f]!==h.pieces_[E])return!1;++f,++E}return!0}class Ge{constructor(h,f){this.errorPrefix_=f,this.parts_=Yi(h,0),this.byteLength_=Math.max(1,this.parts_.length);for(let E=0;E<this.parts_.length;E++)this.byteLength_+=(0,V.ug)(this.parts_[E]);jt(this)}}function jt(g){if(g.byteLength_>Mn)throw new Error(g.errorPrefix_+"has a key path longer than "+Mn+" bytes ("+g.byteLength_+").");if(g.parts_.length>Rt)throw new Error(g.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Rt+") or object contains a cycle "+dn(g))}function dn(g){return 0===g.parts_.length?"":"in property '"+g.parts_.join(".")+"'"}class dr extends pi{constructor(){let h,f;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(f="visibilitychange",h="hidden"):typeof document.mozHidden<"u"?(f="mozvisibilitychange",h="mozHidden"):typeof document.msHidden<"u"?(f="msvisibilitychange",h="msHidden"):typeof document.webkitHidden<"u"&&(f="webkitvisibilitychange",h="webkitHidden")),this.visible_=!0,f&&document.addEventListener(f,()=>{const E=!document[h];E!==this.visible_&&(this.visible_=E,this.trigger("visible",E))},!1)}static getInstance(){return new dr}getInitialEvent(h){return(0,V.hu)("visible"===h,"Unknown event type: "+h),[this.visible_]}}const yr=1e3;let Gs,li=(()=>{class g extends Ls{constructor(f,E,A,U,K,fe,Ce,xe){if(super(),this.repoInfo_=f,this.applicationId_=E,this.onDataUpdate_=A,this.onConnectStatus_=U,this.onServerInfoUpdate_=K,this.authTokenProvider_=fe,this.appCheckTokenProvider_=Ce,this.authOverride_=xe,this.id=g.nextPersistentConnectionId_++,this.log_=yt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yr,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,xe&&!(0,V.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dr.getInstance().on("visible",this.onVisible_,this),-1===f.host.indexOf("fblocal")&&Mr.getInstance().on("online",this.onOnline_,this)}sendRequest(f,E,A){const U=++this.requestNumber_,K={r:U,a:f,b:E};this.log_((0,V.Wl)(K)),(0,V.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(K),A&&(this.requestCBHash_[U]=A)}get(f){this.initConnection_();const E=new V.BH,U={action:"g",request:{p:f._path.toString(),q:f._queryObject},onComplete:fe=>{const Ce=fe.d;"ok"===fe.s?E.resolve(Ce):E.reject(Ce)}};return this.outstandingGets_.push(U),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),E.promise}listen(f,E,A,U){this.initConnection_();const K=f._queryIdentifier,fe=f._path.toString();this.log_("Listen called for "+fe+" "+K),this.listens.has(fe)||this.listens.set(fe,new Map),(0,V.hu)(f._queryParams.isDefault()||!f._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,V.hu)(!this.listens.get(fe).has(K),"listen() called twice for same path/queryId.");const Ce={onComplete:U,hashFn:E,query:f,tag:A};this.listens.get(fe).set(K,Ce),this.connected_&&this.sendListen_(Ce)}sendGet_(f){const E=this.outstandingGets_[f];this.sendRequest("g",E.request,A=>{delete this.outstandingGets_[f],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),E.onComplete&&E.onComplete(A)})}sendListen_(f){const E=f.query,A=E._path.toString(),U=E._queryIdentifier;this.log_("Listen on "+A+" for "+U);const K={p:A};f.tag&&(K.q=E._queryObject,K.t=f.tag),K.h=f.hashFn(),this.sendRequest("q",K,Ce=>{const xe=Ce.d,gt=Ce.s;g.warnOnListenWarnings_(xe,E),(this.listens.get(A)&&this.listens.get(A).get(U))===f&&(this.log_("listen response",Ce),"ok"!==gt&&this.removeListen_(A,U),f.onComplete&&f.onComplete(gt,xe))})}static warnOnListenWarnings_(f,E){if(f&&"object"==typeof f&&(0,V.r3)(f,"w")){const A=(0,V.DV)(f,"w");if(Array.isArray(A)&&~A.indexOf("no_index")){const U='".indexOn": "'+E._queryParams.getIndex().toString()+'"',K=E._path.toString();Ot(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${U} at ${K} to your security rules for better performance.`)}}}refreshAuthToken(f){this.authToken_=f,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(f)}reduceReconnectDelayIfAdminCredential_(f){(f&&40===f.length||(0,V.GJ)(f))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(f){this.appCheckToken_=f,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const f=this.authToken_,E=(0,V.w9)(f)?"auth":"gauth",A={cred:f};null===this.authOverride_?A.noauth=!0:"object"==typeof this.authOverride_&&(A.authvar=this.authOverride_),this.sendRequest(E,A,U=>{const K=U.s,fe=U.d||"error";this.authToken_===f&&("ok"===K?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(K,fe))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},f=>{const E=f.s,A=f.d||"error";"ok"===E?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(E,A)})}unlisten(f,E){const A=f._path.toString(),U=f._queryIdentifier;this.log_("Unlisten called for "+A+" "+U),(0,V.hu)(f._queryParams.isDefault()||!f._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(A,U)&&this.connected_&&this.sendUnlisten_(A,U,f._queryObject,E)}sendUnlisten_(f,E,A,U){this.log_("Unlisten on "+f+" for "+E);const K={p:f};U&&(K.q=A,K.t=U),this.sendRequest("n",K)}onDisconnectPut(f,E,A){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",f,E,A):this.onDisconnectRequestQueue_.push({pathString:f,action:"o",data:E,onComplete:A})}onDisconnectMerge(f,E,A){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",f,E,A):this.onDisconnectRequestQueue_.push({pathString:f,action:"om",data:E,onComplete:A})}onDisconnectCancel(f,E){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",f,null,E):this.onDisconnectRequestQueue_.push({pathString:f,action:"oc",data:null,onComplete:E})}sendOnDisconnect_(f,E,A,U){const K={p:E,d:A};this.log_("onDisconnect "+f,K),this.sendRequest(f,K,fe=>{U&&setTimeout(()=>{U(fe.s,fe.d)},Math.floor(0))})}put(f,E,A,U){this.putInternal("p",f,E,A,U)}merge(f,E,A,U){this.putInternal("m",f,E,A,U)}putInternal(f,E,A,U,K){this.initConnection_();const fe={p:E,d:A};void 0!==K&&(fe.h=K),this.outstandingPuts_.push({action:f,request:fe,onComplete:U}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+E)}sendPut_(f){const E=this.outstandingPuts_[f].action,A=this.outstandingPuts_[f].request,U=this.outstandingPuts_[f].onComplete;this.outstandingPuts_[f].queued=this.connected_,this.sendRequest(E,A,K=>{this.log_(E+" response",K),delete this.outstandingPuts_[f],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),U&&U(K.s,K.d)})}reportStats(f){if(this.connected_){const E={c:f};this.log_("reportStats",E),this.sendRequest("s",E,A=>{"ok"!==A.s&&this.log_("reportStats","Error sending stats: "+A.d)})}}onDataMessage_(f){if("r"in f){this.log_("from server: "+(0,V.Wl)(f));const E=f.r,A=this.requestCBHash_[E];A&&(delete this.requestCBHash_[E],A(f.b))}else{if("error"in f)throw"A server-side error has occurred: "+f.error;"a"in f&&this.onDataPush_(f.a,f.b)}}onDataPush_(f,E){this.log_("handleServerMessage",f,E),"d"===f?this.onDataUpdate_(E.p,E.d,!1,E.t):"m"===f?this.onDataUpdate_(E.p,E.d,!0,E.t):"c"===f?this.onListenRevoked_(E.p,E.q):"ac"===f?this.onAuthRevoked_(E.s,E.d):"apc"===f?this.onAppCheckRevoked_(E.s,E.d):"sd"===f?this.onSecurityDebugPacket_(E):Et("Unrecognized action received from server: "+(0,V.Wl)(f)+"\nAre you using the latest client?")}onReady_(f,E){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(f),this.lastSessionId=E,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(f){(0,V.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(f))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(f){f&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yr,this.realtime_||this.scheduleConnect_(0)),this.visible_=f}onOnline_(f){f?(this.log_("Browser went online."),this.reconnectDelay_=yr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=yr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const f=(new Date).getTime()-this.lastConnectionAttemptTime_;let E=Math.max(0,this.reconnectDelay_-f);E=Math.random()*E,this.log_("Trying to reconnect in "+E+"ms"),this.scheduleConnect_(E),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var f=this;return(0,m.Z)(function*(){if(f.shouldReconnect_()){f.log_("Making a connection attempt"),f.lastConnectionAttemptTime_=(new Date).getTime(),f.lastConnectionEstablishedTime_=null;const E=f.onDataMessage_.bind(f),A=f.onReady_.bind(f),U=f.onRealtimeDisconnect_.bind(f),K=f.id+":"+g.nextConnectionId_++,fe=f.lastSessionId;let Ce=!1,xe=null;const gt=function(){xe?xe.close():(Ce=!0,U())};f.realtime_={close:gt,sendRequest:function(_n){(0,V.hu)(xe,"sendRequest call when we're not connected not allowed."),xe.sendRequest(_n)}};const Tt=f.forceTokenRefresh_;f.forceTokenRefresh_=!1;try{const[_n,zn]=yield Promise.all([f.authTokenProvider_.getToken(Tt),f.appCheckTokenProvider_.getToken(Tt)]);Ce?Me("getToken() completed but was canceled"):(Me("getToken() completed. Creating connection."),f.authToken_=_n&&_n.accessToken,f.appCheckToken_=zn&&zn.token,xe=new Ns(K,f.repoInfo_,f.applicationId_,f.appCheckToken_,f.authToken_,E,A,U,Ii=>{Ot(Ii+" ("+f.repoInfo_.toString()+")"),f.interrupt("server_kill")},fe))}catch(_n){f.log_("Failed to get token: "+_n),Ce||(f.repoInfo_.nodeAdmin&&Ot(_n),gt())}}})()}interrupt(f){Me("Interrupting connection for reason: "+f),this.interruptReasons_[f]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(f){Me("Resuming connection for reason: "+f),delete this.interruptReasons_[f],(0,V.xb)(this.interruptReasons_)&&(this.reconnectDelay_=yr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(f){const E=f-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:E})}cancelSentTransactions_(){for(let f=0;f<this.outstandingPuts_.length;f++){const E=this.outstandingPuts_[f];E&&"h"in E.request&&E.queued&&(E.onComplete&&E.onComplete("disconnect"),delete this.outstandingPuts_[f],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(f,E){let A;A=E?E.map(K=>Jn(K)).join("$"):"default";const U=this.removeListen_(f,A);U&&U.onComplete&&U.onComplete("permission_denied")}removeListen_(f,E){const A=new cn(f).toString();let U;if(this.listens.has(A)){const K=this.listens.get(A);U=K.get(E),K.delete(E),0===K.size&&this.listens.delete(A)}else U=void 0;return U}onAuthRevoked_(f,E){Me("Auth token revoked: "+f+"/"+E),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===f||"permission_denied"===f)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(f,E){Me("App check token revoked: "+f+"/"+E),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===f||"permission_denied"===f)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(f){this.securityDebugCallback_?this.securityDebugCallback_(f):"msg"in f&&console.log("FIREBASE: "+f.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const f of this.listens.values())for(const E of f.values())this.sendListen_(E);for(let f=0;f<this.outstandingPuts_.length;f++)this.outstandingPuts_[f]&&this.sendPut_(f);for(;this.onDisconnectRequestQueue_.length;){const f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(let f=0;f<this.outstandingGets_.length;f++)this.outstandingGets_[f]&&this.sendGet_(f)}sendConnectStats_(){const f={};let E="js";(0,V.Yr)()&&(E=this.repoInfo_.nodeAdmin?"admin_node":"node"),f["sdk."+E+"."+W.replace(/\./g,"-")]=1,(0,V.uI)()?f["framework.cordova"]=1:(0,V.b$)()&&(f["framework.reactnative"]=1),this.reportStats(f)}shouldReconnect_(){const f=Mr.getInstance().currentlyOnline();return(0,V.xb)(this.interruptReasons_)&&f}}return g.nextPersistentConnectionId_=0,g.nextConnectionId_=0,g})();class En{constructor(h,f){this.name=h,this.node=f}static Wrap(h,f){return new En(h,f)}}class Is{getCompare(){return this.compare.bind(this)}indexedValueChanged(h,f){const E=new En(ut,h),A=new En(ut,f);return 0!==this.compare(E,A)}minPost(){return En.MIN}}class ss extends Is{static get __EMPTY_NODE(){return Gs}static set __EMPTY_NODE(h){Gs=h}compare(h,f){return xt(h.name,f.name)}isDefinedOn(h){throw(0,V.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(h,f){return!1}minPost(){return En.MIN}maxPost(){return new En(qe,Gs)}makePost(h,f){return(0,V.hu)("string"==typeof h,"KeyIndex indexValue must always be a string."),new En(h,Gs)}toString(){return".key"}}const hr=new ss;class yo{constructor(h,f,E,A,U=null){this.isReverse_=A,this.resultGenerator_=U,this.nodeStack_=[];let K=1;for(;!h.isEmpty();)if(K=f?E(h.key,f):1,A&&(K*=-1),K<0)h=this.isReverse_?h.left:h.right;else{if(0===K){this.nodeStack_.push(h);break}this.nodeStack_.push(h),h=this.isReverse_?h.right:h.left}}getNext(){if(0===this.nodeStack_.length)return null;let f,h=this.nodeStack_.pop();if(f=this.resultGenerator_?this.resultGenerator_(h.key,h.value):{key:h.key,value:h.value},this.isReverse_)for(h=h.left;!h.isEmpty();)this.nodeStack_.push(h),h=h.right;else for(h=h.right;!h.isEmpty();)this.nodeStack_.push(h),h=h.left;return f}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const h=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(h.key,h.value):{key:h.key,value:h.value}}}let so,qr=(()=>{class g{constructor(f,E,A,U,K){this.key=f,this.value=E,this.color=A??g.RED,this.left=U??Gn.EMPTY_NODE,this.right=K??Gn.EMPTY_NODE}copy(f,E,A,U,K){return new g(f??this.key,E??this.value,A??this.color,U??this.left,K??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(f){return this.left.inorderTraversal(f)||!!f(this.key,this.value)||this.right.inorderTraversal(f)}reverseTraversal(f){return this.right.reverseTraversal(f)||f(this.key,this.value)||this.left.reverseTraversal(f)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(f,E,A){let U=this;const K=A(f,U.key);return U=K<0?U.copy(null,null,null,U.left.insert(f,E,A),null):0===K?U.copy(null,E,null,null,null):U.copy(null,null,null,null,U.right.insert(f,E,A)),U.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gn.EMPTY_NODE;let f=this;return!f.left.isRed_()&&!f.left.left.isRed_()&&(f=f.moveRedLeft_()),f=f.copy(null,null,null,f.left.removeMin_(),null),f.fixUp_()}remove(f,E){let A,U;if(A=this,E(f,A.key)<0)!A.left.isEmpty()&&!A.left.isRed_()&&!A.left.left.isRed_()&&(A=A.moveRedLeft_()),A=A.copy(null,null,null,A.left.remove(f,E),null);else{if(A.left.isRed_()&&(A=A.rotateRight_()),!A.right.isEmpty()&&!A.right.isRed_()&&!A.right.left.isRed_()&&(A=A.moveRedRight_()),0===E(f,A.key)){if(A.right.isEmpty())return Gn.EMPTY_NODE;U=A.right.min_(),A=A.copy(U.key,U.value,null,null,A.right.removeMin_())}A=A.copy(null,null,null,null,A.right.remove(f,E))}return A.fixUp_()}isRed_(){return this.color}fixUp_(){let f=this;return f.right.isRed_()&&!f.left.isRed_()&&(f=f.rotateLeft_()),f.left.isRed_()&&f.left.left.isRed_()&&(f=f.rotateRight_()),f.left.isRed_()&&f.right.isRed_()&&(f=f.colorFlip_()),f}moveRedLeft_(){let f=this.colorFlip_();return f.right.left.isRed_()&&(f=f.copy(null,null,null,null,f.right.rotateRight_()),f=f.rotateLeft_(),f=f.colorFlip_()),f}moveRedRight_(){let f=this.colorFlip_();return f.left.left.isRed_()&&(f=f.rotateRight_(),f=f.colorFlip_()),f}rotateLeft_(){const f=this.copy(null,null,g.RED,null,this.right.left);return this.right.copy(null,null,this.color,f,null)}rotateRight_(){const f=this.copy(null,null,g.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,f)}colorFlip_(){const f=this.left.copy(null,null,!this.left.color,null,null),E=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,f,E)}checkMaxDepth_(){const f=this.check_();return Math.pow(2,f)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const f=this.left.check_();if(f!==this.right.check_())throw new Error("Black depths differ");return f+(this.isRed_()?0:1)}}return g.RED=!0,g.BLACK=!1,g})();class Gn{constructor(h,f=Gn.EMPTY_NODE){this.comparator_=h,this.root_=f}insert(h,f){return new Gn(this.comparator_,this.root_.insert(h,f,this.comparator_).copy(null,null,qr.BLACK,null,null))}remove(h){return new Gn(this.comparator_,this.root_.remove(h,this.comparator_).copy(null,null,qr.BLACK,null,null))}get(h){let f,E=this.root_;for(;!E.isEmpty();){if(f=this.comparator_(h,E.key),0===f)return E.value;f<0?E=E.left:f>0&&(E=E.right)}return null}getPredecessorKey(h){let f,E=this.root_,A=null;for(;!E.isEmpty();){if(f=this.comparator_(h,E.key),0===f){if(E.left.isEmpty())return A?A.key:null;for(E=E.left;!E.right.isEmpty();)E=E.right;return E.key}f<0?E=E.left:f>0&&(A=E,E=E.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(h){return this.root_.inorderTraversal(h)}reverseTraversal(h){return this.root_.reverseTraversal(h)}getIterator(h){return new yo(this.root_,null,this.comparator_,!1,h)}getIteratorFrom(h,f){return new yo(this.root_,h,this.comparator_,!1,f)}getReverseIteratorFrom(h,f){return new yo(this.root_,h,this.comparator_,!0,f)}getReverseIterator(h){return new yo(this.root_,null,this.comparator_,!0,h)}}function Ws(g,h){return xt(g.name,h.name)}function zs(g,h){return xt(g,h)}Gn.EMPTY_NODE=new class os{copy(h,f,E,A,U){return this}insert(h,f,E){return new qr(h,f,null)}remove(h,f){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(h){return!1}reverseTraversal(h){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Bo=function(g){return"number"==typeof g?"number:"+On(g):"string:"+g},bo=function(g){if(g.isLeafNode()){const h=g.val();(0,V.hu)("string"==typeof h||"number"==typeof h||"object"==typeof h&&(0,V.r3)(h,".sv"),"Priority must be a string or number.")}else(0,V.hu)(g===so||g.isEmpty(),"priority of unexpected type.");(0,V.hu)(g===so||g.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let oo,la,_o,Fs=(()=>{class g{constructor(f,E=g.__childrenNodeConstructor.EMPTY_NODE){this.value_=f,this.priorityNode_=E,this.lazyHash_=null,(0,V.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),bo(this.priorityNode_)}static set __childrenNodeConstructor(f){oo=f}static get __childrenNodeConstructor(){return oo}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(f){return new g(this.value_,f)}getImmediateChild(f){return".priority"===f?this.priorityNode_:g.__childrenNodeConstructor.EMPTY_NODE}getChild(f){return Rn(f)?this:".priority"===fn(f)?this.priorityNode_:g.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(f,E){return null}updateImmediateChild(f,E){return".priority"===f?this.updatePriority(E):E.isEmpty()&&".priority"!==f?this:g.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(f,E).updatePriority(this.priorityNode_)}updateChild(f,E){const A=fn(f);return null===A?E:E.isEmpty()&&".priority"!==A?this:((0,V.hu)(".priority"!==A||1===lr(f),".priority must be the last token in a path"),this.updateImmediateChild(A,g.__childrenNodeConstructor.EMPTY_NODE.updateChild(mr(f),E)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(f,E){return!1}val(f){return f&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let f="";this.priorityNode_.isEmpty()||(f+="priority:"+Bo(this.priorityNode_.val())+":");const E=typeof this.value_;f+=E+":",f+="number"===E?On(this.value_):this.value_,this.lazyHash_=ke(f)}return this.lazyHash_}getValue(){return this.value_}compareTo(f){return f===g.__childrenNodeConstructor.EMPTY_NODE?1:f instanceof g.__childrenNodeConstructor?-1:((0,V.hu)(f.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(f))}compareToLeafNode_(f){const E=typeof f.value_,A=typeof this.value_,U=g.VALUE_TYPE_ORDER.indexOf(E),K=g.VALUE_TYPE_ORDER.indexOf(A);return(0,V.hu)(U>=0,"Unknown leaf type: "+E),(0,V.hu)(K>=0,"Unknown leaf type: "+A),U===K?"object"===A?0:this.value_<f.value_?-1:this.value_===f.value_?0:1:K-U}withIndex(){return this}isIndexed(){return!0}equals(f){return f===this||!!f.isLeafNode()&&(this.value_===f.value_&&this.priorityNode_.equals(f.priorityNode_))}}return g.VALUE_TYPE_ORDER=["object","boolean","number","string"],g})();const Br=new class Ks extends Is{compare(h,f){const E=h.node.getPriority(),A=f.node.getPriority(),U=E.compareTo(A);return 0===U?xt(h.name,f.name):U}isDefinedOn(h){return!h.getPriority().isEmpty()}indexedValueChanged(h,f){return!h.getPriority().equals(f.getPriority())}minPost(){return En.MIN}maxPost(){return new En(qe,new Fs("[PRIORITY-POST]",_o))}makePost(h,f){const E=la(h);return new En(f,new Fs("[PRIORITY-POST]",E))}toString(){return".priority"}},Ao=Math.log(2);class vo{constructor(h){this.count=parseInt(Math.log(h+1)/Ao,10),this.current_=this.count-1;const A=(U=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=h+1&A}nextBitIsOne(){const h=!(this.bits_&1<<this.current_);return this.current_--,h}}const ao=function(g,h,f,E){g.sort(h);const A=function(Ce,xe){const gt=xe-Ce;let _t,Tt;if(0===gt)return null;if(1===gt)return _t=g[Ce],Tt=f?f(_t):_t,new qr(Tt,_t.node,qr.BLACK,null,null);{const _n=parseInt(gt/2,10)+Ce,zn=A(Ce,_n),Ii=A(_n+1,xe);return _t=g[_n],Tt=f?f(_t):_t,new qr(Tt,_t.node,qr.BLACK,zn,Ii)}},fe=function(Ce){let xe=null,gt=null,_t=g.length;const Tt=function(zn,Ii){const To=_t-zn,fu=_t;_t-=zn;const $s=A(To+1,fu),hc=g[To],Ld=f?f(hc):hc;_n(new qr(Ld,hc.node,Ii,null,$s))},_n=function(zn){xe?(xe.left=zn,xe=zn):(gt=zn,xe=zn)};for(let zn=0;zn<Ce.count;++zn){const Ii=Ce.nextBitIsOne(),To=Math.pow(2,Ce.count-(zn+1));Ii?Tt(To,qr.BLACK):(Tt(To,qr.BLACK),Tt(To,qr.RED))}return gt}(new vo(g.length));return new Gn(E||h,fe)};let lo;const ua={};class fs{constructor(h,f){this.indexes_=h,this.indexSet_=f}static get Default(){return(0,V.hu)(ua&&Br,"ChildrenNode.ts has not been loaded"),lo=lo||new fs({".priority":ua},{".priority":Br}),lo}get(h){const f=(0,V.DV)(this.indexes_,h);if(!f)throw new Error("No index defined for "+h);return f instanceof Gn?f:null}hasIndex(h){return(0,V.r3)(this.indexSet_,h.toString())}addIndex(h,f){(0,V.hu)(h!==hr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const E=[];let A=!1;const U=f.getIterator(En.Wrap);let fe,K=U.getNext();for(;K;)A=A||h.isDefinedOn(K.node),E.push(K),K=U.getNext();fe=A?ao(E,h.getCompare()):ua;const Ce=h.toString(),xe=Object.assign({},this.indexSet_);xe[Ce]=h;const gt=Object.assign({},this.indexes_);return gt[Ce]=fe,new fs(gt,xe)}addToIndexes(h,f){const E=(0,V.UI)(this.indexes_,(A,U)=>{const K=(0,V.DV)(this.indexSet_,U);if((0,V.hu)(K,"Missing index implementation for "+U),A===ua){if(K.isDefinedOn(h.node)){const fe=[],Ce=f.getIterator(En.Wrap);let xe=Ce.getNext();for(;xe;)xe.name!==h.name&&fe.push(xe),xe=Ce.getNext();return fe.push(h),ao(fe,K.getCompare())}return ua}{const fe=f.get(h.name);let Ce=A;return fe&&(Ce=Ce.remove(new En(h.name,fe))),Ce.insert(h,h.node)}});return new fs(E,this.indexSet_)}removeFromIndexes(h,f){const E=(0,V.UI)(this.indexes_,A=>{if(A===ua)return A;{const U=f.get(h.name);return U?A.remove(new En(h.name,U)):A}});return new fs(E,this.indexSet_)}}let Cs,xn=(()=>{class g{constructor(f,E,A){this.children_=f,this.priorityNode_=E,this.indexMap_=A,this.lazyHash_=null,this.priorityNode_&&bo(this.priorityNode_),this.children_.isEmpty()&&(0,V.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Cs||(Cs=new g(new Gn(zs),null,fs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Cs}updatePriority(f){return this.children_.isEmpty()?this:new g(this.children_,f,this.indexMap_)}getImmediateChild(f){if(".priority"===f)return this.getPriority();{const E=this.children_.get(f);return null===E?Cs:E}}getChild(f){const E=fn(f);return null===E?this:this.getImmediateChild(E).getChild(mr(f))}hasChild(f){return null!==this.children_.get(f)}updateImmediateChild(f,E){if((0,V.hu)(E,"We should always be passing snapshot nodes"),".priority"===f)return this.updatePriority(E);{const A=new En(f,E);let U,K;E.isEmpty()?(U=this.children_.remove(f),K=this.indexMap_.removeFromIndexes(A,this.children_)):(U=this.children_.insert(f,E),K=this.indexMap_.addToIndexes(A,this.children_));const fe=U.isEmpty()?Cs:this.priorityNode_;return new g(U,fe,K)}}updateChild(f,E){const A=fn(f);if(null===A)return E;{(0,V.hu)(".priority"!==fn(f)||1===lr(f),".priority must be the last token in a path");const U=this.getImmediateChild(A).updateChild(mr(f),E);return this.updateImmediateChild(A,U)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(f){if(this.isEmpty())return null;const E={};let A=0,U=0,K=!0;if(this.forEachChild(Br,(fe,Ce)=>{E[fe]=Ce.val(f),A++,K&&g.INTEGER_REGEXP_.test(fe)?U=Math.max(U,Number(fe)):K=!1}),!f&&K&&U<2*A){const fe=[];for(const Ce in E)fe[Ce]=E[Ce];return fe}return f&&!this.getPriority().isEmpty()&&(E[".priority"]=this.getPriority().val()),E}hash(){if(null===this.lazyHash_){let f="";this.getPriority().isEmpty()||(f+="priority:"+Bo(this.getPriority().val())+":"),this.forEachChild(Br,(E,A)=>{const U=A.hash();""!==U&&(f+=":"+E+":"+U)}),this.lazyHash_=""===f?"":ke(f)}return this.lazyHash_}getPredecessorChildName(f,E,A){const U=this.resolveIndex_(A);if(U){const K=U.getPredecessorKey(new En(f,E));return K?K.name:null}return this.children_.getPredecessorKey(f)}getFirstChildName(f){const E=this.resolveIndex_(f);if(E){const A=E.minKey();return A&&A.name}return this.children_.minKey()}getFirstChild(f){const E=this.getFirstChildName(f);return E?new En(E,this.children_.get(E)):null}getLastChildName(f){const E=this.resolveIndex_(f);if(E){const A=E.maxKey();return A&&A.name}return this.children_.maxKey()}getLastChild(f){const E=this.getLastChildName(f);return E?new En(E,this.children_.get(E)):null}forEachChild(f,E){const A=this.resolveIndex_(f);return A?A.inorderTraversal(U=>E(U.name,U.node)):this.children_.inorderTraversal(E)}getIterator(f){return this.getIteratorFrom(f.minPost(),f)}getIteratorFrom(f,E){const A=this.resolveIndex_(E);if(A)return A.getIteratorFrom(f,U=>U);{const U=this.children_.getIteratorFrom(f.name,En.Wrap);let K=U.peek();for(;null!=K&&E.compare(K,f)<0;)U.getNext(),K=U.peek();return U}}getReverseIterator(f){return this.getReverseIteratorFrom(f.maxPost(),f)}getReverseIteratorFrom(f,E){const A=this.resolveIndex_(E);if(A)return A.getReverseIteratorFrom(f,U=>U);{const U=this.children_.getReverseIteratorFrom(f.name,En.Wrap);let K=U.peek();for(;null!=K&&E.compare(K,f)>0;)U.getNext(),K=U.peek();return U}}compareTo(f){return this.isEmpty()?f.isEmpty()?0:-1:f.isLeafNode()||f.isEmpty()?1:f===ws?-1:0}withIndex(f){if(f===hr||this.indexMap_.hasIndex(f))return this;{const E=this.indexMap_.addIndex(f,this.children_);return new g(this.children_,this.priorityNode_,E)}}isIndexed(f){return f===hr||this.indexMap_.hasIndex(f)}equals(f){if(f===this)return!0;if(f.isLeafNode())return!1;{const E=f;if(this.getPriority().equals(E.getPriority())){if(this.children_.count()===E.children_.count()){const A=this.getIterator(Br),U=E.getIterator(Br);let K=A.getNext(),fe=U.getNext();for(;K&&fe;){if(K.name!==fe.name||!K.node.equals(fe.node))return!1;K=A.getNext(),fe=U.getNext()}return null===K&&null===fe}return!1}return!1}}resolveIndex_(f){return f===hr?null:this.indexMap_.get(f.toString())}}return g.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,g})();const ws=new class jo extends xn{constructor(){super(new Gn(zs),xn.EMPTY_NODE,fs.Default)}compareTo(h){return h===this?0:1}equals(h){return h===this}getPriority(){return this}getImmediateChild(h){return xn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(En,{MIN:{value:new En(ut,xn.EMPTY_NODE)},MAX:{value:new En(qe,ws)}}),ss.__EMPTY_NODE=xn.EMPTY_NODE,Fs.__childrenNodeConstructor=xn,function Cl(g){so=g}(ws),function Qi(g){_o=g}(ws);const Ca=!0;function Fr(g,h=null){if(null===g)return xn.EMPTY_NODE;if("object"==typeof g&&".priority"in g&&(h=g[".priority"]),(0,V.hu)(null===h||"string"==typeof h||"number"==typeof h||"object"==typeof h&&".sv"in h,"Invalid priority type found: "+typeof h),"object"==typeof g&&".value"in g&&null!==g[".value"]&&(g=g[".value"]),"object"!=typeof g||".sv"in g)return new Fs(g,Fr(h));if(g instanceof Array||!Ca){let f=xn.EMPTY_NODE;return $t(g,(E,A)=>{if((0,V.r3)(g,E)&&"."!==E.substring(0,1)){const U=Fr(A);(U.isLeafNode()||!U.isEmpty())&&(f=f.updateImmediateChild(E,U))}}),f.updatePriority(Fr(h))}{const f=[];let E=!1;if($t(g,(K,fe)=>{if("."!==K.substring(0,1)){const Ce=Fr(fe);Ce.isEmpty()||(E=E||!Ce.getPriority().isEmpty(),f.push(new En(K,Ce)))}}),0===f.length)return xn.EMPTY_NODE;const U=ao(f,Ws,K=>K.name,zs);if(E){const K=ao(f,Br.getCompare());return new xn(U,Fr(h),new fs({".priority":K},{".priority":Br}))}return new xn(U,Fr(h),fs.Default)}}!function Bi(g){la=g}(Fr);class Ni extends Is{constructor(h){super(),this.indexPath_=h,(0,V.hu)(!Rn(h)&&".priority"!==fn(h),"Can't create PathIndex with empty path or .priority key")}extractChild(h){return h.getChild(this.indexPath_)}isDefinedOn(h){return!h.getChild(this.indexPath_).isEmpty()}compare(h,f){const E=this.extractChild(h.node),A=this.extractChild(f.node),U=E.compareTo(A);return 0===U?xt(h.name,f.name):U}makePost(h,f){const E=Fr(h),A=xn.EMPTY_NODE.updateChild(this.indexPath_,E);return new En(f,A)}maxPost(){const h=xn.EMPTY_NODE.updateChild(this.indexPath_,ws);return new En(qe,h)}toString(){return Yi(this.indexPath_,0).join("/")}}const vi=new class Ho extends Is{compare(h,f){const E=h.node.compareTo(f.node);return 0===E?xt(h.name,f.name):E}isDefinedOn(h){return!0}indexedValueChanged(h,f){return!h.equals(f)}minPost(){return En.MIN}maxPost(){return En.MAX}makePost(h,f){const E=Fr(h);return new En(f,E)}toString(){return".value"}};function uo(g){return{type:"value",snapshotNode:g}}function ps(g,h){return{type:"child_added",snapshotNode:h,childName:g}}function $r(g,h){return{type:"child_removed",snapshotNode:h,childName:g}}function ji(g,h,f){return{type:"child_changed",snapshotNode:h,childName:g,oldSnap:f}}class ui{constructor(h){this.index_=h}updateChild(h,f,E,A,U,K){(0,V.hu)(h.isIndexed(this.index_),"A node must be indexed if only a child is updated");const fe=h.getImmediateChild(f);return fe.getChild(A).equals(E.getChild(A))&&fe.isEmpty()===E.isEmpty()||(null!=K&&(E.isEmpty()?h.hasChild(f)?K.trackChildChange($r(f,fe)):(0,V.hu)(h.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):fe.isEmpty()?K.trackChildChange(ps(f,E)):K.trackChildChange(ji(f,E,fe))),h.isLeafNode()&&E.isEmpty())?h:h.updateImmediateChild(f,E).withIndex(this.index_)}updateFullNode(h,f,E){return null!=E&&(h.isLeafNode()||h.forEachChild(Br,(A,U)=>{f.hasChild(A)||E.trackChildChange($r(A,U))}),f.isLeafNode()||f.forEachChild(Br,(A,U)=>{if(h.hasChild(A)){const K=h.getImmediateChild(A);K.equals(U)||E.trackChildChange(ji(A,U,K))}else E.trackChildChange(ps(A,U))})),f.withIndex(this.index_)}updatePriority(h,f){return h.isEmpty()?xn.EMPTY_NODE:h.updatePriority(f)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class qi{constructor(h){this.indexedFilter_=new ui(h.getIndex()),this.index_=h.getIndex(),this.startPost_=qi.getStartPost_(h),this.endPost_=qi.getEndPost_(h),this.startIsInclusive_=!h.startAfterSet_,this.endIsInclusive_=!h.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(h){const f=this.startIsInclusive_?this.index_.compare(this.getStartPost(),h)<=0:this.index_.compare(this.getStartPost(),h)<0,E=this.endIsInclusive_?this.index_.compare(h,this.getEndPost())<=0:this.index_.compare(h,this.getEndPost())<0;return f&&E}updateChild(h,f,E,A,U,K){return this.matches(new En(f,E))||(E=xn.EMPTY_NODE),this.indexedFilter_.updateChild(h,f,E,A,U,K)}updateFullNode(h,f,E){f.isLeafNode()&&(f=xn.EMPTY_NODE);let A=f.withIndex(this.index_);A=A.updatePriority(xn.EMPTY_NODE);const U=this;return f.forEachChild(Br,(K,fe)=>{U.matches(new En(K,fe))||(A=A.updateImmediateChild(K,xn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(h,A,E)}updatePriority(h,f){return h}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(h){if(h.hasStart()){const f=h.getIndexStartName();return h.getIndex().makePost(h.getIndexStartValue(),f)}return h.getIndex().minPost()}static getEndPost_(h){if(h.hasEnd()){const f=h.getIndexEndName();return h.getIndex().makePost(h.getIndexEndValue(),f)}return h.getIndex().maxPost()}}class Go{constructor(h){this.withinDirectionalStart=f=>this.reverse_?this.withinEndPost(f):this.withinStartPost(f),this.withinDirectionalEnd=f=>this.reverse_?this.withinStartPost(f):this.withinEndPost(f),this.withinStartPost=f=>{const E=this.index_.compare(this.rangedFilter_.getStartPost(),f);return this.startIsInclusive_?E<=0:E<0},this.withinEndPost=f=>{const E=this.index_.compare(f,this.rangedFilter_.getEndPost());return this.endIsInclusive_?E<=0:E<0},this.rangedFilter_=new qi(h),this.index_=h.getIndex(),this.limit_=h.getLimit(),this.reverse_=!h.isViewFromLeft(),this.startIsInclusive_=!h.startAfterSet_,this.endIsInclusive_=!h.endBeforeSet_}updateChild(h,f,E,A,U,K){return this.rangedFilter_.matches(new En(f,E))||(E=xn.EMPTY_NODE),h.getImmediateChild(f).equals(E)?h:h.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(h,f,E,A,U,K):this.fullLimitUpdateChild_(h,f,E,U,K)}updateFullNode(h,f,E){let A;if(f.isLeafNode()||f.isEmpty())A=xn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<f.numChildren()&&f.isIndexed(this.index_)){let U;A=xn.EMPTY_NODE.withIndex(this.index_),U=this.reverse_?f.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):f.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let K=0;for(;U.hasNext()&&K<this.limit_;){const fe=U.getNext();if(this.withinDirectionalStart(fe)){if(!this.withinDirectionalEnd(fe))break;A=A.updateImmediateChild(fe.name,fe.node),K++}}}else{let U;A=f.withIndex(this.index_),A=A.updatePriority(xn.EMPTY_NODE),U=this.reverse_?A.getReverseIterator(this.index_):A.getIterator(this.index_);let K=0;for(;U.hasNext();){const fe=U.getNext();K<this.limit_&&this.withinDirectionalStart(fe)&&this.withinDirectionalEnd(fe)?K++:A=A.updateImmediateChild(fe.name,xn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(h,A,E)}updatePriority(h,f){return h}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(h,f,E,A,U){let K;if(this.reverse_){const _t=this.index_.getCompare();K=(Tt,_n)=>_t(_n,Tt)}else K=this.index_.getCompare();const fe=h;(0,V.hu)(fe.numChildren()===this.limit_,"");const Ce=new En(f,E),xe=this.reverse_?fe.getFirstChild(this.index_):fe.getLastChild(this.index_),gt=this.rangedFilter_.matches(Ce);if(fe.hasChild(f)){const _t=fe.getImmediateChild(f);let Tt=A.getChildAfterChild(this.index_,xe,this.reverse_);for(;null!=Tt&&(Tt.name===f||fe.hasChild(Tt.name));)Tt=A.getChildAfterChild(this.index_,Tt,this.reverse_);const _n=null==Tt?1:K(Tt,Ce);if(gt&&!E.isEmpty()&&_n>=0)return U?.trackChildChange(ji(f,E,_t)),fe.updateImmediateChild(f,E);{U?.trackChildChange($r(f,_t));const Ii=fe.updateImmediateChild(f,xn.EMPTY_NODE);return null!=Tt&&this.rangedFilter_.matches(Tt)?(U?.trackChildChange(ps(Tt.name,Tt.node)),Ii.updateImmediateChild(Tt.name,Tt.node)):Ii}}return E.isEmpty()?h:gt&&K(xe,Ce)>=0?(null!=U&&(U.trackChildChange($r(xe.name,xe.node)),U.trackChildChange(ps(f,E))),fe.updateImmediateChild(f,E).updateImmediateChild(xe.name,xn.EMPTY_NODE)):h}}class Sr{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Br}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,V.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ut}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,V.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:qe}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,V.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Br}copy(){const h=new Sr;return h.limitSet_=this.limitSet_,h.limit_=this.limit_,h.startSet_=this.startSet_,h.startAfterSet_=this.startAfterSet_,h.indexStartValue_=this.indexStartValue_,h.startNameSet_=this.startNameSet_,h.indexStartName_=this.indexStartName_,h.endSet_=this.endSet_,h.endBeforeSet_=this.endBeforeSet_,h.indexEndValue_=this.indexEndValue_,h.endNameSet_=this.endNameSet_,h.indexEndName_=this.indexEndName_,h.index_=this.index_,h.viewFrom_=this.viewFrom_,h}}function Wo(g){const h={};if(g.isDefault())return h;let f;if(g.index_===Br?f="$priority":g.index_===vi?f="$value":g.index_===hr?f="$key":((0,V.hu)(g.index_ instanceof Ni,"Unrecognized index type!"),f=g.index_.toString()),h.orderBy=(0,V.Wl)(f),g.startSet_){const E=g.startAfterSet_?"startAfter":"startAt";h[E]=(0,V.Wl)(g.indexStartValue_),g.startNameSet_&&(h[E]+=","+(0,V.Wl)(g.indexStartName_))}if(g.endSet_){const E=g.endBeforeSet_?"endBefore":"endAt";h[E]=(0,V.Wl)(g.indexEndValue_),g.endNameSet_&&(h[E]+=","+(0,V.Wl)(g.indexEndName_))}return g.limitSet_&&(g.isViewFromLeft()?h.limitToFirst=g.limit_:h.limitToLast=g.limit_),h}function j(g){const h={};if(g.startSet_&&(h.sp=g.indexStartValue_,g.startNameSet_&&(h.sn=g.indexStartName_),h.sin=!g.startAfterSet_),g.endSet_&&(h.ep=g.indexEndValue_,g.endNameSet_&&(h.en=g.indexEndName_),h.ein=!g.endBeforeSet_),g.limitSet_){h.l=g.limit_;let f=g.viewFrom_;""===f&&(f=g.isViewFromLeft()?"l":"r"),h.vf=f}return g.index_!==Br&&(h.i=g.index_.toString()),h}class B extends Ls{constructor(h,f,E,A){super(),this.repoInfo_=h,this.onDataUpdate_=f,this.authTokenProvider_=E,this.appCheckTokenProvider_=A,this.log_=yt("p:rest:"),this.listens_={}}reportStats(h){throw new Error("Method not implemented.")}static getListenId_(h,f){return void 0!==f?"tag$"+f:((0,V.hu)(h._queryParams.isDefault(),"should have a tag if it's not a default query."),h._path.toString())}listen(h,f,E,A){const U=h._path.toString();this.log_("Listen called for "+U+" "+h._queryIdentifier);const K=B.getListenId_(h,E),fe={};this.listens_[K]=fe;const Ce=Wo(h._queryParams);this.restRequest_(U+".json",Ce,(xe,gt)=>{let _t=gt;if(404===xe&&(_t=null,xe=null),null===xe&&this.onDataUpdate_(U,_t,!1,E),(0,V.DV)(this.listens_,K)===fe){let Tt;Tt=xe?401===xe?"permission_denied":"rest_error:"+xe:"ok",A(Tt,null)}})}unlisten(h,f){const E=B.getListenId_(h,f);delete this.listens_[E]}get(h){const f=Wo(h._queryParams),E=h._path.toString(),A=new V.BH;return this.restRequest_(E+".json",f,(U,K)=>{let fe=K;404===U&&(fe=null,U=null),null===U?(this.onDataUpdate_(E,fe,!1,null),A.resolve(fe)):A.reject(new Error(fe))}),A.promise}refreshAuthToken(h){}restRequest_(h,f={},E){return f.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([A,U])=>{A&&A.accessToken&&(f.auth=A.accessToken),U&&U.token&&(f.ac=U.token);const K=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+h+"?ns="+this.repoInfo_.namespace+(0,V.xO)(f);this.log_("Sending REST request for "+K);const fe=new XMLHttpRequest;fe.onreadystatechange=()=>{if(E&&4===fe.readyState){this.log_("REST Response for "+K+" received. status:",fe.status,"response:",fe.responseText);let Ce=null;if(fe.status>=200&&fe.status<300){try{Ce=(0,V.cI)(fe.responseText)}catch{Ot("Failed to parse JSON response for "+K+": "+fe.responseText)}E(null,Ce)}else 401!==fe.status&&404!==fe.status&&Ot("Got unsuccessful REST response for "+K+" Status: "+fe.status),E(fe.status);E=null}},fe.open("GET",K,!0),fe.send()})}}class F{constructor(){this.rootNode_=xn.EMPTY_NODE}getNode(h){return this.rootNode_.getChild(h)}updateSnapshot(h,f){this.rootNode_=this.rootNode_.updateChild(h,f)}}function oe(){return{value:null,children:new Map}}function tt(g,h,f){if(Rn(h))g.value=f,g.children.clear();else if(null!==g.value)g.value=g.value.updateChild(h,f);else{const E=fn(h);g.children.has(E)||g.children.set(E,oe()),tt(g.children.get(E),h=mr(h),f)}}function sn(g,h){if(Rn(h))return g.value=null,g.children.clear(),!0;if(null!==g.value){if(g.value.isLeafNode())return!1;{const f=g.value;return g.value=null,f.forEachChild(Br,(E,A)=>{tt(g,new cn(E),A)}),sn(g,h)}}if(g.children.size>0){const f=fn(h);return h=mr(h),g.children.has(f)&&sn(g.children.get(f),h)&&g.children.delete(f),0===g.children.size}return!0}function Zr(g,h,f){null!==g.value?f(h,g.value):function ht(g,h){g.children.forEach((f,E)=>{h(E,f)})}(g,(E,A)=>{Zr(A,new cn(h.toString()+"/"+E),f)})}class Nn{constructor(h){this.collection_=h,this.last_=null}get(){const h=this.collection_.get(),f=Object.assign({},h);return this.last_&&$t(this.last_,(E,A)=>{f[E]=f[E]-A}),this.last_=h,f}}class wa{constructor(h,f){this.server_=f,this.statsToReport_={},this.statsListener_=new Nn(h);const E=1e4+2e4*Math.random();ft(this.reportStats_.bind(this),Math.floor(E))}reportStats_(){const h=this.statsListener_.get(),f={};let E=!1;$t(h,(A,U)=>{U>0&&(0,V.r3)(this.statsToReport_,A)&&(f[A]=U,E=!0)}),E&&this.server_.reportStats(f),ft(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var $i=(()=>{return(g=$i||($i={}))[g.OVERWRITE=0]="OVERWRITE",g[g.MERGE=1]="MERGE",g[g.ACK_USER_WRITE=2]="ACK_USER_WRITE",g[g.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",$i;var g})();function ca(g){return{fromUser:!1,fromServer:!0,queryId:g,tagged:!0}}class da{constructor(h,f,E){this.path=h,this.affectedTree=f,this.revert=E,this.type=$i.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(h){if(Rn(this.path)){if(null!=this.affectedTree.value)return(0,V.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const f=this.affectedTree.subtree(new cn(h));return new da(Cn(),f,this.revert)}}return(0,V.hu)(fn(this.path)===h,"operationForChild called for unrelated child."),new da(mr(this.path),this.affectedTree,this.revert)}}class ho{constructor(h,f){this.source=h,this.path=f,this.type=$i.LISTEN_COMPLETE}operationForChild(h){return Rn(this.path)?new ho(this.source,Cn()):new ho(this.source,mr(this.path))}}class bs{constructor(h,f,E){this.source=h,this.path=f,this.snap=E,this.type=$i.OVERWRITE}operationForChild(h){return Rn(this.path)?new bs(this.source,Cn(),this.snap.getImmediateChild(h)):new bs(this.source,mr(this.path),this.snap)}}class Ti{constructor(h,f,E){this.source=h,this.path=f,this.children=E,this.type=$i.MERGE}operationForChild(h){if(Rn(this.path)){const f=this.children.subtree(new cn(h));return f.isEmpty()?null:f.value?new bs(this.source,Cn(),f.value):new Ti(this.source,Cn(),f)}return(0,V.hu)(fn(this.path)===h,"Can't get a merge for a child not on the path of the operation"),new Ti(this.source,mr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ri{constructor(h,f,E){this.node_=h,this.fullyInitialized_=f,this.filtered_=E}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(h){if(Rn(h))return this.isFullyInitialized()&&!this.filtered_;const f=fn(h);return this.isCompleteForChild(f)}isCompleteForChild(h){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(h)}getNode(){return this.node_}}class Ta{constructor(h){this.query_=h,this.index_=this.query_._queryParams.getIndex()}}function ms(g,h,f,E,A,U){const K=E.filter(fe=>fe.type===f);K.sort((fe,Ce)=>function fo(g,h,f){if(null==h.childName||null==f.childName)throw(0,V.g5)("Should only compare child_ events.");const E=new En(h.childName,h.snapshotNode),A=new En(f.childName,f.snapshotNode);return g.index_.compare(E,A)}(g,fe,Ce)),K.forEach(fe=>{const Ce=function za(g,h,f){return"value"===h.type||"child_removed"===h.type||(h.prevName=f.getPredecessorChildName(h.childName,h.snapshotNode,g.index_)),h}(g,fe,U);A.forEach(xe=>{xe.respondsTo(fe.type)&&h.push(xe.createEvent(Ce,g.query_))})})}function bi(g,h){return{eventCache:g,serverCache:h}}function Ko(g,h,f,E){return bi(new ri(h,f,E),g.serverCache)}function Ys(g,h,f,E){return bi(g.eventCache,new ri(h,f,E))}function Zi(g){return g.eventCache.isFullyInitialized()?g.eventCache.getNode():null}function Yo(g){return g.serverCache.isFullyInitialized()?g.serverCache.getNode():null}let Ka;class ii{constructor(h,f=(()=>(Ka||(Ka=new Gn(It)),Ka))()){this.value=h,this.children=f}static fromObject(h){let f=new ii(null);return $t(h,(E,A)=>{f=f.set(new cn(E),A)}),f}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(h,f){if(null!=this.value&&f(this.value))return{path:Cn(),value:this.value};if(Rn(h))return null;{const E=fn(h),A=this.children.get(E);if(null!==A){const U=A.findRootMostMatchingPathAndValue(mr(h),f);return null!=U?{path:Bn(new cn(E),U.path),value:U.value}:null}return null}}findRootMostValueAndPath(h){return this.findRootMostMatchingPathAndValue(h,()=>!0)}subtree(h){if(Rn(h))return this;{const f=fn(h),E=this.children.get(f);return null!==E?E.subtree(mr(h)):new ii(null)}}set(h,f){if(Rn(h))return new ii(f,this.children);{const E=fn(h),U=(this.children.get(E)||new ii(null)).set(mr(h),f),K=this.children.insert(E,U);return new ii(this.value,K)}}remove(h){if(Rn(h))return this.children.isEmpty()?new ii(null):new ii(null,this.children);{const f=fn(h),E=this.children.get(f);if(E){const A=E.remove(mr(h));let U;return U=A.isEmpty()?this.children.remove(f):this.children.insert(f,A),null===this.value&&U.isEmpty()?new ii(null):new ii(this.value,U)}return this}}get(h){if(Rn(h))return this.value;{const f=fn(h),E=this.children.get(f);return E?E.get(mr(h)):null}}setTree(h,f){if(Rn(h))return f;{const E=fn(h),U=(this.children.get(E)||new ii(null)).setTree(mr(h),f);let K;return K=U.isEmpty()?this.children.remove(E):this.children.insert(E,U),new ii(this.value,K)}}fold(h){return this.fold_(Cn(),h)}fold_(h,f){const E={};return this.children.inorderTraversal((A,U)=>{E[A]=U.fold_(Bn(h,A),f)}),f(h,this.value,E)}findOnPath(h,f){return this.findOnPath_(h,Cn(),f)}findOnPath_(h,f,E){const A=!!this.value&&E(f,this.value);if(A)return A;if(Rn(h))return null;{const U=fn(h),K=this.children.get(U);return K?K.findOnPath_(mr(h),Bn(f,U),E):null}}foreachOnPath(h,f){return this.foreachOnPath_(h,Cn(),f)}foreachOnPath_(h,f,E){if(Rn(h))return this;{this.value&&E(f,this.value);const A=fn(h),U=this.children.get(A);return U?U.foreachOnPath_(mr(h),Bn(f,A),E):new ii(null)}}foreach(h){this.foreach_(Cn(),h)}foreach_(h,f){this.children.inorderTraversal((E,A)=>{A.foreach_(Bn(h,E),f)}),this.value&&f(h,this.value)}foreachChild(h){this.children.inorderTraversal((f,E)=>{E.value&&h(f,E.value)})}}class Qs{constructor(h){this.writeTree_=h}static empty(){return new Qs(new ii(null))}}function Sa(g,h,f){if(Rn(h))return new Qs(new ii(f));{const E=g.writeTree_.findRootMostValueAndPath(h);if(null!=E){const A=E.path;let U=E.value;const K=Lr(A,h);return U=U.updateChild(K,f),new Qs(g.writeTree_.set(A,U))}{const A=new ii(f),U=g.writeTree_.setTree(h,A);return new Qs(U)}}}function ba(g,h,f){let E=g;return $t(f,(A,U)=>{E=Sa(E,Bn(h,A),U)}),E}function Aa(g,h){if(Rn(h))return Qs.empty();{const f=g.writeTree_.setTree(h,new ii(null));return new Qs(f)}}function Ya(g,h){return null!=ha(g,h)}function ha(g,h){const f=g.writeTree_.findRootMostValueAndPath(h);return null!=f?g.writeTree_.get(f.path).getChild(Lr(f.path,h)):null}function Xi(g){const h=[],f=g.writeTree_.value;return null!=f?f.isLeafNode()||f.forEachChild(Br,(E,A)=>{h.push(new En(E,A))}):g.writeTree_.children.inorderTraversal((E,A)=>{null!=A.value&&h.push(new En(E,A.value))}),h}function po(g,h){if(Rn(h))return g;{const f=ha(g,h);return new Qs(null!=f?new ii(f):g.writeTree_.subtree(h))}}function ci(g){return g.writeTree_.isEmpty()}function Ji(g,h){return Gr(Cn(),g.writeTree_,h)}function Gr(g,h,f){if(null!=h.value)return f.updateChild(g,h.value);{let E=null;return h.children.inorderTraversal((A,U)=>{".priority"===A?((0,V.hu)(null!==U.value,"Priority writes must always be leaf nodes"),E=U.value):f=Gr(Bn(g,A),U,f)}),!f.getChild(g).isEmpty()&&null!==E&&(f=f.updateChild(Bn(g,".priority"),E)),f}}function Lt(g,h){return Xr(h,g)}function Xt(g,h){if(g.snap)return nt(g.path,h);for(const f in g.children)if(g.children.hasOwnProperty(f)&&nt(Bn(g.path,f),h))return!0;return!1}function zt(g){return g.visible}function lt(g,h,f){let E=Qs.empty();for(let A=0;A<g.length;++A){const U=g[A];if(h(U)){const K=U.path;let fe;if(U.snap)nt(f,K)?(fe=Lr(f,K),E=Sa(E,fe,U.snap)):nt(K,f)&&(fe=Lr(K,f),E=Sa(E,Cn(),U.snap.getChild(fe)));else{if(!U.children)throw(0,V.g5)("WriteRecord should have .snap or .children");if(nt(f,K))fe=Lr(f,K),E=ba(E,fe,U.children);else if(nt(K,f))if(fe=Lr(K,f),Rn(fe))E=ba(E,Cn(),U.children);else{const Ce=(0,V.DV)(U.children,fn(fe));if(Ce){const xe=Ce.getChild(mr(fe));E=Sa(E,Cn(),xe)}}}}}return E}function M(g,h,f,E,A){if(E||A){const U=po(g.visibleWrites,h);return!A&&ci(U)?f:A||null!=f||Ya(U,Cn())?Ji(lt(g.allWrites,function(xe){return(xe.visible||A)&&(!E||!~E.indexOf(xe.writeId))&&(nt(xe.path,h)||nt(h,xe.path))},h),f||xn.EMPTY_NODE):null}{const U=ha(g.visibleWrites,h);if(null!=U)return U;{const K=po(g.visibleWrites,h);return ci(K)?f:null!=f||Ya(K,Cn())?Ji(K,f||xn.EMPTY_NODE):null}}}function ln(g,h,f,E){return M(g.writeTree,g.treePath,h,f,E)}function Dr(g,h){return function z(g,h,f){let E=xn.EMPTY_NODE;const A=ha(g.visibleWrites,h);if(A)return A.isLeafNode()||A.forEachChild(Br,(U,K)=>{E=E.updateImmediateChild(U,K)}),E;if(f){const U=po(g.visibleWrites,h);return f.forEachChild(Br,(K,fe)=>{const Ce=Ji(po(U,new cn(K)),fe);E=E.updateImmediateChild(K,Ce)}),Xi(U).forEach(K=>{E=E.updateImmediateChild(K.name,K.node)}),E}return Xi(po(g.visibleWrites,h)).forEach(K=>{E=E.updateImmediateChild(K.name,K.node)}),E}(g.writeTree,g.treePath,h)}function Wr(g,h,f,E){return function k(g,h,f,E,A){(0,V.hu)(E||A,"Either existingEventSnap or existingServerSnap must exist");const U=Bn(h,f);if(Ya(g.visibleWrites,U))return null;{const K=po(g.visibleWrites,U);return ci(K)?A.getChild(f):Ji(K,A.getChild(f))}}(g.writeTree,g.treePath,h,f,E)}function tr(g,h){return function ye(g,h){return ha(g.visibleWrites,h)}(g.writeTree,Bn(g.treePath,h))}function Zn(g,h,f){return function ie(g,h,f,E){const A=Bn(h,f),U=ha(g.visibleWrites,A);return null!=U?U:E.isCompleteForChild(f)?Ji(po(g.visibleWrites,A),E.getNode().getImmediateChild(f)):null}(g.writeTree,g.treePath,h,f)}function Jt(g,h){return Xr(Bn(g.treePath,h),g.writeTree)}function Xr(g,h){return{treePath:g,writeTree:h}}class Vs{constructor(){this.changeMap=new Map}trackChildChange(h){const f=h.type,E=h.childName;(0,V.hu)("child_added"===f||"child_changed"===f||"child_removed"===f,"Only child changes supported for tracking"),(0,V.hu)(".priority"!==E,"Only non-priority child changes can be tracked.");const A=this.changeMap.get(E);if(A){const U=A.type;if("child_added"===f&&"child_removed"===U)this.changeMap.set(E,ji(E,h.snapshotNode,A.snapshotNode));else if("child_removed"===f&&"child_added"===U)this.changeMap.delete(E);else if("child_removed"===f&&"child_changed"===U)this.changeMap.set(E,$r(E,A.oldSnap));else if("child_changed"===f&&"child_added"===U)this.changeMap.set(E,ps(E,h.snapshotNode));else{if("child_changed"!==f||"child_changed"!==U)throw(0,V.g5)("Illegal combination of changes: "+h+" occurred after "+A);this.changeMap.set(E,ji(E,h.snapshotNode,A.oldSnap))}}else this.changeMap.set(E,h)}getChanges(){return Array.from(this.changeMap.values())}}const mn=new class _r{getCompleteChild(h){return null}getChildAfterChild(h,f,E){return null}};class Fi{constructor(h,f,E=null){this.writes_=h,this.viewCache_=f,this.optCompleteServerCache_=E}getCompleteChild(h){const f=this.viewCache_.eventCache;if(f.isCompleteForChild(h))return f.getNode().getImmediateChild(h);{const E=null!=this.optCompleteServerCache_?new ri(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zn(this.writes_,h,E)}}getChildAfterChild(h,f,E){const A=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Yo(this.viewCache_),U=function cr(g,h,f,E,A,U){return function it(g,h,f,E,A,U,K){let fe;const Ce=po(g.visibleWrites,h),xe=ha(Ce,Cn());if(null!=xe)fe=xe;else{if(null==f)return[];fe=Ji(Ce,f)}if(fe=fe.withIndex(K),fe.isEmpty()||fe.isLeafNode())return[];{const gt=[],_t=K.getCompare(),Tt=U?fe.getReverseIteratorFrom(E,K):fe.getIteratorFrom(E,K);let _n=Tt.getNext();for(;_n&&gt.length<A;)0!==_t(_n,E)&&gt.push(_n),_n=Tt.getNext();return gt}}(g.writeTree,g.treePath,h,f,E,A,U)}(this.writes_,A,f,1,E,h);return 0===U.length?null:U[0]}}function Eo(g,h,f,E,A,U){const K=h.eventCache;if(null!=tr(E,f))return h;{let fe,Ce;if(Rn(f))if((0,V.hu)(h.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),h.serverCache.isFiltered()){const xe=Yo(h),_t=Dr(E,xe instanceof xn?xe:xn.EMPTY_NODE);fe=g.filter.updateFullNode(h.eventCache.getNode(),_t,U)}else{const xe=ln(E,Yo(h));fe=g.filter.updateFullNode(h.eventCache.getNode(),xe,U)}else{const xe=fn(f);if(".priority"===xe){(0,V.hu)(1===lr(f),"Can't have a priority with additional path components");const gt=K.getNode();Ce=h.serverCache.getNode();const _t=Wr(E,f,gt,Ce);fe=null!=_t?g.filter.updatePriority(gt,_t):K.getNode()}else{const gt=mr(f);let _t;if(K.isCompleteForChild(xe)){Ce=h.serverCache.getNode();const Tt=Wr(E,f,K.getNode(),Ce);_t=null!=Tt?K.getNode().getImmediateChild(xe).updateChild(gt,Tt):K.getNode().getImmediateChild(xe)}else _t=Zn(E,xe,h.serverCache);fe=null!=_t?g.filter.updateChild(K.getNode(),xe,_t,gt,A,U):K.getNode()}}return Ko(h,fe,K.isFullyInitialized()||Rn(f),g.filter.filtersNodes())}}function Ma(g,h,f,E,A,U,K,fe){const Ce=h.serverCache;let xe;const gt=K?g.filter:g.filter.getIndexedFilter();if(Rn(f))xe=gt.updateFullNode(Ce.getNode(),E,null);else if(gt.filtersNodes()&&!Ce.isFiltered()){const _n=Ce.getNode().updateChild(f,E);xe=gt.updateFullNode(Ce.getNode(),_n,null)}else{const _n=fn(f);if(!Ce.isCompleteForPath(f)&&lr(f)>1)return h;const zn=mr(f),To=Ce.getNode().getImmediateChild(_n).updateChild(zn,E);xe=".priority"===_n?gt.updatePriority(Ce.getNode(),To):gt.updateChild(Ce.getNode(),_n,To,zn,mn,null)}const _t=Ys(h,xe,Ce.isFullyInitialized()||Rn(f),gt.filtersNodes());return Eo(g,_t,f,A,new Fi(A,_t,U),fe)}function pa(g,h,f,E,A,U,K){const fe=h.eventCache;let Ce,xe;const gt=new Fi(A,h,U);if(Rn(f))xe=g.filter.updateFullNode(h.eventCache.getNode(),E,K),Ce=Ko(h,xe,!0,g.filter.filtersNodes());else{const _t=fn(f);if(".priority"===_t)xe=g.filter.updatePriority(h.eventCache.getNode(),E),Ce=Ko(h,xe,fe.isFullyInitialized(),fe.isFiltered());else{const Tt=mr(f),_n=fe.getNode().getImmediateChild(_t);let zn;if(Rn(Tt))zn=E;else{const Ii=gt.getCompleteChild(_t);zn=null!=Ii?".priority"===wr(Tt)&&Ii.getChild(Vn(Tt)).isEmpty()?Ii:Ii.updateChild(Tt,E):xn.EMPTY_NODE}Ce=_n.equals(zn)?h:Ko(h,g.filter.updateChild(fe.getNode(),_t,zn,Tt,gt,K),fe.isFullyInitialized(),g.filter.filtersNodes())}}return Ce}function ol(g,h){return g.eventCache.isCompleteForChild(h)}function go(g,h,f){return f.foreach((E,A)=>{h=h.updateChild(E,A)}),h}function As(g,h,f,E,A,U,K,fe){if(h.serverCache.getNode().isEmpty()&&!h.serverCache.isFullyInitialized())return h;let xe,Ce=h;xe=Rn(f)?E:new ii(null).setTree(f,E);const gt=h.serverCache.getNode();return xe.children.inorderTraversal((_t,Tt)=>{if(gt.hasChild(_t)){const zn=go(0,h.serverCache.getNode().getImmediateChild(_t),Tt);Ce=Ma(g,Ce,new cn(_t),zn,A,U,K,fe)}}),xe.children.inorderTraversal((_t,Tt)=>{const _n=!h.serverCache.isCompleteForChild(_t)&&null===Tt.value;if(!gt.hasChild(_t)&&!_n){const Ii=go(0,h.serverCache.getNode().getImmediateChild(_t),Tt);Ce=Ma(g,Ce,new cn(_t),Ii,A,U,K,fe)}}),Ce}class Tl{constructor(h,f){this.query_=h,this.eventRegistrations_=[];const E=this.query_._queryParams,A=new ui(E.getIndex()),U=function Hi(g){return g.loadsAllData()?new ui(g.getIndex()):g.hasLimit()?new Go(g):new qi(g)}(E);this.processor_=function Wn(g){return{filter:g}}(U);const K=f.serverCache,fe=f.eventCache,Ce=A.updateFullNode(xn.EMPTY_NODE,K.getNode(),null),xe=U.updateFullNode(xn.EMPTY_NODE,fe.getNode(),null),gt=new ri(Ce,K.isFullyInitialized(),A.filtersNodes()),_t=new ri(xe,fe.isFullyInitialized(),U.filtersNodes());this.viewCache_=bi(_t,gt),this.eventGenerator_=new Ta(this.query_)}get query(){return this.query_}}function Ro(g,h){const f=Yo(g.viewCache_);return f&&(g.query._queryParams.loadsAllData()||!Rn(h)&&!f.getImmediateChild(fn(h)).isEmpty())?f.getChild(h):null}function Za(g){return 0===g.eventRegistrations_.length}function qs(g,h,f){const E=[];if(f){(0,V.hu)(null==h,"A cancel should cancel all event registrations.");const A=g.query._path;g.eventRegistrations_.forEach(U=>{const K=U.createCancelEvent(f,A);K&&E.push(K)})}if(h){let A=[];for(let U=0;U<g.eventRegistrations_.length;++U){const K=g.eventRegistrations_[U];if(K.matches(h)){if(h.hasAnyCallback()){A=A.concat(g.eventRegistrations_.slice(U+1));break}}else A.push(K)}g.eventRegistrations_=A}else g.eventRegistrations_=[];return E}function ys(g,h,f,E){h.type===$i.MERGE&&null!==h.source.queryId&&((0,V.hu)(Yo(g.viewCache_),"We should always have a full cache before handling merges"),(0,V.hu)(Zi(g.viewCache_),"Missing event cache, even though we have a server cache"));const A=g.viewCache_,U=function Rr(g,h,f,E,A){const U=new Vs;let K,fe;if(f.type===$i.OVERWRITE){const xe=f;xe.source.fromUser?K=pa(g,h,xe.path,xe.snap,E,A,U):((0,V.hu)(xe.source.fromServer,"Unknown source."),fe=xe.source.tagged||h.serverCache.isFiltered()&&!Rn(xe.path),K=Ma(g,h,xe.path,xe.snap,E,A,fe,U))}else if(f.type===$i.MERGE){const xe=f;xe.source.fromUser?K=function as(g,h,f,E,A,U,K){let fe=h;return E.foreach((Ce,xe)=>{const gt=Bn(f,Ce);ol(h,fn(gt))&&(fe=pa(g,fe,gt,xe,A,U,K))}),E.foreach((Ce,xe)=>{const gt=Bn(f,Ce);ol(h,fn(gt))||(fe=pa(g,fe,gt,xe,A,U,K))}),fe}(g,h,xe.path,xe.children,E,A,U):((0,V.hu)(xe.source.fromServer,"Unknown source."),fe=xe.source.tagged||h.serverCache.isFiltered(),K=As(g,h,xe.path,xe.children,E,A,fe,U))}else if(f.type===$i.ACK_USER_WRITE){const xe=f;K=xe.revert?function Bs(g,h,f,E,A,U){let K;if(null!=tr(E,f))return h;{const fe=new Fi(E,h,A),Ce=h.eventCache.getNode();let xe;if(Rn(f)||".priority"===fn(f)){let gt;if(h.serverCache.isFullyInitialized())gt=ln(E,Yo(h));else{const _t=h.serverCache.getNode();(0,V.hu)(_t instanceof xn,"serverChildren would be complete if leaf node"),gt=Dr(E,_t)}xe=g.filter.updateFullNode(Ce,gt,U)}else{const gt=fn(f);let _t=Zn(E,gt,h.serverCache);null==_t&&h.serverCache.isCompleteForChild(gt)&&(_t=Ce.getImmediateChild(gt)),xe=null!=_t?g.filter.updateChild(Ce,gt,_t,mr(f),fe,U):h.eventCache.getNode().hasChild(gt)?g.filter.updateChild(Ce,gt,xn.EMPTY_NODE,mr(f),fe,U):Ce,xe.isEmpty()&&h.serverCache.isFullyInitialized()&&(K=ln(E,Yo(h)),K.isLeafNode()&&(xe=g.filter.updateFullNode(xe,K,U)))}return K=h.serverCache.isFullyInitialized()||null!=tr(E,Cn()),Ko(h,xe,K,g.filter.filtersNodes())}}(g,h,xe.path,E,A,U):function Pa(g,h,f,E,A,U,K){if(null!=tr(A,f))return h;const fe=h.serverCache.isFiltered(),Ce=h.serverCache;if(null!=E.value){if(Rn(f)&&Ce.isFullyInitialized()||Ce.isCompleteForPath(f))return Ma(g,h,f,Ce.getNode().getChild(f),A,U,fe,K);if(Rn(f)){let xe=new ii(null);return Ce.getNode().forEachChild(hr,(gt,_t)=>{xe=xe.set(new cn(gt),_t)}),As(g,h,f,xe,A,U,fe,K)}return h}{let xe=new ii(null);return E.foreach((gt,_t)=>{const Tt=Bn(f,gt);Ce.isCompleteForPath(Tt)&&(xe=xe.set(gt,Ce.getNode().getChild(Tt)))}),As(g,h,f,xe,A,U,fe,K)}}(g,h,xe.path,xe.affectedTree,E,A,U)}else{if(f.type!==$i.LISTEN_COMPLETE)throw(0,V.g5)("Unknown operation type: "+f.type);K=function al(g,h,f,E,A){const U=h.serverCache;return Eo(g,Ys(h,U.getNode(),U.isFullyInitialized()||Rn(f),U.isFiltered()),f,E,mn,A)}(g,h,f.path,E,U)}const Ce=U.getChanges();return function Gt(g,h,f){const E=h.eventCache;if(E.isFullyInitialized()){const A=E.getNode().isLeafNode()||E.getNode().isEmpty(),U=Zi(g);(f.length>0||!g.eventCache.isFullyInitialized()||A&&!E.getNode().equals(U)||!E.getNode().getPriority().equals(U.getPriority()))&&f.push(uo(Zi(h)))}}(h,K,Ce),{viewCache:K,changes:Ce}}(g.processor_,A,h,f,E);return function fa(g,h){(0,V.hu)(h.eventCache.getNode().isIndexed(g.filter.getIndex()),"Event snap not indexed"),(0,V.hu)(h.serverCache.getNode().isIndexed(g.filter.getIndex()),"Server snap not indexed")}(g.processor_,U.viewCache),(0,V.hu)(U.viewCache.serverCache.isFullyInitialized()||!A.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),g.viewCache_=U.viewCache,Zs(g,U.changes,U.viewCache.eventCache.getNode(),null)}function Zs(g,h,f,E){return function zo(g,h,f,E){const A=[],U=[];return h.forEach(K=>{"child_changed"===K.type&&g.index_.indexedValueChanged(K.oldSnap,K.snapshotNode)&&U.push(function $o(g,h){return{type:"child_moved",snapshotNode:h,childName:g}}(K.childName,K.snapshotNode))}),ms(g,A,"child_removed",h,E,f),ms(g,A,"child_added",h,E,f),ms(g,A,"child_moved",U,E,f),ms(g,A,"child_changed",h,E,f),ms(g,A,"value",h,E,f),A}(g.eventGenerator_,h,f,E?[E]:g.eventRegistrations_)}let ls,qo;class Xa{constructor(){this.views=new Map}}function es(g,h,f,E){const A=h.source.queryId;if(null!==A){const U=g.views.get(A);return(0,V.hu)(null!=U,"SyncTree gave us an op for an invalid query."),ys(U,h,f,E)}{let U=[];for(const K of g.views.values())U=U.concat(ys(K,h,f,E));return U}}function Oa(g,h,f,E,A){const K=g.views.get(h._queryIdentifier);if(!K){let fe=ln(f,A?E:null),Ce=!1;fe?Ce=!0:E instanceof xn?(fe=Dr(f,E),Ce=!1):(fe=xn.EMPTY_NODE,Ce=!1);const xe=bi(new ri(fe,Ce,!1),new ri(E,A,!1));return new Tl(h,xe)}return K}function No(g){const h=[];for(const f of g.views.values())f.query._queryParams.loadsAllData()||h.push(f);return h}function Xs(g,h){let f=null;for(const E of g.views.values())f=f||Ro(E,h);return f}function Js(g,h){return h._queryParams.loadsAllData()?Ms(g):g.views.get(h._queryIdentifier)}function ga(g,h){return null!=Js(g,h)}function Lo(g){return null!=Ms(g)}function Ms(g){for(const h of g.views.values())if(h.query._queryParams.loadsAllData())return h;return null}let Jr=1;class Ua{constructor(h){this.listenProvider_=h,this.syncPointTree_=new ii(null),this.pendingWriteTree_=function pt(){return{visibleWrites:Qs.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function gi(g,h,f,E,A){return function Ai(g,h,f,E,A){(0,V.hu)(E>g.lastWriteId,"Stacking an older write on top of newer ones"),void 0===A&&(A=!0),g.allWrites.push({path:h,snap:f,writeId:E,visible:A}),A&&(g.visibleWrites=Sa(g.visibleWrites,h,f)),g.lastWriteId=E}(g.pendingWriteTree_,h,f,E,A),A?N(g,new bs({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},h,f)):[]}function Fo(g,h,f=!1){const E=function Qa(g,h){for(let f=0;f<g.allWrites.length;f++){const E=g.allWrites[f];if(E.writeId===h)return E}return null}(g.pendingWriteTree_,h);if(function an(g,h){const f=g.allWrites.findIndex(fe=>fe.writeId===h);(0,V.hu)(f>=0,"removeWrite called with nonexistent writeId.");const E=g.allWrites[f];g.allWrites.splice(f,1);let A=E.visible,U=!1,K=g.allWrites.length-1;for(;A&&K>=0;){const fe=g.allWrites[K];fe.visible&&(K>=f&&Xt(fe,E.path)?A=!1:nt(E.path,fe.path)&&(U=!0)),K--}return!!A&&(U?(function qa(g){g.visibleWrites=lt(g.allWrites,zt,Cn()),g.lastWriteId=g.allWrites.length>0?g.allWrites[g.allWrites.length-1].writeId:-1}(g),!0):(E.snap?g.visibleWrites=Aa(g.visibleWrites,E.path):$t(E.children,Ce=>{g.visibleWrites=Aa(g.visibleWrites,Bn(E.path,Ce))}),!0))}(g.pendingWriteTree_,h)){let U=new ii(null);return null!=E.snap?U=U.set(Cn(),!0):$t(E.children,K=>{U=U.set(new cn(K),!0)}),N(g,new da(E.path,U,f))}return[]}function Va(g,h,f){return N(g,new bs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h,f))}function ya(g,h,f,E,A=!1){const U=h._path,K=g.syncPointTree_.get(U);let fe=[];if(K&&("default"===h._queryIdentifier||ga(K,h))){const Ce=function iu(g,h,f,E){const A=h._queryIdentifier,U=[];let K=[];const fe=Lo(g);if("default"===A)for(const[Ce,xe]of g.views.entries())K=K.concat(qs(xe,f,E)),Za(xe)&&(g.views.delete(Ce),xe.query._queryParams.loadsAllData()||U.push(xe.query));else{const Ce=g.views.get(A);Ce&&(K=K.concat(qs(Ce,f,E)),Za(Ce)&&(g.views.delete(A),Ce.query._queryParams.loadsAllData()||U.push(Ce.query)))}return fe&&!Lo(g)&&U.push(new(function Ja(){return(0,V.hu)(ls,"Reference.ts has not been loaded"),ls}())(h._repo,h._path)),{removed:U,events:K}}(K,h,f,E);(function $l(g){return 0===g.views.size})(K)&&(g.syncPointTree_=g.syncPointTree_.remove(U));const xe=Ce.removed;if(fe=Ce.events,!A){const gt=-1!==xe.findIndex(Tt=>Tt._queryParams.loadsAllData()),_t=g.syncPointTree_.findOnPath(U,(Tt,_n)=>Lo(_n));if(gt&&!_t){const Tt=g.syncPointTree_.subtree(U);if(!Tt.isEmpty()){const _n=function kr(g){return g.fold((h,f,E)=>{if(f&&Lo(f))return[Ms(f)];{let A=[];return f&&(A=No(f)),$t(E,(U,K)=>{A=A.concat(K)}),A}})}(Tt);for(let zn=0;zn<_n.length;++zn){const Ii=_n[zn],To=Ii.query,fu=ce(g,Ii);g.listenProvider_.startListening(_s(To),Ve(g,To),fu.hashFn,fu.onComplete)}}}!_t&&xe.length>0&&!E&&(gt?g.listenProvider_.stopListening(_s(h),null):xe.forEach(Tt=>{const _n=g.queryToTagMap.get(Dt(Tt));g.listenProvider_.stopListening(_s(Tt),_n)}))}!function ki(g,h){for(let f=0;f<h.length;++f){const E=h[f];if(!E._queryParams.loadsAllData()){const A=Dt(E),U=g.queryToTagMap.get(A);g.queryToTagMap.delete(A),g.tagToQueryMap.delete(U)}}}(g,xe)}return fe}function cs(g,h,f,E){const A=qt(g,E);if(null!=A){const U=Zt(A),K=U.path,fe=U.queryId,Ce=Lr(K,h);return nr(g,K,new bs(ca(fe),Ce,f))}return[]}function S(g,h,f,E=!1){const A=h._path;let U=null,K=!1;g.syncPointTree_.foreachOnPath(A,(Tt,_n)=>{const zn=Lr(Tt,A);U=U||Xs(_n,zn),K=K||Lo(_n)});let Ce,fe=g.syncPointTree_.get(A);fe?(K=K||Lo(fe),U=U||Xs(fe,Cn())):(fe=new Xa,g.syncPointTree_=g.syncPointTree_.set(A,fe)),null!=U?Ce=!0:(Ce=!1,U=xn.EMPTY_NODE,g.syncPointTree_.subtree(A).foreachChild((_n,zn)=>{const Ii=Xs(zn,Cn());Ii&&(U=U.updateImmediateChild(_n,Ii))}));const xe=ga(fe,h);if(!xe&&!h._queryParams.loadsAllData()){const Tt=Dt(h);(0,V.hu)(!g.queryToTagMap.has(Tt),"View does not exist, but we have a tag");const _n=function Ra(){return Jr++}();g.queryToTagMap.set(Tt,_n),g.tagToQueryMap.set(_n,Tt)}let _t=function js(g,h,f,E,A,U){const K=Oa(g,h,E,A,U);return g.views.has(h._queryIdentifier)||g.views.set(h._queryIdentifier,K),function et(g,h){g.eventRegistrations_.push(h)}(K,f),function Sl(g,h){const f=g.viewCache_.eventCache,E=[];return f.getNode().isLeafNode()||f.getNode().forEachChild(Br,(U,K)=>{E.push(ps(U,K))}),f.isFullyInitialized()&&E.push(uo(f.getNode())),Zs(g,E,f.getNode(),h)}(K,f)}(fe,h,f,Lt(g.pendingWriteTree_,A),U,Ce);if(!xe&&!K&&!E){const Tt=Js(fe,h);_t=_t.concat(function Wi(g,h,f){const E=h._path,A=Ve(g,h),U=ce(g,f),K=g.listenProvider_.startListening(_s(h),A,U.hashFn,U.onComplete),fe=g.syncPointTree_.subtree(E);if(A)(0,V.hu)(!Lo(fe.value),"If we're adding a query, it shouldn't be shadowed");else{const Ce=fe.fold((xe,gt,_t)=>{if(!Rn(xe)&&gt&&Lo(gt))return[Ms(gt).query];{let Tt=[];return gt&&(Tt=Tt.concat(No(gt).map(_n=>_n.query))),$t(_t,(_n,zn)=>{Tt=Tt.concat(zn)}),Tt}});for(let xe=0;xe<Ce.length;++xe){const gt=Ce[xe];g.listenProvider_.stopListening(_s(gt),Ve(g,gt))}}return K}(g,h,Tt))}return _t}function P(g,h,f){const A=g.pendingWriteTree_,U=g.syncPointTree_.findOnPath(h,(K,fe)=>{const xe=Xs(fe,Lr(K,h));if(xe)return xe});return M(A,h,U,f,!0)}function N(g,h){return $(h,g.syncPointTree_,null,Lt(g.pendingWriteTree_,Cn()))}function $(g,h,f,E){if(Rn(g.path))return re(g,h,f,E);{const A=h.get(Cn());null==f&&null!=A&&(f=Xs(A,Cn()));let U=[];const K=fn(g.path),fe=g.operationForChild(K),Ce=h.children.get(K);if(Ce&&fe){const xe=f?f.getImmediateChild(K):null,gt=Jt(E,K);U=U.concat($(fe,Ce,xe,gt))}return A&&(U=U.concat(es(A,g,E,f))),U}}function re(g,h,f,E){const A=h.get(Cn());null==f&&null!=A&&(f=Xs(A,Cn()));let U=[];return h.children.inorderTraversal((K,fe)=>{const Ce=f?f.getImmediateChild(K):null,xe=Jt(E,K),gt=g.operationForChild(K);gt&&(U=U.concat(re(gt,fe,Ce,xe)))}),A&&(U=U.concat(es(A,g,E,f))),U}function ce(g,h){const f=h.query,E=Ve(g,f);return{hashFn:()=>(function ru(g){return g.viewCache_.serverCache.getNode()}(h)||xn.EMPTY_NODE).hash(),onComplete:A=>{if("ok"===A)return E?function us(g,h,f){const E=qt(g,f);if(E){const A=Zt(E),U=A.path,K=A.queryId,fe=Lr(U,h);return nr(g,U,new ho(ca(K),fe))}return[]}(g,f._path,E):function ma(g,h){return N(g,new ho({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h))}(g,f._path);{const U=function zr(g,h){let f="Unknown Error";"too_big"===g?f="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===g?f="Client doesn't have permission to access the desired data.":"unavailable"===g&&(f="The service is unavailable");const E=new Error(g+" at "+h._path.toString()+": "+f);return E.code=g.toUpperCase(),E}(A,f);return ya(g,f,null,U)}}}}function Ve(g,h){const f=Dt(h);return g.queryToTagMap.get(f)}function Dt(g){return g._path.toString()+"$"+g._queryIdentifier}function qt(g,h){return g.tagToQueryMap.get(h)}function Zt(g){const h=g.indexOf("$");return(0,V.hu)(-1!==h&&h<g.length-1,"Bad queryKey."),{queryId:g.substr(h+1),path:new cn(g.substr(0,h))}}function nr(g,h,f){const E=g.syncPointTree_.get(h);return(0,V.hu)(E,"Missing sync point for query tag that we're tracking"),es(E,f,Lt(g.pendingWriteTree_,h),null)}function _s(g){return g._queryParams.loadsAllData()&&!g._queryParams.isDefault()?new(function Gi(){return(0,V.hu)(qo,"Reference.ts has not been loaded"),qo}())(g._repo,g._path):g}class el{constructor(h){this.node_=h}getImmediateChild(h){const f=this.node_.getImmediateChild(h);return new el(f)}node(){return this.node_}}class xa{constructor(h,f){this.syncTree_=h,this.path_=f}getImmediateChild(h){const f=Bn(this.path_,h);return new xa(this.syncTree_,f)}node(){return P(this.syncTree_,this.path_)}}const ul=function(g){return(g=g||{}).timestamp=g.timestamp||(new Date).getTime(),g},xr=function(g,h,f){return g&&"object"==typeof g?((0,V.hu)(".sv"in g,"Unexpected leaf node or priority contents"),"string"==typeof g[".sv"]?hi(g[".sv"],h,f):"object"==typeof g[".sv"]?cl(g[".sv"],h):void(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(g,null,2))):g},hi=function(g,h,f){if("timestamp"===g)return f.timestamp;(0,V.hu)(!1,"Unexpected server value: "+g)},cl=function(g,h,f){g.hasOwnProperty("increment")||(0,V.hu)(!1,"Unexpected server value: "+JSON.stringify(g,null,2));const E=g.increment;"number"!=typeof E&&(0,V.hu)(!1,"Unexpected increment value: "+E);const A=h.node();if((0,V.hu)(null!==A&&typeof A<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!A.isLeafNode())return E;const K=A.getValue();return"number"!=typeof K?E:K+E},dl=function(g,h,f,E){return fl(h,new xa(f,g),E)},hl=function(g,h,f){return fl(g,new el(h),f)};function fl(g,h,f){const E=g.getPriority().val(),A=xr(E,h.getImmediateChild(".priority"),f);let U;if(g.isLeafNode()){const K=g,fe=xr(K.getValue(),h,f);return fe!==K.getValue()||A!==K.getPriority().val()?new Fs(fe,Fr(A)):g}{const K=g;return U=K,A!==K.getPriority().val()&&(U=U.updatePriority(new Fs(A))),K.forEachChild(Br,(fe,Ce)=>{const xe=fl(Ce,h.getImmediateChild(fe),f);xe!==Ce&&(U=U.updateImmediateChild(fe,xe))}),U}}class _a{constructor(h="",f=null,E={children:{},childCount:0}){this.name=h,this.parent=f,this.node=E}}function bl(g,h){let f=h instanceof cn?h:new cn(h),E=g,A=fn(f);for(;null!==A;){const U=(0,V.DV)(E.node.children,A)||{children:{},childCount:0};E=new _a(A,E,U),f=mr(f),A=fn(f)}return E}function Zo(g){return g.node.value}function Al(g,h){g.node.value=h,Ea(g)}function Fu(g){return g.node.childCount>0}function va(g,h){$t(g.node.children,(f,E)=>{h(new _a(f,g,E))})}function su(g,h,f,E){f&&!E&&h(g),va(g,A=>{su(A,h,!0,E)}),f&&E&&h(g)}function ja(g){return new cn(null===g.parent?g.name:ja(g.parent)+"/"+g.name)}function Ea(g){null!==g.parent&&function Ml(g,h,f){const E=function pl(g){return void 0===Zo(g)&&!Fu(g)}(f),A=(0,V.r3)(g.node.children,h);E&&A?(delete g.node.children[h],g.node.childCount--,Ea(g)):!E&&!A&&(g.node.children[h]=f.node,g.node.childCount++,Ea(g))}(g.parent,g.name,g)}const Xo=/[\[\].#$\/\u0000-\u001F\u007F]/,nc=/[\[\].#$\u0000-\u001F\u007F]/,Mi=10485760,tl=function(g){return"string"==typeof g&&0!==g.length&&!Xo.test(g)},Hs=function(g){return"string"==typeof g&&0!==g.length&&!nc.test(g)},Gl=function(g){return null===g||"string"==typeof g||"number"==typeof g&&!Xe(g)||g&&"object"==typeof g&&(0,V.r3)(g,".sv")},Ps=function(g,h,f,E){E&&void 0===h||ts((0,V.gK)(g,"value"),h,f)},ts=function(g,h,f){const E=f instanceof cn?new Ge(f,g):f;if(void 0===h)throw new Error(g+"contains undefined "+dn(E));if("function"==typeof h)throw new Error(g+"contains a function "+dn(E)+" with contents = "+h.toString());if(Xe(h))throw new Error(g+"contains "+h.toString()+" "+dn(E));if("string"==typeof h&&h.length>Mi/3&&(0,V.ug)(h)>Mi)throw new Error(g+"contains a string greater than "+Mi+" utf8 bytes "+dn(E)+" ('"+h.substring(0,50)+"...')");if(h&&"object"==typeof h){let A=!1,U=!1;if($t(h,(K,fe)=>{if(".value"===K)A=!0;else if(".priority"!==K&&".sv"!==K&&(U=!0,!tl(K)))throw new Error(g+" contains an invalid key ("+K+") "+dn(E)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function dt(g,h){g.parts_.length>0&&(g.byteLength_+=1),g.parts_.push(h),g.byteLength_+=(0,V.ug)(h),jt(g)})(E,K),ts(g,fe,E),function Vt(g){const h=g.parts_.pop();g.byteLength_-=(0,V.ug)(h),g.parts_.length>0&&(g.byteLength_-=1)}(E)}),A&&U)throw new Error(g+' contains ".value" child '+dn(E)+" in addition to actual children.")}},Eu=function(g,h,f,E){if(E&&void 0===h)return;const A=(0,V.gK)(g,"values");if(!h||"object"!=typeof h||Array.isArray(h))throw new Error(A+" must be an object containing the children to replace.");const U=[];$t(h,(K,fe)=>{const Ce=new cn(K);if(ts(A,fe,Bn(f,Ce)),".priority"===wr(Ce)&&!Gl(fe))throw new Error(A+"contains an invalid value for '"+Ce.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");U.push(Ce)}),function(g,h){let f,E;for(f=0;f<h.length;f++){E=h[f];const U=Yi(E);for(let K=0;K<U.length;K++)if((".priority"!==U[K]||K!==U.length-1)&&!tl(U[K]))throw new Error(g+"contains an invalid key ("+U[K]+") in path "+E.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}h.sort(Ds);let A=null;for(f=0;f<h.length;f++){if(E=h[f],null!==A&&nt(A,E))throw new Error(g+"contains a path "+A.toString()+" that is ancestor of another path "+E.toString());A=E}}(A,U)},nl=function(g,h,f,E){if(!(E&&void 0===f||Hs(f)))throw new Error((0,V.gK)(g,h)+'was an invalid path = "'+f+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gl=function(g,h,f,E){f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),nl(g,h,f,E)},Do=function(g,h){if(".info"===fn(h))throw new Error(g+" failed = Can't modify data under /.info/")},rl=function(g,h){const f=h.path.toString();if("string"!=typeof h.repoInfo.host||0===h.repoInfo.host.length||!tl(h.repoInfo.namespace)&&"localhost"!==h.repoInfo.host.split(":")[0]||0!==f.length&&!function(g){return g&&(g=g.replace(/^\/*\.info(\/|$)/,"/")),Hs(g)}(f))throw new Error((0,V.gK)(g,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ml{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Pl(g,h){let f=null;for(let E=0;E<h.length;E++){const A=h[E],U=A.getPath();null!==f&&!_e(U,f.path)&&(g.eventLists_.push(f),f=null),null===f&&(f={events:[],path:U}),f.events.push(A)}f&&g.eventLists_.push(f)}function ku(g,h,f){Pl(g,f),Uu(g,E=>_e(E,h))}function Ui(g,h,f){Pl(g,f),Uu(g,E=>nt(E,h)||nt(h,E))}function Uu(g,h){g.recursionDepth_++;let f=!0;for(let E=0;E<g.eventLists_.length;E++){const A=g.eventLists_[E];A&&(h(A.path)?(Ol(g.eventLists_[E]),g.eventLists_[E]=null):f=!1)}f&&(g.eventLists_=[]),g.recursionDepth_--}function Ol(g){for(let h=0;h<g.events.length;h++){const f=g.events[h];if(null!==f){g.events[h]=null;const E=f.getEventRunner();$e&&Me("event: "+f.toString()),at(E)}}}const Vu="repo_interrupt",zl=25;class Kl{constructor(h,f,E,A){this.repoInfo_=h,this.forceRestClient_=f,this.authTokenProvider_=E,this.appCheckProvider_=A,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ml,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oe(),this.transactionQueueTree_=new _a,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ha(g){const f=g.infoData_.getNode(new cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+f}function ns(g){return ul({timestamp:Ha(g)})}function Yl(g,h,f,E,A){g.dataUpdateCount++;const U=new cn(h);f=g.interceptServerDataCallback_?g.interceptServerDataCallback_(h,f):f;let K=[];if(A)if(E){const Ce=(0,V.UI)(f,xe=>Fr(xe));K=function di(g,h,f,E){const A=qt(g,E);if(A){const U=Zt(A),K=U.path,fe=U.queryId,Ce=Lr(K,h),xe=ii.fromObject(f);return nr(g,K,new Ti(ca(fe),Ce,xe))}return[]}(g.serverSyncTree_,U,Ce,A)}else{const Ce=Fr(f);K=cs(g.serverSyncTree_,U,Ce,A)}else if(E){const Ce=(0,V.UI)(f,xe=>Fr(xe));K=function Ba(g,h,f){const E=ii.fromObject(f);return N(g,new Ti({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h,E))}(g.serverSyncTree_,U,Ce)}else{const Ce=Fr(f);K=Va(g.serverSyncTree_,U,Ce)}let fe=U;K.length>0&&(fe=_l(g,U)),Ui(g.eventQueue_,fe,K)}function Io(g,h){ko(g,"connected",h),!1===h&&function lu(g){Uo(g,"onDisconnectEvents");const h=ns(g),f=oe();Zr(g.onDisconnect_,Cn(),(A,U)=>{const K=dl(A,U,g.serverSyncTree_,h);tt(f,A,K)});let E=[];Zr(f,Cn(),(A,U)=>{E=E.concat(Va(g.serverSyncTree_,A,U));const K=v(g,A);_l(g,K)}),g.onDisconnect_=oe(),Ui(g.eventQueue_,Cn(),E)}(g)}function ko(g,h,f){const E=new cn("/.info/"+h),A=Fr(f);g.infoData_.updateSnapshot(E,A);const U=Va(g.infoSyncTree_,E,A);Ui(g.eventQueue_,E,U)}function Rl(g){return g.nextWriteId_++}function uu(g,h,f){g.server_.onDisconnectCancel(h.toString(),(E,A)=>{"ok"===E&&sn(g.onDisconnect_,h),Da(0,f,E,A)})}function Iu(g,h,f,E){const A=Fr(f);g.server_.onDisconnectPut(h.toString(),A.val(!0),(U,K)=>{"ok"===U&&tt(g.onDisconnect_,h,A),Da(0,E,U,K)})}function ju(g,h,f){let E;E=".info"===fn(h._path)?ya(g.infoSyncTree_,h,f):ya(g.serverSyncTree_,h,f),ku(g.eventQueue_,h._path,E)}function Uo(g,...h){let f="";g.persistentConnection_&&(f=g.persistentConnection_.id+":"),Me(f,...h)}function Da(g,h,f,E){h&&at(()=>{if("ok"===f)h(null);else{const A=(f||"error").toUpperCase();let U=A;E&&(U+=": "+E);const K=new Error(U);K.code=A,h(K)}})}function il(g,h,f){return P(g.serverSyncTree_,h,f)||xn.EMPTY_NODE}function Ia(g,h=g.transactionQueueTree_){if(h||c(g,h),Zo(h)){const f=a(g,h);(0,V.hu)(f.length>0,"Sending zero length transaction queue"),f.every(A=>0===A.status)&&function ql(g,h,f){const E=f.map(xe=>xe.currentWriteId),A=il(g,h,E);let U=A;const K=A.hash();for(let xe=0;xe<f.length;xe++){const gt=f[xe];(0,V.hu)(0===gt.status,"tryToSendTransactionQueue_: items in queue should all be run."),gt.status=1,gt.retryCount++;const _t=Lr(h,gt.path);U=U.updateChild(_t,gt.currentOutputSnapshotRaw)}const fe=U.val(!0),Ce=h;g.server_.put(Ce.toString(),fe,xe=>{Uo(g,"transaction put response",{path:Ce.toString(),status:xe});let gt=[];if("ok"===xe){const _t=[];for(let Tt=0;Tt<f.length;Tt++)f[Tt].status=2,gt=gt.concat(Fo(g.serverSyncTree_,f[Tt].currentWriteId)),f[Tt].onComplete&&_t.push(()=>f[Tt].onComplete(null,!0,f[Tt].currentOutputSnapshotResolved)),f[Tt].unwatcher();c(g,bl(g.transactionQueueTree_,h)),Ia(g,g.transactionQueueTree_),Ui(g.eventQueue_,h,gt);for(let Tt=0;Tt<_t.length;Tt++)at(_t[Tt])}else{if("datastale"===xe)for(let _t=0;_t<f.length;_t++)f[_t].status=3===f[_t].status?4:0;else{Ot("transaction at "+Ce.toString()+" failed: "+xe);for(let _t=0;_t<f.length;_t++)f[_t].status=4,f[_t].abortReason=xe}_l(g,h)}},K)}(g,ja(h),f)}else Fu(h)&&va(h,f=>{Ia(g,f)})}function _l(g,h){const f=O(g,h),E=ja(f);return function xl(g,h,f){if(0===h.length)return;const E=[];let A=[];const K=h.filter(fe=>0===fe.status).map(fe=>fe.currentWriteId);for(let fe=0;fe<h.length;fe++){const Ce=h[fe],xe=Lr(f,Ce.path);let _t,gt=!1;if((0,V.hu)(null!==xe,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Ce.status)gt=!0,_t=Ce.abortReason,A=A.concat(Fo(g.serverSyncTree_,Ce.currentWriteId,!0));else if(0===Ce.status)if(Ce.retryCount>=zl)gt=!0,_t="maxretry",A=A.concat(Fo(g.serverSyncTree_,Ce.currentWriteId,!0));else{const Tt=il(g,Ce.path,K);Ce.currentInputSnapshot=Tt;const _n=h[fe].update(Tt.val());if(void 0!==_n){ts("transaction failed: Data returned ",_n,Ce.path);let zn=Fr(_n);"object"==typeof _n&&null!=_n&&(0,V.r3)(_n,".priority")||(zn=zn.updatePriority(Tt.getPriority()));const To=Ce.currentWriteId,fu=ns(g),$s=hl(zn,Tt,fu);Ce.currentOutputSnapshotRaw=zn,Ce.currentOutputSnapshotResolved=$s,Ce.currentWriteId=Rl(g),K.splice(K.indexOf(To),1),A=A.concat(gi(g.serverSyncTree_,Ce.path,$s,Ce.currentWriteId,Ce.applyLocally)),A=A.concat(Fo(g.serverSyncTree_,To,!0))}else gt=!0,_t="nodata",A=A.concat(Fo(g.serverSyncTree_,Ce.currentWriteId,!0))}Ui(g.eventQueue_,f,A),A=[],gt&&(h[fe].status=2,setTimeout(h[fe].unwatcher,Math.floor(0)),h[fe].onComplete&&E.push("nodata"===_t?()=>h[fe].onComplete(null,!1,h[fe].currentInputSnapshot):()=>h[fe].onComplete(new Error(_t),!1,null)))}c(g,g.transactionQueueTree_);for(let fe=0;fe<E.length;fe++)at(E[fe]);Ia(g,g.transactionQueueTree_)}(g,a(g,f),E),E}function O(g,h){let f,E=g.transactionQueueTree_;for(f=fn(h);null!==f&&void 0===Zo(E);)E=bl(E,f),f=fn(h=mr(h));return E}function a(g,h){const f=[];return l(g,h,f),f.sort((E,A)=>E.order-A.order),f}function l(g,h,f){const E=Zo(h);if(E)for(let A=0;A<E.length;A++)f.push(E[A]);va(h,A=>{l(g,A,f)})}function c(g,h){const f=Zo(h);if(f){let E=0;for(let A=0;A<f.length;A++)2!==f[A].status&&(f[E]=f[A],E++);f.length=E,Al(h,f.length>0?f:void 0)}va(h,E=>{c(g,E)})}function v(g,h){const f=ja(O(g,h)),E=bl(g.transactionQueueTree_,h);return function vu(g,h,f){let E=f?g:g.parent;for(;null!==E;){if(h(E))return!0;E=E.parent}}(E,A=>{b(g,A)}),b(g,E),su(E,A=>{b(g,A)}),f}function b(g,h){const f=Zo(h);if(f){const E=[];let A=[],U=-1;for(let K=0;K<f.length;K++)3===f[K].status||(1===f[K].status?((0,V.hu)(U===K-1,"All SENT items should be at beginning of queue."),U=K,f[K].status=3,f[K].abortReason="set"):((0,V.hu)(0===f[K].status,"Unexpected transaction status in abort"),f[K].unwatcher(),A=A.concat(Fo(g.serverSyncTree_,f[K].currentWriteId,!0)),f[K].onComplete&&E.push(f[K].onComplete.bind(null,new Error("set"),!1,null))));-1===U?Al(h,void 0):f.length=U+1,Ui(g.eventQueue_,ja(h),A);for(let K=0;K<E.length;K++)at(E[K])}}const ge=function(g,h){const f=be(g),E=f.namespace;return"firebase.com"===f.domain&&Ye(f.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!E||"undefined"===E)&&"localhost"!==f.domain&&Ye("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),f.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ot("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new rn(f.host,f.secure,E,"ws"===f.scheme||"wss"===f.scheme,h,"",E!==f.subdomain),path:new cn(f.pathString)}},be=function(g){let h="",f="",E="",A="",U="",K=!0,fe="https",Ce=443;if("string"==typeof g){let xe=g.indexOf("//");xe>=0&&(fe=g.substring(0,xe-1),g=g.substring(xe+2));let gt=g.indexOf("/");-1===gt&&(gt=g.length);let _t=g.indexOf("?");-1===_t&&(_t=g.length),h=g.substring(0,Math.min(gt,_t)),gt<_t&&(A=function H(g){let h="";const f=g.split("/");for(let E=0;E<f.length;E++)if(f[E].length>0){let A=f[E];try{A=decodeURIComponent(A.replace(/\+/g," "))}catch{}h+="/"+A}return h}(g.substring(gt,_t)));const Tt=function ne(g){const h={};"?"===g.charAt(0)&&(g=g.substring(1));for(const f of g.split("&")){if(0===f.length)continue;const E=f.split("=");2===E.length?h[decodeURIComponent(E[0])]=decodeURIComponent(E[1]):Ot(`Invalid query segment '${f}' in query '${g}'`)}return h}(g.substring(Math.min(g.length,_t)));xe=h.indexOf(":"),xe>=0?(K="https"===fe||"wss"===fe,Ce=parseInt(h.substring(xe+1),10)):xe=h.length;const _n=h.slice(0,xe);if("localhost"===_n.toLowerCase())f="localhost";else if(_n.split(".").length<=2)f=_n;else{const zn=h.indexOf(".");E=h.substring(0,zn).toLowerCase(),f=h.substring(zn+1),U=E}"ns"in Tt&&(U=Tt.ns)}return{host:h,port:Ce,domain:f,subdomain:E,secure:K,scheme:fe,pathString:A,namespace:U}},We="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",mt=function(){let g=0;const h=[];return function(f){const E=f===g;let A;g=f;const U=new Array(8);for(A=7;A>=0;A--)U[A]=We.charAt(f%64),f=Math.floor(f/64);(0,V.hu)(0===f,"Cannot push at time == 0");let K=U.join("");if(E){for(A=11;A>=0&&63===h[A];A--)h[A]=0;h[A]++}else for(A=0;A<12;A++)h[A]=Math.floor(64*Math.random());for(A=0;A<12;A++)K+=We.charAt(h[A]);return(0,V.hu)(20===K.length,"nextPushId: Length should be 20."),K}}();class Ht{constructor(h,f,E,A){this.eventType=h,this.eventRegistration=f,this.snapshot=E,this.prevName=A}getPath(){const h=this.snapshot.ref;return"value"===this.eventType?h._path:h.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,V.Wl)(this.snapshot.exportVal())}}class Dn{constructor(h,f,E){this.eventRegistration=h,this.error=f,this.path=E}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class wn{constructor(h,f){this.snapshotCallback=h,this.cancelCallback=f}onValue(h,f){this.snapshotCallback.call(null,h,f)}onCancel(h){return(0,V.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,h)}get hasCancelCallback(){return!!this.cancelCallback}matches(h){return this.snapshotCallback===h.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===h.snapshotCallback.userCallback&&this.snapshotCallback.context===h.snapshotCallback.context}}class tn{constructor(h,f){this._repo=h,this._path=f}cancel(){const h=new V.BH;return uu(this._repo,this._path,h.wrapCallback(()=>{})),h.promise}remove(){Do("OnDisconnect.remove",this._path);const h=new V.BH;return Iu(this._repo,this._path,null,h.wrapCallback(()=>{})),h.promise}set(h){Do("OnDisconnect.set",this._path),Ps("OnDisconnect.set",h,this._path,!1);const f=new V.BH;return Iu(this._repo,this._path,h,f.wrapCallback(()=>{})),f.promise}setWithPriority(h,f){Do("OnDisconnect.setWithPriority",this._path),Ps("OnDisconnect.setWithPriority",h,this._path,!1),function(g,h,f){if(!f||void 0!==h){if(Xe(h))throw new Error((0,V.gK)(g,"priority")+"is "+h.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Gl(h))throw new Error((0,V.gK)(g,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}("OnDisconnect.setWithPriority",f,!1);const E=new V.BH;return function Bu(g,h,f,E,A){const U=Fr(f,E);g.server_.onDisconnectPut(h.toString(),U.val(!0),(K,fe)=>{"ok"===K&&tt(g.onDisconnect_,h,U),Da(0,A,K,fe)})}(this._repo,this._path,h,f,E.wrapCallback(()=>{})),E.promise}update(h){Do("OnDisconnect.update",this._path),Eu("OnDisconnect.update",h,this._path,!1);const f=new V.BH;return function cu(g,h,f,E){if((0,V.xb)(f))return Me("onDisconnect().update() called with empty data.  Don't do anything."),void Da(0,E,"ok",void 0);g.server_.onDisconnectMerge(h.toString(),f,(A,U)=>{"ok"===A&&$t(f,(K,fe)=>{const Ce=Fr(fe);tt(g.onDisconnect_,Bn(h,K),Ce)}),Da(0,E,A,U)})}(this._repo,this._path,h,f.wrapCallback(()=>{})),f.promise}}class yn{constructor(h,f,E,A){this._repo=h,this._path=f,this._queryParams=E,this._orderByCalled=A}get key(){return Rn(this._path)?null:wr(this._path)}get ref(){return new Di(this._repo,this._path)}get _queryIdentifier(){const h=j(this._queryParams),f=Jn(h);return"{}"===f?"default":f}get _queryObject(){return j(this._queryParams)}isEqual(h){if(!((h=(0,V.m9)(h))instanceof yn))return!1;const f=this._repo===h._repo,E=_e(this._path,h._path);return f&&E&&this._queryIdentifier===h._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ki(g){let h="";for(let f=g.pieceNum_;f<g.pieces_.length;f++)""!==g.pieces_[f]&&(h+="/"+encodeURIComponent(String(g.pieces_[f])));return h||"/"}(this._path)}}class Di extends yn{constructor(h,f){super(h,f,new Sr,!1)}get parent(){const h=Vn(this._path);return null===h?null:new Di(this._repo,h)}get root(){let h=this;for(;null!==h.parent;)h=h.parent;return h}}class Oi{constructor(h,f,E){this._node=h,this.ref=f,this._index=E}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(h){const f=new cn(h),E=jr(this.ref,h);return new Oi(this._node.getChild(f),E,Br)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(h){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(E,A)=>h(new Oi(A,jr(this.ref,E),Br)))}hasChild(h){const f=new cn(h);return!this._node.getChild(f).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function eo(g,h){return(g=(0,V.m9)(g))._checkNotDeleted("ref"),void 0!==h?jr(g._root,h):g._root}function jr(g,h){return null===fn((g=(0,V.m9)(g))._path)?gl("child","path",h,!1):nl("child","path",h,!1),new Di(g._repo,Bn(g._path,h))}function Jo(g){return g=(0,V.m9)(g),new tn(g._repo,g._path)}function Co(g,h){g=(0,V.m9)(g),Do("push",g._path),Ps("push",h,g._path,!0);const f=Ha(g._repo),E=mt(f),A=jr(g,E),U=jr(g,E);let K;return K=null!=h?ea(U,h).then(()=>U):Promise.resolve(U),A.then=K.then.bind(K),A.catch=K.then.bind(K,void 0),A}function La(g){return Do("remove",g._path),ea(g,null)}function ea(g,h){g=(0,V.m9)(g),Do("set",g._path),Ps("set",h,g._path,!1);const f=new V.BH;return function ou(g,h,f,E,A){Uo(g,"set",{path:h.toString(),value:f,priority:E});const U=ns(g),K=Fr(f,E),fe=P(g.serverSyncTree_,h),Ce=hl(K,fe,U),xe=Rl(g),gt=gi(g.serverSyncTree_,h,Ce,xe,!0);Pl(g.eventQueue_,gt),g.server_.put(h.toString(),K.val(!0),(Tt,_n)=>{const zn="ok"===Tt;zn||Ot("set at "+h+" failed: "+Tt);const Ii=Fo(g.serverSyncTree_,xe,!zn);Ui(g.eventQueue_,h,Ii),Da(0,A,Tt,_n)});const _t=v(g,h);_l(g,_t),Ui(g.eventQueue_,_t,[])}(g._repo,g._path,h,null,f.wrapCallback(()=>{})),f.promise}function kc(g,h){Eu("update",h,g._path,!1);const f=new V.BH;return function au(g,h,f,E){Uo(g,"update",{path:h.toString(),value:f});let A=!0;const U=ns(g),K={};if($t(f,(fe,Ce)=>{A=!1,K[fe]=dl(Bn(h,fe),Fr(Ce),g.serverSyncTree_,U)}),A)Me("update() called with empty data.  Don't do anything."),Da(0,E,"ok",void 0);else{const fe=Rl(g),Ce=function ll(g,h,f,E){!function Qo(g,h,f,E){(0,V.hu)(E>g.lastWriteId,"Stacking an older merge on top of newer ones"),g.allWrites.push({path:h,children:f,writeId:E,visible:!0}),g.visibleWrites=ba(g.visibleWrites,h,f),g.lastWriteId=E}(g.pendingWriteTree_,h,f,E);const A=ii.fromObject(f);return N(g,new Ti({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},h,A))}(g.serverSyncTree_,h,K,fe);Pl(g.eventQueue_,Ce),g.server_.merge(h.toString(),f,(xe,gt)=>{const _t="ok"===xe;_t||Ot("update at "+h+" failed: "+xe);const Tt=Fo(g.serverSyncTree_,fe,!_t),_n=Tt.length>0?_l(g,h):h;Ui(g.eventQueue_,_n,Tt),Da(0,E,xe,gt)}),$t(f,xe=>{const gt=v(g,Bn(h,xe));_l(g,gt)}),Ui(g.eventQueue_,h,[])}}(g._repo,g._path,h,f.wrapCallback(()=>{})),f.promise}function ic(g){g=(0,V.m9)(g);const h=new wn(()=>{}),f=new Ft(h);return function Ql(g,h,f){const E=function w(g,h){const f=h._path;let E=null;g.syncPointTree_.foreachOnPath(f,(xe,gt)=>{const _t=Lr(xe,f);E=E||Xs(gt,_t)});let A=g.syncPointTree_.get(f);A?E=E||Xs(A,Cn()):(A=new Xa,g.syncPointTree_=g.syncPointTree_.set(f,A));const U=null!=E,K=U?new ri(E,!0,!1):null;return function Hl(g){return Zi(g.viewCache_)}(Oa(A,h,Lt(g.pendingWriteTree_,h._path),U?K.getNode():xn.EMPTY_NODE,U))}(g.serverSyncTree_,h);return null!=E?Promise.resolve(E):g.server_.get(h).then(A=>{const U=Fr(A).withIndex(h._queryParams.getIndex());let K;if(S(g.serverSyncTree_,h,f,!0),h._queryParams.loadsAllData())K=Va(g.serverSyncTree_,h._path,U);else{const fe=Ve(g.serverSyncTree_,h);K=cs(g.serverSyncTree_,h._path,U,fe)}return Ui(g.eventQueue_,h._path,K),ya(g.serverSyncTree_,h,f,null,!0),U},A=>(Uo(g,"get for query "+(0,V.Wl)(h)+" failed: "+A),Promise.reject(new Error(A))))}(g._repo,g,f).then(E=>new Oi(E,new Di(g._repo,g._path),g._queryParams.getIndex()))}class Ft{constructor(h){this.callbackContext=h}respondsTo(h){return"value"===h}createEvent(h,f){const E=f._queryParams.getIndex();return new Ht("value",this,new Oi(h.snapshotNode,new Di(f._repo,f._path),E))}getEventRunner(h){return"cancel"===h.getEventType()?()=>this.callbackContext.onCancel(h.error):()=>this.callbackContext.onValue(h.snapshot,null)}createCancelEvent(h,f){return this.callbackContext.hasCancelCallback?new Dn(this,h,f):null}matches(h){return h instanceof Ft&&(!h.callbackContext||!this.callbackContext||h.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Sn{constructor(h,f){this.eventType=h,this.callbackContext=f}respondsTo(h){let f="children_added"===h?"child_added":h;return f="children_removed"===f?"child_removed":f,this.eventType===f}createCancelEvent(h,f){return this.callbackContext.hasCancelCallback?new Dn(this,h,f):null}createEvent(h,f){(0,V.hu)(null!=h.childName,"Child events should have a childName.");const E=jr(new Di(f._repo,f._path),h.childName),A=f._queryParams.getIndex();return new Ht(h.type,this,new Oi(h.snapshotNode,E,A),h.prevName)}getEventRunner(h){return"cancel"===h.getEventType()?()=>this.callbackContext.onCancel(h.error):()=>this.callbackContext.onValue(h.snapshot,h.prevName)}matches(h){return h instanceof Sn&&this.eventType===h.eventType&&(!this.callbackContext||!h.callbackContext||this.callbackContext.matches(h.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Pr(g,h,f,E){return function Fn(g,h,f,E,A){let U;if("object"==typeof E&&(U=void 0,A=E),"function"==typeof E&&(U=E),A&&A.onlyOnce){const Ce=f,xe=(gt,_t)=>{ju(g._repo,g,fe),Ce(gt,_t)};xe.userCallback=f.userCallback,xe.context=f.context,f=xe}const K=new wn(f,U||void 0),fe="value"===h?new Ft(K):new Sn(h,K);return function rc(g,h,f){let E;E=".info"===fn(h._path)?S(g.infoSyncTree_,h,f):S(g.serverSyncTree_,h,f),ku(g.eventQueue_,h._path,E)}(g._repo,g,fe),()=>ju(g._repo,g,fe)}(g,"value",h,f,E)}function Vi(g,h,f){let E=null;const A=f?new wn(f):null;"value"===h?E=new Ft(A):h&&(E=new Sn(h,A)),ju(g._repo,g,E)}(function xo(g){(0,V.hu)(!ls,"__referenceConstructor has already been defined"),ls=g})(Di),function ka(g){(0,V.hu)(!qo,"__referenceConstructor has already been defined"),qo=g}(Di);const Od="FIREBASE_DATABASE_EMULATOR_HOST",ac={};let Rd=!1;class vh{constructor(h,f){this._repoInternal=h,this.app=f,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Du(g,h,f){if(g.stats_=vr(g.repoInfo_),g.forceRestClient_||Fe())g.server_=new B(g.repoInfo_,(E,A,U,K)=>{Yl(g,E,A,U,K)},g.authTokenProvider_,g.appCheckProvider_),setTimeout(()=>Io(g,!0),0);else{if(typeof f<"u"&&null!==f){if("object"!=typeof f)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,V.Wl)(f)}catch(E){throw new Error("Invalid authOverride provided: "+E)}}g.persistentConnection_=new li(g.repoInfo_,h,(E,A,U,K)=>{Yl(g,E,A,U,K)},E=>{Io(g,E)},E=>{!function yl(g,h){$t(h,(f,E)=>{ko(g,f,E)})}(g,E)},g.authTokenProvider_,g.appCheckProvider_,f),g.server_=g.persistentConnection_}g.authTokenProvider_.addTokenChangeListener(E=>{g.server_.refreshAuthToken(E)}),g.appCheckProvider_.addTokenChangeListener(E=>{g.server_.refreshAppCheckToken(E.token)}),g.statsReporter_=function ni(g,h){const f=g.toString();return ti[f]||(ti[f]=h()),ti[f]}(g.repoInfo_,()=>new wa(g.stats_,g.server_)),g.infoData_=new F,g.infoSyncTree_=new Ua({startListening:(E,A,U,K)=>{let fe=[];const Ce=g.infoData_.getNode(E._path);return Ce.isEmpty()||(fe=Va(g.infoSyncTree_,E._path,Ce),setTimeout(()=>{K("ok")},0)),fe},stopListening:()=>{}}),ko(g,"connected",!1),g.serverSyncTree_=new Ua({startListening:(E,A,U,K)=>(g.server_.listen(E,U,A,(fe,Ce)=>{const xe=K(fe,Ce);Ui(g.eventQueue_,E._path,xe)}),[]),stopListening:(E,A)=>{g.server_.unlisten(E,A)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Di(this._repo,Cn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function xd(g,h){const f=ac[h];(!f||f[g.key]!==g)&&Ye(`Database ${h}(${g.repoInfo_}) has already been deleted.`),function vs(g){g.persistentConnection_&&g.persistentConnection_.interrupt(Vu)}(g),delete f[g.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(h){null===this._rootInternal&&Ye("Cannot call "+h+" on a deleted database.")}}function Eh(g=(0,C.Mq)(),h){const f=(0,C.qX)(g,"database").getImmediate({identifier:h});if(!f._instanceStarted){const E=(0,V.P0)("database");E&&function _f(g,h,f,E={}){(g=(0,V.m9)(g))._checkNotDeleted("useEmulator"),g._instanceStarted&&Ye("Cannot call useEmulator() after instance has already been initialized.");const A=g._repoInternal;let U;if(A.repoInfo_.nodeAdmin)E.mockUserToken&&Ye('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),U=new Kn(Kn.OWNER);else if(E.mockUserToken){const K="string"==typeof E.mockUserToken?E.mockUserToken:(0,V.Sg)(E.mockUserToken,g.app.options.projectId);U=new Kn(K)}!function jc(g,h,f,E){g.repoInfo_=new rn(`${h}:${f}`,!1,g.repoInfo_.namespace,g.repoInfo_.webSocketOnly,g.repoInfo_.nodeAdmin,g.repoInfo_.persistenceKey,g.repoInfo_.includeNamespaceInQueryParams,!0),E&&(g.authTokenProvider_=E)}(A,h,f,U)}(f,...E)}return f}const kl={".sv":"timestamp"};function Ih(){return kl}function Hc(g){return{".sv":{increment:g}}}li.prototype.simpleListen=function(g,h){this.sendRequest("q",{p:g},h)},li.prototype.echo=function(g,h){this.sendRequest("echo",{d:g},h)},function Dh(g){(function ee(g){W=g})(C.Jn),(0,C.Xd)(new J.wA("database",(h,{instanceIdentifier:f})=>function lc(g,h,f,E,A){let U=E||g.options.databaseURL;void 0===U&&(g.options.projectId||Ye("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Me("Using default host for project ",g.options.projectId),U=`${g.options.projectId}-default-rtdb.firebaseio.com`);let Ce,xe,K=ge(U,A),fe=K.repoInfo;typeof process<"u"&&process.env&&(xe=process.env[Od]),xe?(Ce=!0,U=`http://${xe}?ns=${fe.namespace}`,K=ge(U,A),fe=K.repoInfo):Ce=!K.repoInfo.secure;const gt=A&&Ce?new Kn(Kn.OWNER):new kn(g.name,g.options,h);rl("Invalid Firebase Database URL",K),Rn(K.path)||Ye("Database URL must point to the root of a Firebase Database (not including a child path).");const _t=function Nd(g,h,f,E){let A=ac[h.name];A||(A={},ac[h.name]=A);let U=A[g.toURLString()];return U&&Ye("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),U=new Kl(g,Rd,f,E),A[g.toURLString()]=U,U}(fe,g,gt,new Pt(g.name,f));return new vh(_t,g)}(h.getProvider("app").getImmediate(),h.getProvider("auth-internal"),h.getProvider("app-check-internal"),f),"PUBLIC").setMultipleInstances(!0)),(0,C.KN)(te,X,g),(0,C.KN)(te,X,"esm2017")}()},9996:(Ee,se,D)=>{D.d(se,{ET:()=>Zy,hJ:()=>cm,oe:()=>Lc,JU:()=>dm,ST:()=>Bp,Lx:()=>Wy,QT:()=>Hm,kl:()=>$m,PL:()=>Gm,ad:()=>ky,b9:()=>Nm,cf:()=>Xy,Xo:()=>xm,IO:()=>Mm,Bt:()=>Cd,TQ:()=>Lm,r7:()=>Zp});var W,m=D(9671),C=D(6881),J=D(4859),V=D(1877),q=D(2090),te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},X={},ee=ee||{},Y=te||self;function le(){}function he(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Pe(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Ae="closure_uid_"+(1e9*Math.random()>>>0),Ue=0;function ke(i,e,t){return i.call.apply(i.bind,arguments)}function je(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,o),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function $e(i,e,t){return($e=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ke:je).apply(null,arguments)}function Je(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Le(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(o,d,y){for(var I=Array(arguments.length-2),x=2;x<arguments.length;x++)I[x-2]=arguments[x];return e.prototype[d].apply(o,I)}}function Me(){this.s=this.s,this.o=this.o}Me.prototype.s=!1,Me.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function He(i){Object.prototype.hasOwnProperty.call(i,Ae)&&i[Ae]||(i[Ae]=++Ue)}(this)},Me.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Et=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Ye(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function Ot(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(he(o)){const d=i.length||0,y=o.length||0;i.length=d+y;for(let I=0;I<y;I++)i[d+I]=o[I]}else i.push(o)}}function At(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var Xe=function(){if(!Y.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Y.addEventListener("test",le,e),Y.removeEventListener("test",le,e)}catch{}return i}();function Ke(i){return/^[\s\xa0]*$/.test(i)}var ut=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function qe(i,e){return i<e?-1:i>e?1:0}function xt(){var i=Y.navigator;return i&&(i=i.userAgent)?i:""}function It(i){return-1!=xt().indexOf(i)}function hn(i){return hn[" "](i),i}hn[" "]=le;var un,i,on=It("Opera"),$t=It("Trident")||It("MSIE"),On=It("Edge"),gn=On||$t,rr=It("Gecko")&&!(-1!=xt().toLowerCase().indexOf("webkit")&&!It("Edge"))&&!(It("Trident")||It("MSIE"))&&!It("Edge"),zr=-1!=xt().toLowerCase().indexOf("webkit")&&!It("Edge");function bn(){var i=Y.document;return i?i.documentMode:void 0}e:{var ei="",vt=(i=xt(),rr?/rv:([^\);]+)(\)|;)/.exec(i):On?/Edge\/([\d\.]+)/.exec(i):$t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):zr?/WebKit\/(\S+)/.exec(i):on?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(vt&&(ei=vt?vt[1]:""),$t){var at=bn();if(null!=at&&at>parseFloat(ei)){un=String(at);break e}}un=ei}var Fe={};var Kn=Y.document&&$t&&(bn()||parseInt(un,10))||void 0;function Nr(i,e){if(At.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(rr){e:{try{hn(e.nodeName);var d=!0;break e}catch{}d=!1}d||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:zi[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Nr.X.h.call(this)}}Le(Nr,At);var zi={2:"touch",3:"pen",4:"mouse"};Nr.prototype.h=function(){Nr.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var ir="closure_listenable_"+(1e6*Math.random()|0),nn=0;function Ri(i,e,t,o,d){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=d,this.key=++nn,this.ba=this.ea=!1}function Kr(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function Cr(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function br(i){const e={};for(const t in i)e[t]=i[t];return e}const In="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yn(i,e){let t,o;for(let d=1;d<arguments.length;d++){for(t in o=arguments[d],o)i[t]=o[t];for(let y=0;y<In.length;y++)t=In[y],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function sr(i){this.src=i,this.g={},this.h=0}function rn(i,e){var t=e.type;if(t in i.g){var y,o=i.g[t],d=Et(o,e);(y=0<=d)&&Array.prototype.splice.call(o,d,1),y&&(Kr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Yt(i,e,t,o){for(var d=0;d<i.length;++d){var y=i[d];if(!y.ba&&y.listener==e&&y.capture==!!t&&y.ha==o)return d}return-1}sr.prototype.add=function(i,e,t,o,d){var y=i.toString();(i=this.g[y])||(i=this.g[y]=[],this.h++);var I=Yt(i,e,o,d);return-1<I?(e=i[I],t||(e.ea=!1)):((e=new Ri(e,this.src,y,!!o,d)).ea=t,i.push(e)),e};var Qn="closure_lm_"+(1e6*Math.random()|0),mi={};function Ur(i,e,t,o,d){if(o&&o.once)return ni(i,e,t,o,d);if(Array.isArray(e)){for(var y=0;y<e.length;y++)Ur(i,e[y],t,o,d);return null}return t=Yr(t),i&&i[ir]?i.N(e,t,Pe(o)?!!o.capture:!!o,d):ti(i,e,t,!1,o,d)}function ti(i,e,t,o,d,y){if(!e)throw Error("Invalid event type");var I=Pe(d)?!!d.capture:!!d,x=er(i);if(x||(i[Qn]=x=new sr(i)),(t=x.add(e,t,o,I,y)).proxy)return t;if(o=function vr(){const e=Vr;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Xe||(d=I),void 0===d&&(d=!1),i.addEventListener(e.toString(),o,d);else if(i.attachEvent)i.attachEvent(Un(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function ni(i,e,t,o,d){if(Array.isArray(e)){for(var y=0;y<e.length;y++)ni(i,e[y],t,o,d);return null}return t=Yr(t),i&&i[ir]?i.O(e,t,Pe(o)?!!o.capture:!!o,d):ti(i,e,t,!0,o,d)}function or(i,e,t,o,d){if(Array.isArray(e))for(var y=0;y<e.length;y++)or(i,e[y],t,o,d);else o=Pe(o)?!!o.capture:!!o,t=Yr(t),i&&i[ir]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Yt(y=i.g[e],t,o,d))&&(Kr(y[t]),Array.prototype.splice.call(y,t,1),0==y.length&&(delete i.g[e],i.h--))):i&&(i=er(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Yt(e,t,o,d)),(t=-1<i?e[i]:null)&&wi(t))}function wi(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[ir])rn(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(Un(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=er(e))?(rn(t,i),0==t.h&&(t.src=null,e[Qn]=null)):Kr(i)}}}function Un(i){return i in mi?mi[i]:mi[i]="on"+i}function Vr(i,e){if(i.ba)i=!0;else{e=new Nr(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&wi(i),i=t.call(o,e)}return i}function er(i){return(i=i[Qn])instanceof sr?i:null}var yi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yr(i){return"function"==typeof i?i:(i[yi]||(i[yi]=function(e){return i.handleEvent(e)}),i[yi])}function Qe(){Me.call(this),this.i=new sr(this),this.P=this,this.I=null}function Ie(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new At(e,i);else if(e instanceof At)e.target=e.target||i;else{var d=e;Yn(e=new At(o,i),d)}if(d=!0,t)for(var y=t.length-1;0<=y;y--){var I=e.g=t[y];d=Re(I,o,!0,e)&&d}if(d=Re(I=e.g=i,o,!0,e)&&d,d=Re(I,o,!1,e)&&d,t)for(y=0;y<t.length;y++)d=Re(I=e.g=t[y],o,!1,e)&&d}function Re(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,y=0;y<e.length;++y){var I=e[y];if(I&&!I.ba&&I.capture==t){var x=I.listener,G=I.ha||I.src;I.ea&&rn(i.i,I),d=!1!==x.call(G,o)&&d}}return d&&!o.defaultPrevented}Le(Qe,Me),Qe.prototype[ir]=!0,Qe.prototype.removeEventListener=function(i,e,t,o){or(this,i,e,t,o)},Qe.prototype.M=function(){if(Qe.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)Kr(t[o]);delete i.g[e],i.h--}}this.I=null},Qe.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Qe.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var bt=Y.JSON.stringify;function de(){var i=ue;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Bt,De=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new rt,i=>i.reset());class rt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ne(i){Y.setTimeout(()=>{throw i},0)}function Mt(i,e){Bt||function Oe(){var i=Y.Promise.resolve(void 0);Bt=function(){i.then(Se)}}(),we||(Bt(),we=!0),ue.add(i,e)}var we=!1,ue=new class me{constructor(){this.h=this.g=null}add(e,t){const o=De.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Se(){for(var i;i=de();){try{i.h.call(i.g)}catch(t){Ne(t)}var e=De;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}we=!1}function ze(i,e){Qe.call(this),this.h=i||1,this.g=e||Y,this.j=$e(this.lb,this),this.l=Date.now()}function Nt(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function Qt(i,e,t){if("function"==typeof i)t&&(i=$e(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=$e(i.handleEvent,i)}return 2147483647<Number(e)?-1:Y.setTimeout(i,e||0)}function $n(i){i.g=Qt(()=>{i.g=null,i.i&&(i.i=!1,$n(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Le(ze,Qe),(W=ze.prototype).ca=!1,W.R=null,W.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ie(this,"tick"),this.ca&&(Nt(this),this.start()))}},W.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},W.M=function(){ze.X.M.call(this),Nt(this),delete this.g};class pr extends Me{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:$n(this)}M(){super.M(),this.g&&(Y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fi(i){Me.call(this),this.h=i,this.g={}}Le(fi,Me);var ct=[];function Ze(i,e,t,o){Array.isArray(t)||(t&&(ct[0]=t.toString()),t=ct);for(var d=0;d<t.length;d++){var y=Ur(e,t[d],o||i.handleEvent,!1,i.h||i);if(!y)break;i.g[y.key]=y}}function Ct(i){Cr(i.g,function(e,t){this.g.hasOwnProperty(t)&&wi(e)},i),i.g={}}function Wt(){this.g=!0}function en(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ar(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var d=o[1];if(Array.isArray(d)&&!(1>d.length)){var y=d[0];if("noop"!=y&&"stop"!=y&&"close"!=y)for(var I=1;I<d.length;I++)d[I]=""}}}return bt(t)}catch{return e}}(i,t)+(o?" "+o:"")})}fi.prototype.M=function(){fi.X.M.call(this),Ct(this)},fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wt.prototype.Aa=function(){this.g=!1},Wt.prototype.info=function(){};var oi={},Ar=null;function Ns(){return Ar=Ar||new Qe}function Ls(i){At.call(this,oi.Pa,i)}function pi(i){const e=Ns();Ie(e,new Ls(e))}function Mr(i,e){At.call(this,oi.STAT_EVENT,i),this.stat=e}function Rt(i){const e=Ns();Ie(e,new Mr(e,i))}function Mn(i,e){At.call(this,oi.Qa,i),this.size=e}function cn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Y.setTimeout(function(){i()},e)}oi.Pa="serverreachability",Le(Ls,At),oi.STAT_EVENT="statevent",Le(Mr,At),oi.Qa="timingevent",Le(Mn,At);var Cn={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},fn={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function lr(){}function wr(){}lr.prototype.h=null;var Bn,Ki={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Yi(){At.call(this,"d")}function Vn(){At.call(this,"c")}function Rn(){}function Lr(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new fi(this),this.O=_e,this.T=new ze(i=gn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ds}function Ds(){this.i=null,this.g="",this.h=!1}Le(Yi,At),Le(Vn,At),Le(Rn,lr),Rn.prototype.g=function(){return new XMLHttpRequest},Rn.prototype.i=function(){return{}},Bn=new Rn;var _e=45e3,nt={},Ge={};function dt(i,e,t){i.K=1,i.v=Ws(hr(e)),i.s=t,i.P=!0,Vt(i,null)}function Vt(i,e){i.F=Date.now(),yr(i),i.A=hr(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),Br(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Ds,i.g=ms(i.l,t?e:null,!i.s),0<i.N&&(i.L=new pr($e(i.La,i,i.g),i.N)),Ze(i.S,i.g,"readystatechange",i.ib),e=i.H?br(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),pi(),function Tn(i,e,t,o,d,y){i.info(function(){if(i.g)if(y)for(var I="",x=y.split("&"),G=0;G<x.length;G++){var Z=x[G].split("=");if(1<Z.length){var pe=Z[0];Z=Z[1];var Te=pe.split("_");I=2<=Te.length&&"type"==Te[1]?I+(pe+"=")+Z+"&":I+(pe+"=redacted&")}}else I=null;else I=y;return"XMLHTTP REQ ("+o+") [attempt "+d+"]: "+e+"\n"+t+"\n"+I})}(i.j,i.u,i.A,i.m,i.U,i.s)}function jt(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function dn(i,e,t){let d,o=!0;for(;!i.I&&i.C<t.length;){if(d=dr(i,t),d==Ge){4==e&&(i.o=4,Rt(14),o=!1),en(i.j,i.m,null,"[Incomplete Response]");break}if(d==nt){i.o=4,Rt(15),en(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}en(i.j,i.m,d,null),Qr(i,d)}jt(i)&&d!=Ge&&d!=nt&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Rt(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ca(e),e.K=!0,Rt(11))):(en(i.j,i.m,t,"[Invalid Chunked Response]"),_i(i),Tr(i))}function dr(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Ge:(t=Number(e.substring(t,o)),isNaN(t)?nt:(o+=1)+t>e.length?Ge:(e=e.substr(o,t),i.C=o+t,e))}function yr(i){i.V=Date.now()+i.O,ai(i,i.O)}function ai(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=cn($e(i.gb,i),e)}function ur(i){i.B&&(Y.clearTimeout(i.B),i.B=null)}function Tr(i){0==i.l.G||i.I||bs(i.l,i)}function _i(i){ur(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Nt(i.T),Ct(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Qr(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||xn(t.h,i)))if(!i.J&&xn(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var d=o;if(0==d[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;ho(t),ht(t)}co(t),Rt(18)}}else t.Ba=d[1],0<t.Ba-t.T&&37500>d[2]&&t.L&&0==t.A&&!t.v&&(t.v=cn($e(t.cb,t),6e3));if(1>=Cs(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ri(t,11)}else if((i.J||t.g==i)&&ho(t),!Ke(e))for(d=t.Fa.g.parse(e),e=0;e<d.length;e++){let Z=d[e];if(t.T=Z[0],Z=Z[1],2==t.G)if("c"==Z[0]){t.I=Z[1],t.ka=Z[2];const pe=Z[3];null!=pe&&(t.ma=pe,t.j.info("VER="+t.ma));const Te=Z[4];null!=Te&&(t.Ca=Te,t.j.info("SVER="+t.Ca));const st=Z[5];null!=st&&"number"==typeof st&&0<st&&(t.J=o=1.5*st,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const St=i.g;if(St){const kt=St.g?St.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kt){var y=o.h;y.g||-1==kt.indexOf("spdy")&&-1==kt.indexOf("quic")&&-1==kt.indexOf("h2")||(y.j=y.l,y.g=new Set,y.h&&(jo(y,y.h),y.h=null))}if(o.D){const vn=St.g?St.g.getResponseHeader("X-HTTP-Session-Id"):null;vn&&(o.za=vn,Gn(o.F,o.D,vn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var I=i;if((o=t).sa=zo(o,o.H?o.ka:null,o.V),I.J){ws(o.h,I);var x=I,G=o.J;G&&x.setTimeout(G),x.B&&(ur(x),yr(x)),o.g=I}else Ss(o);0<t.i.length&&Us(t)}else"stop"!=Z[0]&&"close"!=Z[0]||ri(t,7);else 3==t.G&&("stop"==Z[0]||"close"==Z[0]?"stop"==Z[0]?ri(t,7):Zr(t):"noop"!=Z[0]&&t.l&&t.l.wa(Z),t.A=0)}pi()}catch{}}function En(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(he(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function li(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(he(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function So(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(he(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),d=o.length,y=0;y<d;y++)e.call(void 0,o[y],t&&t[y],i)}(W=Lr.prototype).setTimeout=function(i){this.O=i},W.ib=function(i){i=i.target;const e=this.L;e&&3==j(i)?e.l():this.La(i)},W.La=function(i){try{if(i==this.g)e:{const pe=j(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>pe)&&(3!=pe||gn||this.g&&(this.h.h||this.g.fa()||B(this.g)))){this.I||4!=pe||7==e||pi(),ur(this);var t=this.g.aa();this.Y=t;t:if(jt(this)){var o=B(this.g);i="";var d=o.length,y=4==j(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),Tr(this);var I="";break t}this.h.i=new Y.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:y&&e==d-1});o.splice(0,d),this.h.g+=i,this.C=0,I=this.h.g}else I=this.g.fa();if(this.i=200==t,function qn(i,e,t,o,d,y,I){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+y+" "+I})}(this.j,this.u,this.A,this.m,this.U,pe,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var x,G=this.g;if((x=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ke(x)){var Z=x;break t}}Z=null}if(!(t=Z)){this.i=!1,this.o=3,Rt(12),_i(this),Tr(this);break e}en(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Qr(this,t)}this.P?(dn(this,pe,I),gn&&this.i&&3==pe&&(Ze(this.S,this.T,"tick",this.hb),this.T.start())):(en(this.j,this.m,I,null),Qr(this,I)),4==pe&&_i(this),this.i&&!this.I&&(4==pe?bs(this.l,this):(this.i=!1,yr(this)))}else 400==t&&0<I.indexOf("Unknown SID")?(this.o=3,Rt(12)):(this.o=0,Rt(13)),_i(this),Tr(this)}}}catch{}},W.hb=function(){if(this.g){var i=j(this.g),e=this.g.fa();this.C<e.length&&(ur(this),dn(this,i,e),this.i&&4!=i&&yr(this))}},W.cancel=function(){this.I=!0,_i(this)},W.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function gr(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(pi(),Rt(17)),_i(this),this.o=2,Tr(this)):ai(this,this.V-i)};var Is=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ss(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof ss){this.h=void 0!==e?e:i.h,yo(this,i.j),this.s=i.s,this.g=i.g,qr(this,i.m),this.l=i.l,e=i.i;var t=new _o;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),os(this,t),this.o=i.o}else i&&(t=String(i).match(Is))?(this.h=!!e,yo(this,t[1]||"",!0),this.s=zs(t[2]||""),this.g=zs(t[3]||"",!0),qr(this,t[4]),this.l=zs(t[5]||"",!0),os(this,t[6]||"",!0),this.o=zs(t[7]||"")):(this.h=!!e,this.i=new _o(null,this.h))}function hr(i){return new ss(i)}function yo(i,e,t){i.j=t?zs(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function qr(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function os(i,e,t){e instanceof _o?(i.i=e,function vo(i,e){e&&!i.j&&(Bi(i),i.i=null,i.g.forEach(function(t,o){var d=o.toLowerCase();o!=d&&(Qi(this,o),Br(this,d,t))},i)),i.j=e}(i.i,i.h)):(t||(e=so(e,Fs)),i.i=new _o(e,i.h))}function Gn(i,e,t){i.i.set(e,t)}function Ws(i){return Gn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function zs(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function so(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Cl),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Cl(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}ss.prototype.toString=function(){var i=[],e=this.j;e&&i.push(so(e,Bo,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(so(e,Bo,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(so(t,"/"==t.charAt(0)?oo:bo,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",so(t,la)),i.join("")};var Bo=/[#\/\?@]/g,bo=/[#\?:]/g,oo=/[#\?]/g,Fs=/[#\?@]/g,la=/#/g;function _o(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Bi(i){i.g||(i.g=new Map,i.h=0,i.i&&function Gs(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),d=null;if(0<=o){var y=i[t].substring(0,o);d=i[t].substring(o+1)}else y=i[t];e(y,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Qi(i,e){Bi(i),e=Ao(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Ks(i,e){return Bi(i),e=Ao(i,e),i.g.has(e)}function Br(i,e,t){Qi(i,e),0<t.length&&(i.i=null,i.g.set(Ao(i,e),Ye(t)),i.h+=t.length)}function Ao(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function lo(i){this.l=i||ua,i=Y.PerformanceNavigationTiming?0<(i=Y.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Y.g&&Y.g.Ga&&Y.g.Ga()&&Y.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(W=_o.prototype).add=function(i,e){Bi(this),this.i=null,i=Ao(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},W.forEach=function(i,e){Bi(this),this.g.forEach(function(t,o){t.forEach(function(d){i.call(e,d,o,this)},this)},this)},W.oa=function(){Bi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const d=i[o];for(let y=0;y<d.length;y++)t.push(e[o])}return t},W.W=function(i){Bi(this);let e=[];if("string"==typeof i)Ks(this,i)&&(e=e.concat(this.g.get(Ao(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},W.set=function(i,e){return Bi(this),this.i=null,Ks(this,i=Ao(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},W.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},W.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const y=encodeURIComponent(String(o)),I=this.W(o);for(o=0;o<I.length;o++){var d=y;""!==I[o]&&(d+="="+encodeURIComponent(String(I[o]))),i.push(d)}}return this.i=i.join("&")};var ua=10;function fs(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Cs(i){return i.h?1:i.g?i.g.size:0}function xn(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function jo(i,e){i.g?i.g.add(e):i.h=e}function ws(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Ca(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Ye(i.i)}function Fr(){}function Ni(){this.g=new Fr}function Ho(i,e,t){const o=t||"";try{En(i,function(d,y){let I=d;Pe(d)&&(I=bt(d)),e.push(o+y+"="+encodeURIComponent(I))})}catch(d){throw e.push(o+"type="+encodeURIComponent("_badmap")),d}}function uo(i,e,t,o,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(o)}catch{}}function ps(i){this.l=i.ac||null,this.j=i.jb||!1}function $r(i,e){Qe.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=ji,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}lo.prototype.cancel=function(){if(this.i=Ca(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Fr.prototype.stringify=function(i){return Y.JSON.stringify(i,void 0)},Fr.prototype.parse=function(i){return Y.JSON.parse(i,void 0)},Le(ps,lr),ps.prototype.g=function(){return new $r(this.l,this.j)},ps.prototype.i=function(i){return function(){return i}}({}),Le($r,Qe);var ji=0;function $o(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function ui(i){i.readyState=4,i.l=null,i.j=null,i.A=null,qi(i)}function qi(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(W=$r.prototype).open=function(i,e){if(this.readyState!=ji)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,qi(this)},W.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Y).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},W.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ui(this)),this.readyState=ji},W.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,qi(this)),this.g&&(this.readyState=3,qi(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Y.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$o(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},W.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?ui(this):qi(this),3==this.readyState&&$o(this)}},W.Va=function(i){this.g&&(this.response=this.responseText=i,ui(this))},W.Ua=function(i){this.g&&(this.response=i,ui(this))},W.ga=function(){this.g&&ui(this)},W.setRequestHeader=function(i,e){this.v.append(i,e)},W.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},W.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty($r.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Go=Y.JSON.parse;function Sr(i){Qe.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Hi,this.K=this.L=!1}Le(Sr,Qe);var Hi="",Mo=/^https?$/i,Ts=["POST","PUT"];function ks(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Po(i),Ln(i)}function Po(i){i.D||(i.D=!0,Ie(i,"complete"),Ie(i,"error"))}function Oo(i){if(i.h&&typeof ee<"u"&&(!i.C[1]||4!=j(i)||2!=i.aa()))if(i.v&&4==j(i))Qt(i.Ha,0,i);else if(Ie(i,"readystatechange"),4==j(i)){i.h=!1;try{const x=i.aa();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===x){var d=String(i.H).match(Is)[1]||null;if(!d&&Y.self&&Y.self.location){var y=Y.self.location.protocol;d=y.substr(0,y.length-1)}o=!Mo.test(d?d.toLowerCase():"")}t=o}if(t)Ie(i,"complete"),Ie(i,"success");else{i.m=6;try{var I=2<j(i)?i.g.statusText:""}catch{I=""}i.j=I+" ["+i.aa()+"]",Po(i)}}finally{Ln(i)}}}function Ln(i,e){if(i.g){Wo(i);const t=i.g,o=i.C[0]?le:null;i.g=null,i.C=null,e||Ie(i,"ready");try{t.onreadystatechange=o}catch{}}}function Wo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Y.clearTimeout(i.A),i.A=null)}function j(i){return i.g?i.g.readyState:0}function B(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Hi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function F(i){let e="";return Cr(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function oe(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=F(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Gn(i,e,t))}function tt(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function sn(i){this.Ca=0,this.i=[],this.j=new Wt,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=tt("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=tt("baseRetryDelayMs",5e3,i),this.bb=tt("retryDelaySeedMs",1e4,i),this.$a=tt("forwardChannelMaxRetries",2,i),this.ta=tt("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new lo(i&&i.concurrentRequestLimit),this.Fa=new Ni,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Zr(i){if(Nn(i),3==i.G){var e=i.U++,t=hr(i.F);Gn(t,"SID",i.I),Gn(t,"RID",e),Gn(t,"TYPE","terminate"),wa(i,t),(e=new Lr(i,i.j,e,void 0)).K=2,e.v=Ws(hr(t)),t=!1,Y.navigator&&Y.navigator.sendBeacon&&(t=Y.navigator.sendBeacon(e.v.toString(),"")),!t&&Y.Image&&((new Image).src=e.v,t=!0),t||(e.g=ms(e.l,null),e.g.da(e.v)),e.F=Date.now(),yr(e)}Ta(i)}function ht(i){i.g&&(ca(i),i.g.cancel(),i.g=null)}function Nn(i){ht(i),i.u&&(Y.clearTimeout(i.u),i.u=null),ho(i),i.h.cancel(),i.m&&("number"==typeof i.m&&Y.clearTimeout(i.m),i.m=null)}function Us(i){fs(i.h)||i.m||(i.m=!0,Mt(i.Ja,i),i.C=0)}function Li(i,e){var t;t=e?e.m:i.U++;const o=hr(i.F);Gn(o,"SID",i.I),Gn(o,"RID",t),Gn(o,"AID",i.T),wa(i,o),i.o&&i.s&&oe(o,i.o,i.s),t=new Lr(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=$i(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),jo(i.h,t),dt(t,o,e)}function wa(i,e){i.ia&&Cr(i.ia,function(t,o){Gn(e,o,t)}),i.l&&En({},function(t,o){Gn(e,o,t)})}function $i(i,e,t){t=Math.min(i.i.length,t);var o=i.l?$e(i.l.Ra,i.l,i):null;e:{var d=i.i;let y=-1;for(;;){const I=["count="+t];-1==y?0<t?(y=d[0].h,I.push("ofs="+y)):y=0:I.push("ofs="+y);let x=!0;for(let G=0;G<t;G++){let Z=d[G].h;const pe=d[G].g;if(Z-=y,0>Z)y=Math.max(0,d[G].h-100),x=!1;else try{Ho(pe,I,"req"+Z+"_")}catch{o&&o(pe)}}if(x){o=I.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function Ss(i){i.g||i.u||(i.Z=1,Mt(i.Ia,i),i.A=0)}function co(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=cn($e(i.Ia,i),Ti(i,i.A)),i.A++,0))}function ca(i){null!=i.B&&(Y.clearTimeout(i.B),i.B=null)}function da(i){i.g=new Lr(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=hr(i.sa);Gn(e,"RID","rpc"),Gn(e,"SID",i.I),Gn(e,"CI",i.L?"0":"1"),Gn(e,"AID",i.T),Gn(e,"TYPE","xmlhttp"),wa(i,e),i.o&&i.s&&oe(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=Ws(hr(e)),t.s=null,t.P=!0,Vt(t,i)}function ho(i){null!=i.v&&(Y.clearTimeout(i.v),i.v=null)}function bs(i,e){var t=null;if(i.g==e){ho(i),ca(i),i.g=null;var o=2}else{if(!xn(i.h,e))return;t=e.D,ws(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var d=i.C;Ie(o=Ns(),new Mn(o,t)),Us(i)}else Ss(i);else if(3==(d=e.o)||0==d&&0<i.pa||!(1==o&&function nu(i,e){return!(Cs(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=cn($e(i.Ja,i,e),Ti(i,i.C)),i.C++,0)))}(i,e)||2==o&&co(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),d){case 1:ri(i,5);break;case 4:ri(i,10);break;case 3:ri(i,6);break;default:ri(i,2)}}function Ti(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function ri(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=$e(i.kb,i);t||(t=new ss("//www.google.com/images/cleardot.gif"),Y.location&&"http"==Y.location.protocol||yo(t,"https"),Ws(t)),function vi(i,e){const t=new Wt;if(Y.Image){const o=new Image;o.onload=Je(uo,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Je(uo,t,o,"TestLoadImage: error",!1,e),o.onabort=Je(uo,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Je(uo,t,o,"TestLoadImage: timeout",!1,e),Y.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Rt(2);i.G=0,i.l&&i.l.va(e),Ta(i),Nn(i)}function Ta(i){if(i.G=0,i.la=[],i.l){const e=Ca(i.h);(0!=e.length||0!=i.i.length)&&(Ot(i.la,e),Ot(i.la,i.i),i.h.i.length=0,Ye(i.i),i.i.length=0),i.l.ua()}}function zo(i,e,t){var o=t instanceof ss?hr(t):new ss(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),qr(o,o.m);else{var d=Y.location;o=d.protocol,e=e?e+"."+d.hostname:d.hostname,d=+d.port;var y=new ss(null,void 0);o&&yo(y,o),e&&(y.g=e),d&&qr(y,d),t&&(y.l=t),o=y}return e=i.za,(t=i.D)&&e&&Gn(o,t,e),Gn(o,"VER",i.ma),wa(i,o),o}function ms(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sr(t&&i.Da&&!i.ra?new ps({jb:!0}):i.ra)).Ka(i.H),e}function za(){}function fo(){if($t&&!(10<=Number(Kn)))throw Error("Environmental error: no available transport.")}function bi(i,e){Qe.call(this),this.g=new sn(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!Ke(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ke(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Zi(this)}function Ko(i){Yi.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Ys(){Vn.call(this),this.status=1}function Zi(i){this.g=i}(W=Sr.prototype).Ka=function(i){this.L=i},W.da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Bn.g(),this.C=function mr(i){return i.h||(i.h=i.i())}(this.u?this.u:Bn),this.g.onreadystatechange=$e(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(y){return void ks(this,y)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var d in o)t.set(d,o[d]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const y of o.keys())t.set(y,o.get(y))}o=Array.from(t.keys()).find(y=>"content-type"==y.toLowerCase()),d=Y.FormData&&i instanceof Y.FormData,!(0<=Et(Ts,e))||o||d||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[y,I]of t)this.g.setRequestHeader(y,I);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Wo(this),0<this.B&&((this.K=function gs(i){return $t&&function ft(){return function Jn(i){var e=Fe;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=ut(String(un)).split("."),t=ut("9").split("."),o=Math.max(e.length,t.length);for(let I=0;0==i&&I<o;I++){var d=e[I]||"",y=t[I]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],y=/(\d*)(\D*)(.*)/.exec(y)||["","","",""],0==d[0].length&&0==y[0].length)break;i=qe(0==d[1].length?0:parseInt(d[1],10),0==y[1].length?0:parseInt(y[1],10))||qe(0==d[2].length,0==y[2].length)||qe(d[2],y[2]),d=d[3],y=y[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$e(this.qa,this)):this.A=Qt(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(y){ks(this,y)}},W.qa=function(){typeof ee<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ie(this,"timeout"),this.abort(8))},W.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Ie(this,"complete"),Ie(this,"abort"),Ln(this))},W.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ln(this,!0)),Sr.X.M.call(this)},W.Ha=function(){this.s||(this.F||this.v||this.l?Oo(this):this.fb())},W.fb=function(){Oo(this)},W.aa=function(){try{return 2<j(this)?this.g.status:-1}catch{return-1}},W.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},W.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Go(e)}},W.Ea=function(){return this.m},W.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(W=sn.prototype).ma=8,W.G=1,W.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const d=new Lr(this,this.j,i,void 0);let y=this.s;if(this.S&&(y?(y=br(y),Yn(y,this.S)):y=this.S),null!==this.o||this.N||(d.H=y,y=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$i(this,d,e),Gn(t=hr(this.F),"RID",i),Gn(t,"CVER",22),this.D&&Gn(t,"X-HTTP-Session-Id",this.D),wa(this,t),y&&(this.N?e="headers="+encodeURIComponent(String(F(y)))+"&"+e:this.o&&oe(t,this.o,y)),jo(this.h,d),this.Ya&&Gn(t,"TYPE","init"),this.O?(Gn(t,"$req",e),Gn(t,"SID","null"),d.Z=!0,dt(d,t,null)):dt(d,t,e),this.G=2}}else 3==this.G&&(i?Li(this,i):0==this.i.length||fs(this.h)||Li(this))},W.Ia=function(){if(this.u=null,da(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=cn($e(this.eb,this),i)}},W.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Rt(10),ht(this),da(this))},W.cb=function(){null!=this.v&&(this.v=null,ht(this),co(this),Rt(19))},W.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))},(W=za.prototype).xa=function(){},W.wa=function(){},W.va=function(){},W.ua=function(){},W.Ra=function(){},fo.prototype.g=function(i,e){return new bi(i,e)},Le(bi,Qe),bi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Rt(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=zo(i,null,i.V),Us(i)},bi.prototype.close=function(){Zr(this.g)},bi.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=bt(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&Us(e)},bi.prototype.M=function(){this.g.l=null,delete this.j,Zr(this.g),delete this.g,bi.X.M.call(this)},Le(Ko,Yi),Le(Ys,Vn),Le(Zi,za),Zi.prototype.xa=function(){Ie(this.g,"a")},Zi.prototype.wa=function(i){Ie(this.g,new Ko(i))},Zi.prototype.va=function(i){Ie(this.g,new Ys)},Zi.prototype.ua=function(){Ie(this.g,"b")},fo.prototype.createWebChannel=fo.prototype.g,bi.prototype.send=bi.prototype.u,bi.prototype.open=bi.prototype.m,bi.prototype.close=bi.prototype.close,Cn.NO_ERROR=0,Cn.TIMEOUT=8,Cn.HTTP_ERROR=6,fn.COMPLETE="complete",wr.EventType=Ki,Ki.OPEN="a",Ki.CLOSE="b",Ki.ERROR="c",Ki.MESSAGE="d",Qe.prototype.listen=Qe.prototype.N,Sr.prototype.listenOnce=Sr.prototype.O,Sr.prototype.getLastError=Sr.prototype.Oa,Sr.prototype.getLastErrorCode=Sr.prototype.Ea,Sr.prototype.getStatus=Sr.prototype.aa,Sr.prototype.getResponseJson=Sr.prototype.Sa,Sr.prototype.getResponseText=Sr.prototype.fa,Sr.prototype.send=Sr.prototype.da,Sr.prototype.setWithCredentials=Sr.prototype.Ka;var Yo=X.createWebChannelTransport=function(){return new fo},Ka=X.getStatEventTarget=function(){return Ns()},wl=X.ErrorCode=Cn,ii=X.EventType=fn,Qs=X.Event=oi,Sa=X.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},ba=X.FetchXmlHttpFactory=ps,Aa=X.WebChannel=wr,Ya=X.XhrIo=Sr;const ha="@firebase/firestore";class Xi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xi.UNAUTHENTICATED=new Xi(null),Xi.GOOGLE_CREDENTIALS=new Xi("google-credentials-uid"),Xi.FIRST_PARTY=new Xi("first-party-uid"),Xi.MOCK_USER=new Xi("mock-user");let po="9.17.1";const ci=new V.Yd("@firebase/firestore");function Ji(){return ci.logLevel}function Lt(i,...e){if(ci.logLevel<=V.in.DEBUG){const t=e.map(Qa);ci.debug(`Firestore (${po}): ${i}`,...t)}}function Ai(i,...e){if(ci.logLevel<=V.in.ERROR){const t=e.map(Qa);ci.error(`Firestore (${po}): ${i}`,...t)}}function Qo(i,...e){if(ci.logLevel<=V.in.WARN){const t=e.map(Qa);ci.warn(`Firestore (${po}): ${i}`,...t)}}function Qa(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function an(i="Unexpected state"){const e=`FIRESTORE (${po}) INTERNAL ASSERTION FAILED: `+i;throw Ai(e),new Error(e)}function Xt(i,e){i||an()}function zt(i,e){return i}const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends q.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class z{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class k{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ie{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xi.UNAUTHENTICATED))}shutdown(){}}class ye{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class it{constructor(e){this.t=e,this.currentUser=Xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let d=this.i;const y=Z=>this.i!==d?(d=this.i,t(Z)):Promise.resolve();let I=new z;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new z,e.enqueueRetryable(()=>y(this.currentUser))};const x=()=>{const Z=I;e.enqueueRetryable((0,m.Z)(function*(){yield Z.promise,yield y(o.currentUser)}))},G=Z=>{Lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Z,this.auth.addAuthTokenListener(this.o),x()};this.t.onInit(Z=>G(Z)),setTimeout(()=>{if(!this.auth){const Z=this.t.getImmediate({optional:!0});Z?G(Z):(Lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),I.resolve(),I=new z)}},0),x()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(Lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Xt("string"==typeof o.accessToken),new k(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Xt(null===e||"string"==typeof e),new Xi(e)}}class pt{constructor(e,t,o,d){this.h=e,this.l=t,this.m=o,this.g=d,this.type="FirstParty",this.user=Xi.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Xt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class ln{constructor(e,t,o,d){this.h=e,this.l=t,this.m=o,this.g=d}getToken(){return Promise.resolve(new pt(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Xi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wr{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=y=>{null!=y.error&&Lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${y.error.message}`);const I=y.token!==this.A;return this.A=y.token,Lt("FirebaseAppCheckTokenProvider",`Received ${I?"new":"existing"} token.`),I?t(y.token):Promise.resolve()};this.o=y=>{e.enqueueRetryable(()=>o(y))};const d=y=>{Lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=y,this.appCheck.addTokenListener(this.o)};this.T.onInit(y=>d(y)),setTimeout(()=>{if(!this.appCheck){const y=this.T.getImmediate({optional:!0});y?d(y):Lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Xt("string"==typeof t.token),this.A=t.token,new Dr(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cr(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class Zn{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const d=cr(40);for(let y=0;y<d.length;++y)o.length<20&&d[y]<t&&(o+=e.charAt(d[y]%e.length))}return o}}function Jt(i,e){return i<e?-1:i>e?1:0}function Xr(i,e,t){return i.length===e.length&&i.every((o,d)=>t(o,e[d]))}function Vs(i){return i+"\0"}class _r{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new M(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _r.fromMillis(Date.now())}static fromDate(e){return _r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new _r(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jt(this.nanoseconds,e.nanoseconds):Jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mn(e)}static min(){return new mn(new _r(0,0))}static max(){return new mn(new _r(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Fi{constructor(e,t,o){void 0===t?t=0:t>e.length&&an(),void 0===o?o=e.length-t:o>e.length-t&&an(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Fi.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Fi?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let d=0;d<o;d++){const y=e.get(d),I=t.get(d);if(y<I)return-1;if(y>I)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wn extends Fi{construct(e,t,o){return new Wn(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new M(lt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(d=>d.length>0))}return new Wn(t)}static emptyPath(){return new Wn([])}}const fa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rr extends Fi{construct(e,t,o){return new Rr(e,t,o)}static isValidIdentifier(e){return fa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Rr(["__name__"])}static fromServerFormat(e){const t=[];let o="",d=0;const y=()=>{if(0===o.length)throw new M(lt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let I=!1;for(;d<e.length;){const x=e[d];if("\\"===x){if(d+1===e.length)throw new M(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const G=e[d+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new M(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=G,d+=2}else"`"===x?(I=!I,d++):"."!==x||I?(o+=x,d++):(y(),d++)}if(y(),I)throw new M(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rr(t)}static emptyPath(){return new Rr([])}}class Gt{constructor(e){this.path=e}static fromPath(e){return new Gt(Wn.fromString(e))}static fromName(e){return new Gt(Wn.fromString(e).popFirst(5))}static empty(){return new Gt(Wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Gt(new Wn(e.slice()))}}class Eo{constructor(e,t,o,d){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=d}}function Ma(i){return i.fields.find(e=>2===e.kind)}function pa(i){return i.fields.filter(e=>2!==e.kind)}Eo.UNKNOWN_ID=-1;class as{constructor(e,t){this.fieldPath=e,this.kind=t}}class As{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new As(0,Bs.min())}}function al(i){return new Bs(i.readTime,i.key,-1)}class Bs{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Bs(mn.min(),Gt.empty(),-1)}static max(){return new Bs(mn.max(),Gt.empty(),-1)}}function Tl(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Gt.comparator(i.documentKey,e.documentKey),0!==t?t:Jt(i.largestBatchId,e.largestBatchId))}const ru="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ro(i){return Za.apply(this,arguments)}function Za(){return Za=(0,m.Z)(function*(i){if(i.code!==lt.FAILED_PRECONDITION||i.message!==ru)throw i;Lt("LocalStore","Unexpectedly lost primary lease")}),Za.apply(this,arguments)}class et{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&an(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new et((o,d)=>{this.nextCallback=y=>{this.wrapSuccess(e,y).next(o,d)},this.catchCallback=y=>{this.wrapFailure(t,y).next(o,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof et?t:et.resolve(t)}catch(t){return et.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):et.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):et.reject(t)}static resolve(e){return new et((t,o)=>{t(e)})}static reject(e){return new et((t,o)=>{o(e)})}static waitFor(e){return new et((t,o)=>{let d=0,y=0,I=!1;e.forEach(x=>{++d,x.next(()=>{++y,I&&y===d&&t()},G=>o(G))}),I=!0,y===d&&t()})}static or(e){let t=et.resolve(!1);for(const o of e)t=t.next(d=>d?et.resolve(d):o());return t}static forEach(e,t){const o=[];return e.forEach((d,y)=>{o.push(t.call(this,d,y))}),this.waitFor(o)}static mapArray(e,t){return new et((o,d)=>{const y=e.length,I=new Array(y);let x=0;for(let G=0;G<y;G++){const Z=G;t(e[Z]).next(pe=>{I[Z]=pe,++x,x===y&&o(I)},pe=>d(pe))}})}static doWhile(e,t){return new et((o,d)=>{const y=()=>{!0===e()?t().next(()=>{y()},d):o()};y()})}}class qs{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new z,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Zs(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const d=$l(o.target.error);this.P.reject(new Zs(e,d))}}static open(e,t,o,d){try{return new qs(t,e.transaction(d,o))}catch(y){throw new Zs(t,y)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Lt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Xa(t)}}class ys{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===ys.D((0,q.z$)())&&Ai("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Lt("SimpleDb","Removing database:",e),xo(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,q.hl)())return!1;if(ys.N())return!0;const e=(0,q.z$)(),t=ys.D(e),o=0<t&&t<10,d=ys.k(e),y=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||y)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,m.Z)(function*(){return t.db||(Lt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,d)=>{const y=indexedDB.open(t.name,t.version);y.onsuccess=I=>{o(I.target.result)},y.onblocked=()=>{d(new Zs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},y.onerror=I=>{const x=I.target.error;d("VersionError"===x.name?new M(lt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===x.name?new M(lt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+x):new Zs(e,x))},y.onupgradeneeded=I=>{Lt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',I.oldVersion),t.S.$(I.target.result,y.transaction,I.oldVersion,t.version).next(()=>{Lt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,d){var y=this;return(0,m.Z)(function*(){const I="readonly"===t;let x=0;for(;;){++x;try{y.db=yield y.F(e);const G=qs.open(y.db,e,I?"readonly":"readwrite",o),Z=d(G).next(pe=>(G.V(),pe)).catch(pe=>(G.abort(pe),et.reject(pe))).toPromise();return Z.catch(()=>{}),yield G.v,Z}catch(G){const Z=G,pe="FirebaseError"!==Z.name&&x<3;if(Lt("SimpleDb","Transaction failed with error:",Z.message,"Retrying:",pe),y.close(),!pe)return Promise.reject(Z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Sl{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return xo(this.q.delete())}}class Zs extends M{constructor(e,t){super(lt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ls(i){return"IndexedDbTransactionError"===i.name}class Xa{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(Lt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Lt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),xo(o)}add(e){return Lt("SimpleDb","ADD",this.store.name,e,e),xo(this.store.add(e))}get(e){return xo(this.store.get(e)).next(t=>(void 0===t&&(t=null),Lt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Lt("SimpleDb","DELETE",this.store.name,e),xo(this.store.delete(e))}count(){return Lt("SimpleDb","COUNT",this.store.name),xo(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const d=this.cursor(o),y=[];return this.H(d,(I,x)=>{y.push(x)}).next(()=>y)}{const d=this.store.getAll(o.range);return new et((y,I)=>{d.onerror=x=>{I(x.target.error)},d.onsuccess=x=>{y(x.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new et((d,y)=>{o.onerror=I=>{y(I.target.error)},o.onsuccess=I=>{d(I.target.result)}})}Y(e,t){Lt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const d=this.cursor(o);return this.H(d,(y,I,x)=>x.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const d=this.cursor(o);return this.H(d,t)}tt(e){const t=this.cursor({});return new et((o,d)=>{t.onerror=y=>{const I=$l(y.target.error);d(I)},t.onsuccess=y=>{const I=y.target.result;I?e(I.primaryKey,I.value).next(x=>{x?I.continue():o()}):o()}})}H(e,t){const o=[];return new et((d,y)=>{e.onerror=I=>{y(I.target.error)},e.onsuccess=I=>{const x=I.target.result;if(!x)return void d();const G=new Sl(x),Z=t(x.primaryKey,x.value,G);if(Z instanceof et){const pe=Z.catch(Te=>(G.done(),et.reject(Te)));o.push(pe)}G.isDone?d():null===G.G?x.continue():x.continue(G.G)}}).next(()=>et.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xo(i){return new et((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const d=$l(o.target.error);t(d)}})}let Ja=!1;function $l(i){const e=ys.D((0,q.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new M("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ja||(Ja=!0,setTimeout(()=>{throw o},0)),o}}return i}class es{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Lt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,m.Z)(function*(){t.task=null;try{Lt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){ls(o)?Lt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield Ro(o)}yield t.nt(6e4)}))}}class Oa{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,m.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let d=t,y=!0;return et.doWhile(()=>!0===y&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(I=>{if(null!==I&&!o.has(I))return Lt("IndexBackiller",`Processing collection: ${I}`),this.rt(e,I,d).next(x=>{d-=x,o.add(I)});y=!1})).next(()=>t-d)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(d=>this.localStore.localDocuments.getNextDocuments(e,t,d,o).next(y=>{const I=y.changes;return this.localStore.indexManager.updateIndexEntries(e,I).next(()=>this.ot(d,y)).next(x=>(Lt("IndexBackiller",`Updating offset: ${x}`),this.localStore.indexManager.updateCollectionGroup(e,t,x))).next(()=>I.size)}))}ot(e,t){let o=e;return t.changes.forEach((d,y)=>{const I=al(y);Tl(I,o)>0&&(o=I)}),new Bs(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}let js=(()=>{class i{constructor(t,o){this.previousValue=t,o&&(o.sequenceNumberHandler=d=>this.ut(d),this.ct=d=>o.writeSequenceNumber(d))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class iu{constructor(e,t,o,d,y,I,x,G){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=d,this.ssl=y,this.forceLongPolling=I,this.autoDetectLongPolling=x,this.useFetchStreams=G}}class No{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new No("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof No&&e.projectId===this.projectId&&e.database===this.database}}function Xs(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Js(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function ga(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Lo(i){return null==i}function Ms(i){return 0===i&&1/i==-1/0}class Gi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Gi(t)}static fromUint8Array(e){const t=function(o){let d="";for(let y=0;y<o.length;++y)d+=String.fromCharCode(o[y]);return d}(e);return new Gi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gi.EMPTY_BYTE_STRING=new Gi("");const Jr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ua(i){if(Xt(!!i),"string"==typeof i){let e=0;const t=Jr.exec(i);if(Xt(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:gi(i.seconds),nanos:gi(i.nanos)}}function gi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function ll(i){return"string"==typeof i?Gi.fromBase64String(i):Gi.fromUint8Array(i)}function Fo(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Va(i){const e=i.mapValue.fields.__previous_value__;return Fo(e)?Va(e):e}function Ba(i){const e=Ua(i.mapValue.fields.__local_write_time__.timestampValue);return new _r(e.seconds,e.nanos)}const ma={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},us={nullValue:"NULL_VALUE"};function ya(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Fo(i)?4:nr(i)?9007199254740991:10:an()}function cs(i,e){if(i===e)return!0;const t=ya(i);if(t!==ya(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ba(i).isEqual(Ba(e));case 3:return function(o,d){if("string"==typeof o.timestampValue&&"string"==typeof d.timestampValue&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const y=Ua(o.timestampValue),I=Ua(d.timestampValue);return y.seconds===I.seconds&&y.nanos===I.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,ll(i.bytesValue).isEqual(ll(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,d){return gi(o.geoPointValue.latitude)===gi(d.geoPointValue.latitude)&&gi(o.geoPointValue.longitude)===gi(d.geoPointValue.longitude)}(i,e);case 2:return function(o,d){if("integerValue"in o&&"integerValue"in d)return gi(o.integerValue)===gi(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const y=gi(o.doubleValue),I=gi(d.doubleValue);return y===I?Ms(y)===Ms(I):isNaN(y)&&isNaN(I)}return!1}(i,e);case 9:return Xr(i.arrayValue.values||[],e.arrayValue.values||[],cs);case 10:return function(o,d){const y=o.mapValue.fields||{},I=d.mapValue.fields||{};if(Xs(y)!==Xs(I))return!1;for(const x in y)if(y.hasOwnProperty(x)&&(void 0===I[x]||!cs(y[x],I[x])))return!1;return!0}(i,e);default:return an()}var d}function di(i,e){return void 0!==(i.values||[]).find(t=>cs(t,e))}function S(i,e){if(i===e)return 0;const t=ya(i),o=ya(e);if(t!==o)return Jt(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Jt(i.booleanValue,e.booleanValue);case 2:return function(d,y){const I=gi(d.integerValue||d.doubleValue),x=gi(y.integerValue||y.doubleValue);return I<x?-1:I>x?1:I===x?0:isNaN(I)?isNaN(x)?0:-1:1}(i,e);case 3:return P(i.timestampValue,e.timestampValue);case 4:return P(Ba(i),Ba(e));case 5:return Jt(i.stringValue,e.stringValue);case 6:return function(d,y){const I=ll(d),x=ll(y);return I.compareTo(x)}(i.bytesValue,e.bytesValue);case 7:return function(d,y){const I=d.split("/"),x=y.split("/");for(let G=0;G<I.length&&G<x.length;G++){const Z=Jt(I[G],x[G]);if(0!==Z)return Z}return Jt(I.length,x.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,y){const I=Jt(gi(d.latitude),gi(y.latitude));return 0!==I?I:Jt(gi(d.longitude),gi(y.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,y){const I=d.values||[],x=y.values||[];for(let G=0;G<I.length&&G<x.length;++G){const Z=S(I[G],x[G]);if(Z)return Z}return Jt(I.length,x.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,y){if(d===ma.mapValue&&y===ma.mapValue)return 0;if(d===ma.mapValue)return 1;if(y===ma.mapValue)return-1;const I=d.fields||{},x=Object.keys(I),G=y.fields||{},Z=Object.keys(G);x.sort(),Z.sort();for(let pe=0;pe<x.length&&pe<Z.length;++pe){const Te=Jt(x[pe],Z[pe]);if(0!==Te)return Te;const st=S(I[x[pe]],G[Z[pe]]);if(0!==st)return st}return Jt(x.length,Z.length)}(i.mapValue,e.mapValue);default:throw an()}}function P(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Jt(i,e);const t=Ua(i),o=Ua(e),d=Jt(t.seconds,o.seconds);return 0!==d?d:Jt(t.nanos,o.nanos)}function w(i){return N(i)}function N(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const d=Ua(o);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?ll(i.bytesValue).toBase64():"referenceValue"in i?Gt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let d="[",y=!0;for(const I of o.values||[])y?y=!1:d+=",",d+=N(I);return d+"]"}(i.arrayValue):"mapValue"in i?function(o){const d=Object.keys(o.fields||{}).sort();let y="{",I=!0;for(const x of d)I?I=!1:y+=",",y+=`${x}:${N(o.fields[x])}`;return y+"}"}(i.mapValue):an();var e}function $(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function re(i){return!!i&&"integerValue"in i}function ce(i){return!!i&&"arrayValue"in i}function Ve(i){return!!i&&"nullValue"in i}function Dt(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function qt(i){return!!i&&"mapValue"in i}function Zt(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Js(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=Zt(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zt(i.arrayValue.values[t]);return e}return Object.assign({},i)}function nr(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function kr(i){return"nullValue"in i?us:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?$(No.empty(),Gt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:an()}function _s(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?$(No.empty(),Gt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?ma:an()}function ki(i,e){const t=S(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Ra(i,e){const t=S(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Wi{constructor(e,t){this.position=e,this.inclusive=t}}function el(i,e,t){let o=0;for(let d=0;d<i.position.length;d++){const y=e[d],I=i.position[d];if(o=y.field.isKeyField()?Gt.comparator(Gt.fromName(I.referenceValue),t.key):S(I,t.data.field(y.field)),"desc"===y.dir&&(o*=-1),0!==o)break}return o}function xa(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!cs(i.position[t],e.position[t]))return!1;return!0}class ul{}class xr extends ul{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,o):new Fu(e,t,o):"array-contains"===t?new vu(e,o):"in"===t?new ja(e,o):"not-in"===t?new Ea(e,o):"array-contains-any"===t?new Ml(e,o):new xr(e,t,o)}static createKeyFieldInFilter(e,t,o){return"in"===t?new pl(e,o):new va(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(S(t,this.value)):null!==t&&ya(this.value)===ya(t)&&this.matchesComparison(S(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return an()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class hi extends ul{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new hi(e,t)}matches(e){return cl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function cl(i){return"and"===i.op}function dl(i){return"or"===i.op}function hl(i){return fl(i)&&cl(i)}function fl(i){for(const e of i.filters)if(e instanceof hi)return!1;return!0}function _a(i){if(i instanceof xr)return i.field.canonicalString()+i.op.toString()+w(i.value);if(hl(i))return i.filters.map(e=>_a(e)).join(",");{const e=i.filters.map(t=>_a(t)).join(",");return`${i.op}(${e})`}}function bl(i,e){return i instanceof xr?(t=i,(o=e)instanceof xr&&t.op===o.op&&t.field.isEqual(o.field)&&cs(t.value,o.value)):i instanceof hi?function(t,o){return o instanceof hi&&t.op===o.op&&t.filters.length===o.filters.length&&t.filters.reduce((d,y,I)=>d&&bl(y,o.filters[I]),!0)}(i,e):void an();var t,o}function Zo(i,e){const t=i.filters.concat(e);return hi.create(t,i.op)}function Al(i){return i instanceof xr?`${(e=i).field.canonicalString()} ${e.op} ${w(e.value)}`:i instanceof hi?function(e){return e.op.toString()+" {"+e.getFilters().map(Al).join(" ,")+"}"}(i):"Filter";var e}class Fu extends xr{constructor(e,t,o){super(e,t,o),this.key=Gt.fromName(o.referenceValue)}matches(e){const t=Gt.comparator(e.key,this.key);return this.matchesComparison(t)}}class pl extends xr{constructor(e,t){super(e,"in",t),this.keys=su(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class va extends xr{constructor(e,t){super(e,"not-in",t),this.keys=su(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function su(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Gt.fromName(o.referenceValue))}class vu extends xr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ce(t)&&di(t.arrayValue,this.value)}}class ja extends xr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&di(this.value.arrayValue,t)}}class Ea extends xr{constructor(e,t){super(e,"not-in",t)}matches(e){if(di(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!di(this.value.arrayValue,t)}}class Ml extends xr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ce(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>di(this.value.arrayValue,o))}}class Xo{constructor(e,t="asc"){this.field=e,this.dir=t}}function nc(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Mi{constructor(e,t){this.comparator=e,this.root=t||Hs.EMPTY}insert(e,t){return new Mi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hs.BLACK,null,null))}remove(e){return new Mi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const d=this.comparator(e,o.key);if(0===d)return t+o.left.size;d<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tl(this.root,e,this.comparator,!1)}getReverseIterator(){return new tl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tl(this.root,e,this.comparator,!0)}}class tl{constructor(e,t,o,d){this.isReverse=d,this.nodeStack=[];let y=1;for(;!e.isEmpty();)if(y=t?o(e.key,t):1,t&&d&&(y*=-1),y<0)e=this.isReverse?e.left:e.right;else{if(0===y){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hs{constructor(e,t,o,d,y){this.key=e,this.value=t,this.color=o??Hs.RED,this.left=d??Hs.EMPTY,this.right=y??Hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,d,y){return new Hs(e??this.key,t??this.value,o??this.color,d??this.left,y??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let d=this;const y=o(e,d.key);return d=y<0?d.copy(null,null,null,d.left.insert(e,t,o),null):0===y?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,o)),d.fixUp()}removeMin(){if(this.left.isEmpty())return Hs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return Hs.EMPTY;o=d.right.min(),d=d.copy(o.key,o.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw an();const e=this.left.check();if(e!==this.right.check())throw an();return e+(this.isRed()?0:1)}}Hs.EMPTY=null,Hs.RED=!0,Hs.BLACK=!1,Hs.EMPTY=new class{constructor(){this.size=0}get key(){throw an()}get value(){throw an()}get color(){throw an()}get left(){throw an()}get right(){throw an()}copy(i,e,t,o,d){return this}insert(i,e,t){return new Hs(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ei{constructor(e){this.comparator=e,this.data=new Mi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const d=o.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gl(this.data.getIterator())}getIteratorFrom(e){return new Gl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Ei)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,y=o.getNext().key;if(0!==this.comparator(d,y))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ei(this.comparator);return t.data=e,t}}class Gl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ps(i){return i.hasNext()?i.getNext():void 0}class ts{constructor(e){this.fields=e,e.sort(Rr.comparator)}static empty(){return new ts([])}unionWith(e){let t=new Ei(Rr.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new ts(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xr(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Os{constructor(e){this.value=e}static empty(){return new Os({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!qt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zt(t)}setAll(e){let t=Rr.emptyPath(),o={},d=[];e.forEach((I,x)=>{if(!t.isImmediateParentOf(x)){const G=this.getFieldsMap(t);this.applyChanges(G,o,d),o={},d=[],t=x.popLast()}I?o[x.lastSegment()]=Zt(I):d.push(x.lastSegment())});const y=this.getFieldsMap(t);this.applyChanges(y,o,d)}delete(e){const t=this.field(e.popLast());qt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let d=t.mapValue.fields[e.get(o)];qt(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,o){Js(t,(d,y)=>e[d]=y);for(const d of o)delete e[d]}clone(){return new Os(Zt(this.value))}}function Eu(i){const e=[];return Js(i.fields,(t,o)=>{const d=new Rr([t]);if(qt(o)){const y=Eu(o.mapValue).fields;if(0===y.length)e.push(d);else for(const I of y)e.push(d.child(I))}else e.push(d)}),new ts(e)}class si{constructor(e,t,o,d,y,I,x){this.key=e,this.documentType=t,this.version=o,this.readTime=d,this.createTime=y,this.data=I,this.documentState=x}static newInvalidDocument(e){return new si(e,0,mn.min(),mn.min(),mn.min(),Os.empty(),0)}static newFoundDocument(e,t,o,d){return new si(e,1,t,mn.min(),o,d,0)}static newNoDocument(e,t){return new si(e,2,t,mn.min(),mn.min(),Os.empty(),0)}static newUnknownDocument(e,t){return new si(e,3,t,mn.min(),mn.min(),Os.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Os.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Os.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof si&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new si(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wl{constructor(e,t=null,o=[],d=[],y=null,I=null,x=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=d,this.limit=y,this.startAt=I,this.endAt=x,this.ft=null}}function nl(i,e=null,t=[],o=[],d=null,y=null,I=null){return new Wl(i,e,t,o,d,y,I)}function gl(i){const e=zt(i);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>_a(o)).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),Lo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>w(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>w(o)).join(",")),e.ft=t}return e.ft}function Do(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!nc(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!bl(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!xa(i.startAt,e.startAt)&&xa(i.endAt,e.endAt)}function rl(i){return Gt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function ml(i,e){return i.filters.filter(t=>t instanceof xr&&t.field.isEqual(e))}function Pl(i,e,t){let o=us,d=!0;for(const y of ml(i,e)){let I=us,x=!0;switch(y.op){case"<":case"<=":I=kr(y.value);break;case"==":case"in":case">=":I=y.value;break;case">":I=y.value,x=!1;break;case"!=":case"not-in":I=us}ki({value:o,inclusive:d},{value:I,inclusive:x})<0&&(o=I,d=x)}if(null!==t)for(let y=0;y<i.orderBy.length;++y)if(i.orderBy[y].field.isEqual(e)){const I=t.position[y];ki({value:o,inclusive:d},{value:I,inclusive:t.inclusive})<0&&(o=I,d=t.inclusive);break}return{value:o,inclusive:d}}function ku(i,e,t){let o=ma,d=!0;for(const y of ml(i,e)){let I=ma,x=!0;switch(y.op){case">=":case">":I=_s(y.value),x=!1;break;case"==":case"in":case"<=":I=y.value;break;case"<":I=y.value,x=!1;break;case"!=":case"not-in":I=ma}Ra({value:o,inclusive:d},{value:I,inclusive:x})>0&&(o=I,d=x)}if(null!==t)for(let y=0;y<i.orderBy.length;++y)if(i.orderBy[y].field.isEqual(e)){const I=t.position[y];Ra({value:o,inclusive:d},{value:I,inclusive:t.inclusive})>0&&(o=I,d=t.inclusive);break}return{value:o,inclusive:d}}class Ui{constructor(e,t=null,o=[],d=[],y=null,I="F",x=null,G=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=d,this.limit=y,this.limitType=I,this.startAt=x,this.endAt=G,this.dt=null,this._t=null}}function Ol(i){return new Ui(i)}function Vu(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function zl(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Kl(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Du(i){return null!==i.collectionGroup}function Ha(i){const e=zt(i);if(null===e.dt){e.dt=[];const t=Kl(e),o=zl(e);if(null!==t&&null===o)t.isKeyField()||e.dt.push(new Xo(t)),e.dt.push(new Xo(Rr.keyField(),"asc"));else{let d=!1;for(const y of e.explicitOrderBy)e.dt.push(y),y.field.isKeyField()&&(d=!0);if(!d){const y=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Xo(Rr.keyField(),y))}}}return e.dt}function ns(i){const e=zt(i);if(!e._t)if("F"===e.limitType)e._t=nl(e.path,e.collectionGroup,Ha(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const y of Ha(e))t.push(new Xo(y.field,"desc"===y.dir?"asc":"desc"));const o=e.endAt?new Wi(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new Wi(e.startAt.position,e.startAt.inclusive):null;e._t=nl(e.path,e.collectionGroup,t,e.filters,e.limit,o,d)}return e._t}function Yl(i,e){e.getFirstInequalityField(),Kl(i);const t=i.filters.concat([e]);return new Ui(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Io(i,e,t){return new Ui(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function yl(i,e){return Do(ns(i),ns(e))&&i.limitType===e.limitType}function ko(i){return`${gl(ns(i))}|lt:${i.limitType}`}function Rl(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(o=>Al(o)).join(", ")}]`),Lo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(o=>{return`${(d=o).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>w(o)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>w(o)).join(",")),`Target(${t})`}(ns(i))}; limitType=${i.limitType})`}function Ql(i,e){return e.isFoundDocument()&&function(t,o){const d=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):Gt.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(i,e)&&function(t,o){for(const d of Ha(t))if(!d.field.isKeyField()&&null===o.data.field(d.field))return!1;return!0}(i,e)&&function(t,o){for(const d of t.filters)if(!d.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(d,y,I){const x=el(d,y,I);return d.inclusive?x<=0:x<0}(t.startAt,Ha(t),o)||t.endAt&&!function(d,y,I){const x=el(d,y,I);return d.inclusive?x>=0:x>0}(t.endAt,Ha(t),o)));var t,o}function au(i){return(e,t)=>{let o=!1;for(const d of Ha(i)){const y=lu(d,e,t);if(0!==y)return y;o=o||d.field.isKeyField()}return 0}}function lu(i,e,t){const o=i.field.isKeyField()?Gt.comparator(e.key,t.key):function(d,y,I){const x=y.data.field(d),G=I.data.field(d);return null!==x&&null!==G?S(x,G):an()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return an()}}function uu(i,e){if(i.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ms(e)?"-0":e}}function Iu(i){return{integerValue:""+i}}function Bu(i,e){return function qo(i){return"number"==typeof i&&Number.isInteger(i)&&!Ms(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}(e)?Iu(e):uu(i,e)}class cu{constructor(){this._=void 0}}function rc(i,e,t){return i instanceof $a?function(o,d){const y={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&(y.fields.__previous_value__=d),{mapValue:y}}(t,e):i instanceof Uo?Da(i,e):i instanceof Pi?il(i,e):function(o,d){const y=vs(o,d),I=ql(y)+ql(o.gt);return re(y)&&re(o.gt)?Iu(I):uu(o.yt,I)}(i,e)}function ju(i,e,t){return i instanceof Uo?Da(i,e):i instanceof Pi?il(i,e):t}function vs(i,e){return i instanceof Ia?re(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class $a extends cu{}class Uo extends cu{constructor(e){super(),this.elements=e}}function Da(i,e){const t=_l(e);for(const o of i.elements)t.some(d=>cs(d,o))||t.push(o);return{arrayValue:{values:t}}}class Pi extends cu{constructor(e){super(),this.elements=e}}function il(i,e){let t=_l(e);for(const o of i.elements)t=t.filter(d=>!cs(d,o));return{arrayValue:{values:t}}}class Ia extends cu{constructor(e,t){super(),this.yt=e,this.gt=t}}function ql(i){return gi(i.integerValue||i.doubleValue)}function _l(i){return ce(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class xl{constructor(e,t){this.field=e,this.transform=t}}class a{constructor(e,t){this.version=e,this.transformResults=t}}class l{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new l}static exists(e){return new l(void 0,e)}static updateTime(e){return new l(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function c(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class v{}function b(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new tn(i.key,l.none()):new We(i.key,i.data,l.none());{const t=i.data,o=Os.empty();let d=new Ei(Rr.comparator);for(let y of e.fields)if(!d.has(y)){let I=t.field(y);null===I&&y.length>1&&(y=y.popLast(),I=t.field(y)),null===I?o.delete(y):o.set(y,I),d=d.add(y)}return new mt(i.key,o,new ts(d.toArray()),l.none())}}function H(i,e,t){i instanceof We?function(o,d,y){const I=o.value.clone(),x=Dn(o.fieldTransforms,d,y.transformResults);I.setAll(x),d.convertToFoundDocument(y.version,I).setHasCommittedMutations()}(i,e,t):i instanceof mt?function(o,d,y){if(!c(o.precondition,d))return void d.convertToUnknownDocument(y.version);const I=Dn(o.fieldTransforms,d,y.transformResults),x=d.data;x.setAll(Ht(o)),x.setAll(I),d.convertToFoundDocument(y.version,x).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ne(i,e,t,o){return i instanceof We?function(d,y,I,x){if(!c(d.precondition,y))return I;const G=d.value.clone(),Z=wn(d.fieldTransforms,x,y);return G.setAll(Z),y.convertToFoundDocument(y.version,G).setHasLocalMutations(),null}(i,e,t,o):i instanceof mt?function(d,y,I,x){if(!c(d.precondition,y))return I;const G=wn(d.fieldTransforms,x,y),Z=y.data;return Z.setAll(Ht(d)),Z.setAll(G),y.convertToFoundDocument(y.version,Z).setHasLocalMutations(),null===I?null:I.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(pe=>pe.field))}(i,e,t,o):(I=t,c(i.precondition,y=e)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):I);var y,I}function ge(i,e){let t=null;for(const o of i.fieldTransforms){const d=e.data.field(o.field),y=vs(o.transform,d||null);null!=y&&(null===t&&(t=Os.empty()),t.set(o.field,y))}return t||null}function be(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Xr(t,o,(d,y)=>function O(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Uo&&o instanceof Uo||t instanceof Pi&&o instanceof Pi?Xr(t.elements,o.elements,cs):t instanceof Ia&&o instanceof Ia?cs(t.gt,o.gt):t instanceof $a&&o instanceof $a);var t,o}(d,y))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class We extends v{constructor(e,t,o,d=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class mt extends v{constructor(e,t,o,d,y=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=d,this.fieldTransforms=y,this.type=1}getFieldMask(){return this.fieldMask}}function Ht(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Dn(i,e,t){const o=new Map;Xt(i.length===t.length);for(let d=0;d<t.length;d++){const y=i[d],I=y.transform,x=e.data.field(y.field);o.set(y.field,ju(I,x,t[d]))}return o}function wn(i,e,t){const o=new Map;for(const d of i){const y=d.transform,I=t.data.field(d.field);o.set(d.field,rc(y,I,e))}return o}class tn extends v{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yn extends v{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Er{constructor(e){this.count=e}}var jn,An;function Oi(i){if(void 0===i)return Ai("GRPC error has no .code"),lt.UNKNOWN;switch(i){case jn.OK:return lt.OK;case jn.CANCELLED:return lt.CANCELLED;case jn.UNKNOWN:return lt.UNKNOWN;case jn.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case jn.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case jn.INTERNAL:return lt.INTERNAL;case jn.UNAVAILABLE:return lt.UNAVAILABLE;case jn.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case jn.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case jn.NOT_FOUND:return lt.NOT_FOUND;case jn.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case jn.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case jn.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case jn.ABORTED:return lt.ABORTED;case jn.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case jn.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case jn.DATA_LOSS:return lt.DATA_LOSS;default:return an()}}(An=jn||(jn={}))[An.OK=0]="OK",An[An.CANCELLED=1]="CANCELLED",An[An.UNKNOWN=2]="UNKNOWN",An[An.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",An[An.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",An[An.NOT_FOUND=5]="NOT_FOUND",An[An.ALREADY_EXISTS=6]="ALREADY_EXISTS",An[An.PERMISSION_DENIED=7]="PERMISSION_DENIED",An[An.UNAUTHENTICATED=16]="UNAUTHENTICATED",An[An.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",An[An.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",An[An.ABORTED=10]="ABORTED",An[An.OUT_OF_RANGE=11]="OUT_OF_RANGE",An[An.UNIMPLEMENTED=12]="UNIMPLEMENTED",An[An.INTERNAL=13]="INTERNAL",An[An.UNAVAILABLE=14]="UNAVAILABLE",An[An.DATA_LOSS=15]="DATA_LOSS";class eo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[d,y]of o)if(this.equalsFn(d,e))return y}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),d=this.inner[o];if(void 0===d)return this.inner[o]=[[e,t]],void this.innerSize++;for(let y=0;y<d.length;y++)if(this.equalsFn(d[y][0],e))return void(d[y]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return 1===o.length?delete this.inner[t]:o.splice(d,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,(t,o)=>{for(const[d,y]of o)e(d,y)})}isEmpty(){return ga(this.inner)}size(){return this.innerSize}}const Na=new Mi(Gt.comparator);function jr(){return Na}const Jo=new Mi(Gt.comparator);function Co(...i){let e=Jo;for(const t of i)e=e.insert(t.key,t);return e}function La(i){let e=Jo;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function ea(){return sl()}function Zl(){return sl()}function sl(){return new eo(i=>i.toString(),(i,e)=>i.isEqual(e))}const kc=new Mi(Gt.comparator),ic=new Ei(Gt.comparator);function Ft(...i){let e=ic;for(const t of i)e=e.add(t);return e}const Sn=new Ei(Jt);function Fn(){return Sn}class Pr{constructor(e,t,o,d,y){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=d,this.resolvedLimboDocuments=y}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const d=new Map;return d.set(e,Es.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new Pr(mn.min(),d,Fn(),jr(),Ft())}}class Es{constructor(e,t,o,d,y){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=d,this.removedDocuments=y}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Es(o,t,Ft(),Ft(),Ft())}}class Ga{constructor(e,t,o,d){this.It=e,this.removedTargetIds=t,this.key=o,this.Tt=d}}class wo{constructor(e,t){this.targetId=e,this.Et=t}}class Nl{constructor(e,t,o=Gi.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=d}}class Vi{constructor(){this.At=0,this.Rt=to(),this.bt=Gi.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Ft(),t=Ft(),o=Ft();return this.Rt.forEach((d,y)=>{switch(y){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:o=o.add(d);break;default:an()}}),new Es(this.bt,this.Pt,e,t,o)}xt(){this.vt=!1,this.Rt=to()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Uc{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=jr(),this.qt=Hu(),this.Ut=new Ei(Jt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const o=this.Wt(t);switch(e.state){case 0:this.zt(t)&&o.Dt(e.resumeToken);break;case 1:o.Mt(),o.Vt||o.xt(),o.Dt(e.resumeToken);break;case 2:o.Mt(),o.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(o.Ft(),o.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),o.Dt(e.resumeToken));break;default:an()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((o,d)=>{this.zt(d)&&t(d)})}Jt(e){const t=e.targetId,o=e.Et.count,d=this.Yt(t);if(d){const y=d.target;if(rl(y))if(0===o){const I=new Gt(y.path);this.Qt(t,I,si.newNoDocument(I,mn.min()))}else Xt(1===o);else this.Xt(t)!==o&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((y,I)=>{const x=this.Yt(I);if(x){if(y.current&&rl(x.target)){const G=new Gt(x.target.path);null!==this.Lt.get(G)||this.te(I,G)||this.Qt(I,G,si.newNoDocument(G,e))}y.St&&(t.set(I,y.Ct()),y.xt())}});let o=Ft();this.qt.forEach((y,I)=>{let x=!0;I.forEachWhile(G=>{const Z=this.Yt(G);return!Z||2===Z.purpose||(x=!1,!1)}),x&&(o=o.add(y))}),this.Lt.forEach((y,I)=>I.setReadTime(e));const d=new Pr(e,t,this.Ut,this.Lt,o);return this.Lt=jr(),this.qt=Hu(),this.Ut=new Ei(Jt),d}Gt(e,t){if(!this.zt(e))return;const o=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,o),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,o){if(!this.zt(e))return;const d=this.Wt(e);this.te(e,t)?d.Nt(t,1):d.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),o&&(this.Lt=this.Lt.insert(t,o))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new Vi,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new Ei(Jt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Lt("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new Vi),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function Hu(){return new Mi(Gt.comparator)}function to(){return new Mi(Gt.comparator)}const Ll={asc:"ASCENDING",desc:"DESCENDING"},ta={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fl={and:"AND",or:"OR"};class sc{constructor(e,t){this.databaseId=e,this.wt=t}}function du(i,e){return i.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sd(i,e){return i.wt?e.toBase64():e.toUint8Array()}function bd(i,e){return du(i,e.toTimestamp())}function ds(i){return Xt(!!i),mn.fromTimestamp(function(e){const t=Ua(e);return new _r(t.seconds,t.nanos)}(i))}function Ad(i,e){return(t=i,new Wn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function mh(i){const e=Wn.fromString(i);return Xt(vf(e)),e}function oc(i,e){return Ad(i.databaseId,e.path)}function Xl(i,e){const t=mh(e);if(t.get(1)!==i.databaseId.projectId)throw new M(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new M(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Gt(Vc(t))}function Md(i,e){return Ad(i.databaseId,e)}function yh(i){const e=mh(i);return 4===e.length?Wn.emptyPath():Vc(e)}function $u(i){return new Wn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Vc(i){return Xt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Bc(i,e,t){return{name:oc(i,e),fields:t.value.mapValue.fields}}function Pd(i,e){let t;if(e instanceof We)t={update:Bc(i,e.key,e.value)};else if(e instanceof tn)t={delete:oc(i,e.key)};else if(e instanceof mt)t={update:Bc(i,e.key,e.data),updateMask:_f(e.fieldMask)};else{if(!(e instanceof yn))return an();t={verify:oc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(d,y){const I=y.transform;if(I instanceof $a)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(I instanceof Uo)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:I.elements}};if(I instanceof Pi)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:I.elements}};if(I instanceof Ia)return{fieldPath:y.field.canonicalString(),increment:I.gt};throw an()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:bd(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:an()),t;var d}function Od(i,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?l.updateTime(ds(d.updateTime)):void 0!==d.exists?l.exists(d.exists):l.none():l.none(),o=e.updateTransforms?e.updateTransforms.map(d=>function(y,I){let x=null;"setToServerValue"in I?(Xt("REQUEST_TIME"===I.setToServerValue),x=new $a):"appendMissingElements"in I?x=new Uo(I.appendMissingElements.values||[]):"removeAllFromArray"in I?x=new Pi(I.removeAllFromArray.values||[]):"increment"in I?x=new Ia(y,I.increment):an();const G=Rr.fromServerFormat(I.fieldPath);return new xl(G,x)}(i,d)):[];var d;if(e.update){const d=Xl(i,e.update.name),y=new Os({mapValue:{fields:e.update.fields}});if(e.updateMask){const I=new ts((e.updateMask.fieldPaths||[]).map(Z=>Rr.fromServerFormat(Z)));return new mt(d,y,I,t,o)}return new We(d,y,t,o)}if(e.delete){const d=Xl(i,e.delete);return new tn(d,t)}if(e.verify){const d=Xl(i,e.verify);return new yn(d,t)}return an()}function Rd(i,e){return{documents:[Md(i,e.path)]}}function jc(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Md(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Md(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const d=function(G){if(0!==G.length)return Eh(hi.create(G,"and"))}(e.filters);d&&(t.structuredQuery.where=d);const y=function(G){if(0!==G.length)return G.map(Z=>{return{field:uc((pe=Z).field),direction:_h(pe.dir)};var pe})}(e.orderBy);y&&(t.structuredQuery.orderBy=y);const I=(Z=e.limit,i.wt||Lo(Z)?Z:{value:Z});var Z,x,G;return null!==I&&(t.structuredQuery.limit=I),e.startAt&&(t.structuredQuery.startAt={before:(x=e.startAt).inclusive,values:x.position}),e.endAt&&(t.structuredQuery.endAt={before:!(G=e.endAt).inclusive,values:G.position}),t}function lc(i){let e=yh(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let d=null;if(o>0){Xt(1===o);const pe=t.from[0];pe.allDescendants?d=pe.collectionId:e=e.child(pe.collectionId)}let y=[];t.where&&(y=function(pe){const Te=Nd(pe);return Te instanceof hi&&hl(Te)?Te.getFilters():[Te]}(t.where));let I=[];t.orderBy&&(I=t.orderBy.map(pe=>{return new Xo(cc((Te=pe).field),function(st){switch(st){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Te.direction));var Te}));let x=null;t.limit&&(x=function(pe){let Te;return Te="object"==typeof pe?pe.value:pe,Lo(Te)?null:Te}(t.limit));let G=null;var pe;t.startAt&&(G=new Wi((pe=t.startAt).values||[],!!pe.before));let Z=null;return t.endAt&&(Z=function(pe){return new Wi(pe.values||[],!pe.before)}(t.endAt)),function Uu(i,e,t,o,d,y,I,x){return new Ui(i,e,t,o,d,y,I,x)}(e,d,I,y,x,"F",G,Z)}function Nd(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=cc(e.unaryFilter.field);return xr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const o=cc(e.unaryFilter.field);return xr.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=cc(e.unaryFilter.field);return xr.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=cc(e.unaryFilter.field);return xr.create(y,"!=",{nullValue:"NULL_VALUE"});default:return an()}}(i):void 0!==i.fieldFilter?xr.create(cc((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return an()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return hi.create(e.compositeFilter.filters.map(t=>Nd(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return an()}}(e.compositeFilter.op))}(i):an();var e}function _h(i){return Ll[i]}function vh(i){return ta[i]}function hu(i){return Fl[i]}function uc(i){return{fieldPath:i.canonicalString()}}function cc(i){return Rr.fromServerFormat(i.fieldPath)}function Eh(i){return i instanceof xr?function(e){if("=="===e.op){if(Dt(e.value))return{unaryFilter:{field:uc(e.field),op:"IS_NAN"}};if(Ve(e.value))return{unaryFilter:{field:uc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Dt(e.value))return{unaryFilter:{field:uc(e.field),op:"IS_NOT_NAN"}};if(Ve(e.value))return{unaryFilter:{field:uc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uc(e.field),op:vh(e.op),value:e.value}}}(i):i instanceof hi?function(e){const t=e.getFilters().map(o=>Eh(o));return 1===t.length?t[0]:{compositeFilter:{op:hu(e.op),filters:t}}}(i):an()}function _f(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Rs(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Dh(e)),e=dc(i.get(t),e);return Dh(e)}function dc(i,e){let t=e;const o=i.length;for(let d=0;d<o;d++){const y=i.charAt(d);switch(y){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=y}}return t}function Dh(i){return i+"\x01\x01"}function kl(i){const e=i.length;if(Xt(e>=2),2===e)return Xt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Wn.emptyPath();const t=e-2,o=[];let d="";for(let y=0;y<e;){const I=i.indexOf("\x01",y);switch((I<0||I>t)&&an(),i.charAt(I+1)){case"\x01":const x=i.substring(y,I);let G;0===d.length?G=x:(d+=x,G=d,d=""),o.push(G);break;case"\x10":d+=i.substring(y,I),d+="\0";break;case"\x11":d+=i.substring(y,I+1);break;default:an()}y=I+2}return new Wn(o)}const Ih=["userId","batchId"];function Hc(i,e){return[i,Rs(e)]}function Ch(i,e,t){return[i,Rs(e),t]}const lg={},Ef=["prefixPath","collectionGroup","readTime","documentId"],ug=["prefixPath","collectionGroup","documentId"],g=["collectionGroup","readTime","prefixPath","documentId"],h=["canonicalId","targetId"],f=["targetId","path"],E=["path","targetId"],A=["collectionId","parent"],U=["indexId","uid"],K=["uid","sequenceNumber"],fe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ce=["indexId","uid","orderedDocumentKey"],xe=["userId","collectionPath","documentId"],gt=["userId","collectionPath","largestBatchId"],_t=["userId","collectionGroup","largestBatchId"],Tt=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_n=[...Tt,"documentOverlays"],zn=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ii=zn,To=[...Ii,"indexConfiguration","indexState","indexEntries"];class fu extends Hl{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function $s(i,e){const t=zt(i);return ys.M(t.se,e)}class hc{constructor(e,t,o,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=d}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const y=this.mutations[d];y.key.isEqual(e.key)&&H(y,e,o[d])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=ne(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=ne(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=Zl();return this.mutations.forEach(d=>{const y=e.get(d.key),I=y.overlayedDocument;let x=this.applyToLocalView(I,y.mutatedFields);x=t.has(d.key)?null:x;const G=b(I,x);null!==G&&o.set(d.key,G),I.isValidDocument()||I.convertToNoDocument(mn.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ft())}isEqual(e){return this.batchId===e.batchId&&Xr(this.mutations,e.mutations,(t,o)=>be(t,o))&&Xr(this.baseMutations,e.baseMutations,(t,o)=>be(t,o))}}class Ld{constructor(e,t,o,d){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=d}static from(e,t,o){Xt(e.mutations.length===o.length);let d=kc;const y=e.mutations;for(let I=0;I<y.length;I++)d=d.insert(y[I].key,o[I].version);return new Ld(e,t,o,d)}}class wh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jl{constructor(e,t,o,d,y=mn.min(),I=mn.min(),x=Gi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=d,this.snapshotVersion=y,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=x}withSequenceNumber(e){return new Jl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Df{constructor(e){this.ie=e}}function cg(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:xs(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:oc(d=i.ie,(y=e).key),fields:y.data.value.mapValue.fields,updateTime:du(d,y.version.toTimestamp()),createTime:du(d,y.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Wu(e.version)};else{if(!e.isUnknownDocument())return an();o.unknownDocument={path:t.path.toArray(),version:Wu(e.version)}}var d,y;return o}function xs(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Wu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fc(i){const e=new _r(i.seconds,i.nanoseconds);return mn.fromTimestamp(e)}function Cu(i,e){const t=(e.baseMutations||[]).map(y=>Od(i.ie,y));for(let y=0;y<e.mutations.length-1;++y)y+1<e.mutations.length&&void 0!==e.mutations[y+1].transform&&(e.mutations[y].updateTransforms=e.mutations[y+1].transform.fieldTransforms,e.mutations.splice(y+1,1),++y);const o=e.mutations.map(y=>Od(i.ie,y)),d=_r.fromMillis(e.localWriteTimeMs);return new hc(e.batchId,d,t,o)}function pc(i){const e=fc(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?fc(i.lastLimboFreeSnapshotVersion):mn.min();let o;var d;return void 0!==i.query.documents?(Xt(1===(d=i.query).documents.length),o=ns(Ol(yh(d.documents[0])))):o=ns(lc(i.query)),new Jl(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Gi.fromBase64String(i.resumeToken))}function dg(i,e){const t=Wu(e.snapshotVersion),o=Wu(e.lastLimboFreeSnapshotVersion);let d;d=rl(e.target)?Rd(i.ie,e.target):jc(i.ie,e.target);const y=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:gl(e.target),readTime:t,resumeToken:y,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:d}}function Cf(i){const e=lc({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Io(e,e.limit,"L"):e}function wf(i,e){return new wh(e.largestBatchId,Od(i.ie,e.overlayMutation))}function hg(i,e){const t=e.path.lastSegment();return[i,Rs(e.path.popLast()),t]}function Tf(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Wu(o.readTime),documentKey:Rs(o.documentKey.path),largestBatchId:o.largestBatchId}}class F_{getBundleMetadata(e,t){return iy(e).get(t).next(o=>{if(o)return{id:(d=o).bundleId,createTime:fc(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return iy(e).put({bundleId:(o=t).id,createTime:Wu(ds(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return $c(e).get(t).next(o=>{if(o)return{name:(d=o).name,query:Cf(d.bundledQuery),readTime:fc(d.readTime)};var d})}saveNamedQuery(e,t){return $c(e).put({name:(o=t).name,readTime:Wu(ds(o.readTime)),bundledQuery:o.bundledQuery});var o}}function iy(i){return $s(i,"bundles")}function $c(i){return $s(i,"namedQueries")}class Gc{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new Gc(e,t.uid||"")}getOverlay(e,t){return Wc(e).get(hg(this.userId,t)).next(o=>o?wf(this.yt,o):null)}getOverlays(e,t){const o=ea();return et.forEach(t,d=>this.getOverlay(e,d).next(y=>{null!==y&&o.set(d,y)})).next(()=>o)}saveOverlays(e,t,o){const d=[];return o.forEach((y,I)=>{const x=new wh(t,I);d.push(this.oe(e,x))}),et.waitFor(d)}removeOverlaysForBatchId(e,t,o){const d=new Set;t.forEach(I=>d.add(Rs(I.getCollectionPath())));const y=[];return d.forEach(I=>{const x=IDBKeyRange.bound([this.userId,I,o],[this.userId,I,o+1],!1,!0);y.push(Wc(e).Y("collectionPathOverlayIndex",x))}),et.waitFor(y)}getOverlaysForCollection(e,t,o){const d=ea(),y=Rs(t),I=IDBKeyRange.bound([this.userId,y,o],[this.userId,y,Number.POSITIVE_INFINITY],!0);return Wc(e).W("collectionPathOverlayIndex",I).next(x=>{for(const G of x){const Z=wf(this.yt,G);d.set(Z.getKey(),Z)}return d})}getOverlaysForCollectionGroup(e,t,o,d){const y=ea();let I;const x=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wc(e).Z({index:"collectionGroupOverlayIndex",range:x},(G,Z,pe)=>{const Te=wf(this.yt,Z);y.size()<d||Te.largestBatchId===I?(y.set(Te.getKey(),Te),I=Te.largestBatchId):pe.done()}).next(()=>y)}oe(e,t){return Wc(e).put(function(o,d,y){const[I,x,G]=hg(d,y.mutation.key);return{userId:d,collectionPath:x,documentId:G,collectionGroup:y.mutation.key.getCollectionGroup(),largestBatchId:y.largestBatchId,overlayMutation:Pd(o.ie,y.mutation)}}(this.yt,this.userId,t))}}function Wc(i){return $s(i,"documentOverlays")}class zu{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(gi(e.integerValue));else if("doubleValue"in e){const o=gi(e.doubleValue);isNaN(o)?this.he(t,13):(this.he(t,15),Ms(o)?t.le(0):t.le(o))}else if("timestampValue"in e){const o=e.timestampValue;this.he(t,20),"string"==typeof o?t.fe(o):(t.fe(`${o.seconds||""}`),t.le(o.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(ll(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.he(t,45),t.le(o.latitude||0),t.le(o.longitude||0)}else"mapValue"in e?nr(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):an()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const o=e.fields||{};this.he(t,55);for(const d of Object.keys(o))this.de(d,t),this.ce(o[d],t)}ye(e,t){const o=e.values||[];this.he(t,50);for(const d of o)this.ce(d,t)}me(e,t){this.he(t,37),Gt.fromName(e).path.forEach(o=>{this.he(t,60),this.pe(o,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function fg(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function pg(i){const e=64-function(t){let o=0;for(let d=0;d<8;++d){const y=fg(255&t[d]);if(o+=y,8!==y)break}return o}(i);return Math.ceil(e/8)}zu.Ie=new zu;class sy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ee(o.value),o=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.be(o.value),o=t.next();this.Pe()}ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ee(o);else if(o<2048)this.Ee(960|o>>>6),this.Ee(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|o>>>12),this.Ee(128|63&o>>>6),this.Ee(128|63&o);else{const d=t.codePointAt(0);this.Ee(240|d>>>18),this.Ee(128|63&d>>>12),this.Ee(128|63&d>>>6),this.Ee(128|63&d)}}this.Ae()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.be(o);else if(o<2048)this.be(960|o>>>6),this.be(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.be(480|o>>>12),this.be(128|63&o>>>6),this.be(128|63&o);else{const d=t.codePointAt(0);this.be(240|d>>>18),this.be(128|63&d>>>12),this.be(128|63&d>>>6),this.be(128|63&d)}}this.Pe()}Se(e){const t=this.De(e),o=pg(t);this.Ce(1+o),this.buffer[this.position++]=255&o;for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=255&t[d]}xe(e){const t=this.De(e),o=pg(t);this.Ce(1+o),this.buffer[this.position++]=~(255&o);for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(d){const y=new DataView(new ArrayBuffer(8));return y.setFloat64(0,d,!1),new Uint8Array(y.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let d=1;d<t.length;++d)t[d]^=o?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const d=new Uint8Array(o);d.set(this.buffer),this.buffer=d}}class gg{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class mg{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class gc{constructor(){this.$e=new sy,this.Be=new gg(this.$e),this.Le=new mg(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class zc{constructor(e,t,o,d){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=d}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new zc(this.indexId,this.documentKey,this.arrayValue,o)}}function pu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=yg(i.arrayValue,e.arrayValue),0!==t?t:(t=yg(i.directionalValue,e.directionalValue),0!==t?t:Gt.comparator(i.documentKey,e.documentKey)))}function yg(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Sf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const o=t;o.isInequality()?this.Qe=o:this.Ge.push(o)}}je(e){Xt(e.collectionGroup===this.collectionId);const t=Ma(e);if(void 0!==t&&!this.We(t))return!1;const o=pa(e);let d=0,y=0;for(;d<o.length&&this.We(o[d]);++d);if(d===o.length)return!0;if(void 0!==this.Qe){const I=o[d];if(!this.ze(this.Qe,I)||!this.He(this.Ke[y++],I))return!1;++d}for(;d<o.length;++d)if(y>=this.Ke.length||!this.He(this.Ke[y++],o[d]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function bf(i){var e,t;if(Xt(i instanceof xr||i instanceof hi),i instanceof xr){if(i instanceof ja){const d=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(y=>xr.create(i.field,"==",y)))||[];return hi.create(d,"or")}return i}const o=i.filters.map(d=>bf(d));return hi.create(o,i.op)}function _g(i){if(0===i.getFilters().length)return[];const e=Kc(bf(i));return Xt(Th(e)),wu(e)||Af(e)?[e]:e.getFilters()}function wu(i){return i instanceof xr}function Af(i){return i instanceof hi&&hl(i)}function Th(i){return wu(i)||Af(i)||function(e){if(e instanceof hi&&dl(e)){for(const t of e.getFilters())if(!wu(t)&&!Af(t))return!1;return!0}return!1}(i)}function Kc(i){if(Xt(i instanceof xr||i instanceof hi),i instanceof xr)return i;if(1===i.filters.length)return Kc(i.filters[0]);const e=i.filters.map(o=>Kc(o));let t=hi.create(e,i.op);return t=mc(t),Th(t)?t:(Xt(t instanceof hi),Xt(cl(t)),Xt(t.filters.length>1),t.filters.reduce((o,d)=>Mf(o,d)))}function Mf(i,e){let t;return Xt(i instanceof xr||i instanceof hi),Xt(e instanceof xr||e instanceof hi),t=i instanceof xr?e instanceof xr?hi.create([i,e],"and"):Sh(i,e):e instanceof xr?Sh(e,i):function(o,d){if(Xt(o.filters.length>0&&d.filters.length>0),cl(o)&&cl(d))return Zo(o,d.getFilters());const y=dl(o)?o:d,I=dl(o)?d:o,x=y.filters.map(G=>Mf(G,I));return hi.create(x,"or")}(i,e),mc(t)}function Sh(i,e){if(cl(e))return Zo(e,i.getFilters());{const t=e.filters.map(o=>Mf(i,o));return hi.create(t,"or")}}function mc(i){if(Xt(i instanceof xr||i instanceof hi),i instanceof xr)return i;const e=i.getFilters();if(1===e.length)return mc(e[0]);if(fl(i))return i;const t=e.map(d=>mc(d)),o=[];return t.forEach(d=>{d instanceof xr?o.push(d):d instanceof hi&&(d.op===i.op?o.push(...d.filters):o.push(d))}),1===o.length?o[0]:hi.create(o,i.op)}class yc{constructor(){this.Je=new bh}addToCollectionParentIndex(e,t){return this.Je.add(t),et.resolve()}getCollectionParents(e,t){return et.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return et.resolve()}deleteFieldIndex(e,t){return et.resolve()}getDocumentsMatchingTarget(e,t){return et.resolve(null)}getIndexType(e,t){return et.resolve(0)}getFieldIndexes(e,t){return et.resolve([])}getNextCollectionGroupToUpdate(e){return et.resolve(null)}getMinOffset(e,t){return et.resolve(Bs.min())}getMinOffsetFromCollectionGroup(e,t){return et.resolve(Bs.min())}updateCollectionGroup(e,t,o){return et.resolve()}updateIndexEntries(e,t){return et.resolve()}}class bh{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t]||new Ei(Wn.comparator),y=!d.has(o);return this.index[t]=d.add(o),y}has(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t];return d&&d.has(o)}getEntries(e){return(this.index[e]||new Ei(Wn.comparator)).toArray()}}const Yc=new Uint8Array(0);class oy{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new bh,this.Xe=new eo(o=>gl(o),(o,d)=>Do(o,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const o=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const y={collectionId:o,parent:Rs(d)};return vg(e).put(y)}return et.resolve()}getCollectionParents(e,t){const o=[],d=IDBKeyRange.bound([t,""],[Vs(t),""],!1,!0);return vg(e).W(d).next(y=>{for(const I of y){if(I.collectionId!==t)break;o.push(kl(I.parent))}return o})}addFieldIndex(e,t){const o=Tu(e),d={indexId:(I=t).indexId,collectionGroup:I.collectionGroup,fields:I.fields.map(x=>[x.fieldPath.canonicalString(),x.kind])};var I;delete d.indexId;const y=o.add(d);if(t.indexState){const I=Fd(e);return y.next(x=>{I.put(Tf(x,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return y.next()}deleteFieldIndex(e,t){const o=Tu(e),d=Fd(e),y=Qc(e);return o.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>y.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Qc(e);let d=!0;const y=new Map;return et.forEach(this.Ze(t),I=>this.tn(e,I).next(x=>{d&&(d=!!x),y.set(I,x)})).next(()=>{if(d){let I=Ft();const x=[];return et.forEach(y,(G,Z)=>{var pe;Lt("IndexedDbIndexManager",`Using index ${pe=G,`id=${pe.indexId}|cg=${pe.collectionGroup}|f=${pe.fields.map(Ci=>`${Ci.fieldPath}:${Ci.kind}`).join(",")}`} to execute ${gl(t)}`);const Te=function(Ci,oa){const is=Ma(oa);if(void 0===is)return null;for(const xi of ml(Ci,is.fieldPath))switch(xi.op){case"array-contains-any":return xi.value.arrayValue.values||[];case"array-contains":return[xi.value]}return null}(Z,G),st=function(Ci,oa){const is=new Map;for(const xi of pa(oa))for(const aa of ml(Ci,xi.fieldPath))switch(aa.op){case"==":case"in":is.set(xi.fieldPath.canonicalString(),aa.value);break;case"not-in":case"!=":return is.set(xi.fieldPath.canonicalString(),aa.value),Array.from(is.values())}return null}(Z,G),St=function(Ci,oa){const is=[];let xi=!0;for(const aa of pa(oa)){const wd=0===aa.kind?Pl(Ci,aa.fieldPath,Ci.startAt):ku(Ci,aa.fieldPath,Ci.startAt);is.push(wd.value),xi&&(xi=wd.inclusive)}return new Wi(is,xi)}(Z,G),kt=function(Ci,oa){const is=[];let xi=!0;for(const aa of pa(oa)){const wd=0===aa.kind?ku(Ci,aa.fieldPath,Ci.endAt):Pl(Ci,aa.fieldPath,Ci.endAt);is.push(wd.value),xi&&(xi=wd.inclusive)}return new Wi(is,xi)}(Z,G),vn=this.en(G,Z,St),Hn=this.en(G,Z,kt),hs=this.nn(G,Z,st),rs=this.sn(G.indexId,Te,vn,St.inclusive,Hn,kt.inclusive,hs);return et.forEach(rs,Ci=>o.J(Ci,t.limit).next(oa=>{oa.forEach(is=>{const xi=Gt.fromSegments(is.documentKey);I.has(xi)||(I=I.add(xi),x.push(xi))})}))}).next(()=>x)}return et.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:_g(hi.create(e.filters,"and")).map(o=>nl(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,o,d,y,I,x){const G=(null!=t?t.length:1)*Math.max(o.length,y.length),Z=G/(null!=t?t.length:1),pe=[];for(let Te=0;Te<G;++Te){const st=t?this.rn(t[Te/Z]):Yc,St=this.on(e,st,o[Te%Z],d),kt=this.un(e,st,y[Te%Z],I),vn=x.map(Hn=>this.on(e,st,Hn,!0));pe.push(...this.createRange(St,kt,vn))}return pe}on(e,t,o,d){const y=new zc(e,Gt.empty(),t,o);return d?y:y.Ue()}un(e,t,o,d){const y=new zc(e,Gt.empty(),t,o);return d?y.Ue():y}tn(e,t){const o=new Sf(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(y=>{let I=null;for(const x of y)o.je(x)&&(!I||x.fields.length>I.fields.length)&&(I=x);return I})}getIndexType(e,t){let o=2;const d=this.Ze(t);return et.forEach(d,y=>this.tn(e,y).next(I=>{I?0!==o&&I.fields.length<function(x){let G=new Ei(Rr.comparator),Z=!1;for(const pe of x.filters)for(const Te of pe.getFlattenedFilters())Te.field.isKeyField()||("array-contains"===Te.op||"array-contains-any"===Te.op?Z=!0:G=G.add(Te.field));for(const pe of x.orderBy)pe.field.isKeyField()||(G=G.add(pe.field));return G.size+(Z?1:0)}(y)&&(o=1):o=0})).next(()=>null!==t.limit&&d.length>1&&2===o?1:o)}cn(e,t){const o=new gc;for(const d of pa(e)){const y=t.data.field(d.fieldPath);if(null==y)return null;const I=o.qe(d.kind);zu.Ie.ue(y,I)}return o.Fe()}rn(e){const t=new gc;return zu.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const o=new gc;return zu.Ie.ue($(this.databaseId,t),o.qe(function(d){const y=pa(d);return 0===y.length?0:y[y.length-1].kind}(e))),o.Fe()}nn(e,t,o){if(null===o)return[];let d=[];d.push(new gc);let y=0;for(const I of pa(e)){const x=o[y++];for(const G of d)if(this.hn(t,I.fieldPath)&&ce(x))d=this.ln(d,I,x);else{const Z=G.qe(I.kind);zu.Ie.ue(x,Z)}}return this.fn(d)}en(e,t,o){return this.nn(e,t,o.position)}fn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Fe();return t}ln(e,t,o){const d=[...e],y=[];for(const I of o.arrayValue.values||[])for(const x of d){const G=new gc;G.seed(x.Fe()),zu.Ie.ue(I,G.qe(t.kind)),y.push(G)}return y}hn(e,t){return!!e.filters.find(o=>o instanceof xr&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Tu(e),d=Fd(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(y=>{const I=[];return et.forEach(y,x=>d.get([x.indexId,this.uid]).next(G=>{I.push(function(Z,pe){const Te=pe?new As(pe.sequenceNumber,new Bs(fc(pe.readTime),new Gt(kl(pe.documentKey)),pe.largestBatchId)):As.empty(),st=Z.fields.map(([St,kt])=>new as(Rr.fromServerFormat(St),kt));return new Eo(Z.indexId,Z.collectionGroup,st,Te)}(x,G))})).next(()=>I)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,d)=>{const y=o.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==y?y:Jt(o.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const d=Tu(e),y=Fd(e);return this.dn(e).next(I=>d.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(x=>et.forEach(x,G=>y.put(Tf(G.indexId,this.user,I,o)))))}updateIndexEntries(e,t){const o=new Map;return et.forEach(t,(d,y)=>{const I=o.get(d.collectionGroup);return(I?et.resolve(I):this.getFieldIndexes(e,d.collectionGroup)).next(x=>(o.set(d.collectionGroup,x),et.forEach(x,G=>this._n(e,d,G).next(Z=>{const pe=this.wn(y,G);return Z.isEqual(pe)?et.resolve():this.mn(e,y,G,Z,pe)}))))})}gn(e,t,o,d){return Qc(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.an(o,t.key),documentKey:t.key.path.toArray()})}yn(e,t,o,d){return Qc(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.an(o,t.key),t.key.path.toArray()])}_n(e,t,o){const d=Qc(e);let y=new Ei(pu);return d.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.an(o,t)])},(I,x)=>{y=y.add(new zc(o.indexId,t,x.arrayValue,x.directionalValue))}).next(()=>y)}wn(e,t){let o=new Ei(pu);const d=this.cn(t,e);if(null==d)return o;const y=Ma(t);if(null!=y){const I=e.data.field(y.fieldPath);if(ce(I))for(const x of I.arrayValue.values||[])o=o.add(new zc(t.indexId,e.key,this.rn(x),d))}else o=o.add(new zc(t.indexId,e.key,Yc,d));return o}mn(e,t,o,d,y){Lt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const I=[];return function(x,G,Z,pe,Te){const st=x.getIterator(),St=G.getIterator();let kt=Ps(st),vn=Ps(St);for(;kt||vn;){let Hn=!1,hs=!1;if(kt&&vn){const rs=Z(kt,vn);rs<0?hs=!0:rs>0&&(Hn=!0)}else null!=kt?hs=!0:Hn=!0;Hn?(pe(vn),vn=Ps(St)):hs?(Te(kt),kt=Ps(st)):(kt=Ps(st),vn=Ps(St))}}(d,y,pu,x=>{I.push(this.gn(e,t,o,x))},x=>{I.push(this.yn(e,t,o,x))}),et.waitFor(I)}dn(e){let t=1;return Fd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,d,y)=>{y.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((I,x)=>pu(I,x)).filter((I,x,G)=>!x||0!==pu(I,G[x-1]));const d=[];d.push(e);for(const I of o){const x=pu(I,e),G=pu(I,t);if(0===x)d[0]=e.Ue();else if(x>0&&G<0)d.push(I),d.push(I.Ue());else if(G>0)break}d.push(t);const y=[];for(let I=0;I<d.length;I+=2){if(this.pn(d[I],d[I+1]))return[];y.push(IDBKeyRange.bound([d[I].indexId,this.uid,d[I].arrayValue,d[I].directionalValue,Yc,[]],[d[I+1].indexId,this.uid,d[I+1].arrayValue,d[I+1].directionalValue,Yc,[]]))}return y}pn(e,t){return pu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Eg)}getMinOffset(e,t){return et.mapArray(this.Ze(t),o=>this.tn(e,o).next(d=>d||an())).next(Eg)}}function vg(i){return $s(i,"collectionParents")}function Qc(i){return $s(i,"indexEntries")}function Tu(i){return $s(i,"indexConfiguration")}function Fd(i){return $s(i,"indexState")}function Eg(i){Xt(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const d=i[o].indexState.offset;Tl(d,e)<0&&(e=d),t<d.largestBatchId&&(t=d.largestBatchId)}return new Bs(e.readTime,e.documentKey,t)}const Dg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fa{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Fa(e,Fa.DEFAULT_COLLECTION_PERCENTILE,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ig(i,e,t){const o=i.store("mutations"),d=i.store("documentMutations"),y=[],I=IDBKeyRange.only(t.batchId);let x=0;const G=o.Z({range:I},(pe,Te,st)=>(x++,st.delete()));y.push(G.next(()=>{Xt(1===x)}));const Z=[];for(const pe of t.mutations){const Te=Ch(e,pe.key.path,t.batchId);y.push(d.delete(Te)),Z.push(pe.key)}return et.waitFor(y).next(()=>Z)}function kd(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw an();e=i.noDocument}return JSON.stringify(e).length}Fa.DEFAULT_COLLECTION_PERCENTILE=10,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fa.DEFAULT=new Fa(41943040,Fa.DEFAULT_COLLECTION_PERCENTILE,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fa.DISABLED=new Fa(-1,0,0);class Ah{constructor(e,t,o,d){this.userId=e,this.yt=t,this.indexManager=o,this.referenceDelegate=d,this.In={}}static re(e,t,o,d){Xt(""!==e.uid);const y=e.isAuthenticated()?e.uid:"";return new Ah(y,t,o,d)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _c(e).Z({index:"userMutationsIndex",range:o},(d,y,I)=>{t=!1,I.done()}).next(()=>t)}addMutationBatch(e,t,o,d){const y=qc(e),I=_c(e);return I.add({}).next(x=>{Xt("number"==typeof x);const G=new hc(x,t,o,d),Z=function(st,St,kt){const vn=kt.baseMutations.map(hs=>Pd(st.ie,hs)),Hn=kt.mutations.map(hs=>Pd(st.ie,hs));return{userId:St,batchId:kt.batchId,localWriteTimeMs:kt.localWriteTime.toMillis(),baseMutations:vn,mutations:Hn}}(this.yt,this.userId,G),pe=[];let Te=new Ei((st,St)=>Jt(st.canonicalString(),St.canonicalString()));for(const st of d){const St=Ch(this.userId,st.key.path,x);Te=Te.add(st.key.path.popLast()),pe.push(I.put(Z)),pe.push(y.put(St,lg))}return Te.forEach(st=>{pe.push(this.indexManager.addToCollectionParentIndex(e,st))}),e.addOnCommittedListener(()=>{this.In[x]=G.keys()}),et.waitFor(pe).next(()=>G)})}lookupMutationBatch(e,t){return _c(e).get(t).next(o=>o?(Xt(o.userId===this.userId),Cu(this.yt,o)):null)}Tn(e,t){return this.In[t]?et.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const d=o.keys();return this.In[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,d=IDBKeyRange.lowerBound([this.userId,o]);let y=null;return _c(e).Z({index:"userMutationsIndex",range:d},(I,x,G)=>{x.userId===this.userId&&(Xt(x.batchId>=o),y=Cu(this.yt,x)),G.done()}).next(()=>y)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return _c(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(d,y,I)=>{o=y.batchId,I.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _c(e).W("userMutationsIndex",t).next(o=>o.map(d=>Cu(this.yt,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Hc(this.userId,t.path),d=IDBKeyRange.lowerBound(o),y=[];return qc(e).Z({range:d},(I,x,G)=>{const[Z,pe,Te]=I,st=kl(pe);if(Z===this.userId&&t.path.isEqual(st))return _c(e).get(Te).next(St=>{if(!St)throw an();Xt(St.userId===this.userId),y.push(Cu(this.yt,St))});G.done()}).next(()=>y)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Ei(Jt);const d=[];return t.forEach(y=>{const I=Hc(this.userId,y.path),x=IDBKeyRange.lowerBound(I),G=qc(e).Z({range:x},(Z,pe,Te)=>{const[st,St,kt]=Z,vn=kl(St);st===this.userId&&y.path.isEqual(vn)?o=o.add(kt):Te.done()});d.push(G)}),et.waitFor(d).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1,y=Hc(this.userId,o),I=IDBKeyRange.lowerBound(y);let x=new Ei(Jt);return qc(e).Z({range:I},(G,Z,pe)=>{const[Te,st,St]=G,kt=kl(st);Te===this.userId&&o.isPrefixOf(kt)?kt.length===d&&(x=x.add(St)):pe.done()}).next(()=>this.En(e,x))}En(e,t){const o=[],d=[];return t.forEach(y=>{d.push(_c(e).get(y).next(I=>{if(null===I)throw an();Xt(I.userId===this.userId),o.push(Cu(this.yt,I))}))}),et.waitFor(d).next(()=>o)}removeMutationBatch(e,t){return Ig(e.se,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),et.forEach(o,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return et.resolve();const o=IDBKeyRange.lowerBound([this.userId]),d=[];return qc(e).Z({range:o},(y,I,x)=>{if(y[0]===this.userId){const G=kl(y[1]);d.push(G)}else x.done()}).next(()=>{Xt(0===d.length)})})}containsKey(e,t){return Pf(e,this.userId,t)}Rn(e){return Zc(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Pf(i,e,t){const o=Hc(e,t.path),d=o[1],y=IDBKeyRange.lowerBound(o);let I=!1;return qc(i).Z({range:y,X:!0},(x,G,Z)=>{const[pe,Te,st]=x;pe===e&&Te===d&&(I=!0),Z.done()}).next(()=>I)}function _c(i){return $s(i,"mutations")}function qc(i){return $s(i,"documentMutations")}function Zc(i){return $s(i,"mutationQueues")}class vc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new vc(0)}static vn(){return new vc(-1)}}class Xc{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new vc(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>mn.fromTimestamp(new _r(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(d=>(d.highestListenSequenceNumber=t,o&&(d.lastRemoteSnapshotVersion=o.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.Sn(e,d)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>gu(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(Xt(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let d=0;const y=[];return gu(e).Z((I,x)=>{const G=pc(x);G.sequenceNumber<=t&&null===o.get(G.targetId)&&(d++,y.push(this.removeTargetData(e,G)))}).next(()=>et.waitFor(y)).next(()=>d)}forEachTarget(e,t){return gu(e).Z((o,d)=>{const y=pc(d);t(y)})}Vn(e){return Cg(e).get("targetGlobalKey").next(t=>(Xt(null!==t),t))}Sn(e,t){return Cg(e).put("targetGlobalKey",t)}Dn(e,t){return gu(e).put(dg(this.yt,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=gl(t),d=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let y=null;return gu(e).Z({range:d,index:"queryTargetsIndex"},(I,x,G)=>{const Z=pc(x);Do(t,Z.target)&&(y=Z,G.done())}).next(()=>y)}addMatchingKeys(e,t,o){const d=[],y=Su(e);return t.forEach(I=>{const x=Rs(I.path);d.push(y.put({targetId:o,path:x})),d.push(this.referenceDelegate.addReference(e,o,I))}),et.waitFor(d)}removeMatchingKeys(e,t,o){const d=Su(e);return et.forEach(t,y=>{const I=Rs(y.path);return et.waitFor([d.delete([o,I]),this.referenceDelegate.removeReference(e,o,y)])})}removeMatchingKeysForTargetId(e,t){const o=Su(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(d)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),d=Su(e);let y=Ft();return d.Z({range:o,X:!0},(I,x,G)=>{const Z=kl(I[1]),pe=new Gt(Z);y=y.add(pe)}).next(()=>y)}containsKey(e,t){const o=Rs(t.path),d=IDBKeyRange.bound([o],[Vs(o)],!1,!0);let y=0;return Su(e).Z({index:"documentTargetsIndex",X:!0,range:d},([I,x],G,Z)=>{0!==I&&(y++,Z.done())}).next(()=>y>0)}ne(e,t){return gu(e).get(t).next(o=>o?pc(o):null)}}function gu(i){return $s(i,"targets")}function Cg(i){return $s(i,"targetGlobal")}function Su(i){return $s(i,"targetDocuments")}function wg([i,e],[t,o]){const d=Jt(i,t);return 0===d?Jt(e,o):d}class ay{constructor(e){this.xn=e,this.buffer=new Ei(wg),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();wg(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ly{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Lt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,m.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){ls(o)?Lt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Ro(o)}yield t.Fn(3e5)}))}}class Tg{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return et.resolve(js.at);const o=new ay(t);return this.$n.forEachTarget(e,d=>o.On(d.sequenceNumber)).next(()=>this.$n.Ln(e,d=>o.On(d))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Lt("LruGarbageCollector","Garbage collection skipped; disabled"),et.resolve(Dg)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dg):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let o,d,y,I,x,G,Z;const pe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Te=>(Te>this.params.maximumSequenceNumbersToCollect?(Lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Te}`),d=this.params.maximumSequenceNumbersToCollect):d=Te,I=Date.now(),this.nthSequenceNumber(e,d))).next(Te=>(o=Te,x=Date.now(),this.removeTargets(e,o,t))).next(Te=>(y=Te,G=Date.now(),this.removeOrphanedDocuments(e,o))).next(Te=>(Z=Date.now(),Ji()<=V.in.DEBUG&&Lt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${I-pe}ms\n\tDetermined least recently used ${d} in `+(x-I)+`ms\n\tRemoved ${y} targets in `+(G-x)+`ms\n\tRemoved ${Te} documents in `+(Z-G)+`ms\nTotal Duration: ${Z-pe}ms`),et.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:y,documentsRemoved:Te})))}}class Sg{constructor(e,t){this.db=e,this.garbageCollector=new Tg(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(d=>o+d))}Un(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,d)=>t(d))}addReference(e,t,o){return Jc(e,o)}removeReference(e,t,o){return Jc(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Jc(e,t)}Gn(e,t){return function(o,d){let y=!1;return Zc(o).tt(I=>Pf(o,I,d).next(x=>(x&&(y=!0),et.resolve(!x)))).next(()=>y)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let y=0;return this.Kn(e,(I,x)=>{if(x<=t){const G=this.Gn(e,I).next(Z=>{if(!Z)return y++,o.getEntry(e,I).next(()=>(o.removeEntry(I,mn.min()),Su(e).delete([0,Rs(I.path)])))});d.push(G)}}).next(()=>et.waitFor(d)).next(()=>o.apply(e)).next(()=>y)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Jc(e,t)}Kn(e,t){const o=Su(e);let d,y=js.at;return o.Z({index:"documentTargetsIndex"},([I,x],{path:G,sequenceNumber:Z})=>{0===I?(y!==js.at&&t(new Gt(kl(d)),y),y=Z,d=G):y=js.at}).next(()=>{y!==js.at&&t(new Gt(kl(d)),y)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Jc(i,e){return Su(i).put((o=i.currentSequenceNumber,{targetId:0,path:Rs(e.path),sequenceNumber:o}));var o}class Mh{constructor(){this.changes=new eo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,si.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?et.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uy{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Ec(e).put(o)}removeEntry(e,t,o){return Ec(e).delete(function(d,y){const I=d.path.toArray();return[I.slice(0,I.length-2),I[I.length-2],xs(y),I[I.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=si.newInvalidDocument(t);return Ec(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vd(t))},(d,y)=>{o=this.jn(t,y)}).next(()=>o)}Wn(e,t){let o={size:0,document:si.newInvalidDocument(t)};return Ec(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vd(t))},(d,y)=>{o={document:this.jn(t,y),size:kd(y)}}).next(()=>o)}getEntries(e,t){let o=jr();return this.zn(e,t,(d,y)=>{const I=this.jn(d,y);o=o.insert(d,I)}).next(()=>o)}Hn(e,t){let o=jr(),d=new Mi(Gt.comparator);return this.zn(e,t,(y,I)=>{const x=this.jn(y,I);o=o.insert(y,x),d=d.insert(y,kd(I))}).next(()=>({documents:o,Jn:d}))}zn(e,t,o){if(t.isEmpty())return et.resolve();let d=new Ei(Of);t.forEach(G=>d=d.add(G));const y=IDBKeyRange.bound(Vd(d.first()),Vd(d.last())),I=d.getIterator();let x=I.getNext();return Ec(e).Z({index:"documentKeyIndex",range:y},(G,Z,pe)=>{const Te=Gt.fromSegments([...Z.prefixPath,Z.collectionGroup,Z.documentId]);for(;x&&Of(x,Te)<0;)o(x,null),x=I.getNext();x&&x.isEqual(Te)&&(o(x,Z),x=I.hasNext()?I.getNext():null),x?pe.j(Vd(x)):pe.done()}).next(()=>{for(;x;)o(x,null),x=I.hasNext()?I.getNext():null})}getDocumentsMatchingQuery(e,t,o,d){const y=t.path,I=[y.popLast().toArray(),y.lastSegment(),xs(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],x=[y.popLast().toArray(),y.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ec(e).W(IDBKeyRange.bound(I,x,!0)).next(G=>{let Z=jr();for(const pe of G){const Te=this.jn(Gt.fromSegments(pe.prefixPath.concat(pe.collectionGroup,pe.documentId)),pe);Te.isFoundDocument()&&(Ql(t,Te)||d.has(Te.key))&&(Z=Z.insert(Te.key,Te))}return Z})}getAllFromCollectionGroup(e,t,o,d){let y=jr();const I=Ag(t,o),x=Ag(t,Bs.max());return Ec(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(I,x,!0)},(G,Z,pe)=>{const Te=this.jn(Gt.fromSegments(Z.prefixPath.concat(Z.collectionGroup,Z.documentId)),Z);y=y.insert(Te.key,Te),y.size===d&&pe.done()}).next(()=>y)}newChangeBuffer(e){return new Ud(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return bg(e).get("remoteDocumentGlobalKey").next(t=>(Xt(!!t),t))}Qn(e,t){return bg(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function If(i,e){let t;if(e.document)t=function Gu(i,e,t){const o=Xl(i,e.name),d=ds(e.updateTime),y=e.createTime?ds(e.createTime):mn.min(),I=new Os({mapValue:{fields:e.fields}}),x=si.newFoundDocument(o,d,y,I);return t&&x.setHasCommittedMutations(),t?x.setHasCommittedMutations():x}(i.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Gt.fromSegments(e.noDocument.path),d=fc(e.noDocument.readTime);t=si.newNoDocument(o,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return an();{const o=Gt.fromSegments(e.unknownDocument.path),d=fc(e.unknownDocument.version);t=si.newUnknownDocument(o,d)}}return e.readTime&&t.setReadTime(function(o){const d=new _r(o[0],o[1]);return mn.fromTimestamp(d)}(e.readTime)),t}(this.yt,t);if(!o.isNoDocument()||!o.version.isEqual(mn.min()))return o}return si.newInvalidDocument(e)}}function Ph(i){return new uy(i)}class Ud extends Mh{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new eo(o=>o.toString(),(o,d)=>o.isEqual(d))}applyChanges(e){const t=[];let o=0,d=new Ei((y,I)=>Jt(y.canonicalString(),I.canonicalString()));return this.changes.forEach((y,I)=>{const x=this.Xn.get(y);if(t.push(this.Yn.removeEntry(e,y,x.readTime)),I.isValidDocument()){const G=cg(this.Yn.yt,I);d=d.add(y.path.popLast());const Z=kd(G);o+=Z-x.size,t.push(this.Yn.addEntry(e,y,G))}else if(o-=x.size,this.trackRemovals){const G=cg(this.Yn.yt,I.convertToNoDocument(mn.min()));t.push(this.Yn.addEntry(e,y,G))}}),d.forEach(y=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,y))}),t.push(this.Yn.updateMetadata(e,o)),et.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:d})=>(d.forEach((y,I)=>{this.Xn.set(y,{size:I,readTime:o.get(y).readTime})}),o))}}function bg(i){return $s(i,"remoteDocumentGlobal")}function Ec(i){return $s(i,"remoteDocumentsV14")}function Vd(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ag(i,e){const t=e.documentKey.path.toArray();return[i,xs(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Of(i,e){const t=i.path.toArray(),o=e.path.toArray();let d=0;for(let y=0;y<t.length-2&&y<o.length-2;++y)if(d=Jt(t[y],o[y]),d)return d;return d=Jt(t.length,o.length),d||(d=Jt(t[t.length-2],o[o.length-2]),d||Jt(t[t.length-1],o[o.length-1]))}class Mg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Pg{constructor(e,t,o,d){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=d}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(d=>(o=d,this.remoteDocumentCache.getEntry(e,t))).next(d=>(null!==o&&ne(o.mutation,d,ts.empty(),_r.now()),d))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,Ft()).next(()=>o))}getLocalViewOfDocuments(e,t,o=Ft()){const d=ea();return this.populateOverlays(e,d,t).next(()=>this.computeViews(e,t,d,o).next(y=>{let I=Co();return y.forEach((x,G)=>{I=I.insert(x,G.overlayedDocument)}),I}))}getOverlayedDocuments(e,t){const o=ea();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,Ft()))}populateOverlays(e,t,o){const d=[];return o.forEach(y=>{t.has(y)||d.push(y)}),this.documentOverlayCache.getOverlays(e,d).next(y=>{y.forEach((I,x)=>{t.set(I,x)})})}computeViews(e,t,o,d){let y=jr();const I=sl(),x=sl();return t.forEach((G,Z)=>{const pe=o.get(Z.key);d.has(Z.key)&&(void 0===pe||pe.mutation instanceof mt)?y=y.insert(Z.key,Z):void 0!==pe?(I.set(Z.key,pe.mutation.getFieldMask()),ne(pe.mutation,Z,pe.mutation.getFieldMask(),_r.now())):I.set(Z.key,ts.empty())}),this.recalculateAndSaveOverlays(e,y).next(G=>(G.forEach((Z,pe)=>I.set(Z,pe)),t.forEach((Z,pe)=>{var Te;return x.set(Z,new Mg(pe,null!==(Te=I.get(Z))&&void 0!==Te?Te:null))}),x))}recalculateAndSaveOverlays(e,t){const o=sl();let d=new Mi((I,x)=>I-x),y=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(I=>{for(const x of I)x.keys().forEach(G=>{const Z=t.get(G);if(null===Z)return;let pe=o.get(G)||ts.empty();pe=x.applyToLocalView(Z,pe),o.set(G,pe);const Te=(d.get(x.batchId)||Ft()).add(G);d=d.insert(x.batchId,Te)})}).next(()=>{const I=[],x=d.getReverseIterator();for(;x.hasNext();){const G=x.getNext(),Z=G.key,pe=G.value,Te=Zl();pe.forEach(st=>{if(!y.has(st)){const St=b(t.get(st),o.get(st));null!==St&&Te.set(st,St),y=y.add(st)}}),I.push(this.documentOverlayCache.saveOverlays(e,Z,Te))}return et.waitFor(I)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return Gt.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Du(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var d}getNextDocuments(e,t,o,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,d).next(y=>{const I=d-y.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,d-y.size):et.resolve(ea());let x=-1,G=y;return I.next(Z=>et.forEach(Z,(pe,Te)=>(x<Te.largestBatchId&&(x=Te.largestBatchId),y.get(pe)?et.resolve():this.remoteDocumentCache.getEntry(e,pe).next(st=>{G=G.insert(pe,st)}))).next(()=>this.populateOverlays(e,Z,y)).next(()=>this.computeViews(e,G,Z,Ft())).next(pe=>({batchId:x,changes:La(pe)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Gt(t)).next(o=>{let d=Co();return o.isFoundDocument()&&(d=d.insert(o.key,o)),d})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const d=t.collectionGroup;let y=Co();return this.indexManager.getCollectionParents(e,d).next(I=>et.forEach(I,x=>{const G=(Z=t,pe=x.child(d),new Ui(pe,null,Z.explicitOrderBy.slice(),Z.filters.slice(),Z.limit,Z.limitType,Z.startAt,Z.endAt));var Z,pe;return this.getDocumentsMatchingCollectionQuery(e,G,o).next(Z=>{Z.forEach((pe,Te)=>{y=y.insert(pe,Te)})})}).next(()=>y))}getDocumentsMatchingCollectionQuery(e,t,o){let d;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next(y=>(d=y,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,d))).next(y=>{d.forEach((x,G)=>{const Z=G.getKey();null===y.get(Z)&&(y=y.insert(Z,si.newInvalidDocument(Z)))});let I=Co();return y.forEach((x,G)=>{const Z=d.get(x);void 0!==Z&&ne(Z.mutation,G,ts.empty(),_r.now()),Ql(t,G)&&(I=I.insert(x,G))}),I})}}class ed{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return et.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:ds(o.createTime)}),et.resolve()}getNamedQuery(e,t){return et.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:Cf(o.bundledQuery),readTime:ds(o.readTime)}),et.resolve();var o}}class bu{constructor(){this.overlays=new Mi(Gt.comparator),this.es=new Map}getOverlay(e,t){return et.resolve(this.overlays.get(t))}getOverlays(e,t){const o=ea();return et.forEach(t,d=>this.getOverlay(e,d).next(y=>{null!==y&&o.set(d,y)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((d,y)=>{this.oe(e,t,y)}),et.resolve()}removeOverlaysForBatchId(e,t,o){const d=this.es.get(o);return void 0!==d&&(d.forEach(y=>this.overlays=this.overlays.remove(y)),this.es.delete(o)),et.resolve()}getOverlaysForCollection(e,t,o){const d=ea(),y=t.length+1,I=new Gt(t.child("")),x=this.overlays.getIteratorFrom(I);for(;x.hasNext();){const G=x.getNext().value,Z=G.getKey();if(!t.isPrefixOf(Z.path))break;Z.path.length===y&&G.largestBatchId>o&&d.set(G.getKey(),G)}return et.resolve(d)}getOverlaysForCollectionGroup(e,t,o,d){let y=new Mi((Z,pe)=>Z-pe);const I=this.overlays.getIterator();for(;I.hasNext();){const Z=I.getNext().value;if(Z.getKey().getCollectionGroup()===t&&Z.largestBatchId>o){let pe=y.get(Z.largestBatchId);null===pe&&(pe=ea(),y=y.insert(Z.largestBatchId,pe)),pe.set(Z.getKey(),Z)}}const x=ea(),G=y.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((Z,pe)=>x.set(Z,pe)),!(x.size()>=d)););return et.resolve(x)}oe(e,t,o){const d=this.overlays.get(o.key);if(null!==d){const I=this.es.get(d.largestBatchId).delete(o.key);this.es.set(d.largestBatchId,I)}this.overlays=this.overlays.insert(o.key,new wh(t,o));let y=this.es.get(t);void 0===y&&(y=Ft(),this.es.set(t,y)),this.es.set(t,y.add(o.key))}}class Rf{constructor(){this.ns=new Ei(na.ss),this.rs=new Ei(na.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new na(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new na(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new Gt(new Wn([])),o=new na(t,e),d=new na(t,e+1),y=[];return this.rs.forEachInRange([o,d],I=>{this.cs(I),y.push(I.key)}),y}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Gt(new Wn([])),o=new na(t,e),d=new na(t,e+1);let y=Ft();return this.rs.forEachInRange([o,d],I=>{y=y.add(I.key)}),y}containsKey(e){const t=new na(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class na{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Gt.comparator(e.key,t.key)||Jt(e._s,t._s)}static os(e,t){return Jt(e._s,t._s)||Gt.comparator(e.key,t.key)}}class k_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Ei(na.ss)}checkEmpty(e){return et.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,d){const y=this.ws;this.ws++;const I=new hc(y,t,o,d);this.mutationQueue.push(I);for(const x of d)this.gs=this.gs.add(new na(x.key,y)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return et.resolve(I)}lookupMutationBatch(e,t){return et.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.ps(t+1),y=d<0?0:d;return et.resolve(this.mutationQueue.length>y?this.mutationQueue[y]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new na(t,0),d=new na(t,Number.POSITIVE_INFINITY),y=[];return this.gs.forEachInRange([o,d],I=>{const x=this.ys(I._s);y.push(x)}),et.resolve(y)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Ei(Jt);return t.forEach(d=>{const y=new na(d,0),I=new na(d,Number.POSITIVE_INFINITY);this.gs.forEachInRange([y,I],x=>{o=o.add(x._s)})}),et.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1;let y=o;Gt.isDocumentKey(y)||(y=y.child(""));const I=new na(new Gt(y),0);let x=new Ei(Jt);return this.gs.forEachWhile(G=>{const Z=G.key.path;return!!o.isPrefixOf(Z)&&(Z.length===d&&(x=x.add(G._s)),!0)},I),et.resolve(this.Is(x))}Is(e){const t=[];return e.forEach(o=>{const d=this.ys(o);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){Xt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return et.forEach(t.mutations,d=>{const y=new na(d.key,t.batchId);return o=o.delete(y),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new na(t,0),d=this.gs.firstAfterOrEqual(o);return et.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return et.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class U_{constructor(e){this.Es=e,this.docs=new Mi(Gt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,d=this.docs.get(o),y=d?d.size:0,I=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:I}),this.size+=I-y,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return et.resolve(o?o.document.mutableCopy():si.newInvalidDocument(t))}getEntries(e,t){let o=jr();return t.forEach(d=>{const y=this.docs.get(d);o=o.insert(d,y?y.document.mutableCopy():si.newInvalidDocument(d))}),et.resolve(o)}getDocumentsMatchingQuery(e,t,o,d){let y=jr();const I=t.path,x=new Gt(I.child("")),G=this.docs.getIteratorFrom(x);for(;G.hasNext();){const{key:Z,value:{document:pe}}=G.getNext();if(!I.isPrefixOf(Z.path))break;Z.path.length>I.length+1||Tl(al(pe),o)<=0||(d.has(pe.key)||Ql(t,pe))&&(y=y.insert(pe.key,pe.mutableCopy()))}return et.resolve(y)}getAllFromCollectionGroup(e,t,o,d){an()}As(e,t){return et.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new Og(this)}getSize(e){return et.resolve(this.size)}}class Og extends Mh{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,d)=>{d.isValidDocument()?t.push(this.Yn.addEntry(e,d)):this.Yn.removeEntry(o)}),et.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class V_{constructor(e){this.persistence=e,this.Rs=new eo(t=>gl(t),Do),this.lastRemoteSnapshotVersion=mn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Rf,this.targetCount=0,this.vs=vc.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,d)=>t(d)),et.resolve()}getLastRemoteSnapshotVersion(e){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return et.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),et.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new vc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,et.resolve()}updateTargetData(e,t){return this.Dn(t),et.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,et.resolve()}removeTargets(e,t,o){let d=0;const y=[];return this.Rs.forEach((I,x)=>{x.sequenceNumber<=t&&null===o.get(x.targetId)&&(this.Rs.delete(I),y.push(this.removeMatchingKeysForTargetId(e,x.targetId)),d++)}),et.waitFor(y).next(()=>d)}getTargetCount(e){return et.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return et.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),et.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const d=this.persistence.referenceDelegate,y=[];return d&&t.forEach(I=>{y.push(d.markPotentiallyOrphaned(e,I))}),et.waitFor(y)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),et.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return et.resolve(o)}containsKey(e,t){return et.resolve(this.Ps.containsKey(t))}}class xf{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new js(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new V_(this),this.indexManager=new yc,this.remoteDocumentCache=new U_(o=>this.referenceDelegate.xs(o)),this.yt=new Df(t),this.Ns=new ed(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new bu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new k_(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){Lt("MemoryPersistence","Starting transaction:",e);const d=new Rg(this.Ss.next());return this.referenceDelegate.ks(),o(d).next(y=>this.referenceDelegate.Os(d).next(()=>y)).toPromise().then(y=>(d.raiseOnCommittedEvent(),y))}Ms(e,t){return et.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class Rg extends Hl{constructor(e){super(),this.currentSequenceNumber=e}}class Oh{constructor(e){this.persistence=e,this.Fs=new Rf,this.$s=null}static Bs(e){return new Oh(e)}get Ls(){if(this.$s)return this.$s;throw an()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),et.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),et.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),et.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(d=>this.Ls.add(d.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(y=>this.Ls.add(y.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.Ls,o=>{const d=Gt.fromPath(o);return this.qs(e,d).next(y=>{y||t.removeEntry(d,mn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return et.or([()=>et.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class xg{constructor(e){this.yt=e}$(e,t,o,d){const y=new qs("createOrUpgrade",t);var x;o<1&&d>=1&&(e.createObjectStore("owner"),(x=e).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ih,{unique:!0}),x.createObjectStore("documentMutations"),Ng(e),function(x){x.createObjectStore("remoteDocuments")}(e));let I=et.resolve();return o<3&&d>=3&&(0!==o&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(e),Ng(e)),I=I.next(()=>function(x){const G=x.store("targetGlobal"),Z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mn.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",Z)}(y))),o<4&&d>=4&&(0!==o&&(I=I.next(()=>function(x,G){return G.store("mutations").W().next(Z=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ih,{unique:!0});const pe=G.store("mutations"),Te=Z.map(st=>pe.put(st));return et.waitFor(Te)})}(e,y))),I=I.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&d>=5&&(I=I.next(()=>this.Us(y))),o<6&&d>=6&&(I=I.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(y)))),o<7&&d>=7&&(I=I.next(()=>this.Gs(y))),o<8&&d>=8&&(I=I.next(()=>this.Qs(e,y))),o<9&&d>=9&&(I=I.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&d>=10&&(I=I.next(()=>this.js(y))),o<11&&d>=11&&(I=I.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&d>=12&&(I=I.next(()=>{!function(x){const G=x.createObjectStore("documentOverlays",{keyPath:xe});G.createIndex("collectionPathOverlayIndex",gt,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",_t,{unique:!1})}(e)})),o<13&&d>=13&&(I=I.next(()=>function(x){const G=x.createObjectStore("remoteDocumentsV14",{keyPath:Ef});G.createIndex("documentKeyIndex",ug),G.createIndex("collectionGroupIndex",g)}(e)).next(()=>this.Ws(e,y)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&d>=14&&(I=I.next(()=>this.zs(e,y))),o<15&&d>=15&&(I=I.next(()=>function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:U}).createIndex("sequenceNumberIndex",K,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:fe}).createIndex("documentKeyIndex",Ce,{unique:!1})}(e))),I}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,d)=>{t+=kd(d)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Us(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(d=>et.forEach(d,y=>{const I=IDBKeyRange.bound([y.userId,-1],[y.userId,y.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",I).next(x=>et.forEach(x,G=>{Xt(G.userId===y.userId);const Z=Cu(this.yt,G);return Ig(e,y.userId,Z).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const y=[];return o.Z((I,x)=>{const G=new Wn(I),Z=[0,Rs(G)];y.push(t.get(Z).next(pe=>pe?et.resolve():t.put({targetId:0,path:Rs(G),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>et.waitFor(y))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:A});const o=t.store("collectionParents"),d=new bh,y=I=>{if(d.add(I)){const x=I.lastSegment(),G=I.popLast();return o.put({collectionId:x,parent:Rs(G)})}};return t.store("remoteDocuments").Z({X:!0},(I,x)=>{const G=new Wn(I);return y(G.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([I,x,G],Z)=>{const pe=kl(x);return y(pe.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,d)=>{const y=pc(d),I=dg(this.yt,y);return t.put(I)})}Ws(e,t){const o=t.store("remoteDocuments"),d=[];return o.Z((y,I)=>{const x=t.store("remoteDocumentsV14"),G=(Z=I,Z.document?new Gt(Wn.fromString(Z.document.name).popFirst(5)):Z.noDocument?Gt.fromSegments(Z.noDocument.path):Z.unknownDocument?Gt.fromSegments(Z.unknownDocument.path):an()).path.toArray();var Z;const pe={prefixPath:G.slice(0,G.length-2),collectionGroup:G[G.length-2],documentId:G[G.length-1],readTime:I.readTime||[0,0],unknownDocument:I.unknownDocument,noDocument:I.noDocument,document:I.document,hasCommittedMutations:!!I.hasCommittedMutations};d.push(x.put(pe))}).next(()=>et.waitFor(d))}zs(e,t){const o=t.store("mutations"),d=Ph(this.yt),y=new xf(Oh.Bs,this.yt.ie);return o.W().next(I=>{const x=new Map;return I.forEach(G=>{var Z;let pe=null!==(Z=x.get(G.userId))&&void 0!==Z?Z:Ft();Cu(this.yt,G).keys().forEach(Te=>pe=pe.add(Te)),x.set(G.userId,pe)}),et.forEach(x,(G,Z)=>{const pe=new Xi(Z),Te=Gc.re(this.yt,pe),st=y.getIndexManager(pe),St=Ah.re(pe,this.yt,st,y.referenceDelegate);return new Pg(d,St,Te,st).recalculateAndSaveOverlaysForDocumentKeys(new fu(t,js.at),G).next()})})}}function Ng(i){i.createObjectStore("targetDocuments",{keyPath:f}).createIndex("documentTargetsIndex",E,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",h,{unique:!0}),i.createObjectStore("targetGlobal")}const Nf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vl{constructor(e,t,o,d,y,I,x,G,Z,pe,Te=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=y,this.window=I,this.document=x,this.Js=Z,this.Ys=pe,this.Xs=Te,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=st=>Promise.resolve(),!vl.C())throw new M(lt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Sg(this,d),this.ii=t+"main",this.yt=new Df(G),this.ri=new ys(this.ii,this.Xs,new xg(this.yt)),this.Cs=new Xc(this.referenceDelegate,this.yt),this.remoteDocumentCache=Ph(this.yt),this.Ns=new F_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===pe&&Ai("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new M(lt.FAILED_PRECONDITION,Nf);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new js(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,m.Z)(function*(d){if(t.started)return e(d)});return function(d){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,m.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,m.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(ls(e))return Lt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Lt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Bd(e).get("owner").next(t=>et.resolve(this.mi(t)))}gi(e){return jd(e).delete(this.clientId)}yi(){var e=this;return(0,m.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const d=$s(o,"clientMetadata");return d.W().next(y=>{const I=e.Ii(y,18e5),x=y.filter(G=>-1===I.indexOf(G));return et.forEach(x,G=>d.delete(G.clientId)).next(()=>x)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?et.resolve(!0):Bd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new M(lt.FAILED_PRECONDITION,Nf);return!1}}return!(!this.networkEnabled||!this.inForeground)||jd(e).W().next(o=>void 0===this.Ii(o,5e3).find(d=>!(this.clientId===d.clientId||!(!this.networkEnabled&&d.networkEnabled||!this.inForeground&&d.inForeground&&this.networkEnabled===d.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Lt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,m.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new fu(t,js.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>jd(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Ah.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new oy(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Gc.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){Lt("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",y=15===(I=this.Xs)?To:14===I?Ii:13===I?zn:12===I?_n:11===I?Tt:void an();var I;let x;return this.ri.runTransaction(e,d,y,G=>(x=new fu(G,this.Ss?this.Ss.next():js.at),"readwrite-primary"===t?this.fi(x).next(Z=>!!Z||this.di(x)).next(Z=>{if(!Z)throw Ai(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new M(lt.FAILED_PRECONDITION,ru);return o(x)}).next(Z=>this.wi(x).next(()=>Z)):this.Vi(x).next(()=>o(x)))).then(G=>(x.raiseOnCommittedEvent(),G))}Vi(e){return Bd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new M(lt.FAILED_PRECONDITION,Nf)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bd(e).put("owner",t)}static C(){return ys.C()}_i(e){const t=Bd(e);return t.get("owner").next(o=>this.mi(o)?(Lt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):et.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Ai(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,q.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Lt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Ai("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Ai("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bd(i){return $s(i,"owner")}function jd(i){return $s(i,"clientMetadata")}class Ff{constructor(e,t,o,d){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=d}static Ci(e,t){let o=Ft(),d=Ft();for(const y of t.docChanges)switch(y.type){case 0:o=o.add(y.doc.key);break;case 1:d=d.add(y.doc.key)}return new Ff(e,t.fromCache,o,d)}}class Lg{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,d){return this.ki(e,t).next(y=>y||this.Oi(e,t,d,o)).next(y=>y||this.Mi(e,t))}ki(e,t){if(Vu(t))return et.resolve(null);let o=ns(t);return this.indexManager.getIndexType(e,o).next(d=>0===d?null:(null!==t.limit&&1===d&&(t=Io(t,null,"F"),o=ns(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(y=>{const I=Ft(...y);return this.Ni.getDocuments(e,I).next(x=>this.indexManager.getMinOffset(e,o).next(G=>{const Z=this.Fi(t,x);return this.$i(t,Z,I,G.readTime)?this.ki(e,Io(t,null,"F")):this.Bi(e,Z,t,G)}))})))}Oi(e,t,o,d){return Vu(t)||d.isEqual(mn.min())?this.Mi(e,t):this.Ni.getDocuments(e,o).next(y=>{const I=this.Fi(t,y);return this.$i(t,I,o,d)?this.Mi(e,t):(Ji()<=V.in.DEBUG&&Lt("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),Rl(t)),this.Bi(e,I,t,function Pa(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,d=mn.fromTimestamp(1e9===o?new _r(t+1,0):new _r(t,o));return new Bs(d,Gt.empty(),e)}(d,-1)))})}Fi(e,t){let o=new Ei(au(e));return t.forEach((d,y)=>{Ql(e,y)&&(o=o.add(y))}),o}$i(e,t,o,d){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const y="F"===e.limitType?t.last():t.first();return!!y&&(y.hasPendingWrites||y.version.compareTo(d)>0)}Mi(e,t){return Ji()<=V.in.DEBUG&&Lt("QueryEngine","Using full collection scan to execute query:",Rl(t)),this.Ni.getDocumentsMatchingQuery(e,t,Bs.min())}Bi(e,t,o,d){return this.Ni.getDocumentsMatchingQuery(e,o,d).next(y=>(t.forEach(I=>{y=y.insert(I.key,I)}),y))}}class cy{constructor(e,t,o,d){this.persistence=e,this.Li=t,this.yt=d,this.qi=new Mi(Jt),this.Ui=new eo(y=>gl(y),Do),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pg(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function kf(i,e,t,o){return new cy(i,e,t,o)}function Fg(i,e){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,m.Z)(function*(i,e){const t=zt(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let d;return t.mutationQueue.getAllMutationBatches(o).next(y=>(d=y,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(y=>{const I=[],x=[];let G=Ft();for(const Z of d){I.push(Z.batchId);for(const pe of Z.mutations)G=G.add(pe.key)}for(const Z of y){x.push(Z.batchId);for(const pe of Z.mutations)G=G.add(pe.key)}return t.localDocuments.getDocuments(o,G).next(Z=>({ji:Z,removedBatchIds:I,addedBatchIds:x}))})})}),Uf.apply(this,arguments)}function Ir(i){const e=zt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Ug(i,e){const t=zt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function nd(i,e,t){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,m.Z)(function*(i,e,t){const o=zt(i),d=o.qi.get(e),y=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",y,I=>o.persistence.referenceDelegate.removeTarget(I,d)))}catch(I){if(!ls(I))throw I;Lt("LocalStore",`Failed to update sequence numbers for target ${e}: ${I}`)}o.qi=o.qi.remove(e),o.Ui.delete(d.target)}),Rh.apply(this,arguments)}function xh(i,e,t){const o=zt(i);let d=mn.min(),y=Ft();return o.persistence.runTransaction("Execute query","readonly",I=>function(x,G,Z){const pe=zt(x),Te=pe.Ui.get(Z);return void 0!==Te?et.resolve(pe.qi.get(Te)):pe.Cs.getTargetData(G,Z)}(o,I,ns(e)).next(x=>{if(x)return d=x.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(I,x.targetId).next(G=>{y=G})}).next(()=>o.Li.getDocumentsMatchingQuery(I,e,t?d:mn.min(),t?y:Ft())).next(x=>(function Bg(i,e,t){let o=i.Ki.get(e)||mn.min();t.forEach((d,y)=>{y.readTime.compareTo(o)>0&&(o=y.readTime)}),i.Ki.set(e,o)}(o,function ou(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}(e),x),{documents:x,Hi:y})))}class Hf{constructor(){this.activeTargetIds=Fn()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hy{constructor(){this.Lr=new Hf,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,o){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Hf,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fy{Ur(e){}shutdown(){}}class Dc{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Lt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Lt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const py={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gg{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Vh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,o,d,y){const I=this.ho(e,t);Lt("RestConnection","Sending: ",I,o);const x={};return this.lo(x,d,y),this.fo(e,I,x,o).then(G=>(Lt("RestConnection","Received: ",G),G),G=>{throw Qo("RestConnection",`${e} failed with error: `,G,"url: ",I,"request:",o),G})}_o(e,t,o,d,y,I){return this.ao(e,t,o,d,y)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+po,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,y)=>e[y]=d),o&&o.headers.forEach((d,y)=>e[y]=d)}ho(e,t){return`${this.oo}/v1/${t}:${py[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,d){return new Promise((y,I)=>{const x=new Ya;x.setWithCredentials(!0),x.listenOnce(ii.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case wl.NO_ERROR:const Z=x.getResponseJson();Lt("Connection","XHR received:",JSON.stringify(Z)),y(Z);break;case wl.TIMEOUT:Lt("Connection",'RPC "'+e+'" timed out'),I(new M(lt.DEADLINE_EXCEEDED,"Request time out"));break;case wl.HTTP_ERROR:const pe=x.getStatus();if(Lt("Connection",'RPC "'+e+'" failed with status:',pe,"response text:",x.getResponseText()),pe>0){let Te=x.getResponseJson();Array.isArray(Te)&&(Te=Te[0]);const st=Te?.error;if(st&&st.status&&st.message){const St=function(kt){const vn=kt.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(vn)>=0?vn:lt.UNKNOWN}(st.status);I(new M(St,st.message))}else I(new M(lt.UNKNOWN,"Server responded with status "+x.getStatus()))}else I(new M(lt.UNAVAILABLE,"Connection failed."));break;default:an()}}finally{Lt("Connection",'RPC "'+e+'" completed.')}});const G=JSON.stringify(d);x.send(t,"POST",G,o,15)})}wo(e,t,o){const d=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=Yo(),I=Ka(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(x.xmlHttpFactory=new ba({})),this.lo(x.initMessageHeaders,t,o),x.encodeInitMessageHeaders=!0;const G=d.join("");Lt("Connection","Creating WebChannel: "+G,x);const Z=y.createWebChannel(G,x);let pe=!1,Te=!1;const st=new Gg({Hr:kt=>{Te?Lt("Connection","Not sending because WebChannel is closed:",kt):(pe||(Lt("Connection","Opening WebChannel transport."),Z.open(),pe=!0),Lt("Connection","WebChannel sending:",kt),Z.send(kt))},Jr:()=>Z.close()}),St=(kt,vn,Hn)=>{kt.listen(vn,hs=>{try{Hn(hs)}catch(rs){setTimeout(()=>{throw rs},0)}})};return St(Z,Aa.EventType.OPEN,()=>{Te||Lt("Connection","WebChannel transport opened.")}),St(Z,Aa.EventType.CLOSE,()=>{Te||(Te=!0,Lt("Connection","WebChannel transport closed"),st.io())}),St(Z,Aa.EventType.ERROR,kt=>{Te||(Te=!0,Qo("Connection","WebChannel transport errored:",kt),st.io(new M(lt.UNAVAILABLE,"The operation could not be completed")))}),St(Z,Aa.EventType.MESSAGE,kt=>{var vn;if(!Te){const Hn=kt.data[0];Xt(!!Hn);const rs=Hn.error||(null===(vn=Hn[0])||void 0===vn?void 0:vn.error);if(rs){Lt("Connection","WebChannel received error:",rs);const Ci=rs.status;let oa=function(xi){const aa=jn[xi];if(void 0!==aa)return Oi(aa)}(Ci),is=rs.message;void 0===oa&&(oa=lt.INTERNAL,is="Unknown error status: "+Ci+" with message "+rs.message),Te=!0,st.io(new M(oa,is)),Z.close()}else Lt("Connection","WebChannel received:",Hn),st.ro(Hn)}}),St(I,Qs.STAT_EVENT,kt=>{kt.stat===Sa.PROXY?Lt("Connection","Detected buffering proxy"):kt.stat===Sa.NOPROXY&&Lt("Connection","Detected no buffering proxy")}),setTimeout(()=>{st.so()},0),st}}function $d(){return typeof document<"u"?document:null}function Gd(i){return new sc(i,!0)}class $f{constructor(e,t,o=1e3,d=1.5,y=6e4){this.Hs=e,this.timerId=t,this.mo=o,this.yo=d,this.po=y,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),d=Math.max(0,t-o);d>0&&Lt("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,d,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class zg{constructor(e,t,o,d,y,I,x,G){this.Hs=e,this.vo=o,this.Vo=d,this.connection=y,this.authCredentialsProvider=I,this.appCheckCredentialsProvider=x,this.listener=G,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new $f(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,m.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,m.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var o=this;return(0,m.Z)(function*(){o.Lo(),o.qo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():t&&t.code===lt.RESOURCE_EXHAUSTED?(Ai(t.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),o.xo.Ao()):t&&t.code===lt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Uo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,d])=>{this.So===t&&this.Go(o,d)},o=>{e(()=>{const d=new M(lt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(d)})})}Go(e,t){const o=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(d=>{o(()=>this.Qo(d))}),this.stream.onMessage(d=>{o(()=>this.onMessage(d))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,m.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Lt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Lt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gy extends zg{constructor(e,t,o,d,y,I){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,d,I),this.yt=y}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function ag(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:an(),d=e.targetChange.targetIds||[],y=function(G,Z){return G.wt?(Xt(void 0===Z||"string"==typeof Z),Gi.fromBase64String(Z||"")):(Xt(void 0===Z||Z instanceof Uint8Array),Gi.fromUint8Array(Z||new Uint8Array))}(i,e.targetChange.resumeToken),I=e.targetChange.cause,x=I&&function(G){const Z=void 0===G.code?lt.UNKNOWN:Oi(G.code);return new M(Z,G.message||"")}(I);t=new Nl(o,d,y,x||null)}else if("documentChange"in e){const o=e.documentChange,d=Xl(i,o.document.name),y=ds(o.document.updateTime),I=o.document.createTime?ds(o.document.createTime):mn.min(),x=new Os({mapValue:{fields:o.document.fields}}),G=si.newFoundDocument(d,y,I,x);t=new Ga(o.targetIds||[],o.removedTargetIds||[],G.key,G)}else if("documentDelete"in e){const o=e.documentDelete,d=Xl(i,o.document),y=o.readTime?ds(o.readTime):mn.min(),I=si.newNoDocument(d,y);t=new Ga([],o.removedTargetIds||[],I.key,I)}else if("documentRemove"in e){const o=e.documentRemove,d=Xl(i,o.document);t=new Ga([],o.removedTargetIds||[],d,null)}else{if(!("filter"in e))return an();{const o=e.filter,y=new Er(o.count||0);t=new wo(o.targetId,y)}}var G;return t}(this.yt,e),o=function(d){if(!("targetChange"in d))return mn.min();const y=d.targetChange;return y.targetIds&&y.targetIds.length?mn.min():y.readTime?ds(y.readTime):mn.min()}(e);return this.listener.Wo(t,o)}zo(e){const t={};t.database=$u(this.yt),t.addTarget=function(d,y){let I;const x=y.target;return I=rl(x)?{documents:Rd(d,x)}:{query:jc(d,x)},I.targetId=y.targetId,y.resumeToken.approximateByteSize()>0?I.resumeToken=Sd(d,y.resumeToken):y.snapshotVersion.compareTo(mn.min())>0&&(I.readTime=du(d,y.snapshotVersion.toTimestamp())),I}(this.yt,e);const o=function xd(i,e){const t=function(o,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return an()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Bo(t)}Ho(e){const t={};t.database=$u(this.yt),t.removeTarget=e,this.Bo(t)}}class my extends zg{constructor(e,t,o,d,y,I){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,d,I),this.yt=y,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function ac(i,e){return i&&i.length>0?(Xt(void 0!==e),i.map(t=>function(o,d){let y=ds(o.updateTime?o.updateTime:d);return y.isEqual(mn.min())&&(y=ds(d)),new a(y,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=ds(e.commitTime);return this.listener.Zo(o,t)}return Xt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=$u(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Pd(this.yt,o))};this.Bo(t)}}class Kg extends class{}{constructor(e,t,o,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.yt=d,this.nu=!1}su(){if(this.nu)throw new M(lt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,y])=>this.connection.ao(e,t,o,d,y)).catch(d=>{throw"FirebaseError"===d.name?(d.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new M(lt.UNKNOWN,d.toString())})}_o(e,t,o,d){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([y,I])=>this.connection._o(e,t,o,y,I,d)).catch(y=>{throw"FirebaseError"===y.name?(y.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new M(lt.UNKNOWN,y.toString())})}terminate(){this.nu=!0}}class Yg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Ai(t),this.ou=!1):Lt("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Gf{constructor(e,t,o,d,y){var I=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=y,this.mu.Ur(x=>{o.enqueueAndForget((0,m.Z)(function*(){var G;Ul(I)&&(Lt("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,m.Z)(function*(Z){const pe=zt(Z);pe._u.add(4),yield rd(pe),pe.gu.set("Unknown"),pe._u.delete(4),yield jh(pe)}),function(Z){return G.apply(this,arguments)})(I))}))}),this.gu=new Yg(o,d)}}function jh(i){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,m.Z)(function*(i){if(Ul(i))for(const e of i.wu)yield e(!0)}),Wd.apply(this,arguments)}function rd(i){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,m.Z)(function*(i){for(const e of i.wu)yield e(!1)}),Qg.apply(this,arguments)}function Mu(i,e){const t=zt(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Yf(t)?Kf(t):wc(t).ko()&&Wf(t,e))}function id(i,e){const t=zt(i),o=wc(t);t.du.delete(e),o.ko()&&zf(t,e),0===t.du.size&&(o.ko()?o.Fo():Ul(t)&&t.gu.set("Unknown"))}function Wf(i,e){i.yu.Ot(e.targetId),wc(i).zo(e)}function zf(i,e){i.yu.Ot(e),wc(i).Ho(e)}function Kf(i){i.yu=new Uc({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.du.get(e)||null}),wc(i).start(),i.gu.uu()}function Yf(i){return Ul(i)&&!wc(i).No()&&i.du.size>0}function Ul(i){return 0===zt(i)._u.size}function Ic(i){i.yu=void 0}function Qf(i){return Cc.apply(this,arguments)}function Cc(){return Cc=(0,m.Z)(function*(i){i.du.forEach((e,t)=>{Wf(i,e)})}),Cc.apply(this,arguments)}function qf(i,e){return sd.apply(this,arguments)}function sd(){return sd=(0,m.Z)(function*(i,e){Ic(i),Yf(i)?(i.gu.hu(e),Kf(i)):i.gu.set("Unknown")}),sd.apply(this,arguments)}function qg(i,e,t){return zd.apply(this,arguments)}function zd(){return zd=(0,m.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof Nl&&2===e.state&&e.cause)try{yield(o=(0,m.Z)(function*(d,y){const I=y.cause;for(const x of y.targetIds)d.du.has(x)&&(yield d.remoteSyncer.rejectListen(x,I),d.du.delete(x),d.yu.removeTarget(x))}),function(d,y){return o.apply(this,arguments)})(i,e)}catch(o){Lt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield od(i,o)}else if(e instanceof Ga?i.yu.Kt(e):e instanceof wo?i.yu.Jt(e):i.yu.jt(e),!t.isEqual(mn.min()))try{const o=yield Ir(i.localStore);t.compareTo(o)>=0&&(yield function(d,y){const I=d.yu.Zt(y);return I.targetChanges.forEach((x,G)=>{if(x.resumeToken.approximateByteSize()>0){const Z=d.du.get(G);Z&&d.du.set(G,Z.withResumeToken(x.resumeToken,y))}}),I.targetMismatches.forEach(x=>{const G=d.du.get(x);if(!G)return;d.du.set(x,G.withResumeToken(Gi.EMPTY_BYTE_STRING,G.snapshotVersion)),zf(d,x);const Z=new Jl(G.target,x,1,G.sequenceNumber);Wf(d,Z)}),d.remoteSyncer.applyRemoteEvent(I)}(i,t))}catch(o){Lt("RemoteStore","Failed to raise snapshot:",o),yield od(i,o)}var o}),zd.apply(this,arguments)}function od(i,e,t){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,m.Z)(function*(i,e,t){if(!ls(e))throw e;i._u.add(1),yield rd(i),i.gu.set("Offline"),t||(t=()=>Ir(i.localStore)),i.asyncQueue.enqueueRetryable((0,m.Z)(function*(){Lt("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield jh(i)}))}),Kd.apply(this,arguments)}function Zf(i,e){return e().catch(t=>od(i,t,e))}function Ku(i){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,m.Z)(function*(i){const e=zt(i),t=Yu(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;_y(e);)try{const d=yield Ug(e.localStore,o);if(null===d){0===e.fu.length&&t.Fo();break}o=d.batchId,Zg(e,d)}catch(d){yield od(e,d)}Xg(e)&&Jf(e)}),Xf.apply(this,arguments)}function _y(i){return Ul(i)&&i.fu.length<10}function Zg(i,e){i.fu.push(e);const t=Yu(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Xg(i){return Ul(i)&&!Yu(i).No()&&i.fu.length>0}function Jf(i){Yu(i).start()}function Jg(i){return ep.apply(this,arguments)}function ep(){return ep=(0,m.Z)(function*(i){Yu(i).eu()}),ep.apply(this,arguments)}function vy(i){return Wa.apply(this,arguments)}function Wa(){return Wa=(0,m.Z)(function*(i){const e=Yu(i);for(const t of i.fu)e.Xo(t.mutations)}),Wa.apply(this,arguments)}function Ey(i,e,t){return tp.apply(this,arguments)}function tp(){return tp=(0,m.Z)(function*(i,e,t){const o=i.fu.shift(),d=Ld.from(o,e,t);yield Zf(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield Ku(i)}),tp.apply(this,arguments)}function j_(i,e){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,m.Z)(function*(i,e){var t;e&&Yu(i).Yo&&(yield(t=(0,m.Z)(function*(o,d){if(function Di(i){switch(i){default:return an();case lt.CANCELLED:case lt.UNKNOWN:case lt.DEADLINE_EXCEEDED:case lt.RESOURCE_EXHAUSTED:case lt.INTERNAL:case lt.UNAVAILABLE:case lt.UNAUTHENTICATED:return!1;case lt.INVALID_ARGUMENT:case lt.NOT_FOUND:case lt.ALREADY_EXISTS:case lt.PERMISSION_DENIED:case lt.FAILED_PRECONDITION:case lt.ABORTED:case lt.OUT_OF_RANGE:case lt.UNIMPLEMENTED:case lt.DATA_LOSS:return!0}}(y=d.code)&&y!==lt.ABORTED){const I=o.fu.shift();Yu(o).Mo(),yield Zf(o,()=>o.remoteSyncer.rejectFailedWrite(I.batchId,d)),yield Ku(o)}var y}),function(o,d){return t.apply(this,arguments)})(i,e)),Xg(i)&&Jf(i)}),Yd.apply(this,arguments)}function np(i,e){return rp.apply(this,arguments)}function rp(){return rp=(0,m.Z)(function*(i,e){const t=zt(i);t.asyncQueue.verifyOperationInProgress(),Lt("RemoteStore","RemoteStore received new credentials");const o=Ul(t);t._u.add(3),yield rd(t),o&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield jh(t)}),rp.apply(this,arguments)}function sp(){return sp=(0,m.Z)(function*(i,e){const t=zt(i);e?(t._u.delete(2),yield jh(t)):e||(t._u.add(2),yield rd(t),t.gu.set("Unknown"))}),sp.apply(this,arguments)}function wc(i){return i.pu||(i.pu=function(e,t,o){const d=zt(e);return d.su(),new gy(t,d.connection,d.authCredentials,d.appCheckCredentials,d.yt,o)}(i.datastore,i.asyncQueue,{Yr:Qf.bind(null,i),Zr:qf.bind(null,i),Wo:qg.bind(null,i)}),i.wu.push(function(){var e=(0,m.Z)(function*(t){t?(i.pu.Mo(),Yf(i)?Kf(i):i.gu.set("Unknown")):(yield i.pu.stop(),Ic(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function Yu(i){return i.Iu||(i.Iu=function(e,t,o){const d=zt(e);return d.su(),new my(t,d.connection,d.authCredentials,d.appCheckCredentials,d.yt,o)}(i.datastore,i.asyncQueue,{Yr:Jg.bind(null,i),Zr:j_.bind(null,i),tu:vy.bind(null,i),Zo:Ey.bind(null,i)}),i.wu.push(function(){var e=(0,m.Z)(function*(t){t?(i.Iu.Mo(),yield Ku(i)):(yield i.Iu.stop(),i.fu.length>0&&(Lt("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class op{constructor(e,t,o,d,y){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=d,this.removalCallback=y,this.deferred=new z,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(I=>{})}static createAndSchedule(e,t,o,d,y){const I=Date.now()+o,x=new op(e,t,I,d,y);return x.start(o),x}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new M(lt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qu(i,e){if(Ai("AsyncQueue",`${e}: ${i}`),ls(i))return new M(lt.UNAVAILABLE,`${e}: ${i}`);throw i}class ad{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Gt.comparator(t.key,o.key):(t,o)=>Gt.comparator(t.key,o.key),this.keyedMap=Co(),this.sortedSet=new Mi(this.comparator)}static emptySet(e){return new ad(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ad)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,y=o.getNext().key;if(!d.isEqual(y))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new ad;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class em{constructor(){this.Tu=new Mi(Gt.comparator)}track(e){const t=e.doc.key,o=this.Tu.get(t);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(t):1===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):an():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,o)=>{e.push(o)}),e}}class ld{constructor(e,t,o,d,y,I,x,G,Z){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=d,this.mutatedKeys=y,this.fromCache=I,this.syncStateChanged=x,this.excludesMetadataChanges=G,this.hasCachedResults=Z}static fromInitialDocuments(e,t,o,d,y){const I=[];return t.forEach(x=>{I.push({type:0,doc:x})}),new ld(e,t,ad.emptySet(t),I,o,d,!0,!1,y)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==o[d].type||!t[d].doc.isEqual(o[d].doc))return!1;return!0}}class Dy{constructor(){this.Au=void 0,this.listeners=[]}}class Iy{constructor(){this.queries=new eo(e=>ko(e),yl),this.onlineState="Unknown",this.Ru=new Set}}function Vl(i,e){return Qd.apply(this,arguments)}function Qd(){return Qd=(0,m.Z)(function*(i,e){const t=zt(i),o=e.query;let d=!1,y=t.queries.get(o);if(y||(d=!0,y=new Dy),d)try{y.Au=yield t.onListen(o)}catch(I){const x=Qu(I,`Initialization of query '${Rl(e.query)}' failed`);return void e.onError(x)}t.queries.set(o,y),y.listeners.push(e),e.bu(t.onlineState),y.Au&&e.Pu(y.Au)&&up(t)}),Qd.apply(this,arguments)}function ap(i,e){return lp.apply(this,arguments)}function lp(){return lp=(0,m.Z)(function*(i,e){const t=zt(i),o=e.query;let d=!1;const y=t.queries.get(o);if(y){const I=y.listeners.indexOf(e);I>=0&&(y.listeners.splice(I,1),d=0===y.listeners.length)}if(d)return t.queries.delete(o),t.onUnlisten(o)}),lp.apply(this,arguments)}function tm(i,e){const t=zt(i);let o=!1;for(const d of e){const I=t.queries.get(d.query);if(I){for(const x of I.listeners)x.Pu(d)&&(o=!0);I.Au=d}}o&&up(t)}function Cy(i,e,t){const o=zt(i),d=o.queries.get(e);if(d)for(const y of d.listeners)y.onError(t);o.queries.delete(e)}function up(i){i.Ru.forEach(e=>{e.next()})}class cp{constructor(e,t,o){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const d of e.docChanges)3!==d.type&&o.push(d);e=new ld(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=ld.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Zd{constructor(e){this.key=e}}class Xd{constructor(e){this.key=e}}class Ty{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ft(),this.mutatedKeys=Ft(),this.Gu=au(e),this.Qu=new ad(this.Gu)}get ju(){return this.qu}Wu(e,t){const o=t?t.zu:new em,d=t?t.Qu:this.Qu;let y=t?t.mutatedKeys:this.mutatedKeys,I=d,x=!1;const G="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,Z="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((pe,Te)=>{const st=d.get(pe),St=Ql(this.query,Te)?Te:null,kt=!!st&&this.mutatedKeys.has(st.key),vn=!!St&&(St.hasLocalMutations||this.mutatedKeys.has(St.key)&&St.hasCommittedMutations);let Hn=!1;st&&St?st.data.isEqual(St.data)?kt!==vn&&(o.track({type:3,doc:St}),Hn=!0):this.Hu(st,St)||(o.track({type:2,doc:St}),Hn=!0,(G&&this.Gu(St,G)>0||Z&&this.Gu(St,Z)<0)&&(x=!0)):!st&&St?(o.track({type:0,doc:St}),Hn=!0):st&&!St&&(o.track({type:1,doc:st}),Hn=!0,(G||Z)&&(x=!0)),Hn&&(St?(I=I.add(St),y=vn?y.add(pe):y.delete(pe)):(I=I.delete(pe),y=y.delete(pe)))}),null!==this.query.limit)for(;I.size>this.query.limit;){const pe="F"===this.query.limitType?I.last():I.first();I=I.delete(pe.key),y=y.delete(pe.key),o.track({type:1,doc:pe})}return{Qu:I,zu:o,$i:x,mutatedKeys:y}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const d=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const y=e.zu.Eu();y.sort((Z,pe)=>function(Te,st){const St=kt=>{switch(kt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return an()}};return St(Te)-St(st)}(Z.type,pe.type)||this.Gu(Z.doc,pe.doc)),this.Ju(o);const I=t?this.Yu():[],x=0===this.Ku.size&&this.current?1:0,G=x!==this.Uu;return this.Uu=x,0!==y.length||G?{snapshot:new ld(this.query,e.Qu,d,y,e.mutatedKeys,0===x,G,!1,!!o&&o.resumeToken.approximateByteSize()>0),Xu:I}:{Xu:I}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new em,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ft(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new Xd(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new Zd(o))}),t}tc(e){this.qu=e.Hi,this.Ku=Ft();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return ld.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class hp{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class H_{constructor(e){this.key=e,this.nc=!1}}class rm{constructor(e,t,o,d,y,I){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=d,this.currentUser=y,this.maxConcurrentLimboResolutions=I,this.sc={},this.ic=new eo(x=>ko(x),yl),this.rc=new Map,this.oc=new Set,this.uc=new Mi(Gt.comparator),this.cc=new Map,this.ac=new Rf,this.hc={},this.lc=new Map,this.fc=vc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function im(i,e){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,m.Z)(function*(i,e){const t=function ra(i){const e=zt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=sm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=My.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sy.bind(null,e),e.sc.Wo=tm.bind(null,e.eventManager),e.sc.wc=Cy.bind(null,e.eventManager),e}(i);let o,d;const y=t.ic.get(e);if(y)o=y.targetId,t.sharedClientState.addLocalQueryTarget(o),d=y.view.ec();else{const I=yield function td(i,e){const t=zt(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let d;return t.Cs.getTargetData(o,e).next(y=>y?(d=y,et.resolve(d)):t.Cs.allocateTargetId(o).next(I=>(d=new Jl(e,I,0,o.currentSequenceNumber),t.Cs.addTargetData(o,d).next(()=>d))))}).then(o=>{const d=t.qi.get(o.targetId);return(null===d||o.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.qi=t.qi.insert(o.targetId,o),t.Ui.set(e,o.targetId)),o})}(t.localStore,ns(e));t.isPrimaryClient&&Mu(t.remoteStore,I);const x=t.sharedClientState.addLocalQueryTarget(I.targetId);o=I.targetId,d=yield function $h(i,e,t,o,d){return Jd.apply(this,arguments)}(t,e,o,"current"===x,I.resumeToken)}return d}),Hh.apply(this,arguments)}function Jd(){return Jd=(0,m.Z)(function*(i,e,t,o,d){i._c=(Te,st,St)=>{return(kt=(0,m.Z)(function*(vn,Hn,hs,rs){let Ci=Hn.view.Wu(hs);Ci.$i&&(Ci=yield xh(vn.localStore,Hn.query,!1).then(({documents:xi})=>Hn.view.Wu(xi,Ci)));const oa=rs&&rs.targetChanges.get(Hn.targetId),is=Hn.view.applyChanges(Ci,vn.isPrimaryClient,oa);return zh(vn,Hn.targetId,is.Xu),is.snapshot}),function(vn,Hn,hs,rs){return kt.apply(this,arguments)})(i,Te,st,St);var kt};const y=yield xh(i.localStore,e,!0),I=new Ty(e,y.Hi),x=I.Wu(y.documents),G=Es.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,d),Z=I.applyChanges(x,i.isPrimaryClient,G);zh(i,t,Z.Xu);const pe=new hp(e,t,I);return i.ic.set(e,pe),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),Z.snapshot}),Jd.apply(this,arguments)}function Pu(i,e){return ud.apply(this,arguments)}function ud(){return ud=(0,m.Z)(function*(i,e){const t=zt(i),o=t.ic.get(e),d=t.rc.get(o.targetId);if(d.length>1)return t.rc.set(o.targetId,d.filter(y=>!yl(y,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield nd(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),id(t.remoteStore,o.targetId),cd(t,o.targetId)}).catch(Ro))):(cd(t,o.targetId),yield nd(t.localStore,o.targetId,!0))}),ud.apply(this,arguments)}function Tc(){return Tc=(0,m.Z)(function*(i,e,t){const o=Ou(i);try{const d=yield function(y,I){const x=zt(y),G=_r.now(),Z=I.reduce((st,St)=>st.add(St.key),Ft());let pe,Te;return x.persistence.runTransaction("Locally write mutations","readwrite",st=>{let St=jr(),kt=Ft();return x.Gi.getEntries(st,Z).next(vn=>{St=vn,St.forEach((Hn,hs)=>{hs.isValidDocument()||(kt=kt.add(Hn))})}).next(()=>x.localDocuments.getOverlayedDocuments(st,St)).next(vn=>{pe=vn;const Hn=[];for(const hs of I){const rs=ge(hs,pe.get(hs.key).overlayedDocument);null!=rs&&Hn.push(new mt(hs.key,rs,Eu(rs.value.mapValue),l.exists(!0)))}return x.mutationQueue.addMutationBatch(st,G,Hn,I)}).next(vn=>{Te=vn;const Hn=vn.applyToLocalDocumentSet(pe,kt);return x.documentOverlayCache.saveOverlays(st,vn.batchId,Hn)})}).then(()=>({batchId:Te.batchId,changes:La(pe)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(d.batchId),function(y,I,x){let G=y.hc[y.currentUser.toKey()];G||(G=new Mi(Jt)),G=G.insert(I,x),y.hc[y.currentUser.toKey()]=G}(o,d.batchId,t),yield eu(o,d.changes),yield Ku(o.remoteStore)}catch(d){const y=Qu(d,"Failed to persist write");t.reject(y)}}),Tc.apply(this,arguments)}function sm(i,e){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,m.Z)(function*(i,e){const t=zt(i);try{const o=yield function kg(i,e){const t=zt(i),o=e.snapshotVersion;let d=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",y=>{const I=t.Gi.newChangeBuffer({trackRemovals:!0});d=t.qi;const x=[];e.targetChanges.forEach((pe,Te)=>{const st=d.get(Te);if(!st)return;x.push(t.Cs.removeMatchingKeys(y,pe.removedDocuments,Te).next(()=>t.Cs.addMatchingKeys(y,pe.addedDocuments,Te)));let St=st.withSequenceNumber(y.currentSequenceNumber);var kt,vn,Hn;e.targetMismatches.has(Te)?St=St.withResumeToken(Gi.EMPTY_BYTE_STRING,mn.min()).withLastLimboFreeSnapshotVersion(mn.min()):pe.resumeToken.approximateByteSize()>0&&(St=St.withResumeToken(pe.resumeToken,o)),d=d.insert(Te,St),vn=St,Hn=pe,(0===(kt=st).resumeToken.approximateByteSize()||vn.snapshotVersion.toMicroseconds()-kt.snapshotVersion.toMicroseconds()>=3e8||Hn.addedDocuments.size+Hn.modifiedDocuments.size+Hn.removedDocuments.size>0)&&x.push(t.Cs.updateTargetData(y,St))});let G=jr(),Z=Ft();if(e.documentUpdates.forEach(pe=>{e.resolvedLimboDocuments.has(pe)&&x.push(t.persistence.referenceDelegate.updateLimboDocument(y,pe))}),x.push(function Vf(i,e,t){let o=Ft(),d=Ft();return t.forEach(y=>o=o.add(y)),e.getEntries(i,o).next(y=>{let I=jr();return t.forEach((x,G)=>{const Z=y.get(x);G.isFoundDocument()!==Z.isFoundDocument()&&(d=d.add(x)),G.isNoDocument()&&G.version.isEqual(mn.min())?(e.removeEntry(x,G.readTime),I=I.insert(x,G)):!Z.isValidDocument()||G.version.compareTo(Z.version)>0||0===G.version.compareTo(Z.version)&&Z.hasPendingWrites?(e.addEntry(G),I=I.insert(x,G)):Lt("LocalStore","Ignoring outdated watch update for ",x,". Current version:",Z.version," Watch version:",G.version)}),{Wi:I,zi:d}})}(y,I,e.documentUpdates).next(pe=>{G=pe.Wi,Z=pe.zi})),!o.isEqual(mn.min())){const pe=t.Cs.getLastRemoteSnapshotVersion(y).next(Te=>t.Cs.setTargetsMetadata(y,y.currentSequenceNumber,o));x.push(pe)}return et.waitFor(x).next(()=>I.apply(y)).next(()=>t.localDocuments.getLocalViewOfDocuments(y,G,Z)).next(()=>G)}).then(y=>(t.qi=d,y))}(t.localStore,e);e.targetChanges.forEach((d,y)=>{const I=t.cc.get(y);I&&(Xt(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?I.nc=!0:d.modifiedDocuments.size>0?Xt(I.nc):d.removedDocuments.size>0&&(Xt(I.nc),I.nc=!1))}),yield eu(t,o,e)}catch(o){yield Ro(o)}}),Wh.apply(this,arguments)}function fp(i,e,t){const o=zt(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const d=[];o.ic.forEach((y,I)=>{const x=I.view.bu(e);x.snapshot&&d.push(x.snapshot)}),function(y,I){const x=zt(y);x.onlineState=I;let G=!1;x.queries.forEach((Z,pe)=>{for(const Te of pe.listeners)Te.bu(I)&&(G=!0)}),G&&up(x)}(o.eventManager,e),d.length&&o.sc.Wo(d),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Sy(i,e,t){return pp.apply(this,arguments)}function pp(){return pp=(0,m.Z)(function*(i,e,t){const o=zt(i);o.sharedClientState.updateQueryState(e,"rejected",t);const d=o.cc.get(e),y=d&&d.key;if(y){let I=new Mi(Gt.comparator);I=I.insert(y,si.newNoDocument(y,mn.min()));const x=Ft().add(y),G=new Pr(mn.min(),new Map,new Ei(Jt),I,x);yield sm(o,G),o.uc=o.uc.remove(y),o.cc.delete(e),Dp(o)}else yield nd(o.localStore,e,!1).then(()=>cd(o,e,t)).catch(Ro)}),pp.apply(this,arguments)}function eh(i,e){return gp.apply(this,arguments)}function gp(){return gp=(0,m.Z)(function*(i,e){const t=zt(i),o=e.batch.batchId;try{const d=yield function dy(i,e){const t=zt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const d=e.batch.keys(),y=t.Gi.newChangeBuffer({trackRemovals:!0});return function(I,x,G,Z){const pe=G.batch,Te=pe.keys();let st=et.resolve();return Te.forEach(St=>{st=st.next(()=>Z.getEntry(x,St)).next(kt=>{const vn=G.docVersions.get(St);Xt(null!==vn),kt.version.compareTo(vn)<0&&(pe.applyToRemoteDocument(kt,G),kt.isValidDocument()&&(kt.setReadTime(G.commitVersion),Z.addEntry(kt)))})}),st.next(()=>I.mutationQueue.removeMutationBatch(x,pe))}(t,o,e,y).next(()=>y.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,d,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(I){let x=Ft();for(let G=0;G<I.mutationResults.length;++G)I.mutationResults[G].transformResults.length>0&&(x=x.add(I.batch.mutations[G].key));return x}(e))).next(()=>t.localDocuments.getDocuments(o,d))})}(t.localStore,e);vp(t,o,null),_p(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield eu(t,d)}catch(d){yield Ro(d)}}),gp.apply(this,arguments)}function $_(i,e,t){return mp.apply(this,arguments)}function mp(){return mp=(0,m.Z)(function*(i,e,t){const o=zt(i);try{const d=yield function(y,I){const x=zt(y);return x.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let Z;return x.mutationQueue.lookupMutationBatch(G,I).next(pe=>(Xt(null!==pe),Z=pe.keys(),x.mutationQueue.removeMutationBatch(G,pe))).next(()=>x.mutationQueue.performConsistencyCheck(G)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(G,Z,I)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,Z)).next(()=>x.localDocuments.getDocuments(G,Z))})}(o.localStore,e);vp(o,e,t),_p(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield eu(o,d)}catch(d){yield Ro(d)}}),mp.apply(this,arguments)}function _p(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function vp(i,e,t){const o=zt(i);let d=o.hc[o.currentUser.toKey()];if(d){const y=d.get(e);y&&(t?y.reject(t):y.resolve(),d=d.remove(e)),o.hc[o.currentUser.toKey()]=d}}function cd(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.rc.get(e))i.ic.delete(o),t&&i.sc.wc(o,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(o=>{i.ac.containsKey(o)||om(i,o)})}function om(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(id(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),Dp(i))}function zh(i,e,t){for(const o of t)o instanceof Zd?(i.ac.addReference(o.key,e),Ep(i,o)):o instanceof Xd?(Lt("SyncEngine","Document no longer in limbo: "+o.key),i.ac.removeReference(o.key,e),i.ac.containsKey(o.key)||om(i,o.key)):an()}function Ep(i,e){const t=e.key,o=t.path.canonicalString();i.uc.get(t)||i.oc.has(o)||(Lt("SyncEngine","New document in limbo: "+t),i.oc.add(o),Dp(i))}function Dp(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new Gt(Wn.fromString(e)),o=i.fc.next();i.cc.set(o,new H_(t)),i.uc=i.uc.insert(t,o),Mu(i.remoteStore,new Jl(ns(Ol(t.path)),o,2,js.at))}}function eu(i,e,t){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,m.Z)(function*(i,e,t){const o=zt(i),d=[],y=[],I=[];var x;o.ic.isEmpty()||(o.ic.forEach((x,G)=>{I.push(o._c(G,e,t).then(Z=>{if((Z||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(G.targetId,Z?.fromCache?"not-current":"current"),Z){d.push(Z);const pe=Ff.Ci(G.targetId,Z);y.push(pe)}}))}),yield Promise.all(I),o.sc.Wo(d),yield(x=(0,m.Z)(function*(G,Z){const pe=zt(G);try{yield pe.persistence.runTransaction("notifyLocalViewChanges","readwrite",Te=>et.forEach(Z,st=>et.forEach(st.Si,St=>pe.persistence.referenceDelegate.addReference(Te,st.targetId,St)).next(()=>et.forEach(st.Di,St=>pe.persistence.referenceDelegate.removeReference(Te,st.targetId,St)))))}catch(Te){if(!ls(Te))throw Te;Lt("LocalStore","Failed to update sequence numbers: "+Te)}for(const Te of Z){const st=Te.targetId;if(!Te.fromCache){const St=pe.qi.get(st),vn=St.withLastLimboFreeSnapshotVersion(St.snapshotVersion);pe.qi=pe.qi.insert(st,vn)}}}),function(G,Z){return x.apply(this,arguments)})(o.localStore,y))}),Ip.apply(this,arguments)}function Ay(i,e){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,m.Z)(function*(i,e){const t=zt(i);if(!t.currentUser.isEqual(e)){Lt("SyncEngine","User change. New user:",e.toKey());const o=yield Fg(t.localStore,e);t.currentUser=e,(d=t).lc.forEach(I=>{I.forEach(x=>{x.reject(new M(lt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.lc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield eu(t,o.ji)}var d}),Cp.apply(this,arguments)}function My(i,e){const t=zt(i),o=t.cc.get(e);if(o&&o.nc)return Ft().add(o.key);{let d=Ft();const y=t.rc.get(e);if(!y)return d;for(const I of y){const x=t.ic.get(I);d=d.unionWith(x.view.ju)}return d}}function Ou(i){const e=zt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$_.bind(null,e),e}class El{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,m.Z)(function*(){t.yt=Gd(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return kf(this.persistence,new Lg,e.initialUser,this.yt)}yc(e){return new xf(Oh.Bs,this.yt)}gc(e){return new hy}terminate(){var e=this;return(0,m.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ap extends El{constructor(e,t,o){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,m.Z)(function*(){yield t().call(o,e),yield o.Ac.initialize(o,e),yield Ou(o.Ac.syncEngine),yield Ku(o.Ac.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return kf(this.persistence,new Lg,e.initialUser,this.yt)}Tc(e,t){return new ly(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const o=new Oa(t,this.persistence);return new es(e.asyncQueue,o)}yc(e){const t=function Lf(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Fa.withCacheSize(this.cacheSizeBytes):Fa.DEFAULT;return new vl(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,function Wg(){return typeof window<"u"?window:null}(),$d(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new hy}}class qu{initialize(e,t){var o=this;return(0,m.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=d=>fp(o.syncEngine,d,1),o.remoteStore.remoteSyncer.handleCredentialChange=Ay.bind(null,o.syncEngine),yield function ip(i,e){return sp.apply(this,arguments)}(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Iy}createDatastore(e){const t=Gd(e.databaseInfo.databaseId),o=new Vh(e.databaseInfo);return new Kg(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,d=e.asyncQueue,y=x=>fp(this.syncEngine,x,0),I=Dc.C()?new Dc:new fy,new Gf(t,o,d,y,I);var t,o,d,y,I}createSyncEngine(e,t){return function(o,d,y,I,x,G,Z){const pe=new rm(o,d,y,I,x,G);return Z&&(pe.dc=!0),pe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,m.Z)(function*(t){const o=zt(t);Lt("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield rd(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Zu(i,e,t){if(!t)throw new M(lt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function bc(i){if(!Gt.isDocumentKey(i))throw new M(lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ac(i){if(Gt.isDocumentKey(i))throw new M(lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Ru(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":an()}function Hr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new M(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ru(i);throw new M(lt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}const Mp=new Map;class Pp{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new M(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new M(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function fd(i,e,t,o){if(!0===e&&!0===o)throw new M(lt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pd{constructor(e,t,o,d){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new M(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pp(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ie;switch(t.type){case"gapi":return new ln(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new M(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Mp.get(e);t&&(Lt("ComponentProvider","Removing Datastore"),Mp.delete(e),t.terminate())}(this),Promise.resolve()}}class no{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new no(this.firestore,e,this._key)}}class ia{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ia(this.firestore,e,this._query)}}class tu extends ia{constructor(e,t,o){super(e,t,Ol(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new no(this.firestore,null,new Gt(e))}withConverter(e){return new tu(this.firestore,e,this._path)}}function cm(i,e,...t){if(i=(0,q.m9)(i),Zu("collection","path",e),i instanceof pd){const o=Wn.fromString(e,...t);return Ac(o),new tu(i,null,o)}{if(!(i instanceof no||i instanceof tu))throw new M(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Wn.fromString(e,...t));return Ac(o),new tu(i.firestore,null,o)}}function dm(i,e,...t){if(i=(0,q.m9)(i),1===arguments.length&&(e=Zn.R()),Zu("doc","path",e),i instanceof pd){const o=Wn.fromString(e,...t);return bc(o),new no(i,null,new Gt(o))}{if(!(i instanceof no||i instanceof tu))throw new M(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Wn.fromString(e,...t));return bc(o),new no(i.firestore,i instanceof tu?i.converter:null,new Gt(o))}}class th{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Fy{constructor(e,t,o,d){var y=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=d,this.user=Xi.UNAUTHENTICATED,this.clientId=Zn.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var I=(0,m.Z)(function*(x){Lt("FirestoreClient","Received user=",x.uid),yield y.authCredentialListener(x),y.user=x});return function(x){return I.apply(this,arguments)}}()),this.appCheckCredentials.start(o,I=>(Lt("FirestoreClient","Received new app check token=",I),this.appCheckCredentialListener(I,this.user)))}getConfiguration(){var e=this;return(0,m.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(lt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new z;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,m.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const d=Qu(o,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function nh(i,e){return gd.apply(this,arguments)}function gd(){return gd=(0,m.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Lt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var d=(0,m.Z)(function*(y){o.isEqual(y)||(yield Fg(e.localStore,y),o=y)});return function(y){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),gd.apply(this,arguments)}function Xh(i,e){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,m.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield rh(i);Lt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(d=>np(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,y)=>np(e.remoteStore,y)),i.onlineComponents=e}),Jh.apply(this,arguments)}function rh(i){return ef.apply(this,arguments)}function ef(){return ef=(0,m.Z)(function*(i){return i.offlineComponents||(Lt("FirestoreClient","Using default OfflineComponentProvider"),yield nh(i,new El)),i.offlineComponents}),ef.apply(this,arguments)}function ih(i){return sh.apply(this,arguments)}function sh(){return sh=(0,m.Z)(function*(i){return i.onlineComponents||(Lt("FirestoreClient","Using default OnlineComponentProvider"),yield Xh(i,new qu)),i.onlineComponents}),sh.apply(this,arguments)}function Pc(i){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,m.Z)(function*(i){const e=yield ih(i),t=e.eventManager;return t.onListen=im.bind(null,e.syncEngine),t.onUnlisten=Pu.bind(null,e.syncEngine),t}),Fp.apply(this,arguments)}class Em{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new $f(this,"async_queue_retry"),this.Wc=()=>{const t=$d();t&&Lt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=$d();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=$d();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new z;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,m.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!ls(t))throw t;Lt("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(o=>{throw this.Kc=o,this.Gc=!1,Ai("INTERNAL UNHANDLED ERROR: ",function(y){let I=y.message||"";return y.stack&&(I=y.stack.includes(y.message)?y.stack:y.message+"\n"+y.stack),I}(o)),o}).then(o=>(this.Gc=!1,o))));return this.Bc=t,t}enqueueAfterDelay(e,t,o){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const d=op.createAndSchedule(this,e,t,o,y=>this.Yc(y));return this.Uc.push(d),d}zc(){this.Kc&&an()}verifyOperationInProgress(){}Xc(){var e=this;return(0,m.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function sf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const d of["next","error","complete"])if(d in o&&"function"==typeof o[d])return!0;return!1}(i)}class Si extends pd{constructor(e,t,o,d){super(e,t,o,d),this.type="firestore",this._queue=new Em,this._persistenceKey=d?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Xu(this),this._firestoreClient.terminate()}}function ky(i,e){const t="object"==typeof i?i:(0,C.Mq)(),o="string"==typeof i?i:e||"(default)",d=(0,C.qX)(t,"firestore").getImmediate({identifier:o});if(!d._initialized){const y=(0,q.P0)("firestore");y&&function um(i,e,t,o={}){var d;const y=(i=Hr(i,pd))._getSettings();if("firestore.googleapis.com"!==y.host&&y.host!==e&&Qo("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},y),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let I,x;if("string"==typeof o.mockUserToken)I=o.mockUserToken,x=Xi.MOCK_USER;else{I=(0,q.Sg)(o.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const G=o.mockUserToken.sub||o.mockUserToken.user_id;if(!G)throw new M(lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Xi(G)}i._authCredentials=new ye(new k(I,x))}}(d,...y)}return d}function ro(i){return i._firestoreClient||Xu(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Xu(i){var e;const t=i._freezeSettings(),o=(y=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new iu(i._databaseId,y,i._persistenceKey,(x=t).host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,x.useFetchStreams));var y,x;i._firestoreClient=new Fy(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Bp(i,e){!function jp(i){if(i._initialized||i._terminated)throw new M(lt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}(i=Hr(i,Si));const t=ro(i),o=i._freezeSettings(),d=new qu;return function af(i,e,t){const o=new z;return i.asyncQueue.enqueue((0,m.Z)(function*(){try{yield nh(i,t),yield Xh(i,e),o.resolve()}catch(d){const y=d;if(!("FirebaseError"===(I=y).name?I.code===lt.FAILED_PRECONDITION||I.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&I instanceof DOMException)||22===I.code||20===I.code||11===I.code))throw y;Qo("Error enabling offline persistence. Falling back to persistence disabled: "+y),o.reject(y)}var I})).then(()=>o.promise)}(t,d,new Ap(d,o.cacheSizeBytes,e?.forceOwnership))}class Oc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oc(Gi.fromBase64String(e))}catch(t){throw new M(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Oc(Gi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class md{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new M(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lf{constructor(e){this._methodName=e}}class uf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jt(this._lat,e._lat)||Jt(this._long,e._long)}}const Im=/^__.*__$/;class yd{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new mt(e,this.data,this.fieldMask,t,this.fieldTransforms):new We(e,this.data,t,this.fieldTransforms)}}class Cm{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new mt(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw an()}}class ah{constructor(e,t,o,d,y,I){this.settings=e,this.databaseId=t,this.yt=o,this.ignoreUndefinedProperties=d,void 0===y&&this.na(),this.fieldTransforms=y||[],this.fieldMask=I||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ah(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ia({path:o,oa:!1});return d.ua(e),d}ca(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ia({path:o,oa:!1});return d.na(),d}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return df(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(wm(this.sa)&&Im.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class By{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=o||Gd(e)}da(e,t,o,d=!1){return new ah({sa:e,methodName:t,fa:o,path:Rr.emptyPath(),oa:!1,la:d},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Rc(i){const e=i._freezeSettings(),t=Gd(i._databaseId);return new By(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Tm(i,e,t,o,d,y={}){const I=i.da(y.merge||y.mergeFields?2:0,e,t,d);$p("Data must be an object, but it was:",I,o);const x=bm(o,I);let G,Z;if(y.merge)G=new ts(I.fieldMask),Z=I.fieldTransforms;else if(y.mergeFields){const pe=[];for(const Te of y.mergeFields){const st=Gp(e,Te,t);if(!I.contains(st))throw new M(lt.INVALID_ARGUMENT,`Field '${st}' is specified in your field mask but missing from your input data.`);zp(pe,st)||pe.push(st)}G=new ts(pe),Z=I.fieldTransforms.filter(Te=>G.covers(Te.field))}else G=null,Z=I.fieldTransforms;return new yd(new Os(x),G,Z)}class xc extends lf{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xc}}class Dl extends lf{_toFieldTransform(e){return new xl(e.path,new $a)}isEqual(e){return e instanceof Dl}}function Hp(i,e,t,o=!1){return Ju(t,i.da(o?4:3,e))}function Ju(i,e){if(Am(i=(0,q.m9)(i)))return $p("Unsupported field value:",e,i),bm(i,e);if(i instanceof lf)return function(t,o){if(!wm(o.sa))throw o.ha(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ha(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(o);d&&o.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,o){const d=[];let y=0;for(const I of t){let x=Ju(I,o.aa(y));null==x&&(x={nullValue:"NULL_VALUE"}),d.push(x),y++}return{arrayValue:{values:d}}}(i,e)}return function(t,o){if(null===(t=(0,q.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Bu(o.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=_r.fromDate(t);return{timestampValue:du(o.yt,d)}}if(t instanceof _r){const d=new _r(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:du(o.yt,d)}}if(t instanceof uf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Oc)return{bytesValue:Sd(o.yt,t._byteString)};if(t instanceof no){const d=o.databaseId,y=t.firestore._databaseId;if(!y.isEqual(d))throw o.ha(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Ad(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ha(`Unsupported field value: ${Ru(t)}`)}(i,e)}function bm(i,e){const t={};return ga(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(i,(o,d)=>{const y=Ju(d,e.ra(o));null!=y&&(t[o]=y)}),{mapValue:{fields:t}}}function Am(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof _r||i instanceof uf||i instanceof Oc||i instanceof no||i instanceof lf)}function $p(i,e,t){if(!Am(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Ru(t);throw e.ha("an object"===o?i+" a custom object":i+" "+o)}var o}function Gp(i,e,t){if((e=(0,q.m9)(e))instanceof md)return e._internalPath;if("string"==typeof e)return ec(i,e);throw df("Field path arguments must be of type string or ",i,!1,void 0,t)}const Wp=new RegExp("[~\\*/\\[\\]]");function ec(i,e,t){if(e.search(Wp)>=0)throw df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new md(...e.split("."))._internalPath}catch{throw df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function df(i,e,t,o,d){const y=o&&!o.isEmpty(),I=void 0!==d;let x=`Function ${e}() called with invalid data`;t&&(x+=" (via `toFirestore()`)"),x+=". ";let G="";return(y||I)&&(G+=" (found",y&&(G+=` in field ${o}`),I&&(G+=` in document ${d}`),G+=")"),new M(lt.INVALID_ARGUMENT,x+i+G)}function zp(i,e){return i.some(t=>t.isEqual(e))}class Kp{constructor(e,t,o,d,y){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=d,this._converter=y}get id(){return this._key.path.lastSegment()}get ref(){return new no(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Hy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Hy extends Kp{data(){return super.data()}}function lh(i,e){return"string"==typeof e?ec(i,e):e instanceof md?e._internalPath:e._delegate._internalPath}function Yp(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new M(lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _d{}class uh extends _d{}function Mm(i,e,...t){let o=[];e instanceof _d&&o.push(e),o=o.concat(t),function(d){const y=d.filter(x=>x instanceof xu).length,I=d.filter(x=>x instanceof vd).length;if(y>1||y>0&&I>0)throw new M(lt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const d of o)i=d._apply(i);return i}class vd extends uh{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new vd(e,t,o)}_apply(e){const t=this._parse(e);return Vm(e._query,t),new ia(e.firestore,e.converter,Yl(e._query,t))}_parse(e){const t=Rc(e.firestore);return function(d,y,I,x,G,Z,pe){let Te;if(G.isKeyField()){if("array-contains"===Z||"array-contains-any"===Z)throw new M(lt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Z}' queries on documentId().`);if("in"===Z||"not-in"===Z){Um(pe,Z);const st=[];for(const St of pe)st.push(km(x,d,St));Te={arrayValue:{values:st}}}else Te=km(x,d,pe)}else"in"!==Z&&"not-in"!==Z&&"array-contains-any"!==Z||Um(pe,Z),Te=Hp(I,"where",pe,"in"===Z||"not-in"===Z);return xr.create(G,Z,Te)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class xu extends _d{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new xu(e,t)}_parse(e){const t=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===t.length?t[0]:hi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(o,d){let y=o;const I=d.getFlattenedFilters();for(const x of I)Vm(y,x),y=Yl(y,x)}(e._query,t),new ia(e.firestore,e.converter,Yl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ch extends uh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ch(e,t)}_apply(e){const t=function(o,d,y){if(null!==o.startAt)throw new M(lt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new M(lt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const I=new Xo(d,y);return function(x,G){if(null===zl(x)){const Z=Kl(x);null!==Z&&Qp(0,Z,G.field)}}(o,I),I}(e._query,this._field,this._direction);return new ia(e.firestore,e.converter,function(o,d){const y=o.explicitOrderBy.concat([d]);return new Ui(o.path,o.collectionGroup,y,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function xm(i,e="asc"){const t=e,o=lh("orderBy",i);return ch._create(o,t)}class Ed extends uh{constructor(e,t,o){super(),this.type=e,this._limit=t,this._limitType=o}static _create(e,t,o){return new Ed(e,t,o)}_apply(e){return new ia(e.firestore,e.converter,Io(e._query,this._limit,this._limitType))}}function Nm(i){return function Mc(i,e){if(e<=0)throw new M(lt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}("limit",i),Ed._create("limit",i,"F")}class dh extends uh{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new dh(e,t,o)}_apply(e){const t=Fm(e,this.type,this._docOrFields,this._inclusive);return new ia(e.firestore,e.converter,(d=t,new Ui((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,d,o.endAt)));var o,d}}function Lm(...i){return dh._create("startAfter",i,!1)}class hh extends uh{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new hh(e,t,o)}_apply(e){const t=Fm(e,this.type,this._docOrFields,this._inclusive);return new ia(e.firestore,e.converter,(d=t,new Ui((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,d)));var o,d}}function Wy(...i){return hh._create("endBefore",i,!1)}function Fm(i,e,t,o){if(t[0]=(0,q.m9)(t[0]),t[0]instanceof Kp)return function(d,y,I,x,G){if(!x)throw new M(lt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${I}().`);const Z=[];for(const pe of Ha(d))if(pe.field.isKeyField())Z.push($(y,x.key));else{const Te=x.data.field(pe.field);if(Fo(Te))throw new M(lt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+pe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Te){const st=pe.field.canonicalString();throw new M(lt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${st}' (used as the orderBy) does not exist.`)}Z.push(Te)}return new Wi(Z,G)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const d=Rc(i.firestore);return function(y,I,x,G,Z,pe){const Te=y.explicitOrderBy;if(Z.length>Te.length)throw new M(lt.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const st=[];for(let St=0;St<Z.length;St++){const kt=Z[St];if(Te[St].field.isKeyField()){if("string"!=typeof kt)throw new M(lt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof kt}`);if(!Du(y)&&-1!==kt.indexOf("/"))throw new M(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${kt}' contains a slash.`);const vn=y.path.child(Wn.fromString(kt));if(!Gt.isDocumentKey(vn))throw new M(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${vn}' is not because it contains an odd number of segments.`);const Hn=new Gt(vn);st.push($(I,Hn))}else{const vn=Hp(x,G,kt);st.push(vn)}}return new Wi(st,pe)}(i._query,i.firestore._databaseId,d,e,t,o)}}function km(i,e,t){if("string"==typeof(t=(0,q.m9)(t))){if(""===t)throw new M(lt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Du(e)&&-1!==t.indexOf("/"))throw new M(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Wn.fromString(t));if(!Gt.isDocumentKey(o))throw new M(lt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return $(i,new Gt(o))}if(t instanceof no)return $(i,t._key);throw new M(lt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ru(t)}.`)}function Um(i,e){if(!Array.isArray(i)||0===i.length)throw new M(lt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new M(lt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Vm(i,e){if(e.isInequality()){const o=Kl(i),d=e.field;if(null!==o&&!o.isEqual(d))throw new M(lt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${o.toString()}' and '${d.toString()}'`);const y=zl(i);null!==y&&Qp(0,d,y)}const t=function(o,d){for(const y of o)for(const I of y.getFlattenedFilters())if(d.indexOf(I.op)>=0)return I.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new M(lt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Qp(i,e,t){if(!t.isEqual(e))throw new M(lt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class zy{convertValue(e,t="none"){switch(ya(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ll(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw an()}}convertObject(e,t){const o={};return Js(e.fields,(d,y)=>{o[d]=this.convertValue(y,t)}),o}convertGeoPoint(e){return new uf(gi(e.latitude),gi(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Va(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Ba(e));default:return null}}convertTimestamp(e){const t=Ua(e);return new _r(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Wn.fromString(e);Xt(vf(o));const d=new No(o.get(1),o.get(3)),y=new Gt(o.popFirst(5));return d.isEqual(t)||Ai(`Document ${y} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),y}}class Nc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dd extends Kp{constructor(e,t,o,d,y,I){super(e,t,o,d,I),this._firestore=e,this._firestoreImpl=e,this.metadata=y}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(lh("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class hf extends Dd{data(e={}){return super.data(e)}}class Id{constructor(e,t,o,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new Nc(d.hasPendingWrites,d.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new hf(this._firestore,this._userDataWriter,o.key,o,new Nc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new M(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,d){if(o._snapshot.oldDocs.isEmpty()){let y=0;return o._snapshot.docChanges.map(I=>({type:"added",doc:new hf(o._firestore,o._userDataWriter,I.doc.key,I.doc,new Nc(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:y++}))}{let y=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(I=>d||3!==I.type).map(I=>{const x=new hf(o._firestore,o._userDataWriter,I.doc.key,I.doc,new Nc(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter);let G=-1,Z=-1;return 0!==I.type&&(G=y.indexOf(I.doc.key),y=y.delete(I.doc.key)),1!==I.type&&(y=y.add(I.doc),Z=y.indexOf(I.doc.key)),{type:jm(I.type),doc:x,oldIndex:G,newIndex:Z}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function jm(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return an()}}function Hm(i){i=Hr(i,no);const e=Hr(i.firestore,Si);return function oh(i,e,t={}){const o=new z;return i.asyncQueue.enqueueAndForget((0,m.Z)(function*(){return function(d,y,I,x,G){const Z=new th({next:Te=>{y.enqueueAndForget(()=>ap(d,pe));const st=Te.docs.has(I);!st&&Te.fromCache?G.reject(new M(lt.UNAVAILABLE,"Failed to get document because the client is offline.")):st&&Te.fromCache&&x&&"server"===x.source?G.reject(new M(lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(Te)},error:Te=>G.reject(Te)}),pe=new cp(Ol(I.path),Z,{includeMetadataChanges:!0,Nu:!0});return Vl(d,pe)}(yield Pc(i),i.asyncQueue,e,t,o)})),o.promise}(ro(e),i._key).then(t=>ph(e,i,t))}class Nu extends zy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new no(this.firestore,null,t)}}function $m(i){i=Hr(i,no);const e=Hr(i.firestore,Si),t=ro(e),o=new Nu(e);return function kp(i,e){const t=new z;return i.asyncQueue.enqueueAndForget((0,m.Z)(function*(){return(o=(0,m.Z)(function*(d,y,I){try{const x=yield function(G,Z){const pe=zt(G);return pe.persistence.runTransaction("read document","readonly",Te=>pe.localDocuments.getDocument(Te,Z))}(d,y);x.isFoundDocument()?I.resolve(x):x.isNoDocument()?I.resolve(null):I.reject(new M(lt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const G=Qu(x,`Failed to get document '${y} from cache`);I.reject(G)}}),function(d,y,I){return o.apply(this,arguments)})(yield function tf(i){return rh(i).then(e=>e.localStore)}(i),e,t);var o})),t.promise}(t,i._key).then(d=>new Dd(e,o,i._key,d,new Nc(null!==d&&d.hasLocalMutations,!0),i.converter))}function Gm(i){i=Hr(i,ia);const e=Hr(i.firestore,Si),t=ro(e),o=new Nu(e);return Yp(i._query),function Up(i,e,t={}){const o=new z;return i.asyncQueue.enqueueAndForget((0,m.Z)(function*(){return function(d,y,I,x,G){const Z=new th({next:Te=>{y.enqueueAndForget(()=>ap(d,pe)),Te.fromCache&&"server"===x.source?G.reject(new M(lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(Te)},error:Te=>G.reject(Te)}),pe=new cp(I,Z,{includeMetadataChanges:!0,Nu:!0});return Vl(d,pe)}(yield Pc(i),i.asyncQueue,e,t,o)})),o.promise}(t,i._query).then(d=>new Id(e,o,i,d))}function Zp(i,e,t,...o){i=Hr(i,no);const d=Hr(i.firestore,Si),y=Rc(d);let I;return I="string"==typeof(e=(0,q.m9)(e))||e instanceof md?function jl(i,e,t,o,d,y){const I=i.da(1,e,t),x=[Gp(e,o,t)],G=[d];if(y.length%2!=0)throw new M(lt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let st=0;st<y.length;st+=2)x.push(Gp(e,y[st])),G.push(y[st+1]);const Z=[],pe=Os.empty();for(let st=x.length-1;st>=0;--st)if(!zp(Z,x[st])){const St=x[st];let kt=G[st];kt=(0,q.m9)(kt);const vn=I.ca(St);if(kt instanceof xc)Z.push(St);else{const Hn=Ju(kt,vn);null!=Hn&&(Z.push(St),pe.set(St,Hn))}}const Te=new ts(Z);return new Cm(pe,Te,I.fieldTransforms)}(y,"updateDoc",i._key,e,t,o):function Bl(i,e,t,o){const d=i.da(1,e,t);$p("Data must be an object, but it was:",d,o);const y=[],I=Os.empty();Js(o,(G,Z)=>{const pe=ec(e,G,t);Z=(0,q.m9)(Z);const Te=d.ca(pe);if(Z instanceof xc)y.push(pe);else{const st=Ju(Z,Te);null!=st&&(y.push(pe),I.set(pe,st))}});const x=new ts(y);return new Cm(I,x,d.fieldTransforms)}(y,"updateDoc",i._key,e),ff(d,[I.toMutation(i._key,l.exists(!0))])}function Lc(i){return ff(Hr(i.firestore,Si),[new tn(i._key,l.none())])}function Zy(i,e){const t=Hr(i.firestore,Si),o=dm(i),d=function qp(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}(i.converter,e);return ff(t,[Tm(Rc(i.firestore),"addDoc",o._key,d,null!==i.converter,{}).toMutation(o._key,l.exists(!1))]).then(()=>o)}function Xy(i,...e){var t,o,d;i=(0,q.m9)(i);let y={includeMetadataChanges:!1},I=0;"object"!=typeof e[I]||sf(e[I])||(y=e[I],I++);const x={includeMetadataChanges:y.includeMetadataChanges};if(sf(e[I])){const Te=e[I];e[I]=null===(t=Te.next)||void 0===t?void 0:t.bind(Te),e[I+1]=null===(o=Te.error)||void 0===o?void 0:o.bind(Te),e[I+2]=null===(d=Te.complete)||void 0===d?void 0:d.bind(Te)}let G,Z,pe;if(i instanceof no)Z=Hr(i.firestore,Si),pe=Ol(i._key.path),G={next:Te=>{e[I]&&e[I](ph(Z,i,Te))},error:e[I+1],complete:e[I+2]};else{const Te=Hr(i,ia);Z=Hr(Te.firestore,Si),pe=Te._query;const st=new Nu(Z);G={next:St=>{e[I]&&e[I](new Id(Z,st,Te,St))},error:e[I+1],complete:e[I+2]},Yp(i._query)}return function(Te,st,St,kt){const vn=new th(kt),Hn=new cp(st,vn,St);return Te.asyncQueue.enqueueAndForget((0,m.Z)(function*(){return Vl(yield Pc(Te),Hn)})),()=>{vn.bc(),Te.asyncQueue.enqueueAndForget((0,m.Z)(function*(){return ap(yield Pc(Te),Hn)}))}}(ro(Z),pe,x,G)}function ff(i,e){return function(t,o){const d=new z;return t.asyncQueue.enqueueAndForget((0,m.Z)(function*(){return function Gh(i,e,t){return Tc.apply(this,arguments)}(yield function rf(i){return ih(i).then(e=>e.syncEngine)}(t),o,d)})),d.promise}(ro(i),e)}function ph(i,e,t){const o=t.docs.get(e._key),d=new Nu(i);return new Dd(i,d,e._key,o,new Nc(t.hasPendingWrites,t.fromCache),e.converter)}function Cd(){return new Dl("serverTimestamp")}!function(i,e=!0){po=C.Jn,(0,C.Xd)(new J.wA("firestore",(t,{instanceIdentifier:o,options:d})=>{const y=t.getProvider("app").getImmediate(),I=new Si(new it(t.getProvider("auth-internal")),new Wr(t.getProvider("app-check-internal")),function(x,G){if(!Object.prototype.hasOwnProperty.apply(x.options,["projectId"]))throw new M(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new No(x.options.projectId,G)}(y,o),y);return d=Object.assign({useFetchStreams:e},d),I._setSettings(d),I},"PUBLIC").setMultipleInstances(!0)),(0,C.KN)(ha,"3.8.3",i),(0,C.KN)(ha,"3.8.3","esm2017")}()},4147:Ee=>{Ee.exports={i8:"0.0.33"}}},Ee=>{Ee(Ee.s=8988)}]);