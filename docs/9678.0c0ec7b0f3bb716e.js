"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[9678],{7765:(x,f,r)=>{r.d(f,{u:()=>m});var _=r(467),t=r(4438),u=r(1994),P=r(8591);let m=(()=>{class d{constructor(){this.db=(0,t.WQX)(u.h),this.storageService=(0,t.WQX)(P._)}get fullPath(){return`${this.basePath}/${this.endpoint}`}generatePath(i=""){return i?`${this.fullPath}/${i}`:this.fullPath}create(i,c){return this.db.create(this.generatePath(c),i)}get$(){return this.db.readRealtime$(this.fullPath)}getById(i){return this.db.readRealtimeOriginal$(`${this.fullPath}/${i}`)}update(i,c){return this.db.update(`${this.fullPath}/${i}`,c)}remove(i){return this.db.remove(`${this.fullPath}/${i}`)}set(i,c){return this.db.set(this.generatePath(i),c)}getKeys$(i=""){return this.db.getKeys$(this.generatePath(i))}getKeys(i=""){return this.db.getKeys(this.generatePath(i))}readOnce(i=""){return this.db.readOnce(this.generatePath(i))}read$(i=""){return this.db.readRealtime$(this.generatePath(i))}clearDb(){return this.set("",null)}updateCounter(i,c=!0){return this.db.updateCounterV2(this.generatePath(i),c)}createWithFile(i,c,p){var g=this;return(0,_.A)(function*(){if(!c)throw new Error("Please select an image.");const C=yield g.storageService.uploadFile(g.basePath,c,p),O={...i,imageUrl:C};yield g.create(O)})()}uploadFile(i,c){var p=this;return(0,_.A)(function*(){if(!i)throw new Error("Please select an image.");return yield p.storageService.uploadFile(p.basePath,i,c)})()}extractAndUploadFiles(i,c){var p=this;return(0,_.A)(function*(){return p.storageService.extractAndUploadFiles(i,p.basePath,c)})()}static{this.\u0275fac=function(c){return new(c||d)}}static{this.\u0275prov=t.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()},9678:(x,f,r)=>{r.r(f),r.d(f,{default:()=>V});var _=r(467),t=r(4438),u=r(9417),P=r(177),m=r(7765);let d=(()=>{class o extends m.u{constructor(){super(...arguments),this.basePath="poll-db",this.endpoint=""}getPoll(e){return this.getById(`${e}`)}vote(e,n){return this.updateCounter(`${e}/votes/${n}`,!0)}createPoll(e){return this.create(e)}hasVoted(e,n){return(0,_.A)(function*(){return!!localStorage.getItem(`poll-voted-${e}-${n}`)})()}markVoted(e,n){localStorage.setItem(`poll-voted-${e}-${n}`,"true")}static{this.\u0275fac=(()=>{let e;return function(l){return(e||(e=t.xGo(o)))(l||o)}})()}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();const F=["pieCanvas"];let i=(()=>{class o{set votes(e){setTimeout(()=>this.drawPieChart(e),0)}drawPieChart(e){const n=this.pieCanvas.nativeElement.getContext("2d");if(!n)return;const l=Object.values(e).reduce((b,M)=>b+M,0);let s=0;const h=["#4caf50","#2196f3","#ff9800","#e91e63"];Object.entries(e).forEach(([b,M],T)=>{const v=M/l*2*Math.PI;n.beginPath(),n.moveTo(100,100),n.arc(100,100,100,s,s+v),n.closePath(),n.fillStyle=h[T%h.length],n.fill(),s+=v})}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-pie-chart"]],viewQuery:function(n,l){if(1&n&&t.GBs(F,5),2&n){let s;t.mGM(s=t.lsd())&&(l.pieCanvas=s.first)}},inputs:{votes:"votes"},decls:2,vars:0,consts:[["pieCanvas",""],["width","200","height","200"]],template:function(n,l){1&n&&t.nrm(0,"canvas",1,0)},encapsulation:2})}}return o})();var c=r(4742);function p(o,a){if(1&o){const e=t.RV6();t.j41(0,"li",6),t.bIt("click",function(){const l=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.selectPoll(l.key))}),t.j41(1,"strong"),t.EFF(2),t.k0s(),t.j41(3,"span",7),t.EFF(4,"Vote \u279c"),t.k0s()()}if(2&o){const e=a.$implicit;t.R7$(2),t.JRh(e.question)}}function g(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",3)(1,"h2"),t.EFF(2,"\u{1f5c2}\ufe0f Live Polls"),t.k0s(),t.j41(3,"ul"),t.DNE(4,p,5,1,"li",4),t.k0s(),t.j41(5,"button",5),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.goToCreate())}),t.EFF(6,"\u2795 Create New Poll"),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(4),t.Y8G("ngForOf",e.polls)}}function C(o,a){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"input",13),t.mxI("ngModelChange",function(l){const s=t.eBV(e).index,h=t.XpG(2);return t.DH7(h.newOptions[s],l)||(h.newOptions[s]=l),t.Njj(l)}),t.k0s()()}if(2&o){const e=a.index,n=t.XpG(2);t.R7$(),t.Mz_("placeholder","Option ",e+1,""),t.R50("ngModel",n.newOptions[e])}}function O(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",8)(1,"h2"),t.EFF(2,"\u{1f4dd} Create New Poll"),t.k0s(),t.j41(3,"input",9),t.mxI("ngModelChange",function(l){t.eBV(e);const s=t.XpG();return t.DH7(s.newQuestion,l)||(s.newQuestion=l),t.Njj(l)}),t.k0s(),t.DNE(4,C,2,3,"div",10),t.j41(5,"div",11)(6,"button",6),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.addOption())}),t.EFF(7,"\u2795 Add Option"),t.k0s(),t.j41(8,"button",5),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.createPoll())}),t.EFF(9,"\u2705 Create Poll"),t.k0s(),t.j41(10,"button",12),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.mode="list")}),t.EFF(11,"\u2b05 Back"),t.k0s()()()}if(2&o){const e=t.XpG();t.R7$(3),t.R50("ngModel",e.newQuestion),t.R7$(),t.Y8G("ngForOf",e.newOptions)}}function k(o,a){if(1&o&&(t.j41(0,"p",20),t.EFF(1),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.SpI("\u23f3 Time left: ",e.timeLeft,"s")}}function I(o,a){if(1&o&&t.nrm(0,"app-progress",25),2&o){const e=t.XpG().$implicit,n=t.XpG(2);t.Y8G("percent",n.selectedPoll.votes[e]/n.totalVotes*100||0)}}function y(o,a){if(1&o&&t.nrm(0,"app-progress",26),2&o){const e=t.XpG().$implicit,n=t.XpG(2);t.Y8G("percent",n.selectedPoll.votes[e]/n.totalVotes*100||0)}}function j(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",21)(1,"button",22),t.bIt("click",function(){const l=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.vote(l))}),t.EFF(2),t.k0s(),t.DNE(3,I,1,1,"app-progress",23)(4,y,1,1,"app-progress",24),t.j41(5,"span"),t.EFF(6),t.k0s()()}if(2&o){const e=a.$implicit,n=t.XpG(2);t.R7$(),t.Y8G("disabled",n.hasVoted||n.showResultsOnly),t.R7$(),t.SpI(" ",e," "),t.R7$(),t.Y8G("ngIf",n.selectedPoll.votes),t.R7$(),t.Y8G("ngIf",n.selectedPoll.votes),t.R7$(2),t.JRh(n.selectedPoll.votes[e]||0)}}function $(o,a){if(1&o&&(t.j41(0,"p"),t.EFF(1,"\u2705 You voted for: "),t.j41(2,"strong"),t.EFF(3),t.k0s()()),2&o){const e=t.XpG(2);t.R7$(3),t.JRh(e.voteSelected)}}function R(o,a){if(1&o&&t.nrm(0,"app-pie-chart",27),2&o){const e=t.XpG(2);t.Y8G("votes",e.selectedPoll.votes)}}function E(o,a){1&o&&(t.j41(0,"p"),t.EFF(1,"\u{1f6d1} Voting ended"),t.k0s())}function G(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",14)(1,"h2"),t.EFF(2),t.k0s(),t.DNE(3,k,2,1,"p",15)(4,j,7,5,"div",16),t.j41(5,"div",17),t.DNE(6,$,4,1,"p",18)(7,R,1,1,"app-pie-chart",19)(8,E,2,0,"p",18),t.j41(9,"p"),t.EFF(10,"Total Votes: "),t.j41(11,"strong"),t.EFF(12),t.k0s()()(),t.j41(13,"button",12),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.backToList())}),t.EFF(14,"\u2b05 Back to List"),t.k0s()()}if(2&o){const e=t.XpG();t.R7$(2),t.JRh(e.selectedPoll.question),t.R7$(),t.Y8G("ngIf",!e.showResultsOnly),t.R7$(),t.Y8G("ngForOf",e.selectedPoll.options),t.R7$(2),t.Y8G("ngIf",e.hasVoted),t.R7$(),t.Y8G("ngIf",e.hasVoted),t.R7$(),t.Y8G("ngIf",!e.hasVoted&&e.showResultsOnly),t.R7$(4),t.JRh(e.totalVotes)}}let V=(()=>{class o{constructor(){this.api=(0,t.WQX)(d),this.mode="list",this.polls=[],this.selectedPoll=null,this.selectedPollId=null,this.voteSelected=null,this.hasVoted=!1,this.newQuestion="",this.newOptions=["",""],this.userId=crypto.randomUUID(),this.timeLeft=60}ngOnInit(){this.loadPolls()}loadPolls(){this.api.get$().subscribe(e=>{this.polls=e})}goToCreate(){this.mode="create"}addOption(){this.newOptions.push("")}createPoll(){const e={question:this.newQuestion,options:this.newOptions,votes:Object.fromEntries(this.newOptions.map(n=>[n,0]))};this.api.createPoll(e).then(n=>{this.selectedPollId=n.key,this.mode="list",this.loadPolls()})}selectPoll(e){var n=this;return(0,_.A)(function*(){n.selectedPollId=e,n.api.getPoll(n.selectedPollId).subscribe(function(){var l=(0,_.A)(function*(s){n.selectedPoll=s,n.mode="feedback",n.hasVoted=yield n.api.hasVoted(n.selectedPollId,n.userId)});return function(s){return l.apply(this,arguments)}}()),n.timer=setInterval(()=>{n.timeLeft>0&&n.timeLeft--},1e3)})()}vote(e){this.hasVoted||!this.selectedPollId||(this.hasVoted=!0,this.voteSelected=e,this.api.vote(this.selectedPollId,e),this.api.markVoted(this.selectedPollId,this.userId))}get totalVotes(){return this.selectedPoll?Object.values(this.selectedPoll.votes||{}).reduce((e,n)=>e+n,0):0}get showResultsOnly(){return 0===this.timeLeft||this.hasVoted}backToList(){this.mode="list",this.selectedPoll=null,this.selectedPollId=null}ngOnDestroy(){clearInterval(this.timer)}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-live-poll"]],decls:3,vars:3,consts:[["class","poll-list",4,"ngIf"],["class","poll-create",4,"ngIf"],["class","poll",4,"ngIf"],[1,"poll-list"],[3,"click",4,"ngFor","ngForOf"],[1,"primary",3,"click"],[3,"click"],[1,"view-button"],[1,"poll-create"],["placeholder","Enter your question",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[1,"create-actions"],[1,"secondary",3,"click"],[3,"ngModelChange","ngModel","placeholder"],[1,"poll"],["class","sub",4,"ngIf"],["class","option",4,"ngFor","ngForOf"],[1,"feedback"],[4,"ngIf"],[3,"votes",4,"ngIf"],[1,"sub"],[1,"option"],[1,"vote-btn",3,"click","disabled"],["type","circle",3,"percent",4,"ngIf"],["type","line","status","success",3,"percent",4,"ngIf"],["type","circle",3,"percent"],["type","line","status","success",3,"percent"],[3,"votes"]],template:function(n,l){1&n&&t.DNE(0,g,7,1,"div",0)(1,O,12,2,"div",1)(2,G,15,7,"div",2),2&n&&(t.Y8G("ngIf","list"===l.mode),t.R7$(),t.Y8G("ngIf","create"===l.mode),t.R7$(),t.Y8G("ngIf","feedback"===l.mode&&l.selectedPoll))},dependencies:[P.CommonModule,P.NgForOf,P.NgIf,u.YN,u.me,u.BC,u.vS,i,c.X],styles:[".poll[_ngcontent-%COMP%], .poll-create[_ngcontent-%COMP%], .poll-list[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:1.5rem;background:#fff;border-radius:10px;box-shadow:0 8px 24px #0000000f}.poll[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .poll-create[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .poll-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:24px;font-weight:600}.poll[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .poll-create[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .poll-list[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;width:100%;padding:8px 12px;margin-bottom:12px;font-size:16px;border:1px solid #ccc;border-radius:6px;transition:.2s}.poll[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .poll-create[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .poll-list[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#4caf50;outline:none}.poll[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%], .poll-create[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%], .poll-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{margin-bottom:1rem}.poll[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%], .poll-create[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%], .poll-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%]{padding:6px 14px;margin-bottom:6px;background:#4caf50;color:#fff;border:none;border-radius:4px;cursor:pointer;font-weight:700}.poll[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%]:disabled, .poll-create[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%]:disabled, .poll-list[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .vote-btn[_ngcontent-%COMP%]:disabled{background:#a5d6a7;cursor:not-allowed}.poll[_ngcontent-%COMP%]   .feedback[_ngcontent-%COMP%], .poll-create[_ngcontent-%COMP%]   .feedback[_ngcontent-%COMP%], .poll-list[_ngcontent-%COMP%]   .feedback[_ngcontent-%COMP%]{margin-top:1rem;font-size:14px}.poll[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%], .poll-create[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%], .poll-list[_ngcontent-%COMP%]   .sub[_ngcontent-%COMP%]{font-size:13px;color:#666;margin-bottom:12px}.poll-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.poll-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:12px 16px;background:#f5f5f5;margin-bottom:10px;border-radius:6px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background .2s}.poll-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#e0f2f1}.poll-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .view-button[_ngcontent-%COMP%]{font-size:13px;color:#2196f3}button[_ngcontent-%COMP%]{padding:6px 12px;margin:5px;border-radius:4px;border:none;cursor:pointer}button.primary[_ngcontent-%COMP%]{background:#4caf50;color:#fff}button.secondary[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.create-actions[_ngcontent-%COMP%]{margin-top:1rem}.create-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px}@media (max-width: 600px){.poll[_ngcontent-%COMP%], .poll-create[_ngcontent-%COMP%], .poll-list[_ngcontent-%COMP%]{padding:1rem;font-size:15px}.poll[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .poll-create[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .poll-list[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.poll[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .poll-create[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .poll-list[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:14px}.poll[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .poll-create[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .poll-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}}"]})}}return o})()}}]);