"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[5205],{2743:(H,P,c)=>{c.d(P,{A:()=>I});var o=c(467),d=c(4438),S=c(4668),b=c(7673),f=c(4572),D=c(8810),A=c(9437),C=c(8141),g=c(6354);function E(s){return new Date(s).toISOString().split("T")[0]}var B=c(9972);let M=(()=>{class s{constructor(){this.methodCallCount={}}trackMethodCall(e){this.methodCallCount[e]||(this.methodCallCount[e]=0),this.methodCallCount[e]++,console.log(`${e} called ${this.methodCallCount[e]} times`)}getMethodCallCount(e){return this.methodCallCount[e]||0}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var v=function(s){return s.CATEGORY="categories_wise",s.STATUS="status_wise",s.DATE="date_wise",s}(v||{});let I=(()=>{class s{constructor(e,t){this.firebaseRealtimeDatabaseService=e,this.trackingService=t,this.BASE="topics-db",this.PATHS={posts:`${this.BASE}/posts`,categories:`${this.BASE}/categories`,sprints:`${this.BASE}/sprints`,checklist:`${this.BASE}/checklist`},this.legacySpacesPath="spaces-db",this.newBasePath="topics-db",this.totalPosts=(0,d.vPA)(0),this.posts$=this.fetchPosts().pipe((0,S.t)(2)),this.categories$=this.fetchCategories().pipe((0,S.t)(2)),this.safePosts$=this.posts$.pipe((0,A.W)(r=>(this.handleError(r),(0,b.of)([])))),this.postsWithCategory$=(0,f.z)([this.posts$,this.categories$]).pipe((0,C.M)(([r])=>this.totalPosts.set(r.length)),(0,g.T)(([r,i])=>this.attachCategoryNames(r,i)),(0,S.t)(2)),this.groupedCategories$=(0,f.z)([this.categories$,this.posts$]).pipe((0,g.T)(([r,i])=>r.reduce((n,h)=>{const m=i.filter(y=>y.categoryId===h.key);return(m.length?n.withPosts:n.withoutPosts).push({...h,posts:m}),n},{withPosts:[],withoutPosts:[]})))}createPost(e){return this.firebaseRealtimeDatabaseService.create(this.PATHS.posts,e)}updatePost(e,t){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.posts}/${e}`,t)}removePost(e){return this.firebaseRealtimeDatabaseService.remove(`${this.PATHS.posts}/${e}`)}removeMultiplePosts(e){var t=this;return(0,o.A)(function*(){const r=e.map(i=>t.removePost(i));yield Promise.all(r)})()}getPost(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.posts}/${e}`)}fetchPosts(){return this.firebaseRealtimeDatabaseService.readRealtime$(this.PATHS.posts)}createCategory(e){return this.firebaseRealtimeDatabaseService.create(this.PATHS.categories,e)}removeCategory(e){return this.firebaseRealtimeDatabaseService.remove(`${this.PATHS.categories}/${e}`)}getCategories(){return this.categories$}getCategory(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.categories}/${e}`)}getCategoryById(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.categories}/${e}`)}getPostsByCategoryId(e){return this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.posts,{categoryId:e})}getPostsByCategoryWithName(e){return(0,f.z)([this.getPostsByCategoryId(e),this.categories$]).pipe((0,g.T)(([t,r])=>t.map(i=>({...i,categoryName:r.find(n=>n.key===i.categoryId)?.title??"Uncategorized"}))))}getPostsByStatus(e){return"All"===e?this.postsWithCategory$:this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.posts,{status:e})}getPostsBySprintId(e){return this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.posts,{sprintId:e})}fetchCategories(){return this.firebaseRealtimeDatabaseService.readRealtime$(this.PATHS.categories)}attachCategoryNames(e,t){return e.map(r=>({...r,categoryName:t.find(i=>i.key===r.categoryId)?.title||"Uncategorized"}))}getPostsServerSide(e,t,r){return e?this.getPostsByCategoryId(e):t?this.getPostsBySprintId(t):r&&"All"!==r?this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.posts,{status:r}):this.posts$}filterPosts(e,t,r="All",i="createdAt",n="desc",h="",m=null){const u=this.getPostsServerSide(e||void 0,h||void 0,r);return this.withCategoryNames(u).pipe((0,g.T)(y=>function O(s,a,e,t,r,i,n,h){const m=e.toLowerCase().trim();return function T(s,a,e="asc"){return[...s].sort((t,r)=>{const i=t[a],n=r[a],h=i<n?-1:i>n?1:0;return"asc"===e?h:-h})}(s,r,i).filter(u=>{const y=!a||u.categoryId===a,w=u.title?.toLowerCase().includes(m)||u.body?.toLowerCase().includes(m);return y&&w&&("All"===t||u.status===t)&&(!n||u.sprintId===n)&&(null===h||u.bookmark===h)})}(y,e,t,r,i,n,h,m)))}matchesSearch(e,t){const r=e.title?.toLowerCase().includes(t),i=e.body?.toLowerCase().includes(t);return!(!r&&!i)}handleError(e){return console.error("Error occurred:",e),(0,D.$)(()=>new Error("Unknown error occurred. Please try again later."))}getCategoriesWisePosts(){return this.groupPosts(v.CATEGORY)}groupPosts(e){return this.postsWithCategory$.pipe((0,g.T)(t=>this.groupData(e,t)))}groupData(e,t){let r,i;switch(e){case v.CATEGORY:r=n=>n.categoryId,i=n=>n.categoryName;break;case v.STATUS:r=n=>n.status,i=n=>n.status;break;case v.DATE:r=n=>E(n.updatedAt),i=n=>E(n.updatedAt);break;default:return[]}return function R(s,a,e){const t={};for(const r of s){const i=a(r),n=e(r);t[i]||(t[i]={key:i,title:n,data:[]}),t[i].data.push(r)}return Object.values(t)}(t,r,i)}createSprint(e){return this.firebaseRealtimeDatabaseService.create(this.PATHS.sprints,e)}getSprints(){return this.firebaseRealtimeDatabaseService.readRealtime$(this.PATHS.sprints)}getSprint(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.sprints}/${e}`)}updateSprint(e,t){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.sprints}/${e}`,t)}withCategoryNames(e){return(0,f.z)([e,this.categories$]).pipe((0,g.T)(([t,r])=>t.map(i=>({...i,categoryName:r.find(n=>n.key===i.categoryId)?.title??"Uncategorized"}))))}moveLists(e,t,r=!1){return(0,o.A)(function*(){})()}createChecklist(e){return this.firebaseRealtimeDatabaseService.create(this.PATHS.checklist,e)}updateChecklist(e,t){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.checklist}/${e}`,t)}getChecklist(){return this.firebaseRealtimeDatabaseService.readRealtime$(this.PATHS.checklist)}getChecklistByCategoryId(e){return this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.checklist,{categoryId:e})}getChecklistByCategoryOrSpace(e,t){if(!e&&!t)throw new Error("categoryId or spaceId is required");return this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.checklist,e?{categoryId:e}:{spaceId:t})}getChecklistById(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.checklist}/${e}`)}getChecklistItemsById(e){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.PATHS.checklist}/${e}/items`)}updateTitle(e,t){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.checklist}/${e}`,{title:t})}addItem(e,t,r=!1){return this.firebaseRealtimeDatabaseService.create(`${this.PATHS.checklist}/${e}/items`,{name:t,completed:r})}toggleItem(e,t,r){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.checklist}/${e}/items/${t}`,{completed:r})}renameItem(e,t,r){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.checklist}/${e}/items/${t}`,{name:r})}removeItem(e,t){return this.firebaseRealtimeDatabaseService.remove(`${this.PATHS.checklist}/${e}/items/${t}`)}createCheckListWithOrginalKey(e,t){var r=this;return(0,o.A)(function*(){yield r.firebaseRealtimeDatabaseService.set(`${r.PATHS.checklist}/${e}`,t)})()}addItemWithKey(e,t,r){return this.firebaseRealtimeDatabaseService.set(`${this.PATHS.checklist}/${e}/items/${t}`,{name:r.name,completed:r.completed})}checkIfExists(e){return this.firebaseRealtimeDatabaseService.readOnceOriginal(`${this.PATHS.checklist}/${e}`)}static{this.\u0275fac=function(t){return new(t||s)(d.KVO(B.h),d.KVO(M))}}static{this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},5205:(H,P,c)=>{c.r(P),c.d(P,{SprintsNavigationsComponent:()=>R});var o=c(4438),d=c(2743),S=c(2557),b=c(8326),f=c(8701),D=c(177);const A=()=>["sprints","create"],C=l=>["sprints","profile",l];function g(l,T){if(1&l&&o.nrm(0,"ng-sidenav-link",1),2&l){const p=T.$implicit;o.FS9("label",p.title),o.Y8G("routerLink",o.eq3(2,C,p.key))}}let R=(()=>{class l{constructor(){this.jsonDataService=(0,o.WQX)(d.A),this.collections$=this.jsonDataService.getSprints()}static{this.\u0275fac=function($){return new($||l)}}static{this.\u0275cmp=o.VBU({type:l,selectors:[["app-sprints-navigations"]],standalone:!1,decls:9,vars:4,consts:[[3,"routerLink"],[3,"routerLink","label"]],template:function($,k){1&$&&(o.j41(0,"h1"),o.EFF(1,"Sprints"),o.k0s(),o.j41(2,"ng-sidenav")(3,"ng-sidenav-link",0),o.EFF(4," Create "),o.k0s(),o.nrm(5,"hr"),o.Z7z(6,g,1,4,"ng-sidenav-link",1,o.Vm6),o.nI1(8,"async"),o.k0s()),2&$&&(o.R7$(3),o.Y8G("routerLink",o.lJ4(3,A)),o.R7$(3),o.Dyx(o.bMT(8,1,k.collections$)))},dependencies:[S.Wk,b.D,f.$,D.AsyncPipe],encapsulation:2})}}return l})()}}]);