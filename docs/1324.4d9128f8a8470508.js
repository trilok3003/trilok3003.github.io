"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[1324],{1324:(b,f,r)=>{r.r(f),r.d(f,{EncapsulatingModule:()=>Z});var u=r(9808),h=r(4202),e=r(5e3);class m{}var c=r(3075);function M(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"li",5),e._uU(1),e.TgZ(2,"a",6),e.NdJ("click",function(){const g=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.deleteMessage(g))}),e._uU(3,"Delete"),e.qZA()()}if(2&s){const t=n.$implicit;e.MGl("title","Created at ",t.createdAt.toTimeString(),""),e.xp6(1),e.hij(" ",t.text," \u2014 ")}}function y(s,n){if(1&s&&(e.TgZ(0,"ul"),e.YNc(1,M,4,2,"li",4),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.messages)}}const C=[{path:"",component:(()=>{class s{constructor(t){this.messageGateway=t,this.form={message:""},this.messages=[]}addMessage(){!this.form.message||(this.messageGateway.createMessage({text:this.form.message,createdAt:new Date}),this.form.message="")}deleteMessage(t){this.messageGateway.deleteMessage(t.id)}ngOnInit(){this.messageGateway.readMessagesAsStream().subscribe(a=>{this.messages=a},a=>{console.warn("Read Message As Stream Error"),console.error(a)})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(m))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-encapsulating"]],decls:11,vars:3,consts:[[4,"ngIf"],[3,"submit"],["type","text","name","message","autofocus","",3,"ngModel","ngModelChange"],["type","submit","value","Add Message"],[3,"title",4,"ngFor","ngForOf"],[3,"title"],[3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"h2"),e._uU(1),e.qZA(),e.YNc(2,y,2,1,"ul",0),e.TgZ(3,"form",1),e.NdJ("submit",function(){return a.addMessage()}),e.TgZ(4,"input",2),e.NdJ("ngModelChange",function(g){return a.form.message=g}),e.qZA(),e._UZ(5,"input",3),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"h2"),e._uU(8," Choose A Gateway Implementation\n"),e.qZA(),e.TgZ(9,"p"),e._uU(10,' Note that all of these implementations provide a "stream" I/O method.\n'),e.qZA()),2&t&&(e.xp6(1),e.hij(" You Have ",a.messages.length," Message(s)!\n"),e.xp6(1),e.Q6J("ngIf",a.messages.length),e.xp6(2),e.Q6J("ngModel",a.form.message))},dependencies:[u.sg,u.O5,c._Y,c.Fj,c.JJ,c.JL,c.On,c.F]}),s})()}];let v=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[h.Bz.forChild(C),h.Bz]}),s})();var A=r(259),i=r(6197),w=r(9751),x=r(5159);class E extends m{constructor(){super(),this.firebaseApp=(0,A.ZF)(x.N.firebaseConfig),this.firebaseDB=(0,i.N8)(this.firebaseApp)}createMessage(n){const t=(0,i.VF)((0,i.iH)(this.firebaseDB,"/2017-09-03/")),a={id:t.key,text:n.text,createdAt:n.createdAt.getTime()};return(0,i.t8)(t,a).catch(o=>{console.log("Create Message Failed"),console.error(o),console.log("Transfer Object:"),console.dir(a)}),Promise.resolve(t.key)}deleteMessage(n){return this.firebaseDB.ref("/2017-09-03/"+n).remove().catch(t=>{console.log("Delete Message Failed"),console.error(t),console.log("ID:",n)}),Promise.resolve()}readMessages(){const n=(0,i.iH)(this.firebaseDB,"/2017-09-03/");return(0,i.U2)(n).then(a=>{const o=[];return a.exists()&&a.forEach(g=>{const l=g.val();return o.push({id:l.id,text:l.text,createdAt:new Date(l.createdAt)}),!1}),o})}readMessagesAsStream(){return new w.y(t=>{let a=(0,i.iH)(this.firebaseDB,"/2017-09-03/"),o=(0,i.jM)(a,l=>{const p=[];l.exists()?(l.forEach(T=>{const d=T.val();return p.push({id:d.id,text:d.text,createdAt:new Date(d.createdAt)}),!1}),t.next(p)):t.next(p)});return function g(){(0,i.S1)(a,"value",o),a=o=null}})}}let Z=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[{provide:m,useClass:E}],imports:[u.ez,v,c.u5]}),s})()}}]);