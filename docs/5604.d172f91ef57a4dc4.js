"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[5604],{2743:(A,y,o)=>{o.d(y,{A:()=>I});var c=o(467),d=o(4438),$=o(4668),C=o(7673),v=o(4572),P=o(8810),D=o(9437),b=o(8141),l=o(6354);function R(s){return new Date(s).toISOString().split("T")[0]}var T=o(9972);let O=(()=>{class s{constructor(){this.methodCallCount={}}trackMethodCall(t){this.methodCallCount[t]||(this.methodCallCount[t]=0),this.methodCallCount[t]++,console.log(`${t} called ${this.methodCallCount[t]} times`)}getMethodCallCount(t){return this.methodCallCount[t]||0}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var m=function(s){return s.CATEGORY="categories_wise",s.STATUS="status_wise",s.DATE="date_wise",s}(m||{});let I=(()=>{class s{constructor(t,e){this.firebaseRealtimeDatabaseService=t,this.trackingService=e,this.basePath="topics-db",this.postEndpoint="posts",this.categoryEndpoint="categories",this.sprintEndpoint="sprints",this.totalPosts=(0,d.vPA)(0),this.posts$=this.fetchPosts().pipe((0,$.t)(1)),this.categories$=this.fetchCategories().pipe((0,$.t)(1)),this.safePosts$=this.posts$.pipe((0,D.W)(r=>(this.handleError(r),(0,C.of)([])))),this.postsWithCategory$=(0,v.z)([this.posts$,this.categories$]).pipe((0,b.M)(([r])=>this.totalPosts.set(r.length)),(0,l.T)(([r,n])=>this.attachCategoryNames(r,n))),this.groupedCategories$=(0,v.z)([this.categories$,this.posts$]).pipe((0,l.T)(([r,n])=>r.reduce((i,h)=>{const f=n.filter(S=>S.categoryId===h.key);return(f.length?i.withPosts:i.withoutPosts).push({...h,posts:f}),i},{withPosts:[],withoutPosts:[]})))}fetchPosts(){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.basePath}/${this.postEndpoint}`)}fetchCategories(){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.basePath}/${this.categoryEndpoint}`)}attachCategoryNames(t,e){return t.map(r=>({...r,categoryName:e.find(n=>n.key===r.categoryId)?.title||"Uncategorized"}))}createPost(t){return this.firebaseRealtimeDatabaseService.create(`${this.basePath}/${this.postEndpoint}`,t)}updatePost(t,e){return this.firebaseRealtimeDatabaseService.update(`${this.basePath}/${this.postEndpoint}/${t}`,e)}removePost(t){return this.firebaseRealtimeDatabaseService.remove(`${this.basePath}/${this.postEndpoint}/${t}`)}removeMultiplePosts(t){var e=this;return(0,c.A)(function*(){const r=t.map(n=>e.removePost(n));yield Promise.all(r)})()}getPost(t){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.basePath}/${this.postEndpoint}/${t}`)}getCategoriesWisePosts(){return this.postsWithCategory$.pipe((0,l.T)(t=>this.manageData(m.CATEGORY,t)))}createCategory(t){return this.firebaseRealtimeDatabaseService.create(`${this.basePath}/${this.categoryEndpoint}`,t)}removeCategory(t){return this.firebaseRealtimeDatabaseService.remove(`${this.basePath}/${this.categoryEndpoint}/${t}`)}getCategories(){return this.categories$}getCategory(t){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.basePath}/${this.categoryEndpoint}/${t}`)}getPostsByCategoryId(t){return this.postsWithCategory$.pipe((0,l.T)(e=>e.filter(r=>r.categoryId===t)))}getPostsBySprintId(t){return this.postsWithCategory$.pipe((0,l.T)(e=>e.filter(r=>r.sprintId===t)))}filterPosts(t,e,r="All",n="createdAt",i="desc",h="",f=null){return this.postsWithCategory$.pipe((0,l.T)(u=>function B(s,a,t,e,r,n,i,h){const f=t.toLowerCase().trim();return function p(s,a,t="asc"){return[...s].sort((e,r)=>{const n=e[a],i=r[a],h=n<i?-1:n>i?1:0;return"asc"===t?h:-h})}(s,r,n).filter(u=>{const S=!a||u.categoryId===a,w=u.title?.toLowerCase().includes(f)||u.body?.toLowerCase().includes(f);return S&&w&&("All"===e||u.status===e)&&(!i||u.sprintId===i)&&(null===h||u.bookmark===h)})}(u,t,e,r,n,i,h,f)))}matchesSearch(t,e){const r=t.title?.toLowerCase().includes(e),n=t.body?.toLowerCase().includes(e);return!(!r&&!n)}handleError(t){return console.error("Error occurred:",t),(0,P.$)(()=>new Error("Unknown error occurred. Please try again later."))}manageData(t,e){let r,n;switch(t){case m.CATEGORY:r=i=>i.categoryId,n=i=>i.categoryName;break;case m.STATUS:r=i=>i.status,n=i=>i.status;break;case m.DATE:r=i=>R(i.updatedAt),n=i=>R(i.updatedAt);break;default:return[]}return function E(s,a,t){const e={};for(const r of s){const n=a(r),i=t(r);e[n]||(e[n]={key:n,title:i,data:[]}),e[n].data.push(r)}return Object.values(e)}(e,r,n)}createSprint(t){return this.firebaseRealtimeDatabaseService.create(`${this.basePath}/${this.sprintEndpoint}`,t)}getSprints(){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.basePath}/${this.sprintEndpoint}`)}getSprint(t){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.basePath}/${this.sprintEndpoint}/${t}`)}updateSprint(t,e){return this.firebaseRealtimeDatabaseService.update(`${this.basePath}/${this.sprintEndpoint}/${t}`,e)}moveLists(t,e,r=!1){return(0,c.A)(function*(){})()}static{this.\u0275fac=function(e){return new(e||s)(d.KVO(T.h),d.KVO(O))}}static{this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},5604:(A,y,o)=>{o.r(y),o.d(y,{CategoriesNavigationsComponent:()=>b});var c=o(4438),d=o(2743),$=o(2557),C=o(8326),v=o(8701),P=o(177);function D(l,E){if(1&l&&(c.j41(0,"ng-sidenav-link",0),c.EFF(1),c.k0s()),2&l){const g=E.$implicit;c.Mz_("routerLink","category/details/",null==g?null:g.key,""),c.R7$(),c.SpI(" ",null==g?null:g.title," ")}}let b=(()=>{class l{constructor(){this.postDataService=(0,c.WQX)(d.A),this.categories$=this.postDataService.getCategories()}static{this.\u0275fac=function(p){return new(p||l)}}static{this.\u0275cmp=c.VBU({type:l,selectors:[["app-categories-navigations"]],standalone:!1,decls:4,vars:2,consts:[[3,"routerLink"]],template:function(p,M){1&p&&(c.j41(0,"ng-sidenav"),c.Z7z(1,D,2,3,"ng-sidenav-link",0,c.fX1),c.nI1(3,"async"),c.k0s()),2&p&&(c.R7$(),c.Dyx(c.bMT(3,0,M.categories$)))},dependencies:[$.Wk,C.D,v.$,P.AsyncPipe],encapsulation:2})}}return l})()}}]);