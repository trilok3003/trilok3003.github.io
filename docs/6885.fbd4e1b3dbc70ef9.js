"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[6885],{6885:(g,d,n)=>{n.r(d),n.d(d,{default:()=>c});var r=n(4438),l=n(9417),h=n(7765);let u=(()=>{class a extends h.u{constructor(){super(...arguments),this.basePath="collaborativeEditor-db",this.endpoint=""}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=r.xGo(a)))(i||a)}})()}static{this.\u0275prov=r.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),c=(()=>{class a{constructor(){this.sessionId="room-1",this.content="",this.api=(0,r.WQX)(u)}ngOnInit(){this.initialize()}onEdit(e){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.updateContent(e)},1e3)}initialize(){this.api.getById(this.sessionId).subscribe(e=>{this.content=e?.content??""})}updateContent(e){this.api.update(this.sessionId,{content:e})}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275cmp=r.VBU({type:a,selectors:[["app-collaborative-editor"]],decls:4,vars:1,consts:[[1,"editor-wrapper"],["placeholder","Start typing...",3,"ngModelChange","ngModel"]],template:function(t,i){1&t&&(r.j41(0,"div",0)(1,"h2"),r.EFF(2,"Collaborative Editor (Angular + Firestore)"),r.k0s(),r.j41(3,"textarea",1),r.mxI("ngModelChange",function(o){return r.DH7(i.content,o)||(i.content=o),o}),r.bIt("ngModelChange",function(o){return i.onEdit(o)}),r.k0s()()),2&t&&(r.R7$(3),r.R50("ngModel",i.content))},dependencies:[l.YN,l.me,l.BC,l.vS],styles:[".editor-wrapper[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:1rem;background:#fafafa;border-radius:8px;box-shadow:0 0 8px #0000001a;font-family:Arial,sans-serif}textarea[_ngcontent-%COMP%]{width:100%;height:400px;padding:1rem;font-size:1rem;line-height:1.5;border-radius:6px;border:1px solid #ccc;resize:vertical;box-sizing:border-box}"]})}}return a})()},7765:(g,d,n)=>{n.d(d,{u:()=>c});var r=n(467),l=n(4438),h=n(9972),u=n(1469);let c=(()=>{class a{constructor(){this.db=(0,l.WQX)(h.h),this.storageService=(0,l.WQX)(u._)}get fullPath(){return`${this.basePath}/${this.endpoint}`}generatePath(e=""){return e?`${this.fullPath}/${e}`:this.fullPath}create(e="",t){return this.db.create(this.generatePath(e),t)}get$(){return this.db.readRealtime$(this.fullPath)}getById(e){return this.db.readRealtimeOriginal$(`${this.fullPath}/${e}`)}update(e,t){return this.db.update(`${this.fullPath}/${e}`,t)}remove(e){return this.db.remove(`${this.fullPath}/${e}`)}set(e,t){return this.db.set(this.generatePath(e),t)}getKeys$(e=""){return this.db.getKeys$(this.generatePath(e))}getKeys(e=""){return this.db.getKeys(this.generatePath(e))}readOnce(e=""){return this.db.readOnce(this.generatePath(e))}read$(e=""){return this.db.readRealtime$(this.generatePath(e))}readRealtimeWhere$(e,t){return this.db.readRealtimeWhere$(this.generatePath(e),t)}clearDb(){return this.set("",null)}updateCounter(e,t=!0){return this.db.updateCounterV2(this.generatePath(e),t)}createWithFile(e="",t,i,s){var o=this;return(0,r.A)(function*(){if(!i)throw new Error("Please select an image.");const _=yield o.storageService.uploadFile(o.generatePath(e),i,s),f={...t,imageUrl:_};yield o.create(e,f)})()}uploadFile(e="",t,i){var s=this;return(0,r.A)(function*(){if(!t)throw new Error("Please select an image.");return yield s.storageService.uploadFile(s.generatePath(e),t,i)})()}extractAndUploadFiles(e="",t,i){var s=this;return(0,r.A)(function*(){return s.storageService.extractAndUploadFiles(t,s.generatePath(e),i)})()}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275prov=l.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})()}}]);