"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[6885],{6885:(g,d,n)=>{n.r(d),n.d(d,{default:()=>c});var r=n(4438),o=n(9417),h=n(7765);let u=(()=>{class a extends h.u{constructor(){super(...arguments),this.basePath="collaborativeEditor-db",this.endpoint=""}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=r.xGo(a)))(i||a)}})()}static{this.\u0275prov=r.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),c=(()=>{class a{constructor(){this.sessionId="room-1",this.content="",this.api=(0,r.WQX)(u)}ngOnInit(){this.initialize()}onEdit(t){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.updateContent(t)},1e3)}initialize(){this.api.getById(this.sessionId).subscribe(t=>{this.content=t?.content??""})}updateContent(t){this.api.update(this.sessionId,{content:t})}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275cmp=r.VBU({type:a,selectors:[["app-collaborative-editor"]],decls:4,vars:1,consts:[[1,"editor-wrapper"],["placeholder","Start typing...",3,"ngModelChange","ngModel"]],template:function(e,i){1&e&&(r.j41(0,"div",0)(1,"h2"),r.EFF(2,"Collaborative Editor (Angular + Firestore)"),r.k0s(),r.j41(3,"textarea",1),r.mxI("ngModelChange",function(s){return r.DH7(i.content,s)||(i.content=s),s}),r.bIt("ngModelChange",function(s){return i.onEdit(s)}),r.k0s()()),2&e&&(r.R7$(3),r.R50("ngModel",i.content))},dependencies:[o.YN,o.me,o.BC,o.vS],styles:[".editor-wrapper[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:1rem;background:#fafafa;border-radius:8px;box-shadow:0 0 8px #0000001a;font-family:Arial,sans-serif}textarea[_ngcontent-%COMP%]{width:100%;height:400px;padding:1rem;font-size:1rem;line-height:1.5;border-radius:6px;border:1px solid #ccc;resize:vertical;box-sizing:border-box}"]})}}return a})()},7765:(g,d,n)=>{n.d(d,{u:()=>c});var r=n(467),o=n(4438),h=n(1994),u=n(8591);let c=(()=>{class a{constructor(){this.db=(0,o.WQX)(h.h),this.storageService=(0,o.WQX)(u._)}get fullPath(){return`${this.basePath}/${this.endpoint}`}generatePath(t=""){return t?`${this.fullPath}/${t}`:this.fullPath}create(t,e){return this.db.create(this.generatePath(e),t)}get$(){return this.db.readRealtime$(this.fullPath)}getById(t){return this.db.readRealtimeOriginal$(`${this.fullPath}/${t}`)}update(t,e){return this.db.update(`${this.fullPath}/${t}`,e)}remove(t){return this.db.remove(`${this.fullPath}/${t}`)}set(t,e){return this.db.set(this.generatePath(t),e)}getKeys$(t=""){return this.db.getKeys$(this.generatePath(t))}getKeys(t=""){return this.db.getKeys(this.generatePath(t))}readOnce(t=""){return this.db.readOnce(this.generatePath(t))}read$(t=""){return this.db.readRealtime$(this.generatePath(t))}clearDb(){return this.set("",null)}updateCounter(t,e=!0){return this.db.updateCounterV2(this.generatePath(t),e)}createWithFile(t,e,i){var l=this;return(0,r.A)(function*(){if(!e)throw new Error("Please select an image.");const s=yield l.storageService.uploadFile(l.basePath,e,i),_={...t,imageUrl:s};yield l.create(_)})()}uploadFile(t,e){var i=this;return(0,r.A)(function*(){if(!t)throw new Error("Please select an image.");return yield i.storageService.uploadFile(i.basePath,t,e)})()}extractAndUploadFiles(t,e){var i=this;return(0,r.A)(function*(){return i.storageService.extractAndUploadFiles(t,i.basePath,e)})()}static{this.\u0275fac=function(e){return new(e||a)}}static{this.\u0275prov=o.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})()}}]);