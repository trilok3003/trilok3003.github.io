"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[5604],{2743:(k,y,o)=>{o.d(y,{A:()=>M});var c=o(467),d=o(4438),p=o(4668),P=o(7673),m=o(4572),C=o(8810),b=o(9437),D=o(8141),l=o(6354);function T(s){return new Date(s).toISOString().split("T")[0]}var H=o(9972);let B=(()=>{class s{constructor(){this.methodCallCount={}}trackMethodCall(e){this.methodCallCount[e]||(this.methodCallCount[e]=0),this.methodCallCount[e]++,console.log(`${e} called ${this.methodCallCount[e]} times`)}getMethodCallCount(e){return this.methodCallCount[e]||0}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var $=function(s){return s.CATEGORY="categories_wise",s.STATUS="status_wise",s.DATE="date_wise",s}($||{});let M=(()=>{class s{constructor(e,t){this.firebaseRealtimeDatabaseService=e,this.trackingService=t,this.BASE="topics-db",this.PATHS={posts:`${this.BASE}/posts`,categories:`${this.BASE}/categories`,sprints:`${this.BASE}/sprints`,checklist:`${this.BASE}/checklist`},this.legacySpacesPath="spaces-db",this.newBasePath="topics-db",this.totalPosts=(0,d.vPA)(0),this.posts$=this.fetchPosts().pipe((0,p.t)(2)),this.categories$=this.fetchCategories().pipe((0,p.t)(2)),this.safePosts$=this.posts$.pipe((0,b.W)(r=>(this.handleError(r),(0,P.of)([])))),this.postsWithCategory$=(0,m.z)([this.posts$,this.categories$]).pipe((0,D.M)(([r])=>this.totalPosts.set(r.length)),(0,l.T)(([r,i])=>this.attachCategoryNames(r,i)),(0,p.t)(2)),this.groupedCategories$=(0,m.z)([this.categories$,this.posts$]).pipe((0,l.T)(([r,i])=>r.reduce((n,h)=>{const f=i.filter(v=>v.categoryId===h.key);return(f.length?n.withPosts:n.withoutPosts).push({...h,posts:f}),n},{withPosts:[],withoutPosts:[]})))}createPost(e){return this.firebaseRealtimeDatabaseService.create(this.PATHS.posts,e)}updatePost(e,t){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.posts}/${e}`,t)}removePost(e){return this.firebaseRealtimeDatabaseService.remove(`${this.PATHS.posts}/${e}`)}removeMultiplePosts(e){var t=this;return(0,c.A)(function*(){const r=e.map(i=>t.removePost(i));yield Promise.all(r)})()}getPost(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.posts}/${e}`)}fetchPosts(){return this.firebaseRealtimeDatabaseService.readRealtime$(this.PATHS.posts)}createCategory(e){return this.firebaseRealtimeDatabaseService.create(this.PATHS.categories,e)}removeCategory(e){return this.firebaseRealtimeDatabaseService.remove(`${this.PATHS.categories}/${e}`)}getCategories(){return this.categories$}getCategory(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.categories}/${e}`)}getCategoryById(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.categories}/${e}`)}getPostsByCategoryId(e){return this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.posts,{categoryId:e})}getPostsByCategoryWithName(e){return(0,m.z)([this.getPostsByCategoryId(e),this.categories$]).pipe((0,l.T)(([t,r])=>t.map(i=>({...i,categoryName:r.find(n=>n.key===i.categoryId)?.title??"Uncategorized"}))))}getPostsByStatus(e){return"All"===e?this.postsWithCategory$:this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.posts,{status:e})}getPostsBySprintId(e){return this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.posts,{sprintId:e})}fetchCategories(){return this.firebaseRealtimeDatabaseService.readRealtime$(this.PATHS.categories)}attachCategoryNames(e,t){return e.map(r=>({...r,categoryName:t.find(i=>i.key===r.categoryId)?.title||"Uncategorized"}))}getPostsServerSide(e,t,r){return e?this.getPostsByCategoryId(e):t?this.getPostsBySprintId(t):r&&"All"!==r?this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.posts,{status:r}):this.posts$}filterPosts(e,t,r="All",i="createdAt",n="desc",h="",f=null){const u=this.getPostsServerSide(e||void 0,h||void 0,r);return this.withCategoryNames(u).pipe((0,l.T)(v=>function E(s,a,e,t,r,i,n,h){const f=e.toLowerCase().trim();return function S(s,a,e="asc"){return[...s].sort((t,r)=>{const i=t[a],n=r[a],h=i<n?-1:i>n?1:0;return"asc"===e?h:-h})}(s,r,i).filter(u=>{const v=!a||u.categoryId===a,I=u.title?.toLowerCase().includes(f)||u.body?.toLowerCase().includes(f);return v&&I&&("All"===t||u.status===t)&&(!n||u.sprintId===n)&&(null===h||u.bookmark===h)})}(v,e,t,r,i,n,h,f)))}matchesSearch(e,t){const r=e.title?.toLowerCase().includes(t),i=e.body?.toLowerCase().includes(t);return!(!r&&!i)}handleError(e){return console.error("Error occurred:",e),(0,C.$)(()=>new Error("Unknown error occurred. Please try again later."))}getCategoriesWisePosts(){return this.groupPosts($.CATEGORY)}groupPosts(e){return this.postsWithCategory$.pipe((0,l.T)(t=>this.groupData(e,t)))}groupData(e,t){let r,i;switch(e){case $.CATEGORY:r=n=>n.categoryId,i=n=>n.categoryName;break;case $.STATUS:r=n=>n.status,i=n=>n.status;break;case $.DATE:r=n=>T(n.updatedAt),i=n=>T(n.updatedAt);break;default:return[]}return function A(s,a,e){const t={};for(const r of s){const i=a(r),n=e(r);t[i]||(t[i]={key:i,title:n,data:[]}),t[i].data.push(r)}return Object.values(t)}(t,r,i)}createSprint(e){return this.firebaseRealtimeDatabaseService.create(this.PATHS.sprints,e)}getSprints(){return this.firebaseRealtimeDatabaseService.readRealtime$(this.PATHS.sprints)}getSprint(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.sprints}/${e}`)}updateSprint(e,t){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.sprints}/${e}`,t)}withCategoryNames(e){return(0,m.z)([e,this.categories$]).pipe((0,l.T)(([t,r])=>t.map(i=>({...i,categoryName:r.find(n=>n.key===i.categoryId)?.title??"Uncategorized"}))))}moveLists(e,t,r=!1){return(0,c.A)(function*(){})()}createChecklist(e){return this.firebaseRealtimeDatabaseService.create(this.PATHS.checklist,e)}updateChecklist(e,t){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.checklist}/${e}`,t)}getChecklist(){return this.firebaseRealtimeDatabaseService.readRealtime$(this.PATHS.checklist)}getChecklistByCategoryId(e){return this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.checklist,{categoryId:e})}getChecklistByCategoryOrSpace(e,t){if(!e&&!t)throw new Error("categoryId or spaceId is required");return this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.checklist,e?{categoryId:e}:{spaceId:t})}getChecklistById(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.checklist}/${e}`)}getChecklistItemsById(e){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.PATHS.checklist}/${e}/items`)}updateTitle(e,t){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.checklist}/${e}`,{title:t})}addItem(e,t,r=!1){return this.firebaseRealtimeDatabaseService.create(`${this.PATHS.checklist}/${e}/items`,{name:t,completed:r})}toggleItem(e,t,r){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.checklist}/${e}/items/${t}`,{completed:r})}renameItem(e,t,r){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.checklist}/${e}/items/${t}`,{name:r})}removeItem(e,t){return this.firebaseRealtimeDatabaseService.remove(`${this.PATHS.checklist}/${e}/items/${t}`)}createCheckListWithOrginalKey(e,t){var r=this;return(0,c.A)(function*(){yield r.firebaseRealtimeDatabaseService.set(`${r.PATHS.checklist}/${e}`,t)})()}addItemWithKey(e,t,r){return this.firebaseRealtimeDatabaseService.set(`${this.PATHS.checklist}/${e}/items/${t}`,{name:r.name,completed:r.completed})}checkIfExists(e){return this.firebaseRealtimeDatabaseService.readOnceOriginal(`${this.PATHS.checklist}/${e}`)}static{this.\u0275fac=function(t){return new(t||s)(d.KVO(H.h),d.KVO(B))}}static{this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},5604:(k,y,o)=>{o.r(y),o.d(y,{CategoriesNavigationsComponent:()=>D});var c=o(4438),d=o(2743),p=o(2557),P=o(8326),m=o(8701),C=o(177);function b(l,A){if(1&l&&(c.j41(0,"ng-sidenav-link",0),c.EFF(1),c.k0s()),2&l){const g=A.$implicit;c.Mz_("routerLink","category/details/",null==g?null:g.key,""),c.R7$(),c.SpI(" ",null==g?null:g.title," ")}}let D=(()=>{class l{constructor(){this.postDataService=(0,c.WQX)(d.A),this.categories$=this.postDataService.getCategories()}static{this.\u0275fac=function(S){return new(S||l)}}static{this.\u0275cmp=c.VBU({type:l,selectors:[["app-categories-navigations"]],standalone:!1,decls:4,vars:2,consts:[[3,"routerLink"]],template:function(S,R){1&S&&(c.j41(0,"ng-sidenav"),c.Z7z(1,b,2,3,"ng-sidenav-link",0,c.fX1),c.nI1(3,"async"),c.k0s()),2&S&&(c.R7$(),c.Dyx(c.bMT(3,0,R.categories$)))},dependencies:[p.Wk,P.D,m.$,C.AsyncPipe],encapsulation:2})}}return l})()}}]);