"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[955],{955:(O,c,s)=>{s.r(c),s.d(c,{default:()=>M});var r=s(467),y=s(6981),d=s(8141),f=s(5558),_=s(4277),g=s(3858),u=s(1266),p=s(177),t=s(4438),F=s(3408);const h=()=>({bordered:!0,stickyHeader:!0});let T=(()=>{class i{constructor(){this.entityType=(0,t.hFB)(),this.entities=(0,t.hFB)([]),this.fields=(0,t.hFB)([]),this.columns=(0,t.EWP)(()=>this.fields().map(e=>({key:e.key,label:e.label,sortable:!0})))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-entity-view"]],inputs:{entityType:[1,"entityType"],entities:[1,"entities"],fields:[1,"fields"]},decls:1,vars:5,consts:[[3,"columns","data","options","pageSize"]],template:function(n,o){1&n&&t.nrm(0,"app-data-table",0),2&n&&t.Y8G("columns",o.columns())("data",o.entities())("options",t.lJ4(4,h))("pageSize",20)},dependencies:[p.CommonModule,F.u],styles:[".entity-card[_ngcontent-%COMP%]{background:#fafafa;border-radius:4px;box-shadow:0 0 5px #0000001a}"]})}}return i})();var v=s(9766),E=s(6616),b=s(3935),C=s(308),$=s(7882);function S(i,a){if(1&i&&(t.j41(0,"strong"),t.EFF(1),t.k0s(),t.EFF(2)),2&i){const e=t.XpG().$implicit,n=t.XpG().$implicit;t.R7$(),t.SpI("",e.label,":"),t.R7$(),t.SpI(" ",n[e.key]," ")}}function G(i,a){if(1&i&&(t.j41(0,"p")(1,"strong"),t.EFF(2),t.k0s(),t.EFF(3),t.k0s()),2&i){const e=t.XpG().$implicit,n=t.XpG().$implicit;t.R7$(2),t.SpI("",e.label,":"),t.R7$(),t.SpI(" ",n[e.key],"")}}function I(i,a){if(1&i&&(t.j41(0,"strong"),t.EFF(1),t.k0s(),t.EFF(2),t.nI1(3,"date")),2&i){const e=t.XpG().$implicit,n=t.XpG().$implicit;t.R7$(),t.SpI("",e.label,":"),t.R7$(),t.SpI(" ",t.bMT(3,2,n[e.key])," ")}}function j(i,a){if(1&i&&(t.j41(0,"span",11),t.EFF(1),t.k0s()),2&i){const e=a.$implicit;t.R7$(),t.SpI(" ",e," ")}}function R(i,a){if(1&i&&(t.j41(0,"strong"),t.EFF(1),t.k0s(),t.DNE(2,j,2,1,"span",10),t.nI1(3,"splitTags")),2&i){const e=t.XpG().$implicit,n=t.XpG().$implicit;t.R7$(),t.SpI("",e.label,":"),t.R7$(),t.Y8G("ngForOf",t.bMT(3,2,n[e.key]))}}function X(i,a){1&i&&t.nrm(0,"img",14),2&i&&t.Y8G("src",a.$implicit,t.B4B)}function k(i,a){if(1&i&&(t.j41(0,"strong"),t.EFF(1),t.k0s(),t.j41(2,"div",12),t.DNE(3,X,1,1,"img",13),t.nI1(4,"splitTags"),t.k0s()),2&i){const e=t.XpG().$implicit,n=t.XpG().$implicit;t.R7$(),t.SpI("",e.label,":"),t.R7$(2),t.Y8G("ngForOf",t.bMT(4,2,n[e.key]))}}function B(i,a){if(1&i&&(t.j41(0,"div")(1,"strong"),t.EFF(2),t.k0s(),t.EFF(3),t.k0s()),2&i){const e=t.XpG().$implicit,n=t.XpG().$implicit;t.R7$(2),t.SpI("",e.label,":"),t.R7$(),t.SpI(" ",n[e.key]," ")}}function N(i,a){if(1&i&&t.DNE(0,S,3,2)(1,G,4,2,"p")(2,I,4,4)(3,R,4,4)(4,k,5,4)(5,B,4,2,"div"),2&i){let e;t.vxM("text"===(e=a.$implicit.type)?0:"textarea"===e?1:"date"===e?2:"tags"===e?3:"media"===e?4:5)}}function D(i,a){if(1&i&&t.Z7z(0,N,6,1,null,null,t.Vm6),2&i){const e=t.XpG();t.Dyx(e.fields)}}let M=(()=>{class i{constructor(e){this.entityService=e,this.entityType="",this.entities=[],this.fields=[],(0,y.L)("type").pipe((0,d.M)(n=>{this.entityType=n,this.fields=this.entityService.getFieldConfig(this.entityType)}),(0,f.n)(n=>this.entityService.getEntityByType(n))).subscribe(n=>{this.entities=n,console.log(this.entities)})}viewDetails(e){}onSubmit(e,n){var o=this;return(0,r.A)(function*(){try{const{payload:l}=yield o.entityService.extractAndUploadFiles(e);yield o.entityService.createEntity(o.entityType,l),n.resetForm()}catch(l){console.error("Error during post submission:",l)}})()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(b.T))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-entity"]],decls:12,vars:11,consts:[["form",""],["postTpl",""],["tabTitle","Create"],[3,"submitted","fields","submitLabel"],["tabTitle","List"],[3,"view","entityName","entities","fields"],["tabTitle","view"],[3,"entityType","entities","fields"],["tabTitle","grid"],[3,"dataInput","pageSizeInput","selectable"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"],[1,"media-preview"],["alt","media","width","80","height","80",3,"src",4,"ngFor","ngForOf"],["alt","media","width","80","height","80",3,"src"]],template:function(n,o){if(1&n){const l=t.RV6();t.j41(0,"ng-tabs")(1,"ng-tab",2)(2,"app-entity-form",3,0),t.bIt("submitted",function(m){t.eBV(l);const Y=t.sdS(3);return t.Njj(o.onSubmit(m,Y))}),t.k0s()(),t.j41(4,"ng-tab",4)(5,"app-entity-list",5),t.bIt("view",function(m){return t.eBV(l),t.Njj(o.viewDetails(m))}),t.k0s()(),t.j41(6,"ng-tab",6),t.nrm(7,"app-entity-view",7),t.k0s(),t.j41(8,"ng-tab",8)(9,"app-data-grid",9),t.DNE(10,D,2,0,"ng-template",null,1,t.C5r),t.k0s()()()}2&n&&(t.R7$(2),t.Y8G("fields",o.fields)("submitLabel","Create"),t.R7$(3),t.Y8G("entityName",o.entityType)("entities",o.entities)("fields",o.fields),t.R7$(2),t.Y8G("entityType",o.entityType)("entities",o.entities)("fields",o.fields),t.R7$(2),t.Y8G("dataInput",o.entities)("pageSizeInput",10)("selectable",!1))},dependencies:[_.j,C.O,$.j,u.R,g.F,T,v.I,p.DatePipe,p.NgFor,E.i],encapsulation:2})}}return i})()}}]);