"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[9062],{4875:(v,h,r)=>{r.d(h,{x:()=>T});var t=r(4438),b=r(3770);const g=["contentTemplate"],C=["*"];function y(u,a){1&u&&t.SdG(0)}let T=(()=>{class u{constructor(p){this.modalService=p,this.isOpen=!1,this.closed=new t.bkB,this.isInitialized=!1,this.isModalOpen=!1}ngAfterViewInit(){this.isInitialized=!0,this.isOpen&&this.open()}ngOnChanges(p){if(this.isInitialized&&p.isOpen){const m=p.isOpen.currentValue;m&&!this.isModalOpen?this.open():!m&&this.isModalOpen&&this.close()}}open(){if(!this.isInitialized)return;const p={...this.modalOptions,title:this.modalTitle};this.isModalOpen=!0,this.modalService.openWithTemplate(this.contentTemplate,p).subscribe(m=>{this.isModalOpen=!1,this.closed.emit(m)},m=>{},()=>{this.closed.emit("closed")})}close(){this.isModalOpen&&(this.modalService.closeModal(),this.isModalOpen=!1)}submit(p){this.modalService.submitModal(p)}static{this.\u0275fac=function(m){return new(m||u)(t.rXU(b.Bg))}}static{this.\u0275cmp=t.VBU({type:u,selectors:[["app-modal-launcher"]],viewQuery:function(m,_){if(1&m&&t.GBs(g,5),2&m){let f;t.mGM(f=t.lsd())&&(_.contentTemplate=f.first)}},inputs:{modalTitle:"modalTitle",modalOptions:"modalOptions",isOpen:"isOpen"},outputs:{closed:"closed"},features:[t.OA$],ngContentSelectors:C,decls:2,vars:0,consts:[["contentTemplate",""]],template:function(m,_){1&m&&(t.NAR(),t.DNE(0,y,1,0,"ng-template",null,0,t.C5r))},encapsulation:2})}}return u})()},9062:(v,h,r)=>{r.r(h),r.d(h,{default:()=>S});var t=r(4438),b=r(9079),g=r(3802),C=r(8645),y=r(4875),T=r(3889),u=r(177),a=r(9417),p=r(2821);const m=()=>({standalone:!0});function _(i,c){if(1&i){const e=t.RV6();t.j41(0,"div",3),t.nrm(1,"input",12,0),t.j41(3,"select",null,1)(5,"option",13),t.EFF(6,"Text"),t.k0s(),t.j41(7,"option",14),t.EFF(8,"Checkbox"),t.k0s()(),t.j41(9,"button",15),t.bIt("click",function(){t.eBV(e);const n=t.sdS(2),s=t.sdS(4);return t.XpG().addColumn(n.value,s.value),t.Njj(n.value="")}),t.EFF(10," + Column "),t.k0s()()}}function f(i,c){if(1&i){const e=t.RV6();t.j41(0,"button",18),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,s=t.XpG();return t.Njj(s.removeColumn(n.name))}),t.EFF(1,"\u{1f5d1}\ufe0f"),t.k0s()}}function D(i,c){if(1&i){const e=t.RV6();t.j41(0,"th")(1,"input",16),t.bIt("change",function(n){const s=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.renameColumn(s.name,n.target.value))}),t.k0s(),t.DNE(2,f,2,0,"button",17),t.k0s()}if(2&i){const e=c.$implicit,o=t.XpG();t.R7$(),t.Y8G("value",e.name),t.R7$(),t.Y8G("ngIf",!o.viewMode)}}function x(i,c){1&i&&(t.j41(0,"th"),t.EFF(1,"Actions"),t.k0s())}function F(i,c){if(1&i&&t.nrm(0,"input",23),2&i){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("formControlName",e.name)("readonly",o.viewMode)}}function M(i,c){if(1&i&&t.nrm(0,"input",24),2&i){const e=t.XpG().$implicit,o=t.XpG(2);t.Y8G("formControlName",e.name)("readonly",o.viewMode)}}function w(i,c){if(1&i&&(t.j41(0,"td"),t.qex(1,19),t.DNE(2,F,1,2,"input",21)(3,M,1,2,"input",22),t.bVm(),t.k0s()),2&i){const e=c.$implicit;t.R7$(),t.Y8G("formGroupName","cells"),t.R7$(),t.Y8G("ngIf","checkbox"===e.type),t.R7$(),t.Y8G("ngIf","text"===e.type)}}function k(i,c){if(1&i){const e=t.RV6();t.j41(0,"td")(1,"button",15),t.bIt("click",function(){t.eBV(e);const n=t.XpG().index,s=t.XpG();return t.Njj(s.removeRow(n))}),t.EFF(2,"\u{1f5d1}\ufe0f"),t.k0s()()}}function G(i,c){if(1&i&&(t.j41(0,"tr",19)(1,"td"),t.nrm(2,"input",20),t.k0s(),t.DNE(3,w,4,3,"td",8)(4,k,3,0,"td",9),t.k0s()),2&i){const e=c.index,o=t.XpG();t.Y8G("formGroupName",e),t.R7$(2),t.Y8G("readonly",o.viewMode),t.R7$(),t.Y8G("ngForOf",o.columns),t.R7$(),t.Y8G("ngIf",!o.viewMode)}}function R(i,c){if(1&i){const e=t.RV6();t.qex(0),t.j41(1,"button",15),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.addRow("New Row"))}),t.EFF(2,"+ Add Row"),t.k0s(),t.j41(3,"button",25),t.EFF(4,"Submit"),t.k0s(),t.bVm()}}let j=(()=>{class i{constructor(e){this.fb=e,this.defaultColumns=[],this.defaultRows=[],this.tableChange=new t.bkB,this.submitChange=new t.bkB,this.columns=[],this.form=this.fb.group({title:["Untitled",[a.k0.required]],rows:this.fb.array([])}),this.viewMode=!1}ngOnInit(){this.form.valueChanges.subscribe(()=>{this.tableChange.emit(this.getTableData())})}ngOnChanges(e){(e.defaultRows||e.defaultColumns||e.title)&&this.buildFormFromInputs()}buildFormFromInputs(){this.columns=[],this.rows.clear();const e=this.defaultRows??[];if(e.length){this.form.patchValue({title:this.title});const o=new Map;e.forEach(n=>{Object.entries(n.cells).forEach(([s,l])=>{o.has(s)||o.set(s,"boolean"==typeof l?"checkbox":"text")})}),this.columns=this.defaultColumns.length?this.defaultColumns:Array.from(o.entries()).map(([n,s])=>({name:n,type:s})),e.forEach(n=>this.addRow(n.name,n.cells))}else this.columns=[...this.defaultColumns],this.addRow("Row 1")}get rows(){return this.form.get("rows")}addRow(e="",o={}){const n=this.fb.group({});this.columns.forEach(l=>{n.addControl(l.name,new a.MJ("checkbox"===l.type?!!o[l.name]:o[l.name]??""))});const s=this.fb.group({name:new a.MJ(e),cells:n});this.rows.push(s)}addColumn(e,o="text",n=""){(e=e.trim())&&!this.columns.some(s=>s.name===e)&&(this.columns.push({name:e,type:o}),this.rows.controls.forEach(s=>{s.get("cells").addControl(e,new a.MJ("checkbox"===o?!!n:n??""))}))}renameColumn(e,o){if(!o||this.columns.some(s=>s.name===o))return;const n=this.columns.find(s=>s.name===e);n&&(n.name=o),this.rows.controls.forEach(s=>{const l=s.get("cells"),d=l.get(e)?.value;l.removeControl(e),l.addControl(o,new a.MJ(d))})}removeColumn(e){this.columns=this.columns.filter(o=>o.name!==e),this.rows.controls.forEach(o=>o.get("cells").removeControl(e))}removeRow(e){this.rows.removeAt(e)}getTableData(){return this.rows.controls.map(e=>{const o=e.get("name")?.value;return{name:o,...e.get("cells").value}})}onSubmit(){this.submitChange.emit(this.form)}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(a.ok))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-dynamic-table-form"]],inputs:{title:"title",defaultColumns:"defaultColumns",defaultRows:"defaultRows"},outputs:{tableChange:"tableChange",submitChange:"submitChange"},features:[t.OA$],decls:15,vars:10,consts:[["colInput",""],["colType",""],[1,"table-wrapper",3,"ngSubmit","formGroup"],[1,"toolbar"],["placeholder","Enter Title","formControlName","title","type","text",1,"col-input",3,"readonly"],["label","View Mode",3,"ngModelChange","ngModel","ngModelOptions"],["class","toolbar",4,"ngIf"],[1,"dynamic-table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["formArrayName","rows"],[3,"formGroupName",4,"ngFor","ngForOf"],["placeholder","New column","type","text",1,"col-input"],["value","text"],["value","checkbox"],["type","button",3,"click"],["type","text",3,"change","value"],[3,"click",4,"ngIf"],[3,"click"],[3,"formGroupName"],["formControlName","name","type","text",3,"readonly"],["type","checkbox",3,"formControlName","readonly",4,"ngIf"],["type","text",3,"formControlName","readonly",4,"ngIf"],["type","checkbox",3,"formControlName","readonly"],["type","text",3,"formControlName","readonly"],["type","submit"]],template:function(o,n){1&o&&(t.j41(0,"form",2),t.bIt("ngSubmit",function(){return n.onSubmit()}),t.j41(1,"div",3),t.nrm(2,"input",4),t.j41(3,"app-form-toggle",5),t.mxI("ngModelChange",function(l){return t.DH7(n.viewMode,l)||(n.viewMode=l),l}),t.k0s()(),t.DNE(4,_,11,0,"div",6),t.j41(5,"table",7)(6,"thead")(7,"tr")(8,"th"),t.EFF(9,"Row Name"),t.k0s(),t.DNE(10,D,3,2,"th",8)(11,x,2,0,"th",9),t.k0s()(),t.j41(12,"tbody",10),t.DNE(13,G,5,4,"tr",11),t.k0s()(),t.DNE(14,R,5,0,"ng-container",9),t.k0s()),2&o&&(t.Y8G("formGroup",n.form),t.R7$(2),t.Y8G("readonly",n.viewMode),t.R7$(),t.R50("ngModel",n.viewMode),t.Y8G("ngModelOptions",t.lJ4(9,m)),t.R7$(),t.Y8G("ngIf",!n.viewMode),t.R7$(6),t.Y8G("ngForOf",n.columns),t.R7$(),t.Y8G("ngIf",!n.viewMode),t.R7$(2),t.Y8G("ngForOf",n.rows.controls),t.R7$(),t.Y8G("ngIf",!n.viewMode))},dependencies:[a.X1,a.qT,a.xH,a.y7,a.me,a.Zm,a.BC,a.cb,a.j4,a.JD,a.$R,a.v8,u.NgFor,u.NgIf,p.m,a.YN,a.vS],styles:[".table-wrapper[_ngcontent-%COMP%]{width:100%;padding:1rem}.toolbar[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:1rem}.dynamic-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:16px;border:1px solid #e6e6e6;font-size:14px;background:#fff}.dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dynamic-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px;vertical-align:top}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{min-width:180px;width:100%;padding:6px;border-radius:4px;border:1px solid #ccc;resize:vertical;background:#fafafa}.col-input[_ngcontent-%COMP%]{width:auto}button[_ngcontent-%COMP%]{margin:4px;padding:4px 8px;cursor:pointer}"]})}}return i})();var O=r(8775);let I=(()=>{class i extends O.u{constructor(){super(...arguments),this.basePath="master-db",this.endpoint="",this.documentationEndpoint="documentations"}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=t.xGo(i)))(n||i)}})()}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const E=()=>({width:"90%"}),$=()=>({close:!1,submit:!1,closeText:"Close",submitText:"Done"}),N=(i,c)=>({subTitle:"",position:"center",styles:i,footerControls:c});function V(i,c){if(1&i){const e=t.RV6();t.j41(0,"app-dynamic-table-form",5),t.bIt("submitChange",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.onUpdateChange(n))}),t.k0s(),t.j41(1,"button",6),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onDelete())}),t.EFF(2,"Delete"),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("title",e.selectedItem.title)("defaultRows",e.selectedItem.rows)}}function B(i,c){if(1&i){const e=t.RV6();t.j41(0,"app-dynamic-table-form",7),t.bIt("submitChange",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.onSubmitChange(n))}),t.k0s()}}function X(i,c){if(1&i){const e=t.RV6();t.j41(0,"h4",8),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(),l=t.sdS(3);return t.Njj(s.openDetails(n,l))}),t.EFF(1),t.k0s()}if(2&i){const e=c.$implicit;t.R7$(),t.SpI(" ",null==e?null:e.title," ")}}let S=(()=>{class i{constructor(){this.data=[],this.api=(0,t.WQX)(I),this.toast=(0,t.WQX)(T.f),this.dataResource=(0,b.ZX)({loader:()=>this.api.read$(this.api.documentationEndpoint)})}ngOnInit(){this.loader=()=>this.api.read$(this.api.documentationEndpoint)}onOpenCreate(e){this.model=e,this.model.open()}onClosed(e){this.selectedItem=null}onSubmitChange(e){e.valid&&this.api.create(this.api.documentationEndpoint,e.value).then(()=>{this.toast.success("Create successfully!"),this.model.close()})}onUpdateChange(e){e.valid&&this.api.update(`${this.api.documentationEndpoint}/${this.selectedItem?.key}`,e.value).then(()=>{this.toast.success("Update successfully!"),this.model.close()})}openDetails(e,o){this.selectedItem=e,this.model=o,this.model.open()}onDelete(){this.api.remove(`${this.api.documentationEndpoint}/${this.selectedItem?.key}`).then(()=>{this.toast.success("Delete successfully!"),this.model.close()})}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-documentation"]],decls:9,vars:10,consts:[["modal",""],["catTemp",""],["semanticButton","",3,"click"],[3,"closed","modalTitle","modalOptions"],[3,"loader","itemTemplate"],[3,"submitChange","title","defaultRows"],["semanticButton","","variant","danger",3,"click"],[3,"submitChange"],[1,"grid-item-title",3,"click"]],template:function(o,n){if(1&o){const s=t.RV6();t.j41(0,"button",2),t.bIt("click",function(){t.eBV(s);const d=t.sdS(3);return t.Njj(n.onOpenCreate(d))}),t.EFF(1,"Create"),t.k0s(),t.j41(2,"app-modal-launcher",3,0),t.bIt("closed",function(d){return t.eBV(s),t.Njj(n.onClosed(d))}),t.DNE(4,V,3,2)(5,B,1,0,"app-dynamic-table-form"),t.k0s(),t.nrm(6,"app-rx-resource-flexible",4),t.DNE(7,X,2,1,"ng-template",null,1,t.C5r)}if(2&o){const s=t.sdS(8);t.R7$(2),t.Y8G("modalTitle","")("modalOptions",t.l_i(7,N,t.lJ4(5,E),t.lJ4(6,$))),t.R7$(2),t.vxM(n.selectedItem?4:5),t.R7$(2),t.Y8G("loader",n.loader)("itemTemplate",s)}},dependencies:[j,g.SE,y.x,C.n],encapsulation:2})}}return i})()}}]);