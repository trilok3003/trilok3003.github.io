"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[5723],{5723:(X,m,c)=>{c.r(m),c.d(m,{default:()=>N});var v=c(467),l=c(177),h=c(3490),b=c(6758),p=c(9724),t=c(4438),F=c(1121),d=c(9306);const E=e=>({$implicit:e}),u=(e,s)=>({$implicit:e,parent:s}),f=(e,s)=>s.key;function y(e,s){1&e&&(t.j41(0,"h1"),t.EFF(1),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",s.length," "))}function A(e,s){if(1&e&&(t.j41(0,"app-theme-semantic-badge",6),t.EFF(1),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",n.status," ")}}function $(e,s){if(1&e&&(t.j41(0,"app-theme-semantic-badge",5),t.EFF(1),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",n.status," ")}}function k(e,s){if(1&e&&(t.j41(0,"app-theme-semantic-badge",3),t.EFF(1),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",n.status," ")}}function O(e,s){if(1&e&&(t.qex(0),t.j41(1,"b"),t.EFF(2,"Last Active At"),t.k0s(),t.EFF(3),t.nI1(4,"date"),t.bVm()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.SpI(" ",t.bMT(4,1,n.timestamp)," ")}}function T(e,s){if(1&e){const n=t.RV6();t.j41(0,"button",16),t.bIt("click",function(){t.eBV(n);const i=t.XpG().$implicit,o=t.XpG(2);return t.Njj(o.setOffline(null==i?null:i.key))}),t.EFF(1,"Offline"),t.k0s()}}function j(e,s){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.DNE(4,A,2,1,"app-theme-semantic-badge",11)(5,$,2,1,"app-theme-semantic-badge",12)(6,k,2,1,"app-theme-semantic-badge",13),t.k0s(),t.j41(7,"td"),t.DNE(8,O,5,3,"ng-container",14),t.k0s(),t.j41(9,"td"),t.DNE(10,T,2,0,"button",15),t.k0s()()),2&e){const n=s.$implicit;t.R7$(2),t.SpI(" ",n.key,""),t.R7$(2),t.Y8G("ngIf","offline"===n.status),t.R7$(),t.Y8G("ngIf","online"===n.status),t.R7$(),t.Y8G("ngIf","away"===n.status),t.R7$(2),t.Y8G("ngIf","offline"===n.status),t.R7$(2),t.Y8G("ngIf","offline"!==n.status)}}function C(e,s){if(1&e&&(t.j41(0,"app-table-container",10)(1,"h2"),t.EFF(2,"Users"),t.k0s(),t.j41(3,"table")(4,"thead")(5,"tr")(6,"th"),t.EFF(7,"Id"),t.k0s(),t.j41(8,"th"),t.EFF(9,"Status"),t.k0s(),t.j41(10,"th"),t.EFF(11,"Date"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Action"),t.k0s()()(),t.j41(14,"tbody"),t.Z7z(15,j,11,6,"tr",null,f),t.k0s()()()),2&e){const n=s.ngIf;t.R7$(15),t.Dyx(n)}}function R(e,s){1&e&&t.eu8(0)}function I(e,s){if(1&e&&(t.j41(0,"tr")(1,"td",17)(2,"strong"),t.EFF(3),t.nI1(4,"uppercase"),t.k0s()()(),t.DNE(5,R,1,0,"ng-container",18)),2&e){const n=s.$implicit;t.XpG();const a=t.sdS(44);t.R7$(3),t.JRh(t.bMT(4,3,n.key)),t.R7$(2),t.Y8G("ngTemplateOutlet",a)("ngTemplateOutletContext",t.eq3(5,E,n))}}function D(e,s){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"b"),t.EFF(5),t.k0s()()()),2&e){const n=t.XpG(2),a=n.parent,i=n.$implicit;t.R7$(2),t.E5c(" ",a," ",a?"/":""," ",i.key," "),t.R7$(3),t.JRh(i.value.counter)}}function M(e,s){1&e&&t.eu8(0)}function G(e,s){if(1&e&&(t.qex(0),t.DNE(1,D,6,4,"tr",14)(2,M,1,0,"ng-container",18),t.bVm()),2&e){const n=t.XpG(),a=n.parent,i=n.$implicit;t.XpG();const o=t.sdS(46);t.R7$(),t.Y8G("ngIf",i.value.counter),t.R7$(),t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.l_i(3,u,i,a?a+" / "+i.key:i.key))}}function P(e,s){1&e&&t.DNE(0,G,3,6,"ng-container",14),2&e&&t.Y8G("ngIf","counter"!==s.$implicit.key)}function U(e,s){1&e&&t.eu8(0)}function S(e,s){if(1&e&&(t.qex(0),t.DNE(1,U,1,0,"ng-container",18),t.bVm()),2&e){const n=s.$implicit,a=t.XpG().parent;t.XpG();const i=t.sdS(44);t.R7$(),t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.l_i(2,u,n,a))}}function x(e,s){1&e&&(t.DNE(0,S,2,5,"ng-container",19),t.nI1(1,"keyvalue")),2&e&&t.Y8G("ngForOf",t.bMT(1,1,s.$implicit.value))}let N=(()=>{class e{constructor(n,a){this.presenceService=n,this.activityMonitorService=a,this.counts$=this.presenceService.getUserOnlineCounts$,this.totalUsers$=this.presenceService.getUsers$("desc"),this.flattenObject1=i=>{const o={};return Object.keys(i).forEach(_=>{const r=i[_];"object"!=typeof r||null===r||Array.isArray(r)?o[_]=r:Object.assign(o,this.flattenObject1(r))}),o},this.flattenObject=i=>{let o={};for(const _ in i)if(i.hasOwnProperty(_))if("object"!=typeof i[_]||Array.isArray(i[_]))o[_]=i[_];else{const r=this.flattenObject(i[_]);for(const g in r)o[_+"_"+g]=r[g]}return o}}setOffline(n){this.presenceService.setPresence(n,"offline")}ngOnInit(){var n=this;this.activityMonitorService.getServer$().subscribe(a=>{this.serverActivities=a}),this.activityMonitorService.getErrorLogs$().subscribe(a=>{console.log("logging-activities",a)}),this.activityMonitorService.getRouter$().subscribe(function(){var a=(0,v.A)(function*(i){n.routerActivities=i,n.routerActivitiesCount=Object.keys(n.routerActivities).length});return function(i){return a.apply(this,arguments)}}())}d(n){let a={};for(let i in n)if(n.hasOwnProperty(i)){const o=typeof n[i];"string"===o?a[i]=n[i]:"object"===o&&this.d(n[i])}}logOutAllUsers(){confirm("Are u Sure ?")&&this.presenceService.logOutAllUsers()}static{this.\u0275fac=function(a){return new(a||e)(t.rXU(F.BF),t.rXU(d.L))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["fb-activities"]],decls:47,vars:14,consts:[["rows",""],["inner",""],["appGrid",""],["variant","info"],["variant","warning"],["variant","success"],["variant","danger"],["app-theme-semantic-button","","variant","info",3,"click"],["appGrid","",3,"cols"],["height","500px",4,"ngIf"],["height","500px"],["variant","danger",4,"ngIf"],["variant","success",4,"ngIf"],["variant","info",4,"ngIf"],[4,"ngIf"],["app-theme-semantic-button","","variant","danger",3,"click",4,"ngIf"],["app-theme-semantic-button","","variant","danger",3,"click"],["colspan","2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"]],template:function(a,i){if(1&a){const o=t.RV6();t.j41(0,"section",2)(1,"app-theme-semantic-card",3)(2,"h1"),t.EFF(3),t.nI1(4,"async"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Online Users"),t.k0s()(),t.j41(7,"app-theme-semantic-card",4),t.DNE(8,y,2,1,"h1"),t.nI1(9,"async"),t.j41(10,"p"),t.EFF(11,"Total Users"),t.k0s()(),t.j41(12,"app-theme-semantic-card",5)(13,"h1"),t.EFF(14),t.k0s(),t.j41(15,"p"),t.EFF(16,"Server Requests"),t.k0s()(),t.j41(17,"app-theme-semantic-card",6)(18,"h1"),t.EFF(19),t.k0s(),t.j41(20,"p"),t.EFF(21,"Pages Views"),t.k0s()()(),t.j41(22,"section")(23,"app-theme-semantic-card",6)(24,"button",7),t.bIt("click",function(){return t.eBV(o),t.Njj(i.logOutAllUsers())}),t.EFF(25,"Logout All Users"),t.k0s()()(),t.j41(26,"section",8),t.DNE(27,C,17,0,"app-table-container",9),t.nI1(28,"async"),t.j41(29,"app-table-container",10)(30,"h2"),t.EFF(31,"Router Activities"),t.k0s(),t.j41(32,"table")(33,"thead")(34,"tr")(35,"th"),t.EFF(36,"Modules"),t.k0s(),t.j41(37,"th"),t.EFF(38,"Views"),t.k0s()()(),t.j41(39,"tbody"),t.Z7z(40,I,6,7,null,null,f),t.nI1(42,"keyvalue"),t.k0s()()()(),t.DNE(43,P,1,1,"ng-template",null,0,t.C5r)(45,x,2,3,"ng-template",null,1,t.C5r)}if(2&a){let o;t.R7$(3),t.SpI(" ",t.bMT(4,6,i.counts$)," "),t.R7$(5),t.vxM((o=t.bMT(9,8,i.totalUsers$))?8:-1,o),t.R7$(6),t.JRh(null==i.serverActivities?null:i.serverActivities.counter),t.R7$(5),t.JRh(i.routerActivitiesCount),t.R7$(7),t.Y8G("cols",1),t.R7$(),t.Y8G("ngIf",t.bMT(28,10,i.totalUsers$)),t.R7$(13),t.Dyx(t.bMT(42,12,i.routerActivities))}},dependencies:[p.F5,l.AsyncPipe,l.DatePipe,l.KeyValuePipe,l.UpperCasePipe,l.NgFor,p.iw,h.d,b.g,l.NgIf,l.NgTemplateOutlet,p.rh],encapsulation:2})}}return e})()}}]);