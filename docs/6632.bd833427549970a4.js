"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[6632],{6632:(W,m,r)=>{r.r(m),r.d(m,{ActivitiesComponent:()=>Q});var p=r(177),h=r(3490),l=r(9724),t=r(4438);const v=["*"];function f(e,s){1&e&&(t.j41(0,"span"),t.EFF(1," / "),t.k0s())}function F(e,s){if(1&e&&(t.j41(0,"span"),t.EFF(1),t.k0s(),t.DNE(2,f,2,0,"span")),2&e){const n=s.$implicit,o=s.$index,i=s.$count;t.R7$(),t.JRh(n),t.R7$(),t.vxM(o!==i-1?2:-1)}}function E(e,s){if(1&e&&(t.j41(0,"nav",1),t.Z7z(1,F,3,2,null,null,t.Vm6),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Dyx(n.breadcrumbs)}}function b(e,s){if(1&e&&(t.j41(0,"p",4),t.EFF(1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.JRh(n.subtitle)}}let k=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-page-header"]],inputs:{title:"title",subtitle:"subtitle",breadcrumbs:"breadcrumbs"},ngContentSelectors:v,decls:8,vars:3,consts:[[1,"page-header"],[1,"breadcrumbs"],[1,"title-wrapper"],[1,"page-title"],[1,"page-subtitle"],[1,"header-actions"]],template:function(o,i){1&o&&(t.NAR(),t.j41(0,"div",0),t.DNE(1,E,3,0,"nav",1),t.j41(2,"div",2)(3,"h1",3),t.EFF(4),t.k0s(),t.DNE(5,b,2,1,"p",4),t.k0s(),t.j41(6,"div",5),t.SdG(7),t.k0s()()),2&o&&(t.R7$(),t.vxM(null!=i.breadcrumbs&&i.breadcrumbs.length?1:-1),t.R7$(3),t.JRh(i.title),t.R7$(),t.vxM(i.subtitle?5:-1))},styles:[".page-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1.5rem}@media (min-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center}}.page-header[_ngcontent-%COMP%]   .breadcrumbs[_ngcontent-%COMP%]{font-size:.875rem;color:#888}.page-header[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]{flex:1}.page-header[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.75rem;margin:0}.page-header[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:#666;margin-top:.25rem}.page-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;align-items:center}"]})}}return e})();var $=r(5936),j=r(4092),C=r(4127),R=r(1121),A=r(9306),T=r(7367);const _=()=>({bordered:!1,stickyHeader:!0,striped:!1,content:!0,responsive:!0,scroll:!0}),y=e=>({$implicit:e}),u=(e,s)=>({$implicit:e,parent:s}),g=(e,s)=>s.key;function I(e,s){1&e&&(t.j41(0,"h1"),t.EFF(1),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",s.length," "))}function O(e,s){if(1&e&&(t.j41(0,"app-theme-semantic-badge",7),t.EFF(1),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",n.status," ")}}function G(e,s){if(1&e&&(t.j41(0,"app-theme-semantic-badge",6),t.EFF(1),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",n.status," ")}}function S(e,s){if(1&e&&(t.j41(0,"app-theme-semantic-badge",4),t.EFF(1),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",n.status," ")}}function M(e,s){if(1&e&&(t.qex(0),t.j41(1,"b"),t.EFF(2,"Last Active At"),t.k0s(),t.EFF(3),t.nI1(4,"date"),t.bVm()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.SpI(" ",t.bMT(4,1,n.timestamp)," ")}}function x(e,s){if(1&e){const n=t.RV6();t.j41(0,"button",18),t.bIt("click",function(){t.eBV(n);const i=t.XpG().$implicit,a=t.XpG(2);return t.Njj(a.setOffline(null==i?null:i.key))}),t.EFF(1," Offline "),t.k0s()}}function D(e,s){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.DNE(4,O,2,1,"app-theme-semantic-badge",14)(5,G,2,1,"app-theme-semantic-badge",15)(6,S,2,1,"app-theme-semantic-badge",16),t.k0s(),t.j41(7,"td"),t.DNE(8,M,5,3,"ng-container",10),t.k0s(),t.j41(9,"td"),t.DNE(10,x,2,0,"button",17),t.k0s()()),2&e){const n=s.$implicit;t.R7$(2),t.JRh(n.key),t.R7$(2),t.Y8G("ngIf","offline"===n.status),t.R7$(),t.Y8G("ngIf","online"===n.status),t.R7$(),t.Y8G("ngIf","away"===n.status),t.R7$(2),t.Y8G("ngIf","offline"===n.status),t.R7$(2),t.Y8G("ngIf","offline"!==n.status)}}function P(e,s){if(1&e&&(t.j41(0,"app-theme-semantic-card")(1,"div")(2,"h2"),t.EFF(3,"Users"),t.k0s(),t.j41(4,"app-theme-semantic-badge",4),t.EFF(5),t.k0s()(),t.j41(6,"app-table-container",13)(7,"table")(8,"thead")(9,"tr")(10,"th"),t.EFF(11,"Id"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Status"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Date"),t.k0s(),t.j41(16,"th"),t.EFF(17,"Action"),t.k0s()()(),t.j41(18,"tbody"),t.Z7z(19,D,11,6,"tr",null,g),t.k0s()()()()),2&e){const n=s.ngIf;t.R7$(5),t.SpI(" Total: ",n.length," "),t.R7$(14),t.Dyx(n)}}function N(e,s){if(1&e&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.SpI("Error(s): ",n.errorLogs.length," ")}}function w(e,s){if(1&e){const n=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"div",21),t.EFF(5),t.k0s()(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td")(9,"app-theme-semantic-badge",22),t.EFF(10),t.k0s()(),t.j41(11,"td"),t.EFF(12),t.nI1(13,"date"),t.k0s(),t.j41(14,"td")(15,"button",8),t.bIt("click",function(){const i=t.eBV(n).$implicit,a=t.XpG(2);return t.Njj(a.removeLog(i.key))}),t.EFF(16," \u2705 Done "),t.k0s()()()}if(2&e){const n=s.$implicit,o=s.index;t.R7$(2),t.JRh(o+1),t.R7$(3),t.SpI(" ",n.message||"-"," "),t.R7$(2),t.JRh(n.componentPath||"unknown"),t.R7$(2),t.Y8G("variant",n.isHttpError?"danger":"warning"),t.R7$(),t.SpI(" ",n.isHttpError?"HTTP":"Runtime"," "),t.R7$(2),t.JRh(t.i5U(13,6,n.timestamp,"medium"))}}function U(e,s){if(1&e&&(t.j41(0,"div")(1,"app-table-layout",12)(2,"table")(3,"thead")(4,"tr")(5,"th"),t.EFF(6,"#"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Message"),t.k0s(),t.j41(9,"th"),t.EFF(10,"Component"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Status"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Timestamp"),t.k0s(),t.j41(15,"th",19),t.EFF(16,"Actions"),t.k0s()()(),t.j41(17,"tbody"),t.DNE(18,w,17,9,"tr",20),t.k0s()()()()),2&e){const n=t.XpG();t.R7$(),t.Y8G("options",t.lJ4(2,_)),t.R7$(17),t.Y8G("ngForOf",n.errorLogs)}}function Y(e,s){1&e&&(t.j41(0,"app-theme-semantic-alert",6),t.EFF(1," \u2705 No active errors. You're all clear! "),t.k0s())}function X(e,s){1&e&&t.eu8(0)}function L(e,s){if(1&e&&(t.j41(0,"tr")(1,"td",23)(2,"strong"),t.EFF(3),t.nI1(4,"uppercase"),t.k0s()()(),t.DNE(5,X,1,0,"ng-container",24)),2&e){const n=s.$implicit;t.XpG();const o=t.sdS(72);t.R7$(3),t.JRh(t.bMT(4,3,n.key)),t.R7$(2),t.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",t.eq3(5,y,n))}}function V(e,s){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"b"),t.EFF(5),t.k0s()()()),2&e){const n=t.XpG(2),o=n.parent,i=n.$implicit;t.R7$(2),t.E5c("",o," ",o?"/":""," ",i.key,""),t.R7$(3),t.JRh(i.value.counter)}}function J(e,s){1&e&&t.eu8(0)}function H(e,s){if(1&e&&(t.qex(0),t.DNE(1,V,6,4,"tr",10)(2,J,1,0,"ng-container",24),t.bVm()),2&e){const n=t.XpG(),o=n.parent,i=n.$implicit;t.XpG();const a=t.sdS(74);t.R7$(),t.Y8G("ngIf",i.value.counter),t.R7$(),t.Y8G("ngTemplateOutlet",a)("ngTemplateOutletContext",t.l_i(3,u,i,o?o+" / "+i.key:i.key))}}function B(e,s){1&e&&t.DNE(0,H,3,6,"ng-container",10),2&e&&t.Y8G("ngIf","counter"!==s.$implicit.key)}function z(e,s){1&e&&t.eu8(0)}function Z(e,s){if(1&e&&(t.qex(0),t.DNE(1,z,1,0,"ng-container",24),t.bVm()),2&e){const n=s.$implicit,o=t.XpG().parent;t.XpG();const i=t.sdS(72);t.R7$(),t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.l_i(2,u,n,o))}}function K(e,s){1&e&&(t.DNE(0,Z,2,5,"ng-container",20),t.nI1(1,"keyvalue")),2&e&&t.Y8G("ngForOf",t.bMT(1,1,s.$implicit.value))}let Q=(()=>{class e{constructor(n,o){this.presenceService=n,this.activityMonitorService=o,this.routerActivities={},this.routerActivitiesCount=0,this.errorLogs=[],this.counts$=this.presenceService.getUserOnlineCounts$(),this.totalUsers$=this.presenceService.getUsers$("desc")}ngOnInit(){this.loadServerActivities(),this.loadRouterActivities(),this.loadErrorLogs()}loadServerActivities(){this.activityMonitorService.getServer$().subscribe(n=>{this.serverActivities=n})}loadRouterActivities(){this.activityMonitorService.getRouter$().subscribe(n=>{this.routerActivities=n,this.routerActivitiesCount=Object.keys(n||{}).length})}loadErrorLogs(){this.activityMonitorService.getErrorLogs$().subscribe(n=>{console.log("[Activity Logs]",n),this.errorLogs=n})}setOffline(n){this.presenceService.setPresence(n,"offline")}logOutAllUsers(){confirm("Are you sure you want to log out all users?")&&this.presenceService.logOutAllUsers()}triggerTestError(){throw new Error("\u{1f525} Test Error from Component")}removeLog(n){this.activityMonitorService.removeErrorLog(n)}flattenObject(n,o=""){return Object.keys(n).reduce((i,a)=>{const c=n[a],d=o?`${o}_${a}`:a;return"object"!=typeof c||null===c||Array.isArray(c)?i[d]=c:Object.assign(i,this.flattenObject(c,d)),i},{})}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(R.B),t.rXU(A.L))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["fb-activities"]],decls:75,vars:25,consts:[["noErrors",""],["rows",""],["inner",""],[3,"title","subtitle"],["variant","info"],["variant","warning"],["variant","success"],["variant","danger"],["app-theme-semantic-button","","color","danger",3,"click"],["app-theme-semantic-button","","variant","info",3,"click"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[3,"options"],["height","500px"],["variant","danger",4,"ngIf"],["variant","success",4,"ngIf"],["variant","info",4,"ngIf"],["app-theme-semantic-button","","variant","danger",3,"click",4,"ngIf"],["app-theme-semantic-button","","variant","danger",3,"click"],[2,"width","80px"],[4,"ngFor","ngForOf"],[2,"max-width","300px","white-space","normal"],[3,"variant"],["colspan","2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(o,i){if(1&o){const a=t.RV6();t.j41(0,"app-theme-semantic-card"),t.nrm(1,"app-page-header",3),t.j41(2,"app-grid-list")(3,"app-theme-semantic-card",4)(4,"h1"),t.EFF(5),t.nI1(6,"async"),t.k0s(),t.j41(7,"p"),t.EFF(8,"Online Users"),t.k0s()(),t.j41(9,"app-theme-semantic-card",5),t.DNE(10,I,2,1,"h1"),t.nI1(11,"async"),t.j41(12,"p"),t.EFF(13,"Total Users"),t.k0s()(),t.j41(14,"app-theme-semantic-card",6)(15,"h1"),t.EFF(16),t.k0s(),t.j41(17,"p"),t.EFF(18,"Server Requests"),t.k0s()(),t.j41(19,"app-theme-semantic-card",7)(20,"h1"),t.EFF(21),t.k0s(),t.j41(22,"p"),t.EFF(23,"Pages Views"),t.k0s()()(),t.j41(24,"button",8),t.bIt("click",function(){return t.eBV(a),t.Njj(i.triggerTestError())}),t.EFF(25," Trigger Error "),t.k0s(),t.j41(26,"app-theme-semantic-card",7)(27,"h4"),t.EFF(28,"Online Users"),t.k0s(),t.j41(29,"button",9),t.bIt("click",function(){return t.eBV(a),t.Njj(i.logOutAllUsers())}),t.EFF(30," Logout All Users "),t.k0s(),t.j41(31,"p")(32,"strong"),t.EFF(33,"Total Online:"),t.k0s(),t.EFF(34),t.nI1(35,"async"),t.k0s()(),t.DNE(36,P,21,1,"app-theme-semantic-card",10),t.nI1(37,"async"),t.j41(38,"app-theme-semantic-card")(39,"div")(40,"h2"),t.EFF(41,"\u{1f50d} Error Logs"),t.k0s(),t.j41(42,"app-theme-semantic-badge",4),t.DNE(43,N,2,1,"span",10),t.k0s()(),t.DNE(44,U,19,3,"div",11)(45,Y,2,0,"ng-template",null,0,t.C5r),t.k0s(),t.j41(47,"app-theme-semantic-card")(48,"h2"),t.EFF(49,"Server Activities"),t.k0s(),t.j41(50,"div")(51,"app-theme-semantic-badge",4),t.EFF(52),t.k0s()()(),t.j41(53,"app-theme-semantic-card")(54,"h2"),t.EFF(55,"Router Activities"),t.k0s(),t.j41(56,"div")(57,"app-theme-semantic-badge",4),t.EFF(58),t.k0s()(),t.j41(59,"app-table-layout",12)(60,"table")(61,"thead")(62,"tr")(63,"th"),t.EFF(64,"Route"),t.k0s(),t.j41(65,"th"),t.EFF(66,"Activity"),t.k0s()()(),t.j41(67,"tbody"),t.Z7z(68,L,6,7,null,null,g),t.nI1(70,"keyvalue"),t.k0s()()()()(),t.DNE(71,B,1,1,"ng-template",null,1,t.C5r)(73,K,2,3,"ng-template",null,2,t.C5r)}if(2&o){let a;const c=t.sdS(46);t.R7$(),t.Y8G("title","Activities Dashboard")("subtitle","overview of activities"),t.R7$(4),t.SpI(" ",t.bMT(6,14,i.counts$)," "),t.R7$(5),t.vxM((a=t.bMT(11,16,i.totalUsers$))?10:-1,a),t.R7$(6),t.JRh(null==i.serverActivities?null:i.serverActivities.counter),t.R7$(5),t.JRh(i.routerActivitiesCount),t.R7$(13),t.SpI(" ",t.bMT(35,18,i.counts$),""),t.R7$(2),t.Y8G("ngIf",t.bMT(37,20,i.totalUsers$)),t.R7$(7),t.Y8G("ngIf",i.errorLogs.length>0),t.R7$(),t.Y8G("ngIf",i.errorLogs.length>0)("ngIfElse",c),t.R7$(8),t.SpI(" Total: ",null==i.serverActivities?null:i.serverActivities.counter," "),t.R7$(6),t.SpI(" Total: ",i.routerActivitiesCount," "),t.R7$(),t.Y8G("options",t.lJ4(24,_)),t.R7$(9),t.Dyx(t.bMT(70,22,i.routerActivities))}},dependencies:[l.F5,p.AsyncPipe,p.DatePipe,p.KeyValuePipe,p.UpperCasePipe,p.NgFor,l.iw,h.d,p.NgIf,p.NgTemplateOutlet,l.rh,k,$.E,j.k,C.O,T.j],encapsulation:2})}}return e})()}}]);