"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[8854],{8854:(K,u,i)=>{i.r(u),i.d(u,{ExpenseModule:()=>z});var r=i(177),d=i(884),t=i(4438),v=i(3882),T=i(3878),y=i(9263),b=i(5175),E=i(6975),C=i(5336);let k=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-expense"]],standalone:!1,decls:13,vars:0,consts:[["themeColor","custom1"],["title","Expense Tracker"],["label","Dashboard","routerLink","dashboard"],["label","Categories","routerLink","categories"],["label","Income","routerLink","transactions/income"],["label","Expenses","routerLink","transactions/expense"],["label","Transactions","routerLink","transactions"]],template:function(a,s){1&a&&(t.j41(0,"app-material-layout",0)(1,"app-mt-header",1),t.nrm(2,"ng-sidenav-open-close-btn"),t.k0s(),t.j41(3,"app-mt-sidebar")(4,"app-nav-list"),t.nrm(5,"app-nav-link",2)(6,"app-nav-link",3)(7,"hr")(8,"app-nav-link",4)(9,"app-nav-link",5)(10,"app-nav-link",6),t.k0s()(),t.j41(11,"app-mt-main"),t.nrm(12,"router-outlet"),t.k0s()())},dependencies:[d.n3,d.Wk,v.j,T.l,y.eu,y.lE,b.B,E.D,C.w],encapsulation:2})}}return n})();var g=i(4572),$=i(4668),j=i(8810),l=i(6354),I=i(9437),R=i(8910);let h=(()=>{class n{constructor(e){this.abstractFirebaseDb=e,this.basePath="expense-db",this.transactionEndpoint="transactions",this.categoryEndpoint="categories",this.transactionsWithCategory$=(0,g.z)([this.getTransactions(),this.getCategories()]).pipe((0,l.T)(([a,s])=>a.map(c=>({...c,categoryName:s.find(H=>H.key===c.categoryId)?.name}))),(0,I.W)(this.handleError),(0,$.t)(1))}createTransaction(e){return this.abstractFirebaseDb.create(`${this.basePath}/${this.transactionEndpoint}`,e)}getTransactions(){return this.abstractFirebaseDb.readRealtime$(`${this.basePath}/${this.transactionEndpoint}`)}getTransaction(e){return this.abstractFirebaseDb.readRealtimeOriginal$(`${this.basePath}/${this.transactionEndpoint}/${e}`)}updateTransaction(e,a){return this.abstractFirebaseDb.update(`${this.basePath}/${this.transactionEndpoint}/${e}`,a)}getTransactionsByCategoryId(e){return this.getTransactions().pipe((0,l.T)(a=>a.filter(s=>s.categoryId===e)))}getTransactionsByType(e){return this.transactionsWithCategory$.pipe((0,l.T)(a=>a.filter(s=>s.type===e)))}getTransactionStats(e){return this.getTransactionsByType(e).pipe((0,l.T)(a=>a.reduce((s,c)=>s+c.amount,0)))}getTransactionStatsByCategory(e){return this.getTransactionsByType(e).pipe((0,l.T)(a=>{let s={};return a.forEach(function(c){s[c.categoryName]=s.hasOwnProperty(c.categoryName)?s[c.categoryName]+c.amount:c.amount}),s}))}createCategory(e){return this.abstractFirebaseDb.create(`${this.basePath}/${this.categoryEndpoint}`,e)}getCategories(){return this.abstractFirebaseDb.readRealtime$(`${this.basePath}/${this.categoryEndpoint}`)}getCategory(e){return this.abstractFirebaseDb.readRealtimeOriginal$(`${this.basePath}/${this.categoryEndpoint}/${e}`)}getCategoryByType(e){return this.getCategories().pipe((0,l.T)(a=>a.filter(s=>s.type===e)))}handleError(e){return(0,j.$)(()=>"unknown error occured. Please Try Again")}static{this.\u0275fac=function(a){return new(a||n)(t.KVO(R.W))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var o=i(9417);let S=(()=>{class n{constructor(e,a){this.fb=e,this.expenseService=a,this.formInit()}formInit(){this.form=this.fb.group({name:["",o.k0.required],type:["",o.k0.required]})}create(){this.expenseService.createCategory(this.form.value).then(()=>this.formInit())}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(o.ok),t.rXU(h))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-create-category"]],standalone:!1,decls:21,vars:2,consts:[[1,"form-grid",3,"formGroup"],["formControlName","name","placeholder","Enter Category name"],["formControlName","type"],["disabled","","hidden","","selected","","value",""],["value","expense"],["value","income"],[1,"btn","btn-success",3,"click","disabled"]],template:function(a,s){1&a&&(t.j41(0,"section")(1,"h1"),t.EFF(2,"Add Category"),t.k0s(),t.j41(3,"form",0)(4,"div")(5,"label"),t.EFF(6,"Name"),t.k0s(),t.nrm(7,"input",1),t.k0s(),t.j41(8,"div")(9,"label"),t.EFF(10,"Select Type"),t.k0s(),t.j41(11,"select",2)(12,"option",3),t.EFF(13,"Type"),t.k0s(),t.j41(14,"option",4),t.EFF(15,"Expense"),t.k0s(),t.j41(16,"option",5),t.EFF(17,"Income"),t.k0s()()(),t.j41(18,"div")(19,"button",6),t.bIt("click",function(){return s.create()}),t.EFF(20,"Create"),t.k0s()()()()),2&a&&(t.R7$(3),t.Y8G("formGroup",s.form),t.R7$(16),t.Y8G("disabled",s.form.invalid))},dependencies:[o.qT,o.xH,o.y7,o.me,o.wz,o.BC,o.cb,o.j4,o.JD],encapsulation:2})}}return n})();function x(n,p){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s()()),2&n){const e=p.$implicit;t.R7$(2),t.SpI(" ",e.key," "),t.R7$(2),t.JRh(null==e?null:e.name),t.R7$(2),t.JRh(e.type)}}let M=(()=>{class n{constructor(e){this.expenseService=e,this.categories$=this.expenseService.getCategories()}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(h))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-categories"]],standalone:!1,decls:17,vars:3,consts:[[1,"overflow-x"],[1,"striped-table","table-blue"],[4,"ngFor","ngForOf"]],template:function(a,s){1&a&&(t.nrm(0,"app-create-category"),t.j41(1,"section")(2,"h1"),t.EFF(3,"All Categories"),t.k0s(),t.j41(4,"div",0)(5,"table",1)(6,"thead")(7,"tr")(8,"th"),t.EFF(9,"Sr.Id"),t.k0s(),t.j41(10,"th"),t.EFF(11,"Name"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Type"),t.k0s()()(),t.j41(14,"tbody"),t.DNE(15,x,7,3,"tr",2),t.nI1(16,"async"),t.k0s()()()()),2&a&&(t.R7$(15),t.Y8G("ngForOf",t.bMT(16,1,s.categories$)))},dependencies:[r.Sq,S,r.Jj],styles:[".overflow-x[_ngcontent-%COMP%]{overflow-x:auto}"]})}}return n})();var N=i(9085),D=i(8141),O=i(1111);function P(n,p){1&n&&(t.j41(0,"div")(1,"label"),t.EFF(2,"Type"),t.k0s(),t.j41(3,"select",9)(4,"option",6),t.EFF(5,"Select"),t.k0s(),t.j41(6,"option",10),t.EFF(7,"Expense"),t.k0s(),t.j41(8,"option",11),t.EFF(9,"Income"),t.k0s()()())}function B(n,p){if(1&n&&(t.j41(0,"option",12),t.EFF(1),t.k0s()),2&n){const e=p.$implicit;t.FS9("value",e.key),t.R7$(),t.JRh(e.name)}}let U=(()=>{class n{constructor(e,a,s){this.fb=e,this.expenseService=a,this.toastService=s,this.formInit()}ngOnInit(){}formInit(){this.form=this.fb.group({amount:["",o.k0.required],description:["",o.k0.required],type:["",o.k0.required],date:["",o.k0.required],categoryId:["",o.k0.required]}),this.form.get("type").valueChanges.pipe((0,D.M)(e=>{this.categories$=this.expenseService.getCategoryByType(e)})).subscribe()}create(){this.expenseService.createTransaction(this.form.value).then(()=>{this.formInit(),this.toastService.showToast("Transaction created successfully.","","success")})}ngOnChanges(e){this.transactionType&&(this.formInit(),this.form.patchValue({type:this.transactionType}))}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(o.ok),t.rXU(h),t.rXU(O.fw))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-create-transaction"]],inputs:{transactionType:"transactionType"},standalone:!1,features:[t.OA$],decls:31,vars:9,consts:[[1,"form-grid",3,"formGroup"],["formControlName","amount","placeholder","Enter Amount name","type","number"],["formControlName","description","placeholder","Enter Description name"],[4,"ngIf"],["formControlName","date","type","date"],["formControlName","categoryId"],["disabled","","hidden","","selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"click","disabled"],["formControlName","type"],["value","expense"],["value","income"],[3,"value"]],template:function(a,s){1&a&&(t.j41(0,"section")(1,"h2"),t.EFF(2),t.nI1(3,"titlecase"),t.k0s(),t.j41(4,"form",0)(5,"div")(6,"label"),t.EFF(7,"Amount"),t.k0s(),t.nrm(8,"input",1),t.k0s(),t.j41(9,"div")(10,"label"),t.EFF(11,"Description"),t.k0s(),t.nrm(12,"input",2),t.k0s(),t.DNE(13,P,10,0,"div",3),t.j41(14,"div")(15,"label"),t.EFF(16,"Date"),t.k0s(),t.nrm(17,"input",4),t.k0s(),t.j41(18,"div")(19,"label"),t.EFF(20,"Category"),t.k0s(),t.j41(21,"select",5)(22,"option",6),t.EFF(23,"Select"),t.k0s(),t.DNE(24,B,2,2,"option",7),t.nI1(25,"async"),t.k0s()(),t.nrm(26,"div")(27,"div"),t.j41(28,"div")(29,"button",8),t.bIt("click",function(){return s.create()}),t.EFF(30,"Create"),t.k0s()()()()),2&a&&(t.R7$(2),t.SpI("Add ",s.transactionType?t.bMT(3,5,s.transactionType):"Transaction",""),t.R7$(2),t.Y8G("formGroup",s.form),t.R7$(9),t.Y8G("ngIf",!s.transactionType),t.R7$(11),t.Y8G("ngForOf",t.bMT(25,7,s.categories$)),t.R7$(5),t.Y8G("disabled",s.form.invalid))},dependencies:[r.Sq,r.bT,o.qT,o.xH,o.y7,o.me,o.Q0,o.wz,o.BC,o.cb,o.j4,o.JD,r.Jj,r.PV],encapsulation:2})}}return n})();function G(n,p){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td",4),t.EFF(4),t.nI1(5,"currency"),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td"),t.EFF(11),t.k0s(),t.j41(12,"td"),t.EFF(13),t.nI1(14,"date"),t.k0s()()),2&n){const e=p.$implicit;t.R7$(2),t.SpI(" ",e.key," "),t.R7$(),t.Y8G("ngClass",e.type),t.R7$(),t.JRh(t.i5U(5,7,null==e?null:e.amount,"INR")),t.R7$(3),t.JRh(e.description),t.R7$(2),t.JRh(e.type),t.R7$(2),t.JRh(e.categoryName),t.R7$(2),t.JRh(t.bMT(14,10,null==e?null:e.date))}}let f=(()=>{class n{constructor(e,a){this.expenseService=e,this.route=a,this.route.params.pipe((0,N.E)("type")).subscribe(s=>{this.transactionType=s,this.getTransactions()})}ngOnInit(){}getTransactions(){this.transactions$=this.transactionType?this.expenseService.getTransactionsByType(this.transactionType):this.expenseService.transactionsWithCategory$}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(h),t.rXU(d.nX))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-transactions"]],standalone:!1,decls:24,vars:7,consts:[[3,"transactionType"],[1,"overflow-x"],[1,"striped-table","table-blue"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(a,s){1&a&&(t.nrm(0,"app-create-transaction",0),t.j41(1,"section")(2,"h2"),t.EFF(3),t.nI1(4,"titlecase"),t.k0s(),t.j41(5,"div",1)(6,"table",2)(7,"thead")(8,"tr")(9,"th"),t.EFF(10,"Sr.Id"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Amount"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Description"),t.k0s(),t.j41(15,"th"),t.EFF(16,"Type"),t.k0s(),t.j41(17,"th"),t.EFF(18,"Category"),t.k0s(),t.j41(19,"th"),t.EFF(20,"Date"),t.k0s()()(),t.j41(21,"tbody"),t.DNE(22,G,15,12,"tr",3),t.nI1(23,"async"),t.k0s()()()()),2&a&&(t.Y8G("transactionType",s.transactionType),t.R7$(3),t.SpI("All ",t.bMT(4,3,s.transactionType)," Transactions"),t.R7$(19),t.Y8G("ngForOf",t.bMT(23,5,s.transactions$)))},dependencies:[r.YU,r.Sq,U,r.Jj,r.PV,r.oe,r.vh],styles:[".expense[_ngcontent-%COMP%]{color:red;font-weight:700}.income[_ngcontent-%COMP%]{color:green;font-weight:700}.overflow-x[_ngcontent-%COMP%]{overflow-x:auto}"]})}}return n})();var J=i(7975);const m=()=>({categoryBadge:"rectangle"}),Y=(n,p)=>({income:n,expense:p}),X=()=>({income:"green",expense:"red"}),A=(n,p)=>({data:n,colors:p}),F=n=>({data:n}),V=[{path:"",component:k,children:[{path:"",redirectTo:"transactions",pathMatch:"full"},{path:"categories",component:M},{path:"transactions",component:f},{path:"transactions/:type",component:f},{path:"dashboard",component:(()=>{class n{constructor(e){this.expenseService=e,this.totalExpense$=this.expenseService.getTransactionStats("expense"),this.totalIncome$=this.expenseService.getTransactionStats("income"),this.balance$=(0,g.z)([this.totalIncome$,this.totalExpense$]).pipe((0,l.T)(([a,s])=>Math.abs(a-s))),this.expenseTransactions$=this.expenseService.getTransactionStatsByCategory("expense"),this.incomeTransactions$=this.expenseService.getTransactionStatsByCategory("income")}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(h))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-dashboard"]],standalone:!1,decls:60,vars:46,consts:[[1,"dashboard"],[1,"dashboard__item","dashboard__item--col"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","income"],[1,"card-content"],[1,"card-subtitle","expense"],[1,"card-subtitle"],["type","donut",3,"configOptions","customPie"]],template:function(a,s){1&a&&(t.j41(0,"section")(1,"h1"),t.EFF(2,"Dashboard"),t.k0s(),t.j41(3,"div",0)(4,"div",1)(5,"div",2)(6,"div",3)(7,"h2",4),t.EFF(8," INCOME "),t.k0s(),t.j41(9,"h3",5),t.EFF(10),t.nI1(11,"async"),t.nI1(12,"currency"),t.k0s(),t.nrm(13,"div",6),t.k0s()()(),t.j41(14,"div",1)(15,"div",2)(16,"div",3)(17,"h2",4),t.EFF(18," EXPENSE "),t.k0s(),t.j41(19,"h3",7),t.EFF(20),t.nI1(21,"async"),t.nI1(22,"currency"),t.k0s(),t.nrm(23,"div",6),t.k0s()()(),t.j41(24,"div",1)(25,"div",2)(26,"div",3)(27,"h2",4),t.EFF(28," BALANCE "),t.k0s(),t.j41(29,"h3",8),t.EFF(30),t.nI1(31,"async"),t.nI1(32,"currency"),t.k0s(),t.nrm(33,"div",6),t.k0s()()()(),t.j41(34,"div",0)(35,"div",1)(36,"div",2)(37,"div",3)(38,"h2",4),t.EFF(39," Stats "),t.k0s(),t.j41(40,"div",6),t.nrm(41,"ng-pie-donut",9),t.nI1(42,"async"),t.nI1(43,"async"),t.k0s()()()(),t.j41(44,"div",1)(45,"div",2)(46,"div",3)(47,"h2",4),t.EFF(48," INCOME "),t.k0s(),t.j41(49,"div",6),t.nrm(50,"ng-pie-donut",9),t.nI1(51,"async"),t.k0s()()()(),t.j41(52,"div",1)(53,"div",2)(54,"div",3)(55,"h2",4),t.EFF(56," EXPENSE "),t.k0s(),t.j41(57,"div",6),t.nrm(58,"ng-pie-donut",9),t.nI1(59,"async"),t.k0s()()()()()()),2&a&&(t.R7$(10),t.SpI(" ",t.i5U(12,11,t.bMT(11,9,s.totalIncome$),"INR")," "),t.R7$(10),t.SpI(" ",t.i5U(22,16,t.bMT(21,14,s.totalExpense$),"INR")," "),t.R7$(10),t.SpI(" ",t.i5U(32,21,t.bMT(31,19,s.balance$),"INR")," "),t.R7$(11),t.Y8G("configOptions",t.lJ4(32,m))("customPie",t.l_i(37,A,t.l_i(33,Y,t.bMT(42,24,s.totalIncome$),t.bMT(43,26,s.totalExpense$)),t.lJ4(36,X))),t.R7$(9),t.Y8G("configOptions",t.lJ4(40,m))("customPie",t.eq3(41,F,t.bMT(51,28,s.incomeTransactions$))),t.R7$(8),t.Y8G("configOptions",t.lJ4(43,m))("customPie",t.eq3(44,F,t.bMT(59,30,s.expenseTransactions$))))},dependencies:[J.c,r.Jj,r.oe],styles:[".expense[_ngcontent-%COMP%]{color:red;font-weight:700}.income[_ngcontent-%COMP%]{color:green;font-weight:700}"]})}}return n})()}]}];let L=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(V),d.iI]})}}return n})();var w=i(8410),W=i(5682);let z=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[r.MD,o.X1,L,w.OT,W.lT]})}}return n})()}}]);