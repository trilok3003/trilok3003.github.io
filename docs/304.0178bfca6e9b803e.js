"use strict";var NA=Object.defineProperty,DA=Object.defineProperties,OA=Object.getOwnPropertyDescriptors,$_=Object.getOwnPropertySymbols,RA=Object.prototype.hasOwnProperty,PA=Object.prototype.propertyIsEnumerable,K_=(je,be,L)=>be in je?NA(je,be,{enumerable:!0,configurable:!0,writable:!0,value:L}):je[be]=L,z_=(je,be)=>{for(var L in be||(be={}))RA.call(be,L)&&K_(je,L,be[L]);if($_)for(var L of $_(be))PA.call(be,L)&&K_(je,L,be[L]);return je},W_=(je,be)=>DA(je,OA(be));(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[304],{7304:(je,be,L)=>{L.r(be),L.d(be,{BROWSER_STORAGE:()=>H_,UsefullAppsModule:()=>SA});var o=L(5e3),M=L(9808),z=L(4035);let cr=(()=>{class n{constructor(t){this.router=t,this.breadcrumbString="",t.events.subscribe(r=>{r instanceof z.OD?(console.clear(),console.log("NavigationStart --- ",r.url)):r instanceof z.xV?console.log("RouteConfigLoadStart --- ",r.toString()):r instanceof z.GH?console.log("RouteConfigLoadEnd --- ",r.toString()):r instanceof z.R9?(console.log("RoutesRecognized --- ",r.url),this.breadcrumbString=this.getBreadcrumbs(this.findLastFirstChild(r.state.root))):r instanceof z.og?console.log("GuardsCheckStart --- ",r.url):r instanceof z.Eb?console.log("ChildActivationStart --- ",r.toString()):r instanceof z.wM?console.log("ActivationStart --- ",r.toString()):r instanceof z.c9?console.log("GuardsCheckEnd --- ",r.url):r instanceof z.sK?console.log("ResolveStart --- ",r.url):r instanceof z.Av?console.log("ResolveEnd --- ",r.url):r instanceof z.QW?console.log("ChildActivationEnd --- ",r.toString()):r instanceof z.jw?console.log("ActivationEnd --- ",r.toString()):r instanceof z.m2?console.log("NavigationEnd --- ",r.url):r instanceof z.gk?console.log("NavigationCancel --- ",r.url):r instanceof z.Q3?console.log("NavigationError --- ",r.error):r instanceof z.Xs&&console.log("Scroll --- ",r.position)})}findLastFirstChild(t){return t.firstChild?this.findLastFirstChild(t.firstChild):t}getBreadcrumbs(t){var r,i;const s=[];null!==(r=t.url[0])&&void 0!==r&&r.path&&s.push(null===(i=t.url[0])||void 0===i?void 0:i.path);for(const[a,c]of Object.entries(t.params))s.push(`${a.slice(0,1).toUpperCase()+a.slice(1)}: ${c.slice(0,1).toUpperCase()+c.slice(1)}`);return s.join(" > ")}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(z.F0))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ur=(()=>{class n{constructor(t){this.routeService=t,console.log(t.breadcrumbString)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(cr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-usefull-apps"]],decls:1,vars:0,template:function(t,r){1&t&&o._UZ(0,"router-outlet")},dependencies:[z.lC]}),n})();var C=L(3075);const Zt="ABCDEFGHIJKLMNOPQRSTUVWXYZ",qt="abcdefghijklmnopqrstuvwxyz",ft="0123456789",pt="!@#$%^&*()_+=";let mt=(()=>{class n{constructor(){this.passwordConfig={length:15,upper:!1,lower:!1,number:!1,symbol:!1}}ngOnInit(){}getLowercase(){return qt[Math.floor(Math.random()*qt.length)]}getUppercase(){return Zt[Math.floor(Math.random()*Zt.length)]}getNumber(){return ft[Math.floor(Math.random()*ft.length)]}getSymbol(){return pt[Math.floor(Math.random()*pt.length)]}generatePassword(){const{length:t,upper:r,lower:i,number:s,symbol:a}=this.passwordConfig;console.log(this.passwordConfig);let c="";r&&(c+=this.getUppercase()),i&&(c+=this.getLowercase()),s&&(c+=this.getNumber()),a&&(c+=this.getSymbol());for(let u=c.length;u<t;u++)c+=this.generateX();this.password=c}generateX(){const{upper:t,lower:r,number:i,symbol:s}=this.passwordConfig,a=[];return t&&a.push(this.getUppercase()),r&&a.push(this.getLowercase()),i&&a.push(this.getNumber()),s&&a.push(this.getSymbol()),0===a.length?"":a[Math.floor(Math.random()*a.length)]}copyPassword(){const t=document.createElement("textarea");!this.password||(t.value=this.password,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove(),alert("Password copied to clipboard"))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-password-generator"]],decls:31,vars:6,consts:[[1,"pw-container"],[1,"pw-header"],[1,"pw"],[3,"click"],[1,"pw-body"],[1,"form-control"],["max","30","min","2","type","number","value","15",3,"ngModel","ngModelChange"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"generate",3,"click"]],template:function(t,r){1&t&&(o.TgZ(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"span"),o._uU(5),o.qZA(),o.TgZ(6,"button",3),o.NdJ("click",function(){return r.copyPassword()}),o._uU(7,"Copy"),o.qZA()()(),o.TgZ(8,"div",4)(9,"div",5)(10,"label"),o._uU(11,"Password Length"),o.qZA(),o.TgZ(12,"input",6),o.NdJ("ngModelChange",function(s){return r.passwordConfig.length=s}),o.qZA()(),o.TgZ(13,"div",5)(14,"label"),o._uU(15,"Contain Uppercase Letters"),o.qZA(),o.TgZ(16,"input",7),o.NdJ("ngModelChange",function(s){return r.passwordConfig.upper=s}),o.qZA()(),o.TgZ(17,"div",5)(18,"label"),o._uU(19,"Contain Lowercase Letters"),o.qZA(),o.TgZ(20,"input",7),o.NdJ("ngModelChange",function(s){return r.passwordConfig.lower=s}),o.qZA()(),o.TgZ(21,"div",5)(22,"label"),o._uU(23,"Contain Numbers"),o.qZA(),o.TgZ(24,"input",7),o.NdJ("ngModelChange",function(s){return r.passwordConfig.number=s}),o.qZA()(),o.TgZ(25,"div",5)(26,"label"),o._uU(27,"Contain Symbols"),o.qZA(),o.TgZ(28,"input",7),o.NdJ("ngModelChange",function(s){return r.passwordConfig.symbol=s}),o.qZA()(),o.TgZ(29,"button",8),o.NdJ("click",function(){return r.generatePassword()}),o._uU(30," Generate Password "),o.qZA()()()()),2&t&&(o.xp6(5),o.Oqu(r.password),o.xp6(7),o.Q6J("ngModel",r.passwordConfig.length),o.xp6(4),o.Q6J("ngModel",r.passwordConfig.upper),o.xp6(4),o.Q6J("ngModel",r.passwordConfig.lower),o.xp6(4),o.Q6J("ngModel",r.passwordConfig.number),o.xp6(4),o.Q6J("ngModel",r.passwordConfig.symbol))},dependencies:[C.Fj,C.wV,C.Wl,C.JJ,C.qQ,C.Fd,C.On],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@200;400;600&display=swap";*{box-sizing:border-box}body{background-color:#639;color:#fff;display:flex;align-items:center;justify-content:center;font-family:Poppins,sans-serif;margin:0;min-height:100vh}.pw-container{background-color:#2e0c50;box-shadow:0 4px 10px #00000080;min-width:400px}.pw-header{padding:1rem}.pw{background-color:#451c6d;display:flex;font-size:1.5rem;align-items:center;height:70px;width:100%;position:relative;padding:1rem;overflow:auto}.pw button{background-color:#fff;border:none;color:#1d0238;cursor:pointer;font-family:inherit;font-weight:700;padding:.25rem;position:absolute;top:0;right:0;transform:translateY(20%);transition:opacity .2s ease,transform .2s ease;opacity:0}.pw:hover button{opacity:1;transform:translate(0)}.pw-body{padding:0 1rem 1rem}.form-control{color:#eee;display:flex;justify-content:space-between;margin:.75rem 0}.generate{background-color:#ecb602;border:none;color:#639;cursor:pointer;display:block;font-size:1.5rem;font-weight:700;padding:.75rem;margin-top:1rem;width:100%}\n'],encapsulation:3}),n})();const ki=function(n){return{hidden:n}};function Q_(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"button",6),o.NdJ("click",function(){const s=o.CHM(t).$implicit;return o.KtG(s.edit=!s.edit)}),o._UZ(4,"i",7),o.qZA(),o.TgZ(5,"button",8),o.NdJ("click",function(){const s=o.CHM(t).index,a=o.oxw();return o.KtG(a.onDelete(s))}),o._UZ(6,"i",9),o.qZA()(),o.TgZ(7,"div",10)(8,"p"),o._uU(9),o.qZA()(),o.TgZ(10,"textarea",11),o.NdJ("ngModelChange",function(i){const a=o.CHM(t).$implicit;return o.KtG(a.text=i)})("ngModelChange",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.updateLocalStorage())}),o.qZA()()()}if(2&n){const t=e.$implicit;o.xp6(7),o.Q6J("ngClass",o.VKq(4,ki,!t.edit)),o.xp6(2),o.Oqu(t.text),o.xp6(1),o.Q6J("ngClass",o.VKq(6,ki,t.edit))("ngModel",t.text)}}let J_=(()=>{class n{constructor(){this.notes=JSON.parse(localStorage.getItem("notes"))||[]}ngOnInit(){}addNewNote(){this.notes.push({text:"",edit:!1}),this.updateLocalStorage()}updateLocalStorage(){localStorage.setItem("notes",JSON.stringify(this.notes))}onDelete(t){this.notes.splice(t,1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-notes"]],decls:5,vars:1,consts:[[1,"add",3,"click"],[1,"fas","fa-plus"],["class","note",4,"ngFor","ngForOf"],[1,"note"],[1,"notes"],[1,"tools"],[1,"edit",3,"click"],[1,"fas","fa-edit"],[1,"delete",3,"click"],[1,"fas","fa-trash-alt"],[1,"main",3,"ngClass"],[3,"ngClass","ngModel","ngModelChange"]],template:function(t,r){1&t&&(o.TgZ(0,"body")(1,"button",0),o.NdJ("click",function(){return r.addNewNote()}),o._UZ(2,"i",1),o._uU(3," Add note\n"),o.qZA(),o.YNc(4,Q_,11,8,"div",2),o.qZA()),2&t&&(o.xp6(4),o.Q6J("ngForOf",r.notes))},dependencies:[M.mk,M.sg,C.Fj,C.JJ,C.On],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@200;400;600&display=swap";@import"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css";*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]{background-color:#7bdaf3;display:flex;flex-wrap:wrap;font-family:Poppins,sans-serif;margin:0;padding-top:3rem}.add[_ngcontent-%COMP%]{background-color:#9ec862;border-radius:3px;border:none;color:#fff;cursor:pointer;padding:.5rem 1rem;position:fixed;top:1rem;right:1rem}.note[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 0 10px 4px #0000001a;margin:20px;height:400px;width:400px}.note[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{background-color:#9ec862;display:flex;justify-content:flex-end;padding:.5rem}.note[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#fff;cursor:pointer;font-size:1rem;margin-left:.5rem}.note[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{background-color:#eee;overflow:hidden;height:400px;width:100%}.note[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{outline:none;font-family:inherit;font-size:1.2rem;border:none;height:400px;width:100%}.note[_ngcontent-%COMP%]   .hidden[_ngcontent-%COMP%]{display:none}']}),n})();const Y_=["first"],X_=["iframe"],ey=["btn"];let ty=(()=>{class n{constructor(){}ngOnInit(){}ngAfterViewInit(){this.btn.nativeElement.addEventListener("click",()=>{this.iframe.nativeElement.src="data:text/html;charset=utf-8,"+encodeURI(this.first.nativeElement.textContent)}),this.first.nativeElement.addEventListener("keyup",()=>{this.iframe.nativeElement.src="data:text/html;charset=utf-8,"+encodeURI(this.first.nativeElement.textContent)}),this.first.nativeElement.addEventListener("paste",function(t){t.preventDefault();let r=t.clipboardData.getData("text/plain");document.execCommand("insertText",!1,r)})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-editor"]],viewQuery:function(t,r){if(1&t&&(o.Gf(Y_,5),o.Gf(X_,5),o.Gf(ey,5)),2&t){let i;o.iGM(i=o.CRH())&&(r.first=i.first),o.iGM(i=o.CRH())&&(r.iframe=i.first),o.iGM(i=o.CRH())&&(r.btn=i.first)}},decls:10,vars:0,consts:[[1,"main-editor"],[1,"btn"],["btn",""],["contenteditable","",1,"first"],["first",""],[1,"second"],["iframe",""]],template:function(t,r){1&t&&(o.TgZ(0,"body")(1,"div",0)(2,"button",1,2),o._uU(4,"Run"),o.qZA(),o.TgZ(5,"div",3,4),o._uU(7," writecode "),o.qZA(),o._UZ(8,"iframe",5,6),o.qZA()())},styles:["*{box-sizing:border-box;padding:0;margin:0}.btn{poistion:fixed;right:0;padding:.4rem;width:4rem;background:rgb(0,0,0);color:gold;font-size:1rem;outline:none;cursor:pointer;height:90vh}.btn:hover{color:#fff;background:blue}.main-editor{background:rgba(0,0,0,.91);display:flex;width:100%;padding:1rem;box-shadow:0 2px 3px #000;position:fixed;height:100vh;justify-content:center;align-items:center;border:7px solid #36383f}.first{background-color:#fff;width:50%;overflow-x:hidden;overflow-y:auto;white-space:pre;box-shadow:0 1px 1px #161616;outline:none;padding:.4rem;height:90vh}.second{background-color:#fff;width:50%;overflow-y:auto;white-space:pre;right:0;box-shadow:0 1px 1px #161616;padding:.4rem;height:90vh}\n"],encapsulation:3}),n})(),ny=(()=>{class n{constructor(){this.currencyOne="USD",this.currencyTwo="EUR",this.amountOne=1}ngOnInit(){this.calculate()}calculate(){fetch(`https://api.exchangerate-api.com/v4/latest/${this.currencyOne}`).then(t=>t.json()).then(t=>{const r=t.rates[this.currencyTwo];this.rate=`1 ${this.currencyOne} = ${r} ${this.currencyTwo}`,this.amountTwo=(this.amountOne*r).toFixed(2)})}swap(){const t=this.currencyOne;this.currencyOne=this.currencyTwo,this.currencyTwo=t,this.calculate()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-exchange-rates"]],decls:225,vars:5,consts:[[1,"container"],[1,"currency"],[3,"ngModel","ngModelChange"],["value","AED"],["value","ARS"],["value","AUD"],["value","BGN"],["value","BRL"],["value","BSD"],["value","CAD"],["value","CHF"],["value","CLP"],["value","CNY"],["value","COP"],["value","CZK"],["value","DKK"],["value","DOP"],["value","EGP"],["value","EUR"],["value","FJD"],["value","GBP"],["value","GTQ"],["value","HKD"],["value","HRK"],["value","HUF"],["value","IDR"],["value","ILS"],["value","INR"],["value","ISK"],["value","JPY"],["value","KRW"],["value","KZT"],["value","MXN"],["value","MYR"],["value","NOK"],["value","NZD"],["value","PAB"],["value","PEN"],["value","PHP"],["value","PKR"],["value","PLN"],["value","PYG"],["value","RON"],["value","RUB"],["value","SAR"],["value","SEK"],["value","SGD"],["value","THB"],["value","TRY"],["value","TWD"],["value","UAH"],["value","USD"],["value","UYU"],["value","VND"],["value","ZAR"],["type","number","placeholder","0","value","1",3,"ngModel","ngModelChange"],[1,"swap-rate-container"],[1,"btn",3,"click"],[1,"rate"],["type","number","placeholder","0",3,"ngModel","ngModelChange"]],template:function(t,r){1&t&&(o.TgZ(0,"body")(1,"h1"),o._uU(2,"Exchange Rate Calculator"),o.qZA(),o.TgZ(3,"p"),o._uU(4,"Choose the currency and the amounts to get the exchange rate"),o.qZA(),o.TgZ(5,"div",0)(6,"div",1)(7,"select",2),o.NdJ("ngModelChange",function(s){return r.currencyOne=s})("ngModelChange",function(){return r.calculate()}),o.TgZ(8,"option",3),o._uU(9,"AED"),o.qZA(),o.TgZ(10,"option",4),o._uU(11,"ARS"),o.qZA(),o.TgZ(12,"option",5),o._uU(13,"AUD"),o.qZA(),o.TgZ(14,"option",6),o._uU(15,"BGN"),o.qZA(),o.TgZ(16,"option",7),o._uU(17,"BRL"),o.qZA(),o.TgZ(18,"option",8),o._uU(19,"BSD"),o.qZA(),o.TgZ(20,"option",9),o._uU(21,"CAD"),o.qZA(),o.TgZ(22,"option",10),o._uU(23,"CHF"),o.qZA(),o.TgZ(24,"option",11),o._uU(25,"CLP"),o.qZA(),o.TgZ(26,"option",12),o._uU(27,"CNY"),o.qZA(),o.TgZ(28,"option",13),o._uU(29,"COP"),o.qZA(),o.TgZ(30,"option",14),o._uU(31,"CZK"),o.qZA(),o.TgZ(32,"option",15),o._uU(33,"DKK"),o.qZA(),o.TgZ(34,"option",16),o._uU(35,"DOP"),o.qZA(),o.TgZ(36,"option",17),o._uU(37,"EGP"),o.qZA(),o.TgZ(38,"option",18),o._uU(39,"EUR"),o.qZA(),o.TgZ(40,"option",19),o._uU(41,"FJD"),o.qZA(),o.TgZ(42,"option",20),o._uU(43,"GBP"),o.qZA(),o.TgZ(44,"option",21),o._uU(45,"GTQ"),o.qZA(),o.TgZ(46,"option",22),o._uU(47,"HKD"),o.qZA(),o.TgZ(48,"option",23),o._uU(49,"HRK"),o.qZA(),o.TgZ(50,"option",24),o._uU(51,"HUF"),o.qZA(),o.TgZ(52,"option",25),o._uU(53,"IDR"),o.qZA(),o.TgZ(54,"option",26),o._uU(55,"ILS"),o.qZA(),o.TgZ(56,"option",27),o._uU(57,"INR"),o.qZA(),o.TgZ(58,"option",28),o._uU(59,"ISK"),o.qZA(),o.TgZ(60,"option",29),o._uU(61,"JPY"),o.qZA(),o.TgZ(62,"option",30),o._uU(63,"KRW"),o.qZA(),o.TgZ(64,"option",31),o._uU(65,"KZT"),o.qZA(),o.TgZ(66,"option",32),o._uU(67,"MXN"),o.qZA(),o.TgZ(68,"option",33),o._uU(69,"MYR"),o.qZA(),o.TgZ(70,"option",34),o._uU(71,"NOK"),o.qZA(),o.TgZ(72,"option",35),o._uU(73,"NZD"),o.qZA(),o.TgZ(74,"option",36),o._uU(75,"PAB"),o.qZA(),o.TgZ(76,"option",37),o._uU(77,"PEN"),o.qZA(),o.TgZ(78,"option",38),o._uU(79,"PHP"),o.qZA(),o.TgZ(80,"option",39),o._uU(81,"PKR"),o.qZA(),o.TgZ(82,"option",40),o._uU(83,"PLN"),o.qZA(),o.TgZ(84,"option",41),o._uU(85,"PYG"),o.qZA(),o.TgZ(86,"option",42),o._uU(87,"RON"),o.qZA(),o.TgZ(88,"option",43),o._uU(89,"RUB"),o.qZA(),o.TgZ(90,"option",44),o._uU(91,"SAR"),o.qZA(),o.TgZ(92,"option",45),o._uU(93,"SEK"),o.qZA(),o.TgZ(94,"option",46),o._uU(95,"SGD"),o.qZA(),o.TgZ(96,"option",47),o._uU(97,"THB"),o.qZA(),o.TgZ(98,"option",48),o._uU(99,"TRY"),o.qZA(),o.TgZ(100,"option",49),o._uU(101,"TWD"),o.qZA(),o.TgZ(102,"option",50),o._uU(103,"UAH"),o.qZA(),o.TgZ(104,"option",51),o._uU(105,"USD"),o.qZA(),o.TgZ(106,"option",52),o._uU(107,"UYU"),o.qZA(),o.TgZ(108,"option",53),o._uU(109,"VND"),o.qZA(),o.TgZ(110,"option",54),o._uU(111,"ZAR"),o.qZA()(),o.TgZ(112,"input",55),o.NdJ("ngModelChange",function(s){return r.amountOne=s})("ngModelChange",function(){return r.calculate()}),o.qZA()(),o.TgZ(113,"div",56)(114,"button",57),o.NdJ("click",function(){return r.swap()}),o._uU(115," Swap "),o.qZA(),o.TgZ(116,"div",58),o._uU(117),o.qZA()(),o.TgZ(118,"div",1)(119,"select",2),o.NdJ("ngModelChange",function(s){return r.currencyTwo=s})("ngModelChange",function(){return r.calculate()}),o.TgZ(120,"option",3),o._uU(121,"AED"),o.qZA(),o.TgZ(122,"option",4),o._uU(123,"ARS"),o.qZA(),o.TgZ(124,"option",5),o._uU(125,"AUD"),o.qZA(),o.TgZ(126,"option",6),o._uU(127,"BGN"),o.qZA(),o.TgZ(128,"option",7),o._uU(129,"BRL"),o.qZA(),o.TgZ(130,"option",8),o._uU(131,"BSD"),o.qZA(),o.TgZ(132,"option",9),o._uU(133,"CAD"),o.qZA(),o.TgZ(134,"option",10),o._uU(135,"CHF"),o.qZA(),o.TgZ(136,"option",11),o._uU(137,"CLP"),o.qZA(),o.TgZ(138,"option",12),o._uU(139,"CNY"),o.qZA(),o.TgZ(140,"option",13),o._uU(141,"COP"),o.qZA(),o.TgZ(142,"option",14),o._uU(143,"CZK"),o.qZA(),o.TgZ(144,"option",15),o._uU(145,"DKK"),o.qZA(),o.TgZ(146,"option",16),o._uU(147,"DOP"),o.qZA(),o.TgZ(148,"option",17),o._uU(149,"EGP"),o.qZA(),o.TgZ(150,"option",18),o._uU(151,"EUR"),o.qZA(),o.TgZ(152,"option",19),o._uU(153,"FJD"),o.qZA(),o.TgZ(154,"option",20),o._uU(155,"GBP"),o.qZA(),o.TgZ(156,"option",21),o._uU(157,"GTQ"),o.qZA(),o.TgZ(158,"option",22),o._uU(159,"HKD"),o.qZA(),o.TgZ(160,"option",23),o._uU(161,"HRK"),o.qZA(),o.TgZ(162,"option",24),o._uU(163,"HUF"),o.qZA(),o.TgZ(164,"option",25),o._uU(165,"IDR"),o.qZA(),o.TgZ(166,"option",26),o._uU(167,"ILS"),o.qZA(),o.TgZ(168,"option",27),o._uU(169,"INR"),o.qZA(),o.TgZ(170,"option",28),o._uU(171,"ISK"),o.qZA(),o.TgZ(172,"option",29),o._uU(173,"JPY"),o.qZA(),o.TgZ(174,"option",30),o._uU(175,"KRW"),o.qZA(),o.TgZ(176,"option",31),o._uU(177,"KZT"),o.qZA(),o.TgZ(178,"option",32),o._uU(179,"MXN"),o.qZA(),o.TgZ(180,"option",33),o._uU(181,"MYR"),o.qZA(),o.TgZ(182,"option",34),o._uU(183,"NOK"),o.qZA(),o.TgZ(184,"option",35),o._uU(185,"NZD"),o.qZA(),o.TgZ(186,"option",36),o._uU(187,"PAB"),o.qZA(),o.TgZ(188,"option",37),o._uU(189,"PEN"),o.qZA(),o.TgZ(190,"option",38),o._uU(191,"PHP"),o.qZA(),o.TgZ(192,"option",39),o._uU(193,"PKR"),o.qZA(),o.TgZ(194,"option",40),o._uU(195,"PLN"),o.qZA(),o.TgZ(196,"option",41),o._uU(197,"PYG"),o.qZA(),o.TgZ(198,"option",42),o._uU(199,"RON"),o.qZA(),o.TgZ(200,"option",43),o._uU(201,"RUB"),o.qZA(),o.TgZ(202,"option",44),o._uU(203,"SAR"),o.qZA(),o.TgZ(204,"option",45),o._uU(205,"SEK"),o.qZA(),o.TgZ(206,"option",46),o._uU(207,"SGD"),o.qZA(),o.TgZ(208,"option",47),o._uU(209,"THB"),o.qZA(),o.TgZ(210,"option",48),o._uU(211,"TRY"),o.qZA(),o.TgZ(212,"option",49),o._uU(213,"TWD"),o.qZA(),o.TgZ(214,"option",50),o._uU(215,"UAH"),o.qZA(),o.TgZ(216,"option",51),o._uU(217,"USD"),o.qZA(),o.TgZ(218,"option",52),o._uU(219,"UYU"),o.qZA(),o.TgZ(220,"option",53),o._uU(221,"VND"),o.qZA(),o.TgZ(222,"option",54),o._uU(223,"ZAR"),o.qZA()(),o.TgZ(224,"input",59),o.NdJ("ngModelChange",function(s){return r.amountTwo=s})("ngModelChange",function(){return r.calculate()}),o.qZA()()()()),2&t&&(o.xp6(7),o.Q6J("ngModel",r.currencyOne),o.xp6(105),o.Q6J("ngModel",r.amountOne),o.xp6(5),o.Oqu(r.rate),o.xp6(2),o.Q6J("ngModel",r.currencyTwo),o.xp6(105),o.Q6J("ngModel",r.amountTwo))},dependencies:[C.YN,C.Kr,C.Fj,C.wV,C.EJ,C.JJ,C.On],styles:[":host{--primary-color: #5fbaa7}*{box-sizing:border-box}body{background-color:#f4f4f4;font-family:Arial,Helvetica,sans-serif;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;margin:0;padding:20px}h1{color:var(--primary-color)}p{text-align:center}.btn{color:#fff;background:var(--primary-color);cursor:pointer;border-radius:5px;font-size:12px;padding:5px 12px}.money-img{width:150px}.currency{padding:40px 0;display:flex;align-items:center;justify-content:space-between}.currency select{padding:10px 20px 10px 10px;-webkit-appearance:none;appearance:none;border:1px solid #dedede;font-size:16px;background:transparent;background-image:url(data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%20000002%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E);background-position:right 10px top 50%,0,0;background-size:12px auto,100%;background-repeat:no-repeat}.currency input{border:0;background:transparent;font-size:30px;text-align:right}.swap-rate-container{display:flex;align-items:center;justify-content:space-between}.rate{color:var(--primary-color);font-size:14px;padding:0 10px}select:focus,input:focus,button:focus{outline:0}@media (max-width: 600px){.currency input{width:200px}}\n"],encapsulation:3}),n})();function ry(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"li",11),o._uU(1),o.TgZ(2,"span"),o._uU(3),o.qZA(),o.TgZ(4,"button",12),o.NdJ("click",function(){const s=o.CHM(t).$implicit,a=o.oxw();return o.KtG(a.removeTransaction(s.id))}),o._uU(5,"x"),o.qZA()()}if(2&n){const t=e.$implicit,r=o.oxw();o.Q6J("ngClass",t.amount<0?"minus":"plus"),o.xp6(1),o.hij(" ",t.text," "),o.xp6(2),o.AsE("",t.amount<0?"-":"+","",r.abs(t.amount),"")}}let iy=(()=>{class n{constructor(t){this.fb=t,this.dummyTransactions=[{id:1,text:"Flower",amount:-20},{id:2,text:"Salary",amount:300},{id:3,text:"Book",amount:-10},{id:4,text:"Camera",amount:150}],this.transactions=null!==localStorage.getItem("transactions")?this.localStorageTransactions:[],this.form=this.fb.group({text:["",C.kI.required],amount:["",C.kI.required]}),this.init()}get localStorageTransactions(){return JSON.parse(localStorage.getItem("transactions"))}addTransaction(){if(this.form.invalid)alert("Please add a text and amount");else{const t={id:this.generateID(),text:this.form.get("text").value,amount:+this.form.get("amount").value};this.transactions.push(t),this.init(),this.form.reset()}}generateID(){return Math.floor(1e8*Math.random())}abs(t){return Math.abs(t)}removeTransaction(t){this.transactions=this.transactions.filter(r=>r.id!==t),this.init()}updateLocalStorage(){localStorage.setItem("transactions",JSON.stringify(this.transactions))}init(){this.updateLocalStorage(),this.updateValues()}updateValues(){const t=this.transactions.map(a=>a.amount),r=t.reduce((a,c)=>a+c,0).toFixed(2),i=t.filter(a=>a>0).reduce((a,c)=>a+c,0).toFixed(2),s=(-1*t.filter(a=>a<0).reduce((a,c)=>a+c,0)).toFixed(2);this.balance=`$${r}`,this.moneyPlus=`$${i}`,this.moneyMinus=`$${s}`}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(C.qu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-expense-tracker"]],decls:38,vars:5,consts:[[1,"container"],[1,"inc-exp-container"],[1,"money","plus"],[1,"money","minus"],[1,"list"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"form-control"],["formControlName","text","placeholder","Enter text...","type","text"],["formControlName","amount","placeholder","Enter amount...","type","number"],[1,"btn",3,"click"],[3,"ngClass"],[1,"delete-btn",3,"click"]],template:function(t,r){1&t&&(o.TgZ(0,"body")(1,"h2"),o._uU(2,"Expense Tracker"),o.qZA(),o.TgZ(3,"div",0)(4,"h4"),o._uU(5,"Your Balance"),o.qZA(),o.TgZ(6,"h1"),o._uU(7),o.qZA(),o.TgZ(8,"div",1)(9,"div")(10,"h4"),o._uU(11,"Income"),o.qZA(),o.TgZ(12,"p",2),o._uU(13),o.qZA()(),o.TgZ(14,"div")(15,"h4"),o._uU(16,"Expense"),o.qZA(),o.TgZ(17,"p",3),o._uU(18),o.qZA()()(),o.TgZ(19,"h3"),o._uU(20,"History"),o.qZA(),o.TgZ(21,"ul",4),o.YNc(22,ry,6,4,"li",5),o.qZA(),o.TgZ(23,"h3"),o._uU(24,"Add new transaction"),o.qZA(),o.TgZ(25,"form",6)(26,"div",7)(27,"label"),o._uU(28,"Text"),o.qZA(),o._UZ(29,"input",8),o.qZA(),o.TgZ(30,"div",7)(31,"label"),o._uU(32,"Amount "),o._UZ(33,"br"),o._uU(34," (negative - expense, positive - income)"),o.qZA(),o._UZ(35,"input",9),o.qZA(),o.TgZ(36,"button",10),o.NdJ("click",function(){return r.addTransaction()}),o._uU(37,"Add transaction"),o.qZA()()()()),2&t&&(o.xp6(7),o.Oqu(r.balance),o.xp6(6),o.Oqu(r.moneyPlus),o.xp6(5),o.Oqu(r.moneyMinus),o.xp6(4),o.Q6J("ngForOf",r.transactions),o.xp6(3),o.Q6J("formGroup",r.form))},dependencies:[M.mk,M.sg,C._Y,C.Fj,C.wV,C.JJ,C.JL,C.sg,C.u],styles:['@import"https://fonts.googleapis.com/css?family=Lato&display=swap";:host{--box-shadow: 0 1px 3px rgba(0, 0, 0, .12), 0 1px 2px rgba(0, 0, 0, .24)}*{box-sizing:border-box}body{background-color:#f7f7f7;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;margin:0;font-family:Lato,sans-serif}.container{margin:30px auto;width:350px}h1{letter-spacing:1px;margin:0}h3{border-bottom:1px solid #bbb;padding-bottom:10px;margin:40px 0 10px}h4{margin:0;text-transform:uppercase}.inc-exp-container{background-color:#fff;box-shadow:var(--box-shadow);padding:20px;display:flex;justify-content:space-between;margin:20px 0}.inc-exp-container>div{flex:1;text-align:center}.inc-exp-container>div:first-of-type{border-right:1px solid #dedede}.money{font-size:20px;letter-spacing:1px;margin:5px 0}.money.plus{color:#2ecc71}.money.minus{color:#c0392b}label{display:inline-block;margin:10px 0}input[type=text],input[type=number]{border:1px solid #dedede;border-radius:2px;display:block;font-size:16px;padding:10px;width:100%}.btn{cursor:pointer;background-color:#9c88ff;box-shadow:var(--box-shadow);color:#fff;border:0;display:block;font-size:16px;margin:10px 0 30px;padding:10px;width:100%}.btn:focus,.delete-btn:focus{outline:0}.list{list-style-type:none;padding:0;margin-bottom:40px}.list li{background-color:#fff;box-shadow:var(--box-shadow);color:#333;display:flex;justify-content:space-between;position:relative;padding:10px;margin:10px 0}.list li.plus{border-right:5px solid #2ecc71}.list li.minus{border-right:5px solid #c0392b}.delete-btn{cursor:pointer;background-color:#e74c3c;border:0;color:#fff;font-size:20px;line-height:20px;padding:2px 5px;position:absolute;top:50%;left:0;transform:translate(-100%,-50%);opacity:0;transition:opacity .3s ease}.list li:hover .delete-btn{opacity:1}\n'],encapsulation:3}),n})();const sy=function(n){return{completed:n}};function oy(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"li",4),o.NdJ("click",function(){const s=o.CHM(t).$implicit,a=o.oxw();return o.KtG(a.toggleTodo(s))})("contextmenu",function(i){const a=o.CHM(t).index,c=o.oxw();return o.KtG(c.onRemove(i,a))}),o._uU(1),o.qZA()}if(2&n){const t=e.$implicit;o.Q6J("ngClass",o.VKq(2,sy,t.completed)),o.xp6(1),o.Oqu(t.text)}}let ay=(()=>{class n{constructor(t){this.fb=t,this.todos=JSON.parse(localStorage.getItem("todos")),this.formInit()}ngOnInit(){}addTodo(t){t.preventDefault(),this.todos.push(this.form.value),this.formInit(),this.updateLocalStorage()}formInit(){this.form=this.fb.group({text:[""],completed:[!1]})}updateLocalStorage(){localStorage.setItem("todos",JSON.stringify(this.todos))}onRemove(t,r){t.preventDefault(),this.todos.splice(r,1),this.updateLocalStorage()}toggleTodo(t){t.completed=!t.completed}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(C.qu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-todos"]],decls:11,vars:2,consts:[[3,"formGroup","submit"],["autocomplete","off","placeholder","Enter your todo","type","text","formControlName","text",1,"input"],[1,"todos"],[3,"ngClass","click","contextmenu",4,"ngFor","ngForOf"],[3,"ngClass","click","contextmenu"]],template:function(t,r){1&t&&(o.TgZ(0,"body")(1,"h1"),o._uU(2,"todos"),o.qZA(),o.TgZ(3,"form",0),o.NdJ("submit",function(s){return r.addTodo(s)}),o._UZ(4,"input",1),o.TgZ(5,"ul",2),o.YNc(6,oy,2,4,"li",3),o.qZA()(),o.TgZ(7,"small"),o._uU(8,"Left click to toggle complete. "),o._UZ(9,"br"),o._uU(10,"Right click to delete the todo."),o.qZA()()),2&t&&(o.xp6(3),o.Q6J("formGroup",r.form),o.xp6(3),o.Q6J("ngForOf",r.todos))},dependencies:[M.mk,M.sg,C._Y,C.Fj,C.JJ,C.JL,C.sg,C.u],styles:['@import"https://fonts.googleapis.com/css2?family=Poppins:wght@200;400;600&display=swap";*{box-sizing:border-box}body{background-color:#f5f5f5;color:#444;display:flex;align-items:center;flex-direction:column;font-family:Poppins,sans-serif;margin:0;min-height:100vh}h1{color:#b383e2;font-size:10rem;text-align:center;opacity:.4}form{box-shadow:0 4px 10px #0000001a;max-width:100%;width:400px}.input{border:none;color:#444;font-size:2rem;padding:1rem 2rem;display:block;width:100%}.input::placeholder{color:#d5d5d5}.todos{background-color:#fff;padding:0;margin:0;list-style-type:none}.todos li{border-top:1px solid #e5e5e5;cursor:pointer;font-size:1.5rem;padding:1rem 2rem}.todos li.completed{color:#b6b6b6;text-decoration:line-through}small{color:#b5b5b5;margin-top:3rem;text-align:center}\n'],encapsulation:3}),n})();var xo=L(1135),gt=L(4004),Zh=L(1884),Eo=L(3900),cy=L(5963);const qh=(n=3e4)=>(0,cy.H)(0,n);let uy=(()=>{class n{constructor(t){this.storage=t}get(t){return this.storage.getItem(t)}set(t,r){this.storage.setItem(t,r)}remove(t){this.storage.removeItem(t)}clear(){this.storage.clear()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(H_))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Vh=L(3070);const Co="zip-code-storage-key";let Bh=(()=>{class n{constructor(t,r){this.storage=t,this.weatherApi=r,this.locations=new xo.X([]);const i=this.storage.get(Co);if(i){const s=JSON.parse(i)||[];this.locations.next(s)}}get currentLocations(){return this.locations.value}get locations$(){return this.locations.asObservable()}get weatherForecast$(){const t=i=>this.weatherApi.getCurrentWeather(i.zipCode,i.countryCode),r=i=>qh().pipe((0,Eo.w)(()=>t(i)));return this.locations$.pipe((0,gt.U)(i=>i.map(r)))}addLocation(t){const r=[...this.currentLocations,t];this.locations.next(r),this.storage.set(Co,JSON.stringify(r))}removeLocation(t){const r=[...this.currentLocations],i=r.findIndex(s=>s.zipCode===t.zipCode&&s.countryCode===t.countryCode);r.splice(i,1),this.locations.next(r),this.storage.set(Co,JSON.stringify(r))}hasLocation(t){return this.currentLocations.some(r=>r.zipCode===t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(uy),o.LFG(Vh.u))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ly(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"app-single-day-forecast",3),o.NdJ("remove",function(){const s=o.CHM(t).ngIf,a=o.oxw(3);return o.KtG(a.removeLocation(s.zipCode,s.countryCode))})("ready",function(){const s=o.CHM(t).ngIf,a=o.oxw(3);return o.KtG(a.onReady(s.zipCode))}),o.qZA(),o.BQk()}if(2&n){const t=e.ngIf;o.xp6(1),o.Q6J("forecast",t)}}function hy(n,e){if(1&n&&(o.ynx(0),o.YNc(1,ly,2,1,"ng-container",1),o.ALo(2,"async"),o.BQk()),2&n){const t=e.$implicit;o.xp6(1),o.Q6J("ngIf",o.lcZ(2,1,t))}}function dy(n,e){if(1&n&&(o.ynx(0),o.YNc(1,hy,3,3,"ng-container",2),o.BQk()),2&n){const t=e.ngIf;o.xp6(1),o.Q6J("ngForOf",t)}}let Gh=(()=>{class n{constructor(t){this.locations=t,this.inProgress=new xo.X(null)}get inProgress$(){return this.inProgress.asObservable().pipe((0,gt.U)(t=>!!t),(0,Zh.x)())}ngOnInit(){this.weatherForecast$=this.locations.weatherForecast$}addLocation(t){this.inProgress.next(t.zipCode),this.locations.addLocation(t)}removeLocation(t,r){this.locations.removeLocation({zipCode:t,countryCode:r})}onReady(t){this.inProgress.value===t&&this.inProgress.next(null)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Bh))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-weather"]],decls:6,vars:4,consts:[[3,"task$","location"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"forecast","remove","ready"]],template:function(t,r){1&t&&(o.TgZ(0,"main")(1,"app-location-input",0),o.NdJ("location",function(s){return r.addLocation(s)}),o.qZA(),o.YNc(2,dy,2,1,"ng-container",1),o.ALo(3,"async"),o.qZA(),o.TgZ(4,"footer"),o._uU(5,"Created by trilok"),o.qZA()),2&t&&(o.xp6(1),o.Q6J("task$",r.inProgress$),o.xp6(1),o.Q6J("ngIf",o.lcZ(3,2,r.weatherForecast$)))},styles:["main[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;min-height:calc(100vh - 3.5rem)}footer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:3.5rem}"]}),n})();var fy=L(9300),Vt=L(7507);let jh=(()=>{class n{constructor(){this.baseUrl="https://www.angulartraining.com/images/weather/",this.icons=(new Map).set(Vt.Yk.Atmosphere,`${this.baseUrl}/clouds.png`).set(Vt.Yk.Clouds,`${this.baseUrl}/clouds.png`).set(Vt.Yk.Drizzle,`${this.baseUrl}/rain.png`).set(Vt.Yk.Thunderstorm,`${this.baseUrl}/rain.png`).set(Vt.Yk.Rain,`${this.baseUrl}/rain.png`).set(Vt.Yk.Snow,`${this.baseUrl}/snow.png`).set(Vt.Yk.Clear,`${this.baseUrl}/sun.png`)}transform(t){return this.icons.get(t)||`${this.baseUrl}/sun.png`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=o.Yjl({name:"weatherIcon",type:n,pure:!0}),n})();function py(n,e){if(1&n&&(o.TgZ(0,"li",7),o._uU(1),o.ALo(2,"date"),o._UZ(3,"img",8),o.ALo(4,"weatherIcon"),o.qZA()),2&n){const t=e.$implicit;o.xp6(1),o.HOy(" ",o.xi3(2,5,t.date,"EEEE, MMMM d:")," ",t.conditions," - Min: ",t.temperatureMin," - Max: ",t.temperatureMax," "),o.xp6(2),o.Q6J("src",o.lcZ(4,8,t.conditions),o.LSH)}}function my(n,e){if(1&n&&(o.TgZ(0,"section",2)(1,"article",3)(2,"h3",4),o._uU(3),o.qZA()(),o.TgZ(4,"ul",5),o.YNc(5,py,5,10,"li",6),o.qZA()()),2&n){const t=o.oxw();o.xp6(3),o.hij("5-day forecast for ",t.forecast[0].city,""),o.xp6(2),o.Q6J("ngForOf",t.forecast)}}let gy=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-multi-day-forecast"]],inputs:{forecast:"forecast"},decls:3,vars:1,consts:[["class","card",4,"ngIf"],["tabindex","0","routerLink","/useFullApps/weather",1,"btn","btn-success","mt-2"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],["alt","weather conditions icon",1,"icon",3,"src"]],template:function(t,r){1&t&&(o.YNc(0,my,6,2,"section",0),o.TgZ(1,"a",1),o._uU(2,"< Back to main page"),o.qZA()),2&t&&o.Q6J("ngIf",r.forecast)},dependencies:[M.sg,M.O5,z.yS,M.uU,jh],styles:[".icon[_ngcontent-%COMP%]{width:45px;height:45px;position:absolute;right:20px;top:-2px}"],changeDetection:0}),n})();function _y(n,e){if(1&n&&(o.ynx(0),o._UZ(1,"app-multi-day-forecast",1),o.BQk()),2&n){const t=e.ngIf;o.xp6(1),o.Q6J("forecast",t)}}let yy=(()=>{class n{constructor(t,r){this.route=t,this.api=r,this.zipRouteParam="zip",this.countryRouteParam="country"}ngOnInit(){this.forecast$=this.route.paramMap.pipe((0,fy.h)(t=>t.has(this.zipRouteParam)),(0,gt.U)(t=>({zipCode:t.get(this.zipRouteParam),countryCode:t.get(this.countryRouteParam)})),(0,Eo.w)(t=>qh().pipe((0,gt.U)(r=>t))),(0,Eo.w)(t=>this.api.getWeatherForecast(t.zipCode,t.countryCode)),(0,gt.U)(t=>t.slice(0,5)))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(z.gz),o.Y36(Vh.u))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-forecast"]],decls:3,vars:3,consts:[[4,"ngIf"],[3,"forecast"]],template:function(t,r){1&t&&(o.TgZ(0,"main"),o.YNc(1,_y,2,1,"ng-container",0),o.ALo(2,"async"),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",o.lcZ(2,1,r.forecast$)))},dependencies:[M.O5,gy,M.Ov],styles:["main[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem;min-height:calc(100vh - 3.5rem)}footer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:3.5rem}"]}),n})();var f=L(5861);const Hh=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},$h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,c=a?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0;let p=(15&c)<<2|l>>6,_=63&l;u||(_=64,a||(p=64)),r.push(t[s>>2],t[(3&s)<<4|c>>4],t[p],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Hh(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const l=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==s||null==c||null==l||null==d)throw Error();r.push(s<<2|c>>4),64!==l&&(r.push(c<<4&240|l>>2),64!==d&&r.push(l<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Ni=function(n){return function(n){const e=Hh(n);return $h.encodeByteArray(e,!0)}(n).replace(/\./g,"")},Di=function(n){try{return $h.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},Oi=()=>{try{return function xy(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if("undefined"==typeof document)return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(t){return}const e=n&&Di(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},zh=n=>{var e,t;return null===(t=null===(e=Oi())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},Wh=n=>{var e;return null===(e=Oi())||void 0===e?void 0:e[`_${n}`]};class Qh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function ie(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Jh(){try{return"object"==typeof indexedDB}catch(n){return!1}}class et extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lr.prototype.create)}}class lr{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?function Zy(n,e){return n.replace(qy,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new et(i,`${this.serviceName}: ${a} (${i}).`,r)}}const qy=/\{\$([^}]+)}/g;function Pi(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(Xh(s)&&Xh(a)){if(!Pi(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Xh(n){return null!==n&&"object"==typeof n}function Mi(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hr(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function dr(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class Gy{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function jy(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=So),void 0===i.error&&(i.error=So),void 0===i.complete&&(i.complete=So);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(a){}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function So(){}function le(n){return n&&n._delegate?n._delegate:n}class Bt{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Gt="[DEFAULT]";class Qy{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Qh;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function Yy(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Gt})}catch(t){}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch(s){}}}}clearInstance(e=Gt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,f.Z)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Gt){return this.instances.has(e)}getOptions(e=Gt){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&a.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch(s){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Gt?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}var n;return r||null}normalizeInstanceIdentifier(e=Gt){return this.component?this.component.multipleInstances?e:Gt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Xy{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Qy(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const No=[];var Z=(()=>{return(n=Z||(Z={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",Z;var n})();const ed={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},e0=Z.INFO,t0={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},n0=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=t0[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class Do{constructor(e){this.name=e,this._logLevel=e0,this._logHandler=n0,this._userLogHandler=null,No.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ed[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}}let td,nd;const rd=new WeakMap,Oo=new WeakMap,id=new WeakMap,Ro=new WeakMap,Po=new WeakMap;let Mo={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Oo.get(n);if("objectStoreNames"===e)return n.objectStoreNames||id.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _t(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function l0(n){return"function"==typeof n?function u0(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function s0(){return nd||(nd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Lo(this),e),_t(rd.get(this))}:function(...e){return _t(n.apply(Lo(this),e))}:function(e,...t){const r=n.call(Lo(this),e,...t);return id.set(r,e.sort?e.sort():[e]),_t(r)}}(n):(n instanceof IDBTransaction&&function a0(n){if(Oo.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Oo.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function i0(){return td||(td=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Mo):n)}function _t(n){if(n instanceof IDBRequest)return function o0(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(_t(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&rd.set(t,n)}).catch(()=>{}),Po.set(e,n),e}(n);if(Ro.has(n))return Ro.get(n);const e=l0(n);return e!==n&&(Ro.set(n,e),Po.set(e,n)),e}const Lo=n=>Po.get(n),d0=["get","getKey","getAll","getAllKeys","count"],f0=["put","add","delete","clear"],Uo=new Map;function sd(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Uo.get(e))return Uo.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=f0.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!d0.includes(t))return;const s=function(){var a=(0,f.Z)(function*(c,...u){const l=this.transaction(c,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(u.shift())),(yield Promise.all([h[t](...u),i&&l.done]))[0]});return function(u){return a.apply(this,arguments)}}();return Uo.set(e,s),s}!function c0(n){Mo=n(Mo)}(n=>W_(z_({},n),{get:(e,t,r)=>sd(e,t)||n.get(e,t,r),has:(e,t)=>!!sd(e,t)||n.has(e,t)}));class p0{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function m0(n){const e=n.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const Fo="@firebase/app",jt=new Do("@firebase/app"),Li="[DEFAULT]",V0={[Fo]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ht=new Map,Ui=new Map;function B0(n,e){try{n.container.addComponent(e)}catch(t){jt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wn(n){const e=n.name;if(Ui.has(e))return jt.debug(`There were multiple attempts to register component ${e}.`),!1;Ui.set(e,n);for(const t of Ht.values())B0(t,n);return!0}function Fi(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const tt=new lr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class j0{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tt.create("app-deleted",{appName:this._name})}}const fr="9.17.1";function ad(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Li,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw tt.create("bad-app-name",{appName:String(i)});if(t||(t=(()=>{var n;return null===(n=Oi())||void 0===n?void 0:n.config})()),!t)throw tt.create("no-options");const s=Ht.get(i);if(s){if(Pi(t,s.options)&&Pi(r,s.config))return s;throw tt.create("duplicate-app",{appName:i})}const a=new Xy(i);for(const u of Ui.values())a.addComponent(u);const c=new j0(t,r,a);return Ht.set(i,c),c}function cd(n=Li){const e=Ht.get(n);if(!e&&n===Li)return ad();if(!e)throw tt.create("no-app",{appName:n});return e}function yt(n,e,t){var r;let i=null!==(r=V0[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${i}" with version "${e}":`];return s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void jt.warn(c.join(" "))}wn(new Bt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const pr="firebase-heartbeat-store";let qo=null;function ud(){return qo||(qo=function h0(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),c=_t(a);return r&&a.addEventListener("upgradeneeded",u=>{r(_t(a.result),u.oldVersion,u.newVersion,_t(a.transaction))}),t&&a.addEventListener("blocked",()=>t()),c.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),c}("firebase-heartbeat-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(pr)}}).catch(n=>{throw tt.create("idb-open",{originalErrorMessage:n.message})})),qo}function Vo(){return(Vo=(0,f.Z)(function*(n){try{return(yield ud()).transaction(pr).objectStore(pr).get(hd(n))}catch(e){if(e instanceof et)jt.warn(e.message);else{const t=tt.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});jt.warn(t.message)}}})).apply(this,arguments)}function ld(n,e){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,f.Z)(function*(n,e){try{const r=(yield ud()).transaction(pr,"readwrite");return yield r.objectStore(pr).put(e,hd(n)),r.done}catch(t){if(t instanceof et)jt.warn(t.message);else{const r=tt.create("idb-set",{originalErrorMessage:null==t?void 0:t.message});jt.warn(r.message)}}})).apply(this,arguments)}function hd(n){return`${n.name}!${n.options.appId}`}class Q0{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Y0(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,f.Z)(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=dd();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,f.Z)(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=dd(),{heartbeatsToSend:r,unsentEntries:i}=function J0(n,e=1024){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),fd(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),fd(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=Ni(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function dd(){return(new Date).toISOString().substring(0,10)}class Y0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!Jh()&&function Uy(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,f.Z)(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function K0(n){return Vo.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return(0,f.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return ld(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,f.Z)(function*(){var r;if(yield t._canUseIndexedDBPromise){const s=yield t.read();return ld(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function fd(n){return Ni(JSON.stringify({version:2,heartbeats:n})).length}!function X0(n){wn(new Bt("platform-logger",e=>new p0(e),"PRIVATE")),wn(new Bt("heartbeat",e=>new Q0(e),"PRIVATE")),yt(Fo,"0.9.3",n),yt(Fo,"0.9.3","esm2017"),yt("fire-js","")}("");var N,ev="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},nt={},Go=Go||{},O=ev||self;function Zi(){}function qi(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function mr(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var jo="closure_uid_"+(1e9*Math.random()>>>0),nv=0;function rv(n,e,t){return n.call.apply(n.bind,arguments)}function iv(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ke(n,e,t){return(ke=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rv:iv).apply(null,arguments)}function Vi(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function xe(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return e.prototype[i].apply(r,a)}}function vt(){this.s=this.s,this.o=this.o}vt.prototype.s=!1,vt.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function tv(n){Object.prototype.hasOwnProperty.call(n,jo)&&n[jo]||(n[jo]=++nv)}(this)},vt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pd=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Ho(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function md(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(qi(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let a=0;a<s;a++)n[i+a]=r[a]}else n.push(r)}}function Ne(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ne.prototype.h=function(){this.defaultPrevented=!0};var ov=function(){if(!O.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{O.addEventListener("test",Zi,e),O.removeEventListener("test",Zi,e)}catch(t){}return n}();function Bi(n){return/^[\s\xa0]*$/.test(n)}var gd=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function $o(n,e){return n<e?-1:n>e?1:0}function Gi(){var n=O.navigator;return n&&(n=n.userAgent)?n:""}function $e(n){return-1!=Gi().indexOf(n)}function Ko(n){return Ko[" "](n),n}Ko[" "]=Zi;var ji,n,cv=$e("Opera"),bn=$e("Trident")||$e("MSIE"),_d=$e("Edge"),zo=_d||bn,yd=$e("Gecko")&&!(-1!=Gi().toLowerCase().indexOf("webkit")&&!$e("Edge"))&&!($e("Trident")||$e("MSIE"))&&!$e("Edge"),uv=-1!=Gi().toLowerCase().indexOf("webkit")&&!$e("Edge");function vd(){var n=O.document;return n?n.documentMode:void 0}e:{var Wo="",Qo=(n=Gi(),yd?/rv:([^\);]+)(\)|;)/.exec(n):_d?/Edge\/([\d\.]+)/.exec(n):bn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):uv?/WebKit\/(\S+)/.exec(n):cv?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Qo&&(Wo=Qo?Qo[1]:""),bn){var Jo=vd();if(null!=Jo&&Jo>parseFloat(Wo)){ji=String(Jo);break e}}ji=Wo}var lv={};var dv=O.document&&bn&&(vd()||parseInt(ji,10))||void 0;function gr(n,e){if(Ne.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(yd){e:{try{Ko(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:fv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&gr.X.h.call(this)}}xe(gr,Ne);var fv={2:"touch",3:"pen",4:"mouse"};gr.prototype.h=function(){gr.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _r="closure_listenable_"+(1e6*Math.random()|0),pv=0;function mv(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++pv,this.ba=this.ea=!1}function Hi(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Xo(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Id(n){const e={};for(const t in n)e[t]=n[t];return e}const wd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bd(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<wd.length;s++)t=wd[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function $i(n){this.src=n,this.g={},this.h=0}function ea(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=pd(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Hi(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ta(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}$i.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var a=ta(n,e,r,i);return-1<a?(e=n[a],t||(e.ea=!1)):((e=new mv(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var na="closure_lm_"+(1e6*Math.random()|0),ra={};function xd(n,e,t,r,i){if(r&&r.once)return Cd(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)xd(n,e[s],t,r,i);return null}return t=aa(t),n&&n[_r]?n.N(e,t,mr(r)?!!r.capture:!!r,i):Ed(n,e,t,!1,r,i)}function Ed(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var a=mr(i)?!!i.capture:!!i,c=sa(n);if(c||(n[na]=c=new $i(n)),(t=c.add(e,t,r,a,s)).proxy)return t;if(r=function gv(){const e=_v;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)ov||(i=a),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Sd(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Cd(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Cd(n,e[s],t,r,i);return null}return t=aa(t),n&&n[_r]?n.O(e,t,mr(r)?!!r.capture:!!r,i):Ed(n,e,t,!0,r,i)}function Ad(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)Ad(n,e[s],t,r,i);else r=mr(r)?!!r.capture:!!r,t=aa(t),n&&n[_r]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ta(s=n.g[e],t,r,i))&&(Hi(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=sa(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ta(e,t,r,i)),(t=-1<n?e[n]:null)&&ia(t))}function ia(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[_r])ea(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Sd(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=sa(e))?(ea(t,n),0==t.h&&(t.src=null,e[na]=null)):Hi(n)}}}function Sd(n){return n in ra?ra[n]:ra[n]="on"+n}function _v(n,e){if(n.ba)n=!0;else{e=new gr(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&ia(n),n=t.call(r,e)}return n}function sa(n){return(n=n[na])instanceof $i?n:null}var oa="__closure_events_fn_"+(1e9*Math.random()>>>0);function aa(n){return"function"==typeof n?n:(n[oa]||(n[oa]=function(e){return n.handleEvent(e)}),n[oa])}function ye(){vt.call(this),this.i=new $i(this),this.P=this,this.I=null}function Ee(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ne(e,n);else if(e instanceof Ne)e.target=e.target||n;else{var i=e;bd(e=new Ne(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var a=e.g=t[s];i=Ki(a,r,!0,e)&&i}if(i=Ki(a=e.g=n,r,!0,e)&&i,i=Ki(a,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=Ki(a=e.g=t[s],r,!1,e)&&i}function Ki(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var a=e[s];if(a&&!a.ba&&a.capture==t){var c=a.listener,u=a.ha||a.src;a.ea&&ea(n.i,a),i=!1!==c.call(u,r)&&i}}return i&&!r.defaultPrevented}xe(ye,vt),ye.prototype[_r]=!0,ye.prototype.removeEventListener=function(n,e,t,r){Ad(this,n,e,t,r)},ye.prototype.M=function(){if(ye.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Hi(t[r]);delete n.g[e],n.h--}}this.I=null},ye.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ye.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ca=O.JSON.stringify;function yv(){var n=Dd;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var ua,kd=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Tv,n=>n.reset());class Tv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Iv(n){O.setTimeout(()=>{throw n},0)}function Nd(n,e){ua||function wv(){var n=O.Promise.resolve(void 0);ua=function(){n.then(bv)}}(),la||(ua(),la=!0),Dd.add(n,e)}var la=!1,Dd=new class vv{constructor(){this.h=this.g=null}add(e,t){const r=kd.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function bv(){for(var n;n=yv();){try{n.h.call(n.g)}catch(t){Iv(t)}var e=kd;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}la=!1}function zi(n,e){ye.call(this),this.h=n||1,this.g=e||O,this.j=ke(this.lb,this),this.l=Date.now()}function ha(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function da(n,e,t){if("function"==typeof n)t&&(n=ke(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ke(n.handleEvent,n)}return 2147483647<Number(e)?-1:O.setTimeout(n,e||0)}function Od(n){n.g=da(()=>{n.g=null,n.i&&(n.i=!1,Od(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}xe(zi,ye),(N=zi.prototype).ca=!1,N.R=null,N.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ee(this,"tick"),this.ca&&(ha(this),this.start()))}},N.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},N.M=function(){zi.X.M.call(this),ha(this),delete this.g};class xv extends vt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Od(this)}M(){super.M(),this.g&&(O.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(n){vt.call(this),this.h=n,this.g={}}xe(yr,vt);var Rd=[];function Pd(n,e,t,r){Array.isArray(t)||(t&&(Rd[0]=t.toString()),t=Rd);for(var i=0;i<t.length;i++){var s=xd(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Md(n){Xo(n.g,function(e,t){this.g.hasOwnProperty(t)&&ia(e)},n),n.g={}}function Wi(){this.g=!0}function xn(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Sv(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return ca(t)}catch(c){return e}}(n,t)+(r?" "+r:"")})}yr.prototype.M=function(){yr.X.M.call(this),Md(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wi.prototype.Aa=function(){this.g=!1},Wi.prototype.info=function(){};var $t={},Ld=null;function Qi(){return Ld=Ld||new ye}function Ud(n){Ne.call(this,$t.Pa,n)}function vr(n){const e=Qi();Ee(e,new Ud(e))}function Fd(n,e){Ne.call(this,$t.STAT_EVENT,n),this.stat=e}function De(n){const e=Qi();Ee(e,new Fd(e,n))}function Zd(n,e){Ne.call(this,$t.Qa,n),this.size=e}function Tr(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return O.setTimeout(function(){n()},e)}$t.Pa="serverreachability",xe(Ud,Ne),$t.STAT_EVENT="statevent",xe(Fd,Ne),$t.Qa="timingevent",xe(Zd,Ne);var Ji={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},qd={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function fa(){}function Bd(){}fa.prototype.h=null;var ga,Ir={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function pa(){Ne.call(this,"d")}function ma(){Ne.call(this,"c")}function Yi(){}function wr(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new yr(this),this.O=kv,this.T=new zi(n=zo?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Gd}function Gd(){this.i=null,this.g="",this.h=!1}xe(pa,Ne),xe(ma,Ne),xe(Yi,fa),Yi.prototype.g=function(){return new XMLHttpRequest},Yi.prototype.i=function(){return{}},ga=new Yi;var kv=45e3,_a={},Xi={};function ya(n,e,t){n.K=1,n.v=rs(rt(e)),n.s=t,n.P=!0,jd(n,null)}function jd(n,e){n.F=Date.now(),br(n),n.A=rt(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),ef(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Gd,n.g=Ef(n.l,t?e:null,!n.s),0<n.N&&(n.L=new xv(ke(n.La,n,n.g),n.N)),Pd(n.S,n.g,"readystatechange",n.ib),e=n.H?Id(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),vr(),function Ev(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var a="",c=s.split("&"),u=0;u<c.length;u++){var l=c[u].split("=");if(1<l.length){var h=l[0];l=l[1];var d=h.split("_");a=2<=d.length&&"type"==d[1]?a+(h+"=")+l+"&":a+(h+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+a})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Hd(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function $d(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Nv(n,t),i==Xi){4==e&&(n.o=4,De(14),r=!1),xn(n.j,n.m,null,"[Incomplete Response]");break}if(i==_a){n.o=4,De(15),xn(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}xn(n.j,n.m,i,null),va(n,i)}Hd(n)&&i!=Xi&&i!=_a&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,De(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Aa(e),e.K=!0,De(11))):(xn(n.j,n.m,t,"[Invalid Chunked Response]"),Kt(n),xr(n))}function Nv(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Xi:(t=Number(e.substring(t,r)),isNaN(t)?_a:(r+=1)+t>e.length?Xi:(e=e.substr(r,t),n.C=r+t,e))}function br(n){n.V=Date.now()+n.O,Kd(n,n.O)}function Kd(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Tr(ke(n.gb,n),e)}function es(n){n.B&&(O.clearTimeout(n.B),n.B=null)}function xr(n){0==n.l.G||n.I||If(n.l,n)}function Kt(n){es(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ha(n.T),Md(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function va(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Ta(t.h,n)))if(!n.J&&Ta(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;us(t),as(t)}Ca(t),De(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Tr(ke(t.cb,t),6e3));if(1>=rf(t.h)&&t.ja){try{t.ja()}catch(l){}t.ja=void 0}}else Wt(t,11)}else if((n.J||t.g==n)&&us(t),!Bi(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(t.T=l[0],l=l[1],2==t.G)if("c"==l[0]){t.I=l[1],t.ka=l[2];const h=l[3];null!=h&&(t.ma=h,t.j.info("VER="+t.ma));const d=l[4];null!=d&&(t.Ca=d,t.j.info("SVER="+t.Ca));const p=l[5];null!=p&&"number"==typeof p&&0<p&&(t.J=r=1.5*p,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const _=n.g;if(_){const v=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var s=r.h;s.g||-1==v.indexOf("spdy")&&-1==v.indexOf("quic")&&-1==v.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ia(s,s.h),s.h=null))}if(r.D){const E=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.za=E,Y(r.F,r.D,E))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var a=n;if((r=t).sa=xf(r,r.H?r.ka:null,r.V),a.J){sf(r.h,a);var c=a,u=r.J;u&&c.setTimeout(u),c.B&&(es(c),br(c)),r.g=a}else vf(r);0<t.i.length&&cs(t)}else"stop"!=l[0]&&"close"!=l[0]||Wt(t,7);else 3==t.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Wt(t,7):Ea(t):"noop"!=l[0]&&t.l&&t.l.wa(l),t.A=0)}vr()}catch(l){}}function zd(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(qi(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Ov(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(qi(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Dv(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(qi(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(N=wr.prototype).setTimeout=function(n){this.O=n},N.ib=function(n){n=n.target;const e=this.L;e&&3==it(n)?e.l():this.La(n)},N.La=function(n){try{if(n==this.g)e:{const h=it(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>h)&&(3!=h||zo||this.g&&(this.h.h||this.g.fa()||ff(this.g)))){this.I||4!=h||7==e||vr(),es(this);var t=this.g.aa();this.Y=t;t:if(Hd(this)){var r=ff(this.g);n="";var i=r.length,s=4==it(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Kt(this),xr(this);var a="";break t}this.h.i=new O.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,a=this.h.g}else a=this.g.fa();if(this.i=200==t,function Cv(n,e,t,r,i,s,a){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+a})}(this.j,this.u,this.A,this.m,this.U,h,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var c,u=this.g;if((c=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bi(c)){var l=c;break t}}l=null}if(!(t=l)){this.i=!1,this.o=3,De(12),Kt(this),xr(this);break e}xn(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,va(this,t)}this.P?($d(this,h,a),zo&&this.i&&3==h&&(Pd(this.S,this.T,"tick",this.hb),this.T.start())):(xn(this.j,this.m,a,null),va(this,a)),4==h&&Kt(this),this.i&&!this.I&&(4==h?If(this.l,this):(this.i=!1,br(this)))}else 400==t&&0<a.indexOf("Unknown SID")?(this.o=3,De(12)):(this.o=0,De(13)),Kt(this),xr(this)}}}catch(h){}},N.hb=function(){if(this.g){var n=it(this.g),e=this.g.fa();this.C<e.length&&(es(this),$d(this,n,e),this.i&&4!=n&&br(this))}},N.cancel=function(){this.I=!0,Kt(this)},N.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Av(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(vr(),De(17)),Kt(this),this.o=2,xr(this)):Kd(this,this.V-n)};var Wd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zt(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof zt){this.h=void 0!==e?e:n.h,ts(this,n.j),this.s=n.s,this.g=n.g,ns(this,n.m),this.l=n.l,e=n.i;var t=new Ar;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Qd(this,t),this.o=n.o}else n&&(t=String(n).match(Wd))?(this.h=!!e,ts(this,t[1]||"",!0),this.s=Er(t[2]||""),this.g=Er(t[3]||"",!0),ns(this,t[4]),this.l=Er(t[5]||"",!0),Qd(this,t[6]||"",!0),this.o=Er(t[7]||"")):(this.h=!!e,this.i=new Ar(null,this.h))}function rt(n){return new zt(n)}function ts(n,e,t){n.j=t?Er(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ns(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Qd(n,e,t){e instanceof Ar?(n.i=e,function Zv(n,e){e&&!n.j&&(Tt(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Yd(this,r),ef(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Cr(e,Uv)),n.i=new Ar(e,n.h))}function Y(n,e,t){n.i.set(e,t)}function rs(n){return Y(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Er(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Cr(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Pv),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Pv(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}zt.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Cr(e,Jd,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Cr(e,Jd,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Cr(t,"/"==t.charAt(0)?Lv:Mv,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Cr(t,Fv)),n.join("")};var Jd=/[#\/\?@]/g,Mv=/[#\?:]/g,Lv=/[#\?]/g,Uv=/[#\?@]/g,Fv=/#/g;function Ar(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Tt(n){n.g||(n.g=new Map,n.h=0,n.i&&function Rv(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Yd(n,e){Tt(n),e=En(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Xd(n,e){return Tt(n),e=En(n,e),n.g.has(e)}function ef(n,e,t){Yd(n,e),0<t.length&&(n.i=null,n.g.set(En(n,e),Ho(t)),n.h+=t.length)}function En(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function tf(n){this.l=n||Vv,n=O.PerformanceNavigationTiming?0<(n=O.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(O.g&&O.g.Ga&&O.g.Ga()&&O.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(N=Ar.prototype).add=function(n,e){Tt(this),this.i=null,n=En(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},N.forEach=function(n,e){Tt(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},N.oa=function(){Tt(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},N.W=function(n){Tt(this);let e=[];if("string"==typeof n)Xd(this,n)&&(e=e.concat(this.g.get(En(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},N.set=function(n,e){return Tt(this),this.i=null,Xd(this,n=En(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},N.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},N.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),n.push(i)}}return this.i=n.join("&")};var Vv=10;function nf(n){return!!n.h||!!n.g&&n.g.size>=n.j}function rf(n){return n.h?1:n.g?n.g.size:0}function Ta(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ia(n,e){n.g?n.g.add(e):n.h=e}function sf(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function of(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ho(n.i)}function wa(){}function Bv(){this.g=new wa}function Gv(n,e,t){const r=t||"";try{zd(n,function(i,s){let a=i;mr(i)&&(a=ca(i)),e.push(r+s+"="+encodeURIComponent(a))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function is(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function Sr(n){this.l=n.ac||null,this.j=n.jb||!1}function ss(n,e){ye.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=ba,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tf.prototype.cancel=function(){if(this.i=of(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},wa.prototype.stringify=function(n){return O.JSON.stringify(n,void 0)},wa.prototype.parse=function(n){return O.JSON.parse(n,void 0)},xe(Sr,fa),Sr.prototype.g=function(){return new ss(this.l,this.j)},Sr.prototype.i=function(n){return function(){return n}}({}),xe(ss,ye);var ba=0;function af(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function kr(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Nr(n)}function Nr(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(N=ss.prototype).open=function(n,e){if(this.readyState!=ba)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Nr(this)},N.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||O).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},N.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kr(this)),this.readyState=ba},N.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==O.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;af(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},N.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?kr(this):Nr(this),3==this.readyState&&af(this)}},N.Va=function(n){this.g&&(this.response=this.responseText=n,kr(this))},N.Ua=function(n){this.g&&(this.response=n,kr(this))},N.ga=function(){this.g&&kr(this)},N.setRequestHeader=function(n,e){this.v.append(n,e)},N.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},N.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ss.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Hv=O.JSON.parse;function te(n){ye.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=cf,this.K=this.L=!1}xe(te,ye);var cf="",$v=/^https?$/i,Kv=["POST","PUT"];function uf(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,lf(n),os(n)}function lf(n){n.D||(n.D=!0,Ee(n,"complete"),Ee(n,"error"))}function hf(n){if(n.h&&void 0!==Go&&(!n.C[1]||4!=it(n)||2!=n.aa()))if(n.v&&4==it(n))da(n.Ha,0,n);else if(Ee(n,"readystatechange"),4==it(n)){n.h=!1;try{const c=n.aa();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.H).match(Wd)[1]||null;if(!i&&O.self&&O.self.location){var s=O.self.location.protocol;i=s.substr(0,s.length-1)}r=!$v.test(i?i.toLowerCase():"")}t=r}if(t)Ee(n,"complete"),Ee(n,"success");else{n.m=6;try{var a=2<it(n)?n.g.statusText:""}catch(u){a=""}n.j=a+" ["+n.aa()+"]",lf(n)}}finally{os(n)}}}function os(n,e){if(n.g){df(n);const t=n.g,r=n.C[0]?Zi:null;n.g=null,n.C=null,e||Ee(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function df(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(O.clearTimeout(n.A),n.A=null)}function it(n){return n.g?n.g.readyState:0}function ff(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case cf:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function pf(n){let e="";return Xo(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function xa(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=pf(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Y(n,e,t))}function Dr(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function mf(n){this.Ca=0,this.i=[],this.j=new Wi,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Dr("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Dr("baseRetryDelayMs",5e3,n),this.bb=Dr("retryDelaySeedMs",1e4,n),this.$a=Dr("forwardChannelMaxRetries",2,n),this.ta=Dr("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new tf(n&&n.concurrentRequestLimit),this.Fa=new Bv,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Ea(n){if(gf(n),3==n.G){var e=n.U++,t=rt(n.F);Y(t,"SID",n.I),Y(t,"RID",e),Y(t,"TYPE","terminate"),Or(n,t),(e=new wr(n,n.j,e,void 0)).K=2,e.v=rs(rt(t)),t=!1,O.navigator&&O.navigator.sendBeacon&&(t=O.navigator.sendBeacon(e.v.toString(),"")),!t&&O.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ef(e.l,null),e.g.da(e.v)),e.F=Date.now(),br(e)}bf(n)}function as(n){n.g&&(Aa(n),n.g.cancel(),n.g=null)}function gf(n){as(n),n.u&&(O.clearTimeout(n.u),n.u=null),us(n),n.h.cancel(),n.m&&("number"==typeof n.m&&O.clearTimeout(n.m),n.m=null)}function cs(n){nf(n.h)||n.m||(n.m=!0,Nd(n.Ja,n),n.C=0)}function _f(n,e){var t;t=e?e.m:n.U++;const r=rt(n.F);Y(r,"SID",n.I),Y(r,"RID",t),Y(r,"AID",n.T),Or(n,r),n.o&&n.s&&xa(r,n.o,n.s),t=new wr(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=yf(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Ia(n.h,t),ya(t,r,e)}function Or(n,e){n.ia&&Xo(n.ia,function(t,r){Y(e,r,t)}),n.l&&zd({},function(t,r){Y(e,r,t)})}function yf(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ke(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const a=["count="+t];-1==s?0<t?(s=i[0].h,a.push("ofs="+s)):s=0:a.push("ofs="+s);let c=!0;for(let u=0;u<t;u++){let l=i[u].h;const h=i[u].g;if(l-=s,0>l)s=Math.max(0,i[u].h-100),c=!1;else try{Gv(h,a,"req"+l+"_")}catch(d){r&&r(h)}}if(c){r=a.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function vf(n){n.g||n.u||(n.Z=1,Nd(n.Ia,n),n.A=0)}function Ca(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Tr(ke(n.Ia,n),wf(n,n.A)),n.A++,0))}function Aa(n){null!=n.B&&(O.clearTimeout(n.B),n.B=null)}function Tf(n){n.g=new wr(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=rt(n.sa);Y(e,"RID","rpc"),Y(e,"SID",n.I),Y(e,"CI",n.L?"0":"1"),Y(e,"AID",n.T),Y(e,"TYPE","xmlhttp"),Or(n,e),n.o&&n.s&&xa(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=rs(rt(e)),t.s=null,t.P=!0,jd(t,n)}function us(n){null!=n.v&&(O.clearTimeout(n.v),n.v=null)}function If(n,e){var t=null;if(n.g==e){us(n),Aa(n),n.g=null;var r=2}else{if(!Ta(n.h,e))return;t=e.D,sf(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ee(r=Qi(),new Zd(r,t)),cs(n)}else vf(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function Wv(n,e){return!(rf(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Tr(ke(n.Ja,n,e),wf(n,n.C)),n.C++,0)))}(n,e)||2==r&&Ca(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Wt(n,5);break;case 4:Wt(n,10);break;case 3:Wt(n,6);break;default:Wt(n,2)}}function wf(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Wt(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ke(n.kb,n);t||(t=new zt("//www.google.com/images/cleardot.gif"),O.location&&"http"==O.location.protocol||ts(t,"https"),rs(t)),function jv(n,e){const t=new Wi;if(O.Image){const r=new Image;r.onload=Vi(is,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Vi(is,t,r,"TestLoadImage: error",!1,e),r.onabort=Vi(is,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Vi(is,t,r,"TestLoadImage: timeout",!1,e),O.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else De(2);n.G=0,n.l&&n.l.va(e),bf(n),gf(n)}function bf(n){if(n.G=0,n.la=[],n.l){const e=of(n.h);(0!=e.length||0!=n.i.length)&&(md(n.la,e),md(n.la,n.i),n.h.i.length=0,Ho(n.i),n.i.length=0),n.l.ua()}}function xf(n,e,t){var r=t instanceof zt?rt(t):new zt(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),ns(r,r.m);else{var i=O.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new zt(null,void 0);r&&ts(s,r),e&&(s.g=e),i&&ns(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&Y(r,t,e),Y(r,"VER",n.ma),Or(n,r),r}function Ef(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new te(t&&n.Da&&!n.ra?new Sr({jb:!0}):n.ra)).Ka(n.H),e}function Cf(){}function ls(){if(bn&&!(10<=Number(dv)))throw Error("Environmental error: no available transport.")}function Ze(n,e){ye.call(this),this.g=new mf(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Bi(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Bi(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Cn(this)}function Af(n){pa.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Sf(){ma.call(this),this.status=1}function Cn(n){this.g=n}(N=te.prototype).Ka=function(n){this.L=n},N.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ga.g(),this.C=function Vd(n){return n.h||(n.h=n.i())}(this.u?this.u:ga),this.g.onreadystatechange=ke(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void uf(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=O.FormData&&n instanceof O.FormData,!(0<=pd(Kv,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of t)this.g.setRequestHeader(s,a);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{df(this),0<this.B&&((this.K=function zv(n){return bn&&function hv(){return function av(n){var e=lv;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=gd(String(ji)).split("."),t=gd("9").split("."),r=Math.max(e.length,t.length);for(let a=0;0==n&&a<r;a++){var i=e[a]||"",s=t[a]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=$o(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||$o(0==i[2].length,0==s[2].length)||$o(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ke(this.qa,this)):this.A=da(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){uf(this,s)}},N.qa=function(){void 0!==Go&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ee(this,"timeout"),this.abort(8))},N.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ee(this,"complete"),Ee(this,"abort"),os(this))},N.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),os(this,!0)),te.X.M.call(this)},N.Ha=function(){this.s||(this.F||this.v||this.l?hf(this):this.fb())},N.fb=function(){hf(this)},N.aa=function(){try{return 2<it(this)?this.g.status:-1}catch(n){return-1}},N.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},N.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Hv(e)}},N.Ea=function(){return this.m},N.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(N=mf.prototype).ma=8,N.G=1,N.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new wr(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=Id(s),bd(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=yf(this,i,e),Y(t=rt(this.F),"RID",n),Y(t,"CVER",22),this.D&&Y(t,"X-HTTP-Session-Id",this.D),Or(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(pf(s)))+"&"+e:this.o&&xa(t,this.o,s)),Ia(this.h,i),this.Ya&&Y(t,"TYPE","init"),this.O?(Y(t,"$req",e),Y(t,"SID","null"),i.Z=!0,ya(i,t,null)):ya(i,t,e),this.G=2}}else 3==this.G&&(n?_f(this,n):0==this.i.length||nf(this.h)||_f(this))},N.Ia=function(){if(this.u=null,Tf(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Tr(ke(this.eb,this),n)}},N.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,De(10),as(this),Tf(this))},N.cb=function(){null!=this.v&&(this.v=null,as(this),Ca(this),De(19))},N.kb=function(n){n?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))},(N=Cf.prototype).xa=function(){},N.wa=function(){},N.va=function(){},N.ua=function(){},N.Ra=function(){},ls.prototype.g=function(n,e){return new Ze(n,e)},xe(Ze,ye),Ze.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;De(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=xf(n,null,n.V),cs(n)},Ze.prototype.close=function(){Ea(this.g)},Ze.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=ca(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&cs(e)},Ze.prototype.M=function(){this.g.l=null,delete this.j,Ea(this.g),delete this.g,Ze.X.M.call(this)},xe(Af,pa),xe(Sf,ma),xe(Cn,Cf),Cn.prototype.xa=function(){Ee(this.g,"a")},Cn.prototype.wa=function(n){Ee(this.g,new Af(n))},Cn.prototype.va=function(n){Ee(this.g,new Sf)},Cn.prototype.ua=function(){Ee(this.g,"b")},ls.prototype.createWebChannel=ls.prototype.g,Ze.prototype.send=Ze.prototype.u,Ze.prototype.open=Ze.prototype.m,Ze.prototype.close=Ze.prototype.close,Ji.NO_ERROR=0,Ji.TIMEOUT=8,Ji.HTTP_ERROR=6,qd.COMPLETE="complete",Bd.EventType=Ir,Ir.OPEN="a",Ir.CLOSE="b",Ir.ERROR="c",Ir.MESSAGE="d",ye.prototype.listen=ye.prototype.N,te.prototype.listenOnce=te.prototype.O,te.prototype.getLastError=te.prototype.Oa,te.prototype.getLastErrorCode=te.prototype.Ea,te.prototype.getStatus=te.prototype.aa,te.prototype.getResponseJson=te.prototype.Sa,te.prototype.getResponseText=te.prototype.fa,te.prototype.send=te.prototype.da,te.prototype.setWithCredentials=te.prototype.Ka;var Qv=nt.createWebChannelTransport=function(){return new ls},Jv=nt.getStatEventTarget=function(){return Qi()},Sa=nt.ErrorCode=Ji,Yv=nt.EventType=qd,Xv=nt.Event=$t,kf=nt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},eT=nt.FetchXmlHttpFactory=Sr,hs=nt.WebChannel=Bd,tT=nt.XhrIo=te;const Nf="@firebase/firestore";class ve{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ve.UNAUTHENTICATED=new ve(null),ve.GOOGLE_CREDENTIALS=new ve("google-credentials-uid"),ve.FIRST_PARTY=new ve("first-party-uid"),ve.MOCK_USER=new ve("mock-user");let An="9.17.1";const It=new Do("@firebase/firestore");function ka(){return It.logLevel}function I(n,...e){if(It.logLevel<=Z.DEBUG){const t=e.map(Na);It.debug(`Firestore (${An}): ${n}`,...t)}}function se(n,...e){if(It.logLevel<=Z.ERROR){const t=e.map(Na);It.error(`Firestore (${An}): ${n}`,...t)}}function Sn(n,...e){if(It.logLevel<=Z.WARN){const t=e.map(Na);It.warn(`Firestore (${An}): ${n}`,...t)}}function Na(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function A(n="Unexpected state"){const e=`FIRESTORE (${An}) INTERNAL ASSERTION FAILED: `+n;throw se(e),new Error(e)}function k(n,e){n||A()}function x(n,e){return n}const g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends et{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pe{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Df{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ve.UNAUTHENTICATED))}shutdown(){}}class rT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class iT{constructor(e){this.t=e,this.currentUser=ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let a=new pe;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new pe,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const l=a;e.enqueueRetryable((0,f.Z)(function*(){yield l.promise,yield s(r.currentUser)}))},u=l=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new pe)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(k("string"==typeof r.accessToken),new Df(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return k(null===e||"string"==typeof e),new ve(e)}}class sT{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=ve.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(k(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class oT{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new sT(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Of{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aT{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&I("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.A;return this.A=s.token,I("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(k("string"==typeof t.token),this.A=t.token,new Of(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cT(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Rf{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=cT(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function R(n,e){return n<e?-1:n>e?1:0}function kn(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Pf(n){return n+"\0"}class ee{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new T(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new T(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new T(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ee.fromMillis(Date.now())}static fromDate(e){return ee.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ee(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?R(this.nanoseconds,e.nanoseconds):R(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class D{constructor(e){this.timestamp=e}static fromTimestamp(e){return new D(e)}static min(){return new D(new ee(0,0))}static max(){return new D(new ee(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Rr{constructor(e,t,r){void 0===t?t=0:t>e.length&&A(),void 0===r?r=e.length-t:r>e.length-t&&A(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Rr.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class q extends Rr{construct(e,t,r){return new q(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new T(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new q(t)}static emptyPath(){return new q([])}}const uT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oe extends Rr{construct(e,t,r){return new oe(e,t,r)}static isValidIdentifier(e){return uT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new oe(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new T(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if("\\"===c){if(i+1===e.length)throw new T(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new T(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===c?(a=!a,i++):"."!==c||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new T(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new oe(t)}static emptyPath(){return new oe([])}}class b{constructor(e){this.path=e}static fromPath(e){return new b(q.fromString(e))}static fromName(e){return new b(q.fromString(e).popFirst(5))}static empty(){return new b(q.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===q.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return q.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new b(new q(e.slice()))}}class ds{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Da(n){return n.fields.find(e=>2===e.kind)}function Qt(n){return n.fields.filter(e=>2!==e.kind)}ds.UNKNOWN_ID=-1;class fs{constructor(e,t){this.fieldPath=e,this.kind=t}}class Pr{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pr(0,qe.min())}}function Lf(n){return new qe(n.readTime,n.key,-1)}class qe{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new qe(D.min(),b.empty(),-1)}static max(){return new qe(D.max(),b.empty(),-1)}}function Oa(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=b.comparator(n.documentKey,e.documentKey),0!==t?t:R(n.largestBatchId,e.largestBatchId))}const Uf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ff{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function wt(n){return Ra.apply(this,arguments)}function Ra(){return Ra=(0,f.Z)(function*(n){if(n.code!==g.FAILED_PRECONDITION||n.message!==Uf)throw n;I("LocalStore","Unexpectedly lost primary lease")}),Ra.apply(this,arguments)}class m{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&A(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new m((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof m?t:m.resolve(t)}catch(t){return m.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):m.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):m.reject(t)}static resolve(e){return new m((t,r)=>{t(e)})}static reject(e){return new m((t,r)=>{r(e)})}static waitFor(e){return new m((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},u=>r(u))}),a=!0,s===i&&t()})}static or(e){let t=m.resolve(!1);for(const r of e)t=t.next(i=>i?m.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new m((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let u=0;u<s;u++){const l=u;t(e[l]).next(h=>{a[l]=h,++c,c===s&&r(a)},h=>i(h))}})}static doWhile(e,t){return new m((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class ps{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new pe,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Mr(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Pa(r.target.error);this.P.reject(new Mr(e,i))}}static open(e,t,r,i){try{return new ps(t,e.transaction(i,r))}catch(s){throw new Mr(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(I("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new fT(t)}}class He{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===He.D(ie())&&se("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return I("SimpleDb","Removing database:",e),Jt(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Jh())return!1;if(He.N())return!0;const e=ie(),t=He.D(e),r=0<t&&t<10,i=He.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,f.Z)(function*(){return t.db||(I("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=a=>{r(a.target.result)},s.onblocked=()=>{i(new Mr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const c=a.target.error;i("VersionError"===c.name?new T(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===c.name?new T(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c):new Mr(e,c))},s.onupgradeneeded=a=>{I("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',a.oldVersion),t.S.$(a.target.result,s.transaction,a.oldVersion,t.version).next(()=>{I("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,f.Z)(function*(){const a="readonly"===t;let c=0;for(;;){++c;try{s.db=yield s.F(e);const u=ps.open(s.db,e,a?"readonly":"readwrite",r),l=i(u).next(h=>(u.V(),h)).catch(h=>(u.abort(h),m.reject(h))).toPromise();return l.catch(()=>{}),yield u.v,l}catch(u){const l=u,h="FirebaseError"!==l.name&&c<3;if(I("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),s.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class dT{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Jt(this.q.delete())}}class Mr extends T{constructor(e,t){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bt(n){return"IndexedDbTransactionError"===n.name}class fT{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(I("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(I("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Jt(r)}add(e){return I("SimpleDb","ADD",this.store.name,e,e),Jt(this.store.add(e))}get(e){return Jt(this.store.get(e)).next(t=>(void 0===t&&(t=null),I("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return I("SimpleDb","DELETE",this.store.name,e),Jt(this.store.delete(e))}count(){return I("SimpleDb","COUNT",this.store.name),Jt(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(a,c)=>{s.push(c)}).next(()=>s)}{const i=this.store.getAll(r.range);return new m((s,a)=>{i.onerror=c=>{a(c.target.error)},i.onsuccess=c=>{s(c.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new m((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}Y(e,t){I("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,a,c)=>c.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new m((r,i)=>{t.onerror=s=>{const a=Pa(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():r()}):r()}})}H(e,t){const r=[];return new m((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const c=a.target.result;if(!c)return void i();const u=new dT(c),l=t(c.primaryKey,c.value,u);if(l instanceof m){const h=l.catch(d=>(u.done(),m.reject(d)));r.push(h)}u.isDone?i():null===u.G?c.continue():c.continue(u.G)}}).next(()=>m.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Jt(n){return new m((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Pa(r.target.error);t(i)}})}let Zf=!1;function Pa(n){const e=He.D(ie());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new T("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zf||(Zf=!0,setTimeout(()=>{throw r},0)),r}}return n}class pT{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;I("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,f.Z)(function*(){t.task=null;try{I("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){bt(r)?I("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield wt(r)}yield t.nt(6e4)}))}}class mT{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,f.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return m.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(null!==a&&!r.has(a))return I("IndexBackiller",`Processing collection: ${a}`),this.rt(e,a,i).next(c=>{i-=c,r.add(a)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.ot(i,s)).next(c=>(I("IndexBackiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c))).next(()=>a.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const a=Lf(s);Oa(a,r)>0&&(r=a)}),new qe(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ve=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class gT{constructor(e,t,r,i,s,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.useFetchStreams=u}}class Yt{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yt("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yt&&e.projectId===this.projectId&&e.database===this.database}}function qf(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xt(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Vf(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Lr(n){return null==n}function Ur(n){return 0===n&&1/n==-1/0}class me{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new me(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new me(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return R(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}me.EMPTY_BYTE_STRING=new me("");const _T=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xt(n){if(k(!!n),"string"==typeof n){let e=0;const t=_T.exec(n);if(k(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ne(n.seconds),nanos:ne(n.nanos)}}function ne(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function en(n){return"string"==typeof n?me.fromBase64String(n):me.fromUint8Array(n)}function Ma(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Gf(n){const e=n.mapValue.fields.__previous_value__;return Ma(e)?Gf(e):e}function Fr(n){const e=xt(n.mapValue.fields.__local_write_time__.timestampValue);return new ee(e.seconds,e.nanos)}const Et={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ms={nullValue:"NULL_VALUE"};function tn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ma(n)?4:Kf(n)?9007199254740991:10:A()}function Ke(n,e){if(n===e)return!0;const t=tn(n);if(t!==tn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fr(n).isEqual(Fr(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=xt(r.timestampValue),a=xt(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,en(n.bytesValue).isEqual(en(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ne(r.geoPointValue.latitude)===ne(i.geoPointValue.latitude)&&ne(r.geoPointValue.longitude)===ne(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ne(r.integerValue)===ne(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=ne(r.doubleValue),a=ne(i.doubleValue);return s===a?Ur(s)===Ur(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return kn(n.arrayValue.values||[],e.arrayValue.values||[],Ke);case 10:return function(r,i){const s=r.mapValue.fields||{},a=i.mapValue.fields||{};if(qf(s)!==qf(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!Ke(s[c],a[c])))return!1;return!0}(n,e);default:return A()}var i}function Zr(n,e){return void 0!==(n.values||[]).find(t=>Ke(t,e))}function Ct(n,e){if(n===e)return 0;const t=tn(n),r=tn(e);if(t!==r)return R(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return R(n.booleanValue,e.booleanValue);case 2:return function(i,s){const a=ne(i.integerValue||i.doubleValue),c=ne(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return jf(n.timestampValue,e.timestampValue);case 4:return jf(Fr(n),Fr(e));case 5:return R(n.stringValue,e.stringValue);case 6:return function(i,s){const a=en(i),c=en(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const a=i.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){const l=R(a[u],c[u]);if(0!==l)return l}return R(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const a=R(ne(i.latitude),ne(s.latitude));return 0!==a?a:R(ne(i.longitude),ne(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const a=i.values||[],c=s.values||[];for(let u=0;u<a.length&&u<c.length;++u){const l=Ct(a[u],c[u]);if(l)return l}return R(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Et.mapValue&&s===Et.mapValue)return 0;if(i===Et.mapValue)return 1;if(s===Et.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=s.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let h=0;h<c.length&&h<l.length;++h){const d=R(c[h],l[h]);if(0!==d)return d;const p=Ct(a[c[h]],u[l[h]]);if(0!==p)return p}return R(c.length,l.length)}(n.mapValue,e.mapValue);default:throw A()}}function jf(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return R(n,e);const t=xt(n),r=xt(e),i=R(t.seconds,r.seconds);return 0!==i?i:R(t.nanos,r.nanos)}function Nn(n){return La(n)}function La(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=xt(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?en(n.bytesValue).toBase64():"referenceValue"in n?b.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const a of r.values||[])s?s=!1:i+=",",i+=La(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const c of i)a?a=!1:s+=",",s+=`${c}:${La(r.fields[c])}`;return s+"}"}(n.mapValue):A();var e}function nn(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ua(n){return!!n&&"integerValue"in n}function qr(n){return!!n&&"arrayValue"in n}function Hf(n){return!!n&&"nullValue"in n}function $f(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gs(n){return!!n&&"mapValue"in n}function Vr(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xt(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vr(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vr(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Kf(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function yT(n){return"nullValue"in n?ms:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?nn(Yt.empty(),b.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:A()}function vT(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?nn(Yt.empty(),b.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Et:A()}function zf(n,e){const t=Ct(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Wf(n,e){const t=Ct(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class At{constructor(e,t){this.position=e,this.inclusive=t}}function Qf(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(r=s.field.isKeyField()?b.comparator(b.fromName(a.referenceValue),t.key):Ct(a,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Jf(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ke(n.position[t],e.position[t]))return!1;return!0}class Yf{}class U extends Yf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new TT(e,t,r):"array-contains"===t?new bT(e,r):"in"===t?new ip(e,r):"not-in"===t?new xT(e,r):"array-contains-any"===t?new ET(e,r):new U(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new IT(e,r):new wT(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ct(t,this.value)):null!==t&&tn(this.value)===tn(t)&&this.matchesComparison(Ct(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return A()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class H extends Yf{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new H(e,t)}matches(e){return Dn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Dn(n){return"and"===n.op}function Fa(n){return"or"===n.op}function Za(n){return Xf(n)&&Dn(n)}function Xf(n){for(const e of n.filters)if(e instanceof H)return!1;return!0}function qa(n){if(n instanceof U)return n.field.canonicalString()+n.op.toString()+Nn(n.value);if(Za(n))return n.filters.map(e=>qa(e)).join(",");{const e=n.filters.map(t=>qa(t)).join(",");return`${n.op}(${e})`}}function ep(n,e){return n instanceof U?(t=n,(r=e)instanceof U&&t.op===r.op&&t.field.isEqual(r.field)&&Ke(t.value,r.value)):n instanceof H?function(t,r){return r instanceof H&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,a)=>i&&ep(s,r.filters[a]),!0)}(n,e):void A();var t,r}function tp(n,e){const t=n.filters.concat(e);return H.create(t,n.op)}function np(n){return n instanceof U?`${(e=n).field.canonicalString()} ${e.op} ${Nn(e.value)}`:n instanceof H?function(e){return e.op.toString()+" {"+e.getFilters().map(np).join(" ,")+"}"}(n):"Filter";var e}class TT extends U{constructor(e,t,r){super(e,t,r),this.key=b.fromName(r.referenceValue)}matches(e){const t=b.comparator(e.key,this.key);return this.matchesComparison(t)}}class IT extends U{constructor(e,t){super(e,"in",t),this.keys=rp(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wT extends U{constructor(e,t){super(e,"not-in",t),this.keys=rp(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rp(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>b.fromName(r.referenceValue))}class bT extends U{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qr(t)&&Zr(t.arrayValue,this.value)}}class ip extends U{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zr(this.value.arrayValue,t)}}class xT extends U{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zr(this.value.arrayValue,t)}}class ET extends U{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qr(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zr(this.value.arrayValue,r))}}class On{constructor(e,t="asc"){this.field=e,this.dir=t}}function CT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class re{constructor(e,t){this.comparator=e,this.root=t||Ce.EMPTY}insert(e,t){return new re(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ce.BLACK,null,null))}remove(e){return new re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ce.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _s(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _s(this.root,e,this.comparator,!1)}getReverseIterator(){return new _s(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _s(this.root,e,this.comparator,!0)}}class _s{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ce{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:Ce.RED,this.left=null!=i?i:Ce.EMPTY,this.right=null!=s?s:Ce.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Ce(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ce.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ce.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ce.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ce.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw A();const e=this.left.check();if(e!==this.right.check())throw A();return e+(this.isRed()?0:1)}}Ce.EMPTY=null,Ce.RED=!0,Ce.BLACK=!1,Ce.EMPTY=new class{constructor(){this.size=0}get key(){throw A()}get value(){throw A()}get color(){throw A()}get left(){throw A()}get right(){throw A()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ce(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class K{constructor(e){this.comparator=e,this.data=new re(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sp(this.data.getIterator())}getIteratorFrom(e){return new sp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof K)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new K(this.comparator);return t.data=e,t}}class sp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Rn(n){return n.hasNext()?n.getNext():void 0}class Pe{constructor(e){this.fields=e,e.sort(oe.comparator)}static empty(){return new Pe([])}unionWith(e){let t=new K(oe.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Pe(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kn(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ae{constructor(e){this.value=e}static empty(){return new Ae({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vr(t)}setAll(e){let t=oe.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=Vr(a):i.push(c.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());gs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ke(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gs(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Xt(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ae(Vr(this.value))}}function op(n){const e=[];return Xt(n.fields,(t,r)=>{const i=new oe([t]);if(gs(r)){const s=op(r.mapValue).fields;if(0===s.length)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Pe(e)}class Q{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Q(e,0,D.min(),D.min(),D.min(),Ae.empty(),0)}static newFoundDocument(e,t,r,i){return new Q(e,1,t,D.min(),r,i,0)}static newNoDocument(e,t){return new Q(e,2,t,D.min(),D.min(),Ae.empty(),0)}static newUnknownDocument(e,t){return new Q(e,3,t,D.min(),D.min(),Ae.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(D.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ae.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ae.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=D.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Q&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Q(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class AT{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ft=null}}function Va(n,e=null,t=[],r=[],i=null,s=null,a=null){return new AT(n,e,t,r,i,s,a)}function rn(n){const e=x(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>qa(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Lr(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Nn(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Nn(r)).join(",")),e.ft=t}return e.ft}function Br(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!CT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ep(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Jf(n.startAt,e.startAt)&&Jf(n.endAt,e.endAt)}function ys(n){return b.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function vs(n,e){return n.filters.filter(t=>t instanceof U&&t.field.isEqual(e))}function ap(n,e,t){let r=ms,i=!0;for(const s of vs(n,e)){let a=ms,c=!0;switch(s.op){case"<":case"<=":a=yT(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,c=!1;break;case"!=":case"not-in":a=ms}zf({value:r,inclusive:i},{value:a,inclusive:c})<0&&(r=a,i=c)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];zf({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}return{value:r,inclusive:i}}function cp(n,e,t){let r=Et,i=!0;for(const s of vs(n,e)){let a=Et,c=!0;switch(s.op){case">=":case">":a=vT(s.value),c=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,c=!1;break;case"!=":case"not-in":a=Et}Wf({value:r,inclusive:i},{value:a,inclusive:c})>0&&(r=a,i=c)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];Wf({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}return{value:r,inclusive:i}}class st{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=u,this.dt=null,this._t=null}}function Pn(n){return new st(n)}function lp(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Ba(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Ts(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Ga(n){return null!==n.collectionGroup}function sn(n){const e=x(n);if(null===e.dt){e.dt=[];const t=Ts(e),r=Ba(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new On(t)),e.dt.push(new On(oe.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new On(oe.keyField(),s))}}}return e.dt}function Oe(n){const e=x(n);if(!e._t)if("F"===e.limitType)e._t=Va(e.path,e.collectionGroup,sn(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of sn(e))t.push(new On(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new At(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new At(e.startAt.position,e.startAt.inclusive):null;e._t=Va(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function ja(n,e){e.getFirstInequalityField(),Ts(n);const t=n.filters.concat([e]);return new st(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Is(n,e,t){return new st(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gr(n,e){return Br(Oe(n),Oe(e))&&n.limitType===e.limitType}function hp(n){return`${rn(Oe(n))}|lt:${n.limitType}`}function Ha(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>np(r)).join(", ")}]`),Lr(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Nn(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Nn(r)).join(",")),`Target(${t})`}(Oe(n))}; limitType=${n.limitType})`}function jr(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):b.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of sn(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,a){const c=Qf(i,s,a);return i.inclusive?c<=0:c<0}(t.startAt,sn(t),r)||t.endAt&&!function(i,s,a){const c=Qf(i,s,a);return i.inclusive?c>=0:c>0}(t.endAt,sn(t),r)));var t,r}function fp(n){return(e,t)=>{let r=!1;for(const i of sn(n)){const s=ST(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function ST(n,e,t){const r=n.field.isKeyField()?b.comparator(e.key,t.key):function(i,s,a){const c=s.data.field(i),u=a.data.field(i);return null!==c&&null!==u?Ct(c,u):A()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return A()}}function pp(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ur(e)?"-0":e}}function mp(n){return{integerValue:""+n}}function gp(n,e){return function Bf(n){return"number"==typeof n&&Number.isInteger(n)&&!Ur(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?mp(e):pp(n,e)}class ws{constructor(){this._=void 0}}function kT(n,e,t){return n instanceof Mn?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof on?yp(n,e):n instanceof an?vp(n,e):function(r,i){const s=_p(r,i),a=Tp(s)+Tp(r.gt);return Ua(s)&&Ua(r.gt)?mp(a):pp(r.yt,a)}(n,e)}function NT(n,e,t){return n instanceof on?yp(n,e):n instanceof an?vp(n,e):t}function _p(n,e){return n instanceof Ln?Ua(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Mn extends ws{}class on extends ws{constructor(e){super(),this.elements=e}}function yp(n,e){const t=Ip(e);for(const r of n.elements)t.some(i=>Ke(i,r))||t.push(r);return{arrayValue:{values:t}}}class an extends ws{constructor(e){super(),this.elements=e}}function vp(n,e){let t=Ip(e);for(const r of n.elements)t=t.filter(i=>!Ke(i,r));return{arrayValue:{values:t}}}class Ln extends ws{constructor(e,t){super(),this.yt=e,this.gt=t}}function Tp(n){return ne(n.integerValue||n.doubleValue)}function Ip(n){return qr(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Hr{constructor(e,t){this.field=e,this.transform=t}}class OT{constructor(e,t){this.version=e,this.transformResults=t}}class X{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new X}static exists(e){return new X(void 0,e)}static updateTime(e){return new X(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bs(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class xs{}function wp(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Fn(n.key,X.none()):new Un(n.key,n.data,X.none());{const t=n.data,r=Ae.empty();let i=new K(oe.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);null===a&&s.length>1&&(s=s.popLast(),a=t.field(s)),null===a?r.delete(s):r.set(s,a),i=i.add(s)}return new ot(n.key,r,new Pe(i.toArray()),X.none())}}function RT(n,e,t){n instanceof Un?function(r,i,s){const a=r.value.clone(),c=Ep(r.fieldTransforms,i,s.transformResults);a.setAll(c),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ot?function(r,i,s){if(!bs(r.precondition,i))return void i.convertToUnknownDocument(s.version);const a=Ep(r.fieldTransforms,i,s.transformResults),c=i.data;c.setAll(xp(r)),c.setAll(a),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function $r(n,e,t,r){return n instanceof Un?function(i,s,a,c){if(!bs(i.precondition,s))return a;const u=i.value.clone(),l=Cp(i.fieldTransforms,c,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof ot?function(i,s,a,c){if(!bs(i.precondition,s))return a;const u=Cp(i.fieldTransforms,c,s),l=s.data;return l.setAll(xp(i)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null===a?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(n,e,t,r):(a=t,bs(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function PT(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=_p(r.transform,i||null);null!=s&&(null===t&&(t=Ae.empty()),t.set(r.field,s))}return t||null}function bp(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&kn(t,r,(i,s)=>function DT(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof on&&r instanceof on||t instanceof an&&r instanceof an?kn(t.elements,r.elements,Ke):t instanceof Ln&&r instanceof Ln?Ke(t.gt,r.gt):t instanceof Mn&&r instanceof Mn);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Un extends xs{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ot extends xs{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xp(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Ep(n,e,t){const r=new Map;k(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,NT(a,c,t[i]))}return r}function Cp(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,kT(s,a,e))}return r}class Fn extends xs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $a extends xs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class MT{constructor(e){this.count=e}}var he,V;function Ap(n){switch(n){default:return A();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function Sp(n){if(void 0===n)return se("GRPC error has no .code"),g.UNKNOWN;switch(n){case he.OK:return g.OK;case he.CANCELLED:return g.CANCELLED;case he.UNKNOWN:return g.UNKNOWN;case he.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case he.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case he.INTERNAL:return g.INTERNAL;case he.UNAVAILABLE:return g.UNAVAILABLE;case he.UNAUTHENTICATED:return g.UNAUTHENTICATED;case he.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case he.NOT_FOUND:return g.NOT_FOUND;case he.ALREADY_EXISTS:return g.ALREADY_EXISTS;case he.PERMISSION_DENIED:return g.PERMISSION_DENIED;case he.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case he.ABORTED:return g.ABORTED;case he.OUT_OF_RANGE:return g.OUT_OF_RANGE;case he.UNIMPLEMENTED:return g.UNIMPLEMENTED;case he.DATA_LOSS:return g.DATA_LOSS;default:return A()}}(V=he||(he={}))[V.OK=0]="OK",V[V.CANCELLED=1]="CANCELLED",V[V.UNKNOWN=2]="UNKNOWN",V[V.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",V[V.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",V[V.NOT_FOUND=5]="NOT_FOUND",V[V.ALREADY_EXISTS=6]="ALREADY_EXISTS",V[V.PERMISSION_DENIED=7]="PERMISSION_DENIED",V[V.UNAUTHENTICATED=16]="UNAUTHENTICATED",V[V.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",V[V.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",V[V.ABORTED=10]="ABORTED",V[V.OUT_OF_RANGE=11]="OUT_OF_RANGE",V[V.UNIMPLEMENTED=12]="UNIMPLEMENTED",V[V.INTERNAL=13]="INTERNAL",V[V.UNAVAILABLE=14]="UNAVAILABLE",V[V.DATA_LOSS=15]="DATA_LOSS";class St{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xt(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Vf(this.inner)}size(){return this.innerSize}}const LT=new re(b.comparator);function Me(){return LT}const kp=new re(b.comparator);function Kr(...n){let e=kp;for(const t of n)e=e.insert(t.key,t);return e}function Np(n){let e=kp;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ze(){return zr()}function Dp(){return zr()}function zr(){return new St(n=>n.toString(),(n,e)=>n.isEqual(e))}const UT=new re(b.comparator),FT=new K(b.comparator);function P(...n){let e=FT;for(const t of n)e=e.add(t);return e}const ZT=new K(R);function Es(){return ZT}class Wr{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Qr.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Wr(D.min(),i,Es(),Me(),P())}}class Qr{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Qr(r,t,P(),P(),P())}}class Cs{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class Op{constructor(e,t){this.targetId=e,this.Et=t}}class Rp{constructor(e,t,r=me.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Pp{constructor(){this.At=0,this.Rt=Lp(),this.bt=me.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=P(),t=P(),r=P();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:A()}}),new Qr(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=Lp()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class qT{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Me(),this.qt=Mp(),this.Ut=new K(R)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:A()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const s=i.target;if(ys(s))if(0===r){const a=new b(s.path);this.Qt(t,a,Q.newNoDocument(a,D.min()))}else k(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((s,a)=>{const c=this.Yt(a);if(c){if(s.current&&ys(c.target)){const u=new b(c.target.path);null!==this.Lt.get(u)||this.te(a,u)||this.Qt(a,u,Q.newNoDocument(u,e))}s.St&&(t.set(a,s.Ct()),s.xt())}});let r=P();this.qt.forEach((s,a)=>{let c=!0;a.forEachWhile(u=>{const l=this.Yt(u);return!l||2===l.purpose||(c=!1,!1)}),c&&(r=r.add(s))}),this.Lt.forEach((s,a)=>a.setReadTime(e));const i=new Wr(e,t,this.Ut,this.Lt,r);return this.Lt=Me(),this.qt=Mp(),this.Ut=new K(R),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new Pp,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new K(R),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||I("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new Pp),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function Mp(){return new re(b.comparator)}function Lp(){return new re(b.comparator)}const VT={asc:"ASCENDING",desc:"DESCENDING"},BT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GT={and:"AND",or:"OR"};class jT{constructor(e,t){this.databaseId=e,this.wt=t}}function Zn(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Up(n,e){return n.wt?e.toBase64():e.toUint8Array()}function HT(n,e){return Zn(n,e.toTimestamp())}function ae(n){return k(!!n),D.fromTimestamp(function(e){const t=xt(e);return new ee(t.seconds,t.nanos)}(n))}function Ka(n,e){return(t=n,new q(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Fp(n){const e=q.fromString(n);return k(Kp(e)),e}function Jr(n,e){return Ka(n.databaseId,e.path)}function We(n,e){const t=Fp(e);if(t.get(1)!==n.databaseId.projectId)throw new T(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new T(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new b(qp(t))}function za(n,e){return Ka(n.databaseId,e)}function Zp(n){const e=Fp(n);return 4===e.length?q.emptyPath():qp(e)}function Yr(n){return new q(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qp(n){return k(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Vp(n,e,t){return{name:Jr(n,e),fields:t.value.mapValue.fields}}function Xr(n,e){let t;if(e instanceof Un)t={update:Vp(n,e.key,e.value)};else if(e instanceof Fn)t={delete:Jr(n,e.key)};else if(e instanceof ot)t={update:Vp(n,e.key,e.data),updateMask:XT(e.fieldMask)};else{if(!(e instanceof $a))return A();t={verify:Jr(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const a=s.transform;if(a instanceof Mn)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof on)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof an)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ln)return{fieldPath:s.field.canonicalString(),increment:a.gt};throw A()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:HT(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:A()),t;var i}function Wa(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?X.updateTime(ae(i.updateTime)):void 0!==i.exists?X.exists(i.exists):X.none():X.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;"setToServerValue"in a?(k("REQUEST_TIME"===a.setToServerValue),c=new Mn):"appendMissingElements"in a?c=new on(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new an(a.removeAllFromArray.values||[]):"increment"in a?c=new Ln(s,a.increment):A();const u=oe.fromServerFormat(a.fieldPath);return new Hr(u,c)}(n,i)):[];var i;if(e.update){const i=We(n,e.update.name),s=new Ae({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=new Pe((e.updateMask.fieldPaths||[]).map(l=>oe.fromServerFormat(l)));return new ot(i,s,a,t,r)}return new Un(i,s,t,r)}if(e.delete){const i=We(n,e.delete);return new Fn(i,t)}if(e.verify){const i=We(n,e.verify);return new $a(i,t)}return A()}function Gp(n,e){return{documents:[za(n,e.path)]}}function Qa(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=za(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=za(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return $p(H.create(u,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(l=>{return{field:qn((h=l).field),direction:QT(h.dir)};var h})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=(l=e.limit,n.wt||Lr(l)?l:{value:l});var l,c,u;return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt={before:!(u=e.endAt).inclusive,values:u.position}),t}function jp(n){let e=Zp(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){k(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(h){const d=Hp(h);return d instanceof H&&Za(d)?d.getFilters():[d]}(t.where));let a=[];t.orderBy&&(a=t.orderBy.map(h=>{return new On(Vn((d=h).field),function(p){switch(p){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let c=null;t.limit&&(c=function(h){let d;return d="object"==typeof h?h.value:h,Lr(d)?null:d}(t.limit));let u=null;var h;t.startAt&&(u=new At((h=t.startAt).values||[],!!h.before));let l=null;return t.endAt&&(l=function(h){return new At(h.values||[],!h.before)}(t.endAt)),function up(n,e,t,r,i,s,a,c){return new st(n,e,t,r,i,s,a,c)}(e,i,a,s,c,"F",u,l)}function Hp(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Vn(e.unaryFilter.field);return U.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Vn(e.unaryFilter.field);return U.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vn(e.unaryFilter.field);return U.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Vn(e.unaryFilter.field);return U.create(s,"!=",{nullValue:"NULL_VALUE"});default:return A()}}(n):void 0!==n.fieldFilter?U.create(Vn((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return A()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return H.create(e.compositeFilter.filters.map(t=>Hp(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return A()}}(e.compositeFilter.op))}(n):A();var e}function QT(n){return VT[n]}function JT(n){return BT[n]}function YT(n){return GT[n]}function qn(n){return{fieldPath:n.canonicalString()}}function Vn(n){return oe.fromServerFormat(n.fieldPath)}function $p(n){return n instanceof U?function(e){if("=="===e.op){if($f(e.value))return{unaryFilter:{field:qn(e.field),op:"IS_NAN"}};if(Hf(e.value))return{unaryFilter:{field:qn(e.field),op:"IS_NULL"}}}else if("!="===e.op){if($f(e.value))return{unaryFilter:{field:qn(e.field),op:"IS_NOT_NAN"}};if(Hf(e.value))return{unaryFilter:{field:qn(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qn(e.field),op:JT(e.op),value:e.value}}}(n):n instanceof H?function(e){const t=e.getFilters().map(r=>$p(r));return 1===t.length?t[0]:{compositeFilter:{op:YT(e.op),filters:t}}}(n):A()}function XT(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Kp(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Re(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zp(e)),e=eI(n.get(t),e);return zp(e)}function eI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function zp(n){return n+"\x01\x01"}function Qe(n){const e=n.length;if(k(e>=2),2===e)return k("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),q.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf("\x01",s);switch((a<0||a>t)&&A(),n.charAt(a+1)){case"\x01":const c=n.substring(s,a);let u;0===i.length?u=c:(i+=c,u=i,i=""),r.push(u);break;case"\x10":i+=n.substring(s,a),i+="\0";break;case"\x11":i+=n.substring(s,a+1);break;default:A()}s=a+2}return new q(r)}const Wp=["userId","batchId"];function As(n,e){return[n,Re(e)]}function Qp(n,e,t){return[n,Re(e),t]}const tI={},nI=["prefixPath","collectionGroup","readTime","documentId"],rI=["prefixPath","collectionGroup","documentId"],iI=["collectionGroup","readTime","prefixPath","documentId"],sI=["canonicalId","targetId"],oI=["targetId","path"],aI=["path","targetId"],cI=["collectionId","parent"],uI=["indexId","uid"],lI=["uid","sequenceNumber"],hI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dI=["indexId","uid","orderedDocumentKey"],fI=["userId","collectionPath","documentId"],pI=["userId","collectionPath","largestBatchId"],mI=["userId","collectionGroup","largestBatchId"],Jp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gI=[...Jp,"documentOverlays"],Yp=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xp=Yp,_I=[...Xp,"indexConfiguration","indexState","indexEntries"];class Ja extends Ff{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Te(n,e){const t=x(n);return He.M(t.se,e)}class Ya{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&RT(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=$r(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=$r(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Dp();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;const u=wp(a,c);null!==u&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(D.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),P())}isEqual(e){return this.batchId===e.batchId&&kn(this.mutations,e.mutations,(t,r)=>bp(t,r))&&kn(this.baseMutations,e.baseMutations,(t,r)=>bp(t,r))}}class Xa{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){k(e.mutations.length===r.length);let i=UT;const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Xa(e,t,r,i)}}class ec{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class kt{constructor(e,t,r,i,s=D.min(),a=D.min(),c=me.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c}withSequenceNumber(e){return new kt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new kt(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new kt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class em{constructor(e){this.ie=e}}function tm(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ss(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Jr(i=n.ie,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Zn(i,s.version.toTimestamp()),createTime:Zn(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:cn(e.version)};else{if(!e.isUnknownDocument())return A();r.unknownDocument={path:t.path.toArray(),version:cn(e.version)}}var i,s;return r}function Ss(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function cn(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function un(n){const e=new ee(n.seconds,n.nanoseconds);return D.fromTimestamp(e)}function ln(n,e){const t=(e.baseMutations||[]).map(s=>Wa(n.ie,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(a.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>Wa(n.ie,s)),i=ee.fromMillis(e.localWriteTimeMs);return new Ya(e.batchId,i,t,r)}function ei(n){const e=un(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?un(n.lastLimboFreeSnapshotVersion):D.min();let r;var i;return void 0!==n.query.documents?(k(1===(i=n.query).documents.length),r=Oe(Pn(Zp(i.documents[0])))):r=Oe(jp(n.query)),new kt(r,n.targetId,0,n.lastListenSequenceNumber,e,t,me.fromBase64String(n.resumeToken))}function nm(n,e){const t=cn(e.snapshotVersion),r=cn(e.lastLimboFreeSnapshotVersion);let i;i=ys(e.target)?Gp(n.ie,e.target):Qa(n.ie,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:rn(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function tc(n){const e=jp({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Is(e,e.limit,"L"):e}function nc(n,e){return new ec(e.largestBatchId,Wa(n.ie,e.overlayMutation))}function rm(n,e){const t=e.path.lastSegment();return[n,Re(e.path.popLast()),t]}function im(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:cn(r.readTime),documentKey:Re(r.documentKey.path),largestBatchId:r.largestBatchId}}class vI{getBundleMetadata(e,t){return sm(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:un(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return sm(e).put({bundleId:(r=t).id,createTime:cn(ae(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return om(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:tc(i.bundledQuery),readTime:un(i.readTime)};var i})}saveNamedQuery(e,t){return om(e).put({name:(r=t).name,readTime:cn(ae(r.readTime)),bundledQuery:r.bundledQuery});var r}}function sm(n){return Te(n,"bundles")}function om(n){return Te(n,"namedQueries")}class ks{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new ks(e,t.uid||"")}getOverlay(e,t){return ti(e).get(rm(this.userId,t)).next(r=>r?nc(this.yt,r):null)}getOverlays(e,t){const r=ze();return m.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,a)=>{const c=new ec(t,a);i.push(this.oe(e,c))}),m.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(a=>i.add(Re(a.getCollectionPath())));const s=[];return i.forEach(a=>{const c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(ti(e).Y("collectionPathOverlayIndex",c))}),m.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ze(),s=Re(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ti(e).W("collectionPathOverlayIndex",a).next(c=>{for(const u of c){const l=nc(this.yt,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=ze();let a;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ti(e).Z({index:"collectionGroupOverlayIndex",range:c},(u,l,h)=>{const d=nc(this.yt,l);s.size()<i||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):h.done()}).next(()=>s)}oe(e,t){return ti(e).put(function(r,i,s){const[a,c,u]=rm(i,s.mutation.key);return{userId:i,collectionPath:c,documentId:u,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Xr(r.ie,s.mutation)}}(this.yt,this.userId,t))}}function ti(n){return Te(n,"documentOverlays")}class hn{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(ne(e.integerValue));else if("doubleValue"in e){const r=ne(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),Ur(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(en(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?Kf(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):A()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),b.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function TI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function am(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=TI(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}hn.Ie=new hn;class II{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=am(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=am(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class wI{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class bI{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class ni{constructor(){this.$e=new II,this.Be=new wI(this.$e),this.Le=new bI(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class dn{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new dn(this.indexId,this.documentKey,this.arrayValue,r)}}function Nt(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=cm(n.arrayValue,e.arrayValue),0!==t?t:(t=cm(n.directionalValue,e.directionalValue),0!==t?t:b.comparator(n.documentKey,e.documentKey)))}function cm(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class xI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){k(e.collectionGroup===this.collectionId);const t=Da(e);if(void 0!==t&&!this.We(t))return!1;const r=Qt(e);let i=0,s=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const a=r[i];if(!this.ze(this.Qe,a)||!this.He(this.Ke[s++],a))return!1;++i}for(;i<r.length;++i){const a=r[i];if(s>=this.Ke.length||!this.He(this.Ke[s++],a))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function um(n){var e,t;if(k(n instanceof U||n instanceof H),n instanceof U){if(n instanceof ip){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>U.create(n.field,"==",s)))||[];return H.create(i,"or")}return n}const r=n.filters.map(i=>um(i));return H.create(r,n.op)}function EI(n){if(0===n.getFilters().length)return[];const e=sc(um(n));return k(lm(e)),rc(e)||ic(e)?[e]:e.getFilters()}function rc(n){return n instanceof U}function ic(n){return n instanceof H&&Za(n)}function lm(n){return rc(n)||ic(n)||function(e){if(e instanceof H&&Fa(e)){for(const t of e.getFilters())if(!rc(t)&&!ic(t))return!1;return!0}return!1}(n)}function sc(n){if(k(n instanceof U||n instanceof H),n instanceof U)return n;if(1===n.filters.length)return sc(n.filters[0]);const e=n.filters.map(r=>sc(r));let t=H.create(e,n.op);return t=Ns(t),lm(t)?t:(k(t instanceof H),k(Dn(t)),k(t.filters.length>1),t.filters.reduce((r,i)=>oc(r,i)))}function oc(n,e){let t;return k(n instanceof U||n instanceof H),k(e instanceof U||e instanceof H),t=n instanceof U?e instanceof U?H.create([n,e],"and"):hm(n,e):e instanceof U?hm(e,n):function(r,i){if(k(r.filters.length>0&&i.filters.length>0),Dn(r)&&Dn(i))return tp(r,i.getFilters());const s=Fa(r)?r:i,a=Fa(r)?i:r,c=s.filters.map(u=>oc(u,a));return H.create(c,"or")}(n,e),Ns(t)}function hm(n,e){if(Dn(e))return tp(e,n.getFilters());{const t=e.filters.map(r=>oc(n,r));return H.create(t,"or")}}function Ns(n){if(k(n instanceof U||n instanceof H),n instanceof U)return n;const e=n.getFilters();if(1===e.length)return Ns(e[0]);if(Xf(n))return n;const t=e.map(i=>Ns(i)),r=[];return t.forEach(i=>{i instanceof U?r.push(i):i instanceof H&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:H.create(r,n.op)}class CI{constructor(){this.Je=new ac}addToCollectionParentIndex(e,t){return this.Je.add(t),m.resolve()}getCollectionParents(e,t){return m.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return m.resolve()}deleteFieldIndex(e,t){return m.resolve()}getDocumentsMatchingTarget(e,t){return m.resolve(null)}getIndexType(e,t){return m.resolve(0)}getFieldIndexes(e,t){return m.resolve([])}getNextCollectionGroupToUpdate(e){return m.resolve(null)}getMinOffset(e,t){return m.resolve(qe.min())}getMinOffsetFromCollectionGroup(e,t){return m.resolve(qe.min())}updateCollectionGroup(e,t,r){return m.resolve()}updateIndexEntries(e,t){return m.resolve()}}class ac{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new K(q.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new K(q.comparator)).toArray()}}const Ds=new Uint8Array(0);class AI{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new ac,this.Xe=new St(r=>rn(r),(r,i)=>Br(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const s={collectionId:r,parent:Re(i)};return dm(e).put(s)}return m.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Pf(t),""],!1,!0);return dm(e).W(i).next(s=>{for(const a of s){if(a.collectionId!==t)break;r.push(Qe(a.parent))}return r})}addFieldIndex(e,t){const r=Os(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const a=ii(e);return s.next(c=>{a.put(im(c,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Os(e),i=ii(e),s=ri(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=ri(e);let i=!0;const s=new Map;return m.forEach(this.Ze(t),a=>this.tn(e,a).next(c=>{i&&(i=!!c),s.set(a,c)})).next(()=>{if(i){let a=P();const c=[];return m.forEach(s,(u,l)=>{var h;I("IndexedDbIndexManager",`Using index ${h=u,`id=${h.indexId}|cg=${h.collectionGroup}|f=${h.fields.map(G=>`${G.fieldPath}:${G.kind}`).join(",")}`} to execute ${rn(t)}`);const d=function(G,ue){const j=Da(ue);if(void 0===j)return null;for(const B of vs(G,j.fieldPath))switch(B.op){case"array-contains-any":return B.value.arrayValue.values||[];case"array-contains":return[B.value]}return null}(l,u),p=function(G,ue){const j=new Map;for(const B of Qt(ue))for(const fe of vs(G,B.fieldPath))switch(fe.op){case"==":case"in":j.set(B.fieldPath.canonicalString(),fe.value);break;case"not-in":case"!=":return j.set(B.fieldPath.canonicalString(),fe.value),Array.from(j.values())}return null}(l,u),_=function(G,ue){const j=[];let B=!0;for(const fe of Qt(ue)){const In=0===fe.kind?ap(G,fe.fieldPath,G.startAt):cp(G,fe.fieldPath,G.startAt);j.push(In.value),B&&(B=In.inclusive)}return new At(j,B)}(l,u),v=function(G,ue){const j=[];let B=!0;for(const fe of Qt(ue)){const In=0===fe.kind?cp(G,fe.fieldPath,G.endAt):ap(G,fe.fieldPath,G.endAt);j.push(In.value),B&&(B=In.inclusive)}return new At(j,B)}(l,u),E=this.en(u,l,_),S=this.en(u,l,v),$=this.nn(u,l,p),W=this.sn(u.indexId,d,E,_.inclusive,S,v.inclusive,$);return m.forEach(W,G=>r.J(G,t.limit).next(ue=>{ue.forEach(j=>{const B=b.fromSegments(j.documentKey);a.has(B)||(a=a.add(B),c.push(B))})}))}).next(()=>c)}return m.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:EI(H.create(e.filters,"and")).map(r=>Va(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,s,a,c){const u=(null!=t?t.length:1)*Math.max(r.length,s.length),l=u/(null!=t?t.length:1),h=[];for(let d=0;d<u;++d){const p=t?this.rn(t[d/l]):Ds,_=this.on(e,p,r[d%l],i),v=this.un(e,p,s[d%l],a),E=c.map(S=>this.on(e,p,S,!0));h.push(...this.createRange(_,v,E))}return h}on(e,t,r,i){const s=new dn(e,b.empty(),t,r);return i?s:s.Ue()}un(e,t,r,i){const s=new dn(e,b.empty(),t,r);return i?s.Ue():s}tn(e,t){const r=new xI(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const c of s)r.je(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,t){let r=2;const i=this.Ze(t);return m.forEach(i,s=>this.tn(e,s).next(a=>{a?0!==r&&a.fields.length<function(c){let u=new K(oe.comparator),l=!1;for(const h of c.filters)for(const d of h.getFlattenedFilters())d.field.isKeyField()||("array-contains"===d.op||"array-contains-any"===d.op?l=!0:u=u.add(d.field));for(const h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(l?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new ni;for(const i of Qt(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const a=r.qe(i.kind);hn.Ie.ue(s,a)}return r.Fe()}rn(e){const t=new ni;return hn.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new ni;return hn.Ie.ue(nn(this.databaseId,t),r.qe(function(i){const s=Qt(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new ni);let s=0;for(const a of Qt(e)){const c=r[s++];for(const u of i)if(this.hn(t,a.fieldPath)&&qr(c))i=this.ln(i,a,c);else{const l=u.qe(a.kind);hn.Ie.ue(c,l)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const c of i){const u=new ni;u.seed(c.Fe()),hn.Ie.ue(a,u.qe(t.kind)),s.push(u)}return s}hn(e,t){return!!e.filters.find(r=>r instanceof U&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Os(e),i=ii(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const a=[];return m.forEach(s,c=>i.get([c.indexId,this.uid]).next(u=>{a.push(function(l,h){const d=h?new Pr(h.sequenceNumber,new qe(un(h.readTime),new b(Qe(h.documentKey)),h.largestBatchId)):Pr.empty(),p=l.fields.map(([_,v])=>new fs(oe.fromServerFormat(_),v));return new ds(l.indexId,l.collectionGroup,p,d)}(c,u))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:R(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Os(e),s=ii(e);return this.dn(e).next(a=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(c=>m.forEach(c,u=>s.put(im(u.indexId,this.user,a,r)))))}updateIndexEntries(e,t){const r=new Map;return m.forEach(t,(i,s)=>{const a=r.get(i.collectionGroup);return(a?m.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(c=>(r.set(i.collectionGroup,c),m.forEach(c,u=>this._n(e,i,u).next(l=>{const h=this.wn(s,u);return l.isEqual(h)?m.resolve():this.mn(e,s,u,l,h)}))))})}gn(e,t,r,i){return ri(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return ri(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=ri(e);let s=new K(Nt);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(a,c)=>{s=s.add(new dn(r.indexId,t,c.arrayValue,c.directionalValue))}).next(()=>s)}wn(e,t){let r=new K(Nt);const i=this.cn(t,e);if(null==i)return r;const s=Da(t);if(null!=s){const a=e.data.field(s.fieldPath);if(qr(a))for(const c of a.arrayValue.values||[])r=r.add(new dn(t.indexId,e.key,this.rn(c),i))}else r=r.add(new dn(t.indexId,e.key,Ds,i));return r}mn(e,t,r,i,s){I("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(c,u,l,h,d){const p=c.getIterator(),_=u.getIterator();let v=Rn(p),E=Rn(_);for(;v||E;){let S=!1,$=!1;if(v&&E){const W=l(v,E);W<0?$=!0:W>0&&(S=!0)}else null!=v?$=!0:S=!0;S?(h(E),E=Rn(_)):$?(d(v),v=Rn(p)):(v=Rn(p),E=Rn(_))}}(i,s,Nt,c=>{a.push(this.gn(e,t,r,c))},c=>{a.push(this.yn(e,t,r,c))}),m.waitFor(a)}dn(e){let t=1;return ii(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((a,c)=>Nt(a,c)).filter((a,c,u)=>!c||0!==Nt(a,u[c-1]));const i=[];i.push(e);for(const a of r){const c=Nt(a,e),u=Nt(a,t);if(0===c)i[0]=e.Ue();else if(c>0&&u<0)i.push(a),i.push(a.Ue());else if(u>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.pn(i[a],i[a+1]))return[];s.push(IDBKeyRange.bound([i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,Ds,[]],[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,Ds,[]]))}return s}pn(e,t){return Nt(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(fm)}getMinOffset(e,t){return m.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||A())).next(fm)}}function dm(n){return Te(n,"collectionParents")}function ri(n){return Te(n,"indexEntries")}function Os(n){return Te(n,"indexConfiguration")}function ii(n){return Te(n,"indexState")}function fm(n){k(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Oa(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new qe(e.readTime,e.documentKey,t)}const pm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Le{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Le(e,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function mm(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let c=0;const u=r.Z({range:a},(h,d,p)=>(c++,p.delete()));s.push(u.next(()=>{k(1===c)}));const l=[];for(const h of t.mutations){const d=Qp(e,h.key.path,t.batchId);s.push(i.delete(d)),l.push(h.key)}return m.waitFor(s).next(()=>l)}function Rs(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw A();e=n.noDocument}return JSON.stringify(e).length}Le.DEFAULT_COLLECTION_PERCENTILE=10,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Le.DEFAULT=new Le(41943040,Le.DEFAULT_COLLECTION_PERCENTILE,Le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Le.DISABLED=new Le(-1,0,0);class Ps{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){k(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Ps(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Dt(e).Z({index:"userMutationsIndex",range:r},(i,s,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Bn(e),a=Dt(e);return a.add({}).next(c=>{k("number"==typeof c);const u=new Ya(c,t,r,i),l=function(p,_,v){const E=v.baseMutations.map($=>Xr(p.ie,$)),S=v.mutations.map($=>Xr(p.ie,$));return{userId:_,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:E,mutations:S}}(this.yt,this.userId,u),h=[];let d=new K((p,_)=>R(p.canonicalString(),_.canonicalString()));for(const p of i){const _=Qp(this.userId,p.key.path,c);d=d.add(p.key.path.popLast()),h.push(a.put(l)),h.push(s.put(_,tI))}return d.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.In[c]=u.keys()}),m.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return Dt(e).get(t).next(r=>r?(k(r.userId===this.userId),ln(this.yt,r)):null)}Tn(e,t){return this.In[t]?m.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Dt(e).Z({index:"userMutationsIndex",range:i},(a,c,u)=>{c.userId===this.userId&&(k(c.batchId>=r),s=ln(this.yt,c)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Dt(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Dt(e).W("userMutationsIndex",t).next(r=>r.map(i=>ln(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=As(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Bn(e).Z({range:i},(a,c,u)=>{const[l,h,d]=a,p=Qe(h);if(l===this.userId&&t.path.isEqual(p))return Dt(e).get(d).next(_=>{if(!_)throw A();k(_.userId===this.userId),s.push(ln(this.yt,_))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new K(R);const i=[];return t.forEach(s=>{const a=As(this.userId,s.path),c=IDBKeyRange.lowerBound(a),u=Bn(e).Z({range:c},(l,h,d)=>{const[p,_,v]=l,E=Qe(_);p===this.userId&&s.path.isEqual(E)?r=r.add(v):d.done()});i.push(u)}),m.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=As(this.userId,r),a=IDBKeyRange.lowerBound(s);let c=new K(R);return Bn(e).Z({range:a},(u,l,h)=>{const[d,p,_]=u,v=Qe(p);d===this.userId&&r.isPrefixOf(v)?v.length===i&&(c=c.add(_)):h.done()}).next(()=>this.En(e,c))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Dt(e).get(s).next(a=>{if(null===a)throw A();k(a.userId===this.userId),r.push(ln(this.yt,a))}))}),m.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return mm(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),m.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return m.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Bn(e).Z({range:r},(s,a,c)=>{if(s[0]===this.userId){const u=Qe(s[1]);i.push(u)}else c.done()}).next(()=>{k(0===i.length)})})}containsKey(e,t){return gm(e,this.userId,t)}Rn(e){return _m(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function gm(n,e,t){const r=As(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Bn(n).Z({range:s,X:!0},(c,u,l)=>{const[h,d,p]=c;h===e&&d===i&&(a=!0),l.done()}).next(()=>a)}function Dt(n){return Te(n,"mutations")}function Bn(n){return Te(n,"documentMutations")}function _m(n){return Te(n,"mutationQueues")}class fn{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new fn(0)}static vn(){return new fn(-1)}}class SI{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new fn(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>D.fromTimestamp(new ee(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Gn(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(k(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Gn(e).Z((a,c)=>{const u=ei(c);u.sequenceNumber<=t&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>m.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Gn(e).Z((r,i)=>{const s=ei(i);t(s)})}Vn(e){return ym(e).get("targetGlobalKey").next(t=>(k(null!==t),t))}Sn(e,t){return ym(e).put("targetGlobalKey",t)}Dn(e,t){return Gn(e).put(nm(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=rn(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Gn(e).Z({range:i,index:"queryTargetsIndex"},(a,c,u)=>{const l=ei(c);Br(t,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Ot(e);return t.forEach(a=>{const c=Re(a.path);i.push(s.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,a))}),m.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ot(e);return m.forEach(t,s=>{const a=Re(s.path);return m.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Ot(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ot(e);let s=P();return i.Z({range:r,X:!0},(a,c,u)=>{const l=Qe(a[1]),h=new b(l);s=s.add(h)}).next(()=>s)}containsKey(e,t){const r=Re(t.path),i=IDBKeyRange.bound([r],[Pf(r)],!1,!0);let s=0;return Ot(e).Z({index:"documentTargetsIndex",X:!0,range:i},([a,c],u,l)=>{0!==a&&(s++,l.done())}).next(()=>s>0)}ne(e,t){return Gn(e).get(t).next(r=>r?ei(r):null)}}function Gn(n){return Te(n,"targets")}function ym(n){return Te(n,"targetGlobal")}function Ot(n){return Te(n,"targetDocuments")}function vm([n,e],[t,r]){const i=R(n,t);return 0===i?R(e,r):i}class kI{constructor(e){this.xn=e,this.buffer=new K(vm),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vm(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class NI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;I("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,f.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){bt(r)?I("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield wt(r)}yield t.Fn(3e5)}))}}class DI{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return m.resolve(Ve.at);const r=new kI(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector","Garbage collection skipped; disabled"),m.resolve(pm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pm):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,s,a,c,u,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(I("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,c=Date.now(),this.removeTargets(e,r,t))).next(d=>(s=d,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(l=Date.now(),ka()<=Z.DEBUG&&I("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${a-h}ms\n\tDetermined least recently used ${i} in `+(c-a)+`ms\n\tRemoved ${s} targets in `+(u-c)+`ms\n\tRemoved ${d} documents in `+(l-u)+`ms\nTotal Duration: ${l-h}ms`),m.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}class OI{constructor(e,t){this.db=e,this.garbageCollector=new DI(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Ms(e,r)}removeReference(e,t,r){return Ms(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ms(e,t)}Gn(e,t){return function(r,i){let s=!1;return _m(r).tt(a=>gm(r,a,i).next(c=>(c&&(s=!0),m.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(a,c)=>{if(c<=t){const u=this.Gn(e,a).next(l=>{if(!l)return s++,r.getEntry(e,a).next(()=>(r.removeEntry(a,D.min()),Ot(e).delete([0,Re(a.path)])))});i.push(u)}}).next(()=>m.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ms(e,t)}Kn(e,t){const r=Ot(e);let i,s=Ve.at;return r.Z({index:"documentTargetsIndex"},([a,c],{path:u,sequenceNumber:l})=>{0===a?(s!==Ve.at&&t(new b(Qe(i)),s),s=l,i=u):s=Ve.at}).next(()=>{s!==Ve.at&&t(new b(Qe(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ms(n,e){return Ot(n).put((r=n.currentSequenceNumber,{targetId:0,path:Re(e.path),sequenceNumber:r}));var r}class Tm{constructor(){this.changes=new St(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Q.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?m.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RI{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return pn(e).put(r)}removeEntry(e,t,r){return pn(e).delete(function(i,s){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ss(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Q.newInvalidDocument(t);return pn(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(si(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:Q.newInvalidDocument(t)};return pn(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(si(t))},(i,s)=>{r={document:this.jn(t,s),size:Rs(s)}}).next(()=>r)}getEntries(e,t){let r=Me();return this.zn(e,t,(i,s)=>{const a=this.jn(i,s);r=r.insert(i,a)}).next(()=>r)}Hn(e,t){let r=Me(),i=new re(b.comparator);return this.zn(e,t,(s,a)=>{const c=this.jn(s,a);r=r.insert(s,c),i=i.insert(s,Rs(a))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return m.resolve();let i=new K(xm);t.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(si(i.first()),si(i.last())),a=i.getIterator();let c=a.getNext();return pn(e).Z({index:"documentKeyIndex",range:s},(u,l,h)=>{const d=b.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;c&&xm(c,d)<0;)r(c,null),c=a.getNext();c&&c.isEqual(d)&&(r(c,l),c=a.hasNext()?a.getNext():null),c?h.j(si(c)):h.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Ss(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pn(e).W(IDBKeyRange.bound(a,c,!0)).next(u=>{let l=Me();for(const h of u){const d=this.jn(b.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);d.isFoundDocument()&&(jr(t,d)||i.has(d.key))&&(l=l.insert(d.key,d))}return l})}getAllFromCollectionGroup(e,t,r,i){let s=Me();const a=bm(t,r),c=bm(t,qe.max());return pn(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(u,l,h)=>{const d=this.jn(b.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(d.key,d),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new PI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wm(e).get("remoteDocumentGlobalKey").next(t=>(k(!!t),t))}Qn(e,t){return wm(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function yI(n,e){let t;if(e.document)t=function Bp(n,e,t){const r=We(n,e.name),i=ae(e.updateTime),s=e.createTime?ae(e.createTime):D.min(),a=new Ae({mapValue:{fields:e.fields}}),c=Q.newFoundDocument(r,i,s,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=b.fromSegments(e.noDocument.path),i=un(e.noDocument.readTime);t=Q.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return A();{const r=b.fromSegments(e.unknownDocument.path),i=un(e.unknownDocument.version);t=Q.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ee(r[0],r[1]);return D.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(D.min()))return r}return Q.newInvalidDocument(e)}}function Im(n){return new RI(n)}class PI extends Tm{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new St(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new K((s,a)=>R(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const c=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,c.readTime)),a.isValidDocument()){const u=tm(this.Yn.yt,a);i=i.add(s.path.popLast()),r+=Rs(u)-c.size,t.push(this.Yn.addEntry(e,s,u))}else if(r-=c.size,this.trackRemovals){const u=tm(this.Yn.yt,a.convertToNoDocument(D.min()));t.push(this.Yn.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),m.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,a)=>{this.Xn.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function wm(n){return Te(n,"remoteDocumentGlobal")}function pn(n){return Te(n,"remoteDocumentsV14")}function si(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bm(n,e){const t=e.documentKey.path.toArray();return[n,Ss(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function xm(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=R(t[s],r[s]),i)return i;return i=R(t.length,r.length),i||(i=R(t[t.length-2],r[r.length-2]),i||R(t[t.length-1],r[r.length-1]))}class MI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Em{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&$r(r.mutation,i,Pe.empty(),ee.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,P()).next(()=>r))}getLocalViewOfDocuments(e,t,r=P()){const i=ze();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=Kr();return s.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=ze();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,P()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=Me();const a=zr(),c=zr();return t.forEach((u,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof ot)?s=s.insert(l.key,l):void 0!==h?(a.set(l.key,h.mutation.getFieldMask()),$r(h.mutation,l,h.mutation.getFieldMask(),ee.now())):a.set(l.key,Pe.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>a.set(l,h)),t.forEach((l,h)=>{var d;return c.set(l,new MI(h,null!==(d=a.get(l))&&void 0!==d?d:null))}),c))}recalculateAndSaveOverlays(e,t){const r=zr();let i=new re((a,c)=>a-c),s=P();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const c of a)c.keys().forEach(u=>{const l=t.get(u);if(null===l)return;let h=r.get(u)||Pe.empty();h=c.applyToLocalView(l,h),r.set(u,h);const d=(i.get(c.batchId)||P()).add(u);i=i.insert(c.batchId,d)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),l=u.key,h=u.value,d=Dp();h.forEach(p=>{if(!s.has(p)){const _=wp(t.get(p),r.get(p));null!==_&&d.set(p,_),s=s.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,l,d))}return m.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return b.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ga(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):m.resolve(ze());let c=-1,u=s;return a.next(l=>m.forEach(l,(h,d)=>(c<d.largestBatchId&&(c=d.largestBatchId),s.get(h)?m.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,P())).next(h=>({batchId:c,changes:Np(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new b(t)).next(r=>{let i=Kr();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Kr();return this.indexManager.getCollectionParents(e,i).next(a=>m.forEach(a,c=>{const u=(l=t,h=c.child(i),new st(h,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,h;return this.getDocumentsMatchingCollectionQuery(e,u,r).next(l=>{l.forEach((h,d)=>{s=s.insert(h,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((c,u)=>{const l=u.getKey();null===s.get(l)&&(s=s.insert(l,Q.newInvalidDocument(l)))});let a=Kr();return s.forEach((c,u)=>{const l=i.get(c);void 0!==l&&$r(l.mutation,u,Pe.empty(),ee.now()),jr(t,u)&&(a=a.insert(c,u))}),a})}}class LI{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return m.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:ae(r.createTime)}),m.resolve()}getNamedQuery(e,t){return m.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:tc(r.bundledQuery),readTime:ae(r.readTime)}),m.resolve();var r}}class UI{constructor(){this.overlays=new re(b.comparator),this.es=new Map}getOverlay(e,t){return m.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ze();return m.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.oe(e,t,s)}),m.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),m.resolve()}getOverlaysForCollection(e,t,r){const i=ze(),s=t.length+1,a=new b(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return m.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new re((l,h)=>l-h);const a=this.overlays.getIterator();for(;a.hasNext();){const l=a.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);null===h&&(h=ze(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const c=ze(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>c.set(l,h)),!(c.size()>=i)););return m.resolve(c)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const a=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ec(t,r));let s=this.es.get(t);void 0===s&&(s=P(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class cc{constructor(){this.ns=new K(Ie.ss),this.rs=new K(Ie.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Ie(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Ie(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new b(new q([])),r=new Ie(t,e),i=new Ie(t,e+1),s=[];return this.rs.forEachInRange([r,i],a=>{this.cs(a),s.push(a.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new b(new q([])),r=new Ie(t,e),i=new Ie(t,e+1);let s=P();return this.rs.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new Ie(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ie{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return b.comparator(e.key,t.key)||R(e._s,t._s)}static os(e,t){return R(e._s,t._s)||b.comparator(e.key,t.key)}}class FI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new K(Ie.ss)}checkEmpty(e){return m.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const a=new Ya(s,t,r,i);this.mutationQueue.push(a);for(const c of i)this.gs=this.gs.add(new Ie(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return m.resolve(a)}lookupMutationBatch(e,t){return m.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return m.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return m.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return m.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ie(t,0),i=new Ie(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],a=>{const c=this.ys(a._s);s.push(c)}),m.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new K(R);return t.forEach(i=>{const s=new Ie(i,0),a=new Ie(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,a],c=>{r=r.add(c._s)})}),m.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;b.isDocumentKey(s)||(s=s.child(""));const a=new Ie(new b(s),0);let c=new K(R);return this.gs.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u._s)),!0)},a),m.resolve(this.Is(c))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){k(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return m.forEach(t.mutations,i=>{const s=new Ie(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Ie(t,0),i=this.gs.firstAfterOrEqual(r);return m.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return m.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ZI{constructor(e){this.Es=e,this.docs=new re(b.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return m.resolve(r?r.document.mutableCopy():Q.newInvalidDocument(t))}getEntries(e,t){let r=Me();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Q.newInvalidDocument(i))}),m.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Me();const a=t.path,c=new b(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:l,value:{document:h}}=u.getNext();if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||Oa(Lf(h),r)<=0||(i.has(h.key)||jr(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return m.resolve(s)}getAllFromCollectionGroup(e,t,r,i){A()}As(e,t){return m.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new qI(this)}getSize(e){return m.resolve(this.size)}}class qI extends Tm{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),m.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class VI{constructor(e){this.persistence=e,this.Rs=new St(t=>rn(t),Br),this.lastRemoteSnapshotVersion=D.min(),this.highestTargetId=0,this.bs=0,this.Ps=new cc,this.targetCount=0,this.vs=fn.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),m.resolve()}getLastRemoteSnapshotVersion(e){return m.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return m.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),m.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),m.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new fn(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,m.resolve()}updateTargetData(e,t){return this.Dn(t),m.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,m.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((a,c)=>{c.sequenceNumber<=t&&null===r.get(c.targetId)&&(this.Rs.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),m.waitFor(s).next(()=>i)}getTargetCount(e){return m.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return m.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),m.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),m.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),m.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return m.resolve(r)}containsKey(e,t){return m.resolve(this.Ps.containsKey(t))}}class Cm{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ve(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new VI(this),this.indexManager=new CI,this.remoteDocumentCache=new ZI(r=>this.referenceDelegate.xs(r)),this.yt=new em(t),this.Ns=new LI(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new FI(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){I("MemoryPersistence","Starting transaction:",e);const i=new BI(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,t){return m.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class BI extends Ff{constructor(e){super(),this.currentSequenceNumber=e}}class Ls{constructor(e){this.persistence=e,this.Fs=new cc,this.$s=null}static Bs(e){return new Ls(e)}get Ls(){if(this.$s)return this.$s;throw A()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),m.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),m.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),m.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return m.forEach(this.Ls,r=>{const i=b.fromPath(r);return this.qs(e,i).next(s=>{s||t.removeEntry(i,D.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return m.or([()=>m.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class GI{constructor(e){this.yt=e}$(e,t,r,i){const s=new ps("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wp,{unique:!0}),c.createObjectStore("documentMutations"),Am(e),function(c){c.createObjectStore("remoteDocuments")}(e));let a=m.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Am(e)),a=a.next(()=>function(c){const u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:D.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(s))),r<4&&i>=4&&(0!==r&&(a=a.next(()=>function(c,u){return u.store("mutations").W().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Wp,{unique:!0});const h=u.store("mutations"),d=l.map(p=>h.put(p));return m.waitFor(d)})}(e,s))),a=a.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(a=a.next(()=>this.Us(s))),r<6&&i>=6&&(a=a.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(a=a.next(()=>this.Gs(s))),r<8&&i>=8&&(a=a.next(()=>this.Qs(e,s))),r<9&&i>=9&&(a=a.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(a=a.next(()=>this.js(s))),r<11&&i>=11&&(a=a.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(a=a.next(()=>{!function(c){const u=c.createObjectStore("documentOverlays",{keyPath:fI});u.createIndex("collectionPathOverlayIndex",pI,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",mI,{unique:!1})}(e)})),r<13&&i>=13&&(a=a.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:nI});u.createIndex("documentKeyIndex",rI),u.createIndex("collectionGroupIndex",iI)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.zs(e,s))),r<15&&i>=15&&(a=a.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:uI}).createIndex("sequenceNumberIndex",lI,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:hI}).createIndex("documentKeyIndex",dI,{unique:!1})}(e))),a}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Rs(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>m.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",a).next(c=>m.forEach(c,u=>{k(u.userId===s.userId);const l=ln(this.yt,u);return mm(e,s.userId,l).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((a,c)=>{const u=new q(a),l=[0,Re(u)];s.push(t.get(l).next(h=>h?m.resolve():t.put({targetId:0,path:Re(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>m.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:cI});const r=t.store("collectionParents"),i=new ac,s=a=>{if(i.add(a)){const c=a.lastSegment(),u=a.popLast();return r.put({collectionId:c,parent:Re(u)})}};return t.store("remoteDocuments").Z({X:!0},(a,c)=>{const u=new q(a);return s(u.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([a,c,u],l)=>{const h=Qe(c);return s(h.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=ei(i),a=nm(this.yt,s);return t.put(a)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,a)=>{const c=t.store("remoteDocumentsV14"),u=(l=a,l.document?new b(q.fromString(l.document.name).popFirst(5)):l.noDocument?b.fromSegments(l.noDocument.path):l.unknownDocument?b.fromSegments(l.unknownDocument.path):A()).path.toArray();var l;const h={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(c.put(h))}).next(()=>m.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Im(this.yt),s=new Cm(Ls.Bs,this.yt.ie);return r.W().next(a=>{const c=new Map;return a.forEach(u=>{var l;let h=null!==(l=c.get(u.userId))&&void 0!==l?l:P();ln(this.yt,u).keys().forEach(d=>h=h.add(d)),c.set(u.userId,h)}),m.forEach(c,(u,l)=>{const h=new ve(l),d=ks.re(this.yt,h),p=s.getIndexManager(h),_=Ps.re(h,this.yt,p,s.referenceDelegate);return new Em(i,_,d,p).recalculateAndSaveOverlaysForDocumentKeys(new Ja(t,Ve.at),u).next()})})}}function Am(n){n.createObjectStore("targetDocuments",{keyPath:oI}).createIndex("documentTargetsIndex",aI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",sI,{unique:!0}),n.createObjectStore("targetGlobal")}const uc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lc{constructor(e,t,r,i,s,a,c,u,l,h,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=a,this.document=c,this.Js=l,this.Ys=h,this.Xs=d,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=p=>Promise.resolve(),!lc.C())throw new T(g.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new OI(this,i),this.ii=t+"main",this.yt=new em(u),this.ri=new He(this.ii,this.Xs,new GI(this.yt)),this.Cs=new SI(this.referenceDelegate,this.yt),this.remoteDocumentCache=Im(this.yt),this.Ns=new vI,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===h&&se("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new T(g.FAILED_PRECONDITION,uc);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ve(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,f.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,f.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,f.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Us(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(bt(e))return I("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return I("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return oi(e).get("owner").next(t=>m.resolve(this.mi(t)))}gi(e){return Us(e).delete(this.clientId)}yi(){var e=this;return(0,f.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Te(r,"clientMetadata");return i.W().next(s=>{const a=e.Ii(s,18e5),c=s.filter(u=>-1===a.indexOf(u));return m.forEach(c,u=>i.delete(u.clientId)).next(()=>c)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?m.resolve(!0):oi(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new T(g.FAILED_PRECONDITION,uc);return!1}}return!(!this.networkEnabled||!this.inForeground)||Us(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const a=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||a&&c)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&I("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,f.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Ja(t,Ve.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Us(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Ps.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new AI(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return ks.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){I("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(a=this.Xs)?_I:14===a?Xp:13===a?Yp:12===a?gI:11===a?Jp:void A();var a;let c;return this.ri.runTransaction(e,i,s,u=>(c=new Ja(u,this.Ss?this.Ss.next():Ve.at),"readwrite-primary"===t?this.fi(c).next(l=>!!l||this.di(c)).next(l=>{if(!l)throw se(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new T(g.FAILED_PRECONDITION,Uf);return r(c)}).next(l=>this.wi(c).next(()=>l)):this.Vi(c).next(()=>r(c)))).then(u=>(c.raiseOnCommittedEvent(),u))}Vi(e){return oi(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new T(g.FAILED_PRECONDITION,uc)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return oi(e).put("owner",t)}static C(){return He.C()}_i(e){const t=oi(e);return t.get("owner").next(r=>this.mi(r)?(I("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):m.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(se(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),function Ly(){return!function Oy(){var n;const e=null===(n=Oi())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return I("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return se("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){se("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function oi(n){return Te(n,"owner")}function Us(n){return Te(n,"clientMetadata")}class dc{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=P(),i=P();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new dc(e,t.fromCache,r,i)}}class Sm{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Mi(e,t))}ki(e,t){if(lp(t))return m.resolve(null);let r=Oe(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Is(t,null,"F"),r=Oe(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=P(...s);return this.Ni.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Fi(t,c);return this.$i(t,l,a,u.readTime)?this.ki(e,Is(t,null,"F")):this.Bi(e,l,t,u)}))})))}Oi(e,t,r,i){return lp(t)||i.isEqual(D.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(s=>{const a=this.Fi(t,s);return this.$i(t,a,r,i)?this.Mi(e,t):(ka()<=Z.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ha(t)),this.Bi(e,a,t,function Mf(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=D.fromTimestamp(1e9===r?new ee(t+1,0):new ee(t,r));return new qe(i,b.empty(),e)}(i,-1)))})}Fi(e,t){let r=new K(fp(e));return t.forEach((i,s)=>{jr(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,t){return ka()<=Z.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",Ha(t)),this.Ni.getDocumentsMatchingQuery(e,t,qe.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}class jI{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new re(R),this.Ui=new St(s=>rn(s),Br),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Em(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function km(n,e,t,r){return new jI(n,e,t,r)}function Nm(n,e){return fc.apply(this,arguments)}function fc(){return fc=(0,f.Z)(function*(n,e){const t=x(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],c=[];let u=P();for(const l of i){a.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}for(const l of s){c.push(l.batchId);for(const h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({ji:l,removedBatchIds:a,addedBatchIds:c}))})})}),fc.apply(this,arguments)}function HI(n,e){const t=x(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){const h=u.batch,d=h.keys();let p=m.resolve();return d.forEach(_=>{p=p.next(()=>l.getEntry(c,_)).next(v=>{const E=u.docVersions.get(_);k(null!==E),v.version.compareTo(E)<0&&(h.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),l.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=P();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Dm(n){const e=x(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function $I(n,e){const t=x(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const c=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;c.push(t.Cs.removeMatchingKeys(s,h.removedDocuments,d).next(()=>t.Cs.addMatchingKeys(s,h.addedDocuments,d)));let _=p.withSequenceNumber(s.currentSequenceNumber);var v,E,S;e.targetMismatches.has(d)?_=_.withResumeToken(me.EMPTY_BYTE_STRING,D.min()).withLastLimboFreeSnapshotVersion(D.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(d,_),E=_,S=h,(0===(v=p).resumeToken.approximateByteSize()||E.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8||S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0)&&c.push(t.Cs.updateTargetData(s,_))});let u=Me(),l=P();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),c.push(function Om(n,e,t){let r=P(),i=P();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=Me();return t.forEach((c,u)=>{const l=s.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(D.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):I("LocalStore","Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{Wi:a,zi:i}})}(s,a,e.documentUpdates).next(h=>{u=h.Wi,l=h.zi})),!r.isEqual(D.min())){const h=t.Cs.getLastRemoteSnapshotVersion(s).next(d=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(h)}return m.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.qi=i,s))}function KI(n,e){const t=x(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jn(n,e){const t=x(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,m.resolve(i)):t.Cs.allocateTargetId(r).next(a=>(i=new kt(e,a,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Hn(n,e,t){return pc.apply(this,arguments)}function pc(){return pc=(0,f.Z)(function*(n,e,t){const r=x(n),i=r.qi.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!bt(a))throw a;I("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),pc.apply(this,arguments)}function Fs(n,e,t){const r=x(n);let i=D.min(),s=P();return r.persistence.runTransaction("Execute query","readonly",a=>function(c,u,l){const h=x(c),d=h.Ui.get(l);return void 0!==d?m.resolve(h.qi.get(d)):h.Cs.getTargetData(u,l)}(r,a,Oe(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(a,c.targetId).next(u=>{s=u})}).next(()=>r.Li.getDocumentsMatchingQuery(a,e,t?i:D.min(),t?s:P())).next(c=>(function Mm(n,e,t){let r=n.Ki.get(e)||D.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}(r,function dp(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),c),{documents:c,Hi:s})))}class vc{constructor(){this.activeTargetIds=Es()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fm{constructor(){this.Lr=new vc,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new vc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class QI{Ur(e){}shutdown(){}}class Zm{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const JI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YI{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class XI extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,s){const a=this.ho(e,t);I("RestConnection","Sending: ",a,r);const c={};return this.lo(c,i,s),this.fo(e,a,c,r).then(u=>(I("RestConnection","Received: ",u),u),u=>{throw Sn("RestConnection",`${e} failed with error: `,u,"url: ",a,"request:",r),u})}_o(e,t,r,i,s,a){return this.ao(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+An,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.oo}/v1/${t}:${JI[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,a)=>{const c=new tT;c.setWithCredentials(!0),c.listenOnce(Yv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Sa.NO_ERROR:const l=c.getResponseJson();I("Connection","XHR received:",JSON.stringify(l)),s(l);break;case Sa.TIMEOUT:I("Connection",'RPC "'+e+'" timed out'),a(new T(g.DEADLINE_EXCEEDED,"Request time out"));break;case Sa.HTTP_ERROR:const h=c.getStatus();if(I("Connection",'RPC "'+e+'" failed with status:',h,"response text:",c.getResponseText()),h>0){let d=c.getResponseJson();Array.isArray(d)&&(d=d[0]);const p=null==d?void 0:d.error;if(p&&p.status&&p.message){const _=function(v){const E=v.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(E)>=0?E:g.UNKNOWN}(p.status);a(new T(_,p.message))}else a(new T(g.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new T(g.UNAVAILABLE,"Connection failed."));break;default:A()}}finally{I("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(i);c.send(t,"POST",u,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Qv(),a=Jv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new eT({})),this.lo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const u=i.join("");I("Connection","Creating WebChannel: "+u,c);const l=s.createWebChannel(u,c);let h=!1,d=!1;const p=new YI({Hr:v=>{d?I("Connection","Not sending because WebChannel is closed:",v):(h||(I("Connection","Opening WebChannel transport."),l.open(),h=!0),I("Connection","WebChannel sending:",v),l.send(v))},Jr:()=>l.close()}),_=(v,E,S)=>{v.listen(E,$=>{try{S($)}catch(W){setTimeout(()=>{throw W},0)}})};return _(l,hs.EventType.OPEN,()=>{d||I("Connection","WebChannel transport opened.")}),_(l,hs.EventType.CLOSE,()=>{d||(d=!0,I("Connection","WebChannel transport closed"),p.io())}),_(l,hs.EventType.ERROR,v=>{d||(d=!0,Sn("Connection","WebChannel transport errored:",v),p.io(new T(g.UNAVAILABLE,"The operation could not be completed")))}),_(l,hs.EventType.MESSAGE,v=>{var E;if(!d){const S=v.data[0];k(!!S);const $=S,W=$.error||(null===(E=$[0])||void 0===E?void 0:E.error);if(W){I("Connection","WebChannel received error:",W);const G=W.status;let ue=function(B){const fe=he[B];if(void 0!==fe)return Sp(fe)}(G),j=W.message;void 0===ue&&(ue=g.INTERNAL,j="Unknown error status: "+G+" with message "+W.message),d=!0,p.io(new T(ue,j)),l.close()}else I("Connection","WebChannel received:",S),p.ro(S)}}),_(a,Xv.STAT_EVENT,v=>{v.stat===kf.PROXY?I("Connection","Detected buffering proxy"):v.stat===kf.NOPROXY&&I("Connection","Detected no buffering proxy")}),setTimeout(()=>{p.so()},0),p}}function Vs(){return"undefined"!=typeof document?document:null}function ci(n){return new jT(n,!0)}class Ic{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&I("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Vm{constructor(e,t,r,i,s,a,c,u){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Ic(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,f.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,f.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,f.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===g.RESOURCE_EXHAUSTED?(se(t.toString()),se("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===g.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new T(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,f.Z)(function*(){e.state=0,e.start()}))}Qo(e){return I("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ew extends Vm{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.yt=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function KT(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:A(),i=e.targetChange.targetIds||[],s=function(u,l){return u.wt?(k(void 0===l||"string"==typeof l),me.fromBase64String(l||"")):(k(void 0===l||l instanceof Uint8Array),me.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(u){const l=void 0===u.code?g.UNKNOWN:Sp(u.code);return new T(l,u.message||"")}(a);t=new Rp(r,i,s,c||null)}else if("documentChange"in e){const r=e.documentChange,i=We(n,r.document.name),s=ae(r.document.updateTime),a=r.document.createTime?ae(r.document.createTime):D.min(),c=new Ae({mapValue:{fields:r.document.fields}}),u=Q.newFoundDocument(i,s,a,c);t=new Cs(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=We(n,r.document),s=r.readTime?ae(r.readTime):D.min(),a=Q.newNoDocument(i,s);t=new Cs([],r.removedTargetIds||[],a.key,a)}else if("documentRemove"in e){const r=e.documentRemove,i=We(n,r.document);t=new Cs([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return A();{const r=e.filter,s=new MT(r.count||0);t=new Op(r.targetId,s)}}var u;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return D.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?D.min():s.readTime?ae(s.readTime):D.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Yr(this.yt),t.addTarget=function(i,s){let a;const c=s.target;return a=ys(c)?{documents:Gp(i,c)}:{query:Qa(i,c)},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?a.resumeToken=Up(i,s.resumeToken):s.snapshotVersion.compareTo(D.min())>0&&(a.readTime=Zn(i,s.snapshotVersion.toTimestamp())),a}(this.yt,e);const r=function WT(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return A()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Yr(this.yt),t.removeTarget=e,this.Bo(t)}}class tw extends Vm{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(k(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function zT(n,e){return n&&n.length>0?(k(void 0!==e),n.map(t=>function(r,i){let s=ae(r.updateTime?r.updateTime:i);return s.isEqual(D.min())&&(s=ae(i)),new OT(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ae(e.commitTime);return this.listener.Zo(r,t)}return k(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Yr(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Xr(this.yt,r))};this.Bo(t)}}class nw extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new T(g.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new T(g.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection._o(e,t,r,s,a,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new T(g.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class iw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(se(t),this.ou=!1):I("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class sw{constructor(e,t,r,i,s){var a=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(c=>{r.enqueueAndForget((0,f.Z)(function*(){var u;at(a)&&(I("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,f.Z)(function*(l){const h=x(l);h._u.add(4),yield $n(h),h.gu.set("Unknown"),h._u.delete(4),yield ui(h)}),function(l){return u.apply(this,arguments)})(a))}))}),this.gu=new iw(r,i)}}function ui(n){return bc.apply(this,arguments)}function bc(){return bc=(0,f.Z)(function*(n){if(at(n))for(const e of n.wu)yield e(!0)}),bc.apply(this,arguments)}function $n(n){return xc.apply(this,arguments)}function xc(){return xc=(0,f.Z)(function*(n){for(const e of n.wu)yield e(!1)}),xc.apply(this,arguments)}function Bs(n,e){const t=x(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Ac(t)?Cc(t):zn(t).ko()&&Ec(t,e))}function li(n,e){const t=x(n),r=zn(t);t.du.delete(e),r.ko()&&Bm(t,e),0===t.du.size&&(r.ko()?r.Fo():at(t)&&t.gu.set("Unknown"))}function Ec(n,e){n.yu.Ot(e.targetId),zn(n).zo(e)}function Bm(n,e){n.yu.Ot(e),zn(n).Ho(e)}function Cc(n){n.yu=new qT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),zn(n).start(),n.gu.uu()}function Ac(n){return at(n)&&!zn(n).No()&&n.du.size>0}function at(n){return 0===x(n)._u.size}function Gm(n){n.yu=void 0}function ow(n){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,f.Z)(function*(n){n.du.forEach((e,t)=>{Ec(n,e)})}),Sc.apply(this,arguments)}function aw(n,e){return kc.apply(this,arguments)}function kc(){return kc=(0,f.Z)(function*(n,e){Gm(n),Ac(n)?(n.gu.hu(e),Cc(n)):n.gu.set("Unknown")}),kc.apply(this,arguments)}function cw(n,e,t){return Nc.apply(this,arguments)}function Nc(){return Nc=(0,f.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Rp&&2===e.state&&e.cause)try{yield(r=(0,f.Z)(function*(i,s){const a=s.cause;for(const c of s.targetIds)i.du.has(c)&&(yield i.remoteSyncer.rejectListen(c,a),i.du.delete(c),i.yu.removeTarget(c))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){I("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Gs(n,r)}else if(e instanceof Cs?n.yu.Kt(e):e instanceof Op?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(D.min()))try{const r=yield Dm(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const a=i.yu.Zt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const l=i.du.get(u);l&&i.du.set(u,l.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach(c=>{const u=i.du.get(c);if(!u)return;i.du.set(c,u.withResumeToken(me.EMPTY_BYTE_STRING,u.snapshotVersion)),Bm(i,c);const l=new kt(u.target,c,1,u.sequenceNumber);Ec(i,l)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){I("RemoteStore","Failed to raise snapshot:",r),yield Gs(n,r)}var r}),Nc.apply(this,arguments)}function Gs(n,e,t){return Dc.apply(this,arguments)}function Dc(){return Dc=(0,f.Z)(function*(n,e,t){if(!bt(e))throw e;n._u.add(1),yield $n(n),n.gu.set("Offline"),t||(t=()=>Dm(n.localStore)),n.asyncQueue.enqueueRetryable((0,f.Z)(function*(){I("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield ui(n)}))}),Dc.apply(this,arguments)}function jm(n,e){return e().catch(t=>Gs(n,t,e))}function Kn(n){return Oc.apply(this,arguments)}function Oc(){return Oc=(0,f.Z)(function*(n){const e=x(n),t=Rt(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;uw(e);)try{const i=yield KI(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,lw(e,i)}catch(i){yield Gs(e,i)}Hm(e)&&$m(e)}),Oc.apply(this,arguments)}function uw(n){return at(n)&&n.fu.length<10}function lw(n,e){n.fu.push(e);const t=Rt(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Hm(n){return at(n)&&!Rt(n).No()&&n.fu.length>0}function $m(n){Rt(n).start()}function hw(n){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,f.Z)(function*(n){Rt(n).eu()}),Rc.apply(this,arguments)}function dw(n){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,f.Z)(function*(n){const e=Rt(n);for(const t of n.fu)e.Xo(t.mutations)}),Pc.apply(this,arguments)}function fw(n,e,t){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,f.Z)(function*(n,e,t){const r=n.fu.shift(),i=Xa.from(r,e,t);yield jm(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Kn(n)}),Mc.apply(this,arguments)}function pw(n,e){return Lc.apply(this,arguments)}function Lc(){return Lc=(0,f.Z)(function*(n,e){var t;e&&Rt(n).Yo&&(yield(t=(0,f.Z)(function*(r,i){if(Ap(s=i.code)&&s!==g.ABORTED){const a=r.fu.shift();Rt(r).Mo(),yield jm(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),yield Kn(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),Hm(n)&&$m(n)}),Lc.apply(this,arguments)}function Km(n,e){return Uc.apply(this,arguments)}function Uc(){return Uc=(0,f.Z)(function*(n,e){const t=x(n);t.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");const r=at(t);t._u.add(3),yield $n(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield ui(t)}),Uc.apply(this,arguments)}function Zc(){return Zc=(0,f.Z)(function*(n,e){const t=x(n);e?(t._u.delete(2),yield ui(t)):e||(t._u.add(2),yield $n(t),t.gu.set("Unknown"))}),Zc.apply(this,arguments)}function zn(n){return n.pu||(n.pu=function(e,t,r){const i=x(e);return i.su(),new ew(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:ow.bind(null,n),Zr:aw.bind(null,n),Wo:cw.bind(null,n)}),n.wu.push(function(){var e=(0,f.Z)(function*(t){t?(n.pu.Mo(),Ac(n)?Cc(n):n.gu.set("Unknown")):(yield n.pu.stop(),Gm(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Rt(n){return n.Iu||(n.Iu=function(e,t,r){const i=x(e);return i.su(),new tw(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:hw.bind(null,n),Zr:pw.bind(null,n),tu:dw.bind(null,n),Zo:fw.bind(null,n)}),n.wu.push(function(){var e=(0,f.Z)(function*(t){t?(n.Iu.Mo(),yield Kn(n)):(yield n.Iu.stop(),n.fu.length>0&&(I("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class qc{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,c=new qc(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new T(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wn(n,e){if(se("AsyncQueue",`${e}: ${n}`),bt(n))return new T(g.UNAVAILABLE,`${e}: ${n}`);throw n}class Qn{constructor(e){this.comparator=e?(t,r)=>e(t,r)||b.comparator(t.key,r.key):(t,r)=>b.comparator(t.key,r.key),this.keyedMap=Kr(),this.sortedSet=new re(this.comparator)}static emptySet(e){return new Qn(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qn)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Qn;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class zm{constructor(){this.Tu=new re(b.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):A():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Jn{constructor(e,t,r,i,s,a,c,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new Jn(e,t,Qn.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gr(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class mw{constructor(){this.Au=void 0,this.listeners=[]}}class gw{constructor(){this.queries=new St(e=>hp(e),Gr),this.onlineState="Unknown",this.Ru=new Set}}function Vc(n,e){return Bc.apply(this,arguments)}function Bc(){return Bc=(0,f.Z)(function*(n,e){const t=x(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new mw),i)try{s.Au=yield t.onListen(r)}catch(a){const c=Wn(a,`Initialization of query '${Ha(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&Hc(t)}),Bc.apply(this,arguments)}function Gc(n,e){return jc.apply(this,arguments)}function jc(){return jc=(0,f.Z)(function*(n,e){const t=x(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const a=s.listeners.indexOf(e);a>=0&&(s.listeners.splice(a,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),jc.apply(this,arguments)}function _w(n,e){const t=x(n);let r=!1;for(const i of e){const a=t.queries.get(i.query);if(a){for(const c of a.listeners)c.Pu(i)&&(r=!0);a.Au=i}}r&&Hc(t)}function yw(n,e,t){const r=x(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function Hc(n){n.Ru.forEach(e=>{e.next()})}class $c{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Jn(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Jn.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Jm{constructor(e){this.key=e}}class Ym{constructor(e){this.key=e}}class Xm{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=P(),this.mutatedKeys=P(),this.Gu=fp(e),this.Qu=new Qn(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new zm,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),_=jr(this.query,d)?d:null,v=!!p&&this.mutatedKeys.has(p.key),E=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let S=!1;p&&_?p.data.isEqual(_.data)?v!==E&&(r.track({type:3,doc:_}),S=!0):this.Hu(p,_)||(r.track({type:2,doc:_}),S=!0,(u&&this.Gu(_,u)>0||l&&this.Gu(_,l)<0)&&(c=!0)):!p&&_?(r.track({type:0,doc:_}),S=!0):p&&!_&&(r.track({type:1,doc:p}),S=!0,(u||l)&&(c=!0)),S&&(_?(a=a.add(_),s=E?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;a.size>this.query.limit;){const h="F"===this.query.limitType?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Qu:a,zu:r,$i:c,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((l,h)=>function(d,p){const _=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return A()}};return _(d)-_(p)}(l.type,h.type)||this.Gu(l.doc,h.doc)),this.Ju(r);const a=t?this.Yu():[],c=0===this.Ku.size&&this.current?1:0,u=c!==this.Uu;return this.Uu=c,0!==s.length||u?{snapshot:new Jn(this.query,e.Qu,i,s,e.mutatedKeys,0===c,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:a}:{Xu:a}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new zm,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=P(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Ym(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new Jm(r))}),t}tc(e){this.qu=e.Hi,this.Ku=P();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Jn.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Iw{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ww{constructor(e){this.key=e,this.nc=!1}}class bw{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.sc={},this.ic=new St(c=>hp(c),Gr),this.rc=new Map,this.oc=new Set,this.uc=new re(b.comparator),this.cc=new Map,this.ac=new cc,this.hc={},this.lc=new Map,this.fc=fn.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function xw(n,e){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,f.Z)(function*(n,e){const t=gu(n);let r,i;const s=t.ic.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const a=yield jn(t.localStore,Oe(e));t.isPrimaryClient&&Bs(t.remoteStore,a);const c=t.sharedClientState.addLocalQueryTarget(a.targetId);r=a.targetId,i=yield zc(t,e,r,"current"===c,a.resumeToken)}return i}),Kc.apply(this,arguments)}function zc(n,e,t,r,i){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,f.Z)(function*(n,e,t,r,i){n._c=(d,p,_)=>{return(v=(0,f.Z)(function*(E,S,$,W){let G=S.view.Wu($);G.$i&&(G=yield Fs(E.localStore,S.query,!1).then(({documents:B})=>S.view.Wu(B,G)));const ue=W&&W.targetChanges.get(S.targetId),j=S.view.applyChanges(G,E.isPrimaryClient,ue);return su(E,S.targetId,j.Xu),j.snapshot}),function(E,S,$,W){return v.apply(this,arguments)})(n,d,p,_);var v};const s=yield Fs(n.localStore,e,!0),a=new Xm(e,s.Hi),c=a.Wu(s.documents),u=Qr.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=a.applyChanges(c,n.isPrimaryClient,u);su(n,t,l.Xu);const h=new Iw(e,t,a);return n.ic.set(e,h),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),l.snapshot}),Wc.apply(this,arguments)}function Ew(n,e){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,f.Z)(function*(n,e){const t=x(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(s=>!Gr(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Hn(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),li(t.remoteStore,r.targetId),Yn(t,r.targetId)}).catch(wt))):(Yn(t,r.targetId),yield Hn(t.localStore,r.targetId,!0))}),Qc.apply(this,arguments)}function Jc(){return Jc=(0,f.Z)(function*(n,e,t){const r=_u(n);try{const i=yield function(s,a){const c=x(s),u=ee.now(),l=a.reduce((p,_)=>p.add(_.key),P());let h,d;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=Me(),v=P();return c.Gi.getEntries(p,l).next(E=>{_=E,_.forEach((S,$)=>{$.isValidDocument()||(v=v.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,_)).next(E=>{h=E;const S=[];for(const $ of a){const W=PT($,h.get($.key).overlayedDocument);null!=W&&S.push(new ot($.key,W,op(W.value.mapValue),X.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,S,a)}).next(E=>{d=E;const S=E.applyToLocalDocumentSet(h,v);return c.documentOverlayCache.saveOverlays(p,E.batchId,S)})}).then(()=>({batchId:d.batchId,changes:Np(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.hc[s.currentUser.toKey()];u||(u=new re(R)),u=u.insert(a,c),s.hc[s.currentUser.toKey()]=u}(r,i.batchId,t),yield ct(r,i.changes),yield Kn(r.remoteStore)}catch(i){const s=Wn(i,"Failed to persist write");t.reject(s)}}),Jc.apply(this,arguments)}function eg(n,e){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,f.Z)(function*(n,e){const t=x(n);try{const r=yield $I(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.cc.get(s);a&&(k(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.nc=!0:i.modifiedDocuments.size>0?k(a.nc):i.removedDocuments.size>0&&(k(a.nc),a.nc=!1))}),yield ct(t,r,e)}catch(r){yield wt(r)}}),Yc.apply(this,arguments)}function tg(n,e,t){const r=x(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((s,a)=>{const c=a.view.bu(e);c.snapshot&&i.push(c.snapshot)}),function(s,a){const c=x(s);c.onlineState=a;let u=!1;c.queries.forEach((l,h)=>{for(const d of h.listeners)d.bu(a)&&(u=!0)}),u&&Hc(c)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Aw(n,e,t){return Xc.apply(this,arguments)}function Xc(){return Xc=(0,f.Z)(function*(n,e,t){const r=x(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),s=i&&i.key;if(s){let a=new re(b.comparator);a=a.insert(s,Q.newNoDocument(s,D.min()));const c=P().add(s),u=new Wr(D.min(),new Map,new K(R),a,c);yield eg(r,u),r.uc=r.uc.remove(s),r.cc.delete(e),ou(r)}else yield Hn(r.localStore,e,!1).then(()=>Yn(r,e,t)).catch(wt)}),Xc.apply(this,arguments)}function Sw(n,e){return eu.apply(this,arguments)}function eu(){return eu=(0,f.Z)(function*(n,e){const t=x(n),r=e.batch.batchId;try{const i=yield HI(t.localStore,e);iu(t,r,null),ru(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ct(t,i)}catch(i){yield wt(i)}}),eu.apply(this,arguments)}function kw(n,e,t){return tu.apply(this,arguments)}function tu(){return tu=(0,f.Z)(function*(n,e,t){const r=x(n);try{const i=yield function(s,a){const c=x(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(k(null!==h),l=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);iu(r,e,t),ru(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ct(r,i)}catch(i){yield wt(i)}}),tu.apply(this,arguments)}function ru(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function iu(n,e,t){const r=x(n);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function Yn(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||ng(n,r)})}function ng(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(li(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),ou(n))}function su(n,e,t){for(const r of t)r instanceof Jm?(n.ac.addReference(r.key,e),Dw(n,r)):r instanceof Ym?(I("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||ng(n,r.key)):A()}function Dw(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(I("SyncEngine","New document in limbo: "+t),n.oc.add(r),ou(n))}function ou(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new b(q.fromString(e)),r=n.fc.next();n.cc.set(r,new ww(t)),n.uc=n.uc.insert(t,r),Bs(n.remoteStore,new kt(Oe(Pn(t.path)),r,2,Ve.at))}}function ct(n,e,t){return au.apply(this,arguments)}function au(){return au=(0,f.Z)(function*(n,e,t){const r=x(n),i=[],s=[],a=[];var c;r.ic.isEmpty()||(r.ic.forEach((c,u)=>{a.push(r._c(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,null!=l&&l.fromCache?"not-current":"current"),l){i.push(l);const h=dc.Ci(u.targetId,l);s.push(h)}}))}),yield Promise.all(a),r.sc.Wo(i),yield(c=(0,f.Z)(function*(u,l){const h=x(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>m.forEach(l,p=>m.forEach(p.Si,_=>h.persistence.referenceDelegate.addReference(d,p.targetId,_)).next(()=>m.forEach(p.Di,_=>h.persistence.referenceDelegate.removeReference(d,p.targetId,_)))))}catch(d){if(!bt(d))throw d;I("LocalStore","Failed to update sequence numbers: "+d)}for(const d of l){const p=d.targetId;if(!d.fromCache){const _=h.qi.get(p),E=_.withLastLimboFreeSnapshotVersion(_.snapshotVersion);h.qi=h.qi.insert(p,E)}}}),function(u,l){return c.apply(this,arguments)})(r.localStore,s))}),au.apply(this,arguments)}function Ow(n,e){return cu.apply(this,arguments)}function cu(){return cu=(0,f.Z)(function*(n,e){const t=x(n);if(!t.currentUser.isEqual(e)){I("SyncEngine","User change. New user:",e.toKey());const r=yield Nm(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(a=>{a.forEach(c=>{c.reject(new T(g.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ct(t,r.ji)}var i}),cu.apply(this,arguments)}function Rw(n,e){const t=x(n),r=t.cc.get(e);if(r&&r.nc)return P().add(r.key);{let i=P();const s=t.rc.get(e);if(!s)return i;for(const a of s){const c=t.ic.get(a);i=i.unionWith(c.view.ju)}return i}}function gu(n){const e=x(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=eg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Aw.bind(null,e),e.sc.Wo=_w.bind(null,e.eventManager),e.sc.wc=yw.bind(null,e.eventManager),e}function _u(n){const e=x(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Sw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kw.bind(null,e),e}class sg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,f.Z)(function*(){t.yt=ci(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return km(this.persistence,new Sm,e.initialUser,this.yt)}yc(e){return new Cm(Ls.Bs,this.yt)}gc(e){return new Fm}terminate(){var e=this;return(0,f.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Bw extends sg{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,f.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield _u(r.Ac.syncEngine),yield Kn(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return km(this.persistence,new Sm,e.initialUser,this.yt)}Tc(e,t){return new NI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new mT(t,this.persistence);return new pT(e.asyncQueue,r)}yc(e){const t=function hc(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Le.withCacheSize(this.cacheSizeBytes):Le.DEFAULT;return new lc(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,function qm(){return"undefined"!=typeof window?window:null}(),Vs(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Fm}}class yu{initialize(e,t){var r=this;return(0,f.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>tg(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Ow.bind(null,r.syncEngine),yield function Fc(n,e){return Zc.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new gw}createDatastore(e){const t=ci(e.databaseInfo.databaseId),r=new XI(e.databaseInfo);return new nw(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=c=>tg(this.syncEngine,c,0),a=Zm.C()?new Zm:new QI,new sw(t,r,i,s,a);var t,r,i,s,a}createSyncEngine(e,t){return function(r,i,s,a,c,u,l){const h=new bw(r,i,s,a,c,u);return l&&(h.dc=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,f.Z)(function*(t){const r=x(t);I("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield $n(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vu(n,e,t){if(!t)throw new T(g.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function og(n){if(!b.isDocumentKey(n))throw new T(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ag(n){if(b.isDocumentKey(n))throw new T(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function js(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":A()}function F(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new T(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=js(n);throw new T(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}const ug=new Map;class lg{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new T(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new T(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function jw(n,e,t,r){if(!0===e&&!0===r)throw new T(g.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hi{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new T(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new T(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lg(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new nT;switch(t.type){case"gapi":return new oT(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new T(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ug.get(e);t&&(I("ComponentProvider","Removing Datastore"),ug.delete(e),t.terminate())}(this),Promise.resolve()}}class ce{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Je(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ce(this.firestore,e,this._key)}}class Se{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Se(this.firestore,e,this._query)}}class Je extends Se{constructor(e,t,r){super(e,t,Pn(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ce(this.firestore,null,new b(e))}withConverter(e){return new Je(this.firestore,e,this._path)}}function Xn(n,e,...t){if(n=le(n),1===arguments.length&&(e=Rf.R()),vu("doc","path",e),n instanceof hi){const r=q.fromString(e,...t);return og(r),new ce(n,null,new b(r))}{if(!(n instanceof ce||n instanceof Je))throw new T(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(q.fromString(e,...t));return og(r),new ce(n.firestore,n instanceof Je?n.converter:null,new b(r))}}class Hs{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):se("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Yw{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ve.UNAUTHENTICATED,this.clientId=Rf.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var a=(0,f.Z)(function*(c){I("FirestoreClient","Received user=",c.uid),yield s.authCredentialListener(c),s.user=c});return function(c){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(r,a=>(I("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}getConfiguration(){var e=this;return(0,f.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new pe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,f.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Wn(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function fg(n,e){return Tu.apply(this,arguments)}function Tu(){return Tu=(0,f.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,f.Z)(function*(s){r.isEqual(s)||(yield Nm(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Tu.apply(this,arguments)}function pg(n,e){return Iu.apply(this,arguments)}function Iu(){return Iu=(0,f.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield wu(n);I("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Km(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>Km(e.remoteStore,s)),n.onlineComponents=e}),Iu.apply(this,arguments)}function wu(n){return bu.apply(this,arguments)}function bu(){return bu=(0,f.Z)(function*(n){return n.offlineComponents||(I("FirestoreClient","Using default OfflineComponentProvider"),yield fg(n,new sg)),n.offlineComponents}),bu.apply(this,arguments)}function $s(n){return xu.apply(this,arguments)}function xu(){return xu=(0,f.Z)(function*(n){return n.onlineComponents||(I("FirestoreClient","Using default OnlineComponentProvider"),yield pg(n,new yu)),n.onlineComponents}),xu.apply(this,arguments)}function er(n){return Au.apply(this,arguments)}function Au(){return Au=(0,f.Z)(function*(n){const e=yield $s(n),t=e.eventManager;return t.onListen=xw.bind(null,e.syncEngine),t.onUnlisten=Ew.bind(null,e.syncEngine),t}),Au.apply(this,arguments)}class ob{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Ic(this,"async_queue_retry"),this.Wc=()=>{const t=Vs();t&&I("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Vs();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=Vs();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new pe;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,f.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!bt(t))throw t;I("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,se("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=qc.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.Uc.push(i),i}zc(){this.Kc&&A()}verifyOperationInProgress(){}Xc(){var e=this;return(0,f.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function Su(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class J extends hi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ob,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vg(this),this._firestoreClient.terminate()}}function cb(n,e){const r="string"==typeof n?n:e||"(default)",i=Fi("object"==typeof n?n:cd(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(n=>{const e=zh("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();s&&function Hw(n,e,t,r={}){var i;const s=(n=F(n,hi))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Sn("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=ve.MOCK_USER;else{a=function Ny(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ni(JSON.stringify({alg:"none",type:"JWT"})),Ni(JSON.stringify(a)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new T(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ve(u)}n._authCredentials=new rT(new Df(a,c))}}(i,...s)}return i}function de(n){return n._firestoreClient||vg(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function vg(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new gT(n._databaseId,s,n._persistenceKey,(c=t).host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams));var s,c;n._firestoreClient=new Yw(n._authCredentials,n._appCheckCredentials,n._queue,r)}class mn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mn(me.fromBase64String(e))}catch(t){throw new T(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mn(me.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class tr{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new T(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zs{constructor(e){this._methodName=e}}class ku{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new T(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new T(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return R(this._lat,e._lat)||R(this._long,e._long)}}const lb=/^__.*__$/;class hb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ot(e,this.data,this.fieldMask,t,this.fieldTransforms):new Un(e,this.data,t,this.fieldTransforms)}}class wg{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ot(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bg(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw A()}}class Ws{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Ws(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Js(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(bg(this.sa)&&lb.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class db{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||ci(e)}da(e,t,r,i=!1){return new Ws({sa:e,methodName:t,fa:r,path:oe.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function nr(n){const e=n._freezeSettings(),t=ci(n._databaseId);return new db(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Nu(n,e,t,r,i,s={}){const a=n.da(s.merge||s.mergeFields?2:0,e,t,i);Ou("Data must be an object, but it was:",a,r);const c=Sg(r,a);let u,l;if(s.merge)u=new Pe(a.fieldMask),l=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=Ru(e,d,t);if(!a.contains(p))throw new T(g.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Ng(h,p)||h.push(p)}u=new Pe(h),l=a.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,l=a.fieldTransforms;return new hb(new Ae(c),u,l)}class di extends zs{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof di}}class Du extends zs{_toFieldTransform(e){return new Hr(e.path,new Mn)}isEqual(e){return e instanceof Du}}function Ag(n,e,t,r=!1){return gn(t,n.da(r?4:3,e))}function gn(n,e){if(kg(n=le(n)))return Ou("Unsupported field value:",e,n),Sg(n,e);if(n instanceof zs)return function(t,r){if(!bg(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const a of t){let c=gn(a,r.aa(s));null==c&&(c={nullValue:"NULL_VALUE"}),i.push(c),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=le(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gp(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ee.fromDate(t);return{timestampValue:Zn(r.yt,i)}}if(t instanceof ee){const i=new ee(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zn(r.yt,i)}}if(t instanceof ku)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof mn)return{bytesValue:Up(r.yt,t._byteString)};if(t instanceof ce){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ka(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${js(t)}`)}(n,e)}function Sg(n,e){const t={};return Vf(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xt(n,(r,i)=>{const s=gn(i,e.ra(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function kg(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ee||n instanceof ku||n instanceof mn||n instanceof ce||n instanceof zs)}function Ou(n,e,t){if(!kg(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=js(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function Ru(n,e,t){if((e=le(e))instanceof tr)return e._internalPath;if("string"==typeof e)return Qs(n,e);throw Js("Field path arguments must be of type string or ",n,!1,void 0,t)}const gb=new RegExp("[~\\*/\\[\\]]");function Qs(n,e,t){if(e.search(gb)>=0)throw Js(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new tr(...e.split("."))._internalPath}catch(r){throw Js(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Js(n,e,t,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new T(g.INVALID_ARGUMENT,c+n+u)}function Ng(n,e){return n.some(t=>t.isEqual(e))}class Pu{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ce(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _b(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ys("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _b extends Pu{data(){return super.data()}}function Ys(n,e){return"string"==typeof e?Qs(n,e):e instanceof tr?e._internalPath:e._delegate._internalPath}function Dg(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new T(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mu{}class fi extends Mu{}function Xs(n,e,...t){let r=[];e instanceof Mu&&r.push(e),r=r.concat(t),function(i){const s=i.filter(c=>c instanceof rr).length,a=i.filter(c=>c instanceof pi).length;if(s>1||s>0&&a>0)throw new T(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class pi extends fi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new pi(e,t,r)}_apply(e){const t=this._parse(e);return Mg(e._query,t),new Se(e.firestore,e.converter,ja(e._query,t))}_parse(e){const t=nr(e.firestore);return function(i,s,a,c,u,l,h){let d;if(u.isKeyField()){if("array-contains"===l||"array-contains-any"===l)throw new T(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if("in"===l||"not-in"===l){Pg(h,l);const p=[];for(const _ of h)p.push(Rg(c,i,_));d={arrayValue:{values:p}}}else d=Rg(c,i,h)}else"in"!==l&&"not-in"!==l&&"array-contains-any"!==l||Pg(h,l),d=Ag(a,"where",h,"in"===l||"not-in"===l);return U.create(u,l,d)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class rr extends Mu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rr(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:H.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const a=i.getFlattenedFilters();for(const c of a)Mg(s,c),s=ja(s,c)}(e._query,t),new Se(e.firestore,e.converter,ja(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Lu extends fi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Lu(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new T(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new T(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new On(i,s);return function(c,u){if(null===Ba(c)){const l=Ts(c);null!==l&&Lg(0,l,u.field)}}(r,a),a}(e._query,this._field,this._direction);return new Se(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new st(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function eo(n,e="asc"){const t=e,r=Ys("orderBy",n);return Lu._create(r,t)}class to extends fi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new to(e,t,r)}_apply(e){return new Se(e.firestore,e.converter,Is(e._query,this._limit,this._limitType))}}function no(n){return function cg(n,e){if(e<=0)throw new T(g.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}("limit",n),to._create("limit",n,"F")}class ro extends fi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ro(e,t,r)}_apply(e){const t=Og(e,this.type,this._docOrFields,this._inclusive);return new Se(e.firestore,e.converter,(i=t,new st((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}function Uu(...n){return ro._create("startAfter",n,!1)}class io extends fi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new io(e,t,r)}_apply(e){const t=Og(e,this.type,this._docOrFields,this._inclusive);return new Se(e.firestore,e.converter,(i=t,new st((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Og(n,e,t,r){if(t[0]=le(t[0]),t[0]instanceof Pu)return function(i,s,a,c,u){if(!c)throw new T(g.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const l=[];for(const h of sn(i))if(h.field.isKeyField())l.push(nn(s,c.key));else{const d=c.data.field(h.field);if(Ma(d))throw new T(g.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===d){const p=h.field.canonicalString();throw new T(g.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}l.push(d)}return new At(l,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=nr(n.firestore);return function(s,a,c,u,l,h){const d=s.explicitOrderBy;if(l.length>d.length)throw new T(g.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let _=0;_<l.length;_++){const v=l[_];if(d[_].field.isKeyField()){if("string"!=typeof v)throw new T(g.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof v}`);if(!Ga(s)&&-1!==v.indexOf("/"))throw new T(g.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${v}' contains a slash.`);const E=s.path.child(q.fromString(v));if(!b.isDocumentKey(E))throw new T(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const S=new b(E);p.push(nn(a,S))}else{const E=Ag(c,u,v);p.push(E)}}return new At(p,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Rg(n,e,t){if("string"==typeof(t=le(t))){if(""===t)throw new T(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ga(e)&&-1!==t.indexOf("/"))throw new T(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(q.fromString(t));if(!b.isDocumentKey(r))throw new T(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nn(n,new b(r))}if(t instanceof ce)return nn(n,t._key);throw new T(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${js(t)}.`)}function Pg(n,e){if(!Array.isArray(n)||0===n.length)throw new T(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new T(g.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Mg(n,e){if(e.isInequality()){const r=Ts(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new T(g.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=Ba(n);null!==s&&Lg(0,i,s)}const t=function(r,i){for(const s of r)for(const a of s.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new T(g.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Lg(n,e,t){if(!t.isEqual(e))throw new T(g.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class _n{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ir extends Pu{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new so(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ys("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class so extends ir{data(e={}){return super.data(e)}}class sr{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new _n(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new so(this._firestore,this._userDataWriter,r.key,r,new _n(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new T(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new so(r._firestore,r._userDataWriter,a.doc.key,a.doc,new _n(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||3!==a.type).map(a=>{const c=new so(r._firestore,r._userDataWriter,a.doc.key,a.doc,new _n(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,l=-1;return 0!==a.type&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:Tb(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Tb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return A()}}class Pt extends class vb{convertValue(e,t="none"){switch(tn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(en(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw A()}}convertObject(e,t){const r={};return Xt(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new ku(ne(e.latitude),ne(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Gf(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Fr(e));default:return null}}convertTimestamp(e){const t=xt(e);return new ee(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=q.fromString(e);k(Kp(r));const i=new Yt(r.get(1),r.get(3)),s=new b(r.popFirst(5));return i.isEqual(t)||se(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new mn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ce(this.firestore,null,t)}}function wb(n){n=F(n,ce);const e=F(n.firestore,J),t=de(e),r=new Pt(e);return function tb(n,e){const t=new pe;return n.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return(r=(0,f.Z)(function*(i,s,a){try{const c=yield function(u,l){const h=x(u);return h.persistence.runTransaction("read document","readonly",d=>h.localDocuments.getDocument(d,l))}(i,s);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new T(g.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const u=Wn(c,`Failed to get document '${s} from cache`);a.reject(u)}}),function(i,s,a){return r.apply(this,arguments)})(yield function Ks(n){return wu(n).then(e=>e.localStore)}(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ir(e,r,n._key,i,new _n(null!==i&&i.hasLocalMutations,!0),n.converter))}function oo(n){n=F(n,Se);const e=F(n.firestore,J),t=de(e),r=new Pt(e);return Dg(n._query),function yg(n,e,t={}){const r=new pe;return n.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function(i,s,a,c,u){const l=new Hs({next:d=>{s.enqueueAndForget(()=>Gc(i,h)),d.fromCache&&"server"===c.source?u.reject(new T(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new $c(a,l,{includeMetadataChanges:!0,Nu:!0});return Vc(i,h)}(yield er(n),n.asyncQueue,e,t,r)})),r.promise}(t,n._query).then(i=>new sr(e,r,n,i))}function Zu(n,...e){var t,r,i;n=le(n);let s={includeMetadataChanges:!1},a=0;"object"!=typeof e[a]||Su(e[a])||(s=e[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges};if(Su(e[a])){const d=e[a];e[a]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[a+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[a+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let u,l,h;if(n instanceof ce)l=F(n.firestore,J),h=Pn(n._key.path),u={next:d=>{e[a]&&e[a](qu(l,n,d))},error:e[a+1],complete:e[a+2]};else{const d=F(n,Se);l=F(d.firestore,J),h=d._query;const p=new Pt(l);u={next:_=>{e[a]&&e[a](new sr(l,p,d,_))},error:e[a+1],complete:e[a+2]},Dg(n._query)}return function(d,p,_,v){const E=new Hs(v),S=new $c(p,E,_);return d.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return Vc(yield er(d),S)})),()=>{E.bc(),d.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return Gc(yield er(d),S)}))}}(de(l),h,c,u)}function mi(n,e){return function(t,r){const i=new pe;return t.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function Cw(n,e,t){return Jc.apply(this,arguments)}(yield function Cu(n){return $s(n).then(e=>e.syncEngine)}(t),r,i)})),i.promise}(de(n),e)}function qu(n,e,t){const r=t.docs.get(e._key),i=new Pt(n);return new ir(n,i,e._key,r,new _n(t.hasPendingWrites,t.fromCache),e.converter)}function Vu(){return new Du("serverTimestamp")}!function(n,e=!0){An="9.17.1",wn(new Bt("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),a=new J(new iT(t.getProvider("auth-internal")),new aT(t.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new T(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yt(c.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),yt(Nf,"3.8.3",n),yt(Nf,"3.8.3","esm2017")}();var Zg=L(655);const kb=function qg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Vg=new lr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Bg=new Do("@firebase/auth");function co(n,...e){Bg.logLevel<=Z.ERROR&&Bg.error(`Auth (${fr}): ${n}`,...e)}function Ue(n,...e){throw Bu(n,...e)}function Ye(n,...e){return Bu(n,...e)}function Gg(n,e,t){const r=Object.assign(Object.assign({},kb()),{[e]:t});return new lr("auth","Firebase",r).create(e,{appName:n.name})}function Bu(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Vg.create(n,...e)}function w(n,e,...t){if(!n)throw Bu(e,...t)}function Xe(n){const e="INTERNAL ASSERTION FAILED: "+n;throw co(e),new Error(e)}function Mt(n,e){n||Xe(e)}const jg=new Map;function ut(n){Mt(n instanceof Function,"Expected a class definition");let e=jg.get(n);return e?(Mt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,jg.set(n,e),e)}function gi(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function Hg(){var n;return"undefined"!=typeof self&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}function Ob(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Gu(){return"http:"===Hg()||"https:"===Hg()}()||function Ry(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}()||"connection"in navigator))||navigator.onLine}class _i{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mt(t>e,"Short delay should be less than long delay!"),this.isMobile=function Dy(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ie())}()||function Py(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return Ob()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ju(n,e){Mt(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class $g{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Xe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Xe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Xe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Mb=new _i(3e4,6e4);function ge(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function we(n,e,t,r){return Hu.apply(this,arguments)}function Hu(){return Hu=(0,f.Z)(function*(n,e,t,r,i={}){return Kg(n,i,(0,f.Z)(function*(){let s={},a={};r&&("GET"===e?a=r:s={body:JSON.stringify(r)});const c=Mi(Object.assign({key:n.config.apiKey},a)).slice(1),u=yield n._getAdditionalHeaders();return u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode),$g.fetch()(zg(n,n.config.apiHost,t,c),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))}),Hu.apply(this,arguments)}function Kg(n,e,t){return $u.apply(this,arguments)}function $u(){return $u=(0,f.Z)(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},Pb),e);try{const i=new Lb(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=yield s.json();if("needConfirmation"in a)throw yi(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[u,l]=c.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw yi(n,"credential-already-in-use",a);if("EMAIL_EXISTS"===u)throw yi(n,"email-already-in-use",a);if("USER_DISABLED"===u)throw yi(n,"user-disabled",a);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Gg(n,h,l);Ue(n,h)}}catch(i){if(i instanceof et)throw i;Ue(n,"network-request-failed")}}),$u.apply(this,arguments)}function lt(n,e,t,r){return Ku.apply(this,arguments)}function Ku(){return Ku=(0,f.Z)(function*(n,e,t,r,i={}){const s=yield we(n,e,t,r,i);return"mfaPendingCredential"in s&&Ue(n,"multi-factor-auth-required",{_serverResponse:s}),s}),Ku.apply(this,arguments)}function zg(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?ju(n.config,i):`${n.config.apiScheme}://${i}`}class Lb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ye(this.auth,"network-request-failed")),Mb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yi(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ye(n,e,r);return i.customData._tokenResponse=t,i}function zu(){return zu=(0,f.Z)(function*(n,e){return we(n,"POST","/v1/accounts:delete",e)}),zu.apply(this,arguments)}function Zb(n,e){return Qu.apply(this,arguments)}function Qu(){return Qu=(0,f.Z)(function*(n,e){return we(n,"POST","/v1/accounts:lookup",e)}),Qu.apply(this,arguments)}function vi(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function Ju(){return Ju=(0,f.Z)(function*(n,e=!1){const t=le(n),r=yield t.getIdToken(e),i=uo(r);w(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,a=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:vi(Yu(i.auth_time)),issuedAtTime:vi(Yu(i.iat)),expirationTime:vi(Yu(i.exp)),signInProvider:a||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}),Ju.apply(this,arguments)}function Yu(n){return 1e3*Number(n)}function uo(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return co("JWT malformed, contained fewer than 3 sections"),null;try{const i=Di(t);return i?JSON.parse(i):(co("Failed to decode base64 JWT payload"),null)}catch(i){return co("Caught error parsing JWT payload as JSON",null==i?void 0:i.toString()),null}}function ht(n,e){return Xu.apply(this,arguments)}function Xu(){return Xu=(0,f.Z)(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof et&&Bb(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}}),Xu.apply(this,arguments)}function Bb({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class Gb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout((0,f.Z)(function*(){yield t.iteration()}),r)}iteration(){var e=this;return(0,f.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null==t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class Wg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vi(this.lastLoginAt),this.creationTime=vi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ti(n){return el.apply(this,arguments)}function el(){return el=(0,f.Z)(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield ht(n,Zb(t,{idToken:r}));w(null==i?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?$b(s.providerUserInfo):[],c=Hb(n.providerData,a),h=!!n.isAnonymous&&!(n.email&&s.passwordHash||null!=c&&c.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Wg(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,d)}),el.apply(this,arguments)}function tl(){return tl=(0,f.Z)(function*(n){const e=le(n);yield Ti(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}),tl.apply(this,arguments)}function Hb(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $b(n){return n.map(e=>{var{providerId:t}=e,r=(0,Zg._T)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function nl(){return nl=(0,f.Z)(function*(n,e){const t=yield Kg(n,{},(0,f.Z)(function*(){const r=Mi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=zg(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",$g.fetch()(a,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}),nl.apply(this,arguments)}class Ii{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){w(e.idToken,"internal-error"),w(void 0!==e.idToken,"internal-error"),w(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function Vb(n){const e=uo(n);return w(e,"internal-error"),w(void 0!==e.exp,"internal-error"),w(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return(0,f.Z)(function*(){return w(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return(0,f.Z)(function*(){const{accessToken:i,refreshToken:s,expiresIn:a}=yield function Kb(n,e){return nl.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,s,Number(a))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Ii;return r&&(w("string"==typeof r,"internal-error",{appName:e}),a.refreshToken=r),i&&(w("string"==typeof i,"internal-error",{appName:e}),a.accessToken=i),s&&(w("number"==typeof s,"internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ii,this.toJSON())}_performRefresh(){return Xe("not implemented")}}function Lt(n,e){w("string"==typeof n||void 0===n,"internal-error",{appName:e})}class yn{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=(0,Zg._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wg(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,f.Z)(function*(){const r=yield ht(t,t.stsTokenManager.getToken(t.auth,e));return w(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function qb(n){return Ju.apply(this,arguments)}(this,e)}reload(){return function jb(n){return tl.apply(this,arguments)}(this)}_assign(e){this!==e&&(w(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new yn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){w(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return(0,f.Z)(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Ti(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return(0,f.Z)(function*(){const t=yield e.getIdToken();return yield ht(e,function Ub(n,e){return zu.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,u,l,h;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,p=null!==(i=t.email)&&void 0!==i?i:void 0,_=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,v=null!==(a=t.photoURL)&&void 0!==a?a:void 0,E=null!==(c=t.tenantId)&&void 0!==c?c:void 0,S=null!==(u=t._redirectEventId)&&void 0!==u?u:void 0,$=null!==(l=t.createdAt)&&void 0!==l?l:void 0,W=null!==(h=t.lastLoginAt)&&void 0!==h?h:void 0,{uid:G,emailVerified:ue,isAnonymous:j,providerData:B,stsTokenManager:fe}=t;w(G&&fe,e,"internal-error");const In=Ii.fromJSON(this.name,fe);w("string"==typeof G,e,"internal-error"),Lt(d,e.name),Lt(p,e.name),w("boolean"==typeof ue,e,"internal-error"),w("boolean"==typeof j,e,"internal-error"),Lt(_,e.name),Lt(v,e.name),Lt(E,e.name),Lt(S,e.name),Lt($,e.name),Lt(W,e.name);const Fh=new yn({uid:G,auth:e,email:p,emailVerified:ue,displayName:d,isAnonymous:j,photoURL:v,phoneNumber:_,tenantId:E,stsTokenManager:In,createdAt:$,lastLoginAt:W});return B&&Array.isArray(B)&&(Fh.providerData=B.map(kA=>Object.assign({},kA))),S&&(Fh._redirectEventId=S),Fh}static _fromIdTokenResponse(e,t,r=!1){return(0,f.Z)(function*(){const i=new Ii;i.updateFromServerResponse(t);const s=new yn({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ti(s),s})()}}const Qg=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(t,r){var i=this;return(0,f.Z)(function*(){i.storage[t]=r})()}_get(t){var r=this;return(0,f.Z)(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return(0,f.Z)(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function lo(n,e,t){return`firebase:${n}:${e}:${t}`}class ar{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=lo(this.userKey,i.apiKey,s),this.fullPersistenceKey=lo("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,f.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?yn._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,f.Z)(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return(0,f.Z)(function*(){if(!t.length)return new ar(ut(Qg),e,r);const i=(yield Promise.all(t.map(function(){var l=(0,f.Z)(function*(h){if(yield h._isAvailable())return h});return function(h){return l.apply(this,arguments)}}()))).filter(l=>l);let s=i[0]||ut(Qg);const a=lo(r,e.config.apiKey,e.name);let c=null;for(const l of t)try{const h=yield l._get(a);if(h){const d=yn._fromJSON(e,h);l!==s&&(c=d),s=l;break}}catch(h){}const u=i.filter(l=>l._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],c&&(yield s._set(a,c.toJSON())),yield Promise.all(t.map(function(){var l=(0,f.Z)(function*(h){if(h!==s)try{yield h._remove(a)}catch(d){}});return function(h){return l.apply(this,arguments)}}())),new ar(s,e,r)):new ar(s,e,r)})()}}function Jg(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(e_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(n_(e))return"Blackberry";if(r_(e))return"Webos";if(rl(e))return"Safari";if((e.includes("chrome/")||Xg(e))&&!e.includes("edge/"))return"Chrome";if(t_(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==r?void 0:r.length))return r[1]}return"Other"}function Yg(n=ie()){return/firefox\//i.test(n)}function rl(n=ie()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xg(n=ie()){return/crios\//i.test(n)}function e_(n=ie()){return/iemobile/i.test(n)}function t_(n=ie()){return/android/i.test(n)}function n_(n=ie()){return/blackberry/i.test(n)}function r_(n=ie()){return/webos/i.test(n)}function ho(n=ie()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function i_(n=ie()){return ho(n)||t_(n)||r_(n)||n_(n)||/windows phone/i.test(n)||e_(n)}function s_(n,e=[]){let t;switch(n){case"Browser":t=Jg(ie());break;case"Worker":t=`${Jg(ie())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${fr}/${r}`}class Jb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,c)=>{try{a(e(s))}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return(0,f.Z)(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch(a){}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null==i?void 0:i.message})}})()}}class Yb{constructor(e,t,r){this.app=e,this.heartbeatServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o_(this),this.idTokenSubscription=new o_(this),this.beforeStateQueue=new Jb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vg,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=ut(t)),this._initializationPromise=this.queue((0,f.Z)(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield ar.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch(a){}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,f.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return(0,f.Z)(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const c=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,u=null==s?void 0:s._redirectEventId,l=yield t.tryRedirectSignIn(e);(!c||c===u)&&(null==l?void 0:l.user)&&(s=l.user,a=!0)}if(!s)return t.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{yield t.beforeStateQueue.runMiddleware(s)}catch(c){s=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(c))}return s?t.reloadAndSetCurrentUserOrClear(s):t.directlySetCurrentUser(null)}return w(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===s._redirectEventId?t.directlySetCurrentUser(s):t.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var t=this;return(0,f.Z)(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(i){yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,f.Z)(function*(){try{yield Ti(e)}catch(r){if("auth/network-request-failed"!==(null==r?void 0:r.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Rb(){if("undefined"==typeof navigator)return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return(0,f.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,f.Z)(function*(){const r=e?le(e):null;return r&&w(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return(0,f.Z)(function*(){if(!r._deleted)return e&&w(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue((0,f.Z)(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,f.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue((0,f.Z)(function*(){yield t.assertedPersistence.setPersistence(ut(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new lr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return(0,f.Z)(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,f.Z)(function*(){if(!t.redirectPersistenceManager){const r=e&&ut(e)||t._popupRedirectResolver;w(r,t,"argument-error"),t.redirectPersistenceManager=yield ar.create(t,[ut(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,f.Z)(function*(){var r,i;return t._isInitialized&&(yield t.queue((0,f.Z)(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,f.Z)(function*(){if(e===t.currentUser)return t.queue((0,f.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),a=this._isInitialized?Promise.resolve():this._initializationPromise;return w(a,this,"internal-error"),a.then(()=>s(this.currentUser)),"function"==typeof t?e.addObserver(t,r,i):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,f.Z)(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return w(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=s_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,f.Z)(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function Fe(n){return le(n)}class o_{constructor(e){this.auth=e,this.observer=null,this.addObserver=function By(n,e){const t=new Gy(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return w(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function a_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function c_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class u_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xe("not implemented")}_getIdTokenResponse(e){return Xe("not implemented")}_linkToIdToken(e,t){return Xe("not implemented")}_getReauthenticationResolver(e){return Xe("not implemented")}}function sl(){return sl=(0,f.Z)(function*(n,e){return we(n,"POST","/v1/accounts:update",e)}),sl.apply(this,arguments)}function al(){return al=(0,f.Z)(function*(n,e){return lt(n,"POST","/v1/accounts:signInWithPassword",ge(n,e))}),al.apply(this,arguments)}function fl(){return fl=(0,f.Z)(function*(n,e){return lt(n,"POST","/v1/accounts:signInWithEmailLink",ge(n,e))}),fl.apply(this,arguments)}function pl(){return pl=(0,f.Z)(function*(n,e){return lt(n,"POST","/v1/accounts:signInWithEmailLink",ge(n,e))}),pl.apply(this,arguments)}class wi extends u_{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new wi(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new wi(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,f.Z)(function*(){switch(t.signInMethod){case"password":return function r1(n,e){return al.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function c1(n,e){return fl.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:Ue(e,"internal-error")}})()}_linkToIdToken(e,t){var r=this;return(0,f.Z)(function*(){switch(r.signInMethod){case"password":return function h_(n,e){return sl.apply(this,arguments)}(e,{idToken:t,returnSecureToken:!0,email:r._email,password:r._password});case"emailLink":return function u1(n,e){return pl.apply(this,arguments)}(e,{idToken:t,email:r._email,oobCode:r._password});default:Ue(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function dt(n,e){return ml.apply(this,arguments)}function ml(){return ml=(0,f.Z)(function*(n,e){return lt(n,"POST","/v1/accounts:signInWithIdp",ge(n,e))}),ml.apply(this,arguments)}class Ei{constructor(e){var t,r,i,s,a,c;const u=hr(dr(e)),l=null!==(t=u.apiKey)&&void 0!==t?t:null,h=null!==(r=u.oobCode)&&void 0!==r?r:null,d=function g1(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);w(l&&h&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=h,this.continueUrl=null!==(s=u.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(a=u.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(c=u.tenantId)&&void 0!==c?c:null}static parseLink(e){const t=function _1(n){const e=hr(dr(n)).link,t=e?hr(dr(e)).deep_link_id:null,r=hr(dr(n)).deep_link_id;return(r?hr(dr(r)).link:null)||r||t||e||n}(e);try{return new Ei(t)}catch(r){return null}}}let d_=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return wi._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const i=Ei.parseLink(r);return w(i,"argument-error"),wi._fromEmailAndCode(t,i.code,i.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class Ut{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class y1 extends Ut{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function f_(n,e){return Il.apply(this,arguments)}function Il(){return Il=(0,f.Z)(function*(n,e){return lt(n,"POST","/v1/accounts:signUp",ge(n,e))}),Il.apply(this,arguments)}class Ge{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return(0,f.Z)(function*(){const s=yield yn._fromIdTokenResponse(e,r,i),a=p_(r);return new Ge({user:s,providerId:a,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return(0,f.Z)(function*(){yield e._updateTokensIfNecessary(r,!0);const i=p_(r);return new Ge({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function p_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class mo extends et{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,mo.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new mo(e,t,r,i)}}function m_(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?mo._fromErrorAndOperation(n,s,e,r):s})}function xl(n,e){return El.apply(this,arguments)}function El(){return El=(0,f.Z)(function*(n,e,t=!1){const r=yield ht(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ge._forOperation(n,"link",r)}),El.apply(this,arguments)}function Al(){return Al=(0,f.Z)(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const s=yield ht(n,m_(r,i,e,n),t);w(s.idToken,r,"internal-error");const a=uo(s.idToken);w(a,r,"internal-error");const{sub:c}=a;return w(n.uid===c,r,"user-mismatch"),Ge._forOperation(n,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&Ue(r,"user-mismatch"),s}}),Al.apply(this,arguments)}function y_(n,e){return Sl.apply(this,arguments)}function Sl(){return Sl=(0,f.Z)(function*(n,e,t=!1){const r="signIn",i=yield m_(n,r,e),s=yield Ge._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s}),Sl.apply(this,arguments)}function Nl(){return Nl=(0,f.Z)(function*(n,e){return y_(Fe(n),e)}),Nl.apply(this,arguments)}function Bl(){return Bl=(0,f.Z)(function*(n,e,t){const r=Fe(n),i=yield f_(r,{returnSecureToken:!0,email:e,password:t}),s=yield Ge._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s}),Bl.apply(this,arguments)}const yo="__sak";class T_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yo,"1"),this.storage.removeItem(yo),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const j1=(()=>{class n extends T_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function V1(){const n=ie();return rl(n)||ho(n)}()&&function Qb(){try{return!(!window||window===window.top)}catch(n){return!1}}(),this.fallbackToPolling=i_(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const c=this.storage.getItem(i);if(t.newValue!==c)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const s=()=>{const c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);!function Wb(){return function My(){const n=ie();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||a===t.newValue||t.newValue===t.oldValue?s():setTimeout(s,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,s=this;return(0,f.Z)(function*(){yield i().call(s,t,r),s.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return(0,f.Z)(function*(){const s=yield r().call(i,t);return i.localCache[t]=JSON.stringify(s),s})()}_remove(t){var r=()=>super._remove,i=this;return(0,f.Z)(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),I_=(()=>{class n extends T_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let $1=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return(0,f.Z)(function*(){const i=t,{eventId:s,eventType:a,data:c}=i.data,u=r.handlersMap[a];if(null==u||!u.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const l=Array.from(u).map(function(){var d=(0,f.Z)(function*(p){return p(i.origin,c)});return function(p){return d.apply(this,arguments)}}()),h=yield function H1(n){return Promise.all(n.map(function(){var e=(0,f.Z)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(l);i.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:h})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function rh(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class K1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return(0,f.Z)(function*(){const s="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,c;return new Promise((u,l)=>{const h=rh("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(p){const _=p;if(_.data.eventId===h)switch(_.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(_.data.response);break;default:clearTimeout(d),clearTimeout(a),l(new Error("invalid_response"))}}},i.handlers.add(c),s.port1.addEventListener("message",c.onMessage),i.target.postMessage({eventType:e,eventId:h,data:t},[s.port2])}).finally(()=>{c&&i.removeMessageHandler(c)})})()}}function _e(){return window}function ih(){return void 0!==_e().WorkerGlobalScope&&"function"==typeof _e().importScripts}function sh(){return(sh=(0,f.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(n){return null}})).apply(this,arguments)}const w_="firebaseLocalStorageDb",vo="firebaseLocalStorage",b_="fbase_key";class Ai{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function To(n,e){return n.transaction([vo],e?"readwrite":"readonly").objectStore(vo)}function oh(){const n=indexedDB.open(w_,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(vo,{keyPath:b_})}catch(i){t(i)}}),n.addEventListener("success",(0,f.Z)(function*(){const r=n.result;r.objectStoreNames.contains(vo)?e(r):(r.close(),yield function X1(){const n=indexedDB.deleteDatabase(w_);return new Ai(n).toPromise()}(),e(yield oh()))}))})}function x_(n,e,t){return ah.apply(this,arguments)}function ah(){return ah=(0,f.Z)(function*(n,e,t){const r=To(n,!0).put({[b_]:e,value:t});return new Ai(r).toPromise()}),ah.apply(this,arguments)}function ch(){return ch=(0,f.Z)(function*(n,e){const t=To(n,!1).get(e),r=yield new Ai(t).toPromise();return void 0===r?null:r.value}),ch.apply(this,arguments)}function E_(n,e){const t=To(n,!0).delete(e);return new Ai(t).toPromise()}const rx=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,f.Z)(function*(){return t.db||(t.db=yield oh()),t.db})()}_withRetries(t){var r=this;return(0,f.Z)(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield t(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,f.Z)(function*(){return ih()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,f.Z)(function*(){t.receiver=$1._getInstance(function J1(){return ih()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=(0,f.Z)(function*(i,s){return{keyProcessed:(yield t._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=(0,f.Z)(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,f.Z)(function*(){var r,i;if(t.activeServiceWorker=yield function W1(){return sh.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new K1(t.activeServiceWorker);const s=yield t.sender._send("ping",{},800);!s||(null===(r=s[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=s[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return(0,f.Z)(function*(){if(r.sender&&r.activeServiceWorker&&function Q1(){var n;return(null===(n=null==navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch(i){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const t=yield oh();return yield x_(t,yo,"1"),yield E_(t,yo),!0}catch(t){}return!1})()}_withPendingWrite(t){var r=this;return(0,f.Z)(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return(0,f.Z)(function*(){return i._withPendingWrite((0,f.Z)(function*(){return yield i._withRetries(s=>x_(s,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return(0,f.Z)(function*(){const i=yield r._withRetries(s=>function ex(n,e){return ch.apply(this,arguments)}(s,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return(0,f.Z)(function*(){return r._withPendingWrite((0,f.Z)(function*(){return yield r._withRetries(i=>E_(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,f.Z)(function*(){const r=yield t._withRetries(a=>{const c=To(a,!1).getAll();return new Ai(c).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:a,value:c}of r)s.add(a),JSON.stringify(t.localCache[a])!==JSON.stringify(c)&&(t.notifyListeners(a,c),i.push(a));for(const a of Object.keys(t.localCache))t.localCache[a]&&!s.has(a)&&(t.notifyListeners(a,null),i.push(a));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const s of Array.from(i))s(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function A_(n){return`__${n}${Math.floor(1e6*Math.random())}`}function Tn(n,e){return e?ut(e):(w(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}A_("rcb"),new _i(3e4,6e4);class yh extends u_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dt(e,this._buildIdpRequest())}_linkToIdToken(e,t){return dt(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return dt(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Tx(n){return y_(n.auth,new yh(n),n.bypassAuthState)}function Ix(n){const{auth:e,user:t}=n;return w(t,e,"internal-error"),function __(n,e){return Al.apply(this,arguments)}(t,new yh(n),n.bypassAuthState)}function wx(n){return vh.apply(this,arguments)}function vh(){return vh=(0,f.Z)(function*(n){const{auth:e,user:t}=n;return w(t,e,"internal-error"),xl(t,new yh(n),n.bypassAuthState)}),vh.apply(this,arguments)}new _i(2e3,1e4);const Si=new Map;class Ex extends class bx{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,f.Z)(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,f.Z)(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:a,error:c,type:u}=e;if(c)return void t.reject(c);const l={auth:t.auth,requestUri:r,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(u)(l))}catch(h){t.reject(h)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Tx;case"linkViaPopup":case"linkViaRedirect":return wx;case"reauthViaPopup":case"reauthViaRedirect":return Ix;default:Ue(this.auth,"internal-error")}}resolve(e){Mt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,f.Z)(function*(){let r=Si.get(t.auth._key());if(!r){try{const s=(yield function Cx(n,e){return xh.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}Si.set(t.auth._key(),r)}return t.bypassAuthState||Si.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return(0,f.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function xh(){return xh=(0,f.Z)(function*(n,e){const t=N_(e),r=k_(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i}),xh.apply(this,arguments)}function Ax(n,e){Si.set(n._key(),e)}function k_(n){return ut(n._redirectPersistence)}function N_(n){return lo("pendingRedirect",n.config.apiKey,n.name)}function D_(n,e){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,f.Z)(function*(n,e,t=!1){const r=Fe(n),i=Tn(r,e),a=yield new Ex(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a}),Dh.apply(this,arguments)}class Ox{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Rx(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return P_(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!P_(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ye(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(R_(e))}saveEventToCache(e){this.cachedEventUids.add(R_(e)),this.lastProcessedEventTime=Date.now()}}function R_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function P_({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===(null==e?void 0:e.code)}function Px(n){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,f.Z)(function*(n,e={}){return we(n,"GET","/v1/projects",e)}),Rh.apply(this,arguments)}const Mx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lx=/^https?/;function Ph(){return Ph=(0,f.Z)(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield Px(n);for(const t of e)try{if(Fx(t))return}catch(r){}Ue(n,"unauthorized-domain")}),Ph.apply(this,arguments)}function Fx(n){const e=gi(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return""===a.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&a.hostname===r}if(!Lx.test(t))return!1;if(Mx.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Zx=new _i(3e4,6e4);function M_(){const n=_e().___jsl;if(null!=n&&n.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let wo=null;function Vx(n){return wo=wo||function qx(n){return new Promise((e,t)=>{var r,i,s;function a(){M_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{M_(),t(Ye(n,"network-request-failed"))},timeout:Zx.get()})}if(null!==(i=null===(r=_e().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=_e().gapi)||void 0===s||!s.load){const c=A_("iframefcb");return _e()[c]=()=>{gapi.load?a():t(Ye(n,"network-request-failed"))},function C_(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Ye("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",function ax(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${c}`).catch(u=>t(u))}a()}}).catch(e=>{throw wo=null,e})}(n),wo}const Bx=new _i(5e3,15e3),Hx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$x=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kx(n){const e=n.config;w(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ju(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:n.name,v:fr},i=$x.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Mi(r).slice(1)}`}function Mh(){return Mh=(0,f.Z)(function*(n){const e=yield Vx(n),t=_e().gapi;return w(t,n,"internal-error"),e.open({where:document.body,url:Kx(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hx,dontclear:!0},r=>new Promise(function(){var i=(0,f.Z)(function*(s,a){yield r.restyle({setHideOnLeave:!1});const c=Ye(n,"network-request-failed"),u=_e().setTimeout(()=>{a(c)},Bx.get());function l(){_e().clearTimeout(u),s(r)}r.ping(l).then(l,()=>{a(c)})});return function(s,a){return i.apply(this,arguments)}}()))}),Mh.apply(this,arguments)}const Wx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class L_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function U_(n,e,t,r,i,s){w(n.config.authDomain,n,"auth-domain-config-required"),w(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:fr,eventId:i};if(e instanceof Ut){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",function Vy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,l]of Object.entries(s||{}))a[u]=l}if(e instanceof y1){const u=e.getScopes().filter(l=>""!==l);u.length>0&&(a.scopes=u.join(","))}n.tenantId&&(a.tid=n.tenantId);const c=a;for(const u of Object.keys(c))void 0===c[u]&&delete c[u];return`${function iE({config:n}){return n.emulator?ju(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}(n)}?${Mi(c).slice(1)}`}const Lh="webStorageSupport",oE=class sE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=I_,this._completeRedirectFn=D_,this._overrideRedirectResult=Ax}_openPopup(e,t,r,i){var s=this;return(0,f.Z)(function*(){var a;Mt(null===(a=s.eventManagers[e._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()");const c=U_(e,t,r,gi(),i);return function eE(n,e,t,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},Wx),{width:r.toString(),height:i.toString(),top:s,left:a}),l=ie().toLowerCase();t&&(c=Xg(l)?"_blank":t),Yg(l)&&(e=e||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((p,[_,v])=>`${p}${_}=${v},`,"");if(function zb(n=ie()){var e;return ho(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(l)&&"_self"!==c)return function tE(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",c),new L_(null);const d=window.open(e||"",c,h);w(d,n,"popup-blocked");try{d.focus()}catch(p){}return new L_(d)}(e,c,rh())})()}_openRedirect(e,t,r,i){var s=this;return(0,f.Z)(function*(){return yield s._originValidation(e),function z1(n){_e().location.href=n}(U_(e,t,r,gi(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Mt(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return(0,f.Z)(function*(){const r=yield function zx(n){return Mh.apply(this,arguments)}(e),i=new Ox(e);return r.register("authEvent",s=>(w(null==s?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lh,{type:Lh},i=>{var s;const a=null===(s=null==i?void 0:i[0])||void 0===s?void 0:s[Lh];void 0!==a&&t(!!a),Ue(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function Ux(n){return Ph.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return i_()||rl()||ho()}};var Z_="@firebase/auth";class aE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,f.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((null==r?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){w(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const hE=Wh("authIdTokenMaxAge")||300;let V_=null;const dE=n=>function(){var e=(0,f.Z)(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>hE)return;const s=null==r?void 0:r.token;V_!==s&&(V_=s,yield fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function fE(n=cd()){const e=Fi(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function Nb(n,e){const t=Fi(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(Pi(t.getOptions(),null!=e?e:{}))return i;Ue(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:oE,persistence:[rx,j1,I_]}),r=Wh("authTokenSyncURL");if(r){const s=dE(r);(function M1(n,e,t){le(n).beforeAuthStateChanged(e,t)})(t,s,()=>s(t.currentUser)),function P1(n,e,t,r){le(n).onIdTokenChanged(e,t,r)}(t,a=>s(a))}const i=zh("auth");return i&&function Xb(n,e,t){const r=Fe(n);w(r._canInitEmulator,r,"emulator-config-failed"),w(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!(null==t||!t.disableWarnings),s=a_(e),{host:a,port:c}=function e1(n){const e=a_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:c_(r.substr(s.length+1))}}{const[s,a]=r.split(":");return{host:s,port:c_(a)}}}(e);r.config.emulator={url:`${s}//${a}${null===c?"":`:${c}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function t1(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}!function uE(n){wn(new Bt("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:a}=r.options;return((c,u)=>{w(s&&!s.includes(":"),"invalid-api-key",{appName:c.name}),w(!(null!=a&&a.includes(":")),"argument-error",{appName:c.name});const l={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:s_(n)},h=new Yb(c,u,l);return function Db(n,e){const t=(null==e?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ut);null!=e&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(h,t),h})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),wn(new Bt("auth-internal",e=>{const t=Fe(e.getProvider("auth").getImmediate());return new aE(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),yt(Z_,"0.21.3",function cE(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),yt(Z_,"0.21.3","esm2017")}("Browser"),yt("firebase","9.17.1","app");const gE=ad({apiKey:"AIzaSyAQszHYa_YW__6DdJDCqlKOsRBpszVz8sQ",authDomain:"rktect-rest.firebaseapp.com",databaseURL:"https://rktect-rest-default-rtdb.firebaseio.com",projectId:"rktect-rest",storageBucket:"rktect-rest.appspot.com",messagingSenderId:"797842765239",appId:"1:797842765239:web:e3ddfbb57fbdff9dd42432"});var Ft=L(433),bo=L(1737);function yE(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){o.CHM(t),o.oxw();const i=o.MAs(2),s=o.oxw();return o.KtG(s.createBook(i))}),o._uU(1,"Create Book"),o.qZA()}}function vE(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){o.CHM(t),o.oxw();const i=o.MAs(2),s=o.oxw();return o.KtG(s.updateBook(i))}),o._uU(1,"Update Book"),o.qZA()}}function TE(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"ang-modal",2,3),o._UZ(3,"ang-pretty-json-input",4),o.YNc(4,yE,2,0,"button",5),o.YNc(5,vE,2,0,"button",5),o.qZA(),o._UZ(6,"hr"),o.TgZ(7,"button",6),o.NdJ("click",function(){o.CHM(t);const i=o.MAs(2),s=o.oxw();return o.KtG(s.addBook(i))}),o._uU(8,"Add"),o.qZA(),o._UZ(9,"hr")(10,"ui-table",7),o.TgZ(11,"ui-table-actions",8),o.NdJ("onDelete",function(i){o.CHM(t);const s=o.oxw();return o.KtG(s.onDelete(i))})("onEdit",function(i){o.CHM(t);const s=o.MAs(2),a=o.oxw();return o.KtG(a.onEdit(i,s))})("onView",function(i){o.CHM(t);const s=o.MAs(2),a=o.oxw();return o.KtG(a.onView(i,s))}),o.qZA(),o.TgZ(12,"ui-table-inline-editing-one",9),o.NdJ("onDelete",function(i){o.CHM(t);const s=o.oxw();return o.KtG(s.onDelete(i))})("onUpdate",function(i){o.CHM(t);const s=o.MAs(2),a=o.oxw();return o.KtG(a.onEdit(i,s))}),o.qZA(),o.TgZ(13,"ui-table-inline-editing-two",10),o.NdJ("onUpdate",function(i){o.CHM(t);const s=o.MAs(2),a=o.oxw();return o.KtG(a.onEdit(i,s))}),o.qZA(),o.BQk()}if(2&n){const t=o.oxw();o.xp6(3),o.Q6J("data",t.bookForm),o.xp6(1),o.Q6J("ngIf","add"===t.action),o.xp6(1),o.Q6J("ngIf","edit"===t.action),o.xp6(5),o.Q6J("columns",t.cols1)("customHeads",t.customHeads1)("rows",t.books),o.xp6(1),o.Q6J("columns",t.cols)("customHeads",t.customHeads)("rows",t.books),o.xp6(1),o.Q6J("columns",t.cols)("customHeads",t.customHeads)("rows",t.books),o.xp6(1),o.Q6J("columns",t.cols1)("customHeads",t.customHeads1)("rows",t.books)}}function IE(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"form",12)(1,"label"),o._uU(2,"Email "),o.TgZ(3,"em"),o._uU(4,"(Required)"),o.qZA(),o._UZ(5,"input",13),o.qZA(),o.TgZ(6,"label"),o._uU(7,"Password "),o._UZ(8,"input",14),o.qZA(),o.TgZ(9,"span")(10,"button",6),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.signUp())}),o._uU(11,"SignUp"),o.qZA(),o.TgZ(12,"button",6),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.signIn())}),o._uU(13,"SignIn"),o.qZA()()()}if(2&n){const t=o.oxw(2);o.Q6J("formGroup",t.singUpForm)}}function wE(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"span"),o._uU(2,"Login as : "),o.TgZ(3,"em"),o._uU(4),o.qZA()(),o.TgZ(5,"button",6),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.signOut())}),o._uU(6,"SignOut"),o.qZA(),o.BQk()}if(2&n){const t=o.oxw(2);o.xp6(4),o.Oqu(null==t.user?null:t.user.email)}}function bE(n,e){if(1&n&&(o.ynx(0),o.YNc(1,IE,14,1,"form",11),o.YNc(2,wE,7,1,"ng-container",1),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",!t.user),o.xp6(1),o.Q6J("ngIf",t.user)}}function xE(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.loadMore())}),o._uU(1,"load More"),o.qZA()}}const B_=function(){return["name","author"]};function EE(n,e){if(1&n&&(o.ynx(0),o._UZ(1,"ui-table",15),o.YNc(2,xE,2,0,"button",5),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("columns",o.DdM(3,B_))("rows",t.loadMoreData.data),o.xp6(1),o.Q6J("ngIf",!t.loadMoreData.empty)}}function CE(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.pre())}),o._uU(1,"pre"),o.qZA()}}function AE(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.next())}),o._uU(1,"Next"),o.qZA()}}function SE(n,e){if(1&n&&(o.ynx(0),o._UZ(1,"ui-table",15),o.YNc(2,CE,2,0,"button",5),o.YNc(3,AE,2,0,"button",5),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("columns",o.DdM(4,B_))("rows",t.paginationData.data),o.xp6(1),o.Q6J("ngIf",!t.paginationData.empty),o.xp6(1),o.Q6J("ngIf",!t.paginationData.empty)}}const kE=function(){return["Books","auth","pagination load more","pagination pre and next"]};let NE=(()=>{class n extends class _E{constructor(){this.db=cb(gE),this.auth=fE(),function ub(n,e){!function Ig(n){if(n._initialized||n._terminated)throw new T(g.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}(n=F(n,J));const t=de(n),r=n._freezeSettings(),i=new yu;return function Tg(n,e,t){const r=new pe;return n.asyncQueue.enqueue((0,f.Z)(function*(){try{yield fg(n,t),yield pg(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(a=s).name?a.code===g.FAILED_PRECONDITION||a.code===g.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw s;Sn("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var a})).then(()=>r.promise)}(t,i,new Bw(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(this.db).catch(e=>{"failed-precondition"==e.code?console.log("persistance failed"):"unimplemented"==e.code&&console.log("persistance not available")})}get colRef(){return function $w(n,e,...t){if(n=le(n),vu("collection","path",e),n instanceof hi){const r=q.fromString(e,...t);return ag(r),new Je(n,null,r)}{if(!(n instanceof ce||n instanceof Je))throw new T(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(q.fromString(e,...t));return ag(r),new Je(n.firestore,null,r)}}(this.db,this.collectionPath)}getCollectionData(){return new Promise((e,t)=>{oo(this.colRef).then(r=>{let i=this.setData2(r);e(i)}).catch(r=>{t(r.message)})})}getSingleDoc(e){const t=Xn(this.db,this.collectionPath,e);return new Promise((r,i)=>function Ib(n){n=F(n,ce);const e=F(n.firestore,J);return function _g(n,e,t={}){const r=new pe;return n.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function(i,s,a,c,u){const l=new Hs({next:d=>{s.enqueueAndForget(()=>Gc(i,h));const p=d.docs.has(a);!p&&d.fromCache?u.reject(new T(g.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&c&&"server"===c.source?u.reject(new T(g.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new $c(Pn(a.path),l,{includeMetadataChanges:!0,Nu:!0});return Vc(i,h)}(yield er(n),n.asyncQueue,e,t,r)})),r.promise}(de(e),n._key).then(t=>qu(e,n,t))}(t).then(s=>{let a=this.transformSingleDoc(s);r(a)}).catch(s=>{i(s.message)}))}getSingleDocFromCache(e){var t=this;return(0,f.Z)(function*(){const r=Xn(t.db,t.collectionPath,e);try{const i=yield wb(r);console.log("Cached document data:",i.data())}catch(i){console.log("Error getting cached document:",i)}})()}getCollectionRealTime(e){return this.unsubscribe=Zu(this.colRef,t=>{e(this.setData2(t))})}g(){Zu(void 0,t=>{t.docChanges().forEach(r=>{"added"===r.type&&console.log("New city: ",r.doc.data()),"modified"===r.type&&console.log("Modified city: ",r.doc.data()),"removed"===r.type&&console.log("Removed city: ",r.doc.data())})})}getDocRealTime(e,t){return Zu(Xn(this.db,this.collectionPath,e),i=>{t(this.transformSingleDoc(i))})}addingDoc(e={}){return function Eb(n,e){const t=F(n.firestore,J),r=Xn(n),i=function Fu(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e);return mi(t,[Nu(nr(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,X.exists(!1))]).then(()=>r)}(this.colRef,Object.assign({createdAt:Vu(),updatedAt:Vu()},e))}deletingDoc(e){return function xb(n){return mi(F(n.firestore,J),[new Fn(n._key,X.none())])}(Xn(this.db,this.collectionPath,e))}updatingDoc(e,t){return function bb(n,e,t,...r){n=F(n,ce);const i=F(n.firestore,J),s=nr(i);let a;return a="string"==typeof(e=le(e))||e instanceof tr?function Cg(n,e,t,r,i,s){const a=n.da(1,e,t),c=[Ru(e,r,t)],u=[i];if(s.length%2!=0)throw new T(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)c.push(Ru(e,s[p])),u.push(s[p+1]);const l=[],h=Ae.empty();for(let p=c.length-1;p>=0;--p)if(!Ng(l,c[p])){const _=c[p];let v=u[p];v=le(v);const E=a.ca(_);if(v instanceof di)l.push(_);else{const S=gn(v,E);null!=S&&(l.push(_),h.set(_,S))}}const d=new Pe(l);return new wg(h,d,a.fieldTransforms)}(s,"updateDoc",n._key,e,t,r):function Eg(n,e,t,r){const i=n.da(1,e,t);Ou("Data must be an object, but it was:",i,r);const s=[],a=Ae.empty();Xt(r,(u,l)=>{const h=Qs(e,u,t);l=le(l);const d=i.ca(h);if(l instanceof di)s.push(h);else{const p=gn(l,d);null!=p&&(s.push(h),a.set(h,p))}});const c=new Pe(s);return new wg(a,c,i.fieldTransforms)}(s,"updateDoc",n._key,e),mi(i,[a.toMutation(n._key,X.exists(!0))])}(Xn(this.db,this.collectionPath,e),Object.assign({updatedAt:Vu()},t))}signUpWithEmailPass({email:e,password:t}){return function E1(n,e,t){return Bl.apply(this,arguments)}(this.auth,e,t).then(r=>Promise.resolve(r.user)).catch(r=>Promise.reject(r.message))}signInWithEmailPass({email:e,password:t}){return function C1(n,e,t){return function kl(n,e){return Nl.apply(this,arguments)}(le(n),d_.credential(e,t))}(this.auth,e,t).then(r=>Promise.resolve(r.user)).catch(r=>Promise.reject(r.message))}onSignOut(){return function U1(n){return le(n).signOut()}(this.auth).then(e=>Promise.resolve(e)).catch(e=>Promise.reject(e.message))}subscribingAuthChangedRealTime(e){return function L1(n,e,t,r){return le(n).onAuthStateChanged(e,t,r)}(this.auth,t=>{e(t)})}getPaginationData1(e={latestDoc:null,empty:!1,data:[]},t=5){return new Promise((r,i)=>{oo(Xs(this.colRef,eo("createdAt"),Uu(e.latestDoc||0),no(t))).then(a=>{let c=this.setData2(a);e.latestDoc=a.docs[a.docs.length-1],e.data=[...e.data,...c],e.empty=a.empty,r(e)}).catch(a=>{i(a.message)})})}getPaginationData(e={latestDoc:null,empty:!1,data:[],size:0},t=5){var r=this;return(0,f.Z)(function*(){if(!e.empty)try{const i=Xs(r.colRef,eo("createdAt"),Uu(e.latestDoc||0),no(t)),s=yield oo(i);let a=r.setData2(s);return e.latestDoc=s.docs[s.docs.length-1],e.data=[...e.data,...a],e.empty=s.empty,e.size=s.size,e}catch(i){return i}})()}unsubscribeRealTime(){this.unsubscribe()}nextPage(e={latestDoc:null,empty:!1,data:[],size:0},t=5){var r=this;return(0,f.Z)(function*(){const i=Xs(r.colRef,eo("createdAt"),Uu(e.latestDoc||0),no(t));return yield r.handlePagination(i)})()}prePage(e={latestDoc:null,empty:!1,data:[],size:0},t=5){var r=this;return(0,f.Z)(function*(){const i=Xs(r.colRef,eo("createdAt"),function yb(...n){return io._create("endBefore",n,!1)}(e.latestDoc||0),no(t));return yield r.handlePagination(i,!1)})()}setData(e){return e.docs.map(t=>Object.assign({id:t.id},t.data()))}setData2(e){let t=[];return e.docs.forEach(r=>{t.push(Object.assign(Object.assign({},r.data()),{id:r.id}))}),t}transformSingleDoc(e){return Object.assign(Object.assign({},e.data()),{id:e.id})}handlePagination(e,t=!0){var r=this;return(0,f.Z)(function*(){try{const i=yield oo(e);let s=r.setData2(i);return{latestDoc:t?i.docs[i.docs.length-1]:i.docs[0],data:s,empty:i.empty,size:i.size}}catch(i){return i}})()}}{constructor(t){super(),this.fb=t,this.bookForm={name:"",author:""},this.selectTab=1,this.books=[],this.cols=["","name","author"],this.customHeads=["Action","Book name","Book author"],this.cols1=["name","author"],this.customHeads1=["Book name","Book author"],this.action="add",this.paginationData={data:[],latestDoc:null,empty:!1,size:0},this.loadMoreData={data:[],latestDoc:null,empty:!1,size:0},this.collectionPath="books",this.singUpForm=this.fb.group({email:["",[C.kI.required,C.kI.email]],password:["",[C.kI.required]]})}ngOnInit(){this.getCollectionRealTime(t=>{this.books=t,console.log(t)}),this.subscribingAuthChangedRealTime(t=>{this.user=t}),this.loadMore()}createBook(t){this.addingDoc(this.bookForm).then(()=>{t.close()})}updateBook(t){this.updatingDoc(this.docId,this.bookForm).then(()=>{this.docId=null,t.close()})}onView(t,r){this.action="view",this.getSingleDoc(t.id).then(i=>{this.bookForm=i,r.open()})}onDelete(t){this.action="delete",confirm("Are you sure to delete doc ?")&&this.deletingDoc(t.id).then()}onEdit(t,r){this.action="edit",this.getSingleDoc(t.id).then(i=>{let{name:s,author:a,id:c}=i;this.bookForm={name:s,author:a},this.docId=c,r.open()})}onSelectTab(t){this.selectTab=t}addBook(t){this.bookForm={name:"",author:""},this.action="add",t.open()}signUp(){this.singUpForm.valid&&this.signUpWithEmailPass(this.singUpForm.value).then(()=>{this.singUpForm.reset()})}signIn(){this.singUpForm.valid&&this.signInWithEmailPass(this.singUpForm.value).then(()=>{this.singUpForm.reset()})}signOut(){this.onSignOut().then()}loadMore(){this.getPaginationData(this.loadMoreData).then(t=>{console.log(t),this.loadMoreData=t})}next(){this.nextPage(this.paginationData).then(t=>{console.log(t),this.paginationData=t})}pre(){this.prePage(this.paginationData).then(t=>{console.log(t),this.paginationData=t})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(C.qu))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-firestore"]],features:[o.qOj],decls:5,vars:6,consts:[["color","red",3,"tabs","onClick"],[4,"ngIf"],["id","custom-modal-1","width","50vw"],["pop",""],["useCase","VALID_FORM",3,"data"],[3,"click",4,"ngIf"],[3,"click"],["table","bordered",3,"columns","customHeads","rows"],["table","bordered",3,"columns","customHeads","rows","onDelete","onEdit","onView"],["table","bordered",3,"columns","customHeads","rows","onDelete","onUpdate"],["table","bordered",3,"columns","customHeads","rows","onUpdate"],["class","contact-form",3,"formGroup",4,"ngIf"],[1,"contact-form",3,"formGroup"],["formControlName","email","type","email"],["formControlName","password"],[3,"columns","rows"]],template:function(t,r){1&t&&(o.TgZ(0,"tg-tabs",0),o.NdJ("onClick",function(s){return r.onSelectTab(s)}),o.qZA(),o.YNc(1,TE,14,15,"ng-container",1),o.YNc(2,bE,3,2,"ng-container",1),o.YNc(3,EE,3,4,"ng-container",1),o.YNc(4,SE,4,5,"ng-container",1)),2&t&&(o.Q6J("tabs",o.DdM(5,kE)),o.xp6(1),o.Q6J("ngIf",1===r.selectTab),o.xp6(1),o.Q6J("ngIf",2===r.selectTab),o.xp6(1),o.Q6J("ngIf",3===r.selectTab),o.xp6(1),o.Q6J("ngIf",4===r.selectTab))},dependencies:[M.O5,C._Y,C.Fj,C.JJ,C.JL,C.sg,C.u,Ft.ac,Ft.Kb,Ft.BB,Ft.az,bo.ss,bo.zS,Ft.n4]}),n})(),DE=(()=>{class n{constructor(t,r){this.vcRef=t,this.templateRef=r}set visibility(t){t?this.vcRef.clear():this.vcRef.createEmbeddedView(this.templateRef)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","visibility",""]],inputs:{visibility:"visibility"}}),n})();const OE=["cChild"],RE=["cChildren"],PE=["slide"];function ME(n,e){1&n&&(o.TgZ(0,"div"),o._uU(1,"@ViewChild running"),o.qZA())}function LE(n,e){if(1&n&&(o.TgZ(0,"ul"),o.GkF(1,0),o.qZA()),2&n){const t=e.$implicit;o.xp6(1),o.Q6J("ngTemplateOutlet",t)}}function UE(n,e){if(1&n&&(o.TgZ(0,"li",null,4),o._uU(2),o.qZA()),2&n){const t=e.$implicit;o.xp6(2),o.Oqu(t)}}function FE(n,e){1&n&&o._uU(0,"11")}const ZE=function(){return[1,2,3,4]};let qE=(()=>{class n{constructor(){}ngOnInit(){}ngAfterViewInit(){console.log(this.slides)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-view-child-content"]],contentQueries:function(t,r,i){if(1&t&&(o.Suo(i,o.Rgc,5),o.Suo(i,OE,5,o.Rgc),o.Suo(i,RE,4,o.Rgc)),2&t){let s;o.iGM(s=o.CRH())&&(r.content=s.first),o.iGM(s=o.CRH())&&(r.cChild=s.first),o.iGM(s=o.CRH())&&(r.cChildren=s)}},viewQuery:function(t,r){if(1&t&&(o.Gf(o.Rgc,5),o.Gf(PE,5,o.SBq)),2&t){let i;o.iGM(i=o.CRH())&&(r.view=i.first),o.iGM(i=o.CRH())&&(r.slides=i)}},decls:12,vars:6,consts:[[3,"ngTemplateOutlet"],["view",""],[4,"ngFor","ngForOf"],["vChildren",""],["slide",""]],template:function(t,r){if(1&t&&(o.GkF(0,0)(1,0),o.YNc(2,ME,2,0,"ng-template",null,1,o.W1O),o.YNc(4,LE,2,1,"ul",2),o.TgZ(5,"ul"),o.GkF(6,0),o.qZA(),o.TgZ(7,"ul"),o.YNc(8,UE,3,1,"li",2),o.qZA(),o.TgZ(9,"ul",null,3),o.YNc(11,FE,1,0,"ng-template"),o.qZA()),2&t){const i=o.MAs(3);o.Q6J("ngTemplateOutlet",r.content),o.xp6(1),o.Q6J("ngTemplateOutlet",i),o.xp6(3),o.Q6J("ngForOf",r.cChildren),o.xp6(2),o.Q6J("ngTemplateOutlet",r.cChild),o.xp6(2),o.Q6J("ngForOf",o.DdM(5,ZE))}},dependencies:[M.sg,M.tP]}),n})();const VE=["template"],BE=["template1"],GE=["container"];function jE(n,e){1&n&&o.GkF(0)}function HE(n,e){1&n&&(o._uU(0),o._UZ(1,"br")),2&n&&o.hij("This is a template. ",e.message,"")}function $E(n,e){1&n&&(o.TgZ(0,"h3"),o._uU(1,"Template Content"),o.qZA(),o.TgZ(2,"h5"),o._uU(3,"Dynamically Generated!"),o.qZA())}function KE(n,e){1&n&&(o.TgZ(0,"div",10),o._uU(1," default "),o.qZA())}function zE(n,e){1&n&&o.GkF(0)}function WE(n,e){1&n&&(o.TgZ(0,"div")(1,"p"),o._uU(2,"This div is visible"),o.qZA()())}function QE(n,e){1&n&&o._uU(0,"@ContentChild running")}function JE(n,e){1&n&&(o.TgZ(0,"li"),o._uU(1,"A"),o.qZA(),o.TgZ(2,"li"),o._uU(3,"B"),o.qZA())}function YE(n,e){1&n&&(o.TgZ(0,"li"),o._uU(1,"1"),o.qZA(),o.TgZ(2,"li"),o._uU(3,"2"),o.qZA())}function XE(n,e){1&n&&(o.TgZ(0,"li"),o._uU(1,"3"),o.qZA(),o.TgZ(2,"li"),o._uU(3,"4"),o.qZA())}function eC(n,e){1&n&&(o.TgZ(0,"li"),o._uU(1,"5"),o.qZA(),o.TgZ(2,"li"),o._uU(3,"6"),o.qZA())}const tC=function(){return{message:"This is a message in context"}};let nC=(()=>{class n{constructor(t){this.vcRef=t}ngAfterContentInit(){this.template&&(this.vcRef.createEmbeddedView(this.template),this.vcRef.createEmbeddedView(this.template),this.vcRef.createEmbeddedView(this.template))}ngOnInit(){}ngAfterViewInit(){const t=this.tpl.createEmbeddedView(null);this.ctr.insert(t),this.vcRef.createEmbeddedView(this.tpl)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-projection"]],viewQuery:function(t,r){if(1&t&&(o.Gf(VE,5),o.Gf(BE,5,o.Rgc),o.Gf(GE,5,o.s_b)),2&t){let i;o.iGM(i=o.CRH())&&(r.template=i.first),o.iGM(i=o.CRH())&&(r.tpl=i.first),o.iGM(i=o.CRH())&&(r.ctr=i.first)}},inputs:{headerTemplate:"headerTemplate"},decls:28,vars:6,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],["template",""],["container",""],["template1",""],["defaultTabButtons",""],[4,"ngTemplateOutlet"],[3,"click"],[4,"visibility"],["cChild",""],["cChildren",""],[1,"default-tab-buttons"]],template:function(t,r){if(1&t&&(o.TgZ(0,"h1"),o._uU(1,"TemplateRef"),o.qZA(),o.YNc(2,jE,1,0,"ng-container",0),o._UZ(3,"hr"),o.YNc(4,HE,2,1,"ng-template",null,1,o.W1O),o.TgZ(6,"h1"),o._uU(7,"View Container Ref"),o.qZA(),o.GkF(8,null,2),o.YNc(10,$E,4,0,"ng-template",null,3,o.W1O),o.YNc(12,KE,2,0,"ng-template",null,4,o.W1O),o.YNc(14,zE,1,0,"ng-container",5),o.TgZ(15,"button",6),o.NdJ("click",function(){return r.visibility=!r.visibility}),o._uU(16),o.qZA(),o.YNc(17,WE,3,0,"div",7),o.TgZ(18,"app-view-child-content"),o.YNc(19,QE,1,0,"ng-template"),o.YNc(20,JE,4,0,"ng-template",null,8,o.W1O),o.YNc(22,YE,4,0,"ng-template",null,9,o.W1O),o.YNc(24,XE,4,0,"ng-template",null,9,o.W1O),o.YNc(26,eC,4,0,"ng-template",null,9,o.W1O),o.qZA()),2&t){const i=o.MAs(5),s=o.MAs(13);o.xp6(2),o.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",o.DdM(5,tC)),o.xp6(12),o.Q6J("ngTemplateOutlet",r.headerTemplate?r.headerTemplate:s),o.xp6(2),o.hij("Toggle value of Visibility to ",!r.visibility,""),o.xp6(1),o.Q6J("visibility",r.visibility)}},dependencies:[M.tP,DE,qE]}),n})(),rC=(()=>{class n{constructor(){this.name="ABC - 123",this.height=200,this.colWidth=40}ngOnInit(){}getWidth(){return{width:this.colWidth+"px"}}getHeight(){return{height:this.height+"px"}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-rotate-vertical"]],decls:20,vars:12,consts:[[1,"wrapper"],[1,"controls"],["for","points"],["type","range","id","points","name","points",3,"min","max","ngModel","ngModelChange"],["for","points1"],["type","range","id","points1","name","points",3,"min","max","ngModel","ngModelChange"],[1,"container","smooth",3,"ngStyle"],[1,"col","smooth",3,"ngStyle"],[1,"rotate","rotate-up"],[1,"content"],["placeholder","Vertical text",3,"ngModel","ngModelChange"],[1,"rotate","rotate-down"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div"),o._uU(3," Column width: "),o.TgZ(4,"label",2),o._uU(5,"Points (between 30 and 100):"),o.qZA(),o.TgZ(6,"input",3),o.NdJ("ngModelChange",function(s){return r.colWidth=s}),o.qZA()(),o.TgZ(7,"div")(8,"label",4),o._uU(9,"Points (between 100 and 500):"),o.qZA(),o.TgZ(10,"input",5),o.NdJ("ngModelChange",function(s){return r.height=s}),o.qZA()()(),o.TgZ(11,"div",6)(12,"div",7)(13,"span",8),o._uU(14),o.qZA()(),o.TgZ(15,"div",9)(16,"input",10),o.NdJ("ngModelChange",function(s){return r.name=s}),o.qZA()(),o.TgZ(17,"div",7)(18,"span",11),o._uU(19),o.qZA()()()()),2&t&&(o.xp6(6),o.Q6J("min",30)("max",100)("ngModel",r.colWidth),o.xp6(4),o.Q6J("min",100)("max",500)("ngModel",r.height),o.xp6(1),o.Q6J("ngStyle",r.getHeight()),o.xp6(1),o.Q6J("ngStyle",r.getWidth()),o.xp6(2),o.Oqu(r.name),o.xp6(2),o.Q6J("ngModel",r.name),o.xp6(1),o.Q6J("ngStyle",r.getWidth()),o.xp6(2),o.Oqu(r.name))},dependencies:[M.PC,C.Fj,C.eT,C.JJ,C.On],styles:["p{font-family:Lato,serif}.controls{margin:20px 10px}.wrapper{display:flex;flex-direction:column;align-items:center}.container{margin:10px;display:flex;border:2px solid rgb(48,100,184);box-shadow:3px 3px 20px #80808080;border-radius:4px;max-width:600px;min-width:250px;width:100%}.smooth{transition:.3s ease-in-out}.content{display:flex;flex:1;align-items:center;flex-direction:column;justify-content:center}.col{background-color:#3064b8;width:40px;font-size:2em;color:#fff;white-space:nowrap;overflow:hidden;position:relative}.rotate{position:absolute;top:50%;left:50%}.rotate-up{transform:translate(-50%) translateY(-50%) rotate(-90deg)}.rotate-down{transform:translate(-50%) translateY(-50%) rotate(90deg)}.rotate90{transform:rotate(90deg)}\n"],encapsulation:3}),n})();var iC=L(8651);let sC=(()=>{class n{constructor(t){this.imagesService=t,this.images=this.imagesService.images}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(iC.C))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-gallery-grid"]],decls:14,vars:6,consts:[[1,"container"],[1,"gallery"],[1,"gallery__item","gallery__item--1"],["alt","Image 1",1,"gallery__img",3,"src"],[1,"gallery__item","gallery__item--2"],["alt","Image 2",1,"gallery__img",3,"src"],[1,"gallery__item","gallery__item--3"],["alt","Image 3",1,"gallery__img",3,"src"],[1,"gallery__item","gallery__item--4"],["alt","Image 4",1,"gallery__img",3,"src"],[1,"gallery__item","gallery__item--5"],["alt","Image 5",1,"gallery__img",3,"src"],[1,"gallery__item","gallery__item--6"],["alt","Image 6",1,"gallery__img",3,"src"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"figure",2),o._UZ(3,"img",3),o.qZA(),o.TgZ(4,"figure",4),o._UZ(5,"img",5),o.qZA(),o.TgZ(6,"figure",6),o._UZ(7,"img",7),o.qZA(),o.TgZ(8,"figure",8),o._UZ(9,"img",9),o.qZA(),o.TgZ(10,"figure",10),o._UZ(11,"img",11),o.qZA(),o.TgZ(12,"figure",12),o._UZ(13,"img",13),o.qZA()()()),2&t&&(o.xp6(3),o.Q6J("src",r.images[0].src,o.LSH),o.xp6(2),o.Q6J("src",r.images[1].src,o.LSH),o.xp6(2),o.Q6J("src",r.images[2].src,o.LSH),o.xp6(2),o.Q6J("src",r.images[3].src,o.LSH),o.xp6(2),o.Q6J("src",r.images[4].src,o.LSH),o.xp6(2),o.Q6J("src",r.images[5].src,o.LSH))},styles:["*,*:after,*:before{margin:0;padding:0;box-sizing:inherit}.container{width:60%;margin:2rem auto}.gallery{display:grid;grid-template-columns:repeat(8,1fr);grid-template-rows:repeat(8,5vw);grid-gap:15px}.gallery__img{width:100%;height:100%;object-fit:cover;display:block}.gallery__item--1{grid-column-start:1;grid-column-end:3;grid-row-start:1;grid-row-end:3}.gallery__item--2{grid-column-start:3;grid-column-end:5;grid-row-start:1;grid-row-end:3}.gallery__item--3{grid-column-start:5;grid-column-end:9;grid-row-start:1;grid-row-end:6}.gallery__item--4{grid-column-start:1;grid-column-end:5;grid-row-start:3;grid-row-end:6}.gallery__item--5{grid-column-start:1;grid-column-end:5;grid-row-start:6;grid-row-end:9}.gallery__item--6{grid-column-start:5;grid-column-end:9;grid-row-start:6;grid-row-end:9}\n"],encapsulation:3}),n})(),oC=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-glassmorphism-card"]],decls:8,vars:0,consts:[["src","https://s3.us-east-2.amazonaws.com/ui.glass/shape.svg","alt","",1,"shape"],[1,"glass-card"],[1,"glass-card-title"],["href","https://ui.glass"]],template:function(t,r){1&t&&(o._UZ(0,"img",0),o.TgZ(1,"div",1)(2,"h3",2),o._uU(3,"Glassmorphism is awesome"),o.qZA(),o.TgZ(4,"p"),o._uU(5,"A modern CSS UI library based on the glassmorphism design principles that will help you quickly design and build beautiful websites and applications."),o.qZA(),o.TgZ(6,"a",3),o._uU(7,"Read more"),o.qZA()())},styles:["[_nghost-%COMP%]{display:block;padding:4.5rem;margin:0;background:#edc0bf;background:linear-gradient(90deg,#edc0bf 0,#c4caef 58%);font-family:Inter,sans-serif}.glass-card[_ngcontent-%COMP%]{width:400px;height:auto;padding:2rem;border-radius:1rem;background:rgba(255,255,255,.7);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.glass-card-title[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem;font-size:1.2rem}p[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{font-size:1rem}a[_ngcontent-%COMP%]{color:#4d4ae8;text-decoration:none}.shape[_ngcontent-%COMP%]{position:absolute;width:150px;top:.5rem;left:.5rem}"]}),n})(),aC=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-grid-layout"]],decls:8,vars:0,consts:[[1,"site"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o._UZ(1,"header"),o.TgZ(2,"main"),o._UZ(3,"section")(4,"section")(5,"section"),o.qZA(),o._UZ(6,"aside")(7,"footer"),o.qZA())},styles:['.site[_ngcontent-%COMP%]{display:grid;grid-template-columns:20% 80%;grid-template-rows:50px 1fr 20px;grid-template-areas:"header header" "aside main" "footer footer";width:100vw;height:100vh;transition:all .3s linear}header[_ngcontent-%COMP%]{grid-area:header;background:#3498db}main[_ngcontent-%COMP%]{grid-area:main;background:#ecf0f1;display:grid;grid-template-columns:1fr 1fr 1fr}aside[_ngcontent-%COMP%]{grid-area:aside;background:#34495e}footer[_ngcontent-%COMP%]{grid-area:footer;background:#2ecc71}section[_ngcontent-%COMP%]{border:1px solid black;min-height:30px}@media screen and (max-width: 640px){.site[_ngcontent-%COMP%]{display:grid;grid-template-columns:100%;grid-template-rows:50px 50px 1fr 20px;grid-template-areas:"header" "aside" "main" "footer"}}@media screen and (max-width: 500px){main[_ngcontent-%COMP%]{grid-template-columns:1fr}}']}),n})(),cC=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-css-chart"]],decls:46,vars:0,consts:[["id","chart"],["id","chart-shape"],["id","chart-value"],["id","chart3"],["id","chart4"],["id","chart45"],[1,"charts-1"],[1,"chart-shapes"],[1,"chart-values"],[1,"chart-labels"],[1,"charts-3"],[1,"charts-2"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._uU(2,"\u2b20"),o.qZA(),o._UZ(3,"div",2),o.qZA(),o._UZ(4,"div",3)(5,"div",4)(6,"div",5),o.TgZ(7,"section")(8,"div",6)(9,"div",7),o._uU(10,"\u2606"),o.qZA(),o._UZ(11,"div",8),o.TgZ(12,"span",9),o._uU(13,"30%"),o.qZA()(),o.TgZ(14,"div",6)(15,"div",7),o._uU(16,"\u2606"),o.qZA(),o._UZ(17,"div",8),o.TgZ(18,"span",9),o._uU(19,"40%"),o.qZA()(),o.TgZ(20,"div",6)(21,"div",7),o._uU(22,"\u2606"),o.qZA(),o._UZ(23,"div",8),o.TgZ(24,"span",9),o._uU(25,"50%"),o.qZA()(),o.TgZ(26,"div",6)(27,"div",7),o._uU(28,"\u2606"),o.qZA(),o._UZ(29,"div",8),o.TgZ(30,"span",9),o._uU(31,"80%"),o.qZA()(),o.TgZ(32,"div",6)(33,"div",7),o._uU(34,"\u2606"),o.qZA(),o._UZ(35,"div",8),o.TgZ(36,"span",9),o._uU(37,"90%"),o.qZA()()(),o.TgZ(38,"section")(39,"div",10)(40,"span",9),o._uU(41,"83%"),o.qZA()()(),o.TgZ(42,"section")(43,"div",11)(44,"span",9),o._uU(45,"83%"),o.qZA()()())},styles:["@charset \"UTF-8\";#chart-shape[_ngcontent-%COMP%]{font:300px/300px serif;text-align:center;color:#32cd32}#chart-value[_ngcontent-%COMP%]{background:conic-gradient(transparent 75%,darkseagreen 75%);mix-blend-mode:screen}#chart[_ngcontent-%COMP%]{width:300px;height:300px;display:grid;margin:auto;margin-top:calc(50vh - 150px);background:white}#chart[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{height:inherit;grid-area:1/1}#chart1[_ngcontent-%COMP%]{width:300px;height:300px;background:url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><foreignObject width='300px' height='100%'><div xmlns='http://www.w3.org/1999/xhtml' style='font:300px/300px serif;color:limegreen;text-align: center;background:white'>\\2b20</div></foreignObject></svg>\"),conic-gradient(transparent 75%,darkseagreen 75%);background-blend-mode:screen}#chart3[_ngcontent-%COMP%]{width:300px;height:300px;background:url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><foreignObject width='300px' height='100%'><html xmlns='http://www.w3.org/1999/xhtml'><div style='border:150px solid white; border-bottom:300px solid lime; border-top:unset'></div><div style='border:150px solid transparent; border-bottom:300px solid white; border-top:unset; transform:scale(0.8) translateY(-360px);'></div></html></foreignObject></svg>\"),conic-gradient(transparent 75%,darkseagreen 75%);background-blend-mode:screen}#chart4[_ngcontent-%COMP%]{width:300px;height:300px;background:url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><foreignObject width='300px' height='300px'><body style='margin:0;text-align:center;color:transparent;' xmlns='http://www.w3.org/1999/xhtml'><div style='text-shadow: 0 0 limegreen;font:200px/300px serif;background:white;'>\\1f34f</div><div style='text-shadow:0 0 white;font:170px/300px serif;position:relative;top:-300px;'>\\1f34f</div></body></foreignObject></svg>\"),conic-gradient(transparent 64%,darkseagreen 64%);background-blend-mode:screen}#chart5[_ngcontent-%COMP%]{width:300px;height:300px;--n: 30%;background:url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><foreignObject width='300px' height='300px'><body style='margin:0;text-align:center;color:transparent;' xmlns='http://www.w3.org/1999/xhtml'><div style='text-shadow: 0 0 limegreen;font:200px/300px serif;background:white;'>\\1f34f</div><div style='text-shadow:0 0 white;font:170px/300px serif;position:relative;top:-300px;'>\\1f34f</div></body></foreignObject></svg>\"),conic-gradient(transparent var(--n),darkseagreen var(--n));background-blend-mode:screen;transition:--n 2s ease-in-out}#chart5[_ngcontent-%COMP%]:hover{--n: 70%}section[_ngcontent-%COMP%]{height:90px;margin:40px auto;text-align:center;width:max-content}.chart-labels[_ngcontent-%COMP%]{isolation:isolate;font-family:courier,serif}.charts-1[_ngcontent-%COMP%], .charts-2[_ngcontent-%COMP%], .charts-3[_ngcontent-%COMP%]{width:90px;height:90px;display:inline-grid}.charts-1[_ngcontent-%COMP%]{background:white}.charts-1[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{height:inherit;grid-area:1/1}.charts-1[_ngcontent-%COMP%]   .chart-shapes[_ngcontent-%COMP%]{font-size:90px;line-height:90px;text-align:center;color:red;font-weight:bolder;color:#32cd32;color:#1e90ff}.charts-1[_ngcontent-%COMP%]   .chart-labels[_ngcontent-%COMP%]{margin-top:calc(45px - .2em);font-size:7pt;color:red;color:#32cd32;color:#1e90ff}.charts-1[_ngcontent-%COMP%]   .chart-values[_ngcontent-%COMP%]{background:conic-gradient(transparent 30%,lightgrey 30%);mix-blend-mode:screen}.charts-1[_ngcontent-%COMP%]   .chart-values[_ngcontent-%COMP%]:hover{background:conic-gradient(transparent 90%,lightgrey 90%);mix-blend-mode:screen;background-blend-mode:screen;transition:background 2s ease-in-out}.charts-1[_ngcontent-%COMP%]:nth-of-type(2)   .chart-values[_ngcontent-%COMP%]{background:conic-gradient(transparent 40%,lightgrey 40%)}.charts-1[_ngcontent-%COMP%]:nth-of-type(3)   .chart-values[_ngcontent-%COMP%]{background:conic-gradient(transparent 45%,lightgrey 50%)}.charts-1[_ngcontent-%COMP%]:nth-of-type(4)   .chart-values[_ngcontent-%COMP%]{background:conic-gradient(transparent 80%,lightgrey 80%)}.charts-1[_ngcontent-%COMP%]:nth-of-type(5)   .chart-values[_ngcontent-%COMP%]{background:conic-gradient(transparent 90%,lightgrey 90%)}.charts-3[_ngcontent-%COMP%]{background:url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><foreignObject width='90px' height='90px'><html xmlns='http://www.w3.org/1999/xhtml' style='margin:0;text-align:center;line-height:100px;color:transparent;' ><div style='text-shadow: 0 0 dodgerblue;font-size:90px;background:white;'>\\1f95b</div><div style='text-shadow:0 0 white;font-size:75px;position:relative;top:-100px;'>\\1f95b</div></html></foreignObject></svg>\"),conic-gradient(transparent 83%,lightgrey 83%);background-blend-mode:screen;background-position:center}.charts-3[_ngcontent-%COMP%]   .chart-labels[_ngcontent-%COMP%]{margin-top:calc(45px - .4em);color:#1e90ff}.charts-2[_ngcontent-%COMP%]{background:url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><foreignObject width='90px' height='90px'><html xmlns='http://www.w3.org/1999/xhtml'><div style='width: 80px; height: 90px; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; background: limegreen; box-shadow: -45px 0 0 white, 45px 0 0 white, 0 45px 0 white, 0 -45px 0 white;'></div><div style='width: 80px; height: 90px; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; background: white; transform:scale(0.9) translateY(-100px);'></div></html></foreignObject></svg>\"),conic-gradient(transparent 23%,lightgrey 23%);background-blend-mode:screen;background-position:center;background-repeat:no-repeat}.charts-2[_ngcontent-%COMP%]   .chart-labels[_ngcontent-%COMP%]{margin-top:calc(45px - .5em);color:#32cd32}"]}),n})();var y=L(1777);function uC(n,e){if(1&n&&o._UZ(0,"img",3),2&n){const t=o.oxw().$implicit;o.Q6J("src",t,o.LSH)}}function lC(n,e){if(1&n&&(o.ynx(0),o.YNc(1,uC,1,1,"img",2),o.BQk()),2&n){const t=e.index,r=o.oxw();o.xp6(1),o.Q6J("ngIf",t===r.counter)}}const hC=[(0,y.IO)(":enter, :leave",(0,y.oB)({position:"fixed",width:"200px"}),{optional:!0}),(0,y.ru)([(0,y.IO)(":enter",[(0,y.oB)({transform:"translateX(-200px)"}),(0,y.jt)(".3s ease-out",(0,y.oB)({transform:"translateX(0%)"}))],{optional:!0}),(0,y.IO)(":leave",[(0,y.oB)({transform:"translateX(0%)"}),(0,y.jt)(".3s ease-out",(0,y.oB)({transform:"translateX(200px)"}))],{optional:!0})])],dC=[(0,y.IO)(":enter, :leave",(0,y.oB)({position:"fixed",width:"200px"}),{optional:!0}),(0,y.ru)([(0,y.IO)(":enter",[(0,y.oB)({transform:"translateX(200px)"}),(0,y.jt)(".3s ease-out",(0,y.oB)({transform:"translateX(0%)"}))],{optional:!0}),(0,y.IO)(":leave",[(0,y.oB)({transform:"translateX(0%)"}),(0,y.jt)(".3s ease-out",(0,y.oB)({transform:"translateX(-200px)"}))],{optional:!0})])];let fC=(()=>{class n{constructor(){this.counter=0,this.list=[1,2,3,4,5,6,7,8,9],this.list1=["https://placeimg.com/300/300/nature/6","https://placeimg.com/300/300/nature/7","https://placeimg.com/300/300/nature/8","https://placeimg.com/300/300/nature/9","https://placeimg.com/300/300/nature/2","https://placeimg.com/300/300/nature/3","https://placeimg.com/300/300/nature/1"]}ngOnInit(){}onNext(){this.counter!=this.list1.length-1&&this.counter++}onPrevious(){this.counter>0&&this.counter--}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-slide-left-right"]],decls:6,vars:4,consts:[["type","button",3,"disabled","click"],[4,"ngFor","ngForOf"],["style","height:200px; width:200px",3,"src",4,"ngIf"],[2,"height","200px","width","200px",3,"src"]],template:function(t,r){1&t&&(o.TgZ(0,"button",0),o.NdJ("click",function(){return r.onPrevious()}),o._uU(1,"Previous"),o.qZA(),o.TgZ(2,"button",0),o.NdJ("click",function(){return r.onNext()}),o._uU(3,"Next"),o.qZA(),o.TgZ(4,"div"),o.YNc(5,lC,2,1,"ng-container",1),o.qZA()),2&t&&(o.Q6J("disabled",0===r.counter),o.xp6(2),o.Q6J("disabled",r.counter==r.list.length-1),o.xp6(2),o.Q6J("@animSlider",r.counter),o.xp6(1),o.Q6J("ngForOf",r.list1))},dependencies:[M.sg,M.O5],data:{animation:[(0,y.X$)("animSlider",[(0,y.eR)(":increment",dC),(0,y.eR)(":decrement",hC)])]}}),n})();const pC=[(0,y.oB)({opacity:1}),(0,y.oB)({transform:"translate3d(200%, 0, 0) rotate3d(0, 0, 1, 120deg)",opacity:0})],mC=[(0,y.oB)({opacity:1}),(0,y.oB)({transform:"translate3d(-200%, 0, 0) rotate3d(0, 0, 1, -120deg)",opacity:0})];let gC=(()=>{class n{constructor(){this.index=0,this.users=[{id:0,picture:"https://placehold.it/350x349",age:23,name:"Candace Coffey",gender:"female"},{id:1,picture:"https://placehold.it/350x349",age:40,name:"Katrina Potter",gender:"female"},{id:2,picture:"https://placehold.it/350x349",age:35,name:"Genevieve Hardy",gender:"female"},{id:3,picture:"https://placehold.it/350x349",age:30,name:"Cabrera Jefferson",gender:"male"},{id:4,picture:"https://placehold.it/350x349",age:37,name:"Guadalupe Keith",gender:"female"},{id:5,picture:"https://placehold.it/350x349",age:21,name:"Richardson Tillman",gender:"male"},{id:6,picture:"https://placehold.it/350x349",age:25,name:"Burton Wynn",gender:"male"},{id:7,picture:"https://placehold.it/350x349",age:21,name:"Eileen Higgins",gender:"female"},{id:8,picture:"https://placehold.it/350x349",age:31,name:"Angeline Gill",gender:"female"},{id:9,picture:"https://placehold.it/350x349",age:37,name:"Dejesus Mcintyre",gender:"male"},{id:10,picture:"https://placehold.it/350x349",age:34,name:"Peters Ruiz",gender:"male"},{id:11,picture:"https://placehold.it/350x349",age:37,name:"Beverley May",gender:"female"},{id:12,picture:"https://placehold.it/350x349",age:27,name:"Manuela Drake",gender:"female"},{id:13,picture:"https://placehold.it/350x349",age:23,name:"Trujillo Daniels",gender:"male"},{id:14,picture:"https://placehold.it/350x349",age:31,name:"Nichole Holder",gender:"female"},{id:15,picture:"https://placehold.it/350x349",age:28,name:"Vasquez Cochran",gender:"male"},{id:16,picture:"https://placehold.it/350x349",age:22,name:"Pitts Doyle",gender:"male"},{id:17,picture:"https://placehold.it/350x349",age:30,name:"Emerson Williamson",gender:"male"},{id:18,picture:"https://placehold.it/350x349",age:33,name:"Conner Bell",gender:"male"},{id:19,picture:"https://placehold.it/350x349",age:21,name:"Janie Stokes",gender:"female"},{id:20,picture:"https://placehold.it/350x349",age:33,name:"Ingrid Whitney",gender:"female"},{id:21,picture:"https://placehold.it/350x349",age:24,name:"Janis Rowe",gender:"female"},{id:22,picture:"https://placehold.it/350x349",age:34,name:"Campos Cooke",gender:"male"},{id:23,picture:"https://placehold.it/350x349",age:39,name:"Bentley Foley",gender:"male"},{id:24,picture:"https://placehold.it/350x349",age:31,name:"Frieda Knapp",gender:"female"},{id:25,picture:"https://placehold.it/350x349",age:39,name:"Blackburn Kirk",gender:"male"},{id:26,picture:"https://placehold.it/350x349",age:26,name:"Love Mathis",gender:"male"},{id:27,picture:"https://placehold.it/350x349",age:40,name:"Meagan Knight",gender:"female"},{id:28,picture:"https://placehold.it/350x349",age:34,name:"Robertson Whitley",gender:"male"},{id:29,picture:"https://placehold.it/350x349",age:37,name:"Haney Dickerson",gender:"male"},{id:30,picture:"https://placehold.it/350x349",age:28,name:"Benton Walton",gender:"male"},{id:31,picture:"https://placehold.it/350x349",age:27,name:"Mindy Obrien",gender:"female"},{id:32,picture:"https://placehold.it/350x349",age:37,name:"Ramona Wilcox",gender:"female"},{id:33,picture:"https://placehold.it/350x349",age:38,name:"Diann Chaney",gender:"female"},{id:34,picture:"https://placehold.it/350x349",age:23,name:"Rodgers Delgado",gender:"male"}]}ngOnInit(){}startAnimation(t){this.animationState||(this.animationState=t)}resetAnimationState(t){this.animationState="",this.index++,console.log(this.index)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-swipe-left-right"]],decls:11,vars:4,consts:[[1,"tbg"],[1,"tphoto",3,"swipeleft","swiperight"],["title","tphoto","alt","Tinder Photo",3,"src"],[1,"tname"],[1,"age"],[3,"click"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o.NdJ("@cardAnimator.done",function(s){return r.resetAnimationState(s)})("swipeleft",function(){return r.startAnimation("swipeleft")})("swiperight",function(){return r.startAnimation("swiperight")}),o._UZ(2,"img",2),o.TgZ(3,"div",3),o._uU(4),o.TgZ(5,"span",4),o._uU(6),o.qZA()()(),o.TgZ(7,"button",5),o.NdJ("click",function(){return r.startAnimation("swipeleft")}),o._uU(8,"left"),o.qZA(),o.TgZ(9,"button",5),o.NdJ("click",function(){return r.startAnimation("swiperight")}),o._uU(10,"right"),o.qZA()()),2&t&&(o.xp6(1),o.Q6J("@cardAnimator",r.animationState),o.xp6(1),o.Q6J("src",r.users[r.index].picture,o.LSH),o.xp6(2),o.hij("",r.users[r.index].name,", "),o.xp6(2),o.Oqu(r.users[r.index].age))},styles:["[_nghost-%COMP%]{color:#0b3c5d}.tbg[_ngcontent-%COMP%]{overflow-x:hidden}.tbg[_ngcontent-%COMP%]{height:720px;width:400px;background-color:#fff;margin:0 auto;border:1px solid #c0c0c0}.tphoto[_ngcontent-%COMP%]{width:350px;height:350px;overflow:hidden;margin:0 auto;position:relative;top:15px;border-radius:10px;-moz-border-radius:10px;-o-border-radius:10px;-ms-border-radius:10px;border:1px solid #c0c0c0;padding-bottom:60px;box-shadow:2px 2px 2px silver}.tname[_ngcontent-%COMP%]{padding:15px;font-size:20px;font-family:Helvetica,sans-serif;float:left}.tname[_ngcontent-%COMP%]   .age[_ngcontent-%COMP%]{font-weight:200}.tinfo[_ngcontent-%COMP%]{font-family:Helvetica,sans-serif}img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%}"],data:{animation:[(0,y.X$)("cardAnimator",[(0,y.eR)("* => swiperight",(0,y.jt)(750,(0,y.F4)(pC))),(0,y.eR)("* => swipeleft",(0,y.jt)(750,(0,y.F4)(mC)))])]}}),n})();function _C(n,e){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.xp6(1),o.hij(" ",t," ")}}function yC(n,e){if(1&n&&(o.TgZ(0,"div")(1,"div"),o._uU(2),o.qZA()()),2&n){const t=e.$implicit;o.xp6(2),o.Oqu(t.Name)}}function vC(n,e){if(1&n&&(o.ynx(0),o.TgZ(1,"tr")(2,"td"),o._uU(3),o.qZA(),o.TgZ(4,"td"),o._uU(5),o.qZA()(),o.BQk()),2&n){const t=e.$implicit;o.xp6(1),o.Q6J("@enterAnimation",void 0),o.xp6(2),o.Oqu(t.Name),o.xp6(2),o.Oqu(t.Country)}}function TC(n,e){if(1&n&&o._UZ(0,"img",9),2&n){const t=o.oxw().$implicit;o.Q6J("@fade",void 0)("src",t,o.LSH)}}function IC(n,e){if(1&n&&(o.TgZ(0,"div"),o.YNc(1,TC,1,2,"img",8),o.qZA()),2&n){const t=e.index,r=o.oxw();o.xp6(1),o.Q6J("ngIf",t==r.counter)}}function wC(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",10)(1,"img",11),o.NdJ("click",function(i){o.CHM(t);const s=o.oxw();return o.KtG(s.onClickThumb(i))}),o.qZA()()}if(2&n){const t=e.$implicit,r=e.index,i=o.oxw();o.Q6J("@thumbState",r===i.counter?"active":"inactive"),o.xp6(1),o.Q6J("src",t,o.LSH)}}function bC(n,e){if(1&n&&(o.TgZ(0,"li"),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("@EnterLeave","flyIn"),o.xp6(1),o.hij(" ",t," ")}}const xC=(0,y.X$)("listAnimation",[(0,y.eR)("* => *",[(0,y.IO)(":leave",[(0,y.EY)(100,[(0,y.jt)("0.5s",(0,y.oB)({opacity:0}))])],{optional:!0}),(0,y.IO)(":enter",[(0,y.oB)({opacity:0}),(0,y.EY)(100,[(0,y.jt)("0.5s",(0,y.oB)({opacity:1}))])],{optional:!0})])]),EC=(0,y.X$)("thumbState",[(0,y.SB)("inactive",(0,y.oB)({opacity:0,transform:"scale(0.5)"})),(0,y.SB)("active",(0,y.oB)({opacity:1,transform:"scale(1)"})),(0,y.eR)("inactive => active",(0,y.jt)("500ms cubic-bezier(0.785, 0.135, 0.15, 0.86)")),(0,y.eR)("active => inactive",(0,y.jt)("500ms cubic-bezier(0.785, 0.135, 0.15, 0.86)"))]),CC=(0,y.X$)("fade",[(0,y.SB)("void",(0,y.oB)({opacity:0})),(0,y.eR)("void <=> *",[(0,y.jt)("0.5s ease-in-out")])]),AC=(0,y.X$)("listAnimation",[(0,y.eR)("* => *",[(0,y.IO)(":leave",[(0,y.EY)(100,[(0,y.jt)("0.5s",(0,y.oB)({opacity:0}))])],{optional:!0}),(0,y.IO)(":enter",[(0,y.oB)({opacity:0}),(0,y.EY)(100,[(0,y.jt)("0.5s",(0,y.oB)({opacity:1}))])],{optional:!0})])]),SC=(0,y.X$)("enterAnimation",[(0,y.eR)(":enter",[(0,y.oB)({transform:"translateX(100%)",opacity:0}),(0,y.jt)("500ms",(0,y.oB)({transform:"translateX(0)",opacity:1,"overflow-x":"hidden"}))]),(0,y.eR)(":leave",[(0,y.oB)({transform:"translateX(0)",opacity:1}),(0,y.jt)("500ms",(0,y.oB)({transform:"translateX(100%)",opacity:0}))])]),kC=(0,y.X$)("slideIn",[(0,y.SB)("*",(0,y.oB)({"overflow-y":"hidden"})),(0,y.SB)("void",(0,y.oB)({"overflow-y":"hidden"})),(0,y.eR)("* => void",[(0,y.oB)({height:"*"}),(0,y.jt)(250,(0,y.oB)({height:0}))]),(0,y.eR)("void => *",[(0,y.oB)({height:"0"}),(0,y.jt)(250,(0,y.oB)({height:"*"}))])]),NC=(0,y.X$)("changeDivSize",[(0,y.SB)("initial",(0,y.oB)({backgroundColor:"green",width:"100px",height:"100px"})),(0,y.SB)("final",(0,y.oB)({backgroundColor:"red",width:"200px",height:"200px"})),(0,y.eR)("initial=>final",(0,y.jt)("1500ms")),(0,y.eR)("final=>initial",(0,y.jt)("1000ms"))]),DC=(0,y.X$)("balloonEffect",[(0,y.SB)("initial",(0,y.oB)({backgroundColor:"green",transform:"scale(1)"})),(0,y.SB)("final",(0,y.oB)({backgroundColor:"red",transform:"scale(1.5)"})),(0,y.eR)("initial=>final",(0,y.jt)("1500ms")),(0,y.eR)("final=>initial",(0,y.jt)("1000ms"))]),OC=(0,y.X$)("EnterLeave",[(0,y.SB)("flyIn",(0,y.oB)({transform:"translateX(0)"})),(0,y.eR)(":enter",[(0,y.oB)({transform:"translateX(-100%)"}),(0,y.jt)("0.5s 300ms ease-in")]),(0,y.eR)(":leave",[(0,y.jt)("0.3s ease-out",(0,y.oB)({transform:"translateX(100%)"}))])]);let RC=(()=>{class n{constructor(){this.currentState="initial",this.counter=0,this.items=[],this.images=["https://placeimg.com/300/300/nature/6","https://placeimg.com/300/300/nature/7","https://placeimg.com/300/300/nature/8","https://placeimg.com/300/300/nature/9","https://placeimg.com/300/300/nature/2","https://placeimg.com/300/300/nature/3","https://placeimg.com/300/300/nature/1"],this.items1=[],this.listItem=[],this.list_order=1}logAnimation(t){console.log(t)}showItems(){[1,2,3,4,5].map(t=>{this.items.push("Simple Card - "+t)})}hideItems(){this.items=[]}toggle(){this.items.length?this.hideItems():this.showItems()}ngOnInit(){}add(){this.items1.push({Name:`Name ${this.items1.length+1}`,Country:`country ${this.items1.length+1}`})}remove(){this.items1.splice(0,1)}onClickThumb(t){const r=this.images.length-1;this.counter=t.layerX<150?this.dec(r):this.inc(r)}onNext(){this.counter=this.inc(this.images.length-1)}onPrevious(){this.counter=this.dec(this.images.length-1)}inc(t){return this.counter<t?this.counter+1:0}dec(t){return this.counter>0?this.counter-1:t}changeState(){this.currentState="initial"===this.currentState?"final":"initial"}addItem(){var t="ListItem "+this.list_order;this.list_order++,this.listItem.push(t)}removeItem(){this.listItem.length-=1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-fade-in-out"]],decls:53,vars:12,consts:[["color","primary",3,"click"],[4,"ngFor","ngForOf"],[3,"click"],["id","customers"],["class","tmb",4,"ngFor","ngForOf"],["type","button",3,"click"],[2,"width","100px","height","100px","border-radius","100%","margin","3rem","background-color","green"],[2,"width","200px","margin-left","20px"],[3,"src",4,"ngIf"],[3,"src"],[1,"tmb"],[3,"src","click"]],template:function(t,r){1&t&&(o.TgZ(0,"button",0),o.NdJ("click",function(){return r.toggle()}),o._uU(1," Show / Hide Cards\n"),o.qZA(),o.TgZ(2,"div"),o.NdJ("@listAnimation.done",function(s){return r.logAnimation(s)})("@listAnimation.start",function(s){return r.logAnimation(s)}),o.YNc(3,_C,2,1,"div",1),o.qZA(),o.TgZ(4,"h2"),o._uU(5,"Angular Animations In Lists"),o.qZA(),o.TgZ(6,"button",2),o.NdJ("click",function(){return r.add()}),o._uU(7,"Add"),o.qZA(),o.TgZ(8,"button",2),o.NdJ("click",function(){return r.remove()}),o._uU(9,"remove"),o.qZA(),o._UZ(10,"hr"),o.TgZ(11,"div"),o.YNc(12,yC,3,1,"div",1),o.qZA(),o.TgZ(13,"table",3)(14,"tr")(15,"th"),o._uU(16,"Name"),o.qZA(),o.TgZ(17,"th"),o._uU(18,"Country"),o.qZA()(),o.YNc(19,vC,6,3,"ng-container",1),o.qZA(),o.TgZ(20,"h1"),o._uU(21),o.qZA(),o.TgZ(22,"pre"),o._uU(23,"click left and right sides of the image to browse"),o.qZA(),o.YNc(24,IC,2,1,"div",1),o.YNc(25,wC,2,2,"div",4),o._UZ(26,"br")(27,"br")(28,"br"),o.TgZ(29,"button",5),o.NdJ("click",function(){return r.onNext()}),o._uU(30,"Next"),o.qZA(),o.TgZ(31,"button",5),o.NdJ("click",function(){return r.onPrevious()}),o._uU(32,"Previous"),o.qZA(),o._UZ(33,"hr"),o.TgZ(34,"h3"),o._uU(35,"Change the div size"),o.qZA(),o.TgZ(36,"button",2),o.NdJ("click",function(){return r.changeState()}),o._uU(37,"Change Size"),o.qZA(),o._UZ(38,"div"),o.TgZ(39,"h3"),o._uU(40,"Change the div size"),o.qZA(),o.TgZ(41,"button",2),o.NdJ("click",function(){return r.changeState()}),o._uU(42,"Change Size"),o.qZA(),o._UZ(43,"div",6),o.TgZ(44,"h3"),o._uU(45,"Enter and Leave animation"),o.qZA(),o.TgZ(46,"button",2),o.NdJ("click",function(){return r.addItem()}),o._uU(47,"Add List"),o.qZA(),o.TgZ(48,"button",2),o.NdJ("click",function(){return r.removeItem()}),o._uU(49,"Remove List"),o.qZA(),o.TgZ(50,"div",7)(51,"ul"),o.YNc(52,bC,2,2,"li",1),o.qZA()()),2&t&&(o.xp6(2),o.Q6J("@listAnimation",r.items.length),o.xp6(1),o.Q6J("ngForOf",r.items),o.xp6(8),o.Q6J("@listAnimation",r.items.length),o.xp6(1),o.Q6J("ngForOf",r.items1),o.xp6(7),o.Q6J("ngForOf",r.items1),o.xp6(2),o.AsE("",r.counter+1," / ",r.images.length,""),o.xp6(3),o.Q6J("ngForOf",r.images),o.xp6(1),o.Q6J("ngForOf",r.images),o.xp6(13),o.Q6J("@changeDivSize",r.currentState),o.xp6(5),o.Q6J("@balloonEffect",r.currentState),o.xp6(9),o.Q6J("ngForOf",r.listItem))},dependencies:[M.sg,M.O5],styles:["#customers[_ngcontent-%COMP%]{font-family:Trebuchet MS,Arial,Helvetica,sans-serif;border-collapse:collapse;width:100%}#customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], #customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2f2}#customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}#customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px;text-align:left;background-color:#4caf50;color:#fff}.tmb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:50%;width:300px;margin-left:-150px}"],data:{animation:[xC,AC,SC,kC,EC,CC,NC,DC,OC]}}),n})();const PC=["loadText"],MC=["bg"],LC=function(n){return{active:n}},UC=function(n){return{"background-image":n}};function FC(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",11),o.NdJ("click",function(){const s=o.CHM(t).index,a=o.oxw();return o.KtG(a.currentActive=s+1)}),o.TgZ(1,"h3"),o._uU(2),o.qZA()()}if(2&n){const t=e.$implicit,r=e.index,i=o.oxw();o.Q6J("ngClass",o.VKq(3,LC,i.currentActive===r+1))("ngStyle",o.VKq(5,UC,"url("+t.image+")")),o.xp6(2),o.Oqu(t.caption)}}function ZC(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",12),o.NdJ("click",function(){const s=o.CHM(t).index,a=o.oxw();return o.KtG(a.gotoSlide(s+1))}),o._uU(1),o.qZA()}if(2&n){const t=e.index,r=o.oxw();o.ekj("glow",t<r.currentActive),o.xp6(1),o.Oqu(t+1)}}let qC=(()=>{class n{constructor(){this.currentActive=1,this.items=[{image:"https://images.unsplash.com/photo-1464821541677-ceb53bcf1541?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80",caption:"Explore The World"},{image:"https://images.unsplash.com/photo-1526943604017-955071a1fb3e?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80",caption:"Sunny Day"},{image:"https://images.unsplash.com/photo-1464821541677-ceb53bcf1541?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80",caption:"Explore The World"},{image:"https://images.unsplash.com/photo-1526943604017-955071a1fb3e?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80",caption:"Sunny Day"},{image:"https://images.unsplash.com/photo-1526943604017-955071a1fb3e?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1050&q=80",caption:"Sunny Day"}]}get progressWidth(){return(this.currentActive-1)/(this.items.length-1)*100+"%"}ngOnInit(){this.blurry()}gotoSlide(t){this.currentActive=t}nextSlide(){this.currentActive<this.items.length?this.currentActive++:this.currentActive=this.items.length}previousSlide(){this.currentActive>1?this.currentActive--:this.currentActive=1}blurry(){const t=this.loadText.nativeElement,r=this.bg.nativeElement;let i=0,s=setInterval(function a(){i++,i>99&&(clearInterval(s),t.remove(),r.style.zIndex="1"),t.innerText=`${i}%`,t.style.opacity=c(i,0,100,1,0),r.style.filter=`blur(${c(i,0,100,30,0)}px)`},30);const c=(u,l,h,d,p)=>(u-l)*(p-d)/(h-l)+d}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-progress-slider"]],viewQuery:function(t,r){if(1&t&&(o.Gf(PC,7),o.Gf(MC,7)),2&t){let i;o.iGM(i=o.CRH())&&(r.loadText=i.first),o.iGM(i=o.CRH())&&(r.bg=i.first)}},decls:15,vars:6,consts:[[1,"loading-text"],["loadText",""],[1,"main-container"],["bg",""],[1,"progress-slider"],["class","progress-slide",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"progress-wrapper"],[1,"progress-container"],[1,"progress"],["class","circle",3,"glow","click",4,"ngFor","ngForOf"],[1,"progress-btn",3,"disabled","click"],[1,"progress-slide",3,"ngClass","ngStyle","click"],[1,"circle",3,"click"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0,1),o._uU(2,"0%"),o.qZA(),o.TgZ(3,"div",2,3)(5,"div",4),o.YNc(6,FC,3,7,"div",5),o.qZA(),o.TgZ(7,"div",6)(8,"div",7),o._UZ(9,"div",8),o.YNc(10,ZC,2,3,"div",9),o.qZA(),o.TgZ(11,"button",10),o.NdJ("click",function(){return r.previousSlide()}),o._uU(12,"Prev"),o.qZA(),o.TgZ(13,"button",10),o.NdJ("click",function(){return r.nextSlide()}),o._uU(14,"Next"),o.qZA()()()),2&t&&(o.xp6(6),o.Q6J("ngForOf",r.items),o.xp6(3),o.Udp("width",r.progressWidth),o.xp6(1),o.Q6J("ngForOf",r.items),o.xp6(1),o.Q6J("disabled",1===r.currentActive),o.xp6(2),o.Q6J("disabled",r.currentActive===r.items.length))},dependencies:[M.mk,M.sg,M.PC],styles:['.progress-slider[_ngcontent-%COMP%]{display:flex;width:90vw}.progress-slider[_ngcontent-%COMP%]   .progress-slide[_ngcontent-%COMP%]{background-size:cover;background-position:center;background-repeat:no-repeat;height:80vh;border-radius:50px;color:#fff;box-shadow:3px 10px 20px silver;cursor:pointer;flex:.5;margin:10px;position:relative;transition:flex .7s ease-in}.progress-slider[_ngcontent-%COMP%]   .progress-slide[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;position:absolute;bottom:20px;left:20px;margin:0;opacity:0}.progress-slider[_ngcontent-%COMP%]   .progress-slide.active[_ngcontent-%COMP%]{flex:5}.progress-slider[_ngcontent-%COMP%]   .progress-slide.active[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{opacity:1;transition:opactiy .3s ease-in .4s}.progress-wrapper[_ngcontent-%COMP%]{--line-border-fil: #3498db;--line-border-empty: #e0e0e0;text-align:center}.progress-wrapper[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:relative;margin:auto auto 15px;max-width:100%;width:350px}.progress-wrapper[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]:before{content:"";background-color:var(--line-border-empty);position:absolute;top:50%;transform:translateY(-50%);left:0%;height:4px;width:100%;z-index:1}.progress-wrapper[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{background-color:var(--line-border-fil);position:absolute;top:50%;transform:translateY(-50%);left:0%;height:4px;width:0%;z-index:1;transition:.4s ease}.progress-wrapper[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{background-color:#fff;color:#999;border-radius:50px;height:30px;width:30px;display:flex;align-items:center;justify-content:center;border:3px solid var(--line-border-empty);transition:.4s ease;z-index:2;cursor:pointer}.progress-wrapper[_ngcontent-%COMP%]   .progress-container[_ngcontent-%COMP%]   .circle.glow[_ngcontent-%COMP%]{border-color:var(--line-border-fil)}.progress-wrapper[_ngcontent-%COMP%]   .progress-btn[_ngcontent-%COMP%]{background-color:var(--line-border-fil);color:#fff;border:0ch;border-radius:6px;cursor:pointer;font-family:inherit;padding:8px 30px;margin:5px;font-size:14px}.progress-wrapper[_ngcontent-%COMP%]   .progress-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.progress-wrapper[_ngcontent-%COMP%]   .progress-btn[_ngcontent-%COMP%]:focus{outline:0}.progress-wrapper[_ngcontent-%COMP%]   .progress-btn[_ngcontent-%COMP%]:disabled{background-color:var(--line-border-empty);cursor:not-allowed}.loading-text[_ngcontent-%COMP%]{--line-border-fil: #3498db;display:flex;align-items:center;justify-content:center;overflow:hidden;margin:0;font-size:50px;top:50%;left:50%;position:absolute;color:var(--line-border-fil)}.main-container[_ngcontent-%COMP%]{z-index:-1;position:relative;filter:blur(0px)}']}),n})();function VC(n,e){1&n&&o._UZ(0,"app-progress-slider")}function BC(n,e){1&n&&o._UZ(0,"app-slide-left-right")}function GC(n,e){1&n&&o._UZ(0,"app-swipe-left-right")}function jC(n,e){1&n&&o._UZ(0,"app-fade-in-out")}function HC(n,e){1&n&&o._UZ(0,"app-css-chart")}const $C=function(){return["progress Slider","slideLeftRight","swipeLeftRight","fadeInOut","css-chart"]},KC=[{path:"",component:ur,children:[{path:"password-generator",component:mt},{path:"notes",component:J_},{path:"editor",component:ty},{path:"exchange-rates",component:ny},{path:"expense-track",component:iy},{path:"todos",component:ay},{path:"weather",component:Gh},{path:"firestore",component:NE},{path:"weather/forecast/:zip/:country",component:yy},{path:"projection",component:nC},{path:"rotate-vertical",component:rC},{path:"gallery-grid",component:sC},{path:"glassmorphism-card",component:oC},{path:"grid-layout",component:aC},{path:"examples",component:(()=>{class n{constructor(){this.selectedTab=1}ngOnInit(){}onSelectTab(t){this.selectedTab=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-examples"]],decls:6,vars:7,consts:[["color","red",3,"tabs","onClick"],[4,"ngIf"]],template:function(t,r){1&t&&(o.TgZ(0,"tg-tabs",0),o.NdJ("onClick",function(s){return r.onSelectTab(s)}),o.qZA(),o.YNc(1,VC,1,0,"app-progress-slider",1),o.YNc(2,BC,1,0,"app-slide-left-right",1),o.YNc(3,GC,1,0,"app-swipe-left-right",1),o.YNc(4,jC,1,0,"app-fade-in-out",1),o.YNc(5,HC,1,0,"app-css-chart",1)),2&t&&(o.Q6J("tabs",o.DdM(6,$C)),o.xp6(1),o.Q6J("ngIf",1===r.selectedTab),o.xp6(1),o.Q6J("ngIf",2===r.selectedTab),o.xp6(1),o.Q6J("ngIf",3===r.selectedTab),o.xp6(1),o.Q6J("ngIf",4===r.selectedTab),o.xp6(1),o.Q6J("ngIf",5===r.selectedTab))},dependencies:[M.O5,Ft.n4,cC,fC,gC,RC,qC]}),n})()},{path:"",redirectTo:"examples",pathMatch:"full"}]}];let zC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[z.Bz.forChild(KC),z.Bz]}),n})();var G_=L(8675),WC=L(8372),Uh=L(8505);const j_=[{code:"AD",name:"Andorra"},{code:"AE",name:"United Arab Emirates"},{code:"AF",name:"Afghanistan"},{code:"AG",name:"Antigua and Barbuda"},{code:"AI",name:"Anguilla"},{code:"AL",name:"Albania"},{code:"AM",name:"Armenia"},{code:"AO",name:"Angola"},{code:"AQ",name:"Antarctica"},{code:"AR",name:"Argentina"},{code:"AS",name:"American Samoa"},{code:"AT",name:"Austria"},{code:"AU",name:"Australia"},{code:"AW",name:"Aruba"},{code:"AX",name:"\xc5land Islands"},{code:"AZ",name:"Azerbaijan"},{code:"BA",name:"Bosnia and Herzegovina"},{code:"BB",name:"Barbados"},{code:"BD",name:"Bangladesh"},{code:"BE",name:"Belgium"},{code:"BF",name:"Burkina Faso"},{code:"BG",name:"Bulgaria"},{code:"BH",name:"Bahrain"},{code:"BI",name:"Burundi"},{code:"BJ",name:"Benin"},{code:"BL",name:"Saint Barth\xe9lemy"},{code:"BM",name:"Bermuda"},{code:"BN",name:"Brunei Darussalam"},{code:"BO",name:"Bolivia, Plurinational State of"},{code:"BQ",name:"Bonaire, Sint Eustatius and Saba"},{code:"BR",name:"Brazil"},{code:"BS",name:"Bahamas"},{code:"BT",name:"Bhutan"},{code:"BV",name:"Bouvet Island"},{code:"BW",name:"Botswana"},{code:"BY",name:"Belarus"},{code:"BZ",name:"Belize"},{code:"CA",name:"Canada"},{code:"CC",name:"Cocos (Keeling) Islands"},{code:"CD",name:"Congo, Democratic Republic of the"},{code:"CF",name:"Central African Republic"},{code:"CG",name:"Congo"},{code:"CH",name:"Switzerland"},{code:"CI",name:"C\xf4te d'Ivoire"},{code:"CK",name:"Cook Islands"},{code:"CL",name:"Chile"},{code:"CM",name:"Cameroon"},{code:"CN",name:"China"},{code:"CO",name:"Colombia"},{code:"CR",name:"Costa Rica"},{code:"CU",name:"Cuba"},{code:"CV",name:"Cabo Verde"},{code:"CW",name:"Cura\xe7ao"},{code:"CX",name:"Christmas Island"},{code:"CY",name:"Cyprus"},{code:"CZ",name:"Czechia"},{code:"DE",name:"Germany"},{code:"DJ",name:"Djibouti"},{code:"DK",name:"Denmark"},{code:"DM",name:"Dominica"},{code:"DO",name:"Dominican Republic"},{code:"DZ",name:"Algeria"},{code:"EC",name:"Ecuador"},{code:"EE",name:"Estonia"},{code:"EG",name:"Egypt"},{code:"EH",name:"Western Sahara"},{code:"ER",name:"Eritrea"},{code:"ES",name:"Spain"},{code:"ET",name:"Ethiopia"},{code:"FI",name:"Finland"},{code:"FJ",name:"Fiji"},{code:"FK",name:"Falkland Islands (Malvinas)"},{code:"FM",name:"Micronesia, Federated States of"},{code:"FO",name:"Faroe Islands"},{code:"FR",name:"France"},{code:"GA",name:"Gabon"},{code:"GB",name:"United Kingdom of Great Britain and Northern Ireland"},{code:"GD",name:"Grenada"},{code:"GE",name:"Georgia"},{code:"GF",name:"French Guiana"},{code:"GG",name:"Guernsey"},{code:"GH",name:"Ghana"},{code:"GI",name:"Gibraltar"},{code:"GL",name:"Greenland"},{code:"GM",name:"Gambia"},{code:"GN",name:"Guinea"},{code:"GP",name:"Guadeloupe"},{code:"GQ",name:"Equatorial Guinea"},{code:"GR",name:"Greece"},{code:"GS",name:"South Georgia and the South Sandwich Islands"},{code:"GT",name:"Guatemala"},{code:"GU",name:"Guam"},{code:"GW",name:"Guinea-Bissau"},{code:"GY",name:"Guyana"},{code:"HK",name:"Hong Kong"},{code:"HM",name:"Heard Island and McDonald Islands"},{code:"HN",name:"Honduras"},{code:"HR",name:"Croatia"},{code:"HT",name:"Haiti"},{code:"HU",name:"Hungary"},{code:"ID",name:"Indonesia"},{code:"IE",name:"Ireland"},{code:"IL",name:"Israel"},{code:"IM",name:"Isle of Man"},{code:"IN",name:"India"},{code:"IO",name:"British Indian Ocean Territory"},{code:"IQ",name:"Iraq"},{code:"IR",name:"Iran, Islamic Republic of"},{code:"IS",name:"Iceland"},{code:"IT",name:"Italy"},{code:"JE",name:"Jersey"},{code:"JM",name:"Jamaica"},{code:"JO",name:"Jordan"},{code:"JP",name:"Japan"},{code:"KE",name:"Kenya"},{code:"KG",name:"Kyrgyzstan"},{code:"KH",name:"Cambodia"},{code:"KI",name:"Kiribati"},{code:"KM",name:"Comoros"},{code:"KN",name:"Saint Kitts and Nevis"},{code:"KP",name:"Korea, Democratic People's Republic of"},{code:"KR",name:"Korea, Republic of"},{code:"KW",name:"Kuwait"},{code:"KY",name:"Cayman Islands"},{code:"KZ",name:"Kazakhstan"},{code:"LA",name:"Lao People's Democratic Republic"},{code:"LB",name:"Lebanon"},{code:"LC",name:"Saint Lucia"},{code:"LI",name:"Liechtenstein"},{code:"LK",name:"Sri Lanka"},{code:"LR",name:"Liberia"},{code:"LS",name:"Lesotho"},{code:"LT",name:"Lithuania"},{code:"LU",name:"Luxembourg"},{code:"LV",name:"Latvia"},{code:"LY",name:"Libya"},{code:"MA",name:"Morocco"},{code:"MC",name:"Monaco"},{code:"MD",name:"Moldova, Republic of"},{code:"ME",name:"Montenegro"},{code:"MF",name:"Saint Martin, (French part)"},{code:"MG",name:"Madagascar"},{code:"MH",name:"Marshall Islands"},{code:"MK",name:"North Macedonia"},{code:"ML",name:"Mali"},{code:"MM",name:"Myanmar"},{code:"MN",name:"Mongolia"},{code:"MO",name:"Macao"},{code:"MP",name:"Northern Mariana Islands"},{code:"MQ",name:"Martinique"},{code:"MR",name:"Mauritania"},{code:"MS",name:"Montserrat"},{code:"MT",name:"Malta"},{code:"MU",name:"Mauritius"},{code:"MV",name:"Maldives"},{code:"MW",name:"Malawi"},{code:"MX",name:"Mexico"},{code:"MY",name:"Malaysia"},{code:"MZ",name:"Mozambique"},{code:"NA",name:"Namibia"},{code:"NC",name:"New Caledonia"},{code:"NE",name:"Niger"},{code:"NF",name:"Norfolk Island"},{code:"NG",name:"Nigeria"},{code:"NI",name:"Nicaragua"},{code:"NL",name:"Netherlands"},{code:"NO",name:"Norway"},{code:"NP",name:"Nepal"},{code:"NR",name:"Nauru"},{code:"NU",name:"Niue"},{code:"NZ",name:"New Zealand"},{code:"OM",name:"Oman"},{code:"PA",name:"Panama"},{code:"PE",name:"Peru"},{code:"PF",name:"French Polynesia"},{code:"PG",name:"Papua New Guinea"},{code:"PH",name:"Philippines"},{code:"PK",name:"Pakistan"},{code:"PL",name:"Poland"},{code:"PM",name:"Saint Pierre and Miquelon"},{code:"PN",name:"Pitcairn"},{code:"PR",name:"Puerto Rico"},{code:"PS",name:"Palestine, State of"},{code:"PT",name:"Portugal"},{code:"PW",name:"Palau"},{code:"PY",name:"Paraguay"},{code:"QA",name:"Qatar"},{code:"RE",name:"R\xe9union"},{code:"RO",name:"Romania"},{code:"RS",name:"Serbia"},{code:"RU",name:"Russian Federation"},{code:"RW",name:"Rwanda"},{code:"SA",name:"Saudi Arabia"},{code:"SB",name:"Solomon Islands"},{code:"SC",name:"Seychelles"},{code:"SD",name:"Sudan"},{code:"SE",name:"Sweden"},{code:"SG",name:"Singapore"},{code:"SH",name:"Saint Helena, Ascension and Tristan da Cunha"},{code:"SI",name:"Slovenia"},{code:"SJ",name:"Svalbard and Jan Mayen"},{code:"SK",name:"Slovakia"},{code:"SL",name:"Sierra Leone"},{code:"SM",name:"San Marino"},{code:"SN",name:"Senegal"},{code:"SO",name:"Somalia"},{code:"SR",name:"Suriname"},{code:"SS",name:"South Sudan"},{code:"ST",name:"Sao Tome and Principe"},{code:"SV",name:"El Salvador"},{code:"SX",name:"Sint Maarten, (Dutch part)"},{code:"SY",name:"Syrian Arab Republic"},{code:"SZ",name:"Eswatini"},{code:"TC",name:"Turks and Caicos Islands"},{code:"TD",name:"Chad"},{code:"TF",name:"French Southern Territories"},{code:"TG",name:"Togo"},{code:"TH",name:"Thailand"},{code:"TJ",name:"Tajikistan"},{code:"TK",name:"Tokelau"},{code:"TL",name:"Timor-Leste"},{code:"TM",name:"Turkmenistan"},{code:"TN",name:"Tunisia"},{code:"TO",name:"Tonga"},{code:"TR",name:"Turkey"},{code:"TT",name:"Trinidad and Tobago"},{code:"TV",name:"Tuvalu"},{code:"TW",name:"Taiwan, Province of China"},{code:"TZ",name:"Tanzania, United Republic of"},{code:"UA",name:"Ukraine"},{code:"UG",name:"Uganda"},{code:"UM",name:"United States Minor Outlying Islands"},{code:"US",name:"United States of America"},{code:"UY",name:"Uruguay"},{code:"UZ",name:"Uzbekistan"},{code:"VA",name:"Holy See"},{code:"VC",name:"Saint Vincent and the Grenadines"},{code:"VE",name:"Venezuela, Bolivarian Republic of"},{code:"VG",name:"Virgin Islands, British"},{code:"VI",name:"Virgin Islands, U.S."},{code:"VN",name:"Viet Nam"},{code:"VU",name:"Vanuatu"},{code:"WF",name:"Wallis and Futuna"},{code:"WS",name:"Samoa"},{code:"YE",name:"Yemen"},{code:"YT",name:"Mayotte"},{code:"ZA",name:"South Africa"},{code:"ZM",name:"Zambia"},{code:"ZW",name:"Zimbabwe"}];var QC=L(2313);let JC=(()=>{class n{constructor(t){this.sanitizer=t}transform(t,r){if(!r||r.trim().length<2)return this.sanitizer.bypassSecurityTrustHtml(t);const i=new RegExp(r,"ig");let s=i.exec(t),a=t;for(;s&&s.length>0;)s&&(a=a.replace(s[0],`<b>${s[0]}</b>`)),s=i.exec(t);return this.sanitizer.bypassSecurityTrustHtml(a)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(QC.H7,16))},n.\u0275pipe=o.Yjl({name:"boldFragment",type:n,pure:!0}),n})();function YC(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"li",4),o.NdJ("click",function(){const s=o.CHM(t).$implicit,a=o.oxw(3);return o.KtG(a.onChange(s))}),o.ALo(1,"boldFragment"),o.qZA()}if(2&n){const t=e.$implicit,r=o.oxw(3);o.Q6J("innerHTML",o.xi3(1,1,t.name,r.autocompleteForm.value),o.oJD)}}function XC(n,e){if(1&n&&(o.TgZ(0,"ul"),o.YNc(1,YC,2,4,"li",3),o.qZA()),2&n){const t=o.oxw().ngIf;o.xp6(1),o.Q6J("ngForOf",t)}}function eA(n,e){if(1&n&&(o.ynx(0),o.YNc(1,XC,2,1,"ul",1),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",t.showOptions)}}function tA(n,e){1&n&&(o.TgZ(0,"div",5),o._uU(1," Please provide a valid Country\n"),o.qZA())}let nA=(()=>{class n{constructor(t){this.eRef=t,this.showOptions=!1,this.error=!1,this.autocompleteForm=new C.NI,this.forceHide=!1,this.options$=this.autocompleteForm.valueChanges.pipe((0,G_.O)(""),(0,WC.b)(100),(0,gt.U)(r=>{var i;return null===(i=null==r?void 0:r.trim())||void 0===i?void 0:i.toLocaleLowerCase()}),(0,Zh.x)(),(0,Uh.b)(r=>this.handleOptionsShow(r)),(0,gt.U)(r=>j_.filter(i=>i.name.toLowerCase().includes(r))),(0,Uh.b)(r=>{var i;return this.error=0===r.length&&0!==(null===(i=this.autocompleteForm.value)||void 0===i?void 0:i.length)}))}onChange(t){!this.change||(this.change(t.code),this.autocompleteForm.setValue(t.name),this.forceHide=!0)}registerOnChange(t){this.change=t}writeValue(t){const r=j_.find(i=>i.code===t);this.autocompleteForm.setValue(null==r?void 0:r.name)}registerOnTouched(t){}setDisabledState(t){}clickOut(t){this.eRef.nativeElement.contains(t.target)||(this.showOptions=!1)}handleOptionsShow(t){this.forceHide?(this.showOptions=!1,this.forceHide=!1):this.showOptions=(null==t?void 0:t.length)>0}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-country-input"]],hostBindings:function(t,r){1&t&&o.NdJ("click",function(s){return r.clickOut(s)},!1,o.evT)},features:[o._Bn([{provide:C.JU,useExisting:n,multi:!0}])],decls:4,vars:5,consts:[["placeholder","Enter country","type","text",1,"form-control",3,"formControl","focusin"],[4,"ngIf"],["class","alert alert-warning mt-2","role","alert",4,"ngIf"],[3,"innerHTML","click",4,"ngFor","ngForOf"],[3,"innerHTML","click"],["role","alert",1,"alert","alert-warning","mt-2"]],template:function(t,r){1&t&&(o.TgZ(0,"input",0),o.NdJ("focusin",function(){return r.showOptions=!0}),o.qZA(),o.YNc(1,eA,2,1,"ng-container",1),o.ALo(2,"async"),o.YNc(3,tA,2,0,"div",2)),2&t&&(o.Q6J("formControl",r.autocompleteForm),o.xp6(1),o.Q6J("ngIf",o.lcZ(2,3,r.options$)),o.xp6(2),o.Q6J("ngIf",r.error))},dependencies:[M.sg,M.O5,C.Fj,C.JJ,C.oH,M.Ov,JC],styles:["[_nghost-%COMP%]{display:block;position:relative}ul[_ngcontent-%COMP%]{position:absolute;bottom:0;max-height:180px;max-width:100%;background-color:#fff;border:1px solid #b0bec5;overflow-y:auto;transform:translateY(100%);margin:0;list-style:none;padding:0;z-index:1000;box-shadow:8px 22px 28px -15px #42445a}li[_ngcontent-%COMP%]{padding:8px;cursor:pointer;min-width:180px}li[_ngcontent-%COMP%]:hover{background-color:#e3f2fd}"]}),n})();var rA=L(9646),iA=L(9841);function sA(n,e){1&n&&(o.TgZ(0,"span"),o._uU(1,"Click"),o.qZA())}function oA(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",6),o.NdJ("click",function(i){o.CHM(t);const s=o.oxw(2);return o.KtG(s.onClick(i))}),o.TgZ(1,"span",null,7),o.Hsn(3),o.qZA(),o.YNc(4,sA,2,0,"span",8),o.qZA()}if(2&n){const t=o.MAs(2),r=o.oxw(2);o.Q6J("disabled",r.disabled),o.xp6(4),o.Q6J("ngIf",0==t.childNodes.length)}}function aA(n,e){1&n&&(o.TgZ(0,"span"),o._uU(1,"In progress..."),o.qZA())}function cA(n,e){if(1&n&&(o.TgZ(0,"button",9),o._UZ(1,"span",10),o.TgZ(2,"span",null,7),o.Hsn(4,1),o.qZA(),o.YNc(5,aA,2,0,"span",8),o.qZA()),2&n){const t=o.MAs(3);o.xp6(5),o.Q6J("ngIf",0==t.childNodes.length)}}function uA(n,e){1&n&&(o.TgZ(0,"span"),o._uU(1,"Done!"),o.qZA())}function lA(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",11),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.reset())}),o.GkF(1,12),o.TgZ(2,"span",null,7),o.Hsn(4,2),o.qZA(),o.YNc(5,uA,2,0,"span",8),o.qZA()}if(2&n){const t=o.MAs(3);o.oxw(2);const r=o.MAs(3);o.xp6(1),o.Q6J("ngTemplateOutlet",r),o.xp6(4),o.Q6J("ngIf",0==t.childNodes.length)}}function hA(n,e){if(1&n&&(o.ynx(0,2),o.YNc(1,oA,5,2,"button",3),o.YNc(2,cA,6,1,"button",4),o.YNc(3,lA,6,2,"button",5),o.BQk()),2&n){const t=e.ngIf,r=o.oxw();o.Q6J("ngSwitch",t),o.xp6(1),o.Q6J("ngSwitchCase",r.State.Default),o.xp6(1),o.Q6J("ngSwitchCase",r.State.Working),o.xp6(1),o.Q6J("ngSwitchCase",r.State.Done)}}function dA(n,e){1&n&&(o.O4$(),o.TgZ(0,"svg",13),o._UZ(1,"path",14)(2,"path",15),o.qZA())}const fA=["*",[["","working",""]],[["","done",""]]],pA=["*","[working]","[done]"];var Be=(()=>(function(n){n.Default="default",n.Working="working",n.Done="done"}(Be||(Be={})),Be))();let mA=(()=>{class n{constructor(){this.disabled=!1,this.clickEvent=new o.vpe,this.State=Be,this.state=new xo.X(Be.Default),this.timeToReset=5e3}ngOnInit(){const t=(this.taskInProgress$||(0,rA.of)(!1)).pipe((0,G_.O)(!1));this.state$=(0,iA.a)([this.state.asObservable(),t]).pipe((0,gt.U)(([r,i])=>r===Be.Default&&i?Be.Working:r!==Be.Working||i?r:Be.Done),(0,Uh.b)(r=>{r===Be.Done&&setTimeout(()=>this.state.next(Be.Default),this.timeToReset)}))}onClick(t){this.state.next(Be.Working),this.clickEvent.emit(t)}reset(){this.state.next(Be.Default)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-task-button"]],inputs:{disabled:"disabled",taskInProgress$:["task$","taskInProgress$"]},outputs:{clickEvent:"onClick"},ngContentSelectors:pA,decls:4,vars:3,consts:[[3,"ngSwitch",4,"ngIf"],["doneIcon",""],[3,"ngSwitch"],["class","btn btn-primary",3,"disabled","click",4,"ngSwitchCase"],["class","btn btn-primary","disabled","",4,"ngSwitchCase"],["class","btn btn-success",3,"click",4,"ngSwitchCase"],[1,"btn","btn-primary",3,"disabled","click"],["ref",""],[4,"ngIf"],["disabled","",1,"btn","btn-primary"],["role","status",1,"spinner-border","spinner-border-sm","mr-2"],[1,"btn","btn-success",3,"click"],[3,"ngTemplateOutlet"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-check2-circle","mr-2"],["d","M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0z"],["d","M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z"]],template:function(t,r){1&t&&(o.F$t(fA),o.YNc(0,hA,4,4,"ng-container",0),o.ALo(1,"async"),o.YNc(2,dA,3,0,"ng-template",null,1,o.W1O)),2&t&&o.Q6J("ngIf",o.lcZ(1,1,r.state$))},dependencies:[M.O5,M.tP,M.RF,M.n9,M.Ov],styles:[".btn-primary[_ngcontent-%COMP%]{color:var(--button-color, #fff);background-color:var(--button-background-color, #007bff);border-color:var(--button-border-color, #007bff)}.btn-success[_ngcontent-%COMP%]{color:var(--button-done-color, #fff);background-color:var(--button-done-background-color, #28a745);border-color:var(--button-done-border-color, #28a745)}.bi[_ngcontent-%COMP%]{display:inline-block;vertical-align:-.125em;width:1em;height:1em}"]}),n})();const _A=function(){return{message:"Provided zip code is not a valid US code, please provide valid one."}};function yA(n,e){if(1&n&&o.GkF(0,7),2&n){o.oxw();const t=o.MAs(13);o.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",o.DdM(2,_A))}}const TA=function(){return{message:"This zip code is already stored, please provide different one, or check weather forecast below"}};function IA(n,e){if(1&n&&o.GkF(0,7),2&n){o.oxw();const t=o.MAs(13);o.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",o.DdM(2,TA))}}function wA(n,e){if(1&n&&(o.TgZ(0,"div",8),o._UZ(1,"span",9),o.TgZ(2,"span",10),o._uU(3,"Error:"),o.qZA(),o._uU(4),o.qZA()),2&n){const t=e.message;o.xp6(4),o.hij(" ",t," ")}}const bA=n=>e=>void 0!==e.value&&n.hasLocation(e.value)?{duplication:!0}:null;let xA=(()=>{class n{constructor(t){this.locations=t,this.location=new o.vpe,this.form=new C.cw({zipcode:new C.NI("",{validators:[C.kI.required,bA(this.locations)],updateOn:"blur"}),country:new C.NI("",[C.kI.required])})}ngOnInit(){}onAdd(){this.form.valid&&(this.location.emit({zipCode:this.form.value.zipcode,countryCode:this.form.value.country}),this.form.controls.zipcode.reset())}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Bh))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-location-input"]],inputs:{taskInProgress$:["task$","taskInProgress$"]},outputs:{location:"location"},decls:14,vars:5,consts:[[1,"card","card-body","bg-light","mb-4",3,"formGroup"],["placeholder","Zipcode","type","text","formControlName","zipcode",1,"form-control","mb-4"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["formControlName","country",1,"mb-4"],[3,"task$","disabled","onClick"],["working",""],["error",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","alert",1,"alert","alert-danger"],["aria-hidden","true",1,"glyphicon","glyphicon-exclamation-sign"],[1,"sr-only"]],template:function(t,r){1&t&&(o.TgZ(0,"form",0)(1,"h2"),o._uU(2,"Enter a location:"),o.qZA(),o._UZ(3,"input",1),o.YNc(4,yA,1,3,"ng-container",2),o.YNc(5,IA,1,3,"ng-container",2),o._UZ(6,"app-country-input",3),o.TgZ(7,"app-task-button",4),o.NdJ("onClick",function(){return r.onAdd()}),o.TgZ(8,"span"),o._uU(9,"Add Location"),o.qZA(),o.TgZ(10,"span",5),o._uU(11,"Adding"),o.qZA()()(),o.YNc(12,wA,5,1,"ng-template",null,6,o.W1O)),2&t&&(o.Q6J("formGroup",r.form),o.xp6(4),o.Q6J("ngIf",r.form.controls.zipcode.hasError("pattern")),o.xp6(1),o.Q6J("ngIf",r.form.controls.zipcode.hasError("duplication")),o.xp6(2),o.Q6J("task$",r.taskInProgress$)("disabled",r.form.invalid))},dependencies:[M.O5,M.tP,C._Y,C.Fj,C.JJ,C.JL,C.sg,C.u,nA,mA]}),n})();var EA=L(4986);function CA(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"section",1)(1,"article")(2,"h3"),o._uU(3),o.qZA(),o.TgZ(4,"h5"),o._uU(5),o.qZA(),o.TgZ(6,"h5"),o._uU(7,"Temperatures today:"),o.qZA(),o.TgZ(8,"p"),o._uU(9),o.qZA(),o.TgZ(10,"p")(11,"a",2),o._uU(12),o.qZA()()(),o.TgZ(13,"article")(14,"button",3),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.onRemove())}),o._uU(15,"\xd7"),o.qZA(),o._UZ(16,"img",4),o.ALo(17,"weatherIcon"),o.qZA()()}if(2&n){const t=o.oxw();o.xp6(3),o.AsE("",t.forecast.city," (",t.forecast.zipCode,")"),o.xp6(2),o.hij("Current conditions: ",t.forecast.conditions,""),o.xp6(4),o.lnq(" Current ",t.forecast.temperature," - Max ",t.forecast.temperatureMin," - Min ",t.forecast.temperatureMax," "),o.xp6(2),o.Q6J("routerLink","forecast/"+t.forecast.zipCode+"/"+t.forecast.countryCode)("title","5 day forecast for "+t.forecast.city),o.xp6(1),o.hij(" Show 5-day forecast for ",t.forecast.city," "),o.xp6(4),o.Q6J("src",o.lcZ(17,10,t.forecast.conditions),o.LSH)}}let AA=(()=>{class n{constructor(){this.remove=new o.vpe,this.ready=new o.vpe}ngAfterViewInit(){EA.z.schedule(()=>this.ready.emit())}onRemove(){this.remove.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-single-day-forecast"]],inputs:{forecast:"forecast"},outputs:{remove:"remove",ready:"ready"},decls:1,vars:1,consts:[["class","card card-body bg-light flex mb-2",4,"ngIf"],[1,"card","card-body","bg-light","flex","mb-2"],[3,"routerLink","title"],[1,"close",3,"click"],["alt","weather conditions icon",3,"src"]],template:function(t,r){1&t&&o.YNc(0,CA,18,12,"section",0),2&t&&o.Q6J("ngIf",r.forecast)},dependencies:[M.O5,z.yS,jh],styles:["section[_ngcontent-%COMP%]{flex-direction:row}img[_ngcontent-%COMP%]{height:180px}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"],changeDetection:0}),n})();const H_=new o.OlP("Browser Storage",{providedIn:"root",factory:()=>localStorage});let SA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[M.ez,zC,C.u5,C.UX,Ft.pf,bo.f5,bo.zk,Ft.P4]}),n})();o.B6R(Gh,[M.sg,M.O5,xA,AA],[M.Ov])},5861:(je,be,L)=>{function o(z,cr,ur,C,Zt,qt,ft){try{var pt=z[qt](ft),mt=pt.value}catch(ki){return void ur(ki)}pt.done?cr(mt):Promise.resolve(mt).then(C,Zt)}function M(z){return function(){var cr=this,ur=arguments;return new Promise(function(C,Zt){var qt=z.apply(cr,ur);function ft(mt){o(qt,C,Zt,ft,pt,"next",mt)}function pt(mt){o(qt,C,Zt,ft,pt,"throw",mt)}ft(void 0)})}}L.d(be,{Z:()=>M})}}]);