"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[1695],{1695:(K,g,i)=>{i.r(g),i.d(g,{ExpenseModule:()=>G});var r=i(6895),u=i(4793),t=i(4650),f=i(7080),v=i(6079),m=i(9656),A=i(9443),b=i(4433),C=i(4044);let U=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-expense"]],decls:13,vars:0,consts:[["themeColor","custom1"],["title","Expense Tracker"],["label","Dashboard","routerLink","dashboard"],["label","Categories","routerLink","categories"],["label","Income","routerLink","transactions/income"],["label","Expenses","routerLink","transactions/expense"],["label","Transactions","routerLink","transactions"]],template:function(a,o){1&a&&(t.TgZ(0,"app-material-layout",0)(1,"app-mt-header",1),t._UZ(2,"ng-sidenav-open-close-btn"),t.qZA(),t.TgZ(3,"app-mt-sidebar")(4,"app-nav-list"),t._UZ(5,"app-nav-link",2)(6,"app-nav-link",3)(7,"hr")(8,"app-nav-link",4)(9,"app-nav-link",5)(10,"app-nav-link",6),t.qZA()(),t.TgZ(11,"app-mt-main"),t._UZ(12,"router-outlet"),t.qZA()())},dependencies:[u.lC,u.rH,f.G,v.G,m.cs,m.KE,A.U,b.U,C.v]})}return n})();var Z=i(9841),q=i(4782),x=i(2843),l=i(4004),$=i(262),E=i(8405);let d=(()=>{class n{constructor(e){this.abstractFirebaseDb=e,this.basePath="expense-db",this.transactionEndpoint="transactions",this.categoryEndpoint="categories",this.transactionsWithCategory$=(0,Z.a)([this.getTransactions(),this.getCategories()]).pipe((0,l.U)(([a,o])=>a.map(c=>({...c,categoryName:o.find(z=>z.key===c.categoryId)?.name}))),(0,$.K)(this.handleError),(0,q.d)(1))}createTransaction(e){return this.abstractFirebaseDb.create(`${this.basePath}/${this.transactionEndpoint}`,e)}getTransactions(){return this.abstractFirebaseDb.readRealtime$(`${this.basePath}/${this.transactionEndpoint}`)}getTransaction(e){return this.abstractFirebaseDb.readRealtimeOriginal$(`${this.basePath}/${this.transactionEndpoint}/${e}`)}updateTransaction(e,a){return this.abstractFirebaseDb.update(`${this.basePath}/${this.transactionEndpoint}/${e}`,a)}getTransactionsByCategoryId(e){return this.getTransactions().pipe((0,l.U)(a=>a.filter(o=>o.categoryId===e)))}getTransactionsByType(e){return this.transactionsWithCategory$.pipe((0,l.U)(a=>a.filter(o=>o.type===e)))}getTransactionStats(e){return this.getTransactionsByType(e).pipe((0,l.U)(a=>a.reduce((o,c)=>o+c.amount,0)))}getTransactionStatsByCategory(e){return this.getTransactionsByType(e).pipe((0,l.U)(a=>{let o={};return a.forEach(function(c){o[c.categoryName]=o.hasOwnProperty(c.categoryName)?o[c.categoryName]+c.amount:c.amount}),o}))}createCategory(e){return this.abstractFirebaseDb.create(`${this.basePath}/${this.categoryEndpoint}`,e)}getCategories(){return this.abstractFirebaseDb.readRealtime$(`${this.basePath}/${this.categoryEndpoint}`)}getCategory(e){return this.abstractFirebaseDb.readRealtimeOriginal$(`${this.basePath}/${this.categoryEndpoint}/${e}`)}getCategoryByType(e){return this.getCategories().pipe((0,l.U)(a=>a.filter(o=>o.type===e)))}handleError(e){return(0,x._)(()=>"unknown error occured. Please Try Again")}static#t=this.\u0275fac=function(a){return new(a||n)(t.LFG(E.z))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var s=i(4006);let I=(()=>{class n{constructor(e,a){this.fb=e,this.expenseService=a,this.formInit()}formInit(){this.form=this.fb.group({name:["",s.kI.required],type:["",s.kI.required]})}create(){this.expenseService.createCategory(this.form.value).then(()=>this.formInit())}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(d))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-category"]],decls:21,vars:2,consts:[[1,"form-grid",3,"formGroup"],["formControlName","name","placeholder","Enter Category name"],["formControlName","type"],["disabled","","hidden","","selected","","value",""],["value","expense"],["value","income"],[1,"btn","btn-success",3,"disabled","click"]],template:function(a,o){1&a&&(t.TgZ(0,"section")(1,"h1"),t._uU(2,"Add Category"),t.qZA(),t.TgZ(3,"form",0)(4,"div")(5,"label"),t._uU(6,"Name"),t.qZA(),t._UZ(7,"input",1),t.qZA(),t.TgZ(8,"div")(9,"label"),t._uU(10,"Select Type"),t.qZA(),t.TgZ(11,"select",2)(12,"option",3),t._uU(13,"Type"),t.qZA(),t.TgZ(14,"option",4),t._uU(15,"Expense"),t.qZA(),t.TgZ(16,"option",5),t._uU(17,"Income"),t.qZA()()(),t.TgZ(18,"div")(19,"button",6),t.NdJ("click",function(){return o.create()}),t._uU(20,"Create"),t.qZA()()()()),2&a&&(t.xp6(3),t.Q6J("formGroup",o.form),t.xp6(16),t.Q6J("disabled",o.form.invalid))},dependencies:[s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u]})}return n})();function O(n,p){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA()()),2&n){const e=p.$implicit;t.xp6(2),t.hij(" ",e.key," "),t.xp6(2),t.Oqu(null==e?null:e.name),t.xp6(2),t.Oqu(e.type)}}let S=(()=>{class n{constructor(e){this.expenseService=e,this.categories$=this.expenseService.getCategories()}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(d))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-categories"]],decls:16,vars:3,consts:[[1,"striped-table","table-blue"],[4,"ngFor","ngForOf"]],template:function(a,o){1&a&&(t._UZ(0,"app-create-category"),t.TgZ(1,"section")(2,"h1"),t._uU(3,"All Categories"),t.qZA(),t.TgZ(4,"table",0)(5,"thead")(6,"tr")(7,"th"),t._uU(8,"Sr.Id"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Name"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Type"),t.qZA()()(),t.TgZ(13,"tbody"),t.YNc(14,O,7,3,"tr",1),t.ALo(15,"async"),t.qZA()()()),2&a&&(t.xp6(14),t.Q6J("ngForOf",t.lcZ(15,1,o.categories$)))},dependencies:[r.sg,I,r.Ov]})}return n})();var N=i(4813),F=i(8505),L=i(9267);function _(n,p){1&n&&(t.TgZ(0,"div")(1,"label"),t._uU(2,"Type"),t.qZA(),t.TgZ(3,"select",9)(4,"option",6),t._uU(5,"Select"),t.qZA(),t.TgZ(6,"option",10),t._uU(7,"Expense"),t.qZA(),t.TgZ(8,"option",11),t._uU(9,"Income"),t.qZA()()())}function J(n,p){if(1&n&&(t.TgZ(0,"option",12),t._uU(1),t.qZA()),2&n){const e=p.$implicit;t.s9C("value",e.key),t.xp6(1),t.Oqu(e.name)}}let D=(()=>{class n{constructor(e,a,o){this.fb=e,this.expenseService=a,this.toastService=o,this.formInit()}ngOnInit(){}formInit(){this.form=this.fb.group({amount:["",s.kI.required],description:["",s.kI.required],type:["",s.kI.required],date:["",s.kI.required],categoryId:["",s.kI.required]}),this.form.get("type").valueChanges.pipe((0,F.b)(e=>{this.categories$=this.expenseService.getCategoryByType(e)})).subscribe()}create(){this.expenseService.createTransaction(this.form.value).then(()=>{this.formInit(),this.toastService.showToast("Transaction created successfully.","","success")})}ngOnChanges(e){this.transactionType&&(this.formInit(),this.form.patchValue({type:this.transactionType}))}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(d),t.Y36(L.kl))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-transaction"]],inputs:{transactionType:"transactionType"},features:[t.TTD],decls:31,vars:9,consts:[[1,"form-grid",3,"formGroup"],["formControlName","amount","placeholder","Enter Amount name","type","number"],["formControlName","description","placeholder","Enter Description name"],[4,"ngIf"],["formControlName","date","type","date"],["formControlName","categoryId"],["disabled","","hidden","","selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-success",3,"disabled","click"],["formControlName","type"],["value","expense"],["value","income"],[3,"value"]],template:function(a,o){1&a&&(t.TgZ(0,"section")(1,"h2"),t._uU(2),t.ALo(3,"titlecase"),t.qZA(),t.TgZ(4,"form",0)(5,"div")(6,"label"),t._uU(7,"Amount"),t.qZA(),t._UZ(8,"input",1),t.qZA(),t.TgZ(9,"div")(10,"label"),t._uU(11,"Description"),t.qZA(),t._UZ(12,"input",2),t.qZA(),t.YNc(13,_,10,0,"div",3),t.TgZ(14,"div")(15,"label"),t._uU(16,"Date"),t.qZA(),t._UZ(17,"input",4),t.qZA(),t.TgZ(18,"div")(19,"label"),t._uU(20,"Category"),t.qZA(),t.TgZ(21,"select",5)(22,"option",6),t._uU(23,"Select"),t.qZA(),t.YNc(24,J,2,2,"option",7),t.ALo(25,"async"),t.qZA()(),t._UZ(26,"div")(27,"div"),t.TgZ(28,"div")(29,"button",8),t.NdJ("click",function(){return o.create()}),t._uU(30,"Create"),t.qZA()()()()),2&a&&(t.xp6(2),t.hij("Add ",o.transactionType?t.lcZ(3,5,o.transactionType):"Transaction",""),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(9),t.Q6J("ngIf",!o.transactionType),t.xp6(11),t.Q6J("ngForOf",t.lcZ(25,7,o.categories$)),t.xp6(5),t.Q6J("disabled",o.form.invalid))},dependencies:[r.sg,r.O5,s._Y,s.YN,s.Kr,s.Fj,s.wV,s.EJ,s.JJ,s.JL,s.sg,s.u,r.Ov,r.rS]})}return n})();function P(n,p){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",3),t._uU(4),t.ALo(5,"currency"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.ALo(14,"date"),t.qZA()()),2&n){const e=p.$implicit;t.xp6(2),t.hij(" ",e.key," "),t.xp6(1),t.Q6J("ngClass",e.type),t.xp6(1),t.Oqu(t.xi3(5,7,null==e?null:e.amount,"INR")),t.xp6(3),t.Oqu(e.description),t.xp6(2),t.Oqu(e.type),t.xp6(2),t.Oqu(e.categoryName),t.xp6(2),t.Oqu(t.lcZ(14,10,null==e?null:e.date))}}let T=(()=>{class n{constructor(e,a){this.expenseService=e,this.route=a,this.route.params.pipe((0,N.j)("type")).subscribe(o=>{this.transactionType=o,this.getTransactions()})}ngOnInit(){}getTransactions(){this.transactions$=this.transactionType?this.expenseService.getTransactionsByType(this.transactionType):this.expenseService.transactionsWithCategory$}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(d),t.Y36(u.gz))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-transactions"]],decls:23,vars:7,consts:[[3,"transactionType"],[1,"striped-table","table-blue"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(a,o){1&a&&(t._UZ(0,"app-create-transaction",0),t.TgZ(1,"section")(2,"h2"),t._uU(3),t.ALo(4,"titlecase"),t.qZA(),t.TgZ(5,"table",1)(6,"thead")(7,"tr")(8,"th"),t._uU(9,"Sr.Id"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Amount"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Description"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Type"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Category"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Date"),t.qZA()()(),t.TgZ(20,"tbody"),t.YNc(21,P,15,12,"tr",2),t.ALo(22,"async"),t.qZA()()()),2&a&&(t.Q6J("transactionType",o.transactionType),t.xp6(3),t.hij("All ",t.lcZ(4,3,o.transactionType)," Transactions"),t.xp6(18),t.Q6J("ngForOf",t.lcZ(22,5,o.transactions$)))},dependencies:[r.mk,r.sg,D,r.Ov,r.rS,r.H9,r.uU],styles:[".expense[_ngcontent-%COMP%]{color:red;font-weight:700}.income[_ngcontent-%COMP%]{color:green;font-weight:700}"]})}return n})();var B=i(1811);const h=function(){return{categoryBadge:"rectangle"}},Y=function(n,p){return{income:n,expense:p}},k=function(){return{income:"green",expense:"red"}},M=function(n,p){return{data:n,colors:p}},y=function(n){return{data:n}},Q=[{path:"",component:U,children:[{path:"",redirectTo:"transactions",pathMatch:"full"},{path:"categories",component:S},{path:"transactions",component:T},{path:"transactions/:type",component:T},{path:"dashboard",component:(()=>{class n{constructor(e){this.expenseService=e,this.totalExpense$=this.expenseService.getTransactionStats("expense"),this.totalIncome$=this.expenseService.getTransactionStats("income"),this.balance$=(0,Z.a)([this.totalIncome$,this.totalExpense$]).pipe((0,l.U)(([a,o])=>Math.abs(a-o))),this.expenseTransactions$=this.expenseService.getTransactionStatsByCategory("expense"),this.incomeTransactions$=this.expenseService.getTransactionStatsByCategory("income")}static#t=this.\u0275fac=function(a){return new(a||n)(t.Y36(d))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard"]],decls:60,vars:46,consts:[[1,"dashboard"],[1,"dashboard__item","dashboard__item--col"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","income"],[1,"card-content"],[1,"card-subtitle","expense"],[1,"card-subtitle"],["type","donut",3,"configOptions","customPie"]],template:function(a,o){1&a&&(t.TgZ(0,"section")(1,"h1"),t._uU(2,"Dashboard"),t.qZA(),t.TgZ(3,"div",0)(4,"div",1)(5,"div",2)(6,"div",3)(7,"h2",4),t._uU(8," INCOME "),t.qZA(),t.TgZ(9,"h3",5),t._uU(10),t.ALo(11,"currency"),t.ALo(12,"async"),t.qZA(),t._UZ(13,"div",6),t.qZA()()(),t.TgZ(14,"div",1)(15,"div",2)(16,"div",3)(17,"h2",4),t._uU(18," EXPENSE "),t.qZA(),t.TgZ(19,"h3",7),t._uU(20),t.ALo(21,"currency"),t.ALo(22,"async"),t.qZA(),t._UZ(23,"div",6),t.qZA()()(),t.TgZ(24,"div",1)(25,"div",2)(26,"div",3)(27,"h2",4),t._uU(28," BALANCE "),t.qZA(),t.TgZ(29,"h3",8),t._uU(30),t.ALo(31,"currency"),t.ALo(32,"async"),t.qZA(),t._UZ(33,"div",6),t.qZA()()()(),t.TgZ(34,"div",0)(35,"div",1)(36,"div",2)(37,"div",3)(38,"h2",4),t._uU(39," Stats "),t.qZA(),t.TgZ(40,"div",6),t._UZ(41,"ng-pie-donut",9),t.ALo(42,"async"),t.ALo(43,"async"),t.qZA()()()(),t.TgZ(44,"div",1)(45,"div",2)(46,"div",3)(47,"h2",4),t._uU(48," INCOME "),t.qZA(),t.TgZ(49,"div",6),t._UZ(50,"ng-pie-donut",9),t.ALo(51,"async"),t.qZA()()()(),t.TgZ(52,"div",1)(53,"div",2)(54,"div",3)(55,"h2",4),t._uU(56," EXPENSE "),t.qZA(),t.TgZ(57,"div",6),t._UZ(58,"ng-pie-donut",9),t.ALo(59,"async"),t.qZA()()()()()()),2&a&&(t.xp6(10),t.hij(" ",t.xi3(11,9,t.lcZ(12,12,o.totalIncome$),"INR")," "),t.xp6(10),t.hij(" ",t.xi3(21,14,t.lcZ(22,17,o.totalExpense$),"INR")," "),t.xp6(10),t.hij(" ",t.xi3(31,19,t.lcZ(32,22,o.balance$),"INR")," "),t.xp6(11),t.Q6J("configOptions",t.DdM(32,h))("customPie",t.WLB(37,M,t.WLB(33,Y,t.lcZ(42,24,o.totalIncome$),t.lcZ(43,26,o.totalExpense$)),t.DdM(36,k))),t.xp6(9),t.Q6J("configOptions",t.DdM(40,h))("customPie",t.VKq(41,y,t.lcZ(51,28,o.incomeTransactions$))),t.xp6(8),t.Q6J("configOptions",t.DdM(43,h))("customPie",t.VKq(44,y,t.lcZ(59,30,o.expenseTransactions$))))},dependencies:[B.m,r.Ov,r.H9],styles:[".expense[_ngcontent-%COMP%]{color:red;font-weight:700}.income[_ngcontent-%COMP%]{color:green;font-weight:700}"]})}return n})()}]}];let j=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(Q),u.Bz]})}return n})();var R=i(9710),X=i(7374);let G=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[r.ez,s.UX,j,R.b$,X.JU]})}return n})()}}]);