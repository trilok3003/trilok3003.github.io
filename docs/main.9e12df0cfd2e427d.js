"use strict";var PI=Object.defineProperty,RI=Object.defineProperties,xI=Object.getOwnPropertyDescriptors,U0=Object.getOwnPropertySymbols,NI=Object.prototype.hasOwnProperty,LI=Object.prototype.propertyIsEnumerable,V0=(_e,ne,D)=>ne in _e?PI(_e,ne,{enumerable:!0,configurable:!0,writable:!0,value:D}):_e[ne]=D,B0=(_e,ne)=>{for(var D in ne||(ne={}))NI.call(ne,D)&&V0(_e,D,ne[D]);if(U0)for(var D of U0(ne))LI.call(ne,D)&&V0(_e,D,ne[D]);return _e},j0=(_e,ne)=>RI(_e,xI(ne));(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[179],{2090:(_e,ne,D)=>{D.d(ne,{BH:()=>Oe,DV:()=>Fn,G6:()=>hn,GJ:()=>$t,L:()=>z,LL:()=>hr,P0:()=>dt,Pz:()=>Ue,Sg:()=>yt,UI:()=>Li,US:()=>re,Wl:()=>jr,Yr:()=>Tt,ZR:()=>Cr,aH:()=>mt,b$:()=>Ye,cI:()=>Dn,dS:()=>Wn,eu:()=>qt,g5:()=>J,gK:()=>dn,gQ:()=>Pr,h$:()=>ee,hl:()=>nr,hu:()=>I,m9:()=>fi,ne:()=>je,p$:()=>Q,pd:()=>oi,q4:()=>xe,r3:()=>on,ru:()=>Qe,tV:()=>oe,uI:()=>Je,ug:()=>zr,vZ:()=>zt,w1:()=>qe,w9:()=>it,xO:()=>gr,xb:()=>Fr,z$:()=>It,zd:()=>Ei});const I=function(Ae,Ie){if(!Ae)throw J(Ie)},J=function(Ae){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Ae)},B=function(Ae){const Ie=[];let Fe=0;for(let vt=0;vt<Ae.length;vt++){let We=Ae.charCodeAt(vt);We<128?Ie[Fe++]=We:We<2048?(Ie[Fe++]=We>>6|192,Ie[Fe++]=63&We|128):55296==(64512&We)&&vt+1<Ae.length&&56320==(64512&Ae.charCodeAt(vt+1))?(We=65536+((1023&We)<<10)+(1023&Ae.charCodeAt(++vt)),Ie[Fe++]=We>>18|240,Ie[Fe++]=We>>12&63|128,Ie[Fe++]=We>>6&63|128,Ie[Fe++]=63&We|128):(Ie[Fe++]=We>>12|224,Ie[Fe++]=We>>6&63|128,Ie[Fe++]=63&We|128)}return Ie},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ae,Ie){if(!Array.isArray(Ae))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Fe=Ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,vt=[];for(let We=0;We<Ae.length;We+=3){const Gt=Ae[We],Xt=We+1<Ae.length,qn=Xt?Ae[We+1]:0,tr=We+2<Ae.length,Er=tr?Ae[We+2]:0;let he=(15&qn)<<2|Er>>6,ke=63&Er;tr||(ke=64,Xt||(he=64)),vt.push(Fe[Gt>>2],Fe[(3&Gt)<<4|qn>>4],Fe[he],Fe[ke])}return vt.join("")},encodeString(Ae,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?btoa(Ae):this.encodeByteArray(B(Ae),Ie)},decodeString(Ae,Ie){return this.HAS_NATIVE_SUPPORT&&!Ie?atob(Ae):function(Ae){const Ie=[];let Fe=0,vt=0;for(;Fe<Ae.length;){const We=Ae[Fe++];if(We<128)Ie[vt++]=String.fromCharCode(We);else if(We>191&&We<224){const Gt=Ae[Fe++];Ie[vt++]=String.fromCharCode((31&We)<<6|63&Gt)}else if(We>239&&We<365){const tr=((7&We)<<18|(63&Ae[Fe++])<<12|(63&Ae[Fe++])<<6|63&Ae[Fe++])-65536;Ie[vt++]=String.fromCharCode(55296+(tr>>10)),Ie[vt++]=String.fromCharCode(56320+(1023&tr))}else{const Gt=Ae[Fe++],Xt=Ae[Fe++];Ie[vt++]=String.fromCharCode((15&We)<<12|(63&Gt)<<6|63&Xt)}}return Ie.join("")}(this.decodeStringToByteArray(Ae,Ie))},decodeStringToByteArray(Ae,Ie){this.init_();const Fe=Ie?this.charToByteMapWebSafe_:this.charToByteMap_,vt=[];for(let We=0;We<Ae.length;){const Gt=Fe[Ae.charAt(We++)],qn=We<Ae.length?Fe[Ae.charAt(We)]:0;++We;const Er=We<Ae.length?Fe[Ae.charAt(We)]:64;++We;const Ce=We<Ae.length?Fe[Ae.charAt(We)]:64;if(++We,null==Gt||null==qn||null==Er||null==Ce)throw Error();vt.push(Gt<<2|qn>>4),64!==Er&&(vt.push(qn<<4&240|Er>>2),64!==Ce&&vt.push(Er<<6&192|Ce))}return vt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ae=0;Ae<this.ENCODED_VALS.length;Ae++)this.byteToCharMap_[Ae]=this.ENCODED_VALS.charAt(Ae),this.charToByteMap_[this.byteToCharMap_[Ae]]=Ae,this.byteToCharMapWebSafe_[Ae]=this.ENCODED_VALS_WEBSAFE.charAt(Ae),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ae]]=Ae,Ae>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ae)]=Ae,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ae)]=Ae)}}},ee=function(Ae){const Ie=B(Ae);return re.encodeByteArray(Ie,!0)},z=function(Ae){return ee(Ae).replace(/\./g,"")},oe=function(Ae){try{return re.decodeString(Ae,!0)}catch(Ie){console.error("base64Decode failed: ",Ie)}return null};function Q(Ae){return le(void 0,Ae)}function le(Ae,Ie){if(!(Ie instanceof Object))return Ie;switch(Ie.constructor){case Date:return new Date(Ie.getTime());case Object:void 0===Ae&&(Ae={});break;case Array:Ae=[];break;default:return Ie}for(const Fe in Ie)!Ie.hasOwnProperty(Fe)||!ue(Fe)||(Ae[Fe]=le(Ae[Fe],Ie[Fe]));return Ae}function ue(Ae){return"__proto__"!==Ae}const He=()=>{try{return function Re(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const Ae=process.env.__FIREBASE_DEFAULTS__;return Ae?JSON.parse(Ae):void 0})()||(()=>{if("undefined"==typeof document)return;let Ae;try{Ae=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Fe){return}const Ie=Ae&&oe(Ae[1]);return Ie&&JSON.parse(Ie)})()}catch(Ae){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Ae}`)}},xe=Ae=>{var Ie,Fe;return null===(Fe=null===(Ie=He())||void 0===Ie?void 0:Ie.emulatorHosts)||void 0===Fe?void 0:Fe[Ae]},dt=Ae=>{const Ie=xe(Ae);if(!Ie)return;const Fe=Ie.lastIndexOf(":");if(Fe<=0||Fe+1===Ie.length)throw new Error(`Invalid host ${Ie} with no separate hostname and port!`);const vt=parseInt(Ie.substring(Fe+1),10);return"["===Ie[0]?[Ie.substring(1,Fe-1),vt]:[Ie.substring(0,Fe),vt]},mt=()=>{var Ae;return null===(Ae=He())||void 0===Ae?void 0:Ae.config},Ue=Ae=>{var Ie;return null===(Ie=He())||void 0===Ie?void 0:Ie[`_${Ae}`]};class Oe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ie,Fe)=>{this.resolve=Ie,this.reject=Fe})}wrapCallback(Ie){return(Fe,vt)=>{Fe?this.reject(Fe):this.resolve(vt),"function"==typeof Ie&&(this.promise.catch(()=>{}),1===Ie.length?Ie(Fe):Ie(Fe,vt))}}}function yt(Ae,Ie){if(Ae.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const vt=Ie||"demo-project",We=Ae.iat||0,Gt=Ae.sub||Ae.user_id;if(!Gt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Xt=Object.assign({iss:`https://securetoken.google.com/${vt}`,aud:vt,iat:We,exp:We+3600,auth_time:We,sub:Gt,user_id:Gt,firebase:{sign_in_provider:"custom",identities:{}}},Ae);return[z(JSON.stringify({alg:"none",type:"JWT"})),z(JSON.stringify(Xt)),""].join(".")}function It(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Je(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function Qe(){const Ae="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ae&&void 0!==Ae.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function qe(){const Ae=It();return Ae.indexOf("MSIE ")>=0||Ae.indexOf("Trident/")>=0}function Tt(){return!1}function hn(){return!function Nt(){var Ae;const Ie=null===(Ae=He())||void 0===Ae?void 0:Ae.forceEnvironment;if("node"===Ie)return!0;if("browser"===Ie)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Fe){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nr(){try{return"object"==typeof indexedDB}catch(Ae){return!1}}function qt(){return new Promise((Ae,Ie)=>{try{let Fe=!0;const vt="validate-browser-context-for-indexeddb-analytics-module",We=self.indexedDB.open(vt);We.onsuccess=()=>{We.result.close(),Fe||self.indexedDB.deleteDatabase(vt),Ae(!0)},We.onupgradeneeded=()=>{Fe=!1},We.onerror=()=>{var Gt;Ie((null===(Gt=We.error)||void 0===Gt?void 0:Gt.message)||"")}}catch(Fe){Ie(Fe)}})}class Cr extends Error{constructor(Ie,Fe,vt){super(Fe),this.code=Ie,this.customData=vt,this.name="FirebaseError",Object.setPrototypeOf(this,Cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hr.prototype.create)}}class hr{constructor(Ie,Fe,vt){this.service=Ie,this.serviceName=Fe,this.errors=vt}create(Ie,...Fe){const vt=Fe[0]||{},We=`${this.service}/${Ie}`,Gt=this.errors[Ie],Xt=Gt?function ir(Ae,Ie){return Ae.replace(Ln,(Fe,vt)=>{const We=Ie[vt];return null!=We?String(We):`<${vt}?>`})}(Gt,vt):"Error";return new Cr(We,`${this.serviceName}: ${Xt} (${We}).`,vt)}}const Ln=/\{\$([^}]+)}/g;function Dn(Ae){return JSON.parse(Ae)}function jr(Ae){return JSON.stringify(Ae)}const Ct=function(Ae){let Ie={},Fe={},vt={},We="";try{const Gt=Ae.split(".");Ie=Dn(oe(Gt[0])||""),Fe=Dn(oe(Gt[1])||""),We=Gt[2],vt=Fe.d||{},delete Fe.d}catch(Gt){}return{header:Ie,claims:Fe,data:vt,signature:We}},it=function(Ae){const Fe=Ct(Ae).claims;return!!Fe&&"object"==typeof Fe&&Fe.hasOwnProperty("iat")},$t=function(Ae){const Ie=Ct(Ae).claims;return"object"==typeof Ie&&!0===Ie.admin};function on(Ae,Ie){return Object.prototype.hasOwnProperty.call(Ae,Ie)}function Fn(Ae,Ie){if(Object.prototype.hasOwnProperty.call(Ae,Ie))return Ae[Ie]}function Fr(Ae){for(const Ie in Ae)if(Object.prototype.hasOwnProperty.call(Ae,Ie))return!1;return!0}function Li(Ae,Ie,Fe){const vt={};for(const We in Ae)Object.prototype.hasOwnProperty.call(Ae,We)&&(vt[We]=Ie.call(Fe,Ae[We],We,Ae));return vt}function zt(Ae,Ie){if(Ae===Ie)return!0;const Fe=Object.keys(Ae),vt=Object.keys(Ie);for(const We of Fe){if(!vt.includes(We))return!1;const Gt=Ae[We],Xt=Ie[We];if(si(Gt)&&si(Xt)){if(!zt(Gt,Xt))return!1}else if(Gt!==Xt)return!1}for(const We of vt)if(!Fe.includes(We))return!1;return!0}function si(Ae){return null!==Ae&&"object"==typeof Ae}function gr(Ae){const Ie=[];for(const[Fe,vt]of Object.entries(Ae))Array.isArray(vt)?vt.forEach(We=>{Ie.push(encodeURIComponent(Fe)+"="+encodeURIComponent(We))}):Ie.push(encodeURIComponent(Fe)+"="+encodeURIComponent(vt));return Ie.length?"&"+Ie.join("&"):""}function Ei(Ae){const Ie={};return Ae.replace(/^\?/,"").split("&").forEach(vt=>{if(vt){const[We,Gt]=vt.split("=");Ie[decodeURIComponent(We)]=decodeURIComponent(Gt)}}),Ie}function oi(Ae){const Ie=Ae.indexOf("?");if(!Ie)return"";const Fe=Ae.indexOf("#",Ie);return Ae.substring(Ie,Fe>0?Fe:void 0)}class Pr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ie=1;Ie<this.blockSize;++Ie)this.pad_[Ie]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ie,Fe){Fe||(Fe=0);const vt=this.W_;if("string"==typeof Ie)for(let Ce=0;Ce<16;Ce++)vt[Ce]=Ie.charCodeAt(Fe)<<24|Ie.charCodeAt(Fe+1)<<16|Ie.charCodeAt(Fe+2)<<8|Ie.charCodeAt(Fe+3),Fe+=4;else for(let Ce=0;Ce<16;Ce++)vt[Ce]=Ie[Fe]<<24|Ie[Fe+1]<<16|Ie[Fe+2]<<8|Ie[Fe+3],Fe+=4;for(let Ce=16;Ce<80;Ce++){const he=vt[Ce-3]^vt[Ce-8]^vt[Ce-14]^vt[Ce-16];vt[Ce]=4294967295&(he<<1|he>>>31)}let Er,$e,We=this.chain_[0],Gt=this.chain_[1],Xt=this.chain_[2],qn=this.chain_[3],tr=this.chain_[4];for(let Ce=0;Ce<80;Ce++){Ce<40?Ce<20?(Er=qn^Gt&(Xt^qn),$e=1518500249):(Er=Gt^Xt^qn,$e=1859775393):Ce<60?(Er=Gt&Xt|qn&(Gt|Xt),$e=2400959708):(Er=Gt^Xt^qn,$e=3395469782);const he=(We<<5|We>>>27)+Er+tr+$e+vt[Ce]&4294967295;tr=qn,qn=Xt,Xt=4294967295&(Gt<<30|Gt>>>2),Gt=We,We=he}this.chain_[0]=this.chain_[0]+We&4294967295,this.chain_[1]=this.chain_[1]+Gt&4294967295,this.chain_[2]=this.chain_[2]+Xt&4294967295,this.chain_[3]=this.chain_[3]+qn&4294967295,this.chain_[4]=this.chain_[4]+tr&4294967295}update(Ie,Fe){if(null==Ie)return;void 0===Fe&&(Fe=Ie.length);const vt=Fe-this.blockSize;let We=0;const Gt=this.buf_;let Xt=this.inbuf_;for(;We<Fe;){if(0===Xt)for(;We<=vt;)this.compress_(Ie,We),We+=this.blockSize;if("string"==typeof Ie){for(;We<Fe;)if(Gt[Xt]=Ie.charCodeAt(We),++Xt,++We,Xt===this.blockSize){this.compress_(Gt),Xt=0;break}}else for(;We<Fe;)if(Gt[Xt]=Ie[We],++Xt,++We,Xt===this.blockSize){this.compress_(Gt),Xt=0;break}}this.inbuf_=Xt,this.total_+=Fe}digest(){const Ie=[];let Fe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let We=this.blockSize-1;We>=56;We--)this.buf_[We]=255&Fe,Fe/=256;this.compress_(this.buf_);let vt=0;for(let We=0;We<5;We++)for(let Gt=24;Gt>=0;Gt-=8)Ie[vt]=this.chain_[We]>>Gt&255,++vt;return Ie}}function je(Ae,Ie){const Fe=new Te(Ae,Ie);return Fe.subscribe.bind(Fe)}class Te{constructor(Ie,Fe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Fe,this.task.then(()=>{Ie(this)}).catch(vt=>{this.error(vt)})}next(Ie){this.forEachObserver(Fe=>{Fe.next(Ie)})}error(Ie){this.forEachObserver(Fe=>{Fe.error(Ie)}),this.close(Ie)}complete(){this.forEachObserver(Ie=>{Ie.complete()}),this.close()}subscribe(Ie,Fe,vt){let We;if(void 0===Ie&&void 0===Fe&&void 0===vt)throw new Error("Missing Observer.");We=function Xe(Ae,Ie){if("object"!=typeof Ae||null===Ae)return!1;for(const Fe of Ie)if(Fe in Ae&&"function"==typeof Ae[Fe])return!0;return!1}(Ie,["next","error","complete"])?Ie:{next:Ie,error:Fe,complete:vt},void 0===We.next&&(We.next=ht),void 0===We.error&&(We.error=ht),void 0===We.complete&&(We.complete=ht);const Gt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?We.error(this.finalError):We.complete()}catch(Xt){}}),this.observers.push(We),Gt}unsubscribeOne(Ie){void 0===this.observers||void 0===this.observers[Ie]||(delete this.observers[Ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ie){if(!this.finalized)for(let Fe=0;Fe<this.observers.length;Fe++)this.sendOne(Fe,Ie)}sendOne(Ie,Fe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ie])try{Fe(this.observers[Ie])}catch(vt){"undefined"!=typeof console&&console.error&&console.error(vt)}})}close(Ie){this.finalized||(this.finalized=!0,void 0!==Ie&&(this.finalError=Ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ht(){}function dn(Ae,Ie){return`${Ae} failed: ${Ie} argument `}const Wn=function(Ae){const Ie=[];let Fe=0;for(let vt=0;vt<Ae.length;vt++){let We=Ae.charCodeAt(vt);if(We>=55296&&We<=56319){const Gt=We-55296;vt++,I(vt<Ae.length,"Surrogate pair missing trail surrogate."),We=65536+(Gt<<10)+(Ae.charCodeAt(vt)-56320)}We<128?Ie[Fe++]=We:We<2048?(Ie[Fe++]=We>>6|192,Ie[Fe++]=63&We|128):We<65536?(Ie[Fe++]=We>>12|224,Ie[Fe++]=We>>6&63|128,Ie[Fe++]=63&We|128):(Ie[Fe++]=We>>18|240,Ie[Fe++]=We>>12&63|128,Ie[Fe++]=We>>6&63|128,Ie[Fe++]=63&We|128)}return Ie},zr=function(Ae){let Ie=0;for(let Fe=0;Fe<Ae.length;Fe++){const vt=Ae.charCodeAt(Fe);vt<128?Ie++:vt<2048?Ie+=2:vt>=55296&&vt<=56319?(Ie+=4,Fe++):Ie+=3}return Ie};function fi(Ae){return Ae&&Ae._delegate?Ae._delegate:Ae}},8994:(_e,ne,D)=>{D.d(ne,{s:()=>J});var g=D(5e3),I=D(520);let J=(()=>{class B{constructor(re){this.http=re}login(re,ee){return this.http.post("login",{username:re,password:ee})}getProducts(){return this.http.get("products",{headers:{}})}}return B.\u0275fac=function(re){return new(re||B)(g.LFG(I.eN))},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})()},6344:(_e,ne,D)=>{D.d(ne,{e:()=>Y});var g=D(1135),I=D(8505),J=D(5e3),B=D(8994);let Y=(()=>{class re{constructor(z){this.apiService=z,this._isLoggedIn$=new g.X(!1),this.isLoggedIn$=this._isLoggedIn$.asObservable(),this.TOKEN_NAME="profanis_auth",this._isLoggedIn$.next(!!this.token),this.user=this.getUser(this.token)}get token(){return localStorage.getItem(this.TOKEN_NAME)}login(z,oe){return this.apiService.login(z,oe).pipe((0,I.b)(Q=>{this._isLoggedIn$.next(!0),localStorage.setItem(this.TOKEN_NAME,Q.token),this.user=this.getUser(Q.token)}))}getUser(z){return z?JSON.parse(atob(z.split(".")[1])):null}hasRole(z){var oe;return(null===(oe=this.user)||void 0===oe?void 0:oe.Role.includes(z))||!1}}return re.\u0275fac=function(z){return new(z||re)(J.LFG(B.s))},re.\u0275prov=J.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"}),re})()},3483:(_e,ne,D)=>{D.d(ne,{b:()=>I});const I=new(D(5e3).OlP)("logger",{factory:()=>({log:J=>console.log(`DEFAULT ${J}`),info:J=>console.info(`DEFAULT ${J}`)})})},7719:(_e,ne,D)=>{D.d(ne,{t:()=>ue});var g=D(1135),I=D(2843),J=D(3900),B=D(9646),Y=D(6805),ee=D(262),z=D(8505),oe=D(4004),Q=D(5e3),le=D(520);let ue=(()=>{class Re{constructor(ve){this.http=ve,this.alertSubject=new g.X(null),this.alertObservable=this.alertSubject.asObservable()}getUser(ve){return this.http.get(`https://jsonplaceholder.typicode.com/users/${ve}`).pipe((0,ee.K)(Be=>(0,I._)(Be)))}getToDo(ve){return this.http.get(`https://jsonplaceholder.typicode.com/todos?userId=${ve}`).pipe((0,ee.K)(Be=>(0,I._)(Be)))}setUser(ve){console.log(ve)}setToDos(ve){console.log(ve)}initialiseAppUsingObservables(){return this.getUser(5).pipe((0,J.w)(ve=>(this.setUser(ve),this.getToDo(ve.id).pipe((0,z.b)(Be=>this.setToDos(Be))))),(0,ee.K)(ve=>(this.alertSubject.next(ve),(0,B.of)(ve))))}initialiseAppUsingPromises(){return function re(Re,Ge){const ve="object"==typeof Ge;return new Promise((Be,He)=>{let dt,xe=!1;Re.subscribe({next:mt=>{dt=mt,xe=!0},error:He,complete:()=>{xe?Be(dt):ve?Be(Ge.defaultValue):He(new Y.K)}})})}(this.initialiseAppUsingObservables())}getAlbums(){return this.http.get("https://jsonplaceholder.typicode.com/albums").pipe((0,oe.U)(ve=>ve))}getPhotos(){return this.http.get("https://jsonplaceholder.typicode.com/photos").pipe((0,oe.U)(ve=>ve))}getComments(){return this.http.get("https://jsonplaceholder.typicode.com/comments").pipe((0,oe.U)(ve=>ve))}deleteToDo(){return this.http.delete("https://jsonplaceholder.typicode.com/todos/2").pipe((0,oe.U)(ve=>ve))}getToDos(){return this.http.get("https://jsonplaceholder.typicode.com/todos").pipe((0,oe.U)(ve=>ve))}}return Re.\u0275fac=function(ve){return new(ve||Re)(Q.LFG(le.eN))},Re.\u0275prov=Q.Yz7({token:Re,factory:Re.\u0275fac,providedIn:"root"}),Re})()},4070:(_e,ne,D)=>{D.d(ne,{g:()=>Y});var g=D(1135),I=D(8646),J=D(8343),B=D(5e3);let Y=(()=>{class re{constructor(){this._notification=new g.X(null),this.notification$=this._notification.asObservable().pipe((0,I.n)(),(0,J.x)())}notify(z){this._notification.next(z),setTimeout(()=>this._notification.next(null),3e3)}}return re.\u0275fac=function(z){return new(z||re)},re.\u0275prov=B.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"}),re})()},8830:(_e,ne,D)=>{D.d(ne,{O:()=>He});var g=D(2805),I=D(4351),J=D(576),Y=D(4128),re=D(4707),ee=D(4086),z=D(5625),oe=D(262),Q=D(8505),le=D(9770),ue=D(4782),Re=D(2843),Ge=D(5e3),ve=D(520),Be=(()=>{return(xe=Be||(Be={})).LOADING="LOADING",xe.SUCCESS="SUCCESS",xe.ERROR="ERROR",Be;var xe})();let He=(()=>{class xe{constructor(mt){this.http=mt}getNotifications(){return this.http.get("http://api").pipe(this.poll(1e3))}poll(mt,Ue=0){return function(Oe){return(0,g.H)(Ue,mt).pipe(function B(xe,dt){return(0,J.m)(dt)?(0,I.b)(()=>xe,dt):(0,I.b)(()=>xe)}(Oe))}}get(mt){return this.http.get(mt)}post(mt,Ue){return this.http.post(mt,Ue)}getSwapi(){let mt=this.http.get("https://swapi.dev/api/people/1/"),Ue=this.http.get("https://swapi.dev/api/planets/1/");(0,Y.D)([mt,Ue]).subscribe(Oe=>{Oe[0].homeworld=Oe[1],this.loadedCharacter=Oe[0]})}load(mt){const Ue=new re.t,Oe=this.http.get(`https://swapi.dev/api/people/${mt}/`).pipe((0,ee.g)(2e3),(0,z.X)(2),(0,oe.K)(It=>{throw Ue.next(Be.ERROR),"error loading user"}),(0,Q.b)(()=>Ue.next(Be.SUCCESS)));return{data:(0,le.P)(()=>(Ue.next(Be.LOADING),Oe)),status:Ue}}share(){this.rawData$=this.http.get("https://jsonplaceholder.typicode.com/todos/1").pipe((0,ue.d)())}GetData(){return this.rawData$.toPromise()}getRandomjoke(){return this.http.get("https://icanhazdadjoke.com/slack").pipe((0,oe.K)(this.handleError))}handleError(){return(0,Re._)("Network Error Occured")}}return xe.\u0275fac=function(mt){return new(mt||xe)(Ge.LFG(ve.eN))},xe.\u0275prov=Ge.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})()},8285:(_e,ne,D)=>{D.d(ne,{Y:()=>J});var g=D(5e3),I=(()=>{return(B=I||(I={}))[B.slideToLeft=1]="slideToLeft",B[B.slideToRight=2]="slideToRight",B[B.slideToTop=3]="slideToTop",B[B.slideToBottom=4]="slideToBottom",I;var B})();let J=(()=>{class B{constructor(){this.routeAnimation=null}setRouteAnimation(re){this.routeAnimation=I[re]}get currentRouteAnimation(){return this.routeAnimation}}return B.\u0275fac=function(re){return new(re||B)},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})()},7637:(_e,ne,D)=>{D.d(ne,{u:()=>g});class g{}},9155:(_e,ne,D)=>{D.d(ne,{Yk:()=>g,wJ:()=>I});var g=(()=>{return(B=g||(g={})).Clear="Clear",B.Snow="Snow",B.Rain="Rain",B.Clouds="Clouds",B.Thunderstorm="Thunderstorm",B.Atmosphere="Atmosphere",B.Drizzle="Drizzle",B.Unknown="Unknown",g;var B})();function I(B){return(new Map).set("Thunderstorm",g.Thunderstorm).set("Drizzle",g.Drizzle).set("Rain",g.Rain).set("Snow",g.Snow).set("Atmosphere",g.Atmosphere).set("Clouds",g.Clouds).set("Clear",g.Clear).get(B.main)||g.Unknown}},4141:(_e,ne,D)=>{D.d(ne,{g:()=>Y});var g=D(5e3),I=D(520);let J=(()=>{class re{constructor(){this.http=(0,g.f3M)(I.eN)}post(z,oe){return this.http.post(`${this.databaseURL}/${z}`,oe)}get(z,oe={}){return this.http.get(`${this.databaseURL}/${z}`,{params:oe})}delete(z){return this.http.delete(`${this.databaseURL}/${z}`)}put(z,oe){return this.http.put(`${this.databaseURL}/${z}`,oe)}patch(z,oe){return this.http.patch(`${this.databaseURL}/${z}`,oe)}}return re.\u0275fac=function(z){return new(z||re)},re.\u0275prov=g.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"}),re})();var B=D(197);let Y=(()=>{class re extends J{constructor(){super(...arguments),this.databaseURL=B.w.databaseURL}}return re.\u0275fac=function(){let ee;return function(oe){return(ee||(ee=g.n5z(re)))(oe||re)}}(),re.\u0275prov=g.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"}),re})()},4466:(_e,ne,D)=>{D.d(ne,{m:()=>Y});var g=D(9808),I=D(3075),J=D(4202),B=D(5e3);let Y=(()=>{class re{}return re.\u0275fac=function(z){return new(z||re)},re.\u0275mod=B.oAB({type:re}),re.\u0275inj=B.cJS({imports:[g.ez,J.Bz,I.u5,I.UX,I.u5,I.UX]}),re})()},1944:(_e,ne,D)=>{D.d(ne,{$0:()=>re,$f:()=>B,$s:()=>Y,GO:()=>I,HD:()=>ee,JW:()=>le,Xt:()=>Re,hS:()=>ue,m0:()=>J,mm:()=>Q,n3:()=>z,rc:()=>oe});var g=D(5094);const I=(0,g.PH)("[ARTICLE] Show All"),J=(0,g.PH)("[ARTICLE] Show All Success",(0,g.Ky)()),B=(0,g.PH)("[ARTICLE] Create",(0,g.Ky)()),Y=(0,g.PH)("[ARTICLE] Create Success",(0,g.Ky)()),re=(0,g.PH)("[ARTICLE] Create Failure",(0,g.Ky)()),ee=(0,g.PH)("[ARTICLE] Get by Id",(0,g.Ky)()),z=(0,g.PH)("[ARTICLE] Get by Id Success",(0,g.Ky)()),oe=(0,g.PH)("[ARTICLE] Reset"),Q=(0,g.PH)("[Product] Add to cart",(0,g.Ky)()),le=(0,g.PH)("[Product] Remove from cart",(0,g.Ky)()),ue=(0,g.PH)("[Products] Load items from server"),Re=(0,g.PH)("[Products] Load success",(0,g.Ky)())},8713:(_e,ne,D)=>{D.d(ne,{FC:()=>oe,N5:()=>Ge,Zz:()=>z,kk:()=>Re,ll:()=>ve});var g=D(5094),I=D(1944);const Y=(0,g.Lq)({articles:[],message:""},(0,g.on)(I.m0,(Be,{payload:He})=>({articles:He,message:"Success"})),(0,g.on)(I.$s,(Be,{payload:He})=>({articles:[He],message:"Article Created."})),(0,g.on)(I.$0,(Be,{payload:He})=>({articles:[],message:He})),(0,g.on)(I.n3,(Be,{payload:He})=>({articles:He,message:"Success"})),(0,g.on)(I.rc,Be=>({articles:[],message:""}))),ee=(0,g.ZF)("articleState"),z=(0,g.P1)(ee,Be=>Be.articles),oe=(0,g.P1)(ee,Be=>Be.message),Q=(0,g.Lq)({products:[],cart:[]},(0,g.on)(I.Xt,(Be,{payload:He})=>Object.assign(Object.assign({},Be),{products:He})),(0,g.on)(I.mm,(Be,{payload:He})=>Object.assign(Object.assign({},Be),{cart:[...Be.cart,He]})),(0,g.on)(I.JW,(Be,{payload:He})=>Object.assign(Object.assign({},Be),{cart:[...Be.cart.filter(xe=>xe.name!==He.name)]}))),ue=(0,g.ZF)("productState1"),Re=(0,g.P1)(ue,Be=>Be.products),Ge=(0,g.P1)(ue,Be=>Be.cart),ve={articleState:function re(Be,He){return Y(Be,He)},productState1:function le(Be,He){return Q(Be,He)}}},9884:(_e,ne,D)=>{D.d(ne,{y:()=>J});var g=D(7579),I=D(1135);class J{constructor(Y){this.reducer=Y,this.action=new g.x;const re={type:"@ngrx/store/init"},ee=Y(void 0,re);this.state=new I.X(ee),this.state$=this.state.asObservable(),this.action$=this.action.asObservable(),this.action.next(re)}dispatch(Y){const re=this.state.getValue(),ee=this.reducer(re,Y);this.state.next(ee),this.action.next(Y)}}},8625:(_e,ne,D)=>{D.d(ne,{IH:()=>Y,Mj:()=>B,nP:()=>J,zD:()=>re});var g=D(5094),I=(()=>{return(ee=I||(I={})).INCREMENT="Increment Article",ee.DECREMENT="Decrememnt Article",ee.ADD="Add Article",ee.LOAD="Load Articles",I;var ee})();const J=(0,g.PH)(I.INCREMENT,(0,g.Ky)()),B=(0,g.PH)(I.DECREMENT,(0,g.Ky)()),Y=(0,g.PH)(I.ADD,(0,g.Ky)()),re=(0,g.PH)(I.LOAD)},7369:(_e,ne,D)=>{D.d(ne,{Jl:()=>re,UN:()=>J});var g=D(5094),I=D(8625);const J="article",Y=(0,g.Lq)({articles:[]},(0,g.on)(I.nP,(ee,z)=>Object.assign(Object.assign({},ee),{articles:ee.articles.map(oe=>oe.id==z.id?Object.assign(Object.assign({},oe),{points:oe.points+1}):oe)})),(0,g.on)(I.Mj,(ee,z)=>Object.assign(Object.assign({},ee),{articles:ee.articles.map(oe=>oe.id==z.id?Object.assign(Object.assign({},oe),{points:oe.points-1}):oe)})),(0,g.on)(I.IH,(ee,{payload:z})=>Object.assign(Object.assign({},ee),{articles:[...ee.articles,z]})));function re(ee,z){return Y(ee,z)}},3550:(_e,ne,D)=>{D.d(ne,{T:()=>z});var g=D(5094),I=D(8625),J=D(7369);const B=(0,g.ZF)(J.UN),Y=(0,g.P1)(B,oe=>oe.articles);class re{constructor(Q,le,ue,Re){this.id=Q,this.title=le,this.link=ue,this.points=Re||0,this.time=new Date}}var ee=D(5e3);let z=(()=>{class oe{constructor(le){this.store=le,this.id=0}getArticle(){return this.store.pipe((0,g.Ys)(Y))}incArticle(le){this.store.dispatch(I.nP(le))}decArticle(le){this.store.dispatch(I.Mj(le))}addArticle(le){let ue=new re(++this.id,le.title,le.link,0);this.store.dispatch(I.IH({payload:ue}))}loadArticle(le){this.store.dispatch(I.zD())}}return oe.\u0275fac=function(le){return new(le||oe)(ee.LFG(g.yh))},oe.\u0275prov=ee.Yz7({token:oe,factory:oe.\u0275fac}),oe})()},5054:(_e,ne,D)=>{D.d(ne,{e:()=>ee});var g=D(5094),I=D(4579),J=D(2852);const B=(0,g.ZF)(J.UN),Y=(0,g.P1)(B,z=>z.count);var re=D(5e3);let ee=(()=>{class z{constructor(Q){this.store=Q}getCount(){return this.store.pipe((0,g.Ys)(Y))}incrementCount(){this.store.dispatch(I.nP())}decrementCount(){this.store.dispatch(I.Mj())}resetCount(){this.store.dispatch(I.mc())}setValue(Q){this.store.dispatch(I.Zf({newValue:Q}))}loadValue(){this.store.dispatch(I.zK())}}return z.\u0275fac=function(Q){return new(Q||z)(re.LFG(g.yh))},z.\u0275prov=re.Yz7({token:z,factory:z.\u0275fac}),z})()},4579:(_e,ne,D)=>{D.d(ne,{Mj:()=>B,Zf:()=>re,mc:()=>Y,nP:()=>J,zK:()=>ee});var g=D(5094),I=(()=>{return(z=I||(I={})).INCREMENT="[Counter Component] Increment",z.DECREMENT="[Counter Component] Decrement",z.RESET="[Counter Component] Reset",z.SETVALUE="[Counter Component] Set Value",z.LOADVALUE="[Counter Component] Load Value",I;var z})();const J=(0,g.PH)(I.INCREMENT),B=(0,g.PH)(I.DECREMENT),Y=(0,g.PH)(I.RESET),re=(0,g.PH)(I.SETVALUE,(0,g.Ky)()),ee=(0,g.PH)(I.LOADVALUE)},2852:(_e,ne,D)=>{D.d(ne,{UN:()=>J,jX:()=>re});var g=D(5094),I=D(4579);const J="counter",Y=(0,g.Lq)({count:0},(0,g.on)(I.nP,ee=>Object.assign(Object.assign({},ee),{count:ee.count+1})),(0,g.on)(I.Mj,ee=>Object.assign(Object.assign({},ee),{count:ee.count-1})),(0,g.on)(I.mc,ee=>Object.assign(Object.assign({},ee),{count:0})),(0,g.on)(I.Zf,(ee,z)=>Object.assign(Object.assign({},ee),{count:z.newValue})));function re(ee,z){return Y(ee,z)}},2542:(_e,ne,D)=>{D.d(ne,{F3:()=>B,WU:()=>Y,mu:()=>J});var g=D(5094),I=(()=>{return(re=I||(I={})).loadData="[loadData] load",re.loadDataSuccess="[loadData] success",re.loadDataFailure="[loadData] failure",I;var re})();const J=(0,g.PH)(I.loadData),B=(0,g.PH)(I.loadDataSuccess,(0,g.Ky)()),Y=(0,g.PH)(I.loadDataFailure,(0,g.Ky)())},3880:(_e,ne,D)=>{D.d(ne,{B5:()=>re,UN:()=>J});var g=D(5094),I=D(2542);const J="load-data",Y=(0,g.Lq)({data:null,loading:!1,error:null},(0,g.on)(I.mu,ee=>Object.assign(Object.assign({},ee),{loading:!0})),(0,g.on)(I.F3,(ee,{payload:z})=>Object.assign(Object.assign({},ee),{loading:!1,data:z})),(0,g.on)(I.WU,(ee,{payload:z})=>Object.assign(Object.assign({},ee),{loading:!1,error:z})));function re(ee,z){return Y(ee,z)}},9610:(_e,ne,D)=>{D.d(ne,{L:()=>ee});var g=D(5094),I=D(3880);const J=(0,g.ZF)(I.UN),B=(0,g.P1)(J,z=>z.data);var Y=D(2542),re=D(5e3);let ee=(()=>{class z{constructor(Q){this.store=Q}getData(){return this.store.pipe((0,g.Ys)(B))}loadData(){this.store.dispatch(Y.mu())}loadDataSuccess(Q){this.store.dispatch(Y.F3(Q))}loadDataFailure(Q){this.store.dispatch(Y.WU(Q))}}return z.\u0275fac=function(Q){return new(Q||z)(re.LFG(g.yh))},z.\u0275prov=re.Yz7({token:z,factory:z.\u0275fac}),z})()},7403:(_e,ne,D)=>{D.d(ne,{a:()=>Y});var g=D(4004),I=D(5e3),J=D(520);let Y=(()=>{class re{constructor(z){this.http=z}register(z){return this.http.post("https://conduit.productionready.io/api/users",z).pipe((0,g.U)(oe=>oe.user))}}return re.\u0275fac=function(z){return new(z||re)(I.LFG(J.eN))},re.\u0275prov=I.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"}),re})()},2766:(_e,ne,D)=>{D.d(ne,{Pw:()=>B,_0:()=>J,zH:()=>Y});var g=D(5094),I=(()=>{return(re=I||(I={})).REGISTER="[AUTH] REGISTER",re.REGISTER_SUCCESS="[AUTH] REGISTER SUCCESS",re.REGISTER_FAILURE="[AUTH] REGISTER FAILURE",I;var re})();const J=(0,g.PH)(I.REGISTER,(0,g.Ky)()),B=(0,g.PH)(I.REGISTER_SUCCESS,(0,g.Ky)()),Y=(0,g.PH)(I.REGISTER_FAILURE,(0,g.Ky)())},5650:(_e,ne,D)=>{D.d(ne,{UN:()=>B,xw:()=>re});var g=D(5094),I=D(2766);const B="Register",Y=(0,g.Lq)({isSubmitting:!1,currentUser:null,isLoggedIn:null,validationErrors:null},(0,g.on)(I._0,ee=>Object.assign(Object.assign({},ee),{isSubmitting:!0,validationErrors:null})),(0,g.on)(I.Pw,(ee,z)=>Object.assign(Object.assign({},ee),{isSubmitting:!1,isLoggedIn:!0,currentUser:z.currentUser})),(0,g.on)(I.zH,(ee,z)=>Object.assign(Object.assign({},ee),{isSubmitting:!1,validationErrors:z.errors})));function re(ee,z){return Y(ee,z)}},4964:(_e,ne,D)=>{D.d(ne,{q:()=>z});var g=D(5094),I=D(2766),J=D(5650);const B=(0,g.ZF)(J.UN),Y=(0,g.P1)(B,oe=>oe.isSubmitting),re=(0,g.P1)(B,oe=>oe.validationErrors);var ee=D(5e3);let z=(()=>{class oe{constructor(le){this.store=le}register(le){this.store.dispatch((0,I._0)(le))}isSubmitting(){return this.store.pipe((0,g.Ys)(Y))}backendErrors(){return this.store.pipe((0,g.Ys)(re))}}return oe.\u0275fac=function(le){return new(le||oe)(ee.LFG(g.yh))},oe.\u0275prov=ee.Yz7({token:oe,factory:oe.\u0275fac}),oe})()},817:(_e,ne,D)=>{D.d(ne,{N2:()=>Y,Ni:()=>B,PR:()=>J});var g=D(5094),I=(()=>{return(re=I||(I={})).GET_USER="[User] Get User",re.GET_USER_SUCCESS="[User] Get User Success",re.GET_USER_FAILED="[User] Get User Failed",I;var re})();const J=(0,g.PH)(I.GET_USER),B=(0,g.PH)(I.GET_USER_SUCCESS,(0,g.Ky)()),Y=(0,g.PH)(I.GET_USER_FAILED,(0,g.Ky)())},173:(_e,ne,D)=>{D.d(ne,{U:()=>B,M:()=>re});var g=D(5094),J=D(817);const B="user_info",Y=(0,g.Lq)({user:{userId:null,name:null,lastName:null,email:null},error:null},(0,g.on)(J.Ni,(ee,{user:z})=>Object.assign(Object.assign({},ee),{user:z,error:null})),(0,g.on)(J.N2,(ee,{error:z})=>Object.assign(Object.assign({},ee),{user:{userId:null,name:null,lastName:null,email:null},error:z})));function re(ee,z){return Y(ee,z)}},2842:(_e,ne,D)=>{D.d(ne,{p:()=>ee});var g=D(5094),I=D(817),J=D(173);const B=(0,g.ZF)(J.U),Y=(0,g.P1)(B,z=>z.user);var re=D(5e3);let ee=(()=>{class z{constructor(Q){this.store=Q}userInfo$(){return this.store.pipe((0,g.Ys)(Y))}getUserInfo(){this.store.dispatch(I.PR())}}return z.\u0275fac=function(Q){return new(Q||z)(re.LFG(g.yh))},z.\u0275prov=re.Yz7({token:z,factory:z.\u0275fac}),z})()},2340:(_e,ne,D)=>{D.d(ne,{N:()=>I});var g=D(197);const I={production:!0,version:D(4147).i8,firebaseConfig:g.w}},197:(_e,ne,D)=>{D.d(ne,{w:()=>g});const g={apiKey:"AIzaSyAQszHYa_YW__6DdJDCqlKOsRBpszVz8sQ",authDomain:"rktect-rest.firebaseapp.com",databaseURL:"https://rktect-rest-default-rtdb.firebaseio.com",projectId:"rktect-rest",storageBucket:"rktect-rest.appspot.com",messagingSenderId:"797842765239",appId:"1:797842765239:web:e3ddfbb57fbdff9dd42432",auth_Token:"kpPiWBeAJJ3KlXNQ1tULjJcYLWZoLMwdEpDRzKSc"}},5543:(_e,ne,D)=>{var g=D(2313),I=D(5e3),J=D(5861),B=D(4202),Y=D(1777);const re=[(0,Y.IO)(":enter, :leave",(0,Y.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,Y.IO)(":leave",(0,Y.oB)({transform:"translateX(0%)"}),{optional:!0}),(0,Y.IO)(":enter",(0,Y.oB)({transform:"translateX(100%)"}),{optional:!0}),(0,Y.ru)([(0,Y.IO)(":leave",[(0,Y.jt)(".3s ease-in-out",(0,Y.oB)({transform:"translateX(-100%)"}))],{optional:!0}),(0,Y.IO)(":enter",[(0,Y.jt)(".3s ease-in-out",(0,Y.oB)({transform:"translateX(0%)"}))],{optional:!0})])],ee=[(0,Y.IO)(":enter, :leave",(0,Y.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,Y.IO)(":leave",(0,Y.oB)({transform:"translateX(0%)"}),{optional:!0}),(0,Y.IO)(":enter",(0,Y.oB)({transform:"translateX(-100%)"}),{optional:!0}),(0,Y.ru)([(0,Y.IO)(":leave",[(0,Y.jt)(".3s ease-in-out",(0,Y.oB)({transform:"translateX(100%)"}))],{optional:!0}),(0,Y.IO)(":enter",[(0,Y.jt)(".3s ease-in-out",(0,Y.oB)({transform:"translateX(0%)"}))],{optional:!0})])],z=[(0,Y.IO)(":enter, :leave",(0,Y.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,Y.IO)(":leave",(0,Y.oB)({transform:"translateY(0%)"}),{optional:!0}),(0,Y.IO)(":enter",(0,Y.oB)({transform:"translateY(100%)"}),{optional:!0}),(0,Y.ru)([(0,Y.IO)(":leave",[(0,Y.jt)(".3s ease-in-out",(0,Y.oB)({transform:"translateY(-100%)"}))],{optional:!0}),(0,Y.IO)(":enter",[(0,Y.jt)(".3s ease-in-out",(0,Y.oB)({transform:"translateY(0%)"}))],{optional:!0})])],oe=[(0,Y.IO)(":enter, :leave",(0,Y.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,Y.IO)(":leave",(0,Y.oB)({transform:"translateY(0%)"}),{optional:!0}),(0,Y.IO)(":enter",(0,Y.oB)({transform:"translateY(-100%)"}),{optional:!0}),(0,Y.ru)([(0,Y.IO)(":leave",[(0,Y.jt)(".3s ease-in-out",(0,Y.oB)({transform:"translateY(100%)"}))],{optional:!0}),(0,Y.IO)(":enter",[(0,Y.jt)(".3s ease-in-out",(0,Y.oB)({transform:"translateY(0%)"}))],{optional:!0})])],Q=(0,Y.X$)("slideTransition",[(0,Y.eR)("* => slideToLeft",re),(0,Y.eR)("* => slideToRight",ee),(0,Y.eR)("* => slideToTop",z),(0,Y.eR)("* => slideToBottom",oe)]);var le=D(8285),ue=D(9808);function Re(l,a){if(1&l&&(I.TgZ(0,"li",11)(1,"a",12),I._uU(2),I.qZA()()),2&l){const c=a.$implicit;I.xp6(1),I.Q6J("routerLink",null==c?null:c.path),I.xp6(1),I.Oqu((null==c?null:c.name)||(null==c?null:c.path))}}function Ge(l,a){if(1&l&&(I.TgZ(0,"a",13),I._uU(1),I.qZA()),2&l){const c=a.$implicit;I.xp6(1),I.Oqu(c)}}const ve=function(){return["navbar-dark","bg-dark"]},Be=function(){return["navbar-light","bg-light"]},He=function(l){return{show:l}};let xe=(()=>{class l{constructor(){this.isCollapsed=!1,this.routes=[],this.template="DARK",this.languages=["English","Hindi"]}ngOnInit(){}toggleNavbar(){this.isCollapsed=!this.isCollapsed}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275cmp=I.Xpm({type:l,selectors:[["app-navbar"]],inputs:{routes:"routes",template:"template"},decls:13,vars:10,consts:[[1,"navbar","navbar-expand-lg","sticky-top1",3,"ngClass"],["href","/",1,"navbar-brand"],["type","button",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse",3,"ngClass"],[1,"navbar-nav","mr-auto"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item","dropdown","align-right",3,"click"],["id","navbarDropdown","role","button","data-toggle","dropdown","aria-expanded","false","aria-haspopup","true",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["class","dropdown-item",4,"ngFor","ngForOf"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"dropdown-item"]],template:function(c,E){1&c&&(I.TgZ(0,"nav",0)(1,"a",1),I._uU(2,"Navbar"),I.qZA(),I.TgZ(3,"button",2),I.NdJ("click",function(){return E.toggleNavbar()}),I._UZ(4,"span",3),I.qZA(),I.TgZ(5,"div",4)(6,"ul",5),I.YNc(7,Re,3,2,"li",6),I.TgZ(8,"li",7),I.NdJ("click",function(){return E.show=!E.show}),I.TgZ(9,"a",8),I._uU(10,"Language"),I.qZA(),I.TgZ(11,"div",9),I.YNc(12,Ge,2,1,"a",10),I.qZA()()()()()),2&c&&(I.Q6J("ngClass","DARK"===E.template?I.DdM(6,ve):I.DdM(7,Be)),I.xp6(5),I.Q6J("ngClass",I.VKq(8,He,E.isCollapsed)),I.xp6(2),I.Q6J("ngForOf",E.routes),I.xp6(4),I.ekj("show",E.show),I.xp6(1),I.Q6J("ngForOf",E.languages))},dependencies:[ue.mk,ue.sg,B.yS,B.Od],styles:["nav[_ngcontent-%COMP%]{border-bottom:1px solid hsla(0deg,0%,100%,.07);box-shadow:0 2.2px 2.2px #00000012,0 5.3px 5.3px #0000000d,0 10px 10px #0000000a,0 17.9px 17.9px #0000000a,0 33.4px 33.4px #00000008,0 80px 80px #00000005}"]}),l})();const mt=[{path:"application",loadChildren:()=>Promise.all([D.e(8592),D.e(612)]).then(D.bind(D,612)).then(l=>l.ApplicationModule)},{path:"v2",loadChildren:()=>Promise.all([D.e(3655),D.e(8592),D.e(2418)]).then(D.bind(D,2418)).then(l=>l.PersonalModule)},{path:"audios",loadChildren:()=>Promise.all([D.e(4331),D.e(4859)]).then(D.bind(D,870)).then(l=>l.AudiosModule)},{path:"books",loadChildren:()=>Promise.all([D.e(4331),D.e(1839)]).then(D.bind(D,1839)).then(l=>l.BooksModule)},{path:"bootstrap-design",loadChildren:()=>Promise.all([D.e(4331),D.e(433),D.e(8521)]).then(D.bind(D,8521)).then(l=>l.BootstrapDesignModule)},{path:"cocktail",loadChildren:()=>Promise.all([D.e(4331),D.e(7539)]).then(D.bind(D,7539)).then(l=>l.CocktailModule)},{path:"cookbook",loadChildren:()=>Promise.all([D.e(4331),D.e(3261)]).then(D.bind(D,3261)).then(l=>l.CookBookModule)},{path:"covid",loadChildren:()=>Promise.all([D.e(4331),D.e(8592),D.e(3980)]).then(D.bind(D,3980)).then(l=>l.CovidModule)},{path:"github",loadChildren:()=>Promise.all([D.e(4331),D.e(8592),D.e(8580)]).then(D.bind(D,8580)).then(l=>l.GithubModule)},{path:"hacker-ranks",loadChildren:()=>Promise.all([D.e(6055),D.e(8592),D.e(2737)]).then(D.bind(D,2737)).then(l=>l.HackerRanksModule)},{path:"itunes",loadChildren:()=>Promise.all([D.e(4331),D.e(94)]).then(D.bind(D,94)).then(l=>l.ItunesModule)},{path:"movies",loadChildren:()=>Promise.all([D.e(4331),D.e(8592),D.e(9045)]).then(D.bind(D,9045)).then(l=>l.MoviesModule)},{path:"encapsulating",loadChildren:()=>D.e(2792).then(D.bind(D,2792)).then(l=>l.EncapsulatingModule)},{path:"sports",loadChildren:()=>Promise.all([D.e(4331),D.e(7968)]).then(D.bind(D,7968)).then(l=>l.SportsModule)},{path:"shop",loadChildren:()=>Promise.all([D.e(8592),D.e(3787)]).then(D.bind(D,3787)).then(l=>l.ShopModule)},{path:"store",loadChildren:()=>D.e(9065).then(D.bind(D,9065)).then(l=>l.StoreModule)},{path:"ngrx-store",loadChildren:()=>D.e(2138).then(D.bind(D,2138)).then(l=>l.NgrxStoreModule)},{path:"survey",loadChildren:()=>D.e(4728).then(D.bind(D,4728)).then(l=>l.SurveyPollVoterPridictionModule)},{path:"abstract-animation",loadChildren:()=>D.e(9396).then(D.bind(D,9396)).then(l=>l.AbstractAnimationModule)},{path:"animation-game",loadChildren:()=>D.e(6295).then(D.bind(D,6295)).then(l=>l.AnimationGameModule)},{path:"responsive-site",loadChildren:()=>D.e(210).then(D.bind(D,210)).then(l=>l.ResponsiveSiteModule)},{path:"mockApi",loadChildren:()=>D.e(7784).then(D.bind(D,7784)).then(l=>l.MockapiModule)},{path:"routeReuse",loadChildren:()=>D.e(772).then(D.bind(D,772)).then(l=>l.RouteReuseStrategyTutsModule)},{path:"sample",loadChildren:()=>D.e(4424).then(D.bind(D,4424)).then(l=>l.SampleModule)},{path:"navigations",component:(()=>{class l{constructor(c){this.animationService=c,this.routes=[{path:"resume"},{path:"my-site"},{path:"../personal",name:"Personal"},{path:"form"},{path:"svg"},{path:"svg/customize"},{path:"task"},{path:"unit-testing"}],this.links=[{name:"Home",url:["home"],iconClass:"fa fa-home"},{name:"About",url:["/navigations/form/invoice"],iconClass:"fa fa-user-circle"}],this.animationService.setRouteAnimation(1)}ngOnInit(){}getRouteAnimation(c){return c.activatedRouteData.animation}}return l.\u0275fac=function(c){return new(c||l)(I.Y36(le.Y))},l.\u0275cmp=I.Xpm({type:l,selectors:[["app-navigations"]],decls:3,vars:2,consts:[[3,"routes","template"]],template:function(c,E){1&c&&(I._UZ(0,"app-navbar",0),I.TgZ(1,"main"),I._UZ(2,"router-outlet"),I.qZA()),2&c&&I.Q6J("routes",E.routes)("template","LIGHT")},dependencies:[B.lC,xe],data:{animation:[Q]}}),l})(),children:[{path:"resume",loadChildren:()=>D.e(311).then(D.bind(D,311)).then(l=>l.ResumeModule)},{path:"my-site",loadChildren:()=>D.e(7391).then(D.bind(D,7391)).then(l=>l.MysiteModule)},{path:"form",loadChildren:()=>Promise.all([D.e(6055),D.e(433),D.e(6588),D.e(8592),D.e(5766)]).then(D.bind(D,5766)).then(l=>l.FormModule)},{path:"svg",loadChildren:()=>D.e(3971).then(D.bind(D,3971)).then(l=>l.SvgRendererModule)},{path:"task",loadChildren:()=>Promise.all([D.e(6055),D.e(3655),D.e(8592),D.e(7931)]).then(D.bind(D,1426)).then(l=>l.TaskModule)},{path:"unit-testing",loadChildren:()=>D.e(4376).then(D.bind(D,4376)).then(l=>l.UnitTestingModule)}]},{path:"useFullApps",loadChildren:()=>Promise.all([D.e(433),D.e(3919),D.e(8592),D.e(2254)]).then(D.bind(D,2254)).then(l=>l.UsefullAppsModule)},{path:"library-ex",loadChildren:()=>Promise.all([D.e(6055),D.e(433),D.e(3919),D.e(1890),D.e(670)]).then(D.bind(D,670)).then(l=>l.LibraryExModule)},{path:"firebase",loadChildren:()=>Promise.all([D.e(433),D.e(3919),D.e(2073)]).then(D.bind(D,2073)).then(l=>l.FirebaseTutsModule)},{path:"tutorials",loadChildren:()=>Promise.all([D.e(433),D.e(6588)]).then(D.bind(D,6588)).then(l=>l.TutorialsModule)},{path:"css",loadChildren:()=>Promise.all([D.e(6055),D.e(8592),D.e(8377)]).then(D.bind(D,8377)).then(l=>l.CssLearnModule)},{path:"code-task",loadChildren:()=>Promise.all([D.e(1890),D.e(8592),D.e(3560)]).then(D.bind(D,3560)).then(l=>l.CodeTaskModule)},{path:"custom",loadComponent:(l=(0,J.Z)(function*(){return(yield Promise.all([D.e(6055),D.e(9293)]).then(D.bind(D,9293))).CustomComponent}),function(){return l.apply(this,arguments)})},{path:"declarative",loadChildren:function(){var l=(0,J.Z)(function*(){return(yield D.e(8123).then(D.bind(D,8123))).DeclarativeModule});return function(){return l.apply(this,arguments)}}()},{path:"sidenav",loadChildren:function(){var l=(0,J.Z)(function*(){return(yield D.e(335).then(D.bind(D,335))).SidenavModule});return function(){return l.apply(this,arguments)}}()},{path:"",loadChildren:function(){var l=(0,J.Z)(function*(){return(yield Promise.all([D.e(6055),D.e(3655),D.e(9749)]).then(D.bind(D,9749))).WebsiteModule});return function(){return l.apply(this,arguments)}}()},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:""}];var l;let Ue=(()=>{class l{}return l.\u0275fac=function(c){return new(c||l)},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({imports:[B.Bz.forRoot(mt,{anchorScrolling:"enabled",scrollPositionRestoration:"enabled",useHash:!1}),B.Bz]}),l})();var Oe=D(520);let yt=(()=>{class l{constructor(c){this.http=c,this.CONFIGURATION_URL="assets/config/configuration.json"}loadConfiguration(){return this.http.get(this.CONFIGURATION_URL).toPromise().then(c=>(this.configuration=c,c)).catch(c=>{console.error(c)})}getConfiguration(){return this.configuration}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(Oe.eN))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();var It=D(7719),Je=D(4070);function Nt(l,a){if(1&l){const c=I.EpF();I.TgZ(0,"div",1),I.NdJ("click",function(){I.CHM(c);const S=I.oxw();return I.KtG(S.showNotification=!S.showNotification)}),I.TgZ(1,"p"),I._uU(2),I.qZA()()}if(2&l){const c=I.oxw();I.xp6(2),I.Oqu(c.notification)}}let wt=(()=>{class l{constructor(c){this.notificationService=c,this.notificationService.notification$.subscribe(E=>{this.notification=E,console.log(this.notification),this.showNotification=!0})}ngOnInit(){}}return l.\u0275fac=function(c){return new(c||l)(I.Y36(Je.g))},l.\u0275cmp=I.Xpm({type:l,selectors:[["app-notification"]],decls:1,vars:1,consts:[["class","notification",3,"click",4,"ngIf"],[1,"notification",3,"click"]],template:function(c,E){1&c&&I.YNc(0,Nt,3,1,"div",0),2&c&&I.Q6J("ngIf",E.notification&&E.showNotification)},dependencies:[ue.O5],styles:[".notification[_ngcontent-%COMP%]{position:absolute;z-index:1;top:5px;line-height:20px;text-align:center;right:5px;background:linear-gradient(-90deg,#cb5cd2,#cc3fa0);color:#fff;font-style:oblique;text-transform:capitalize;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f;min-height:20px;min-width:160px;max-width:300px;padding:15px;cursor:pointer}"]}),l})(),Qe=(()=>{class l{constructor(c,E,S){this.configurationService=c,this.jsonPlaceholderService=E,this.route=S,this.title="portfolio-all-in-one",this.version=I.q4F.major}ngOnInit(){window.addEventListener("beforeinstallprompt",c=>{console.log("'beforeinstallprompt' event was fired.")})}}return l.\u0275fac=function(c){return new(c||l)(I.Y36(yt),I.Y36(It.t),I.Y36(B.gz))},l.\u0275cmp=I.Xpm({type:l,selectors:[["app-root"]],decls:2,vars:0,template:function(c,E){1&c&&I._UZ(0,"app-notification")(1,"router-outlet")},dependencies:[B.lC,wt]}),l})();function ut(l){return new I.vHH(3e3,!1)}function dn(){return"undefined"!=typeof window&&void 0!==window.document}function er(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Lt(l){switch(l.length){case 0:return new Y.ZN;case 1:return l[0];default:return new Y.ZE(l)}}function Nn(l,a,c,E,S=new Map,H=new Map){const ie=[],fe=[];let Me=-1,ze=null;if(E.forEach(Et=>{const Yt=Et.get("offset"),vn=Yt==Me,Mn=vn&&ze||new Map;Et.forEach((cn,mn)=>{let Ir=mn,Gn=cn;if("offset"!==mn)switch(Ir=a.normalizePropertyName(Ir,ie),Gn){case Y.k1:Gn=S.get(mn);break;case Y.l3:Gn=H.get(mn);break;default:Gn=a.normalizeStyleValue(mn,Ir,Gn,ie)}Mn.set(Ir,Gn)}),vn||fe.push(Mn),ze=Mn,Me=Yt}),ie.length)throw function zt(l){return new I.vHH(3502,!1)}();return fe}function Wn(l,a,c,E){switch(a){case"start":l.onStart(()=>E(c&&zr(c,"start",l)));break;case"done":l.onDone(()=>E(c&&zr(c,"done",l)));break;case"destroy":l.onDestroy(()=>E(c&&zr(c,"destroy",l)))}}function zr(l,a,c){const E=c.totalTime,H=On(l.element,l.triggerName,l.fromState,l.toState,a||l.phaseName,null==E?l.totalTime:E,!!c.disabled),ie=l._data;return null!=ie&&(H._data=ie),H}function On(l,a,c,E,S="",H=0,ie){return{element:l,triggerName:a,fromState:c,toState:E,phaseName:S,totalTime:H,disabled:!!ie}}function fn(l,a,c){let E=l.get(a);return E||l.set(a,E=c),E}function Kn(l){const a=l.indexOf(":");return[l.substring(1,a),l.slice(a+1)]}let Yr=(l,a)=>!1,Rr=(l,a,c)=>[],Pn=null;function lr(l){const a=l.parentNode||l.host;return a===Pn?null:a}(er()||"undefined"!=typeof Element)&&(dn()?(Pn=(()=>document.documentElement)(),Yr=(l,a)=>{for(;a;){if(a===l)return!0;a=lr(a)}return!1}):Yr=(l,a)=>l.contains(a),Rr=(l,a,c)=>{if(c)return Array.from(l.querySelectorAll(a));const E=l.querySelector(a);return E?[E]:[]});let Ae=null,Ie=!1;const Gt=Yr,Xt=Rr;let tr=(()=>{class l{validateStyleProperty(c){return function Fe(l){Ae||(Ae=function We(){return"undefined"!=typeof document?document.body:null}()||{},Ie=!!Ae.style&&"WebkitAppearance"in Ae.style);let a=!0;return Ae.style&&!function fi(l){return"ebkit"==l.substring(1,6)}(l)&&(a=l in Ae.style,!a&&Ie&&(a="Webkit"+l.charAt(0).toUpperCase()+l.slice(1)in Ae.style)),a}(c)}matchesElement(c,E){return!1}containsElement(c,E){return Gt(c,E)}getParentElement(c){return lr(c)}query(c,E,S){return Xt(c,E,S)}computeStyle(c,E,S){return S||""}animate(c,E,S,H,ie,fe=[],Me){return new Y.ZN(S,H)}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})(),Er=(()=>{class l{}return l.NOOP=new tr,l})();const ke="ng-enter",at="ng-leave",tn="ng-trigger",rn=".ng-trigger",Se="ng-animating",Pe=".ng-animating";function gt(l){if("number"==typeof l)return l;const a=l.match(/^(-?[\.\d]+)(m?s)/);return!a||a.length<2?0:Ut(parseFloat(a[1]),a[2])}function Ut(l,a){return"s"===a?1e3*l:l}function _n(l,a,c){return l.hasOwnProperty("duration")?l:function Cn(l,a,c){let S,H=0,ie="";if("string"==typeof l){const fe=l.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===fe)return a.push(ut()),{duration:0,delay:0,easing:""};S=Ut(parseFloat(fe[1]),fe[2]);const Me=fe[3];null!=Me&&(H=Ut(parseFloat(Me),fe[4]));const ze=fe[5];ze&&(ie=ze)}else S=l;if(!c){let fe=!1,Me=a.length;S<0&&(a.push(function qe(){return new I.vHH(3100,!1)}()),fe=!0),H<0&&(a.push(function Rt(){return new I.vHH(3101,!1)}()),fe=!0),fe&&a.splice(Me,0,ut())}return{duration:S,delay:H,easing:ie}}(l,a,c)}function Vn(l,a={}){return Object.keys(l).forEach(c=>{a[c]=l[c]}),a}function sr(l){const a=new Map;return Object.keys(l).forEach(c=>{a.set(c,l[c])}),a}function In(l,a=new Map,c){if(c)for(let[E,S]of c)a.set(E,S);for(let[E,S]of l)a.set(E,S);return a}function Hi(l,a,c){return c?a+":"+c+";":""}function ds(l){let a="";for(let c=0;c<l.style.length;c++){const E=l.style.item(c);a+=Hi(0,E,l.style.getPropertyValue(E))}for(const c in l.style)l.style.hasOwnProperty(c)&&!c.startsWith("_")&&(a+=Hi(0,go(c),l.style[c]));l.setAttribute("style",a)}function Di(l,a,c){l.style&&(a.forEach((E,S)=>{const H=Ls(S);c&&!c.has(S)&&c.set(S,l.style[H]),l.style[H]=E}),er()&&ds(l))}function ai(l,a){l.style&&(a.forEach((c,E)=>{const S=Ls(E);l.style[S]=""}),er()&&ds(l))}function Zn(l){return Array.isArray(l)?1==l.length?l[0]:(0,Y.vP)(l):l}const Rn=new RegExp("{{\\s*(.+?)\\s*}}","g");function Tn(l){let a=[];if("string"==typeof l){let c;for(;c=Rn.exec(l);)a.push(c[1]);Rn.lastIndex=0}return a}function En(l,a,c){const E=l.toString(),S=E.replace(Rn,(H,ie)=>{let fe=a[ie];return null==fe&&(c.push(function hn(l){return new I.vHH(3003,!1)}()),fe=""),fe.toString()});return S==E?l:S}function Xr(l){const a=[];let c=l.next();for(;!c.done;)a.push(c.value),c=l.next();return a}const xn=/-+([a-z0-9])/g;function Ls(l){return l.replace(xn,(...a)=>a[1].toUpperCase())}function go(l){return l.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function zn(l,a,c){switch(a.type){case 7:return l.visitTrigger(a,c);case 0:return l.visitState(a,c);case 1:return l.visitTransition(a,c);case 2:return l.visitSequence(a,c);case 3:return l.visitGroup(a,c);case 4:return l.visitAnimate(a,c);case 5:return l.visitKeyframes(a,c);case 6:return l.visitStyle(a,c);case 8:return l.visitReference(a,c);case 9:return l.visitAnimateChild(a,c);case 10:return l.visitAnimateRef(a,c);case 11:return l.visitQuery(a,c);case 12:return l.visitStagger(a,c);default:throw function nr(l){return new I.vHH(3004,!1)}()}}function $n(l,a){return window.getComputedStyle(l)[a]}function Bn(l,a){const c=[];return"string"==typeof l?l.split(/\s*,\s*/).forEach(E=>function Ar(l,a,c){if(":"==l[0]){const Me=function Sr(l,a){switch(l){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(c,E)=>parseFloat(E)>parseFloat(c);case":decrement":return(c,E)=>parseFloat(E)<parseFloat(c);default:return a.push(function on(l){return new I.vHH(3016,!1)}()),"* => *"}}(l,c);if("function"==typeof Me)return void a.push(Me);l=Me}const E=l.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==E||E.length<4)return c.push(function $t(l){return new I.vHH(3015,!1)}()),a;const S=E[1],H=E[2],ie=E[3];a.push(Ur(S,ie));"<"==H[0]&&!("*"==S&&"*"==ie)&&a.push(Ur(ie,S))}(E,c,a)):c.push(l),c}const Si=new Set(["true","1"]),mr=new Set(["false","0"]);function Ur(l,a){const c=Si.has(l)||mr.has(l),E=Si.has(a)||mr.has(a);return(S,H)=>{let ie="*"==l||l==S,fe="*"==a||a==H;return!ie&&c&&"boolean"==typeof S&&(ie=S?Si.has(l):mr.has(l)),!fe&&E&&"boolean"==typeof H&&(fe=H?Si.has(a):mr.has(a)),ie&&fe}}const Hs=new RegExp("s*:selfs*,?","g");function $s(l,a,c,E){return new rr(l).build(a,c,E)}class rr{constructor(a){this._driver=a}build(a,c,E){const S=new Zi(c);return this._resetContextStyleTimingState(S),zn(this,Zn(a),S)}_resetContextStyleTimingState(a){a.currentQuerySelector="",a.collectedStyles=new Map,a.collectedStyles.set("",new Map),a.currentTime=0}visitTrigger(a,c){let E=c.queryCount=0,S=c.depCount=0;const H=[],ie=[];return"@"==a.name.charAt(0)&&c.errors.push(function St(){return new I.vHH(3006,!1)}()),a.definitions.forEach(fe=>{if(this._resetContextStyleTimingState(c),0==fe.type){const Me=fe,ze=Me.name;ze.toString().split(/\s*,\s*/).forEach(Et=>{Me.name=Et,H.push(this.visitState(Me,c))}),Me.name=ze}else if(1==fe.type){const Me=this.visitTransition(fe,c);E+=Me.queryCount,S+=Me.depCount,ie.push(Me)}else c.errors.push(function vr(){return new I.vHH(3007,!1)}())}),{type:7,name:a.name,states:H,transitions:ie,queryCount:E,depCount:S,options:null}}visitState(a,c){const E=this.visitStyle(a.styles,c),S=a.options&&a.options.params||null;if(E.containsDynamicStyles){const H=new Set,ie=S||{};E.styles.forEach(fe=>{fe instanceof Map&&fe.forEach(Me=>{Tn(Me).forEach(ze=>{ie.hasOwnProperty(ze)||H.add(ze)})})}),H.size&&(Xr(H.values()),c.errors.push(function Cr(l,a){return new I.vHH(3008,!1)}()))}return{type:0,name:a.name,style:E,options:S?{params:S}:null}}visitTransition(a,c){c.queryCount=0,c.depCount=0;const E=zn(this,Zn(a.animation),c);return{type:1,matchers:Bn(a.expr,c.errors),animation:E,queryCount:c.queryCount,depCount:c.depCount,options:gi(a.options)}}visitSequence(a,c){return{type:2,steps:a.steps.map(E=>zn(this,E,c)),options:gi(a.options)}}visitGroup(a,c){const E=c.currentTime;let S=0;const H=a.steps.map(ie=>{c.currentTime=E;const fe=zn(this,ie,c);return S=Math.max(S,c.currentTime),fe});return c.currentTime=S,{type:3,steps:H,options:gi(a.options)}}visitAnimate(a,c){const E=function As(l,a){if(l.hasOwnProperty("duration"))return l;if("number"==typeof l)return ki(_n(l,a).duration,0,"");const c=l;if(c.split(/\s+/).some(H=>"{"==H.charAt(0)&&"{"==H.charAt(1))){const H=ki(0,0,"");return H.dynamic=!0,H.strValue=c,H}const S=_n(c,a);return ki(S.duration,S.delay,S.easing)}(a.timings,c.errors);c.currentAnimateTimings=E;let S,H=a.styles?a.styles:(0,Y.oB)({});if(5==H.type)S=this.visitKeyframes(H,c);else{let ie=a.styles,fe=!1;if(!ie){fe=!0;const ze={};E.easing&&(ze.easing=E.easing),ie=(0,Y.oB)(ze)}c.currentTime+=E.duration+E.delay;const Me=this.visitStyle(ie,c);Me.isEmptyStep=fe,S=Me}return c.currentAnimateTimings=null,{type:4,timings:E,style:S,options:null}}visitStyle(a,c){const E=this._makeStyleAst(a,c);return this._validateStyleAst(E,c),E}_makeStyleAst(a,c){const E=[],S=Array.isArray(a.styles)?a.styles:[a.styles];for(let fe of S)"string"==typeof fe?fe===Y.l3?E.push(fe):c.errors.push(new I.vHH(3002,!1)):E.push(sr(fe));let H=!1,ie=null;return E.forEach(fe=>{if(fe instanceof Map&&(fe.has("easing")&&(ie=fe.get("easing"),fe.delete("easing")),!H))for(let Me of fe.values())if(Me.toString().indexOf("{{")>=0){H=!0;break}}),{type:6,styles:E,easing:ie,offset:a.offset,containsDynamicStyles:H,options:null}}_validateStyleAst(a,c){const E=c.currentAnimateTimings;let S=c.currentTime,H=c.currentTime;E&&H>0&&(H-=E.duration+E.delay),a.styles.forEach(ie=>{"string"!=typeof ie&&ie.forEach((fe,Me)=>{const ze=c.collectedStyles.get(c.currentQuerySelector),Et=ze.get(Me);let Yt=!0;Et&&(H!=S&&H>=Et.startTime&&S<=Et.endTime&&(c.errors.push(function Ln(l,a,c,E,S){return new I.vHH(3010,!1)}()),Yt=!1),H=Et.startTime),Yt&&ze.set(Me,{startTime:H,endTime:S}),c.options&&function Oi(l,a,c){const E=a.params||{},S=Tn(l);S.length&&S.forEach(H=>{E.hasOwnProperty(H)||c.push(function Tt(l){return new I.vHH(3001,!1)}())})}(fe,c.options,c.errors)})})}visitKeyframes(a,c){const E={type:5,styles:[],options:null};if(!c.currentAnimateTimings)return c.errors.push(function Dn(){return new I.vHH(3011,!1)}()),E;let H=0;const ie=[];let fe=!1,Me=!1,ze=0;const Et=a.steps.map(Gn=>{const jn=this._makeStyleAst(Gn,c);let _i=null!=jn.offset?jn.offset:function pi(l){if("string"==typeof l)return null;let a=null;if(Array.isArray(l))l.forEach(c=>{if(c instanceof Map&&c.has("offset")){const E=c;a=parseFloat(E.get("offset")),E.delete("offset")}});else if(l instanceof Map&&l.has("offset")){const c=l;a=parseFloat(c.get("offset")),c.delete("offset")}return a}(jn.styles),di=0;return null!=_i&&(H++,di=jn.offset=_i),Me=Me||di<0||di>1,fe=fe||di<ze,ze=di,ie.push(di),jn});Me&&c.errors.push(function jr(){return new I.vHH(3012,!1)}()),fe&&c.errors.push(function Ct(){return new I.vHH(3200,!1)}());const Yt=a.steps.length;let vn=0;H>0&&H<Yt?c.errors.push(function st(){return new I.vHH(3202,!1)}()):0==H&&(vn=1/(Yt-1));const Mn=Yt-1,cn=c.currentTime,mn=c.currentAnimateTimings,Ir=mn.duration;return Et.forEach((Gn,jn)=>{const _i=vn>0?jn==Mn?1:vn*jn:ie[jn],di=_i*Ir;c.currentTime=cn+mn.delay+di,mn.duration=di,this._validateStyleAst(Gn,c),Gn.offset=_i,E.styles.push(Gn)}),E}visitReference(a,c){return{type:8,animation:zn(this,Zn(a.animation),c),options:gi(a.options)}}visitAnimateChild(a,c){return c.depCount++,{type:9,options:gi(a.options)}}visitAnimateRef(a,c){return{type:10,animation:this.visitReference(a.animation,c),options:gi(a.options)}}visitQuery(a,c){const E=c.currentQuerySelector,S=a.options||{};c.queryCount++,c.currentQuery=a;const[H,ie]=function bs(l){const a=!!l.split(/\s*,\s*/).find(c=>":self"==c);return a&&(l=l.replace(Hs,"")),l=l.replace(/@\*/g,rn).replace(/@\w+/g,c=>rn+"-"+c.slice(1)).replace(/:animating/g,Pe),[l,a]}(a.selector);c.currentQuerySelector=E.length?E+" "+H:H,fn(c.collectedStyles,c.currentQuerySelector,new Map);const fe=zn(this,Zn(a.animation),c);return c.currentQuery=null,c.currentQuerySelector=E,{type:11,selector:H,limit:S.limit||0,optional:!!S.optional,includeSelf:ie,animation:fe,originalSelector:a.selector,options:gi(a.options)}}visitStagger(a,c){c.currentQuery||c.errors.push(function Le(){return new I.vHH(3013,!1)}());const E="full"===a.timings?{duration:0,delay:0,easing:"full"}:_n(a.timings,c.errors,!0);return{type:12,animation:zn(this,Zn(a.animation),c),timings:E,options:null}}}class Zi{constructor(a){this.errors=a,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function gi(l){return l?(l=Vn(l)).params&&(l.params=function mo(l){return l?Vn(l):null}(l.params)):l={},l}function ki(l,a,c){return{duration:l,delay:a,easing:c}}function Jn(l,a,c,E,S,H,ie=null,fe=!1){return{type:1,element:l,keyframes:a,preStyleProps:c,postStyleProps:E,duration:S,delay:H,totalTime:S+H,easing:ie,subTimeline:fe}}class hs{constructor(){this._map=new Map}get(a){return this._map.get(a)||[]}append(a,c){let E=this._map.get(a);E||this._map.set(a,E=[]),E.push(...c)}has(a){return this._map.has(a)}clear(){this._map.clear()}}const Ro=new RegExp(":enter","g"),zs=new RegExp(":leave","g");function yo(l,a,c,E,S,H=new Map,ie=new Map,fe,Me,ze=[]){return(new Es).buildKeyframes(l,a,c,E,S,H,ie,fe,Me,ze)}class Es{buildKeyframes(a,c,E,S,H,ie,fe,Me,ze,Et=[]){ze=ze||new hs;const Yt=new li(a,c,ze,S,H,Et,[]);Yt.options=Me;const vn=Me.delay?gt(Me.delay):0;Yt.currentTimeline.delayNextStep(vn),Yt.currentTimeline.setStyles([ie],null,Yt.errors,Me),zn(this,E,Yt);const Mn=Yt.timelines.filter(cn=>cn.containsAnimation());if(Mn.length&&fe.size){let cn;for(let mn=Mn.length-1;mn>=0;mn--){const Ir=Mn[mn];if(Ir.element===c){cn=Ir;break}}cn&&!cn.allowOnlyTimelineStyles()&&cn.setStyles([fe],null,Yt.errors,Me)}return Mn.length?Mn.map(cn=>cn.buildKeyframes()):[Jn(c,[],[],[],0,vn,"",!1)]}visitTrigger(a,c){}visitState(a,c){}visitTransition(a,c){}visitAnimateChild(a,c){const E=c.subInstructions.get(c.element);if(E){const S=c.createSubContext(a.options),H=c.currentTimeline.currentTime,ie=this._visitSubInstructions(E,S,S.options);H!=ie&&c.transformIntoNewTimeline(ie)}c.previousNode=a}visitAnimateRef(a,c){const E=c.createSubContext(a.options);E.transformIntoNewTimeline(),this._applyAnimationRefDelays([a.options,a.animation.options],c,E),this.visitReference(a.animation,E),c.transformIntoNewTimeline(E.currentTimeline.currentTime),c.previousNode=a}_applyAnimationRefDelays(a,c,E){var S;for(const H of a){const ie=null==H?void 0:H.delay;if(ie){const fe="number"==typeof ie?ie:gt(En(ie,null!==(S=null==H?void 0:H.params)&&void 0!==S?S:{},c.errors));E.delayNextStep(fe)}}}_visitSubInstructions(a,c,E){let H=c.currentTimeline.currentTime;const ie=null!=E.duration?gt(E.duration):null,fe=null!=E.delay?gt(E.delay):null;return 0!==ie&&a.forEach(Me=>{const ze=c.appendInstructionToTimeline(Me,ie,fe);H=Math.max(H,ze.duration+ze.delay)}),H}visitReference(a,c){c.updateOptions(a.options,!0),zn(this,a.animation,c),c.previousNode=a}visitSequence(a,c){const E=c.subContextCount;let S=c;const H=a.options;if(H&&(H.params||H.delay)&&(S=c.createSubContext(H),S.transformIntoNewTimeline(),null!=H.delay)){6==S.previousNode.type&&(S.currentTimeline.snapshotCurrentStyles(),S.previousNode=Pa);const ie=gt(H.delay);S.delayNextStep(ie)}a.steps.length&&(a.steps.forEach(ie=>zn(this,ie,S)),S.currentTimeline.applyStylesToKeyframe(),S.subContextCount>E&&S.transformIntoNewTimeline()),c.previousNode=a}visitGroup(a,c){const E=[];let S=c.currentTimeline.currentTime;const H=a.options&&a.options.delay?gt(a.options.delay):0;a.steps.forEach(ie=>{const fe=c.createSubContext(a.options);H&&fe.delayNextStep(H),zn(this,ie,fe),S=Math.max(S,fe.currentTimeline.currentTime),E.push(fe.currentTimeline)}),E.forEach(ie=>c.currentTimeline.mergeTimelineCollectedStyles(ie)),c.transformIntoNewTimeline(S),c.previousNode=a}_visitTiming(a,c){if(a.dynamic){const E=a.strValue;return _n(c.params?En(E,c.params,c.errors):E,c.errors)}return{duration:a.duration,delay:a.delay,easing:a.easing}}visitAnimate(a,c){const E=c.currentAnimateTimings=this._visitTiming(a.timings,c),S=c.currentTimeline;E.delay&&(c.incrementTime(E.delay),S.snapshotCurrentStyles());const H=a.style;5==H.type?this.visitKeyframes(H,c):(c.incrementTime(E.duration),this.visitStyle(H,c),S.applyStylesToKeyframe()),c.currentAnimateTimings=null,c.previousNode=a}visitStyle(a,c){const E=c.currentTimeline,S=c.currentAnimateTimings;!S&&E.hasCurrentStyleProperties()&&E.forwardFrame();const H=S&&S.easing||a.easing;a.isEmptyStep?E.applyEmptyStep(H):E.setStyles(a.styles,H,c.errors,c.options),c.previousNode=a}visitKeyframes(a,c){const E=c.currentAnimateTimings,S=c.currentTimeline.duration,H=E.duration,fe=c.createSubContext().currentTimeline;fe.easing=E.easing,a.styles.forEach(Me=>{fe.forwardTime((Me.offset||0)*H),fe.setStyles(Me.styles,Me.easing,c.errors,c.options),fe.applyStylesToKeyframe()}),c.currentTimeline.mergeTimelineCollectedStyles(fe),c.transformIntoNewTimeline(S+H),c.previousNode=a}visitQuery(a,c){const E=c.currentTimeline.currentTime,S=a.options||{},H=S.delay?gt(S.delay):0;H&&(6===c.previousNode.type||0==E&&c.currentTimeline.hasCurrentStyleProperties())&&(c.currentTimeline.snapshotCurrentStyles(),c.previousNode=Pa);let ie=E;const fe=c.invokeQuery(a.selector,a.originalSelector,a.limit,a.includeSelf,!!S.optional,c.errors);c.currentQueryTotal=fe.length;let Me=null;fe.forEach((ze,Et)=>{c.currentQueryIndex=Et;const Yt=c.createSubContext(a.options,ze);H&&Yt.delayNextStep(H),ze===c.element&&(Me=Yt.currentTimeline),zn(this,a.animation,Yt),Yt.currentTimeline.applyStylesToKeyframe(),ie=Math.max(ie,Yt.currentTimeline.currentTime)}),c.currentQueryIndex=0,c.currentQueryTotal=0,c.transformIntoNewTimeline(ie),Me&&(c.currentTimeline.mergeTimelineCollectedStyles(Me),c.currentTimeline.snapshotCurrentStyles()),c.previousNode=a}visitStagger(a,c){const E=c.parentContext,S=c.currentTimeline,H=a.timings,ie=Math.abs(H.duration),fe=ie*(c.currentQueryTotal-1);let Me=ie*c.currentQueryIndex;switch(H.duration<0?"reverse":H.easing){case"reverse":Me=fe-Me;break;case"full":Me=E.currentStaggerTime}const Et=c.currentTimeline;Me&&Et.delayNextStep(Me);const Yt=Et.currentTime;zn(this,a.animation,c),c.previousNode=a,E.currentStaggerTime=S.currentTime-Yt+(S.startTime-E.currentTimeline.startTime)}}const Pa={};class li{constructor(a,c,E,S,H,ie,fe,Me){this._driver=a,this.element=c,this.subInstructions=E,this._enterClassName=S,this._leaveClassName=H,this.errors=ie,this.timelines=fe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Pa,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Me||new Ui(this._driver,c,0),fe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(a,c){if(!a)return;const E=a;let S=this.options;null!=E.duration&&(S.duration=gt(E.duration)),null!=E.delay&&(S.delay=gt(E.delay));const H=E.params;if(H){let ie=S.params;ie||(ie=this.options.params={}),Object.keys(H).forEach(fe=>{(!c||!ie.hasOwnProperty(fe))&&(ie[fe]=En(H[fe],ie,this.errors))})}}_copyOptions(){const a={};if(this.options){const c=this.options.params;if(c){const E=a.params={};Object.keys(c).forEach(S=>{E[S]=c[S]})}}return a}createSubContext(a=null,c,E){const S=c||this.element,H=new li(this._driver,S,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(S,E||0));return H.previousNode=this.previousNode,H.currentAnimateTimings=this.currentAnimateTimings,H.options=this._copyOptions(),H.updateOptions(a),H.currentQueryIndex=this.currentQueryIndex,H.currentQueryTotal=this.currentQueryTotal,H.parentContext=this,this.subContextCount++,H}transformIntoNewTimeline(a){return this.previousNode=Pa,this.currentTimeline=this.currentTimeline.fork(this.element,a),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(a,c,E){const S={duration:null!=c?c:a.duration,delay:this.currentTimeline.currentTime+(null!=E?E:0)+a.delay,easing:""},H=new ts(this._driver,a.element,a.keyframes,a.preStyleProps,a.postStyleProps,S,a.stretchStartingKeyframe);return this.timelines.push(H),S}incrementTime(a){this.currentTimeline.forwardTime(this.currentTimeline.duration+a)}delayNextStep(a){a>0&&this.currentTimeline.delayNextStep(a)}invokeQuery(a,c,E,S,H,ie){let fe=[];if(S&&fe.push(this.element),a.length>0){a=(a=a.replace(Ro,"."+this._enterClassName)).replace(zs,"."+this._leaveClassName);let ze=this._driver.query(this.element,a,1!=E);0!==E&&(ze=E<0?ze.slice(ze.length+E,ze.length):ze.slice(0,E)),fe.push(...ze)}return!H&&0==fe.length&&ie.push(function it(l){return new I.vHH(3014,!1)}()),fe}}class Ui{constructor(a,c,E,S){this._driver=a,this.element=c,this.startTime=E,this._elementTimelineStylesLookup=S,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(c),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(c,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(a){const c=1===this._keyframes.size&&this._pendingStyles.size;this.duration||c?(this.forwardTime(this.currentTime+a),c&&this.snapshotCurrentStyles()):this.startTime+=a}fork(a,c){return this.applyStylesToKeyframe(),new Ui(this._driver,a,c||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(a){this.applyStylesToKeyframe(),this.duration=a,this._loadKeyframe()}_updateStyle(a,c){this._localTimelineStyles.set(a,c),this._globalTimelineStyles.set(a,c),this._styleSummary.set(a,{time:this.currentTime,value:c})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(a){a&&this._previousKeyframe.set("easing",a);for(let[c,E]of this._globalTimelineStyles)this._backFill.set(c,E||Y.l3),this._currentKeyframe.set(c,Y.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(a,c,E,S){var H;c&&this._previousKeyframe.set("easing",c);const ie=S&&S.params||{},fe=function Nr(l,a){const c=new Map;let E;return l.forEach(S=>{if("*"===S){E=E||a.keys();for(let H of E)c.set(H,Y.l3)}else In(S,c)}),c}(a,this._globalTimelineStyles);for(let[Me,ze]of fe){const Et=En(ze,ie,E);this._pendingStyles.set(Me,Et),this._localTimelineStyles.has(Me)||this._backFill.set(Me,null!==(H=this._globalTimelineStyles.get(Me))&&void 0!==H?H:Y.l3),this._updateStyle(Me,Et)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((a,c)=>{this._currentKeyframe.set(c,a)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((a,c)=>{this._currentKeyframe.has(c)||this._currentKeyframe.set(c,a)}))}snapshotCurrentStyles(){for(let[a,c]of this._localTimelineStyles)this._pendingStyles.set(a,c),this._updateStyle(a,c)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const a=[];for(let c in this._currentKeyframe)a.push(c);return a}mergeTimelineCollectedStyles(a){a._styleSummary.forEach((c,E)=>{const S=this._styleSummary.get(E);(!S||c.time>S.time)&&this._updateStyle(E,c.value)})}buildKeyframes(){this.applyStylesToKeyframe();const a=new Set,c=new Set,E=1===this._keyframes.size&&0===this.duration;let S=[];this._keyframes.forEach((fe,Me)=>{const ze=In(fe,new Map,this._backFill);ze.forEach((Et,Yt)=>{Et===Y.k1?a.add(Yt):Et===Y.l3&&c.add(Yt)}),E||ze.set("offset",Me/this.duration),S.push(ze)});const H=a.size?Xr(a.values()):[],ie=c.size?Xr(c.values()):[];if(E){const fe=S[0],Me=new Map(fe);fe.set("offset",0),Me.set("offset",1),S=[fe,Me]}return Jn(this.element,S,H,ie,this.duration,this.startTime,this.easing,!1)}}class ts extends Ui{constructor(a,c,E,S,H,ie,fe=!1){super(a,c,ie.delay),this.keyframes=E,this.preStyleProps=S,this.postStyleProps=H,this._stretchStartingKeyframe=fe,this.timings={duration:ie.duration,delay:ie.delay,easing:ie.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let a=this.keyframes,{delay:c,duration:E,easing:S}=this.timings;if(this._stretchStartingKeyframe&&c){const H=[],ie=E+c,fe=c/ie,Me=In(a[0]);Me.set("offset",0),H.push(Me);const ze=In(a[0]);ze.set("offset",zo(fe)),H.push(ze);const Et=a.length-1;for(let Yt=1;Yt<=Et;Yt++){let vn=In(a[Yt]);const Mn=vn.get("offset");vn.set("offset",zo((c+Mn*E)/ie)),H.push(vn)}E=ie,c=0,S="",a=H}return Jn(this.element,a,this.preStyleProps,this.postStyleProps,E,c,S,!0)}}function zo(l,a=3){const c=Math.pow(10,a-1);return Math.round(l*c)/c}class Zr{}const Lo=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class no extends Zr{normalizePropertyName(a,c){return Ls(a)}normalizeStyleValue(a,c,E,S){let H="";const ie=E.toString().trim();if(Lo.has(c)&&0!==E&&"0"!==E)if("number"==typeof E)H="px";else{const fe=E.match(/^[+-]?[\d\.]+([a-z]*)$/);fe&&0==fe[1].length&&S.push(function qt(l,a){return new I.vHH(3005,!1)}())}return ie+H}}function ei(l,a,c,E,S,H,ie,fe,Me,ze,Et,Yt,vn){return{type:0,element:l,triggerName:a,isRemovalTransition:S,fromState:c,fromStyles:H,toState:E,toStyles:ie,timelines:fe,queriedElements:Me,preStyleProps:ze,postStyleProps:Et,totalTime:Yt,errors:vn}}const fs={};class pn{constructor(a,c,E){this._triggerName=a,this.ast=c,this._stateStyles=E}match(a,c,E,S){return function or(l,a,c,E,S){return l.some(H=>H(a,c,E,S))}(this.ast.matchers,a,c,E,S)}buildStyles(a,c,E){let S=this._stateStyles.get("*");return void 0!==a&&(S=this._stateStyles.get(null==a?void 0:a.toString())||S),S?S.buildStyles(c,E):new Map}build(a,c,E,S,H,ie,fe,Me,ze,Et){var Yt;const vn=[],Mn=this.ast.options&&this.ast.options.params||fs,mn=this.buildStyles(E,fe&&fe.params||fs,vn),Ir=Me&&Me.params||fs,Gn=this.buildStyles(S,Ir,vn),jn=new Set,_i=new Map,di=new Map,xs="void"===S,Ta={params:Qa(Ir,Mn),delay:null===(Yt=this.ast.options)||void 0===Yt?void 0:Yt.delay},Br=Et?[]:yo(a,c,this.ast.animation,H,ie,mn,Gn,Ta,ze,vn);let kr=0;if(Br.forEach(Sa=>{kr=Math.max(Sa.duration+Sa.delay,kr)}),vn.length)return ei(c,this._triggerName,E,S,xs,mn,Gn,[],[],_i,di,kr,vn);Br.forEach(Sa=>{const Zs=Sa.element,Zl=fn(_i,Zs,new Set);Sa.preStyleProps.forEach(mu=>Zl.add(mu));const Nl=fn(di,Zs,new Set);Sa.postStyleProps.forEach(mu=>Nl.add(mu)),Zs!==c&&jn.add(Zs)});const za=Xr(jn.values());return ei(c,this._triggerName,E,S,xs,mn,Gn,Br,za,_i,di,kr)}}function Qa(l,a){const c=Vn(a);for(const E in l)l.hasOwnProperty(E)&&null!=l[E]&&(c[E]=l[E]);return c}class Dr{constructor(a,c,E){this.styles=a,this.defaultParams=c,this.normalizer=E}buildStyles(a,c){const E=new Map,S=Vn(this.defaultParams);return Object.keys(a).forEach(H=>{const ie=a[H];null!==ie&&(S[H]=ie)}),this.styles.styles.forEach(H=>{"string"!=typeof H&&H.forEach((ie,fe)=>{ie&&(ie=En(ie,S,c));const Me=this.normalizer.normalizePropertyName(fe,c);ie=this.normalizer.normalizeStyleValue(fe,Me,ie,c),E.set(Me,ie)})}),E}}class ns{constructor(a,c,E){this.name=a,this.ast=c,this._normalizer=E,this.transitionFactories=[],this.states=new Map,c.states.forEach(S=>{this.states.set(S.name,new Dr(S.style,S.options&&S.options.params||{},E))}),Ms(this.states,"true","1"),Ms(this.states,"false","0"),c.transitions.forEach(S=>{this.transitionFactories.push(new pn(a,S,this.states))}),this.fallbackTransition=function Fo(l,a,c){return new pn(l,{type:1,animation:{type:2,steps:[],options:null},matchers:[(ie,fe)=>!0],options:null,queryCount:0,depCount:0},a)}(a,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(a,c,E,S){return this.transitionFactories.find(ie=>ie.match(a,c,E,S))||null}matchStyles(a,c,E){return this.fallbackTransition.buildStyles(a,c,E)}}function Ms(l,a,c){l.has(a)?l.has(c)||l.set(c,l.get(a)):l.has(c)&&l.set(a,l.get(c))}const wn=new hs;class Ds{constructor(a,c,E){this.bodyNode=a,this._driver=c,this._normalizer=E,this._animations=new Map,this._playersById=new Map,this.players=[]}register(a,c){const E=[],H=$s(this._driver,c,E,[]);if(E.length)throw function si(l){return new I.vHH(3503,!1)}();this._animations.set(a,H)}_buildPlayer(a,c,E){const S=a.element,H=Nn(0,this._normalizer,0,a.keyframes,c,E);return this._driver.animate(S,H,a.duration,a.delay,a.easing,[],!0)}create(a,c,E={}){const S=[],H=this._animations.get(a);let ie;const fe=new Map;if(H?(ie=yo(this._driver,c,H,ke,at,new Map,new Map,E,wn,S),ie.forEach(Et=>{const Yt=fn(fe,Et.element,new Map);Et.postStyleProps.forEach(vn=>Yt.set(vn,null))})):(S.push(function cs(){return new I.vHH(3300,!1)}()),ie=[]),S.length)throw function gr(l){return new I.vHH(3504,!1)}();fe.forEach((Et,Yt)=>{Et.forEach((vn,Mn)=>{Et.set(Mn,this._driver.computeStyle(Yt,Mn,Y.l3))})});const ze=Lt(ie.map(Et=>{const Yt=fe.get(Et.element);return this._buildPlayer(Et,new Map,Yt)}));return this._playersById.set(a,ze),ze.onDestroy(()=>this.destroy(a)),this.players.push(ze),ze}destroy(a){const c=this._getPlayer(a);c.destroy(),this._playersById.delete(a);const E=this.players.indexOf(c);E>=0&&this.players.splice(E,1)}_getPlayer(a){const c=this._playersById.get(a);if(!c)throw function Ei(l){return new I.vHH(3301,!1)}();return c}listen(a,c,E,S){const H=On(c,"","","");return Wn(this._getPlayer(a),E,H,S),()=>{}}command(a,c,E,S){if("register"==E)return void this.register(a,S[0]);if("create"==E)return void this.create(a,c,S[0]||{});const H=this._getPlayer(a);switch(E){case"play":H.play();break;case"pause":H.pause();break;case"reset":H.reset();break;case"restart":H.restart();break;case"finish":H.finish();break;case"init":H.init();break;case"setPosition":H.setPosition(parseFloat(S[0]));break;case"destroy":this.destroy(a)}}}const Yo="ng-animate-queued",Cs="ng-animate-disabled",ga=[],At={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fr={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Os="__ng_removed";class qo{constructor(a,c=""){this.namespaceId=c;const E=a&&a.hasOwnProperty("value");if(this.value=function nn(l){return null!=l?l:null}(E?a.value:a),E){const H=Vn(a);delete H.value,this.options=H}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(a){const c=a.params;if(c){const E=this.options.params;Object.keys(c).forEach(S=>{null==E[S]&&(E[S]=c[S])})}}}const ui="void",$=new qo(ui);class U{constructor(a,c,E){this.id=a,this.hostElement=c,this._engine=E,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+a,is(c,this._hostClassName)}listen(a,c,E,S){if(!this._triggers.has(c))throw function oi(l,a){return new I.vHH(3302,!1)}();if(null==E||0==E.length)throw function Pr(l){return new I.vHH(3303,!1)}();if(!function rs(l){return"start"==l||"done"==l}(E))throw function je(l,a){return new I.vHH(3400,!1)}();const H=fn(this._elementListeners,a,[]),ie={name:c,phase:E,callback:S};H.push(ie);const fe=fn(this._engine.statesByElement,a,new Map);return fe.has(c)||(is(a,tn),is(a,tn+"-"+c),fe.set(c,$)),()=>{this._engine.afterFlush(()=>{const Me=H.indexOf(ie);Me>=0&&H.splice(Me,1),this._triggers.has(c)||fe.delete(c)})}}register(a,c){return!this._triggers.has(a)&&(this._triggers.set(a,c),!0)}_getTrigger(a){const c=this._triggers.get(a);if(!c)throw function Te(l){return new I.vHH(3401,!1)}();return c}trigger(a,c,E,S=!0){const H=this._getTrigger(c),ie=new te(this.id,c,a);let fe=this._engine.statesByElement.get(a);fe||(is(a,tn),is(a,tn+"-"+c),this._engine.statesByElement.set(a,fe=new Map));let Me=fe.get(c);const ze=new qo(E,this.id);if(!(E&&E.hasOwnProperty("value"))&&Me&&ze.absorbOptions(Me.options),fe.set(c,ze),Me||(Me=$),ze.value!==ui&&Me.value===ze.value){if(!function ps(l,a){const c=Object.keys(l),E=Object.keys(a);if(c.length!=E.length)return!1;for(let S=0;S<c.length;S++){const H=c[S];if(!a.hasOwnProperty(H)||l[H]!==a[H])return!1}return!0}(Me.params,ze.params)){const mn=[],Ir=H.matchStyles(Me.value,Me.params,mn),Gn=H.matchStyles(ze.value,ze.params,mn);mn.length?this._engine.reportError(mn):this._engine.afterFlush(()=>{ai(a,Ir),Di(a,Gn)})}return}const vn=fn(this._engine.playersByElement,a,[]);vn.forEach(mn=>{mn.namespaceId==this.id&&mn.triggerName==c&&mn.queued&&mn.destroy()});let Mn=H.matchTransition(Me.value,ze.value,a,ze.params),cn=!1;if(!Mn){if(!S)return;Mn=H.fallbackTransition,cn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:c,transition:Mn,fromState:Me,toState:ze,player:ie,isFallbackTransition:cn}),cn||(is(a,Yo),ie.onStart(()=>{Ps(a,Yo)})),ie.onDone(()=>{let mn=this.players.indexOf(ie);mn>=0&&this.players.splice(mn,1);const Ir=this._engine.playersByElement.get(a);if(Ir){let Gn=Ir.indexOf(ie);Gn>=0&&Ir.splice(Gn,1)}}),this.players.push(ie),vn.push(ie),ie}deregister(a){this._triggers.delete(a),this._engine.statesByElement.forEach(c=>c.delete(a)),this._elementListeners.forEach((c,E)=>{this._elementListeners.set(E,c.filter(S=>S.name!=a))})}clearElementCache(a){this._engine.statesByElement.delete(a),this._elementListeners.delete(a);const c=this._engine.playersByElement.get(a);c&&(c.forEach(E=>E.destroy()),this._engine.playersByElement.delete(a))}_signalRemovalForInnerTriggers(a,c){const E=this._engine.driver.query(a,rn,!0);E.forEach(S=>{if(S[Os])return;const H=this._engine.fetchNamespacesByElement(S);H.size?H.forEach(ie=>ie.triggerLeaveAnimation(S,c,!1,!0)):this.clearElementCache(S)}),this._engine.afterFlushAnimationsDone(()=>E.forEach(S=>this.clearElementCache(S)))}triggerLeaveAnimation(a,c,E,S){const H=this._engine.statesByElement.get(a),ie=new Map;if(H){const fe=[];if(H.forEach((Me,ze)=>{if(ie.set(ze,Me.value),this._triggers.has(ze)){const Et=this.trigger(a,ze,ui,S);Et&&fe.push(Et)}}),fe.length)return this._engine.markElementAsRemoved(this.id,a,!0,c,ie),E&&Lt(fe).onDone(()=>this._engine.processLeaveNode(a)),!0}return!1}prepareLeaveAnimationListeners(a){const c=this._elementListeners.get(a),E=this._engine.statesByElement.get(a);if(c&&E){const S=new Set;c.forEach(H=>{const ie=H.name;if(S.has(ie))return;S.add(ie);const Me=this._triggers.get(ie).fallbackTransition,ze=E.get(ie)||$,Et=new qo(ui),Yt=new te(this.id,ie,a);this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:ie,transition:Me,fromState:ze,toState:Et,player:Yt,isFallbackTransition:!0})})}}removeNode(a,c){const E=this._engine;if(a.childElementCount&&this._signalRemovalForInnerTriggers(a,c),this.triggerLeaveAnimation(a,c,!0))return;let S=!1;if(E.totalAnimations){const H=E.players.length?E.playersByQueriedElement.get(a):[];if(H&&H.length)S=!0;else{let ie=a;for(;ie=ie.parentNode;)if(E.statesByElement.get(ie)){S=!0;break}}}if(this.prepareLeaveAnimationListeners(a),S)E.markElementAsRemoved(this.id,a,!1,c);else{const H=a[Os];(!H||H===At)&&(E.afterFlush(()=>this.clearElementCache(a)),E.destroyInnerAnimations(a),E._onRemovalComplete(a,c))}}insertNode(a,c){is(a,this._hostClassName)}drainQueuedTransitions(a){const c=[];return this._queue.forEach(E=>{const S=E.player;if(S.destroyed)return;const H=E.element,ie=this._elementListeners.get(H);ie&&ie.forEach(fe=>{if(fe.name==E.triggerName){const Me=On(H,E.triggerName,E.fromState.value,E.toState.value);Me._data=a,Wn(E.player,fe.phase,Me,fe.callback)}}),S.markedForDestroy?this._engine.afterFlush(()=>{S.destroy()}):c.push(E)}),this._queue=[],c.sort((E,S)=>{const H=E.transition.ast.depCount,ie=S.transition.ast.depCount;return 0==H||0==ie?H-ie:this._engine.driver.containsElement(E.element,S.element)?1:-1})}destroy(a){this.players.forEach(c=>c.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,a)}elementContainsData(a){let c=!1;return this._elementListeners.has(a)&&(c=!0),c=!!this._queue.find(E=>E.element===a)||c,c}}class x{constructor(a,c,E){this.bodyNode=a,this.driver=c,this._normalizer=E,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(S,H)=>{}}_onRemovalComplete(a,c){this.onRemovalComplete(a,c)}get queuedPlayers(){const a=[];return this._namespaceList.forEach(c=>{c.players.forEach(E=>{E.queued&&a.push(E)})}),a}createNamespace(a,c){const E=new U(a,c,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,c)?this._balanceNamespaceList(E,c):(this.newHostElements.set(c,E),this.collectEnterElement(c)),this._namespaceLookup[a]=E}_balanceNamespaceList(a,c){const E=this._namespaceList,S=this.namespacesByHostElement;if(E.length-1>=0){let ie=!1,fe=this.driver.getParentElement(c);for(;fe;){const Me=S.get(fe);if(Me){const ze=E.indexOf(Me);E.splice(ze+1,0,a),ie=!0;break}fe=this.driver.getParentElement(fe)}ie||E.unshift(a)}else E.push(a);return S.set(c,a),a}register(a,c){let E=this._namespaceLookup[a];return E||(E=this.createNamespace(a,c)),E}registerTrigger(a,c,E){let S=this._namespaceLookup[a];S&&S.register(c,E)&&this.totalAnimations++}destroy(a,c){if(!a)return;const E=this._fetchNamespace(a);this.afterFlush(()=>{this.namespacesByHostElement.delete(E.hostElement),delete this._namespaceLookup[a];const S=this._namespaceList.indexOf(E);S>=0&&this._namespaceList.splice(S,1)}),this.afterFlushAnimationsDone(()=>E.destroy(c))}_fetchNamespace(a){return this._namespaceLookup[a]}fetchNamespacesByElement(a){const c=new Set,E=this.statesByElement.get(a);if(E)for(let S of E.values())if(S.namespaceId){const H=this._fetchNamespace(S.namespaceId);H&&c.add(H)}return c}trigger(a,c,E,S){if(Vr(c)){const H=this._fetchNamespace(a);if(H)return H.trigger(c,E,S),!0}return!1}insertNode(a,c,E,S){if(!Vr(c))return;const H=c[Os];if(H&&H.setForRemoval){H.setForRemoval=!1,H.setForMove=!0;const ie=this.collectedLeaveElements.indexOf(c);ie>=0&&this.collectedLeaveElements.splice(ie,1)}if(a){const ie=this._fetchNamespace(a);ie&&ie.insertNode(c,E)}S&&this.collectEnterElement(c)}collectEnterElement(a){this.collectedEnterElements.push(a)}markElementAsDisabled(a,c){c?this.disabledNodes.has(a)||(this.disabledNodes.add(a),is(a,Cs)):this.disabledNodes.has(a)&&(this.disabledNodes.delete(a),Ps(a,Cs))}removeNode(a,c,E,S){if(Vr(c)){const H=a?this._fetchNamespace(a):null;if(H?H.removeNode(c,S):this.markElementAsRemoved(a,c,!1,S),E){const ie=this.namespacesByHostElement.get(c);ie&&ie.id!==a&&ie.removeNode(c,S)}}else this._onRemovalComplete(c,S)}markElementAsRemoved(a,c,E,S,H){this.collectedLeaveElements.push(c),c[Os]={namespaceId:a,setForRemoval:S,hasAnimation:E,removedBeforeQueried:!1,previousTriggersValues:H}}listen(a,c,E,S,H){return Vr(c)?this._fetchNamespace(a).listen(c,E,S,H):()=>{}}_buildInstruction(a,c,E,S,H){return a.transition.build(this.driver,a.element,a.fromState.value,a.toState.value,E,S,a.fromState.options,a.toState.options,c,H)}destroyInnerAnimations(a){let c=this.driver.query(a,rn,!0);c.forEach(E=>this.destroyActiveAnimationsForElement(E)),0!=this.playersByQueriedElement.size&&(c=this.driver.query(a,Pe,!0),c.forEach(E=>this.finishActiveQueriedAnimationOnElement(E)))}destroyActiveAnimationsForElement(a){const c=this.playersByElement.get(a);c&&c.forEach(E=>{E.queued?E.markedForDestroy=!0:E.destroy()})}finishActiveQueriedAnimationOnElement(a){const c=this.playersByQueriedElement.get(a);c&&c.forEach(E=>E.finish())}whenRenderingDone(){return new Promise(a=>{if(this.players.length)return Lt(this.players).onDone(()=>a());a()})}processLeaveNode(a){var c;const E=a[Os];if(E&&E.setForRemoval){if(a[Os]=At,E.namespaceId){this.destroyInnerAnimations(a);const S=this._fetchNamespace(E.namespaceId);S&&S.clearElementCache(a)}this._onRemovalComplete(a,E.setForRemoval)}!(null===(c=a.classList)||void 0===c)&&c.contains(Cs)&&this.markElementAsDisabled(a,!1),this.driver.query(a,".ng-animate-disabled",!0).forEach(S=>{this.markElementAsDisabled(S,!1)})}flush(a=-1){let c=[];if(this.newHostElements.size&&(this.newHostElements.forEach((E,S)=>this._balanceNamespaceList(E,S)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let E=0;E<this.collectedEnterElements.length;E++)is(this.collectedEnterElements[E],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const E=[];try{c=this._flushAnimations(E,a)}finally{for(let S=0;S<E.length;S++)E[S]()}}else for(let E=0;E<this.collectedLeaveElements.length;E++)this.processLeaveNode(this.collectedLeaveElements[E]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(E=>E()),this._flushFns=[],this._whenQuietFns.length){const E=this._whenQuietFns;this._whenQuietFns=[],c.length?Lt(c).onDone(()=>{E.forEach(S=>S())}):E.forEach(S=>S())}}reportError(a){throw function ye(l){return new I.vHH(3402,!1)}()}_flushAnimations(a,c){const E=new hs,S=[],H=new Map,ie=[],fe=new Map,Me=new Map,ze=new Map,Et=new Set;this.disabledNodes.forEach(kt=>{Et.add(kt);const kn=this.driver.query(kt,".ng-animate-queued",!0);for(let Hn=0;Hn<kn.length;Hn++)Et.add(kn[Hn])});const Yt=this.bodyNode,vn=Array.from(this.statesByElement.keys()),Mn=Fs(vn,this.collectedEnterElements),cn=new Map;let mn=0;Mn.forEach((kt,kn)=>{const Hn=ke+mn++;cn.set(kn,Hn),kt.forEach(wr=>is(wr,Hn))});const Ir=[],Gn=new Set,jn=new Set;for(let kt=0;kt<this.collectedLeaveElements.length;kt++){const kn=this.collectedLeaveElements[kt],Hn=kn[Os];Hn&&Hn.setForRemoval&&(Ir.push(kn),Gn.add(kn),Hn.hasAnimation?this.driver.query(kn,".ng-star-inserted",!0).forEach(wr=>Gn.add(wr)):jn.add(kn))}const _i=new Map,di=Fs(vn,Array.from(Gn));di.forEach((kt,kn)=>{const Hn=at+mn++;_i.set(kn,Hn),kt.forEach(wr=>is(wr,Hn))}),a.push(()=>{Mn.forEach((kt,kn)=>{const Hn=cn.get(kn);kt.forEach(wr=>Ps(wr,Hn))}),di.forEach((kt,kn)=>{const Hn=_i.get(kn);kt.forEach(wr=>Ps(wr,Hn))}),Ir.forEach(kt=>{this.processLeaveNode(kt)})});const xs=[],Ta=[];for(let kt=this._namespaceList.length-1;kt>=0;kt--)this._namespaceList[kt].drainQueuedTransitions(c).forEach(Hn=>{const wr=Hn.player,Ti=Hn.element;if(xs.push(wr),this.collectedEnterElements.length){const fo=Ti[Os];if(fo&&fo.setForMove){if(fo.previousTriggersValues&&fo.previousTriggersValues.has(Hn.triggerName)){const wl=fo.previousTriggersValues.get(Hn.triggerName),al=this.statesByElement.get(Hn.element);if(al&&al.has(Hn.triggerName)){const Su=al.get(Hn.triggerName);Su.value=wl,al.set(Hn.triggerName,Su)}}return void wr.destroy()}}const Go=!Yt||!this.driver.containsElement(Yt,Ti),Wo=_i.get(Ti),Il=cn.get(Ti),qi=this._buildInstruction(Hn,E,Il,Wo,Go);if(qi.errors&&qi.errors.length)return void Ta.push(qi);if(Go)return wr.onStart(()=>ai(Ti,qi.fromStyles)),wr.onDestroy(()=>Di(Ti,qi.toStyles)),void S.push(wr);if(Hn.isFallbackTransition)return wr.onStart(()=>ai(Ti,qi.fromStyles)),wr.onDestroy(()=>Di(Ti,qi.toStyles)),void S.push(wr);const pd=[];qi.timelines.forEach(fo=>{fo.stretchStartingKeyframe=!0,this.disabledNodes.has(fo.element)||pd.push(fo)}),qi.timelines=pd,E.append(Ti,qi.timelines),ie.push({instruction:qi,player:wr,element:Ti}),qi.queriedElements.forEach(fo=>fn(fe,fo,[]).push(wr)),qi.preStyleProps.forEach((fo,wl)=>{if(fo.size){let al=Me.get(wl);al||Me.set(wl,al=new Set),fo.forEach((Su,ju)=>al.add(ju))}}),qi.postStyleProps.forEach((fo,wl)=>{let al=ze.get(wl);al||ze.set(wl,al=new Set),fo.forEach((Su,ju)=>al.add(ju))})});if(Ta.length){const kt=[];Ta.forEach(kn=>{kt.push(function ht(l,a){return new I.vHH(3505,!1)}())}),xs.forEach(kn=>kn.destroy()),this.reportError(kt)}const Br=new Map,kr=new Map;ie.forEach(kt=>{const kn=kt.element;E.has(kn)&&(kr.set(kn,kn),this._beforeAnimationBuild(kt.player.namespaceId,kt.instruction,Br))}),S.forEach(kt=>{const kn=kt.element;this._getPreviousPlayers(kn,!1,kt.namespaceId,kt.triggerName,null).forEach(wr=>{fn(Br,kn,[]).push(wr),wr.destroy()})});const za=Ir.filter(kt=>ma(kt,Me,ze)),Sa=new Map;Gr(Sa,this.driver,jn,ze,Y.l3).forEach(kt=>{ma(kt,Me,ze)&&za.push(kt)});const Zl=new Map;Mn.forEach((kt,kn)=>{Gr(Zl,this.driver,new Set(kt),Me,Y.k1)}),za.forEach(kt=>{var kn,Hn;const wr=Sa.get(kt),Ti=Zl.get(kt);Sa.set(kt,new Map([...Array.from(null!==(kn=null==wr?void 0:wr.entries())&&void 0!==kn?kn:[]),...Array.from(null!==(Hn=null==Ti?void 0:Ti.entries())&&void 0!==Hn?Hn:[])]))});const Nl=[],mu=[],Uc={};ie.forEach(kt=>{const{element:kn,player:Hn,instruction:wr}=kt;if(E.has(kn)){if(Et.has(kn))return Hn.onDestroy(()=>Di(kn,wr.toStyles)),Hn.disabled=!0,Hn.overrideTotalTime(wr.totalTime),void S.push(Hn);let Ti=Uc;if(kr.size>1){let Wo=kn;const Il=[];for(;Wo=Wo.parentNode;){const qi=kr.get(Wo);if(qi){Ti=qi;break}Il.push(Wo)}Il.forEach(qi=>kr.set(qi,Ti))}const Go=this._buildAnimation(Hn.namespaceId,wr,Br,H,Zl,Sa);if(Hn.setRealPlayer(Go),Ti===Uc)Nl.push(Hn);else{const Wo=this.playersByElement.get(Ti);Wo&&Wo.length&&(Hn.parentPlayer=Lt(Wo)),S.push(Hn)}}else ai(kn,wr.fromStyles),Hn.onDestroy(()=>Di(kn,wr.toStyles)),mu.push(Hn),Et.has(kn)&&S.push(Hn)}),mu.forEach(kt=>{const kn=H.get(kt.element);if(kn&&kn.length){const Hn=Lt(kn);kt.setRealPlayer(Hn)}}),S.forEach(kt=>{kt.parentPlayer?kt.syncPlayerEvents(kt.parentPlayer):kt.destroy()});for(let kt=0;kt<Ir.length;kt++){const kn=Ir[kt],Hn=kn[Os];if(Ps(kn,at),Hn&&Hn.hasAnimation)continue;let wr=[];if(fe.size){let Go=fe.get(kn);Go&&Go.length&&wr.push(...Go);let Wo=this.driver.query(kn,Pe,!0);for(let Il=0;Il<Wo.length;Il++){let qi=fe.get(Wo[Il]);qi&&qi.length&&wr.push(...qi)}}const Ti=wr.filter(Go=>!Go.destroyed);Ti.length?Zo(this,kn,Ti):this.processLeaveNode(kn)}return Ir.length=0,Nl.forEach(kt=>{this.players.push(kt),kt.onDone(()=>{kt.destroy();const kn=this.players.indexOf(kt);this.players.splice(kn,1)}),kt.play()}),Nl}elementContainsData(a,c){let E=!1;const S=c[Os];return S&&S.setForRemoval&&(E=!0),this.playersByElement.has(c)&&(E=!0),this.playersByQueriedElement.has(c)&&(E=!0),this.statesByElement.has(c)&&(E=!0),this._fetchNamespace(a).elementContainsData(c)||E}afterFlush(a){this._flushFns.push(a)}afterFlushAnimationsDone(a){this._whenQuietFns.push(a)}_getPreviousPlayers(a,c,E,S,H){let ie=[];if(c){const fe=this.playersByQueriedElement.get(a);fe&&(ie=fe)}else{const fe=this.playersByElement.get(a);if(fe){const Me=!H||H==ui;fe.forEach(ze=>{ze.queued||!Me&&ze.triggerName!=S||ie.push(ze)})}}return(E||S)&&(ie=ie.filter(fe=>!(E&&E!=fe.namespaceId||S&&S!=fe.triggerName))),ie}_beforeAnimationBuild(a,c,E){const H=c.element,ie=c.isRemovalTransition?void 0:a,fe=c.isRemovalTransition?void 0:c.triggerName;for(const Me of c.timelines){const ze=Me.element,Et=ze!==H,Yt=fn(E,ze,[]);this._getPreviousPlayers(ze,Et,ie,fe,c.toState).forEach(Mn=>{const cn=Mn.getRealPlayer();cn.beforeDestroy&&cn.beforeDestroy(),Mn.destroy(),Yt.push(Mn)})}ai(H,c.fromStyles)}_buildAnimation(a,c,E,S,H,ie){const fe=c.triggerName,Me=c.element,ze=[],Et=new Set,Yt=new Set,vn=c.timelines.map(cn=>{const mn=cn.element;Et.add(mn);const Ir=mn[Os];if(Ir&&Ir.removedBeforeQueried)return new Y.ZN(cn.duration,cn.delay);const Gn=mn!==Me,jn=function Ra(l){const a=[];return Jo(l,a),a}((E.get(mn)||ga).map(Br=>Br.getRealPlayer())).filter(Br=>!!Br.element&&Br.element===mn),_i=H.get(mn),di=ie.get(mn),xs=Nn(0,this._normalizer,0,cn.keyframes,_i,di),Ta=this._buildPlayer(cn,xs,jn);if(cn.subTimeline&&S&&Yt.add(mn),Gn){const Br=new te(a,fe,mn);Br.setRealPlayer(Ta),ze.push(Br)}return Ta});ze.forEach(cn=>{fn(this.playersByQueriedElement,cn.element,[]).push(cn),cn.onDone(()=>function ct(l,a,c){let E=l.get(a);if(E){if(E.length){const S=E.indexOf(c);E.splice(S,1)}0==E.length&&l.delete(a)}return E}(this.playersByQueriedElement,cn.element,cn))}),Et.forEach(cn=>is(cn,Se));const Mn=Lt(vn);return Mn.onDestroy(()=>{Et.forEach(cn=>Ps(cn,Se)),Di(Me,c.toStyles)}),Yt.forEach(cn=>{fn(S,cn,[]).push(Mn)}),Mn}_buildPlayer(a,c,E){return c.length>0?this.driver.animate(a.element,c,a.duration,a.delay,a.easing,E):new Y.ZN(a.duration,a.delay)}}class te{constructor(a,c,E){this.namespaceId=a,this.triggerName=c,this.element=E,this._player=new Y.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(a){this._containsRealPlayer||(this._player=a,this._queuedCallbacks.forEach((c,E)=>{c.forEach(S=>Wn(a,E,void 0,S))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(a.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(a){this.totalTime=a}syncPlayerEvents(a){const c=this._player;c.triggerCallback&&a.onStart(()=>c.triggerCallback("start")),a.onDone(()=>this.finish()),a.onDestroy(()=>this.destroy())}_queueEvent(a,c){fn(this._queuedCallbacks,a,[]).push(c)}onDone(a){this.queued&&this._queueEvent("done",a),this._player.onDone(a)}onStart(a){this.queued&&this._queueEvent("start",a),this._player.onStart(a)}onDestroy(a){this.queued&&this._queueEvent("destroy",a),this._player.onDestroy(a)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(a){this.queued||this._player.setPosition(a)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(a){const c=this._player;c.triggerCallback&&c.triggerCallback(a)}}function Vr(l){return l&&1===l.nodeType}function Is(l,a){const c=l.style.display;return l.style.display=null!=a?a:"none",c}function Gr(l,a,c,E,S){const H=[];c.forEach(Me=>H.push(Is(Me)));const ie=[];E.forEach((Me,ze)=>{const Et=new Map;Me.forEach(Yt=>{const vn=a.computeStyle(ze,Yt,S);Et.set(Yt,vn),(!vn||0==vn.length)&&(ze[Os]=fr,ie.push(ze))}),l.set(ze,Et)});let fe=0;return c.forEach(Me=>Is(Me,H[fe++])),ie}function Fs(l,a){const c=new Map;if(l.forEach(fe=>c.set(fe,[])),0==a.length)return c;const S=new Set(a),H=new Map;function ie(fe){if(!fe)return 1;let Me=H.get(fe);if(Me)return Me;const ze=fe.parentNode;return Me=c.has(ze)?ze:S.has(ze)?1:ie(ze),H.set(fe,Me),Me}return a.forEach(fe=>{const Me=ie(fe);1!==Me&&c.get(Me).push(fe)}),c}function is(l,a){var c;null===(c=l.classList)||void 0===c||c.add(a)}function Ps(l,a){var c;null===(c=l.classList)||void 0===c||c.remove(a)}function Zo(l,a,c){Lt(c).onDone(()=>l.processLeaveNode(a))}function Jo(l,a){for(let c=0;c<l.length;c++){const E=l[c];E instanceof Y.ZE?Jo(E.players,a):a.push(E)}}function ma(l,a,c){const E=c.get(l);if(!E)return!1;let S=a.get(l);return S?E.forEach(H=>S.add(H)):a.set(l,E),c.delete(l),!0}class ro{constructor(a,c,E){this.bodyNode=a,this._driver=c,this._normalizer=E,this._triggerCache={},this.onRemovalComplete=(S,H)=>{},this._transitionEngine=new x(a,c,E),this._timelineEngine=new Ds(a,c,E),this._transitionEngine.onRemovalComplete=(S,H)=>this.onRemovalComplete(S,H)}registerTrigger(a,c,E,S,H){const ie=a+"-"+S;let fe=this._triggerCache[ie];if(!fe){const Me=[],Et=$s(this._driver,H,Me,[]);if(Me.length)throw function Li(l,a){return new I.vHH(3404,!1)}();fe=function pa(l,a,c){return new ns(l,a,c)}(S,Et,this._normalizer),this._triggerCache[ie]=fe}this._transitionEngine.registerTrigger(c,S,fe)}register(a,c){this._transitionEngine.register(a,c)}destroy(a,c){this._transitionEngine.destroy(a,c)}onInsert(a,c,E,S){this._transitionEngine.insertNode(a,c,E,S)}onRemove(a,c,E,S){this._transitionEngine.removeNode(a,c,S||!1,E)}disableAnimations(a,c){this._transitionEngine.markElementAsDisabled(a,c)}process(a,c,E,S){if("@"==E.charAt(0)){const[H,ie]=Kn(E);this._timelineEngine.command(H,c,ie,S)}else this._transitionEngine.trigger(a,c,E,S)}listen(a,c,E,S,H){if("@"==E.charAt(0)){const[ie,fe]=Kn(E);return this._timelineEngine.listen(ie,c,fe,H)}return this._transitionEngine.listen(a,c,E,S,H)}flush(a=-1){this._transitionEngine.flush(a)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Xo=(()=>{class l{constructor(c,E,S){this._element=c,this._startStyles=E,this._endStyles=S,this._state=0;let H=l.initialStylesByElement.get(c);H||l.initialStylesByElement.set(c,H=new Map),this._initialStyles=H}start(){this._state<1&&(this._startStyles&&Di(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Di(this._element,this._initialStyles),this._endStyles&&(Di(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(l.initialStylesByElement.delete(this._element),this._startStyles&&(ai(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ai(this._element,this._endStyles),this._endStyles=null),Di(this._element,this._initialStyles),this._state=3)}}return l.initialStylesByElement=new WeakMap,l})();function io(l){let a=null;return l.forEach((c,E)=>{(function ks(l){return"display"===l||"position"===l})(E)&&(a=a||new Map,a.set(E,c))}),a}class Io{constructor(a,c,E,S){this.element=a,this.keyframes=c,this.options=E,this._specialStyles=S,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=E.duration,this._delay=E.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const a=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,a,this.options),this._finalKeyframe=a.length?a[a.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(a){const c=[];return a.forEach(E=>{c.push(Object.fromEntries(E))}),c}_triggerWebAnimation(a,c,E){return a.animate(this._convertKeyframesToObject(c),E)}onStart(a){this._originalOnStartFns.push(a),this._onStartFns.push(a)}onDone(a){this._originalOnDoneFns.push(a),this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(a=>a()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}setPosition(a){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=a*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const a=new Map;this.hasStarted()&&this._finalKeyframe.forEach((E,S)=>{"offset"!==S&&a.set(S,this._finished?E:$n(this.element,S))}),this.currentSnapshot=a}triggerCallback(a){const c="start"===a?this._onStartFns:this._onDoneFns;c.forEach(E=>E()),c.length=0}}class Xi{validateStyleProperty(a){return!0}validateAnimatableStyleProperty(a){return!0}matchesElement(a,c){return!1}containsElement(a,c){return Gt(a,c)}getParentElement(a){return lr(a)}query(a,c,E){return Xt(a,c,E)}computeStyle(a,c,E){return window.getComputedStyle(a)[c]}animate(a,c,E,S,H,ie=[]){const Me={duration:E,delay:S,fill:0==S?"both":"forwards"};H&&(Me.easing=H);const ze=new Map,Et=ie.filter(Mn=>Mn instanceof Io);(function qr(l,a){return 0===l||0===a})(E,S)&&Et.forEach(Mn=>{Mn.currentSnapshot.forEach((cn,mn)=>ze.set(mn,cn))});let Yt=function Qr(l){return l.length?l[0]instanceof Map?l:l.map(a=>sr(a)):[]}(c).map(Mn=>In(Mn));Yt=function Pi(l,a,c){if(c.size&&a.length){let E=a[0],S=[];if(c.forEach((H,ie)=>{E.has(ie)||S.push(ie),E.set(ie,H)}),S.length)for(let H=1;H<a.length;H++){let ie=a[H];S.forEach(fe=>ie.set(fe,$n(l,fe)))}}return a}(a,Yt,ze);const vn=function ya(l,a){let c=null,E=null;return Array.isArray(a)&&a.length?(c=io(a[0]),a.length>1&&(E=io(a[a.length-1]))):a instanceof Map&&(c=io(a)),c||E?new Xo(l,c,E):null}(a,Yt);return new Io(a,Yt,Me,vn)}}let qa=(()=>{class l extends Y._j{constructor(c,E){super(),this._nextAnimationId=0,this._renderer=c.createRenderer(E.body,{id:"0",encapsulation:I.ifc.None,styles:[],data:{animation:[]}})}build(c){const E=this._nextAnimationId.toString();this._nextAnimationId++;const S=Array.isArray(c)?(0,Y.vP)(c):c;return L(this._renderer,null,E,"register",[S]),new ea(E,this._renderer)}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(I.FYo),I.LFG(ue.K0))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})();class ea extends Y.LC{constructor(a,c){super(),this._id=a,this._renderer=c}create(a,c){return new _a(this._id,a,c||{},this._renderer)}}class _a{constructor(a,c,E,S){this.id=a,this.element=c,this._renderer=S,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",E)}_listen(a,c){return this._renderer.listen(this.element,`@@${this.id}:${a}`,c)}_command(a,...c){return L(this._renderer,this.element,this.id,a,c)}onDone(a){this._listen("done",a)}onStart(a){this._listen("start",a)}onDestroy(a){this._listen("destroy",a)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(a){this._command("setPosition",a)}getPosition(){var a,c;return null!==(c=null===(a=this._renderer.engine.players[+this.id])||void 0===a?void 0:a.getPosition())&&void 0!==c?c:0}}function L(l,a,c,E,S){return l.setProperty(a,`@@${c}:${E}`,S)}const q="@",k="@.disabled";let se=(()=>{class l{constructor(c,E,S){this.delegate=c,this.engine=E,this._zone=S,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),E.onRemovalComplete=(H,ie)=>{const fe=null==ie?void 0:ie.parentNode(H);fe&&ie.removeChild(fe,H)}}createRenderer(c,E){const H=this.delegate.createRenderer(c,E);if(!(c&&E&&E.data&&E.data.animation)){let Et=this._rendererCache.get(H);return Et||(Et=new me("",H,this.engine),this._rendererCache.set(H,Et)),Et}const ie=E.id,fe=E.id+"-"+this._currentId;this._currentId++,this.engine.register(fe,c);const Me=Et=>{Array.isArray(Et)?Et.forEach(Me):this.engine.registerTrigger(ie,fe,c,Et.name,Et)};return E.data.animation.forEach(Me),new et(this,fe,H,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(c,E,S){c>=0&&c<this._microtaskId?this._zone.run(()=>E(S)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(H=>{const[ie,fe]=H;ie(fe)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([E,S]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(I.FYo),I.LFG(ro),I.LFG(I.R0b))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})();class me{constructor(a,c,E){this.namespaceId=a,this.delegate=c,this.engine=E,this.destroyNode=this.delegate.destroyNode?S=>c.destroyNode(S):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(a,c){return this.delegate.createElement(a,c)}createComment(a){return this.delegate.createComment(a)}createText(a){return this.delegate.createText(a)}appendChild(a,c){this.delegate.appendChild(a,c),this.engine.onInsert(this.namespaceId,c,a,!1)}insertBefore(a,c,E,S=!0){this.delegate.insertBefore(a,c,E),this.engine.onInsert(this.namespaceId,c,a,S)}removeChild(a,c,E){this.engine.onRemove(this.namespaceId,c,this.delegate,E)}selectRootElement(a,c){return this.delegate.selectRootElement(a,c)}parentNode(a){return this.delegate.parentNode(a)}nextSibling(a){return this.delegate.nextSibling(a)}setAttribute(a,c,E,S){this.delegate.setAttribute(a,c,E,S)}removeAttribute(a,c,E){this.delegate.removeAttribute(a,c,E)}addClass(a,c){this.delegate.addClass(a,c)}removeClass(a,c){this.delegate.removeClass(a,c)}setStyle(a,c,E,S){this.delegate.setStyle(a,c,E,S)}removeStyle(a,c,E){this.delegate.removeStyle(a,c,E)}setProperty(a,c,E){c.charAt(0)==q&&c==k?this.disableAnimations(a,!!E):this.delegate.setProperty(a,c,E)}setValue(a,c){this.delegate.setValue(a,c)}listen(a,c,E){return this.delegate.listen(a,c,E)}disableAnimations(a,c){this.engine.disableAnimations(a,c)}}class et extends me{constructor(a,c,E,S){super(c,E,S),this.factory=a,this.namespaceId=c}setProperty(a,c,E){c.charAt(0)==q?"."==c.charAt(1)&&c==k?this.disableAnimations(a,E=void 0===E||!!E):this.engine.process(this.namespaceId,a,c.slice(1),E):this.delegate.setProperty(a,c,E)}listen(a,c,E){if(c.charAt(0)==q){const S=function ft(l){switch(l){case"body":return document.body;case"document":return document;case"window":return window;default:return l}}(a);let H=c.slice(1),ie="";return H.charAt(0)!=q&&([H,ie]=function Jt(l){const a=l.indexOf(".");return[l.substring(0,a),l.slice(a+1)]}(H)),this.engine.listen(this.namespaceId,S,H,ie,fe=>{this.factory.scheduleListenerCallback(fe._data||-1,E,fe)})}return this.delegate.listen(a,c,E)}}let Mr=(()=>{class l extends ro{constructor(c,E,S,H){super(c.body,E,S)}ngOnDestroy(){this.flush()}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(ue.K0),I.LFG(Er),I.LFG(Zr),I.LFG(I.z2F))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})();const ur=[{provide:Y._j,useClass:qa},{provide:Zr,useFactory:function bn(){return new no}},{provide:ro,useClass:Mr},{provide:I.FYo,useFactory:function pr(l,a,c){return new se(l,a,c)},deps:[g.se,ro,I.R0b]}],Ci=[{provide:Er,useFactory:()=>new Xi},{provide:I.QbO,useValue:"BrowserAnimations"},...ur],br=[{provide:Er,useClass:tr},{provide:I.QbO,useValue:"NoopAnimations"},...ur];let Ii=(()=>{class l{static withConfig(c){return{ngModule:l,providers:c.disableAnimations?br:Ci}}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({providers:Ci,imports:[g.b2]}),l})();var $i=D(8505),bi=D(1135);let Rs=(()=>{class l{constructor(c){this.router=c,this.loadCount=0,this.loadState=new bi.X(!1),this.router.events.subscribe(E=>{this.navigationInterceptor(E)})}showLoader(){this.loadCount+=1,this.loadState.next(!0)}hideLoader(){this.loadCount=this.loadCount?--this.loadCount:0,this.loadCount||this.loadState.next(!1)}navigationInterceptor(c){c instanceof B.OD&&this.showLoader(),c instanceof B.m2&&this.hideLoader(),c instanceof B.gk&&this.hideLoader(),c instanceof B.Q3&&this.hideLoader()}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(B.F0))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),xt=(()=>{class l{constructor(c){this.loaderService=c}intercept(c,E){return this.loaderService.showLoader(),E.handle(c).pipe((0,$i.b)(S=>{S instanceof Oe.Zn&&this.loaderService.hideLoader()},S=>{this.loaderService.hideLoader()}))}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(Rs))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})();const Gi={provide:Oe.TP,useClass:xt,multi:!0};var wo=D(9770),va=D(2843),ln=D(4968),en=D(9646),Eu=D(7272),Zt=D(7579),ot=D(9751),Pt=D(5032);const ti=new ot.y(Pt.Z);var Za=D(6451),Ri=D(4004),Us=D(9300),xa=D(3900),so=D(8646),oo=D(5698),Na=D(4086);const To="Service workers are disabled or not supported by this browser";class mi{constructor(a){if(this.serviceWorker=a,a){const E=(0,ln.R)(a,"controllerchange").pipe((0,Ri.U)(()=>a.controller)),S=(0,wo.P)(()=>(0,en.of)(a.controller)),H=(0,Eu.z)(S,E);this.worker=H.pipe((0,Us.h)(Et=>!!Et)),this.registration=this.worker.pipe((0,xa.w)(()=>a.getRegistration()));const ze=(0,ln.R)(a,"message").pipe((0,Ri.U)(Et=>Et.data)).pipe((0,Us.h)(Et=>Et&&Et.type)).pipe((0,so.n)());ze.connect(),this.events=ze}else this.worker=this.events=this.registration=function iu(l){return(0,wo.P)(()=>(0,va._)(new Error(l)))}(To)}postMessage(a,c){return this.worker.pipe((0,oo.q)(1),(0,$i.b)(E=>{E.postMessage(Object.assign({action:a},c))})).toPromise().then(()=>{})}postMessageWithOperation(a,c,E){const S=this.waitForOperationCompleted(E),H=this.postMessage(a,c);return Promise.all([H,S]).then(([,ie])=>ie)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(a){let c;return c="string"==typeof a?E=>E.type===a:E=>a.includes(E.type),this.events.pipe((0,Us.h)(c))}nextEventOfType(a){return this.eventsOfType(a).pipe((0,oo.q)(1))}waitForOperationCompleted(a){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,Us.h)(c=>c.nonce===a),(0,oo.q)(1),(0,Ri.U)(c=>{if(void 0!==c.result)return c.result;throw new Error(c.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Xn=(()=>{class l{constructor(c){if(this.sw=c,this.subscriptionChanges=new Zt.x,!c.isEnabled)return this.messages=ti,this.notificationClicks=ti,void(this.subscription=ti);this.messages=this.sw.eventsOfType("PUSH").pipe((0,Ri.U)(S=>S.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,Ri.U)(S=>S.data)),this.pushManager=this.sw.registration.pipe((0,Ri.U)(S=>S.pushManager));const E=this.pushManager.pipe((0,xa.w)(S=>S.getSubscription()));this.subscription=(0,Za.T)(E,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(c){if(!this.sw.isEnabled)return Promise.reject(new Error(To));const E={userVisibleOnly:!0};let S=this.decodeBase64(c.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),H=new Uint8Array(new ArrayBuffer(S.length));for(let ie=0;ie<S.length;ie++)H[ie]=S.charCodeAt(ie);return E.applicationServerKey=H,this.pushManager.pipe((0,xa.w)(ie=>ie.subscribe(E)),(0,oo.q)(1)).toPromise().then(ie=>(this.subscriptionChanges.next(ie),ie))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,oo.q)(1),(0,xa.w)(E=>{if(null===E)throw new Error("Not subscribed to push notifications.");return E.unsubscribe().then(S=>{if(!S)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(To))}decodeBase64(c){return atob(c)}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(mi))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})(),ms=(()=>{class l{constructor(c){if(this.sw=c,!c.isEnabled)return this.versionUpdates=ti,this.available=ti,this.activated=ti,void(this.unrecoverable=ti);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe((0,Us.h)(E=>"VERSION_READY"===E.type),(0,Ri.U)(E=>({type:"UPDATE_AVAILABLE",current:E.currentVersion,available:E.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(To));const c=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:c},c)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(To));const c=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:c},c)}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(mi))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})();class Al{}const Kr=new I.OlP("NGSW_REGISTER_SCRIPT");function Sn(l,a,c,E){return()=>{if(!(0,ue.NF)(E)||!("serviceWorker"in navigator)||!1===c.enabled)return;let S;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof c.registrationStrategy)S=c.registrationStrategy();else{const[ie,...fe]=(c.registrationStrategy||"registerWhenStable:30000").split(":");switch(ie){case"registerImmediately":S=(0,en.of)(null);break;case"registerWithDelay":S=Uo(+fe[0]||0);break;case"registerWhenStable":S=fe[0]?(0,Za.T)(yr(l),Uo(+fe[0])):yr(l);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${c.registrationStrategy}`)}}l.get(I.R0b).runOutsideAngular(()=>S.pipe((0,oo.q)(1)).subscribe(()=>navigator.serviceWorker.register(a,{scope:c.scope}).catch(ie=>console.error("Service worker registration failed with:",ie))))}}function Uo(l){return(0,en.of)(null).pipe((0,Na.g)(l))}function yr(l){return l.get(I.z2F).isStable.pipe((0,Us.h)(c=>c))}function Wi(l,a){return new mi((0,ue.NF)(a)&&!1!==l.enabled?navigator.serviceWorker:void 0)}let Ai=(()=>{class l{static register(c,E={}){return{ngModule:l,providers:[{provide:Kr,useValue:c},{provide:Al,useValue:E},{provide:mi,useFactory:Wi,deps:[Al,I.Lbi]},{provide:I.ip1,useFactory:Sn,deps:[I.zs3,Kr,Al,I.Lbi],multi:!0}]}}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({providers:[Xn,ms]}),l})();var Kt=D(2340);let ao=(()=>{class l{constructor(c){this.injector=c}handleError(c){const E=this.injector.get(Je.g);this.injector.get(B.F0),c instanceof Oe.UA?(navigator.onLine||E.notify("No Internet Connection"),E.notify(`${c.status} - ${c.message}`)):E.notify(c),console.error(c)}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(I.zs3))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})();function lo(l,a){if(1&l&&(I.TgZ(0,"div")(1,"h1"),I._uU(2),I.qZA(),I.TgZ(3,"a",2)(4,"h5"),I._uU(5,"Go to Home"),I.qZA()()()),2&l){const c=I.oxw();I.xp6(2),I.hij("ERROR ",null==c.routeParams?null:c.routeParams.error,""),I.xp6(1),I.Q6J("routerLink","/")}}const Ml=[{path:"error",component:(()=>{class l{constructor(c){this.activatedRoute=c}ngOnInit(){this.routeParams=this.activatedRoute.snapshot.queryParams}}return l.\u0275fac=function(c){return new(c||l)(I.Y36(B.gz))},l.\u0275cmp=I.Xpm({type:l,selectors:[["app-errors"]],decls:2,vars:1,consts:[[1,"error-container"],[4,"ngIf"],[3,"routerLink"]],template:function(c,E){1&c&&(I.TgZ(0,"div",0),I.YNc(1,lo,6,2,"div",1),I.qZA()),2&c&&(I.xp6(1),I.Q6J("ngIf",null==E.routeParams?null:E.routeParams.error))},dependencies:[ue.O5,B.yS],styles:[".error-container[_ngcontent-%COMP%]{width:220px;margin:50% auto 0;transform:translateY(-50%);text-align:center}"]}),l})()}];let ta=(()=>{class l{}return l.\u0275fac=function(c){return new(c||l)},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({imports:[B.Bz.forChild(Ml),B.Bz]}),l})();var La=D(5625),So=D(262);const Ja={provide:Oe.TP,useClass:class cl{intercept(a,c){return c.handle(a).pipe((0,La.X)(0),(0,So.K)(this.handleError))}handleError(a){let c="";return c=a.error instanceof ErrorEvent?`Error: ${a.error.message}`:`Error Code: ${a.status}\\nMessage: ${a.message}`,(0,va._)(a)}},multi:!0};let ss=(()=>{class l{}return l.\u0275fac=function(c){return new(c||l)},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({providers:[{provide:I.qLn,useClass:ao},Ja],imports:[ue.ez,ta]}),l})();var Xa=D(4466),su=D(7637),el=D(9155);let uo=(()=>{class l{get apiKey(){return"5a4b2d457ecbef9eb2a71e480b947604"}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),Fa=(()=>{class l extends su.u{constructor(c,E){super(),this.http=c,this.config=E}getCurrentWeather(c,E){const H=this.getParams(c,E);return this.http.get("https://api.openweathermap.org/data/2.5/weather",{params:H}).pipe((0,Ri.U)(ie=>({temperature:ie.main.temp,temperatureMin:ie.main.temp_min,temperatureMax:ie.main.temp_max,city:ie.name,conditions:(0,el.wJ)(ie.weather[0]),date:new Date(ie.dt),zipCode:c,countryCode:E})))}getWeatherForecast(c,E){const H=this.getParams(c,E);return this.http.get("https://api.openweathermap.org/data/2.5/forecast/daily",{params:H}).pipe((0,Ri.U)(ie=>ie.list.map(fe=>({temperature:fe.temp.day,temperatureMin:fe.temp.min,temperatureMax:fe.temp.max,city:ie.city.name,conditions:(0,el.wJ)(fe.weather[0]),date:new Date(1e3*fe.dt),zipCode:c,countryCode:E}))))}getParams(c,E="us"){return new Oe.LE({fromObject:{zip:`${c},${E}`,appid:this.config.apiKey}})}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(Oe.eN),I.LFG(uo))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})(),lt=(()=>{class l{}return l.\u0275fac=function(c){return new(c||l)},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({providers:[Gi],imports:[ue.ez]}),l})();var Qs=D(9884);const ys={todos:[]},na=(l=ys,a)=>{switch(a.type){case"ADD":return{todos:[...l.todos,{index:l.todos.length,text:a.text,done:!1,saved:!1}]};case"TOGGLE":return{todos:l.todos.map((c,E)=>E===a.index?Object.assign(Object.assign({},c),{done:!c.done}):c)};case"REMOVE":return{todos:l.todos.splice(l.todos.findIndex(c=>c.index===a.index),1)};case"SAVED":return{todos:l.todos.map((c,E)=>E===a.index?Object.assign(Object.assign({},c),{saved:!0}):c)};default:return l}};var Ea=D(457),os=D(5577),ka=D(9468);let Bo=(()=>{class l{constructor(){var c;this.recordTimeoutMs=500,this.localStorageKey="__lastActive",this.events=["keydown","click","wheel","mousemove"];const E=null!==(c=this.getLastActiveFromLocalStorage())&&void 0!==c?c:new Date;this.lastActive=new bi.X(E),this.lastActive$=this.lastActive.asObservable()}setUp(){(0,Ea.D)(this.events).pipe((0,os.z)(c=>(0,ln.R)(document,c)),(0,ka.p)(this.recordTimeoutMs)).subscribe(c=>this.recordLastActiveDate()),(0,ln.R)(window,"storage").pipe((0,Us.h)(c=>c.storageArea===localStorage&&c.key===this.localStorageKey&&!!c.newValue),(0,Ri.U)(c=>new Date(c.newValue))).subscribe(c=>this.lastActive.next(c))}getLastActiveDate(){return this.lastActive.value}recordLastActiveDate(){var c=new Date;localStorage.setItem(this.localStorageKey,c.toString()),this.lastActive.next(c)}getLastActiveFromLocalStorage(){const c=localStorage.getItem(this.localStorageKey);return c?new Date(c):null}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const ou={provide:I.ip1,multi:!0,deps:[Bo],useFactory:l=>()=>l.setUp()};let ni=1;class tl{constructor(){this.userName="Philip Marlowe"}}let au=(()=>{class l{constructor(c){this.id=ni++,this._userName="Sherlock Holmes",c&&(this._userName=c.userName)}get userName(){return this._userName+(this.id>1?` times ${this.id}`:"")}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(tl,8))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})(),co=(()=>{class l{constructor(c){if(c)throw new Error("CoreModule is already loaded. Import it in the AppModule only")}static forRoot(c){return{ngModule:l,providers:[{provide:tl,useValue:c}]}}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(l,12))},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({providers:[au],imports:[ue.ez]}),l})();var Du=D(5532),Ki=D(5094),ra=D(7369),Ua=D(3550);let Da=(()=>{class l{}return l.\u0275fac=function(c){return new(c||l)},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({providers:[Ua.T],imports:[Ki.Aw.forFeature(ra.UN,ra.Jl)]}),l})();var _o=D(2852),nl=D(8502),xi=D(515),dl=D(576);class ia{constructor(a,c,E){this.kind=a,this.value=c,this.error=E,this.hasValue="N"===a}observe(a){return b(this,a)}do(a,c,E){const{kind:S,value:H,error:ie}=this;return"N"===S?null==a?void 0:a(H):"E"===S?null==c?void 0:c(ie):null==E?void 0:E()}accept(a,c,E){var S;return(0,dl.m)(null===(S=a)||void 0===S?void 0:S.next)?this.observe(a):this.do(a,c,E)}toObservable(){const{kind:a,value:c,error:E}=this,S="N"===a?(0,en.of)(c):"E"===a?(0,va._)(()=>E):"C"===a?xi.E:0;if(!S)throw new TypeError(`Unexpected notification kind ${a}`);return S}static createNext(a){return new ia("N",a)}static createError(a){return new ia("E",void 0,a)}static createComplete(){return ia.completeNotification}}function b(l,a){var c,E,S;const{kind:H,value:ie,error:fe}=l;if("string"!=typeof H)throw new TypeError('Invalid notification, missing "kind"');"N"===H?null===(c=a.next)||void 0===c||c.call(a,ie):"E"===H?null===(E=a.error)||void 0===E||E.call(a,fe):null===(S=a.complete)||void 0===S||S.call(a)}ia.completeNotification=new ia("C");var A=D(4482),T=D(5403),j=D(8421);function X(l,a,c,E){return(0,A.e)((S,H)=>{let ie;a&&"function"!=typeof a?({duration:c,element:ie,connector:E}=a):ie=a;const fe=new Map,Me=vn=>{fe.forEach(vn),vn(H)},ze=vn=>Me(Mn=>Mn.error(vn)),Et=new ge(H,vn=>{try{const Mn=l(vn);let cn=fe.get(Mn);if(!cn){fe.set(Mn,cn=E?E():new Zt.x);const mn=function Yt(vn,Mn){const cn=new ot.y(mn=>{Et.activeGroups++;const Ir=Mn.subscribe(mn);return()=>{Ir.unsubscribe(),0==--Et.activeGroups&&Et.teardownAttempted&&Et.unsubscribe()}});return cn.key=vn,cn}(Mn,cn);if(H.next(mn),c){const Ir=new T.Q(cn,()=>{cn.complete(),null==Ir||Ir.unsubscribe()},void 0,void 0,()=>fe.delete(Mn));Et.add((0,j.Xf)(c(mn)).subscribe(Ir))}}cn.next(ie?ie(vn):vn)}catch(Mn){ze(Mn)}},()=>Me(vn=>vn.complete()),ze,()=>fe.clear());S.subscribe(Et)})}class ge extends T.Q{constructor(){super(...arguments),this.activeGroups=0,this.teardownAttempted=!1}unsubscribe(){this.teardownAttempted=!0,0===this.activeGroups&&super.unsubscribe()}}var Ee=D(6129);const Ft={dispatch:!0,useEffectsErrorHandler:!0},un="__@ngrx/effects_create__";function Ht(l,a){const c=l(),E=Object.assign(Object.assign({},Ft),a);return Object.defineProperty(c,un,{value:E}),c}function An(l){return Object.getOwnPropertyNames(l).filter(E=>!(!l[E]||!l[E].hasOwnProperty(un))&&l[E][un].hasOwnProperty("dispatch")).map(E=>Object.assign({propertyName:E},l[E][un]))}function cr(l){return Object.getPrototypeOf(l)}const Lr="__@ngrx/effects__";function Vs(l){return(0,Ki.qC)(hl,cr)(l)}function hl(l){return function Bs(l){return l.constructor.hasOwnProperty(Lr)}(l)?l.constructor[Lr]:[]}function Ol(l,a,c){const E=cr(l).constructor.name,S=function Va(l){return[Vs,An].reduce((c,E)=>c.concat(E(l)),[])}(l).map(({propertyName:H,dispatch:ie,useEffectsErrorHandler:fe})=>{const Me="function"==typeof l[H]?l[H]():l[H],ze=fe?c(Me,a):Me;return!1===ie?ze.pipe((0,nl.l)()):ze.pipe(function N(){return(0,A.e)((l,a)=>{l.subscribe(new T.Q(a,c=>{a.next(ia.createNext(c))},()=>{a.next(ia.createComplete()),a.complete()},c=>{a.next(ia.createError(c)),a.complete()}))})}()).pipe((0,Ri.U)(Yt=>({effect:l[H],notification:Yt,propertyName:H,sourceName:E,sourceInstance:l})))});return(0,Za.T)(...S)}function Ba(l,a,c=10){return l.pipe((0,So.K)(E=>(a&&a.handleError(E),c<=1?l:Ba(l,a,c-1))))}let ja=(()=>{class l extends ot.y{constructor(c){super(),c&&(this.source=c)}lift(c){const E=new l;return E.source=this,E.operator=c,E}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(Ki.Y$))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();function vo(...l){return(0,Us.h)(a=>l.some(c=>"string"==typeof c?c===a.type:c.type===a.type))}const sa=new I.OlP("@ngrx/effects Internal Root Guard"),jo=new I.OlP("@ngrx/effects User Provided Effects"),rl=new I.OlP("@ngrx/effects Internal Root Effects"),jl=new I.OlP("@ngrx/effects Root Effects"),Or=new I.OlP("@ngrx/effects Internal Feature Effects"),Jr=new I.OlP("@ngrx/effects Feature Effects"),oa=new I.OlP("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>Ba}),aa="@ngrx/effects/init";function fl(l){return la(l,"ngrxOnInitEffects")}function la(l,a){return l&&a in l&&"function"==typeof l[a]}(0,Ki.PH)(aa);let ua=(()=>{class l extends Zt.x{constructor(c,E){super(),this.errorHandler=c,this.effectsErrorHandler=E}addEffects(c){this.next(c)}toActions(){return this.pipe(X(cr),(0,os.z)(c=>c.pipe(X(ku))),(0,os.z)(c=>{const E=c.pipe((0,Ee.z)(H=>function Ha(l,a){return c=>{const E=Ol(c,l,a);return function Pl(l){return la(l,"ngrxOnRunEffects")}(c)?c.ngrxOnRunEffects(E):E}}(this.errorHandler,this.effectsErrorHandler)(H)),(0,Ri.U)(H=>(function Yi(l,a){if("N"===l.notification.kind){const c=l.notification.value;!function il(l){return"function"!=typeof l&&l&&l.type&&"string"==typeof l.type}(c)&&a.handleError(new Error(`Effect ${function Hl({propertyName:l,sourceInstance:a,sourceName:c}){const E="function"==typeof a[l];return`"${c}.${String(l)}${E?"()":""}"`}(l)} dispatched an invalid action: ${function Ca(l){try{return JSON.stringify(l)}catch(a){return l}}(c)}`))}}(H,this.errorHandler),H.notification)),(0,Us.h)(H=>"N"===H.kind&&null!=H.value),function Ze(){return(0,A.e)((l,a)=>{l.subscribe(new T.Q(a,c=>b(c,a)))})}()),S=c.pipe((0,oo.q)(1),(0,Us.h)(fl),(0,Ri.U)(H=>H.ngrxOnInitEffects()));return(0,Za.T)(E,S)}))}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(I.qLn),I.LFG(oa))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();function ku(l){return function lc(l){return la(l,"ngrxOnIdentifyEffects")}(l)?l.ngrxOnIdentifyEffects():""}let pl=(()=>{class l{constructor(c,E){this.effectSources=c,this.store=E,this.effectsSubscription=null}get isStarted(){return!!this.effectsSubscription}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(ua),I.LFG(Ki.yh))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),yi=(()=>{class l{constructor(c,E,S,H,ie,fe,Me){this.sources=c,E.start(),H.forEach(ze=>c.addEffects(ze)),S.dispatch({type:aa})}addEffects(c){this.sources.addEffects(c)}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(ua),I.LFG(pl),I.LFG(Ki.yh),I.LFG(jl),I.LFG(Ki.cr,8),I.LFG(Ki.CK,8),I.LFG(sa,8))},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({}),l})(),$a=(()=>{class l{constructor(c,E,S,H){E.forEach(ie=>ie.forEach(fe=>c.addEffects(fe)))}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(yi),I.LFG(Jr),I.LFG(Ki.cr,8),I.LFG(Ki.CK,8))},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({}),l})(),Qi=(()=>{class l{static forFeature(c=[]){return{ngModule:$a,providers:[c,{provide:Or,multi:!0,useValue:c},{provide:jo,multi:!0,useValue:[]},{provide:Jr,multi:!0,useFactory:ci,deps:[I.zs3,Or,jo]}]}}static forRoot(c=[]){return{ngModule:yi,providers:[c,{provide:rl,useValue:[c]},{provide:sa,useFactory:as,deps:[[pl,new I.FiY,new I.tp0],[rl,new I.PiD]]},{provide:jo,multi:!0,useValue:[]},{provide:jl,useFactory:ci,deps:[I.zs3,rl,jo]}]}}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({}),l})();function ci(l,a,c){const E=[];for(const S of a)E.push(...S);for(const S of c)E.push(...S);return function ca(l,a){return a.map(c=>l.get(c))}(l,E)}function as(l,a){if((1!==a.length||0!==a[0].length)&&l)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}var ri=D(4579);let uu=(()=>{class l{loadCounter(){return(0,en.of)(1999)}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),$l=(()=>{class l{constructor(c,E){this.actions$=c,this.counterService=E,this.loadData$=Ht(()=>this.actions$.pipe(vo(ri.zK),(0,os.z)(()=>this.counterService.loadCounter().pipe((0,Ri.U)(S=>ri.Zf({newValue:S}))))))}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(ja),I.LFG(uu))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})();var sl=D(5054);let Eo=(()=>{class l{}return l.\u0275fac=function(c){return new(c||l)},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({providers:[sl.e],imports:[Ki.Aw.forFeature(_o.UN,_o.jX),Qi.forFeature([$l])]}),l})();var Ho=D(3880),gl=D(2542);let Gl=(()=>{class l{constructor(c,E){this.actions$=c,this.http=E,this.loadData$=Ht(()=>this.actions$.pipe(vo(gl.mu),(0,xa.w)(()=>this.http.get("https://jsonplaceholder.typicode.com/posts").pipe((0,Ri.U)(S=>gl.F3({payload:S})),(0,So.K)(S=>(0,en.of)(gl.WU({payload:S})))))))}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(ja),I.LFG(Oe.eN))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})();var cu=D(9610);let vs=(()=>{class l{}return l.\u0275fac=function(c){return new(c||l)},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({providers:[cu.L],imports:[Ki.Aw.forFeature(Ho.UN,Ho.B5),Qi.forFeature([Gl])]}),l})();var Wl=D(173),ml=D(817);let Kl=(()=>{class l{constructor(c){this.actions$=c,this.getUser$=Ht(()=>this.actions$.pipe(vo(ml.PR),(0,os.z)(()=>(0,en.of)({userId:"1",name:"trilok",lastName:"singh",email:"trilok@gmaill.com"}).pipe((0,Ri.U)(E=>ml.Ni({user:E})),(0,So.K)(E=>(console.error("An error occurred while getting user information.",E.message),(0,en.of)(ml.N2({error:"Unable to retrieve user information."}))))))))}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(ja))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})();var Iu=D(2842);let yl=(()=>{class l{}return l.\u0275fac=function(c){return new(c||l)},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({providers:[Iu.p],imports:[Ki.Aw.forFeature(Wl.U,Wl.M),Qi.forFeature([Kl])]}),l})();var _l=D(5650),wa=D(4964),wi=D(2766),du=D(7403);let zl=(()=>{class l{set(c,E){try{localStorage.setItem(c,JSON.stringify(E))}catch(S){console.error("Error saving to localStorage",S)}}get(c){try{return JSON.parse(localStorage.getItem(c))}catch(E){return console.error("Error getting data from localStorage",E),null}}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),Yl=(()=>{class l{constructor(c,E,S,H){this.actions$=c,this.registerService=E,this.persistenceService=S,this.router=H,this.register$=Ht(()=>this.actions$.pipe(vo(wi._0),(0,xa.w)(({request:ie})=>this.registerService.register(ie).pipe((0,Ri.U)(fe=>(this.persistenceService.set("accessToken1",fe.token),(0,wi.Pw)({currentUser:fe}))),(0,So.K)(fe=>(console.log(fe),(0,en.of)((0,wi.zH)({errors:fe.error.errors})))))))),this.redirectAfterSubmit$=Ht(()=>this.actions$.pipe(vo(wi.Pw),(0,$i.b)(()=>{this.router.navigateByUrl("/")})),{dispatch:!1})}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(ja),I.LFG(du.a),I.LFG(zl),I.LFG(B.F0))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})(),vl=(()=>{class l{}return l.\u0275fac=function(c){return new(c||l)},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({providers:[wa.q],imports:[Ki.Aw.forFeature(_l.UN,_l.xw),Qi.forFeature([Yl])]}),l})();var ol=D(8713),Do=D(1944),Ql=D(8372),hu=D(8830);let El=(()=>{class l{constructor(c){this.http=c,this.url="http://localhost:4000/articles"}getAll(){return this.http.get("http://localhost:4000/fruits")}getAllArticles(){return this.http.get(this.url)}createArticle(c){return this.http.post(this.url,c)}getArticleById(c){return this.http.get(this.url+"/"+c)}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(hu.O))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})(),fu=(()=>{class l{constructor(c,E){this.actions$=c,this.fruitsService=E,this.loadAllArticles$=Ht(()=>this.actions$.pipe(vo(Do.GO),(0,xa.w)(()=>this.fruitsService.getAllArticles().pipe((0,Ri.U)(S=>Do.m0({payload:S})))))),this.createArticle$=Ht(()=>this.actions$.pipe(vo(Do.$f),(0,Ri.U)(S=>S.payload),(0,os.z)(S=>this.fruitsService.createArticle(S).pipe((0,Ri.U)(H=>Do.$s({payload:H})),(0,So.K)(H=>(0,en.of)(Do.$0({payload:H}))))))),this.searchArticleById$=Ht(()=>this.actions$.pipe(vo(Do.HD),(0,Ql.b)(500),(0,Ri.U)(S=>S.payload),(0,xa.w)(S=>this.fruitsService.getArticleById(S).pipe((0,Ri.U)(H=>Do.n3({payload:H})))))),this.loadProducts$=Ht(()=>this.actions$.pipe(vo(Do.hS),(0,os.z)(()=>this.fruitsService.getAll().pipe((0,Ri.U)(S=>Do.Xt({payload:S}))))))}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(ja),I.LFG(El))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})();var wu=D(9565);let Uu=(()=>{class l{}return l.\u0275fac=function(c){return new(c||l)},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({imports:[Ki.Aw.forRoot(ol.ll),Qi.forRoot([fu]),Da,Eo,vs,yl,vl,wu.FT.instrument({maxAge:25,logOnly:!Kt.N.production})]}),l})();var Tu=D(3483);let Vu=(()=>{class l{info(c){console.info(`Local Logger Service:: ${c}`)}log(c){console.log(`Local Logger Service:: ${c}`)}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const da="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJDb2RlIFNob3RzIFdpdGggUHJvZmFuaXMiLCJpYXQiOjE2MjQyNzU1MjUsImV4cCI6MTY1NTgxMTUyNSwiYXVkIjoiQ29kZSBTaG90IFdpdGggUHJvZmFuaXMgU3Vic2NyaWJlcnMiLCJzdWIiOiJDb2RlIFNob3QgV2l0aCBQcm9mYW5pcyBTdWJzY3JpYmVycyIsIlVzZXJuYW1lIjoicHJvZmFuaXMiLCJGaXJzdE5hbWUiOiJGYW5pcyIsIlJvbGUiOlsiQWRtaW4iLCJTdXBlciBBZG1pbiJdfQ.mT1UD7DXTWRm4etsW9BuWcg5bj2CaeAQVXaoEOIwB7o";let Ga=(()=>{class l{constructor(){}intercept(c,E){const{url:S,method:H,headers:ie}=c;return S.endsWith("login")&&"POST"===H?function Me(){return(0,en.of)(new Oe.Zn({status:200,body:{id:"1",username:"profanis",token:da}}))}():S.endsWith("products")&&"GET"===H?function ze(){if(!function fe(){return ie.get("authorization")===da}())return(0,va._)({status:401,error:{message:"Unauthorized"}});const Et=[...new Array(20).keys()].map(Yt=>({id:Yt,name:`Product ${Yt}`,weight:30,symbol:"ngf"}));return(0,en.of)(new Oe.Zn({status:200,body:Et}))}():E.handle(c)}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})();const Dl={provide:Oe.TP,useClass:Ga,multi:!0};D(6344);let pu=(()=>{class l{}return l.\u0275fac=function(c){return new(c||l)},l.\u0275mod=I.oAB({type:l}),l.\u0275inj=I.cJS({}),l})();var Ka=D(4141);let gu=(()=>{class l{constructor(c){this.realtimeDbService=c}handleError(c){console.log(c),Kt.N.production&&this.realtimeDbService.post("2023/logging.json",c).subscribe()}handleError1(c){c instanceof Oe.UA?c.error instanceof ErrorEvent?console.error("Error Event"):console.log(`error status : ${c.status} ${c.statusText}`):console.error("some thing else happened")}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(Ka.g))},l.\u0275prov=I.Yz7({token:l,factory:l.\u0275fac}),l})();const Cl={provide:I.qLn,useClass:gu};let O=(()=>{class l{constructor(c){this.injector=c}}return l.\u0275fac=function(c){return new(c||l)(I.LFG(I.zs3))},l.\u0275mod=I.oAB({type:l,bootstrap:[Qe]}),l.\u0275inj=I.cJS({providers:[Gi,ue.uU,{provide:su.u,useClass:Fa},Oe.JF,{provide:Qs.y,useValue:new Qs.y(na)},ou,{provide:Tu.b,useClass:Vu},Dl,Cl],imports:[g.b2,Ii,Oe.JF,Oe.Ed,Xa.m,Ue,ss,Ai.register("ngsw-worker.js",{enabled:Kt.N.production,registrationStrategy:"registerWhenStable:30000"}),Uu,lt,co.forRoot({userName:"Trilok Singh"}),Du.G2.initializeApp(Kt.N.firebaseConfig),Du.G2.initialize({activityInRouter:!0,activityOfAnonymousUser:!0,activityInHttp:!0}),pu,Ii]}),l})();Kt.N.production&&(0,I.G48)(),g.q6().bootstrapModule(O).catch(l=>console.error(l))},1135:(_e,ne,D)=>{D.d(ne,{X:()=>I});var g=D(7579);class I extends g.x{constructor(B){super(),this._value=B}get value(){return this.getValue()}_subscribe(B){const Y=super._subscribe(B);return!Y.closed&&B.next(this._value),Y}getValue(){const{hasError:B,thrownError:Y,_value:re}=this;if(B)throw Y;return this._throwIfClosed(),re}next(B){super.next(this._value=B)}}},9751:(_e,ne,D)=>{D.d(ne,{y:()=>z});var g=D(930),I=D(727),J=D(8822),B=D(9635),Y=D(2416),re=D(576),ee=D(2806);let z=(()=>{class ue{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const ve=new ue;return ve.source=this,ve.operator=Ge,ve}subscribe(Ge,ve,Be){const He=function le(ue){return ue&&ue instanceof g.Lv||function Q(ue){return ue&&(0,re.m)(ue.next)&&(0,re.m)(ue.error)&&(0,re.m)(ue.complete)}(ue)&&(0,I.Nn)(ue)}(Ge)?Ge:new g.Hp(Ge,ve,Be);return(0,ee.x)(()=>{const{operator:xe,source:dt}=this;He.add(xe?xe.call(He,dt):dt?this._subscribe(He):this._trySubscribe(He))}),He}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(ve){Ge.error(ve)}}forEach(Ge,ve){return new(ve=oe(ve))((Be,He)=>{const xe=new g.Hp({next:dt=>{try{Ge(dt)}catch(mt){He(mt),xe.unsubscribe()}},error:He,complete:Be});this.subscribe(xe)})}_subscribe(Ge){var ve;return null===(ve=this.source)||void 0===ve?void 0:ve.subscribe(Ge)}[J.L](){return this}pipe(...Ge){return(0,B.U)(Ge)(this)}toPromise(Ge){return new(Ge=oe(Ge))((ve,Be)=>{let He;this.subscribe(xe=>He=xe,xe=>Be(xe),()=>ve(He))})}}return ue.create=Re=>new ue(Re),ue})();function oe(ue){var Re;return null!==(Re=null!=ue?ue:Y.v.Promise)&&void 0!==Re?Re:Promise}},4707:(_e,ne,D)=>{D.d(ne,{t:()=>J});var g=D(7579),I=D(6063);class J extends g.x{constructor(Y=1/0,re=1/0,ee=I.l){super(),this._bufferSize=Y,this._windowTime=re,this._timestampProvider=ee,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=re===1/0,this._bufferSize=Math.max(1,Y),this._windowTime=Math.max(1,re)}next(Y){const{isStopped:re,_buffer:ee,_infiniteTimeWindow:z,_timestampProvider:oe,_windowTime:Q}=this;re||(ee.push(Y),!z&&ee.push(oe.now()+Q)),this._trimBuffer(),super.next(Y)}_subscribe(Y){this._throwIfClosed(),this._trimBuffer();const re=this._innerSubscribe(Y),{_infiniteTimeWindow:ee,_buffer:z}=this,oe=z.slice();for(let Q=0;Q<oe.length&&!Y.closed;Q+=ee?1:2)Y.next(oe[Q]);return this._checkFinalizedStatuses(Y),re}_trimBuffer(){const{_bufferSize:Y,_timestampProvider:re,_buffer:ee,_infiniteTimeWindow:z}=this,oe=(z?1:2)*Y;if(Y<1/0&&oe<ee.length&&ee.splice(0,ee.length-oe),!z){const Q=re.now();let le=0;for(let ue=1;ue<ee.length&&ee[ue]<=Q;ue+=2)le=ue;le&&ee.splice(0,le+1)}}}},7579:(_e,ne,D)=>{D.d(ne,{x:()=>ee});var g=D(9751),I=D(727);const B=(0,D(3888).d)(oe=>function(){oe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Y=D(8737),re=D(2806);let ee=(()=>{class oe extends g.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(le){const ue=new z(this,this);return ue.operator=le,ue}_throwIfClosed(){if(this.closed)throw new B}next(le){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ue=this.observers.slice();for(const Re of ue)Re.next(le)}})}error(le){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=le;const{observers:ue}=this;for(;ue.length;)ue.shift().error(le)}})}complete(){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:le}=this;for(;le.length;)le.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var le;return(null===(le=this.observers)||void 0===le?void 0:le.length)>0}_trySubscribe(le){return this._throwIfClosed(),super._trySubscribe(le)}_subscribe(le){return this._throwIfClosed(),this._checkFinalizedStatuses(le),this._innerSubscribe(le)}_innerSubscribe(le){const{hasError:ue,isStopped:Re,observers:Ge}=this;return ue||Re?I.Lc:(Ge.push(le),new I.w0(()=>(0,Y.P)(Ge,le)))}_checkFinalizedStatuses(le){const{hasError:ue,thrownError:Re,isStopped:Ge}=this;ue?le.error(Re):Ge&&le.complete()}asObservable(){const le=new g.y;return le.source=this,le}}return oe.create=(Q,le)=>new z(Q,le),oe})();class z extends ee{constructor(Q,le){super(),this.destination=Q,this.source=le}next(Q){var le,ue;null===(ue=null===(le=this.destination)||void 0===le?void 0:le.next)||void 0===ue||ue.call(le,Q)}error(Q){var le,ue;null===(ue=null===(le=this.destination)||void 0===le?void 0:le.error)||void 0===ue||ue.call(le,Q)}complete(){var Q,le;null===(le=null===(Q=this.destination)||void 0===Q?void 0:Q.complete)||void 0===le||le.call(Q)}_subscribe(Q){var le,ue;return null!==(ue=null===(le=this.source)||void 0===le?void 0:le.subscribe(Q))&&void 0!==ue?ue:I.Lc}}},930:(_e,ne,D)=>{D.d(ne,{Hp:()=>Re,Lv:()=>ue});var g=D(576),I=D(727),J=D(2416),B=D(7849),Y=D(5032);const re=oe("C",void 0,void 0);function oe(xe,dt,mt){return{kind:xe,value:dt,error:mt}}var Q=D(3410),le=D(2806);class ue extends I.w0{constructor(dt){super(),this.isStopped=!1,dt?(this.destination=dt,(0,I.Nn)(dt)&&dt.add(this)):this.destination=He}static create(dt,mt,Ue){return new Re(dt,mt,Ue)}next(dt){this.isStopped?Be(function z(xe){return oe("N",xe,void 0)}(dt),this):this._next(dt)}error(dt){this.isStopped?Be(function ee(xe){return oe("E",void 0,xe)}(dt),this):(this.isStopped=!0,this._error(dt))}complete(){this.isStopped?Be(re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(dt){this.destination.next(dt)}_error(dt){try{this.destination.error(dt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Re extends ue{constructor(dt,mt,Ue){let Oe;if(super(),(0,g.m)(dt))Oe=dt;else if(dt){let yt;({next:Oe,error:mt,complete:Ue}=dt),this&&J.v.useDeprecatedNextContext?(yt=Object.create(dt),yt.unsubscribe=()=>this.unsubscribe()):yt=dt,Oe=null==Oe?void 0:Oe.bind(yt),mt=null==mt?void 0:mt.bind(yt),Ue=null==Ue?void 0:Ue.bind(yt)}this.destination={next:Oe?Ge(Oe):Y.Z,error:Ge(null!=mt?mt:ve),complete:Ue?Ge(Ue):Y.Z}}}function Ge(xe,dt){return(...mt)=>{try{xe(...mt)}catch(Ue){J.v.useDeprecatedSynchronousErrorHandling?(0,le.O)(Ue):(0,B.h)(Ue)}}}function ve(xe){throw xe}function Be(xe,dt){const{onStoppedNotification:mt}=J.v;mt&&Q.z.setTimeout(()=>mt(xe,dt))}const He={closed:!0,next:Y.Z,error:ve,complete:Y.Z}},727:(_e,ne,D)=>{D.d(ne,{Lc:()=>re,w0:()=>Y,Nn:()=>ee});var g=D(576);const J=(0,D(3888).d)(oe=>function(le){oe(this),this.message=le?`${le.length} errors occurred during unsubscription:\n${le.map((ue,Re)=>`${Re+1}) ${ue.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=le});var B=D(8737);class Y{constructor(Q){this.initialTeardown=Q,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let Q;if(!this.closed){this.closed=!0;const{_parentage:le}=this;if(le)if(this._parentage=null,Array.isArray(le))for(const Ge of le)Ge.remove(this);else le.remove(this);const{initialTeardown:ue}=this;if((0,g.m)(ue))try{ue()}catch(Ge){Q=Ge instanceof J?Ge.errors:[Ge]}const{_teardowns:Re}=this;if(Re){this._teardowns=null;for(const Ge of Re)try{z(Ge)}catch(ve){Q=null!=Q?Q:[],ve instanceof J?Q=[...Q,...ve.errors]:Q.push(ve)}}if(Q)throw new J(Q)}}add(Q){var le;if(Q&&Q!==this)if(this.closed)z(Q);else{if(Q instanceof Y){if(Q.closed||Q._hasParent(this))return;Q._addParent(this)}(this._teardowns=null!==(le=this._teardowns)&&void 0!==le?le:[]).push(Q)}}_hasParent(Q){const{_parentage:le}=this;return le===Q||Array.isArray(le)&&le.includes(Q)}_addParent(Q){const{_parentage:le}=this;this._parentage=Array.isArray(le)?(le.push(Q),le):le?[le,Q]:Q}_removeParent(Q){const{_parentage:le}=this;le===Q?this._parentage=null:Array.isArray(le)&&(0,B.P)(le,Q)}remove(Q){const{_teardowns:le}=this;le&&(0,B.P)(le,Q),Q instanceof Y&&Q._removeParent(this)}}Y.EMPTY=(()=>{const oe=new Y;return oe.closed=!0,oe})();const re=Y.EMPTY;function ee(oe){return oe instanceof Y||oe&&"closed"in oe&&(0,g.m)(oe.remove)&&(0,g.m)(oe.add)&&(0,g.m)(oe.unsubscribe)}function z(oe){(0,g.m)(oe)?oe():oe.unsubscribe()}},2416:(_e,ne,D)=>{D.d(ne,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(_e,ne,D)=>{D.d(ne,{c:()=>re});var g=D(9751),I=D(727),J=D(8343),B=D(5403),Y=D(4482);class re extends g.y{constructor(z,oe){super(),this.source=z,this.subjectFactory=oe,this._subject=null,this._refCount=0,this._connection=null,(0,Y.A)(z)&&(this.lift=z.lift)}_subscribe(z){return this.getSubject().subscribe(z)}getSubject(){const z=this._subject;return(!z||z.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:z}=this;this._subject=this._connection=null,null==z||z.unsubscribe()}connect(){let z=this._connection;if(!z){z=this._connection=new I.w0;const oe=this.getSubject();z.add(this.source.subscribe(new B.Q(oe,void 0,()=>{this._teardown(),oe.complete()},Q=>{this._teardown(),oe.error(Q)},()=>this._teardown()))),z.closed&&(this._connection=null,z=I.w0.EMPTY)}return z}refCount(){return(0,J.x)()(this)}}},9841:(_e,ne,D)=>{D.d(ne,{a:()=>Q});var g=D(9751),I=D(4742),J=D(457),B=D(4671),Y=D(3268),re=D(3269),ee=D(1810),z=D(5403),oe=D(9672);function Q(...Re){const Ge=(0,re.yG)(Re),ve=(0,re.jO)(Re),{args:Be,keys:He}=(0,I.D)(Re);if(0===Be.length)return(0,J.D)([],Ge);const xe=new g.y(function le(Re,Ge,ve=B.y){return Be=>{ue(Ge,()=>{const{length:He}=Re,xe=new Array(He);let dt=He,mt=He;for(let Ue=0;Ue<He;Ue++)ue(Ge,()=>{const Oe=(0,J.D)(Re[Ue],Ge);let yt=!1;Oe.subscribe(new z.Q(Be,It=>{xe[Ue]=It,yt||(yt=!0,mt--),mt||Be.next(ve(xe.slice()))},()=>{--dt||Be.complete()}))},Be)},Be)}}(Be,Ge,He?dt=>(0,ee.n)(He,dt):B.y));return ve?xe.pipe((0,Y.Z)(ve)):xe}function ue(Re,Ge,ve){Re?(0,oe.f)(ve,Re,Ge):Ge()}},7272:(_e,ne,D)=>{D.d(ne,{z:()=>Y});var g=D(8189),J=D(3269),B=D(457);function Y(...re){return function I(){return(0,g.J)(1)}()((0,B.D)(re,(0,J.yG)(re)))}},9770:(_e,ne,D)=>{D.d(ne,{P:()=>J});var g=D(9751),I=D(8421);function J(B){return new g.y(Y=>{(0,I.Xf)(B()).subscribe(Y)})}},515:(_e,ne,D)=>{D.d(ne,{E:()=>I,c:()=>J});var g=D(9751);const I=new g.y(Y=>Y.complete());function J(Y){return Y?function B(Y){return new g.y(re=>Y.schedule(()=>re.complete()))}(Y):I}},4128:(_e,ne,D)=>{D.d(ne,{D:()=>z});var g=D(9751),I=D(4742),J=D(8421),B=D(3269),Y=D(5403),re=D(3268),ee=D(1810);function z(...oe){const Q=(0,B.jO)(oe),{args:le,keys:ue}=(0,I.D)(oe),Re=new g.y(Ge=>{const{length:ve}=le;if(!ve)return void Ge.complete();const Be=new Array(ve);let He=ve,xe=ve;for(let dt=0;dt<ve;dt++){let mt=!1;(0,J.Xf)(le[dt]).subscribe(new Y.Q(Ge,Ue=>{mt||(mt=!0,xe--),Be[dt]=Ue},()=>He--,void 0,()=>{(!He||!mt)&&(xe||Ge.next(ue?(0,ee.n)(ue,Be):Be),Ge.complete())}))}});return Q?Re.pipe((0,re.Z)(Q)):Re}},457:(_e,ne,D)=>{D.d(ne,{D:()=>yt});var g=D(8421),I=D(5363),J=D(4482);function B(It,Je=0){return(0,J.e)((Nt,wt)=>{wt.add(It.schedule(()=>Nt.subscribe(wt),Je))})}var ee=D(9751),oe=D(2202),Q=D(576),le=D(9672);function Re(It,Je){if(!It)throw new Error("Iterable cannot be null");return new ee.y(Nt=>{(0,le.f)(Nt,Je,()=>{const wt=It[Symbol.asyncIterator]();(0,le.f)(Nt,Je,()=>{wt.next().then(Qe=>{Qe.done?Nt.complete():Nt.next(Qe.value)})},0,!0)})})}var Ge=D(3670),ve=D(8239),Be=D(1144),He=D(6495),xe=D(2206),dt=D(4532),mt=D(3260);function yt(It,Je){return Je?function Oe(It,Je){if(null!=It){if((0,Ge.c)(It))return function Y(It,Je){return(0,g.Xf)(It).pipe(B(Je),(0,I.Q)(Je))}(It,Je);if((0,Be.z)(It))return function z(It,Je){return new ee.y(Nt=>{let wt=0;return Je.schedule(function(){wt===It.length?Nt.complete():(Nt.next(It[wt++]),Nt.closed||this.schedule())})})}(It,Je);if((0,ve.t)(It))return function re(It,Je){return(0,g.Xf)(It).pipe(B(Je),(0,I.Q)(Je))}(It,Je);if((0,xe.D)(It))return Re(It,Je);if((0,He.T)(It))return function ue(It,Je){return new ee.y(Nt=>{let wt;return(0,le.f)(Nt,Je,()=>{wt=It[oe.h](),(0,le.f)(Nt,Je,()=>{let Qe,Ye;try{({value:Qe,done:Ye}=wt.next())}catch(ut){return void Nt.error(ut)}Ye?Nt.complete():Nt.next(Qe)},0,!0)}),()=>(0,Q.m)(null==wt?void 0:wt.return)&&wt.return()})}(It,Je);if((0,mt.L)(It))return function Ue(It,Je){return Re((0,mt.Q)(It),Je)}(It,Je)}throw(0,dt.z)(It)}(It,Je):(0,g.Xf)(It)}},4968:(_e,ne,D)=>{D.d(ne,{R:()=>Q});var g=D(8421),I=D(9751),J=D(5577),B=D(1144),Y=D(576),re=D(3268);const ee=["addListener","removeListener"],z=["addEventListener","removeEventListener"],oe=["on","off"];function Q(ve,Be,He,xe){if((0,Y.m)(He)&&(xe=He,He=void 0),xe)return Q(ve,Be,He).pipe((0,re.Z)(xe));const[dt,mt]=function Ge(ve){return(0,Y.m)(ve.addEventListener)&&(0,Y.m)(ve.removeEventListener)}(ve)?z.map(Ue=>Oe=>ve[Ue](Be,Oe,He)):function ue(ve){return(0,Y.m)(ve.addListener)&&(0,Y.m)(ve.removeListener)}(ve)?ee.map(le(ve,Be)):function Re(ve){return(0,Y.m)(ve.on)&&(0,Y.m)(ve.off)}(ve)?oe.map(le(ve,Be)):[];if(!dt&&(0,B.z)(ve))return(0,J.z)(Ue=>Q(Ue,Be,He))((0,g.Xf)(ve));if(!dt)throw new TypeError("Invalid event target");return new I.y(Ue=>{const Oe=(...yt)=>Ue.next(1<yt.length?yt:yt[0]);return dt(Oe),()=>mt(Oe)})}function le(ve,Be){return He=>xe=>ve[He](Be,xe)}},8421:(_e,ne,D)=>{D.d(ne,{Xf:()=>Re});var g=D(655),I=D(1144),J=D(8239),B=D(9751),Y=D(3670),re=D(2206),ee=D(4532),z=D(6495),oe=D(3260),Q=D(576),le=D(7849),ue=D(8822);function Re(Ue){if(Ue instanceof B.y)return Ue;if(null!=Ue){if((0,Y.c)(Ue))return function Ge(Ue){return new B.y(Oe=>{const yt=Ue[ue.L]();if((0,Q.m)(yt.subscribe))return yt.subscribe(Oe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ue);if((0,I.z)(Ue))return function ve(Ue){return new B.y(Oe=>{for(let yt=0;yt<Ue.length&&!Oe.closed;yt++)Oe.next(Ue[yt]);Oe.complete()})}(Ue);if((0,J.t)(Ue))return function Be(Ue){return new B.y(Oe=>{Ue.then(yt=>{Oe.closed||(Oe.next(yt),Oe.complete())},yt=>Oe.error(yt)).then(null,le.h)})}(Ue);if((0,re.D)(Ue))return xe(Ue);if((0,z.T)(Ue))return function He(Ue){return new B.y(Oe=>{for(const yt of Ue)if(Oe.next(yt),Oe.closed)return;Oe.complete()})}(Ue);if((0,oe.L)(Ue))return function dt(Ue){return xe((0,oe.Q)(Ue))}(Ue)}throw(0,ee.z)(Ue)}function xe(Ue){return new B.y(Oe=>{(function mt(Ue,Oe){var yt,It,Je,Nt;return(0,g.mG)(this,void 0,void 0,function*(){try{for(yt=(0,g.KL)(Ue);!(It=yield yt.next()).done;)if(Oe.next(It.value),Oe.closed)return}catch(wt){Je={error:wt}}finally{try{It&&!It.done&&(Nt=yt.return)&&(yield Nt.call(yt))}finally{if(Je)throw Je.error}}Oe.complete()})})(Ue,Oe).catch(yt=>Oe.error(yt))})}},6451:(_e,ne,D)=>{D.d(ne,{T:()=>re});var g=D(8189),I=D(8421),J=D(515),B=D(3269),Y=D(457);function re(...ee){const z=(0,B.yG)(ee),oe=(0,B._6)(ee,1/0),Q=ee;return Q.length?1===Q.length?(0,I.Xf)(Q[0]):(0,g.J)(oe)((0,Y.D)(Q,z)):J.E}},9646:(_e,ne,D)=>{D.d(ne,{of:()=>J});var g=D(3269),I=D(457);function J(...B){const Y=(0,g.yG)(B);return(0,I.D)(B,Y)}},2843:(_e,ne,D)=>{D.d(ne,{_:()=>J});var g=D(9751),I=D(576);function J(B,Y){const re=(0,I.m)(B)?B:()=>B,ee=z=>z.error(re());return new g.y(Y?z=>Y.schedule(ee,0,z):ee)}},2805:(_e,ne,D)=>{D.d(ne,{H:()=>Y});var g=D(9751),I=D(4986),J=D(3532),B=D(1165);function Y(re=0,ee,z=I.P){let oe=-1;return null!=ee&&((0,J.K)(ee)?z=ee:oe=ee),new g.y(Q=>{let le=(0,B.q)(re)?+re-z.now():re;le<0&&(le=0);let ue=0;return z.schedule(function(){Q.closed||(Q.next(ue++),0<=oe?this.schedule(void 0,oe):Q.complete())},le)})}},5403:(_e,ne,D)=>{D.d(ne,{Q:()=>I});var g=D(930);class I extends g.Lv{constructor(B,Y,re,ee,z){super(B),this.onFinalize=z,this._next=Y?function(oe){try{Y(oe)}catch(Q){B.error(Q)}}:super._next,this._error=ee?function(oe){try{ee(oe)}catch(Q){B.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(oe){B.error(oe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var B;const{closed:Y}=this;super.unsubscribe(),!Y&&(null===(B=this.onFinalize)||void 0===B||B.call(this))}}},262:(_e,ne,D)=>{D.d(ne,{K:()=>B});var g=D(8421),I=D(5403),J=D(4482);function B(Y){return(0,J.e)((re,ee)=>{let Q,z=null,oe=!1;z=re.subscribe(new I.Q(ee,void 0,void 0,le=>{Q=(0,g.Xf)(Y(le,B(Y)(re))),z?(z.unsubscribe(),z=null,Q.subscribe(ee)):oe=!0})),oe&&(z.unsubscribe(),z=null,Q.subscribe(ee))})}},4351:(_e,ne,D)=>{D.d(ne,{b:()=>J});var g=D(5577),I=D(576);function J(B,Y){return(0,I.m)(Y)?(0,g.z)(B,Y,1):(0,g.z)(B,1)}},8372:(_e,ne,D)=>{D.d(ne,{b:()=>B});var g=D(4986),I=D(4482),J=D(5403);function B(Y,re=g.z){return(0,I.e)((ee,z)=>{let oe=null,Q=null,le=null;const ue=()=>{if(oe){oe.unsubscribe(),oe=null;const Ge=Q;Q=null,z.next(Ge)}};function Re(){const Ge=le+Y,ve=re.now();if(ve<Ge)return oe=this.schedule(void 0,Ge-ve),void z.add(oe);ue()}ee.subscribe(new J.Q(z,Ge=>{Q=Ge,le=re.now(),oe||(oe=re.schedule(Re,Y),z.add(oe))},()=>{ue(),z.complete()},void 0,()=>{Q=oe=null}))})}},6590:(_e,ne,D)=>{D.d(ne,{d:()=>J});var g=D(4482),I=D(5403);function J(B){return(0,g.e)((Y,re)=>{let ee=!1;Y.subscribe(new I.Q(re,z=>{ee=!0,re.next(z)},()=>{ee||re.next(B),re.complete()}))})}},4086:(_e,ne,D)=>{D.d(ne,{g:()=>oe});var g=D(4986),I=D(7272),J=D(5698),B=D(8502),Y=D(9718),re=D(5577);function ee(Q,le){return le?ue=>(0,I.z)(le.pipe((0,J.q)(1),(0,B.l)()),ue.pipe(ee(Q))):(0,re.z)((ue,Re)=>Q(ue,Re).pipe((0,J.q)(1),(0,Y.h)(ue)))}var z=D(2805);function oe(Q,le=g.z){const ue=(0,z.H)(Q,le);return ee(()=>ue)}},1884:(_e,ne,D)=>{D.d(ne,{x:()=>B});var g=D(4671),I=D(4482),J=D(5403);function B(re,ee=g.y){return re=null!=re?re:Y,(0,I.e)((z,oe)=>{let Q,le=!0;z.subscribe(new J.Q(oe,ue=>{const Re=ee(ue);(le||!re(Q,Re))&&(le=!1,Q=Re,oe.next(ue))}))})}function Y(re,ee){return re===ee}},6129:(_e,ne,D)=>{D.d(ne,{z:()=>Y});var g=D(4004),I=D(8421),J=D(4482),B=D(5403);function Y(re,ee){return ee?z=>z.pipe(Y((oe,Q)=>(0,I.Xf)(re(oe,Q)).pipe((0,g.U)((le,ue)=>ee(oe,le,Q,ue))))):(0,J.e)((z,oe)=>{let Q=0,le=null,ue=!1;z.subscribe(new B.Q(oe,Re=>{le||(le=new B.Q(oe,void 0,()=>{le=null,ue&&oe.complete()}),(0,I.Xf)(re(Re,Q++)).subscribe(le))},()=>{ue=!0,!le&&oe.complete()}))})}},9300:(_e,ne,D)=>{D.d(ne,{h:()=>J});var g=D(4482),I=D(5403);function J(B,Y){return(0,g.e)((re,ee)=>{let z=0;re.subscribe(new I.Q(ee,oe=>B.call(Y,oe,z++)&&ee.next(oe)))})}},8746:(_e,ne,D)=>{D.d(ne,{x:()=>I});var g=D(4482);function I(J){return(0,g.e)((B,Y)=>{try{B.subscribe(Y)}finally{Y.add(J)}})}},590:(_e,ne,D)=>{D.d(ne,{P:()=>ee});var g=D(6805),I=D(9300),J=D(5698),B=D(6590),Y=D(8068),re=D(4671);function ee(z,oe){const Q=arguments.length>=2;return le=>le.pipe(z?(0,I.h)((ue,Re)=>z(ue,Re,le)):re.y,(0,J.q)(1),Q?(0,B.d)(oe):(0,Y.T)(()=>new g.K))}},8502:(_e,ne,D)=>{D.d(ne,{l:()=>B});var g=D(4482),I=D(5403),J=D(5032);function B(){return(0,g.e)((Y,re)=>{Y.subscribe(new I.Q(re,J.Z))})}},3103:(_e,ne,D)=>{D.d(ne,{Z:()=>ee});var g=D(6805),I=D(9300),J=D(2035),B=D(8068),Y=D(6590),re=D(4671);function ee(z,oe){const Q=arguments.length>=2;return le=>le.pipe(z?(0,I.h)((ue,Re)=>z(ue,Re,le)):re.y,(0,J.h)(1),Q?(0,Y.d)(oe):(0,B.T)(()=>new g.K))}},4004:(_e,ne,D)=>{D.d(ne,{U:()=>J});var g=D(4482),I=D(5403);function J(B,Y){return(0,g.e)((re,ee)=>{let z=0;re.subscribe(new I.Q(ee,oe=>{ee.next(B.call(Y,oe,z++))}))})}},9718:(_e,ne,D)=>{D.d(ne,{h:()=>I});var g=D(4004);function I(J){return(0,g.U)(()=>J)}},8189:(_e,ne,D)=>{D.d(ne,{J:()=>J});var g=D(5577),I=D(4671);function J(B=1/0){return(0,g.z)(I.y,B)}},5577:(_e,ne,D)=>{D.d(ne,{z:()=>z});var g=D(4004),I=D(8421),J=D(4482),B=D(9672),Y=D(5403),ee=D(576);function z(oe,Q,le=1/0){return(0,ee.m)(Q)?z((ue,Re)=>(0,g.U)((Ge,ve)=>Q(ue,Ge,Re,ve))((0,I.Xf)(oe(ue,Re))),le):("number"==typeof Q&&(le=Q),(0,J.e)((ue,Re)=>function re(oe,Q,le,ue,Re,Ge,ve,Be){const He=[];let xe=0,dt=0,mt=!1;const Ue=()=>{mt&&!He.length&&!xe&&Q.complete()},Oe=It=>xe<ue?yt(It):He.push(It),yt=It=>{Ge&&Q.next(It),xe++;let Je=!1;(0,I.Xf)(le(It,dt++)).subscribe(new Y.Q(Q,Nt=>{null==Re||Re(Nt),Ge?Oe(Nt):Q.next(Nt)},()=>{Je=!0},void 0,()=>{if(Je)try{for(xe--;He.length&&xe<ue;){const Nt=He.shift();ve?(0,B.f)(Q,ve,()=>yt(Nt)):yt(Nt)}Ue()}catch(Nt){Q.error(Nt)}}))};return oe.subscribe(new Y.Q(Q,Oe,()=>{mt=!0,Ue()})),()=>{null==Be||Be()}}(ue,Re,oe,le)))}},5363:(_e,ne,D)=>{D.d(ne,{Q:()=>B});var g=D(9672),I=D(4482),J=D(5403);function B(Y,re=0){return(0,I.e)((ee,z)=>{ee.subscribe(new J.Q(z,oe=>(0,g.f)(z,Y,()=>z.next(oe),re),()=>(0,g.f)(z,Y,()=>z.complete(),re),oe=>(0,g.f)(z,Y,()=>z.error(oe),re)))})}},4813:(_e,ne,D)=>{D.d(ne,{j:()=>I});var g=D(4004);function I(...J){const B=J.length;if(0===B)throw new Error("list of properties cannot be empty.");return(0,g.U)(Y=>{let re=Y;for(let ee=0;ee<B;ee++){const z=null==re?void 0:re[J[ee]];if(void 0===z)return;re=z}return re})}},8646:(_e,ne,D)=>{D.d(ne,{n:()=>le});var g=D(7579),I=D(4033),J=D(576),B=D(457),Y=D(4482),re=D(9751);const z={connector:()=>new g.x};function oe(ue,Re=z){const{connector:Ge}=Re;return(0,Y.e)((ve,Be)=>{const He=Ge();(0,B.D)(ue(function ee(ue){return new re.y(Re=>ue.subscribe(Re))}(He))).subscribe(Be),Be.add(ve.subscribe(He))})}function le(ue){return ue?Re=>oe(ue)(Re):Re=>function Q(ue,Re){const Ge=(0,J.m)(ue)?ue:()=>ue;return(0,J.m)(Re)?oe(Re,{connector:Ge}):ve=>new I.c(ve,Ge)}(new g.x)(Re)}},8343:(_e,ne,D)=>{D.d(ne,{x:()=>J});var g=D(4482),I=D(5403);function J(){return(0,g.e)((B,Y)=>{let re=null;B._refCount++;const ee=new I.Q(Y,void 0,void 0,void 0,()=>{if(!B||B._refCount<=0||0<--B._refCount)return void(re=null);const z=B._connection,oe=re;re=null,z&&(!oe||z===oe)&&z.unsubscribe(),Y.unsubscribe()});B.subscribe(ee),ee.closed||(re=B.connect())})}},5625:(_e,ne,D)=>{D.d(ne,{X:()=>re});var g=D(4482),I=D(5403),J=D(4671),B=D(2805),Y=D(8421);function re(ee=1/0){let z;z=ee&&"object"==typeof ee?ee:{count:ee};const{count:oe=1/0,delay:Q,resetOnSuccess:le=!1}=z;return oe<=0?J.y:(0,g.e)((ue,Re)=>{let ve,Ge=0;const Be=()=>{let He=!1;ve=ue.subscribe(new I.Q(Re,xe=>{le&&(Ge=0),Re.next(xe)},void 0,xe=>{if(Ge++<oe){const dt=()=>{ve?(ve.unsubscribe(),ve=null,Be()):He=!0};if(null!=Q){const mt="number"==typeof Q?(0,B.H)(Q):(0,Y.Xf)(Q(xe,Ge)),Ue=new I.Q(Re,()=>{Ue.unsubscribe(),dt()},()=>{Re.complete()});mt.subscribe(Ue)}else dt()}else Re.error(xe)})),He&&(ve.unsubscribe(),ve=null,Be())};Be()})}},5026:(_e,ne,D)=>{D.d(ne,{R:()=>B});var g=D(4482),I=D(5403);function J(Y,re,ee,z,oe){return(Q,le)=>{let ue=ee,Re=re,Ge=0;Q.subscribe(new I.Q(le,ve=>{const Be=Ge++;Re=ue?Y(Re,ve,Be):(ue=!0,ve),z&&le.next(Re)},oe&&(()=>{ue&&le.next(Re),le.complete()})))}}function B(Y,re){return(0,g.e)(J(Y,re,arguments.length>=2,!0))}},3099:(_e,ne,D)=>{D.d(ne,{B:()=>re});var g=D(457),I=D(5698),J=D(7579),B=D(930),Y=D(4482);function re(z={}){const{connector:oe=(()=>new J.x),resetOnError:Q=!0,resetOnComplete:le=!0,resetOnRefCountZero:ue=!0}=z;return Re=>{let Ge=null,ve=null,Be=null,He=0,xe=!1,dt=!1;const mt=()=>{null==ve||ve.unsubscribe(),ve=null},Ue=()=>{mt(),Ge=Be=null,xe=dt=!1},Oe=()=>{const yt=Ge;Ue(),null==yt||yt.unsubscribe()};return(0,Y.e)((yt,It)=>{He++,!dt&&!xe&&mt();const Je=Be=null!=Be?Be:oe();It.add(()=>{He--,0===He&&!dt&&!xe&&(ve=ee(Oe,ue))}),Je.subscribe(It),Ge||(Ge=new B.Hp({next:Nt=>Je.next(Nt),error:Nt=>{dt=!0,mt(),ve=ee(Ue,Q,Nt),Je.error(Nt)},complete:()=>{xe=!0,mt(),ve=ee(Ue,le),Je.complete()}}),(0,g.D)(yt).subscribe(Ge))})(Re)}}function ee(z,oe,...Q){return!0===oe?(z(),null):!1===oe?null:oe(...Q).pipe((0,I.q)(1)).subscribe(()=>z())}},4782:(_e,ne,D)=>{D.d(ne,{d:()=>J});var g=D(4707),I=D(3099);function J(B,Y,re){var ee,z;let oe,Q=!1;return B&&"object"==typeof B?(oe=null!==(ee=B.bufferSize)&&void 0!==ee?ee:1/0,Y=null!==(z=B.windowTime)&&void 0!==z?z:1/0,Q=!!B.refCount,re=B.scheduler):oe=null!=B?B:1/0,(0,I.B)({connector:()=>new g.t(oe,Y,re),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Q})}},5684:(_e,ne,D)=>{D.d(ne,{T:()=>I});var g=D(9300);function I(J){return(0,g.h)((B,Y)=>J<=Y)}},8675:(_e,ne,D)=>{D.d(ne,{O:()=>B});var g=D(7272),I=D(3269),J=D(4482);function B(...Y){const re=(0,I.yG)(Y);return(0,J.e)((ee,z)=>{(re?(0,g.z)(Y,ee,re):(0,g.z)(Y,ee)).subscribe(z)})}},3900:(_e,ne,D)=>{D.d(ne,{w:()=>B});var g=D(8421),I=D(4482),J=D(5403);function B(Y,re){return(0,I.e)((ee,z)=>{let oe=null,Q=0,le=!1;const ue=()=>le&&!oe&&z.complete();ee.subscribe(new J.Q(z,Re=>{null==oe||oe.unsubscribe();let Ge=0;const ve=Q++;(0,g.Xf)(Y(Re,ve)).subscribe(oe=new J.Q(z,Be=>z.next(re?re(Re,Be,ve,Ge++):Be),()=>{oe=null,ue()}))},()=>{le=!0,ue()}))})}},5698:(_e,ne,D)=>{D.d(ne,{q:()=>B});var g=D(515),I=D(4482),J=D(5403);function B(Y){return Y<=0?()=>g.E:(0,I.e)((re,ee)=>{let z=0;re.subscribe(new J.Q(ee,oe=>{++z<=Y&&(ee.next(oe),Y<=z&&ee.complete())}))})}},2035:(_e,ne,D)=>{D.d(ne,{h:()=>B});var g=D(515),I=D(4482),J=D(5403);function B(Y){return Y<=0?()=>g.E:(0,I.e)((re,ee)=>{let z=[];re.subscribe(new J.Q(ee,oe=>{z.push(oe),Y<z.length&&z.shift()},()=>{for(const oe of z)ee.next(oe);ee.complete()},void 0,()=>{z=null}))})}},2722:(_e,ne,D)=>{D.d(ne,{R:()=>Y});var g=D(4482),I=D(5403),J=D(8421),B=D(5032);function Y(re){return(0,g.e)((ee,z)=>{(0,J.Xf)(re).subscribe(new I.Q(z,()=>z.complete(),B.Z)),!z.closed&&ee.subscribe(z)})}},2529:(_e,ne,D)=>{D.d(ne,{o:()=>J});var g=D(4482),I=D(5403);function J(B,Y=!1){return(0,g.e)((re,ee)=>{let z=0;re.subscribe(new I.Q(ee,oe=>{const Q=B(oe,z++);(Q||Y)&&ee.next(oe),!Q&&ee.complete()}))})}},8505:(_e,ne,D)=>{D.d(ne,{b:()=>Y});var g=D(576),I=D(4482),J=D(5403),B=D(4671);function Y(re,ee,z){const oe=(0,g.m)(re)||ee||z?{next:re,error:ee,complete:z}:re;return oe?(0,I.e)((Q,le)=>{var ue;null===(ue=oe.subscribe)||void 0===ue||ue.call(oe);let Re=!0;Q.subscribe(new J.Q(le,Ge=>{var ve;null===(ve=oe.next)||void 0===ve||ve.call(oe,Ge),le.next(Ge)},()=>{var Ge;Re=!1,null===(Ge=oe.complete)||void 0===Ge||Ge.call(oe),le.complete()},Ge=>{var ve;Re=!1,null===(ve=oe.error)||void 0===ve||ve.call(oe,Ge),le.error(Ge)},()=>{var Ge,ve;Re&&(null===(Ge=oe.unsubscribe)||void 0===Ge||Ge.call(oe)),null===(ve=oe.finalize)||void 0===ve||ve.call(oe)}))}):B.y}},9468:(_e,ne,D)=>{D.d(ne,{p:()=>z});var g=D(4986),I=D(4482),J=D(5403),B=D(8421);const Y={leading:!0,trailing:!1};var ee=D(2805);function z(oe,Q=g.z,le=Y){const ue=(0,ee.H)(oe,Q);return function re(oe,Q=Y){return(0,I.e)((le,ue)=>{const{leading:Re,trailing:Ge}=Q;let ve=!1,Be=null,He=null,xe=!1;const dt=()=>{null==He||He.unsubscribe(),He=null,Ge&&(Oe(),xe&&ue.complete())},mt=()=>{He=null,xe&&ue.complete()},Ue=yt=>He=(0,B.Xf)(oe(yt)).subscribe(new J.Q(ue,dt,mt)),Oe=()=>{if(ve){ve=!1;const yt=Be;Be=null,ue.next(yt),!xe&&Ue(yt)}};le.subscribe(new J.Q(ue,yt=>{ve=!0,Be=yt,(!He||He.closed)&&(Re?Oe():Ue(yt))},()=>{xe=!0,(!(Ge&&ve&&He)||He.closed)&&ue.complete()}))})}(()=>ue,le)}},8068:(_e,ne,D)=>{D.d(ne,{T:()=>B});var g=D(6805),I=D(4482),J=D(5403);function B(re=Y){return(0,I.e)((ee,z)=>{let oe=!1;ee.subscribe(new J.Q(z,Q=>{oe=!0,z.next(Q)},()=>oe?z.complete():z.error(re())))})}function Y(){return new g.K}},7414:(_e,ne,D)=>{D.d(ne,{V:()=>oe});var g=D(4986),I=D(1165),J=D(4482),B=D(8421),Y=D(3888),re=D(5403),ee=D(9672);const z=(0,Y.d)(le=>function(Re=null){le(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=Re});function oe(le,ue){const{first:Re,each:Ge,with:ve=Q,scheduler:Be=(null!=ue?ue:g.z),meta:He=null}=(0,I.q)(le)?{first:le}:"number"==typeof le?{each:le}:le;if(null==Re&&null==Ge)throw new TypeError("No timeout provided.");return(0,J.e)((xe,dt)=>{let mt,Ue,Oe=null,yt=0;const It=Je=>{Ue=(0,ee.f)(dt,Be,()=>{try{mt.unsubscribe(),(0,B.Xf)(ve({meta:He,lastValue:Oe,seen:yt})).subscribe(dt)}catch(Nt){dt.error(Nt)}},Je)};mt=xe.subscribe(new re.Q(dt,Je=>{null==Ue||Ue.unsubscribe(),yt++,dt.next(Oe=Je),Ge>0&&It(Ge)},void 0,void 0,()=>{null!=Ue&&Ue.closed||null==Ue||Ue.unsubscribe(),Oe=null})),It(null!=Re?"number"==typeof Re?Re:+Re-Be.now():Ge)})}function Q(le){throw new z(le)}},1365:(_e,ne,D)=>{D.d(ne,{M:()=>ee});var g=D(4482),I=D(5403),J=D(8421),B=D(4671),Y=D(5032),re=D(3269);function ee(...z){const oe=(0,re.jO)(z);return(0,g.e)((Q,le)=>{const ue=z.length,Re=new Array(ue);let Ge=z.map(()=>!1),ve=!1;for(let Be=0;Be<ue;Be++)(0,J.Xf)(z[Be]).subscribe(new I.Q(le,He=>{Re[Be]=He,!ve&&!Ge[Be]&&(Ge[Be]=!0,(ve=Ge.every(B.y))&&(Ge=null))},Y.Z));Q.subscribe(new I.Q(le,Be=>{if(ve){const He=[Be,...Re];le.next(oe?oe(...He):He)}}))})}},4408:(_e,ne,D)=>{D.d(ne,{o:()=>Y});var g=D(727);class I extends g.w0{constructor(ee,z){super()}schedule(ee,z=0){return this}}const J={setInterval(...re){const{delegate:ee}=J;return((null==ee?void 0:ee.setInterval)||setInterval)(...re)},clearInterval(re){const{delegate:ee}=J;return((null==ee?void 0:ee.clearInterval)||clearInterval)(re)},delegate:void 0};var B=D(8737);class Y extends I{constructor(ee,z){super(ee,z),this.scheduler=ee,this.work=z,this.pending=!1}schedule(ee,z=0){if(this.closed)return this;this.state=ee;const oe=this.id,Q=this.scheduler;return null!=oe&&(this.id=this.recycleAsyncId(Q,oe,z)),this.pending=!0,this.delay=z,this.id=this.id||this.requestAsyncId(Q,this.id,z),this}requestAsyncId(ee,z,oe=0){return J.setInterval(ee.flush.bind(ee,this),oe)}recycleAsyncId(ee,z,oe=0){if(null!=oe&&this.delay===oe&&!1===this.pending)return z;J.clearInterval(z)}execute(ee,z){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const oe=this._execute(ee,z);if(oe)return oe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ee,z){let Q,oe=!1;try{this.work(ee)}catch(le){oe=!0,Q=le||new Error("Scheduled action threw falsy error")}if(oe)return this.unsubscribe(),Q}unsubscribe(){if(!this.closed){const{id:ee,scheduler:z}=this,{actions:oe}=z;this.work=this.state=this.scheduler=null,this.pending=!1,(0,B.P)(oe,this),null!=ee&&(this.id=this.recycleAsyncId(z,ee,null)),this.delay=null,super.unsubscribe()}}}},7565:(_e,ne,D)=>{D.d(ne,{v:()=>J});var g=D(6063);class I{constructor(Y,re=I.now){this.schedulerActionCtor=Y,this.now=re}schedule(Y,re=0,ee){return new this.schedulerActionCtor(this,Y).schedule(ee,re)}}I.now=g.l.now;class J extends I{constructor(Y,re=I.now){super(Y,re),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Y){const{actions:re}=this;if(this._active)return void re.push(Y);let ee;this._active=!0;do{if(ee=Y.execute(Y.state,Y.delay))break}while(Y=re.shift());if(this._active=!1,ee){for(;Y=re.shift();)Y.unsubscribe();throw ee}}}},4986:(_e,ne,D)=>{D.d(ne,{P:()=>B,z:()=>J});var g=D(4408);const J=new(D(7565).v)(g.o),B=J},6063:(_e,ne,D)=>{D.d(ne,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},233:(_e,ne,D)=>{D.d(ne,{N:()=>Y});var g=D(4408),J=D(7565);const Y=new class B extends J.v{}(class I extends g.o{constructor(z,oe){super(z,oe),this.scheduler=z,this.work=oe}schedule(z,oe=0){return oe>0?super.schedule(z,oe):(this.delay=oe,this.state=z,this.scheduler.flush(this),this)}execute(z,oe){return oe>0||this.closed?super.execute(z,oe):this._execute(z,oe)}requestAsyncId(z,oe,Q=0){return null!=Q&&Q>0||null==Q&&this.delay>0?super.requestAsyncId(z,oe,Q):z.flush(this)}})},3410:(_e,ne,D)=>{D.d(ne,{z:()=>g});const g={setTimeout(...I){const{delegate:J}=g;return((null==J?void 0:J.setTimeout)||setTimeout)(...I)},clearTimeout(I){const{delegate:J}=g;return((null==J?void 0:J.clearTimeout)||clearTimeout)(I)},delegate:void 0}},2202:(_e,ne,D)=>{D.d(ne,{h:()=>I});const I=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(_e,ne,D)=>{D.d(ne,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(_e,ne,D)=>{D.d(ne,{K:()=>I});const I=(0,D(3888).d)(J=>function(){J(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(_e,ne,D)=>{D.d(ne,{_6:()=>re,jO:()=>B,yG:()=>Y});var g=D(576),I=D(3532);function J(ee){return ee[ee.length-1]}function B(ee){return(0,g.m)(J(ee))?ee.pop():void 0}function Y(ee){return(0,I.K)(J(ee))?ee.pop():void 0}function re(ee,z){return"number"==typeof J(ee)?ee.pop():z}},4742:(_e,ne,D)=>{D.d(ne,{D:()=>Y});const{isArray:g}=Array,{getPrototypeOf:I,prototype:J,keys:B}=Object;function Y(ee){if(1===ee.length){const z=ee[0];if(g(z))return{args:z,keys:null};if(function re(ee){return ee&&"object"==typeof ee&&I(ee)===J}(z)){const oe=B(z);return{args:oe.map(Q=>z[Q]),keys:oe}}}return{args:ee,keys:null}}},8737:(_e,ne,D)=>{function g(I,J){if(I){const B=I.indexOf(J);0<=B&&I.splice(B,1)}}D.d(ne,{P:()=>g})},3888:(_e,ne,D)=>{function g(I){const B=I(Y=>{Error.call(Y),Y.stack=(new Error).stack});return B.prototype=Object.create(Error.prototype),B.prototype.constructor=B,B}D.d(ne,{d:()=>g})},1810:(_e,ne,D)=>{function g(I,J){return I.reduce((B,Y,re)=>(B[Y]=J[re],B),{})}D.d(ne,{n:()=>g})},2806:(_e,ne,D)=>{D.d(ne,{O:()=>B,x:()=>J});var g=D(2416);let I=null;function J(Y){if(g.v.useDeprecatedSynchronousErrorHandling){const re=!I;if(re&&(I={errorThrown:!1,error:null}),Y(),re){const{errorThrown:ee,error:z}=I;if(I=null,ee)throw z}}else Y()}function B(Y){g.v.useDeprecatedSynchronousErrorHandling&&I&&(I.errorThrown=!0,I.error=Y)}},9672:(_e,ne,D)=>{function g(I,J,B,Y=0,re=!1){const ee=J.schedule(function(){B(),re?I.add(this.schedule(null,Y)):this.unsubscribe()},Y);if(I.add(ee),!re)return ee}D.d(ne,{f:()=>g})},4671:(_e,ne,D)=>{function g(I){return I}D.d(ne,{y:()=>g})},1144:(_e,ne,D)=>{D.d(ne,{z:()=>g});const g=I=>I&&"number"==typeof I.length&&"function"!=typeof I},2206:(_e,ne,D)=>{D.d(ne,{D:()=>I});var g=D(576);function I(J){return Symbol.asyncIterator&&(0,g.m)(null==J?void 0:J[Symbol.asyncIterator])}},1165:(_e,ne,D)=>{function g(I){return I instanceof Date&&!isNaN(I)}D.d(ne,{q:()=>g})},576:(_e,ne,D)=>{function g(I){return"function"==typeof I}D.d(ne,{m:()=>g})},3670:(_e,ne,D)=>{D.d(ne,{c:()=>J});var g=D(8822),I=D(576);function J(B){return(0,I.m)(B[g.L])}},6495:(_e,ne,D)=>{D.d(ne,{T:()=>J});var g=D(2202),I=D(576);function J(B){return(0,I.m)(null==B?void 0:B[g.h])}},8239:(_e,ne,D)=>{D.d(ne,{t:()=>I});var g=D(576);function I(J){return(0,g.m)(null==J?void 0:J.then)}},3260:(_e,ne,D)=>{D.d(ne,{L:()=>B,Q:()=>J});var g=D(655),I=D(576);function J(Y){return(0,g.FC)(this,arguments,function*(){const ee=Y.getReader();try{for(;;){const{value:z,done:oe}=yield(0,g.qq)(ee.read());if(oe)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(z)}}finally{ee.releaseLock()}})}function B(Y){return(0,I.m)(null==Y?void 0:Y.getReader)}},3532:(_e,ne,D)=>{D.d(ne,{K:()=>I});var g=D(576);function I(J){return J&&(0,g.m)(J.schedule)}},4482:(_e,ne,D)=>{D.d(ne,{A:()=>I,e:()=>J});var g=D(576);function I(B){return(0,g.m)(null==B?void 0:B.lift)}function J(B){return Y=>{if(I(Y))return Y.lift(function(re){try{return B(re,this)}catch(ee){this.error(ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(_e,ne,D)=>{D.d(ne,{Z:()=>B});var g=D(4004);const{isArray:I}=Array;function B(Y){return(0,g.U)(re=>function J(Y,re){return I(re)?Y(...re):Y(re)}(Y,re))}},5032:(_e,ne,D)=>{function g(){}D.d(ne,{Z:()=>g})},9635:(_e,ne,D)=>{D.d(ne,{U:()=>J,z:()=>I});var g=D(4671);function I(...B){return J(B)}function J(B){return 0===B.length?g.y:1===B.length?B[0]:function(re){return B.reduce((ee,z)=>z(ee),re)}}},7849:(_e,ne,D)=>{D.d(ne,{h:()=>J});var g=D(2416),I=D(3410);function J(B){I.z.setTimeout(()=>{const{onUnhandledError:Y}=g.v;if(!Y)throw B;Y(B)})}},4532:(_e,ne,D)=>{function g(I){return new TypeError(`You provided ${null!==I&&"object"==typeof I?"an invalid object":`'${I}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}D.d(ne,{z:()=>g})},655:(_e,ne,D)=>{function B(Qe,Ye){var ut={};for(var qe in Qe)Object.prototype.hasOwnProperty.call(Qe,qe)&&Ye.indexOf(qe)<0&&(ut[qe]=Qe[qe]);if(null!=Qe&&"function"==typeof Object.getOwnPropertySymbols){var Rt=0;for(qe=Object.getOwnPropertySymbols(Qe);Rt<qe.length;Rt++)Ye.indexOf(qe[Rt])<0&&Object.prototype.propertyIsEnumerable.call(Qe,qe[Rt])&&(ut[qe[Rt]]=Qe[qe[Rt]])}return ut}function Y(Qe,Ye,ut,qe){var hn,Rt=arguments.length,Tt=Rt<3?Ye:null===qe?qe=Object.getOwnPropertyDescriptor(Ye,ut):qe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Tt=Reflect.decorate(Qe,Ye,ut,qe);else for(var nr=Qe.length-1;nr>=0;nr--)(hn=Qe[nr])&&(Tt=(Rt<3?hn(Tt):Rt>3?hn(Ye,ut,Tt):hn(Ye,ut))||Tt);return Rt>3&&Tt&&Object.defineProperty(Ye,ut,Tt),Tt}function z(Qe,Ye,ut,qe){return new(ut||(ut=Promise))(function(Tt,hn){function nr(vr){try{St(qe.next(vr))}catch(Cr){hn(Cr)}}function qt(vr){try{St(qe.throw(vr))}catch(Cr){hn(Cr)}}function St(vr){vr.done?Tt(vr.value):function Rt(Tt){return Tt instanceof ut?Tt:new ut(function(hn){hn(Tt)})}(vr.value).then(nr,qt)}St((qe=qe.apply(Qe,Ye||[])).next())})}function He(Qe){return this instanceof He?(this.v=Qe,this):new He(Qe)}function xe(Qe,Ye,ut){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Rt,qe=ut.apply(Qe,Ye||[]),Tt=[];return Rt={},hn("next"),hn("throw"),hn("return"),Rt[Symbol.asyncIterator]=function(){return this},Rt;function hn(hr){qe[hr]&&(Rt[hr]=function(ir){return new Promise(function(Ln,Dn){Tt.push([hr,ir,Ln,Dn])>1||nr(hr,ir)})})}function nr(hr,ir){try{!function qt(hr){hr.value instanceof He?Promise.resolve(hr.value.v).then(St,vr):Cr(Tt[0][2],hr)}(qe[hr](ir))}catch(Ln){Cr(Tt[0][3],Ln)}}function St(hr){nr("next",hr)}function vr(hr){nr("throw",hr)}function Cr(hr,ir){hr(ir),Tt.shift(),Tt.length&&nr(Tt[0][0],Tt[0][1])}}function mt(Qe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ut,Ye=Qe[Symbol.asyncIterator];return Ye?Ye.call(Qe):(Qe=function ue(Qe){var Ye="function"==typeof Symbol&&Symbol.iterator,ut=Ye&&Qe[Ye],qe=0;if(ut)return ut.call(Qe);if(Qe&&"number"==typeof Qe.length)return{next:function(){return Qe&&qe>=Qe.length&&(Qe=void 0),{value:Qe&&Qe[qe++],done:!Qe}}};throw new TypeError(Ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(Qe),ut={},qe("next"),qe("throw"),qe("return"),ut[Symbol.asyncIterator]=function(){return this},ut);function qe(Tt){ut[Tt]=Qe[Tt]&&function(hn){return new Promise(function(nr,qt){!function Rt(Tt,hn,nr,qt){Promise.resolve(qt).then(function(St){Tt({value:St,done:nr})},hn)}(nr,qt,(hn=Qe[Tt](hn)).done,hn.value)})}}}function Je(Qe,Ye,ut,qe){if("a"===ut&&!qe)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof Ye?Qe!==Ye||!qe:!Ye.has(Qe))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===ut?qe:"a"===ut?qe.call(Qe):qe?qe.value:Ye.get(Qe)}function Nt(Qe,Ye,ut,qe,Rt){if("m"===qe)throw new TypeError("Private method is not writable");if("a"===qe&&!Rt)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof Ye?Qe!==Ye||!Rt:!Ye.has(Qe))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===qe?Rt.call(Qe,ut):Rt?Rt.value=ut:Ye.set(Qe,ut),ut}D.d(ne,{FC:()=>xe,KL:()=>mt,Q_:()=>Je,YH:()=>Nt,_T:()=>B,gn:()=>Y,mG:()=>z,qq:()=>He})},1777:(_e,ne,D)=>{D.d(ne,{EY:()=>Be,F4:()=>Q,IO:()=>ve,LC:()=>I,SB:()=>oe,X$:()=>B,ZE:()=>dt,ZN:()=>xe,_j:()=>g,eR:()=>le,jt:()=>Y,k1:()=>mt,l3:()=>J,oB:()=>z,pV:()=>Re,ru:()=>re,vP:()=>ee});class g{}class I{}const J="*";function B(Ue,Oe){return{type:7,name:Ue,definitions:Oe,options:{}}}function Y(Ue,Oe=null){return{type:4,styles:Oe,timings:Ue}}function re(Ue,Oe=null){return{type:3,steps:Ue,options:Oe}}function ee(Ue,Oe=null){return{type:2,steps:Ue,options:Oe}}function z(Ue){return{type:6,styles:Ue,offset:null}}function oe(Ue,Oe,yt){return{type:0,name:Ue,styles:Oe,options:yt}}function Q(Ue){return{type:5,steps:Ue}}function le(Ue,Oe,yt=null){return{type:1,expr:Ue,animation:Oe,options:yt}}function Re(Ue=null){return{type:9,options:Ue}}function ve(Ue,Oe,yt=null){return{type:11,selector:Ue,animation:Oe,options:yt}}function Be(Ue,Oe){return{type:12,timings:Ue,animation:Oe}}function He(Ue){Promise.resolve().then(Ue)}class xe{constructor(Oe=0,yt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Oe+yt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Oe=>Oe()),this._onDoneFns=[])}onStart(Oe){this._originalOnStartFns.push(Oe),this._onStartFns.push(Oe)}onDone(Oe){this._originalOnDoneFns.push(Oe),this._onDoneFns.push(Oe)}onDestroy(Oe){this._onDestroyFns.push(Oe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){He(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Oe=>Oe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Oe=>Oe()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Oe){this._position=this.totalTime?Oe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Oe){const yt="start"==Oe?this._onStartFns:this._onDoneFns;yt.forEach(It=>It()),yt.length=0}}class dt{constructor(Oe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Oe;let yt=0,It=0,Je=0;const Nt=this.players.length;0==Nt?He(()=>this._onFinish()):this.players.forEach(wt=>{wt.onDone(()=>{++yt==Nt&&this._onFinish()}),wt.onDestroy(()=>{++It==Nt&&this._onDestroy()}),wt.onStart(()=>{++Je==Nt&&this._onStart()})}),this.totalTime=this.players.reduce((wt,Qe)=>Math.max(wt,Qe.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Oe=>Oe()),this._onDoneFns=[])}init(){this.players.forEach(Oe=>Oe.init())}onStart(Oe){this._onStartFns.push(Oe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Oe=>Oe()),this._onStartFns=[])}onDone(Oe){this._onDoneFns.push(Oe)}onDestroy(Oe){this._onDestroyFns.push(Oe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Oe=>Oe.play())}pause(){this.players.forEach(Oe=>Oe.pause())}restart(){this.players.forEach(Oe=>Oe.restart())}finish(){this._onFinish(),this.players.forEach(Oe=>Oe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Oe=>Oe.destroy()),this._onDestroyFns.forEach(Oe=>Oe()),this._onDestroyFns=[])}reset(){this.players.forEach(Oe=>Oe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Oe){const yt=Oe*this.totalTime;this.players.forEach(It=>{const Je=It.totalTime?Math.min(1,yt/It.totalTime):1;It.setPosition(Je)})}getPosition(){const Oe=this.players.reduce((yt,It)=>null===yt||It.totalTime>yt.totalTime?It:yt,null);return null!=Oe?Oe.getPosition():0}beforeDestroy(){this.players.forEach(Oe=>{Oe.beforeDestroy&&Oe.beforeDestroy()})}triggerCallback(Oe){const yt="start"==Oe?this._onStartFns:this._onDoneFns;yt.forEach(It=>It()),yt.length=0}}const mt="!"},9808:(_e,ne,D)=>{D.d(ne,{Do:()=>mt,ED:()=>xr,EM:()=>No,Gx:()=>mo,H9:()=>Ws,HT:()=>Y,JF:()=>pn,JJ:()=>Jn,K0:()=>ee,Mx:()=>Di,NF:()=>ts,Nd:()=>gi,O5:()=>Ls,OU:()=>xo,Ov:()=>mr,PC:()=>Ke,RF:()=>zn,S$:()=>He,Ts:()=>pi,V_:()=>Q,Ye:()=>Ue,Zx:()=>hs,_K:()=>Zi,b0:()=>dt,bD:()=>Es,ez:()=>yo,gd:()=>$s,i8:()=>Ur,mk:()=>ai,n9:()=>$n,q:()=>J,rS:()=>Hs,sg:()=>En,tP:()=>pt,uU:()=>rr,w_:()=>re});var g=D(5e3);let I=null;function J(){return I}function Y(L){I||(I=L)}class re{}const ee=new g.OlP("DocumentToken");let z=(()=>{class L{historyGo(k){throw new Error("Not implemented")}}return L.\u0275fac=function(k){return new(k||L)},L.\u0275prov=g.Yz7({token:L,factory:function(){return function oe(){return(0,g.LFG)(le)}()},providedIn:"platform"}),L})();const Q=new g.OlP("Location Initialized");let le=(()=>{class L extends z{constructor(k){super(),this._doc=k,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return J().getBaseHref(this._doc)}onPopState(k){const se=J().getGlobalEventTarget(this._doc,"window");return se.addEventListener("popstate",k,!1),()=>se.removeEventListener("popstate",k)}onHashChange(k){const se=J().getGlobalEventTarget(this._doc,"window");return se.addEventListener("hashchange",k,!1),()=>se.removeEventListener("hashchange",k)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(k){this.location.pathname=k}pushState(k,se,me){ue()?this._history.pushState(k,se,me):this.location.hash=me}replaceState(k,se,me){ue()?this._history.replaceState(k,se,me):this.location.hash=me}forward(){this._history.forward()}back(){this._history.back()}historyGo(k=0){this._history.go(k)}getState(){return this._history.state}}return L.\u0275fac=function(k){return new(k||L)(g.LFG(ee))},L.\u0275prov=g.Yz7({token:L,factory:function(){return function Re(){return new le((0,g.LFG)(ee))}()},providedIn:"platform"}),L})();function ue(){return!!window.history.pushState}function Ge(L,q){if(0==L.length)return q;if(0==q.length)return L;let k=0;return L.endsWith("/")&&k++,q.startsWith("/")&&k++,2==k?L+q.substring(1):1==k?L+q:L+"/"+q}function ve(L){const q=L.match(/#|\?|$/),k=q&&q.index||L.length;return L.slice(0,k-("/"===L[k-1]?1:0))+L.slice(k)}function Be(L){return L&&"?"!==L[0]?"?"+L:L}let He=(()=>{class L{historyGo(k){throw new Error("Not implemented")}}return L.\u0275fac=function(k){return new(k||L)},L.\u0275prov=g.Yz7({token:L,factory:function(){return(0,g.f3M)(dt)},providedIn:"root"}),L})();const xe=new g.OlP("appBaseHref");let dt=(()=>{class L extends He{constructor(k,se){var me,et,ft;super(),this._platformLocation=k,this._removeListenerFns=[],this._baseHref=null!==(ft=null!==(me=null!=se?se:this._platformLocation.getBaseHrefFromDOM())&&void 0!==me?me:null===(et=(0,g.f3M)(ee).location)||void 0===et?void 0:et.origin)&&void 0!==ft?ft:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}prepareExternalUrl(k){return Ge(this._baseHref,k)}path(k=!1){const se=this._platformLocation.pathname+Be(this._platformLocation.search),me=this._platformLocation.hash;return me&&k?`${se}${me}`:se}pushState(k,se,me,et){const ft=this.prepareExternalUrl(me+Be(et));this._platformLocation.pushState(k,se,ft)}replaceState(k,se,me,et){const ft=this.prepareExternalUrl(me+Be(et));this._platformLocation.replaceState(k,se,ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){var se,me;null===(me=(se=this._platformLocation).historyGo)||void 0===me||me.call(se,k)}}return L.\u0275fac=function(k){return new(k||L)(g.LFG(z),g.LFG(xe,8))},L.\u0275prov=g.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})(),mt=(()=>{class L extends He{constructor(k,se){super(),this._platformLocation=k,this._baseHref="",this._removeListenerFns=[],null!=se&&(this._baseHref=se)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}path(k=!1){let se=this._platformLocation.hash;return null==se&&(se="#"),se.length>0?se.substring(1):se}prepareExternalUrl(k){const se=Ge(this._baseHref,k);return se.length>0?"#"+se:se}pushState(k,se,me,et){let ft=this.prepareExternalUrl(me+Be(et));0==ft.length&&(ft=this._platformLocation.pathname),this._platformLocation.pushState(k,se,ft)}replaceState(k,se,me,et){let ft=this.prepareExternalUrl(me+Be(et));0==ft.length&&(ft=this._platformLocation.pathname),this._platformLocation.replaceState(k,se,ft)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){var se,me;null===(me=(se=this._platformLocation).historyGo)||void 0===me||me.call(se,k)}}return L.\u0275fac=function(k){return new(k||L)(g.LFG(z),g.LFG(xe,8))},L.\u0275prov=g.Yz7({token:L,factory:L.\u0275fac}),L})(),Ue=(()=>{class L{constructor(k){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=k;const se=this._locationStrategy.getBaseHref();this._baseHref=ve(It(se)),this._locationStrategy.onPopState(me=>{this._subject.emit({url:this.path(!0),pop:!0,state:me.state,type:me.type})})}ngOnDestroy(){var k;null===(k=this._urlChangeSubscription)||void 0===k||k.unsubscribe(),this._urlChangeListeners=[]}path(k=!1){return this.normalize(this._locationStrategy.path(k))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(k,se=""){return this.path()==this.normalize(k+Be(se))}normalize(k){return L.stripTrailingSlash(function yt(L,q){return L&&q.startsWith(L)?q.substring(L.length):q}(this._baseHref,It(k)))}prepareExternalUrl(k){return k&&"/"!==k[0]&&(k="/"+k),this._locationStrategy.prepareExternalUrl(k)}go(k,se="",me=null){this._locationStrategy.pushState(me,"",k,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Be(se)),me)}replaceState(k,se="",me=null){this._locationStrategy.replaceState(me,"",k,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Be(se)),me)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(k=0){var se,me;null===(me=(se=this._locationStrategy).historyGo)||void 0===me||me.call(se,k)}onUrlChange(k){return this._urlChangeListeners.push(k),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(se=>{this._notifyUrlChangeListeners(se.url,se.state)})),()=>{var se;const me=this._urlChangeListeners.indexOf(k);this._urlChangeListeners.splice(me,1),0===this._urlChangeListeners.length&&(null===(se=this._urlChangeSubscription)||void 0===se||se.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(k="",se){this._urlChangeListeners.forEach(me=>me(k,se))}subscribe(k,se,me){return this._subject.subscribe({next:k,error:se,complete:me})}}return L.normalizeQueryParams=Be,L.joinWithSlash=Ge,L.stripTrailingSlash=ve,L.\u0275fac=function(k){return new(k||L)(g.LFG(He))},L.\u0275prov=g.Yz7({token:L,factory:function(){return function Oe(){return new Ue((0,g.LFG)(He))}()},providedIn:"root"}),L})();function It(L){return L.replace(/\/index.html$/,"")}const Je={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var Nt=(()=>((Nt=Nt||{})[Nt.Decimal=0]="Decimal",Nt[Nt.Percent=1]="Percent",Nt[Nt.Currency=2]="Currency",Nt[Nt.Scientific=3]="Scientific",Nt))(),wt=(()=>((wt=wt||{})[wt.Zero=0]="Zero",wt[wt.One=1]="One",wt[wt.Two=2]="Two",wt[wt.Few=3]="Few",wt[wt.Many=4]="Many",wt[wt.Other=5]="Other",wt))(),Qe=(()=>((Qe=Qe||{})[Qe.Format=0]="Format",Qe[Qe.Standalone=1]="Standalone",Qe))(),Ye=(()=>((Ye=Ye||{})[Ye.Narrow=0]="Narrow",Ye[Ye.Abbreviated=1]="Abbreviated",Ye[Ye.Wide=2]="Wide",Ye[Ye.Short=3]="Short",Ye))(),ut=(()=>((ut=ut||{})[ut.Short=0]="Short",ut[ut.Medium=1]="Medium",ut[ut.Long=2]="Long",ut[ut.Full=3]="Full",ut))(),qe=(()=>((qe=qe||{})[qe.Decimal=0]="Decimal",qe[qe.Group=1]="Group",qe[qe.List=2]="List",qe[qe.PercentSign=3]="PercentSign",qe[qe.PlusSign=4]="PlusSign",qe[qe.MinusSign=5]="MinusSign",qe[qe.Exponential=6]="Exponential",qe[qe.SuperscriptingExponent=7]="SuperscriptingExponent",qe[qe.PerMille=8]="PerMille",qe[qe.Infinity=9]="Infinity",qe[qe.NaN=10]="NaN",qe[qe.TimeSeparator=11]="TimeSeparator",qe[qe.CurrencyDecimal=12]="CurrencyDecimal",qe[qe.CurrencyGroup=13]="CurrencyGroup",qe))();function hr(L,q){return zt((0,g.cg1)(L)[g.wAp.DateFormat],q)}function ir(L,q){return zt((0,g.cg1)(L)[g.wAp.TimeFormat],q)}function Ln(L,q){return zt((0,g.cg1)(L)[g.wAp.DateTimeFormat],q)}function Dn(L,q){const k=(0,g.cg1)(L),se=k[g.wAp.NumberSymbols][q];if(void 0===se){if(q===qe.CurrencyDecimal)return k[g.wAp.NumberSymbols][qe.Decimal];if(q===qe.CurrencyGroup)return k[g.wAp.NumberSymbols][qe.Group]}return se}function jr(L,q){return(0,g.cg1)(L)[g.wAp.NumberFormats][q]}const $t=g.kL8;function on(L){if(!L[g.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${L[g.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function zt(L,q){for(let k=q;k>-1;k--)if(void 0!==L[k])return L[k];throw new Error("Locale data API: locale data undefined")}function si(L){const[q,k]=L.split(":");return{hours:+q,minutes:+k}}const oi=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Pr={},je=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Te=(()=>((Te=Te||{})[Te.Short=0]="Short",Te[Te.ShortGMT=1]="ShortGMT",Te[Te.Long=2]="Long",Te[Te.Extended=3]="Extended",Te))(),ye=(()=>((ye=ye||{})[ye.FullYear=0]="FullYear",ye[ye.Month=1]="Month",ye[ye.Date=2]="Date",ye[ye.Hours=3]="Hours",ye[ye.Minutes=4]="Minutes",ye[ye.Seconds=5]="Seconds",ye[ye.FractionalSeconds=6]="FractionalSeconds",ye[ye.Day=7]="Day",ye))(),Xe=(()=>((Xe=Xe||{})[Xe.DayPeriods=0]="DayPeriods",Xe[Xe.Days=1]="Days",Xe[Xe.Months=2]="Months",Xe[Xe.Eras=3]="Eras",Xe))();function ht(L,q,k,se){let me=function Gt(L){if(qn(L))return L;if("number"==typeof L&&!isNaN(L))return new Date(L);if("string"==typeof L){if(L=L.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(L)){const[me,et=1,ft=1]=L.split("-").map(Jt=>+Jt);return an(me,et-1,ft)}const k=parseFloat(L);if(!isNaN(L-k))return new Date(k);let se;if(se=L.match(oi))return function Xt(L){const q=new Date(0);let k=0,se=0;const me=L[8]?q.setUTCFullYear:q.setFullYear,et=L[8]?q.setUTCHours:q.setHours;L[9]&&(k=Number(L[9]+L[10]),se=Number(L[9]+L[11])),me.call(q,Number(L[1]),Number(L[2])-1,Number(L[3]));const ft=Number(L[4]||0)-k,Jt=Number(L[5]||0)-se,Mr=Number(L[6]||0),bn=Math.floor(1e3*parseFloat("0."+(L[7]||0)));return et.call(q,ft,Jt,Mr,bn),q}(se)}const q=new Date(L);if(!qn(q))throw new Error(`Unable to convert "${L}" into a date`);return q}(L);q=dn(k,q)||q;let Jt,ft=[];for(;q;){if(Jt=je.exec(q),!Jt){ft.push(q);break}{ft=ft.concat(Jt.slice(1));const pr=ft.pop();if(!pr)break;q=pr}}let Mr=me.getTimezoneOffset();se&&(Mr=Fe(se,Mr),me=function We(L,q,k){const se=k?-1:1,me=L.getTimezoneOffset();return function vt(L,q){return(L=new Date(L.getTime())).setMinutes(L.getMinutes()+q),L}(L,se*(Fe(q,me)-me))}(me,se,!0));let bn="";return ft.forEach(pr=>{const ur=function Ie(L){if(Ae[L])return Ae[L];let q;switch(L){case"G":case"GG":case"GGG":q=On(Xe.Eras,Ye.Abbreviated);break;case"GGGG":q=On(Xe.Eras,Ye.Wide);break;case"GGGGG":q=On(Xe.Eras,Ye.Narrow);break;case"y":q=Wn(ye.FullYear,1,0,!1,!0);break;case"yy":q=Wn(ye.FullYear,2,0,!0,!0);break;case"yyy":q=Wn(ye.FullYear,3,0,!1,!0);break;case"yyyy":q=Wn(ye.FullYear,4,0,!1,!0);break;case"Y":q=fi(1);break;case"YY":q=fi(2,!0);break;case"YYY":q=fi(3);break;case"YYYY":q=fi(4);break;case"M":case"L":q=Wn(ye.Month,1,1);break;case"MM":case"LL":q=Wn(ye.Month,2,1);break;case"MMM":q=On(Xe.Months,Ye.Abbreviated);break;case"MMMM":q=On(Xe.Months,Ye.Wide);break;case"MMMMM":q=On(Xe.Months,Ye.Narrow);break;case"LLL":q=On(Xe.Months,Ye.Abbreviated,Qe.Standalone);break;case"LLLL":q=On(Xe.Months,Ye.Wide,Qe.Standalone);break;case"LLLLL":q=On(Xe.Months,Ye.Narrow,Qe.Standalone);break;case"w":q=hi(1);break;case"ww":q=hi(2);break;case"W":q=hi(1,!0);break;case"d":q=Wn(ye.Date,1);break;case"dd":q=Wn(ye.Date,2);break;case"c":case"cc":q=Wn(ye.Day,1);break;case"ccc":q=On(Xe.Days,Ye.Abbreviated,Qe.Standalone);break;case"cccc":q=On(Xe.Days,Ye.Wide,Qe.Standalone);break;case"ccccc":q=On(Xe.Days,Ye.Narrow,Qe.Standalone);break;case"cccccc":q=On(Xe.Days,Ye.Short,Qe.Standalone);break;case"E":case"EE":case"EEE":q=On(Xe.Days,Ye.Abbreviated);break;case"EEEE":q=On(Xe.Days,Ye.Wide);break;case"EEEEE":q=On(Xe.Days,Ye.Narrow);break;case"EEEEEE":q=On(Xe.Days,Ye.Short);break;case"a":case"aa":case"aaa":q=On(Xe.DayPeriods,Ye.Abbreviated);break;case"aaaa":q=On(Xe.DayPeriods,Ye.Wide);break;case"aaaaa":q=On(Xe.DayPeriods,Ye.Narrow);break;case"b":case"bb":case"bbb":q=On(Xe.DayPeriods,Ye.Abbreviated,Qe.Standalone,!0);break;case"bbbb":q=On(Xe.DayPeriods,Ye.Wide,Qe.Standalone,!0);break;case"bbbbb":q=On(Xe.DayPeriods,Ye.Narrow,Qe.Standalone,!0);break;case"B":case"BB":case"BBB":q=On(Xe.DayPeriods,Ye.Abbreviated,Qe.Format,!0);break;case"BBBB":q=On(Xe.DayPeriods,Ye.Wide,Qe.Format,!0);break;case"BBBBB":q=On(Xe.DayPeriods,Ye.Narrow,Qe.Format,!0);break;case"h":q=Wn(ye.Hours,1,-12);break;case"hh":q=Wn(ye.Hours,2,-12);break;case"H":q=Wn(ye.Hours,1);break;case"HH":q=Wn(ye.Hours,2);break;case"m":q=Wn(ye.Minutes,1);break;case"mm":q=Wn(ye.Minutes,2);break;case"s":q=Wn(ye.Seconds,1);break;case"ss":q=Wn(ye.Seconds,2);break;case"S":q=Wn(ye.FractionalSeconds,1);break;case"SS":q=Wn(ye.FractionalSeconds,2);break;case"SSS":q=Wn(ye.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":q=Kn(Te.Short);break;case"ZZZZZ":q=Kn(Te.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":q=Kn(Te.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":q=Kn(Te.Long);break;default:return null}return Ae[L]=q,q}(pr);bn+=ur?ur(me,k,Mr):"''"===pr?"'":pr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),bn}function an(L,q,k){const se=new Date(0);return se.setFullYear(L,q,k),se.setHours(0,0,0),se}function dn(L,q){const k=function Tt(L){return(0,g.cg1)(L)[g.wAp.LocaleId]}(L);if(Pr[k]=Pr[k]||{},Pr[k][q])return Pr[k][q];let se="";switch(q){case"shortDate":se=hr(L,ut.Short);break;case"mediumDate":se=hr(L,ut.Medium);break;case"longDate":se=hr(L,ut.Long);break;case"fullDate":se=hr(L,ut.Full);break;case"shortTime":se=ir(L,ut.Short);break;case"mediumTime":se=ir(L,ut.Medium);break;case"longTime":se=ir(L,ut.Long);break;case"fullTime":se=ir(L,ut.Full);break;case"short":const me=dn(L,"shortTime"),et=dn(L,"shortDate");se=er(Ln(L,ut.Short),[me,et]);break;case"medium":const ft=dn(L,"mediumTime"),Jt=dn(L,"mediumDate");se=er(Ln(L,ut.Medium),[ft,Jt]);break;case"long":const Mr=dn(L,"longTime"),bn=dn(L,"longDate");se=er(Ln(L,ut.Long),[Mr,bn]);break;case"full":const pr=dn(L,"fullTime"),ur=dn(L,"fullDate");se=er(Ln(L,ut.Full),[pr,ur])}return se&&(Pr[k][q]=se),se}function er(L,q){return q&&(L=L.replace(/\{([^}]+)}/g,function(k,se){return null!=q&&se in q?q[se]:k})),L}function Lt(L,q,k="-",se,me){let et="";(L<0||me&&L<=0)&&(me?L=1-L:(L=-L,et=k));let ft=String(L);for(;ft.length<q;)ft="0"+ft;return se&&(ft=ft.slice(ft.length-q)),et+ft}function Wn(L,q,k=0,se=!1,me=!1){return function(et,ft){let Jt=function zr(L,q){switch(L){case ye.FullYear:return q.getFullYear();case ye.Month:return q.getMonth();case ye.Date:return q.getDate();case ye.Hours:return q.getHours();case ye.Minutes:return q.getMinutes();case ye.Seconds:return q.getSeconds();case ye.FractionalSeconds:return q.getMilliseconds();case ye.Day:return q.getDay();default:throw new Error(`Unknown DateType value "${L}".`)}}(L,et);if((k>0||Jt>-k)&&(Jt+=k),L===ye.Hours)0===Jt&&-12===k&&(Jt=12);else if(L===ye.FractionalSeconds)return function Nn(L,q){return Lt(L,3).substring(0,q)}(Jt,q);const Mr=Dn(ft,qe.MinusSign);return Lt(Jt,q,Mr,se,me)}}function On(L,q,k=Qe.Format,se=!1){return function(me,et){return function fn(L,q,k,se,me,et){switch(k){case Xe.Months:return function qt(L,q,k){const se=(0,g.cg1)(L),et=zt([se[g.wAp.MonthsFormat],se[g.wAp.MonthsStandalone]],q);return zt(et,k)}(q,me,se)[L.getMonth()];case Xe.Days:return function nr(L,q,k){const se=(0,g.cg1)(L),et=zt([se[g.wAp.DaysFormat],se[g.wAp.DaysStandalone]],q);return zt(et,k)}(q,me,se)[L.getDay()];case Xe.DayPeriods:const ft=L.getHours(),Jt=L.getMinutes();if(et){const bn=function Fn(L){const q=(0,g.cg1)(L);return on(q),(q[g.wAp.ExtraData][2]||[]).map(se=>"string"==typeof se?si(se):[si(se[0]),si(se[1])])}(q),pr=function Fr(L,q,k){const se=(0,g.cg1)(L);on(se);const et=zt([se[g.wAp.ExtraData][0],se[g.wAp.ExtraData][1]],q)||[];return zt(et,k)||[]}(q,me,se),ur=bn.findIndex(Ci=>{if(Array.isArray(Ci)){const[br,Ii]=Ci,gs=ft>=br.hours&&Jt>=br.minutes,Wr=ft<Ii.hours||ft===Ii.hours&&Jt<Ii.minutes;if(br.hours<Ii.hours){if(gs&&Wr)return!0}else if(gs||Wr)return!0}else if(Ci.hours===ft&&Ci.minutes===Jt)return!0;return!1});if(-1!==ur)return pr[ur]}return function hn(L,q,k){const se=(0,g.cg1)(L),et=zt([se[g.wAp.DayPeriodsFormat],se[g.wAp.DayPeriodsStandalone]],q);return zt(et,k)}(q,me,se)[ft<12?0:1];case Xe.Eras:return function St(L,q){return zt((0,g.cg1)(L)[g.wAp.Eras],q)}(q,se)[L.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${k}`)}}(me,et,L,q,k,se)}}function Kn(L){return function(q,k,se){const me=-1*se,et=Dn(k,qe.MinusSign),ft=me>0?Math.floor(me/60):Math.ceil(me/60);switch(L){case Te.Short:return(me>=0?"+":"")+Lt(ft,2,et)+Lt(Math.abs(me%60),2,et);case Te.ShortGMT:return"GMT"+(me>=0?"+":"")+Lt(ft,1,et);case Te.Long:return"GMT"+(me>=0?"+":"")+Lt(ft,2,et)+":"+Lt(Math.abs(me%60),2,et);case Te.Extended:return 0===se?"Z":(me>=0?"+":"")+Lt(ft,2,et)+":"+Lt(Math.abs(me%60),2,et);default:throw new Error(`Unknown zone width "${L}"`)}}}function lr(L){return an(L.getFullYear(),L.getMonth(),L.getDate()+(4-L.getDay()))}function hi(L,q=!1){return function(k,se){let me;if(q){const et=new Date(k.getFullYear(),k.getMonth(),1).getDay()-1,ft=k.getDate();me=1+Math.floor((ft+et)/7)}else{const et=lr(k),ft=function Pn(L){const q=an(L,0,1).getDay();return an(L,0,1+(q<=4?4:11)-q)}(et.getFullYear()),Jt=et.getTime()-ft.getTime();me=1+Math.round(Jt/6048e5)}return Lt(me,L,Dn(se,qe.MinusSign))}}function fi(L,q=!1){return function(k,se){return Lt(lr(k).getFullYear(),L,Dn(se,qe.MinusSign),q)}}const Ae={};function Fe(L,q){L=L.replace(/:/g,"");const k=Date.parse("Jan 01, 1970 00:00:00 "+L)/6e4;return isNaN(k)?q:k}function qn(L){return L instanceof Date&&!isNaN(L.valueOf())}const tr=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Se(L,q,k,se,me,et,ft=!1){let Jt="",Mr=!1;if(isFinite(L)){let bn=function Vn(L){let se,me,et,ft,Jt,q=Math.abs(L)+"",k=0;for((me=q.indexOf("."))>-1&&(q=q.replace(".","")),(et=q.search(/e/i))>0?(me<0&&(me=et),me+=+q.slice(et+1),q=q.substring(0,et)):me<0&&(me=q.length),et=0;"0"===q.charAt(et);et++);if(et===(Jt=q.length))se=[0],me=1;else{for(Jt--;"0"===q.charAt(Jt);)Jt--;for(me-=et,se=[],ft=0;et<=Jt;et++,ft++)se[ft]=Number(q.charAt(et))}return me>22&&(se=se.splice(0,21),k=me-1,me=1),{digits:se,exponent:k,integerLen:me}}(L);ft&&(bn=function Cn(L){if(0===L.digits[0])return L;const q=L.digits.length-L.integerLen;return L.exponent?L.exponent+=2:(0===q?L.digits.push(0,0):1===q&&L.digits.push(0),L.integerLen+=2),L}(bn));let pr=q.minInt,ur=q.minFrac,Ci=q.maxFrac;if(et){const $i=et.match(tr);if(null===$i)throw new Error(`${et} is not a valid digit info`);const bi=$i[1],Rs=$i[3],xt=$i[5];null!=bi&&(pr=Qr(bi)),null!=Rs&&(ur=Qr(Rs)),null!=xt?Ci=Qr(xt):null!=Rs&&ur>Ci&&(Ci=ur)}!function sr(L,q,k){if(q>k)throw new Error(`The minimum number of digits after fraction (${q}) is higher than the maximum (${k}).`);let se=L.digits,me=se.length-L.integerLen;const et=Math.min(Math.max(q,me),k);let ft=et+L.integerLen,Jt=se[ft];if(ft>0){se.splice(Math.max(L.integerLen,ft));for(let ur=ft;ur<se.length;ur++)se[ur]=0}else{me=Math.max(0,me),L.integerLen=1,se.length=Math.max(1,ft=et+1),se[0]=0;for(let ur=1;ur<ft;ur++)se[ur]=0}if(Jt>=5)if(ft-1<0){for(let ur=0;ur>ft;ur--)se.unshift(0),L.integerLen++;se.unshift(1),L.integerLen++}else se[ft-1]++;for(;me<Math.max(0,et);me++)se.push(0);let Mr=0!==et;const bn=q+L.integerLen,pr=se.reduceRight(function(ur,Ci,br,Ii){return Ii[br]=(Ci+=ur)<10?Ci:Ci-10,Mr&&(0===Ii[br]&&br>=bn?Ii.pop():Mr=!1),Ci>=10?1:0},0);pr&&(se.unshift(pr),L.integerLen++)}(bn,ur,Ci);let br=bn.digits,Ii=bn.integerLen;const gs=bn.exponent;let Wr=[];for(Mr=br.every($i=>!$i);Ii<pr;Ii++)br.unshift(0);for(;Ii<0;Ii++)br.unshift(0);Ii>0?Wr=br.splice(Ii,br.length):(Wr=br,br=[0]);const Vi=[];for(br.length>=q.lgSize&&Vi.unshift(br.splice(-q.lgSize,br.length).join(""));br.length>q.gSize;)Vi.unshift(br.splice(-q.gSize,br.length).join(""));br.length&&Vi.unshift(br.join("")),Jt=Vi.join(Dn(k,se)),Wr.length&&(Jt+=Dn(k,me)+Wr.join("")),gs&&(Jt+=Dn(k,qe.Exponential)+"+"+gs)}else Jt=Dn(k,qe.Infinity);return Jt=L<0&&!Mr?q.negPre+Jt+q.negSuf:q.posPre+Jt+q.posSuf,Jt}function _n(L,q="-"){const k={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},se=L.split(";"),me=se[0],et=se[1],ft=-1!==me.indexOf(".")?me.split("."):[me.substring(0,me.lastIndexOf("0")+1),me.substring(me.lastIndexOf("0")+1)],Jt=ft[0],Mr=ft[1]||"";k.posPre=Jt.substring(0,Jt.indexOf("#"));for(let pr=0;pr<Mr.length;pr++){const ur=Mr.charAt(pr);"0"===ur?k.minFrac=k.maxFrac=pr+1:"#"===ur?k.maxFrac=pr+1:k.posSuf+=ur}const bn=Jt.split(",");if(k.gSize=bn[1]?bn[1].length:0,k.lgSize=bn[2]||bn[1]?(bn[2]||bn[1]).length:0,et){const pr=me.length-k.posPre.length-k.posSuf.length,ur=et.indexOf("#");k.negPre=et.substring(0,ur).replace(/'/g,""),k.negSuf=et.slice(ur+pr).replace(/'/g,"")}else k.negPre=q+k.posPre,k.negSuf=k.posSuf;return k}function Qr(L){const q=parseInt(L);if(isNaN(q))throw new Error("Invalid integer literal when parsing "+L);return q}let Hr=(()=>{class L{}return L.\u0275fac=function(k){return new(k||L)},L.\u0275prov=g.Yz7({token:L,factory:function(k){let se=null;return k?se=new k:(me=g.LFG(g.soG),se=new Hi(me)),se;var me},providedIn:"root"}),L})();let Hi=(()=>{class L extends Hr{constructor(k){super(),this.locale=k}getPluralCategory(k,se){switch($t(se||this.locale)(k)){case wt.Zero:return"zero";case wt.One:return"one";case wt.Two:return"two";case wt.Few:return"few";case wt.Many:return"many";default:return"other"}}}return L.\u0275fac=function(k){return new(k||L)(g.LFG(g.soG))},L.\u0275prov=g.Yz7({token:L,factory:L.\u0275fac}),L})();function Di(L,q){q=encodeURIComponent(q);for(const k of L.split(";")){const se=k.indexOf("="),[me,et]=-1==se?[k,""]:[k.slice(0,se),k.slice(se+1)];if(me.trim()===q)return decodeURIComponent(et)}return null}let ai=(()=>{class L{constructor(k,se,me,et){this._iterableDiffers=k,this._keyValueDiffers=se,this._ngEl=me,this._renderer=et,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(k){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof k?k.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(k){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof k?k.split(/\s+/):k,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const k=this._iterableDiffer.diff(this._rawClass);k&&this._applyIterableChanges(k)}else if(this._keyValueDiffer){const k=this._keyValueDiffer.diff(this._rawClass);k&&this._applyKeyValueChanges(k)}}_applyKeyValueChanges(k){k.forEachAddedItem(se=>this._toggleClass(se.key,se.currentValue)),k.forEachChangedItem(se=>this._toggleClass(se.key,se.currentValue)),k.forEachRemovedItem(se=>{se.previousValue&&this._toggleClass(se.key,!1)})}_applyIterableChanges(k){k.forEachAddedItem(se=>{if("string"!=typeof se.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(se.item)}`);this._toggleClass(se.item,!0)}),k.forEachRemovedItem(se=>this._toggleClass(se.item,!1))}_applyClasses(k){k&&(Array.isArray(k)||k instanceof Set?k.forEach(se=>this._toggleClass(se,!0)):Object.keys(k).forEach(se=>this._toggleClass(se,!!k[se])))}_removeClasses(k){k&&(Array.isArray(k)||k instanceof Set?k.forEach(se=>this._toggleClass(se,!1)):Object.keys(k).forEach(se=>this._toggleClass(se,!1)))}_toggleClass(k,se){(k=k.trim())&&k.split(/\s+/g).forEach(me=>{se?this._renderer.addClass(this._ngEl.nativeElement,me):this._renderer.removeClass(this._ngEl.nativeElement,me)})}}return L.\u0275fac=function(k){return new(k||L)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},L.\u0275dir=g.lG2({type:L,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),L})();class Tn{constructor(q,k,se,me){this.$implicit=q,this.ngForOf=k,this.index=se,this.count=me}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let En=(()=>{class L{constructor(k,se,me){this._viewContainer=k,this._template=se,this._differs=me,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(k){this._ngForOf=k,this._ngForOfDirty=!0}set ngForTrackBy(k){this._trackByFn=k}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(k){k&&(this._template=k)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const k=this._ngForOf;!this._differ&&k&&(this._differ=this._differs.find(k).create(this.ngForTrackBy))}if(this._differ){const k=this._differ.diff(this._ngForOf);k&&this._applyChanges(k)}}_applyChanges(k){const se=this._viewContainer;k.forEachOperation((me,et,ft)=>{if(null==me.previousIndex)se.createEmbeddedView(this._template,new Tn(me.item,this._ngForOf,-1,-1),null===ft?void 0:ft);else if(null==ft)se.remove(null===et?void 0:et);else if(null!==et){const Jt=se.get(et);se.move(Jt,ft),Xr(Jt,me)}});for(let me=0,et=se.length;me<et;me++){const Jt=se.get(me).context;Jt.index=me,Jt.count=et,Jt.ngForOf=this._ngForOf}k.forEachIdentityChange(me=>{Xr(se.get(me.currentIndex),me)})}static ngTemplateContextGuard(k,se){return!0}}return L.\u0275fac=function(k){return new(k||L)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},L.\u0275dir=g.lG2({type:L,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),L})();function Xr(L,q){L.context.$implicit=q.item}let Ls=(()=>{class L{constructor(k,se){this._viewContainer=k,this._context=new go,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=se}set ngIf(k){this._context.$implicit=this._context.ngIf=k,this._updateView()}set ngIfThen(k){qr("ngIfThen",k),this._thenTemplateRef=k,this._thenViewRef=null,this._updateView()}set ngIfElse(k){qr("ngIfElse",k),this._elseTemplateRef=k,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(k,se){return!0}}return L.\u0275fac=function(k){return new(k||L)(g.Y36(g.s_b),g.Y36(g.Rgc))},L.\u0275dir=g.lG2({type:L,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),L})();class go{constructor(){this.$implicit=null,this.ngIf=null}}function qr(L,q){if(q&&!q.createEmbeddedView)throw new Error(`${L} must be a TemplateRef, but received '${(0,g.AaK)(q)}'.`)}class Pi{constructor(q,k){this._viewContainerRef=q,this._templateRef=k,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(q){q&&!this._created?this.create():!q&&this._created&&this.destroy()}}let zn=(()=>{class L{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(k){this._ngSwitch=k,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(k){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(k)}_matchCase(k){const se=k==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||se,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),se}_updateDefaultCases(k){if(this._defaultViews&&k!==this._defaultUsed){this._defaultUsed=k;for(let se=0;se<this._defaultViews.length;se++)this._defaultViews[se].enforceState(k)}}}return L.\u0275fac=function(k){return new(k||L)},L.\u0275dir=g.lG2({type:L,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),L})(),$n=(()=>{class L{constructor(k,se,me){this.ngSwitch=me,me._addCase(),this._view=new Pi(k,se)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return L.\u0275fac=function(k){return new(k||L)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(zn,9))},L.\u0275dir=g.lG2({type:L,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),L})(),xr=(()=>{class L{constructor(k,se,me){me._addDefault(new Pi(k,se))}}return L.\u0275fac=function(k){return new(k||L)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(zn,9))},L.\u0275dir=g.lG2({type:L,selectors:[["","ngSwitchDefault",""]],standalone:!0}),L})(),Ke=(()=>{class L{constructor(k,se,me){this._ngEl=k,this._differs=se,this._renderer=me,this._ngStyle=null,this._differ=null}set ngStyle(k){this._ngStyle=k,!this._differ&&k&&(this._differ=this._differs.find(k).create())}ngDoCheck(){if(this._differ){const k=this._differ.diff(this._ngStyle);k&&this._applyChanges(k)}}_setStyle(k,se){const[me,et]=k.split("."),ft=-1===me.indexOf("-")?void 0:g.JOm.DashCase;null!=se?this._renderer.setStyle(this._ngEl.nativeElement,me,et?`${se}${et}`:se,ft):this._renderer.removeStyle(this._ngEl.nativeElement,me,ft)}_applyChanges(k){k.forEachRemovedItem(se=>this._setStyle(se.key,null)),k.forEachAddedItem(se=>this._setStyle(se.key,se.currentValue)),k.forEachChangedItem(se=>this._setStyle(se.key,se.currentValue))}}return L.\u0275fac=function(k){return new(k||L)(g.Y36(g.SBq),g.Y36(g.aQg),g.Y36(g.Qsj))},L.\u0275dir=g.lG2({type:L,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),L})(),pt=(()=>{class L{constructor(k){this._viewContainerRef=k,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(k){if(k.ngTemplateOutlet||k.ngTemplateOutletInjector){const se=this._viewContainerRef;if(this._viewRef&&se.remove(se.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:me,ngTemplateOutletContext:et,ngTemplateOutletInjector:ft}=this;this._viewRef=se.createEmbeddedView(me,et,ft?{injector:ft}:void 0)}else this._viewRef=null}else this._viewRef&&k.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return L.\u0275fac=function(k){return new(k||L)(g.Y36(g.s_b))},L.\u0275dir=g.lG2({type:L,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[g.TTD]}),L})();function Vt(L,q){return new g.vHH(2100,!1)}class Bn{createSubscription(q,k){return q.subscribe({next:k,error:se=>{throw se}})}dispose(q){q.unsubscribe()}}class Ar{createSubscription(q,k){return q.then(k,se=>{throw se})}dispose(q){}}const Sr=new Ar,Si=new Bn;let mr=(()=>{class L{constructor(k){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=k}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(k){return this._obj?k!==this._obj?(this._dispose(),this.transform(k)):this._latestValue:(k&&this._subscribe(k),this._latestValue)}_subscribe(k){this._obj=k,this._strategy=this._selectStrategy(k),this._subscription=this._strategy.createSubscription(k,se=>this._updateLatestValue(k,se))}_selectStrategy(k){if((0,g.QGY)(k))return Sr;if((0,g.F4k)(k))return Si;throw Vt()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(k,se){k===this._obj&&(this._latestValue=se,this._ref.markForCheck())}}return L.\u0275fac=function(k){return new(k||L)(g.Y36(g.sBO,16))},L.\u0275pipe=g.Yjl({name:"async",type:L,pure:!1,standalone:!0}),L})(),Ur=(()=>{class L{transform(k){if(null==k)return null;if("string"!=typeof k)throw Vt();return k.toLowerCase()}}return L.\u0275fac=function(k){return new(k||L)},L.\u0275pipe=g.Yjl({name:"lowercase",type:L,pure:!0,standalone:!0}),L})();const Ss=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let Hs=(()=>{class L{transform(k){if(null==k)return null;if("string"!=typeof k)throw Vt();return k.replace(Ss,se=>se[0].toUpperCase()+se.slice(1).toLowerCase())}}return L.\u0275fac=function(k){return new(k||L)},L.\u0275pipe=g.Yjl({name:"titlecase",type:L,pure:!0,standalone:!0}),L})(),$s=(()=>{class L{transform(k){if(null==k)return null;if("string"!=typeof k)throw Vt();return k.toUpperCase()}}return L.\u0275fac=function(k){return new(k||L)},L.\u0275pipe=g.Yjl({name:"uppercase",type:L,pure:!0,standalone:!0}),L})();const Gs=new g.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let rr=(()=>{class L{constructor(k,se){this.locale=k,this.defaultTimezone=se}transform(k,se="mediumDate",me,et){var ft;if(null==k||""===k||k!=k)return null;try{return ht(k,se,et||this.locale,null!==(ft=null!=me?me:this.defaultTimezone)&&void 0!==ft?ft:void 0)}catch(Jt){throw Vt()}}}return L.\u0275fac=function(k){return new(k||L)(g.Y36(g.soG,16),g.Y36(Gs,24))},L.\u0275pipe=g.Yjl({name:"date",type:L,pure:!0,standalone:!0}),L})();const bs=/#/g;let mo=(()=>{class L{constructor(k){this._localization=k}transform(k,se,me){if(null==k)return"";if("object"!=typeof se||null===se)throw Vt();return se[function In(L,q,k,se){let me=`=${L}`;if(q.indexOf(me)>-1||(me=k.getPluralCategory(L,se),q.indexOf(me)>-1))return me;if(q.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${L}"`)}(k,Object.keys(se),this._localization,me)].replace(bs,k.toString())}}return L.\u0275fac=function(k){return new(k||L)(g.Y36(Hr,16))},L.\u0275pipe=g.Yjl({name:"i18nPlural",type:L,pure:!0,standalone:!0}),L})(),Zi=(()=>{class L{transform(k,se){if(null==k)return"";if("object"!=typeof se||"string"!=typeof k)throw Vt();return se.hasOwnProperty(k)?se[k]:se.hasOwnProperty("other")?se.other:""}}return L.\u0275fac=function(k){return new(k||L)},L.\u0275pipe=g.Yjl({name:"i18nSelect",type:L,pure:!0,standalone:!0}),L})(),pi=(()=>{class L{transform(k){return JSON.stringify(k,null,2)}}return L.\u0275fac=function(k){return new(k||L)},L.\u0275pipe=g.Yjl({name:"json",type:L,pure:!1,standalone:!0}),L})(),gi=(()=>{class L{constructor(k){this.differs=k,this.keyValues=[],this.compareFn=ki}transform(k,se=ki){if(!k||!(k instanceof Map)&&"object"!=typeof k)return null;this.differ||(this.differ=this.differs.find(k).create());const me=this.differ.diff(k),et=se!==this.compareFn;return me&&(this.keyValues=[],me.forEachItem(ft=>{this.keyValues.push(function As(L,q){return{key:L,value:q}}(ft.key,ft.currentValue))})),(me||et)&&(this.keyValues.sort(se),this.compareFn=se),this.keyValues}}return L.\u0275fac=function(k){return new(k||L)(g.Y36(g.aQg,16))},L.\u0275pipe=g.Yjl({name:"keyvalue",type:L,pure:!1,standalone:!0}),L})();function ki(L,q){const k=L.key,se=q.key;if(k===se)return 0;if(void 0===k)return 1;if(void 0===se)return-1;if(null===k)return 1;if(null===se)return-1;if("string"==typeof k&&"string"==typeof se)return k<se?-1:1;if("number"==typeof k&&"number"==typeof se)return k-se;if("boolean"==typeof k&&"boolean"==typeof se)return k<se?-1:1;const me=String(k),et=String(se);return me==et?0:me<et?-1:1}let Jn=(()=>{class L{constructor(k){this._locale=k}transform(k,se,me){if(!Ks(k))return null;me=me||this._locale;try{return function Ut(L,q,k){return Se(L,_n(jr(q,Nt.Decimal),Dn(q,qe.MinusSign)),q,qe.Group,qe.Decimal,k)}(Ro(k),me,se)}catch(et){throw Vt()}}}return L.\u0275fac=function(k){return new(k||L)(g.Y36(g.soG,16))},L.\u0275pipe=g.Yjl({name:"number",type:L,pure:!0,standalone:!0}),L})(),hs=(()=>{class L{constructor(k){this._locale=k}transform(k,se,me){if(!Ks(k))return null;me=me||this._locale;try{return function gt(L,q,k){return Se(L,_n(jr(q,Nt.Percent),Dn(q,qe.MinusSign)),q,qe.Group,qe.Decimal,k,!0).replace(new RegExp("%","g"),Dn(q,qe.PercentSign))}(Ro(k),me,se)}catch(et){throw Vt()}}}return L.\u0275fac=function(k){return new(k||L)(g.Y36(g.soG,16))},L.\u0275pipe=g.Yjl({name:"percent",type:L,pure:!0,standalone:!0}),L})(),Ws=(()=>{class L{constructor(k,se="USD"){this._locale=k,this._defaultCurrencyCode=se}transform(k,se=this._defaultCurrencyCode,me="symbol",et,ft){if(!Ks(k))return null;ft=ft||this._locale,"boolean"==typeof me&&(me=me?"symbol":"code");let Jt=se||this._defaultCurrencyCode;"code"!==me&&(Jt="symbol"===me||"symbol-narrow"===me?function cs(L,q,k="en"){const se=function it(L){return(0,g.cg1)(L)[g.wAp.Currencies]}(k)[L]||Je[L]||[],me=se[1];return"narrow"===q&&"string"==typeof me?me:se[0]||L}(Jt,"symbol"===me?"wide":"narrow",ft):me);try{return function Pe(L,q,k,se,me){const ft=_n(jr(q,Nt.Currency),Dn(q,qe.MinusSign));return ft.minFrac=function Ei(L){let q;const k=Je[L];return k&&(q=k[2]),"number"==typeof q?q:2}(se),ft.maxFrac=ft.minFrac,Se(L,ft,q,qe.CurrencyGroup,qe.CurrencyDecimal,me).replace("\xa4",k).replace("\xa4","").trim()}(Ro(k),ft,Jt,se,et)}catch(Mr){throw Vt()}}}return L.\u0275fac=function(k){return new(k||L)(g.Y36(g.soG,16),g.Y36(g.EJc,16))},L.\u0275pipe=g.Yjl({name:"currency",type:L,pure:!0,standalone:!0}),L})();function Ks(L){return!(null==L||""===L||L!=L)}function Ro(L){if("string"==typeof L&&!isNaN(Number(L)-parseFloat(L)))return Number(L);if("number"!=typeof L)throw new Error(`${L} is not a number`);return L}let xo=(()=>{class L{transform(k,se,me){if(null==k)return null;if(!this.supports(k))throw Vt();return k.slice(se,me)}supports(k){return"string"==typeof k||Array.isArray(k)}}return L.\u0275fac=function(k){return new(k||L)},L.\u0275pipe=g.Yjl({name:"slice",type:L,pure:!1,standalone:!0}),L})(),yo=(()=>{class L{}return L.\u0275fac=function(k){return new(k||L)},L.\u0275mod=g.oAB({type:L}),L.\u0275inj=g.cJS({}),L})();const Es="browser";function ts(L){return L===Es}let No=(()=>{class L{}return L.\u0275prov=(0,g.Yz7)({token:L,providedIn:"root",factory:()=>new Lo((0,g.LFG)(ee),window)}),L})();class Lo{constructor(q,k){this.document=q,this.window=k,this.offset=()=>[0,0]}setOffset(q){this.offset=Array.isArray(q)?()=>q:q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(q){this.supportsScrolling()&&this.window.scrollTo(q[0],q[1])}scrollToAnchor(q){if(!this.supportsScrolling())return;const k=function ei(L,q){const k=L.getElementById(q)||L.getElementsByName(q)[0];if(k)return k;if("function"==typeof L.createTreeWalker&&L.body&&(L.body.createShadowRoot||L.body.attachShadow)){const se=L.createTreeWalker(L.body,NodeFilter.SHOW_ELEMENT);let me=se.currentNode;for(;me;){const et=me.shadowRoot;if(et){const ft=et.getElementById(q)||et.querySelector(`[name="${q}"]`);if(ft)return ft}me=se.nextNode()}}return null}(this.document,q);k&&(this.scrollToElement(k),k.focus())}setHistoryScrollRestoration(q){if(this.supportScrollRestoration()){const k=this.window.history;k&&k.scrollRestoration&&(k.scrollRestoration=q)}}scrollToElement(q){const k=q.getBoundingClientRect(),se=k.left+this.window.pageXOffset,me=k.top+this.window.pageYOffset,et=this.offset();this.window.scrollTo(se-et[0],me-et[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const q=no(this.window.history)||no(Object.getPrototypeOf(this.window.history));return!(!q||!q.writable&&!q.set)}catch(q){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(q){return!1}}}function no(L){return Object.getOwnPropertyDescriptor(L,"scrollRestoration")}class pn{}},520:(_e,ne,D)=>{D.d(ne,{Ed:()=>oi,JF:()=>Ei,LE:()=>xe,TP:()=>nr,UA:()=>qe,WM:()=>Q,Zn:()=>ut,eN:()=>Tt});var g=D(9808),I=D(5e3),J=D(9646),B=D(9751),Y=D(4351),re=D(9300),ee=D(4004);class z{}class oe{}class Q{constructor(Te){this.normalizedNames=new Map,this.lazyUpdate=null,Te?this.lazyInit="string"==typeof Te?()=>{this.headers=new Map,Te.split("\n").forEach(ye=>{const Xe=ye.indexOf(":");if(Xe>0){const ht=ye.slice(0,Xe),an=ht.toLowerCase(),dn=ye.slice(Xe+1).trim();this.maybeSetNormalizedName(ht,an),this.headers.has(an)?this.headers.get(an).push(dn):this.headers.set(an,[dn])}})}:()=>{this.headers=new Map,Object.keys(Te).forEach(ye=>{let Xe=Te[ye];const ht=ye.toLowerCase();"string"==typeof Xe&&(Xe=[Xe]),Xe.length>0&&(this.headers.set(ht,Xe),this.maybeSetNormalizedName(ye,ht))})}:this.headers=new Map}has(Te){return this.init(),this.headers.has(Te.toLowerCase())}get(Te){this.init();const ye=this.headers.get(Te.toLowerCase());return ye&&ye.length>0?ye[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Te){return this.init(),this.headers.get(Te.toLowerCase())||null}append(Te,ye){return this.clone({name:Te,value:ye,op:"a"})}set(Te,ye){return this.clone({name:Te,value:ye,op:"s"})}delete(Te,ye){return this.clone({name:Te,value:ye,op:"d"})}maybeSetNormalizedName(Te,ye){this.normalizedNames.has(ye)||this.normalizedNames.set(ye,Te)}init(){this.lazyInit&&(this.lazyInit instanceof Q?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Te=>this.applyUpdate(Te)),this.lazyUpdate=null))}copyFrom(Te){Te.init(),Array.from(Te.headers.keys()).forEach(ye=>{this.headers.set(ye,Te.headers.get(ye)),this.normalizedNames.set(ye,Te.normalizedNames.get(ye))})}clone(Te){const ye=new Q;return ye.lazyInit=this.lazyInit&&this.lazyInit instanceof Q?this.lazyInit:this,ye.lazyUpdate=(this.lazyUpdate||[]).concat([Te]),ye}applyUpdate(Te){const ye=Te.name.toLowerCase();switch(Te.op){case"a":case"s":let Xe=Te.value;if("string"==typeof Xe&&(Xe=[Xe]),0===Xe.length)return;this.maybeSetNormalizedName(Te.name,ye);const ht=("a"===Te.op?this.headers.get(ye):void 0)||[];ht.push(...Xe),this.headers.set(ye,ht);break;case"d":const an=Te.value;if(an){let dn=this.headers.get(ye);if(!dn)return;dn=dn.filter(er=>-1===an.indexOf(er)),0===dn.length?(this.headers.delete(ye),this.normalizedNames.delete(ye)):this.headers.set(ye,dn)}else this.headers.delete(ye),this.normalizedNames.delete(ye)}}forEach(Te){this.init(),Array.from(this.normalizedNames.keys()).forEach(ye=>Te(this.normalizedNames.get(ye),this.headers.get(ye)))}}class ue{encodeKey(Te){return Be(Te)}encodeValue(Te){return Be(Te)}decodeKey(Te){return decodeURIComponent(Te)}decodeValue(Te){return decodeURIComponent(Te)}}const Ge=/%(\d[a-f0-9])/gi,ve={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Be(je){return encodeURIComponent(je).replace(Ge,(Te,ye)=>{var Xe;return null!==(Xe=ve[ye])&&void 0!==Xe?Xe:Te})}function He(je){return`${je}`}class xe{constructor(Te={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Te.encoder||new ue,Te.fromString){if(Te.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Re(je,Te){const ye=new Map;return je.length>0&&je.replace(/^\?/,"").split("&").forEach(ht=>{const an=ht.indexOf("="),[dn,er]=-1==an?[Te.decodeKey(ht),""]:[Te.decodeKey(ht.slice(0,an)),Te.decodeValue(ht.slice(an+1))],Lt=ye.get(dn)||[];Lt.push(er),ye.set(dn,Lt)}),ye}(Te.fromString,this.encoder)}else Te.fromObject?(this.map=new Map,Object.keys(Te.fromObject).forEach(ye=>{const Xe=Te.fromObject[ye],ht=Array.isArray(Xe)?Xe.map(He):[He(Xe)];this.map.set(ye,ht)})):this.map=null}has(Te){return this.init(),this.map.has(Te)}get(Te){this.init();const ye=this.map.get(Te);return ye?ye[0]:null}getAll(Te){return this.init(),this.map.get(Te)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Te,ye){return this.clone({param:Te,value:ye,op:"a"})}appendAll(Te){const ye=[];return Object.keys(Te).forEach(Xe=>{const ht=Te[Xe];Array.isArray(ht)?ht.forEach(an=>{ye.push({param:Xe,value:an,op:"a"})}):ye.push({param:Xe,value:ht,op:"a"})}),this.clone(ye)}set(Te,ye){return this.clone({param:Te,value:ye,op:"s"})}delete(Te,ye){return this.clone({param:Te,value:ye,op:"d"})}toString(){return this.init(),this.keys().map(Te=>{const ye=this.encoder.encodeKey(Te);return this.map.get(Te).map(Xe=>ye+"="+this.encoder.encodeValue(Xe)).join("&")}).filter(Te=>""!==Te).join("&")}clone(Te){const ye=new xe({encoder:this.encoder});return ye.cloneFrom=this.cloneFrom||this,ye.updates=(this.updates||[]).concat(Te),ye}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Te=>this.map.set(Te,this.cloneFrom.map.get(Te))),this.updates.forEach(Te=>{switch(Te.op){case"a":case"s":const ye=("a"===Te.op?this.map.get(Te.param):void 0)||[];ye.push(He(Te.value)),this.map.set(Te.param,ye);break;case"d":if(void 0===Te.value){this.map.delete(Te.param);break}{let Xe=this.map.get(Te.param)||[];const ht=Xe.indexOf(He(Te.value));-1!==ht&&Xe.splice(ht,1),Xe.length>0?this.map.set(Te.param,Xe):this.map.delete(Te.param)}}}),this.cloneFrom=this.updates=null)}}class mt{constructor(){this.map=new Map}set(Te,ye){return this.map.set(Te,ye),this}get(Te){return this.map.has(Te)||this.map.set(Te,Te.defaultValue()),this.map.get(Te)}delete(Te){return this.map.delete(Te),this}has(Te){return this.map.has(Te)}keys(){return this.map.keys()}}function Oe(je){return"undefined"!=typeof ArrayBuffer&&je instanceof ArrayBuffer}function yt(je){return"undefined"!=typeof Blob&&je instanceof Blob}function It(je){return"undefined"!=typeof FormData&&je instanceof FormData}class Nt{constructor(Te,ye,Xe,ht){let an;if(this.url=ye,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Te.toUpperCase(),function Ue(je){switch(je){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ht?(this.body=void 0!==Xe?Xe:null,an=ht):an=Xe,an&&(this.reportProgress=!!an.reportProgress,this.withCredentials=!!an.withCredentials,an.responseType&&(this.responseType=an.responseType),an.headers&&(this.headers=an.headers),an.context&&(this.context=an.context),an.params&&(this.params=an.params)),this.headers||(this.headers=new Q),this.context||(this.context=new mt),this.params){const dn=this.params.toString();if(0===dn.length)this.urlWithParams=ye;else{const er=ye.indexOf("?");this.urlWithParams=ye+(-1===er?"?":er<ye.length-1?"&":"")+dn}}else this.params=new xe,this.urlWithParams=ye}serializeBody(){return null===this.body?null:Oe(this.body)||yt(this.body)||It(this.body)||function Je(je){return"undefined"!=typeof URLSearchParams&&je instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof xe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||It(this.body)?null:yt(this.body)?this.body.type||null:Oe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Te={}){var ye;const Xe=Te.method||this.method,ht=Te.url||this.url,an=Te.responseType||this.responseType,dn=void 0!==Te.body?Te.body:this.body,er=void 0!==Te.withCredentials?Te.withCredentials:this.withCredentials,Lt=void 0!==Te.reportProgress?Te.reportProgress:this.reportProgress;let Nn=Te.headers||this.headers,Wn=Te.params||this.params;const zr=null!==(ye=Te.context)&&void 0!==ye?ye:this.context;return void 0!==Te.setHeaders&&(Nn=Object.keys(Te.setHeaders).reduce((On,fn)=>On.set(fn,Te.setHeaders[fn]),Nn)),Te.setParams&&(Wn=Object.keys(Te.setParams).reduce((On,fn)=>On.set(fn,Te.setParams[fn]),Wn)),new Nt(Xe,ht,dn,{params:Wn,headers:Nn,context:zr,reportProgress:Lt,responseType:an,withCredentials:er})}}var wt=(()=>((wt=wt||{})[wt.Sent=0]="Sent",wt[wt.UploadProgress=1]="UploadProgress",wt[wt.ResponseHeader=2]="ResponseHeader",wt[wt.DownloadProgress=3]="DownloadProgress",wt[wt.Response=4]="Response",wt[wt.User=5]="User",wt))();class Qe{constructor(Te,ye=200,Xe="OK"){this.headers=Te.headers||new Q,this.status=void 0!==Te.status?Te.status:ye,this.statusText=Te.statusText||Xe,this.url=Te.url||null,this.ok=this.status>=200&&this.status<300}}class Ye extends Qe{constructor(Te={}){super(Te),this.type=wt.ResponseHeader}clone(Te={}){return new Ye({headers:Te.headers||this.headers,status:void 0!==Te.status?Te.status:this.status,statusText:Te.statusText||this.statusText,url:Te.url||this.url||void 0})}}class ut extends Qe{constructor(Te={}){super(Te),this.type=wt.Response,this.body=void 0!==Te.body?Te.body:null}clone(Te={}){return new ut({body:void 0!==Te.body?Te.body:this.body,headers:Te.headers||this.headers,status:void 0!==Te.status?Te.status:this.status,statusText:Te.statusText||this.statusText,url:Te.url||this.url||void 0})}}class qe extends Qe{constructor(Te){super(Te,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Te.url||"(unknown url)"}`:`Http failure response for ${Te.url||"(unknown url)"}: ${Te.status} ${Te.statusText}`,this.error=Te.error||null}}function Rt(je,Te){return{body:Te,headers:je.headers,context:je.context,observe:je.observe,params:je.params,reportProgress:je.reportProgress,responseType:je.responseType,withCredentials:je.withCredentials}}let Tt=(()=>{class je{constructor(ye){this.handler=ye}request(ye,Xe,ht={}){let an;if(ye instanceof Nt)an=ye;else{let Lt,Nn;Lt=ht.headers instanceof Q?ht.headers:new Q(ht.headers),ht.params&&(Nn=ht.params instanceof xe?ht.params:new xe({fromObject:ht.params})),an=new Nt(ye,Xe,void 0!==ht.body?ht.body:null,{headers:Lt,context:ht.context,params:Nn,reportProgress:ht.reportProgress,responseType:ht.responseType||"json",withCredentials:ht.withCredentials})}const dn=(0,J.of)(an).pipe((0,Y.b)(Lt=>this.handler.handle(Lt)));if(ye instanceof Nt||"events"===ht.observe)return dn;const er=dn.pipe((0,re.h)(Lt=>Lt instanceof ut));switch(ht.observe||"body"){case"body":switch(an.responseType){case"arraybuffer":return er.pipe((0,ee.U)(Lt=>{if(null!==Lt.body&&!(Lt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Lt.body}));case"blob":return er.pipe((0,ee.U)(Lt=>{if(null!==Lt.body&&!(Lt.body instanceof Blob))throw new Error("Response is not a Blob.");return Lt.body}));case"text":return er.pipe((0,ee.U)(Lt=>{if(null!==Lt.body&&"string"!=typeof Lt.body)throw new Error("Response is not a string.");return Lt.body}));default:return er.pipe((0,ee.U)(Lt=>Lt.body))}case"response":return er;default:throw new Error(`Unreachable: unhandled observe type ${ht.observe}}`)}}delete(ye,Xe={}){return this.request("DELETE",ye,Xe)}get(ye,Xe={}){return this.request("GET",ye,Xe)}head(ye,Xe={}){return this.request("HEAD",ye,Xe)}jsonp(ye,Xe){return this.request("JSONP",ye,{params:(new xe).append(Xe,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ye,Xe={}){return this.request("OPTIONS",ye,Xe)}patch(ye,Xe,ht={}){return this.request("PATCH",ye,Rt(ht,Xe))}post(ye,Xe,ht={}){return this.request("POST",ye,Rt(ht,Xe))}put(ye,Xe,ht={}){return this.request("PUT",ye,Rt(ht,Xe))}}return je.\u0275fac=function(ye){return new(ye||je)(I.LFG(z))},je.\u0275prov=I.Yz7({token:je,factory:je.\u0275fac}),je})();class hn{constructor(Te,ye){this.next=Te,this.interceptor=ye}handle(Te){return this.interceptor.intercept(Te,this.next)}}const nr=new I.OlP("HTTP_INTERCEPTORS");let vr,qt=(()=>{class je{intercept(ye,Xe){return Xe.handle(ye)}}return je.\u0275fac=function(ye){return new(ye||je)},je.\u0275prov=I.Yz7({token:je,factory:je.\u0275fac}),je})(),St=0;class Dn{}let jr=(()=>{class je{constructor(ye,Xe){this.callbackMap=ye,this.document=Xe,this.resolvedPromise=Promise.resolve()}nextCallback(){return"ng_jsonp_callback_"+St++}handle(ye){if("JSONP"!==ye.method)throw new Error("JSONP requests must use JSONP request method.");if("json"!==ye.responseType)throw new Error("JSONP requests must use Json response type.");if(ye.headers.keys().length>0)throw new Error("JSONP requests do not support headers.");return new B.y(Xe=>{const ht=this.nextCallback(),an=ye.urlWithParams.replace(/=JSONP_CALLBACK(&|$)/,`=${ht}$1`),dn=this.document.createElement("script");dn.src=an;let er=null,Lt=!1;this.callbackMap[ht]=On=>{delete this.callbackMap[ht],er=On,Lt=!0};const Nn=()=>{dn.parentNode&&dn.parentNode.removeChild(dn),delete this.callbackMap[ht]};return dn.addEventListener("load",On=>{this.resolvedPromise.then(()=>{Nn(),Lt?(Xe.next(new ut({body:er,status:200,statusText:"OK",url:an})),Xe.complete()):Xe.error(new qe({url:an,status:0,statusText:"JSONP Error",error:new Error("JSONP injected script did not invoke callback.")}))})}),dn.addEventListener("error",On=>{Nn(),Xe.error(new qe({error:On,status:0,statusText:"JSONP Error",url:an}))}),this.document.body.appendChild(dn),Xe.next({type:wt.Sent}),()=>{Lt||this.removeListeners(dn),Nn()}})}removeListeners(ye){vr||(vr=this.document.implementation.createHTMLDocument()),vr.adoptNode(ye)}}return je.\u0275fac=function(ye){return new(ye||je)(I.LFG(Dn),I.LFG(g.K0))},je.\u0275prov=I.Yz7({token:je,factory:je.\u0275fac}),je})(),Ct=(()=>{class je{constructor(ye){this.jsonp=ye}intercept(ye,Xe){return"JSONP"===ye.method?this.jsonp.handle(ye):Xe.handle(ye)}}return je.\u0275fac=function(ye){return new(ye||je)(I.LFG(jr))},je.\u0275prov=I.Yz7({token:je,factory:je.\u0275fac}),je})();const st=/^\)\]\}',?\n/;let it=(()=>{class je{constructor(ye){this.xhrFactory=ye}handle(ye){if("JSONP"===ye.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new B.y(Xe=>{const ht=this.xhrFactory.build();if(ht.open(ye.method,ye.urlWithParams),ye.withCredentials&&(ht.withCredentials=!0),ye.headers.forEach((fn,Kn)=>ht.setRequestHeader(fn,Kn.join(","))),ye.headers.has("Accept")||ht.setRequestHeader("Accept","application/json, text/plain, */*"),!ye.headers.has("Content-Type")){const fn=ye.detectContentTypeHeader();null!==fn&&ht.setRequestHeader("Content-Type",fn)}if(ye.responseType){const fn=ye.responseType.toLowerCase();ht.responseType="json"!==fn?fn:"text"}const an=ye.serializeBody();let dn=null;const er=()=>{if(null!==dn)return dn;const fn=ht.statusText||"OK",Kn=new Q(ht.getAllResponseHeaders()),Yr=function Le(je){return"responseURL"in je&&je.responseURL?je.responseURL:/^X-Request-URL:/m.test(je.getAllResponseHeaders())?je.getResponseHeader("X-Request-URL"):null}(ht)||ye.url;return dn=new Ye({headers:Kn,status:ht.status,statusText:fn,url:Yr}),dn},Lt=()=>{let{headers:fn,status:Kn,statusText:Yr,url:Rr}=er(),Pn=null;204!==Kn&&(Pn=void 0===ht.response?ht.responseText:ht.response),0===Kn&&(Kn=Pn?200:0);let lr=Kn>=200&&Kn<300;if("json"===ye.responseType&&"string"==typeof Pn){const hi=Pn;Pn=Pn.replace(st,"");try{Pn=""!==Pn?JSON.parse(Pn):null}catch(fi){Pn=hi,lr&&(lr=!1,Pn={error:fi,text:Pn})}}lr?(Xe.next(new ut({body:Pn,headers:fn,status:Kn,statusText:Yr,url:Rr||void 0})),Xe.complete()):Xe.error(new qe({error:Pn,headers:fn,status:Kn,statusText:Yr,url:Rr||void 0}))},Nn=fn=>{const{url:Kn}=er(),Yr=new qe({error:fn,status:ht.status||0,statusText:ht.statusText||"Unknown Error",url:Kn||void 0});Xe.error(Yr)};let Wn=!1;const zr=fn=>{Wn||(Xe.next(er()),Wn=!0);let Kn={type:wt.DownloadProgress,loaded:fn.loaded};fn.lengthComputable&&(Kn.total=fn.total),"text"===ye.responseType&&!!ht.responseText&&(Kn.partialText=ht.responseText),Xe.next(Kn)},On=fn=>{let Kn={type:wt.UploadProgress,loaded:fn.loaded};fn.lengthComputable&&(Kn.total=fn.total),Xe.next(Kn)};return ht.addEventListener("load",Lt),ht.addEventListener("error",Nn),ht.addEventListener("timeout",Nn),ht.addEventListener("abort",Nn),ye.reportProgress&&(ht.addEventListener("progress",zr),null!==an&&ht.upload&&ht.upload.addEventListener("progress",On)),ht.send(an),Xe.next({type:wt.Sent}),()=>{ht.removeEventListener("error",Nn),ht.removeEventListener("abort",Nn),ht.removeEventListener("load",Lt),ht.removeEventListener("timeout",Nn),ye.reportProgress&&(ht.removeEventListener("progress",zr),null!==an&&ht.upload&&ht.upload.removeEventListener("progress",On)),ht.readyState!==ht.DONE&&ht.abort()}})}}return je.\u0275fac=function(ye){return new(ye||je)(I.LFG(g.JF))},je.\u0275prov=I.Yz7({token:je,factory:je.\u0275fac}),je})();const $t=new I.OlP("XSRF_COOKIE_NAME"),on=new I.OlP("XSRF_HEADER_NAME");class Fn{}let Fr=(()=>{class je{constructor(ye,Xe,ht){this.doc=ye,this.platform=Xe,this.cookieName=ht,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ye=this.doc.cookie||"";return ye!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,g.Mx)(ye,this.cookieName),this.lastCookieString=ye),this.lastToken}}return je.\u0275fac=function(ye){return new(ye||je)(I.LFG(g.K0),I.LFG(I.Lbi),I.LFG($t))},je.\u0275prov=I.Yz7({token:je,factory:je.\u0275fac}),je})(),Li=(()=>{class je{constructor(ye,Xe){this.tokenService=ye,this.headerName=Xe}intercept(ye,Xe){const ht=ye.url.toLowerCase();if("GET"===ye.method||"HEAD"===ye.method||ht.startsWith("http://")||ht.startsWith("https://"))return Xe.handle(ye);const an=this.tokenService.getToken();return null!==an&&!ye.headers.has(this.headerName)&&(ye=ye.clone({headers:ye.headers.set(this.headerName,an)})),Xe.handle(ye)}}return je.\u0275fac=function(ye){return new(ye||je)(I.LFG(Fn),I.LFG(on))},je.\u0275prov=I.Yz7({token:je,factory:je.\u0275fac}),je})(),zt=(()=>{class je{constructor(ye,Xe){this.backend=ye,this.injector=Xe,this.chain=null}handle(ye){if(null===this.chain){const Xe=this.injector.get(nr,[]);this.chain=Xe.reduceRight((ht,an)=>new hn(ht,an),this.backend)}return this.chain.handle(ye)}}return je.\u0275fac=function(ye){return new(ye||je)(I.LFG(oe),I.LFG(I.zs3))},je.\u0275prov=I.Yz7({token:je,factory:je.\u0275fac}),je})();function cs(){return"object"==typeof window?window:{}}let gr=(()=>{class je{static disable(){return{ngModule:je,providers:[{provide:Li,useClass:qt}]}}static withOptions(ye={}){return{ngModule:je,providers:[ye.cookieName?{provide:$t,useValue:ye.cookieName}:[],ye.headerName?{provide:on,useValue:ye.headerName}:[]]}}}return je.\u0275fac=function(ye){return new(ye||je)},je.\u0275mod=I.oAB({type:je}),je.\u0275inj=I.cJS({providers:[Li,{provide:nr,useExisting:Li,multi:!0},{provide:Fn,useClass:Fr},{provide:$t,useValue:"XSRF-TOKEN"},{provide:on,useValue:"X-XSRF-TOKEN"}]}),je})(),Ei=(()=>{class je{}return je.\u0275fac=function(ye){return new(ye||je)},je.\u0275mod=I.oAB({type:je}),je.\u0275inj=I.cJS({providers:[Tt,{provide:z,useClass:zt},it,{provide:oe,useExisting:it}],imports:[gr.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),je})(),oi=(()=>{class je{}return je.\u0275fac=function(ye){return new(ye||je)},je.\u0275mod=I.oAB({type:je}),je.\u0275inj=I.cJS({providers:[jr,{provide:Dn,useFactory:cs},{provide:nr,useClass:Ct,multi:!0}]}),je})()},5e3:(_e,ne,D)=>{D.d(ne,{$8M:()=>lt,$Z:()=>Uh,AFp:()=>o0,ALo:()=>CE,AaK:()=>z,Akn:()=>_u,AsE:()=>fg,B6R:()=>Pn,BQk:()=>zd,CHM:()=>Os,CRH:()=>LE,CZH:()=>cy,CqO:()=>ig,D6c:()=>MI,DdM:()=>hE,Dn7:()=>TE,EJc:()=>GC,EiD:()=>xs,EpF:()=>Um,F$t:()=>Qd,F4k:()=>Vm,FYo:()=>Rf,FiY:()=>fl,G48:()=>dI,G7q:()=>SE,Gf:()=>xE,GfV:()=>mc,GkF:()=>Yd,Gpc:()=>le,Gre:()=>C_,HOy:()=>pg,HTZ:()=>mE,Hsn:()=>qd,IAx:()=>ga,Ikx:()=>Po,IyS:()=>w_,JOm:()=>yu,JVY:()=>$o,Jf7:()=>Uf,Jzz:()=>y,KtG:()=>qo,L6k:()=>Wa,LAX:()=>pu,LFG:()=>Yi,LSH:()=>Zs,Lbi:()=>BC,Lck:()=>HD,MAs:()=>Fm,MGl:()=>cd,MMx:()=>x_,MT6:()=>I_,NdJ:()=>gf,O4$:()=>Jt,OlP:()=>ni,Oqu:()=>Jm,PXZ:()=>sI,PiD:()=>la,Q6J:()=>tg,QGY:()=>rg,QP$:()=>qn,QbO:()=>jC,Qsj:()=>ph,R0b:()=>vu,RDi:()=>Iu,Rgc:()=>Cg,SBq:()=>gc,Sil:()=>KC,Suo:()=>NE,TTD:()=>hs,TgZ:()=>Rc,Tol:()=>Lc,Udp:()=>dg,VKq:()=>fE,W1O:()=>VE,WLB:()=>pE,X6Q:()=>cI,XFs:()=>zt,Xpm:()=>Rr,Xts:()=>Go,Y36:()=>td,YKP:()=>rE,YNc:()=>Kd,Yjl:()=>vt,Yz7:()=>ir,Z0I:()=>Ct,ZZ4:()=>rv,_Bn:()=>nE,_UZ:()=>rc,_Vd:()=>Jl,_c5:()=>bI,_uU:()=>__,aQg:()=>iv,c2e:()=>HC,cJS:()=>Dn,cg1:()=>T_,d8E:()=>Fc,dDg:()=>tI,dqk:()=>ht,eBb:()=>xl,eFA:()=>v0,ekj:()=>th,eoX:()=>m0,evT:()=>Rg,f3M:()=>Hl,fQ9:()=>$r,g9A:()=>l0,gL8:()=>Xm,h0i:()=>bf,hGG:()=>AI,hij:()=>wf,iGM:()=>RE,ifc:()=>Xe,ip1:()=>s0,jDz:()=>sE,kEZ:()=>gE,kL8:()=>Av,kcU:()=>bn,lG2:()=>Fe,lcZ:()=>IE,lnq:()=>fd,lqb:()=>Mu,lri:()=>p0,mCW:()=>a,n5z:()=>su,oAB:()=>fi,oJD:()=>za,oxw:()=>yf,pB0:()=>Ka,q3G:()=>kr,q4F:()=>vd,qLn:()=>ls,qOj:()=>Ud,qZA:()=>pf,qzn:()=>Ga,rWj:()=>g0,s9C:()=>_f,sBO:()=>hI,sIi:()=>jd,s_b:()=>ay,soG:()=>dy,tBr:()=>Rl,tb:()=>u0,tp0:()=>ua,uIk:()=>Jp,uOi:()=>Zl,vHH:()=>ve,vpe:()=>oc,wAp:()=>dr,xi3:()=>wE,xp6:()=>em,ynx:()=>ic,z2F:()=>hy,z3N:()=>da,zSh:()=>cc,zs3:()=>qu});var g=D(7579),I=D(727),J=D(9751),B=D(6451),Y=D(3099);function re(n){for(let r in n)if(n[r]===re)return r;throw Error("Could not find renamed property on target object.")}function ee(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function z(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(z).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function oe(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const Q=re({__forward_ref__:re});function le(n){return n.__forward_ref__=le,n.toString=function(){return z(this())},n}function ue(n){return Re(n)?n():n}function Re(n){return"function"==typeof n&&n.hasOwnProperty(Q)&&n.__forward_ref__===le}class ve extends Error{constructor(r,s){super(function Be(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function He(n){return"string"==typeof n?n:null==n?"":String(n)}function Oe(n,r){throw new ve(-201,!1)}function qt(n,r){null==n&&function St(n,r,s,u){throw new Error(`ASSERTION ERROR: ${n}`+(null==u?"":` [Expected=> ${s} ${u} ${r} <=Actual]`))}(r,n,null,"!=")}function ir(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Dn(n){return{providers:n.providers||[],imports:n.imports||[]}}function jr(n){return st(n,on)||st(n,Fr)}function Ct(n){return null!==jr(n)}function st(n,r){return n.hasOwnProperty(r)?n[r]:null}function $t(n){return n&&(n.hasOwnProperty(Fn)||n.hasOwnProperty(Li))?n[Fn]:null}const on=re({\u0275prov:re}),Fn=re({\u0275inj:re}),Fr=re({ngInjectableDef:re}),Li=re({ngInjectorDef:re});var zt=(()=>((zt=zt||{})[zt.Default=0]="Default",zt[zt.Host=1]="Host",zt[zt.Self=2]="Self",zt[zt.SkipSelf=4]="SkipSelf",zt[zt.Optional=8]="Optional",zt))();let si;function gr(n){const r=si;return si=n,r}function Ei(n,r,s){const u=jr(n);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:s&zt.Optional?null:void 0!==r?r:void Oe(z(n))}function Pr(n){return{toString:n}.toString()}var je=(()=>((je=je||{})[je.OnPush=0]="OnPush",je[je.Default=1]="Default",je))(),Xe=(()=>{return(n=Xe||(Xe={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Xe;var n})();const ht=(()=>"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self)(),er={},Lt=[],Nn=re({\u0275cmp:re}),Wn=re({\u0275dir:re}),zr=re({\u0275pipe:re}),On=re({\u0275mod:re}),fn=re({\u0275fac:re}),Kn=re({__NG_ELEMENT_ID__:re});let Yr=0;function Rr(n){return Pr(()=>{const s=!0===n.standalone,u={},p={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===je.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Lt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Xe.Emulated,id:"c"+Yr++,styles:n.styles||Lt,_:null,setInput:null,schemas:n.schemas||null,tView:null},_=n.dependencies,w=n.features;return p.inputs=Ie(n.inputs,u),p.outputs=Ie(n.outputs),w&&w.forEach(P=>P(p)),p.directiveDefs=_?()=>("function"==typeof _?_():_).map(lr).filter(hi):null,p.pipeDefs=_?()=>("function"==typeof _?_():_).map(Xt).filter(hi):null,p})}function Pn(n,r,s){const u=n.\u0275cmp;u.directiveDefs=()=>("function"==typeof r?r():r).map(lr),u.pipeDefs=()=>("function"==typeof s?s():s).map(Xt)}function lr(n){return We(n)||Gt(n)}function hi(n){return null!==n}function fi(n){return Pr(()=>({type:n.type,bootstrap:n.bootstrap||Lt,declarations:n.declarations||Lt,imports:n.imports||Lt,exports:n.exports||Lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ie(n,r){if(null==n)return er;const s={};for(const u in n)if(n.hasOwnProperty(u)){let p=n[u],_=p;Array.isArray(p)&&(_=p[1],p=p[0]),s[p]=u,r&&(r[p]=_)}return s}const Fe=Rr;function vt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function We(n){return n[Nn]||null}function Gt(n){return n[Wn]||null}function Xt(n){return n[zr]||null}function qn(n){const r=We(n)||Gt(n)||Xt(n);return null!==r&&r.standalone}function tr(n,r){const s=n[On]||null;if(!s&&!0===r)throw new Error(`Type ${z(n)} does not have '\u0275mod' property.`);return s}function qr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Pi(n){return Array.isArray(n)&&!0===n[1]}function zn(n){return 0!=(8&n.flags)}function $n(n){return 2==(2&n.flags)}function xr(n){return 1==(1&n.flags)}function Fi(n){return null!==n.template}function De(n){return 0!=(256&n[2])}function ki(n,r){return n.hasOwnProperty(fn)?n[fn]:null}class Jn{constructor(r,s,u){this.previousValue=r,this.currentValue=s,this.firstChange=u}isFirstChange(){return this.firstChange}}function hs(){return Ws}function Ws(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ro),Ks}function Ks(){const n=zs(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===er)n.previous=r;else for(let u in r)s[u]=r[u];n.current=null,this.ngOnChanges(r)}}function Ro(n,r,s,u){const p=zs(n)||function yo(n,r){return n[xo]=r}(n,{previous:er,current:null}),_=p.current||(p.current={}),w=p.previous,P=this.declaredInputs[s],F=w[P];_[P]=new Jn(F&&F.currentValue,r,w===er),n[u]=r}hs.ngInherit=!0;const xo="__ngSimpleChanges__";function zs(n){return n[xo]||null}function Zr(n){for(;Array.isArray(n);)n=n[0];return n}function no(n,r){return Zr(r[n])}function ei(n,r){return Zr(r[n.index])}function pn(n,r){return n.data[r]}function Ys(n,r){return n[r]}function or(n,r){const s=r[n];return qr(s)?s:s[0]}function Dr(n){return 64==(64&n[2])}function ns(n,r){return null==r?null:n[r]}function Fo(n){n[18]=0}function Ms(n,r){n[5]+=r;let s=n,u=n[3];for(;null!==u&&(1===r&&1===s[5]||-1===r&&0===s[5]);)u[5]+=r,s=u,u=u[3]}const wn={lFrame:ea(null),bindingsEnabled:!0};function ko(){return wn.bindingsEnabled}function $r(){wn.bindingsEnabled=!0}function ga(){wn.bindingsEnabled=!1}function At(){return wn.lFrame.lView}function fr(){return wn.lFrame.tView}function Os(n){return wn.lFrame.contextLView=n,n[8]}function qo(n){return wn.lFrame.contextLView=null,n}function ui(){let n=$();for(;null!==n&&64===n.type;)n=n.parent;return n}function $(){return wn.lFrame.currentTNode}function x(n,r){const s=wn.lFrame;s.currentTNode=n,s.isParent=r}function te(){return wn.lFrame.isParent}function ct(){wn.lFrame.isParent=!1}function Gr(){const n=wn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Fs(){return wn.lFrame.bindingIndex}function Ps(){return wn.lFrame.bindingIndex++}function Zo(n){const r=wn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function ps(n,r){const s=wn.lFrame;s.bindingIndex=s.bindingRootIndex=n,ro(r)}function ro(n){wn.lFrame.currentDirectiveIndex=n}function ya(n){const r=wn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function Xo(){return wn.lFrame.currentQueryIndex}function io(n){wn.lFrame.currentQueryIndex=n}function ks(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Io(n,r,s){if(s&zt.SkipSelf){let p=r,_=n;for(;!(p=p.parent,null!==p||s&zt.Host||(p=ks(_),null===p||(_=_[15],10&p.type))););if(null===p)return!1;r=p,n=_}const u=wn.lFrame=qa();return u.currentTNode=r,u.lView=n,!0}function Xi(n){const r=qa(),s=n[1];wn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function qa(){const n=wn.lFrame,r=null===n?null:n.child;return null===r?ea(n):r}function ea(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function _a(){const n=wn.lFrame;return wn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const L=_a;function q(){const n=_a();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function me(){return wn.lFrame.selectedIndex}function et(n){wn.lFrame.selectedIndex=n}function ft(){const n=wn.lFrame;return pn(n.tView,n.selectedIndex)}function Jt(){wn.lFrame.currentNamespace="svg"}function bn(){!function pr(){wn.lFrame.currentNamespace=null}()}function br(n,r){for(let s=r.directiveStart,u=r.directiveEnd;s<u;s++){const _=n.data[s].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:P,ngAfterViewInit:F,ngAfterViewChecked:W,ngOnDestroy:ae}=_;w&&(n.contentHooks||(n.contentHooks=[])).push(-s,w),P&&((n.contentHooks||(n.contentHooks=[])).push(s,P),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,P)),F&&(n.viewHooks||(n.viewHooks=[])).push(-s,F),W&&((n.viewHooks||(n.viewHooks=[])).push(s,W),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,W)),null!=ae&&(n.destroyHooks||(n.destroyHooks=[])).push(s,ae)}}function Ii(n,r,s){Vi(n,r,3,s)}function gs(n,r,s,u){(3&n[2])===s&&Vi(n,r,s,u)}function Wr(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function Vi(n,r,s,u){const _=null!=u?u:-1,w=r.length-1;let P=0;for(let F=void 0!==u?65535&n[18]:0;F<w;F++)if("number"==typeof r[F+1]){if(P=r[F],null!=u&&P>=u)break}else r[F]<0&&(n[18]+=65536),(P<_||-1==_)&&($i(n,s,r,F),n[18]=(4294901760&n[18])+F+2),F++}function $i(n,r,s,u){const p=s[u]<0,_=s[u+1],P=n[p?-s[u]:s[u]];if(p){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{_.call(P)}finally{}}}else try{_.call(P)}finally{}}class Rs{constructor(r,s,u){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=u}}function ot(n,r,s){let u=0;for(;u<s.length;){const p=s[u];if("number"==typeof p){if(0!==p)break;u++;const _=s[u++],w=s[u++],P=s[u++];n.setAttribute(r,w,P,_)}else{const _=p,w=s[++u];ti(_)?n.setProperty(r,_,w):n.setAttribute(r,_,w),u++}}return u}function Pt(n){return 3===n||4===n||6===n}function ti(n){return 64===n.charCodeAt(0)}function Vl(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let u=0;u<r.length;u++){const p=r[u];"number"==typeof p?s=p:0===s||Za(n,s,p,null,-1===s||2===s?r[++u]:null)}}return n}function Za(n,r,s,u,p){let _=0,w=n.length;if(-1===r)w=-1;else for(;_<n.length;){const P=n[_++];if("number"==typeof P){if(P===r){w=-1;break}if(P>r){w=_-1;break}}}for(;_<n.length;){const P=n[_];if("number"==typeof P)break;if(P===s){if(null===u)return void(null!==p&&(n[_+1]=p));if(u===n[_+1])return void(n[_+2]=p)}_++,null!==u&&_++,null!==p&&_++}-1!==w&&(n.splice(w,0,r),_=w+1),n.splice(_++,0,s),null!==u&&n.splice(_++,0,u),null!==p&&n.splice(_++,0,p)}function Ri(n){return-1!==n}function Us(n){return 32767&n}function so(n,r){let s=function xa(n){return n>>16}(n),u=r;for(;s>0;)u=u[15],s--;return u}let oo=!0;function Na(n){const r=oo;return oo=n,r}let Xn=0;const ms={};function Kr(n,r){const s=Uo(n,r);if(-1!==s)return s;const u=r[1];u.firstCreatePass&&(n.injectorIndex=r.length,Sn(u.data,n),Sn(r,null),Sn(u.blueprint,null));const p=yr(n,r),_=n.injectorIndex;if(Ri(p)){const w=Us(p),P=so(p,r),F=P[1].data;for(let W=0;W<8;W++)r[_+W]=P[w+W]|F[w+W]}return r[_+8]=p,_}function Sn(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Uo(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function yr(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,u=null,p=r;for(;null!==p;){if(u=Fa(p),null===u)return-1;if(s++,p=p[15],-1!==u.injectorIndex)return u.injectorIndex|s<<16}return-1}function Wi(n,r,s){!function Al(n,r,s){let u;"string"==typeof s?u=s.charCodeAt(0)||0:s.hasOwnProperty(Kn)&&(u=s[Kn]),null==u&&(u=s[Kn]=Xn++);const p=255&u;r.data[n+(p>>5)]|=1<<p}(n,r,s)}function Kt(n,r,s){if(s&zt.Optional||void 0!==n)return n;Oe()}function ao(n,r,s,u){if(s&zt.Optional&&void 0===u&&(u=null),0==(s&(zt.Self|zt.Host))){const p=n[9],_=gr(void 0);try{return p?p.get(r,u,s&zt.Optional):Ei(r,u,s&zt.Optional)}finally{gr(_)}}return Kt(u,0,s)}function lo(n,r,s,u=zt.Default,p){if(null!==n){if(1024&r[2]){const w=function uo(n,r,s,u,p){let _=n,w=r;for(;null!==_&&null!==w&&1024&w[2]&&!(256&w[2]);){const P=Vo(_,w,s,u|zt.Self,ms);if(P!==ms)return P;let F=_.parent;if(!F){const W=w[21];if(W){const ae=W.get(s,ms,u);if(ae!==ms)return ae}F=Fa(w),w=w[15]}_=F}return p}(n,r,s,u,ms);if(w!==ms)return w}const _=Vo(n,r,s,u,ms);if(_!==ms)return _}return ao(r,s,u,p)}function Vo(n,r,s,u,p){const _=function So(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Kn)?n[Kn]:void 0;return"number"==typeof r?r>=0?255&r:Xa:r}(s);if("function"==typeof _){if(!Io(r,n,u))return u&zt.Host?Kt(p,0,u):ao(r,s,u,p);try{const w=_(u);if(null!=w||u&zt.Optional)return w;Oe()}finally{L()}}else if("number"==typeof _){let w=null,P=Uo(n,r),F=-1,W=u&zt.Host?r[16][6]:null;for((-1===P||u&zt.SkipSelf)&&(F=-1===P?yr(n,r):r[P+8],-1!==F&&Ja(u,!1)?(w=r[1],P=Us(F),r=so(F,r)):P=-1);-1!==P;){const ae=r[1];if(cl(_,P,ae.data)){const pe=Ml(P,r,s,w,u,W);if(pe!==ms)return pe}F=r[P+8],-1!==F&&Ja(u,r[1].data[P+8]===W)&&cl(_,P,r)?(w=ae,P=Us(F),r=so(F,r)):P=-1}}return p}function Ml(n,r,s,u,p,_){const w=r[1],P=w.data[n+8],ae=ta(P,w,s,null==u?$n(P)&&oo:u!=w&&0!=(3&P.type),p&zt.Host&&_===P);return null!==ae?La(r,w,ae,P):ms}function ta(n,r,s,u,p){const _=n.providerIndexes,w=r.data,P=1048575&_,F=n.directiveStart,ae=_>>20,Ve=p?P+ae:n.directiveEnd;for(let nt=u?P:P+ae;nt<Ve;nt++){const bt=w[nt];if(nt<F&&s===bt||nt>=F&&bt.type===s)return nt}if(p){const nt=w[F];if(nt&&Fi(nt)&&nt.type===s)return F}return null}function La(n,r,s,u){let p=n[s];const _=r.data;if(function xt(n){return n instanceof Rs}(p)){const w=p;w.resolving&&function dt(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new ve(-200,`Circular dependency in DI detected for ${n}${s}`)}(function xe(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():He(n)}(_[s]));const P=Na(w.canSeeViewProviders);w.resolving=!0;const F=w.injectImpl?gr(w.injectImpl):null;Io(n,u,zt.Default);try{p=n[s]=w.factory(void 0,_,n,u),r.firstCreatePass&&s>=u.directiveStart&&function Ci(n,r,s){const{ngOnChanges:u,ngOnInit:p,ngDoCheck:_}=r.type.prototype;if(u){const w=Ws(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,w),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,w)}p&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,p),_&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,_),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,_))}(s,_[s],r)}finally{null!==F&&gr(F),Na(P),w.resolving=!1,L()}}return p}function cl(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function Ja(n,r){return!(n&zt.Self||n&zt.Host&&r)}class ss{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,u){return lo(this._tNode,this._lView,r,u,s)}}function Xa(){return new ss(ui(),At())}function su(n){return Pr(()=>{const r=n.prototype.constructor,s=r[fn]||el(r),u=Object.prototype;let p=Object.getPrototypeOf(n.prototype).constructor;for(;p&&p!==u;){const _=p[fn]||el(p);if(_&&_!==s)return _;p=Object.getPrototypeOf(p)}return _=>new _})}function el(n){return Re(n)?()=>{const r=el(ue(n));return r&&r()}:ki(n)}function Fa(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function lt(n){return function Ai(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const u=s.length;let p=0;for(;p<u;){const _=s[p];if(Pt(_))break;if(0===_)p+=2;else if("number"==typeof _)for(p++;p<u&&"string"==typeof s[p];)p++;else{if(_===r)return s[p+1];p+=2}}}return null}(ui(),n)}const ys="__parameters__";function ka(n,r,s){return Pr(()=>{const u=function os(n){return function(...s){if(n){const u=n(...s);for(const p in u)this[p]=u[p]}}}(r);function p(..._){if(this instanceof p)return u.apply(this,_),this;const w=new p(..._);return P.annotation=w,P;function P(F,W,ae){const pe=F.hasOwnProperty(ys)?F[ys]:Object.defineProperty(F,ys,{value:[]})[ys];for(;pe.length<=ae;)pe.push(null);return(pe[ae]=pe[ae]||[]).push(w),F}}return s&&(p.prototype=Object.create(s.prototype)),p.prototype.ngMetadataName=n,p.annotationCls=p,p})}class ni{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=ir({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function A(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let u=n[s];Array.isArray(u)?(r===n&&(r=n.slice(0,s)),A(u,r)):r!==n&&r.push(u)}return r}function T(n,r){n.forEach(s=>Array.isArray(s)?T(s,r):r(s))}function N(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function j(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function X(n,r){const s=[];for(let u=0;u<n;u++)s.push(r);return s}function An(n,r,s){let u=Lr(n,r);return u>=0?n[1|u]=s:(u=~u,function Ze(n,r,s,u){let p=n.length;if(p==r)n.push(s,u);else if(1===p)n.push(u,n[0]),n[0]=s;else{for(p--,n.push(n[p-1],n[p]);p>r;)n[p]=n[p-2],p--;n[r]=s,n[r+1]=u}}(n,u,r,s)),u}function cr(n,r){const s=Lr(n,r);if(s>=0)return n[1|s]}function Lr(n,r){return function Vs(n,r,s){let u=0,p=n.length>>s;for(;p!==u;){const _=u+(p-u>>1),w=n[_<<s];if(r===w)return _<<s;w>r?p=_:u=_+1}return~(p<<s)}(n,r,1)}const vo={},sa="__NG_DI_FLAG__",jo="ngTempTokenPath",jl=/\n/gm,Jr="__source";let oa;function aa(n){const r=oa;return oa=n,r}function lu(n,r=zt.Default){if(void 0===oa)throw new ve(-203,!1);return null===oa?Ei(n,void 0,r):oa.get(n,r&zt.Optional?null:void 0,r)}function Yi(n,r=zt.Default){return(function cs(){return si}()||lu)(ue(n),r)}function Hl(n,r=zt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),Yi(n,r)}function Ca(n){const r=[];for(let s=0;s<n.length;s++){const u=ue(n[s]);if(Array.isArray(u)){if(0===u.length)throw new ve(900,!1);let p,_=zt.Default;for(let w=0;w<u.length;w++){const P=u[w],F=lc(P);"number"==typeof F?-1===F?p=P.token:_|=F:p=P}r.push(Yi(p,_))}else r.push(Yi(u))}return r}function Ia(n,r){return n[sa]=r,n.prototype[sa]=r,n}function lc(n){return n[sa]}const Rl=Ia(ka("Inject",n=>({token:n})),-1),fl=Ia(ka("Optional"),8),la=Ia(ka("Self"),2),ua=Ia(ka("SkipSelf"),4);let Kl,_l,vl;function Iu(n){Kl=n}function wi(n){var r;return(null===(r=function wa(){if(void 0===_l&&(_l=null,ht.trustedTypes))try{_l=ht.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return _l}())||void 0===r?void 0:r.createHTML(n))||n}function ol(){if(void 0===vl&&(vl=null,ht.trustedTypes))try{vl=ht.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return vl}function Do(n){var r;return(null===(r=ol())||void 0===r?void 0:r.createHTML(n))||n}function hu(n){var r;return(null===(r=ol())||void 0===r?void 0:r.createScriptURL(n))||n}class El{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class fu extends El{getTypeName(){return"HTML"}}class wu extends El{getTypeName(){return"Style"}}class Uu extends El{getTypeName(){return"Script"}}class Tu extends El{getTypeName(){return"URL"}}class Vu extends El{getTypeName(){return"ResourceURL"}}function da(n){return n instanceof El?n.changingThisBreaksApplicationSecurity:n}function Ga(n,r){const s=function Dl(n){return n instanceof El&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}function $o(n){return new fu(n)}function Wa(n){return new wu(n)}function xl(n){return new Uu(n)}function pu(n){return new Tu(n)}function Ka(n){return new Vu(n)}class Cl{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(wi(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class ql{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const u=this.inertDocument.createElement("body");s.appendChild(u)}}getInertBodyElement(r){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=wi(r),s;const u=this.inertDocument.createElement("body");return u.innerHTML=wi(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(r){const s=r.attributes;for(let p=s.length-1;0<p;p--){const w=s.item(p).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&r.removeAttribute(w)}let u=r.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const l=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function a(n){return(n=String(n)).match(l)?n:"unsafe:"+n}function c(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function E(...n){const r={};for(const s of n)for(const u in s)s.hasOwnProperty(u)&&(r[u]=!0);return r}const S=c("area,br,col,hr,img,wbr"),H=c("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ie=c("rp,rt"),Et=E(S,E(H,c("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),E(ie,c("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),E(ie,H)),Yt=c("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cn=E(Yt,c("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),c("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),mn=c("script,style,template");class Ir{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,u=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?u=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,u&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let p=this.checkClobberedElement(s,s.nextSibling);if(p){s=p;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!Et.hasOwnProperty(s))return this.sanitizedSomething=!0,!mn.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const u=r.attributes;for(let p=0;p<u.length;p++){const _=u.item(p),w=_.name,P=w.toLowerCase();if(!cn.hasOwnProperty(P)){this.sanitizedSomething=!0;continue}let F=_.value;Yt[P]&&(F=a(F)),this.buf.push(" ",w,'="',_i(F),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();Et.hasOwnProperty(s)&&!S.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(_i(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const Gn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jn=/([^\#-~ |!])/g;function _i(n){return n.replace(/&/g,"&amp;").replace(Gn,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(jn,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let di;function xs(n,r){let s=null;try{di=di||function gu(n){const r=new ql(n);return function O(){try{return!!(new window.DOMParser).parseFromString(wi(""),"text/html")}catch(n){return!1}}()?new Cl(r):r}(n);let u=r?String(r):"";s=di.getInertBodyElement(u);let p=5,_=u;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,u=_,_=s.innerHTML,s=di.getInertBodyElement(u)}while(u!==_);return wi((new Ir).sanitizeChildren(Ta(s)||s))}finally{if(s){const u=Ta(s)||s;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function Ta(n){return"content"in n&&function Br(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var kr=(()=>((kr=kr||{})[kr.NONE=0]="NONE",kr[kr.HTML=1]="HTML",kr[kr.STYLE=2]="STYLE",kr[kr.SCRIPT=3]="SCRIPT",kr[kr.URL=4]="URL",kr[kr.RESOURCE_URL=5]="RESOURCE_URL",kr))();function za(n){const r=Ti();return r?Do(r.sanitize(kr.HTML,n)||""):Ga(n,"HTML")?Do(da(n)):xs(function yl(){return void 0!==Kl?Kl:"undefined"!=typeof document?document:void 0}(),He(n))}function Zs(n){const r=Ti();return r?r.sanitize(kr.URL,n)||"":Ga(n,"URL")?da(n):a(He(n))}function Zl(n){const r=Ti();if(r)return hu(r.sanitize(kr.RESOURCE_URL,n)||"");if(Ga(n,"ResourceURL"))return hu(da(n));throw new ve(904,!1)}function Ti(){const n=At();return n&&n[12]}const Go=new ni("ENVIRONMENT_INITIALIZER"),Wo=new ni("INJECTOR",-1),Il=new ni("INJECTOR_DEF_TYPES");class qi{get(r,s=vo){if(s===vo){const u=new Error(`NullInjectorError: No provider for ${z(r)}!`);throw u.name="NullInjectorError",u}return s}}function pd(...n){return{\u0275providers:Bu(0,n)}}function Bu(n,...r){const s=[],u=new Set;let p;return T(r,_=>{const w=_;wl(w,s,[],u)&&(p||(p=[]),p.push(w))}),void 0!==p&&fo(p,s),s}function fo(n,r){for(let s=0;s<n.length;s++){const{providers:p}=n[s];T(p,_=>{r.push(_)})}}function wl(n,r,s,u){if(!(n=ue(n)))return!1;let p=null,_=$t(n);const w=!_&&We(n);if(_||w){if(w&&!w.standalone)return!1;p=n}else{const F=n.ngModule;if(_=$t(F),!_)return!1;p=F}const P=u.has(p);if(w){if(P)return!1;if(u.add(p),w.dependencies){const F="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const W of F)wl(W,r,s,u)}}else{if(!_)return!1;{if(null!=_.imports&&!P){let W;u.add(p);try{T(_.imports,ae=>{wl(ae,r,s,u)&&(W||(W=[]),W.push(ae))})}finally{}void 0!==W&&fo(W,r)}if(!P){const W=ki(p)||(()=>new p);r.push({provide:p,useFactory:W,deps:Lt},{provide:Il,useValue:p,multi:!0},{provide:Go,useValue:()=>Yi(p),multi:!0})}const F=_.providers;null==F||P||T(F,ae=>{r.push(ae)})}}return p!==n&&void 0!==n.providers}const Su=re({provide:String,useValue:re});function ju(n){return null!==n&&"object"==typeof n&&Su in n}function Au(n){return"function"==typeof n}const cc=new ni("Set Injector scope."),Vc={},dc={};let Tl;function Hu(){return void 0===Tl&&(Tl=new qi),Tl}class Mu{}class $u extends Mu{constructor(r,s,u,p){super(),this.parent=s,this.source=u,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fc(r,w=>this.processProvider(w)),this.records.set(Wo,hc(void 0,this)),p.has("environment")&&this.records.set(Mu,hc(void 0,this));const _=this.records.get(cc);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(Il.multi,Lt,zt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=aa(this),u=gr(void 0);try{return r()}finally{aa(s),gr(u)}}get(r,s=vo,u=zt.Default){this.assertNotDestroyed();const p=aa(this),_=gr(void 0);try{if(!(u&zt.SkipSelf)){let P=this.records.get(r);if(void 0===P){const F=function yd(n){return"function"==typeof n||"object"==typeof n&&n instanceof ni}(r)&&jr(r);P=F&&this.injectableDefInScope(F)?hc(gd(r),Vc):null,this.records.set(r,P)}if(null!=P)return this.hydrate(r,P)}return(u&zt.Self?Hu():this.parent).get(r,s=u&zt.Optional&&s===vo?null:s)}catch(w){if("NullInjectorError"===w.name){if((w[jo]=w[jo]||[]).unshift(z(r)),p)throw w;return function uc(n,r,s,u){const p=n[jo];throw r[Jr]&&p.unshift(r[Jr]),n.message=function Pl(n,r,s,u=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let p=z(r);if(Array.isArray(r))p=r.map(z).join(" -> ");else if("object"==typeof r){let _=[];for(let w in r)if(r.hasOwnProperty(w)){let P=r[w];_.push(w+":"+("string"==typeof P?JSON.stringify(P):z(P)))}p=`{${_.join(", ")}}`}return`${s}${u?"("+u+")":""}[${p}]: ${n.replace(jl,"\n  ")}`}("\n"+n.message,p,s,u),n.ngTokenPath=p,n[jo]=null,n}(w,r,"R3InjectorError",this.source)}throw w}finally{gr(_),aa(p)}}resolveInjectorInitializers(){const r=aa(this),s=gr(void 0);try{const u=this.get(Go.multi,Lt,zt.Self);for(const p of u)p()}finally{aa(r),gr(s)}}toString(){const r=[],s=this.records;for(const u of s.keys())r.push(z(u));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ve(205,!1)}processProvider(r){let s=Au(r=ue(r))?r:ue(r&&r.provide);const u=function Of(n){return ju(n)?hc(void 0,n.useValue):hc(lh(n),Vc)}(r);if(Au(r)||!0!==r.multi)this.records.get(s);else{let p=this.records.get(s);p||(p=hc(void 0,Vc,!0),p.factory=()=>Ca(p.multi),this.records.set(s,p)),s=r,p.multi.push(r)}this.records.set(s,u)}hydrate(r,s){return s.value===Vc&&(s.value=dc,s.value=s.factory()),"object"==typeof s.value&&s.value&&function md(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ue(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function gd(n){const r=jr(n),s=null!==r?r.factory:ki(n);if(null!==s)return s;if(n instanceof ni)throw new ve(204,!1);if(n instanceof Function)return function ah(n){const r=n.length;if(r>0)throw X(r,"?"),new ve(204,!1);const s=function Le(n){const r=n&&(n[on]||n[Fr]);if(r){const s=function it(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new ve(204,!1)}function lh(n,r,s){let u;if(Au(n)){const p=ue(n);return ki(p)||gd(p)}if(ju(n))u=()=>ue(n.useValue);else if(function oh(n){return!(!n||!n.useFactory)}(n))u=()=>n.useFactory(...Ca(n.deps||[]));else if(function bu(n){return!(!n||!n.useExisting)}(n))u=()=>Yi(ue(n.useExisting));else{const p=ue(n&&(n.useClass||n.provide));if(!function Bc(n){return!!n.deps}(n))return ki(p)||gd(p);u=()=>new p(...Ca(n.deps))}return u}function hc(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function _d(n){return!!n.\u0275providers}function fc(n,r){for(const s of n)Array.isArray(s)?fc(s,r):_d(s)?fc(s.\u0275providers,r):r(s)}class ch{}class fh{resolveComponentFactory(r){throw function dh(n){const r=Error(`No component factory found for ${z(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Jl=(()=>{class n{}return n.NULL=new fh,n})();function pc(){return Ou(ui(),At())}function Ou(n,r){return new gc(ei(n,r))}let gc=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=pc,n})();function Pf(n){return n instanceof gc?n.nativeElement:n}class Rf{}let ph=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Ll(){const n=At(),s=or(ui().index,n);return(qr(s)?s:n)[11]}(),n})(),gh=(()=>{class n{}return n.\u0275prov=ir({token:n,providedIn:"root",factory:()=>null}),n})();class mc{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const vd=new mc("14.2.4"),mh={};function Fl(n){return n.ngOriginalError}class ls{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Fl(r);for(;s&&Fl(s);)s=Fl(s);return s||null}}const Ru=new Map;let _c=0;const vh="__ngContext__";function ha(n,r){qr(r)?(n[vh]=r[20],function Dd(n){Ru.set(n[20],n)}(r)):n[vh]=r}function Uf(n){return n.ownerDocument.defaultView}function Rg(n){return n.ownerDocument}function Xl(n){return n instanceof Function?n():n}var yu=(()=>((yu=yu||{})[yu.Important=1]="Important",yu[yu.DashCase=2]="DashCase",yu))();function Gc(n,r){return undefined(n,r)}function Ku(n){const r=n[3];return Pi(r)?r[3]:r}function Eh(n){return $f(n[13])}function Aa(n){return $f(n[4])}function $f(n){for(;null!==n&&!Pi(n);)n=n[4];return n}function xu(n,r,s,u,p){if(null!=u){let _,w=!1;Pi(u)?_=u:qr(u)&&(w=!0,u=u[0]);const P=Zr(u);0===n&&null!==s?null==p?Yf(r,s,P):Ic(r,s,P,p||null,!0):1===n&&null!==s?Ic(r,s,P,p||null,!0):2===n?function Zf(n,r,s){const u=Sd(n,r);u&&function Td(n,r,s,u){n.removeChild(r,s,u)}(n,u,r,s)}(r,P,w):3===n&&r.destroyNode(P),null!=_&&function ep(n,r,s,u,p){const _=s[7];_!==Zr(s)&&xu(r,n,u,_,p);for(let P=10;P<s.length;P++){const F=s[P];Qu(F[1],F,n,r,u,_)}}(r,n,_,s,p)}}function Ch(n,r,s){return n.createElement(r,s)}function Bg(n,r){const s=n[9],u=s.indexOf(r),p=r[3];512&r[2]&&(r[2]&=-513,Ms(p,-1)),s.splice(u,1)}function Wf(n,r){if(n.length<=10)return;const s=10+r,u=n[s];if(u){const p=u[17];null!==p&&p!==n&&Bg(p,u),r>0&&(n[s-1][4]=u[4]);const _=j(n,10+r);!function Cc(n,r){Qu(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(u[1],u);const w=_[19];null!==w&&w.detachView(_[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function jg(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&Qu(n,r,s,3,null,null),function Ug(n){let r=n[13];if(!r)return Kf(n[1],n);for(;r;){let s=null;if(qr(r))s=r[13];else{const u=r[10];u&&(s=u)}if(!s){for(;r&&!r[4]&&r!==n;)qr(r)&&Kf(r[1],r),r=r[3];null===r&&(r=n),qr(r)&&Kf(r[1],r),s=r&&r[4]}r=s}}(r)}}function Kf(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Hg(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let u=0;u<s.length;u+=2){const p=r[s[u]];if(!(p instanceof Rs)){const _=s[u+1];if(Array.isArray(_))for(let w=0;w<_.length;w+=2){const P=p[_[w]],F=_[w+1];try{F.call(P)}finally{}}else try{_.call(p)}finally{}}}}(n,r),function Ih(n,r){const s=n.cleanup,u=r[7];let p=-1;if(null!==s)for(let _=0;_<s.length-1;_+=2)if("string"==typeof s[_]){const w=s[_+1],P="function"==typeof w?w(r):Zr(r[w]),F=u[p=s[_+2]],W=s[_+3];"boolean"==typeof W?P.removeEventListener(s[_],F,W):W>=0?u[p=W]():u[p=-W].unsubscribe(),_+=2}else{const w=u[p=s[_+1]];s[_].call(w)}if(null!==u){for(let _=p+1;_<u.length;_++)(0,u[_])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&Pi(r[3])){s!==r[3]&&Bg(s,r);const u=r[19];null!==u&&u.detachView(n)}!function Lf(n){Ru.delete(n[20])}(r)}}function $g(n,r,s){return function zf(n,r,s){let u=r;for(;null!==u&&40&u.type;)u=(r=u).parent;if(null===u)return s[0];if(2&u.flags){const p=n.data[u.directiveStart].encapsulation;if(p===Xe.None||p===Xe.Emulated)return null}return ei(u,s)}(n,r.parent,s)}function Ic(n,r,s,u,p){n.insertBefore(r,s,u,p)}function Yf(n,r,s){n.appendChild(r,s)}function Yu(n,r,s,u,p){null!==u?Ic(n,r,s,u,p):Yf(n,r,s)}function Sd(n,r){return n.parentNode(r)}function Qf(n,r,s){return Wg(n,r,s)}let Wg=function Gg(n,r,s){return 40&n.type?ei(n,s):null};function wh(n,r,s,u){const p=$g(n,u,r),_=r[11],P=Qf(u.parent||r[6],u,r);if(null!=p)if(Array.isArray(s))for(let F=0;F<s.length;F++)Yu(_,p,s[F],P,!1);else Yu(_,p,s,P,!1)}function Th(n,r){if(null!==r){const s=r.type;if(3&s)return ei(r,n);if(4&s)return qf(-1,n[r.index]);if(8&s){const u=r.child;if(null!==u)return Th(n,u);{const p=n[r.index];return Pi(p)?qf(-1,p):Zr(p)}}if(32&s)return Gc(r,n)()||Zr(n[r.index]);{const u=Kg(n,r);return null!==u?Array.isArray(u)?u[0]:Th(Ku(n[16]),u):Th(n,r.next)}}return null}function Kg(n,r){return null!==r?n[16][6].projection[r.projection]:null}function qf(n,r){const s=10+n+1;if(s<r.length){const u=r[s],p=u[1].firstChild;if(null!==p)return Th(u,p)}return r[7]}function Jf(n,r,s,u,p,_,w){for(;null!=s;){const P=u[s.index],F=s.type;if(w&&0===r&&(P&&ha(Zr(P),u),s.flags|=4),64!=(64&s.flags))if(8&F)Jf(n,r,s.child,u,p,_,!1),xu(r,n,p,P,_);else if(32&F){const W=Gc(s,u);let ae;for(;ae=W();)xu(r,n,p,ae,_);xu(r,n,p,P,_)}else 16&F?Xf(n,r,u,s,p,_):xu(r,n,p,P,_);s=w?s.projectionNext:s.next}}function Qu(n,r,s,u,p,_){Jf(s,u,n.firstChild,r,p,_,!1)}function Xf(n,r,s,u,p,_){const w=s[16],F=w[6].projection[u.projection];if(Array.isArray(F))for(let W=0;W<F.length;W++)xu(r,n,p,F[W],_);else Jf(n,r,F,w[3],p,_,!0)}function zc(n,r,s){n.setAttribute(r,"style",s)}function Yc(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function Sh(n,r,s){let u=n.length;for(;;){const p=n.indexOf(r,s);if(-1===p)return p;if(0===p||n.charCodeAt(p-1)<=32){const _=r.length;if(p+_===u||n.charCodeAt(p+_)<=32)return p}s=p+1}}const np="ng-template";function Ty(n,r,s){let u=0;for(;u<n.length;){let p=n[u++];if(s&&"class"===p){if(p=n[u],-1!==Sh(p.toLowerCase(),r,0))return!0}else if(1===p){for(;u<n.length&&"string"==typeof(p=n[u++]);)if(p.toLowerCase()===r)return!0;return!1}}return!1}function rp(n){return 4===n.type&&n.value!==np}function Yg(n,r,s){return r===(4!==n.type||s?n.value:np)}function ip(n,r,s){let u=4;const p=n.attrs||[],_=function Sy(n){for(let r=0;r<n.length;r++)if(Pt(n[r]))return r;return n.length}(p);let w=!1;for(let P=0;P<r.length;P++){const F=r[P];if("number"!=typeof F){if(!w)if(4&u){if(u=2|1&u,""!==F&&!Yg(n,F,s)||""===F&&1===r.length){if(eu(u))return!1;w=!0}}else{const W=8&u?F:r[++P];if(8&u&&null!==n.attrs){if(!Ty(n.attrs,W,s)){if(eu(u))return!1;w=!0}continue}const pe=Qg(8&u?"class":F,p,rp(n),s);if(-1===pe){if(eu(u))return!1;w=!0;continue}if(""!==W){let Ve;Ve=pe>_?"":p[pe+1].toLowerCase();const nt=8&u?Ve:null;if(nt&&-1!==Sh(nt,W,0)||2&u&&W!==Ve){if(eu(u))return!1;w=!0}}}}else{if(!w&&!eu(u)&&!eu(F))return!1;if(w&&eu(F))continue;w=!1,u=F|1&u}}return eu(u)||w}function eu(n){return 0==(1&n)}function Qg(n,r,s,u){if(null===r)return-1;let p=0;if(u||!s){let _=!1;for(;p<r.length;){const w=r[p];if(w===n)return p;if(3===w||6===w)_=!0;else{if(1===w||2===w){let P=r[++p];for(;"string"==typeof P;)P=r[++p];continue}if(4===w)break;if(0===w){p+=4;continue}}p+=_?1:2}return-1}return function Qc(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const u=n[s];if("number"==typeof u)return-1;if(u===r)return s;s++}return-1}(r,n)}function qg(n,r,s=!1){for(let u=0;u<r.length;u++)if(ip(n,r[u],s))return!0;return!1}function qc(n,r){e:for(let s=0;s<r.length;s++){const u=r[s];if(n.length===u.length){for(let p=0;p<n.length;p++)if(n[p]!==u[p])continue e;return!0}}return!1}function bh(n,r){return n?":not("+r.trim()+")":r}function Ah(n){let r=n[0],s=1,u=2,p="",_=!1;for(;s<n.length;){let w=n[s];if("string"==typeof w)if(2&u){const P=n[++s];p+="["+w+(P.length>0?'="'+P+'"':"")+"]"}else 8&u?p+="."+w:4&u&&(p+=" "+w);else""!==p&&!eu(w)&&(r+=bh(_,p),p=""),u=w,_=_||!eu(u);s++}return""!==p&&(r+=bh(_,p)),r}const Tr={};function em(n){Mh(fr(),At(),me()+n,!1)}function Mh(n,r,s,u){if(!u)if(3==(3&r[2])){const _=n.preOrderCheckHooks;null!==_&&Ii(r,_,s)}else{const _=n.preOrderHooks;null!==_&&gs(r,_,0,s)}et(s)}function Ph(n,r=null,s=null,u){const p=Rh(n,r,s,u);return p.resolveInjectorInitializers(),p}function Rh(n,r=null,s=null,u,p=new Set){const _=[s||Lt,pd(n)];return u=u||("object"==typeof n?void 0:z(n)),new $u(_,r||Hu(),u||null,p)}let qu=(()=>{class n{static create(s,u){var p;if(Array.isArray(s))return Ph({name:""},u,s,"");{const _=null!==(p=s.name)&&void 0!==p?p:"";return Ph({name:_},s.parent,s.providers,_)}}}return n.THROW_IF_NOT_FOUND=vo,n.NULL=new qi,n.\u0275prov=ir({token:n,providedIn:"any",factory:()=>Yi(Wo)}),n.__NG_ELEMENT_ID__=-1,n})();function td(n,r=zt.Default){const s=At();return null===s?Yi(n,r):lo(ui(),s,ue(n),r)}function Uh(){throw new Error("invalid")}function nd(n,r){return n<<17|r<<2}function ll(n){return n>>17&32767}function Ju(n){return 2|n}function tu(n){return(131068&n)>>2}function pp(n,r){return-131069&n|r<<2}function Bh(n){return 1|n}function $h(n,r){const s=n.contentQueries;if(null!==s)for(let u=0;u<s.length;u+=2){const p=s[u],_=s[u+1];if(-1!==_){const w=n.data[_];io(p),w.contentQueries(2,r[_],_)}}}function Gh(n,r,s,u,p,_,w,P,F,W,ae){const pe=r.blueprint.slice();return pe[0]=p,pe[2]=76|u,(null!==ae||n&&1024&n[2])&&(pe[2]|=1024),Fo(pe),pe[3]=pe[15]=n,pe[8]=s,pe[10]=w||n&&n[10],pe[11]=P||n&&n[11],pe[12]=F||n&&n[12]||null,pe[9]=W||n&&n[9]||null,pe[6]=_,pe[20]=function vc(){return _c++}(),pe[21]=ae,pe[16]=2==r.type?n[16]:pe,pe}function ec(n,r,s,u,p){let _=n.data[r];if(null===_)_=function Wh(n,r,s,u,p){const _=$(),w=te(),F=n.data[r]=function wm(n,r,s,u,p,_){return{type:s,index:u,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?_:_&&_.parent,s,r,u,p);return null===n.firstChild&&(n.firstChild=F),null!==_&&(w?null==_.child&&null!==F.parent&&(_.child=F):null===_.next&&(_.next=F)),F}(n,r,s,u,p),function Ra(){return wn.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=s,_.value=u,_.attrs=p;const w=function U(){const n=wn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();_.injectorIndex=null===w?-1:w.injectorIndex}return x(_,!0),_}function tc(n,r,s,u){if(0===s)return-1;const p=r.length;for(let _=0;_<s;_++)r.push(u),n.blueprint.push(u),n.data.push(null);return p}function Kh(n,r,s){Xi(r);try{const u=n.viewQuery;null!==u&&nf(1,u,s);const p=n.template;null!==p&&Yh(n,r,p,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&$h(n,r),n.staticViewQueries&&nf(2,n.viewQuery,s);const _=n.components;null!==_&&function Mp(n,r){for(let s=0;s<r.length;s++)Hp(n,r[s])}(r,_)}catch(u){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),u}finally{r[2]&=-5,q()}}function zh(n,r,s,u){const p=r[2];if(128!=(128&p)){Xi(r);try{Fo(r),function is(n){return wn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Yh(n,r,s,2,u);const w=3==(3&p);if(w){const W=n.preOrderCheckHooks;null!==W&&Ii(r,W,null)}else{const W=n.preOrderHooks;null!==W&&gs(r,W,0,null),Wr(r,0)}if(function Gy(n){for(let r=Eh(n);null!==r;r=Aa(r)){if(!r[2])continue;const s=r[9];for(let u=0;u<s.length;u++){const p=s[u],_=p[3];0==(512&p[2])&&Ms(_,1),p[2]|=512}}}(r),function Pm(n){for(let r=Eh(n);null!==r;r=Aa(r))for(let s=10;s<r.length;s++){const u=r[s],p=u[1];Dr(u)&&zh(p,u,p.template,u[8])}}(r),null!==n.contentQueries&&$h(n,r),w){const W=n.contentCheckHooks;null!==W&&Ii(r,W)}else{const W=n.contentHooks;null!==W&&gs(r,W,1),Wr(r,1)}!function Ap(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let u=0;u<s.length;u++){const p=s[u];if(p<0)et(~p);else{const _=p,w=s[++u],P=s[++u];ps(w,_),P(2,r[_])}}}finally{et(-1)}}(n,r);const P=n.components;null!==P&&function ky(n,r){for(let s=0;s<r.length;s++)Wy(n,r[s])}(r,P);const F=n.viewQuery;if(null!==F&&nf(2,F,u),w){const W=n.viewCheckHooks;null!==W&&Ii(r,W)}else{const W=n.viewHooks;null!==W&&gs(r,W,2),Wr(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Ms(r[3],-1))}finally{q()}}}function Yh(n,r,s,u,p){const _=me(),w=2&u;try{et(-1),w&&r.length>22&&Mh(n,r,22,!1),s(u,p)}finally{et(_)}}function Cm(n,r,s){if(zn(r)){const p=r.directiveEnd;for(let _=r.directiveStart;_<p;_++){const w=n.data[_];w.contentQueries&&w.contentQueries(1,s[_],_)}}}function Ld(n,r,s){!ko()||(function Fp(n,r,s,u){const p=s.directiveStart,_=s.directiveEnd;n.firstCreatePass||Kr(s,r),ha(u,r);const w=s.initialInputs;for(let P=p;P<_;P++){const F=n.data[P],W=Fi(F);W&&$y(r,s,F);const ae=La(r,n,P,s);ha(ae,r),null!==w&&Bp(0,P-p,ae,F,0,w),W&&(or(s.index,r)[8]=ae)}}(n,r,s,ei(s,r)),128==(128&s.flags)&&function jy(n,r,s){const u=s.directiveStart,p=s.directiveEnd,_=s.index,w=function ma(){return wn.lFrame.currentDirectiveIndex}();try{et(_);for(let P=u;P<p;P++){const F=n.data[P],W=r[P];ro(P),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&Xh(F,W)}}finally{et(-1),ro(w)}}(n,r,s))}function Op(n,r,s=ei){const u=r.localNames;if(null!==u){let p=r.index+1;for(let _=0;_<u.length;_+=2){const w=u[_+1],P=-1===w?s(r,n):n[w];n[p++]=P}}}function Qh(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Pp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Pp(n,r,s,u,p,_,w,P,F,W){const ae=22+u,pe=ae+p,Ve=function Rp(n,r){const s=[];for(let u=0;u<r;u++)s.push(u<n?null:Tr);return s}(ae,pe),nt="function"==typeof W?W():W;return Ve[1]={type:n,blueprint:Ve,template:s,queries:null,viewQuery:P,declTNode:r,data:Ve.slice().fill(null,ae),bindingStartIndex:ae,expandoStartIndex:pe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:F,consts:nt,incompleteFirstPass:!1}}function bc(n,r,s,u){const p=$p(r);null===s?p.push(u):(p.push(s),n.firstCreatePass&&sd(n).push(u,p.length-1))}function qh(n,r,s){for(let u in n)if(n.hasOwnProperty(u)){const p=n[u];(s=null===s?{}:s).hasOwnProperty(u)?s[u].push(r,p):s[u]=[r,p]}return s}function Tm(n,r){const u=r.directiveEnd,p=n.data,_=r.attrs,w=[];let P=null,F=null;for(let W=r.directiveStart;W<u;W++){const ae=p[W],pe=ae.inputs,Ve=null===_||rp(r)?null:jp(pe,_);w.push(Ve),P=qh(pe,W,P),F=qh(ae.outputs,W,F)}null!==P&&(P.hasOwnProperty("class")&&(r.flags|=16),P.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=w,r.inputs=P,r.outputs=F}function po(n,r,s,u,p,_,w,P){const F=ei(r,s);let ae,W=r.inputs;!P&&null!=W&&(ae=W[u])?(Mo(n,s,ae,u,p),$n(r)&&Zh(s,r.index)):3&r.type&&(u=function Np(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(u),p=null!=w?w(p,r.value||"",u):p,_.setProperty(F,u,p))}function Zh(n,r){const s=or(r,n);16&s[2]||(s[2]|=32)}function Lp(n,r,s,u){let p=!1;if(ko()){const _=function Hy(n,r,s){const u=n.directiveRegistry;let p=null;if(u)for(let _=0;_<u.length;_++){const w=u[_];qg(s,w.selectors,!1)&&(p||(p=[]),Wi(Kr(s,r),n,w.type),Fi(w)?(ef(n,s),p.unshift(w)):p.push(w))}return p}(n,r,s),w=null===u?null:{"":-1};if(null!==_){p=!0,Up(s,n.data.length,_.length);for(let ae=0;ae<_.length;ae++){const pe=_[ae];pe.providersResolver&&pe.providersResolver(pe)}let P=!1,F=!1,W=tc(n,r,_.length,null);for(let ae=0;ae<_.length;ae++){const pe=_[ae];s.mergedAttrs=Vl(s.mergedAttrs,pe.hostAttrs),Am(n,s,r,W,pe),kp(W,pe,w),null!==pe.contentQueries&&(s.flags|=8),(null!==pe.hostBindings||null!==pe.hostAttrs||0!==pe.hostVars)&&(s.flags|=128);const Ve=pe.type.prototype;!P&&(Ve.ngOnChanges||Ve.ngOnInit||Ve.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),P=!0),!F&&(Ve.ngOnChanges||Ve.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),F=!0),W++}Tm(n,s)}w&&function bm(n,r,s){if(r){const u=n.localNames=[];for(let p=0;p<r.length;p+=2){const _=s[r[p+1]];if(null==_)throw new ve(-301,!1);u.push(r[p],_)}}}(s,u,w)}return s.mergedAttrs=Vl(s.mergedAttrs,s.attrs),p}function Jh(n,r,s,u,p,_){const w=_.hostBindings;if(w){let P=n.hostBindingOpCodes;null===P&&(P=n.hostBindingOpCodes=[]);const F=~r.index;(function By(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(P)!=F&&P.push(F),P.push(u,p,w)}}function Xh(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function ef(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function kp(n,r,s){if(s){if(r.exportAs)for(let u=0;u<r.exportAs.length;u++)s[r.exportAs[u]]=n;Fi(r)&&(s[""]=n)}}function Up(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function Am(n,r,s,u,p){n.data[u]=p;const _=p.factory||(p.factory=ki(p.type)),w=new Rs(_,Fi(p),td);n.blueprint[u]=w,s[u]=w,Jh(n,r,0,u,tc(n,s,p.hostVars,Tr),p)}function $y(n,r,s){const u=ei(r,n),p=Qh(s),_=n[10],w=kd(n,Gh(n,p,null,s.onPush?32:16,u,r,_,_.createRenderer(u,s),null,null,null));n[r.index]=w}function kl(n,r,s,u,p,_){const w=ei(n,r);!function Vp(n,r,s,u,p,_,w){if(null==_)n.removeAttribute(r,p,s);else{const P=null==w?He(_):w(_,u||"",p);n.setAttribute(r,p,P,s)}}(r[11],w,_,n.value,s,u,p)}function Bp(n,r,s,u,p,_){const w=_[r];if(null!==w){const P=u.setInput;for(let F=0;F<w.length;){const W=w[F++],ae=w[F++],pe=w[F++];null!==P?u.setInput(s,pe,W,ae):s[ae]=pe}}}function jp(n,r){let s=null,u=0;for(;u<r.length;){const p=r[u];if(0!==p)if(5!==p){if("number"==typeof p)break;n.hasOwnProperty(p)&&(null===s&&(s=[]),s.push(p,n[p],r[u+1])),u+=2}else u+=2;else u+=4}return s}function Om(n,r,s,u){return new Array(n,!0,!1,r,null,0,u,s,null,null)}function Wy(n,r){const s=or(r,n);if(Dr(s)){const u=s[1];48&s[2]?zh(u,s,u.template,s[8]):s[5]>0&&Fd(s)}}function Fd(n){for(let u=Eh(n);null!==u;u=Aa(u))for(let p=10;p<u.length;p++){const _=u[p];if(Dr(_))if(512&_[2]){const w=_[1];zh(w,_,w.template,_[8])}else _[5]>0&&Fd(_)}const s=n[1].components;if(null!==s)for(let u=0;u<s.length;u++){const p=or(s[u],n);Dr(p)&&p[5]>0&&Fd(p)}}function Hp(n,r){const s=or(r,n),u=s[1];(function Ky(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(u,s),Kh(u,s,s[8])}function kd(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function tf(n){for(;n;){n[2]|=32;const r=Ku(n);if(De(n)&&!r)return n;n=r}return null}function Ac(n,r,s,u=!0){const p=r[10];p.begin&&p.begin();try{zh(n,r,n.template,s)}catch(w){throw u&&Xs(r,w),w}finally{p.end&&p.end()}}function nf(n,r,s){io(0),r(n,s)}function $p(n){return n[7]||(n[7]=[])}function sd(n){return n.cleanup||(n.cleanup=[])}function Xs(n,r){const s=n[9],u=s?s.get(ls,null):null;u&&u.handleError(r)}function Mo(n,r,s,u,p){for(let _=0;_<s.length;){const w=s[_++],P=s[_++],F=r[w],W=n.data[w];null!==W.setInput?W.setInput(F,p,u,P):F[P]=p}}function Ko(n,r,s){const u=no(r,n);!function Nu(n,r,s){n.setValue(r,s)}(n[11],u,s)}function rf(n,r,s){let u=s?n.styles:null,p=s?n.classes:null,_=0;if(null!==r)for(let w=0;w<r.length;w++){const P=r[w];"number"==typeof P?_=P:1==_?p=oe(p,P):2==_&&(u=oe(u,P+": "+r[++w]+";"))}s?n.styles=u:n.stylesWithoutHost=u,s?n.classes=p:n.classesWithoutHost=p}function Gp(n,r,s,u,p=!1){for(;null!==s;){const _=r[s.index];if(null!==_&&u.push(Zr(_)),Pi(_))for(let P=10;P<_.length;P++){const F=_[P],W=F[1].firstChild;null!==W&&Gp(F[1],F,W,u)}const w=s.type;if(8&w)Gp(n,r,s.child,u);else if(32&w){const P=Gc(s,r);let F;for(;F=P();)u.push(F)}else if(16&w){const P=Kg(r,s);if(Array.isArray(P))u.push(...P);else{const F=Ku(r[16]);Gp(F[1],F,P,u,!0)}}s=p?s.projectionNext:s.next}return u}class od{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Gp(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Pi(r)){const s=r[8],u=s?s.indexOf(this):-1;u>-1&&(Wf(r,u),j(s,u))}this._attachedToViewContainer=!1}jg(this._lView[1],this._lView)}onDestroy(r){bc(this._lView[1],this._lView,null,r)}markForCheck(){tf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ac(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ve(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Kc(n,r){Qu(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ve(902,!1);this._appRef=r}}class vv extends od{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Ac(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class sf extends Jl{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=We(r);return new lf(s,this.ngModule)}}function Wp(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class Yy{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,u){const p=this.injector.get(r,mh,u);return p!==mh||s===mh?p:this.parentInjector.get(r,s,u)}}class lf extends ch{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Jg(n){return n.map(Ah).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Wp(this.componentDef.inputs)}get outputs(){return Wp(this.componentDef.outputs)}create(r,s,u,p){let _=(p=p||this.ngModule)instanceof Mu?p:null==p?void 0:p.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const w=_?new Yy(r,_):r,P=w.get(Rf,null);if(null===P)throw new ve(407,!1);const F=w.get(gh,null),W=P.createRenderer(null,this.componentDef),ae=this.componentDef.selectors[0][0]||"div",pe=u?function xp(n,r,s){return n.selectRootElement(r,s===Xe.ShadowDom)}(W,u,this.componentDef.encapsulation):Ch(P.createRenderer(null,this.componentDef),ae,function af(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(ae)),Ve=this.componentDef.onPush?288:272,nt=Pp(0,null,null,1,0,null,null,null,null,null),bt=Gh(null,nt,null,Ve,null,null,P,W,F,w,null);let Qt,sn;Xi(bt);try{const Un=function Zy(n,r,s,u,p,_){const w=s[1];s[22]=n;const F=ec(w,22,2,"#host",null),W=F.mergedAttrs=r.hostAttrs;null!==W&&(rf(F,W,!0),null!==n&&(ot(p,n,W),null!==F.classes&&Yc(p,n,F.classes),null!==F.styles&&zc(p,n,F.styles)));const ae=u.createRenderer(n,r),pe=Gh(s,Qh(r),null,r.onPush?32:16,s[22],F,u,ae,_||null,null,null);return w.firstCreatePass&&(Wi(Kr(F,s),w,r.type),ef(w,F),Up(F,s.length,1)),kd(s,pe),s[22]=pe}(pe,this.componentDef,bt,P,W);if(pe)if(u)ot(W,pe,["ng-version",vd.full]);else{const{attrs:ar,classes:Bt}=function Xg(n){const r=[],s=[];let u=1,p=2;for(;u<n.length;){let _=n[u];if("string"==typeof _)2===p?""!==_&&r.push(_,n[++u]):8===p&&s.push(_);else{if(!eu(p))break;p=_}u++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);ar&&ot(W,pe,ar),Bt&&Bt.length>0&&Yc(W,pe,Bt.join(" "))}if(sn=pn(nt,22),void 0!==s){const ar=sn.projection=[];for(let Bt=0;Bt<this.ngContentSelectors.length;Bt++){const _r=s[Bt];ar.push(null!=_r?Array.from(_r):null)}}Qt=function xm(n,r,s,u){const p=s[1],_=function Vy(n,r,s){const u=ui();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Am(n,u,r,tc(n,r,1,null),s),Tm(n,u));const p=La(r,n,u.directiveStart,u);ha(p,r);const _=ei(u,r);return _&&ha(_,r),p}(p,s,r);if(n[8]=s[8]=_,null!==u)for(const P of u)P(_,r);if(r.contentQueries){const P=ui();r.contentQueries(1,_,P.directiveStart)}const w=ui();return!p.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(et(w.index),Jh(s[1],w,0,w.directiveStart,w.directiveEnd,r),Xh(r,_)),_}(Un,this.componentDef,bt,[Kp]),Kh(nt,bt,null)}finally{q()}return new qy(this.componentType,Qt,Ou(sn,bt),bt,sn)}}class qy extends class uh{}{constructor(r,s,u,p,_){super(),this.location=u,this._rootLView=p,this._tNode=_,this.instance=s,this.hostView=this.changeDetectorRef=new vv(p),this.componentType=r}setInput(r,s){const u=this._tNode.inputs;let p;if(null!==u&&(p=u[r])){const _=this._rootLView;Mo(_[1],_,p,r,s),Zh(_,this._tNode.index)}}get injector(){return new ss(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Kp(){const n=ui();br(At()[1],n)}function Ud(n){let r=function zp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const u=[n];for(;r;){let p;if(Fi(n))p=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ve(903,!1);p=r.\u0275dir}if(p){if(s){u.push(p);const w=n;w.inputs=Vd(n.inputs),w.declaredInputs=Vd(n.declaredInputs),w.outputs=Vd(n.outputs);const P=p.hostBindings;P&&Nm(n,P);const F=p.viewQuery,W=p.contentQueries;if(F&&uf(n,F),W&&Qp(n,W),ee(n.inputs,p.inputs),ee(n.declaredInputs,p.declaredInputs),ee(n.outputs,p.outputs),Fi(p)&&p.data.animation){const ae=n.data;ae.animation=(ae.animation||[]).concat(p.data.animation)}}const _=p.features;if(_)for(let w=0;w<_.length;w++){const P=_[w];P&&P.ngInherit&&P(n),P===Ud&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Yp(n){let r=0,s=null;for(let u=n.length-1;u>=0;u--){const p=n[u];p.hostVars=r+=p.hostVars,p.hostAttrs=Vl(p.hostAttrs,s=Vl(s,p.hostAttrs))}}(u)}function Vd(n){return n===er?{}:n===Lt?[]:n}function uf(n,r){const s=n.viewQuery;n.viewQuery=s?(u,p)=>{r(u,p),s(u,p)}:r}function Qp(n,r){const s=n.contentQueries;n.contentQueries=s?(u,p,_)=>{r(u,p,_),s(u,p,_)}:r}function Nm(n,r){const s=n.hostBindings;n.hostBindings=s?(u,p)=>{r(u,p),s(u,p)}:r}let Bd=null;function Ul(){if(!Bd){const n=ht.Symbol;if(n&&n.iterator)Bd=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const u=r[s];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Bd=u)}}}return Bd}function jd(n){return!!df(n)&&(Array.isArray(n)||!(n instanceof Map)&&Ul()in n)}function df(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function nu(n,r,s){return n[r]=s}function Hd(n,r){return n[r]}function Ma(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Mc(n,r,s,u){const p=Ma(n,r,s);return Ma(n,r+1,u)||p}function hf(n,r,s,u,p){const _=Mc(n,r,s,u);return Ma(n,r+2,p)||_}function ul(n,r,s,u,p,_){const w=Mc(n,r,s,u);return Mc(n,r+2,p,_)||w}function Jp(n,r,s,u){const p=At();return Ma(p,Ps(),r)&&(fr(),kl(ft(),p,n,r,s,u)),Jp}function Bi(n,r,s,u){return Ma(n,Ps(),s)?r+He(s)+u:Tr}function Gd(n,r,s,u,p,_){const P=Mc(n,Fs(),s,p);return Zo(2),P?r+He(s)+u+He(p)+_:Tr}function ad(n,r,s,u,p,_,w,P){const W=hf(n,Fs(),s,p,w);return Zo(3),W?r+He(s)+u+He(p)+_+He(w)+P:Tr}function Kd(n,r,s,u,p,_,w,P){const F=At(),W=fr(),ae=n+22,pe=W.firstCreatePass?function Cv(n,r,s,u,p,_,w,P,F){const W=r.consts,ae=ec(r,n,4,w||null,ns(W,P));Lp(r,s,ae,ns(W,F)),br(r,ae);const pe=ae.tViews=Pp(2,ae,u,p,_,r.directiveRegistry,r.pipeRegistry,null,r.schemas,W);return null!==r.queries&&(r.queries.template(r,ae),pe.queries=r.queries.embeddedTView(ae)),ae}(ae,W,F,r,s,u,p,_,w):W.data[ae];x(pe,!1);const Ve=F[11].createComment("");wh(W,F,Ve,pe),ha(Ve,F),kd(F,F[ae]=Om(Ve,F,Ve,pe)),xr(pe)&&Ld(W,F,pe),null!=w&&Op(F,pe,P)}function Fm(n){return Ys(function Vr(){return wn.lFrame.contextLView}(),22+n)}function tg(n,r,s){const u=At();return Ma(u,Ps(),r)&&po(fr(),ft(),u,n,r,u[11],s,!1),tg}function ff(n,r,s,u,p){const w=p?"class":"style";Mo(n,s,r.inputs[w],w,u)}function Rc(n,r,s,u){const p=At(),_=fr(),w=22+n,P=p[11],F=p[w]=Ch(P,r,function ur(){return wn.lFrame.currentNamespace}()),W=_.firstCreatePass?function km(n,r,s,u,p,_,w){const P=r.consts,W=ec(r,n,2,p,ns(P,_));return Lp(r,s,W,ns(P,w)),null!==W.attrs&&rf(W,W.attrs,!1),null!==W.mergedAttrs&&rf(W,W.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,W),W}(w,_,p,0,r,s,u):_.data[w];x(W,!0);const ae=W.mergedAttrs;null!==ae&&ot(P,F,ae);const pe=W.classes;null!==pe&&Yc(P,F,pe);const Ve=W.styles;return null!==Ve&&zc(P,F,Ve),64!=(64&W.flags)&&wh(_,p,F,W),0===function Qo(){return wn.lFrame.elementDepthCount}()&&ha(F,p),function Cs(){wn.lFrame.elementDepthCount++}(),xr(W)&&(Ld(_,p,W),Cm(_,W,p)),null!==u&&Op(p,W),Rc}function pf(){let n=ui();te()?ct():(n=n.parent,x(n,!1));const r=n;!function Ji(){wn.lFrame.elementDepthCount--}();const s=fr();return s.firstCreatePass&&(br(s,n),zn(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function ln(n){return 0!=(16&n.flags)}(r)&&ff(s,r,At(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function en(n){return 0!=(32&n.flags)}(r)&&ff(s,r,At(),r.stylesWithoutHost,!1),pf}function rc(n,r,s,u){return Rc(n,r,s,u),pf(),rc}function ic(n,r,s){const u=At(),p=fr(),_=n+22,w=p.firstCreatePass?function ng(n,r,s,u,p){const _=r.consts,w=ns(_,u),P=ec(r,n,8,"ng-container",w);return null!==w&&rf(P,w,!0),Lp(r,s,P,ns(_,p)),null!==r.queries&&r.queries.elementStart(r,P),P}(_,p,u,r,s):p.data[_];x(w,!0);const P=u[_]=u[11].createComment("");return wh(p,u,P,w),ha(P,u),xr(w)&&(Ld(p,u,w),Cm(p,w,u)),null!=s&&Op(u,w),ic}function zd(){let n=ui();const r=fr();return te()?ct():(n=n.parent,x(n,!1)),r.firstCreatePass&&(br(r,n),zn(n)&&r.queries.elementEnd(n)),zd}function Yd(n,r,s){return ic(n,r,s),zd(),Yd}function Um(){return At()}function rg(n){return!!n&&"function"==typeof n.then}function Vm(n){return!!n&&"function"==typeof n.subscribe}const ig=Vm;function gf(n,r,s,u){const p=At(),_=fr(),w=ui();return function og(n,r,s,u,p,_,w,P){const F=xr(u),ae=n.firstCreatePass&&sd(n),pe=r[8],Ve=$p(r);let nt=!0;if(3&u.type||P){const sn=ei(u,r),Un=P?P(sn):sn,ar=Ve.length,Bt=P?Mi=>P(Zr(Mi[u.index])):u.index;let _r=null;if(!P&&F&&(_r=function xc(n,r,s,u){const p=n.cleanup;if(null!=p)for(let _=0;_<p.length-1;_+=2){const w=p[_];if(w===s&&p[_+1]===u){const P=r[7],F=p[_+2];return P.length>F?P[F]:null}"string"==typeof w&&(_+=2)}return null}(n,r,p,u.index)),null!==_r)(_r.__ngLastListenerFn__||_r).__ngNextListenerFn__=_,_r.__ngLastListenerFn__=_,nt=!1;else{_=mf(u,r,pe,_,!1);const Mi=s.listen(Un,p,_);Ve.push(_,Mi),ae&&ae.push(p,Bt,ar,ar+1)}}else _=mf(u,r,pe,_,!1);const bt=u.outputs;let Qt;if(nt&&null!==bt&&(Qt=bt[p])){const sn=Qt.length;if(sn)for(let Un=0;Un<sn;Un+=2){const to=r[Qt[Un]][Qt[Un+1]].subscribe(_),sh=Ve.length;Ve.push(_,to),ae&&ae.push(p,u.index,sh,-(sh+1))}}}(_,p,p[11],w,n,r,0,u),gf}function ag(n,r,s,u){try{return!1!==s(u)}catch(p){return Xs(n,p),!1}}function mf(n,r,s,u,p){return function _(w){if(w===Function)return u;tf(2&n.flags?or(n.index,r):r);let F=ag(r,0,u,w),W=_.__ngNextListenerFn__;for(;W;)F=ag(r,0,W,w)&&F,W=W.__ngNextListenerFn__;return p&&!1===F&&(w.preventDefault(),w.returnValue=!1),F}}function yf(n=1){return function k(n){return(wn.lFrame.contextLView=function se(n,r){for(;n>0;)r=r[15],n--;return r}(n,wn.lFrame.contextLView))[8]}(n)}function l_(n,r){let s=null;const u=function Zg(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let p=0;p<r.length;p++){const _=r[p];if("*"!==_){if(null===u?qg(n,_,!0):qc(u,_))return p}else s=p}return s}function Qd(n){const r=At()[16][6];if(!r.projection){const u=r.projection=X(n?n.length:1,null),p=u.slice();let _=r.child;for(;null!==_;){const w=n?l_(_,n):0;null!==w&&(p[w]?p[w].projectionNext=_:u[w]=_,p[w]=_),_=_.next}}}function qd(n,r=0,s){const u=At(),p=fr(),_=ec(p,22+n,16,null,s||null);null===_.projection&&(_.projection=r),ct(),64!=(64&_.flags)&&function wy(n,r,s){Xf(r[11],0,r,s,$g(n,s,r),Qf(s.parent||r[6],s,r))}(p,u,_)}function _f(n,r,s){return cd(n,"",r,"",s),_f}function cd(n,r,s,u,p){const _=At(),w=Bi(_,r,s,u);return w!==Tr&&po(fr(),ft(),_,n,w,_[11],p,!1),cd}function Ef(n,r,s,u,p){const _=n[s+1],w=null===r;let P=u?ll(_):tu(_),F=!1;for(;0!==P&&(!1===F||w);){const ae=n[P+1];c_(n[P],r)&&(F=!0,n[P+1]=u?Bh(ae):Ju(ae)),P=u?ll(ae):tu(ae)}F&&(n[s+1]=u?Ju(_):Bh(_))}function c_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Lr(n,r)>=0}const eo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Hm(n){return n.substring(eo.key,eo.keyEnd)}function Tv(n){return n.substring(eo.value,eo.valueEnd)}function d_(n,r){const s=eo.textEnd;return s===r?-1:(r=eo.keyEnd=function Gm(n,r,s){for(;r<s&&n.charCodeAt(r)>32;)r++;return r}(n,eo.key=r,s),eh(n,r,s))}function Xd(n,r){const s=eo.textEnd;let u=eo.key=eh(n,r,s);return s===u?-1:(u=eo.keyEnd=function Wm(n,r,s){let u;for(;r<s&&(45===(u=n.charCodeAt(r))||95===u||(-33&u)>=65&&(-33&u)<=90||u>=48&&u<=57);)r++;return r}(n,u,s),u=ug(n,u,s),u=eo.value=eh(n,u,s),u=eo.valueEnd=function Km(n,r,s){let u=-1,p=-1,_=-1,w=r,P=w;for(;w<s;){const F=n.charCodeAt(w++);if(59===F)return P;34===F||39===F?P=w=cg(n,F,w,s):r===w-4&&85===_&&82===p&&76===u&&40===F?P=w=cg(n,41,w,s):F>32&&(P=w),_=p,p=u,u=-33&F}return P}(n,u,s),ug(n,u,s))}function $m(n){eo.key=0,eo.keyEnd=0,eo.value=0,eo.valueEnd=0,eo.textEnd=n.length}function eh(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function ug(n,r,s,u){return(r=eh(n,r,s))<s&&r++,r}function cg(n,r,s,u){let p=-1,_=s;for(;_<u;){const w=n.charCodeAt(_++);if(w==r&&92!==p)return _;p=92==w&&92===p?0:w}throw new Error}function dg(n,r,s){return Oa(n,r,s,!1),dg}function th(n,r){return Oa(n,r,null,!0),th}function _u(n){ru(Qm,Nc,n,!1)}function Nc(n,r){for(let s=function h_(n){return $m(n),Xd(n,eh(n,0,eo.textEnd))}(r);s>=0;s=Xd(r,s))Qm(n,Hm(r),Tv(r))}function Lc(n){ru(An,Sl,n,!0)}function Sl(n,r){for(let s=function Df(n){return $m(n),d_(n,eh(n,0,eo.textEnd))}(r);s>=0;s=d_(r,s))An(n,Hm(r),!0)}function Oa(n,r,s,u){const p=At(),_=fr(),w=Zo(2);_.firstUpdatePass&&zm(_,n,w,u),r!==Tr&&Ma(p,w,r)&&qm(_,_.data[me()],p,p[11],n,p[w+1]=function nh(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=z(da(n)))),n}(r,s),u,w)}function ru(n,r,s,u){const p=fr(),_=Zo(2);p.firstUpdatePass&&zm(p,null,_,u);const w=At();if(s!==Tr&&Ma(w,_,s)){const P=p.data[me()];if(If(P,u)&&!p_(p,_)){let F=u?P.classesWithoutHost:P.stylesWithoutHost;null!==F&&(s=oe(F,s||"")),ff(p,P,w,s,u)}else!function y_(n,r,s,u,p,_,w,P){p===Tr&&(p=Lt);let F=0,W=0,ae=0<p.length?p[0]:null,pe=0<_.length?_[0]:null;for(;null!==ae||null!==pe;){const Ve=F<p.length?p[F+1]:void 0,nt=W<_.length?_[W+1]:void 0;let Qt,bt=null;ae===pe?(F+=2,W+=2,Ve!==nt&&(bt=pe,Qt=nt)):null===pe||null!==ae&&ae<pe?(F+=2,bt=ae):(W+=2,bt=pe,Qt=nt),null!==bt&&qm(n,r,s,u,bt,Qt,w,P),ae=F<p.length?p[F]:null,pe=W<_.length?_[W]:null}}(p,P,w,w[11],w[_+1],w[_+1]=function bv(n,r,s){if(null==s||""===s)return Lt;const u=[],p=da(s);if(Array.isArray(p))for(let _=0;_<p.length;_++)n(u,p[_],!0);else if("object"==typeof p)for(const _ in p)p.hasOwnProperty(_)&&n(u,_,p[_]);else"string"==typeof p&&r(u,p);return u}(n,r,s),u,_)}}function p_(n,r){return r>=n.expandoStartIndex}function zm(n,r,s,u){const p=n.data;if(null===p[s+1]){const _=p[me()],w=p_(n,s);If(_,u)&&null===r&&!w&&(r=!1),r=function sc(n,r,s,u){const p=ya(n);let _=u?r.residualClasses:r.residualStyles;if(null===p)0===(u?r.classBindings:r.styleBindings)&&(s=Cf(s=Ym(null,n,r,s,u),r.attrs,u),_=null);else{const w=r.directiveStylingLast;if(-1===w||n[w]!==p)if(s=Ym(p,n,r,s,u),null===_){let F=function g_(n,r,s){const u=s?r.classBindings:r.styleBindings;if(0!==tu(u))return n[ll(u)]}(n,r,u);void 0!==F&&Array.isArray(F)&&(F=Ym(null,n,r,F[1],u),F=Cf(F,r.attrs,u),function Sv(n,r,s,u){n[ll(s?r.classBindings:r.styleBindings)]=u}(n,r,u,F))}else _=function m_(n,r,s){let u;const p=r.directiveEnd;for(let _=1+r.directiveStylingLast;_<p;_++)u=Cf(u,n[_].hostAttrs,s);return Cf(u,r.attrs,s)}(n,r,u)}return void 0!==_&&(u?r.residualClasses=_:r.residualStyles=_),s}(p,_,r,u),function Iv(n,r,s,u,p,_){let w=_?r.classBindings:r.styleBindings,P=ll(w),F=tu(w);n[u]=s;let ae,W=!1;if(Array.isArray(s)){const pe=s;ae=pe[1],(null===ae||Lr(pe,ae)>0)&&(W=!0)}else ae=s;if(p)if(0!==F){const Ve=ll(n[P+1]);n[u+1]=nd(Ve,P),0!==Ve&&(n[Ve+1]=pp(n[Ve+1],u)),n[P+1]=function lm(n,r){return 131071&n|r<<17}(n[P+1],u)}else n[u+1]=nd(P,0),0!==P&&(n[P+1]=pp(n[P+1],u)),P=u;else n[u+1]=nd(F,0),0===P?P=u:n[F+1]=pp(n[F+1],u),F=u;W&&(n[u+1]=Ju(n[u+1])),Ef(n,ae,u,!0),Ef(n,ae,u,!1),function wv(n,r,s,u,p){const _=p?n.residualClasses:n.residualStyles;null!=_&&"string"==typeof r&&Lr(_,r)>=0&&(s[u+1]=Bh(s[u+1]))}(r,ae,n,u,_),w=nd(P,F),_?r.classBindings=w:r.styleBindings=w}(p,_,r,s,w,u)}}function Ym(n,r,s,u,p){let _=null;const w=s.directiveEnd;let P=s.directiveStylingLast;for(-1===P?P=s.directiveStart:P++;P<w&&(_=r[P],u=Cf(u,_.hostAttrs,p),_!==n);)P++;return null!==n&&(s.directiveStylingLast=P),u}function Cf(n,r,s){const u=s?1:2;let p=-1;if(null!==r)for(let _=0;_<r.length;_++){const w=r[_];"number"==typeof w?p=w:p===u&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),An(n,w,!!s||r[++_]))}return void 0===n?null:n}function Qm(n,r,s){An(n,r,da(s))}function qm(n,r,s,u,p,_,w,P){if(!(3&r.type))return;const F=n.data,W=F[P+1];hg(function um(n){return 1==(1&n)}(W)?Zm(F,r,s,p,tu(W),w):void 0)||(hg(_)||function Vh(n){return 2==(2&n)}(W)&&(_=Zm(F,null,s,p,P,w)),function tp(n,r,s,u,p){if(r)p?n.addClass(s,u):n.removeClass(s,u);else{let _=-1===u.indexOf("-")?void 0:yu.DashCase;null==p?n.removeStyle(s,u,_):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),_|=yu.Important),n.setStyle(s,u,p,_))}}(u,w,no(me(),s),p,_))}function Zm(n,r,s,u,p,_){const w=null===r;let P;for(;p>0;){const F=n[p],W=Array.isArray(F),ae=W?F[1]:F,pe=null===ae;let Ve=s[p+1];Ve===Tr&&(Ve=pe?Lt:void 0);let nt=pe?cr(Ve,u):ae===u?Ve:void 0;if(W&&!hg(nt)&&(nt=cr(F,u)),hg(nt)&&(P=nt,w))return P;const bt=n[p+1];p=w?ll(bt):tu(bt)}if(null!==r){let F=_?r.residualClasses:r.residualStyles;null!=F&&(P=cr(F,u))}return P}function hg(n){return void 0!==n}function If(n,r){return 0!=(n.flags&(r?16:32))}function __(n,r=""){const s=At(),u=fr(),p=n+22,_=u.firstCreatePass?ec(u,p,1,r,null):u.data[p],w=s[p]=function Dh(n,r){return n.createText(r)}(s[11],r);wh(u,s,w,_),x(_,!1)}function Jm(n){return wf("",n,""),Jm}function wf(n,r,s){const u=At(),p=Bi(u,n,r,s);return p!==Tr&&Ko(u,me(),p),wf}function fg(n,r,s,u,p){const _=At(),w=Gd(_,n,r,s,u,p);return w!==Tr&&Ko(_,me(),w),fg}function fd(n,r,s,u,p,_,w){const P=At(),F=ad(P,n,r,s,u,p,_,w);return F!==Tr&&Ko(P,me(),F),fd}function pg(n,r,s,u,p,_,w,P,F){const W=At(),ae=function Ts(n,r,s,u,p,_,w,P,F,W){const pe=ul(n,Fs(),s,p,w,F);return Zo(4),pe?r+He(s)+u+He(p)+_+He(w)+P+He(F)+W:Tr}(W,n,r,s,u,p,_,w,P,F);return ae!==Tr&&Ko(W,me(),ae),pg}function Xm(n,r,s,u,p,_,w,P,F,W,ae,pe,Ve){const nt=At(),bt=function ld(n,r,s,u,p,_,w,P,F,W,ae,pe,Ve,nt){const bt=Fs();let Qt=ul(n,bt,s,p,w,F);return Qt=Mc(n,bt+4,ae,Ve)||Qt,Zo(6),Qt?r+He(s)+u+He(p)+_+He(w)+P+He(F)+W+He(ae)+pe+He(Ve)+nt:Tr}(nt,n,r,s,u,p,_,w,P,F,W,ae,pe,Ve);return bt!==Tr&&Ko(nt,me(),bt),Xm}function C_(n,r,s){ru(An,Sl,Bi(At(),n,r,s),!0)}function I_(n,r,s,u,p){ru(An,Sl,Gd(At(),n,r,s,u,p),!0)}function w_(n,r,s,u,p,_,w){ru(An,Sl,ad(At(),n,r,s,u,p,_,w),!0)}function y(n,r,s){_u(Bi(At(),n,r,s))}function Po(n,r,s){const u=At();return Ma(u,Ps(),r)&&po(fr(),ft(),u,n,r,u[11],s,!0),Po}function Fc(n,r,s){const u=At();if(Ma(u,Ps(),r)){const _=fr(),w=ft();po(_,w,u,n,r,function Rm(n,r,s){return(null===n||Fi(n))&&(s=function No(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(s[r.index])),s[11]}(ya(_.data),w,u),s,!0)}return Fc}const rh=void 0;var $0=["en",[["a","p"],["AM","PM"],rh],[["AM","PM"],rh,rh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rh,"{1} 'at' {0}",rh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function H0(n){const s=Math.floor(Math.abs(n)),u=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===u?1:5}];let Tf={};function T_(n){const r=function G0(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Mv(r);if(s)return s;const u=r.split("-")[0];if(s=Mv(u),s)return s;if("en"===u)return $0;throw new ve(701,!1)}function Av(n){return T_(n)[dr.PluralCase]}function Mv(n){return n in Tf||(Tf[n]=ht.ng&&ht.ng.common&&ht.ng.common.locales&&ht.ng.common.locales[n]),Tf[n]}var dr=(()=>((dr=dr||{})[dr.LocaleId=0]="LocaleId",dr[dr.DayPeriodsFormat=1]="DayPeriodsFormat",dr[dr.DayPeriodsStandalone=2]="DayPeriodsStandalone",dr[dr.DaysFormat=3]="DaysFormat",dr[dr.DaysStandalone=4]="DaysStandalone",dr[dr.MonthsFormat=5]="MonthsFormat",dr[dr.MonthsStandalone=6]="MonthsStandalone",dr[dr.Eras=7]="Eras",dr[dr.FirstDayOfWeek=8]="FirstDayOfWeek",dr[dr.WeekendRange=9]="WeekendRange",dr[dr.DateFormat=10]="DateFormat",dr[dr.TimeFormat=11]="TimeFormat",dr[dr.DateTimeFormat=12]="DateTimeFormat",dr[dr.NumberSymbols=13]="NumberSymbols",dr[dr.NumberFormats=14]="NumberFormats",dr[dr.CurrencyCode=15]="CurrencyCode",dr[dr.CurrencySymbol=16]="CurrencySymbol",dr[dr.CurrencyName=17]="CurrencyName",dr[dr.Currencies=18]="Currencies",dr[dr.Directionality=19]="Directionality",dr[dr.PluralCase=20]="PluralCase",dr[dr.ExtraData=21]="ExtraData",dr))();const Sf="en-US";let Ov=Sf;function A_(n,r,s,u,p){if(n=ue(n),Array.isArray(n))for(let _=0;_<n.length;_++)A_(n[_],r,s,u,p);else{const _=fr(),w=At();let P=Au(n)?n:ue(n.provide),F=lh(n);const W=ui(),ae=1048575&W.providerIndexes,pe=W.directiveStart,Ve=W.providerIndexes>>20;if(Au(n)||!n.multi){const nt=new Rs(F,p,td),bt=O_(P,r,p?ae:ae+Ve,pe);-1===bt?(Wi(Kr(W,w),_,P),M_(_,n,r.length),r.push(P),W.directiveStart++,W.directiveEnd++,p&&(W.providerIndexes+=1048576),s.push(nt),w.push(nt)):(s[bt]=nt,w[bt]=nt)}else{const nt=O_(P,r,ae+Ve,pe),bt=O_(P,r,ae,ae+Ve),Qt=nt>=0&&s[nt],sn=bt>=0&&s[bt];if(p&&!sn||!p&&!Qt){Wi(Kr(W,w),_,P);const Un=function jD(n,r,s,u,p){const _=new Rs(n,s,td);return _.multi=[],_.index=r,_.componentProviders=0,tE(_,p,u&&!s),_}(p?BD:VD,s.length,p,u,F);!p&&sn&&(s[bt].providerFactory=Un),M_(_,n,r.length,0),r.push(P),W.directiveStart++,W.directiveEnd++,p&&(W.providerIndexes+=1048576),s.push(Un),w.push(Un)}else M_(_,n,nt>-1?nt:bt,tE(s[p?bt:nt],F,!p&&u));!p&&u&&sn&&s[bt].componentProviders++}}}function M_(n,r,s,u){const p=Au(r),_=function Js(n){return!!n.useClass}(r);if(p||_){const F=(_?ue(r.useClass):r).prototype.ngOnDestroy;if(F){const W=n.destroyHooks||(n.destroyHooks=[]);if(!p&&r.multi){const ae=W.indexOf(s);-1===ae?W.push(s,[u,F]):W[ae+1].push(u,F)}else W.push(s,F)}}}function tE(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function O_(n,r,s,u){for(let p=s;p<u;p++)if(r[p]===n)return p;return-1}function VD(n,r,s,u){return P_(this.multi,[])}function BD(n,r,s,u){const p=this.multi;let _;if(this.providerFactory){const w=this.providerFactory.componentProviders,P=La(s,s[1],this.providerFactory.index,u);_=P.slice(0,w),P_(p,_);for(let F=w;F<P.length;F++)_.push(P[F])}else _=[],P_(p,_);return _}function P_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function nE(n,r=[]){return s=>{s.providersResolver=(u,p)=>function UD(n,r,s){const u=fr();if(u.firstCreatePass){const p=Fi(n);A_(s,u.data,u.blueprint,p,!0),A_(r,u.data,u.blueprint,p,!1)}}(u,p?p(n):n,r)}}class bf{}class rE{}function HD(n,r){return new iE(n,null!=r?r:null)}class iE extends bf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sf(this);const u=tr(r);this._bootstrapComponents=Xl(u.bootstrap),this._r3Injector=Rh(r,s,[{provide:bf,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],z(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class R_ extends rE{constructor(r){super(),this.moduleType=r}create(r){return new iE(this.moduleType,r)}}class $D extends bf{constructor(r,s,u){super(),this.componentFactoryResolver=new sf(this),this.instance=null;const p=new $u([...r,{provide:bf,useValue:this},{provide:Jl,useValue:this.componentFactoryResolver}],s||Hu(),u,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function x_(n,r,s=null){return new $D(n,r,s).injector}let GD=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const u=Bu(0,s.type),p=u.length>0?x_([u],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,p)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=ir({token:n,providedIn:"environment",factory:()=>new n(Yi(Mu))}),n})();function sE(n){n.getStandaloneInjector=r=>r.get(GD).getOrCreateStandaloneInjector(n)}function hE(n,r,s){const u=Gr()+n,p=At();return p[u]===Tr?nu(p,u,s?r.call(s):r()):Hd(p,u)}function fE(n,r,s,u){return yE(At(),Gr(),n,r,s,u)}function pE(n,r,s,u,p){return _E(At(),Gr(),n,r,s,u,p)}function gE(n,r,s,u,p,_){return vE(At(),Gr(),n,r,s,u,p,_)}function mE(n,r,s,u,p,_,w,P,F){const W=Gr()+n,ae=At(),pe=ul(ae,W,s,u,p,_);return Mc(ae,W+4,w,P)||pe?nu(ae,W+6,F?r.call(F,s,u,p,_,w,P):r(s,u,p,_,w,P)):Hd(ae,W+6)}function Eg(n,r){const s=n[r];return s===Tr?void 0:s}function yE(n,r,s,u,p,_){const w=r+s;return Ma(n,w,p)?nu(n,w+1,_?u.call(_,p):u(p)):Eg(n,w+1)}function _E(n,r,s,u,p,_,w){const P=r+s;return Mc(n,P,p,_)?nu(n,P+2,w?u.call(w,p,_):u(p,_)):Eg(n,P+2)}function vE(n,r,s,u,p,_,w,P){const F=r+s;return hf(n,F,p,_,w)?nu(n,F+3,P?u.call(P,p,_,w):u(p,_,w)):Eg(n,F+3)}function CE(n,r){const s=fr();let u;const p=n+22;s.firstCreatePass?(u=function iC(n,r){if(r)for(let s=r.length-1;s>=0;s--){const u=r[s];if(n===u.name)return u}}(r,s.pipeRegistry),s.data[p]=u,u.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(p,u.onDestroy)):u=s.data[p];const _=u.factory||(u.factory=ki(u.type)),w=gr(td);try{const P=Na(!1),F=_();return Na(P),function eg(n,r,s,u){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=u}(s,At(),p,F),F}finally{gr(w)}}function IE(n,r,s){const u=n+22,p=At(),_=Ys(p,u);return Dg(p,u)?yE(p,Gr(),r,_.transform,s,_):_.transform(s)}function wE(n,r,s,u){const p=n+22,_=At(),w=Ys(_,p);return Dg(_,p)?_E(_,Gr(),r,w.transform,s,u,w):w.transform(s,u)}function TE(n,r,s,u,p){const _=n+22,w=At(),P=Ys(w,_);return Dg(w,_)?vE(w,Gr(),r,P.transform,s,u,p,P):P.transform(s,u,p)}function SE(n,r,s){const u=n+22,p=At(),_=Ys(p,u);return Dg(p,u)?function DE(n,r,s,u,p,_){let w=r+s,P=!1;for(let F=0;F<p.length;F++)Ma(n,w++,p[F])&&(P=!0);return P?nu(n,w,u.apply(_,p)):Eg(n,w)}(p,Gr(),r,_.transform,s,_):_.transform.apply(_,s)}function Dg(n,r){return n[1].data[r].pure}function L_(n){return r=>{setTimeout(n,void 0,r)}}const oc=class oC extends g.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,u){var p,_,w;let P=r,F=s||(()=>null),W=u;if(r&&"object"==typeof r){const pe=r;P=null===(p=pe.next)||void 0===p?void 0:p.bind(pe),F=null===(_=pe.error)||void 0===_?void 0:_.bind(pe),W=null===(w=pe.complete)||void 0===w?void 0:w.bind(pe)}this.__isAsync&&(F=L_(F),P&&(P=L_(P)),W&&(W=L_(W)));const ae=super.subscribe({next:P,error:F,complete:W});return r instanceof I.w0&&r.add(ae),ae}};function aC(){return this._results[Ul()]()}class F_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Ul(),u=F_.prototype;u[s]||(u[s]=aC)}get changes(){return this._changes||(this._changes=new oc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const u=this;u.dirty=!1;const p=A(r);(this._changesDetected=!function b(n,r,s){if(n.length!==r.length)return!1;for(let u=0;u<n.length;u++){let p=n[u],_=r[u];if(s&&(p=s(p),_=s(_)),_!==p)return!1}return!0}(u._results,p,s))&&(u._results=p,u.length=p.length,u.last=p[this.length-1],u.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Cg=(()=>{class n{}return n.__NG_ELEMENT_ID__=cC,n})();const lC=Cg,uC=class extends lC{constructor(r,s,u){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=u}createEmbeddedView(r,s){const u=this._declarationTContainer.tViews,p=Gh(this._declarationLView,u,r,16,null,u.declTNode,null,null,null,null,s||null);p[17]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[19];return null!==w&&(p[19]=w.createEmbeddedView(u)),Kh(u,p,r),new od(p)}};function cC(){return oy(ui(),At())}function oy(n,r){return 4&n.type?new uC(r,n,Ou(n,r)):null}let ay=(()=>{class n{}return n.__NG_ELEMENT_ID__=dC,n})();function dC(){return ME(ui(),At())}const hC=ay,bE=class extends hC{constructor(r,s,u){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=u}get element(){return Ou(this._hostTNode,this._hostLView)}get injector(){return new ss(this._hostTNode,this._hostLView)}get parentInjector(){const r=yr(this._hostTNode,this._hostLView);if(Ri(r)){const s=so(r,this._hostLView),u=Us(r);return new ss(s[1].data[u+8],s)}return new ss(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=AE(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,u){let p,_;"number"==typeof u?p=u:null!=u&&(p=u.index,_=u.injector);const w=r.createEmbeddedView(s||{},_);return this.insert(w,p),w}createComponent(r,s,u,p,_){const w=r&&!function zi(n){return"function"==typeof n}(r);let P;if(w)P=s;else{const pe=s||{};P=pe.index,u=pe.injector,p=pe.projectableNodes,_=pe.environmentInjector||pe.ngModuleRef}const F=w?r:new lf(We(r)),W=u||this.parentInjector;if(!_&&null==F.ngModule){const Ve=(w?W:this.parentInjector).get(Mu,null);Ve&&(_=Ve)}const ae=F.create(W,p,void 0,_);return this.insert(ae.hostView,P),ae}insert(r,s){const u=r._lView,p=u[1];if(function pa(n){return Pi(n[3])}(u)){const ae=this.indexOf(r);if(-1!==ae)this.detach(ae);else{const pe=u[3],Ve=new bE(pe,pe[6],pe[3]);Ve.detach(Ve.indexOf(r))}}const _=this._adjustIndex(s),w=this._lContainer;!function zu(n,r,s,u){const p=10+u,_=s.length;u>0&&(s[p-1][4]=r),u<_-10?(r[4]=s[p],N(s,10+u,r)):(s.push(r),r[4]=null),r[3]=s;const w=r[17];null!==w&&s!==w&&function Vg(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(w,r);const P=r[19];null!==P&&P.insertView(n),r[2]|=64}(p,u,w,_);const P=qf(_,w),F=u[11],W=Sd(F,w[7]);return null!==W&&function Dy(n,r,s,u,p,_){u[0]=p,u[6]=r,Qu(n,u,s,1,p,_)}(p,w[6],F,u,W,P),r.attachToViewContainerRef(),N(k_(w),_,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=AE(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),u=Wf(this._lContainer,s);u&&(j(k_(this._lContainer),s),jg(u[1],u))}detach(r){const s=this._adjustIndex(r,-1),u=Wf(this._lContainer,s);return u&&null!=j(k_(this._lContainer),s)?new od(u):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function AE(n){return n[8]}function k_(n){return n[8]||(n[8]=[])}function ME(n,r){let s;const u=r[n.index];if(Pi(u))s=u;else{let p;if(8&n.type)p=Zr(u);else{const _=r[11];p=_.createComment("");const w=ei(n,r);Ic(_,Sd(_,w),p,function Iy(n,r){return n.nextSibling(r)}(_,w),!1)}r[n.index]=s=Om(u,r,p,n),kd(r,s)}return new bE(s,n,r)}class U_{constructor(r){this.queryList=r,this.matches=null}clone(){return new U_(this.queryList)}setDirty(){this.queryList.setDirty()}}class V_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const u=null!==r.contentQueries?r.contentQueries[0]:s.length,p=[];for(let _=0;_<u;_++){const w=s.getByIndex(_);p.push(this.queries[w.indexInDeclarationView].clone())}return new V_(p)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==UE(r,s).matches&&this.queries[s].setDirty()}}class OE{constructor(r,s,u=null){this.predicate=r,this.flags=s,this.read=u}}class B_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let u=0;u<this.length;u++){const p=null!==s?s.length:0,_=this.getByIndex(u).embeddedTView(r,p);_&&(_.indexInDeclarationView=u,null!==s?s.push(_):s=[_])}return null!==s?new B_(s):null}template(r,s){for(let u=0;u<this.queries.length;u++)this.queries[u].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class j_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new j_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let u=r.parent;for(;null!==u&&8&u.type&&u.index!==s;)u=u.parent;return s===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const u=this.metadata.predicate;if(Array.isArray(u))for(let p=0;p<u.length;p++){const _=u[p];this.matchTNodeWithReadOption(r,s,gC(s,_)),this.matchTNodeWithReadOption(r,s,ta(s,r,_,!1,!1))}else u===Cg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,ta(s,r,u,!1,!1))}matchTNodeWithReadOption(r,s,u){if(null!==u){const p=this.metadata.read;if(null!==p)if(p===gc||p===ay||p===Cg&&4&s.type)this.addMatch(s.index,-2);else{const _=ta(s,r,p,!1,!1);null!==_&&this.addMatch(s.index,_)}else this.addMatch(s.index,u)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function gC(n,r){const s=n.localNames;if(null!==s)for(let u=0;u<s.length;u+=2)if(s[u]===r)return s[u+1];return null}function yC(n,r,s,u){return-1===s?function mC(n,r){return 11&n.type?Ou(n,r):4&n.type?oy(n,r):null}(r,n):-2===s?function _C(n,r,s){return s===gc?Ou(r,n):s===Cg?oy(r,n):s===ay?ME(r,n):void 0}(n,r,u):La(n,n[1],s,r)}function PE(n,r,s,u){const p=r[19].queries[u];if(null===p.matches){const _=n.data,w=s.matches,P=[];for(let F=0;F<w.length;F+=2){const W=w[F];P.push(W<0?null:yC(r,_[W],w[F+1],s.metadata.read))}p.matches=P}return p.matches}function H_(n,r,s,u){const p=n.queries.getByIndex(s),_=p.matches;if(null!==_){const w=PE(n,r,p,s);for(let P=0;P<_.length;P+=2){const F=_[P];if(F>0)u.push(w[P/2]);else{const W=_[P+1],ae=r[-F];for(let pe=10;pe<ae.length;pe++){const Ve=ae[pe];Ve[17]===Ve[3]&&H_(Ve[1],Ve,W,u)}if(null!==ae[9]){const pe=ae[9];for(let Ve=0;Ve<pe.length;Ve++){const nt=pe[Ve];H_(nt[1],nt,W,u)}}}}}return u}function RE(n){const r=At(),s=fr(),u=Xo();io(u+1);const p=UE(s,u);if(n.dirty&&function Qa(n){return 4==(4&n[2])}(r)===(2==(2&p.metadata.flags))){if(null===p.matches)n.reset([]);else{const _=p.crossesNgTemplate?H_(s,r,u,[]):PE(s,r,p,u);n.reset(_,Pf),n.notifyOnChanges()}return!0}return!1}function xE(n,r,s){const u=fr();u.firstCreatePass&&(kE(u,new OE(n,r,s),-1),2==(2&r)&&(u.staticViewQueries=!0)),FE(u,At(),r)}function NE(n,r,s,u){const p=fr();if(p.firstCreatePass){const _=ui();kE(p,new OE(r,s,u),_.index),function EC(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(p,n),2==(2&s)&&(p.staticContentQueries=!0)}FE(p,At(),s)}function LE(){return function vC(n,r){return n[19].queries[r].queryList}(At(),Xo())}function FE(n,r,s){const u=new F_(4==(4&s));bc(n,r,u,u.destroy),null===r[19]&&(r[19]=new V_),r[19].queries.push(new U_(u))}function kE(n,r,s){null===n.queries&&(n.queries=new B_),n.queries.track(new j_(r,s))}function UE(n,r){return n.queries.getByIndex(r)}function VE(n,r){return oy(n,r)}function uy(...n){}const s0=new ni("Application Initializer");let cy=(()=>{class n{constructor(s){this.appInits=s,this.resolve=uy,this.reject=uy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,p)=>{this.resolve=u,this.reject=p})}runInitializers(){if(this.initialized)return;const s=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const _=this.appInits[p]();if(rg(_))s.push(_);else if(ig(_)){const w=new Promise((P,F)=>{_.subscribe({complete:P,error:F})});s.push(w)}}Promise.all(s).then(()=>{u()}).catch(p=>{this.reject(p)}),0===s.length&&u(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(Yi(s0,8))},n.\u0275prov=ir({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const o0=new ni("AppId",{providedIn:"root",factory:function a0(){return`${z_()}${z_()}${z_()}`}});function z_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const l0=new ni("Platform Initializer"),BC=new ni("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),u0=new ni("appBootstrapListener"),jC=new ni("AnimationModuleType");let HC=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ir({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const dy=new ni("LocaleId",{providedIn:"root",factory:()=>Hl(dy,zt.Optional|zt.SkipSelf)||function $C(){return"undefined"!=typeof $localize&&$localize.locale||Sf}()}),GC=new ni("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class WC{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let KC=(()=>{class n{compileModuleSync(s){return new R_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const u=this.compileModuleSync(s),_=Xl(tr(s).declarations).reduce((w,P)=>{const F=We(P);return F&&w.push(new lf(F)),w},[]);return new WC(u,_)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ir({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const QC=(()=>Promise.resolve(0))();function Y_(n){"undefined"==typeof Zone?QC.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class vu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new oc(!1),this.onMicrotaskEmpty=new oc(!1),this.onStable=new oc(!1),this.onError=new oc(!1),"undefined"==typeof Zone)throw new ve(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const _=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new _("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!u&&s,p.shouldCoalesceRunChangeDetection=u,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function qC(){let n=ht.requestAnimationFrame,r=ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const u=r[Zone.__symbol__("OriginalDelegate")];u&&(r=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function XC(n){const r=()=>{!function JC(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(ht,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,q_(n),n.isCheckStableRunning=!0,Q_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),q_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,u,p,_,w,P)=>{try{return h0(n),s.invokeTask(p,_,w,P)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||n.shouldCoalesceRunChangeDetection)&&r(),f0(n)}},onInvoke:(s,u,p,_,w,P,F)=>{try{return h0(n),s.invoke(p,_,w,P,F)}finally{n.shouldCoalesceRunChangeDetection&&r(),f0(n)}},onHasTask:(s,u,p,_)=>{s.hasTask(p,_),u===p&&("microTask"==_.change?(n._hasPendingMicrotasks=_.microTask,q_(n),Q_(n)):"macroTask"==_.change&&(n.hasPendingMacrotasks=_.macroTask))},onHandleError:(s,u,p,_)=>(s.handleError(p,_),n.runOutsideAngular(()=>n.onError.emit(_)),!1)})}(p)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vu.isInAngularZone())throw new ve(909,!1)}static assertNotInAngularZone(){if(vu.isInAngularZone())throw new ve(909,!1)}run(r,s,u){return this._inner.run(r,s,u)}runTask(r,s,u,p){const _=this._inner,w=_.scheduleEventTask("NgZoneEvent: "+p,r,ZC,uy,uy);try{return _.runTask(w,s,u)}finally{_.cancelTask(w)}}runGuarded(r,s,u){return this._inner.runGuarded(r,s,u)}runOutsideAngular(r){return this._outer.run(r)}}const ZC={};function Q_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function q_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function h0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function f0(n){n._nesting--,Q_(n)}class eI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new oc,this.onMicrotaskEmpty=new oc,this.onStable=new oc,this.onError=new oc}run(r,s,u){return r.apply(s,u)}runGuarded(r,s,u){return r.apply(s,u)}runOutsideAngular(r){return r()}runTask(r,s,u,p){return r.apply(s,u)}}const p0=new ni(""),g0=new ni("");let wg,tI=(()=>{class n{constructor(s,u,p){this._ngZone=s,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,wg||(function nI(n){wg=n}(p),p.addToWindow(u)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vu.assertNotInAngularZone(),Y_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Y_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(s)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,u,p){let _=-1;u&&u>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==_),s(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:s,timeoutId:_,updateCb:p})}whenStable(s,u,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,u,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,u,p){return[]}}return n.\u0275fac=function(s){return new(s||n)(Yi(vu),Yi(m0),Yi(g0))},n.\u0275prov=ir({token:n,factory:n.\u0275fac}),n})(),m0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,u){this._applications.set(s,u)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,u=!0){var p;return null!==(p=null==wg?void 0:wg.findTestabilityInTree(this,s,u))&&void 0!==p?p:null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ir({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),ac=null;const y0=new ni("AllowMultipleToken"),Z_=new ni("PlatformDestroyListeners");class sI{constructor(r,s){this.name=r,this.token=s}}function v0(n,r,s=[]){const u=`Platform: ${r}`,p=new ni(u);return(_=[])=>{let w=J_();if(!w||w.injector.get(y0,!1)){const P=[...s,..._,{provide:p,useValue:!0}];n?n(P):function oI(n){if(ac&&!ac.get(y0,!1))throw new ve(400,!1);ac=n;const r=n.get(D0);(function _0(n){const r=n.get(l0,null);r&&r.forEach(s=>s())})(n)}(function E0(n=[],r){return qu.create({name:r,providers:[{provide:cc,useValue:"platform"},{provide:Z_,useValue:new Set([()=>ac=null])},...n]})}(P,u))}return function lI(n){const r=J_();if(!r)throw new ve(401,!1);return r}()}}function J_(){var n;return null!==(n=null==ac?void 0:ac.get(D0))&&void 0!==n?n:null}let D0=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,u){const p=function I0(n,r){let s;return s="noop"===n?new eI:("zone.js"===n?void 0:n)||new vu(r),s}(null==u?void 0:u.ngZone,function C0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(u)),_=[{provide:vu,useValue:p}];return p.run(()=>{const w=qu.create({providers:_,parent:this.injector,name:s.moduleType.name}),P=s.create(w),F=P.injector.get(ls,null);if(!F)throw new ve(402,!1);return p.runOutsideAngular(()=>{const W=p.onError.subscribe({next:ae=>{F.handleError(ae)}});P.onDestroy(()=>{fy(this._modules,P),W.unsubscribe()})}),function w0(n,r,s){try{const u=s();return rg(u)?u.catch(p=>{throw r.runOutsideAngular(()=>n.handleError(p)),p}):u}catch(u){throw r.runOutsideAngular(()=>n.handleError(u)),u}}(F,p,()=>{const W=P.injector.get(cy);return W.runInitializers(),W.donePromise.then(()=>(function Pv(n){qt(n,"Expected localeId to be defined"),"string"==typeof n&&(Ov=n.toLowerCase().replace(/_/g,"-"))}(P.injector.get(dy,Sf)||Sf),this._moduleDoBootstrap(P),P))})})}bootstrapModule(s,u=[]){const p=T0({},u);return function rI(n,r,s){const u=new R_(s);return Promise.resolve(u)}(0,0,s).then(_=>this.bootstrapModuleFactory(_,p))}_moduleDoBootstrap(s){const u=s.injector.get(hy);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(p=>u.bootstrap(p));else{if(!s.instance.ngDoBootstrap)throw new ve(403,!1);s.instance.ngDoBootstrap(u)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ve(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const s=this._injector.get(Z_,null);s&&(s.forEach(u=>u()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(Yi(qu))},n.\u0275prov=ir({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function T0(n,r){return Array.isArray(r)?r.reduce(T0,n):Object.assign(Object.assign({},n),r)}let hy=(()=>{class n{constructor(s,u,p){this._zone=s,this._injector=u,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new J.y(P=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{P.next(this._stable),P.complete()})}),w=new J.y(P=>{let F;this._zone.runOutsideAngular(()=>{F=this._zone.onStable.subscribe(()=>{vu.assertNotInAngularZone(),Y_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,P.next(!0))})})});const W=this._zone.onUnstable.subscribe(()=>{vu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{P.next(!1)}))});return()=>{F.unsubscribe(),W.unsubscribe()}});this.isStable=(0,B.T)(_,w.pipe((0,Y.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,u){const p=s instanceof ch;if(!this._injector.get(cy).done)throw!p&&qn(s),new ve(405,false);let w;w=p?s:this._injector.get(Jl).resolveComponentFactory(s),this.componentTypes.push(w.componentType);const P=function iI(n){return n.isBoundToModule}(w)?void 0:this._injector.get(bf),W=w.create(qu.NULL,[],u||w.selector,P),ae=W.location.nativeElement,pe=W.injector.get(p0,null);return null==pe||pe.registerApplication(ae),W.onDestroy(()=>{this.detachView(W.hostView),fy(this.components,W),null==pe||pe.unregisterApplication(ae)}),this._loadComponent(W),W}tick(){if(this._runningTick)throw new ve(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const u=s;this._views.push(u),u.attachToAppRef(this)}detachView(s){const u=s;fy(this._views,u),u.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(u0,[]).concat(this._bootstrapListeners).forEach(p=>p(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>fy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new ve(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(Yi(vu),Yi(Mu),Yi(ls))},n.\u0275prov=ir({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fy(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let b0=!0,A0=!1;function cI(){return A0=!0,b0}function dI(){if(A0)throw new Error("Cannot enable prod mode after platform setup.");b0=!1}let hI=(()=>{class n{}return n.__NG_ELEMENT_ID__=fI,n})();function fI(n){return function pI(n,r,s){if($n(n)&&!s){const u=or(n.index,r);return new od(u,u)}return 47&n.type?new od(r[16],r):null}(ui(),At(),16==(16&n))}class R0{constructor(){}supports(r){return jd(r)}create(r){return new EI(r)}}const vI=(n,r)=>r;class EI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||vI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,u=this._removalsHead,p=0,_=null;for(;s||u;){const w=!u||s&&s.currentIndex<N0(u,p,_)?s:u,P=N0(w,p,_),F=w.currentIndex;if(w===u)p--,u=u._nextRemoved;else if(s=s._next,null==w.previousIndex)p++;else{_||(_=[]);const W=P-p,ae=F-p;if(W!=ae){for(let Ve=0;Ve<W;Ve++){const nt=Ve<_.length?_[Ve]:_[Ve]=0,bt=nt+Ve;ae<=bt&&bt<W&&(_[Ve]=nt+1)}_[w.previousIndex]=ae-W}}P!==F&&r(w,P,F)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!jd(r))throw new ve(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let p,_,w,s=this._itHead,u=!1;if(Array.isArray(r)){this.length=r.length;for(let P=0;P<this.length;P++)_=r[P],w=this._trackByFn(P,_),null!==s&&Object.is(s.trackById,w)?(u&&(s=this._verifyReinsertion(s,_,w,P)),Object.is(s.item,_)||this._addIdentityChange(s,_)):(s=this._mismatch(s,_,w,P),u=!0),s=s._next}else p=0,function Xy(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Ul()]();let u;for(;!(u=s.next()).done;)r(u.value)}}(r,P=>{w=this._trackByFn(p,P),null!==s&&Object.is(s.trackById,w)?(u&&(s=this._verifyReinsertion(s,P,w,p)),Object.is(s.item,P)||this._addIdentityChange(s,P)):(s=this._mismatch(s,P,w,p),u=!0),s=s._next,p++}),this.length=p;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,u,p){let _;return null===r?_=this._itTail:(_=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,_,p)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(u,p))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,_,p)):r=this._addAfter(new DI(s,u),_,p),r}_verifyReinsertion(r,s,u,p){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==_?r=this._reinsertAfter(_,r._prev,p):r.currentIndex!=p&&(r.currentIndex=p,this._addToMoves(r,p)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const p=r._prevRemoved,_=r._nextRemoved;return null===p?this._removalsHead=_:p._nextRemoved=_,null===_?this._removalsTail=p:_._prevRemoved=p,this._insertAfter(r,s,u),this._addToMoves(r,u),r}_moveAfter(r,s,u){return this._unlink(r),this._insertAfter(r,s,u),this._addToMoves(r,u),r}_addAfter(r,s,u){return this._insertAfter(r,s,u),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,u){const p=null===s?this._itHead:s._next;return r._next=p,r._prev=s,null===p?this._itTail=r:p._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new x0),this._linkedRecords.put(r),r.currentIndex=u,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,u=r._next;return null===s?this._itHead=u:s._next=u,null===u?this._itTail=s:u._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new x0),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class DI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class CI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===s||s<=u.currentIndex)&&Object.is(u.trackById,r))return u;return null}remove(r){const s=r._prevDup,u=r._nextDup;return null===s?this._head=u:s._nextDup=u,null===u?this._tail=s:u._prevDup=s,null===this._head}}class x0{constructor(){this.map=new Map}put(r){const s=r.trackById;let u=this.map.get(s);u||(u=new CI,this.map.set(s,u)),u.add(r)}get(r,s){const p=this.map.get(r);return p?p.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function N0(n,r,s){const u=n.previousIndex;if(null===u)return u;let p=0;return s&&u<s.length&&(p=s[u]),u+r+p}class L0{constructor(){}supports(r){return r instanceof Map||df(r)}create(){return new II}}class II{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||df(r)))throw new ve(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(u,p)=>{if(s&&s.key===p)this._maybeAddToChanges(s,u),this._appendAfter=s,s=s._next;else{const _=this._getOrCreateRecordForKey(p,u);s=this._insertBeforeOrAppend(s,_)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let u=s;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const u=r._prev;return s._next=r,s._prev=u,r._prev=s,u&&(u._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const p=this._records.get(r);this._maybeAddToChanges(p,s);const _=p._prev,w=p._next;return _&&(_._next=w),w&&(w._prev=_),p._next=null,p._prev=null,p}const u=new wI(r);return this._records.set(r,u),u.currentValue=s,this._addToAdditions(u),u}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(u=>s(r[u],u))}}class wI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function F0(){return new rv([new R0])}let rv=(()=>{class n{constructor(s){this.factories=s}static create(s,u){if(null!=u){const p=u.factories.slice();s=s.concat(p)}return new n(s)}static extend(s){return{provide:n,useFactory:u=>n.create(s,u||F0()),deps:[[n,new ua,new fl]]}}find(s){const u=this.factories.find(p=>p.supports(s));if(null!=u)return u;throw new ve(901,!1)}}return n.\u0275prov=ir({token:n,providedIn:"root",factory:F0}),n})();function k0(){return new iv([new L0])}let iv=(()=>{class n{constructor(s){this.factories=s}static create(s,u){if(u){const p=u.factories.slice();s=s.concat(p)}return new n(s)}static extend(s){return{provide:n,useFactory:u=>n.create(s,u||k0()),deps:[[n,new ua,new fl]]}}find(s){const u=this.factories.find(p=>p.supports(s));if(u)return u;throw new ve(901,!1)}}return n.\u0275prov=ir({token:n,providedIn:"root",factory:k0}),n})();const bI=v0(null,"core",[]);let AI=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(Yi(hy))},n.\u0275mod=fi({type:n}),n.\u0275inj=Dn({}),n})();function MI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},3075:(_e,ne,D)=>{D.d(ne,{CE:()=>As,Cf:()=>xe,EJ:()=>Ro,F:()=>Rn,Fd:()=>Zr,Fj:()=>Ge,JJ:()=>zt,JL:()=>si,JU:()=>z,K7:()=>li,Kr:()=>Ui,Mq:()=>Fi,NI:()=>Xr,Oe:()=>ko,On:()=>Ke,Q7:()=>fs,UX:()=>Ji,Wl:()=>Q,YN:()=>xo,_:()=>mr,_Y:()=>pt,a5:()=>$t,c5:()=>Ms,cw:()=>We,eT:()=>Ss,kI:()=>Ue,nD:()=>ns,oH:()=>Gs,qQ:()=>Lo,qu:()=>fr,sg:()=>bs,u:()=>Jn,u5:()=>Cs,wO:()=>Dr,wV:()=>Vt,x0:()=>Zi});var g=D(5e3),I=D(9808),J=D(457),B=D(4128),Y=D(4004);let re=(()=>{class ${constructor(x,te){this._renderer=x,this._elementRef=te,this.onChange=ct=>{},this.onTouched=()=>{}}setProperty(x,te){this._renderer.setProperty(this._elementRef.nativeElement,x,te)}registerOnTouched(x){this.onTouched=x}registerOnChange(x){this.onChange=x}setDisabledState(x){this.setProperty("disabled",x)}}return $.\u0275fac=function(x){return new(x||$)(g.Y36(g.Qsj),g.Y36(g.SBq))},$.\u0275dir=g.lG2({type:$}),$})(),ee=(()=>{class $ extends re{}return $.\u0275fac=function(){let U;return function(te){return(U||(U=g.n5z($)))(te||$)}}(),$.\u0275dir=g.lG2({type:$,features:[g.qOj]}),$})();const z=new g.OlP("NgValueAccessor"),oe={provide:z,useExisting:(0,g.Gpc)(()=>Q),multi:!0};let Q=(()=>{class $ extends ee{writeValue(x){this.setProperty("checked",x)}}return $.\u0275fac=function(){let U;return function(te){return(U||(U=g.n5z($)))(te||$)}}(),$.\u0275dir=g.lG2({type:$,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(x,te){1&x&&g.NdJ("change",function(nn){return te.onChange(nn.target.checked)})("blur",function(){return te.onTouched()})},features:[g._Bn([oe]),g.qOj]}),$})();const le={provide:z,useExisting:(0,g.Gpc)(()=>Ge),multi:!0},Re=new g.OlP("CompositionEventMode");let Ge=(()=>{class $ extends re{constructor(x,te,ct){super(x,te),this._compositionMode=ct,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ue(){const $=(0,I.q)()?(0,I.q)().getUserAgent():"";return/android (\d+)/.test($.toLowerCase())}())}writeValue(x){this.setProperty("value",null==x?"":x)}_handleInput(x){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(x)}_compositionStart(){this._composing=!0}_compositionEnd(x){this._composing=!1,this._compositionMode&&this.onChange(x)}}return $.\u0275fac=function(x){return new(x||$)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Re,8))},$.\u0275dir=g.lG2({type:$,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(x,te){1&x&&g.NdJ("input",function(nn){return te._handleInput(nn.target.value)})("blur",function(){return te.onTouched()})("compositionstart",function(){return te._compositionStart()})("compositionend",function(nn){return te._compositionEnd(nn.target.value)})},features:[g._Bn([le]),g.qOj]}),$})();function Be($){return null==$||("string"==typeof $||Array.isArray($))&&0===$.length}function He($){return null!=$&&"number"==typeof $.length}const xe=new g.OlP("NgValidators"),dt=new g.OlP("NgAsyncValidators"),mt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ue{static min(U){return Oe(U)}static max(U){return yt(U)}static required(U){return It(U)}static requiredTrue(U){return function Je($){return!0===$.value?null:{required:!0}}(U)}static email(U){return function Nt($){return Be($.value)||mt.test($.value)?null:{email:!0}}(U)}static minLength(U){return wt(U)}static maxLength(U){return Qe(U)}static pattern(U){return Ye(U)}static nullValidator(U){return null}static compose(U){return St(U)}static composeAsync(U){return Cr(U)}}function Oe($){return U=>{if(Be(U.value)||Be($))return null;const x=parseFloat(U.value);return!isNaN(x)&&x<$?{min:{min:$,actual:U.value}}:null}}function yt($){return U=>{if(Be(U.value)||Be($))return null;const x=parseFloat(U.value);return!isNaN(x)&&x>$?{max:{max:$,actual:U.value}}:null}}function It($){return Be($.value)?{required:!0}:null}function wt($){return U=>Be(U.value)||!He(U.value)?null:U.value.length<$?{minlength:{requiredLength:$,actualLength:U.value.length}}:null}function Qe($){return U=>He(U.value)&&U.value.length>$?{maxlength:{requiredLength:$,actualLength:U.value.length}}:null}function Ye($){if(!$)return ut;let U,x;return"string"==typeof $?(x="","^"!==$.charAt(0)&&(x+="^"),x+=$,"$"!==$.charAt($.length-1)&&(x+="$"),U=new RegExp(x)):(x=$.toString(),U=$),te=>{if(Be(te.value))return null;const ct=te.value;return U.test(ct)?null:{pattern:{requiredPattern:x,actualValue:ct}}}}function ut($){return null}function qe($){return null!=$}function Rt($){return(0,g.QGY)($)?(0,J.D)($):$}function Tt($){let U={};return $.forEach(x=>{U=null!=x?Object.assign(Object.assign({},U),x):U}),0===Object.keys(U).length?null:U}function hn($,U){return U.map(x=>x($))}function qt($){return $.map(U=>function nr($){return!$.validate}(U)?U:x=>U.validate(x))}function St($){if(!$)return null;const U=$.filter(qe);return 0==U.length?null:function(x){return Tt(hn(x,U))}}function vr($){return null!=$?St(qt($)):null}function Cr($){if(!$)return null;const U=$.filter(qe);return 0==U.length?null:function(x){const te=hn(x,U).map(Rt);return(0,B.D)(te).pipe((0,Y.U)(Tt))}}function hr($){return null!=$?Cr(qt($)):null}function ir($,U){return null===$?[U]:Array.isArray($)?[...$,U]:[$,U]}function Ln($){return $._rawValidators}function Dn($){return $._rawAsyncValidators}function jr($){return $?Array.isArray($)?$:[$]:[]}function Ct($,U){return Array.isArray($)?$.includes(U):$===U}function st($,U){const x=jr(U);return jr($).forEach(ct=>{Ct(x,ct)||x.push(ct)}),x}function Le($,U){return jr(U).filter(x=>!Ct($,x))}class it{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(U){this._rawValidators=U||[],this._composedValidatorFn=vr(this._rawValidators)}_setAsyncValidators(U){this._rawAsyncValidators=U||[],this._composedAsyncValidatorFn=hr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(U){this._onDestroyCallbacks.push(U)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(U=>U()),this._onDestroyCallbacks=[]}reset(U){this.control&&this.control.reset(U)}hasError(U,x){return!!this.control&&this.control.hasError(U,x)}getError(U,x){return this.control?this.control.getError(U,x):null}}class $t extends it{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class on extends it{get formDirective(){return null}get path(){return null}}class Fn{constructor(U){this._cd=U}get isTouched(){var U,x;return!(null===(x=null===(U=this._cd)||void 0===U?void 0:U.control)||void 0===x||!x.touched)}get isUntouched(){var U,x;return!(null===(x=null===(U=this._cd)||void 0===U?void 0:U.control)||void 0===x||!x.untouched)}get isPristine(){var U,x;return!(null===(x=null===(U=this._cd)||void 0===U?void 0:U.control)||void 0===x||!x.pristine)}get isDirty(){var U,x;return!(null===(x=null===(U=this._cd)||void 0===U?void 0:U.control)||void 0===x||!x.dirty)}get isValid(){var U,x;return!(null===(x=null===(U=this._cd)||void 0===U?void 0:U.control)||void 0===x||!x.valid)}get isInvalid(){var U,x;return!(null===(x=null===(U=this._cd)||void 0===U?void 0:U.control)||void 0===x||!x.invalid)}get isPending(){var U,x;return!(null===(x=null===(U=this._cd)||void 0===U?void 0:U.control)||void 0===x||!x.pending)}get isSubmitted(){var U;return!(null===(U=this._cd)||void 0===U||!U.submitted)}}let zt=(()=>{class $ extends Fn{constructor(x){super(x)}}return $.\u0275fac=function(x){return new(x||$)(g.Y36($t,2))},$.\u0275dir=g.lG2({type:$,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(x,te){2&x&&g.ekj("ng-untouched",te.isUntouched)("ng-touched",te.isTouched)("ng-pristine",te.isPristine)("ng-dirty",te.isDirty)("ng-valid",te.isValid)("ng-invalid",te.isInvalid)("ng-pending",te.isPending)},features:[g.qOj]}),$})(),si=(()=>{class $ extends Fn{constructor(x){super(x)}}return $.\u0275fac=function(x){return new(x||$)(g.Y36(on,10))},$.\u0275dir=g.lG2({type:$,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(x,te){2&x&&g.ekj("ng-untouched",te.isUntouched)("ng-touched",te.isTouched)("ng-pristine",te.isPristine)("ng-dirty",te.isDirty)("ng-valid",te.isValid)("ng-invalid",te.isInvalid)("ng-pending",te.isPending)("ng-submitted",te.isSubmitted)},features:[g.qOj]}),$})();const fn="VALID",Kn="INVALID",Yr="PENDING",Rr="DISABLED";function Pn($){return(Ae($)?$.validators:$)||null}function lr($){return Array.isArray($)?vr($):$||null}function hi($,U){return(Ae(U)?U.asyncValidators:$)||null}function fi($){return Array.isArray($)?hr($):$||null}function Ae($){return null!=$&&!Array.isArray($)&&"object"==typeof $}function Ie($,U,x){const te=$.controls;if(!(U?Object.keys(te):te).length)throw new g.vHH(1e3,"");if(!te[x])throw new g.vHH(1001,"")}function Fe($,U,x){$._forEachChild((te,ct)=>{if(void 0===x[ct])throw new g.vHH(1002,"")})}class vt{constructor(U,x){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=U,this._rawAsyncValidators=x,this._composedValidatorFn=lr(this._rawValidators),this._composedAsyncValidatorFn=fi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(U){this._rawValidators=this._composedValidatorFn=U}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(U){this._rawAsyncValidators=this._composedAsyncValidatorFn=U}get parent(){return this._parent}get valid(){return this.status===fn}get invalid(){return this.status===Kn}get pending(){return this.status==Yr}get disabled(){return this.status===Rr}get enabled(){return this.status!==Rr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(U){this._rawValidators=U,this._composedValidatorFn=lr(U)}setAsyncValidators(U){this._rawAsyncValidators=U,this._composedAsyncValidatorFn=fi(U)}addValidators(U){this.setValidators(st(U,this._rawValidators))}addAsyncValidators(U){this.setAsyncValidators(st(U,this._rawAsyncValidators))}removeValidators(U){this.setValidators(Le(U,this._rawValidators))}removeAsyncValidators(U){this.setAsyncValidators(Le(U,this._rawAsyncValidators))}hasValidator(U){return Ct(this._rawValidators,U)}hasAsyncValidator(U){return Ct(this._rawAsyncValidators,U)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(U={}){this.touched=!0,this._parent&&!U.onlySelf&&this._parent.markAsTouched(U)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(U=>U.markAllAsTouched())}markAsUntouched(U={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(x=>{x.markAsUntouched({onlySelf:!0})}),this._parent&&!U.onlySelf&&this._parent._updateTouched(U)}markAsDirty(U={}){this.pristine=!1,this._parent&&!U.onlySelf&&this._parent.markAsDirty(U)}markAsPristine(U={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(x=>{x.markAsPristine({onlySelf:!0})}),this._parent&&!U.onlySelf&&this._parent._updatePristine(U)}markAsPending(U={}){this.status=Yr,!1!==U.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!U.onlySelf&&this._parent.markAsPending(U)}disable(U={}){const x=this._parentMarkedDirty(U.onlySelf);this.status=Rr,this.errors=null,this._forEachChild(te=>{te.disable(Object.assign(Object.assign({},U),{onlySelf:!0}))}),this._updateValue(),!1!==U.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},U),{skipPristineCheck:x})),this._onDisabledChange.forEach(te=>te(!0))}enable(U={}){const x=this._parentMarkedDirty(U.onlySelf);this.status=fn,this._forEachChild(te=>{te.enable(Object.assign(Object.assign({},U),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:U.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},U),{skipPristineCheck:x})),this._onDisabledChange.forEach(te=>te(!1))}_updateAncestors(U){this._parent&&!U.onlySelf&&(this._parent.updateValueAndValidity(U),U.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(U){this._parent=U}getRawValue(){return this.value}updateValueAndValidity(U={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fn||this.status===Yr)&&this._runAsyncValidator(U.emitEvent)),!1!==U.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!U.onlySelf&&this._parent.updateValueAndValidity(U)}_updateTreeValidity(U={emitEvent:!0}){this._forEachChild(x=>x._updateTreeValidity(U)),this.updateValueAndValidity({onlySelf:!0,emitEvent:U.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rr:fn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(U){if(this.asyncValidator){this.status=Yr,this._hasOwnPendingAsyncValidator=!0;const x=Rt(this.asyncValidator(this));this._asyncValidationSubscription=x.subscribe(te=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(te,{emitEvent:U})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(U,x={}){this.errors=U,this._updateControlsErrors(!1!==x.emitEvent)}get(U){let x=U;return null==x||(Array.isArray(x)||(x=x.split(".")),0===x.length)?null:x.reduce((te,ct)=>te&&te._find(ct),this)}getError(U,x){const te=x?this.get(x):this;return te&&te.errors?te.errors[U]:null}hasError(U,x){return!!this.getError(U,x)}get root(){let U=this;for(;U._parent;)U=U._parent;return U}_updateControlsErrors(U){this.status=this._calculateStatus(),U&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(U)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Rr:this.errors?Kn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yr)?Yr:this._anyControlsHaveStatus(Kn)?Kn:fn}_anyControlsHaveStatus(U){return this._anyControls(x=>x.status===U)}_anyControlsDirty(){return this._anyControls(U=>U.dirty)}_anyControlsTouched(){return this._anyControls(U=>U.touched)}_updatePristine(U={}){this.pristine=!this._anyControlsDirty(),this._parent&&!U.onlySelf&&this._parent._updatePristine(U)}_updateTouched(U={}){this.touched=this._anyControlsTouched(),this._parent&&!U.onlySelf&&this._parent._updateTouched(U)}_registerOnCollectionChange(U){this._onCollectionChange=U}_setUpdateStrategy(U){Ae(U)&&null!=U.updateOn&&(this._updateOn=U.updateOn)}_parentMarkedDirty(U){return!U&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(U){return null}}class We extends vt{constructor(U,x,te){super(Pn(x),hi(te,x)),this.controls=U,this._initObservables(),this._setUpdateStrategy(x),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(U,x){return this.controls[U]?this.controls[U]:(this.controls[U]=x,x.setParent(this),x._registerOnCollectionChange(this._onCollectionChange),x)}addControl(U,x,te={}){this.registerControl(U,x),this.updateValueAndValidity({emitEvent:te.emitEvent}),this._onCollectionChange()}removeControl(U,x={}){this.controls[U]&&this.controls[U]._registerOnCollectionChange(()=>{}),delete this.controls[U],this.updateValueAndValidity({emitEvent:x.emitEvent}),this._onCollectionChange()}setControl(U,x,te={}){this.controls[U]&&this.controls[U]._registerOnCollectionChange(()=>{}),delete this.controls[U],x&&this.registerControl(U,x),this.updateValueAndValidity({emitEvent:te.emitEvent}),this._onCollectionChange()}contains(U){return this.controls.hasOwnProperty(U)&&this.controls[U].enabled}setValue(U,x={}){Fe(this,0,U),Object.keys(U).forEach(te=>{Ie(this,!0,te),this.controls[te].setValue(U[te],{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x)}patchValue(U,x={}){null!=U&&(Object.keys(U).forEach(te=>{const ct=this.controls[te];ct&&ct.patchValue(U[te],{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x))}reset(U={},x={}){this._forEachChild((te,ct)=>{te.reset(U[ct],{onlySelf:!0,emitEvent:x.emitEvent})}),this._updatePristine(x),this._updateTouched(x),this.updateValueAndValidity(x)}getRawValue(){return this._reduceChildren({},(U,x,te)=>(U[te]=x.getRawValue(),U))}_syncPendingControls(){let U=this._reduceChildren(!1,(x,te)=>!!te._syncPendingControls()||x);return U&&this.updateValueAndValidity({onlySelf:!0}),U}_forEachChild(U){Object.keys(this.controls).forEach(x=>{const te=this.controls[x];te&&U(te,x)})}_setUpControls(){this._forEachChild(U=>{U.setParent(this),U._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(U){for(const[x,te]of Object.entries(this.controls))if(this.contains(x)&&U(te))return!0;return!1}_reduceValue(){return this._reduceChildren({},(x,te,ct)=>((te.enabled||this.disabled)&&(x[ct]=te.value),x))}_reduceChildren(U,x){let te=U;return this._forEachChild((ct,nn)=>{te=x(te,ct,nn)}),te}_allControlsDisabled(){for(const U of Object.keys(this.controls))if(this.controls[U].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(U){return this.controls.hasOwnProperty(U)?this.controls[U]:null}}class qn extends We{}function Er($,U){return[...U.path,$]}function $e($,U){var x,te;at($,U),U.valueAccessor.writeValue($.value),$.disabled&&(null===(te=(x=U.valueAccessor).setDisabledState)||void 0===te||te.call(x,!0)),function rn($,U){U.valueAccessor.registerOnChange(x=>{$._pendingValue=x,$._pendingChange=!0,$._pendingDirty=!0,"change"===$.updateOn&&Pe($,U)})}($,U),function gt($,U){const x=(te,ct)=>{U.valueAccessor.writeValue(te),ct&&U.viewToModelUpdate(te)};$.registerOnChange(x),U._registerOnDestroy(()=>{$._unregisterOnChange(x)})}($,U),function Se($,U){U.valueAccessor.registerOnTouched(()=>{$._pendingTouched=!0,"blur"===$.updateOn&&$._pendingChange&&Pe($,U),"submit"!==$.updateOn&&$.markAsTouched()})}($,U),function ke($,U){if(U.valueAccessor.setDisabledState){const x=te=>{U.valueAccessor.setDisabledState(te)};$.registerOnDisabledChange(x),U._registerOnDestroy(()=>{$._unregisterOnDisabledChange(x)})}}($,U)}function Ce($,U,x=!0){const te=()=>{};U.valueAccessor&&(U.valueAccessor.registerOnChange(te),U.valueAccessor.registerOnTouched(te)),tn($,U),$&&(U._invokeOnDestroyCallbacks(),$._registerOnCollectionChange(()=>{}))}function he($,U){$.forEach(x=>{x.registerOnValidatorChange&&x.registerOnValidatorChange(U)})}function at($,U){const x=Ln($);null!==U.validator?$.setValidators(ir(x,U.validator)):"function"==typeof x&&$.setValidators([x]);const te=Dn($);null!==U.asyncValidator?$.setAsyncValidators(ir(te,U.asyncValidator)):"function"==typeof te&&$.setAsyncValidators([te]);const ct=()=>$.updateValueAndValidity();he(U._rawValidators,ct),he(U._rawAsyncValidators,ct)}function tn($,U){let x=!1;if(null!==$){if(null!==U.validator){const ct=Ln($);if(Array.isArray(ct)&&ct.length>0){const nn=ct.filter(Vr=>Vr!==U.validator);nn.length!==ct.length&&(x=!0,$.setValidators(nn))}}if(null!==U.asyncValidator){const ct=Dn($);if(Array.isArray(ct)&&ct.length>0){const nn=ct.filter(Vr=>Vr!==U.asyncValidator);nn.length!==ct.length&&(x=!0,$.setAsyncValidators(nn))}}}const te=()=>{};return he(U._rawValidators,te),he(U._rawAsyncValidators,te),x}function Pe($,U){$._pendingDirty&&$.markAsDirty(),$.setValue($._pendingValue,{emitModelToViewChange:!1}),U.viewToModelUpdate($._pendingValue),$._pendingChange=!1}function Ut($,U){at($,U)}function Hr($,U){if(!$.hasOwnProperty("model"))return!1;const x=$.model;return!!x.isFirstChange()||!Object.is(U,x.currentValue)}function Hi($,U){$._syncPendingControls(),U.forEach(x=>{const te=x.control;"submit"===te.updateOn&&te._pendingChange&&(x.viewToModelUpdate(te._pendingValue),te._pendingChange=!1)})}function ds($,U){if(!U)return null;let x,te,ct;return Array.isArray(U),U.forEach(nn=>{nn.constructor===Ge?x=nn:function In($){return Object.getPrototypeOf($.constructor)===ee}(nn)?te=nn:ct=nn}),ct||te||x||null}const Zn={provide:on,useExisting:(0,g.Gpc)(()=>Rn)},Oi=(()=>Promise.resolve())();let Rn=(()=>{class $ extends on{constructor(x,te){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new We({},vr(x),hr(te))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(x){Oi.then(()=>{const te=this._findContainer(x.path);x.control=te.registerControl(x.name,x.control),$e(x.control,x),x.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(x)})}getControl(x){return this.form.get(x.path)}removeControl(x){Oi.then(()=>{const te=this._findContainer(x.path);te&&te.removeControl(x.name),this._directives.delete(x)})}addFormGroup(x){Oi.then(()=>{const te=this._findContainer(x.path),ct=new We({});Ut(ct,x),te.registerControl(x.name,ct),ct.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(x){Oi.then(()=>{const te=this._findContainer(x.path);te&&te.removeControl(x.name)})}getFormGroup(x){return this.form.get(x.path)}updateModel(x,te){Oi.then(()=>{this.form.get(x.path).setValue(te)})}setValue(x){this.control.setValue(x)}onSubmit(x){var te;return this.submitted=!0,Hi(this.form,this._directives),this.ngSubmit.emit(x),"dialog"===(null===(te=null==x?void 0:x.target)||void 0===te?void 0:te.method)}onReset(){this.resetForm()}resetForm(x){this.form.reset(x),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(x){return x.pop(),x.length?this.form.get(x):this.form}}return $.\u0275fac=function(x){return new(x||$)(g.Y36(xe,10),g.Y36(dt,10))},$.\u0275dir=g.lG2({type:$,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(x,te){1&x&&g.NdJ("submit",function(nn){return te.onSubmit(nn)})("reset",function(){return te.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Zn]),g.qOj]}),$})();function Tn($,U){const x=$.indexOf(U);x>-1&&$.splice(x,1)}function En($){return"object"==typeof $&&null!==$&&2===Object.keys($).length&&"value"in $&&"disabled"in $}const Xr=class extends vt{constructor(U=null,x,te){super(Pn(x),hi(te,x)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(U),this._setUpdateStrategy(x),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ae(x)&&(x.nonNullable||x.initialValueIsDefault)&&(this.defaultValue=En(U)?U.value:U)}setValue(U,x={}){this.value=this._pendingValue=U,this._onChange.length&&!1!==x.emitModelToViewChange&&this._onChange.forEach(te=>te(this.value,!1!==x.emitViewToModelChange)),this.updateValueAndValidity(x)}patchValue(U,x={}){this.setValue(U,x)}reset(U=this.defaultValue,x={}){this._applyFormState(U),this.markAsPristine(x),this.markAsUntouched(x),this.setValue(this.value,x),this._pendingChange=!1}_updateValue(){}_anyControls(U){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(U){this._onChange.push(U)}_unregisterOnChange(U){Tn(this._onChange,U)}registerOnDisabledChange(U){this._onDisabledChange.push(U)}_unregisterOnDisabledChange(U){Tn(this._onDisabledChange,U)}_forEachChild(U){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(U){En(U)?(this.value=this._pendingValue=U.value,U.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=U}};let go=(()=>{class $ extends on{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Er(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return $.\u0275fac=function(){let U;return function(te){return(U||(U=g.n5z($)))(te||$)}}(),$.\u0275dir=g.lG2({type:$,features:[g.qOj]}),$})();const xr={provide:on,useExisting:(0,g.Gpc)(()=>Fi)};let Fi=(()=>{class $ extends go{constructor(x,te,ct){super(),this._parent=x,this._setValidators(te),this._setAsyncValidators(ct)}_checkParentType(){}}return $.\u0275fac=function(x){return new(x||$)(g.Y36(on,5),g.Y36(xe,10),g.Y36(dt,10))},$.\u0275dir=g.lG2({type:$,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[g._Bn([xr]),g.qOj]}),$})();const De={provide:$t,useExisting:(0,g.Gpc)(()=>Ke)},tt=(()=>Promise.resolve())();let Ke=(()=>{class $ extends $t{constructor(x,te,ct,nn,Vr){super(),this._changeDetectorRef=Vr,this.control=new Xr,this._registered=!1,this.update=new g.vpe,this._parent=x,this._setValidators(te),this._setAsyncValidators(ct),this.valueAccessor=ds(0,nn)}ngOnChanges(x){if(this._checkForErrors(),!this._registered||"name"in x){if(this._registered&&(this._checkName(),this.formDirective)){const te=x.name.previousValue;this.formDirective.removeControl({name:te,path:this._getPath(te)})}this._setUpControl()}"isDisabled"in x&&this._updateDisabled(x),Hr(x,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(x){this.viewModel=x,this.update.emit(x)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){$e(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(x){tt.then(()=>{var te;this.control.setValue(x,{emitViewToModelChange:!1}),null===(te=this._changeDetectorRef)||void 0===te||te.markForCheck()})}_updateDisabled(x){const te=x.isDisabled.currentValue,ct=0!==te&&(0,g.D6c)(te);tt.then(()=>{var nn;ct&&!this.control.disabled?this.control.disable():!ct&&this.control.disabled&&this.control.enable(),null===(nn=this._changeDetectorRef)||void 0===nn||nn.markForCheck()})}_getPath(x){return this._parent?Er(x,this._parent):[x]}}return $.\u0275fac=function(x){return new(x||$)(g.Y36(on,9),g.Y36(xe,10),g.Y36(dt,10),g.Y36(z,10),g.Y36(g.sBO,8))},$.\u0275dir=g.lG2({type:$,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([De]),g.qOj,g.TTD]}),$})(),pt=(()=>{class ${}return $.\u0275fac=function(x){return new(x||$)},$.\u0275dir=g.lG2({type:$,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),$})();const Wt={provide:z,useExisting:(0,g.Gpc)(()=>Vt),multi:!0};let Vt=(()=>{class $ extends ee{writeValue(x){this.setProperty("value",null==x?"":x)}registerOnChange(x){this.onChange=te=>{x(""==te?null:parseFloat(te))}}}return $.\u0275fac=function(){let U;return function(te){return(U||(U=g.n5z($)))(te||$)}}(),$.\u0275dir=g.lG2({type:$,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(x,te){1&x&&g.NdJ("input",function(nn){return te.onChange(nn.target.value)})("blur",function(){return te.onTouched()})},features:[g._Bn([Wt]),g.qOj]}),$})();const Bn={provide:z,useExisting:(0,g.Gpc)(()=>mr),multi:!0};let Sr=(()=>{class ${}return $.\u0275fac=function(x){return new(x||$)},$.\u0275mod=g.oAB({type:$}),$.\u0275inj=g.cJS({}),$})(),Si=(()=>{class ${constructor(){this._accessors=[]}add(x,te){this._accessors.push([x,te])}remove(x){for(let te=this._accessors.length-1;te>=0;--te)if(this._accessors[te][1]===x)return void this._accessors.splice(te,1)}select(x){this._accessors.forEach(te=>{this._isSameGroup(te,x)&&te[1]!==x&&te[1].fireUncheck(x.value)})}_isSameGroup(x,te){return!!x[0].control&&x[0]._parent===te._control._parent&&x[1].name===te.name}}return $.\u0275fac=function(x){return new(x||$)},$.\u0275prov=g.Yz7({token:$,factory:$.\u0275fac,providedIn:Sr}),$})(),mr=(()=>{class $ extends ee{constructor(x,te,ct,nn){super(x,te),this._registry=ct,this._injector=nn,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get($t),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(x){this._state=x===this.value,this.setProperty("checked",this._state)}registerOnChange(x){this._fn=x,this.onChange=()=>{x(this.value),this._registry.select(this)}}fireUncheck(x){this.writeValue(x)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return $.\u0275fac=function(x){return new(x||$)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Si),g.Y36(g.zs3))},$.\u0275dir=g.lG2({type:$,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(x,te){1&x&&g.NdJ("change",function(){return te.onChange()})("blur",function(){return te.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[g._Bn([Bn]),g.qOj]}),$})();const Ur={provide:z,useExisting:(0,g.Gpc)(()=>Ss),multi:!0};let Ss=(()=>{class $ extends ee{writeValue(x){this.setProperty("value",parseFloat(x))}registerOnChange(x){this.onChange=te=>{x(""==te?null:parseFloat(te))}}}return $.\u0275fac=function(){let U;return function(te){return(U||(U=g.n5z($)))(te||$)}}(),$.\u0275dir=g.lG2({type:$,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(x,te){1&x&&g.NdJ("change",function(nn){return te.onChange(nn.target.value)})("input",function(nn){return te.onChange(nn.target.value)})("blur",function(){return te.onTouched()})},features:[g._Bn([Ur]),g.qOj]}),$})();const Hs=new g.OlP("NgModelWithFormControlWarning"),$s={provide:$t,useExisting:(0,g.Gpc)(()=>Gs)};let Gs=(()=>{class $ extends $t{constructor(x,te,ct,nn){super(),this._ngModelWarningConfig=nn,this.update=new g.vpe,this._ngModelWarningSent=!1,this._setValidators(x),this._setAsyncValidators(te),this.valueAccessor=ds(0,ct)}set isDisabled(x){}ngOnChanges(x){if(this._isControlChanged(x)){const te=x.form.previousValue;te&&Ce(te,this,!1),$e(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})}Hr(x,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Ce(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(x){this.viewModel=x,this.update.emit(x)}_isControlChanged(x){return x.hasOwnProperty("form")}}return $._ngModelWarningSentOnce=!1,$.\u0275fac=function(x){return new(x||$)(g.Y36(xe,10),g.Y36(dt,10),g.Y36(z,10),g.Y36(Hs,8))},$.\u0275dir=g.lG2({type:$,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[g._Bn([$s]),g.qOj,g.TTD]}),$})();const rr={provide:on,useExisting:(0,g.Gpc)(()=>bs)};let bs=(()=>{class $ extends on{constructor(x,te){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(x),this._setAsyncValidators(te)}ngOnChanges(x){this._checkFormPresent(),x.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(tn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(x){const te=this.form.get(x.path);return $e(te,x),te.updateValueAndValidity({emitEvent:!1}),this.directives.push(x),te}getControl(x){return this.form.get(x.path)}removeControl(x){Ce(x.control||null,x,!1),function Di($,U){const x=$.indexOf(U);x>-1&&$.splice(x,1)}(this.directives,x)}addFormGroup(x){this._setUpFormContainer(x)}removeFormGroup(x){this._cleanUpFormContainer(x)}getFormGroup(x){return this.form.get(x.path)}addFormArray(x){this._setUpFormContainer(x)}removeFormArray(x){this._cleanUpFormContainer(x)}getFormArray(x){return this.form.get(x.path)}updateModel(x,te){this.form.get(x.path).setValue(te)}onSubmit(x){var te;return this.submitted=!0,Hi(this.form,this.directives),this.ngSubmit.emit(x),"dialog"===(null===(te=null==x?void 0:x.target)||void 0===te?void 0:te.method)}onReset(){this.resetForm()}resetForm(x){this.form.reset(x),this.submitted=!1}_updateDomValue(){this.directives.forEach(x=>{const te=x.control,ct=this.form.get(x.path);te!==ct&&(Ce(te||null,x),($=>$ instanceof Xr)(ct)&&($e(ct,x),x.control=ct))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(x){const te=this.form.get(x.path);Ut(te,x),te.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(x){if(this.form){const te=this.form.get(x.path);te&&function _n($,U){return tn($,U)}(te,x)&&te.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){at(this.form,this),this._oldForm&&tn(this._oldForm,this)}_checkFormPresent(){}}return $.\u0275fac=function(x){return new(x||$)(g.Y36(xe,10),g.Y36(dt,10))},$.\u0275dir=g.lG2({type:$,selectors:[["","formGroup",""]],hostBindings:function(x,te){1&x&&g.NdJ("submit",function(nn){return te.onSubmit(nn)})("reset",function(){return te.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([rr]),g.qOj,g.TTD]}),$})();const mo={provide:on,useExisting:(0,g.Gpc)(()=>Zi)};let Zi=(()=>{class $ extends go{constructor(x,te,ct){super(),this._parent=x,this._setValidators(te),this._setAsyncValidators(ct)}_checkParentType(){gi(this._parent)}}return $.\u0275fac=function(x){return new(x||$)(g.Y36(on,13),g.Y36(xe,10),g.Y36(dt,10))},$.\u0275dir=g.lG2({type:$,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[g._Bn([mo]),g.qOj]}),$})();const pi={provide:on,useExisting:(0,g.Gpc)(()=>As)};let As=(()=>{class $ extends on{constructor(x,te,ct){super(),this._parent=x,this._setValidators(te),this._setAsyncValidators(ct)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Er(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){gi(this._parent)}}return $.\u0275fac=function(x){return new(x||$)(g.Y36(on,13),g.Y36(xe,10),g.Y36(dt,10))},$.\u0275dir=g.lG2({type:$,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[g._Bn([pi]),g.qOj]}),$})();function gi($){return!($ instanceof Zi||$ instanceof bs||$ instanceof As)}const ki={provide:$t,useExisting:(0,g.Gpc)(()=>Jn)};let Jn=(()=>{class $ extends $t{constructor(x,te,ct,nn,Vr){super(),this._ngModelWarningConfig=Vr,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=x,this._setValidators(te),this._setAsyncValidators(ct),this.valueAccessor=ds(0,nn)}set isDisabled(x){}ngOnChanges(x){this._added||this._setUpControl(),Hr(x,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(x){this.viewModel=x,this.update.emit(x)}get path(){return Er(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return $._ngModelWarningSentOnce=!1,$.\u0275fac=function(x){return new(x||$)(g.Y36(on,13),g.Y36(xe,10),g.Y36(dt,10),g.Y36(z,10),g.Y36(Hs,8))},$.\u0275dir=g.lG2({type:$,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([ki]),g.qOj,g.TTD]}),$})();const hs={provide:z,useExisting:(0,g.Gpc)(()=>Ro),multi:!0};function Ws($,U){return null==$?`${U}`:(U&&"object"==typeof U&&(U="Object"),`${$}: ${U}`.slice(0,50))}let Ro=(()=>{class $ extends ee{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(x){this._compareWith=x}writeValue(x){this.value=x;const ct=Ws(this._getOptionId(x),x);this.setProperty("value",ct)}registerOnChange(x){this.onChange=te=>{this.value=this._getOptionValue(te),x(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(x){for(const te of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(te),x))return te;return null}_getOptionValue(x){const te=function Ks($){return $.split(":")[0]}(x);return this._optionMap.has(te)?this._optionMap.get(te):x}}return $.\u0275fac=function(){let U;return function(te){return(U||(U=g.n5z($)))(te||$)}}(),$.\u0275dir=g.lG2({type:$,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(x,te){1&x&&g.NdJ("change",function(nn){return te.onChange(nn.target.value)})("blur",function(){return te.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([hs]),g.qOj]}),$})(),xo=(()=>{class ${constructor(x,te,ct){this._element=x,this._renderer=te,this._select=ct,this._select&&(this.id=this._select._registerOption())}set ngValue(x){null!=this._select&&(this._select._optionMap.set(this.id,x),this._setElementValue(Ws(this.id,x)),this._select.writeValue(this._select.value))}set value(x){this._setElementValue(x),this._select&&this._select.writeValue(this._select.value)}_setElementValue(x){this._renderer.setProperty(this._element.nativeElement,"value",x)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return $.\u0275fac=function(x){return new(x||$)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(Ro,9))},$.\u0275dir=g.lG2({type:$,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),$})();const zs={provide:z,useExisting:(0,g.Gpc)(()=>li),multi:!0};function yo($,U){return null==$?`${U}`:("string"==typeof U&&(U=`'${U}'`),U&&"object"==typeof U&&(U="Object"),`${$}: ${U}`.slice(0,50))}let li=(()=>{class $ extends ee{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(x){this._compareWith=x}writeValue(x){let te;if(this.value=x,Array.isArray(x)){const ct=x.map(nn=>this._getOptionId(nn));te=(nn,Vr)=>{nn._setSelected(ct.indexOf(Vr.toString())>-1)}}else te=(ct,nn)=>{ct._setSelected(!1)};this._optionMap.forEach(te)}registerOnChange(x){this.onChange=te=>{const ct=[],nn=te.selectedOptions;if(void 0!==nn){const Vr=nn;for(let rs=0;rs<Vr.length;rs++){const Gr=this._getOptionValue(Vr[rs].value);ct.push(Gr)}}else{const Vr=te.options;for(let rs=0;rs<Vr.length;rs++){const Is=Vr[rs];if(Is.selected){const Gr=this._getOptionValue(Is.value);ct.push(Gr)}}}this.value=ct,x(ct)}}_registerOption(x){const te=(this._idCounter++).toString();return this._optionMap.set(te,x),te}_getOptionId(x){for(const te of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(te)._value,x))return te;return null}_getOptionValue(x){const te=function Es($){return $.split(":")[0]}(x);return this._optionMap.has(te)?this._optionMap.get(te)._value:x}}return $.\u0275fac=function(){let U;return function(te){return(U||(U=g.n5z($)))(te||$)}}(),$.\u0275dir=g.lG2({type:$,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(x,te){1&x&&g.NdJ("change",function(nn){return te.onChange(nn.target)})("blur",function(){return te.onTouched()})},inputs:{compareWith:"compareWith"},features:[g._Bn([zs]),g.qOj]}),$})(),Ui=(()=>{class ${constructor(x,te,ct){this._element=x,this._renderer=te,this._select=ct,this._select&&(this.id=this._select._registerOption(this))}set ngValue(x){null!=this._select&&(this._value=x,this._setElementValue(yo(this.id,x)),this._select.writeValue(this._select.value))}set value(x){this._select?(this._value=x,this._setElementValue(yo(this.id,x)),this._select.writeValue(this._select.value)):this._setElementValue(x)}_setElementValue(x){this._renderer.setProperty(this._element.nativeElement,"value",x)}_setSelected(x){this._renderer.setProperty(this._element.nativeElement,"selected",x)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return $.\u0275fac=function(x){return new(x||$)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(li,9))},$.\u0275dir=g.lG2({type:$,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),$})();function ts($){return"number"==typeof $?$:parseInt($,10)}function zo($){return"number"==typeof $?$:parseFloat($)}let Nr=(()=>{class ${constructor(){this._validator=ut}ngOnChanges(x){if(this.inputName in x){const te=this.normalizeInput(x[this.inputName].currentValue);this._enabled=this.enabled(te),this._validator=this._enabled?this.createValidator(te):ut,this._onChange&&this._onChange()}}validate(x){return this._validator(x)}registerOnValidatorChange(x){this._onChange=x}enabled(x){return null!=x}}return $.\u0275fac=function(x){return new(x||$)},$.\u0275dir=g.lG2({type:$,features:[g.TTD]}),$})();const fa={provide:xe,useExisting:(0,g.Gpc)(()=>Zr),multi:!0};let Zr=(()=>{class $ extends Nr{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=x=>zo(x),this.createValidator=x=>yt(x)}}return $.\u0275fac=function(){let U;return function(te){return(U||(U=g.n5z($)))(te||$)}}(),$.\u0275dir=g.lG2({type:$,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(x,te){2&x&&g.uIk("max",te._enabled?te.max:null)},inputs:{max:"max"},features:[g._Bn([fa]),g.qOj]}),$})();const No={provide:xe,useExisting:(0,g.Gpc)(()=>Lo),multi:!0};let Lo=(()=>{class $ extends Nr{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=x=>zo(x),this.createValidator=x=>Oe(x)}}return $.\u0275fac=function(){let U;return function(te){return(U||(U=g.n5z($)))(te||$)}}(),$.\u0275dir=g.lG2({type:$,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(x,te){2&x&&g.uIk("min",te._enabled?te.min:null)},inputs:{min:"min"},features:[g._Bn([No]),g.qOj]}),$})();const no={provide:xe,useExisting:(0,g.Gpc)(()=>fs),multi:!0};let fs=(()=>{class $ extends Nr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=g.D6c,this.createValidator=x=>It}enabled(x){return x}}return $.\u0275fac=function(){let U;return function(te){return(U||(U=g.n5z($)))(te||$)}}(),$.\u0275dir=g.lG2({type:$,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(x,te){2&x&&g.uIk("required",te._enabled?"":null)},inputs:{required:"required"},features:[g._Bn([no]),g.qOj]}),$})();const Qa={provide:xe,useExisting:(0,g.Gpc)(()=>Dr),multi:!0};let Dr=(()=>{class $ extends Nr{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=x=>ts(x),this.createValidator=x=>wt(x)}}return $.\u0275fac=function(){let U;return function(te){return(U||(U=g.n5z($)))(te||$)}}(),$.\u0275dir=g.lG2({type:$,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(x,te){2&x&&g.uIk("minlength",te._enabled?te.minlength:null)},inputs:{minlength:"minlength"},features:[g._Bn([Qa]),g.qOj]}),$})();const pa={provide:xe,useExisting:(0,g.Gpc)(()=>ns),multi:!0};let ns=(()=>{class $ extends Nr{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=x=>ts(x),this.createValidator=x=>Qe(x)}}return $.\u0275fac=function(){let U;return function(te){return(U||(U=g.n5z($)))(te||$)}}(),$.\u0275dir=g.lG2({type:$,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(x,te){2&x&&g.uIk("maxlength",te._enabled?te.maxlength:null)},inputs:{maxlength:"maxlength"},features:[g._Bn([pa]),g.qOj]}),$})();const Fo={provide:xe,useExisting:(0,g.Gpc)(()=>Ms),multi:!0};let Ms=(()=>{class $ extends Nr{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=x=>x,this.createValidator=x=>Ye(x)}}return $.\u0275fac=function(){let U;return function(te){return(U||(U=g.n5z($)))(te||$)}}(),$.\u0275dir=g.lG2({type:$,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(x,te){2&x&&g.uIk("pattern",te._enabled?te.pattern:null)},inputs:{pattern:"pattern"},features:[g._Bn([Fo]),g.qOj]}),$})(),Qo=(()=>{class ${}return $.\u0275fac=function(x){return new(x||$)},$.\u0275mod=g.oAB({type:$}),$.\u0275inj=g.cJS({imports:[Sr]}),$})(),Cs=(()=>{class ${}return $.\u0275fac=function(x){return new(x||$)},$.\u0275mod=g.oAB({type:$}),$.\u0275inj=g.cJS({imports:[Qo]}),$})(),Ji=(()=>{class ${static withConfig(x){return{ngModule:$,providers:[{provide:Hs,useValue:x.warnOnNgModelWithFormControl}]}}}return $.\u0275fac=function(x){return new(x||$)},$.\u0275mod=g.oAB({type:$}),$.\u0275inj=g.cJS({imports:[Qo]}),$})();class ko extends vt{constructor(U,x,te){super(Pn(x),hi(te,x)),this.controls=U,this._initObservables(),this._setUpdateStrategy(x),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(U){return this.controls[this._adjustIndex(U)]}push(U,x={}){this.controls.push(U),this._registerControl(U),this.updateValueAndValidity({emitEvent:x.emitEvent}),this._onCollectionChange()}insert(U,x,te={}){this.controls.splice(U,0,x),this._registerControl(x),this.updateValueAndValidity({emitEvent:te.emitEvent})}removeAt(U,x={}){let te=this._adjustIndex(U);te<0&&(te=0),this.controls[te]&&this.controls[te]._registerOnCollectionChange(()=>{}),this.controls.splice(te,1),this.updateValueAndValidity({emitEvent:x.emitEvent})}setControl(U,x,te={}){let ct=this._adjustIndex(U);ct<0&&(ct=0),this.controls[ct]&&this.controls[ct]._registerOnCollectionChange(()=>{}),this.controls.splice(ct,1),x&&(this.controls.splice(ct,0,x),this._registerControl(x)),this.updateValueAndValidity({emitEvent:te.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(U,x={}){Fe(this,0,U),U.forEach((te,ct)=>{Ie(this,!1,ct),this.at(ct).setValue(te,{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x)}patchValue(U,x={}){null!=U&&(U.forEach((te,ct)=>{this.at(ct)&&this.at(ct).patchValue(te,{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x))}reset(U=[],x={}){this._forEachChild((te,ct)=>{te.reset(U[ct],{onlySelf:!0,emitEvent:x.emitEvent})}),this._updatePristine(x),this._updateTouched(x),this.updateValueAndValidity(x)}getRawValue(){return this.controls.map(U=>U.getRawValue())}clear(U={}){this.controls.length<1||(this._forEachChild(x=>x._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:U.emitEvent}))}_adjustIndex(U){return U<0?U+this.length:U}_syncPendingControls(){let U=this.controls.reduce((x,te)=>!!te._syncPendingControls()||x,!1);return U&&this.updateValueAndValidity({onlySelf:!0}),U}_forEachChild(U){this.controls.forEach((x,te)=>{U(x,te)})}_updateValue(){this.value=this.controls.filter(U=>U.enabled||this.disabled).map(U=>U.value)}_anyControls(U){return this.controls.some(x=>x.enabled&&U(x))}_setUpControls(){this._forEachChild(U=>this._registerControl(U))}_allControlsDisabled(){for(const U of this.controls)if(U.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(U){U.setParent(this),U._registerOnCollectionChange(this._onCollectionChange)}_find(U){var x;return null!==(x=this.at(U))&&void 0!==x?x:null}}function At($){return!!$&&(void 0!==$.asyncValidators||void 0!==$.validators||void 0!==$.updateOn)}let fr=(()=>{class ${constructor(){this.useNonNullable=!1}get nonNullable(){const x=new $;return x.useNonNullable=!0,x}group(x,te=null){const ct=this._reduceControls(x);let nn={};return At(te)?nn=te:null!==te&&(nn.validators=te.validator,nn.asyncValidators=te.asyncValidator),new We(ct,nn)}record(x,te=null){const ct=this._reduceControls(x);return new qn(ct,te)}control(x,te,ct){let nn={};return this.useNonNullable?(At(te)?nn=te:(nn.validators=te,nn.asyncValidators=ct),new Xr(x,Object.assign(Object.assign({},nn),{nonNullable:!0}))):new Xr(x,te,ct)}array(x,te,ct){const nn=x.map(Vr=>this._createControl(Vr));return new ko(nn,te,ct)}_reduceControls(x){const te={};return Object.keys(x).forEach(ct=>{te[ct]=this._createControl(x[ct])}),te}_createControl(x){return x instanceof Xr||x instanceof vt?x:Array.isArray(x)?this.control(x[0],x.length>1?x[1]:null,x.length>2?x[2]:null):this.control(x)}}return $.\u0275fac=function(x){return new(x||$)},$.\u0275prov=g.Yz7({token:$,factory:$.\u0275fac,providedIn:Ji}),$})()},2313:(_e,ne,D)=>{D.d(ne,{Dx:()=>je,H7:()=>Xt,b2:()=>cs,h_:()=>Ei,q6:()=>Fr,se:()=>qe});var g=D(9808),I=D(5e3);class J extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class B extends J{static makeCurrent(){(0,g.HT)(new B)}onAndCancel(Ce,he,ke){return Ce.addEventListener(he,ke,!1),()=>{Ce.removeEventListener(he,ke,!1)}}dispatchEvent(Ce,he){Ce.dispatchEvent(he)}remove(Ce){Ce.parentNode&&Ce.parentNode.removeChild(Ce)}createElement(Ce,he){return(he=he||this.getDefaultDocument()).createElement(Ce)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ce){return Ce.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ce){return Ce instanceof DocumentFragment}getGlobalEventTarget(Ce,he){return"window"===he?window:"document"===he?Ce:"body"===he?Ce.body:null}getBaseHref(Ce){const he=function re(){return Y=Y||document.querySelector("base"),Y?Y.getAttribute("href"):null}();return null==he?null:function z($e){ee=ee||document.createElement("a"),ee.setAttribute("href",$e);const Ce=ee.pathname;return"/"===Ce.charAt(0)?Ce:`/${Ce}`}(he)}resetBaseElement(){Y=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ce){return(0,g.Mx)(document.cookie,Ce)}}let ee,Y=null;const oe=new I.OlP("TRANSITION_ID"),le=[{provide:I.ip1,useFactory:function Q($e,Ce,he){return()=>{he.get(I.CZH).donePromise.then(()=>{const ke=(0,g.q)(),at=Ce.querySelectorAll(`style[ng-transition="${$e}"]`);for(let tn=0;tn<at.length;tn++)ke.remove(at[tn])})}},deps:[oe,g.K0,I.zs3],multi:!0}];let Re=(()=>{class $e{build(){return new XMLHttpRequest}}return $e.\u0275fac=function(he){return new(he||$e)},$e.\u0275prov=I.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const Ge=new I.OlP("EventManagerPlugins");let ve=(()=>{class $e{constructor(he,ke){this._zone=ke,this._eventNameToPlugin=new Map,he.forEach(at=>at.manager=this),this._plugins=he.slice().reverse()}addEventListener(he,ke,at){return this._findPluginFor(ke).addEventListener(he,ke,at)}addGlobalEventListener(he,ke,at){return this._findPluginFor(ke).addGlobalEventListener(he,ke,at)}getZone(){return this._zone}_findPluginFor(he){const ke=this._eventNameToPlugin.get(he);if(ke)return ke;const at=this._plugins;for(let tn=0;tn<at.length;tn++){const rn=at[tn];if(rn.supports(he))return this._eventNameToPlugin.set(he,rn),rn}throw new Error(`No event manager plugin found for event ${he}`)}}return $e.\u0275fac=function(he){return new(he||$e)(I.LFG(Ge),I.LFG(I.R0b))},$e.\u0275prov=I.Yz7({token:$e,factory:$e.\u0275fac}),$e})();class Be{constructor(Ce){this._doc=Ce}addGlobalEventListener(Ce,he,ke){const at=(0,g.q)().getGlobalEventTarget(this._doc,Ce);if(!at)throw new Error(`Unsupported event target ${at} for event ${he}`);return this.addEventListener(at,he,ke)}}let He=(()=>{class $e{constructor(){this._stylesSet=new Set}addStyles(he){const ke=new Set;he.forEach(at=>{this._stylesSet.has(at)||(this._stylesSet.add(at),ke.add(at))}),this.onStylesAdded(ke)}onStylesAdded(he){}getAllStyles(){return Array.from(this._stylesSet)}}return $e.\u0275fac=function(he){return new(he||$e)},$e.\u0275prov=I.Yz7({token:$e,factory:$e.\u0275fac}),$e})(),xe=(()=>{class $e extends He{constructor(he){super(),this._doc=he,this._hostNodes=new Map,this._hostNodes.set(he.head,[])}_addStylesToHost(he,ke,at){he.forEach(tn=>{const rn=this._doc.createElement("style");rn.textContent=tn,at.push(ke.appendChild(rn))})}addHost(he){const ke=[];this._addStylesToHost(this._stylesSet,he,ke),this._hostNodes.set(he,ke)}removeHost(he){const ke=this._hostNodes.get(he);ke&&ke.forEach(dt),this._hostNodes.delete(he)}onStylesAdded(he){this._hostNodes.forEach((ke,at)=>{this._addStylesToHost(he,at,ke)})}ngOnDestroy(){this._hostNodes.forEach(he=>he.forEach(dt))}}return $e.\u0275fac=function(he){return new(he||$e)(I.LFG(g.K0))},$e.\u0275prov=I.Yz7({token:$e,factory:$e.\u0275fac}),$e})();function dt($e){(0,g.q)().remove($e)}const mt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ue=/%COMP%/g;function Qe($e,Ce,he){for(let ke=0;ke<Ce.length;ke++){let at=Ce[ke];Array.isArray(at)?Qe($e,at,he):(at=at.replace(Ue,$e),he.push(at))}return he}function Ye($e){return Ce=>{if("__ngUnwrap__"===Ce)return $e;!1===$e(Ce)&&(Ce.preventDefault(),Ce.returnValue=!1)}}let qe=(()=>{class $e{constructor(he,ke,at){this.eventManager=he,this.sharedStylesHost=ke,this.appId=at,this.rendererByCompId=new Map,this.defaultRenderer=new Rt(he)}createRenderer(he,ke){if(!he||!ke)return this.defaultRenderer;switch(ke.encapsulation){case I.ifc.Emulated:{let at=this.rendererByCompId.get(ke.id);return at||(at=new qt(this.eventManager,this.sharedStylesHost,ke,this.appId),this.rendererByCompId.set(ke.id,at)),at.applyToHost(he),at}case 1:case I.ifc.ShadowDom:return new St(this.eventManager,this.sharedStylesHost,he,ke);default:if(!this.rendererByCompId.has(ke.id)){const at=Qe(ke.id,ke.styles,[]);this.sharedStylesHost.addStyles(at),this.rendererByCompId.set(ke.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return $e.\u0275fac=function(he){return new(he||$e)(I.LFG(ve),I.LFG(xe),I.LFG(I.AFp))},$e.\u0275prov=I.Yz7({token:$e,factory:$e.\u0275fac}),$e})();class Rt{constructor(Ce){this.eventManager=Ce,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ce,he){return he?document.createElementNS(mt[he]||he,Ce):document.createElement(Ce)}createComment(Ce){return document.createComment(Ce)}createText(Ce){return document.createTextNode(Ce)}appendChild(Ce,he){(nr(Ce)?Ce.content:Ce).appendChild(he)}insertBefore(Ce,he,ke){Ce&&(nr(Ce)?Ce.content:Ce).insertBefore(he,ke)}removeChild(Ce,he){Ce&&Ce.removeChild(he)}selectRootElement(Ce,he){let ke="string"==typeof Ce?document.querySelector(Ce):Ce;if(!ke)throw new Error(`The selector "${Ce}" did not match any elements`);return he||(ke.textContent=""),ke}parentNode(Ce){return Ce.parentNode}nextSibling(Ce){return Ce.nextSibling}setAttribute(Ce,he,ke,at){if(at){he=at+":"+he;const tn=mt[at];tn?Ce.setAttributeNS(tn,he,ke):Ce.setAttribute(he,ke)}else Ce.setAttribute(he,ke)}removeAttribute(Ce,he,ke){if(ke){const at=mt[ke];at?Ce.removeAttributeNS(at,he):Ce.removeAttribute(`${ke}:${he}`)}else Ce.removeAttribute(he)}addClass(Ce,he){Ce.classList.add(he)}removeClass(Ce,he){Ce.classList.remove(he)}setStyle(Ce,he,ke,at){at&(I.JOm.DashCase|I.JOm.Important)?Ce.style.setProperty(he,ke,at&I.JOm.Important?"important":""):Ce.style[he]=ke}removeStyle(Ce,he,ke){ke&I.JOm.DashCase?Ce.style.removeProperty(he):Ce.style[he]=""}setProperty(Ce,he,ke){Ce[he]=ke}setValue(Ce,he){Ce.nodeValue=he}listen(Ce,he,ke){return"string"==typeof Ce?this.eventManager.addGlobalEventListener(Ce,he,Ye(ke)):this.eventManager.addEventListener(Ce,he,Ye(ke))}}function nr($e){return"TEMPLATE"===$e.tagName&&void 0!==$e.content}class qt extends Rt{constructor(Ce,he,ke,at){super(Ce),this.component=ke;const tn=Qe(at+"-"+ke.id,ke.styles,[]);he.addStyles(tn),this.contentAttr=function Nt($e){return"_ngcontent-%COMP%".replace(Ue,$e)}(at+"-"+ke.id),this.hostAttr=function wt($e){return"_nghost-%COMP%".replace(Ue,$e)}(at+"-"+ke.id)}applyToHost(Ce){super.setAttribute(Ce,this.hostAttr,"")}createElement(Ce,he){const ke=super.createElement(Ce,he);return super.setAttribute(ke,this.contentAttr,""),ke}}class St extends Rt{constructor(Ce,he,ke,at){super(Ce),this.sharedStylesHost=he,this.hostEl=ke,this.shadowRoot=ke.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const tn=Qe(at.id,at.styles,[]);for(let rn=0;rn<tn.length;rn++){const Se=document.createElement("style");Se.textContent=tn[rn],this.shadowRoot.appendChild(Se)}}nodeOrShadowRoot(Ce){return Ce===this.hostEl?this.shadowRoot:Ce}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Ce,he){return super.appendChild(this.nodeOrShadowRoot(Ce),he)}insertBefore(Ce,he,ke){return super.insertBefore(this.nodeOrShadowRoot(Ce),he,ke)}removeChild(Ce,he){return super.removeChild(this.nodeOrShadowRoot(Ce),he)}parentNode(Ce){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ce)))}}let vr=(()=>{class $e extends Be{constructor(he){super(he)}supports(he){return!0}addEventListener(he,ke,at){return he.addEventListener(ke,at,!1),()=>this.removeEventListener(he,ke,at)}removeEventListener(he,ke,at){return he.removeEventListener(ke,at)}}return $e.\u0275fac=function(he){return new(he||$e)(I.LFG(g.K0))},$e.\u0275prov=I.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const Cr=["alt","control","meta","shift"],hr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ir={alt:$e=>$e.altKey,control:$e=>$e.ctrlKey,meta:$e=>$e.metaKey,shift:$e=>$e.shiftKey};let Ln=(()=>{class $e extends Be{constructor(he){super(he)}supports(he){return null!=$e.parseEventName(he)}addEventListener(he,ke,at){const tn=$e.parseEventName(ke),rn=$e.eventCallback(tn.fullKey,at,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(he,tn.domEventName,rn))}static parseEventName(he){const ke=he.toLowerCase().split("."),at=ke.shift();if(0===ke.length||"keydown"!==at&&"keyup"!==at)return null;const tn=$e._normalizeKey(ke.pop());let rn="",Se=ke.indexOf("code");if(Se>-1&&(ke.splice(Se,1),rn="code."),Cr.forEach(gt=>{const Ut=ke.indexOf(gt);Ut>-1&&(ke.splice(Ut,1),rn+=gt+".")}),rn+=tn,0!=ke.length||0===tn.length)return null;const Pe={};return Pe.domEventName=at,Pe.fullKey=rn,Pe}static matchEventFullKeyCode(he,ke){let at=hr[he.key]||he.key,tn="";return ke.indexOf("code.")>-1&&(at=he.code,tn="code."),!(null==at||!at)&&(at=at.toLowerCase()," "===at?at="space":"."===at&&(at="dot"),Cr.forEach(rn=>{rn!==at&&(0,ir[rn])(he)&&(tn+=rn+".")}),tn+=at,tn===ke)}static eventCallback(he,ke,at){return tn=>{$e.matchEventFullKeyCode(tn,he)&&at.runGuarded(()=>ke(tn))}}static _normalizeKey(he){return"esc"===he?"escape":he}}return $e.\u0275fac=function(he){return new(he||$e)(I.LFG(g.K0))},$e.\u0275prov=I.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const Fr=(0,I.eFA)(I._c5,"browser",[{provide:I.Lbi,useValue:g.bD},{provide:I.g9A,useValue:function it(){B.makeCurrent()},multi:!0},{provide:g.K0,useFactory:function on(){return(0,I.RDi)(document),document},deps:[]}]),Li=new I.OlP(""),zt=[{provide:I.rWj,useClass:class ue{addToWindow(Ce){I.dqk.getAngularTestability=(ke,at=!0)=>{const tn=Ce.findTestabilityInTree(ke,at);if(null==tn)throw new Error("Could not find testability for element.");return tn},I.dqk.getAllAngularTestabilities=()=>Ce.getAllTestabilities(),I.dqk.getAllAngularRootElements=()=>Ce.getAllRootElements(),I.dqk.frameworkStabilizers||(I.dqk.frameworkStabilizers=[]),I.dqk.frameworkStabilizers.push(ke=>{const at=I.dqk.getAllAngularTestabilities();let tn=at.length,rn=!1;const Se=function(Pe){rn=rn||Pe,tn--,0==tn&&ke(rn)};at.forEach(function(Pe){Pe.whenStable(Se)})})}findTestabilityInTree(Ce,he,ke){if(null==he)return null;const at=Ce.getTestability(he);return null!=at?at:ke?(0,g.q)().isShadowRoot(he)?this.findTestabilityInTree(Ce,he.host,!0):this.findTestabilityInTree(Ce,he.parentElement,!0):null}},deps:[]},{provide:I.lri,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]},{provide:I.dDg,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]}],si=[{provide:I.zSh,useValue:"root"},{provide:I.qLn,useFactory:function $t(){return new I.qLn},deps:[]},{provide:Ge,useClass:vr,multi:!0,deps:[g.K0,I.R0b,I.Lbi]},{provide:Ge,useClass:Ln,multi:!0,deps:[g.K0]},{provide:qe,useClass:qe,deps:[ve,xe,I.AFp]},{provide:I.FYo,useExisting:qe},{provide:He,useExisting:xe},{provide:xe,useClass:xe,deps:[g.K0]},{provide:ve,useClass:ve,deps:[Ge,I.R0b]},{provide:g.JF,useClass:Re,deps:[]},[]];let cs=(()=>{class $e{constructor(he){}static withServerTransition(he){return{ngModule:$e,providers:[{provide:I.AFp,useValue:he.appId},{provide:oe,useExisting:I.AFp},le]}}}return $e.\u0275fac=function(he){return new(he||$e)(I.LFG(Li,12))},$e.\u0275mod=I.oAB({type:$e}),$e.\u0275inj=I.cJS({providers:[...si,...zt],imports:[g.ez,I.hGG]}),$e})(),Ei=(()=>{class $e{constructor(he){this._doc=he,this._dom=(0,g.q)()}addTag(he,ke=!1){return he?this._getOrCreateElement(he,ke):null}addTags(he,ke=!1){return he?he.reduce((at,tn)=>(tn&&at.push(this._getOrCreateElement(tn,ke)),at),[]):[]}getTag(he){return he&&this._doc.querySelector(`meta[${he}]`)||null}getTags(he){if(!he)return[];const ke=this._doc.querySelectorAll(`meta[${he}]`);return ke?[].slice.call(ke):[]}updateTag(he,ke){if(!he)return null;ke=ke||this._parseSelector(he);const at=this.getTag(ke);return at?this._setMetaElementAttributes(he,at):this._getOrCreateElement(he,!0)}removeTag(he){this.removeTagElement(this.getTag(he))}removeTagElement(he){he&&this._dom.remove(he)}_getOrCreateElement(he,ke=!1){if(!ke){const rn=this._parseSelector(he),Se=this.getTags(rn).filter(Pe=>this._containsAttributes(he,Pe))[0];if(void 0!==Se)return Se}const at=this._dom.createElement("meta");return this._setMetaElementAttributes(he,at),this._doc.getElementsByTagName("head")[0].appendChild(at),at}_setMetaElementAttributes(he,ke){return Object.keys(he).forEach(at=>ke.setAttribute(this._getMetaKeyMap(at),he[at])),ke}_parseSelector(he){const ke=he.name?"name":"property";return`${ke}="${he[ke]}"`}_containsAttributes(he,ke){return Object.keys(he).every(at=>ke.getAttribute(this._getMetaKeyMap(at))===he[at])}_getMetaKeyMap(he){return oi[he]||he}}return $e.\u0275fac=function(he){return new(he||$e)(I.LFG(g.K0))},$e.\u0275prov=I.Yz7({token:$e,factory:function(he){let ke=null;return ke=he?new he:function gr(){return new Ei((0,I.LFG)(g.K0))}(),ke},providedIn:"root"}),$e})();const oi={httpEquiv:"http-equiv"};let je=(()=>{class $e{constructor(he){this._doc=he}getTitle(){return this._doc.title}setTitle(he){this._doc.title=he||""}}return $e.\u0275fac=function(he){return new(he||$e)(I.LFG(g.K0))},$e.\u0275prov=I.Yz7({token:$e,factory:function(he){let ke=null;return ke=he?new he:function Pr(){return new je((0,I.LFG)(g.K0))}(),ke},providedIn:"root"}),$e})();"undefined"!=typeof window&&window;let Xt=(()=>{class $e{}return $e.\u0275fac=function(he){return new(he||$e)},$e.\u0275prov=I.Yz7({token:$e,factory:function(he){let ke=null;return ke=he?new(he||$e):I.LFG(tr),ke},providedIn:"root"}),$e})(),tr=(()=>{class $e extends Xt{constructor(he){super(),this._doc=he}sanitize(he,ke){if(null==ke)return null;switch(he){case I.q3G.NONE:return ke;case I.q3G.HTML:return(0,I.qzn)(ke,"HTML")?(0,I.z3N)(ke):(0,I.EiD)(this._doc,String(ke)).toString();case I.q3G.STYLE:return(0,I.qzn)(ke,"Style")?(0,I.z3N)(ke):ke;case I.q3G.SCRIPT:if((0,I.qzn)(ke,"Script"))return(0,I.z3N)(ke);throw new Error("unsafe value used in a script context");case I.q3G.URL:return(0,I.qzn)(ke,"URL")?(0,I.z3N)(ke):(0,I.mCW)(String(ke));case I.q3G.RESOURCE_URL:if((0,I.qzn)(ke,"ResourceURL"))return(0,I.z3N)(ke);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${he} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(he){return(0,I.JVY)(he)}bypassSecurityTrustStyle(he){return(0,I.L6k)(he)}bypassSecurityTrustScript(he){return(0,I.eBb)(he)}bypassSecurityTrustUrl(he){return(0,I.LAX)(he)}bypassSecurityTrustResourceUrl(he){return(0,I.pB0)(he)}}return $e.\u0275fac=function(he){return new(he||$e)(I.LFG(g.K0))},$e.\u0275prov=I.Yz7({token:$e,factory:function(he){let ke=null;return ke=he?new he:function qn($e){return new tr($e.get(g.K0))}(I.LFG(I.zs3)),ke},providedIn:"root"}),$e})()},4202:(_e,ne,D)=>{D.d(ne,{Bz:()=>ra,F0:()=>Wi,OD:()=>Oi,Od:()=>Vo,Q3:()=>En,gk:()=>Tn,gz:()=>Ur,lC:()=>Es,m2:()=>Rn,rH:()=>ao,wN:()=>Za,yS:()=>lo});var g=D(5e3),I=D(457),J=D(9646),B=D(1135),Y=D(6805),re=D(9841),ee=D(7272),z=D(9770),oe=D(9635),Q=D(2843),le=D(9751),ue=D(515),Re=D(4033),Ge=D(7579),ve=D(9808),Be=D(4004),He=D(3900),xe=D(5698),dt=D(8675),mt=D(9300),Ue=D(5577),Oe=D(590),yt=D(4351),It=D(8505),Je=D(262),Nt=D(5026),wt=D(3103),Qe=D(2529),Ye=D(6590),ut=D(2035),qe=D(9718),Rt=D(8746),Tt=D(8343),hn=D(8189),nr=D(2313);const qt="primary",St=Symbol("RouteTitle");class vr{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const T=this.params[A];return Array.isArray(T)?T[0]:T}return null}getAll(A){if(this.has(A)){const T=this.params[A];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function Cr(b){return new vr(b)}function hr(b,A,T){const N=T.path.split("/");if(N.length>b.length||"full"===T.pathMatch&&(A.hasChildren()||N.length<b.length))return null;const j={};for(let X=0;X<N.length;X++){const ge=N[X],Ee=b[X];if(ge.startsWith(":"))j[ge.substring(1)]=Ee;else if(ge!==Ee.path)return null}return{consumed:b.slice(0,N.length),posParams:j}}function Ln(b,A){const T=b?Object.keys(b):void 0,N=A?Object.keys(A):void 0;if(!T||!N||T.length!=N.length)return!1;let j;for(let X=0;X<T.length;X++)if(j=T[X],!Dn(b[j],A[j]))return!1;return!0}function Dn(b,A){if(Array.isArray(b)&&Array.isArray(A)){if(b.length!==A.length)return!1;const T=[...b].sort(),N=[...A].sort();return T.every((j,X)=>N[X]===j)}return b===A}function jr(b){return Array.prototype.concat.apply([],b)}function Ct(b){return b.length>0?b[b.length-1]:null}function Le(b,A){for(const T in b)b.hasOwnProperty(T)&&A(b[T],T)}function it(b){return(0,g.CqO)(b)?b:(0,g.QGY)(b)?(0,I.D)(Promise.resolve(b)):(0,J.of)(b)}const Fn={exact:function si(b,A,T){if(!Xe(b.segments,A.segments)||!oi(b.segments,A.segments,T)||b.numberOfChildren!==A.numberOfChildren)return!1;for(const N in A.children)if(!b.children[N]||!si(b.children[N],A.children[N],T))return!1;return!0},subset:gr},Fr={exact:function zt(b,A){return Ln(b,A)},subset:function cs(b,A){return Object.keys(A).length<=Object.keys(b).length&&Object.keys(A).every(T=>Dn(b[T],A[T]))},ignored:()=>!0};function Li(b,A,T){return Fn[T.paths](b.root,A.root,T.matrixParams)&&Fr[T.queryParams](b.queryParams,A.queryParams)&&!("exact"===T.fragment&&b.fragment!==A.fragment)}function gr(b,A,T){return Ei(b,A,A.segments,T)}function Ei(b,A,T,N){if(b.segments.length>T.length){const j=b.segments.slice(0,T.length);return!(!Xe(j,T)||A.hasChildren()||!oi(j,T,N))}if(b.segments.length===T.length){if(!Xe(b.segments,T)||!oi(b.segments,T,N))return!1;for(const j in A.children)if(!b.children[j]||!gr(b.children[j],A.children[j],N))return!1;return!0}{const j=T.slice(0,b.segments.length),X=T.slice(b.segments.length);return!!(Xe(b.segments,j)&&oi(b.segments,j,N)&&b.children[qt])&&Ei(b.children[qt],A,X,N)}}function oi(b,A,T){return A.every((N,j)=>Fr[T](b[j].parameters,N.parameters))}class Pr{constructor(A,T,N){this.root=A,this.queryParams=T,this.fragment=N}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cr(this.queryParams)),this._queryParamMap}toString(){return er.serialize(this)}}class je{constructor(A,T){this.segments=A,this.children=T,this.parent=null,Le(T,(N,j)=>N.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Lt(this)}}class Te{constructor(A,T){this.path=A,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=Cr(this.parameters)),this._parameterMap}toString(){return Rr(this)}}function Xe(b,A){return b.length===A.length&&b.every((T,N)=>T.path===A[N].path)}let an=(()=>{class b{}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=g.Yz7({token:b,factory:function(){return new dn},providedIn:"root"}),b})();class dn{parse(A){const T=new We(A);return new Pr(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(A){const T=`/${Nn(A.root,!0)}`,N=function lr(b){const A=Object.keys(b).map(T=>{const N=b[T];return Array.isArray(N)?N.map(j=>`${zr(T)}=${zr(j)}`).join("&"):`${zr(T)}=${zr(N)}`}).filter(T=>!!T);return A.length?`?${A.join("&")}`:""}(A.queryParams);return`${T}${N}${"string"==typeof A.fragment?`#${function On(b){return encodeURI(b)}(A.fragment)}`:""}`}}const er=new dn;function Lt(b){return b.segments.map(A=>Rr(A)).join("/")}function Nn(b,A){if(!b.hasChildren())return Lt(b);if(A){const T=b.children[qt]?Nn(b.children[qt],!1):"",N=[];return Le(b.children,(j,X)=>{X!==qt&&N.push(`${X}:${Nn(j,!1)}`)}),N.length>0?`${T}(${N.join("//")})`:T}{const T=function ht(b,A){let T=[];return Le(b.children,(N,j)=>{j===qt&&(T=T.concat(A(N,j)))}),Le(b.children,(N,j)=>{j!==qt&&(T=T.concat(A(N,j)))}),T}(b,(N,j)=>j===qt?[Nn(b.children[qt],!1)]:[`${j}:${Nn(N,!1)}`]);return 1===Object.keys(b.children).length&&null!=b.children[qt]?`${Lt(b)}/${T[0]}`:`${Lt(b)}/(${T.join("//")})`}}function Wn(b){return encodeURIComponent(b).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zr(b){return Wn(b).replace(/%3B/gi,";")}function fn(b){return Wn(b).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Kn(b){return decodeURIComponent(b)}function Yr(b){return Kn(b.replace(/\+/g,"%20"))}function Rr(b){return`${fn(b.path)}${function Pn(b){return Object.keys(b).map(A=>`;${fn(A)}=${fn(b[A])}`).join("")}(b.parameters)}`}const hi=/^[^\/()?;=#]+/;function fi(b){const A=b.match(hi);return A?A[0]:""}const Ae=/^[^=?&#]+/,Fe=/^[^&#]+/;class We{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new je([],{}):new je([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(A.length>0||Object.keys(T).length>0)&&(N[qt]=new je(A,T)),N}parseSegment(){const A=fi(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(A),new Te(Kn(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const T=fi(this.remaining);if(!T)return;this.capture(T);let N="";if(this.consumeOptional("=")){const j=fi(this.remaining);j&&(N=j,this.capture(N))}A[Kn(T)]=Kn(N)}parseQueryParam(A){const T=function Ie(b){const A=b.match(Ae);return A?A[0]:""}(this.remaining);if(!T)return;this.capture(T);let N="";if(this.consumeOptional("=")){const ge=function vt(b){const A=b.match(Fe);return A?A[0]:""}(this.remaining);ge&&(N=ge,this.capture(N))}const j=Yr(T),X=Yr(N);if(A.hasOwnProperty(j)){let ge=A[j];Array.isArray(ge)||(ge=[ge],A[j]=ge),ge.push(X)}else A[j]=X}parseParens(A){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const N=fi(this.remaining),j=this.remaining[N.length];if("/"!==j&&")"!==j&&";"!==j)throw new g.vHH(4010,!1);let X;N.indexOf(":")>-1?(X=N.slice(0,N.indexOf(":")),this.capture(X),this.capture(":")):A&&(X=qt);const ge=this.parseChildren();T[X]=1===Object.keys(ge).length?ge[qt]:new je([],ge),this.consumeOptional("//")}return T}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new g.vHH(4011,!1)}}function Gt(b){return b.segments.length>0?new je([],{[qt]:b}):b}function Xt(b){const A={};for(const N of Object.keys(b.children)){const X=Xt(b.children[N]);(X.segments.length>0||X.hasChildren())&&(A[N]=X)}return function qn(b){if(1===b.numberOfChildren&&b.children[qt]){const A=b.children[qt];return new je(b.segments.concat(A.segments),A.children)}return b}(new je(b.segments,A))}function tr(b){return b instanceof Pr}function ke(b,A,T,N,j){var X;if(0===T.length)return rn(A.root,A.root,A.root,N,j);const Ee=function gt(b){if("string"==typeof b[0]&&1===b.length&&"/"===b[0])return new Pe(!0,0,b);let A=0,T=!1;const N=b.reduce((j,X,ge)=>{if("object"==typeof X&&null!=X){if(X.outlets){const Ee={};return Le(X.outlets,(Ze,Ft)=>{Ee[Ft]="string"==typeof Ze?Ze.split("/"):Ze}),[...j,{outlets:Ee}]}if(X.segmentPath)return[...j,X.segmentPath]}return"string"!=typeof X?[...j,X]:0===ge?(X.split("/").forEach((Ee,Ze)=>{0==Ze&&"."===Ee||(0==Ze&&""===Ee?T=!0:".."===Ee?A++:""!=Ee&&j.push(Ee))}),j):[...j,X]},[]);return new Pe(T,A,N)}(T);return Ee.toRoot()?rn(A.root,A.root,new je([],{}),N,j):function Ze(un){var Ht;const An=function Cn(b,A,T,N){if(b.isAbsolute)return new Ut(A.root,!0,0);if(-1===N)return new Ut(T,T===A.root,0);return function Vn(b,A,T){let N=b,j=A,X=T;for(;X>j;){if(X-=j,N=N.parent,!N)throw new g.vHH(4005,!1);j=N.segments.length}return new Ut(N,!1,j-X)}(T,N+(at(b.commands[0])?0:1),b.numberOfDoubleDots)}(Ee,A,null===(Ht=b.snapshot)||void 0===Ht?void 0:Ht._urlSegment,un),cr=An.processChildren?Hr(An.segmentGroup,An.index,Ee.commands):Qr(An.segmentGroup,An.index,Ee.commands);return rn(A.root,An.segmentGroup,cr,N,j)}(null===(X=b.snapshot)||void 0===X?void 0:X._lastPathIndex)}function at(b){return"object"==typeof b&&null!=b&&!b.outlets&&!b.segmentPath}function tn(b){return"object"==typeof b&&null!=b&&b.outlets}function rn(b,A,T,N,j){let ge,X={};N&&Le(N,(Ze,Ft)=>{X[Ft]=Array.isArray(Ze)?Ze.map(un=>`${un}`):`${Ze}`}),ge=b===A?T:Se(b,A,T);const Ee=Gt(Xt(ge));return new Pr(Ee,X,j)}function Se(b,A,T){const N={};return Le(b.children,(j,X)=>{N[X]=j===A?T:Se(j,A,T)}),new je(b.segments,N)}class Pe{constructor(A,T,N){if(this.isAbsolute=A,this.numberOfDoubleDots=T,this.commands=N,A&&N.length>0&&at(N[0]))throw new g.vHH(4003,!1);const j=N.find(tn);if(j&&j!==Ct(N))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ut{constructor(A,T,N){this.segmentGroup=A,this.processChildren=T,this.index=N}}function Qr(b,A,T){if(b||(b=new je([],{})),0===b.segments.length&&b.hasChildren())return Hr(b,A,T);const N=function In(b,A,T){let N=0,j=A;const X={match:!1,pathIndex:0,commandIndex:0};for(;j<b.segments.length;){if(N>=T.length)return X;const ge=b.segments[j],Ee=T[N];if(tn(Ee))break;const Ze=`${Ee}`,Ft=N<T.length-1?T[N+1]:null;if(j>0&&void 0===Ze)break;if(Ze&&Ft&&"object"==typeof Ft&&void 0===Ft.outlets){if(!ai(Ze,Ft,ge))return X;N+=2}else{if(!ai(Ze,{},ge))return X;N++}j++}return{match:!0,pathIndex:j,commandIndex:N}}(b,A,T),j=T.slice(N.commandIndex);if(N.match&&N.pathIndex<b.segments.length){const X=new je(b.segments.slice(0,N.pathIndex),{});return X.children[qt]=new je(b.segments.slice(N.pathIndex),b.children),Hr(X,0,j)}return N.match&&0===j.length?new je(b.segments,{}):N.match&&!b.hasChildren()?Hi(b,A,T):N.match?Hr(b,0,j):Hi(b,A,T)}function Hr(b,A,T){if(0===T.length)return new je(b.segments,{});{const N=function sr(b){return tn(b[0])?b[0].outlets:{[qt]:b}}(T),j={};return Le(N,(X,ge)=>{"string"==typeof X&&(X=[X]),null!==X&&(j[ge]=Qr(b.children[ge],A,X))}),Le(b.children,(X,ge)=>{void 0===N[ge]&&(j[ge]=X)}),new je(b.segments,j)}}function Hi(b,A,T){const N=b.segments.slice(0,A);let j=0;for(;j<T.length;){const X=T[j];if(tn(X)){const Ze=ds(X.outlets);return new je(N,Ze)}if(0===j&&at(T[0])){N.push(new Te(b.segments[A].path,Di(T[0]))),j++;continue}const ge=tn(X)?X.outlets[qt]:`${X}`,Ee=j<T.length-1?T[j+1]:null;ge&&Ee&&at(Ee)?(N.push(new Te(ge,Di(Ee))),j+=2):(N.push(new Te(ge,{})),j++)}return new je(N,{})}function ds(b){const A={};return Le(b,(T,N)=>{"string"==typeof T&&(T=[T]),null!==T&&(A[N]=Hi(new je([],{}),0,T))}),A}function Di(b){const A={};return Le(b,(T,N)=>A[N]=`${T}`),A}function ai(b,A,T){return b==T.path&&Ln(A,T.parameters)}class Zn{constructor(A,T){this.id=A,this.url=T}}class Oi extends Zn{constructor(A,T,N="imperative",j=null){super(A,T),this.type=0,this.navigationTrigger=N,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rn extends Zn{constructor(A,T,N){super(A,T),this.urlAfterRedirects=N,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Tn extends Zn{constructor(A,T,N,j){super(A,T),this.reason=N,this.code=j,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class En extends Zn{constructor(A,T,N,j){super(A,T),this.error=N,this.target=j,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Xr extends Zn{constructor(A,T,N,j){super(A,T),this.urlAfterRedirects=N,this.state=j,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xn extends Zn{constructor(A,T,N,j){super(A,T),this.urlAfterRedirects=N,this.state=j,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ls extends Zn{constructor(A,T,N,j,X){super(A,T),this.urlAfterRedirects=N,this.state=j,this.shouldActivate=X,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class go extends Zn{constructor(A,T,N,j){super(A,T),this.urlAfterRedirects=N,this.state=j,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qr extends Zn{constructor(A,T,N,j){super(A,T),this.urlAfterRedirects=N,this.state=j,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pi{constructor(A){this.route=A,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zn{constructor(A){this.route=A,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $n{constructor(A){this.snapshot=A,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xr{constructor(A){this.snapshot=A,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fi{constructor(A){this.snapshot=A,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class De{constructor(A){this.snapshot=A,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tt{constructor(A,T,N){this.routerEvent=A,this.position=T,this.anchor=N,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class pt{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const T=this.pathFromRoot(A);return T.length>1?T[T.length-2]:null}children(A){const T=Wt(A,this._root);return T?T.children.map(N=>N.value):[]}firstChild(A){const T=Wt(A,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(A){const T=Vt(A,this._root);return T.length<2?[]:T[T.length-2].children.map(j=>j.value).filter(j=>j!==A)}pathFromRoot(A){return Vt(A,this._root).map(T=>T.value)}}function Wt(b,A){if(b===A.value)return A;for(const T of A.children){const N=Wt(b,T);if(N)return N}return null}function Vt(b,A){if(b===A.value)return[A];for(const T of A.children){const N=Vt(b,T);if(N.length)return N.unshift(A),N}return[]}class Bn{constructor(A,T){this.value=A,this.children=T}toString(){return`TreeNode(${this.value})`}}function Ar(b){const A={};return b&&b.children.forEach(T=>A[T.value.outlet]=T),A}class Sr extends pt{constructor(A,T){super(A),this.snapshot=T,rr(this,A)}toString(){return this.snapshot.toString()}}function Si(b,A){const T=function mr(b,A){const ge=new $s([],{},{},"",{},qt,A,null,b.root,-1,{});return new Gs("",new Bn(ge,[]))}(b,A),N=new B.X([new Te("",{})]),j=new B.X({}),X=new B.X({}),ge=new B.X({}),Ee=new B.X(""),Ze=new Ur(N,j,ge,Ee,X,qt,A,T.root);return Ze.snapshot=T.root,new Sr(new Bn(Ze,[]),T)}class Ur{constructor(A,T,N,j,X,ge,Ee,Ze){var Ft,un;this.url=A,this.params=T,this.queryParams=N,this.fragment=j,this.data=X,this.outlet=ge,this.component=Ee,this.title=null!==(un=null===(Ft=this.data)||void 0===Ft?void 0:Ft.pipe((0,Be.U)(Ht=>Ht[St])))&&void 0!==un?un:(0,J.of)(void 0),this._futureSnapshot=Ze}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Be.U)(A=>Cr(A)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Be.U)(A=>Cr(A)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ss(b,A="emptyOnly"){const T=b.pathFromRoot;let N=0;if("always"!==A)for(N=T.length-1;N>=1;){const j=T[N],X=T[N-1];if(j.routeConfig&&""===j.routeConfig.path)N--;else{if(X.component)break;N--}}return function Hs(b){return b.reduce((A,T)=>{var N;return{params:Object.assign(Object.assign({},A.params),T.params),data:Object.assign(Object.assign({},A.data),T.data),resolve:Object.assign(Object.assign(Object.assign(Object.assign({},T.data),A.resolve),null===(N=T.routeConfig)||void 0===N?void 0:N.data),T._resolvedData)}},{params:{},data:{},resolve:{}})}(T.slice(N))}class $s{constructor(A,T,N,j,X,ge,Ee,Ze,Ft,un,Ht,An){var cr;this.url=A,this.params=T,this.queryParams=N,this.fragment=j,this.data=X,this.outlet=ge,this.component=Ee,this.title=null===(cr=this.data)||void 0===cr?void 0:cr[St],this.routeConfig=Ze,this._urlSegment=Ft,this._lastPathIndex=un,this._correctedLastPathIndex=null!=An?An:un,this._resolve=Ht}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(N=>N.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gs extends pt{constructor(A,T){super(T),this.url=A,rr(this,T)}toString(){return bs(this._root)}}function rr(b,A){A.value._routerState=b,A.children.forEach(T=>rr(b,T))}function bs(b){const A=b.children.length>0?` { ${b.children.map(bs).join(", ")} } `:"";return`${b.value}${A}`}function mo(b){if(b.snapshot){const A=b.snapshot,T=b._futureSnapshot;b.snapshot=T,Ln(A.queryParams,T.queryParams)||b.queryParams.next(T.queryParams),A.fragment!==T.fragment&&b.fragment.next(T.fragment),Ln(A.params,T.params)||b.params.next(T.params),function ir(b,A){if(b.length!==A.length)return!1;for(let T=0;T<b.length;++T)if(!Ln(b[T],A[T]))return!1;return!0}(A.url,T.url)||b.url.next(T.url),Ln(A.data,T.data)||b.data.next(T.data)}else b.snapshot=b._futureSnapshot,b.data.next(b._futureSnapshot.data)}function Zi(b,A){const T=Ln(b.params,A.params)&&function ye(b,A){return Xe(b,A)&&b.every((T,N)=>Ln(T.parameters,A[N].parameters))}(b.url,A.url);return T&&!(!b.parent!=!A.parent)&&(!b.parent||Zi(b.parent,A.parent))}function As(b,A,T){if(T&&b.shouldReuseRoute(A.value,T.value.snapshot)){const N=T.value;N._futureSnapshot=A.value;const j=function gi(b,A,T){return A.children.map(N=>{for(const j of T.children)if(b.shouldReuseRoute(N.value,j.value.snapshot))return As(b,N,j);return As(b,N)})}(b,A,T);return new Bn(N,j)}{if(b.shouldAttach(A.value)){const X=b.retrieve(A.value);if(null!==X){const ge=X.route;return ge.value._futureSnapshot=A.value,ge.children=A.children.map(Ee=>As(b,Ee)),ge}}const N=function ki(b){return new Ur(new B.X(b.url),new B.X(b.params),new B.X(b.queryParams),new B.X(b.fragment),new B.X(b.data),b.outlet,b.component,b)}(A.value),j=A.children.map(X=>As(b,X));return new Bn(N,j)}}const Jn="ngNavigationCancelingError";function hs(b,A){const{redirectTo:T,navigationBehaviorOptions:N}=tr(A)?{redirectTo:A,navigationBehaviorOptions:void 0}:A,j=Ws(!1,0,A);return j.url=T,j.navigationBehaviorOptions=N,j}function Ws(b,A,T){const N=new Error("NavigationCancelingError: "+(b||""));return N[Jn]=!0,N.cancellationCode=A,T&&(N.url=T),N}function Ks(b){return Ro(b)&&tr(b.url)}function Ro(b){return b&&b[Jn]}class xo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new zs,this.attachRef=null}}let zs=(()=>{class b{constructor(){this.contexts=new Map}onChildOutletCreated(T,N){const j=this.getOrCreateContext(T);j.outlet=N,this.contexts.set(T,j)}onChildOutletDestroyed(T){const N=this.getContext(T);N&&(N.outlet=null,N.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let N=this.getContext(T);return N||(N=new xo,this.contexts.set(T,N)),N}getContext(T){return this.contexts.get(T)||null}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const yo=!1;let Es=(()=>{class b{constructor(T,N,j,X,ge){this.parentContexts=T,this.location=N,this.changeDetector=X,this.environmentInjector=ge,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=j||qt,T.onChildOutletCreated(this.name,this)}ngOnDestroy(){var T;(null===(T=this.parentContexts.getContext(this.name))||void 0===T?void 0:T.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const T=this.parentContexts.getContext(this.name);T&&T.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,yo);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,yo);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,yo);this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,N){this.activated=T,this._activatedRoute=N,this.location.insert(T.hostView),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,N){if(this.isActivated)throw new g.vHH(4013,yo);this._activatedRoute=T;const j=this.location,ge=T._futureSnapshot.component,Ee=this.parentContexts.getOrCreateContext(this.name).children,Ze=new Pa(T,Ee,j.injector);if(N&&function li(b){return!!b.resolveComponentFactory}(N)){const Ft=N.resolveComponentFactory(ge);this.activated=j.createComponent(Ft,j.length,Ze)}else this.activated=j.createComponent(ge,{index:j.length,injector:Ze,environmentInjector:null!=N?N:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return b.\u0275fac=function(T){return new(T||b)(g.Y36(zs),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},b.\u0275dir=g.lG2({type:b,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),b})();class Pa{constructor(A,T,N){this.route=A,this.childContexts=T,this.parent=N}get(A,T){return A===Ur?this.route:A===zs?this.childContexts:this.parent.get(A,T)}}let Ui=(()=>{class b{}return b.\u0275fac=function(T){return new(T||b)},b.\u0275cmp=g.Xpm({type:b,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(T,N){1&T&&g._UZ(0,"router-outlet")},dependencies:[Es],encapsulation:2}),b})();function ts(b,A){var T;return b.providers&&!b._injector&&(b._injector=(0,g.MMx)(b.providers,A,`Route: ${b.path}`)),null!==(T=b._injector)&&void 0!==T?T:A}function fs(b){const A=b.children&&b.children.map(fs),T=A?Object.assign(Object.assign({},b),{children:A}):Object.assign({},b);return!T.component&&!T.loadComponent&&(A||T.loadChildren)&&T.outlet&&T.outlet!==qt&&(T.component=Ui),T}function pn(b){return b.outlet||qt}function Ys(b,A){const T=b.filter(N=>pn(N)===A);return T.push(...b.filter(N=>pn(N)!==A)),T}function or(b){var A;if(!b)return null;if(null!==(A=b.routeConfig)&&void 0!==A&&A._injector)return b.routeConfig._injector;for(let T=b.parent;T;T=T.parent){const N=T.routeConfig;if(null!=N&&N._loadedInjector)return N._loadedInjector;if(null!=N&&N._injector)return N._injector}return null}class Dr{constructor(A,T,N,j){this.routeReuseStrategy=A,this.futureState=T,this.currState=N,this.forwardEvent=j}activate(A){const T=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,N,A),mo(this.futureState.root),this.activateChildRoutes(T,N,A)}deactivateChildRoutes(A,T,N){const j=Ar(T);A.children.forEach(X=>{const ge=X.value.outlet;this.deactivateRoutes(X,j[ge],N),delete j[ge]}),Le(j,(X,ge)=>{this.deactivateRouteAndItsChildren(X,N)})}deactivateRoutes(A,T,N){const j=A.value,X=T?T.value:null;if(j===X)if(j.component){const ge=N.getContext(j.outlet);ge&&this.deactivateChildRoutes(A,T,ge.children)}else this.deactivateChildRoutes(A,T,N);else X&&this.deactivateRouteAndItsChildren(T,N)}deactivateRouteAndItsChildren(A,T){A.value.component&&this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,T):this.deactivateRouteAndOutlet(A,T)}detachAndStoreRouteSubtree(A,T){const N=T.getContext(A.value.outlet),j=N&&A.value.component?N.children:T,X=Ar(A);for(const ge of Object.keys(X))this.deactivateRouteAndItsChildren(X[ge],j);if(N&&N.outlet){const ge=N.outlet.detach(),Ee=N.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:ge,route:A,contexts:Ee})}}deactivateRouteAndOutlet(A,T){const N=T.getContext(A.value.outlet),j=N&&A.value.component?N.children:T,X=Ar(A);for(const ge of Object.keys(X))this.deactivateRouteAndItsChildren(X[ge],j);N&&N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated(),N.attachRef=null,N.resolver=null,N.route=null)}activateChildRoutes(A,T,N){const j=Ar(T);A.children.forEach(X=>{this.activateRoutes(X,j[X.value.outlet],N),this.forwardEvent(new De(X.value.snapshot))}),A.children.length&&this.forwardEvent(new xr(A.value.snapshot))}activateRoutes(A,T,N){var j;const X=A.value,ge=T?T.value:null;if(mo(X),X===ge)if(X.component){const Ee=N.getOrCreateContext(X.outlet);this.activateChildRoutes(A,T,Ee.children)}else this.activateChildRoutes(A,T,N);else if(X.component){const Ee=N.getOrCreateContext(X.outlet);if(this.routeReuseStrategy.shouldAttach(X.snapshot)){const Ze=this.routeReuseStrategy.retrieve(X.snapshot);this.routeReuseStrategy.store(X.snapshot,null),Ee.children.onOutletReAttached(Ze.contexts),Ee.attachRef=Ze.componentRef,Ee.route=Ze.route.value,Ee.outlet&&Ee.outlet.attach(Ze.componentRef,Ze.route.value),mo(Ze.route.value),this.activateChildRoutes(A,null,Ee.children)}else{const Ze=or(X.snapshot),Ft=null!==(j=null==Ze?void 0:Ze.get(g._Vd))&&void 0!==j?j:null;Ee.attachRef=null,Ee.route=X,Ee.resolver=Ft,Ee.injector=Ze,Ee.outlet&&Ee.outlet.activateWith(X,Ee.injector),this.activateChildRoutes(A,null,Ee.children)}}else this.activateChildRoutes(A,null,N)}}class pa{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class ns{constructor(A,T){this.component=A,this.route=T}}function Fo(b,A,T){const N=b._root;return Ds(N,A?A._root:null,T,[N.value])}function wn(b,A){const T=Symbol(),N=A.get(b,T);return N===T?"function"!=typeof b||(0,g.Z0I)(b)?A.get(b):b:N}function Ds(b,A,T,N,j={canDeactivateChecks:[],canActivateChecks:[]}){const X=Ar(A);return b.children.forEach(ge=>{(function Yo(b,A,T,N,j={canDeactivateChecks:[],canActivateChecks:[]}){const X=b.value,ge=A?A.value:null,Ee=T?T.getContext(b.value.outlet):null;if(ge&&X.routeConfig===ge.routeConfig){const Ze=function Qo(b,A,T){if("function"==typeof T)return T(b,A);switch(T){case"pathParamsChange":return!Xe(b.url,A.url);case"pathParamsOrQueryParamsChange":return!Xe(b.url,A.url)||!Ln(b.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zi(b,A)||!Ln(b.queryParams,A.queryParams);default:return!Zi(b,A)}}(ge,X,X.routeConfig.runGuardsAndResolvers);Ze?j.canActivateChecks.push(new pa(N)):(X.data=ge.data,X._resolvedData=ge._resolvedData),Ds(b,A,X.component?Ee?Ee.children:null:T,N,j),Ze&&Ee&&Ee.outlet&&Ee.outlet.isActivated&&j.canDeactivateChecks.push(new ns(Ee.outlet.component,ge))}else ge&&Cs(A,Ee,j),j.canActivateChecks.push(new pa(N)),Ds(b,null,X.component?Ee?Ee.children:null:T,N,j)})(ge,X[ge.value.outlet],T,N.concat([ge.value]),j),delete X[ge.value.outlet]}),Le(X,(ge,Ee)=>Cs(ge,T.getContext(Ee),j)),j}function Cs(b,A,T){const N=Ar(b),j=b.value;Le(N,(X,ge)=>{Cs(X,j.component?A?A.children.getContext(ge):null:A,T)}),T.canDeactivateChecks.push(new ns(j.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,j))}function Ji(b){return"function"==typeof b}function $(b){return b instanceof Y.K||"EmptyError"===(null==b?void 0:b.name)}const U=Symbol("INITIAL_VALUE");function x(){return(0,He.w)(b=>(0,re.a)(b.map(A=>A.pipe((0,xe.q)(1),(0,dt.O)(U)))).pipe((0,Be.U)(A=>{for(const T of A)if(!0!==T){if(T===U)return U;if(!1===T||T instanceof Pr)return T}return!0}),(0,mt.h)(A=>A!==U),(0,xe.q)(1)))}function Ps(b){return(0,oe.z)((0,It.b)(A=>{if(tr(A))throw hs(0,A)}),(0,Be.U)(A=>!0===A))}const Ra={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Jo(b,A,T,N,j){const X=ps(b,A,T);return X.matched?function Zo(b,A,T,N){const j=A.canMatch;if(!j||0===j.length)return(0,J.of)(!0);const X=j.map(ge=>{const Ee=wn(ge,b);return it(function Os(b){return b&&Ji(b.canMatch)}(Ee)?Ee.canMatch(A,T):b.runInContext(()=>Ee(A,T)))});return(0,J.of)(X).pipe(x(),Ps())}(N=ts(A,N),A,T).pipe((0,Be.U)(ge=>!0===ge?X:Object.assign({},Ra))):(0,J.of)(X)}function ps(b,A,T){var N;if(""===A.path)return"full"===A.pathMatch&&(b.hasChildren()||T.length>0)?Object.assign({},Ra):{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const X=(A.matcher||hr)(T,b,A);if(!X)return Object.assign({},Ra);const ge={};Le(X.posParams,(Ze,Ft)=>{ge[Ft]=Ze.path});const Ee=X.consumed.length>0?Object.assign(Object.assign({},ge),X.consumed[X.consumed.length-1].parameters):ge;return{matched:!0,consumedSegments:X.consumed,remainingSegments:T.slice(X.consumed.length),parameters:Ee,positionalParamSegments:null!==(N=X.posParams)&&void 0!==N?N:{}}}function ma(b,A,T,N,j="corrected"){if(T.length>0&&function Xo(b,A,T){return T.some(N=>ks(b,A,N)&&pn(N)!==qt)}(b,T,N)){const ge=new je(A,function ya(b,A,T,N){const j={};j[qt]=N,N._sourceSegment=b,N._segmentIndexShift=A.length;for(const X of T)if(""===X.path&&pn(X)!==qt){const ge=new je([],{});ge._sourceSegment=b,ge._segmentIndexShift=A.length,j[pn(X)]=ge}return j}(b,A,N,new je(T,b.children)));return ge._sourceSegment=b,ge._segmentIndexShift=A.length,{segmentGroup:ge,slicedSegments:[]}}if(0===T.length&&function io(b,A,T){return T.some(N=>ks(b,A,N))}(b,T,N)){const ge=new je(b.segments,function ro(b,A,T,N,j,X){const ge={};for(const Ee of N)if(ks(b,T,Ee)&&!j[pn(Ee)]){const Ze=new je([],{});Ze._sourceSegment=b,Ze._segmentIndexShift="legacy"===X?b.segments.length:A.length,ge[pn(Ee)]=Ze}return Object.assign(Object.assign({},j),ge)}(b,A,T,N,b.children,j));return ge._sourceSegment=b,ge._segmentIndexShift=A.length,{segmentGroup:ge,slicedSegments:T}}const X=new je(b.segments,b.children);return X._sourceSegment=b,X._segmentIndexShift=A.length,{segmentGroup:X,slicedSegments:T}}function ks(b,A,T){return(!(b.hasChildren()||A.length>0)||"full"!==T.pathMatch)&&""===T.path}function Io(b,A,T,N){return!!(pn(b)===N||N!==qt&&ks(A,T,b))&&("**"===b.path||ps(A,b,T).matched)}function Xi(b,A,T){return 0===A.length&&!b.children[T]}const qa=!1;class ea{constructor(A){this.segmentGroup=A||null}}class _a{constructor(A){this.urlTree=A}}function L(b){return(0,Q._)(new ea(b))}function q(b){return(0,Q._)(new _a(b))}class et{constructor(A,T,N,j,X){this.injector=A,this.configLoader=T,this.urlSerializer=N,this.urlTree=j,this.config=X,this.allowRedirects=!0}apply(){const A=ma(this.urlTree.root,[],[],this.config).segmentGroup,T=new je(A.segments,A.children);return this.expandSegmentGroup(this.injector,this.config,T,qt).pipe((0,Be.U)(X=>this.createUrlTree(Xt(X),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Je.K)(X=>{if(X instanceof _a)return this.allowRedirects=!1,this.match(X.urlTree);throw X instanceof ea?this.noMatchError(X):X}))}match(A){return this.expandSegmentGroup(this.injector,this.config,A.root,qt).pipe((0,Be.U)(j=>this.createUrlTree(Xt(j),A.queryParams,A.fragment))).pipe((0,Je.K)(j=>{throw j instanceof ea?this.noMatchError(j):j}))}noMatchError(A){return new g.vHH(4002,qa)}createUrlTree(A,T,N){const j=Gt(A);return new Pr(j,T,N)}expandSegmentGroup(A,T,N,j){return 0===N.segments.length&&N.hasChildren()?this.expandChildren(A,T,N).pipe((0,Be.U)(X=>new je([],X))):this.expandSegment(A,N,T,N.segments,j,!0)}expandChildren(A,T,N){const j=[];for(const X of Object.keys(N.children))"primary"===X?j.unshift(X):j.push(X);return(0,I.D)(j).pipe((0,yt.b)(X=>{const ge=N.children[X],Ee=Ys(T,X);return this.expandSegmentGroup(A,Ee,ge,X).pipe((0,Be.U)(Ze=>({segment:Ze,outlet:X})))}),(0,Nt.R)((X,ge)=>(X[ge.outlet]=ge.segment,X),{}),(0,wt.Z)())}expandSegment(A,T,N,j,X,ge){return(0,I.D)(N).pipe((0,yt.b)(Ee=>this.expandSegmentAgainstRoute(A,T,N,Ee,j,X,ge).pipe((0,Je.K)(Ft=>{if(Ft instanceof ea)return(0,J.of)(null);throw Ft}))),(0,Oe.P)(Ee=>!!Ee),(0,Je.K)((Ee,Ze)=>{if($(Ee))return Xi(T,j,X)?(0,J.of)(new je([],{})):L(T);throw Ee}))}expandSegmentAgainstRoute(A,T,N,j,X,ge,Ee){return Io(j,T,X,ge)?void 0===j.redirectTo?this.matchSegmentAgainstRoute(A,T,j,X,ge):Ee&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(A,T,N,j,X,ge):L(T):L(T)}expandSegmentAgainstRouteUsingRedirect(A,T,N,j,X,ge){return"**"===j.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(A,N,j,ge):this.expandRegularSegmentAgainstRouteUsingRedirect(A,T,N,j,X,ge)}expandWildCardWithParamsAgainstRouteUsingRedirect(A,T,N,j){const X=this.applyRedirectCommands([],N.redirectTo,{});return N.redirectTo.startsWith("/")?q(X):this.lineralizeSegments(N,X).pipe((0,Ue.z)(ge=>{const Ee=new je(ge,{});return this.expandSegment(A,Ee,T,ge,j,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(A,T,N,j,X,ge){const{matched:Ee,consumedSegments:Ze,remainingSegments:Ft,positionalParamSegments:un}=ps(T,j,X);if(!Ee)return L(T);const Ht=this.applyRedirectCommands(Ze,j.redirectTo,un);return j.redirectTo.startsWith("/")?q(Ht):this.lineralizeSegments(j,Ht).pipe((0,Ue.z)(An=>this.expandSegment(A,T,N,An.concat(Ft),ge,!1)))}matchSegmentAgainstRoute(A,T,N,j,X){return"**"===N.path?(A=ts(N,A),N.loadChildren?(N._loadedRoutes?(0,J.of)({routes:N._loadedRoutes,injector:N._loadedInjector}):this.configLoader.loadChildren(A,N)).pipe((0,Be.U)(Ee=>(N._loadedRoutes=Ee.routes,N._loadedInjector=Ee.injector,new je(j,{})))):(0,J.of)(new je(j,{}))):Jo(T,N,j,A).pipe((0,He.w)(({matched:ge,consumedSegments:Ee,remainingSegments:Ze})=>{var Ft;return ge?(A=null!==(Ft=N._injector)&&void 0!==Ft?Ft:A,this.getChildConfig(A,N,j).pipe((0,Ue.z)(Ht=>{var An;const cr=null!==(An=Ht.injector)&&void 0!==An?An:A,Lr=Ht.routes,{segmentGroup:_s,slicedSegments:Vs}=ma(T,Ee,Ze,Lr),Bs=new je(_s.segments,_s.children);if(0===Vs.length&&Bs.hasChildren())return this.expandChildren(cr,Lr,Bs).pipe((0,Be.U)(Va=>new je(Ee,Va)));if(0===Lr.length&&0===Vs.length)return(0,J.of)(new je(Ee,{}));const qs=pn(N)===X;return this.expandSegment(cr,Bs,Lr,Vs,qs?qt:X,!0).pipe((0,Be.U)(ws=>new je(Ee.concat(ws.segments),ws.children)))}))):L(T)}))}getChildConfig(A,T,N){return T.children?(0,J.of)({routes:T.children,injector:A}):T.loadChildren?void 0!==T._loadedRoutes?(0,J.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):function is(b,A,T,N){const j=A.canLoad;if(void 0===j||0===j.length)return(0,J.of)(!0);const X=j.map(ge=>{const Ee=wn(ge,b);return it(function $r(b){return b&&Ji(b.canLoad)}(Ee)?Ee.canLoad(A,T):b.runInContext(()=>Ee(A,T)))});return(0,J.of)(X).pipe(x(),Ps())}(A,T,N).pipe((0,Ue.z)(j=>j?this.configLoader.loadChildren(A,T).pipe((0,It.b)(X=>{T._loadedRoutes=X.routes,T._loadedInjector=X.injector})):function se(b){return(0,Q._)(Ws(qa,3))}())):(0,J.of)({routes:[],injector:A})}lineralizeSegments(A,T){let N=[],j=T.root;for(;;){if(N=N.concat(j.segments),0===j.numberOfChildren)return(0,J.of)(N);if(j.numberOfChildren>1||!j.children[qt])return(0,Q._)(new g.vHH(4e3,qa));j=j.children[qt]}}applyRedirectCommands(A,T,N){return this.applyRedirectCreateUrlTree(T,this.urlSerializer.parse(T),A,N)}applyRedirectCreateUrlTree(A,T,N,j){const X=this.createSegmentGroup(A,T.root,N,j);return new Pr(X,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(A,T){const N={};return Le(A,(j,X)=>{if("string"==typeof j&&j.startsWith(":")){const Ee=j.substring(1);N[X]=T[Ee]}else N[X]=j}),N}createSegmentGroup(A,T,N,j){const X=this.createSegments(A,T.segments,N,j);let ge={};return Le(T.children,(Ee,Ze)=>{ge[Ze]=this.createSegmentGroup(A,Ee,N,j)}),new je(X,ge)}createSegments(A,T,N,j){return T.map(X=>X.path.startsWith(":")?this.findPosParam(A,X,j):this.findOrReturn(X,N))}findPosParam(A,T,N){const j=N[T.path.substring(1)];if(!j)throw new g.vHH(4001,qa);return j}findOrReturn(A,T){let N=0;for(const j of T){if(j.path===A.path)return T.splice(N),j;N++}return A}}class Mr{}class ur{constructor(A,T,N,j,X,ge,Ee,Ze){this.injector=A,this.rootComponentType=T,this.config=N,this.urlTree=j,this.url=X,this.paramsInheritanceStrategy=ge,this.relativeLinkResolution=Ee,this.urlSerializer=Ze}recognize(){const A=ma(this.urlTree.root,[],[],this.config.filter(T=>void 0===T.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,A,qt).pipe((0,Be.U)(T=>{if(null===T)return null;const N=new $s([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),j=new Bn(N,T),X=new Gs(this.url,j);return this.inheritParamsAndData(X._root),X}))}inheritParamsAndData(A){const T=A.value,N=Ss(T,this.paramsInheritanceStrategy);T.params=Object.freeze(N.params),T.data=Object.freeze(N.data),A.children.forEach(j=>this.inheritParamsAndData(j))}processSegmentGroup(A,T,N,j){return 0===N.segments.length&&N.hasChildren()?this.processChildren(A,T,N):this.processSegment(A,T,N,N.segments,j)}processChildren(A,T,N){return(0,I.D)(Object.keys(N.children)).pipe((0,yt.b)(j=>{const X=N.children[j],ge=Ys(T,j);return this.processSegmentGroup(A,ge,X,j)}),(0,Nt.R)((j,X)=>j&&X?(j.push(...X),j):null),(0,Qe.o)(j=>null!==j),(0,Ye.d)(null),(0,wt.Z)(),(0,Be.U)(j=>{if(null===j)return null;const X=gs(j);return function Ci(b){b.sort((A,T)=>A.value.outlet===qt?-1:T.value.outlet===qt?1:A.value.outlet.localeCompare(T.value.outlet))}(X),X}))}processSegment(A,T,N,j,X){return(0,I.D)(T).pipe((0,yt.b)(ge=>{var Ee;return this.processSegmentAgainstRoute(null!==(Ee=ge._injector)&&void 0!==Ee?Ee:A,ge,N,j,X)}),(0,Oe.P)(ge=>!!ge),(0,Je.K)(ge=>{if($(ge))return Xi(N,j,X)?(0,J.of)([]):(0,J.of)(null);throw ge}))}processSegmentAgainstRoute(A,T,N,j,X){var ge,Ee;if(T.redirectTo||!Io(T,N,j,X))return(0,J.of)(null);let Ze;if("**"===T.path){const Ft=j.length>0?Ct(j).parameters:{},un=$i(N)+j.length,Ht=new $s(j,Ft,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Rs(T),pn(T),null!==(Ee=null!==(ge=T.component)&&void 0!==ge?ge:T._loadedComponent)&&void 0!==Ee?Ee:null,T,Vi(N),un,xt(T),un);Ze=(0,J.of)({snapshot:Ht,consumedSegments:[],remainingSegments:[]})}else Ze=Jo(N,T,j,A).pipe((0,Be.U)(({matched:Ft,consumedSegments:un,remainingSegments:Ht,parameters:An})=>{var cr,Lr;if(!Ft)return null;const _s=$i(N)+un.length;return{snapshot:new $s(un,An,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Rs(T),pn(T),null!==(Lr=null!==(cr=T.component)&&void 0!==cr?cr:T._loadedComponent)&&void 0!==Lr?Lr:null,T,Vi(N),_s,xt(T),_s),consumedSegments:un,remainingSegments:Ht}}));return Ze.pipe((0,He.w)(Ft=>{var un,Ht;if(null===Ft)return(0,J.of)(null);const{snapshot:An,consumedSegments:cr,remainingSegments:Lr}=Ft;A=null!==(un=T._injector)&&void 0!==un?un:A;const _s=null!==(Ht=T._loadedInjector)&&void 0!==Ht?Ht:A,Vs=function br(b){return b.children?b.children:b.loadChildren?b._loadedRoutes:[]}(T),{segmentGroup:Bs,slicedSegments:qs}=ma(N,cr,Lr,Vs.filter(ws=>void 0===ws.redirectTo),this.relativeLinkResolution);if(0===qs.length&&Bs.hasChildren())return this.processChildren(_s,Vs,Bs).pipe((0,Be.U)(ws=>null===ws?null:[new Bn(An,ws)]));if(0===Vs.length&&0===qs.length)return(0,J.of)([new Bn(An,[])]);const hl=pn(T)===X;return this.processSegment(_s,Vs,Bs,qs,hl?qt:X).pipe((0,Be.U)(ws=>null===ws?null:[new Bn(An,ws)]))}))}}function Ii(b){const A=b.value.routeConfig;return A&&""===A.path&&void 0===A.redirectTo}function gs(b){const A=[],T=new Set;for(const N of b){if(!Ii(N)){A.push(N);continue}const j=A.find(X=>N.value.routeConfig===X.value.routeConfig);void 0!==j?(j.children.push(...N.children),T.add(j)):A.push(N)}for(const N of T){const j=gs(N.children);A.push(new Bn(N.value,j))}return A.filter(N=>!T.has(N))}function Vi(b){let A=b;for(;A._sourceSegment;)A=A._sourceSegment;return A}function $i(b){var A,T;let N=b,j=null!==(A=N._segmentIndexShift)&&void 0!==A?A:0;for(;N._sourceSegment;)N=N._sourceSegment,j+=null!==(T=N._segmentIndexShift)&&void 0!==T?T:0;return j-1}function Rs(b){return b.data||{}}function xt(b){return b.resolve||{}}function Zt(b){return"string"==typeof b.title||null===b.title}function ot(b){return(0,He.w)(A=>{const T=b(A);return T?(0,I.D)(T).pipe((0,Be.U)(()=>A)):(0,J.of)(A)})}let Pt=(()=>{class b{buildTitle(T){var N;let j,X=T.root;for(;void 0!==X;)j=null!==(N=this.getResolvedTitleForRoute(X))&&void 0!==N?N:j,X=X.children.find(ge=>ge.outlet===qt);return j}getResolvedTitleForRoute(T){return T.data[St]}}return b.\u0275fac=function(T){return new(T||b)},b.\u0275prov=g.Yz7({token:b,factory:function(){return(0,g.f3M)(ti)},providedIn:"root"}),b})(),ti=(()=>{class b extends Pt{constructor(T){super(),this.title=T}updateTitle(T){const N=this.buildTitle(T);void 0!==N&&this.title.setTitle(N)}}return b.\u0275fac=function(T){return new(T||b)(g.LFG(nr.Dx))},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();class Za{}class Us extends class Ri{shouldDetach(A){return!1}store(A,T){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,T){return A.routeConfig===T.routeConfig}}{}const so=new g.OlP("",{providedIn:"root",factory:()=>({})}),Na=new g.OlP("ROUTES");let To=(()=>{class b{constructor(T,N){this.injector=T,this.compiler=N,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(T){if(this.componentLoaders.get(T))return this.componentLoaders.get(T);if(T._loadedComponent)return(0,J.of)(T._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(T);const N=it(T.loadComponent()).pipe((0,It.b)(X=>{this.onLoadEndListener&&this.onLoadEndListener(T),T._loadedComponent=X}),(0,Rt.x)(()=>{this.componentLoaders.delete(T)})),j=new Re.c(N,()=>new Ge.x).pipe((0,Tt.x)());return this.componentLoaders.set(T,j),j}loadChildren(T,N){if(this.childrenLoaders.get(N))return this.childrenLoaders.get(N);if(N._loadedRoutes)return(0,J.of)({routes:N._loadedRoutes,injector:N._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(N);const X=this.loadModuleFactoryOrRoutes(N.loadChildren).pipe((0,Be.U)(Ee=>{this.onLoadEndListener&&this.onLoadEndListener(N);let Ze,Ft,un=!1;Array.isArray(Ee)?Ft=Ee:(Ze=Ee.create(T).injector,Ft=jr(Ze.get(Na,[],g.XFs.Self|g.XFs.Optional)));return{routes:Ft.map(fs),injector:Ze}}),(0,Rt.x)(()=>{this.childrenLoaders.delete(N)})),ge=new Re.c(X,()=>new Ge.x).pipe((0,Tt.x)());return this.childrenLoaders.set(N,ge),ge}loadModuleFactoryOrRoutes(T){return it(T()).pipe((0,Ue.z)(N=>N instanceof g.YKP||Array.isArray(N)?(0,J.of)(N):(0,I.D)(this.compiler.compileModuleAsync(N))))}}return b.\u0275fac=function(T){return new(T||b)(g.LFG(g.zs3),g.LFG(g.Sil))},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();class iu{}class mi{shouldProcessUrl(A){return!0}extract(A){return A}merge(A,T){return A}}function ms(b){throw b}function Al(b,A,T){return A.parse("/")}const Kr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Sn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function yr(){var b,A;const T=(0,g.f3M)(an),N=(0,g.f3M)(zs),j=(0,g.f3M)(ve.Ye),X=(0,g.f3M)(g.zs3),ge=(0,g.f3M)(g.Sil),Ee=null!==(b=(0,g.f3M)(Na,{optional:!0}))&&void 0!==b?b:[],Ze=null!==(A=(0,g.f3M)(so,{optional:!0}))&&void 0!==A?A:{},Ft=(0,g.f3M)(ti),un=(0,g.f3M)(Pt,{optional:!0}),Ht=(0,g.f3M)(iu,{optional:!0}),An=(0,g.f3M)(Za,{optional:!0}),cr=new Wi(null,T,N,j,X,ge,jr(Ee));return Ht&&(cr.urlHandlingStrategy=Ht),An&&(cr.routeReuseStrategy=An),cr.titleStrategy=null!=un?un:Ft,function Uo(b,A){b.errorHandler&&(A.errorHandler=b.errorHandler),b.malformedUriErrorHandler&&(A.malformedUriErrorHandler=b.malformedUriErrorHandler),b.onSameUrlNavigation&&(A.onSameUrlNavigation=b.onSameUrlNavigation),b.paramsInheritanceStrategy&&(A.paramsInheritanceStrategy=b.paramsInheritanceStrategy),b.relativeLinkResolution&&(A.relativeLinkResolution=b.relativeLinkResolution),b.urlUpdateStrategy&&(A.urlUpdateStrategy=b.urlUpdateStrategy),b.canceledNavigationResolution&&(A.canceledNavigationResolution=b.canceledNavigationResolution)}(Ze,cr),cr}let Wi=(()=>{class b{constructor(T,N,j,X,ge,Ee,Ze){this.rootComponentType=T,this.urlSerializer=N,this.rootContexts=j,this.location=X,this.config=Ze,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ge.x,this.errorHandler=ms,this.malformedUriErrorHandler=Al,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,J.of)(void 0),this.urlHandlingStrategy=new mi,this.routeReuseStrategy=new Us,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ge.get(To),this.configLoader.onLoadEndListener=An=>this.triggerEvent(new zn(An)),this.configLoader.onLoadStartListener=An=>this.triggerEvent(new Pi(An)),this.ngModule=ge.get(g.h0i),this.console=ge.get(g.c2e);const Ht=ge.get(g.R0b);this.isNgZoneEnabled=Ht instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(Ze),this.currentUrlTree=function on(){return new Pr(new je([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Si(this.currentUrlTree,this.rootComponentType),this.transitions=new B.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var T;return null===(T=this.location.getState())||void 0===T?void 0:T.\u0275routerPageId}setupNavigations(T){const N=this.events;return T.pipe((0,mt.h)(j=>0!==j.id),(0,Be.U)(j=>Object.assign(Object.assign({},j),{extractedUrl:this.urlHandlingStrategy.extract(j.rawUrl)})),(0,He.w)(j=>{let X=!1,ge=!1;return(0,J.of)(j).pipe((0,It.b)(Ee=>{this.currentNavigation={id:Ee.id,initialUrl:Ee.rawUrl,extractedUrl:Ee.extractedUrl,trigger:Ee.source,extras:Ee.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,He.w)(Ee=>{const Ze=this.browserUrlTree.toString(),Ft=!this.navigated||Ee.extractedUrl.toString()!==Ze||Ze!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ft)&&this.urlHandlingStrategy.shouldProcessUrl(Ee.rawUrl))return Kt(Ee.source)&&(this.browserUrlTree=Ee.extractedUrl),(0,J.of)(Ee).pipe((0,He.w)(Ht=>{const An=this.transitions.getValue();return N.next(new Oi(Ht.id,this.serializeUrl(Ht.extractedUrl),Ht.source,Ht.restoredState)),An!==this.transitions.getValue()?ue.E:Promise.resolve(Ht)}),function ft(b,A,T,N){return(0,He.w)(j=>function me(b,A,T,N,j){return new et(b,A,T,N,j).apply()}(b,A,T,j.extractedUrl,N).pipe((0,Be.U)(X=>Object.assign(Object.assign({},j),{urlAfterRedirects:X}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,It.b)(Ht=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Ht.urlAfterRedirects}),j.urlAfterRedirects=Ht.urlAfterRedirects}),function Gi(b,A,T,N,j,X){return(0,Ue.z)(ge=>function pr(b,A,T,N,j,X,ge="emptyOnly",Ee="legacy"){return new ur(b,A,T,N,j,ge,Ee,X).recognize().pipe((0,He.w)(Ze=>null===Ze?function bn(b){return new le.y(A=>A.error(b))}(new Mr):(0,J.of)(Ze)))}(b,A,T,ge.urlAfterRedirects,N.serialize(ge.urlAfterRedirects),N,j,X).pipe((0,Be.U)(Ee=>Object.assign(Object.assign({},ge),{targetSnapshot:Ee}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,It.b)(Ht=>{if(j.targetSnapshot=Ht.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Ht.extras.skipLocationChange){const cr=this.urlHandlingStrategy.merge(Ht.urlAfterRedirects,Ht.rawUrl);this.setBrowserUrl(cr,Ht)}this.browserUrlTree=Ht.urlAfterRedirects}const An=new Xr(Ht.id,this.serializeUrl(Ht.extractedUrl),this.serializeUrl(Ht.urlAfterRedirects),Ht.targetSnapshot);N.next(An)}));if(Ft&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:An,extractedUrl:cr,source:Lr,restoredState:_s,extras:Vs}=Ee,Bs=new Oi(An,this.serializeUrl(cr),Lr,_s);N.next(Bs);const qs=Si(cr,this.rootComponentType).snapshot;return j=Object.assign(Object.assign({},Ee),{targetSnapshot:qs,urlAfterRedirects:cr,extras:Object.assign(Object.assign({},Vs),{skipLocationChange:!1,replaceUrl:!1})}),(0,J.of)(j)}return this.rawUrlTree=Ee.rawUrl,Ee.resolve(null),ue.E}),(0,It.b)(Ee=>{const Ze=new xn(Ee.id,this.serializeUrl(Ee.extractedUrl),this.serializeUrl(Ee.urlAfterRedirects),Ee.targetSnapshot);this.triggerEvent(Ze)}),(0,Be.U)(Ee=>j=Object.assign(Object.assign({},Ee),{guards:Fo(Ee.targetSnapshot,Ee.currentSnapshot,this.rootContexts)})),function te(b,A){return(0,Ue.z)(T=>{const{targetSnapshot:N,currentSnapshot:j,guards:{canActivateChecks:X,canDeactivateChecks:ge}}=T;return 0===ge.length&&0===X.length?(0,J.of)(Object.assign(Object.assign({},T),{guardsResult:!0})):function ct(b,A,T,N){return(0,I.D)(b).pipe((0,Ue.z)(j=>function Fs(b,A,T,N,j){const X=A&&A.routeConfig?A.routeConfig.canDeactivate:null;if(!X||0===X.length)return(0,J.of)(!0);const ge=X.map(Ee=>{var Ze;const Ft=null!==(Ze=or(A))&&void 0!==Ze?Ze:j,un=wn(Ee,Ft);return it(function fr(b){return b&&Ji(b.canDeactivate)}(un)?un.canDeactivate(b,A,T,N):Ft.runInContext(()=>un(b,A,T,N))).pipe((0,Oe.P)())});return(0,J.of)(ge).pipe(x())}(j.component,j.route,T,A,N)),(0,Oe.P)(j=>!0!==j,!0))}(ge,N,j,b).pipe((0,Ue.z)(Ee=>Ee&&function ko(b){return"boolean"==typeof b}(Ee)?function nn(b,A,T,N){return(0,I.D)(A).pipe((0,yt.b)(j=>(0,ee.z)(function rs(b,A){return null!==b&&A&&A(new $n(b)),(0,J.of)(!0)}(j.route.parent,N),function Vr(b,A){return null!==b&&A&&A(new Fi(b)),(0,J.of)(!0)}(j.route,N),function Gr(b,A,T){const N=A[A.length-1],X=A.slice(0,A.length-1).reverse().map(ge=>function Ms(b){const A=b.routeConfig?b.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:b,guards:A}:null}(ge)).filter(ge=>null!==ge).map(ge=>(0,z.P)(()=>{const Ee=ge.guards.map(Ze=>{var Ft;const un=null!==(Ft=or(ge.node))&&void 0!==Ft?Ft:T,Ht=wn(Ze,un);return it(function At(b){return b&&Ji(b.canActivateChild)}(Ht)?Ht.canActivateChild(N,b):un.runInContext(()=>Ht(N,b))).pipe((0,Oe.P)())});return(0,J.of)(Ee).pipe(x())}));return(0,J.of)(X).pipe(x())}(b,j.path,T),function Is(b,A,T){const N=A.routeConfig?A.routeConfig.canActivate:null;if(!N||0===N.length)return(0,J.of)(!0);const j=N.map(X=>(0,z.P)(()=>{var ge;const Ee=null!==(ge=or(A))&&void 0!==ge?ge:T,Ze=wn(X,Ee);return it(function ga(b){return b&&Ji(b.canActivate)}(Ze)?Ze.canActivate(A,b):Ee.runInContext(()=>Ze(A,b))).pipe((0,Oe.P)())}));return(0,J.of)(j).pipe(x())}(b,j.route,T))),(0,Oe.P)(j=>!0!==j,!0))}(N,X,b,A):(0,J.of)(Ee)),(0,Be.U)(Ee=>Object.assign(Object.assign({},T),{guardsResult:Ee})))})}(this.ngModule.injector,Ee=>this.triggerEvent(Ee)),(0,It.b)(Ee=>{if(j.guardsResult=Ee.guardsResult,tr(Ee.guardsResult))throw hs(0,Ee.guardsResult);const Ze=new Ls(Ee.id,this.serializeUrl(Ee.extractedUrl),this.serializeUrl(Ee.urlAfterRedirects),Ee.targetSnapshot,!!Ee.guardsResult);this.triggerEvent(Ze)}),(0,mt.h)(Ee=>!!Ee.guardsResult||(this.restoreHistory(Ee),this.cancelNavigationTransition(Ee,"",3),!1)),ot(Ee=>{if(Ee.guards.canActivateChecks.length)return(0,J.of)(Ee).pipe((0,It.b)(Ze=>{const Ft=new go(Ze.id,this.serializeUrl(Ze.extractedUrl),this.serializeUrl(Ze.urlAfterRedirects),Ze.targetSnapshot);this.triggerEvent(Ft)}),(0,He.w)(Ze=>{let Ft=!1;return(0,J.of)(Ze).pipe(function wo(b,A){return(0,Ue.z)(T=>{const{targetSnapshot:N,guards:{canActivateChecks:j}}=T;if(!j.length)return(0,J.of)(T);let X=0;return(0,I.D)(j).pipe((0,yt.b)(ge=>function va(b,A,T,N){const j=b.routeConfig,X=b._resolve;return void 0!==(null==j?void 0:j.title)&&!Zt(j)&&(X[St]=j.title),function ln(b,A,T,N){const j=function en(b){return[...Object.keys(b),...Object.getOwnPropertySymbols(b)]}(b);if(0===j.length)return(0,J.of)({});const X={};return(0,I.D)(j).pipe((0,Ue.z)(ge=>function Eu(b,A,T,N){var j;const X=null!==(j=or(A))&&void 0!==j?j:N,ge=wn(b,X);return it(ge.resolve?ge.resolve(A,T):X.runInContext(()=>ge(A,T)))}(b[ge],A,T,N).pipe((0,Oe.P)(),(0,It.b)(Ee=>{X[ge]=Ee}))),(0,ut.h)(1),(0,qe.h)(X),(0,Je.K)(ge=>$(ge)?ue.E:(0,Q._)(ge)))}(X,b,A,N).pipe((0,Be.U)(ge=>(b._resolvedData=ge,b.data=Ss(b,T).resolve,j&&Zt(j)&&(b.data[St]=j.title),null)))}(ge.route,N,b,A)),(0,It.b)(()=>X++),(0,ut.h)(1),(0,Ue.z)(ge=>X===j.length?(0,J.of)(T):ue.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,It.b)({next:()=>Ft=!0,complete:()=>{Ft||(this.restoreHistory(Ze),this.cancelNavigationTransition(Ze,"",2))}}))}),(0,It.b)(Ze=>{const Ft=new qr(Ze.id,this.serializeUrl(Ze.extractedUrl),this.serializeUrl(Ze.urlAfterRedirects),Ze.targetSnapshot);this.triggerEvent(Ft)}))}),ot(Ee=>{const Ze=Ft=>{var un;const Ht=[];(null===(un=Ft.routeConfig)||void 0===un?void 0:un.loadComponent)&&!Ft.routeConfig._loadedComponent&&Ht.push(this.configLoader.loadComponent(Ft.routeConfig).pipe((0,It.b)(An=>{Ft.component=An}),(0,Be.U)(()=>{})));for(const An of Ft.children)Ht.push(...Ze(An));return Ht};return(0,re.a)(Ze(Ee.targetSnapshot.root)).pipe((0,Ye.d)(),(0,xe.q)(1))}),ot(()=>this.afterPreactivation()),(0,Be.U)(Ee=>{const Ze=function pi(b,A,T){const N=As(b,A._root,T?T._root:void 0);return new Sr(N,A)}(this.routeReuseStrategy,Ee.targetSnapshot,Ee.currentRouterState);return j=Object.assign(Object.assign({},Ee),{targetRouterState:Ze})}),(0,It.b)(Ee=>{this.currentUrlTree=Ee.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ee.urlAfterRedirects,Ee.rawUrl),this.routerState=Ee.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ee.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ee),this.browserUrlTree=Ee.urlAfterRedirects)}),((b,A,T)=>(0,Be.U)(N=>(new Dr(A,N.targetRouterState,N.currentRouterState,T).activate(b),N)))(this.rootContexts,this.routeReuseStrategy,Ee=>this.triggerEvent(Ee)),(0,It.b)({next(){X=!0},complete(){X=!0}}),(0,Rt.x)(()=>{var Ee;X||ge||this.cancelNavigationTransition(j,"",1),(null===(Ee=this.currentNavigation)||void 0===Ee?void 0:Ee.id)===j.id&&(this.currentNavigation=null)}),(0,Je.K)(Ee=>{var Ze;if(ge=!0,Ro(Ee)){Ks(Ee)||(this.navigated=!0,this.restoreHistory(j,!0));const Ft=new Tn(j.id,this.serializeUrl(j.extractedUrl),Ee.message,Ee.cancellationCode);if(N.next(Ft),Ks(Ee)){const un=this.urlHandlingStrategy.merge(Ee.url,this.rawUrlTree),Ht={skipLocationChange:j.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Kt(j.source)};this.scheduleNavigation(un,"imperative",null,Ht,{resolve:j.resolve,reject:j.reject,promise:j.promise})}else j.resolve(!1)}else{this.restoreHistory(j,!0);const Ft=new En(j.id,this.serializeUrl(j.extractedUrl),Ee,null!==(Ze=j.targetSnapshot)&&void 0!==Ze?Ze:void 0);N.next(Ft);try{j.resolve(this.errorHandler(Ee))}catch(un){j.reject(un)}}return ue.E}))}))}resetRootComponentType(T){this.rootComponentType=T,this.routerState.root.component=this.rootComponentType}setTransition(T){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),T))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const N="popstate"===T.type?"popstate":"hashchange";"popstate"===N&&setTimeout(()=>{var j;const X={replaceUrl:!0},ge=null!==(j=T.state)&&void 0!==j&&j.navigationId?T.state:null;if(ge){const Ze=Object.assign({},ge);delete Ze.navigationId,delete Ze.\u0275routerPageId,0!==Object.keys(Ze).length&&(X.state=Ze)}const Ee=this.parseUrl(T.url);this.scheduleNavigation(Ee,N,ge,X)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(T){this.events.next(T)}resetConfig(T){this.config=T.map(fs),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,N={}){const{relativeTo:j,queryParams:X,fragment:ge,queryParamsHandling:Ee,preserveFragment:Ze}=N,Ft=j||this.routerState.root,un=Ze?this.currentUrlTree.fragment:ge;let Ht=null;switch(Ee){case"merge":Ht=Object.assign(Object.assign({},this.currentUrlTree.queryParams),X);break;case"preserve":Ht=this.currentUrlTree.queryParams;break;default:Ht=X||null}return null!==Ht&&(Ht=this.removeEmptyProps(Ht)),ke(Ft,this.currentUrlTree,T,Ht,null!=un?un:null)}navigateByUrl(T,N={skipLocationChange:!1}){const j=tr(T)?T:this.parseUrl(T),X=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(X,"imperative",null,N)}navigate(T,N={skipLocationChange:!1}){return function Ai(b){for(let A=0;A<b.length;A++){if(null==b[A])throw new g.vHH(4008,false)}}(T),this.navigateByUrl(this.createUrlTree(T,N),N)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let N;try{N=this.urlSerializer.parse(T)}catch(j){N=this.malformedUriErrorHandler(j,this.urlSerializer,T)}return N}isActive(T,N){let j;if(j=!0===N?Object.assign({},Kr):!1===N?Object.assign({},Sn):N,tr(T))return Li(this.currentUrlTree,T,j);const X=this.parseUrl(T);return Li(this.currentUrlTree,X,j)}removeEmptyProps(T){return Object.keys(T).reduce((N,j)=>{const X=T[j];return null!=X&&(N[j]=X),N},{})}processNavigations(){this.navigations.subscribe(T=>{var N;this.navigated=!0,this.lastSuccessfulId=T.id,this.currentPageId=T.targetPageId,this.events.next(new Rn(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(N=this.titleStrategy)||void 0===N||N.updateTitle(this.routerState.snapshot),T.resolve(!0)},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}scheduleNavigation(T,N,j,X,ge){var Ee,Ze;if(this.disposed)return Promise.resolve(!1);let Ft,un,Ht;ge?(Ft=ge.resolve,un=ge.reject,Ht=ge.promise):Ht=new Promise((Lr,_s)=>{Ft=Lr,un=_s});const An=++this.navigationId;let cr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(j=this.location.getState()),cr=j&&j.\u0275routerPageId?j.\u0275routerPageId:X.replaceUrl||X.skipLocationChange?null!==(Ee=this.browserPageId)&&void 0!==Ee?Ee:0:(null!==(Ze=this.browserPageId)&&void 0!==Ze?Ze:0)+1):cr=0,this.setTransition({id:An,targetPageId:cr,source:N,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:T,extras:X,resolve:Ft,reject:un,promise:Ht,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ht.catch(Lr=>Promise.reject(Lr))}setBrowserUrl(T,N){const j=this.urlSerializer.serialize(T),X=Object.assign(Object.assign({},N.extras.state),this.generateNgRouterState(N.id,N.targetPageId));this.location.isCurrentPathEqualTo(j)||N.extras.replaceUrl?this.location.replaceState(j,"",X):this.location.go(j,"",X)}restoreHistory(T,N=!1){var j,X;if("computed"===this.canceledNavigationResolution){const ge=this.currentPageId-T.targetPageId;"popstate"!==T.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(j=this.currentNavigation)||void 0===j?void 0:j.finalUrl)||0===ge?this.currentUrlTree===(null===(X=this.currentNavigation)||void 0===X?void 0:X.finalUrl)&&0===ge&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ge)}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(T,N,j){const X=new Tn(T.id,this.serializeUrl(T.extractedUrl),N,j);this.triggerEvent(X),T.resolve(!1)}generateNgRouterState(T,N){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:N}:{navigationId:T}}}return b.\u0275fac=function(T){g.$Z()},b.\u0275prov=g.Yz7({token:b,factory:function(){return yr()},providedIn:"root"}),b})();function Kt(b){return"imperative"!==b}let ao=(()=>{class b{constructor(T,N,j,X,ge){this.router=T,this.route=N,this.tabIndexAttribute=j,this.renderer=X,this.el=ge,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Ge.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(T){this._preserveFragment=(0,g.D6c)(T)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(T){this._skipLocationChange=(0,g.D6c)(T)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(T){this._replaceUrl=(0,g.D6c)(T)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(T){if(null!=this.tabIndexAttribute)return;const N=this.renderer,j=this.el.nativeElement;null!==T?N.setAttribute(j,"tabindex",T):N.removeAttribute(j,"tabindex")}ngOnChanges(T){this.onChanges.next(this)}set routerLink(T){null!=T?(this.commands=Array.isArray(T)?T:[T],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return b.\u0275fac=function(T){return new(T||b)(g.Y36(Wi),g.Y36(Ur),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},b.\u0275dir=g.lG2({type:b,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(T,N){1&T&&g.NdJ("click",function(){return N.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),b})(),lo=(()=>{class b{constructor(T,N,j){this.router=T,this.route=N,this.locationStrategy=j,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Ge.x,this.subscription=T.events.subscribe(X=>{X instanceof Rn&&this.updateTargetUrlAndHref()})}set preserveFragment(T){this._preserveFragment=(0,g.D6c)(T)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(T){this._skipLocationChange=(0,g.D6c)(T)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(T){this._replaceUrl=(0,g.D6c)(T)}get replaceUrl(){return this._replaceUrl}set routerLink(T){this.commands=null!=T?Array.isArray(T)?T:[T]:null}ngOnChanges(T){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(T,N,j,X,ge){return!!(0!==T||N||j||X||ge||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return b.\u0275fac=function(T){return new(T||b)(g.Y36(Wi),g.Y36(Ur),g.Y36(ve.S$))},b.\u0275dir=g.lG2({type:b,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(T,N){1&T&&g.NdJ("click",function(X){return N.onClick(X.button,X.ctrlKey,X.shiftKey,X.altKey,X.metaKey)}),2&T&&g.uIk("target",N.target)("href",N.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[g.TTD]}),b})(),Vo=(()=>{class b{constructor(T,N,j,X,ge,Ee){this.router=T,this.element=N,this.renderer=j,this.cdr=X,this.link=ge,this.linkWithHref=Ee,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new g.vpe,this.routerEventsSubscription=T.events.subscribe(Ze=>{Ze instanceof Rn&&this.update()})}ngAfterContentInit(){(0,J.of)(this.links.changes,this.linksWithHrefs.changes,(0,J.of)(null)).pipe((0,hn.J)()).subscribe(T=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var T;null===(T=this.linkInputChangesSubscription)||void 0===T||T.unsubscribe();const N=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(j=>!!j).map(j=>j.onChanges);this.linkInputChangesSubscription=(0,I.D)(N).pipe((0,hn.J)()).subscribe(j=>{this.isActive!==this.isLinkActive(this.router)(j)&&this.update()})}set routerLinkActive(T){const N=Array.isArray(T)?T:T.split(" ");this.classes=N.filter(j=>!!j)}ngOnChanges(T){this.update()}ngOnDestroy(){var T;this.routerEventsSubscription.unsubscribe(),null===(T=this.linkInputChangesSubscription)||void 0===T||T.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const T=this.hasActiveLinks();this.isActive!==T&&(this.isActive=T,this.cdr.markForCheck(),this.classes.forEach(N=>{T?this.renderer.addClass(this.element.nativeElement,N):this.renderer.removeClass(this.element.nativeElement,N)}),T&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(T))})}isLinkActive(T){const N=function Ml(b){return!!b.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return j=>!!j.urlTree&&T.isActive(j.urlTree,N)}hasActiveLinks(){const T=this.isLinkActive(this.router);return this.link&&T(this.link)||this.linkWithHref&&T(this.linkWithHref)||this.links.some(T)||this.linksWithHrefs.some(T)}}return b.\u0275fac=function(T){return new(T||b)(g.Y36(Wi),g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(g.sBO),g.Y36(ao,8),g.Y36(lo,8))},b.\u0275dir=g.lG2({type:b,selectors:[["","routerLinkActive",""]],contentQueries:function(T,N,j){if(1&T&&(g.Suo(j,ao,5),g.Suo(j,lo,5)),2&T){let X;g.iGM(X=g.CRH())&&(N.links=X),g.iGM(X=g.CRH())&&(N.linksWithHrefs=X)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[g.TTD]}),b})();class ta{}let cl=(()=>{class b{constructor(T,N,j,X,ge){this.router=T,this.injector=j,this.preloadingStrategy=X,this.loader=ge}setUpPreloading(){this.subscription=this.router.events.pipe((0,mt.h)(T=>T instanceof Rn),(0,yt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,N){var j,X,ge;const Ee=[];for(const Ze of N){Ze.providers&&!Ze._injector&&(Ze._injector=(0,g.MMx)(Ze.providers,T,`Route: ${Ze.path}`));const Ft=null!==(j=Ze._injector)&&void 0!==j?j:T,un=null!==(X=Ze._loadedInjector)&&void 0!==X?X:Ft;Ze.loadChildren&&!Ze._loadedRoutes&&void 0===Ze.canLoad||Ze.loadComponent&&!Ze._loadedComponent?Ee.push(this.preloadConfig(Ft,Ze)):(Ze.children||Ze._loadedRoutes)&&Ee.push(this.processRoutes(un,null!==(ge=Ze.children)&&void 0!==ge?ge:Ze._loadedRoutes))}return(0,I.D)(Ee).pipe((0,hn.J)())}preloadConfig(T,N){return this.preloadingStrategy.preload(N,()=>{let j;j=N.loadChildren&&void 0===N.canLoad?this.loader.loadChildren(T,N):(0,J.of)(null);const X=j.pipe((0,Ue.z)(ge=>{var Ee;return null===ge?(0,J.of)(void 0):(N._loadedRoutes=ge.routes,N._loadedInjector=ge.injector,this.processRoutes(null!==(Ee=ge.injector)&&void 0!==Ee?Ee:T,ge.routes))}));if(N.loadComponent&&!N._loadedComponent){const ge=this.loader.loadComponent(N);return(0,I.D)([X,ge]).pipe((0,hn.J)())}return X})}}return b.\u0275fac=function(T){return new(T||b)(g.LFG(Wi),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(ta),g.LFG(To))},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();const Ja=new g.OlP("");let ss=(()=>{class b{constructor(T,N,j={}){this.router=T,this.viewportScroller=N,this.options=j,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},j.scrollPositionRestoration=j.scrollPositionRestoration||"disabled",j.anchorScrolling=j.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(T=>{T instanceof Oi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof Rn&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.router.parseUrl(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(T=>{T instanceof tt&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,N){this.router.triggerEvent(new tt(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,N))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return b.\u0275fac=function(T){g.$Z()},b.\u0275prov=g.Yz7({token:b,factory:b.\u0275fac}),b})();function uo(b,A){return{\u0275kind:b,\u0275providers:A}}function Fa(b){return[{provide:Na,multi:!0,useValue:b}]}function Qs(){const b=(0,g.f3M)(g.zs3);return A=>{var T,N;const j=b.get(g.z2F);if(A!==j.components[0])return;const X=b.get(Wi),ge=b.get(ys);1===b.get(na)&&X.initialNavigation(),null===(T=b.get(Bo,null,g.XFs.Optional))||void 0===T||T.setUpPreloading(),null===(N=b.get(Ja,null,g.XFs.Optional))||void 0===N||N.init(),X.resetRootComponentType(j.componentTypes[0]),ge.next(),ge.complete()}}const ys=new g.OlP("",{factory:()=>new Ge.x}),na=new g.OlP("",{providedIn:"root",factory:()=>1});const Bo=new g.OlP("");function ou(b){return uo(0,[{provide:Bo,useExisting:cl},{provide:ta,useExisting:b}])}const co=new g.OlP("ROUTER_FORROOT_GUARD"),Du=[ve.Ye,{provide:an,useClass:dn},{provide:Wi,useFactory:yr},zs,{provide:Ur,useFactory:function el(b){return b.routerState.root},deps:[Wi]},To];function Ki(){return new g.PXZ("Router",Wi)}let ra=(()=>{class b{constructor(T){}static forRoot(T,N){return{ngModule:b,providers:[Du,[],Fa(T),{provide:co,useFactory:nl,deps:[[Wi,new g.FiY,new g.tp0]]},{provide:so,useValue:N||{}},null!=N&&N.useHash?{provide:ve.S$,useClass:ve.Do}:{provide:ve.S$,useClass:ve.b0},{provide:Ja,useFactory:()=>{const b=(0,g.f3M)(Wi),A=(0,g.f3M)(ve.EM),T=(0,g.f3M)(so);return T.scrollOffset&&A.setOffset(T.scrollOffset),new ss(b,A,T)}},null!=N&&N.preloadingStrategy?ou(N.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:Ki},null!=N&&N.initialNavigation?xi(N):[],[{provide:dl,useFactory:Qs},{provide:g.tb,multi:!0,useExisting:dl}]]}}static forChild(T){return{ngModule:b,providers:[Fa(T)]}}}return b.\u0275fac=function(T){return new(T||b)(g.LFG(co,8))},b.\u0275mod=g.oAB({type:b}),b.\u0275inj=g.cJS({imports:[Ui]}),b})();function nl(b){return"guarded"}function xi(b){return["disabled"===b.initialNavigation?uo(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const A=(0,g.f3M)(Wi);return()=>{A.setUpLocationChangeListener()}}},{provide:na,useValue:2}]).\u0275providers:[],"enabledBlocking"===b.initialNavigation?uo(2,[{provide:na,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:A=>{const T=A.get(ve.V_,Promise.resolve());let N=!1;return()=>T.then(()=>new Promise(X=>{const ge=A.get(Wi),Ee=A.get(ys);(function j(X){A.get(Wi).events.pipe((0,mt.h)(Ee=>Ee instanceof Rn||Ee instanceof Tn||Ee instanceof En),(0,Be.U)(Ee=>Ee instanceof Rn||Ee instanceof Tn&&(0===Ee.code||1===Ee.code)&&null),(0,mt.h)(Ee=>null!==Ee),(0,xe.q)(1)).subscribe(()=>{X()})})(()=>{X(!0),N=!0}),ge.afterPreactivation=()=>(X(!0),N||Ee.closed?(0,J.of)(void 0):Ee),ge.initialNavigation()}))}}]).\u0275providers:[]]}const dl=new g.OlP("")},6881:(_e,ne,D)=>{D.d(ne,{Jn:()=>zr,qX:()=>an,Xd:()=>ht,Mq:()=>fn,C6:()=>Kn,ZF:()=>On,KN:()=>Pn});var g=D(5861),I=D(4859),J=D(1877),B=D(2090);let re,ee;const Q=new WeakMap,le=new WeakMap,ue=new WeakMap,Re=new WeakMap,Ge=new WeakMap;let He={get(Se,Pe,gt){if(Se instanceof IDBTransaction){if("done"===Pe)return le.get(Se);if("objectStoreNames"===Pe)return Se.objectStoreNames||ue.get(Se);if("store"===Pe)return gt.objectStoreNames[1]?void 0:gt.objectStore(gt.objectStoreNames[0])}return Ue(Se[Pe])},set:(Se,Pe,gt)=>(Se[Pe]=gt,!0),has:(Se,Pe)=>Se instanceof IDBTransaction&&("done"===Pe||"store"===Pe)||Pe in Se};function mt(Se){return"function"==typeof Se?function dt(Se){return Se!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function oe(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Se)?function(...Pe){return Se.apply(Oe(this),Pe),Ue(Q.get(this))}:function(...Pe){return Ue(Se.apply(Oe(this),Pe))}:function(Pe,...gt){const Ut=Se.call(Oe(this),Pe,...gt);return ue.set(Ut,Pe.sort?Pe.sort():[Pe]),Ue(Ut)}}(Se):(Se instanceof IDBTransaction&&function Be(Se){if(le.has(Se))return;const Pe=new Promise((gt,Ut)=>{const _n=()=>{Se.removeEventListener("complete",Cn),Se.removeEventListener("error",Vn),Se.removeEventListener("abort",Vn)},Cn=()=>{gt(),_n()},Vn=()=>{Ut(Se.error||new DOMException("AbortError","AbortError")),_n()};Se.addEventListener("complete",Cn),Se.addEventListener("error",Vn),Se.addEventListener("abort",Vn)});le.set(Se,Pe)}(Se),((Se,Pe)=>Pe.some(gt=>Se instanceof gt))(Se,function z(){return re||(re=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Se,He):Se)}function Ue(Se){if(Se instanceof IDBRequest)return function ve(Se){const Pe=new Promise((gt,Ut)=>{const _n=()=>{Se.removeEventListener("success",Cn),Se.removeEventListener("error",Vn)},Cn=()=>{gt(Ue(Se.result)),_n()},Vn=()=>{Ut(Se.error),_n()};Se.addEventListener("success",Cn),Se.addEventListener("error",Vn)});return Pe.then(gt=>{gt instanceof IDBCursor&&Q.set(gt,Se)}).catch(()=>{}),Ge.set(Pe,Se),Pe}(Se);if(Re.has(Se))return Re.get(Se);const Pe=mt(Se);return Pe!==Se&&(Re.set(Se,Pe),Ge.set(Pe,Se)),Pe}const Oe=Se=>Ge.get(Se),Je=["get","getKey","getAll","getAllKeys","count"],Nt=["put","add","delete","clear"],wt=new Map;function Qe(Se,Pe){if(!(Se instanceof IDBDatabase)||Pe in Se||"string"!=typeof Pe)return;if(wt.get(Pe))return wt.get(Pe);const gt=Pe.replace(/FromIndex$/,""),Ut=Pe!==gt,_n=Nt.includes(gt);if(!(gt in(Ut?IDBIndex:IDBObjectStore).prototype)||!_n&&!Je.includes(gt))return;const Cn=function(){var Vn=(0,g.Z)(function*(sr,...Qr){const Hr=this.transaction(sr,_n?"readwrite":"readonly");let In=Hr.store;return Ut&&(In=In.index(Qr.shift())),(yield Promise.all([In[gt](...Qr),_n&&Hr.done]))[0]});return function(Qr){return Vn.apply(this,arguments)}}();return wt.set(Pe,Cn),Cn}!function xe(Se){He=Se(He)}(Se=>j0(B0({},Se),{get:(Pe,gt,Ut)=>Qe(Pe,gt)||Se.get(Pe,gt,Ut),has:(Pe,gt)=>!!Qe(Pe,gt)||Se.has(Pe,gt)}));class Ye{constructor(Pe){this.container=Pe}getPlatformInfoString(){return this.container.getProviders().map(gt=>{if(function ut(Se){const Pe=Se.getComponent();return"VERSION"===(null==Pe?void 0:Pe.type)}(gt)){const Ut=gt.getImmediate();return`${Ut.library}/${Ut.version}`}return null}).filter(gt=>gt).join(" ")}}const qe="@firebase/app",Tt=new J.Yd("@firebase/app"),oi="[DEFAULT]",Pr={[qe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},je=new Map,Te=new Map;function ye(Se,Pe){try{Se.container.addComponent(Pe)}catch(gt){Tt.debug(`Component ${Pe.name} failed to register with FirebaseApp ${Se.name}`,gt)}}function ht(Se){const Pe=Se.name;if(Te.has(Pe))return Tt.debug(`There were multiple attempts to register component ${Pe}.`),!1;Te.set(Pe,Se);for(const gt of je.values())ye(gt,Se);return!0}function an(Se,Pe){const gt=Se.container.getProvider("heartbeat").getImmediate({optional:!0});return gt&&gt.triggerHeartbeat(),Se.container.getProvider(Pe)}const Nn=new B.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wn{constructor(Pe,gt,Ut){this._isDeleted=!1,this._options=Object.assign({},Pe),this._config=Object.assign({},gt),this._name=gt.name,this._automaticDataCollectionEnabled=gt.automaticDataCollectionEnabled,this._container=Ut,this.container.addComponent(new I.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Pe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Pe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Pe){this._isDeleted=Pe}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}const zr="9.17.1";function On(Se,Pe={}){let gt=Se;"object"!=typeof Pe&&(Pe={name:Pe});const Ut=Object.assign({name:oi,automaticDataCollectionEnabled:!1},Pe),_n=Ut.name;if("string"!=typeof _n||!_n)throw Nn.create("bad-app-name",{appName:String(_n)});if(gt||(gt=(0,B.aH)()),!gt)throw Nn.create("no-options");const Cn=je.get(_n);if(Cn){if((0,B.vZ)(gt,Cn.options)&&(0,B.vZ)(Ut,Cn.config))return Cn;throw Nn.create("duplicate-app",{appName:_n})}const Vn=new I.H0(_n);for(const Qr of Te.values())Vn.addComponent(Qr);const sr=new Wn(gt,Ut,Vn);return je.set(_n,sr),sr}function fn(Se=oi){const Pe=je.get(Se);if(!Pe&&Se===oi)return On();if(!Pe)throw Nn.create("no-app",{appName:Se});return Pe}function Kn(){return Array.from(je.values())}function Pn(Se,Pe,gt){var Ut;let _n=null!==(Ut=Pr[Se])&&void 0!==Ut?Ut:Se;gt&&(_n+=`-${gt}`);const Cn=_n.match(/\s|\//),Vn=Pe.match(/\s|\//);if(Cn||Vn){const sr=[`Unable to register library "${_n}" with version "${Pe}":`];return Cn&&sr.push(`library name "${_n}" contains illegal characters (whitespace or "/")`),Cn&&Vn&&sr.push("and"),Vn&&sr.push(`version name "${Pe}" contains illegal characters (whitespace or "/")`),void Tt.warn(sr.join(" "))}ht(new I.wA(`${_n}-version`,()=>({library:_n,version:Pe}),"VERSION"))}const Ie="firebase-heartbeat-store";let Fe=null;function vt(){return Fe||(Fe=function yt(Se,Pe,{blocked:gt,upgrade:Ut,blocking:_n,terminated:Cn}={}){const Vn=indexedDB.open(Se,Pe),sr=Ue(Vn);return Ut&&Vn.addEventListener("upgradeneeded",Qr=>{Ut(Ue(Vn.result),Qr.oldVersion,Qr.newVersion,Ue(Vn.transaction))}),gt&&Vn.addEventListener("blocked",()=>gt()),sr.then(Qr=>{Cn&&Qr.addEventListener("close",()=>Cn()),_n&&Qr.addEventListener("versionchange",()=>_n())}).catch(()=>{}),sr}("firebase-heartbeat-database",1,{upgrade:(Se,Pe)=>{0===Pe&&Se.createObjectStore(Ie)}}).catch(Se=>{throw Nn.create("idb-open",{originalErrorMessage:Se.message})})),Fe}function Gt(){return(Gt=(0,g.Z)(function*(Se){try{return(yield vt()).transaction(Ie).objectStore(Ie).get(tr(Se))}catch(Pe){if(Pe instanceof B.ZR)Tt.warn(Pe.message);else{const gt=Nn.create("idb-get",{originalErrorMessage:null==Pe?void 0:Pe.message});Tt.warn(gt.message)}}})).apply(this,arguments)}function Xt(Se,Pe){return qn.apply(this,arguments)}function qn(){return(qn=(0,g.Z)(function*(Se,Pe){try{const Ut=(yield vt()).transaction(Ie,"readwrite");return yield Ut.objectStore(Ie).put(Pe,tr(Se)),Ut.done}catch(gt){if(gt instanceof B.ZR)Tt.warn(gt.message);else{const Ut=Nn.create("idb-set",{originalErrorMessage:null==gt?void 0:gt.message});Tt.warn(Ut.message)}}})).apply(this,arguments)}function tr(Se){return`${Se.name}!${Se.options.appId}`}class Ce{constructor(Pe){this.container=Pe,this._heartbeatsCache=null;const gt=this.container.getProvider("app").getImmediate();this._storage=new at(gt),this._heartbeatsCachePromise=this._storage.read().then(Ut=>(this._heartbeatsCache=Ut,Ut))}triggerHeartbeat(){var Pe=this;return(0,g.Z)(function*(){const Ut=Pe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_n=he();if(null===Pe._heartbeatsCache&&(Pe._heartbeatsCache=yield Pe._heartbeatsCachePromise),Pe._heartbeatsCache.lastSentHeartbeatDate!==_n&&!Pe._heartbeatsCache.heartbeats.some(Cn=>Cn.date===_n))return Pe._heartbeatsCache.heartbeats.push({date:_n,agent:Ut}),Pe._heartbeatsCache.heartbeats=Pe._heartbeatsCache.heartbeats.filter(Cn=>{const Vn=new Date(Cn.date).valueOf();return Date.now()-Vn<=2592e6}),Pe._storage.overwrite(Pe._heartbeatsCache)})()}getHeartbeatsHeader(){var Pe=this;return(0,g.Z)(function*(){if(null===Pe._heartbeatsCache&&(yield Pe._heartbeatsCachePromise),null===Pe._heartbeatsCache||0===Pe._heartbeatsCache.heartbeats.length)return"";const gt=he(),{heartbeatsToSend:Ut,unsentEntries:_n}=function ke(Se,Pe=1024){const gt=[];let Ut=Se.slice();for(const _n of Se){const Cn=gt.find(Vn=>Vn.agent===_n.agent);if(Cn){if(Cn.dates.push(_n.date),tn(gt)>Pe){Cn.dates.pop();break}}else if(gt.push({agent:_n.agent,dates:[_n.date]}),tn(gt)>Pe){gt.pop();break}Ut=Ut.slice(1)}return{heartbeatsToSend:gt,unsentEntries:Ut}}(Pe._heartbeatsCache.heartbeats),Cn=(0,B.L)(JSON.stringify({version:2,heartbeats:Ut}));return Pe._heartbeatsCache.lastSentHeartbeatDate=gt,_n.length>0?(Pe._heartbeatsCache.heartbeats=_n,yield Pe._storage.overwrite(Pe._heartbeatsCache)):(Pe._heartbeatsCache.heartbeats=[],Pe._storage.overwrite(Pe._heartbeatsCache)),Cn})()}}function he(){return(new Date).toISOString().substring(0,10)}class at{constructor(Pe){this.app=Pe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,B.hl)()&&(0,B.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Pe=this;return(0,g.Z)(function*(){return(yield Pe._canUseIndexedDBPromise)&&(yield function We(Se){return Gt.apply(this,arguments)}(Pe.app))||{heartbeats:[]}})()}overwrite(Pe){var gt=this;return(0,g.Z)(function*(){var Ut;if(yield gt._canUseIndexedDBPromise){const Cn=yield gt.read();return Xt(gt.app,{lastSentHeartbeatDate:null!==(Ut=Pe.lastSentHeartbeatDate)&&void 0!==Ut?Ut:Cn.lastSentHeartbeatDate,heartbeats:Pe.heartbeats})}})()}add(Pe){var gt=this;return(0,g.Z)(function*(){var Ut;if(yield gt._canUseIndexedDBPromise){const Cn=yield gt.read();return Xt(gt.app,{lastSentHeartbeatDate:null!==(Ut=Pe.lastSentHeartbeatDate)&&void 0!==Ut?Ut:Cn.lastSentHeartbeatDate,heartbeats:[...Cn.heartbeats,...Pe.heartbeats]})}})()}}function tn(Se){return(0,B.L)(JSON.stringify({version:2,heartbeats:Se})).length}!function rn(Se){ht(new I.wA("platform-logger",Pe=>new Ye(Pe),"PRIVATE")),ht(new I.wA("heartbeat",Pe=>new Ce(Pe),"PRIVATE")),Pn(qe,"0.9.3",Se),Pn(qe,"0.9.3","esm2017"),Pn("fire-js","")}("")},4859:(_e,ne,D)=>{D.d(ne,{H0:()=>z,wA:()=>J});var g=D(5861),I=D(2090);class J{constructor(Q,le,ue){this.name=Q,this.instanceFactory=le,this.type=ue,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const B="[DEFAULT]";class Y{constructor(Q,le){this.name=Q,this.container=le,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const le=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(le)){const ue=new I.BH;if(this.instancesDeferred.set(le,ue),this.isInitialized(le)||this.shouldAutoInitialize())try{const Re=this.getOrInitializeService({instanceIdentifier:le});Re&&ue.resolve(Re)}catch(Re){}}return this.instancesDeferred.get(le).promise}getImmediate(Q){var le;const ue=this.normalizeInstanceIdentifier(null==Q?void 0:Q.identifier),Re=null!==(le=null==Q?void 0:Q.optional)&&void 0!==le&&le;if(!this.isInitialized(ue)&&!this.shouldAutoInitialize()){if(Re)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ue})}catch(Ge){if(Re)return null;throw Ge}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if(function ee(oe){return"EAGER"===oe.instantiationMode}(Q))try{this.getOrInitializeService({instanceIdentifier:B})}catch(le){}for(const[le,ue]of this.instancesDeferred.entries()){const Re=this.normalizeInstanceIdentifier(le);try{const Ge=this.getOrInitializeService({instanceIdentifier:Re});ue.resolve(Ge)}catch(Ge){}}}}clearInstance(Q=B){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,g.Z)(function*(){const le=Array.from(Q.instances.values());yield Promise.all([...le.filter(ue=>"INTERNAL"in ue).map(ue=>ue.INTERNAL.delete()),...le.filter(ue=>"_delete"in ue).map(ue=>ue._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=B){return this.instances.has(Q)}getOptions(Q=B){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:le={}}=Q,ue=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(ue))throw Error(`${this.name}(${ue}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Re=this.getOrInitializeService({instanceIdentifier:ue,options:le});for(const[Ge,ve]of this.instancesDeferred.entries())ue===this.normalizeInstanceIdentifier(Ge)&&ve.resolve(Re);return Re}onInit(Q,le){var ue;const Re=this.normalizeInstanceIdentifier(le),Ge=null!==(ue=this.onInitCallbacks.get(Re))&&void 0!==ue?ue:new Set;Ge.add(Q),this.onInitCallbacks.set(Re,Ge);const ve=this.instances.get(Re);return ve&&Q(ve,Re),()=>{Ge.delete(Q)}}invokeOnInitCallbacks(Q,le){const ue=this.onInitCallbacks.get(le);if(ue)for(const Re of ue)try{Re(Q,le)}catch(Ge){}}getOrInitializeService({instanceIdentifier:Q,options:le={}}){let ue=this.instances.get(Q);if(!ue&&this.component&&(ue=this.component.instanceFactory(this.container,{instanceIdentifier:(oe=Q,oe===B?void 0:oe),options:le}),this.instances.set(Q,ue),this.instancesOptions.set(Q,le),this.invokeOnInitCallbacks(ue,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,ue)}catch(Re){}var oe;return ue||null}normalizeInstanceIdentifier(Q=B){return this.component?this.component.multipleInstances?Q:B:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class z{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const le=this.getProvider(Q.name);if(le.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);le.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const le=new Y(Q,this);return this.providers.set(Q,le),le}getProviders(){return Array.from(this.providers.values())}}},1877:(_e,ne,D)=>{D.d(ne,{Yd:()=>ee,in:()=>I});const g=[];var I=(()=>{return(Q=I||(I={}))[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",I;var Q})();const J={debug:I.DEBUG,verbose:I.VERBOSE,info:I.INFO,warn:I.WARN,error:I.ERROR,silent:I.SILENT},B=I.INFO,Y={[I.DEBUG]:"log",[I.VERBOSE]:"log",[I.INFO]:"info",[I.WARN]:"warn",[I.ERROR]:"error"},re=(Q,le,...ue)=>{if(le<Q.logLevel)return;const Re=(new Date).toISOString(),Ge=Y[le];if(!Ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${le})`);console[Ge](`[${Re}]  ${Q.name}:`,...ue)};class ee{constructor(le){this.name=le,this._logLevel=B,this._logHandler=re,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(le){if(!(le in I))throw new TypeError(`Invalid value "${le}" assigned to \`logLevel\``);this._logLevel=le}setLogLevel(le){this._logLevel="string"==typeof le?J[le]:le}get logHandler(){return this._logHandler}set logHandler(le){if("function"!=typeof le)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=le}get userLogHandler(){return this._userLogHandler}set userLogHandler(le){this._userLogHandler=le}debug(...le){this._userLogHandler&&this._userLogHandler(this,I.DEBUG,...le),this._logHandler(this,I.DEBUG,...le)}log(...le){this._userLogHandler&&this._userLogHandler(this,I.VERBOSE,...le),this._logHandler(this,I.VERBOSE,...le)}info(...le){this._userLogHandler&&this._userLogHandler(this,I.INFO,...le),this._logHandler(this,I.INFO,...le)}warn(...le){this._userLogHandler&&this._userLogHandler(this,I.WARN,...le),this._logHandler(this,I.WARN,...le)}error(...le){this._userLogHandler&&this._userLogHandler(this,I.ERROR,...le),this._logHandler(this,I.ERROR,...le)}}},9565:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5e3),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5094),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(515),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9751),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(9646),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6451),rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(233),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(4707),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3099),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9300),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4004),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4351),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7414),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8372),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(262),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5698),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2722),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(3900),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(5684),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5363),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1365),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(5026);const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(ne,D){if(this.action=ne,this.timestamp=D,this.type=PERFORM_ACTION,void 0===ne.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(ne){this.timestamp=ne,this.type=RESET}}class Rollback{constructor(ne){this.timestamp=ne,this.type=ROLLBACK}}class Commit{constructor(ne){this.timestamp=ne,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(ne){this.id=ne,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(ne,D,g=!0){this.start=ne,this.end=D,this.active=g,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(ne){this.index=ne,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(ne){this.actionId=ne,this.type=JUMP_TO_ACTION}}class ImportState{constructor(ne){this.nextLiftedState=ne,this.type=IMPORT_STATE}}class LockChanges{constructor(ne){this.status=ne,this.type=LOCK_CHANGES}}class PauseRecording{constructor(ne){this.status=ne,this.type=PAUSE_RECORDING}}class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(_e){const ne={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},D="function"==typeof _e?_e():_e,J=Object.assign({},ne,{features:D.features||!!D.logOnly&&{pause:!0,export:!0,test:!0}||ne.features},D);if(J.maxAge&&J.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${J.maxAge}`);return J}function difference(_e,ne){return _e.filter(D=>ne.indexOf(D)<0)}function unliftState(_e){const{computedStates:ne,currentStateIndex:D}=_e;if(D>=ne.length){const{state:I}=ne[ne.length-1];return I}const{state:g}=ne[D];return g}function unliftAction(_e){return _e.actionsById[_e.nextActionId-1]}function liftAction(_e){return new PerformAction(_e,+Date.now())}function sanitizeActions(_e,ne){return Object.keys(ne).reduce((D,g)=>{const I=Number(g);return D[I]=sanitizeAction(_e,ne[I],I),D},{})}function sanitizeAction(_e,ne,D){return Object.assign(Object.assign({},ne),{action:_e(ne.action,D)})}function sanitizeStates(_e,ne){return ne.map((D,g)=>({state:sanitizeState(_e,D.state,g),error:D.error}))}function sanitizeState(_e,ne,D){return _e(ne,D)}function shouldFilterActions(_e){return _e.predicate||_e.actionsSafelist||_e.actionsBlocklist}function filterLiftedState(_e,ne,D,g){const I=[],J={},B=[];return _e.stagedActionIds.forEach((Y,re)=>{const ee=_e.actionsById[Y];!ee||re&&isActionFiltered(_e.computedStates[re],ee,ne,D,g)||(J[Y]=ee,I.push(Y),B.push(_e.computedStates[re]))}),Object.assign(Object.assign({},_e),{stagedActionIds:I,actionsById:J,computedStates:B})}function isActionFiltered(_e,ne,D,g,I){const J=D&&!D(_e,ne.action),B=g&&!ne.action.type.match(g.map(re=>escapeRegExp(re)).join("|")),Y=I&&ne.action.type.match(I.map(re=>escapeRegExp(re)).join("|"));return J||B||Y}function escapeRegExp(_e){return _e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}let DevtoolsDispatcher=(()=>{class _e extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO{}return _e.\u0275fac=function(){let ne;return function(g){return(ne||(ne=_angular_core__WEBPACK_IMPORTED_MODULE_0__.n5z(_e)))(g||_e)}}(),_e.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Redux Devtools Extension");let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(_e,ne,D){this.config=ne,this.dispatcher=D,this.devtoolsExtension=_e,this.createActionStreams()}notify(_e,ne){if(this.devtoolsExtension)if(_e.type===PERFORM_ACTION){if(ne.isLocked||ne.isPaused)return;const D=unliftState(ne);if(shouldFilterActions(this.config)&&isActionFiltered(D,_e,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const g=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,D,ne.currentStateIndex):D,I=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,_e,ne.nextActionId):_e;this.sendToReduxDevtools(()=>this.extensionConnection.send(I,g))}else{const D=Object.assign(Object.assign({},ne),{stagedActionIds:ne.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,ne.actionsById):ne.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,ne.computedStates):ne.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,D,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.y(_e=>{const ne=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=ne,ne.init(),ne.subscribe(D=>_e.next(D)),ne.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.E}createActionStreams(){const _e=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()),ne=_e.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(Y=>Y.type===ExtensionActionTypes.START)),D=_e.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(Y=>Y.type===ExtensionActionTypes.STOP)),g=_e.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(Y=>Y.type===ExtensionActionTypes.DISPATCH),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(Y=>this.unwrapAction(Y.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)(Y=>Y.type===IMPORT_STATE?this.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(re=>re.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(()=>Y),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.K)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(Y)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(Y))),J=_e.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(Y=>Y.type===ExtensionActionTypes.ACTION),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(Y=>this.unwrapAction(Y.payload))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(D)),B=g.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(D));this.start$=ne.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(D)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>J)),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>B))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(_e){var ne;const D={name:_e.name,features:_e.features,serialize:_e.serialize,autoPause:null!==(ne=_e.autoPause)&&void 0!==ne&&ne};return!1!==_e.maxAge&&(D.maxAge=_e.maxAge),D}sendToReduxDevtools(_e){try{_e()}catch(ne){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",ne)}}}return DevtoolsExtension.\u0275fac=function _e(ne){return new(ne||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})();const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(_e,ne,D,g,I){if(g)return{state:D,error:"Interrupted by an error up the chain"};let B,J=D;try{J=_e(D,ne)}catch(Y){B=Y.toString(),I.handleError(Y)}return{state:J,error:B}}function recomputeStates(_e,ne,D,g,I,J,B,Y,re){if(ne>=_e.length&&_e.length===J.length)return _e;const ee=_e.slice(0,ne),z=J.length-(re?1:0);for(let oe=ne;oe<z;oe++){const Q=J[oe],le=I[Q].action,ue=ee[oe-1],Re=ue?ue.state:g,Ge=ue?ue.error:void 0,Be=B.indexOf(Q)>-1?ue:computeNextEntry(D,le,Re,Ge,Y);ee.push(Be)}return re&&ee.push(_e[_e.length-1]),ee}function liftInitialState(_e,ne){return{monitorState:ne(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:_e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(_e,ne,D,g,I={}){return J=>(B,Y)=>{let{monitorState:re,actionsById:ee,nextActionId:z,stagedActionIds:oe,skippedActionIds:Q,committedState:le,currentStateIndex:ue,computedStates:Re,isLocked:Ge,isPaused:ve}=B||ne;function Be(dt){let mt=dt,Ue=oe.slice(1,mt+1);for(let Oe=0;Oe<Ue.length;Oe++){if(Re[Oe+1].error){mt=Oe,Ue=oe.slice(1,mt+1);break}delete ee[Ue[Oe]]}Q=Q.filter(Oe=>-1===Ue.indexOf(Oe)),oe=[0,...oe.slice(mt+1)],le=Re[mt].state,Re=Re.slice(mt),ue=ue>mt?ue-mt:0}function He(){ee={0:liftAction(INIT_ACTION)},z=1,oe=[0],Q=[],le=Re[ue].state,ue=0,Re=[]}B||(ee=Object.create(ee));let xe=0;switch(Y.type){case LOCK_CHANGES:Ge=Y.status,xe=1/0;break;case PAUSE_RECORDING:ve=Y.status,ve?(oe=[...oe,z],ee[z]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),z++,xe=oe.length-1,Re=Re.concat(Re[Re.length-1]),ue===oe.length-2&&ue++,xe=1/0):He();break;case RESET:ee={0:liftAction(INIT_ACTION)},z=1,oe=[0],Q=[],le=_e,ue=0,Re=[];break;case COMMIT:He();break;case ROLLBACK:ee={0:liftAction(INIT_ACTION)},z=1,oe=[0],Q=[],ue=0,Re=[];break;case TOGGLE_ACTION:{const{id:dt}=Y;Q=-1===Q.indexOf(dt)?[dt,...Q]:Q.filter(Ue=>Ue!==dt),xe=oe.indexOf(dt);break}case SET_ACTIONS_ACTIVE:{const{start:dt,end:mt,active:Ue}=Y,Oe=[];for(let yt=dt;yt<mt;yt++)Oe.push(yt);Q=Ue?difference(Q,Oe):[...Q,...Oe],xe=oe.indexOf(dt);break}case JUMP_TO_STATE:ue=Y.index,xe=1/0;break;case JUMP_TO_ACTION:{const dt=oe.indexOf(Y.actionId);-1!==dt&&(ue=dt),xe=1/0;break}case SWEEP:oe=difference(oe,Q),Q=[],ue=Math.min(ue,oe.length-1);break;case PERFORM_ACTION:{if(Ge)return B||ne;if(ve||B&&isActionFiltered(B.computedStates[ue],Y,I.predicate,I.actionsSafelist,I.actionsBlocklist)){const mt=Re[Re.length-1];Re=[...Re.slice(0,-1),computeNextEntry(J,Y.action,mt.state,mt.error,D)],xe=1/0;break}I.maxAge&&oe.length===I.maxAge&&Be(1),ue===oe.length-1&&ue++;const dt=z++;ee[dt]=Y,oe=[...oe,dt],xe=oe.length-1;break}case IMPORT_STATE:({monitorState:re,actionsById:ee,nextActionId:z,stagedActionIds:oe,skippedActionIds:Q,committedState:le,currentStateIndex:ue,computedStates:Re,isLocked:Ge,isPaused:ve}=Y.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg:xe=0,I.maxAge&&oe.length>I.maxAge&&(Re=recomputeStates(Re,xe,J,le,ee,oe,Q,D,ve),Be(oe.length-I.maxAge),xe=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb:if(Re.filter(mt=>mt.error).length>0)xe=0,I.maxAge&&oe.length>I.maxAge&&(Re=recomputeStates(Re,xe,J,le,ee,oe,Q,D,ve),Be(oe.length-I.maxAge),xe=1/0);else{if(!ve&&!Ge){ue===oe.length-1&&ue++;const mt=z++;ee[mt]=new PerformAction(Y,+Date.now()),oe=[...oe,mt],xe=oe.length-1,Re=recomputeStates(Re,xe,J,le,ee,oe,Q,D,ve)}Re=Re.map(mt=>Object.assign(Object.assign({},mt),{state:J(mt.state,RECOMPUTE_ACTION)})),ue=oe.length-1,I.maxAge&&oe.length>I.maxAge&&Be(oe.length-I.maxAge),xe=1/0}break;default:xe=1/0}return Re=recomputeStates(Re,xe,J,le,ee,oe,Q,D,ve),re=g(re,Y),{monitorState:re,actionsById:ee,nextActionId:z,stagedActionIds:oe,skippedActionIds:Q,committedState:le,currentStateIndex:ue,computedStates:Re,isLocked:Ge,isPaused:ve}}}let StoreDevtools=(()=>{class _e{constructor(D,g,I,J,B,Y,re,ee){const z=liftInitialState(re,ee.monitor),oe=liftReducerWith(re,z,Y,ee.monitor,ee),Q=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)(g.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.T)(1)),J.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(liftAction)),D,J.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Q)(rxjs__WEBPACK_IMPORTED_MODULE_18__.N)),le=I.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(oe)),ue=new rxjs__WEBPACK_IMPORTED_MODULE_19__.t(1),Re=Q.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.M)(le),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.R)(({state:He},[xe,dt])=>{let mt=dt(He,xe);return xe.type!==PERFORM_ACTION&&shouldFilterActions(ee)&&(mt=filterLiftedState(mt,ee.predicate,ee.actionsSafelist,ee.actionsBlocklist)),J.notify(xe,mt),{state:mt,action:xe}},{state:z,action:null})).subscribe(({state:He,action:xe})=>{ue.next(He),xe.type===PERFORM_ACTION&&B.next(xe.action)}),Ge=J.start$.subscribe(()=>{this.refresh()}),ve=ue.asObservable(),Be=ve.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(unliftState));this.extensionStartSubscription=Ge,this.stateSubscription=Re,this.dispatcher=D,this.liftedState=ve,this.state=Be}dispatch(D){this.dispatcher.next(D)}next(D){this.dispatcher.next(D)}error(D){}complete(){}performAction(D){this.dispatch(new PerformAction(D,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(D){this.dispatch(new ToggleAction(D))}jumpToAction(D){this.dispatch(new JumpToAction(D))}jumpToState(D){this.dispatch(new JumpToState(D))}importState(D){this.dispatch(new ImportState(D))}lockChanges(D){this.dispatch(new LockChanges(D))}pauseRecording(D){this.dispatch(new PauseRecording(D))}}return _e.\u0275fac=function(D){return new(D||_e)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_0__.qLn),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG))},_e.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:_e,factory:_e.\u0275fac}),_e})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(_e,ne){return Boolean(_e)||ne.monitor!==noMonitor}function createReduxDevtoolsExtension(){const _e="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&void 0!==window[_e]?window[_e]:null}function provideStoreDevtools(_e={}){return{\u0275providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:_e},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.mK,useExisting:DevtoolsDispatcher}]}}function createStateObservable(_e){return _e.state}let StoreDevtoolsModule=(()=>{class _e{static instrument(D={}){return{ngModule:_e,providers:[...provideStoreDevtools(D).\u0275providers]}}}return _e.\u0275fac=function(D){return new(D||_e)},_e.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.oAB({type:_e}),_e.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.cJS({}),_e})()},5094:(_e,ne,D)=>{D.d(ne,{Aw:()=>$n,CK:()=>zn,FR:()=>je,Ky:()=>ve,Lq:()=>Fi,P1:()=>Xt,PH:()=>Ge,UO:()=>It,Y$:()=>oi,Y6:()=>Qe,Ys:()=>dn,ZF:()=>Er,cr:()=>Pi,mK:()=>si,n$:()=>zt,on:()=>xr,qC:()=>Fn,qg:()=>yt,wb:()=>cs,yh:()=>ht});var g=D(5e3),I=D(1135),J=D(9751),B=D(7579),Y=D(233),re=D(5363),ee=D(1365),z=D(5026),oe=D(4813),Q=D(4004),le=D(1884);const ue={};function Ge(De,tt){if(ue[De]=(ue[De]||0)+1,"function"==typeof tt)return He(De,(...pt)=>Object.assign(Object.assign({},tt(...pt)),{type:De}));switch(tt?tt._as:"empty"){case"empty":return He(De,()=>({type:De}));case"props":return He(De,pt=>Object.assign(Object.assign({},pt),{type:De}));default:throw new Error("Unexpected config.")}}function ve(){return{_as:"props",_p:void 0}}function He(De,tt){return Object.defineProperty(tt,"type",{value:De,writable:!1})}const yt="@ngrx/store/init";let It=(()=>{class De extends I.X{constructor(){super({type:yt})}next(Ke){if("function"==typeof Ke)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===Ke)throw new TypeError("Actions must be objects");if(void 0===Ke.type)throw new TypeError("Actions must have a type property");super.next(Ke)}complete(){}ngOnDestroy(){super.complete()}}return De.\u0275fac=function(Ke){return new(Ke||De)},De.\u0275prov=g.Yz7({token:De,factory:De.\u0275fac}),De})();const Je=[It],Nt=new g.OlP("@ngrx/store Internal Root Guard"),wt=new g.OlP("@ngrx/store Internal Initial State"),Qe=new g.OlP("@ngrx/store Initial State"),Ye=new g.OlP("@ngrx/store Reducer Factory"),ut=new g.OlP("@ngrx/store Internal Reducer Factory Provider"),qe=new g.OlP("@ngrx/store Initial Reducers"),Rt=new g.OlP("@ngrx/store Internal Initial Reducers"),Tt=new g.OlP("@ngrx/store Store Features"),hn=new g.OlP("@ngrx/store Internal Store Reducers"),nr=new g.OlP("@ngrx/store Internal Feature Reducers"),qt=new g.OlP("@ngrx/store Internal Feature Configs"),St=new g.OlP("@ngrx/store Internal Store Features"),vr=new g.OlP("@ngrx/store Internal Feature Reducers Token"),Cr=new g.OlP("@ngrx/store Feature Reducers"),hr=new g.OlP("@ngrx/store User Provided Meta Reducers"),ir=new g.OlP("@ngrx/store Meta Reducers"),Ln=new g.OlP("@ngrx/store Internal Resolved Meta Reducers"),Dn=new g.OlP("@ngrx/store User Runtime Checks Config"),jr=new g.OlP("@ngrx/store Internal User Runtime Checks Config"),Ct=new g.OlP("@ngrx/store Internal Runtime Checks"),st=new g.OlP("@ngrx/store Check if Action types are unique");function $t(De,tt={}){const Ke=Object.keys(De),pt={};for(let Vt=0;Vt<Ke.length;Vt++){const Bn=Ke[Vt];"function"==typeof De[Bn]&&(pt[Bn]=De[Bn])}const Wt=Object.keys(pt);return function(Bn,Ar){Bn=void 0===Bn?tt:Bn;let Sr=!1;const Si={};for(let mr=0;mr<Wt.length;mr++){const Ur=Wt[mr],Hs=Bn[Ur],$s=(0,pt[Ur])(Hs,Ar);Si[Ur]=$s,Sr=Sr||$s!==Hs}return Sr?Si:Bn}}function Fn(...De){return function(tt){if(0===De.length)return tt;const Ke=De[De.length-1];return De.slice(0,-1).reduceRight((Wt,Vt)=>Vt(Wt),Ke(tt))}}function Fr(De,tt){return Array.isArray(tt)&&tt.length>0&&(De=Fn.apply(null,[...tt,De])),(Ke,pt)=>{const Wt=De(Ke);return(Vt,Bn)=>Wt(Vt=void 0===Vt?pt:Vt,Bn)}}new g.OlP("@ngrx/store Root Store Provider"),new g.OlP("@ngrx/store Feature State Provider");class zt extends J.y{}class si extends It{}const cs="@ngrx/store/update-reducers";let gr=(()=>{class De extends I.X{constructor(Ke,pt,Wt,Vt){super(Vt(Wt,pt)),this.dispatcher=Ke,this.initialState=pt,this.reducers=Wt,this.reducerFactory=Vt}get currentReducers(){return this.reducers}addFeature(Ke){this.addFeatures([Ke])}addFeatures(Ke){const pt=Ke.reduce((Wt,{reducers:Vt,reducerFactory:Bn,metaReducers:Ar,initialState:Sr,key:Si})=>{const mr="function"==typeof Vt?function Li(De){const tt=Array.isArray(De)&&De.length>0?Fn(...De):Ke=>Ke;return(Ke,pt)=>(Ke=tt(Ke),(Wt,Vt)=>Ke(Wt=void 0===Wt?pt:Wt,Vt))}(Ar)(Vt,Sr):Fr(Bn,Ar)(Vt,Sr);return Wt[Si]=mr,Wt},{});this.addReducers(pt)}removeFeature(Ke){this.removeFeatures([Ke])}removeFeatures(Ke){this.removeReducers(Ke.map(pt=>pt.key))}addReducer(Ke,pt){this.addReducers({[Ke]:pt})}addReducers(Ke){this.reducers=Object.assign(Object.assign({},this.reducers),Ke),this.updateReducers(Object.keys(Ke))}removeReducer(Ke){this.removeReducers([Ke])}removeReducers(Ke){Ke.forEach(pt=>{this.reducers=function on(De,tt){return Object.keys(De).filter(Ke=>Ke!==tt).reduce((Ke,pt)=>Object.assign(Ke,{[pt]:De[pt]}),{})}(this.reducers,pt)}),this.updateReducers(Ke)}updateReducers(Ke){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:cs,features:Ke})}ngOnDestroy(){this.complete()}}return De.\u0275fac=function(Ke){return new(Ke||De)(g.LFG(si),g.LFG(Qe),g.LFG(qe),g.LFG(Ye))},De.\u0275prov=g.Yz7({token:De,factory:De.\u0275fac}),De})();const Ei=[gr,{provide:zt,useExisting:gr},{provide:si,useExisting:It}];let oi=(()=>{class De extends B.x{ngOnDestroy(){this.complete()}}return De.\u0275fac=function(){let tt;return function(pt){return(tt||(tt=g.n5z(De)))(pt||De)}}(),De.\u0275prov=g.Yz7({token:De,factory:De.\u0275fac}),De})();const Pr=[oi];class je extends J.y{}let Te=(()=>{class De extends I.X{constructor(Ke,pt,Wt,Vt){super(Vt);const Si=Ke.pipe((0,re.Q)(Y.N)).pipe((0,ee.M)(pt)).pipe((0,z.R)(ye,{state:Vt}));this.stateSubscription=Si.subscribe(({state:mr,action:Ur})=>{this.next(mr),Wt.next(Ur)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return De.INIT=yt,De.\u0275fac=function(Ke){return new(Ke||De)(g.LFG(It),g.LFG(zt),g.LFG(oi),g.LFG(Qe))},De.\u0275prov=g.Yz7({token:De,factory:De.\u0275fac}),De})();function ye(De={state:void 0},[tt,Ke]){const{state:pt}=De;return{state:Ke(pt,tt),action:tt}}const Xe=[Te,{provide:je,useExisting:Te}];let ht=(()=>{class De extends J.y{constructor(Ke,pt,Wt){super(),this.actionsObserver=pt,this.reducerManager=Wt,this.source=Ke}select(Ke,...pt){return dn.call(null,Ke,...pt)(this)}lift(Ke){const pt=new De(this,this.actionsObserver,this.reducerManager);return pt.operator=Ke,pt}dispatch(Ke){this.actionsObserver.next(Ke)}next(Ke){this.actionsObserver.next(Ke)}error(Ke){this.actionsObserver.error(Ke)}complete(){this.actionsObserver.complete()}addReducer(Ke,pt){this.reducerManager.addReducer(Ke,pt)}removeReducer(Ke){this.reducerManager.removeReducer(Ke)}}return De.\u0275fac=function(Ke){return new(Ke||De)(g.LFG(je),g.LFG(It),g.LFG(gr))},De.\u0275prov=g.Yz7({token:De,factory:De.\u0275fac}),De})();const an=[ht];function dn(De,tt,...Ke){return function(Wt){let Vt;if("string"==typeof De){const Bn=[tt,...Ke].filter(Boolean);Vt=Wt.pipe((0,oe.j)(De,...Bn))}else{if("function"!=typeof De)throw new TypeError(`Unexpected type '${typeof De}' in select operator, expected 'string' or 'function'`);Vt=Wt.pipe((0,Q.U)(Bn=>De(Bn,tt)))}return Vt.pipe((0,le.x)())}}const er="https://ngrx.io/guide/store/configuration/runtime-checks";function Lt(De){return void 0===De}function Nn(De){return null===De}function Wn(De){return Array.isArray(De)}function Kn(De){return"object"==typeof De&&null!==De}function Pn(De){return"function"==typeof De}function Fe(De,tt){return De===tt}function vt(De,tt,Ke){for(let pt=0;pt<De.length;pt++)if(!Ke(De[pt],tt[pt]))return!0;return!1}function Gt(De,tt=Fe,Ke=Fe){let Vt,pt=null,Wt=null;return{memoized:function Si(){if(void 0!==Vt)return Vt.result;if(!pt)return Wt=De.apply(null,arguments),pt=arguments,Wt;if(!vt(arguments,pt,tt))return Wt;const mr=De.apply(null,arguments);return pt=arguments,Ke(Wt,mr)?Wt:(Wt=mr,mr)},reset:function Bn(){pt=null,Wt=null},setResult:function Ar(mr){Vt={result:mr}},clearResult:function Sr(){Vt=void 0}}}function Xt(...De){return function tr(De,tt={stateFn:qn}){return function(...Ke){let pt=Ke;if(Array.isArray(pt[0])){const[mr,...Ur]=pt;pt=[...mr,...Ur]}const Wt=pt.slice(0,pt.length-1),Vt=pt[pt.length-1],Bn=Wt.filter(mr=>mr.release&&"function"==typeof mr.release),Ar=De(function(...mr){return Vt.apply(null,mr)}),Sr=Gt(function(mr,Ur){return tt.stateFn.apply(null,[mr,Wt,Ur,Ar])});return Object.assign(Sr.memoized,{release:function Si(){Sr.reset(),Ar.reset(),Bn.forEach(mr=>mr.release())},projector:Ar.memoized,setResult:Sr.setResult,clearResult:Sr.clearResult})}}(Gt)(...De)}function qn(De,tt,Ke,pt){if(void 0===Ke){const Vt=tt.map(Bn=>Bn(De));return pt.memoized.apply(null,Vt)}const Wt=tt.map(Vt=>Vt(De,Ke));return pt.memoized.apply(null,[...Wt,Ke])}function Er(De){return Xt(tt=>{const Ke=tt[De];return(0,g.X6Q)()&&!(De in tt)&&console.warn(`@ngrx/store: The feature name "${De}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${De}', ...) or StoreModule.forFeature('${De}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),Ke},tt=>tt)}function ke(De,tt){return tt instanceof g.OlP?De.get(tt):tt}function at(De,tt,Ke){return Ke.map((pt,Wt)=>{if(tt[Wt]instanceof g.OlP){const Vt=De.get(tt[Wt]);return{key:pt.key,reducerFactory:Vt.reducerFactory?Vt.reducerFactory:$t,metaReducers:Vt.metaReducers?Vt.metaReducers:[],initialState:Vt.initialState}}return pt})}function tn(De,tt){return tt.map(pt=>pt instanceof g.OlP?De.get(pt):pt)}function rn(De){return"function"==typeof De?De():De}function Se(De,tt){return De.concat(tt)}function Pe(De){if(De)throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function Ut(De){Object.freeze(De);const tt=Pn(De);return Object.getOwnPropertyNames(De).forEach(Ke=>{if(!Ke.startsWith("\u0275")&&function hi(De,tt){return Object.prototype.hasOwnProperty.call(De,tt)}(De,Ke)&&(!tt||"caller"!==Ke&&"callee"!==Ke&&"arguments"!==Ke)){const pt=De[Ke];(Kn(pt)||Pn(pt))&&!Object.isFrozen(pt)&&Ut(pt)}}),De}function Cn(De,tt=[]){return(Lt(De)||Nn(De))&&0===tt.length?{path:["root"],value:De}:Object.keys(De).reduce((pt,Wt)=>{if(pt)return pt;const Vt=De[Wt];return function lr(De){return Pn(De)&&De.hasOwnProperty("\u0275cmp")}(Vt)?pt:!(Lt(Vt)||Nn(Vt)||function fn(De){return"number"==typeof De}(Vt)||function On(De){return"boolean"==typeof De}(Vt)||function zr(De){return"string"==typeof De}(Vt)||Wn(Vt))&&(function Rr(De){if(!function Yr(De){return Kn(De)&&!Wn(De)}(De))return!1;const tt=Object.getPrototypeOf(De);return tt===Object.prototype||null===tt}(Vt)?Cn(Vt,[...tt,Wt]):{path:[...tt,Wt],value:Vt})},!1)}function Vn(De,tt){if(!1===De)return;const Ke=De.path.join("."),pt=new Error(`Detected unserializable ${tt} at "${Ke}". ${er}#strict${tt}serializability`);throw pt.value=De.value,pt.unserializablePath=Ke,pt}function Qr(De){return(0,g.X6Q)()?Object.assign({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},De):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function Hr({strictActionSerializability:De,strictStateSerializability:tt}){return Ke=>De||tt?function _n(De,tt){return function(Ke,pt){tt.action(pt)&&Vn(Cn(pt),"action");const Wt=De(Ke,pt);return tt.state()&&Vn(Cn(Wt),"state"),Wt}}(Ke,{action:pt=>De&&!Hi(pt),state:()=>tt}):Ke}function In({strictActionImmutability:De,strictStateImmutability:tt}){return Ke=>De||tt?function gt(De,tt){return function(Ke,pt){const Wt=tt.action(pt)?Ut(pt):pt,Vt=De(Ke,Wt);return tt.state()?Ut(Vt):Vt}}(Ke,{action:pt=>De&&!Hi(pt),state:()=>tt}):Ke}function Hi(De){return De.type.startsWith("@ngrx")}function ds({strictActionWithinNgZone:De}){return tt=>De?function sr(De,tt){return function(Ke,pt){if(tt.action(pt)&&!g.R0b.isInAngularZone())throw new Error(`Action '${pt.type}' running outside NgZone. ${er}#strictactionwithinngzone`);return De(Ke,pt)}}(tt,{action:Ke=>De&&!Hi(Ke)}):tt}function Di(De){return[{provide:jr,useValue:De},{provide:Dn,useFactory:Zn,deps:[jr]},{provide:Ct,deps:[Dn],useFactory:Qr},{provide:ir,multi:!0,deps:[Ct],useFactory:In},{provide:ir,multi:!0,deps:[Ct],useFactory:Hr},{provide:ir,multi:!0,deps:[Ct],useFactory:ds}]}function ai(){return[{provide:st,multi:!0,deps:[Ct],useFactory:Oi}]}function Zn(De){return De}function Oi(De){if(!De.strictActionTypeUniqueness)return;const tt=Object.entries(ue).filter(([,Ke])=>Ke>1).map(([Ke])=>Ke);if(tt.length)throw new Error(`Action types are registered more than once, ${tt.map(Ke=>`"${Ke}"`).join(", ")}. ${er}#strictactiontypeuniqueness`)}function Tn(De,tt){return[{provide:Nt,useFactory:Pe,deps:[[ht,new g.FiY,new g.tp0]]},{provide:wt,useValue:tt.initialState},{provide:Qe,useFactory:rn,deps:[wt]},{provide:Rt,useValue:De},{provide:hn,useExisting:De instanceof g.OlP?De:Rt},{provide:qe,deps:[g.zs3,Rt,[new g.tBr(hn)]],useFactory:ke},{provide:hr,useValue:tt.metaReducers?tt.metaReducers:[]},{provide:Ln,deps:[ir,hr],useFactory:Se},{provide:ut,useValue:tt.reducerFactory?tt.reducerFactory:$t},{provide:Ye,deps:[ut,Ln],useFactory:Fr},Je,Ei,Pr,Xe,an,Di(tt.runtimeChecks),ai()]}function qr(De,tt,Ke={}){return[{provide:qt,multi:!0,useValue:De instanceof Object?{}:Ke},{provide:Tt,multi:!0,useValue:{key:De instanceof Object?De.name:De,reducerFactory:Ke instanceof g.OlP||!Ke.reducerFactory?$t:Ke.reducerFactory,metaReducers:Ke instanceof g.OlP||!Ke.metaReducers?[]:Ke.metaReducers,initialState:Ke instanceof g.OlP||!Ke.initialState?void 0:Ke.initialState}},{provide:St,deps:[g.zs3,qt,Tt],useFactory:at},{provide:nr,multi:!0,useValue:De instanceof Object?De.reducer:tt},{provide:vr,multi:!0,useExisting:tt instanceof g.OlP?tt:nr},{provide:Cr,multi:!0,deps:[g.zs3,nr,[new g.tBr(vr)]],useFactory:tn},ai()]}let Pi=(()=>{class De{constructor(Ke,pt,Wt,Vt,Bn,Ar){}}return De.\u0275fac=function(Ke){return new(Ke||De)(g.LFG(It),g.LFG(zt),g.LFG(oi),g.LFG(ht),g.LFG(Nt,8),g.LFG(st,8))},De.\u0275mod=g.oAB({type:De}),De.\u0275inj=g.cJS({}),De})(),zn=(()=>{class De{constructor(Ke,pt,Wt,Vt,Bn){this.features=Ke,this.featureReducers=pt,this.reducerManager=Wt;const Ar=Ke.map((Sr,Si)=>{const Ur=pt.shift()[Si];return Object.assign(Object.assign({},Sr),{reducers:Ur,initialState:rn(Sr.initialState)})});Wt.addFeatures(Ar)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return De.\u0275fac=function(Ke){return new(Ke||De)(g.LFG(St),g.LFG(Cr),g.LFG(gr),g.LFG(Pi),g.LFG(st,8))},De.\u0275mod=g.oAB({type:De}),De.\u0275inj=g.cJS({}),De})(),$n=(()=>{class De{static forRoot(Ke,pt={}){return{ngModule:Pi,providers:[...Tn(Ke,pt)]}}static forFeature(Ke,pt,Wt={}){return{ngModule:zn,providers:[...qr(Ke,pt,Wt)]}}}return De.\u0275fac=function(Ke){return new(Ke||De)},De.\u0275mod=g.oAB({type:De}),De.\u0275inj=g.cJS({}),De})();function xr(...De){return{reducer:De.pop(),types:De.map(pt=>pt.type)}}function Fi(De,...tt){const Ke=new Map;for(const pt of tt)for(const Wt of pt.types){const Vt=Ke.get(Wt);Ke.set(Wt,Vt?(Ar,Sr)=>pt.reducer(Vt(Ar,Sr),Sr):pt.reducer)}return function(pt=De,Wt){const Vt=Ke.get(Wt.type);return Vt?Vt(pt,Wt):pt}}},5532:(_e,ne,D)=>{D.d(ne,{C5:()=>jr,G2:()=>hr,Qi:()=>Ye,ek:()=>Rt,f8:()=>Qe,gm:()=>Dn});var g=D(5e3),I=D(655),J=D(6197),B=D(9751),Y=D(4004),re=D(9808),ee=D(4202),z=D(520),oe=D(259),Q=D(9996),le=D(4716);function ue(Ct,st){if(1&Ct&&(g.TgZ(0,"section")(1,"h2")(2,"span"),g._uU(3,"Total"),g.qZA(),g._uU(4,"Users"),g.qZA(),g.TgZ(5,"h2")(6,"h1"),g._uU(7),g.qZA()()()),2&Ct){const Le=st.ngIf;g.xp6(7),g.hij(" ",Le.length," ")}}function Re(Ct,st){1&Ct&&(g.TgZ(0,"b",10),g._uU(1,"Last Active At"),g.qZA())}const Ge=function(Ct,st,Le){return{"text-success":Ct,"text-danger":st,"text-warning":Le}};function ve(Ct,st){if(1&Ct&&(g.TgZ(0,"tr")(1,"td",6),g._uU(2),g.qZA(),g.TgZ(3,"td",7)(4,"b"),g._uU(5),g.qZA()(),g.TgZ(6,"td",8),g.YNc(7,Re,2,0,"b",9),g._uU(8),g.ALo(9,"date"),g.qZA()()),2&Ct){const Le=st.$implicit;g.xp6(2),g.Oqu(Le.key),g.xp6(1),g.Q6J("ngClass",g.kEZ(7,Ge,"online"===Le.status,"offline"===Le.status,"away"===Le.status)),g.xp6(2),g.Oqu(Le.status),g.xp6(2),g.Q6J("ngIf","offline"===Le.status),g.xp6(1),g.Oqu(g.lcZ(9,5,Le.timestamp))}}function Be(Ct,st){if(1&Ct&&(g.TgZ(0,"table")(1,"caption"),g._uU(2,"Users Summary"),g.qZA(),g.TgZ(3,"thead",2)(4,"tr")(5,"th"),g._uU(6,"User Id"),g.qZA(),g.TgZ(7,"th"),g._uU(8,"Status"),g.qZA(),g.TgZ(9,"th"),g._uU(10,"Date"),g.qZA()()(),g.TgZ(11,"tbody"),g.YNc(12,ve,10,11,"tr",3),g.qZA()()),2&Ct){const Le=st.ngIf;g.xp6(12),g.Q6J("ngForOf",Le)}}function He(Ct,st){1&Ct&&g.GkF(0)}const xe=function(Ct){return{$implicit:Ct}};function dt(Ct,st){if(1&Ct&&(g.ynx(0),g.TgZ(1,"tr")(2,"td",11)(3,"strong"),g._uU(4),g.ALo(5,"uppercase"),g.qZA()()(),g.YNc(6,He,1,0,"ng-container",12),g.BQk()),2&Ct){const Le=st.$implicit;g.oxw();const it=g.MAs(35);g.xp6(4),g.Oqu(g.lcZ(5,3,Le.key)),g.xp6(2),g.Q6J("ngTemplateOutlet",it)("ngTemplateOutletContext",g.VKq(5,xe,Le))}}function mt(Ct,st){if(1&Ct&&(g.TgZ(0,"tr")(1,"td"),g._uU(2),g.qZA(),g.TgZ(3,"td",13)(4,"b"),g._uU(5),g.qZA()()()),2&Ct){const Le=g.oxw(2),it=Le.parent,$t=Le.$implicit;g.xp6(2),g.lnq(" ",it," ",it?"/":""," ",$t.key," "),g.xp6(3),g.Oqu($t.value.counter)}}function Ue(Ct,st){1&Ct&&g.GkF(0)}const Oe=function(Ct,st){return{$implicit:Ct,parent:st}};function yt(Ct,st){if(1&Ct&&(g.ynx(0),g.YNc(1,mt,6,4,"tr",1),g.YNc(2,Ue,1,0,"ng-container",12),g.BQk()),2&Ct){const Le=g.oxw(),it=Le.$implicit,$t=Le.parent;g.oxw();const on=g.MAs(37);g.xp6(1),g.Q6J("ngIf",it.value.counter),g.xp6(1),g.Q6J("ngTemplateOutlet",on)("ngTemplateOutletContext",g.WLB(3,Oe,it,$t?$t+" / "+it.key:it.key))}}function It(Ct,st){1&Ct&&g.YNc(0,yt,3,6,"ng-container",1),2&Ct&&g.Q6J("ngIf","counter"!==st.$implicit.key)}function Je(Ct,st){1&Ct&&g.GkF(0)}function Nt(Ct,st){if(1&Ct&&(g.ynx(0),g.YNc(1,Je,1,0,"ng-container",12),g.BQk()),2&Ct){const Le=st.$implicit,it=g.oxw().parent;g.oxw();const $t=g.MAs(35);g.xp6(1),g.Q6J("ngTemplateOutlet",$t)("ngTemplateOutletContext",g.WLB(2,Oe,Le,it))}}function wt(Ct,st){1&Ct&&(g.YNc(0,Nt,2,5,"ng-container",3),g.ALo(1,"keyvalue")),2&Ct&&g.Q6J("ngForOf",g.lcZ(1,1,st.$implicit.value))}class Qe{constructor(){this.db=(0,J.N8)()}create(st,Le={}){let it=(0,J.VF)((0,J.iH)(this.db,st));return(0,J.t8)(it,Object.assign({key:it.key},Le)).then(),Promise.resolve({key:it.key})}set(st,Le={}){return(0,I.mG)(this,void 0,void 0,function*(){const it=(0,J.iH)(this.db,st);yield(0,J.t8)(it,Le)})}update(st,Le={}){return(0,I.mG)(this,void 0,void 0,function*(){const it=(0,J.iH)(this.db,st);yield(0,J.Vx)(it,Le)})}remove(st){return(0,I.mG)(this,void 0,void 0,function*(){const Le=(0,J.iH)(this.db,st);yield(0,J.Od)(Le)})}readRealTime(st){return new B.y(Le=>{(0,J.jM)((0,J.iH)(this.db,st),it=>{let $t=[];it.exists()?(it.forEach(on=>{$t.push(Object.assign({key:on.key},on.val()))}),Le.next($t)):Le.next([])})})}readOnceWithObserver(st){return(0,J.jM)((0,J.iH)(this.db,st),Le=>Le.val(),{onlyOnce:!0})}readOnce(st){return new Promise((Le,it)=>{(0,J.U2)((0,J.iH)(this.db,st)).then($t=>{$t.exists()?Le(Object.assign({key:$t.key},$t.val())):Le([])}).catch($t=>{it($t)})})}readReal(st){return new B.y(Le=>{(0,J.jM)((0,J.iH)(this.db,st),it=>{it.exists()?Le.next(it.val()):Le.next(null)})})}updateCounter(st,Le=!0){return new Promise((it,$t)=>{const on=(0,J.iH)(this.db);(0,J.U2)((0,J.iU)(on,"counter")).then(Fn=>{(0,J.Vx)((0,J.iH)(this.db,st),{counter:(0,J.nP)(Le?1:-1)}).then(Fr=>{it(Fr)})})})}others(){}checkPresence(st){const Le=(0,J.iH)(this.db,`${st}/connections`),it=(0,J.iH)(this.db,`${st}/lastOnline`),$t=(0,J.iH)(this.db,".info/connected");(0,J.jM)($t,on=>{if(!0===on.val()){const Fn=(0,J.VF)(Le);(0,J.ae)(Fn).remove().then(),(0,J.t8)(Fn,!0).then(),(0,J.ae)(it).set((0,J.Bt)()).then()}})}onDisconnect(st){const Le=(0,J.iH)(this.db,st);return(0,J.ae)(Le)}detectingConnectionState(){return new B.y(st=>{const Le=(0,J.iH)(this.db,".info/connected");(0,J.jM)(Le,it=>{st.next(it.val())})})}}let Ye=(()=>{class Ct extends Qe{constructor(){super()}get timestamp(){return(new Date).getTime()}getPresence(Le){return this.readReal(`status/${Le}`)}getUserOnlineCounts(){return this.readRealTime("status").pipe((0,Y.U)(Le=>Le.reduce((it,$t)=>"online"===$t.status?++it:it,0)))}getTotalUserCounts(){return this.readRealTime("status").pipe((0,Y.U)(Le=>Le))}setPresence(Le,it){return this.set(`status/${Le}`,{status:it,timestamp:this.timestamp})}updateOnAway(Le){document.onvisibilitychange=it=>{"hidden"===document.visibilityState?this.setPresence(Le,"away"):this.setPresence(Le,"online")}}updateOnUser(Le){this.detectingConnectionState().pipe((0,Y.U)($t=>$t?"online":"offline")).subscribe($t=>this.setPresence(Le,$t))}updateOnDisconnect(Le){this.onDisconnect(`status/${Le}`).update({status:"offline",timestamp:this.timestamp})}configure(Le){this.updateOnAway(Le),this.updateOnUser(Le),this.updateOnDisconnect(Le)}configureUserPresenceByLocal(){let Le=localStorage.getItem("uid");this.checkingUser(Le)}configureUserPresenceByLogin(Le,it={}){this.checkingUser(Le,it)}checkingUser(Le,it={}){Le?this.configure(Le):this.create("status",Object.assign({uid:Le},it)).then($t=>{localStorage.setItem("uid",$t.key),this.configure($t.key)})}}return Ct.\u0275fac=function(Le){return new(Le||Ct)},Ct.\u0275prov=g.Yz7({token:Ct,factory:Ct.\u0275fac}),Ct})();const qe={provide:g.ip1,useFactory:function ut(Ct){return()=>new Promise((st,Le)=>(0,I.mG)(this,void 0,void 0,function*(){yield Ct.configureUserPresenceByLocal(),st("done")}))},deps:[Ye],multi:!0};let Rt=(()=>{class Ct extends Qe{constructor(Le){super(),this.presenceService=Le,this.flattenObject1=it=>{const $t={};return Object.keys(it).forEach(on=>{const Fn=it[on];"object"!=typeof Fn||null===Fn||Array.isArray(Fn)?$t[on]=Fn:Object.assign($t,this.flattenObject1(Fn))}),$t},this.flattenObject=it=>{let $t={};for(const on in it)if(it.hasOwnProperty(on))if("object"!=typeof it[on]||Array.isArray(it[on]))$t[on]=it[on];else{const Fn=this.flattenObject(it[on]);for(const Fr in Fn)$t[on+"_"+Fr]=Fn[Fr]}return $t}}ngOnInit(){this.readReal("server-activities").subscribe(Le=>{this.serverActivities=Le}),this.readReal("router-activities").subscribe(Le=>(0,I.mG)(this,void 0,void 0,function*(){this.routerActivities=Le})),this.counts$=this.presenceService.getUserOnlineCounts(),this.totalUsers$=this.presenceService.getTotalUserCounts()}d(Le){let it={};for(let $t in Le)if(Le.hasOwnProperty($t)){const on=typeof Le[$t];"string"===on?it[$t]=Le[$t]:"object"===on&&this.d(Le[$t])}}}return Ct.\u0275fac=function(Le){return new(Le||Ct)(g.Y36(Ye))},Ct.\u0275cmp=g.Xpm({type:Ct,selectors:[["fb-activities"]],features:[g.qOj],decls:38,vars:13,consts:[[1,"grid-even-columns"],[4,"ngIf"],[1,"sticky-top"],[4,"ngFor","ngForOf"],["rows",""],["inner",""],["data-label","id"],["data-label","status",3,"ngClass"],["data-label","date"],["class","mr-2",4,"ngIf"],[1,"mr-2"],["colspan","2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[2,"color","tomato"]],template:function(Le,it){1&Le&&(g.TgZ(0,"div",0)(1,"section")(2,"h2")(3,"span"),g._uU(4,"Online"),g.qZA(),g._uU(5,"Users"),g.qZA(),g.TgZ(6,"h2")(7,"h1"),g._uU(8),g.ALo(9,"async"),g.qZA()()(),g.YNc(10,ue,8,1,"section",1),g.ALo(11,"async"),g.TgZ(12,"section")(13,"h2")(14,"span"),g._uU(15,"Server"),g.qZA(),g._uU(16,"Requests"),g.qZA(),g.TgZ(17,"h2")(18,"h1"),g._uU(19),g.qZA()()()(),g.YNc(20,Be,13,1,"table",1),g.ALo(21,"async"),g.TgZ(22,"table")(23,"caption"),g._uU(24,"Modules Summary"),g.qZA(),g.TgZ(25,"thead",2)(26,"tr")(27,"th"),g._uU(28,"Modules"),g.qZA(),g.TgZ(29,"th"),g._uU(30,"Views"),g.qZA()()(),g.TgZ(31,"tbody"),g.YNc(32,dt,7,7,"ng-container",3),g.ALo(33,"keyvalue"),g.qZA()(),g.YNc(34,It,1,1,"ng-template",null,4,g.W1O),g.YNc(36,wt,2,3,"ng-template",null,5,g.W1O)),2&Le&&(g.xp6(8),g.hij(" ",g.lcZ(9,5,it.counts$)," "),g.xp6(2),g.Q6J("ngIf",g.lcZ(11,7,it.totalUsers$)),g.xp6(9),g.Oqu(null==it.serverActivities?null:it.serverActivities.counter),g.xp6(1),g.Q6J("ngIf",g.lcZ(21,9,it.totalUsers$)),g.xp6(12),g.Q6J("ngForOf",g.lcZ(33,11,it.routerActivities)))},dependencies:[re.mk,re.sg,re.O5,re.tP,re.Ov,re.gd,re.uU,re.Nd],styles:['*,*:before,*:after{box-sizing:border-box;margin-top:0}:host{display:block;background:#f5f5f5;color:#18314f;font-family:Crimson Text,serif;font-size:1.5rem;padding:1rem}section{background:white;box-shadow:0 0 20px #00000040;width:80%;margin:50px auto;padding:50px}h2{font-weight:400;text-transform:uppercase;font-size:1rem;margin-bottom:3em;letter-spacing:8px;text-align:center;color:tomato}h2:after{content:"";display:block;border-bottom:1px solid rgba(24,49,79,.25);width:20%;margin:3em auto 0}h2 span{font-size:2em;font-weight:700;display:block;color:#18314f}[class*=grid-]{display:grid;gap:1rem}.grid-even-columns{grid-template-columns:repeat(auto-fit,minmax(min(300px,100%),1fr))}@media (min-width: 50em){.grid-auto-flows{grid-auto-flow:column;grid-auto-columns:1fr}}.grid-stack{display:grid;place-items:center}.grid-stack>*{grid-column:1/2;grid-row:1/2}.grid-stack>img{aspect-ratio:16/9;object-fit:cover;z-index:-1}.overflow-y{height:300px;overflow-y:auto;overflow-x:hidden}table{border:1px solid #ccc;border-collapse:collapse;margin:0;padding:0;width:100%;table-layout:fixed;box-shadow:1px 2px 1px 2px #e6e5e5;position:relative}table caption{font-size:1.5em;margin:.5em 0 .75em}table tr{background-color:#f8f8f8;border:1px solid #ddd;padding:.35em}table th,table td{padding:.625em;text-align:center}table th{font-size:.85em;letter-spacing:.1em;text-transform:uppercase}.text-success{color:#006400}.text-danger{color:#8b0000}.text-warning{color:#ff0}.sticky-top{position:sticky;top:0}@media screen and (max-width: 600px){table{border:0}table caption{font-size:1.3em}table thead{border:none;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute!important;width:1px}table tr{border-bottom:3px solid #ddd;display:block;margin-bottom:.625em}table td{border-bottom:1px solid #ddd;display:block;font-size:.8em;text-align:right}table td:last-child{border-bottom:0}table td:before{content:attr(data-label);float:left;font-weight:700;text-transform:uppercase}}\n'],encapsulation:3}),Ct})(),Tt=(()=>{class Ct extends Qe{constructor(Le){super(),this.router=Le}config(){this.router.events.subscribe(Le=>{Le instanceof ee.m2&&(/[#$\[\]'?]/g.test(Le.url)||this.updateCounter(`router-activities${Le.url}`).then())})}}return Ct.\u0275fac=function(Le){return new(Le||Ct)(g.LFG(ee.F0))},Ct.\u0275prov=g.Yz7({token:Ct,factory:Ct.\u0275fac}),Ct})();const nr={provide:g.ip1,useFactory:Ct=>()=>Ct.config(),multi:!0,deps:[Tt]},St={provide:z.TP,useClass:(()=>{class Ct extends Qe{constructor(){super()}intercept(Le,it){return this.updateCounter("server-activities").then(),it.handle(Le)}}return Ct.\u0275fac=function(Le){return new(Le||Ct)},Ct.\u0275prov=g.Yz7({token:Ct,factory:Ct.\u0275fac}),Ct})(),multi:!0},vr=new g.OlP(null);function Cr(Ct){return()=>{const st=(0,oe.ZF)(Ct);(0,J.N8)(st),(0,Q.ad)(st),console.log(`no of Firebase app:: ${(0,oe.C6)().length}`)}}let hr=(()=>{class Ct{constructor(Le){this.config=Le}static initializeApp(Le){return{ngModule:Ct,providers:[{provide:vr,useFactory:Cr(Le)}]}}static initialize(Le){let it=[];return Le.activityInHttp&&it.push(St),Le.activityInRouter&&it.push(nr),Le.activityOfAnonymousUser&&it.push(qe),{ngModule:Ct,providers:it}}}return Ct.\u0275fac=function(Le){return new(Le||Ct)(g.LFG(vr))},Ct.\u0275mod=g.oAB({type:Ct}),Ct.\u0275inj=g.cJS({providers:[Tt,Ye],imports:[re.ez]}),Ct})();const ir="https://rktect-rest-default-rtdb.firebaseio.com/users.json",Ln="kpPiWBeAJJ3KlXNQ1tULjJcYLWZoLMwdEpDRzKSc";let Dn=(()=>{class Ct{constructor(Le){this.http=Le}getUsers(){return this.http.get(ir,{params:{auth:Ln}})}createUser(Le){return this.http.post(ir,Le,{params:{auth:Ln}})}}return Ct.\u0275fac=function(Le){return new(Le||Ct)(g.LFG(z.eN))},Ct.\u0275prov=g.Yz7({token:Ct,factory:Ct.\u0275fac,providedIn:"root"}),Ct})();class jr{constructor(){this.db=(0,Q.ad)(),this.auth=(0,le.v0)(),(0,Q.ST)(this.db).catch(st=>{"failed-precondition"==st.code?console.log("persistance failed"):"unimplemented"==st.code&&console.log("persistance not available")})}get colRef(){return(0,Q.hJ)(this.db,this.collectionPath)}getCollectionData(){return new Promise((st,Le)=>{(0,Q.PL)(this.colRef).then(it=>{let $t=this.setData2(it);st($t)}).catch(it=>{Le(it.message)})})}getSingleDoc(st){const Le=(0,Q.JU)(this.db,this.collectionPath,st);return new Promise((it,$t)=>(0,Q.QT)(Le).then(on=>{let Fn=this.transformSingleDoc(on);it(Fn)}).catch(on=>{$t(on.message)}))}getSingleDocFromCache(st){return(0,I.mG)(this,void 0,void 0,function*(){const Le=(0,Q.JU)(this.db,this.collectionPath,st);try{const it=yield(0,Q.kl)(Le);console.log("Cached document data:",it.data())}catch(it){console.log("Error getting cached document:",it)}})}getCollectionRealTime(st){return this.unsubscribe=(0,Q.cf)(this.colRef,Le=>{st(this.setData2(Le))})}getDocRealTime(st,Le){const it=(0,Q.JU)(this.db,this.collectionPath,st);return(0,Q.cf)(it,$t=>{Le(this.transformSingleDoc($t))})}g(){(0,Q.cf)(void 0,Le=>{Le.docChanges().forEach(it=>{"added"===it.type&&console.log("New city: ",it.doc.data()),"modified"===it.type&&console.log("Modified city: ",it.doc.data()),"removed"===it.type&&console.log("Removed city: ",it.doc.data())})})}addingDoc(st={}){return(0,Q.ET)(this.colRef,Object.assign({createdAt:(0,Q.Bt)(),updatedAt:(0,Q.Bt)()},st))}deletingDoc(st){const Le=(0,Q.JU)(this.db,this.collectionPath,st);return(0,Q.oe)(Le)}updatingDoc(st,Le){const it=(0,Q.JU)(this.db,this.collectionPath,st);return(0,Q.r7)(it,Object.assign({updatedAt:(0,Q.Bt)()},Le))}signUpWithEmailPass({email:st,password:Le}){return(0,le.Xb)(this.auth,st,Le).then(it=>Promise.resolve(it.user)).catch(it=>Promise.reject(it.message))}signInWithEmailPass({email:st,password:Le}){return(0,le.e5)(this.auth,st,Le).then(it=>Promise.resolve(it.user)).catch(it=>Promise.reject(it.message))}onSignOut(){return(0,le.w7)(this.auth).then(st=>Promise.resolve(st)).catch(st=>Promise.reject(st.message))}subscribingAuthChangedRealTime(st){return(0,le.Aj)(this.auth,Le=>{st(Le)})}getPaginationData1(st={latestDoc:null,empty:!1,data:[]},Le=5){return new Promise((it,$t)=>{const on=(0,Q.IO)(this.colRef,(0,Q.Xo)("createdAt"),(0,Q.TQ)(st.latestDoc||0),(0,Q.b9)(Le));(0,Q.PL)(on).then(Fn=>{let Fr=this.setData2(Fn);st.latestDoc=Fn.docs[Fn.docs.length-1],st.data=[...st.data,...Fr],st.empty=Fn.empty,it(st)}).catch(Fn=>{$t(Fn.message)})})}getPaginationData(st={latestDoc:null,empty:!1,data:[],size:0},Le=5){return(0,I.mG)(this,void 0,void 0,function*(){if(!st.empty)try{const it=(0,Q.IO)(this.colRef,(0,Q.Xo)("createdAt"),(0,Q.TQ)(st.latestDoc||0),(0,Q.b9)(Le)),$t=yield(0,Q.PL)(it);let on=this.setData2($t);return st.latestDoc=$t.docs[$t.docs.length-1],st.data=[...st.data,...on],st.empty=$t.empty,st.size=$t.size,st}catch(it){return it}})}unsubscribeRealTime(){this.unsubscribe()}nextPage(st={latestDoc:null,empty:!1,data:[],size:0},Le=5){return(0,I.mG)(this,void 0,void 0,function*(){const it=(0,Q.IO)(this.colRef,(0,Q.Xo)("createdAt"),(0,Q.TQ)(st.latestDoc||0),(0,Q.b9)(Le));return yield this.handlePagination(it)})}prePage(st={latestDoc:null,empty:!1,data:[],size:0},Le=5){return(0,I.mG)(this,void 0,void 0,function*(){const it=(0,Q.IO)(this.colRef,(0,Q.Xo)("createdAt"),(0,Q.Lx)(st.latestDoc||0),(0,Q.b9)(Le));return yield this.handlePagination(it,!1)})}setData(st){return st.docs.map(Le=>Object.assign({id:Le.id},Le.data()))}setData2(st){let Le=[];return st.docs.forEach(it=>{Le.push(Object.assign(Object.assign({},it.data()),{id:it.id}))}),Le}transformSingleDoc(st){return Object.assign(Object.assign({},st.data()),{id:st.id})}handlePagination(st,Le=!0){return(0,I.mG)(this,void 0,void 0,function*(){try{const it=yield(0,Q.PL)(st);let $t=this.setData2(it);return{latestDoc:Le?it.docs[it.docs.length-1]:it.docs[0],data:$t,empty:it.empty,size:it.size}}catch(it){return it}})}}},259:(_e,ne,D)=>{D.d(ne,{C6:()=>g.C6,ZF:()=>g.ZF});var g=D(6881);(0,g.KN)("firebase","9.17.1","app")},4716:(_e,ne,D)=>{D.d(ne,{hJ:()=>Ks,Xb:()=>rs,gK:()=>pr,v0:()=>ql,cx:()=>Rl,Aj:()=>Ii,e5:()=>Gr,rh:()=>Bs,w7:()=>Vi});var g=D(5861),I=D(2090),J=D(6881),B=D(1877),Y=D(655),re=D(4859);const ve=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Be=new I.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xe=new B.Yd("@firebase/auth");function dt(O,...l){xe.logLevel<=B.in.ERROR&&xe.error(`Auth (${J.Jn}): ${O}`,...l)}function mt(O,...l){throw It(O,...l)}function Ue(O,...l){return It(O,...l)}function Oe(O,l,a){const c=Object.assign(Object.assign({},ve()),{[l]:a});return new I.LL("auth","Firebase",c).create(l,{appName:O.name})}function yt(O,l,a){if(!(l instanceof a))throw a.name!==l.constructor.name&&mt(O,"argument-error"),Oe(O,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function It(O,...l){if("string"!=typeof O){const a=l[0],c=[...l.slice(1)];return c[0]&&(c[0].appName=O.name),O._errorFactory.create(a,...c)}return Be.create(O,...l)}function Je(O,l,...a){if(!O)throw It(l,...a)}function Nt(O){const l="INTERNAL ASSERTION FAILED: "+O;throw dt(l),new Error(l)}function wt(O,l){O||Nt(l)}const Qe=new Map;function Ye(O){wt(O instanceof Function,"Expected a class definition");let l=Qe.get(O);return l?(wt(l instanceof O,"Instance stored in cache mismatched with class"),l):(l=new O,Qe.set(O,l),l)}function Rt(){var O;return"undefined"!=typeof self&&(null===(O=self.location)||void 0===O?void 0:O.href)||""}function hn(){var O;return"undefined"!=typeof self&&(null===(O=self.location)||void 0===O?void 0:O.protocol)||null}class St{constructor(l,a){this.shortDelay=l,this.longDelay=a,wt(a>l,"Short delay should be less than long delay!"),this.isMobile=(0,I.uI)()||(0,I.b$)()}get(){return function nr(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Tt(){return"http:"===hn()||"https:"===hn()}()||(0,I.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vr(O,l){wt(O.emulator,"Emulator should always be set here");const{url:a}=O.emulator;return l?`${a}${l.startsWith("/")?l.slice(1):l}`:a}class Cr{static initialize(l,a,c){this.fetchImpl=l,a&&(this.headersImpl=a),c&&(this.responseImpl=c)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Nt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Nt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Nt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const hr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ir=new St(3e4,6e4);function Ln(O,l){return O.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:O.tenantId}):l}function Dn(O,l,a,c){return jr.apply(this,arguments)}function jr(){return(jr=(0,g.Z)(function*(O,l,a,c,E={}){return Ct(O,E,(0,g.Z)(function*(){let S={},H={};c&&("GET"===l?H=c:S={body:JSON.stringify(c)});const ie=(0,I.xO)(Object.assign({key:O.config.apiKey},H)).slice(1),fe=yield O._getAdditionalHeaders();return fe["Content-Type"]="application/json",O.languageCode&&(fe["X-Firebase-Locale"]=O.languageCode),Cr.fetch()($t(O,O.config.apiHost,a,ie),Object.assign({method:l,headers:fe,referrerPolicy:"no-referrer"},S))}))})).apply(this,arguments)}function Ct(O,l,a){return st.apply(this,arguments)}function st(){return(st=(0,g.Z)(function*(O,l,a){O._canInitEmulator=!1;const c=Object.assign(Object.assign({},hr),l);try{const E=new on(O),S=yield Promise.race([a(),E.promise]);E.clearNetworkTimeout();const H=yield S.json();if("needConfirmation"in H)throw Fn(O,"account-exists-with-different-credential",H);if(S.ok&&!("errorMessage"in H))return H;{const ie=S.ok?H.errorMessage:H.error.message,[fe,Me]=ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===fe)throw Fn(O,"credential-already-in-use",H);if("EMAIL_EXISTS"===fe)throw Fn(O,"email-already-in-use",H);if("USER_DISABLED"===fe)throw Fn(O,"user-disabled",H);const ze=c[fe]||fe.toLowerCase().replace(/[_\s]+/g,"-");if(Me)throw Oe(O,ze,Me);mt(O,ze)}}catch(E){if(E instanceof I.ZR)throw E;mt(O,"network-request-failed")}})).apply(this,arguments)}function Le(O,l,a,c){return it.apply(this,arguments)}function it(){return(it=(0,g.Z)(function*(O,l,a,c,E={}){const S=yield Dn(O,l,a,c,E);return"mfaPendingCredential"in S&&mt(O,"multi-factor-auth-required",{_serverResponse:S}),S})).apply(this,arguments)}function $t(O,l,a,c){const E=`${l}${a}?${c}`;return O.config.emulator?vr(O.config,E):`${O.config.apiScheme}://${E}`}class on{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((a,c)=>{this.timer=setTimeout(()=>c(Ue(this.auth,"network-request-failed")),ir.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fn(O,l,a){const c={appName:O.name};a.email&&(c.email=a.email),a.phoneNumber&&(c.phoneNumber=a.phoneNumber);const E=Ue(O,l,c);return E.customData._tokenResponse=a,E}function Li(){return(Li=(0,g.Z)(function*(O,l){return Dn(O,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function cs(O,l){return gr.apply(this,arguments)}function gr(){return(gr=(0,g.Z)(function*(O,l){return Dn(O,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function Ei(O){if(O)try{const l=new Date(Number(O));if(!isNaN(l.getTime()))return l.toUTCString()}catch(l){}}function je(){return(je=(0,g.Z)(function*(O,l=!1){const a=(0,I.m9)(O),c=yield a.getIdToken(l),E=ye(c);Je(E&&E.exp&&E.auth_time&&E.iat,a.auth,"internal-error");const S="object"==typeof E.firebase?E.firebase:void 0,H=null==S?void 0:S.sign_in_provider;return{claims:E,token:c,authTime:Ei(Te(E.auth_time)),issuedAtTime:Ei(Te(E.iat)),expirationTime:Ei(Te(E.exp)),signInProvider:H||null,signInSecondFactor:(null==S?void 0:S.sign_in_second_factor)||null}})).apply(this,arguments)}function Te(O){return 1e3*Number(O)}function ye(O){const[l,a,c]=O.split(".");if(void 0===l||void 0===a||void 0===c)return dt("JWT malformed, contained fewer than 3 sections"),null;try{const E=(0,I.tV)(a);return E?JSON.parse(E):(dt("Failed to decode base64 JWT payload"),null)}catch(E){return dt("Caught error parsing JWT payload as JSON",null==E?void 0:E.toString()),null}}function ht(O,l){return an.apply(this,arguments)}function an(){return(an=(0,g.Z)(function*(O,l,a=!1){if(a)return l;try{return yield l}catch(c){throw c instanceof I.ZR&&dn(c)&&O.auth.currentUser===O&&(yield O.auth.signOut()),c}})).apply(this,arguments)}function dn({code:O}){return"auth/user-disabled"===O||"auth/user-token-expired"===O}class er{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var a;if(l){const c=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),c}{this.errorBackoff=3e4;const E=(null!==(a=this.user.stsTokenManager.expirationTime)&&void 0!==a?a:0)-Date.now()-3e5;return Math.max(0,E)}}schedule(l=!1){var a=this;if(!this.isRunning)return;const c=this.getInterval(l);this.timerId=setTimeout((0,g.Z)(function*(){yield a.iteration()}),c)}iteration(){var l=this;return(0,g.Z)(function*(){try{yield l.user.getIdToken(!0)}catch(a){return void("auth/network-request-failed"===(null==a?void 0:a.code)&&l.schedule(!0))}l.schedule()})()}}class Lt{constructor(l,a){this.createdAt=l,this.lastLoginAt=a,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ei(this.lastLoginAt),this.creationTime=Ei(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nn(O){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,g.Z)(function*(O){var l;const a=O.auth,c=yield O.getIdToken(),E=yield ht(O,cs(a,{idToken:c}));Je(null==E?void 0:E.users.length,a,"internal-error");const S=E.users[0];O._notifyReloadListener(S);const H=null!==(l=S.providerUserInfo)&&void 0!==l&&l.length?Kn(S.providerUserInfo):[],ie=fn(O.providerData,H),ze=!!O.isAnonymous&&!(O.email&&S.passwordHash||null!=ie&&ie.length),Et={uid:S.localId,displayName:S.displayName||null,photoURL:S.photoUrl||null,email:S.email||null,emailVerified:S.emailVerified||!1,phoneNumber:S.phoneNumber||null,tenantId:S.tenantId||null,providerData:ie,metadata:new Lt(S.createdAt,S.lastLoginAt),isAnonymous:ze};Object.assign(O,Et)})).apply(this,arguments)}function On(){return(On=(0,g.Z)(function*(O){const l=(0,I.m9)(O);yield Nn(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function fn(O,l){return[...O.filter(c=>!l.some(E=>E.providerId===c.providerId)),...l]}function Kn(O){return O.map(l=>{var{providerId:a}=l,c=(0,Y._T)(l,["providerId"]);return{providerId:a,uid:c.rawId||"",displayName:c.displayName||null,email:c.email||null,phoneNumber:c.phoneNumber||null,photoURL:c.photoUrl||null}})}function Rr(){return(Rr=(0,g.Z)(function*(O,l){const a=yield Ct(O,{},(0,g.Z)(function*(){const c=(0,I.xO)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:E,apiKey:S}=O.config,H=$t(O,E,"/v1/token",`key=${S}`),ie=yield O._getAdditionalHeaders();return ie["Content-Type"]="application/x-www-form-urlencoded",Cr.fetch()(H,{method:"POST",headers:ie,body:c})}));return{accessToken:a.access_token,expiresIn:a.expires_in,refreshToken:a.refresh_token}})).apply(this,arguments)}class Pn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){Je(l.idToken,"internal-error"),Je(void 0!==l.idToken,"internal-error"),Je(void 0!==l.refreshToken,"internal-error");const a="expiresIn"in l&&void 0!==l.expiresIn?Number(l.expiresIn):function Xe(O){const l=ye(O);return Je(l,"internal-error"),Je(void 0!==l.exp,"internal-error"),Je(void 0!==l.iat,"internal-error"),Number(l.exp)-Number(l.iat)}(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,a)}getToken(l,a=!1){var c=this;return(0,g.Z)(function*(){return Je(!c.accessToken||c.refreshToken,l,"user-token-expired"),a||!c.accessToken||c.isExpired?c.refreshToken?(yield c.refresh(l,c.refreshToken),c.accessToken):null:c.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,a){var c=this;return(0,g.Z)(function*(){const{accessToken:E,refreshToken:S,expiresIn:H}=yield function Yr(O,l){return Rr.apply(this,arguments)}(l,a);c.updateTokensAndExpiration(E,S,Number(H))})()}updateTokensAndExpiration(l,a,c){this.refreshToken=a||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*c}static fromJSON(l,a){const{refreshToken:c,accessToken:E,expirationTime:S}=a,H=new Pn;return c&&(Je("string"==typeof c,"internal-error",{appName:l}),H.refreshToken=c),E&&(Je("string"==typeof E,"internal-error",{appName:l}),H.accessToken=E),S&&(Je("number"==typeof S,"internal-error",{appName:l}),H.expirationTime=S),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new Pn,this.toJSON())}_performRefresh(){return Nt("not implemented")}}function lr(O,l){Je("string"==typeof O||void 0===O,"internal-error",{appName:l})}class hi{constructor(l){var{uid:a,auth:c,stsTokenManager:E}=l,S=(0,Y._T)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new er(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=a,this.auth=c,this.stsTokenManager=E,this.accessToken=E.accessToken,this.displayName=S.displayName||null,this.email=S.email||null,this.emailVerified=S.emailVerified||!1,this.phoneNumber=S.phoneNumber||null,this.photoURL=S.photoURL||null,this.isAnonymous=S.isAnonymous||!1,this.tenantId=S.tenantId||null,this.providerData=S.providerData?[...S.providerData]:[],this.metadata=new Lt(S.createdAt||void 0,S.lastLoginAt||void 0)}getIdToken(l){var a=this;return(0,g.Z)(function*(){const c=yield ht(a,a.stsTokenManager.getToken(a.auth,l));return Je(c,a.auth,"internal-error"),a.accessToken!==c&&(a.accessToken=c,yield a.auth._persistUserIfCurrent(a),a.auth._notifyListenersIfCurrent(a)),c})()}getIdTokenResult(l){return function Pr(O){return je.apply(this,arguments)}(this,l)}reload(){return function zr(O){return On.apply(this,arguments)}(this)}_assign(l){this!==l&&(Je(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(a=>Object.assign({},a)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){return new hi(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(l){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,a=!1){var c=this;return(0,g.Z)(function*(){let E=!1;l.idToken&&l.idToken!==c.stsTokenManager.accessToken&&(c.stsTokenManager.updateFromServerResponse(l),E=!0),a&&(yield Nn(c)),yield c.auth._persistUserIfCurrent(c),E&&c.auth._notifyListenersIfCurrent(c)})()}delete(){var l=this;return(0,g.Z)(function*(){const a=yield l.getIdToken();return yield ht(l,function Fr(O,l){return Li.apply(this,arguments)}(l.auth,{idToken:a})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,a){var c,E,S,H,ie,fe,Me,ze;const Et=null!==(c=a.displayName)&&void 0!==c?c:void 0,Yt=null!==(E=a.email)&&void 0!==E?E:void 0,vn=null!==(S=a.phoneNumber)&&void 0!==S?S:void 0,Mn=null!==(H=a.photoURL)&&void 0!==H?H:void 0,cn=null!==(ie=a.tenantId)&&void 0!==ie?ie:void 0,mn=null!==(fe=a._redirectEventId)&&void 0!==fe?fe:void 0,Ir=null!==(Me=a.createdAt)&&void 0!==Me?Me:void 0,Gn=null!==(ze=a.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:jn,emailVerified:_i,isAnonymous:di,providerData:xs,stsTokenManager:Ta}=a;Je(jn&&Ta,l,"internal-error");const Br=Pn.fromJSON(this.name,Ta);Je("string"==typeof jn,l,"internal-error"),lr(Et,l.name),lr(Yt,l.name),Je("boolean"==typeof _i,l,"internal-error"),Je("boolean"==typeof di,l,"internal-error"),lr(vn,l.name),lr(Mn,l.name),lr(cn,l.name),lr(mn,l.name),lr(Ir,l.name),lr(Gn,l.name);const kr=new hi({uid:jn,auth:l,email:Yt,emailVerified:_i,displayName:Et,isAnonymous:di,photoURL:Mn,phoneNumber:vn,tenantId:cn,stsTokenManager:Br,createdAt:Ir,lastLoginAt:Gn});return xs&&Array.isArray(xs)&&(kr.providerData=xs.map(za=>Object.assign({},za))),mn&&(kr._redirectEventId=mn),kr}static _fromIdTokenResponse(l,a,c=!1){return(0,g.Z)(function*(){const E=new Pn;E.updateFromServerResponse(a);const S=new hi({uid:a.localId,auth:l,stsTokenManager:E,isAnonymous:c});return yield Nn(S),S})()}}const Ae=(()=>{class O{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(a,c){var E=this;return(0,g.Z)(function*(){E.storage[a]=c})()}_get(a){var c=this;return(0,g.Z)(function*(){const E=c.storage[a];return void 0===E?null:E})()}_remove(a){var c=this;return(0,g.Z)(function*(){delete c.storage[a]})()}_addListener(a,c){}_removeListener(a,c){}}return O.type="NONE",O})();function Ie(O,l,a){return`firebase:${O}:${l}:${a}`}class Fe{constructor(l,a,c){this.persistence=l,this.auth=a,this.userKey=c;const{config:E,name:S}=this.auth;this.fullUserKey=Ie(this.userKey,E.apiKey,S),this.fullPersistenceKey=Ie("persistence",E.apiKey,S),this.boundEventHandler=a._onStorageEvent.bind(a),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,g.Z)(function*(){const a=yield l.persistence._get(l.fullUserKey);return a?hi._fromJSON(l.auth,a):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var a=this;return(0,g.Z)(function*(){if(a.persistence===l)return;const c=yield a.getCurrentUser();return yield a.removeCurrentUser(),a.persistence=l,c?a.setCurrentUser(c):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,a,c="authUser"){return(0,g.Z)(function*(){if(!a.length)return new Fe(Ye(Ae),l,c);const E=(yield Promise.all(a.map(function(){var Me=(0,g.Z)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return Me.apply(this,arguments)}}()))).filter(Me=>Me);let S=E[0]||Ye(Ae);const H=Ie(c,l.config.apiKey,l.name);let ie=null;for(const Me of a)try{const ze=yield Me._get(H);if(ze){const Et=hi._fromJSON(l,ze);Me!==S&&(ie=Et),S=Me;break}}catch(ze){}const fe=E.filter(Me=>Me._shouldAllowMigration);return S._shouldAllowMigration&&fe.length?(S=fe[0],ie&&(yield S._set(H,ie.toJSON())),yield Promise.all(a.map(function(){var Me=(0,g.Z)(function*(ze){if(ze!==S)try{yield ze._remove(H)}catch(Et){}});return function(ze){return Me.apply(this,arguments)}}())),new Fe(S,l,c)):new Fe(S,l,c)})()}}function vt(O){const l=O.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(qn(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(We(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(Er(l))return"Blackberry";if($e(l))return"Webos";if(Gt(l))return"Safari";if((l.includes("chrome/")||Xt(l))&&!l.includes("edge/"))return"Chrome";if(tr(l))return"Android";{const c=O.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==c?void 0:c.length))return c[1]}return"Other"}function We(O=(0,I.z$)()){return/firefox\//i.test(O)}function Gt(O=(0,I.z$)()){const l=O.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function Xt(O=(0,I.z$)()){return/crios\//i.test(O)}function qn(O=(0,I.z$)()){return/iemobile/i.test(O)}function tr(O=(0,I.z$)()){return/android/i.test(O)}function Er(O=(0,I.z$)()){return/blackberry/i.test(O)}function $e(O=(0,I.z$)()){return/webos/i.test(O)}function Ce(O=(0,I.z$)()){return/iphone|ipad|ipod/i.test(O)||/macintosh/i.test(O)&&/mobile/i.test(O)}function tn(O=(0,I.z$)()){return Ce(O)||tr(O)||$e(O)||Er(O)||/windows phone/i.test(O)||qn(O)}function Se(O,l=[]){let a;switch(O){case"Browser":a=vt((0,I.z$)());break;case"Worker":a=`${vt((0,I.z$)())}-${O}`;break;default:a=O}const c=l.length?l.join(","):"FirebaseCore-web";return`${a}/JsCore/${J.Jn}/${c}`}class Pe{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,a){const c=S=>new Promise((H,ie)=>{try{H(l(S))}catch(fe){ie(fe)}});c.onAbort=a,this.queue.push(c);const E=this.queue.length-1;return()=>{this.queue[E]=()=>Promise.resolve()}}runMiddleware(l){var a=this;return(0,g.Z)(function*(){if(a.auth.currentUser===l)return;const c=[];try{for(const E of a.queue)yield E(l),E.onAbort&&c.push(E.onAbort)}catch(E){c.reverse();for(const S of c)try{S()}catch(H){}throw a.auth._errorFactory.create("login-blocked",{originalMessage:null==E?void 0:E.message})}})()}}class gt{constructor(l,a,c){this.app=l,this.heartbeatServiceProvider=a,this.config=c,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _n(this),this.idTokenSubscription=new _n(this),this.beforeStateQueue=new Pe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Be,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=c.sdkClientVersion}_initializeWithPersistence(l,a){var c=this;return a&&(this._popupRedirectResolver=Ye(a)),this._initializationPromise=this.queue((0,g.Z)(function*(){var E,S;if(!c._deleted&&(c.persistenceManager=yield Fe.create(c,l),!c._deleted)){if(null!==(E=c._popupRedirectResolver)&&void 0!==E&&E._shouldInitProactively)try{yield c._popupRedirectResolver._initialize(c)}catch(H){}yield c.initializeCurrentUser(a),c.lastNotifiedUid=(null===(S=c.currentUser)||void 0===S?void 0:S.uid)||null,!c._deleted&&(c._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,g.Z)(function*(){if(l._deleted)return;const a=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||a){if(l.currentUser&&a&&l.currentUser.uid===a.uid)return l._currentUser._assign(a),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(a,!0)}})()}initializeCurrentUser(l){var a=this;return(0,g.Z)(function*(){var c;const E=yield a.assertedPersistence.getCurrentUser();let S=E,H=!1;if(l&&a.config.authDomain){yield a.getOrInitRedirectPersistenceManager();const ie=null===(c=a.redirectUser)||void 0===c?void 0:c._redirectEventId,fe=null==S?void 0:S._redirectEventId,Me=yield a.tryRedirectSignIn(l);(!ie||ie===fe)&&(null==Me?void 0:Me.user)&&(S=Me.user,H=!0)}if(!S)return a.directlySetCurrentUser(null);if(!S._redirectEventId){if(H)try{yield a.beforeStateQueue.runMiddleware(S)}catch(ie){S=E,a._popupRedirectResolver._overrideRedirectResult(a,()=>Promise.reject(ie))}return S?a.reloadAndSetCurrentUserOrClear(S):a.directlySetCurrentUser(null)}return Je(a._popupRedirectResolver,a,"argument-error"),yield a.getOrInitRedirectPersistenceManager(),a.redirectUser&&a.redirectUser._redirectEventId===S._redirectEventId?a.directlySetCurrentUser(S):a.reloadAndSetCurrentUserOrClear(S)})()}tryRedirectSignIn(l){var a=this;return(0,g.Z)(function*(){let c=null;try{c=yield a._popupRedirectResolver._completeRedirectFn(a,l,!0)}catch(E){yield a._setRedirectUser(null)}return c})()}reloadAndSetCurrentUserOrClear(l){var a=this;return(0,g.Z)(function*(){try{yield Nn(l)}catch(c){if("auth/network-request-failed"!==(null==c?void 0:c.code))return a.directlySetCurrentUser(null)}return a.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function qt(){if("undefined"==typeof navigator)return null;const O=navigator;return O.languages&&O.languages[0]||O.language||null}()}_delete(){var l=this;return(0,g.Z)(function*(){l._deleted=!0})()}updateCurrentUser(l){var a=this;return(0,g.Z)(function*(){const c=l?(0,I.m9)(l):null;return c&&Je(c.auth.config.apiKey===a.config.apiKey,a,"invalid-user-token"),a._updateCurrentUser(c&&c._clone(a))})()}_updateCurrentUser(l,a=!1){var c=this;return(0,g.Z)(function*(){if(!c._deleted)return l&&Je(c.tenantId===l.tenantId,c,"tenant-id-mismatch"),a||(yield c.beforeStateQueue.runMiddleware(l)),c.queue((0,g.Z)(function*(){yield c.directlySetCurrentUser(l),c.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,g.Z)(function*(){return yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0)})()}setPersistence(l){var a=this;return this.queue((0,g.Z)(function*(){yield a.assertedPersistence.setPersistence(Ye(l))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new I.LL("auth","Firebase",l())}onAuthStateChanged(l,a,c){return this.registerStateListener(this.authStateSubscription,l,a,c)}beforeAuthStateChanged(l,a){return this.beforeStateQueue.pushCallback(l,a)}onIdTokenChanged(l,a,c){return this.registerStateListener(this.idTokenSubscription,l,a,c)}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,a){var c=this;return(0,g.Z)(function*(){const E=yield c.getOrInitRedirectPersistenceManager(a);return null===l?E.removeCurrentUser():E.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var a=this;return(0,g.Z)(function*(){if(!a.redirectPersistenceManager){const c=l&&Ye(l)||a._popupRedirectResolver;Je(c,a,"argument-error"),a.redirectPersistenceManager=yield Fe.create(a,[Ye(c._redirectPersistence)],"redirectUser"),a.redirectUser=yield a.redirectPersistenceManager.getCurrentUser()}return a.redirectPersistenceManager})()}_redirectUserForId(l){var a=this;return(0,g.Z)(function*(){var c,E;return a._isInitialized&&(yield a.queue((0,g.Z)(function*(){}))),(null===(c=a._currentUser)||void 0===c?void 0:c._redirectEventId)===l?a._currentUser:(null===(E=a.redirectUser)||void 0===E?void 0:E._redirectEventId)===l?a.redirectUser:null})()}_persistUserIfCurrent(l){var a=this;return(0,g.Z)(function*(){if(l===a.currentUser)return a.queue((0,g.Z)(function*(){return a.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,a;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const c=null!==(a=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==a?a:null;this.lastNotifiedUid!==c&&(this.lastNotifiedUid=c,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,a,c,E){if(this._deleted)return()=>{};const S="function"==typeof a?a:a.next.bind(a),H=this._isInitialized?Promise.resolve():this._initializationPromise;return Je(H,this,"internal-error"),H.then(()=>S(this.currentUser)),"function"==typeof a?l.addObserver(a,c,E):l.addObserver(a)}directlySetCurrentUser(l){var a=this;return(0,g.Z)(function*(){a.currentUser&&a.currentUser!==l&&a._currentUser._stopProactiveRefresh(),l&&a.isProactiveRefreshEnabled&&l._startProactiveRefresh(),a.currentUser=l,l?yield a.assertedPersistence.setCurrentUser(l):yield a.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=Se(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,g.Z)(function*(){var a;const c={"X-Client-Version":l.clientVersion};l.app.options.appId&&(c["X-Firebase-gmpid"]=l.app.options.appId);const E=yield null===(a=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===a?void 0:a.getHeartbeatsHeader();return E&&(c["X-Firebase-Client"]=E),c})()}}function Ut(O){return(0,I.m9)(O)}class _n{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,I.ne)(a=>this.observer=a)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vn(O){const l=O.indexOf(":");return l<0?"":O.substr(0,l+1)}function Qr(O){if(!O)return null;const l=Number(O);return isNaN(l)?null:l}class In{constructor(l,a){this.providerId=l,this.signInMethod=a}toJSON(){return Nt("not implemented")}_getIdTokenResponse(l){return Nt("not implemented")}_linkToIdToken(l,a){return Nt("not implemented")}_getReauthenticationResolver(l){return Nt("not implemented")}}function ai(){return(ai=(0,g.Z)(function*(O,l){return Dn(O,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function Tn(){return(Tn=(0,g.Z)(function*(O,l){return Le(O,"POST","/v1/accounts:signInWithPassword",Ln(O,l))})).apply(this,arguments)}function De(){return(De=(0,g.Z)(function*(O,l){return Le(O,"POST","/v1/accounts:signInWithEmailLink",Ln(O,l))})).apply(this,arguments)}function Ke(){return(Ke=(0,g.Z)(function*(O,l){return Le(O,"POST","/v1/accounts:signInWithEmailLink",Ln(O,l))})).apply(this,arguments)}class pt extends In{constructor(l,a,c,E=null){super("password",c),this._email=l,this._password=a,this._tenantId=E}static _fromEmailAndPassword(l,a){return new pt(l,a,"password")}static _fromEmailAndCode(l,a,c=null){return new pt(l,a,"emailLink",c)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const a="string"==typeof l?JSON.parse(l):l;if((null==a?void 0:a.email)&&(null==a?void 0:a.password)){if("password"===a.signInMethod)return this._fromEmailAndPassword(a.email,a.password);if("emailLink"===a.signInMethod)return this._fromEmailAndCode(a.email,a.password,a.tenantId)}return null}_getIdTokenResponse(l){var a=this;return(0,g.Z)(function*(){switch(a.signInMethod){case"password":return function Rn(O,l){return Tn.apply(this,arguments)}(l,{returnSecureToken:!0,email:a._email,password:a._password});case"emailLink":return function Fi(O,l){return De.apply(this,arguments)}(l,{email:a._email,oobCode:a._password});default:mt(l,"internal-error")}})()}_linkToIdToken(l,a){var c=this;return(0,g.Z)(function*(){switch(c.signInMethod){case"password":return function Di(O,l){return ai.apply(this,arguments)}(l,{idToken:a,returnSecureToken:!0,email:c._email,password:c._password});case"emailLink":return function tt(O,l){return Ke.apply(this,arguments)}(l,{idToken:a,email:c._email,oobCode:c._password});default:mt(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function Wt(O,l){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,g.Z)(function*(O,l){return Le(O,"POST","/v1/accounts:signInWithIdp",Ln(O,l))})).apply(this,arguments)}class Ar extends In{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const a=new Ar(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(a.idToken=l.idToken),l.accessToken&&(a.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(a.nonce=l.nonce),l.pendingToken&&(a.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(a.accessToken=l.oauthToken,a.secret=l.oauthTokenSecret):mt("argument-error"),a}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const a="string"==typeof l?JSON.parse(l):l,{providerId:c,signInMethod:E}=a,S=(0,Y._T)(a,["providerId","signInMethod"]);if(!c||!E)return null;const H=new Ar(c,E);return H.idToken=S.idToken||void 0,H.accessToken=S.accessToken||void 0,H.secret=S.secret,H.nonce=S.nonce,H.pendingToken=S.pendingToken||null,H}_getIdTokenResponse(l){return Wt(l,this.buildRequest())}_linkToIdToken(l,a){const c=this.buildRequest();return c.idToken=a,Wt(l,c)}_getReauthenticationResolver(l){const a=this.buildRequest();return a.autoCreate=!1,Wt(l,a)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const a={};this.idToken&&(a.id_token=this.idToken),this.accessToken&&(a.access_token=this.accessToken),this.secret&&(a.oauth_token_secret=this.secret),a.providerId=this.providerId,this.nonce&&!this.pendingToken&&(a.nonce=this.nonce),l.postBody=(0,I.xO)(a)}return l}}class pi{constructor(l){var a,c,E,S,H,ie;const fe=(0,I.zd)((0,I.pd)(l)),Me=null!==(a=fe.apiKey)&&void 0!==a?a:null,ze=null!==(c=fe.oobCode)&&void 0!==c?c:null,Et=function mo(O){switch(O){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(E=fe.mode)&&void 0!==E?E:null);Je(Me&&ze&&Et,"argument-error"),this.apiKey=Me,this.operation=Et,this.code=ze,this.continueUrl=null!==(S=fe.continueUrl)&&void 0!==S?S:null,this.languageCode=null!==(H=fe.languageCode)&&void 0!==H?H:null,this.tenantId=null!==(ie=fe.tenantId)&&void 0!==ie?ie:null}static parseLink(l){const a=function Zi(O){const l=(0,I.zd)((0,I.pd)(O)).link,a=l?(0,I.zd)((0,I.pd)(l)).deep_link_id:null,c=(0,I.zd)((0,I.pd)(O)).deep_link_id;return(c?(0,I.zd)((0,I.pd)(c)).link:null)||c||a||l||O}(l);try{return new pi(a)}catch(c){return null}}}let gi=(()=>{class O{constructor(){this.providerId=O.PROVIDER_ID}static credential(a,c){return pt._fromEmailAndPassword(a,c)}static credentialWithLink(a,c){const E=pi.parseLink(c);return Je(E,"argument-error"),pt._fromEmailAndCode(a,E.code,E.tenantId)}}return O.PROVIDER_ID="password",O.EMAIL_PASSWORD_SIGN_IN_METHOD="password",O.EMAIL_LINK_SIGN_IN_METHOD="emailLink",O})();class ki{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Jn extends ki{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}let Ks=(()=>{class O extends Jn{constructor(){super("google.com"),this.addScope("profile")}static credential(a,c){return Ar._fromParams({providerId:O.PROVIDER_ID,signInMethod:O.GOOGLE_SIGN_IN_METHOD,idToken:a,accessToken:c})}static credentialFromResult(a){return O.credentialFromTaggedObject(a)}static credentialFromError(a){return O.credentialFromTaggedObject(a.customData||{})}static credentialFromTaggedObject({_tokenResponse:a}){if(!a)return null;const{oauthIdToken:c,oauthAccessToken:E}=a;if(!c&&!E)return null;try{return O.credential(c,E)}catch(S){return null}}}return O.GOOGLE_SIGN_IN_METHOD="google.com",O.PROVIDER_ID="google.com",O})();function li(O,l){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,g.Z)(function*(O,l){return Le(O,"POST","/v1/accounts:signUp",Ln(O,l))})).apply(this,arguments)}class ts{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,a,c,E=!1){return(0,g.Z)(function*(){const S=yield hi._fromIdTokenResponse(l,c,E),H=zo(c);return new ts({user:S,providerId:H,_tokenResponse:c,operationType:a})})()}static _forOperation(l,a,c){return(0,g.Z)(function*(){yield l._updateTokensIfNecessary(c,!0);const E=zo(c);return new ts({user:l,providerId:E,_tokenResponse:c,operationType:a})})()}}function zo(O){return O.providerId?O.providerId:"phoneNumber"in O?"phone":null}class Zr extends I.ZR{constructor(l,a,c,E){var S;super(a.code,a.message),this.operationType=c,this.user=E,Object.setPrototypeOf(this,Zr.prototype),this.customData={appName:l.name,tenantId:null!==(S=l.tenantId)&&void 0!==S?S:void 0,_serverResponse:a.customData._serverResponse,operationType:c}}static _fromErrorAndOperation(l,a,c,E){return new Zr(l,a,c,E)}}function No(O,l,a,c){return("reauthenticate"===l?a._getReauthenticationResolver(O):a._getIdTokenResponse(O)).catch(S=>{throw"auth/multi-factor-auth-required"===S.code?Zr._fromErrorAndOperation(O,S,l,c):S})}function fs(O,l){return pn.apply(this,arguments)}function pn(){return(pn=(0,g.Z)(function*(O,l,a=!1){const c=yield ht(O,l._linkToIdToken(O.auth,yield O.getIdToken()),a);return ts._forOperation(O,"link",c)})).apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(function*(O,l,a=!1){const{auth:c}=O,E="reauthenticate";try{const S=yield ht(O,No(c,E,l,O),a);Je(S.idToken,c,"internal-error");const H=ye(S.idToken);Je(H,c,"internal-error");const{sub:ie}=H;return Je(O.uid===ie,c,"user-mismatch"),ts._forOperation(O,E,S)}catch(S){throw"auth/user-not-found"===(null==S?void 0:S.code)&&mt(c,"user-mismatch"),S}})).apply(this,arguments)}function pa(O,l){return ns.apply(this,arguments)}function ns(){return(ns=(0,g.Z)(function*(O,l,a=!1){const c="signIn",E=yield No(O,c,l),S=yield ts._fromIdTokenResponse(O,c,E);return a||(yield O._updateCurrentUser(S.user)),S})).apply(this,arguments)}function Ms(){return(Ms=(0,g.Z)(function*(O,l){return pa(Ut(O),l)})).apply(this,arguments)}function rs(O,l,a){return Is.apply(this,arguments)}function Is(){return(Is=(0,g.Z)(function*(O,l,a){const c=Ut(O),E=yield li(c,{returnSecureToken:!0,email:l,password:a}),S=yield ts._fromIdTokenResponse(c,"signIn",E);return yield c._updateCurrentUser(S.user),S})).apply(this,arguments)}function Gr(O,l,a){return function Fo(O,l){return Ms.apply(this,arguments)}((0,I.m9)(O),gi.credential(l,a))}class me{constructor(l,a,c={}){this.isNewUser=l,this.providerId=a,this.profile=c}}class et extends me{constructor(l,a,c,E){super(l,a,c),this.username=E}}class ft extends me{constructor(l,a){super(l,"facebook.com",a)}}class Jt extends et{constructor(l,a){super(l,"github.com",a,"string"==typeof(null==a?void 0:a.login)?null==a?void 0:a.login:null)}}class Mr extends me{constructor(l,a){super(l,"google.com",a)}}class bn extends et{constructor(l,a,c){super(l,"twitter.com",a,c)}}function pr(O){const{user:l,_tokenResponse:a}=O;return l.isAnonymous&&!a?{providerId:null,isNewUser:!1,profile:null}:function se(O){var l,a;if(!O)return null;const{providerId:c}=O,E=O.rawUserInfo?JSON.parse(O.rawUserInfo):{},S=O.isNewUser||"identitytoolkit#SignupNewUserResponse"===O.kind;if(!c&&(null==O?void 0:O.idToken)){const H=null===(a=null===(l=ye(O.idToken))||void 0===l?void 0:l.firebase)||void 0===a?void 0:a.sign_in_provider;if(H)return new me(S,"anonymous"!==H&&"custom"!==H?H:null)}if(!c)return null;switch(c){case"facebook.com":return new ft(S,E);case"github.com":return new Jt(S,E);case"google.com":return new Mr(S,E);case"twitter.com":return new bn(S,E,O.screenName||null);case"custom":case"anonymous":return new me(S,null);default:return new me(S,c,E)}}(a)}function Ii(O,l,a,c){return(0,I.m9)(O).onAuthStateChanged(l,a,c)}function Vi(O){return(0,I.m9)(O).signOut()}const ot="__sak";class Pt{constructor(l,a){this.storageRetriever=l,this.type=a}_isAvailable(){try{return this.storage?(this.storage.setItem(ot,"1"),this.storage.removeItem(ot),Promise.resolve(!0)):Promise.resolve(!1)}catch(l){return Promise.resolve(!1)}}_set(l,a){return this.storage.setItem(l,JSON.stringify(a)),Promise.resolve()}_get(l){const a=this.storage.getItem(l);return Promise.resolve(a?JSON.parse(a):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const Us=(()=>{class O extends Pt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(a,c)=>this.onStorageEvent(a,c),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ti(){const O=(0,I.z$)();return Gt(O)||Ce(O)}()&&function rn(){try{return!(!window||window===window.top)}catch(O){return!1}}(),this.fallbackToPolling=tn(),this._shouldAllowMigration=!0}forAllChangedKeys(a){for(const c of Object.keys(this.listeners)){const E=this.storage.getItem(c),S=this.localCache[c];E!==S&&a(c,S,E)}}onStorageEvent(a,c=!1){if(!a.key)return void this.forAllChangedKeys((ie,fe,Me)=>{this.notifyListeners(ie,Me)});const E=a.key;if(c?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ie=this.storage.getItem(E);if(a.newValue!==ie)null!==a.newValue?this.storage.setItem(E,a.newValue):this.storage.removeItem(E);else if(this.localCache[E]===a.newValue&&!c)return}const S=()=>{const ie=this.storage.getItem(E);!c&&this.localCache[E]===ie||this.notifyListeners(E,ie)},H=this.storage.getItem(E);!function at(){return(0,I.w1)()&&10===document.documentMode}()||H===a.newValue||a.newValue===a.oldValue?S():setTimeout(S,10)}notifyListeners(a,c){this.localCache[a]=c;const E=this.listeners[a];if(E)for(const S of Array.from(E))S(c&&JSON.parse(c))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((a,c,E)=>{this.onStorageEvent(new StorageEvent("storage",{key:a,oldValue:c,newValue:E}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(a,c){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[a]||(this.listeners[a]=new Set,this.localCache[a]=this.storage.getItem(a)),this.listeners[a].add(c)}_removeListener(a,c){this.listeners[a]&&(this.listeners[a].delete(c),0===this.listeners[a].size&&delete this.listeners[a]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(a,c){var E=()=>super._set,S=this;return(0,g.Z)(function*(){yield E().call(S,a,c),S.localCache[a]=JSON.stringify(c)})()}_get(a){var c=()=>super._get,E=this;return(0,g.Z)(function*(){const S=yield c().call(E,a);return E.localCache[a]=JSON.stringify(S),S})()}_remove(a){var c=()=>super._remove,E=this;return(0,g.Z)(function*(){yield c().call(E,a),delete E.localCache[a]})()}}return O.type="LOCAL",O})(),so=(()=>{class O extends Pt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(a,c){}_removeListener(a,c){}}return O.type="SESSION",O})();let Na=(()=>{class O{constructor(a){this.eventTarget=a,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(a){const c=this.receivers.find(S=>S.isListeningto(a));if(c)return c;const E=new O(a);return this.receivers.push(E),E}isListeningto(a){return this.eventTarget===a}handleEvent(a){var c=this;return(0,g.Z)(function*(){const E=a,{eventId:S,eventType:H,data:ie}=E.data,fe=c.handlersMap[H];if(null==fe||!fe.size)return;E.ports[0].postMessage({status:"ack",eventId:S,eventType:H});const Me=Array.from(fe).map(function(){var Et=(0,g.Z)(function*(Yt){return Yt(E.origin,ie)});return function(Yt){return Et.apply(this,arguments)}}()),ze=yield function oo(O){return Promise.all(O.map(function(){var l=(0,g.Z)(function*(a){try{return{fulfilled:!0,value:yield a}}catch(c){return{fulfilled:!1,reason:c}}});return function(a){return l.apply(this,arguments)}}()))}(Me);E.ports[0].postMessage({status:"done",eventId:S,eventType:H,response:ze})})()}_subscribe(a,c){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[a]||(this.handlersMap[a]=new Set),this.handlersMap[a].add(c)}_unsubscribe(a,c){this.handlersMap[a]&&c&&this.handlersMap[a].delete(c),(!c||0===this.handlersMap[a].size)&&delete this.handlersMap[a],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return O.receivers=[],O})();function To(O="",l=10){let a="";for(let c=0;c<l;c++)a+=Math.floor(10*Math.random());return O+a}class iu{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,a,c=50){var E=this;return(0,g.Z)(function*(){const S="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!S)throw new Error("connection_unavailable");let H,ie;return new Promise((fe,Me)=>{const ze=To("",20);S.port1.start();const Et=setTimeout(()=>{Me(new Error("unsupported_event"))},c);ie={messageChannel:S,onMessage(Yt){const vn=Yt;if(vn.data.eventId===ze)switch(vn.data.status){case"ack":clearTimeout(Et),H=setTimeout(()=>{Me(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),fe(vn.data.response);break;default:clearTimeout(Et),clearTimeout(H),Me(new Error("invalid_response"))}}},E.handlers.add(ie),S.port1.addEventListener("message",ie.onMessage),E.target.postMessage({eventType:l,eventId:ze,data:a},[S.port2])}).finally(()=>{ie&&E.removeMessageHandler(ie)})})()}}function mi(){return window}function ms(){return void 0!==mi().WorkerGlobalScope&&"function"==typeof mi().importScripts}function Kr(){return(Kr=(0,g.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(O){return null}})).apply(this,arguments)}const yr="firebaseLocalStorageDb",Ai="firebaseLocalStorage",Kt="fbase_key";class ao{constructor(l){this.request=l}toPromise(){return new Promise((l,a)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{a(this.request.error)})})}}function lo(O,l){return O.transaction([Ai],l?"readwrite":"readonly").objectStore(Ai)}function Ml(){const O=indexedDB.open(yr,1);return new Promise((l,a)=>{O.addEventListener("error",()=>{a(O.error)}),O.addEventListener("upgradeneeded",()=>{const c=O.result;try{c.createObjectStore(Ai,{keyPath:Kt})}catch(E){a(E)}}),O.addEventListener("success",(0,g.Z)(function*(){const c=O.result;c.objectStoreNames.contains(Ai)?l(c):(c.close(),yield function Vo(){const O=indexedDB.deleteDatabase(yr);return new ao(O).toPromise()}(),l(yield Ml()))}))})}function ta(O,l,a){return La.apply(this,arguments)}function La(){return(La=(0,g.Z)(function*(O,l,a){const c=lo(O,!0).put({[Kt]:l,value:a});return new ao(c).toPromise()})).apply(this,arguments)}function cl(){return(cl=(0,g.Z)(function*(O,l){const a=lo(O,!1).get(l),c=yield new ao(a).toPromise();return void 0===c?null:c.value})).apply(this,arguments)}function Ja(O,l){const a=lo(O,!0).delete(l);return new ao(a).toPromise()}const el=(()=>{class O{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var a=this;return(0,g.Z)(function*(){return a.db||(a.db=yield Ml()),a.db})()}_withRetries(a){var c=this;return(0,g.Z)(function*(){let E=0;for(;;)try{const S=yield c._openDb();return yield a(S)}catch(S){if(E++>3)throw S;c.db&&(c.db.close(),c.db=void 0)}})()}initializeServiceWorkerMessaging(){var a=this;return(0,g.Z)(function*(){return ms()?a.initializeReceiver():a.initializeSender()})()}initializeReceiver(){var a=this;return(0,g.Z)(function*(){a.receiver=Na._getInstance(function Uo(){return ms()?self:null}()),a.receiver._subscribe("keyChanged",function(){var c=(0,g.Z)(function*(E,S){return{keyProcessed:(yield a._poll()).includes(S.key)}});return function(E,S){return c.apply(this,arguments)}}()),a.receiver._subscribe("ping",function(){var c=(0,g.Z)(function*(E,S){return["keyChanged"]});return function(E,S){return c.apply(this,arguments)}}())})()}initializeSender(){var a=this;return(0,g.Z)(function*(){var c,E;if(a.activeServiceWorker=yield function Al(){return Kr.apply(this,arguments)}(),!a.activeServiceWorker)return;a.sender=new iu(a.activeServiceWorker);const S=yield a.sender._send("ping",{},800);!S||(null===(c=S[0])||void 0===c?void 0:c.fulfilled)&&(null===(E=S[0])||void 0===E?void 0:E.value.includes("keyChanged"))&&(a.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(a){var c=this;return(0,g.Z)(function*(){if(c.sender&&c.activeServiceWorker&&function Sn(){var O;return(null===(O=null==navigator?void 0:navigator.serviceWorker)||void 0===O?void 0:O.controller)||null}()===c.activeServiceWorker)try{yield c.sender._send("keyChanged",{key:a},c.serviceWorkerReceiverAvailable?800:50)}catch(E){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const a=yield Ml();return yield ta(a,ot,"1"),yield Ja(a,ot),!0}catch(a){}return!1})()}_withPendingWrite(a){var c=this;return(0,g.Z)(function*(){c.pendingWrites++;try{yield a()}finally{c.pendingWrites--}})()}_set(a,c){var E=this;return(0,g.Z)(function*(){return E._withPendingWrite((0,g.Z)(function*(){return yield E._withRetries(S=>ta(S,a,c)),E.localCache[a]=c,E.notifyServiceWorker(a)}))})()}_get(a){var c=this;return(0,g.Z)(function*(){const E=yield c._withRetries(S=>function So(O,l){return cl.apply(this,arguments)}(S,a));return c.localCache[a]=E,E})()}_remove(a){var c=this;return(0,g.Z)(function*(){return c._withPendingWrite((0,g.Z)(function*(){return yield c._withRetries(E=>Ja(E,a)),delete c.localCache[a],c.notifyServiceWorker(a)}))})()}_poll(){var a=this;return(0,g.Z)(function*(){const c=yield a._withRetries(H=>{const ie=lo(H,!1).getAll();return new ao(ie).toPromise()});if(!c)return[];if(0!==a.pendingWrites)return[];const E=[],S=new Set;for(const{fbase_key:H,value:ie}of c)S.add(H),JSON.stringify(a.localCache[H])!==JSON.stringify(ie)&&(a.notifyListeners(H,ie),E.push(H));for(const H of Object.keys(a.localCache))a.localCache[H]&&!S.has(H)&&(a.notifyListeners(H,null),E.push(H));return E})()}notifyListeners(a,c){this.localCache[a]=c;const E=this.listeners[a];if(E)for(const S of Array.from(E))S(c)}startPolling(){var a=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return a._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(a,c){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[a]||(this.listeners[a]=new Set,this._get(a)),this.listeners[a].add(c)}_removeListener(a,c){this.listeners[a]&&(this.listeners[a].delete(c),0===this.listeners[a].size&&delete this.listeners[a]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return O.type="LOCAL",O})();function Ea(O){return`__${O}${Math.floor(1e6*Math.random())}`}function Ft(O,l){return l?Ye(l):(Je(O._popupRedirectResolver,O,"argument-error"),O._popupRedirectResolver)}Ea("rcb"),new St(3e4,6e4);class un extends In{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return Wt(l,this._buildIdpRequest())}_linkToIdToken(l,a){return Wt(l,this._buildIdpRequest(a))}_getReauthenticationResolver(l){return Wt(l,this._buildIdpRequest())}_buildIdpRequest(l){const a={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(a.idToken=l),a}}function Ht(O){return pa(O.auth,new un(O),O.bypassAuthState)}function An(O){const{auth:l,user:a}=O;return Je(a,l,"internal-error"),function Qa(O,l){return Dr.apply(this,arguments)}(a,new un(O),O.bypassAuthState)}function cr(O){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,g.Z)(function*(O){const{auth:l,user:a}=O;return Je(a,l,"internal-error"),fs(a,new un(O),O.bypassAuthState)})).apply(this,arguments)}class _s{constructor(l,a,c,E,S=!1){this.auth=l,this.resolver=c,this.user=E,this.bypassAuthState=S,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(a)?a:[a]}execute(){var l=this;return new Promise(function(){var a=(0,g.Z)(function*(c,E){l.pendingPromise={resolve:c,reject:E};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(S){l.reject(S)}});return function(c,E){return a.apply(this,arguments)}}())}onAuthEvent(l){var a=this;return(0,g.Z)(function*(){const{urlResponse:c,sessionId:E,postBody:S,tenantId:H,error:ie,type:fe}=l;if(ie)return void a.reject(ie);const Me={auth:a.auth,requestUri:c,sessionId:E,tenantId:H||void 0,postBody:S||void 0,user:a.user,bypassAuthState:a.bypassAuthState};try{a.resolve(yield a.getIdpTask(fe)(Me))}catch(ze){a.reject(ze)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return Ht;case"linkViaPopup":case"linkViaRedirect":return cr;case"reauthViaPopup":case"reauthViaRedirect":return An;default:mt(this.auth,"internal-error")}}resolve(l){wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vs=new St(2e3,1e4);function Bs(O,l,a){return qs.apply(this,arguments)}function qs(){return(qs=(0,g.Z)(function*(O,l,a){const c=Ut(O);yt(O,l,ki);const E=Ft(c,a);return new Bl(c,"signInViaPopup",l,E).executeNotNull()})).apply(this,arguments)}let Bl=(()=>{class O extends _s{constructor(a,c,E,S,H){super(a,c,S,H),this.provider=E,this.authWindow=null,this.pollId=null,O.currentPopupAction&&O.currentPopupAction.cancel(),O.currentPopupAction=this}executeNotNull(){var a=this;return(0,g.Z)(function*(){const c=yield a.execute();return Je(c,a.auth,"internal-error"),c})()}onExecution(){var a=this;return(0,g.Z)(function*(){wt(1===a.filter.length,"Popup operations only handle one event");const c=To();a.authWindow=yield a.resolver._openPopup(a.auth,a.provider,a.filter[0],c),a.authWindow.associatedEvent=c,a.resolver._originValidation(a.auth).catch(E=>{a.reject(E)}),a.resolver._isIframeWebStorageSupported(a.auth,E=>{E||a.reject(Ue(a.auth,"web-storage-unsupported"))}),a.pollUserCancellation()})()}get eventId(){var a;return(null===(a=this.authWindow)||void 0===a?void 0:a.associatedEvent)||null}cancel(){this.reject(Ue(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,O.currentPopupAction=null}pollUserCancellation(){const a=()=>{var c,E;this.pollId=null!==(E=null===(c=this.authWindow)||void 0===c?void 0:c.window)&&void 0!==E&&E.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ue(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(a,Vs.get())};a()}}return O.currentPopupAction=null,O})();const ja=new Map;class vo extends _s{constructor(l,a,c=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],a,void 0,c),this.eventId=null}execute(){var l=()=>super.execute,a=this;return(0,g.Z)(function*(){let c=ja.get(a.auth._key());if(!c){try{const S=(yield function sa(O,l){return jo.apply(this,arguments)}(a.resolver,a.auth))?yield l().call(a):null;c=()=>Promise.resolve(S)}catch(E){c=()=>Promise.reject(E)}ja.set(a.auth._key(),c)}return a.bypassAuthState||ja.set(a.auth._key(),()=>Promise.resolve(null)),c()})()}onAuthEvent(l){var a=()=>super.onAuthEvent,c=this;return(0,g.Z)(function*(){if("signInViaRedirect"===l.type)return a().call(c,l);if("unknown"!==l.type){if(l.eventId){const E=yield c.auth._redirectUserForId(l.eventId);if(E)return c.user=E,a().call(c,l);c.resolve(null)}}else c.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function jo(){return(jo=(0,g.Z)(function*(O,l){const a=aa(l),c=oa(O);if(!(yield c._isAvailable()))return!1;const E="true"===(yield c._get(a));return yield c._remove(a),E})).apply(this,arguments)}function Jr(O,l){ja.set(O._key(),l)}function oa(O){return Ye(O._redirectPersistence)}function aa(O){return Ie("pendingRedirect",O.config.apiKey,O.name)}function Rl(O,l){return fl.apply(this,arguments)}function fl(){return(fl=(0,g.Z)(function*(O,l){return yield Ut(O)._initializationPromise,la(O,l,!1)})).apply(this,arguments)}function la(O,l){return ua.apply(this,arguments)}function ua(){return(ua=(0,g.Z)(function*(O,l,a=!1){const c=Ut(O),E=Ft(c,l),H=yield new vo(c,E,a).execute();return H&&!a&&(delete H.user._redirectEventId,yield c._persistUserIfCurrent(H.user),yield c._setRedirectUser(null,l)),H})).apply(this,arguments)}class yi{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let a=!1;return this.consumers.forEach(c=>{this.isEventForConsumer(l,c)&&(a=!0,this.sendToConsumer(l,c),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function ci(O){switch(O.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qi(O);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,a||(this.queuedRedirectEvent=l,a=!0)),a}sendToConsumer(l,a){var c;if(l.error&&!Qi(l)){const E=(null===(c=l.error.code)||void 0===c?void 0:c.split("auth/")[1])||"internal-error";a.onError(Ue(this.auth,E))}else a.onAuthEvent(l)}isEventForConsumer(l,a){const c=null===a.eventId||!!l.eventId&&l.eventId===a.eventId;return a.filter.includes(l.type)&&c}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has($a(l))}saveEventToCache(l){this.cachedEventUids.add($a(l)),this.lastProcessedEventTime=Date.now()}}function $a(O){return[O.type,O.eventId,O.sessionId,O.tenantId].filter(l=>l).join("-")}function Qi({type:O,error:l}){return"unknown"===O&&"auth/no-auth-event"===(null==l?void 0:l.code)}function ca(O){return as.apply(this,arguments)}function as(){return(as=(0,g.Z)(function*(O,l={}){return Dn(O,"GET","/v1/projects",l)})).apply(this,arguments)}const js=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ho=/^https?/;function ri(){return(ri=(0,g.Z)(function*(O){if(O.config.emulator)return;const{authorizedDomains:l}=yield ca(O);for(const a of l)try{if(uu(a))return}catch(c){}mt(O,"unauthorized-domain")})).apply(this,arguments)}function uu(O){const l=Rt(),{protocol:a,hostname:c}=new URL(l);if(O.startsWith("chrome-extension://")){const H=new URL(O);return""===H.hostname&&""===c?"chrome-extension:"===a&&O.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===a&&H.hostname===c}if(!ho.test(a))return!1;if(js.test(O))return c===O;const E=O.replace(/\./g,"\\.");return new RegExp("^(.+\\."+E+"|"+E+")$","i").test(c)}const $l=new St(3e4,6e4);function sl(){const O=mi().___jsl;if(null!=O&&O.H)for(const l of Object.keys(O.H))if(O.H[l].r=O.H[l].r||[],O.H[l].L=O.H[l].L||[],O.H[l].r=[...O.H[l].L],O.CP)for(let a=0;a<O.CP.length;a++)O.CP[a]=null}let Ho=null;function gl(O){return Ho=Ho||function Eo(O){return new Promise((l,a)=>{var c,E,S;function H(){sl(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{sl(),a(Ue(O,"network-request-failed"))},timeout:$l.get()})}if(null!==(E=null===(c=mi().gapi)||void 0===c?void 0:c.iframes)&&void 0!==E&&E.Iframe)l(gapi.iframes.getContext());else{if(null===(S=mi().gapi)||void 0===S||!S.load){const ie=Ea("iframefcb");return mi()[ie]=()=>{gapi.load?H():a(Ue(O,"network-request-failed"))},function na(O){return new Promise((l,a)=>{const c=document.createElement("script");c.setAttribute("src",O),c.onload=l,c.onerror=E=>{const S=Ue("internal-error");S.customData=E,a(S)},c.type="text/javascript",c.charset="UTF-8",function ys(){var O,l;return null!==(l=null===(O=document.getElementsByTagName("head"))||void 0===O?void 0:O[0])&&void 0!==l?l:document}().appendChild(c)})}(`https://apis.google.com/js/api.js?onload=${ie}`).catch(fe=>a(fe))}H()}}).catch(l=>{throw Ho=null,l})}(O),Ho}const Gl=new St(5e3,15e3),Wl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ml=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kl(O){const l=O.config;Je(l.authDomain,O,"auth-domain-config-required");const a=l.emulator?vr(l,"emulator/auth/iframe"):`https://${O.config.authDomain}/__/auth/iframe`,c={apiKey:l.apiKey,appName:O.name,v:J.Jn},E=ml.get(O.config.apiHost);E&&(c.eid=E);const S=O._getFrameworks();return S.length&&(c.fw=S.join(",")),`${a}?${(0,I.xO)(c).slice(1)}`}function yl(){return yl=(0,g.Z)(function*(O){const l=yield gl(O),a=mi().gapi;return Je(a,O,"internal-error"),l.open({where:document.body,url:Kl(O),messageHandlersFilter:a.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wl,dontclear:!0},c=>new Promise(function(){var E=(0,g.Z)(function*(S,H){yield c.restyle({setHideOnLeave:!1});const ie=Ue(O,"network-request-failed"),fe=mi().setTimeout(()=>{H(ie)},Gl.get());function Me(){mi().clearTimeout(fe),S(c)}c.ping(Me).then(Me,()=>{H(ie)})});return function(S,H){return E.apply(this,arguments)}}()))}),yl.apply(this,arguments)}const _l={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Yl{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(l){}}}function hu(O,l,a,c,E,S){Je(O.config.authDomain,O,"auth-domain-config-required"),Je(O.config.apiKey,O,"invalid-api-key");const H={apiKey:O.config.apiKey,appName:O.name,authType:a,redirectUrl:c,v:J.Jn,eventId:E};if(l instanceof ki){l.setDefaultLanguage(O.languageCode),H.providerId=l.providerId||"",(0,I.xb)(l.getCustomParameters())||(H.customParameters=JSON.stringify(l.getCustomParameters()));for(const[fe,Me]of Object.entries(S||{}))H[fe]=Me}if(l instanceof Jn){const fe=l.getScopes().filter(Me=>""!==Me);fe.length>0&&(H.scopes=fe.join(","))}O.tenantId&&(H.tid=O.tenantId);const ie=H;for(const fe of Object.keys(ie))void 0===ie[fe]&&delete ie[fe];return`${function El({config:O}){return O.emulator?vr(O,"emulator/auth/handler"):`https://${O.authDomain}/__/auth/handler`}(O)}?${(0,I.xO)(ie).slice(1)}`}const fu="webStorageSupport",Uu=class wu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=so,this._completeRedirectFn=la,this._overrideRedirectResult=Jr}_openPopup(l,a,c,E){var S=this;return(0,g.Z)(function*(){var H;wt(null===(H=S.eventManagers[l._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const ie=hu(l,a,c,Rt(),E);return function vl(O,l,a,c=500,E=600){const S=Math.max((window.screen.availHeight-E)/2,0).toString(),H=Math.max((window.screen.availWidth-c)/2,0).toString();let ie="";const fe=Object.assign(Object.assign({},_l),{width:c.toString(),height:E.toString(),top:S,left:H}),Me=(0,I.z$)().toLowerCase();a&&(ie=Xt(Me)?"_blank":a),We(Me)&&(l=l||"http://localhost",fe.scrollbars="yes");const ze=Object.entries(fe).reduce((Yt,[vn,Mn])=>`${Yt}${vn}=${Mn},`,"");if(function ke(O=(0,I.z$)()){var l;return Ce(O)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(Me)&&"_self"!==ie)return function ol(O,l){const a=document.createElement("a");a.href=O,a.target=l;const c=document.createEvent("MouseEvent");c.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),a.dispatchEvent(c)}(l||"",ie),new Yl(null);const Et=window.open(l||"",ie,ze);Je(Et,O,"popup-blocked");try{Et.focus()}catch(Yt){}return new Yl(Et)}(l,ie,To())})()}_openRedirect(l,a,c,E){var S=this;return(0,g.Z)(function*(){return yield S._originValidation(l),function Xn(O){mi().location.href=O}(hu(l,a,c,Rt(),E)),new Promise(()=>{})})()}_initialize(l){const a=l._key();if(this.eventManagers[a]){const{manager:E,promise:S}=this.eventManagers[a];return E?Promise.resolve(E):(wt(S,"If manager is not set, promise should be"),S)}const c=this.initAndGetManager(l);return this.eventManagers[a]={promise:c},c.catch(()=>{delete this.eventManagers[a]}),c}initAndGetManager(l){var a=this;return(0,g.Z)(function*(){const c=yield function Iu(O){return yl.apply(this,arguments)}(l),E=new yi(l);return c.register("authEvent",S=>(Je(null==S?void 0:S.authEvent,l,"invalid-auth-event"),{status:E.onEvent(S.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),a.eventManagers[l._key()]={manager:E},a.iframes[l._key()]=c,E})()}_isIframeWebStorageSupported(l,a){this.iframes[l._key()].send(fu,{type:fu},E=>{var S;const H=null===(S=null==E?void 0:E[0])||void 0===S?void 0:S[fu];void 0!==H&&a(!!H),mt(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const a=l._key();return this.originValidationPromises[a]||(this.originValidationPromises[a]=function Cu(O){return ri.apply(this,arguments)}(l)),this.originValidationPromises[a]}get _shouldInitProactively(){return tn()||Gt()||Ce()}};var Ga="@firebase/auth";class $o{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var a=this;return(0,g.Z)(function*(){return a.assertAuthConfigured(),yield a.auth._initializationPromise,a.auth.currentUser?{accessToken:yield a.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const a=this.auth.onIdTokenChanged(c=>{l((null==c?void 0:c.stsTokenManager.accessToken)||null)});this.internalListeners.set(l,a),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const a=this.internalListeners.get(l);!a||(this.internalListeners.delete(l),a(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ka=(0,I.Pz)("authIdTokenMaxAge")||300;let gu=null;const Cl=O=>function(){var l=(0,g.Z)(function*(a){const c=a&&(yield a.getIdTokenResult()),E=c&&((new Date).getTime()-Date.parse(c.issuedAtTime))/1e3;if(E&&E>Ka)return;const S=null==c?void 0:c.token;gu!==S&&(gu=S,yield fetch(O,{method:S?"POST":"DELETE",headers:S?{Authorization:`Bearer ${S}`}:{}}))});return function(a){return l.apply(this,arguments)}}();function ql(O=(0,J.Mq)()){const l=(0,J.qX)(O,"auth");if(l.isInitialized())return l.getImmediate();const a=function ut(O,l){const a=(0,J.qX)(O,"auth");if(a.isInitialized()){const E=a.getImmediate(),S=a.getOptions();if((0,I.vZ)(S,null!=l?l:{}))return E;mt(E,"already-initialized")}return a.initialize({options:l})}(O,{popupRedirectResolver:Uu,persistence:[el,Us,so]}),c=(0,I.Pz)("authTokenSyncURL");if(c){const S=Cl(c);(function br(O,l,a){(0,I.m9)(O).beforeAuthStateChanged(l,a)})(a,S,()=>S(a.currentUser)),function Ci(O,l,a,c){(0,I.m9)(O).onIdTokenChanged(l,a,c)}(a,H=>S(H))}const E=(0,I.q4)("auth");return E&&function Cn(O,l,a){const c=Ut(O);Je(c._canInitEmulator,c,"emulator-config-failed"),Je(/^https?:\/\//.test(l),c,"invalid-emulator-scheme");const E=!(null==a||!a.disableWarnings),S=Vn(l),{host:H,port:ie}=function sr(O){const l=Vn(O),a=/(\/\/)?([^?#/]+)/.exec(O.substr(l.length));if(!a)return{host:"",port:null};const c=a[2].split("@").pop()||"",E=/^(\[[^\]]+\])(:|$)/.exec(c);if(E){const S=E[1];return{host:S,port:Qr(c.substr(S.length+1))}}{const[S,H]=c.split(":");return{host:S,port:Qr(H)}}}(l);c.config.emulator={url:`${S}//${H}${null===ie?"":`:${ie}`}/`},c.settings.appVerificationDisabledForTesting=!0,c.emulatorConfig=Object.freeze({host:H,port:ie,protocol:S.replace(":",""),options:Object.freeze({disableWarnings:E})}),E||function Hr(){function O(){const l=document.createElement("p"),a=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",a.position="fixed",a.width="100%",a.backgroundColor="#ffffff",a.border=".1em solid #000000",a.color="#b50000",a.bottom="0px",a.left="0px",a.margin="0px",a.zIndex="10000",a.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",O):O())}()}(a,`http://${E}`),a}!function xl(O){(0,J.Xd)(new re.wA("auth",(l,{options:a})=>{const c=l.getProvider("app").getImmediate(),E=l.getProvider("heartbeat"),{apiKey:S,authDomain:H}=c.options;return((ie,fe)=>{Je(S&&!S.includes(":"),"invalid-api-key",{appName:ie.name}),Je(!(null!=H&&H.includes(":")),"argument-error",{appName:ie.name});const Me={apiKey:S,authDomain:H,clientPlatform:O,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Se(O)},ze=new gt(ie,fe,Me);return function qe(O,l){const a=(null==l?void 0:l.persistence)||[],c=(Array.isArray(a)?a:[a]).map(Ye);null!=l&&l.errorMap&&O._updateErrorMap(l.errorMap),O._initializeWithPersistence(c,null==l?void 0:l.popupRedirectResolver)}(ze,a),ze})(c,E)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,a,c)=>{l.getProvider("auth-internal").initialize()})),(0,J.Xd)(new re.wA("auth-internal",l=>{const a=Ut(l.getProvider("auth").getImmediate());return new $o(a)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,J.KN)(Ga,"0.21.3",function Wa(O){switch(O){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(O)),(0,J.KN)(Ga,"0.21.3","esm2017")}("Browser")},6197:(_e,ne,D)=>{D.d(ne,{iU:()=>Br,U2:()=>Uc,N8:()=>Ou,nP:()=>mc,S1:()=>qi,ae:()=>kr,jM:()=>wr,VF:()=>za,iH:()=>xs,Od:()=>Sa,Bt:()=>gh,t8:()=>Zs,Vx:()=>mu});var g=D(5861),I=D(6881),J=D(4859),B=D(2090),Y=D(1877);const re="@firebase/database";let z="";class Q{constructor(h){this.domStorage_=h,this.prefix_="firebase:"}set(h,f){null==f?this.domStorage_.removeItem(this.prefixedName_(h)):this.domStorage_.setItem(this.prefixedName_(h),(0,B.Wl)(f))}get(h){const f=this.domStorage_.getItem(this.prefixedName_(h));return null==f?null:(0,B.cI)(f)}remove(h){this.domStorage_.removeItem(this.prefixedName_(h))}prefixedName_(h){return this.prefix_+h}toString(){return this.domStorage_.toString()}}class le{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(h,f){null==f?delete this.cache_[h]:this.cache_[h]=f}get(h){return(0,B.r3)(this.cache_,h)?this.cache_[h]:null}remove(h){delete this.cache_[h]}}const ue=function(m){try{if("undefined"!=typeof window&&void 0!==window[m]){const h=window[m];return h.setItem("firebase:sentinel","cache"),h.removeItem("firebase:sentinel"),new Q(h)}}catch(h){}return new le},Re=ue("localStorage"),Ge=ue("sessionStorage"),ve=new Y.Yd("@firebase/database"),Be=function(){let m=1;return function(){return m++}}(),He=function(m){const h=(0,B.dS)(m),f=new B.gQ;f.update(h);const v=f.digest();return B.US.encodeByteArray(v)},xe=function(...m){let h="";for(let f=0;f<m.length;f++){const v=m[f];Array.isArray(v)||v&&"object"==typeof v&&"number"==typeof v.length?h+=xe.apply(null,v):h+="object"==typeof v?(0,B.Wl)(v):v,h+=" "}return h};let dt=null,mt=!0;const Oe=function(...m){if(!0===mt&&(mt=!1,null===dt&&!0===Ge.get("logging_enabled")&&function(m,h){(0,B.hu)(!h||!0===m||!1===m,"Can't turn on custom loggers persistently."),!0===m?(ve.logLevel=Y.in.VERBOSE,dt=ve.log.bind(ve),h&&Ge.set("logging_enabled",!0)):"function"==typeof m?dt=m:(dt=null,Ge.remove("logging_enabled"))}(!0)),dt){const h=xe.apply(null,m);dt(h)}},yt=function(m){return function(...h){Oe(m,...h)}},It=function(...m){const h="FIREBASE INTERNAL ERROR: "+xe(...m);ve.error(h)},Je=function(...m){const h=`FIREBASE FATAL ERROR: ${xe(...m)}`;throw ve.error(h),new Error(h)},Nt=function(...m){const h="FIREBASE WARNING: "+xe(...m);ve.warn(h)},Qe=function(m){return"number"==typeof m&&(m!=m||m===Number.POSITIVE_INFINITY||m===Number.NEGATIVE_INFINITY)},ut="[MIN_NAME]",qe="[MAX_NAME]",Rt=function(m,h){if(m===h)return 0;if(m===ut||h===qe)return-1;if(h===ut||m===qe)return 1;{const f=Ct(m),v=Ct(h);return null!==f?null!==v?f-v==0?m.length-h.length:f-v:-1:null!==v?1:m<h?-1:1}},Tt=function(m,h){return m===h?0:m<h?-1:1},hn=function(m,h){if(h&&m in h)return h[m];throw new Error("Missing required key ("+m+") in object: "+(0,B.Wl)(h))},nr=function(m){if("object"!=typeof m||null===m)return(0,B.Wl)(m);const h=[];for(const v in m)h.push(v);h.sort();let f="{";for(let v=0;v<h.length;v++)0!==v&&(f+=","),f+=(0,B.Wl)(h[v]),f+=":",f+=nr(m[h[v]]);return f+="}",f},qt=function(m,h){const f=m.length;if(f<=h)return[m];const v=[];for(let M=0;M<f;M+=h)v.push(m.substring(M,M+h>f?f:M+h));return v};function St(m,h){for(const f in m)m.hasOwnProperty(f)&&h(f,m[f])}const vr=function(m){(0,B.hu)(!Qe(m),"Invalid JSON number");const v=1023;let M,V,K,ce,we;0===m?(V=0,K=0,M=1/m==-1/0?1:0):(M=m<0,(m=Math.abs(m))>=Math.pow(2,1-v)?(ce=Math.min(Math.floor(Math.log(m)/Math.LN2),v),V=ce+v,K=Math.round(m*Math.pow(2,52-ce)-Math.pow(2,52))):(V=0,K=Math.round(m/Math.pow(2,-1074))));const Ne=[];for(we=52;we;we-=1)Ne.push(K%2?1:0),K=Math.floor(K/2);for(we=11;we;we-=1)Ne.push(V%2?1:0),V=Math.floor(V/2);Ne.push(M?1:0),Ne.reverse();const _t=Ne.join("");let Dt="";for(we=0;we<64;we+=8){let Mt=parseInt(_t.substr(we,8),2).toString(16);1===Mt.length&&(Mt="0"+Mt),Dt+=Mt}return Dt.toLowerCase()},Ln=new RegExp("^-?(0*)\\d{1,10}$"),Ct=function(m){if(Ln.test(m)){const h=Number(m);if(h>=-2147483648&&h<=2147483647)return h}return null},st=function(m){try{m()}catch(h){setTimeout(()=>{throw Nt("Exception was thrown by user callback.",h.stack||""),h},Math.floor(0))}},it=function(m,h){const f=setTimeout(m,h);return"number"==typeof f&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(f):"object"==typeof f&&f.unref&&f.unref(),f};class $t{constructor(h,f){this.appName_=h,this.appCheckProvider=f,this.appCheck=null==f?void 0:f.getImmediate({optional:!0}),this.appCheck||null==f||f.get().then(v=>this.appCheck=v)}getToken(h){return this.appCheck?this.appCheck.getToken(h):new Promise((f,v)=>{setTimeout(()=>{this.appCheck?this.getToken(h).then(f,v):f(null)},0)})}addTokenChangeListener(h){var f;null===(f=this.appCheckProvider)||void 0===f||f.get().then(v=>v.addTokenListener(h))}notifyForInvalidToken(){Nt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class on{constructor(h,f,v){this.appName_=h,this.firebaseOptions_=f,this.authProvider_=v,this.auth_=null,this.auth_=v.getImmediate({optional:!0}),this.auth_||v.onInit(M=>this.auth_=M)}getToken(h){return this.auth_?this.auth_.getToken(h).catch(f=>f&&"auth/token-not-initialized"===f.code?(Oe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(f)):new Promise((f,v)=>{setTimeout(()=>{this.auth_?this.getToken(h).then(f,v):f(null)},0)})}addTokenChangeListener(h){this.auth_?this.auth_.addAuthTokenListener(h):this.authProvider_.get().then(f=>f.addAuthTokenListener(h))}removeTokenChangeListener(h){this.authProvider_.get().then(f=>f.removeAuthTokenListener(h))}notifyForInvalidToken(){let h='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';h+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Nt(h)}}let Fn=(()=>{class m{constructor(f){this.accessToken=f}getToken(f){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(f){f(this.accessToken)}removeTokenChangeListener(f){}notifyForInvalidToken(){}}return m.OWNER="owner",m})();const gr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,je="websocket",Te="long_polling";class ye{constructor(h,f,v,M,V=!1,K="",ce=!1,we=!1){this.secure=f,this.namespace=v,this.webSocketOnly=M,this.nodeAdmin=V,this.persistenceKey=K,this.includeNamespaceInQueryParams=ce,this.isUsingEmulator=we,this._host=h.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Re.get("host:"+h)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(h){h!==this.internalHost&&(this.internalHost=h,this.isCacheableHost()&&Re.set("host:"+this._host,this.internalHost))}toString(){let h=this.toURLString();return this.persistenceKey&&(h+="<"+this.persistenceKey+">"),h}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ht(m,h,f){let v;if((0,B.hu)("string"==typeof h,"typeof type must == string"),(0,B.hu)("object"==typeof f,"typeof params must == object"),h===je)v=(m.secure?"wss://":"ws://")+m.internalHost+"/.ws?";else{if(h!==Te)throw new Error("Unknown connection type: "+h);v=(m.secure?"https://":"http://")+m.internalHost+"/.lp?"}(function Xe(m){return m.host!==m.internalHost||m.isCustomHost()||m.includeNamespaceInQueryParams})(m)&&(f.ns=m.namespace);const M=[];return St(f,(V,K)=>{M.push(V+"="+K)}),v+M.join("&")}class an{constructor(){this.counters_={}}incrementCounter(h,f=1){(0,B.r3)(this.counters_,h)||(this.counters_[h]=0),this.counters_[h]+=f}get(){return(0,B.p$)(this.counters_)}}const dn={},er={};function Lt(m){const h=m.toString();return dn[h]||(dn[h]=new an),dn[h]}class Wn{constructor(h){this.onMessage_=h,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(h,f){this.closeAfterResponse=h,this.onClose=f,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(h,f){for(this.pendingResponses[h]=f;this.pendingResponses[this.currentResponseNum];){const v=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let M=0;M<v.length;++M)v[M]&&st(()=>{this.onMessage_(v[M])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class qn{constructor(h,f,v,M,V,K,ce){this.connId=h,this.repoInfo=f,this.applicationId=v,this.appCheckToken=M,this.authToken=V,this.transportSessionId=K,this.lastSessionId=ce,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yt(h),this.stats_=Lt(f),this.urlFn=we=>(this.appCheckToken&&(we.ac=this.appCheckToken),ht(f,Te,we))}open(h,f){this.curSegmentNum=0,this.onDisconnect_=f,this.myPacketOrderer=new Wn(h),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(m){if((0,B.Yr)()||"complete"===document.readyState)m();else{let h=!1;const f=function(){document.body?h||(h=!0,m()):setTimeout(f,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&f()}),window.attachEvent("onload",f))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tr((...V)=>{const[K,ce,we,Ne,_t]=V;if(this.incrementIncomingBytes_(V),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===K)this.id=ce,this.password=we;else{if("close"!==K)throw new Error("Unrecognized command received: "+K);ce?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ce,()=>{this.onClosed_()})):this.onClosed_()}},(...V)=>{const[K,ce]=V;this.incrementIncomingBytes_(V),this.myPacketOrderer.handleResponse(K,ce)},()=>{this.onClosed_()},this.urlFn);const v={start:"t"};v.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(v.cb=this.scriptTagHolder.uniqueCallbackIdentifier),v.v="5",this.transportSessionId&&(v.s=this.transportSessionId),this.lastSessionId&&(v.ls=this.lastSessionId),this.applicationId&&(v.p=this.applicationId),this.appCheckToken&&(v.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&gr.test(location.hostname)&&(v.r="f");const M=this.urlFn(v);this.log_("Connecting via long-poll to "+M),this.scriptTagHolder.addTag(M,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){qn.forceAllow_=!0}static forceDisallow(){qn.forceDisallow_=!0}static isAvailable(){return!((0,B.Yr)()||!qn.forceAllow_&&(qn.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(h){const f=(0,B.Wl)(h);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);const v=(0,B.h$)(f),M=qt(v,1840);for(let V=0;V<M.length;V++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,M.length,M[V]),this.curSegmentNum++}addDisconnectPingFrame(h,f){if((0,B.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const v={dframe:"t"};v.id=h,v.pw=f,this.myDisconnFrame.src=this.urlFn(v),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(h){const f=(0,B.Wl)(h).length;this.bytesReceived+=f,this.stats_.incrementCounter("bytes_received",f)}}class tr{constructor(h,f,v,M){if(this.onDisconnect=v,this.urlFn=M,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,B.Yr)())this.commandCB=h,this.onMessageCB=f;else{this.uniqueCallbackIdentifier=Be(),window["pLPCommand"+this.uniqueCallbackIdentifier]=h,window["pRTLPCB"+this.uniqueCallbackIdentifier]=f,this.myIFrame=tr.createIFrame_();let V="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(V='<script>document.domain="'+document.domain+'";<\/script>');const K="<html><body>"+V+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(K),this.myIFrame.doc.close()}catch(ce){Oe("frame writing exception"),ce.stack&&Oe(ce.stack),Oe(ce)}}}static createIFrame_(){const h=document.createElement("iframe");if(h.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(h);try{h.contentWindow.document||Oe("No IE domain setting required")}catch(f){const v=document.domain;h.src="javascript:void((function(){document.open();document.domain='"+v+"';document.close();})())"}return h.contentDocument?h.doc=h.contentDocument:h.contentWindow?h.doc=h.contentWindow.document:h.document&&(h.doc=h.document),h}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const h=this.onDisconnect;h&&(this.onDisconnect=null,h())}startLongPoll(h,f){for(this.myID=h,this.myPW=f,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const h={};h.id=this.myID,h.pw=this.myPW,h.ser=this.currentSerial;let f=this.urlFn(h),v="",M=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+v.length<=1870;){const K=this.pendingSegs.shift();v=v+"&seg"+M+"="+K.seg+"&ts"+M+"="+K.ts+"&d"+M+"="+K.d,M++}return f+=v,this.addLongPollTag_(f,this.currentSerial),!0}return!1}enqueueSegment(h,f,v){this.pendingSegs.push({seg:h,ts:f,d:v}),this.alive&&this.newRequest_()}addLongPollTag_(h,f){this.outstandingRequests.add(f);const v=()=>{this.outstandingRequests.delete(f),this.newRequest_()},M=setTimeout(v,Math.floor(25e3));this.addTag(h,()=>{clearTimeout(M),v()})}addTag(h,f){(0,B.Yr)()?this.doNodeLongPoll(h,f):setTimeout(()=>{try{if(!this.sendNewPolls)return;const v=this.myIFrame.doc.createElement("script");v.type="text/javascript",v.async=!0,v.src=h,v.onload=v.onreadystatechange=function(){const M=v.readyState;(!M||"loaded"===M||"complete"===M)&&(v.onload=v.onreadystatechange=null,v.parentNode&&v.parentNode.removeChild(v),f())},v.onerror=()=>{Oe("Long-poll script failed to load: "+h),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(v)}catch(v){}},Math.floor(1))}}let Ce=null;"undefined"!=typeof MozWebSocket?Ce=MozWebSocket:"undefined"!=typeof WebSocket&&(Ce=WebSocket);let he=(()=>{class m{constructor(f,v,M,V,K,ce,we){this.connId=f,this.applicationId=M,this.appCheckToken=V,this.authToken=K,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yt(this.connId),this.stats_=Lt(v),this.connURL=m.connectionURL_(v,ce,we,V,M),this.nodeAdmin=v.nodeAdmin}static connectionURL_(f,v,M,V,K){const ce={v:"5"};return!(0,B.Yr)()&&"undefined"!=typeof location&&location.hostname&&gr.test(location.hostname)&&(ce.r="f"),v&&(ce.s=v),M&&(ce.ls=M),V&&(ce.ac=V),K&&(ce.p=K),ht(f,je,ce)}open(f,v){this.onDisconnect=v,this.onMessage=f,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Re.set("previous_websocket_failure",!0);try{let M;if((0,B.Yr)()){M={headers:{"User-Agent":`Firebase/5/${z}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(M.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(M.headers["X-Firebase-AppCheck"]=this.appCheckToken);const K=process.env,ce=0===this.connURL.indexOf("wss://")?K.HTTPS_PROXY||K.https_proxy:K.HTTP_PROXY||K.http_proxy;ce&&(M.proxy={origin:ce})}this.mySock=new Ce(this.connURL,[],M)}catch(M){this.log_("Error instantiating WebSocket.");const V=M.message||M.data;return V&&this.log_(V),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=M=>{this.handleIncomingFrame(M)},this.mySock.onerror=M=>{this.log_("WebSocket error.  Closing connection.");const V=M.message||M.data;V&&this.log_(V),this.onClosed_()}}start(){}static forceDisallow(){m.forceDisallow_=!0}static isAvailable(){let f=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const M=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);M&&M.length>1&&parseFloat(M[1])<4.4&&(f=!0)}return!f&&null!==Ce&&!m.forceDisallow_}static previouslyFailed(){return Re.isInMemoryStorage||!0===Re.get("previous_websocket_failure")}markConnectionHealthy(){Re.remove("previous_websocket_failure")}appendFrame_(f){if(this.frames.push(f),this.frames.length===this.totalFrames){const v=this.frames.join("");this.frames=null;const M=(0,B.cI)(v);this.onMessage(M)}}handleNewFrameCount_(f){this.totalFrames=f,this.frames=[]}extractFrameCount_(f){if((0,B.hu)(null===this.frames,"We already have a frame buffer"),f.length<=6){const v=Number(f);if(!isNaN(v))return this.handleNewFrameCount_(v),null}return this.handleNewFrameCount_(1),f}handleIncomingFrame(f){if(null===this.mySock)return;const v=f.data;if(this.bytesReceived+=v.length,this.stats_.incrementCounter("bytes_received",v.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(v);else{const M=this.extractFrameCount_(v);null!==M&&this.appendFrame_(M)}}send(f){this.resetKeepAlive();const v=(0,B.Wl)(f);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);const M=qt(v,16384);M.length>1&&this.sendString_(String(M.length));for(let V=0;V<M.length;V++)this.sendString_(M[V])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(f){try{this.mySock.send(f)}catch(v){this.log_("Exception thrown from WebSocket.send():",v.message||v.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return m.responsesRequiredToBeHealthy=2,m.healthyTimeout=3e4,m})(),ke=(()=>{class m{constructor(f){this.initTransports_(f)}static get ALL_TRANSPORTS(){return[qn,he]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(f){const v=he&&he.isAvailable();let M=v&&!he.previouslyFailed();if(f.webSocketOnly&&(v||Nt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),M=!0),M)this.transports_=[he];else{const V=this.transports_=[];for(const K of m.ALL_TRANSPORTS)K&&K.isAvailable()&&V.push(K);m.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return m.globalTransportInitialized_=!1,m})();class Hi{constructor(h,f,v,M,V,K,ce,we,Ne,_t){this.id=h,this.repoInfo_=f,this.applicationId_=v,this.appCheckToken_=M,this.authToken_=V,this.onMessage_=K,this.onReady_=ce,this.onDisconnect_=we,this.onKill_=Ne,this.lastSessionId=_t,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yt("c:"+this.id+":"),this.transportManager_=new ke(f),this.log_("Connection created"),this.start_()}start_(){const h=this.transportManager_.initialTransport();this.conn_=new h(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=h.responsesRequiredToBeHealthy||0;const f=this.connReceiver_(this.conn_),v=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(f,v)},Math.floor(0));const M=h.healthyTimeout||0;M>0&&(this.healthyTimeout_=it(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(M)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(h){return f=>{h===this.conn_?this.onConnectionLost_(f):h===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(h){return f=>{2!==this.state_&&(h===this.rx_?this.onPrimaryMessageReceived_(f):h===this.secondaryConn_?this.onSecondaryMessageReceived_(f):this.log_("message on old connection"))}}sendRequest(h){this.sendData_({t:"d",d:h})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(h){if("t"in h){const f=h.t;"a"===f?this.upgradeIfSecondaryHealthy_():"r"===f?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===f&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(h){const f=hn("t",h),v=hn("d",h);if("c"===f)this.onSecondaryControl_(v);else{if("d"!==f)throw new Error("Unknown protocol layer: "+f);this.pendingDataMessages.push(v)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(h){const f=hn("t",h),v=hn("d",h);"c"===f?this.onControl_(v):"d"===f&&this.onDataMessage_(v)}onDataMessage_(h){this.onPrimaryResponse_(),this.onMessage_(h)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(h){const f=hn("t",h);if("d"in h){const v=h.d;if("h"===f){const M=Object.assign({},v);this.repoInfo_.isUsingEmulator&&(M.h=this.repoInfo_.host),this.onHandshake_(M)}else if("n"===f){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let M=0;M<this.pendingDataMessages.length;++M)this.onDataMessage_(this.pendingDataMessages[M]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===f?this.onConnectionShutdown_(v):"r"===f?this.onReset_(v):"e"===f?It("Server Error: "+v):"o"===f?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):It("Unknown control packet command: "+f)}}onHandshake_(h){const f=h.ts,v=h.v,M=h.h;this.sessionId=h.s,this.repoInfo_.host=M,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,f),"5"!==v&&Nt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const h=this.transportManager_.upgradeTransport();h&&this.startUpgrade_(h)}startUpgrade_(h){this.secondaryConn_=new h(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=h.responsesRequiredToBeHealthy||0;const f=this.connReceiver_(this.secondaryConn_),v=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(f,v),it(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(h){this.log_("Reset packet received.  New host: "+h),this.repoInfo_.host=h,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(h,f){this.log_("Realtime connection established."),this.conn_=h,this.state_=1,this.onReady_&&(this.onReady_(f,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):it(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const h=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===h||this.rx_===h)&&this.close()}onConnectionLost_(h){this.conn_=null,h||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Re.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(h){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(h),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(h){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(h)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ds{put(h,f,v,M){}merge(h,f,v,M){}refreshAuthToken(h){}refreshAppCheckToken(h){}onDisconnectPut(h,f,v){}onDisconnectMerge(h,f,v){}onDisconnectCancel(h,f){}reportStats(h){}}class Di{constructor(h){this.allowedEvents_=h,this.listeners_={},(0,B.hu)(Array.isArray(h)&&h.length>0,"Requires a non-empty array")}trigger(h,...f){if(Array.isArray(this.listeners_[h])){const v=[...this.listeners_[h]];for(let M=0;M<v.length;M++)v[M].callback.apply(v[M].context,f)}}on(h,f,v){this.validateEventType_(h),this.listeners_[h]=this.listeners_[h]||[],this.listeners_[h].push({callback:f,context:v});const M=this.getInitialEvent(h);M&&f.apply(v,M)}off(h,f,v){this.validateEventType_(h);const M=this.listeners_[h]||[];for(let V=0;V<M.length;V++)if(M[V].callback===f&&(!v||v===M[V].context))return void M.splice(V,1)}validateEventType_(h){(0,B.hu)(this.allowedEvents_.find(f=>f===h),"Unknown event: "+h)}}class ai extends Di{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,B.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ai}getInitialEvent(h){return(0,B.hu)("online"===h,"Unknown event type: "+h),[this.online_]}currentlyOnline(){return this.online_}}class Rn{constructor(h,f){if(void 0===f){this.pieces_=h.split("/");let v=0;for(let M=0;M<this.pieces_.length;M++)this.pieces_[M].length>0&&(this.pieces_[v]=this.pieces_[M],v++);this.pieces_.length=v,this.pieceNum_=0}else this.pieces_=h,this.pieceNum_=f}toString(){let h="";for(let f=this.pieceNum_;f<this.pieces_.length;f++)""!==this.pieces_[f]&&(h+="/"+this.pieces_[f]);return h||"/"}}function Tn(){return new Rn("")}function En(m){return m.pieceNum_>=m.pieces_.length?null:m.pieces_[m.pieceNum_]}function Xr(m){return m.pieces_.length-m.pieceNum_}function xn(m){let h=m.pieceNum_;return h<m.pieces_.length&&h++,new Rn(m.pieces_,h)}function Ls(m){return m.pieceNum_<m.pieces_.length?m.pieces_[m.pieces_.length-1]:null}function qr(m,h=0){return m.pieces_.slice(m.pieceNum_+h)}function Pi(m){if(m.pieceNum_>=m.pieces_.length)return null;const h=[];for(let f=m.pieceNum_;f<m.pieces_.length-1;f++)h.push(m.pieces_[f]);return new Rn(h,0)}function zn(m,h){const f=[];for(let v=m.pieceNum_;v<m.pieces_.length;v++)f.push(m.pieces_[v]);if(h instanceof Rn)for(let v=h.pieceNum_;v<h.pieces_.length;v++)f.push(h.pieces_[v]);else{const v=h.split("/");for(let M=0;M<v.length;M++)v[M].length>0&&f.push(v[M])}return new Rn(f,0)}function $n(m){return m.pieceNum_>=m.pieces_.length}function xr(m,h){const f=En(m),v=En(h);if(null===f)return h;if(f===v)return xr(xn(m),xn(h));throw new Error("INTERNAL ERROR: innerPath ("+h+") is not within outerPath ("+m+")")}function Fi(m,h){const f=qr(m,0),v=qr(h,0);for(let M=0;M<f.length&&M<v.length;M++){const V=Rt(f[M],v[M]);if(0!==V)return V}return f.length===v.length?0:f.length<v.length?-1:1}function De(m,h){if(Xr(m)!==Xr(h))return!1;for(let f=m.pieceNum_,v=h.pieceNum_;f<=m.pieces_.length;f++,v++)if(m.pieces_[f]!==h.pieces_[v])return!1;return!0}function tt(m,h){let f=m.pieceNum_,v=h.pieceNum_;if(Xr(m)>Xr(h))return!1;for(;f<m.pieces_.length;){if(m.pieces_[f]!==h.pieces_[v])return!1;++f,++v}return!0}class Ke{constructor(h,f){this.errorPrefix_=f,this.parts_=qr(h,0),this.byteLength_=Math.max(1,this.parts_.length);for(let v=0;v<this.parts_.length;v++)this.byteLength_+=(0,B.ug)(this.parts_[v]);Vt(this)}}function Vt(m){if(m.byteLength_>768)throw new Error(m.errorPrefix_+"has a key path longer than 768 bytes ("+m.byteLength_+").");if(m.parts_.length>32)throw new Error(m.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Bn(m))}function Bn(m){return 0===m.parts_.length?"":"in property '"+m.parts_.join(".")+"'"}class Ar extends Di{constructor(){let h,f;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(f="visibilitychange",h="hidden"):void 0!==document.mozHidden?(f="mozvisibilitychange",h="mozHidden"):void 0!==document.msHidden?(f="msvisibilitychange",h="msHidden"):void 0!==document.webkitHidden&&(f="webkitvisibilitychange",h="webkitHidden")),this.visible_=!0,f&&document.addEventListener(f,()=>{const v=!document[h];v!==this.visible_&&(this.visible_=v,this.trigger("visible",v))},!1)}static getInstance(){return new Ar}getInitialEvent(h){return(0,B.hu)("visible"===h,"Unknown event type: "+h),[this.visible_]}}const Sr=1e3;let mo,Gs=(()=>{class m extends ds{constructor(f,v,M,V,K,ce,we,Ne){if(super(),this.repoInfo_=f,this.applicationId_=v,this.onDataUpdate_=M,this.onConnectStatus_=V,this.onServerInfoUpdate_=K,this.authTokenProvider_=ce,this.appCheckTokenProvider_=we,this.authOverride_=Ne,this.id=m.nextPersistentConnectionId_++,this.log_=yt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Sr,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Ne&&!(0,B.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ar.getInstance().on("visible",this.onVisible_,this),-1===f.host.indexOf("fblocal")&&ai.getInstance().on("online",this.onOnline_,this)}sendRequest(f,v,M){const V=++this.requestNumber_,K={r:V,a:f,b:v};this.log_((0,B.Wl)(K)),(0,B.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(K),M&&(this.requestCBHash_[V]=M)}get(f){this.initConnection_();const v=new B.BH,M={p:f._path.toString(),q:f._queryObject};return this.outstandingGets_.push({action:"g",request:M,onComplete:ce=>{const we=ce.d;"ok"===ce.s?v.resolve(we):v.reject(we)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),v.promise}listen(f,v,M,V){this.initConnection_();const K=f._queryIdentifier,ce=f._path.toString();this.log_("Listen called for "+ce+" "+K),this.listens.has(ce)||this.listens.set(ce,new Map),(0,B.hu)(f._queryParams.isDefault()||!f._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,B.hu)(!this.listens.get(ce).has(K),"listen() called twice for same path/queryId.");const we={onComplete:V,hashFn:v,query:f,tag:M};this.listens.get(ce).set(K,we),this.connected_&&this.sendListen_(we)}sendGet_(f){const v=this.outstandingGets_[f];this.sendRequest("g",v.request,M=>{delete this.outstandingGets_[f],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),v.onComplete&&v.onComplete(M)})}sendListen_(f){const v=f.query,M=v._path.toString(),V=v._queryIdentifier;this.log_("Listen on "+M+" for "+V);const K={p:M};f.tag&&(K.q=v._queryObject,K.t=f.tag),K.h=f.hashFn(),this.sendRequest("q",K,we=>{const Ne=we.d,_t=we.s;m.warnOnListenWarnings_(Ne,v),(this.listens.get(M)&&this.listens.get(M).get(V))===f&&(this.log_("listen response",we),"ok"!==_t&&this.removeListen_(M,V),f.onComplete&&f.onComplete(_t,Ne))})}static warnOnListenWarnings_(f,v){if(f&&"object"==typeof f&&(0,B.r3)(f,"w")){const M=(0,B.DV)(f,"w");if(Array.isArray(M)&&~M.indexOf("no_index")){const V='".indexOn": "'+v._queryParams.getIndex().toString()+'"',K=v._path.toString();Nt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${V} at ${K} to your security rules for better performance.`)}}}refreshAuthToken(f){this.authToken_=f,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(f)}reduceReconnectDelayIfAdminCredential_(f){(f&&40===f.length||(0,B.GJ)(f))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(f){this.appCheckToken_=f,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const f=this.authToken_,v=(0,B.w9)(f)?"auth":"gauth",M={cred:f};null===this.authOverride_?M.noauth=!0:"object"==typeof this.authOverride_&&(M.authvar=this.authOverride_),this.sendRequest(v,M,V=>{const K=V.s,ce=V.d||"error";this.authToken_===f&&("ok"===K?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(K,ce))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},f=>{const v=f.s,M=f.d||"error";"ok"===v?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(v,M)})}unlisten(f,v){const M=f._path.toString(),V=f._queryIdentifier;this.log_("Unlisten called for "+M+" "+V),(0,B.hu)(f._queryParams.isDefault()||!f._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(M,V)&&this.connected_&&this.sendUnlisten_(M,V,f._queryObject,v)}sendUnlisten_(f,v,M,V){this.log_("Unlisten on "+f+" for "+v);const K={p:f};V&&(K.q=M,K.t=V),this.sendRequest("n",K)}onDisconnectPut(f,v,M){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",f,v,M):this.onDisconnectRequestQueue_.push({pathString:f,action:"o",data:v,onComplete:M})}onDisconnectMerge(f,v,M){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",f,v,M):this.onDisconnectRequestQueue_.push({pathString:f,action:"om",data:v,onComplete:M})}onDisconnectCancel(f,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",f,null,v):this.onDisconnectRequestQueue_.push({pathString:f,action:"oc",data:null,onComplete:v})}sendOnDisconnect_(f,v,M,V){const K={p:v,d:M};this.log_("onDisconnect "+f,K),this.sendRequest(f,K,ce=>{V&&setTimeout(()=>{V(ce.s,ce.d)},Math.floor(0))})}put(f,v,M,V){this.putInternal("p",f,v,M,V)}merge(f,v,M,V){this.putInternal("m",f,v,M,V)}putInternal(f,v,M,V,K){this.initConnection_();const ce={p:v,d:M};void 0!==K&&(ce.h=K),this.outstandingPuts_.push({action:f,request:ce,onComplete:V}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+v)}sendPut_(f){const v=this.outstandingPuts_[f].action,M=this.outstandingPuts_[f].request,V=this.outstandingPuts_[f].onComplete;this.outstandingPuts_[f].queued=this.connected_,this.sendRequest(v,M,K=>{this.log_(v+" response",K),delete this.outstandingPuts_[f],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),V&&V(K.s,K.d)})}reportStats(f){if(this.connected_){const v={c:f};this.log_("reportStats",v),this.sendRequest("s",v,M=>{"ok"!==M.s&&this.log_("reportStats","Error sending stats: "+M.d)})}}onDataMessage_(f){if("r"in f){this.log_("from server: "+(0,B.Wl)(f));const v=f.r,M=this.requestCBHash_[v];M&&(delete this.requestCBHash_[v],M(f.b))}else{if("error"in f)throw"A server-side error has occurred: "+f.error;"a"in f&&this.onDataPush_(f.a,f.b)}}onDataPush_(f,v){this.log_("handleServerMessage",f,v),"d"===f?this.onDataUpdate_(v.p,v.d,!1,v.t):"m"===f?this.onDataUpdate_(v.p,v.d,!0,v.t):"c"===f?this.onListenRevoked_(v.p,v.q):"ac"===f?this.onAuthRevoked_(v.s,v.d):"apc"===f?this.onAppCheckRevoked_(v.s,v.d):"sd"===f?this.onSecurityDebugPacket_(v):It("Unrecognized action received from server: "+(0,B.Wl)(f)+"\nAre you using the latest client?")}onReady_(f,v){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(f),this.lastSessionId=v,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(f){(0,B.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(f))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(f){f&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Sr,this.realtime_||this.scheduleConnect_(0)),this.visible_=f}onOnline_(f){f?(this.log_("Browser went online."),this.reconnectDelay_=Sr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Sr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const f=(new Date).getTime()-this.lastConnectionAttemptTime_;let v=Math.max(0,this.reconnectDelay_-f);v=Math.random()*v,this.log_("Trying to reconnect in "+v+"ms"),this.scheduleConnect_(v),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var f=this;return(0,g.Z)(function*(){if(f.shouldReconnect_()){f.log_("Making a connection attempt"),f.lastConnectionAttemptTime_=(new Date).getTime(),f.lastConnectionEstablishedTime_=null;const v=f.onDataMessage_.bind(f),M=f.onReady_.bind(f),V=f.onRealtimeDisconnect_.bind(f),K=f.id+":"+m.nextConnectionId_++,ce=f.lastSessionId;let we=!1,Ne=null;const _t=function(){Ne?Ne.close():(we=!0,V())};f.realtime_={close:_t,sendRequest:function(yn){(0,B.hu)(Ne,"sendRequest call when we're not connected not allowed."),Ne.sendRequest(yn)}};const Mt=f.forceTokenRefresh_;f.forceTokenRefresh_=!1;try{const[yn,Yn]=yield Promise.all([f.authTokenProvider_.getToken(Mt),f.appCheckTokenProvider_.getToken(Mt)]);we?Oe("getToken() completed but was canceled"):(Oe("getToken() completed. Creating connection."),f.authToken_=yn&&yn.accessToken,f.appCheckToken_=Yn&&Yn.token,Ne=new Hi(K,f.repoInfo_,f.applicationId_,f.appCheckToken_,f.authToken_,v,M,V,ii=>{Nt(ii+" ("+f.repoInfo_.toString()+")"),f.interrupt("server_kill")},ce))}catch(yn){f.log_("Failed to get token: "+yn),we||(f.repoInfo_.nodeAdmin&&Nt(yn),_t())}}})()}interrupt(f){Oe("Interrupting connection for reason: "+f),this.interruptReasons_[f]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(f){Oe("Resuming connection for reason: "+f),delete this.interruptReasons_[f],(0,B.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Sr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(f){const v=f-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:v})}cancelSentTransactions_(){for(let f=0;f<this.outstandingPuts_.length;f++){const v=this.outstandingPuts_[f];v&&"h"in v.request&&v.queued&&(v.onComplete&&v.onComplete("disconnect"),delete this.outstandingPuts_[f],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(f,v){let M;M=v?v.map(K=>nr(K)).join("$"):"default";const V=this.removeListen_(f,M);V&&V.onComplete&&V.onComplete("permission_denied")}removeListen_(f,v){const M=new Rn(f).toString();let V;if(this.listens.has(M)){const K=this.listens.get(M);V=K.get(v),K.delete(v),0===K.size&&this.listens.delete(M)}else V=void 0;return V}onAuthRevoked_(f,v){Oe("Auth token revoked: "+f+"/"+v),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===f||"permission_denied"===f)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(f,v){Oe("App check token revoked: "+f+"/"+v),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===f||"permission_denied"===f)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(f){this.securityDebugCallback_?this.securityDebugCallback_(f):"msg"in f&&console.log("FIREBASE: "+f.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const f of this.listens.values())for(const v of f.values())this.sendListen_(v);for(let f=0;f<this.outstandingPuts_.length;f++)this.outstandingPuts_[f]&&this.sendPut_(f);for(;this.onDisconnectRequestQueue_.length;){const f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(let f=0;f<this.outstandingGets_.length;f++)this.outstandingGets_[f]&&this.sendGet_(f)}sendConnectStats_(){const f={};let v="js";(0,B.Yr)()&&(v=this.repoInfo_.nodeAdmin?"admin_node":"node"),f["sdk."+v+"."+z.replace(/\./g,"-")]=1,(0,B.uI)()?f["framework.cordova"]=1:(0,B.b$)()&&(f["framework.reactnative"]=1),this.reportStats(f)}shouldReconnect_(){const f=ai.getInstance().currentlyOnline();return(0,B.xb)(this.interruptReasons_)&&f}}return m.nextPersistentConnectionId_=0,m.nextConnectionId_=0,m})();class rr{constructor(h,f){this.name=h,this.node=f}static Wrap(h,f){return new rr(h,f)}}class bs{getCompare(){return this.compare.bind(this)}indexedValueChanged(h,f){const v=new rr(ut,h),M=new rr(ut,f);return 0!==this.compare(v,M)}minPost(){return rr.MIN}}class Zi extends bs{static get __EMPTY_NODE(){return mo}static set __EMPTY_NODE(h){mo=h}compare(h,f){return Rt(h.name,f.name)}isDefinedOn(h){throw(0,B.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(h,f){return!1}minPost(){return rr.MIN}maxPost(){return new rr(qe,mo)}makePost(h,f){return(0,B.hu)("string"==typeof h,"KeyIndex indexValue must always be a string."),new rr(h,mo)}toString(){return".key"}}const pi=new Zi;class As{constructor(h,f,v,M,V=null){this.isReverse_=M,this.resultGenerator_=V,this.nodeStack_=[];let K=1;for(;!h.isEmpty();)if(K=f?v(h.key,f):1,M&&(K*=-1),K<0)h=this.isReverse_?h.left:h.right;else{if(0===K){this.nodeStack_.push(h);break}this.nodeStack_.push(h),h=this.isReverse_?h.right:h.left}}getNext(){if(0===this.nodeStack_.length)return null;let f,h=this.nodeStack_.pop();if(f=this.resultGenerator_?this.resultGenerator_(h.key,h.value):{key:h.key,value:h.value},this.isReverse_)for(h=h.left;!h.isEmpty();)this.nodeStack_.push(h),h=h.right;else for(h=h.right;!h.isEmpty();)this.nodeStack_.push(h),h=h.left;return f}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const h=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(h.key,h.value):{key:h.key,value:h.value}}}let Ks,gi=(()=>{class m{constructor(f,v,M,V,K){this.key=f,this.value=v,this.color=null!=M?M:m.RED,this.left=null!=V?V:Jn.EMPTY_NODE,this.right=null!=K?K:Jn.EMPTY_NODE}copy(f,v,M,V,K){return new m(null!=f?f:this.key,null!=v?v:this.value,null!=M?M:this.color,null!=V?V:this.left,null!=K?K:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(f){return this.left.inorderTraversal(f)||!!f(this.key,this.value)||this.right.inorderTraversal(f)}reverseTraversal(f){return this.right.reverseTraversal(f)||f(this.key,this.value)||this.left.reverseTraversal(f)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(f,v,M){let V=this;const K=M(f,V.key);return V=K<0?V.copy(null,null,null,V.left.insert(f,v,M),null):0===K?V.copy(null,v,null,null,null):V.copy(null,null,null,null,V.right.insert(f,v,M)),V.fixUp_()}removeMin_(){if(this.left.isEmpty())return Jn.EMPTY_NODE;let f=this;return!f.left.isRed_()&&!f.left.left.isRed_()&&(f=f.moveRedLeft_()),f=f.copy(null,null,null,f.left.removeMin_(),null),f.fixUp_()}remove(f,v){let M,V;if(M=this,v(f,M.key)<0)!M.left.isEmpty()&&!M.left.isRed_()&&!M.left.left.isRed_()&&(M=M.moveRedLeft_()),M=M.copy(null,null,null,M.left.remove(f,v),null);else{if(M.left.isRed_()&&(M=M.rotateRight_()),!M.right.isEmpty()&&!M.right.isRed_()&&!M.right.left.isRed_()&&(M=M.moveRedRight_()),0===v(f,M.key)){if(M.right.isEmpty())return Jn.EMPTY_NODE;V=M.right.min_(),M=M.copy(V.key,V.value,null,null,M.right.removeMin_())}M=M.copy(null,null,null,null,M.right.remove(f,v))}return M.fixUp_()}isRed_(){return this.color}fixUp_(){let f=this;return f.right.isRed_()&&!f.left.isRed_()&&(f=f.rotateLeft_()),f.left.isRed_()&&f.left.left.isRed_()&&(f=f.rotateRight_()),f.left.isRed_()&&f.right.isRed_()&&(f=f.colorFlip_()),f}moveRedLeft_(){let f=this.colorFlip_();return f.right.left.isRed_()&&(f=f.copy(null,null,null,null,f.right.rotateRight_()),f=f.rotateLeft_(),f=f.colorFlip_()),f}moveRedRight_(){let f=this.colorFlip_();return f.left.left.isRed_()&&(f=f.rotateRight_(),f=f.colorFlip_()),f}rotateLeft_(){const f=this.copy(null,null,m.RED,null,this.right.left);return this.right.copy(null,null,this.color,f,null)}rotateRight_(){const f=this.copy(null,null,m.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,f)}colorFlip_(){const f=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,f,v)}checkMaxDepth_(){const f=this.check_();return Math.pow(2,f)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const f=this.left.check_();if(f!==this.right.check_())throw new Error("Black depths differ");return f+(this.isRed_()?0:1)}}return m.RED=!0,m.BLACK=!1,m})();class Jn{constructor(h,f=Jn.EMPTY_NODE){this.comparator_=h,this.root_=f}insert(h,f){return new Jn(this.comparator_,this.root_.insert(h,f,this.comparator_).copy(null,null,gi.BLACK,null,null))}remove(h){return new Jn(this.comparator_,this.root_.remove(h,this.comparator_).copy(null,null,gi.BLACK,null,null))}get(h){let f,v=this.root_;for(;!v.isEmpty();){if(f=this.comparator_(h,v.key),0===f)return v.value;f<0?v=v.left:f>0&&(v=v.right)}return null}getPredecessorKey(h){let f,v=this.root_,M=null;for(;!v.isEmpty();){if(f=this.comparator_(h,v.key),0===f){if(v.left.isEmpty())return M?M.key:null;for(v=v.left;!v.right.isEmpty();)v=v.right;return v.key}f<0?v=v.left:f>0&&(M=v,v=v.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(h){return this.root_.inorderTraversal(h)}reverseTraversal(h){return this.root_.reverseTraversal(h)}getIterator(h){return new As(this.root_,null,this.comparator_,!1,h)}getIteratorFrom(h,f){return new As(this.root_,h,this.comparator_,!1,f)}getReverseIteratorFrom(h,f){return new As(this.root_,h,this.comparator_,!0,f)}getReverseIterator(h){return new As(this.root_,null,this.comparator_,!0,h)}}function hs(m,h){return Rt(m.name,h.name)}function Ws(m,h){return Rt(m,h)}Jn.EMPTY_NODE=new class ki{copy(h,f,v,M,V){return this}insert(h,f,v){return new gi(h,f,null)}remove(h,f){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(h){return!1}reverseTraversal(h){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const xo=function(m){return"number"==typeof m?"number:"+vr(m):"string:"+m},zs=function(m){if(m.isLeafNode()){const h=m.val();(0,B.hu)("string"==typeof h||"number"==typeof h||"object"==typeof h&&(0,B.r3)(h,".sv"),"Priority must be a string or number.")}else(0,B.hu)(m===Ks||m.isEmpty(),"priority of unexpected type.");(0,B.hu)(m===Ks||m.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let yo,Pa,li,Es=(()=>{class m{constructor(f,v=m.__childrenNodeConstructor.EMPTY_NODE){this.value_=f,this.priorityNode_=v,this.lazyHash_=null,(0,B.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),zs(this.priorityNode_)}static set __childrenNodeConstructor(f){yo=f}static get __childrenNodeConstructor(){return yo}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(f){return new m(this.value_,f)}getImmediateChild(f){return".priority"===f?this.priorityNode_:m.__childrenNodeConstructor.EMPTY_NODE}getChild(f){return $n(f)?this:".priority"===En(f)?this.priorityNode_:m.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(f,v){return null}updateImmediateChild(f,v){return".priority"===f?this.updatePriority(v):v.isEmpty()&&".priority"!==f?this:m.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(f,v).updatePriority(this.priorityNode_)}updateChild(f,v){const M=En(f);return null===M?v:v.isEmpty()&&".priority"!==M?this:((0,B.hu)(".priority"!==M||1===Xr(f),".priority must be the last token in a path"),this.updateImmediateChild(M,m.__childrenNodeConstructor.EMPTY_NODE.updateChild(xn(f),v)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(f,v){return!1}val(f){return f&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let f="";this.priorityNode_.isEmpty()||(f+="priority:"+xo(this.priorityNode_.val())+":");const v=typeof this.value_;f+=v+":",f+="number"===v?vr(this.value_):this.value_,this.lazyHash_=He(f)}return this.lazyHash_}getValue(){return this.value_}compareTo(f){return f===m.__childrenNodeConstructor.EMPTY_NODE?1:f instanceof m.__childrenNodeConstructor?-1:((0,B.hu)(f.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(f))}compareToLeafNode_(f){const v=typeof f.value_,M=typeof this.value_,V=m.VALUE_TYPE_ORDER.indexOf(v),K=m.VALUE_TYPE_ORDER.indexOf(M);return(0,B.hu)(V>=0,"Unknown leaf type: "+v),(0,B.hu)(K>=0,"Unknown leaf type: "+M),V===K?"object"===M?0:this.value_<f.value_?-1:this.value_===f.value_?0:1:K-V}withIndex(){return this}isIndexed(){return!0}equals(f){if(f===this)return!0;if(f.isLeafNode()){const v=f;return this.value_===v.value_&&this.priorityNode_.equals(v.priorityNode_)}return!1}}return m.VALUE_TYPE_ORDER=["object","boolean","number","string"],m})();const Nr=new class zo extends bs{compare(h,f){const v=h.node.getPriority(),M=f.node.getPriority(),V=v.compareTo(M);return 0===V?Rt(h.name,f.name):V}isDefinedOn(h){return!h.getPriority().isEmpty()}indexedValueChanged(h,f){return!h.getPriority().equals(f.getPriority())}minPost(){return rr.MIN}maxPost(){return new rr(qe,new Es("[PRIORITY-POST]",li))}makePost(h,f){const v=Pa(h);return new rr(f,new Es("[PRIORITY-POST]",v))}toString(){return".priority"}},fa=Math.log(2);class Zr{constructor(h){this.count=parseInt(Math.log(h+1)/fa,10),this.current_=this.count-1;const M=(V=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=h+1&M}nextBitIsOne(){const h=!(this.bits_&1<<this.current_);return this.current_--,h}}const No=function(m,h,f,v){m.sort(h);const M=function(we,Ne){const _t=Ne-we;let Dt,Mt;if(0===_t)return null;if(1===_t)return Dt=m[we],Mt=f?f(Dt):Dt,new gi(Mt,Dt.node,gi.BLACK,null,null);{const yn=parseInt(_t/2,10)+we,Yn=M(we,yn),ii=M(yn+1,Ne);return Dt=m[yn],Mt=f?f(Dt):Dt,new gi(Mt,Dt.node,gi.BLACK,Yn,ii)}},ce=function(we){let Ne=null,_t=null,Dt=m.length;const Mt=function(Yn,ii){const bo=Dt-Yn,Fl=Dt;Dt-=Yn;const ls=M(bo+1,Fl),yc=m[bo],Ed=f?f(yc):yc;yn(new gi(Ed,yc.node,ii,null,ls))},yn=function(Yn){Ne?(Ne.left=Yn,Ne=Yn):(_t=Yn,Ne=Yn)};for(let Yn=0;Yn<we.count;++Yn){const ii=we.nextBitIsOne(),bo=Math.pow(2,we.count-(Yn+1));ii?Mt(bo,gi.BLACK):(Mt(bo,gi.BLACK),Mt(bo,gi.RED))}return _t}(new Zr(m.length));return new Jn(v||h,ce)};let Lo;const no={};class ei{constructor(h,f){this.indexes_=h,this.indexSet_=f}static get Default(){return(0,B.hu)(no&&Nr,"ChildrenNode.ts has not been loaded"),Lo=Lo||new ei({".priority":no},{".priority":Nr}),Lo}get(h){const f=(0,B.DV)(this.indexes_,h);if(!f)throw new Error("No index defined for "+h);return f instanceof Jn?f:null}hasIndex(h){return(0,B.r3)(this.indexSet_,h.toString())}addIndex(h,f){(0,B.hu)(h!==pi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const v=[];let M=!1;const V=f.getIterator(rr.Wrap);let ce,K=V.getNext();for(;K;)M=M||h.isDefinedOn(K.node),v.push(K),K=V.getNext();ce=M?No(v,h.getCompare()):no;const we=h.toString(),Ne=Object.assign({},this.indexSet_);Ne[we]=h;const _t=Object.assign({},this.indexes_);return _t[we]=ce,new ei(_t,Ne)}addToIndexes(h,f){const v=(0,B.UI)(this.indexes_,(M,V)=>{const K=(0,B.DV)(this.indexSet_,V);if((0,B.hu)(K,"Missing index implementation for "+V),M===no){if(K.isDefinedOn(h.node)){const ce=[],we=f.getIterator(rr.Wrap);let Ne=we.getNext();for(;Ne;)Ne.name!==h.name&&ce.push(Ne),Ne=we.getNext();return ce.push(h),No(ce,K.getCompare())}return no}{const ce=f.get(h.name);let we=M;return ce&&(we=we.remove(new rr(h.name,ce))),we.insert(h,h.node)}});return new ei(v,this.indexSet_)}removeFromIndexes(h,f){const v=(0,B.UI)(this.indexes_,M=>{if(M===no)return M;{const V=f.get(h.name);return V?M.remove(new rr(h.name,V)):M}});return new ei(v,this.indexSet_)}}let fs,pn=(()=>{class m{constructor(f,v,M){this.children_=f,this.priorityNode_=v,this.indexMap_=M,this.lazyHash_=null,this.priorityNode_&&zs(this.priorityNode_),this.children_.isEmpty()&&(0,B.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return fs||(fs=new m(new Jn(Ws),null,ei.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||fs}updatePriority(f){return this.children_.isEmpty()?this:new m(this.children_,f,this.indexMap_)}getImmediateChild(f){if(".priority"===f)return this.getPriority();{const v=this.children_.get(f);return null===v?fs:v}}getChild(f){const v=En(f);return null===v?this:this.getImmediateChild(v).getChild(xn(f))}hasChild(f){return null!==this.children_.get(f)}updateImmediateChild(f,v){if((0,B.hu)(v,"We should always be passing snapshot nodes"),".priority"===f)return this.updatePriority(v);{const M=new rr(f,v);let V,K;v.isEmpty()?(V=this.children_.remove(f),K=this.indexMap_.removeFromIndexes(M,this.children_)):(V=this.children_.insert(f,v),K=this.indexMap_.addToIndexes(M,this.children_));const ce=V.isEmpty()?fs:this.priorityNode_;return new m(V,ce,K)}}updateChild(f,v){const M=En(f);if(null===M)return v;{(0,B.hu)(".priority"!==En(f)||1===Xr(f),".priority must be the last token in a path");const V=this.getImmediateChild(M).updateChild(xn(f),v);return this.updateImmediateChild(M,V)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(f){if(this.isEmpty())return null;const v={};let M=0,V=0,K=!0;if(this.forEachChild(Nr,(ce,we)=>{v[ce]=we.val(f),M++,K&&m.INTEGER_REGEXP_.test(ce)?V=Math.max(V,Number(ce)):K=!1}),!f&&K&&V<2*M){const ce=[];for(const we in v)ce[we]=v[we];return ce}return f&&!this.getPriority().isEmpty()&&(v[".priority"]=this.getPriority().val()),v}hash(){if(null===this.lazyHash_){let f="";this.getPriority().isEmpty()||(f+="priority:"+xo(this.getPriority().val())+":"),this.forEachChild(Nr,(v,M)=>{const V=M.hash();""!==V&&(f+=":"+v+":"+V)}),this.lazyHash_=""===f?"":He(f)}return this.lazyHash_}getPredecessorChildName(f,v,M){const V=this.resolveIndex_(M);if(V){const K=V.getPredecessorKey(new rr(f,v));return K?K.name:null}return this.children_.getPredecessorKey(f)}getFirstChildName(f){const v=this.resolveIndex_(f);if(v){const M=v.minKey();return M&&M.name}return this.children_.minKey()}getFirstChild(f){const v=this.getFirstChildName(f);return v?new rr(v,this.children_.get(v)):null}getLastChildName(f){const v=this.resolveIndex_(f);if(v){const M=v.maxKey();return M&&M.name}return this.children_.maxKey()}getLastChild(f){const v=this.getLastChildName(f);return v?new rr(v,this.children_.get(v)):null}forEachChild(f,v){const M=this.resolveIndex_(f);return M?M.inorderTraversal(V=>v(V.name,V.node)):this.children_.inorderTraversal(v)}getIterator(f){return this.getIteratorFrom(f.minPost(),f)}getIteratorFrom(f,v){const M=this.resolveIndex_(v);if(M)return M.getIteratorFrom(f,V=>V);{const V=this.children_.getIteratorFrom(f.name,rr.Wrap);let K=V.peek();for(;null!=K&&v.compare(K,f)<0;)V.getNext(),K=V.peek();return V}}getReverseIterator(f){return this.getReverseIteratorFrom(f.maxPost(),f)}getReverseIteratorFrom(f,v){const M=this.resolveIndex_(v);if(M)return M.getReverseIteratorFrom(f,V=>V);{const V=this.children_.getReverseIteratorFrom(f.name,rr.Wrap);let K=V.peek();for(;null!=K&&v.compare(K,f)>0;)V.getNext(),K=V.peek();return V}}compareTo(f){return this.isEmpty()?f.isEmpty()?0:-1:f.isLeafNode()||f.isEmpty()?1:f===or?-1:0}withIndex(f){if(f===pi||this.indexMap_.hasIndex(f))return this;{const v=this.indexMap_.addIndex(f,this.children_);return new m(this.children_,this.priorityNode_,v)}}isIndexed(f){return f===pi||this.indexMap_.hasIndex(f)}equals(f){if(f===this)return!0;if(f.isLeafNode())return!1;{const v=f;if(this.getPriority().equals(v.getPriority())){if(this.children_.count()===v.children_.count()){const M=this.getIterator(Nr),V=v.getIterator(Nr);let K=M.getNext(),ce=V.getNext();for(;K&&ce;){if(K.name!==ce.name||!K.node.equals(ce.node))return!1;K=M.getNext(),ce=V.getNext()}return null===K&&null===ce}return!1}return!1}}resolveIndex_(f){return f===pi?null:this.indexMap_.get(f.toString())}}return m.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,m})();const or=new class Ys extends pn{constructor(){super(new Jn(Ws),pn.EMPTY_NODE,ei.Default)}compareTo(h){return h===this?0:1}equals(h){return h===this}getPriority(){return this}getImmediateChild(h){return pn.EMPTY_NODE}isEmpty(){return!1}};function Dr(m,h=null){if(null===m)return pn.EMPTY_NODE;if("object"==typeof m&&".priority"in m&&(h=m[".priority"]),(0,B.hu)(null===h||"string"==typeof h||"number"==typeof h||"object"==typeof h&&".sv"in h,"Invalid priority type found: "+typeof h),"object"==typeof m&&".value"in m&&null!==m[".value"]&&(m=m[".value"]),"object"!=typeof m||".sv"in m)return new Es(m,Dr(h));if(m instanceof Array){let f=pn.EMPTY_NODE;return St(m,(v,M)=>{if((0,B.r3)(m,v)&&"."!==v.substring(0,1)){const V=Dr(M);(V.isLeafNode()||!V.isEmpty())&&(f=f.updateImmediateChild(v,V))}}),f.updatePriority(Dr(h))}{const f=[];let v=!1;if(St(m,(K,ce)=>{if("."!==K.substring(0,1)){const we=Dr(ce);we.isEmpty()||(v=v||!we.getPriority().isEmpty(),f.push(new rr(K,we)))}}),0===f.length)return pn.EMPTY_NODE;const V=No(f,hs,K=>K.name,Ws);if(v){const K=No(f,Nr.getCompare());return new pn(V,Dr(h),new ei({".priority":K},{".priority":Nr}))}return new pn(V,Dr(h),ei.Default)}}Object.defineProperties(rr,{MIN:{value:new rr(ut,pn.EMPTY_NODE)},MAX:{value:new rr(qe,or)}}),Zi.__EMPTY_NODE=pn.EMPTY_NODE,Es.__childrenNodeConstructor=pn,function Ro(m){Ks=m}(or),function ts(m){li=m}(or),function Ui(m){Pa=m}(Dr);class pa extends bs{constructor(h){super(),this.indexPath_=h,(0,B.hu)(!$n(h)&&".priority"!==En(h),"Can't create PathIndex with empty path or .priority key")}extractChild(h){return h.getChild(this.indexPath_)}isDefinedOn(h){return!h.getChild(this.indexPath_).isEmpty()}compare(h,f){const v=this.extractChild(h.node),M=this.extractChild(f.node),V=v.compareTo(M);return 0===V?Rt(h.name,f.name):V}makePost(h,f){const v=Dr(h),M=pn.EMPTY_NODE.updateChild(this.indexPath_,v);return new rr(f,M)}maxPost(){const h=pn.EMPTY_NODE.updateChild(this.indexPath_,or);return new rr(qe,h)}toString(){return qr(this.indexPath_,0).join("/")}}const Fo=new class ns extends bs{compare(h,f){const v=h.node.compareTo(f.node);return 0===v?Rt(h.name,f.name):v}isDefinedOn(h){return!0}indexedValueChanged(h,f){return!h.equals(f)}minPost(){return rr.MIN}maxPost(){return rr.MAX}makePost(h,f){const v=Dr(h);return new rr(f,v)}toString(){return".value"}};function Ms(m){return{type:"value",snapshotNode:m}}function wn(m,h){return{type:"child_added",snapshotNode:h,childName:m}}function Ds(m,h){return{type:"child_removed",snapshotNode:h,childName:m}}function Yo(m,h,f){return{type:"child_changed",snapshotNode:h,childName:m,oldSnap:f}}class Cs{constructor(h){this.index_=h}updateChild(h,f,v,M,V,K){(0,B.hu)(h.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ce=h.getImmediateChild(f);return ce.getChild(M).equals(v.getChild(M))&&ce.isEmpty()===v.isEmpty()||(null!=K&&(v.isEmpty()?h.hasChild(f)?K.trackChildChange(Ds(f,ce)):(0,B.hu)(h.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ce.isEmpty()?K.trackChildChange(wn(f,v)):K.trackChildChange(Yo(f,v,ce))),h.isLeafNode()&&v.isEmpty())?h:h.updateImmediateChild(f,v).withIndex(this.index_)}updateFullNode(h,f,v){return null!=v&&(h.isLeafNode()||h.forEachChild(Nr,(M,V)=>{f.hasChild(M)||v.trackChildChange(Ds(M,V))}),f.isLeafNode()||f.forEachChild(Nr,(M,V)=>{if(h.hasChild(M)){const K=h.getImmediateChild(M);K.equals(V)||v.trackChildChange(Yo(M,V,K))}else v.trackChildChange(wn(M,V))})),f.withIndex(this.index_)}updatePriority(h,f){return h.isEmpty()?pn.EMPTY_NODE:h.updatePriority(f)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ji{constructor(h){this.indexedFilter_=new Cs(h.getIndex()),this.index_=h.getIndex(),this.startPost_=Ji.getStartPost_(h),this.endPost_=Ji.getEndPost_(h),this.startIsInclusive_=!h.startAfterSet_,this.endIsInclusive_=!h.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(h){const f=this.startIsInclusive_?this.index_.compare(this.getStartPost(),h)<=0:this.index_.compare(this.getStartPost(),h)<0,v=this.endIsInclusive_?this.index_.compare(h,this.getEndPost())<=0:this.index_.compare(h,this.getEndPost())<0;return f&&v}updateChild(h,f,v,M,V,K){return this.matches(new rr(f,v))||(v=pn.EMPTY_NODE),this.indexedFilter_.updateChild(h,f,v,M,V,K)}updateFullNode(h,f,v){f.isLeafNode()&&(f=pn.EMPTY_NODE);let M=f.withIndex(this.index_);M=M.updatePriority(pn.EMPTY_NODE);const V=this;return f.forEachChild(Nr,(K,ce)=>{V.matches(new rr(K,ce))||(M=M.updateImmediateChild(K,pn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(h,M,v)}updatePriority(h,f){return h}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(h){if(h.hasStart()){const f=h.getIndexStartName();return h.getIndex().makePost(h.getIndexStartValue(),f)}return h.getIndex().minPost()}static getEndPost_(h){if(h.hasEnd()){const f=h.getIndexEndName();return h.getIndex().makePost(h.getIndexEndValue(),f)}return h.getIndex().maxPost()}}class ko{constructor(h){this.withinDirectionalStart=f=>this.reverse_?this.withinEndPost(f):this.withinStartPost(f),this.withinDirectionalEnd=f=>this.reverse_?this.withinStartPost(f):this.withinEndPost(f),this.withinStartPost=f=>{const v=this.index_.compare(this.rangedFilter_.getStartPost(),f);return this.startIsInclusive_?v<=0:v<0},this.withinEndPost=f=>{const v=this.index_.compare(f,this.rangedFilter_.getEndPost());return this.endIsInclusive_?v<=0:v<0},this.rangedFilter_=new Ji(h),this.index_=h.getIndex(),this.limit_=h.getLimit(),this.reverse_=!h.isViewFromLeft(),this.startIsInclusive_=!h.startAfterSet_,this.endIsInclusive_=!h.endBeforeSet_}updateChild(h,f,v,M,V,K){return this.rangedFilter_.matches(new rr(f,v))||(v=pn.EMPTY_NODE),h.getImmediateChild(f).equals(v)?h:h.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(h,f,v,M,V,K):this.fullLimitUpdateChild_(h,f,v,V,K)}updateFullNode(h,f,v){let M;if(f.isLeafNode()||f.isEmpty())M=pn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<f.numChildren()&&f.isIndexed(this.index_)){let V;M=pn.EMPTY_NODE.withIndex(this.index_),V=this.reverse_?f.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):f.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let K=0;for(;V.hasNext()&&K<this.limit_;){const ce=V.getNext();if(this.withinDirectionalStart(ce)){if(!this.withinDirectionalEnd(ce))break;M=M.updateImmediateChild(ce.name,ce.node),K++}}}else{let V;M=f.withIndex(this.index_),M=M.updatePriority(pn.EMPTY_NODE),V=this.reverse_?M.getReverseIterator(this.index_):M.getIterator(this.index_);let K=0;for(;V.hasNext();){const ce=V.getNext();K<this.limit_&&this.withinDirectionalStart(ce)&&this.withinDirectionalEnd(ce)?K++:M=M.updateImmediateChild(ce.name,pn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(h,M,v)}updatePriority(h,f){return h}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(h,f,v,M,V){let K;if(this.reverse_){const Dt=this.index_.getCompare();K=(Mt,yn)=>Dt(yn,Mt)}else K=this.index_.getCompare();const ce=h;(0,B.hu)(ce.numChildren()===this.limit_,"");const we=new rr(f,v),Ne=this.reverse_?ce.getFirstChild(this.index_):ce.getLastChild(this.index_),_t=this.rangedFilter_.matches(we);if(ce.hasChild(f)){const Dt=ce.getImmediateChild(f);let Mt=M.getChildAfterChild(this.index_,Ne,this.reverse_);for(;null!=Mt&&(Mt.name===f||ce.hasChild(Mt.name));)Mt=M.getChildAfterChild(this.index_,Mt,this.reverse_);const yn=null==Mt?1:K(Mt,we);if(_t&&!v.isEmpty()&&yn>=0)return null!=V&&V.trackChildChange(Yo(f,v,Dt)),ce.updateImmediateChild(f,v);{null!=V&&V.trackChildChange(Ds(f,Dt));const ii=ce.updateImmediateChild(f,pn.EMPTY_NODE);return null!=Mt&&this.rangedFilter_.matches(Mt)?(null!=V&&V.trackChildChange(wn(Mt.name,Mt.node)),ii.updateImmediateChild(Mt.name,Mt.node)):ii}}return v.isEmpty()?h:_t&&K(Ne,we)>=0?(null!=V&&(V.trackChildChange(Ds(Ne.name,Ne.node)),V.trackChildChange(wn(f,v))),ce.updateImmediateChild(f,v).updateImmediateChild(Ne.name,pn.EMPTY_NODE)):h}}class $r{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ut}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:qe}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,B.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Nr}copy(){const h=new $r;return h.limitSet_=this.limitSet_,h.limit_=this.limit_,h.startSet_=this.startSet_,h.startAfterSet_=this.startAfterSet_,h.indexStartValue_=this.indexStartValue_,h.startNameSet_=this.startNameSet_,h.indexStartName_=this.indexStartName_,h.endSet_=this.endSet_,h.endBeforeSet_=this.endBeforeSet_,h.indexEndValue_=this.indexEndValue_,h.endNameSet_=this.endNameSet_,h.indexEndName_=this.indexEndName_,h.index_=this.index_,h.viewFrom_=this.viewFrom_,h}}function x(m){const h={};if(m.isDefault())return h;let f;if(m.index_===Nr?f="$priority":m.index_===Fo?f="$value":m.index_===pi?f="$key":((0,B.hu)(m.index_ instanceof pa,"Unrecognized index type!"),f=m.index_.toString()),h.orderBy=(0,B.Wl)(f),m.startSet_){const v=m.startAfterSet_?"startAfter":"startAt";h[v]=(0,B.Wl)(m.indexStartValue_),m.startNameSet_&&(h[v]+=","+(0,B.Wl)(m.indexStartName_))}if(m.endSet_){const v=m.endBeforeSet_?"endBefore":"endAt";h[v]=(0,B.Wl)(m.indexEndValue_),m.endNameSet_&&(h[v]+=","+(0,B.Wl)(m.indexEndName_))}return m.limitSet_&&(m.isViewFromLeft()?h.limitToFirst=m.limit_:h.limitToLast=m.limit_),h}function te(m){const h={};if(m.startSet_&&(h.sp=m.indexStartValue_,m.startNameSet_&&(h.sn=m.indexStartName_),h.sin=!m.startAfterSet_),m.endSet_&&(h.ep=m.indexEndValue_,m.endNameSet_&&(h.en=m.indexEndName_),h.ein=!m.endBeforeSet_),m.limitSet_){h.l=m.limit_;let f=m.viewFrom_;""===f&&(f=m.isViewFromLeft()?"l":"r"),h.vf=f}return m.index_!==Nr&&(h.i=m.index_.toString()),h}class ct extends ds{constructor(h,f,v,M){super(),this.repoInfo_=h,this.onDataUpdate_=f,this.authTokenProvider_=v,this.appCheckTokenProvider_=M,this.log_=yt("p:rest:"),this.listens_={}}reportStats(h){throw new Error("Method not implemented.")}static getListenId_(h,f){return void 0!==f?"tag$"+f:((0,B.hu)(h._queryParams.isDefault(),"should have a tag if it's not a default query."),h._path.toString())}listen(h,f,v,M){const V=h._path.toString();this.log_("Listen called for "+V+" "+h._queryIdentifier);const K=ct.getListenId_(h,v),ce={};this.listens_[K]=ce;const we=x(h._queryParams);this.restRequest_(V+".json",we,(Ne,_t)=>{let Dt=_t;if(404===Ne&&(Dt=null,Ne=null),null===Ne&&this.onDataUpdate_(V,Dt,!1,v),(0,B.DV)(this.listens_,K)===ce){let Mt;Mt=Ne?401===Ne?"permission_denied":"rest_error:"+Ne:"ok",M(Mt,null)}})}unlisten(h,f){const v=ct.getListenId_(h,f);delete this.listens_[v]}get(h){const f=x(h._queryParams),v=h._path.toString(),M=new B.BH;return this.restRequest_(v+".json",f,(V,K)=>{let ce=K;404===V&&(ce=null,V=null),null===V?(this.onDataUpdate_(v,ce,!1,null),M.resolve(ce)):M.reject(new Error(ce))}),M.promise}refreshAuthToken(h){}restRequest_(h,f={},v){return f.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([M,V])=>{M&&M.accessToken&&(f.auth=M.accessToken),V&&V.token&&(f.ac=V.token);const K=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+h+"?ns="+this.repoInfo_.namespace+(0,B.xO)(f);this.log_("Sending REST request for "+K);const ce=new XMLHttpRequest;ce.onreadystatechange=()=>{if(v&&4===ce.readyState){this.log_("REST Response for "+K+" received. status:",ce.status,"response:",ce.responseText);let we=null;if(ce.status>=200&&ce.status<300){try{we=(0,B.cI)(ce.responseText)}catch(Ne){Nt("Failed to parse JSON response for "+K+": "+ce.responseText)}v(null,we)}else 401!==ce.status&&404!==ce.status&&Nt("Got unsuccessful REST response for "+K+" Status: "+ce.status),v(ce.status);v=null}},ce.open("GET",K,!0),ce.send()})}}class nn{constructor(){this.rootNode_=pn.EMPTY_NODE}getNode(h){return this.rootNode_.getChild(h)}updateSnapshot(h,f){this.rootNode_=this.rootNode_.updateChild(h,f)}}function Vr(){return{value:null,children:new Map}}function rs(m,h,f){if($n(h))m.value=f,m.children.clear();else if(null!==m.value)m.value=m.value.updateChild(h,f);else{const v=En(h);m.children.has(v)||m.children.set(v,Vr()),rs(m.children.get(v),h=xn(h),f)}}function Is(m,h){if($n(h))return m.value=null,m.children.clear(),!0;if(null!==m.value){if(m.value.isLeafNode())return!1;{const f=m.value;return m.value=null,f.forEachChild(Nr,(v,M)=>{rs(m,new Rn(v),M)}),Is(m,h)}}if(m.children.size>0){const f=En(h);return h=xn(h),m.children.has(f)&&Is(m.children.get(f),h)&&m.children.delete(f),0===m.children.size}return!0}function Gr(m,h,f){null!==m.value?f(h,m.value):function Fs(m,h){m.children.forEach((f,v)=>{h(v,f)})}(m,(v,M)=>{Gr(M,new Rn(h.toString()+"/"+v),f)})}class is{constructor(h){this.collection_=h,this.last_=null}get(){const h=this.collection_.get(),f=Object.assign({},h);return this.last_&&St(this.last_,(v,M)=>{f[v]=f[v]-M}),this.last_=h,f}}class Jo{constructor(h,f){this.server_=f,this.statsToReport_={},this.statsListener_=new is(h);const v=1e4+2e4*Math.random();it(this.reportStats_.bind(this),Math.floor(v))}reportStats_(){const h=this.statsListener_.get(),f={};let v=!1;St(h,(M,V)=>{V>0&&(0,B.r3)(this.statsToReport_,M)&&(f[M]=V,v=!0)}),v&&this.server_.reportStats(f),it(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ps=(()=>{return(m=ps||(ps={}))[m.OVERWRITE=0]="OVERWRITE",m[m.MERGE=1]="MERGE",m[m.ACK_USER_WRITE=2]="ACK_USER_WRITE",m[m.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ps;var m})();function ya(m){return{fromUser:!1,fromServer:!0,queryId:m,tagged:!0}}class Xo{constructor(h,f,v){this.path=h,this.affectedTree=f,this.revert=v,this.type=ps.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(h){if($n(this.path)){if(null!=this.affectedTree.value)return(0,B.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const f=this.affectedTree.subtree(new Rn(h));return new Xo(Tn(),f,this.revert)}}return(0,B.hu)(En(this.path)===h,"operationForChild called for unrelated child."),new Xo(xn(this.path),this.affectedTree,this.revert)}}class io{constructor(h,f){this.source=h,this.path=f,this.type=ps.LISTEN_COMPLETE}operationForChild(h){return $n(this.path)?new io(this.source,Tn()):new io(this.source,xn(this.path))}}class ks{constructor(h,f,v){this.source=h,this.path=f,this.snap=v,this.type=ps.OVERWRITE}operationForChild(h){return $n(this.path)?new ks(this.source,Tn(),this.snap.getImmediateChild(h)):new ks(this.source,xn(this.path),this.snap)}}class Io{constructor(h,f,v){this.source=h,this.path=f,this.children=v,this.type=ps.MERGE}operationForChild(h){if($n(this.path)){const f=this.children.subtree(new Rn(h));return f.isEmpty()?null:f.value?new ks(this.source,Tn(),f.value):new Io(this.source,Tn(),f)}return(0,B.hu)(En(this.path)===h,"Can't get a merge for a child not on the path of the operation"),new Io(this.source,xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Xi{constructor(h,f,v){this.node_=h,this.fullyInitialized_=f,this.filtered_=v}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(h){if($n(h))return this.isFullyInitialized()&&!this.filtered_;const f=En(h);return this.isCompleteForChild(f)}isCompleteForChild(h){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(h)}getNode(){return this.node_}}class qa{constructor(h){this.query_=h,this.index_=this.query_._queryParams.getIndex()}}function _a(m,h,f,v,M,V){const K=v.filter(ce=>ce.type===f);K.sort((ce,we)=>function q(m,h,f){if(null==h.childName||null==f.childName)throw(0,B.g5)("Should only compare child_ events.");const v=new rr(h.childName,h.snapshotNode),M=new rr(f.childName,f.snapshotNode);return m.index_.compare(v,M)}(m,ce,we)),K.forEach(ce=>{const we=function L(m,h,f){return"value"===h.type||"child_removed"===h.type||(h.prevName=f.getPredecessorChildName(h.childName,h.snapshotNode,m.index_)),h}(m,ce,V);M.forEach(Ne=>{Ne.respondsTo(ce.type)&&h.push(Ne.createEvent(we,m.query_))})})}function k(m,h){return{eventCache:m,serverCache:h}}function se(m,h,f,v){return k(new Xi(h,f,v),m.serverCache)}function me(m,h,f,v){return k(m.eventCache,new Xi(h,f,v))}function et(m){return m.eventCache.isFullyInitialized()?m.eventCache.getNode():null}function ft(m){return m.serverCache.isFullyInitialized()?m.serverCache.getNode():null}let Jt;class bn{constructor(h,f=(()=>(Jt||(Jt=new Jn(Tt)),Jt))()){this.value=h,this.children=f}static fromObject(h){let f=new bn(null);return St(h,(v,M)=>{f=f.set(new Rn(v),M)}),f}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(h,f){if(null!=this.value&&f(this.value))return{path:Tn(),value:this.value};if($n(h))return null;{const v=En(h),M=this.children.get(v);if(null!==M){const V=M.findRootMostMatchingPathAndValue(xn(h),f);return null!=V?{path:zn(new Rn(v),V.path),value:V.value}:null}return null}}findRootMostValueAndPath(h){return this.findRootMostMatchingPathAndValue(h,()=>!0)}subtree(h){if($n(h))return this;{const f=En(h),v=this.children.get(f);return null!==v?v.subtree(xn(h)):new bn(null)}}set(h,f){if($n(h))return new bn(f,this.children);{const v=En(h),V=(this.children.get(v)||new bn(null)).set(xn(h),f),K=this.children.insert(v,V);return new bn(this.value,K)}}remove(h){if($n(h))return this.children.isEmpty()?new bn(null):new bn(null,this.children);{const f=En(h),v=this.children.get(f);if(v){const M=v.remove(xn(h));let V;return V=M.isEmpty()?this.children.remove(f):this.children.insert(f,M),null===this.value&&V.isEmpty()?new bn(null):new bn(this.value,V)}return this}}get(h){if($n(h))return this.value;{const f=En(h),v=this.children.get(f);return v?v.get(xn(h)):null}}setTree(h,f){if($n(h))return f;{const v=En(h),V=(this.children.get(v)||new bn(null)).setTree(xn(h),f);let K;return K=V.isEmpty()?this.children.remove(v):this.children.insert(v,V),new bn(this.value,K)}}fold(h){return this.fold_(Tn(),h)}fold_(h,f){const v={};return this.children.inorderTraversal((M,V)=>{v[M]=V.fold_(zn(h,M),f)}),f(h,this.value,v)}findOnPath(h,f){return this.findOnPath_(h,Tn(),f)}findOnPath_(h,f,v){const M=!!this.value&&v(f,this.value);if(M)return M;if($n(h))return null;{const V=En(h),K=this.children.get(V);return K?K.findOnPath_(xn(h),zn(f,V),v):null}}foreachOnPath(h,f){return this.foreachOnPath_(h,Tn(),f)}foreachOnPath_(h,f,v){if($n(h))return this;{this.value&&v(f,this.value);const M=En(h),V=this.children.get(M);return V?V.foreachOnPath_(xn(h),zn(f,M),v):new bn(null)}}foreach(h){this.foreach_(Tn(),h)}foreach_(h,f){this.children.inorderTraversal((v,M)=>{M.foreach_(zn(h,v),f)}),this.value&&f(h,this.value)}foreachChild(h){this.children.inorderTraversal((f,v)=>{v.value&&h(f,v.value)})}}class pr{constructor(h){this.writeTree_=h}static empty(){return new pr(new bn(null))}}function ur(m,h,f){if($n(h))return new pr(new bn(f));{const v=m.writeTree_.findRootMostValueAndPath(h);if(null!=v){const M=v.path;let V=v.value;const K=xr(M,h);return V=V.updateChild(K,f),new pr(m.writeTree_.set(M,V))}{const M=new bn(f),V=m.writeTree_.setTree(h,M);return new pr(V)}}}function Ci(m,h,f){let v=m;return St(f,(M,V)=>{v=ur(v,zn(h,M),V)}),v}function br(m,h){if($n(h))return pr.empty();{const f=m.writeTree_.setTree(h,new bn(null));return new pr(f)}}function Ii(m,h){return null!=gs(m,h)}function gs(m,h){const f=m.writeTree_.findRootMostValueAndPath(h);return null!=f?m.writeTree_.get(f.path).getChild(xr(f.path,h)):null}function Wr(m){const h=[],f=m.writeTree_.value;return null!=f?f.isLeafNode()||f.forEachChild(Nr,(v,M)=>{h.push(new rr(v,M))}):m.writeTree_.children.inorderTraversal((v,M)=>{null!=M.value&&h.push(new rr(v,M.value))}),h}function Vi(m,h){if($n(h))return m;{const f=gs(m,h);return new pr(null!=f?new bn(f):m.writeTree_.subtree(h))}}function $i(m){return m.writeTree_.isEmpty()}function bi(m,h){return Rs(Tn(),m.writeTree_,h)}function Rs(m,h,f){if(null!=h.value)return f.updateChild(m,h.value);{let v=null;return h.children.inorderTraversal((M,V)=>{".priority"===M?((0,B.hu)(null!==V.value,"Priority writes must always be leaf nodes"),v=V.value):f=Rs(zn(m,M),V,f)}),!f.getChild(m).isEmpty()&&null!==v&&(f=f.updateChild(zn(m,".priority"),v)),f}}function xt(m,h){return ms(h,m)}function en(m,h){if(m.snap)return tt(m.path,h);for(const f in m.children)if(m.children.hasOwnProperty(f)&&tt(zn(m.path,f),h))return!0;return!1}function Zt(m){return m.visible}function ot(m,h,f){let v=pr.empty();for(let M=0;M<m.length;++M){const V=m[M];if(h(V)){const K=V.path;let ce;if(V.snap)tt(f,K)?(ce=xr(f,K),v=ur(v,ce,V.snap)):tt(K,f)&&(ce=xr(K,f),v=ur(v,Tn(),V.snap.getChild(ce)));else{if(!V.children)throw(0,B.g5)("WriteRecord should have .snap or .children");if(tt(f,K))ce=xr(f,K),v=Ci(v,ce,V.children);else if(tt(K,f))if(ce=xr(K,f),$n(ce))v=Ci(v,Tn(),V.children);else{const we=(0,B.DV)(V.children,En(ce));if(we){const Ne=we.getChild(xn(ce));v=ur(v,Tn(),Ne)}}}}}return v}function Pt(m,h,f,v,M){if(v||M){const V=Vi(m.visibleWrites,h);return!M&&$i(V)?f:M||null!=f||Ii(V,Tn())?bi(ot(m.allWrites,function(Ne){return(Ne.visible||M)&&(!v||!~v.indexOf(Ne.writeId))&&(tt(Ne.path,h)||tt(h,Ne.path))},h),f||pn.EMPTY_NODE):null}{const V=gs(m.visibleWrites,h);if(null!=V)return V;{const K=Vi(m.visibleWrites,h);return $i(K)?f:null!=f||Ii(K,Tn())?bi(K,f||pn.EMPTY_NODE):null}}}function so(m,h,f,v){return Pt(m.writeTree,m.treePath,h,f,v)}function oo(m,h){return function ti(m,h,f){let v=pn.EMPTY_NODE;const M=gs(m.visibleWrites,h);if(M)return M.isLeafNode()||M.forEachChild(Nr,(V,K)=>{v=v.updateImmediateChild(V,K)}),v;if(f){const V=Vi(m.visibleWrites,h);return f.forEachChild(Nr,(K,ce)=>{const we=bi(Vi(V,new Rn(K)),ce);v=v.updateImmediateChild(K,we)}),Wr(V).forEach(K=>{v=v.updateImmediateChild(K.name,K.node)}),v}return Wr(Vi(m.visibleWrites,h)).forEach(K=>{v=v.updateImmediateChild(K.name,K.node)}),v}(m.writeTree,m.treePath,h)}function Na(m,h,f,v){return function Vl(m,h,f,v,M){(0,B.hu)(v||M,"Either existingEventSnap or existingServerSnap must exist");const V=zn(h,f);if(Ii(m.visibleWrites,V))return null;{const K=Vi(m.visibleWrites,V);return $i(K)?M.getChild(f):bi(K,M.getChild(f))}}(m.writeTree,m.treePath,h,f,v)}function To(m,h){return function Ri(m,h){return gs(m.visibleWrites,h)}(m.writeTree,zn(m.treePath,h))}function mi(m,h,f){return function Za(m,h,f,v){const M=zn(h,f),V=gs(m.visibleWrites,M);return null!=V?V:v.isCompleteForChild(f)?bi(Vi(m.visibleWrites,M),v.getNode().getImmediateChild(f)):null}(m.writeTree,m.treePath,h,f)}function Xn(m,h){return ms(zn(m.treePath,h),m.writeTree)}function ms(m,h){return{treePath:m,writeTree:h}}class Al{constructor(){this.changeMap=new Map}trackChildChange(h){const f=h.type,v=h.childName;(0,B.hu)("child_added"===f||"child_changed"===f||"child_removed"===f,"Only child changes supported for tracking"),(0,B.hu)(".priority"!==v,"Only non-priority child changes can be tracked.");const M=this.changeMap.get(v);if(M){const V=M.type;if("child_added"===f&&"child_removed"===V)this.changeMap.set(v,Yo(v,h.snapshotNode,M.snapshotNode));else if("child_removed"===f&&"child_added"===V)this.changeMap.delete(v);else if("child_removed"===f&&"child_changed"===V)this.changeMap.set(v,Ds(v,M.oldSnap));else if("child_changed"===f&&"child_added"===V)this.changeMap.set(v,wn(v,h.snapshotNode));else{if("child_changed"!==f||"child_changed"!==V)throw(0,B.g5)("Illegal combination of changes: "+h+" occurred after "+M);this.changeMap.set(v,Yo(v,h.snapshotNode,M.oldSnap))}}else this.changeMap.set(v,h)}getChanges(){return Array.from(this.changeMap.values())}}const Sn=new class Kr{getCompleteChild(h){return null}getChildAfterChild(h,f,v){return null}};class Uo{constructor(h,f,v=null){this.writes_=h,this.viewCache_=f,this.optCompleteServerCache_=v}getCompleteChild(h){const f=this.viewCache_.eventCache;if(f.isCompleteForChild(h))return f.getNode().getImmediateChild(h);{const v=null!=this.optCompleteServerCache_?new Xi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mi(this.writes_,h,v)}}getChildAfterChild(h,f,v){const M=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ft(this.viewCache_),V=function iu(m,h,f,v,M,V){return function Us(m,h,f,v,M,V,K){let ce;const we=Vi(m.visibleWrites,h),Ne=gs(we,Tn());if(null!=Ne)ce=Ne;else{if(null==f)return[];ce=bi(we,f)}if(ce=ce.withIndex(K),ce.isEmpty()||ce.isLeafNode())return[];{const _t=[],Dt=K.getCompare(),Mt=V?ce.getReverseIteratorFrom(v,K):ce.getIteratorFrom(v,K);let yn=Mt.getNext();for(;yn&&_t.length<M;)0!==Dt(yn,v)&&_t.push(yn),yn=Mt.getNext();return _t}}(m.writeTree,m.treePath,h,f,v,M,V)}(this.writes_,M,f,1,v,h);return 0===V.length?null:V[0]}}function ao(m,h,f,v,M,V){const K=h.eventCache;if(null!=To(v,f))return h;{let ce,we;if($n(f))if((0,B.hu)(h.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),h.serverCache.isFiltered()){const Ne=ft(h),Dt=oo(v,Ne instanceof pn?Ne:pn.EMPTY_NODE);ce=m.filter.updateFullNode(h.eventCache.getNode(),Dt,V)}else{const Ne=so(v,ft(h));ce=m.filter.updateFullNode(h.eventCache.getNode(),Ne,V)}else{const Ne=En(f);if(".priority"===Ne){(0,B.hu)(1===Xr(f),"Can't have a priority with additional path components");const _t=K.getNode();we=h.serverCache.getNode();const Dt=Na(v,f,_t,we);ce=null!=Dt?m.filter.updatePriority(_t,Dt):K.getNode()}else{const _t=xn(f);let Dt;if(K.isCompleteForChild(Ne)){we=h.serverCache.getNode();const Mt=Na(v,f,K.getNode(),we);Dt=null!=Mt?K.getNode().getImmediateChild(Ne).updateChild(_t,Mt):K.getNode().getImmediateChild(Ne)}else Dt=mi(v,Ne,h.serverCache);ce=null!=Dt?m.filter.updateChild(K.getNode(),Ne,Dt,_t,M,V):K.getNode()}}return se(h,ce,K.isFullyInitialized()||$n(f),m.filter.filtersNodes())}}function lo(m,h,f,v,M,V,K,ce){const we=h.serverCache;let Ne;const _t=K?m.filter:m.filter.getIndexedFilter();if($n(f))Ne=_t.updateFullNode(we.getNode(),v,null);else if(_t.filtersNodes()&&!we.isFiltered()){const yn=we.getNode().updateChild(f,v);Ne=_t.updateFullNode(we.getNode(),yn,null)}else{const yn=En(f);if(!we.isCompleteForPath(f)&&Xr(f)>1)return h;const Yn=xn(f),bo=we.getNode().getImmediateChild(yn).updateChild(Yn,v);Ne=".priority"===yn?_t.updatePriority(we.getNode(),bo):_t.updateChild(we.getNode(),yn,bo,Yn,Sn,null)}const Dt=me(h,Ne,we.isFullyInitialized()||$n(f),_t.filtersNodes());return ao(m,Dt,f,M,new Uo(M,Dt,V),ce)}function Vo(m,h,f,v,M,V,K){const ce=h.eventCache;let we,Ne;const _t=new Uo(M,h,V);if($n(f))Ne=m.filter.updateFullNode(h.eventCache.getNode(),v,K),we=se(h,Ne,!0,m.filter.filtersNodes());else{const Dt=En(f);if(".priority"===Dt)Ne=m.filter.updatePriority(h.eventCache.getNode(),v),we=se(h,Ne,ce.isFullyInitialized(),ce.isFiltered());else{const Mt=xn(f),yn=ce.getNode().getImmediateChild(Dt);let Yn;if($n(Mt))Yn=v;else{const ii=_t.getCompleteChild(Dt);Yn=null!=ii?".priority"===Ls(Mt)&&ii.getChild(Pi(Mt)).isEmpty()?ii:ii.updateChild(Mt,v):pn.EMPTY_NODE}we=yn.equals(Yn)?h:se(h,m.filter.updateChild(ce.getNode(),Dt,Yn,Mt,_t,K),ce.isFullyInitialized(),m.filter.filtersNodes())}}return we}function Ml(m,h){return m.eventCache.isCompleteForChild(h)}function La(m,h,f){return f.foreach((v,M)=>{h=h.updateChild(v,M)}),h}function So(m,h,f,v,M,V,K,ce){if(h.serverCache.getNode().isEmpty()&&!h.serverCache.isFullyInitialized())return h;let Ne,we=h;Ne=$n(f)?v:new bn(null).setTree(f,v);const _t=h.serverCache.getNode();return Ne.children.inorderTraversal((Dt,Mt)=>{if(_t.hasChild(Dt)){const Yn=La(0,h.serverCache.getNode().getImmediateChild(Dt),Mt);we=lo(m,we,new Rn(Dt),Yn,M,V,K,ce)}}),Ne.children.inorderTraversal((Dt,Mt)=>{const yn=!h.serverCache.isCompleteForChild(Dt)&&null===Mt.value;if(!_t.hasChild(Dt)&&!yn){const ii=La(0,h.serverCache.getNode().getImmediateChild(Dt),Mt);we=lo(m,we,new Rn(Dt),ii,M,V,K,ce)}}),we}class Xa{constructor(h,f){this.query_=h,this.eventRegistrations_=[];const v=this.query_._queryParams,M=new Cs(v.getIndex()),V=function ga(m){return m.loadsAllData()?new Cs(m.getIndex()):m.hasLimit()?new ko(m):new Ji(m)}(v);this.processor_=function yr(m){return{filter:m}}(V);const K=f.serverCache,ce=f.eventCache,we=M.updateFullNode(pn.EMPTY_NODE,K.getNode(),null),Ne=V.updateFullNode(pn.EMPTY_NODE,ce.getNode(),null),_t=new Xi(we,K.isFullyInitialized(),M.filtersNodes()),Dt=new Xi(Ne,ce.isFullyInitialized(),V.filtersNodes());this.viewCache_=k(Dt,_t),this.eventGenerator_=new qa(this.query_)}get query(){return this.query_}}function uo(m,h){const f=ft(m.viewCache_);return f&&(m.query._queryParams.loadsAllData()||!$n(h)&&!f.getImmediateChild(En(h)).isEmpty())?f.getChild(h):null}function Fa(m){return 0===m.eventRegistrations_.length}function Qs(m,h,f){const v=[];if(f){(0,B.hu)(null==h,"A cancel should cancel all event registrations.");const M=m.query._path;m.eventRegistrations_.forEach(V=>{const K=V.createCancelEvent(f,M);K&&v.push(K)})}if(h){let M=[];for(let V=0;V<m.eventRegistrations_.length;++V){const K=m.eventRegistrations_[V];if(K.matches(h)){if(h.hasAnyCallback()){M=M.concat(m.eventRegistrations_.slice(V+1));break}}else M.push(K)}m.eventRegistrations_=M}else m.eventRegistrations_=[];return v}function ys(m,h,f,v){h.type===ps.MERGE&&null!==h.source.queryId&&((0,B.hu)(ft(m.viewCache_),"We should always have a full cache before handling merges"),(0,B.hu)(et(m.viewCache_),"Missing event cache, even though we have a server cache"));const M=m.viewCache_,V=function Ai(m,h,f,v,M){const V=new Al;let K,ce;if(f.type===ps.OVERWRITE){const Ne=f;Ne.source.fromUser?K=Vo(m,h,Ne.path,Ne.snap,v,M,V):((0,B.hu)(Ne.source.fromServer,"Unknown source."),ce=Ne.source.tagged||h.serverCache.isFiltered()&&!$n(Ne.path),K=lo(m,h,Ne.path,Ne.snap,v,M,ce,V))}else if(f.type===ps.MERGE){const Ne=f;Ne.source.fromUser?K=function ta(m,h,f,v,M,V,K){let ce=h;return v.foreach((we,Ne)=>{const _t=zn(f,we);Ml(h,En(_t))&&(ce=Vo(m,ce,_t,Ne,M,V,K))}),v.foreach((we,Ne)=>{const _t=zn(f,we);Ml(h,En(_t))||(ce=Vo(m,ce,_t,Ne,M,V,K))}),ce}(m,h,Ne.path,Ne.children,v,M,V):((0,B.hu)(Ne.source.fromServer,"Unknown source."),ce=Ne.source.tagged||h.serverCache.isFiltered(),K=So(m,h,Ne.path,Ne.children,v,M,ce,V))}else if(f.type===ps.ACK_USER_WRITE){const Ne=f;K=Ne.revert?function ss(m,h,f,v,M,V){let K;if(null!=To(v,f))return h;{const ce=new Uo(v,h,M),we=h.eventCache.getNode();let Ne;if($n(f)||".priority"===En(f)){let _t;if(h.serverCache.isFullyInitialized())_t=so(v,ft(h));else{const Dt=h.serverCache.getNode();(0,B.hu)(Dt instanceof pn,"serverChildren would be complete if leaf node"),_t=oo(v,Dt)}Ne=m.filter.updateFullNode(we,_t,V)}else{const _t=En(f);let Dt=mi(v,_t,h.serverCache);null==Dt&&h.serverCache.isCompleteForChild(_t)&&(Dt=we.getImmediateChild(_t)),Ne=null!=Dt?m.filter.updateChild(we,_t,Dt,xn(f),ce,V):h.eventCache.getNode().hasChild(_t)?m.filter.updateChild(we,_t,pn.EMPTY_NODE,xn(f),ce,V):we,Ne.isEmpty()&&h.serverCache.isFullyInitialized()&&(K=so(v,ft(h)),K.isLeafNode()&&(Ne=m.filter.updateFullNode(Ne,K,V)))}return K=h.serverCache.isFullyInitialized()||null!=To(v,Tn()),se(h,Ne,K,m.filter.filtersNodes())}}(m,h,Ne.path,v,M,V):function cl(m,h,f,v,M,V,K){if(null!=To(M,f))return h;const ce=h.serverCache.isFiltered(),we=h.serverCache;if(null!=v.value){if($n(f)&&we.isFullyInitialized()||we.isCompleteForPath(f))return lo(m,h,f,we.getNode().getChild(f),M,V,ce,K);if($n(f)){let Ne=new bn(null);return we.getNode().forEachChild(pi,(_t,Dt)=>{Ne=Ne.set(new Rn(_t),Dt)}),So(m,h,f,Ne,M,V,ce,K)}return h}{let Ne=new bn(null);return v.foreach((_t,Dt)=>{const Mt=zn(f,_t);we.isCompleteForPath(Mt)&&(Ne=Ne.set(_t,we.getNode().getChild(Mt)))}),So(m,h,f,Ne,M,V,ce,K)}}(m,h,Ne.path,Ne.affectedTree,v,M,V)}else{if(f.type!==ps.LISTEN_COMPLETE)throw(0,B.g5)("Unknown operation type: "+f.type);K=function Ja(m,h,f,v,M){const V=h.serverCache;return ao(m,me(h,V.getNode(),V.isFullyInitialized()||$n(f),V.isFiltered()),f,v,Sn,M)}(m,h,f.path,v,V)}const we=V.getChanges();return function Kt(m,h,f){const v=h.eventCache;if(v.isFullyInitialized()){const M=v.getNode().isLeafNode()||v.getNode().isEmpty(),V=et(m);(f.length>0||!m.eventCache.isFullyInitialized()||M&&!v.getNode().equals(V)||!v.getNode().getPriority().equals(V.getPriority()))&&f.push(Ms(et(h)))}}(h,K,we),{viewCache:K,changes:we}}(m.processor_,M,h,f,v);return function Wi(m,h){(0,B.hu)(h.eventCache.getNode().isIndexed(m.filter.getIndex()),"Event snap not indexed"),(0,B.hu)(h.serverCache.getNode().isIndexed(m.filter.getIndex()),"Server snap not indexed")}(m.processor_,V.viewCache),(0,B.hu)(V.viewCache.serverCache.isFullyInitialized()||!M.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),m.viewCache_=V.viewCache,Ea(m,V.changes,V.viewCache.eventCache.getNode(),null)}function Ea(m,h,f,v){return function ea(m,h,f,v){const M=[],V=[];return h.forEach(K=>{"child_changed"===K.type&&m.index_.indexedValueChanged(K.oldSnap,K.snapshotNode)&&V.push(function Qo(m,h){return{type:"child_moved",snapshotNode:h,childName:m}}(K.childName,K.snapshotNode))}),_a(m,M,"child_removed",h,v,f),_a(m,M,"child_added",h,v,f),_a(m,M,"child_moved",V,v,f),_a(m,M,"child_changed",h,v,f),_a(m,M,"value",h,v,f),M}(m.eventGenerator_,h,f,v?[v]:m.eventRegistrations_)}let os,xi;class ka{constructor(){this.views=new Map}}function tl(m,h,f,v){const M=h.source.queryId;if(null!==M){const V=m.views.get(M);return(0,B.hu)(null!=V,"SyncTree gave us an op for an invalid query."),ys(V,h,f,v)}{let V=[];for(const K of m.views.values())V=V.concat(ys(K,h,f,v));return V}}function au(m,h,f,v,M){const K=m.views.get(h._queryIdentifier);if(!K){let ce=so(f,M?v:null),we=!1;ce?we=!0:v instanceof pn?(ce=oo(f,v),we=!1):(ce=pn.EMPTY_NODE,we=!1);const Ne=k(new Xi(ce,we,!1),new Xi(v,M,!1));return new Xa(h,Ne)}return K}function Ki(m){const h=[];for(const f of m.views.values())f.query._queryParams.loadsAllData()||h.push(f);return h}function ra(m,h){let f=null;for(const v of m.views.values())f=f||uo(v,h);return f}function Ua(m,h){return h._queryParams.loadsAllData()?nl(m):m.views.get(h._queryIdentifier)}function Da(m,h){return null!=Ua(m,h)}function _o(m){return null!=nl(m)}function nl(m){for(const h of m.views.values())if(h.query._queryParams.loadsAllData())return h;return null}let ia=1;class b{constructor(h){this.listenProvider_=h,this.syncPointTree_=new bn(null),this.pendingWriteTree_=function xa(){return{visibleWrites:pr.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function A(m,h,f,v,M){return function Gi(m,h,f,v,M){(0,B.hu)(v>m.lastWriteId,"Stacking an older write on top of newer ones"),void 0===M&&(M=!0),m.allWrites.push({path:h,snap:f,writeId:v,visible:M}),M&&(m.visibleWrites=ur(m.visibleWrites,h,f)),m.lastWriteId=v}(m.pendingWriteTree_,h,f,v,M),M?Lr(m,new ks({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},h,f)):[]}function N(m,h,f=!1){const v=function va(m,h){for(let f=0;f<m.allWrites.length;f++){const v=m.allWrites[f];if(v.writeId===h)return v}return null}(m.pendingWriteTree_,h);if(function ln(m,h){const f=m.allWrites.findIndex(ce=>ce.writeId===h);(0,B.hu)(f>=0,"removeWrite called with nonexistent writeId.");const v=m.allWrites[f];m.allWrites.splice(f,1);let M=v.visible,V=!1,K=m.allWrites.length-1;for(;M&&K>=0;){const ce=m.allWrites[K];ce.visible&&(K>=f&&en(ce,v.path)?M=!1:tt(v.path,ce.path)&&(V=!0)),K--}return!!M&&(V?(function Eu(m){m.visibleWrites=ot(m.allWrites,Zt,Tn()),m.lastWriteId=m.allWrites.length>0?m.allWrites[m.allWrites.length-1].writeId:-1}(m),!0):(v.snap?m.visibleWrites=br(m.visibleWrites,v.path):St(v.children,we=>{m.visibleWrites=br(m.visibleWrites,zn(v.path,we))}),!0))}(m.pendingWriteTree_,h)){let V=new bn(null);return null!=v.snap?V=V.set(Tn(),!0):St(v.children,K=>{V=V.set(new Rn(K),!0)}),Lr(m,new Xo(v.path,V,f))}return[]}function j(m,h,f){return Lr(m,new ks({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h,f))}function Ze(m,h,f,v,M=!1){const V=h._path,K=m.syncPointTree_.get(V);let ce=[];if(K&&("default"===h._queryIdentifier||Da(K,h))){const we=function Du(m,h,f,v){const M=h._queryIdentifier,V=[];let K=[];const ce=_o(m);if("default"===M)for(const[we,Ne]of m.views.entries())K=K.concat(Qs(Ne,f,v)),Fa(Ne)&&(m.views.delete(we),Ne.query._queryParams.loadsAllData()||V.push(Ne.query));else{const we=m.views.get(M);we&&(K=K.concat(Qs(we,f,v)),Fa(we)&&(m.views.delete(M),we.query._queryParams.loadsAllData()||V.push(we.query)))}return ce&&!_o(m)&&V.push(new(function ou(){return(0,B.hu)(os,"Reference.ts has not been loaded"),os}())(h._repo,h._path)),{removed:V,events:K}}(K,h,f,v);(function ni(m){return 0===m.views.size})(K)&&(m.syncPointTree_=m.syncPointTree_.remove(V));const Ne=we.removed;if(ce=we.events,!M){const _t=-1!==Ne.findIndex(Mt=>Mt._queryParams.loadsAllData()),Dt=m.syncPointTree_.findOnPath(V,(Mt,yn)=>_o(yn));if(_t&&!Dt){const Mt=m.syncPointTree_.subtree(V);if(!Mt.isEmpty()){const yn=function Bl(m){return m.fold((h,f,v)=>{if(f&&_o(f))return[nl(f)];{let M=[];return f&&(M=Ki(f)),St(v,(V,K)=>{M=M.concat(K)}),M}})}(Mt);for(let Yn=0;Yn<yn.length;++Yn){const ii=yn[Yn],bo=ii.query,Fl=Bs(m,ii);m.listenProvider_.startListening(Ba(bo),qs(m,bo),Fl.hashFn,Fl.onComplete)}}}!Dt&&Ne.length>0&&!v&&(_t?m.listenProvider_.stopListening(Ba(h),null):Ne.forEach(Mt=>{const yn=m.queryToTagMap.get(hl(Mt));m.listenProvider_.stopListening(Ba(Mt),yn)}))}!function ja(m,h){for(let f=0;f<h.length;++f){const v=h[f];if(!v._queryParams.loadsAllData()){const M=hl(v),V=m.queryToTagMap.get(M);m.queryToTagMap.delete(M),m.tagToQueryMap.delete(V)}}}(m,Ne)}return ce}function Ft(m,h,f,v){const M=ws(m,v);if(null!=M){const V=Va(M),K=V.path,ce=V.queryId,we=xr(K,h);return Ol(m,K,new ks(ya(ce),we,f))}return[]}function Ht(m,h,f,v=!1){const M=h._path;let V=null,K=!1;m.syncPointTree_.foreachOnPath(M,(Mt,yn)=>{const Yn=xr(Mt,M);V=V||ra(yn,Yn),K=K||_o(yn)});let we,ce=m.syncPointTree_.get(M);ce?(K=K||_o(ce),V=V||ra(ce,Tn())):(ce=new ka,m.syncPointTree_=m.syncPointTree_.set(M,ce)),null!=V?we=!0:(we=!1,V=pn.EMPTY_NODE,m.syncPointTree_.subtree(M).foreachChild((yn,Yn)=>{const ii=ra(Yn,Tn());ii&&(V=V.updateImmediateChild(yn,ii))}));const Ne=Da(ce,h);if(!Ne&&!h._queryParams.loadsAllData()){const Mt=hl(h);(0,B.hu)(!m.queryToTagMap.has(Mt),"View does not exist, but we have a tag");const yn=function vo(){return ia++}();m.queryToTagMap.set(Mt,yn),m.tagToQueryMap.set(yn,Mt)}let Dt=function co(m,h,f,v,M,V){const K=au(m,h,v,M,V);return m.views.has(h._queryIdentifier)||m.views.set(h._queryIdentifier,K),function lt(m,h){m.eventRegistrations_.push(h)}(K,f),function na(m,h){const f=m.viewCache_.eventCache,v=[];return f.getNode().isLeafNode()||f.getNode().forEachChild(Nr,(V,K)=>{v.push(wn(V,K))}),f.isFullyInitialized()&&v.push(Ms(f.getNode())),Ea(m,v,f.getNode(),h)}(K,f)}(ce,h,f,xt(m.pendingWriteTree_,M),V,we);if(!Ne&&!K&&!v){const Mt=Ua(ce,h);Dt=Dt.concat(function sa(m,h,f){const v=h._path,M=qs(m,h),V=Bs(m,f),K=m.listenProvider_.startListening(Ba(h),M,V.hashFn,V.onComplete),ce=m.syncPointTree_.subtree(v);if(M)(0,B.hu)(!_o(ce.value),"If we're adding a query, it shouldn't be shadowed");else{const we=ce.fold((Ne,_t,Dt)=>{if(!$n(Ne)&&_t&&_o(_t))return[nl(_t).query];{let Mt=[];return _t&&(Mt=Mt.concat(Ki(_t).map(yn=>yn.query))),St(Dt,(yn,Yn)=>{Mt=Mt.concat(Yn)}),Mt}});for(let Ne=0;Ne<we.length;++Ne){const _t=we[Ne];m.listenProvider_.stopListening(Ba(_t),qs(m,_t))}}return K}(m,h,Mt))}return Dt}function An(m,h,f){const M=m.pendingWriteTree_,V=m.syncPointTree_.findOnPath(h,(K,ce)=>{const Ne=ra(ce,xr(K,h));if(Ne)return Ne});return Pt(M,h,V,f,!0)}function Lr(m,h){return _s(h,m.syncPointTree_,null,xt(m.pendingWriteTree_,Tn()))}function _s(m,h,f,v){if($n(m.path))return Vs(m,h,f,v);{const M=h.get(Tn());null==f&&null!=M&&(f=ra(M,Tn()));let V=[];const K=En(m.path),ce=m.operationForChild(K),we=h.children.get(K);if(we&&ce){const Ne=f?f.getImmediateChild(K):null,_t=Xn(v,K);V=V.concat(_s(ce,we,Ne,_t))}return M&&(V=V.concat(tl(M,m,v,f))),V}}function Vs(m,h,f,v){const M=h.get(Tn());null==f&&null!=M&&(f=ra(M,Tn()));let V=[];return h.children.inorderTraversal((K,ce)=>{const we=f?f.getImmediateChild(K):null,Ne=Xn(v,K),_t=m.operationForChild(K);_t&&(V=V.concat(Vs(_t,ce,we,Ne)))}),M&&(V=V.concat(tl(M,m,v,f))),V}function Bs(m,h){const f=h.query,v=qs(m,f);return{hashFn:()=>(function su(m){return m.viewCache_.serverCache.getNode()}(h)||pn.EMPTY_NODE).hash(),onComplete:M=>{if("ok"===M)return v?function Ee(m,h,f){const v=ws(m,f);if(v){const M=Va(v),V=M.path,K=M.queryId,ce=xr(V,h);return Ol(m,V,new io(ya(K),ce))}return[]}(m,f._path,v):function ge(m,h){return Lr(m,new io({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h))}(m,f._path);{const V=function ir(m,h){let f="Unknown Error";"too_big"===m?f="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===m?f="Client doesn't have permission to access the desired data.":"unavailable"===m&&(f="The service is unavailable");const v=new Error(m+" at "+h._path.toString()+": "+f);return v.code=m.toUpperCase(),v}(M,f);return Ze(m,f,null,V)}}}}function qs(m,h){const f=hl(h);return m.queryToTagMap.get(f)}function hl(m){return m._path.toString()+"$"+m._queryIdentifier}function ws(m,h){return m.tagToQueryMap.get(h)}function Va(m){const h=m.indexOf("$");return(0,B.hu)(-1!==h&&h<m.length-1,"Bad queryKey."),{queryId:m.substr(h+1),path:new Rn(m.substr(0,h))}}function Ol(m,h,f){const v=m.syncPointTree_.get(h);return(0,B.hu)(v,"Missing sync point for query tag that we're tracking"),tl(v,f,xt(m.pendingWriteTree_,h),null)}function Ba(m){return m._queryParams.loadsAllData()&&!m._queryParams.isDefault()?new(function zi(){return(0,B.hu)(xi,"Reference.ts has not been loaded"),xi}())(m._repo,m._path):m}class jo{constructor(h){this.node_=h}getImmediateChild(h){const f=this.node_.getImmediateChild(h);return new jo(f)}node(){return this.node_}}class rl{constructor(h,f){this.syncTree_=h,this.path_=f}getImmediateChild(h){const f=zn(this.path_,h);return new rl(this.syncTree_,f)}node(){return An(this.syncTree_,this.path_)}}const Or=function(m,h,f){return m&&"object"==typeof m?((0,B.hu)(".sv"in m,"Unexpected leaf node or priority contents"),"string"==typeof m[".sv"]?Jr(m[".sv"],h,f):"object"==typeof m[".sv"]?oa(m[".sv"],h):void(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(m,null,2))):m},Jr=function(m,h,f){if("timestamp"===m)return f.timestamp;(0,B.hu)(!1,"Unexpected server value: "+m)},oa=function(m,h,f){m.hasOwnProperty("increment")||(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(m,null,2));const v=m.increment;"number"!=typeof v&&(0,B.hu)(!1,"Unexpected increment value: "+v);const M=h.node();if((0,B.hu)(null!=M,"Expected ChildrenNode.EMPTY_NODE for nulls"),!M.isLeafNode())return v;const K=M.getValue();return"number"!=typeof K?v:K+v},aa=function(m,h,f,v){return Yi(h,new rl(f,m),v)},lu=function(m,h,f){return Yi(m,new jo(h),f)};function Yi(m,h,f){const v=m.getPriority().val(),M=Or(v,h.getImmediateChild(".priority"),f);let V;if(m.isLeafNode()){const K=m,ce=Or(K.getValue(),h,f);return ce!==K.getValue()||M!==K.getPriority().val()?new Es(ce,Dr(M)):m}{const K=m;return V=K,M!==K.getPriority().val()&&(V=V.updatePriority(new Es(M))),K.forEachChild(Nr,(ce,we)=>{const Ne=Yi(we,h.getImmediateChild(ce),f);Ne!==we&&(V=V.updateImmediateChild(ce,Ne))}),V}}class il{constructor(h="",f=null,v={children:{},childCount:0}){this.name=h,this.parent=f,this.node=v}}function Hl(m,h){let f=h instanceof Rn?h:new Rn(h),v=m,M=En(f);for(;null!==M;){const V=(0,B.DV)(v.node.children,M)||{children:{},childCount:0};v=new il(M,v,V),f=xn(f),M=En(f)}return v}function Ca(m){return m.node.value}function Ia(m,h){m.node.value=h,ua(m)}function lc(m){return m.node.childCount>0}function Pl(m,h){St(m.node.children,(f,v)=>{h(new il(f,m,v))})}function Rl(m,h,f,v){f&&!v&&h(m),Pl(m,M=>{Rl(M,h,!0,v)}),f&&v&&h(m)}function la(m){return new Rn(null===m.parent?m.name:la(m.parent)+"/"+m.name)}function ua(m){null!==m.parent&&function ku(m,h,f){const v=function uc(m){return void 0===Ca(m)&&!lc(m)}(f),M=(0,B.r3)(m.node.children,h);v&&M?(delete m.node.children[h],m.node.childCount--,ua(m)):!v&&!M&&(m.node.children[h]=f.node,m.node.childCount++,ua(m))}(m.parent,m.name,m)}const Ha=/[\[\].#$\/\u0000-\u001F\u007F]/,pl=/[\[\].#$\u0000-\u001F\u007F]/,yi=10485760,$a=function(m){return"string"==typeof m&&0!==m.length&&!Ha.test(m)},Qi=function(m){return"string"==typeof m&&0!==m.length&&!pl.test(m)},ca=function(m){return null===m||"string"==typeof m||"number"==typeof m&&!Qe(m)||m&&"object"==typeof m&&(0,B.r3)(m,".sv")},as=function(m,h,f,v){v&&void 0===h||js((0,B.gK)(m,"value"),h,f)},js=function(m,h,f){const v=f instanceof Rn?new Ke(f,m):f;if(void 0===h)throw new Error(m+"contains undefined "+Bn(v));if("function"==typeof h)throw new Error(m+"contains a function "+Bn(v)+" with contents = "+h.toString());if(Qe(h))throw new Error(m+"contains "+h.toString()+" "+Bn(v));if("string"==typeof h&&h.length>yi/3&&(0,B.ug)(h)>yi)throw new Error(m+"contains a string greater than "+yi+" utf8 bytes "+Bn(v)+" ('"+h.substring(0,50)+"...')");if(h&&"object"==typeof h){let M=!1,V=!1;if(St(h,(K,ce)=>{if(".value"===K)M=!0;else if(".priority"!==K&&".sv"!==K&&(V=!0,!$a(K)))throw new Error(m+" contains an invalid key ("+K+") "+Bn(v)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function pt(m,h){m.parts_.length>0&&(m.byteLength_+=1),m.parts_.push(h),m.byteLength_+=(0,B.ug)(h),Vt(m)})(v,K),js(m,ce,v),function Wt(m){const h=m.parts_.pop();m.byteLength_-=(0,B.ug)(h),m.parts_.length>0&&(m.byteLength_-=1)}(v)}),M&&V)throw new Error(m+' contains ".value" child '+Bn(v)+" in addition to actual children.")}},Cu=function(m,h,f,v){if(v&&void 0===h)return;const M=(0,B.gK)(m,"values");if(!h||"object"!=typeof h||Array.isArray(h))throw new Error(M+" must be an object containing the children to replace.");const V=[];St(h,(K,ce)=>{const we=new Rn(K);if(js(M,ce,zn(f,we)),".priority"===Ls(we)&&!ca(ce))throw new Error(M+"contains an invalid value for '"+we.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");V.push(we)}),function(m,h){let f,v;for(f=0;f<h.length;f++){v=h[f];const V=qr(v);for(let K=0;K<V.length;K++)if((".priority"!==V[K]||K!==V.length-1)&&!$a(V[K]))throw new Error(m+"contains an invalid key ("+V[K]+") in path "+v.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}h.sort(Fi);let M=null;for(f=0;f<h.length;f++){if(v=h[f],null!==M&&tt(M,v))throw new Error(m+"contains a path "+M.toString()+" that is ancestor of another path "+v.toString());M=v}}(M,V)},$l=function(m,h,f,v){if(!(v&&void 0===f||Qi(f)))throw new Error((0,B.gK)(m,h)+'was an invalid path = "'+f+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Eo=function(m,h){if(".info"===En(h))throw new Error(m+" failed = Can't modify data under /.info/")};class gl{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Gl(m,h){let f=null;for(let v=0;v<h.length;v++){const M=h[v],V=M.getPath();null!==f&&!De(V,f.path)&&(m.eventLists_.push(f),f=null),null===f&&(f={events:[],path:V}),f.events.push(M)}f&&m.eventLists_.push(f)}function cu(m,h,f){Gl(m,f),Wl(m,v=>De(v,h))}function vs(m,h,f){Gl(m,f),Wl(m,v=>tt(v,h)||tt(h,v))}function Wl(m,h){m.recursionDepth_++;let f=!0;for(let v=0;v<m.eventLists_.length;v++){const M=m.eventLists_[v];M&&(h(M.path)?(ml(m.eventLists_[v]),m.eventLists_[v]=null):f=!1)}f&&(m.eventLists_=[]),m.recursionDepth_--}function ml(m){for(let h=0;h<m.events.length;h++){const f=m.events[h];if(null!==f){m.events[h]=null;const v=f.getEventRunner();dt&&Oe("event: "+f.toString()),st(v)}}}class yl{constructor(h,f,v,M){this.repoInfo_=h,this.forceRestClient_=f,this.authTokenProvider_=v,this.appCheckProvider_=M,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new gl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vr(),this.transactionQueueTree_=new il,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function wa(m){const f=m.infoData_.getNode(new Rn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+f}function wi(m){return function(m){return(m=m||{}).timestamp=m.timestamp||(new Date).getTime(),m}({timestamp:wa(m)})}function du(m,h,f,v,M){m.dataUpdateCount++;const V=new Rn(h);f=m.interceptServerDataCallback_?m.interceptServerDataCallback_(h,f):f;let K=[];if(M)if(v){const we=(0,B.UI)(f,Ne=>Dr(Ne));K=function un(m,h,f,v){const M=ws(m,v);if(M){const V=Va(M),K=V.path,ce=V.queryId,we=xr(K,h),Ne=bn.fromObject(f);return Ol(m,K,new Io(ya(ce),we,Ne))}return[]}(m.serverSyncTree_,V,we,M)}else{const we=Dr(f);K=Ft(m.serverSyncTree_,V,we,M)}else if(v){const we=(0,B.UI)(f,Ne=>Dr(Ne));K=function X(m,h,f){const v=bn.fromObject(f);return Lr(m,new Io({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},h,v))}(m.serverSyncTree_,V,we)}else{const we=Dr(f);K=j(m.serverSyncTree_,V,we)}let ce=V;K.length>0&&(ce=Cl(m,V)),vs(m.eventQueue_,ce,K)}function zl(m,h){vl(m,"connected",h),!1===h&&function El(m){$o(m,"onDisconnectEvents");const h=wi(m),f=Vr();Gr(m.onDisconnect_,Tn(),(M,V)=>{const K=aa(M,V,m.serverSyncTree_,h);rs(f,M,K)});let v=[];Gr(f,Tn(),(M,V)=>{v=v.concat(j(m.serverSyncTree_,M,V));const K=E(m,M);Cl(m,K)}),m.onDisconnect_=Vr(),vs(m.eventQueue_,Tn(),v)}(m)}function vl(m,h,f){const v=new Rn("/.info/"+h),M=Dr(f);m.infoData_.updateSnapshot(v,M);const V=j(m.infoSyncTree_,v,M);vs(m.eventQueue_,v,V)}function ol(m){return m.nextWriteId_++}function fu(m,h,f){m.server_.onDisconnectCancel(h.toString(),(v,M)=>{"ok"===v&&Is(m.onDisconnect_,h),Wa(0,f,v,M)})}function wu(m,h,f,v){const M=Dr(f);m.server_.onDisconnectPut(h.toString(),M.val(!0),(V,K)=>{"ok"===V&&rs(m.onDisconnect_,h,M),Wa(0,v,V,K)})}function da(m,h,f){let v;v=".info"===En(h._path)?Ze(m.infoSyncTree_,h,f):Ze(m.serverSyncTree_,h,f),cu(m.eventQueue_,h._path,v)}function $o(m,...h){let f="";m.persistentConnection_&&(f=m.persistentConnection_.id+":"),Oe(f,...h)}function Wa(m,h,f,v){h&&st(()=>{if("ok"===f)h(null);else{const M=(f||"error").toUpperCase();let V=M;v&&(V+=": "+v);const K=new Error(V);K.code=M,h(K)}})}function pu(m,h,f){return An(m.serverSyncTree_,h,f)||pn.EMPTY_NODE}function Ka(m,h=m.transactionQueueTree_){if(h||c(m,h),Ca(h)){const f=l(m,h);(0,B.hu)(f.length>0,"Sending zero length transaction queue"),f.every(M=>0===M.status)&&function gu(m,h,f){const v=f.map(Ne=>Ne.currentWriteId),M=pu(m,h,v);let V=M;const K=M.hash();for(let Ne=0;Ne<f.length;Ne++){const _t=f[Ne];(0,B.hu)(0===_t.status,"tryToSendTransactionQueue_: items in queue should all be run."),_t.status=1,_t.retryCount++;const Dt=xr(h,_t.path);V=V.updateChild(Dt,_t.currentOutputSnapshotRaw)}const ce=V.val(!0),we=h;m.server_.put(we.toString(),ce,Ne=>{$o(m,"transaction put response",{path:we.toString(),status:Ne});let _t=[];if("ok"===Ne){const Dt=[];for(let Mt=0;Mt<f.length;Mt++)f[Mt].status=2,_t=_t.concat(N(m.serverSyncTree_,f[Mt].currentWriteId)),f[Mt].onComplete&&Dt.push(()=>f[Mt].onComplete(null,!0,f[Mt].currentOutputSnapshotResolved)),f[Mt].unwatcher();c(m,Hl(m.transactionQueueTree_,h)),Ka(m,m.transactionQueueTree_),vs(m.eventQueue_,h,_t);for(let Mt=0;Mt<Dt.length;Mt++)st(Dt[Mt])}else{if("datastale"===Ne)for(let Dt=0;Dt<f.length;Dt++)f[Dt].status=3===f[Dt].status?4:0;else{Nt("transaction at "+we.toString()+" failed: "+Ne);for(let Dt=0;Dt<f.length;Dt++)f[Dt].status=4,f[Dt].abortReason=Ne}Cl(m,h)}},K)}(m,la(h),f)}else lc(h)&&Pl(h,f=>{Ka(m,f)})}function Cl(m,h){const f=O(m,h),v=la(f);return function ql(m,h,f){if(0===h.length)return;const v=[];let M=[];const K=h.filter(ce=>0===ce.status).map(ce=>ce.currentWriteId);for(let ce=0;ce<h.length;ce++){const we=h[ce],Ne=xr(f,we.path);let Dt,_t=!1;if((0,B.hu)(null!==Ne,"rerunTransactionsUnderNode_: relativePath should not be null."),4===we.status)_t=!0,Dt=we.abortReason,M=M.concat(N(m.serverSyncTree_,we.currentWriteId,!0));else if(0===we.status)if(we.retryCount>=25)_t=!0,Dt="maxretry",M=M.concat(N(m.serverSyncTree_,we.currentWriteId,!0));else{const Mt=pu(m,we.path,K);we.currentInputSnapshot=Mt;const yn=h[ce].update(Mt.val());if(void 0!==yn){js("transaction failed: Data returned ",yn,we.path);let Yn=Dr(yn);"object"==typeof yn&&null!=yn&&(0,B.r3)(yn,".priority")||(Yn=Yn.updatePriority(Mt.getPriority()));const bo=we.currentWriteId,Fl=wi(m),ls=lu(Yn,Mt,Fl);we.currentOutputSnapshotRaw=Yn,we.currentOutputSnapshotResolved=ls,we.currentWriteId=ol(m),K.splice(K.indexOf(bo),1),M=M.concat(A(m.serverSyncTree_,we.path,ls,we.currentWriteId,we.applyLocally)),M=M.concat(N(m.serverSyncTree_,bo,!0))}else _t=!0,Dt="nodata",M=M.concat(N(m.serverSyncTree_,we.currentWriteId,!0))}vs(m.eventQueue_,f,M),M=[],_t&&(h[ce].status=2,setTimeout(h[ce].unwatcher,Math.floor(0)),h[ce].onComplete&&v.push("nodata"===Dt?()=>h[ce].onComplete(null,!1,h[ce].currentInputSnapshot):()=>h[ce].onComplete(new Error(Dt),!1,null)))}c(m,m.transactionQueueTree_);for(let ce=0;ce<v.length;ce++)st(v[ce]);Ka(m,m.transactionQueueTree_)}(m,l(m,f),v),v}function O(m,h){let f,v=m.transactionQueueTree_;for(f=En(h);null!==f&&void 0===Ca(v);)v=Hl(v,f),f=En(h=xn(h));return v}function l(m,h){const f=[];return a(m,h,f),f.sort((v,M)=>v.order-M.order),f}function a(m,h,f){const v=Ca(h);if(v)for(let M=0;M<v.length;M++)f.push(v[M]);Pl(h,M=>{a(m,M,f)})}function c(m,h){const f=Ca(h);if(f){let v=0;for(let M=0;M<f.length;M++)2!==f[M].status&&(f[v]=f[M],v++);f.length=v,Ia(h,f.length>0?f:void 0)}Pl(h,v=>{c(m,v)})}function E(m,h){const f=la(O(m,h)),v=Hl(m.transactionQueueTree_,h);return function fl(m,h,f){let v=f?m:m.parent;for(;null!==v;){if(h(v))return!0;v=v.parent}}(v,M=>{S(m,M)}),S(m,v),Rl(v,M=>{S(m,M)}),f}function S(m,h){const f=Ca(h);if(f){const v=[];let M=[],V=-1;for(let K=0;K<f.length;K++)3===f[K].status||(1===f[K].status?((0,B.hu)(V===K-1,"All SENT items should be at beginning of queue."),V=K,f[K].status=3,f[K].abortReason="set"):((0,B.hu)(0===f[K].status,"Unexpected transaction status in abort"),f[K].unwatcher(),M=M.concat(N(m.serverSyncTree_,f[K].currentWriteId,!0)),f[K].onComplete&&v.push(f[K].onComplete.bind(null,new Error("set"),!1,null))));-1===V?Ia(h,void 0):f.length=V+1,vs(m.eventQueue_,la(h),M);for(let K=0;K<v.length;K++)st(v[K])}}const fe=function(m,h){const f=Me(m),v=f.namespace;return"firebase.com"===f.domain&&Je(f.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!v||"undefined"===v)&&"localhost"!==f.domain&&Je("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),f.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Nt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ye(f.host,f.secure,v,"ws"===f.scheme||"wss"===f.scheme,h,"",v!==f.subdomain),path:new Rn(f.pathString)}},Me=function(m){let h="",f="",v="",M="",V="",K=!0,ce="https",we=443;if("string"==typeof m){let Ne=m.indexOf("//");Ne>=0&&(ce=m.substring(0,Ne-1),m=m.substring(Ne+2));let _t=m.indexOf("/");-1===_t&&(_t=m.length);let Dt=m.indexOf("?");-1===Dt&&(Dt=m.length),h=m.substring(0,Math.min(_t,Dt)),_t<Dt&&(M=function H(m){let h="";const f=m.split("/");for(let v=0;v<f.length;v++)if(f[v].length>0){let M=f[v];try{M=decodeURIComponent(M.replace(/\+/g," "))}catch(V){}h+="/"+M}return h}(m.substring(_t,Dt)));const Mt=function ie(m){const h={};"?"===m.charAt(0)&&(m=m.substring(1));for(const f of m.split("&")){if(0===f.length)continue;const v=f.split("=");2===v.length?h[decodeURIComponent(v[0])]=decodeURIComponent(v[1]):Nt(`Invalid query segment '${f}' in query '${m}'`)}return h}(m.substring(Math.min(m.length,Dt)));Ne=h.indexOf(":"),Ne>=0?(K="https"===ce||"wss"===ce,we=parseInt(h.substring(Ne+1),10)):Ne=h.length;const yn=h.slice(0,Ne);if("localhost"===yn.toLowerCase())f="localhost";else if(yn.split(".").length<=2)f=yn;else{const Yn=h.indexOf(".");v=h.substring(0,Yn).toLowerCase(),f=h.substring(Yn+1),V=v}"ns"in Mt&&(V=Mt.ns)}return{host:h,port:we,domain:f,subdomain:v,secure:K,scheme:ce,pathString:M,namespace:V}},ze="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Et=function(){let m=0;const h=[];return function(f){const v=f===m;let M;m=f;const V=new Array(8);for(M=7;M>=0;M--)V[M]=ze.charAt(f%64),f=Math.floor(f/64);(0,B.hu)(0===f,"Cannot push at time == 0");let K=V.join("");if(v){for(M=11;M>=0&&63===h[M];M--)h[M]=0;h[M]++}else for(M=0;M<12;M++)h[M]=Math.floor(64*Math.random());for(M=0;M<12;M++)K+=ze.charAt(h[M]);return(0,B.hu)(20===K.length,"nextPushId: Length should be 20."),K}}();class Yt{constructor(h,f,v,M){this.eventType=h,this.eventRegistration=f,this.snapshot=v,this.prevName=M}getPath(){const h=this.snapshot.ref;return"value"===this.eventType?h._path:h.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,B.Wl)(this.snapshot.exportVal())}}class vn{constructor(h,f,v){this.eventRegistration=h,this.error=f,this.path=v}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Mn{constructor(h,f){this.snapshotCallback=h,this.cancelCallback=f}onValue(h,f){this.snapshotCallback.call(null,h,f)}onCancel(h){return(0,B.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,h)}get hasCancelCallback(){return!!this.cancelCallback}matches(h){return this.snapshotCallback===h.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===h.snapshotCallback.userCallback&&this.snapshotCallback.context===h.snapshotCallback.context}}class cn{constructor(h,f){this._repo=h,this._path=f}cancel(){const h=new B.BH;return fu(this._repo,this._path,h.wrapCallback(()=>{})),h.promise}remove(){Eo("OnDisconnect.remove",this._path);const h=new B.BH;return wu(this._repo,this._path,null,h.wrapCallback(()=>{})),h.promise}set(h){Eo("OnDisconnect.set",this._path),as("OnDisconnect.set",h,this._path,!1);const f=new B.BH;return wu(this._repo,this._path,h,f.wrapCallback(()=>{})),f.promise}setWithPriority(h,f){Eo("OnDisconnect.setWithPriority",this._path),as("OnDisconnect.setWithPriority",h,this._path,!1),function(m,h,f){if(!f||void 0!==h){if(Qe(h))throw new Error((0,B.gK)(m,"priority")+"is "+h.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ca(h))throw new Error((0,B.gK)(m,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}("OnDisconnect.setWithPriority",f,!1);const v=new B.BH;return function Uu(m,h,f,v,M){const V=Dr(f,v);m.server_.onDisconnectPut(h.toString(),V.val(!0),(K,ce)=>{"ok"===K&&rs(m.onDisconnect_,h,V),Wa(0,M,K,ce)})}(this._repo,this._path,h,f,v.wrapCallback(()=>{})),v.promise}update(h){Eo("OnDisconnect.update",this._path),Cu("OnDisconnect.update",h,this._path,!1);const f=new B.BH;return function Tu(m,h,f,v){if((0,B.xb)(f))return Oe("onDisconnect().update() called with empty data.  Don't do anything."),void Wa(0,v,"ok",void 0);m.server_.onDisconnectMerge(h.toString(),f,(M,V)=>{"ok"===M&&St(f,(K,ce)=>{const we=Dr(ce);rs(m.onDisconnect_,zn(h,K),we)}),Wa(0,v,M,V)})}(this._repo,this._path,h,f.wrapCallback(()=>{})),f.promise}}class mn{constructor(h,f,v,M){this._repo=h,this._path=f,this._queryParams=v,this._orderByCalled=M}get key(){return $n(this._path)?null:Ls(this._path)}get ref(){return new _i(this._repo,this._path)}get _queryIdentifier(){const h=te(this._queryParams),f=nr(h);return"{}"===f?"default":f}get _queryObject(){return te(this._queryParams)}isEqual(h){if(!((h=(0,B.m9)(h))instanceof mn))return!1;const f=this._repo===h._repo,v=De(this._path,h._path);return f&&v&&this._queryIdentifier===h._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function go(m){let h="";for(let f=m.pieceNum_;f<m.pieces_.length;f++)""!==m.pieces_[f]&&(h+="/"+encodeURIComponent(String(m.pieces_[f])));return h||"/"}(this._path)}}class _i extends mn{constructor(h,f){super(h,f,new $r,!1)}get parent(){const h=Pi(this._path);return null===h?null:new _i(this._repo,h)}get root(){let h=this;for(;null!==h.parent;)h=h.parent;return h}}class di{constructor(h,f,v){this._node=h,this.ref=f,this._index=v}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(h){const f=new Rn(h),v=Br(this.ref,h);return new di(this._node.getChild(f),v,Nr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(h){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(v,M)=>h(new di(M,Br(this.ref,v),Nr)))}hasChild(h){const f=new Rn(h);return!this._node.getChild(f).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function xs(m,h){return(m=(0,B.m9)(m))._checkNotDeleted("ref"),void 0!==h?Br(m._root,h):m._root}function Br(m,h){return null===En((m=(0,B.m9)(m))._path)?(f=h,f&&(f=f.replace(/^\/*\.info(\/|$)/,"/")),$l("child","path",f,!1)):$l("child","path",h,!1),new _i(m._repo,zn(m._path,h));var f}function kr(m){return m=(0,B.m9)(m),new cn(m._repo,m._path)}function za(m,h){m=(0,B.m9)(m),Eo("push",m._path),as("push",h,m._path,!0);const f=wa(m._repo),v=Et(f),M=Br(m,v),V=Br(m,v);let K;return K=null!=h?Zs(V,h).then(()=>V):Promise.resolve(V),M.then=K.then.bind(K),M.catch=K.then.bind(K,void 0),M}function Sa(m){return Eo("remove",m._path),Zs(m,null)}function Zs(m,h){m=(0,B.m9)(m),Eo("set",m._path),as("set",h,m._path,!1);const f=new B.BH;return function Ql(m,h,f,v,M){$o(m,"set",{path:h.toString(),value:f,priority:v});const V=wi(m),K=Dr(f,v),ce=An(m.serverSyncTree_,h),we=lu(K,ce,V),Ne=ol(m),_t=A(m.serverSyncTree_,h,we,Ne,!0);Gl(m.eventQueue_,_t),m.server_.put(h.toString(),K.val(!0),(Mt,yn)=>{const Yn="ok"===Mt;Yn||Nt("set at "+h+" failed: "+Mt);const ii=N(m.serverSyncTree_,Ne,!Yn);vs(m.eventQueue_,h,ii),Wa(0,M,Mt,yn)});const Dt=E(m,h);Cl(m,Dt),vs(m.eventQueue_,Dt,[])}(m._repo,m._path,h,null,f.wrapCallback(()=>{})),f.promise}function mu(m,h){Cu("update",h,m._path,!1);const f=new B.BH;return function hu(m,h,f,v){$o(m,"update",{path:h.toString(),value:f});let M=!0;const V=wi(m),K={};if(St(f,(ce,we)=>{M=!1,K[ce]=aa(zn(h,ce),Dr(we),m.serverSyncTree_,V)}),M)Oe("update() called with empty data.  Don't do anything."),Wa(0,v,"ok",void 0);else{const ce=ol(m),we=function T(m,h,f,v){!function wo(m,h,f,v){(0,B.hu)(v>m.lastWriteId,"Stacking an older merge on top of newer ones"),m.allWrites.push({path:h,children:f,writeId:v,visible:!0}),m.visibleWrites=Ci(m.visibleWrites,h,f),m.lastWriteId=v}(m.pendingWriteTree_,h,f,v);const M=bn.fromObject(f);return Lr(m,new Io({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},h,M))}(m.serverSyncTree_,h,K,ce);Gl(m.eventQueue_,we),m.server_.merge(h.toString(),f,(Ne,_t)=>{const Dt="ok"===Ne;Dt||Nt("update at "+h+" failed: "+Ne);const Mt=N(m.serverSyncTree_,ce,!Dt),yn=Mt.length>0?Cl(m,h):h;vs(m.eventQueue_,yn,Mt),Wa(0,v,Ne,_t)}),St(f,Ne=>{const _t=E(m,zn(h,Ne));Cl(m,_t)}),vs(m.eventQueue_,h,[])}}(m._repo,m._path,h,f.wrapCallback(()=>{})),f.promise}function Uc(m){m=(0,B.m9)(m);const h=new Mn(()=>{}),f=new kt(h);return function Do(m,h,f){const v=function cr(m,h){const f=h._path;let v=null;m.syncPointTree_.foreachOnPath(f,(Ne,_t)=>{const Dt=xr(Ne,f);v=v||ra(_t,Dt)});let M=m.syncPointTree_.get(f);M?v=v||ra(M,Tn()):(M=new ka,m.syncPointTree_=m.syncPointTree_.set(f,M));const V=null!=v,K=V?new Xi(v,!0,!1):null;return function el(m){return et(m.viewCache_)}(au(M,h,xt(m.pendingWriteTree_,h._path),V?K.getNode():pn.EMPTY_NODE,V))}(m.serverSyncTree_,h);return null!=v?Promise.resolve(v):m.server_.get(h).then(M=>{const V=Dr(M).withIndex(h._queryParams.getIndex());let K;if(Ht(m.serverSyncTree_,h,f,!0),h._queryParams.loadsAllData())K=j(m.serverSyncTree_,h._path,V);else{const ce=qs(m.serverSyncTree_,h);K=Ft(m.serverSyncTree_,h._path,V,ce)}return vs(m.eventQueue_,h._path,K),Ze(m.serverSyncTree_,h,f,null,!0),V},M=>($o(m,"get for query "+(0,B.Wl)(h)+" failed: "+M),Promise.reject(new Error(M))))}(m._repo,m,f).then(v=>new di(v,new _i(m._repo,m._path),m._queryParams.getIndex()))}class kt{constructor(h){this.callbackContext=h}respondsTo(h){return"value"===h}createEvent(h,f){const v=f._queryParams.getIndex();return new Yt("value",this,new di(h.snapshotNode,new _i(f._repo,f._path),v))}getEventRunner(h){return"cancel"===h.getEventType()?()=>this.callbackContext.onCancel(h.error):()=>this.callbackContext.onValue(h.snapshot,null)}createCancelEvent(h,f){return this.callbackContext.hasCancelCallback?new vn(this,h,f):null}matches(h){return h instanceof kt&&(!h.callbackContext||!this.callbackContext||h.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class kn{constructor(h,f){this.eventType=h,this.callbackContext=f}respondsTo(h){let f="children_added"===h?"child_added":h;return f="children_removed"===f?"child_removed":f,this.eventType===f}createCancelEvent(h,f){return this.callbackContext.hasCancelCallback?new vn(this,h,f):null}createEvent(h,f){(0,B.hu)(null!=h.childName,"Child events should have a childName.");const v=Br(new _i(f._repo,f._path),h.childName),M=f._queryParams.getIndex();return new Yt(h.type,this,new di(h.snapshotNode,v,M),h.prevName)}getEventRunner(h){return"cancel"===h.getEventType()?()=>this.callbackContext.onCancel(h.error):()=>this.callbackContext.onValue(h.snapshot,h.prevName)}matches(h){return h instanceof kn&&this.eventType===h.eventType&&(!this.callbackContext||!h.callbackContext||this.callbackContext.matches(h.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function wr(m,h,f,v){return function Hn(m,h,f,v,M){let V;if("object"==typeof v&&(V=void 0,M=v),"function"==typeof v&&(V=v),M&&M.onlyOnce){const we=f,Ne=(_t,Dt)=>{da(m._repo,m,ce),we(_t,Dt)};Ne.userCallback=f.userCallback,Ne.context=f.context,f=Ne}const K=new Mn(f,V||void 0),ce="value"===h?new kt(K):new kn(h,K);return function Vu(m,h,f){let v;v=".info"===En(h._path)?Ht(m.infoSyncTree_,h,f):Ht(m.serverSyncTree_,h,f),cu(m.eventQueue_,h._path,v)}(m._repo,m,ce),()=>da(m._repo,m,ce)}(m,"value",h,f,v)}function qi(m,h,f){let v=null;const M=f?new Mn(f):null;"value"===h?v=new kt(M):h&&(v=new kn(h,M)),da(m._repo,m,v)}(function Bo(m){(0,B.hu)(!os,"__referenceConstructor has already been defined"),os=m})(_i),function dl(m){(0,B.hu)(!xi,"__referenceConstructor has already been defined"),xi=m}(_i);const yd={};function uh(m,h,f,v,M){let V=v||m.options.databaseURL;void 0===V&&(m.options.projectId||Je("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Oe("Using default host for project ",m.options.projectId),V=`${m.options.projectId}-default-rtdb.firebaseio.com`);let we,Ne,K=fe(V,M),ce=K.repoInfo;"undefined"!=typeof process&&process.env&&(Ne=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Ne?(we=!0,V=`http://${Ne}?ns=${ce.namespace}`,K=fe(V,M),ce=K.repoInfo):we=!K.repoInfo.secure;const _t=M&&we?new Fn(Fn.OWNER):new on(m.name,m.options,h);(function(m,h){const f=h.path.toString();if("string"!=typeof h.repoInfo.host||0===h.repoInfo.host.length||!$a(h.repoInfo.namespace)&&"localhost"!==h.repoInfo.host.split(":")[0]||0!==f.length&&!function(m){return m&&(m=m.replace(/^\/*\.info(\/|$)/,"/")),Qi(m)}(f))throw new Error((0,B.gK)(m,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",K),$n(K.path)||Je("Database URL must point to the root of a Firebase Database (not including a child path).");const Dt=function dh(m,h,f,v){let M=yd[h.name];M||(M={},yd[h.name]=M);let V=M[m.toURLString()];return V&&Je("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),V=new yl(m,false,f,v),M[m.toURLString()]=V,V}(ce,m,_t,new $t(m.name,f));return new Tg(Dt,m)}class Tg{constructor(h,f){this._repoInternal=h,this.app=f,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function _l(m,h,f){if(m.stats_=Lt(m.repoInfo_),m.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)m.server_=new ct(m.repoInfo_,(v,M,V,K)=>{du(m,v,M,V,K)},m.authTokenProvider_,m.appCheckProvider_),setTimeout(()=>zl(m,!0),0);else{if(null!=f){if("object"!=typeof f)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,B.Wl)(f)}catch(v){throw new Error("Invalid authOverride provided: "+v)}}m.persistentConnection_=new Gs(m.repoInfo_,h,(v,M,V,K)=>{du(m,v,M,V,K)},v=>{zl(m,v)},v=>{!function Yl(m,h){St(h,(f,v)=>{vl(m,f,v)})}(m,v)},m.authTokenProvider_,m.appCheckProvider_,f),m.server_=m.persistentConnection_}m.authTokenProvider_.addTokenChangeListener(v=>{m.server_.refreshAuthToken(v)}),m.appCheckProvider_.addTokenChangeListener(v=>{m.server_.refreshAppCheckToken(v.token)}),m.statsReporter_=function Nn(m,h){const f=m.toString();return er[f]||(er[f]=h()),er[f]}(m.repoInfo_,()=>new Jo(m.stats_,m.server_)),m.infoData_=new nn,m.infoSyncTree_=new b({startListening:(v,M,V,K)=>{let ce=[];const we=m.infoData_.getNode(v._path);return we.isEmpty()||(ce=j(m.infoSyncTree_,v._path,we),setTimeout(()=>{K("ok")},0)),ce},stopListening:()=>{}}),vl(m,"connected",!1),m.serverSyncTree_=new b({startListening:(v,M,V,K)=>(m.server_.listen(v,V,M,(ce,we)=>{const Ne=K(ce,we);vs(m.eventQueue_,v._path,Ne)}),[]),stopListening:(v,M)=>{m.server_.unlisten(v,M)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _i(this._repo,Tn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function ch(m,h){const f=yd[h];(!f||f[m.key]!==m)&&Je(`Database ${h}(${m.repoInfo_}) has already been deleted.`),function Ga(m){m.persistentConnection_&&m.persistentConnection_.interrupt("repo_interrupt")}(m),delete f[m.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(h){null===this._rootInternal&&Je("Cannot call "+h+" on a deleted database.")}}function Ou(m=(0,I.Mq)(),h){const f=(0,I.qX)(m,"database").getImmediate({identifier:h});if(!f._instanceStarted){const v=(0,B.P0)("database");v&&function gc(m,h,f,v={}){(m=(0,B.m9)(m))._checkNotDeleted("useEmulator"),m._instanceStarted&&Je("Cannot call useEmulator() after instance has already been initialized.");const M=m._repoInternal;let V;if(M.repoInfo_.nodeAdmin)v.mockUserToken&&Je('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),V=new Fn(Fn.OWNER);else if(v.mockUserToken){const K="string"==typeof v.mockUserToken?v.mockUserToken:(0,B.Sg)(v.mockUserToken,m.app.options.projectId);V=new Fn(K)}!function fc(m,h,f,v){m.repoInfo_=new ye(`${h}:${f}`,!1,m.repoInfo_.namespace,m.repoInfo_.webSocketOnly,m.repoInfo_.nodeAdmin,m.repoInfo_.persistenceKey,m.repoInfo_.includeNamespaceInQueryParams,!0),v&&(m.authTokenProvider_=v)}(M,h,f,V)}(f,...v)}return f}const Ll={".sv":"timestamp"};function gh(){return Ll}function mc(m){return{".sv":{increment:m}}}Gs.prototype.simpleListen=function(m,h){this.sendRequest("q",{p:m},h)},Gs.prototype.echo=function(m,h){this.sendRequest("echo",{d:m},h)},function ph(m){(function oe(m){z=m})(I.Jn),(0,I.Xd)(new J.wA("database",(h,{instanceIdentifier:f})=>uh(h.getProvider("app").getImmediate(),h.getProvider("auth-internal"),h.getProvider("app-check-internal"),f),"PUBLIC").setMultipleInstances(!0)),(0,I.KN)(re,"0.14.3",m),(0,I.KN)(re,"0.14.3","esm2017")}()},9996:(_e,ne,D)=>{D.d(ne,{ET:()=>qm,hJ:()=>rf,oe:()=>y_,JU:()=>od,ST:()=>ld,Lx:()=>$m,QT:()=>zm,kl:()=>g_,PL:()=>m_,ad:()=>ad,b9:()=>Hm,cf:()=>Zm,Xo:()=>c_,IO:()=>jm,Bt:()=>ey,TQ:()=>h_,r7:()=>Qm});var z,g=D(5861),I=D(6881),J=D(4859),B=D(1877),Y=D(2090),re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ee={},oe=oe||{},Q=re||self;function le(){}function ue(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Re(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var ve="closure_uid_"+(1e9*Math.random()>>>0),Be=0;function He(i,e,t){return i.call.apply(i.bind,arguments)}function xe(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,o),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function dt(i,e,t){return(dt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?He:xe).apply(null,arguments)}function mt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Ue(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(o,d,y){for(var C=Array(arguments.length-2),R=2;R<arguments.length;R++)C[R-2]=arguments[R];return e.prototype[d].apply(o,C)}}function Oe(){this.s=this.s,this.o=this.o}Oe.prototype.s=!1,Oe.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Ge(i){Object.prototype.hasOwnProperty.call(i,ve)&&i[ve]||(i[ve]=++Be)}(this)},Oe.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const It=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Je(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function Nt(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(ue(o)){const d=i.length||0,y=o.length||0;i.length=d+y;for(let C=0;C<y;C++)i[d+C]=o[C]}else i.push(o)}}function wt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}wt.prototype.h=function(){this.defaultPrevented=!0};var Qe=function(){if(!Q.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Q.addEventListener("test",le,e),Q.removeEventListener("test",le,e)}catch(t){}return i}();function Ye(i){return/^[\s\xa0]*$/.test(i)}var ut=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function qe(i,e){return i<e?-1:i>e?1:0}function Rt(){var i=Q.navigator;return i&&(i=i.userAgent)?i:""}function Tt(i){return-1!=Rt().indexOf(i)}function hn(i){return hn[" "](i),i}hn[" "]=le;var Dn,i,qt=Tt("Opera"),St=Tt("Trident")||Tt("MSIE"),vr=Tt("Edge"),Cr=vr||St,hr=Tt("Gecko")&&!(-1!=Rt().toLowerCase().indexOf("webkit")&&!Tt("Edge"))&&!(Tt("Trident")||Tt("MSIE"))&&!Tt("Edge"),ir=-1!=Rt().toLowerCase().indexOf("webkit")&&!Tt("Edge");function Ln(){var i=Q.document;return i?i.documentMode:void 0}e:{var jr="",Ct=(i=Rt(),hr?/rv:([^\);]+)(\)|;)/.exec(i):vr?/Edge\/([\d\.]+)/.exec(i):St?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):ir?/WebKit\/(\S+)/.exec(i):qt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Ct&&(jr=Ct?Ct[1]:""),St){var st=Ln();if(null!=st&&st>parseFloat(jr)){Dn=String(st);break e}}Dn=jr}var Le={};var Fn=Q.document&&St&&(Ln()||parseInt(Dn,10))||void 0;function Fr(i,e){if(wt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(hr){e:{try{hn(e.nodeName);var d=!0;break e}catch(y){}d=!1}d||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Li[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Fr.X.h.call(this)}}Ue(Fr,wt);var Li={2:"touch",3:"pen",4:"mouse"};Fr.prototype.h=function(){Fr.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var zt="closure_listenable_"+(1e6*Math.random()|0),si=0;function cs(i,e,t,o,d){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=d,this.key=++si,this.ba=this.ea=!1}function gr(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function Ei(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function oi(i){const e={};for(const t in i)e[t]=i[t];return e}const Pr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function je(i,e){let t,o;for(let d=1;d<arguments.length;d++){for(t in o=arguments[d],o)i[t]=o[t];for(let y=0;y<Pr.length;y++)t=Pr[y],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function Te(i){this.src=i,this.g={},this.h=0}function ye(i,e){var t=e.type;if(t in i.g){var y,o=i.g[t],d=It(o,e);(y=0<=d)&&Array.prototype.splice.call(o,d,1),y&&(gr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Xe(i,e,t,o){for(var d=0;d<i.length;++d){var y=i[d];if(!y.ba&&y.listener==e&&y.capture==!!t&&y.ha==o)return d}return-1}Te.prototype.add=function(i,e,t,o,d){var y=i.toString();(i=this.g[y])||(i=this.g[y]=[],this.h++);var C=Xe(i,e,o,d);return-1<C?(e=i[C],t||(e.ea=!1)):((e=new cs(e,this.src,y,!!o,d)).ea=t,i.push(e)),e};var ht="closure_lm_"+(1e6*Math.random()|0),an={};function dn(i,e,t,o,d){if(o&&o.once)return Nn(i,e,t,o,d);if(Array.isArray(e)){for(var y=0;y<e.length;y++)dn(i,e[y],t,o,d);return null}return t=Rr(t),i&&i[zt]?i.N(e,t,Re(o)?!!o.capture:!!o,d):er(i,e,t,!1,o,d)}function er(i,e,t,o,d,y){if(!e)throw Error("Invalid event type");var C=Re(d)?!!d.capture:!!d,R=Kn(i);if(R||(i[ht]=R=new Te(i)),(t=R.add(e,t,o,C,y)).proxy)return t;if(o=function Lt(){const e=fn;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Qe||(d=C),void 0===d&&(d=!1),i.addEventListener(e.toString(),o,d);else if(i.attachEvent)i.attachEvent(On(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function Nn(i,e,t,o,d){if(Array.isArray(e)){for(var y=0;y<e.length;y++)Nn(i,e[y],t,o,d);return null}return t=Rr(t),i&&i[zt]?i.O(e,t,Re(o)?!!o.capture:!!o,d):er(i,e,t,!0,o,d)}function Wn(i,e,t,o,d){if(Array.isArray(e))for(var y=0;y<e.length;y++)Wn(i,e[y],t,o,d);else o=Re(o)?!!o.capture:!!o,t=Rr(t),i&&i[zt]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Xe(y=i.g[e],t,o,d))&&(gr(y[t]),Array.prototype.splice.call(y,t,1),0==y.length&&(delete i.g[e],i.h--))):i&&(i=Kn(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Xe(e,t,o,d)),(t=-1<i?e[i]:null)&&zr(t))}function zr(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[zt])ye(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(On(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Kn(e))?(ye(t,i),0==t.h&&(t.src=null,e[ht]=null)):gr(i)}}}function On(i){return i in an?an[i]:an[i]="on"+i}function fn(i,e){if(i.ba)i=!0;else{e=new Fr(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&zr(i),i=t.call(o,e)}return i}function Kn(i){return(i=i[ht])instanceof Te?i:null}var Yr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rr(i){return"function"==typeof i?i:(i[Yr]||(i[Yr]=function(e){return i.handleEvent(e)}),i[Yr])}function Pn(){Oe.call(this),this.i=new Te(this),this.P=this,this.I=null}function lr(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new wt(e,i);else if(e instanceof wt)e.target=e.target||i;else{var d=e;je(e=new wt(o,i),d)}if(d=!0,t)for(var y=t.length-1;0<=y;y--){var C=e.g=t[y];d=hi(C,o,!0,e)&&d}if(d=hi(C=e.g=i,o,!0,e)&&d,d=hi(C,o,!1,e)&&d,t)for(y=0;y<t.length;y++)d=hi(C=e.g=t[y],o,!1,e)&&d}function hi(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,y=0;y<e.length;++y){var C=e[y];if(C&&!C.ba&&C.capture==t){var R=C.listener,G=C.ha||C.src;C.ea&&ye(i.i,C),d=!1!==R.call(G,o)&&d}}return d&&!o.defaultPrevented}Ue(Pn,Oe),Pn.prototype[zt]=!0,Pn.prototype.removeEventListener=function(i,e,t,o){Wn(this,i,e,t,o)},Pn.prototype.M=function(){if(Pn.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)gr(t[o]);delete i.g[e],i.h--}}this.I=null},Pn.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Pn.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var fi=Q.JSON.stringify;function Ae(){var i=Er;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Xt,Fe=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new vt,i=>i.reset());class vt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function We(i){Q.setTimeout(()=>{throw i},0)}function Gt(i,e){Xt||function qn(){var i=Q.Promise.resolve(void 0);Xt=function(){i.then($e)}}(),tr||(Xt(),tr=!0),Er.add(i,e)}var tr=!1,Er=new class Ie{constructor(){this.h=this.g=null}add(e,t){const o=Fe.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function $e(){for(var i;i=Ae();){try{i.h.call(i.g)}catch(t){We(t)}var e=Fe;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}tr=!1}function Ce(i,e){Pn.call(this),this.h=i||1,this.g=e||Q,this.j=dt(this.lb,this),this.l=Date.now()}function he(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function ke(i,e,t){if("function"==typeof i)t&&(i=dt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=dt(i.handleEvent,i)}return 2147483647<Number(e)?-1:Q.setTimeout(i,e||0)}function at(i){i.g=ke(()=>{i.g=null,i.i&&(i.i=!1,at(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ue(Ce,Pn),(z=Ce.prototype).ca=!1,z.R=null,z.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),lr(this,"tick"),this.ca&&(he(this),this.start()))}},z.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},z.M=function(){Ce.X.M.call(this),he(this),delete this.g};class tn extends Oe{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:at(this)}M(){super.M(),this.g&&(Q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rn(i){Oe.call(this),this.h=i,this.g={}}Ue(rn,Oe);var Se=[];function Pe(i,e,t,o){Array.isArray(t)||(t&&(Se[0]=t.toString()),t=Se);for(var d=0;d<t.length;d++){var y=dn(e,t[d],o||i.handleEvent,!1,i.h||i);if(!y)break;i.g[y.key]=y}}function gt(i){Ei(i.g,function(e,t){this.g.hasOwnProperty(t)&&zr(e)},i),i.g={}}function Ut(){this.g=!0}function Vn(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Qr(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var d=o[1];if(Array.isArray(d)&&!(1>d.length)){var y=d[0];if("noop"!=y&&"stop"!=y&&"close"!=y)for(var C=1;C<d.length;C++)d[C]=""}}}return fi(t)}catch(R){return e}}(i,t)+(o?" "+o:"")})}rn.prototype.M=function(){rn.X.M.call(this),gt(this)},rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ut.prototype.Aa=function(){this.g=!1},Ut.prototype.info=function(){};var Hr={},In=null;function Hi(){return In=In||new Pn}function ds(i){wt.call(this,Hr.Pa,i)}function Di(i){const e=Hi();lr(e,new ds(e))}function ai(i,e){wt.call(this,Hr.STAT_EVENT,i),this.stat=e}function Zn(i){const e=Hi();lr(e,new ai(e,i))}function Oi(i,e){wt.call(this,Hr.Qa,i),this.size=e}function Rn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Q.setTimeout(function(){i()},e)}Hr.Pa="serverreachability",Ue(ds,wt),Hr.STAT_EVENT="statevent",Ue(ai,wt),Hr.Qa="timingevent",Ue(Oi,wt);var Tn={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},En={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Xr(){}function Ls(){}Xr.prototype.h=null;var zn,go={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function qr(){wt.call(this,"d")}function Pi(){wt.call(this,"c")}function $n(){}function xr(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new rn(this),this.O=De,this.T=new Ce(i=Cr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Fi}function Fi(){this.i=null,this.g="",this.h=!1}Ue(qr,wt),Ue(Pi,wt),Ue($n,Xr),$n.prototype.g=function(){return new XMLHttpRequest},$n.prototype.i=function(){return{}},zn=new $n;var De=45e3,tt={},Ke={};function pt(i,e,t){i.K=1,i.v=hs(pi(e)),i.s=t,i.P=!0,Wt(i,null)}function Wt(i,e){i.F=Date.now(),Sr(i),i.A=pi(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),Nr(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Fi,i.g=_a(i.l,t?e:null,!i.s),0<i.N&&(i.L=new tn(dt(i.La,i,i.g),i.N)),Pe(i.S,i.g,"readystatechange",i.ib),e=i.H?oi(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),Di(),function _n(i,e,t,o,d,y){i.info(function(){if(i.g)if(y)for(var C="",R=y.split("&"),G=0;G<R.length;G++){var Z=R[G].split("=");if(1<Z.length){var de=Z[0];Z=Z[1];var be=de.split("_");C=2<=be.length&&"type"==be[1]?C+(de+"=")+Z+"&":C+(de+"=redacted&")}}else C=null;else C=y;return"XMLHTTP REQ ("+o+") [attempt "+d+"]: "+e+"\n"+t+"\n"+C})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Vt(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Bn(i,e,t){let d,o=!0;for(;!i.I&&i.C<t.length;){if(d=Ar(i,t),d==Ke){4==e&&(i.o=4,Zn(14),o=!1),Vn(i.j,i.m,null,"[Incomplete Response]");break}if(d==tt){i.o=4,Zn(15),Vn(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Vn(i.j,i.m,d,null),Hs(i,d)}Vt(i)&&d!=Ke&&d!=tt&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Zn(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ya(e),e.K=!0,Zn(11))):(Vn(i.j,i.m,t,"[Invalid Chunked Response]"),Ss(i),Ur(i))}function Ar(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Ke:(t=Number(e.substring(t,o)),isNaN(t)?tt:(o+=1)+t>e.length?Ke:(e=e.substr(o,t),i.C=o+t,e))}function Sr(i){i.V=Date.now()+i.O,Si(i,i.O)}function Si(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Rn(dt(i.gb,i),e)}function mr(i){i.B&&(Q.clearTimeout(i.B),i.B=null)}function Ur(i){0==i.l.G||i.I||ks(i.l,i)}function Ss(i){mr(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,he(i.T),gt(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Hs(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||pn(t.h,i)))if(!i.J&&pn(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch(Z){o=null}if(Array.isArray(o)&&3==o.length){var d=o;if(0==d[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;io(t),Fs(t)}ro(t),Zn(18)}}else t.Ba=d[1],0<t.Ba-t.T&&37500>d[2]&&t.L&&0==t.A&&!t.v&&(t.v=Rn(dt(t.cb,t),6e3));if(1>=fs(t.h)&&t.ja){try{t.ja()}catch(Z){}t.ja=void 0}}else Xi(t,11)}else if((i.J||t.g==i)&&io(t),!Ye(e))for(d=t.Fa.g.parse(e),e=0;e<d.length;e++){let Z=d[e];if(t.T=Z[0],Z=Z[1],2==t.G)if("c"==Z[0]){t.I=Z[1],t.ka=Z[2];const de=Z[3];null!=de&&(t.ma=de,t.j.info("VER="+t.ma));const be=Z[4];null!=be&&(t.Ca=be,t.j.info("SVER="+t.Ca));const rt=Z[5];null!=rt&&"number"==typeof rt&&0<rt&&(t.J=o=1.5*rt,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const Ot=i.g;if(Ot){const jt=Ot.g?Ot.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jt){var y=o.h;y.g||-1==jt.indexOf("spdy")&&-1==jt.indexOf("quic")&&-1==jt.indexOf("h2")||(y.j=y.l,y.g=new Set,y.h&&(Ys(y,y.h),y.h=null))}if(o.D){const gn=Ot.g?Ot.g.getResponseHeader("X-HTTP-Session-Id"):null;gn&&(o.za=gn,Jn(o.F,o.D,gn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var C=i;if((o=t).sa=ea(o,o.H?o.ka:null,o.V),C.J){or(o.h,C);var R=C,G=o.J;G&&R.setTimeout(G),R.B&&(mr(R),Sr(R)),o.g=C}else ma(o);0<t.i.length&&Ps(t)}else"stop"!=Z[0]&&"close"!=Z[0]||Xi(t,7);else 3==t.G&&("stop"==Z[0]||"close"==Z[0]?"stop"==Z[0]?Xi(t,7):Gr(t):"noop"!=Z[0]&&t.l&&t.l.wa(Z),t.A=0)}Di()}catch(Z){}}function rr(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ue(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function Gs(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if("undefined"!=typeof Map&&i instanceof Map)return Array.from(i.keys());if(!("undefined"!=typeof Set&&i instanceof Set)){if(ue(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function $s(i){if(i.W&&"function"==typeof i.W)return i.W();if("undefined"!=typeof Map&&i instanceof Map||"undefined"!=typeof Set&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ue(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),d=o.length,y=0;y<d;y++)e.call(void 0,o[y],t&&t[y],i)}(z=xr.prototype).setTimeout=function(i){this.O=i},z.ib=function(i){i=i.target;const e=this.L;e&&3==te(i)?e.l():this.La(i)},z.La=function(i){try{if(i==this.g)e:{const de=te(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>de)&&(3!=de||Cr||this.g&&(this.h.h||this.g.fa()||ct(this.g)))){this.I||4!=de||7==e||Di(),mr(this);var t=this.g.aa();this.Y=t;t:if(Vt(this)){var o=ct(this.g);i="";var d=o.length,y=4==te(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ss(this),Ur(this);var C="";break t}this.h.i=new Q.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:y&&e==d-1});o.splice(0,d),this.h.g+=i,this.C=0,C=this.h.g}else C=this.g.fa();if(this.i=200==t,function Cn(i,e,t,o,d,y,C){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+y+" "+C})}(this.j,this.u,this.A,this.m,this.U,de,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var R,G=this.g;if((R=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ye(R)){var Z=R;break t}}Z=null}if(!(t=Z)){this.i=!1,this.o=3,Zn(12),Ss(this),Ur(this);break e}Vn(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Hs(this,t)}this.P?(Bn(this,de,C),Cr&&this.i&&3==de&&(Pe(this.S,this.T,"tick",this.hb),this.T.start())):(Vn(this.j,this.m,C,null),Hs(this,C)),4==de&&Ss(this),this.i&&!this.I&&(4==de?ks(this.l,this):(this.i=!1,Sr(this)))}else 400==t&&0<C.indexOf("Unknown SID")?(this.o=3,Zn(12)):(this.o=0,Zn(13)),Ss(this),Ur(this)}}}catch(de){}},z.hb=function(){if(this.g){var i=te(this.g),e=this.g.fa();this.C<e.length&&(mr(this),Bn(this,i,e),this.i&&4!=i&&Sr(this))}},z.cancel=function(){this.I=!0,Ss(this)},z.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function sr(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Di(),Zn(17)),Ss(this),this.o=2,Ur(this)):Si(this,this.V-i)};var bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zi(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Zi){this.h=void 0!==e?e:i.h,As(this,i.j),this.s=i.s,this.g=i.g,gi(this,i.m),this.l=i.l,e=i.i;var t=new li;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ki(this,t),this.o=i.o}else i&&(t=String(i).match(bs))?(this.h=!!e,As(this,t[1]||"",!0),this.s=Ws(t[2]||""),this.g=Ws(t[3]||"",!0),gi(this,t[4]),this.l=Ws(t[5]||"",!0),ki(this,t[6]||"",!0),this.o=Ws(t[7]||"")):(this.h=!!e,this.i=new li(null,this.h))}function pi(i){return new Zi(i)}function As(i,e,t){i.j=t?Ws(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function gi(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function ki(i,e,t){e instanceof li?(i.i=e,function Zr(i,e){e&&!i.j&&(Ui(i),i.i=null,i.g.forEach(function(t,o){var d=o.toLowerCase();o!=d&&(ts(this,o),Nr(this,d,t))},i)),i.j=e}(i.i,i.h)):(t||(e=Ks(e,Es)),i.i=new li(e,i.h))}function Jn(i,e,t){i.i.set(e,t)}function hs(i){return Jn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ws(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Ks(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Ro),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Ro(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Zi.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Ks(e,xo,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Ks(e,xo,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(Ks(t,"/"==t.charAt(0)?yo:zs,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Ks(t,Pa)),i.join("")};var xo=/[#\/\?@]/g,zs=/[#\?:]/g,yo=/[#\?]/g,Es=/[#\?@]/g,Pa=/#/g;function li(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Ui(i){i.g||(i.g=new Map,i.h=0,i.i&&function mo(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),d=null;if(0<=o){var y=i[t].substring(0,o);d=i[t].substring(o+1)}else y=i[t];e(y,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ts(i,e){Ui(i),e=fa(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function zo(i,e){return Ui(i),e=fa(i,e),i.g.has(e)}function Nr(i,e,t){ts(i,e),0<t.length&&(i.i=null,i.g.set(fa(i,e),Je(t)),i.h+=t.length)}function fa(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Lo(i){this.l=i||no,i=Q.PerformanceNavigationTiming?0<(i=Q.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Q.g&&Q.g.Ga&&Q.g.Ga()&&Q.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(z=li.prototype).add=function(i,e){Ui(this),this.i=null,i=fa(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},z.forEach=function(i,e){Ui(this),this.g.forEach(function(t,o){t.forEach(function(d){i.call(e,d,o,this)},this)},this)},z.oa=function(){Ui(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const d=i[o];for(let y=0;y<d.length;y++)t.push(e[o])}return t},z.W=function(i){Ui(this);let e=[];if("string"==typeof i)zo(this,i)&&(e=e.concat(this.g.get(fa(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},z.set=function(i,e){return Ui(this),this.i=null,zo(this,i=fa(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},z.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},z.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const y=encodeURIComponent(String(o)),C=this.W(o);for(o=0;o<C.length;o++){var d=y;""!==C[o]&&(d+="="+encodeURIComponent(String(C[o]))),i.push(d)}}return this.i=i.join("&")};var no=10;function ei(i){return!!i.h||!!i.g&&i.g.size>=i.j}function fs(i){return i.h?1:i.g?i.g.size:0}function pn(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Ys(i,e){i.g?i.g.add(e):i.h=e}function or(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Qa(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Je(i.i)}function Dr(){}function pa(){this.g=new Dr}function ns(i,e,t){const o=t||"";try{rr(i,function(d,y){let C=d;Re(d)&&(C=fi(d)),e.push(o+y+"="+encodeURIComponent(C))})}catch(d){throw e.push(o+"type="+encodeURIComponent("_badmap")),d}}function Ms(i,e,t,o,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(o)}catch(y){}}function wn(i){this.l=i.ac||null,this.j=i.jb||!1}function Ds(i,e){Pn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Yo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Lo.prototype.cancel=function(){if(this.i=Qa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Dr.prototype.stringify=function(i){return Q.JSON.stringify(i,void 0)},Dr.prototype.parse=function(i){return Q.JSON.parse(i,void 0)},Ue(wn,Xr),wn.prototype.g=function(){return new Ds(this.l,this.j)},wn.prototype.i=function(i){return function(){return i}}({}),Ue(Ds,Pn);var Yo=0;function Qo(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Cs(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Ji(i)}function Ji(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(z=Ds.prototype).open=function(i,e){if(this.readyState!=Yo)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Ji(this)},z.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Q).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cs(this)),this.readyState=Yo},z.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Ji(this)),this.g&&(this.readyState=3,Ji(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Q.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Qo(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},z.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Cs(this):Ji(this),3==this.readyState&&Qo(this)}},z.Va=function(i){this.g&&(this.response=this.responseText=i,Cs(this))},z.Ua=function(i){this.g&&(this.response=i,Cs(this))},z.ga=function(){this.g&&Cs(this)},z.setRequestHeader=function(i,e){this.v.append(i,e)},z.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},z.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Ds.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var ko=Q.JSON.parse;function $r(i){Pn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ga,this.K=this.L=!1}Ue($r,Pn);var ga="",At=/^https?$/i,fr=["POST","PUT"];function qo(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,ui(i),U(i)}function ui(i){i.D||(i.D=!0,lr(i,"complete"),lr(i,"error"))}function $(i){if(i.h&&void 0!==oe&&(!i.C[1]||4!=te(i)||2!=i.aa()))if(i.v&&4==te(i))ke(i.Ha,0,i);else if(lr(i,"readystatechange"),4==te(i)){i.h=!1;try{const R=i.aa();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===R){var d=String(i.H).match(bs)[1]||null;if(!d&&Q.self&&Q.self.location){var y=Q.self.location.protocol;d=y.substr(0,y.length-1)}o=!At.test(d?d.toLowerCase():"")}t=o}if(t)lr(i,"complete"),lr(i,"success");else{i.m=6;try{var C=2<te(i)?i.g.statusText:""}catch(G){C=""}i.j=C+" ["+i.aa()+"]",ui(i)}}finally{U(i)}}}function U(i,e){if(i.g){x(i);const t=i.g,o=i.C[0]?le:null;i.g=null,i.C=null,e||lr(i,"ready");try{t.onreadystatechange=o}catch(d){}}}function x(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Q.clearTimeout(i.A),i.A=null)}function te(i){return i.g?i.g.readyState:0}function ct(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ga:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function nn(i){let e="";return Ei(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function Vr(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=nn(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Jn(i,e,t))}function rs(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Is(i){this.Ca=0,this.i=[],this.j=new Ut,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=rs("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=rs("baseRetryDelayMs",5e3,i),this.bb=rs("retryDelaySeedMs",1e4,i),this.$a=rs("forwardChannelMaxRetries",2,i),this.ta=rs("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new Lo(i&&i.concurrentRequestLimit),this.Fa=new pa,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Gr(i){if(is(i),3==i.G){var e=i.U++,t=pi(i.F);Jn(t,"SID",i.I),Jn(t,"RID",e),Jn(t,"TYPE","terminate"),Jo(i,t),(e=new xr(i,i.j,e,void 0)).K=2,e.v=hs(pi(t)),t=!1,Q.navigator&&Q.navigator.sendBeacon&&(t=Q.navigator.sendBeacon(e.v.toString(),"")),!t&&Q.Image&&((new Image).src=e.v,t=!0),t||(e.g=_a(e.l,null),e.g.da(e.v)),e.F=Date.now(),Sr(e)}qa(i)}function Fs(i){i.g&&(ya(i),i.g.cancel(),i.g=null)}function is(i){Fs(i),i.u&&(Q.clearTimeout(i.u),i.u=null),io(i),i.h.cancel(),i.m&&("number"==typeof i.m&&Q.clearTimeout(i.m),i.m=null)}function Ps(i){ei(i.h)||i.m||(i.m=!0,Gt(i.Ja,i),i.C=0)}function Ra(i,e){var t;t=e?e.m:i.U++;const o=pi(i.F);Jn(o,"SID",i.I),Jn(o,"RID",t),Jn(o,"AID",i.T),Jo(i,o),i.o&&i.s&&Vr(o,i.o,i.s),t=new xr(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=ps(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),Ys(i.h,t),pt(t,o,e)}function Jo(i,e){i.ia&&Ei(i.ia,function(t,o){Jn(e,o,t)}),i.l&&rr({},function(t,o){Jn(e,o,t)})}function ps(i,e,t){t=Math.min(i.i.length,t);var o=i.l?dt(i.l.Ra,i.l,i):null;e:{var d=i.i;let y=-1;for(;;){const C=["count="+t];-1==y?0<t?(y=d[0].h,C.push("ofs="+y)):y=0:C.push("ofs="+y);let R=!0;for(let G=0;G<t;G++){let Z=d[G].h;const de=d[G].g;if(Z-=y,0>Z)y=Math.max(0,d[G].h-100),R=!1;else try{ns(de,C,"req"+Z+"_")}catch(be){o&&o(de)}}if(R){o=C.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function ma(i){i.g||i.u||(i.Z=1,Gt(i.Ia,i),i.A=0)}function ro(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=Rn(dt(i.Ia,i),Io(i,i.A)),i.A++,0))}function ya(i){null!=i.B&&(Q.clearTimeout(i.B),i.B=null)}function Xo(i){i.g=new xr(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=pi(i.sa);Jn(e,"RID","rpc"),Jn(e,"SID",i.I),Jn(e,"CI",i.L?"0":"1"),Jn(e,"AID",i.T),Jn(e,"TYPE","xmlhttp"),Jo(i,e),i.o&&i.s&&Vr(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=hs(pi(e)),t.s=null,t.P=!0,Wt(t,i)}function io(i){null!=i.v&&(Q.clearTimeout(i.v),i.v=null)}function ks(i,e){var t=null;if(i.g==e){io(i),ya(i),i.g=null;var o=2}else{if(!pn(i.h,e))return;t=e.D,or(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var d=i.C;lr(o=Hi(),new Oi(o,t)),Ps(i)}else ma(i);else if(3==(d=e.o)||0==d&&0<i.pa||!(1==o&&function Zo(i,e){return!(fs(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=Rn(dt(i.Ja,i,e),Io(i,i.C)),i.C++,0)))}(i,e)||2==o&&ro(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),d){case 1:Xi(i,5);break;case 4:Xi(i,10);break;case 3:Xi(i,6);break;default:Xi(i,2)}}function Io(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function Xi(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=dt(i.kb,i);t||(t=new Zi("//www.google.com/images/cleardot.gif"),Q.location&&"http"==Q.location.protocol||As(t,"https"),hs(t)),function Fo(i,e){const t=new Ut;if(Q.Image){const o=new Image;o.onload=mt(Ms,t,o,"TestLoadImage: loaded",!0,e),o.onerror=mt(Ms,t,o,"TestLoadImage: error",!1,e),o.onabort=mt(Ms,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=mt(Ms,t,o,"TestLoadImage: timeout",!1,e),Q.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Zn(2);i.G=0,i.l&&i.l.va(e),qa(i),is(i)}function qa(i){if(i.G=0,i.la=[],i.l){const e=Qa(i.h);(0!=e.length||0!=i.i.length)&&(Nt(i.la,e),Nt(i.la,i.i),i.h.i.length=0,Je(i.i),i.i.length=0),i.l.ua()}}function ea(i,e,t){var o=t instanceof Zi?pi(t):new Zi(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),gi(o,o.m);else{var d=Q.location;o=d.protocol,e=e?e+"."+d.hostname:d.hostname,d=+d.port;var y=new Zi(null,void 0);o&&As(y,o),e&&(y.g=e),d&&gi(y,d),t&&(y.l=t),o=y}return e=i.za,(t=i.D)&&e&&Jn(o,t,e),Jn(o,"VER",i.ma),Jo(i,o),o}function _a(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new $r(t&&i.Da&&!i.ra?new wn({jb:!0}):i.ra)).Ka(i.H),e}function L(){}function q(){if(St&&!(10<=Number(Fn)))throw Error("Environmental error: no available transport.")}function k(i,e){Pn.call(this),this.g=new Is(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!Ye(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ye(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new et(this)}function se(i){qr.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function me(){Pi.call(this),this.status=1}function et(i){this.g=i}(z=$r.prototype).Ka=function(i){this.L=i},z.da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():zn.g(),this.C=function xn(i){return i.h||(i.h=i.i())}(this.u?this.u:zn),this.g.onreadystatechange=dt(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(y){return void qo(this,y)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var d in o)t.set(d,o[d]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const y of o.keys())t.set(y,o.get(y))}o=Array.from(t.keys()).find(y=>"content-type"==y.toLowerCase()),d=Q.FormData&&i instanceof Q.FormData,!(0<=It(fr,e))||o||d||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[y,C]of t)this.g.setRequestHeader(y,C);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{x(this),0<this.B&&((this.K=function Os(i){return St&&function it(){return function nr(i){var e=Le;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=ut(String(Dn)).split("."),t=ut("9").split("."),o=Math.max(e.length,t.length);for(let C=0;0==i&&C<o;C++){var d=e[C]||"",y=t[C]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],y=/(\d*)(\D*)(.*)/.exec(y)||["","","",""],0==d[0].length&&0==y[0].length)break;i=qe(0==d[1].length?0:parseInt(d[1],10),0==y[1].length?0:parseInt(y[1],10))||qe(0==d[2].length,0==y[2].length)||qe(d[2],y[2]),d=d[3],y=y[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=dt(this.qa,this)):this.A=ke(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(y){qo(this,y)}},z.qa=function(){void 0!==oe&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,lr(this,"timeout"),this.abort(8))},z.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,lr(this,"complete"),lr(this,"abort"),U(this))},z.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),U(this,!0)),$r.X.M.call(this)},z.Ha=function(){this.s||(this.F||this.v||this.l?$(this):this.fb())},z.fb=function(){$(this)},z.aa=function(){try{return 2<te(this)?this.g.status:-1}catch(i){return-1}},z.fa=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},z.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),ko(e)}},z.Ea=function(){return this.m},z.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(z=Is.prototype).ma=8,z.G=1,z.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const d=new xr(this,this.j,i,void 0);let y=this.s;if(this.S&&(y?(y=oi(y),je(y,this.S)):y=this.S),null!==this.o||this.N||(d.H=y,y=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ps(this,d,e),Jn(t=pi(this.F),"RID",i),Jn(t,"CVER",22),this.D&&Jn(t,"X-HTTP-Session-Id",this.D),Jo(this,t),y&&(this.N?e="headers="+encodeURIComponent(String(nn(y)))+"&"+e:this.o&&Vr(t,this.o,y)),Ys(this.h,d),this.Ya&&Jn(t,"TYPE","init"),this.O?(Jn(t,"$req",e),Jn(t,"SID","null"),d.Z=!0,pt(d,t,null)):pt(d,t,e),this.G=2}}else 3==this.G&&(i?Ra(this,i):0==this.i.length||ei(this.h)||Ra(this))},z.Ia=function(){if(this.u=null,Xo(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=Rn(dt(this.eb,this),i)}},z.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Zn(10),Fs(this),Xo(this))},z.cb=function(){null!=this.v&&(this.v=null,Fs(this),ro(this),Zn(19))},z.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Zn(2)):(this.j.info("Failed to ping google.com"),Zn(1))},(z=L.prototype).xa=function(){},z.wa=function(){},z.va=function(){},z.ua=function(){},z.Ra=function(){},q.prototype.g=function(i,e){return new k(i,e)},Ue(k,Pn),k.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Zn(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=ea(i,null,i.V),Ps(i)},k.prototype.close=function(){Gr(this.g)},k.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=fi(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&Ps(e)},k.prototype.M=function(){this.g.l=null,delete this.j,Gr(this.g),delete this.g,k.X.M.call(this)},Ue(se,qr),Ue(me,Pi),Ue(et,L),et.prototype.xa=function(){lr(this.g,"a")},et.prototype.wa=function(i){lr(this.g,new se(i))},et.prototype.va=function(i){lr(this.g,new me)},et.prototype.ua=function(){lr(this.g,"b")},q.prototype.createWebChannel=q.prototype.g,k.prototype.send=k.prototype.u,k.prototype.open=k.prototype.m,k.prototype.close=k.prototype.close,Tn.NO_ERROR=0,Tn.TIMEOUT=8,Tn.HTTP_ERROR=6,En.COMPLETE="complete",Ls.EventType=go,go.OPEN="a",go.CLOSE="b",go.ERROR="c",go.MESSAGE="d",Pn.prototype.listen=Pn.prototype.N,$r.prototype.listenOnce=$r.prototype.O,$r.prototype.getLastError=$r.prototype.Oa,$r.prototype.getLastErrorCode=$r.prototype.Ea,$r.prototype.getStatus=$r.prototype.aa,$r.prototype.getResponseJson=$r.prototype.Sa,$r.prototype.getResponseText=$r.prototype.fa,$r.prototype.send=$r.prototype.da,$r.prototype.setWithCredentials=$r.prototype.Ka;var ft=ee.createWebChannelTransport=function(){return new q},Jt=ee.getStatEventTarget=function(){return Hi()},Mr=ee.ErrorCode=Tn,bn=ee.EventType=En,pr=ee.Event=Hr,ur=ee.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Ci=ee.FetchXmlHttpFactory=wn,br=ee.WebChannel=Ls,Ii=ee.XhrIo=$r;const gs="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let Vi="9.17.1";const $i=new B.Yd("@firebase/firestore");function bi(){return $i.logLevel}function xt(i,...e){if($i.logLevel<=B.in.DEBUG){const t=e.map(va);$i.debug(`Firestore (${Vi}): ${i}`,...t)}}function Gi(i,...e){if($i.logLevel<=B.in.ERROR){const t=e.map(va);$i.error(`Firestore (${Vi}): ${i}`,...t)}}function wo(i,...e){if($i.logLevel<=B.in.WARN){const t=e.map(va);$i.warn(`Firestore (${Vi}): ${i}`,...t)}}function va(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function ln(i="Unexpected state"){const e=`FIRESTORE (${Vi}) INTERNAL ASSERTION FAILED: `+i;throw Gi(e),new Error(e)}function en(i,e){i||ln()}function Zt(i,e){return i}const ot={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pt extends Y.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Vl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Za{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class Ri{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Us{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let d=this.i;const y=Z=>this.i!==d?(d=this.i,t(Z)):Promise.resolve();let C=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new ti,e.enqueueRetryable(()=>y(this.currentUser))};const R=()=>{const Z=C;e.enqueueRetryable((0,g.Z)(function*(){yield Z.promise,yield y(o.currentUser)}))},G=Z=>{xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Z,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(Z=>G(Z)),setTimeout(()=>{if(!this.auth){const Z=this.t.getImmediate({optional:!0});Z?G(Z):(xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new ti)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(en("string"==typeof o.accessToken),new Vl(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return en(null===e||"string"==typeof e),new Wr(e)}}class xa{constructor(e,t,o,d){this.h=e,this.l=t,this.m=o,this.g=d,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(en(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class so{constructor(e,t,o,d){this.h=e,this.l=t,this.m=o,this.g=d}getToken(){return Promise.resolve(new xa(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Na{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=y=>{null!=y.error&&xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${y.error.message}`);const C=y.token!==this.A;return this.A=y.token,xt("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?t(y.token):Promise.resolve()};this.o=y=>{e.enqueueRetryable(()=>o(y))};const d=y=>{xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=y,this.appCheck.addTokenListener(this.o)};this.T.onInit(y=>d(y)),setTimeout(()=>{if(!this.appCheck){const y=this.T.getImmediate({optional:!0});y?d(y):xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(en("string"==typeof t.token),this.A=t.token,new oo(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function iu(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class mi{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const d=iu(40);for(let y=0;y<d.length;++y)o.length<20&&d[y]<t&&(o+=e.charAt(d[y]%e.length))}return o}}function Xn(i,e){return i<e?-1:i>e?1:0}function ms(i,e,t){return i.length===e.length&&i.every((o,d)=>t(o,e[d]))}function Al(i){return i+"\0"}class Kr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pt(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pt(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pt(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pt(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kr.fromMillis(Date.now())}static fromDate(e){return Kr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Kr(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xn(this.nanoseconds,e.nanoseconds):Xn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Sn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Sn(e)}static min(){return new Sn(new Kr(0,0))}static max(){return new Sn(new Kr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Uo{constructor(e,t,o){void 0===t?t=0:t>e.length&&ln(),void 0===o?o=e.length-t:o>e.length-t&&ln(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Uo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Uo?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let d=0;d<o;d++){const y=e.get(d),C=t.get(d);if(y<C)return-1;if(y>C)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yr extends Uo{construct(e,t,o){return new yr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new Pt(ot.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(d=>d.length>0))}return new yr(t)}static emptyPath(){return new yr([])}}const Wi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ai extends Uo{construct(e,t,o){return new Ai(e,t,o)}static isValidIdentifier(e){return Wi.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ai.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ai(["__name__"])}static fromServerFormat(e){const t=[];let o="",d=0;const y=()=>{if(0===o.length)throw new Pt(ot.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let C=!1;for(;d<e.length;){const R=e[d];if("\\"===R){if(d+1===e.length)throw new Pt(ot.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const G=e[d+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new Pt(ot.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=G,d+=2}else"`"===R?(C=!C,d++):"."!==R||C?(o+=R,d++):(y(),d++)}if(y(),C)throw new Pt(ot.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ai(t)}static emptyPath(){return new Ai([])}}class Kt{constructor(e){this.path=e}static fromPath(e){return new Kt(yr.fromString(e))}static fromName(e){return new Kt(yr.fromString(e).popFirst(5))}static empty(){return new Kt(yr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Kt(new yr(e.slice()))}}class ao{constructor(e,t,o,d){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=d}}function lo(i){return i.fields.find(e=>2===e.kind)}function Vo(i){return i.fields.filter(e=>2!==e.kind)}ao.UNKNOWN_ID=-1;class ta{constructor(e,t){this.fieldPath=e,this.kind=t}}class So{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new So(0,ss.min())}}function Ja(i){return new ss(i.readTime,i.key,-1)}class ss{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new ss(Sn.min(),Kt.empty(),-1)}static max(){return new ss(Sn.max(),Kt.empty(),-1)}}function Xa(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Kt.comparator(i.documentKey,e.documentKey),0!==t?t:Xn(i.largestBatchId,e.largestBatchId))}const su="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class el{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function uo(i){return Fa.apply(this,arguments)}function Fa(){return Fa=(0,g.Z)(function*(i){if(i.code!==ot.FAILED_PRECONDITION||i.message!==su)throw i;xt("LocalStore","Unexpectedly lost primary lease")}),Fa.apply(this,arguments)}class lt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ln(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new lt((o,d)=>{this.nextCallback=y=>{this.wrapSuccess(e,y).next(o,d)},this.catchCallback=y=>{this.wrapFailure(t,y).next(o,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof lt?t:lt.resolve(t)}catch(t){return lt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):lt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):lt.reject(t)}static resolve(e){return new lt((t,o)=>{t(e)})}static reject(e){return new lt((t,o)=>{o(e)})}static waitFor(e){return new lt((t,o)=>{let d=0,y=0,C=!1;e.forEach(R=>{++d,R.next(()=>{++y,C&&y===d&&t()},G=>o(G))}),C=!0,y===d&&t()})}static or(e){let t=lt.resolve(!1);for(const o of e)t=t.next(d=>d?lt.resolve(d):o());return t}static forEach(e,t){const o=[];return e.forEach((d,y)=>{o.push(t.call(this,d,y))}),this.waitFor(o)}static mapArray(e,t){return new lt((o,d)=>{const y=e.length,C=new Array(y);let R=0;for(let G=0;G<y;G++){const Z=G;t(e[Z]).next(de=>{C[Z]=de,++R,R===y&&o(C)},de=>d(de))}})}static doWhile(e,t){return new lt((o,d)=>{const y=()=>{!0===e()?t().next(()=>{y()},d):o()};y()})}}class Qs{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new ti,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ea(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const d=ni(o.target.error);this.P.reject(new Ea(e,d))}}static open(e,t,o,d){try{return new Qs(t,e.transaction(d,o))}catch(y){throw new Ea(t,y)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(xt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ka(t)}}class ys{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===ys.D((0,Y.z$)())&&Gi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xt("SimpleDb","Removing database:",e),Bo(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Y.hl)())return!1;if(ys.N())return!0;const e=(0,Y.z$)(),t=ys.D(e),o=0<t&&t<10,d=ys.k(e),y=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||y)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,g.Z)(function*(){return t.db||(xt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,d)=>{const y=indexedDB.open(t.name,t.version);y.onsuccess=C=>{o(C.target.result)},y.onblocked=()=>{d(new Ea(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},y.onerror=C=>{const R=C.target.error;d("VersionError"===R.name?new Pt(ot.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new Pt(ot.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new Ea(e,R))},y.onupgradeneeded=C=>{xt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',C.oldVersion),t.S.$(C.target.result,y.transaction,C.oldVersion,t.version).next(()=>{xt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,d){var y=this;return(0,g.Z)(function*(){const C="readonly"===t;let R=0;for(;;){++R;try{y.db=yield y.F(e);const G=Qs.open(y.db,e,C?"readonly":"readwrite",o),Z=d(G).next(de=>(G.V(),de)).catch(de=>(G.abort(de),lt.reject(de))).toPromise();return Z.catch(()=>{}),yield G.v,Z}catch(G){const Z=G,de="FirebaseError"!==Z.name&&R<3;if(xt("SimpleDb","Transaction failed with error:",Z.message,"Retrying:",de),y.close(),!de)return Promise.reject(Z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class na{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Bo(this.q.delete())}}class Ea extends Pt{constructor(e,t){super(ot.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function os(i){return"IndexedDbTransactionError"===i.name}class ka{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(xt("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(xt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Bo(o)}add(e){return xt("SimpleDb","ADD",this.store.name,e,e),Bo(this.store.add(e))}get(e){return Bo(this.store.get(e)).next(t=>(void 0===t&&(t=null),xt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return xt("SimpleDb","DELETE",this.store.name,e),Bo(this.store.delete(e))}count(){return xt("SimpleDb","COUNT",this.store.name),Bo(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const d=this.cursor(o),y=[];return this.H(d,(C,R)=>{y.push(R)}).next(()=>y)}{const d=this.store.getAll(o.range);return new lt((y,C)=>{d.onerror=R=>{C(R.target.error)},d.onsuccess=R=>{y(R.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new lt((d,y)=>{o.onerror=C=>{y(C.target.error)},o.onsuccess=C=>{d(C.target.result)}})}Y(e,t){xt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const d=this.cursor(o);return this.H(d,(y,C,R)=>R.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const d=this.cursor(o);return this.H(d,t)}tt(e){const t=this.cursor({});return new lt((o,d)=>{t.onerror=y=>{const C=ni(y.target.error);d(C)},t.onsuccess=y=>{const C=y.target.result;C?e(C.primaryKey,C.value).next(R=>{R?C.continue():o()}):o()}})}H(e,t){const o=[];return new lt((d,y)=>{e.onerror=C=>{y(C.target.error)},e.onsuccess=C=>{const R=C.target.result;if(!R)return void d();const G=new na(R),Z=t(R.primaryKey,R.value,G);if(Z instanceof lt){const de=Z.catch(be=>(G.done(),lt.reject(be)));o.push(de)}G.isDone?d():null===G.G?R.continue():R.continue(G.G)}}).next(()=>lt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Bo(i){return new lt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const d=ni(o.target.error);t(d)}})}let ou=!1;function ni(i){const e=ys.D((0,Y.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new Pt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ou||(ou=!0,setTimeout(()=>{throw o},0)),o}}return i}class tl{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;xt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,g.Z)(function*(){t.task=null;try{xt("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){os(o)?xt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield uo(o)}yield t.nt(6e4)}))}}class au{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,g.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let d=t,y=!0;return lt.doWhile(()=>!0===y&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(C=>{if(null!==C&&!o.has(C))return xt("IndexBackiller",`Processing collection: ${C}`),this.rt(e,C,d).next(R=>{d-=R,o.add(C)});y=!1})).next(()=>t-d)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(d=>this.localStore.localDocuments.getNextDocuments(e,t,d,o).next(y=>{const C=y.changes;return this.localStore.indexManager.updateIndexEntries(e,C).next(()=>this.ot(d,y)).next(R=>(xt("IndexBackiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,t,R))).next(()=>C.size)}))}ot(e,t){let o=e;return t.changes.forEach((d,y)=>{const C=Ja(y);Xa(C,o)>0&&(o=C)}),new ss(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}let co=(()=>{class i{constructor(t,o){this.previousValue=t,o&&(o.sequenceNumberHandler=d=>this.ut(d),this.ct=d=>o.writeSequenceNumber(d))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class Du{constructor(e,t,o,d,y,C,R,G){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=d,this.ssl=y,this.forceLongPolling=C,this.autoDetectLongPolling=R,this.useFetchStreams=G}}class Ki{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ki("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ki&&e.projectId===this.projectId&&e.database===this.database}}function ra(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ua(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Da(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function _o(i){return null==i}function nl(i){return 0===i&&1/i==-1/0}class zi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new zi(t)}static fromUint8Array(e){const t=function(o){let d="";for(let y=0;y<o.length;++y)d+=String.fromCharCode(o[y]);return d}(e);return new zi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zi.EMPTY_BYTE_STRING=new zi("");const ia=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function b(i){if(en(!!i),"string"==typeof i){let e=0;const t=ia.exec(i);if(en(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:A(i.seconds),nanos:A(i.nanos)}}function A(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function T(i){return"string"==typeof i?zi.fromBase64String(i):zi.fromUint8Array(i)}function N(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function j(i){const e=i.mapValue.fields.__previous_value__;return N(e)?j(e):e}function X(i){const e=b(i.mapValue.fields.__local_write_time__.timestampValue);return new Kr(e.seconds,e.nanos)}const ge={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ee={nullValue:"NULL_VALUE"};function Ze(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?N(i)?4:Ol(i)?9007199254740991:10:ln()}function Ft(i,e){if(i===e)return!0;const t=Ze(i);if(t!==Ze(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return X(i).isEqual(X(e));case 3:return function(o,d){if("string"==typeof o.timestampValue&&"string"==typeof d.timestampValue&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const y=b(o.timestampValue),C=b(d.timestampValue);return y.seconds===C.seconds&&y.nanos===C.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,T(i.bytesValue).isEqual(T(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,d){return A(o.geoPointValue.latitude)===A(d.geoPointValue.latitude)&&A(o.geoPointValue.longitude)===A(d.geoPointValue.longitude)}(i,e);case 2:return function(o,d){if("integerValue"in o&&"integerValue"in d)return A(o.integerValue)===A(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const y=A(o.doubleValue),C=A(d.doubleValue);return y===C?nl(y)===nl(C):isNaN(y)&&isNaN(C)}return!1}(i,e);case 9:return ms(i.arrayValue.values||[],e.arrayValue.values||[],Ft);case 10:return function(o,d){const y=o.mapValue.fields||{},C=d.mapValue.fields||{};if(ra(y)!==ra(C))return!1;for(const R in y)if(y.hasOwnProperty(R)&&(void 0===C[R]||!Ft(y[R],C[R])))return!1;return!0}(i,e);default:return ln()}var d}function un(i,e){return void 0!==(i.values||[]).find(t=>Ft(t,e))}function Ht(i,e){if(i===e)return 0;const t=Ze(i),o=Ze(e);if(t!==o)return Xn(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xn(i.booleanValue,e.booleanValue);case 2:return function(d,y){const C=A(d.integerValue||d.doubleValue),R=A(y.integerValue||y.doubleValue);return C<R?-1:C>R?1:C===R?0:isNaN(C)?isNaN(R)?0:-1:1}(i,e);case 3:return An(i.timestampValue,e.timestampValue);case 4:return An(X(i),X(e));case 5:return Xn(i.stringValue,e.stringValue);case 6:return function(d,y){const C=T(d),R=T(y);return C.compareTo(R)}(i.bytesValue,e.bytesValue);case 7:return function(d,y){const C=d.split("/"),R=y.split("/");for(let G=0;G<C.length&&G<R.length;G++){const Z=Xn(C[G],R[G]);if(0!==Z)return Z}return Xn(C.length,R.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,y){const C=Xn(A(d.latitude),A(y.latitude));return 0!==C?C:Xn(A(d.longitude),A(y.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,y){const C=d.values||[],R=y.values||[];for(let G=0;G<C.length&&G<R.length;++G){const Z=Ht(C[G],R[G]);if(Z)return Z}return Xn(C.length,R.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,y){if(d===ge.mapValue&&y===ge.mapValue)return 0;if(d===ge.mapValue)return 1;if(y===ge.mapValue)return-1;const C=d.fields||{},R=Object.keys(C),G=y.fields||{},Z=Object.keys(G);R.sort(),Z.sort();for(let de=0;de<R.length&&de<Z.length;++de){const be=Xn(R[de],Z[de]);if(0!==be)return be;const rt=Ht(C[R[de]],G[Z[de]]);if(0!==rt)return rt}return Xn(R.length,Z.length)}(i.mapValue,e.mapValue);default:throw ln()}}function An(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Xn(i,e);const t=b(i),o=b(e),d=Xn(t.seconds,o.seconds);return 0!==d?d:Xn(t.nanos,o.nanos)}function cr(i){return Lr(i)}function Lr(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const d=b(o);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?T(i.bytesValue).toBase64():"referenceValue"in i?Kt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let d="[",y=!0;for(const C of o.values||[])y?y=!1:d+=",",d+=Lr(C);return d+"]"}(i.arrayValue):"mapValue"in i?function(o){const d=Object.keys(o.fields||{}).sort();let y="{",C=!0;for(const R of d)C?C=!1:y+=",",y+=`${R}:${Lr(o.fields[R])}`;return y+"}"}(i.mapValue):ln();var e}function _s(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Vs(i){return!!i&&"integerValue"in i}function Bs(i){return!!i&&"arrayValue"in i}function qs(i){return!!i&&"nullValue"in i}function hl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ws(i){return!!i&&"mapValue"in i}function Va(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ua(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=Va(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Va(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Ol(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Bl(i){return"nullValue"in i?Ee:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?_s(Ki.empty(),Kt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:ln()}function Ba(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?_s(Ki.empty(),Kt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?ge:ln()}function ja(i,e){const t=Ht(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function vo(i,e){const t=Ht(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class sa{constructor(e,t){this.position=e,this.inclusive=t}}function jo(i,e,t){let o=0;for(let d=0;d<i.position.length;d++){const y=e[d],C=i.position[d];if(o=y.field.isKeyField()?Kt.comparator(Kt.fromName(C.referenceValue),t.key):Ht(C,t.data.field(y.field)),"desc"===y.dir&&(o*=-1),0!==o)break}return o}function rl(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ft(i.position[t],e.position[t]))return!1;return!0}class jl{}class Or extends jl{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,o):new lc(e,t,o):"array-contains"===t?new fl(e,o):"in"===t?new la(e,o):"not-in"===t?new ua(e,o):"array-contains-any"===t?new ku(e,o):new Or(e,t,o)}static createKeyFieldInFilter(e,t,o){return"in"===t?new uc(e,o):new Pl(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ht(t,this.value)):null!==t&&Ze(this.value)===Ze(t)&&this.matchesComparison(Ht(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ln()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Jr extends jl{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new Jr(e,t)}matches(e){return oa(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function oa(i){return"and"===i.op}function aa(i){return"or"===i.op}function lu(i){return Yi(i)&&oa(i)}function Yi(i){for(const e of i.filters)if(e instanceof Jr)return!1;return!0}function il(i){if(i instanceof Or)return i.field.canonicalString()+i.op.toString()+cr(i.value);if(lu(i))return i.filters.map(e=>il(e)).join(",");{const e=i.filters.map(t=>il(t)).join(",");return`${i.op}(${e})`}}function Hl(i,e){return i instanceof Or?(t=i,(o=e)instanceof Or&&t.op===o.op&&t.field.isEqual(o.field)&&Ft(t.value,o.value)):i instanceof Jr?function(t,o){return o instanceof Jr&&t.op===o.op&&t.filters.length===o.filters.length&&t.filters.reduce((d,y,C)=>d&&Hl(y,o.filters[C]),!0)}(i,e):void ln();var t,o}function Ca(i,e){const t=i.filters.concat(e);return Jr.create(t,i.op)}function Ia(i){return i instanceof Or?`${(e=i).field.canonicalString()} ${e.op} ${cr(e.value)}`:i instanceof Jr?function(e){return e.op.toString()+" {"+e.getFilters().map(Ia).join(" ,")+"}"}(i):"Filter";var e}class lc extends Or{constructor(e,t,o){super(e,t,o),this.key=Kt.fromName(o.referenceValue)}matches(e){const t=Kt.comparator(e.key,this.key);return this.matchesComparison(t)}}class uc extends Or{constructor(e,t){super(e,"in",t),this.keys=Rl(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Pl extends Or{constructor(e,t){super(e,"not-in",t),this.keys=Rl(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Rl(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Kt.fromName(o.referenceValue))}class fl extends Or{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bs(t)&&un(t.arrayValue,this.value)}}class la extends Or{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&un(this.value.arrayValue,t)}}class ua extends Or{constructor(e,t){super(e,"not-in",t)}matches(e){if(un(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!un(this.value.arrayValue,t)}}class ku extends Or{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bs(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>un(this.value.arrayValue,o))}}class Ha{constructor(e,t="asc"){this.field=e,this.dir=t}}function pl(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class yi{constructor(e,t){this.comparator=e,this.root=t||Qi.EMPTY}insert(e,t){return new yi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qi.BLACK,null,null))}remove(e){return new yi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const d=this.comparator(e,o.key);if(0===d)return t+o.left.size;d<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $a(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $a(this.root,e,this.comparator,!1)}getReverseIterator(){return new $a(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $a(this.root,e,this.comparator,!0)}}class $a{constructor(e,t,o,d){this.isReverse=d,this.nodeStack=[];let y=1;for(;!e.isEmpty();)if(y=t?o(e.key,t):1,t&&d&&(y*=-1),y<0)e=this.isReverse?e.left:e.right;else{if(0===y){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qi{constructor(e,t,o,d,y){this.key=e,this.value=t,this.color=null!=o?o:Qi.RED,this.left=null!=d?d:Qi.EMPTY,this.right=null!=y?y:Qi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,d,y){return new Qi(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=d?d:this.left,null!=y?y:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let d=this;const y=o(e,d.key);return d=y<0?d.copy(null,null,null,d.left.insert(e,t,o),null):0===y?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,o)),d.fixUp()}removeMin(){if(this.left.isEmpty())return Qi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return Qi.EMPTY;o=d.right.min(),d=d.copy(o.key,o.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ln();const e=this.left.check();if(e!==this.right.check())throw ln();return e+(this.isRed()?0:1)}}Qi.EMPTY=null,Qi.RED=!0,Qi.BLACK=!1,Qi.EMPTY=new class{constructor(){this.size=0}get key(){throw ln()}get value(){throw ln()}get color(){throw ln()}get left(){throw ln()}get right(){throw ln()}copy(i,e,t,o,d){return this}insert(i,e,t){return new Qi(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ci{constructor(e){this.comparator=e,this.data=new yi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const d=o.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ca(this.data.getIterator())}getIteratorFrom(e){return new ca(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof ci)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,y=o.getNext().key;if(0!==this.comparator(d,y))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ci(this.comparator);return t.data=e,t}}class ca{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function as(i){return i.hasNext()?i.getNext():void 0}class js{constructor(e){this.fields=e,e.sort(Ai.comparator)}static empty(){return new js([])}unionWith(e){let t=new ci(Ai.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new js(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ms(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class ho{constructor(e){this.value=e}static empty(){return new ho({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!ws(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Va(t)}setAll(e){let t=Ai.emptyPath(),o={},d=[];e.forEach((C,R)=>{if(!t.isImmediateParentOf(R)){const G=this.getFieldsMap(t);this.applyChanges(G,o,d),o={},d=[],t=R.popLast()}C?o[R.lastSegment()]=Va(C):d.push(R.lastSegment())});const y=this.getFieldsMap(t);this.applyChanges(y,o,d)}delete(e){const t=this.field(e.popLast());ws(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ft(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let d=t.mapValue.fields[e.get(o)];ws(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,o){Ua(t,(d,y)=>e[d]=y);for(const d of o)delete e[d]}clone(){return new ho(Va(this.value))}}function Cu(i){const e=[];return Ua(i.fields,(t,o)=>{const d=new Ai([t]);if(ws(o)){const y=Cu(o.mapValue).fields;if(0===y.length)e.push(d);else for(const C of y)e.push(d.child(C))}else e.push(d)}),new js(e)}class ri{constructor(e,t,o,d,y,C,R){this.key=e,this.documentType=t,this.version=o,this.readTime=d,this.createTime=y,this.data=C,this.documentState=R}static newInvalidDocument(e){return new ri(e,0,Sn.min(),Sn.min(),Sn.min(),ho.empty(),0)}static newFoundDocument(e,t,o,d){return new ri(e,1,t,Sn.min(),o,d,0)}static newNoDocument(e,t){return new ri(e,2,t,Sn.min(),Sn.min(),ho.empty(),0)}static newUnknownDocument(e,t){return new ri(e,3,t,Sn.min(),Sn.min(),ho.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Sn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ho.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ho.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Sn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ri&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ri(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class uu{constructor(e,t=null,o=[],d=[],y=null,C=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=d,this.limit=y,this.startAt=C,this.endAt=R,this.ft=null}}function $l(i,e=null,t=[],o=[],d=null,y=null,C=null){return new uu(i,e,t,o,d,y,C)}function sl(i){const e=Zt(i);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>il(o)).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),_o(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>cr(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>cr(o)).join(",")),e.ft=t}return e.ft}function Eo(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!pl(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Hl(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!rl(i.startAt,e.startAt)&&rl(i.endAt,e.endAt)}function Ho(i){return Kt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function gl(i,e){return i.filters.filter(t=>t instanceof Or&&t.field.isEqual(e))}function Gl(i,e,t){let o=Ee,d=!0;for(const y of gl(i,e)){let C=Ee,R=!0;switch(y.op){case"<":case"<=":C=Bl(y.value);break;case"==":case"in":case">=":C=y.value;break;case">":C=y.value,R=!1;break;case"!=":case"not-in":C=Ee}ja({value:o,inclusive:d},{value:C,inclusive:R})<0&&(o=C,d=R)}if(null!==t)for(let y=0;y<i.orderBy.length;++y)if(i.orderBy[y].field.isEqual(e)){const C=t.position[y];ja({value:o,inclusive:d},{value:C,inclusive:t.inclusive})<0&&(o=C,d=t.inclusive);break}return{value:o,inclusive:d}}function cu(i,e,t){let o=ge,d=!0;for(const y of gl(i,e)){let C=ge,R=!0;switch(y.op){case">=":case">":C=Ba(y.value),R=!1;break;case"==":case"in":case"<=":C=y.value;break;case"<":C=y.value,R=!1;break;case"!=":case"not-in":C=ge}vo({value:o,inclusive:d},{value:C,inclusive:R})>0&&(o=C,d=R)}if(null!==t)for(let y=0;y<i.orderBy.length;++y)if(i.orderBy[y].field.isEqual(e)){const C=t.position[y];vo({value:o,inclusive:d},{value:C,inclusive:t.inclusive})>0&&(o=C,d=t.inclusive);break}return{value:o,inclusive:d}}class vs{constructor(e,t=null,o=[],d=[],y=null,C="F",R=null,G=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=d,this.limit=y,this.limitType=C,this.startAt=R,this.endAt=G,this.dt=null,this._t=null}}function ml(i){return new vs(i)}function Kl(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Iu(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function yl(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function _l(i){return null!==i.collectionGroup}function wa(i){const e=Zt(i);if(null===e.dt){e.dt=[];const t=yl(e),o=Iu(e);if(null!==t&&null===o)t.isKeyField()||e.dt.push(new Ha(t)),e.dt.push(new Ha(Ai.keyField(),"asc"));else{let d=!1;for(const y of e.explicitOrderBy)e.dt.push(y),y.field.isKeyField()&&(d=!0);if(!d){const y=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Ha(Ai.keyField(),y))}}}return e.dt}function wi(i){const e=Zt(i);if(!e._t)if("F"===e.limitType)e._t=$l(e.path,e.collectionGroup,wa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const y of wa(e))t.push(new Ha(y.field,"desc"===y.dir?"asc":"desc"));const o=e.endAt?new sa(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new sa(e.startAt.position,e.startAt.inclusive):null;e._t=$l(e.path,e.collectionGroup,t,e.filters,e.limit,o,d)}return e._t}function du(i,e){e.getFirstInequalityField(),yl(i);const t=i.filters.concat([e]);return new vs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function zl(i,e,t){return new vs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Yl(i,e){return Eo(wi(i),wi(e))&&i.limitType===e.limitType}function vl(i){return`${sl(wi(i))}|lt:${i.limitType}`}function ol(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(o=>Ia(o)).join(", ")}]`),_o(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(o=>{return`${(d=o).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>cr(o)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>cr(o)).join(",")),`Target(${t})`}(wi(i))}; limitType=${i.limitType})`}function Do(i,e){return e.isFoundDocument()&&function(t,o){const d=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):Kt.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(i,e)&&function(t,o){for(const d of wa(t))if(!d.field.isKeyField()&&null===o.data.field(d.field))return!1;return!0}(i,e)&&function(t,o){for(const d of t.filters)if(!d.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(d,y,C){const R=jo(d,y,C);return d.inclusive?R<=0:R<0}(t.startAt,wa(t),o)||t.endAt&&!function(d,y,C){const R=jo(d,y,C);return d.inclusive?R>=0:R>0}(t.endAt,wa(t),o)));var t,o}function hu(i){return(e,t)=>{let o=!1;for(const d of wa(i)){const y=El(d,e,t);if(0!==y)return y;o=o||d.field.isKeyField()}return 0}}function El(i,e,t){const o=i.field.isKeyField()?Kt.comparator(e.key,t.key):function(d,y,C){const R=y.data.field(d),G=C.data.field(d);return null!==R&&null!==G?Ht(R,G):ln()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return ln()}}function fu(i,e){if(i.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nl(e)?"-0":e}}function wu(i){return{integerValue:""+i}}function Uu(i,e){return function xi(i){return"number"==typeof i&&Number.isInteger(i)&&!nl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}(e)?wu(e):fu(i,e)}class Tu{constructor(){this._=void 0}}function Vu(i,e,t){return i instanceof Dl?function(o,d){const y={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&(y.fields.__previous_value__=d),{mapValue:y}}(t,e):i instanceof $o?Wa(i,e):i instanceof xl?pu(i,e):function(o,d){const y=Ga(o,d),C=gu(y)+gu(o.gt);return Vs(y)&&Vs(o.gt)?wu(C):fu(o.yt,C)}(i,e)}function da(i,e,t){return i instanceof $o?Wa(i,e):i instanceof xl?pu(i,e):t}function Ga(i,e){return i instanceof Ka?Vs(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Dl extends Tu{}class $o extends Tu{constructor(e){super(),this.elements=e}}function Wa(i,e){const t=Cl(e);for(const o of i.elements)t.some(d=>Ft(d,o))||t.push(o);return{arrayValue:{values:t}}}class xl extends Tu{constructor(e){super(),this.elements=e}}function pu(i,e){let t=Cl(e);for(const o of i.elements)t=t.filter(d=>!Ft(d,o));return{arrayValue:{values:t}}}class Ka extends Tu{constructor(e,t){super(),this.yt=e,this.gt=t}}function gu(i){return A(i.integerValue||i.doubleValue)}function Cl(i){return Bs(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ql{constructor(e,t){this.field=e,this.transform=t}}class l{constructor(e,t){this.version=e,this.transformResults=t}}class a{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new a}static exists(e){return new a(void 0,e)}static updateTime(e){return new a(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function c(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class E{}function S(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new cn(i.key,a.none()):new ze(i.key,i.data,a.none());{const t=i.data,o=ho.empty();let d=new ci(Ai.comparator);for(let y of e.fields)if(!d.has(y)){let C=t.field(y);null===C&&y.length>1&&(y=y.popLast(),C=t.field(y)),null===C?o.delete(y):o.set(y,C),d=d.add(y)}return new Et(i.key,o,new js(d.toArray()),a.none())}}function H(i,e,t){i instanceof ze?function(o,d,y){const C=o.value.clone(),R=vn(o.fieldTransforms,d,y.transformResults);C.setAll(R),d.convertToFoundDocument(y.version,C).setHasCommittedMutations()}(i,e,t):i instanceof Et?function(o,d,y){if(!c(o.precondition,d))return void d.convertToUnknownDocument(y.version);const C=vn(o.fieldTransforms,d,y.transformResults),R=d.data;R.setAll(Yt(o)),R.setAll(C),d.convertToFoundDocument(y.version,R).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ie(i,e,t,o){return i instanceof ze?function(d,y,C,R){if(!c(d.precondition,y))return C;const G=d.value.clone(),Z=Mn(d.fieldTransforms,R,y);return G.setAll(Z),y.convertToFoundDocument(y.version,G).setHasLocalMutations(),null}(i,e,t,o):i instanceof Et?function(d,y,C,R){if(!c(d.precondition,y))return C;const G=Mn(d.fieldTransforms,R,y),Z=y.data;return Z.setAll(Yt(d)),Z.setAll(G),y.convertToFoundDocument(y.version,Z).setHasLocalMutations(),null===C?null:C.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(de=>de.field))}(i,e,t,o):(C=t,c(i.precondition,y=e)?(y.convertToNoDocument(y.version).setHasLocalMutations(),null):C);var y,C}function fe(i,e){let t=null;for(const o of i.fieldTransforms){const d=e.data.field(o.field),y=Ga(o.transform,d||null);null!=y&&(null===t&&(t=ho.empty()),t.set(o.field,y))}return t||null}function Me(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&ms(t,o,(d,y)=>function O(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof $o&&o instanceof $o||t instanceof xl&&o instanceof xl?ms(t.elements,o.elements,Ft):t instanceof Ka&&o instanceof Ka?Ft(t.gt,o.gt):t instanceof Dl&&o instanceof Dl);var t,o}(d,y))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class ze extends E{constructor(e,t,o,d=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class Et extends E{constructor(e,t,o,d,y=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=d,this.fieldTransforms=y,this.type=1}getFieldMask(){return this.fieldMask}}function Yt(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function vn(i,e,t){const o=new Map;en(i.length===t.length);for(let d=0;d<t.length;d++){const y=i[d],C=y.transform,R=e.data.field(y.field);o.set(y.field,da(C,R,t[d]))}return o}function Mn(i,e,t){const o=new Map;for(const d of i){const y=d.transform,C=t.data.field(d.field);o.set(d.field,Vu(y,C,e))}return o}class cn extends E{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mn extends E{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ir{constructor(e){this.count=e}}var Gn,jn;function _i(i){switch(i){default:return ln();case ot.CANCELLED:case ot.UNKNOWN:case ot.DEADLINE_EXCEEDED:case ot.RESOURCE_EXHAUSTED:case ot.INTERNAL:case ot.UNAVAILABLE:case ot.UNAUTHENTICATED:return!1;case ot.INVALID_ARGUMENT:case ot.NOT_FOUND:case ot.ALREADY_EXISTS:case ot.PERMISSION_DENIED:case ot.FAILED_PRECONDITION:case ot.ABORTED:case ot.OUT_OF_RANGE:case ot.UNIMPLEMENTED:case ot.DATA_LOSS:return!0}}function di(i){if(void 0===i)return Gi("GRPC error has no .code"),ot.UNKNOWN;switch(i){case Gn.OK:return ot.OK;case Gn.CANCELLED:return ot.CANCELLED;case Gn.UNKNOWN:return ot.UNKNOWN;case Gn.DEADLINE_EXCEEDED:return ot.DEADLINE_EXCEEDED;case Gn.RESOURCE_EXHAUSTED:return ot.RESOURCE_EXHAUSTED;case Gn.INTERNAL:return ot.INTERNAL;case Gn.UNAVAILABLE:return ot.UNAVAILABLE;case Gn.UNAUTHENTICATED:return ot.UNAUTHENTICATED;case Gn.INVALID_ARGUMENT:return ot.INVALID_ARGUMENT;case Gn.NOT_FOUND:return ot.NOT_FOUND;case Gn.ALREADY_EXISTS:return ot.ALREADY_EXISTS;case Gn.PERMISSION_DENIED:return ot.PERMISSION_DENIED;case Gn.FAILED_PRECONDITION:return ot.FAILED_PRECONDITION;case Gn.ABORTED:return ot.ABORTED;case Gn.OUT_OF_RANGE:return ot.OUT_OF_RANGE;case Gn.UNIMPLEMENTED:return ot.UNIMPLEMENTED;case Gn.DATA_LOSS:return ot.DATA_LOSS;default:return ln()}}(jn=Gn||(Gn={}))[jn.OK=0]="OK",jn[jn.CANCELLED=1]="CANCELLED",jn[jn.UNKNOWN=2]="UNKNOWN",jn[jn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jn[jn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jn[jn.NOT_FOUND=5]="NOT_FOUND",jn[jn.ALREADY_EXISTS=6]="ALREADY_EXISTS",jn[jn.PERMISSION_DENIED=7]="PERMISSION_DENIED",jn[jn.UNAUTHENTICATED=16]="UNAUTHENTICATED",jn[jn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jn[jn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jn[jn.ABORTED=10]="ABORTED",jn[jn.OUT_OF_RANGE=11]="OUT_OF_RANGE",jn[jn.UNIMPLEMENTED=12]="UNIMPLEMENTED",jn[jn.INTERNAL=13]="INTERNAL",jn[jn.UNAVAILABLE=14]="UNAVAILABLE",jn[jn.DATA_LOSS=15]="DATA_LOSS";class xs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[d,y]of o)if(this.equalsFn(d,e))return y}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),d=this.inner[o];if(void 0===d)return this.inner[o]=[[e,t]],void this.innerSize++;for(let y=0;y<d.length;y++)if(this.equalsFn(d[y][0],e))return void(d[y]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return 1===o.length?delete this.inner[t]:o.splice(d,1),this.innerSize--,!0;return!1}forEach(e){Ua(this.inner,(t,o)=>{for(const[d,y]of o)e(d,y)})}isEmpty(){return Da(this.inner)}size(){return this.innerSize}}const Ta=new yi(Kt.comparator);function Br(){return Ta}const kr=new yi(Kt.comparator);function za(...i){let e=kr;for(const t of i)e=e.insert(t.key,t);return e}function Sa(i){let e=kr;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Zs(){return Nl()}function Zl(){return Nl()}function Nl(){return new xs(i=>i.toString(),(i,e)=>i.isEqual(e))}const mu=new yi(Kt.comparator),Uc=new ci(Kt.comparator);function kt(...i){let e=Uc;for(const t of i)e=e.add(t);return e}const kn=new ci(Xn);function Hn(){return kn}class wr{constructor(e,t,o,d,y){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=d,this.resolvedLimboDocuments=y}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const d=new Map;return d.set(e,Ti.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new wr(Sn.min(),d,Hn(),Br(),kt())}}class Ti{constructor(e,t,o,d,y){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=d,this.removedDocuments=y}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Ti(o,t,kt(),kt(),kt())}}class Go{constructor(e,t,o,d){this.It=e,this.removedTargetIds=t,this.key=o,this.Tt=d}}class Wo{constructor(e,t){this.targetId=e,this.Et=t}}class Il{constructor(e,t,o=zi.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=d}}class qi{constructor(){this.At=0,this.Rt=fo(),this.bt=zi.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=kt(),t=kt(),o=kt();return this.Rt.forEach((d,y)=>{switch(y){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:o=o.add(d);break;default:ln()}}),new Ti(this.bt,this.Pt,e,t,o)}xt(){this.vt=!1,this.Rt=fo()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class pd{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Br(),this.qt=Bu(),this.Ut=new ci(Xn)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const o=this.Wt(t);switch(e.state){case 0:this.zt(t)&&o.Dt(e.resumeToken);break;case 1:o.Mt(),o.Vt||o.xt(),o.Dt(e.resumeToken);break;case 2:o.Mt(),o.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(o.Ft(),o.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),o.Dt(e.resumeToken));break;default:ln()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((o,d)=>{this.zt(d)&&t(d)})}Jt(e){const t=e.targetId,o=e.Et.count,d=this.Yt(t);if(d){const y=d.target;if(Ho(y))if(0===o){const C=new Kt(y.path);this.Qt(t,C,ri.newNoDocument(C,Sn.min()))}else en(1===o);else this.Xt(t)!==o&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((y,C)=>{const R=this.Yt(C);if(R){if(y.current&&Ho(R.target)){const G=new Kt(R.target.path);null!==this.Lt.get(G)||this.te(C,G)||this.Qt(C,G,ri.newNoDocument(G,e))}y.St&&(t.set(C,y.Ct()),y.xt())}});let o=kt();this.qt.forEach((y,C)=>{let R=!0;C.forEachWhile(G=>{const Z=this.Yt(G);return!Z||2===Z.purpose||(R=!1,!1)}),R&&(o=o.add(y))}),this.Lt.forEach((y,C)=>C.setReadTime(e));const d=new wr(e,t,this.Ut,this.Lt,o);return this.Lt=Br(),this.qt=Bu(),this.Ut=new ci(Xn),d}Gt(e,t){if(!this.zt(e))return;const o=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,o),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,o){if(!this.zt(e))return;const d=this.Wt(e);this.te(e,t)?d.Nt(t,1):d.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),o&&(this.Lt=this.Lt.insert(t,o))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new qi,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new ci(Xn),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||xt("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new qi),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function Bu(){return new yi(Kt.comparator)}function fo(){return new yi(Kt.comparator)}const wl={asc:"ASCENDING",desc:"DESCENDING"},al={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Su={and:"AND",or:"OR"};class ju{constructor(e,t){this.databaseId=e,this.wt=t}}function bu(i,e){return i.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oh(i,e){return i.wt?e.toBase64():e.toUint8Array()}function Au(i,e){return bu(i,e.toTimestamp())}function Js(i){return en(!!i),Sn.fromTimestamp(function(e){const t=b(e);return new Kr(t.seconds,t.nanos)}(i))}function cc(i,e){return(t=i,new yr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Vc(i){const e=yr.fromString(i);return en(Pf(e)),e}function dc(i,e){return cc(i.databaseId,e.path)}function Tl(i,e){const t=Vc(e);if(t.get(1)!==i.databaseId.projectId)throw new Pt(ot.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Pt(ot.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Kt(gd(t))}function Hu(i,e){return cc(i.databaseId,e)}function Mu(i){const e=Vc(i);return 4===e.length?yr.emptyPath():gd(e)}function $u(i){return new yr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function gd(i){return en(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function ah(i,e,t){return{name:dc(i,e),fields:t.value.mapValue.fields}}function Bc(i,e){let t;if(e instanceof ze)t={update:ah(i,e.key,e.value)};else if(e instanceof cn)t={delete:dc(i,e.key)};else if(e instanceof Et)t={update:ah(i,e.key,e.data),updateMask:gc(e.fieldMask)};else{if(!(e instanceof mn))return ln();t={verify:dc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(d,y){const C=y.transform;if(C instanceof Dl)return{fieldPath:y.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof $o)return{fieldPath:y.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof xl)return{fieldPath:y.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof Ka)return{fieldPath:y.field.canonicalString(),increment:C.gt};throw ln()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:Au(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:ln()),t;var d}function md(i,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?a.updateTime(Js(d.updateTime)):void 0!==d.exists?a.exists(d.exists):a.none():a.none(),o=e.updateTransforms?e.updateTransforms.map(d=>function(y,C){let R=null;"setToServerValue"in C?(en("REQUEST_TIME"===C.setToServerValue),R=new Dl):"appendMissingElements"in C?R=new $o(C.appendMissingElements.values||[]):"removeAllFromArray"in C?R=new xl(C.removeAllFromArray.values||[]):"increment"in C?R=new Ka(y,C.increment):ln();const G=Ai.fromServerFormat(C.fieldPath);return new ql(G,R)}(i,d)):[];var d;if(e.update){const d=Tl(i,e.update.name),y=new ho({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new js((e.updateMask.fieldPaths||[]).map(Z=>Ai.fromServerFormat(Z)));return new Et(d,y,C,t,o)}return new ze(d,y,t,o)}if(e.delete){const d=Tl(i,e.delete);return new cn(d,t)}if(e.verify){const d=Tl(i,e.verify);return new mn(d,t)}return ln()}function _d(i,e){return{documents:[Hu(i,e.path)]}}function fc(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Hu(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Hu(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const d=function(G){if(0!==G.length)return Ou(Jr.create(G,"and"))}(e.filters);d&&(t.structuredQuery.where=d);const y=function(G){if(0!==G.length)return G.map(Z=>{return{field:Jl((de=Z).field),direction:hh(de.dir)};var de})}(e.orderBy);y&&(t.structuredQuery.orderBy=y);const C=(Z=e.limit,i.wt||_o(Z)?Z:{value:Z});var Z,R,G;return null!==C&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(G=e.endAt).inclusive,values:G.position}),t}function uh(i){let e=Mu(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let d=null;if(o>0){en(1===o);const de=t.from[0];de.allDescendants?d=de.collectionId:e=e.child(de.collectionId)}let y=[];t.where&&(y=function(de){const be=dh(de);return be instanceof Jr&&lu(be)?be.getFilters():[be]}(t.where));let C=[];t.orderBy&&(C=t.orderBy.map(de=>{return new Ha(pc((be=de).field),function(rt){switch(rt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(be.direction));var be}));let R=null;t.limit&&(R=function(de){let be;return be="object"==typeof de?de.value:de,_o(be)?null:be}(t.limit));let G=null;var de;t.startAt&&(G=new sa((de=t.startAt).values||[],!!de.before));let Z=null;return t.endAt&&(Z=function(de){return new sa(de.values||[],!de.before)}(t.endAt)),function Wl(i,e,t,o,d,y,C,R){return new vs(i,e,t,o,d,y,C,R)}(e,d,C,y,R,"F",G,Z)}function dh(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=pc(e.unaryFilter.field);return Or.create(t,"==",{doubleValue:NaN});case"IS_NULL":const o=pc(e.unaryFilter.field);return Or.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=pc(e.unaryFilter.field);return Or.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const y=pc(e.unaryFilter.field);return Or.create(y,"!=",{nullValue:"NULL_VALUE"});default:return ln()}}(i):void 0!==i.fieldFilter?Or.create(pc((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ln()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return Jr.create(e.compositeFilter.filters.map(t=>dh(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ln()}}(e.compositeFilter.op))}(i):ln();var e}function hh(i){return wl[i]}function Tg(i){return al[i]}function fh(i){return Su[i]}function Jl(i){return{fieldPath:i.canonicalString()}}function pc(i){return Ai.fromServerFormat(i.fieldPath)}function Ou(i){return i instanceof Or?function(e){if("=="===e.op){if(hl(e.value))return{unaryFilter:{field:Jl(e.field),op:"IS_NAN"}};if(qs(e.value))return{unaryFilter:{field:Jl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(hl(e.value))return{unaryFilter:{field:Jl(e.field),op:"IS_NOT_NAN"}};if(qs(e.value))return{unaryFilter:{field:Jl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jl(e.field),op:Tg(e.op),value:e.value}}}(i):i instanceof Jr?function(e){const t=e.getFilters().map(o=>Ou(o));return 1===t.length?t[0]:{compositeFilter:{op:fh(e.op),filters:t}}}(i):ln()}function gc(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Pf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Ya(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=ph(e)),e=Rf(i.get(t),e);return ph(e)}function Rf(i,e){let t=e;const o=i.length;for(let d=0;d<o;d++){const y=i.charAt(d);switch(y){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=y}}return t}function ph(i){return i+"\x01\x01"}function Ll(i){const e=i.length;if(en(e>=2),2===e)return en("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),yr.emptyPath();const t=e-2,o=[];let d="";for(let y=0;y<e;){const C=i.indexOf("\x01",y);switch((C<0||C>t)&&ln(),i.charAt(C+1)){case"\x01":const R=i.substring(y,C);let G;0===d.length?G=R:(d+=R,G=d,d=""),o.push(G);break;case"\x10":d+=i.substring(y,C),d+="\0";break;case"\x11":d+=i.substring(y,C+1);break;default:ln()}y=C+2}return new yr(o)}const gh=["userId","batchId"];function mc(i,e){return[i,Ya(e)]}function vd(i,e,t){return[i,Ya(e),t]}const mh={},Sg=["prefixPath","collectionGroup","readTime","documentId"],bg=["prefixPath","collectionGroup","documentId"],m=["collectionGroup","readTime","prefixPath","documentId"],h=["canonicalId","targetId"],f=["targetId","path"],v=["path","targetId"],M=["collectionId","parent"],V=["indexId","uid"],K=["uid","sequenceNumber"],ce=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],we=["indexId","uid","orderedDocumentKey"],Ne=["userId","collectionPath","documentId"],_t=["userId","collectionPath","largestBatchId"],Dt=["userId","collectionGroup","largestBatchId"],Mt=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yn=[...Mt,"documentOverlays"],Yn=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ii=Yn,bo=[...ii,"indexConfiguration","indexState","indexEntries"];class Fl extends el{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function ls(i,e){const t=Zt(i);return ys.M(t.se,e)}class yc{constructor(e,t,o,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=d}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const y=this.mutations[d];y.key.isEqual(e.key)&&H(y,e,o[d])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=ie(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=ie(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=Zl();return this.mutations.forEach(d=>{const y=e.get(d.key),C=y.overlayedDocument;let R=this.applyToLocalView(C,y.mutatedFields);R=t.has(d.key)?null:R;const G=S(C,R);null!==G&&o.set(d.key,G),C.isValidDocument()||C.convertToNoDocument(Sn.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kt())}isEqual(e){return this.batchId===e.batchId&&ms(this.mutations,e.mutations,(t,o)=>Me(t,o))&&ms(this.baseMutations,e.baseMutations,(t,o)=>Me(t,o))}}class Ed{constructor(e,t,o,d){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=d}static from(e,t,o){en(e.mutations.length===o.length);let d=mu;const y=e.mutations;for(let C=0;C<y.length;C++)d=d.insert(y[C].key,o[C].version);return new Ed(e,t,o,d)}}class xf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Pu{constructor(e,t,o,d,y=Sn.min(),C=Sn.min(),R=zi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=d,this.snapshotVersion=y,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=R}withSequenceNumber(e){return new Pu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Pu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Pu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ag{constructor(e){this.ie=e}}function Mg(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:yh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:dc(d=i.ie,(y=e).key),fields:y.data.value.mapValue.fields,updateTime:bu(d,y.version.toTimestamp()),createTime:bu(d,y.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Ru(e.version)};else{if(!e.isUnknownDocument())return ln();o.unknownDocument={path:t.path.toArray(),version:Ru(e.version)}}var d,y;return o}function yh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Ru(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _c(i){const e=new Kr(i.seconds,i.nanoseconds);return Sn.fromTimestamp(e)}function vc(i,e){const t=(e.baseMutations||[]).map(y=>md(i.ie,y));for(let y=0;y<e.mutations.length-1;++y){const C=e.mutations[y];y+1<e.mutations.length&&void 0!==e.mutations[y+1].transform&&(C.updateTransforms=e.mutations[y+1].transform.fieldTransforms,e.mutations.splice(y+1,1),++y)}const o=e.mutations.map(y=>md(i.ie,y)),d=Kr.fromMillis(e.localWriteTimeMs);return new yc(e.batchId,d,t,o)}function Dd(i){const e=_c(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?_c(i.lastLimboFreeSnapshotVersion):Sn.min();let o;var d;return void 0!==i.query.documents?(en(1===(d=i.query).documents.length),o=wi(ml(Mu(d.documents[0])))):o=wi(uh(i.query)),new Pu(o,i.targetId,0,i.lastListenSequenceNumber,e,t,zi.fromBase64String(i.resumeToken))}function Nf(i,e){const t=Ru(e.snapshotVersion),o=Ru(e.lastLimboFreeSnapshotVersion);let d;d=Ho(e.target)?_d(i.ie,e.target):fc(i.ie,e.target);const y=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:sl(e.target),readTime:t,resumeToken:y,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:d}}function Lf(i){const e=uh({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?zl(e,e.limit,"L"):e}function Ff(i,e){return new xf(e.largestBatchId,md(i.ie,e.overlayMutation))}function ba(i,e){const t=e.path.lastSegment();return[i,Ya(e.path.popLast()),t]}function _h(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Ru(o.readTime),documentKey:Ya(o.documentKey.path),largestBatchId:o.largestBatchId}}class Og{getBundleMetadata(e,t){return vh(e).get(t).next(o=>{if(o)return{id:(d=o).bundleId,createTime:_c(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return vh(e).put({bundleId:(o=t).id,createTime:Ru(Js(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return ha(e).get(t).next(o=>{if(o)return{name:(d=o).name,query:Lf(d.bundledQuery),readTime:_c(d.readTime)};var d})}saveNamedQuery(e,t){return ha(e).put({name:(o=t).name,readTime:Ru(Js(o.readTime)),bundledQuery:o.bundledQuery});var o}}function vh(i){return ls(i,"bundles")}function ha(i){return ls(i,"namedQueries")}class Gu{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new Gu(e,t.uid||"")}getOverlay(e,t){return jc(e).get(ba(this.userId,t)).next(o=>o?Ff(this.yt,o):null)}getOverlays(e,t){const o=Zs();return lt.forEach(t,d=>this.getOverlay(e,d).next(y=>{null!==y&&o.set(d,y)})).next(()=>o)}saveOverlays(e,t,o){const d=[];return o.forEach((y,C)=>{const R=new xf(t,C);d.push(this.oe(e,R))}),lt.waitFor(d)}removeOverlaysForBatchId(e,t,o){const d=new Set;t.forEach(C=>d.add(Ya(C.getCollectionPath())));const y=[];return d.forEach(C=>{const R=IDBKeyRange.bound([this.userId,C,o],[this.userId,C,o+1],!1,!0);y.push(jc(e).Y("collectionPathOverlayIndex",R))}),lt.waitFor(y)}getOverlaysForCollection(e,t,o){const d=Zs(),y=Ya(t),C=IDBKeyRange.bound([this.userId,y,o],[this.userId,y,Number.POSITIVE_INFINITY],!0);return jc(e).W("collectionPathOverlayIndex",C).next(R=>{for(const G of R){const Z=Ff(this.yt,G);d.set(Z.getKey(),Z)}return d})}getOverlaysForCollectionGroup(e,t,o,d){const y=Zs();let C;const R=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return jc(e).Z({index:"collectionGroupOverlayIndex",range:R},(G,Z,de)=>{const be=Ff(this.yt,Z);y.size()<d||be.largestBatchId===C?(y.set(be.getKey(),be),C=be.largestBatchId):de.done()}).next(()=>y)}oe(e,t){return jc(e).put(function(o,d,y){const[C,R,G]=ba(d,y.mutation.key);return{userId:d,collectionPath:R,documentId:G,collectionGroup:y.mutation.key.getCollectionGroup(),largestBatchId:y.largestBatchId,overlayMutation:Bc(o.ie,y.mutation)}}(this.yt,this.userId,t))}}function jc(i){return ls(i,"documentOverlays")}class Ec{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(A(e.integerValue));else if("doubleValue"in e){const o=A(e.doubleValue);isNaN(o)?this.he(t,13):(this.he(t,15),nl(o)?t.le(0):t.le(o))}else if("timestampValue"in e){const o=e.timestampValue;this.he(t,20),"string"==typeof o?t.fe(o):(t.fe(`${o.seconds||""}`),t.le(o.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(T(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.he(t,45),t.le(o.latitude||0),t.le(o.longitude||0)}else"mapValue"in e?Ol(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):ln()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const o=e.fields||{};this.he(t,55);for(const d of Object.keys(o))this.de(d,t),this.ce(o[d],t)}ye(e,t){const o=e.values||[];this.he(t,50);for(const d of o)this.ce(d,t)}me(e,t){this.he(t,37),Kt.fromName(e).path.forEach(o=>{this.he(t,60),this.pe(o,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function yy(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function kf(i){const e=64-function(t){let o=0;for(let d=0;d<8;++d){const y=yy(255&t[d]);if(o+=y,8!==y)break}return o}(i);return Math.ceil(e/8)}Ec.Ie=new Ec;class _y{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ee(o.value),o=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.be(o.value),o=t.next();this.Pe()}ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ee(o);else if(o<2048)this.Ee(960|o>>>6),this.Ee(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|o>>>12),this.Ee(128|63&o>>>6),this.Ee(128|63&o);else{const d=t.codePointAt(0);this.Ee(240|d>>>18),this.Ee(128|63&d>>>12),this.Ee(128|63&d>>>6),this.Ee(128|63&d)}}this.Ae()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.be(o);else if(o<2048)this.be(960|o>>>6),this.be(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.be(480|o>>>12),this.be(128|63&o>>>6),this.be(128|63&o);else{const d=t.codePointAt(0);this.be(240|d>>>18),this.be(128|63&d>>>12),this.be(128|63&d>>>6),this.be(128|63&d)}}this.Pe()}Se(e){const t=this.De(e),o=kf(t);this.Ce(1+o),this.buffer[this.position++]=255&o;for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=255&t[d]}xe(e){const t=this.De(e),o=kf(t);this.Ce(1+o),this.buffer[this.position++]=~(255&o);for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(d){const y=new DataView(new ArrayBuffer(8));return y.setFloat64(0,d,!1),new Uint8Array(y.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let d=1;d<t.length;++d)t[d]^=o?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const d=new Uint8Array(o);d.set(this.buffer),this.buffer=d}}class Pg{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class vy{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class Hc{constructor(){this.$e=new _y,this.Be=new Pg(this.$e),this.Le=new vy(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Dc{constructor(e,t,o,d){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=d}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Dc(this.indexId,this.documentKey,this.arrayValue,o)}}function Wu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Uf(i.arrayValue,e.arrayValue),0!==t?t:(t=Uf(i.directionalValue,e.directionalValue),0!==t?t:Kt.comparator(i.documentKey,e.documentKey)))}function Uf(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Rg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const o=t;o.isInequality()?this.Qe=o:this.Ge.push(o)}}je(e){en(e.collectionGroup===this.collectionId);const t=lo(e);if(void 0!==t&&!this.We(t))return!1;const o=Vo(e);let d=0,y=0;for(;d<o.length&&this.We(o[d]);++d);if(d===o.length)return!0;if(void 0!==this.Qe){const C=o[d];if(!this.ze(this.Qe,C)||!this.He(this.Ke[y++],C))return!1;++d}for(;d<o.length;++d){const C=o[d];if(y>=this.Ke.length||!this.He(this.Ke[y++],C))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function xg(i){var e,t;if(en(i instanceof Or||i instanceof Jr),i instanceof Or){if(i instanceof la){const d=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(y=>Or.create(i.field,"==",y)))||[];return Jr.create(d,"or")}return i}const o=i.filters.map(d=>xg(d));return Jr.create(o,i.op)}function $c(i){if(0===i.getFilters().length)return[];const e=Lg(xg(i));return en(Ng(e)),Xl(e)||Vf(e)?[e]:e.getFilters()}function Xl(i){return i instanceof Or}function Vf(i){return i instanceof Jr&&lu(i)}function Ng(i){return Xl(i)||Vf(i)||function(e){if(e instanceof Jr&&aa(e)){for(const t of e.getFilters())if(!Xl(t)&&!Vf(t))return!1;return!0}return!1}(i)}function Lg(i){if(en(i instanceof Or||i instanceof Jr),i instanceof Or)return i;if(1===i.filters.length)return Lg(i.filters[0]);const e=i.filters.map(o=>Lg(o));let t=Jr.create(e,i.op);return t=jf(t),Ng(t)?t:(en(t instanceof Jr),en(oa(t)),en(t.filters.length>1),t.filters.reduce((o,d)=>Fg(o,d)))}function Fg(i,e){let t;return en(i instanceof Or||i instanceof Jr),en(e instanceof Or||e instanceof Jr),t=i instanceof Or?e instanceof Or?Jr.create([i,e],"and"):Bf(i,e):e instanceof Or?Bf(e,i):function(o,d){if(en(o.filters.length>0&&d.filters.length>0),oa(o)&&oa(d))return Ca(o,d.getFilters());const y=aa(o)?o:d,C=aa(o)?d:o,R=y.filters.map(G=>Fg(G,C));return Jr.create(R,"or")}(i,e),jf(t)}function Bf(i,e){if(oa(e))return Ca(e,i.getFilters());{const t=e.filters.map(o=>Fg(i,o));return Jr.create(t,"or")}}function jf(i){if(en(i instanceof Or||i instanceof Jr),i instanceof Or)return i;const e=i.getFilters();if(1===e.length)return jf(e[0]);if(Yi(i))return i;const t=e.map(d=>jf(d)),o=[];return t.forEach(d=>{d instanceof Or?o.push(d):d instanceof Jr&&(d.op===i.op?o.push(...d.filters):o.push(d))}),1===o.length?o[0]:Jr.create(o,i.op)}class yu{constructor(){this.Je=new Cd}addToCollectionParentIndex(e,t){return this.Je.add(t),lt.resolve()}getCollectionParents(e,t){return lt.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return lt.resolve()}deleteFieldIndex(e,t){return lt.resolve()}getDocumentsMatchingTarget(e,t){return lt.resolve(null)}getIndexType(e,t){return lt.resolve(0)}getFieldIndexes(e,t){return lt.resolve([])}getNextCollectionGroupToUpdate(e){return lt.resolve(null)}getMinOffset(e,t){return lt.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,t){return lt.resolve(ss.min())}updateCollectionGroup(e,t,o){return lt.resolve()}updateIndexEntries(e,t){return lt.resolve()}}class Cd{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t]||new ci(yr.comparator),y=!d.has(o);return this.index[t]=d.add(o),y}has(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t];return d&&d.has(o)}getEntries(e){return(this.index[e]||new ci(yr.comparator)).toArray()}}const Gc=new Uint8Array(0);class Ey{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new Cd,this.Xe=new xs(o=>sl(o),(o,d)=>Eo(o,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const o=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const y={collectionId:o,parent:Ya(d)};return Hf(e).put(y)}return lt.resolve()}getCollectionParents(e,t){const o=[],d=IDBKeyRange.bound([t,""],[Al(t),""],!1,!0);return Hf(e).W(d).next(y=>{for(const C of y){if(C.collectionId!==t)break;o.push(Ll(C.parent))}return o})}addFieldIndex(e,t){const o=Ku(e),d={indexId:(C=t).indexId,collectionGroup:C.collectionGroup,fields:C.fields.map(R=>[R.fieldPath.canonicalString(),R.kind])};var C;delete d.indexId;const y=o.add(d);if(t.indexState){const C=wd(e);return y.next(R=>{C.put(_h(R,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return y.next()}deleteFieldIndex(e,t){const o=Ku(e),d=wd(e),y=Id(e);return o.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>y.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Id(e);let d=!0;const y=new Map;return lt.forEach(this.Ze(t),C=>this.tn(e,C).next(R=>{d&&(d=!!R),y.set(C,R)})).next(()=>{if(d){let C=kt();const R=[];return lt.forEach(y,(G,Z)=>{var de;xt("IndexedDbIndexManager",`Using index ${de=G,`id=${de.indexId}|cg=${de.collectionGroup}|f=${de.fields.map(ji=>`${ji.fieldPath}:${ji.kind}`).join(",")}`} to execute ${sl(t)}`);const be=function(ji,Oo){const es=lo(Oo);if(void 0===es)return null;for(const Ni of gl(ji,es.fieldPath))switch(Ni.op){case"array-contains-any":return Ni.value.arrayValue.values||[];case"array-contains":return[Ni.value]}return null}(Z,G),rt=function(ji,Oo){const es=new Map;for(const Ni of Vo(Oo))for(const Po of gl(ji,Ni.fieldPath))switch(Po.op){case"==":case"in":es.set(Ni.fieldPath.canonicalString(),Po.value);break;case"not-in":case"!=":return es.set(Ni.fieldPath.canonicalString(),Po.value),Array.from(es.values())}return null}(Z,G),Ot=function(ji,Oo){const es=[];let Ni=!0;for(const Po of Vo(Oo)){const Fc=0===Po.kind?Gl(ji,Po.fieldPath,ji.startAt):cu(ji,Po.fieldPath,ji.startAt);es.push(Fc.value),Ni&&(Ni=Fc.inclusive)}return new sa(es,Ni)}(Z,G),jt=function(ji,Oo){const es=[];let Ni=!0;for(const Po of Vo(Oo)){const Fc=0===Po.kind?cu(ji,Po.fieldPath,ji.endAt):Gl(ji,Po.fieldPath,ji.endAt);es.push(Fc.value),Ni&&(Ni=Fc.inclusive)}return new sa(es,Ni)}(Z,G),gn=this.en(G,Z,Ot),Qn=this.en(G,Z,jt),us=this.nn(G,Z,rt),Ns=this.sn(G.indexId,be,gn,Ot.inclusive,Qn,jt.inclusive,us);return lt.forEach(Ns,ji=>o.J(ji,t.limit).next(Oo=>{Oo.forEach(es=>{const Ni=Kt.fromSegments(es.documentKey);C.has(Ni)||(C=C.add(Ni),R.push(Ni))})}))}).next(()=>R)}return lt.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:$c(Jr.create(e.filters,"and")).map(o=>$l(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,o,d,y,C,R){const G=(null!=t?t.length:1)*Math.max(o.length,y.length),Z=G/(null!=t?t.length:1),de=[];for(let be=0;be<G;++be){const rt=t?this.rn(t[be/Z]):Gc,Ot=this.on(e,rt,o[be%Z],d),jt=this.un(e,rt,y[be%Z],C),gn=R.map(Qn=>this.on(e,rt,Qn,!0));de.push(...this.createRange(Ot,jt,gn))}return de}on(e,t,o,d){const y=new Dc(e,Kt.empty(),t,o);return d?y:y.Ue()}un(e,t,o,d){const y=new Dc(e,Kt.empty(),t,o);return d?y.Ue():y}tn(e,t){const o=new Rg(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(y=>{let C=null;for(const R of y)o.je(R)&&(!C||R.fields.length>C.fields.length)&&(C=R);return C})}getIndexType(e,t){let o=2;const d=this.Ze(t);return lt.forEach(d,y=>this.tn(e,y).next(C=>{C?0!==o&&C.fields.length<function(R){let G=new ci(Ai.comparator),Z=!1;for(const de of R.filters)for(const be of de.getFlattenedFilters())be.field.isKeyField()||("array-contains"===be.op||"array-contains-any"===be.op?Z=!0:G=G.add(be.field));for(const de of R.orderBy)de.field.isKeyField()||(G=G.add(de.field));return G.size+(Z?1:0)}(y)&&(o=1):o=0})).next(()=>null!==t.limit&&d.length>1&&2===o?1:o)}cn(e,t){const o=new Hc;for(const d of Vo(e)){const y=t.data.field(d.fieldPath);if(null==y)return null;const C=o.qe(d.kind);Ec.Ie.ue(y,C)}return o.Fe()}rn(e){const t=new Hc;return Ec.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const o=new Hc;return Ec.Ie.ue(_s(this.databaseId,t),o.qe(function(d){const y=Vo(d);return 0===y.length?0:y[y.length-1].kind}(e))),o.Fe()}nn(e,t,o){if(null===o)return[];let d=[];d.push(new Hc);let y=0;for(const C of Vo(e)){const R=o[y++];for(const G of d)if(this.hn(t,C.fieldPath)&&Bs(R))d=this.ln(d,C,R);else{const Z=G.qe(C.kind);Ec.Ie.ue(R,Z)}}return this.fn(d)}en(e,t,o){return this.nn(e,t,o.position)}fn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Fe();return t}ln(e,t,o){const d=[...e],y=[];for(const C of o.arrayValue.values||[])for(const R of d){const G=new Hc;G.seed(R.Fe()),Ec.Ie.ue(C,G.qe(t.kind)),y.push(G)}return y}hn(e,t){return!!e.filters.find(o=>o instanceof Or&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Ku(e),d=wd(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(y=>{const C=[];return lt.forEach(y,R=>d.get([R.indexId,this.uid]).next(G=>{C.push(function(Z,de){const be=de?new So(de.sequenceNumber,new ss(_c(de.readTime),new Kt(Ll(de.documentKey)),de.largestBatchId)):So.empty(),rt=Z.fields.map(([Ot,jt])=>new ta(Ai.fromServerFormat(Ot),jt));return new ao(Z.indexId,Z.collectionGroup,rt,be)}(R,G))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,d)=>{const y=o.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==y?y:Xn(o.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const d=Ku(e),y=wd(e);return this.dn(e).next(C=>d.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>lt.forEach(R,G=>y.put(_h(G.indexId,this.user,C,o)))))}updateIndexEntries(e,t){const o=new Map;return lt.forEach(t,(d,y)=>{const C=o.get(d.collectionGroup);return(C?lt.resolve(C):this.getFieldIndexes(e,d.collectionGroup)).next(R=>(o.set(d.collectionGroup,R),lt.forEach(R,G=>this._n(e,d,G).next(Z=>{const de=this.wn(y,G);return Z.isEqual(de)?lt.resolve():this.mn(e,y,G,Z,de)}))))})}gn(e,t,o,d){return Id(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.an(o,t.key),documentKey:t.key.path.toArray()})}yn(e,t,o,d){return Id(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.an(o,t.key),t.key.path.toArray()])}_n(e,t,o){const d=Id(e);let y=new ci(Wu);return d.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.an(o,t)])},(C,R)=>{y=y.add(new Dc(o.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>y)}wn(e,t){let o=new ci(Wu);const d=this.cn(t,e);if(null==d)return o;const y=lo(t);if(null!=y){const C=e.data.field(y.fieldPath);if(Bs(C))for(const R of C.arrayValue.values||[])o=o.add(new Dc(t.indexId,e.key,this.rn(R),d))}else o=o.add(new Dc(t.indexId,e.key,Gc,d));return o}mn(e,t,o,d,y){xt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const C=[];return function(R,G,Z,de,be){const rt=R.getIterator(),Ot=G.getIterator();let jt=as(rt),gn=as(Ot);for(;jt||gn;){let Qn=!1,us=!1;if(jt&&gn){const Ns=Z(jt,gn);Ns<0?us=!0:Ns>0&&(Qn=!0)}else null!=jt?us=!0:Qn=!0;Qn?(de(gn),gn=as(Ot)):us?(be(jt),jt=as(rt)):(jt=as(rt),gn=as(Ot))}}(d,y,Wu,R=>{C.push(this.gn(e,t,o,R))},R=>{C.push(this.yn(e,t,o,R))}),lt.waitFor(C)}dn(e){let t=1;return wd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,d,y)=>{y.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((C,R)=>Wu(C,R)).filter((C,R,G)=>!R||0!==Wu(C,G[R-1]));const d=[];d.push(e);for(const C of o){const R=Wu(C,e),G=Wu(C,t);if(0===R)d[0]=e.Ue();else if(R>0&&G<0)d.push(C),d.push(C.Ue());else if(G>0)break}d.push(t);const y=[];for(let C=0;C<d.length;C+=2){if(this.pn(d[C],d[C+1]))return[];y.push(IDBKeyRange.bound([d[C].indexId,this.uid,d[C].arrayValue,d[C].directionalValue,Gc,[]],[d[C+1].indexId,this.uid,d[C+1].arrayValue,d[C+1].directionalValue,Gc,[]]))}return y}pn(e,t){return Wu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kg)}getMinOffset(e,t){return lt.mapArray(this.Ze(t),o=>this.tn(e,o).next(d=>d||ln())).next(kg)}}function Hf(i){return ls(i,"collectionParents")}function Id(i){return ls(i,"indexEntries")}function Ku(i){return ls(i,"indexConfiguration")}function wd(i){return ls(i,"indexState")}function kg(i){en(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const d=i[o].indexState.offset;Xa(d,e)<0&&(e=d),t<d.largestBatchId&&(t=d.largestBatchId)}return new ss(e.readTime,e.documentKey,t)}const Eh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Aa{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Aa(e,Aa.DEFAULT_COLLECTION_PERCENTILE,Aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function $f(i,e,t){const o=i.store("mutations"),d=i.store("documentMutations"),y=[],C=IDBKeyRange.only(t.batchId);let R=0;const G=o.Z({range:C},(de,be,rt)=>(R++,rt.delete()));y.push(G.next(()=>{en(1===R)}));const Z=[];for(const de of t.mutations){const be=vd(e,de.key.path,t.batchId);y.push(d.delete(be)),Z.push(de.key)}return lt.waitFor(y).next(()=>Z)}function Gf(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw ln();e=i.noDocument}return JSON.stringify(e).length}Aa.DEFAULT_COLLECTION_PERCENTILE=10,Aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Aa.DEFAULT=new Aa(41943040,Aa.DEFAULT_COLLECTION_PERCENTILE,Aa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Aa.DISABLED=new Aa(-1,0,0);class xu{constructor(e,t,o,d){this.userId=e,this.yt=t,this.indexManager=o,this.referenceDelegate=d,this.In={}}static re(e,t,o,d){en(""!==e.uid);const y=e.isAuthenticated()?e.uid:"";return new xu(y,t,o,d)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nu(e).Z({index:"userMutationsIndex",range:o},(d,y,C)=>{t=!1,C.done()}).next(()=>t)}addMutationBatch(e,t,o,d){const y=Wc(e),C=Nu(e);return C.add({}).next(R=>{en("number"==typeof R);const G=new yc(R,t,o,d),Z=function(rt,Ot,jt){const gn=jt.baseMutations.map(us=>Bc(rt.ie,us)),Qn=jt.mutations.map(us=>Bc(rt.ie,us));return{userId:Ot,batchId:jt.batchId,localWriteTimeMs:jt.localWriteTime.toMillis(),baseMutations:gn,mutations:Qn}}(this.yt,this.userId,G),de=[];let be=new ci((rt,Ot)=>Xn(rt.canonicalString(),Ot.canonicalString()));for(const rt of d){const Ot=vd(this.userId,rt.key.path,R);be=be.add(rt.key.path.popLast()),de.push(C.put(Z)),de.push(y.put(Ot,mh))}return be.forEach(rt=>{de.push(this.indexManager.addToCollectionParentIndex(e,rt))}),e.addOnCommittedListener(()=>{this.In[R]=G.keys()}),lt.waitFor(de).next(()=>G)})}lookupMutationBatch(e,t){return Nu(e).get(t).next(o=>o?(en(o.userId===this.userId),vc(this.yt,o)):null)}Tn(e,t){return this.In[t]?lt.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const d=o.keys();return this.In[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,d=IDBKeyRange.lowerBound([this.userId,o]);let y=null;return Nu(e).Z({index:"userMutationsIndex",range:d},(C,R,G)=>{R.userId===this.userId&&(en(R.batchId>=o),y=vc(this.yt,R)),G.done()}).next(()=>y)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Nu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(d,y,C)=>{o=y.batchId,C.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nu(e).W("userMutationsIndex",t).next(o=>o.map(d=>vc(this.yt,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=mc(this.userId,t.path),d=IDBKeyRange.lowerBound(o),y=[];return Wc(e).Z({range:d},(C,R,G)=>{const[Z,de,be]=C,rt=Ll(de);if(Z===this.userId&&t.path.isEqual(rt))return Nu(e).get(be).next(Ot=>{if(!Ot)throw ln();en(Ot.userId===this.userId),y.push(vc(this.yt,Ot))});G.done()}).next(()=>y)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new ci(Xn);const d=[];return t.forEach(y=>{const C=mc(this.userId,y.path),R=IDBKeyRange.lowerBound(C),G=Wc(e).Z({range:R},(Z,de,be)=>{const[rt,Ot,jt]=Z,gn=Ll(Ot);rt===this.userId&&y.path.isEqual(gn)?o=o.add(jt):be.done()});d.push(G)}),lt.waitFor(d).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1,y=mc(this.userId,o),C=IDBKeyRange.lowerBound(y);let R=new ci(Xn);return Wc(e).Z({range:C},(G,Z,de)=>{const[be,rt,Ot]=G,jt=Ll(rt);be===this.userId&&o.isPrefixOf(jt)?jt.length===d&&(R=R.add(Ot)):de.done()}).next(()=>this.En(e,R))}En(e,t){const o=[],d=[];return t.forEach(y=>{d.push(Nu(e).get(y).next(C=>{if(null===C)throw ln();en(C.userId===this.userId),o.push(vc(this.yt,C))}))}),lt.waitFor(d).next(()=>o)}removeMutationBatch(e,t){return $f(e.se,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),lt.forEach(o,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return lt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),d=[];return Wc(e).Z({range:o},(y,C,R)=>{if(y[0]===this.userId){const G=Ll(y[1]);d.push(G)}else R.done()}).next(()=>{en(0===d.length)})})}containsKey(e,t){return Dh(e,this.userId,t)}Rn(e){return Ch(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Dh(i,e,t){const o=mc(e,t.path),d=o[1],y=IDBKeyRange.lowerBound(o);let C=!1;return Wc(i).Z({range:y,X:!0},(R,G,Z)=>{const[de,be,rt]=R;de===e&&be===d&&(C=!0),Z.done()}).next(()=>C)}function Nu(i){return ls(i,"mutations")}function Wc(i){return ls(i,"documentMutations")}function Ch(i){return ls(i,"mutationQueues")}class Cc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Cc(0)}static vn(){return new Cc(-1)}}class Dy{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new Cc(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Sn.fromTimestamp(new Kr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(d=>(d.highestListenSequenceNumber=t,o&&(d.lastRemoteSnapshotVersion=o.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.Sn(e,d)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Kc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(en(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let d=0;const y=[];return Kc(e).Z((C,R)=>{const G=Dd(R);G.sequenceNumber<=t&&null===o.get(G.targetId)&&(d++,y.push(this.removeTargetData(e,G)))}).next(()=>lt.waitFor(y)).next(()=>d)}forEachTarget(e,t){return Kc(e).Z((o,d)=>{const y=Dd(d);t(y)})}Vn(e){return Ug(e).get("targetGlobalKey").next(t=>(en(null!==t),t))}Sn(e,t){return Ug(e).put("targetGlobalKey",t)}Dn(e,t){return Kc(e).put(Nf(this.yt,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=sl(t),d=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let y=null;return Kc(e).Z({range:d,index:"queryTargetsIndex"},(C,R,G)=>{const Z=Dd(R);Eo(t,Z.target)&&(y=Z,G.done())}).next(()=>y)}addMatchingKeys(e,t,o){const d=[],y=zu(e);return t.forEach(C=>{const R=Ya(C.path);d.push(y.put({targetId:o,path:R})),d.push(this.referenceDelegate.addReference(e,o,C))}),lt.waitFor(d)}removeMatchingKeys(e,t,o){const d=zu(e);return lt.forEach(t,y=>{const C=Ya(y.path);return lt.waitFor([d.delete([o,C]),this.referenceDelegate.removeReference(e,o,y)])})}removeMatchingKeysForTargetId(e,t){const o=zu(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(d)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),d=zu(e);let y=kt();return d.Z({range:o,X:!0},(C,R,G)=>{const Z=Ll(C[1]),de=new Kt(Z);y=y.add(de)}).next(()=>y)}containsKey(e,t){const o=Ya(t.path),d=IDBKeyRange.bound([o],[Al(o)],!1,!0);let y=0;return zu(e).Z({index:"documentTargetsIndex",X:!0,range:d},([C,R],G,Z)=>{0!==C&&(y++,Z.done())}).next(()=>y>0)}ne(e,t){return Kc(e).get(t).next(o=>o?Dd(o):null)}}function Kc(i){return ls(i,"targets")}function Ug(i){return ls(i,"targetGlobal")}function zu(i){return ls(i,"targetDocuments")}function Vg([i,e],[t,o]){const d=Xn(i,t);return 0===d?Xn(e,o):d}class Bg{constructor(e){this.xn=e,this.buffer=new ci(Vg),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();Vg(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Wf{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;xt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,g.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){os(o)?xt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield uo(o)}yield t.Fn(3e5)}))}}class jg{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return lt.resolve(co.at);const o=new Bg(t);return this.$n.forEachTarget(e,d=>o.On(d.sequenceNumber)).next(()=>this.$n.Ln(e,d=>o.On(d))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xt("LruGarbageCollector","Garbage collection skipped; disabled"),lt.resolve(Eh)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(xt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Eh):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let o,d,y,C,R,G,Z;const de=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(be=>(be>this.params.maximumSequenceNumbersToCollect?(xt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${be}`),d=this.params.maximumSequenceNumbersToCollect):d=be,C=Date.now(),this.nthSequenceNumber(e,d))).next(be=>(o=be,R=Date.now(),this.removeTargets(e,o,t))).next(be=>(y=be,G=Date.now(),this.removeOrphanedDocuments(e,o))).next(be=>(Z=Date.now(),bi()<=B.in.DEBUG&&xt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-de}ms\n\tDetermined least recently used ${d} in `+(R-C)+`ms\n\tRemoved ${y} targets in `+(G-R)+`ms\n\tRemoved ${be} documents in `+(Z-G)+`ms\nTotal Duration: ${Z-de}ms`),lt.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:y,documentsRemoved:be})))}}class Kf{constructor(e,t){this.db=e,this.garbageCollector=new jg(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(d=>o+d))}Un(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,d)=>t(d))}addReference(e,t,o){return Ih(e,o)}removeReference(e,t,o){return Ih(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return Ih(e,t)}Gn(e,t){return function(o,d){let y=!1;return Ch(o).tt(C=>Dh(o,C,d).next(R=>(R&&(y=!0),lt.resolve(!R)))).next(()=>y)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let y=0;return this.Kn(e,(C,R)=>{if(R<=t){const G=this.Gn(e,C).next(Z=>{if(!Z)return y++,o.getEntry(e,C).next(()=>(o.removeEntry(C,Sn.min()),zu(e).delete([0,Ya(C.path)])))});d.push(G)}}).next(()=>lt.waitFor(d)).next(()=>o.apply(e)).next(()=>y)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return Ih(e,t)}Kn(e,t){const o=zu(e);let d,y=co.at;return o.Z({index:"documentTargetsIndex"},([C,R],{path:G,sequenceNumber:Z})=>{0===C?(y!==co.at&&t(new Kt(Ll(d)),y),y=Z,d=G):y=co.at}).next(()=>{y!==co.at&&t(new Kt(Ll(d)),y)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ih(i,e){return zu(i).put((o=i.currentSequenceNumber,{targetId:0,path:Ya(e.path),sequenceNumber:o}));var o}class Hg{constructor(){this.changes=new xs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ri.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?lt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $g{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Yu(e).put(o)}removeEntry(e,t,o){return Yu(e).delete(function(d,y){const C=d.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],yh(y),C[C.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=ri.newInvalidDocument(t);return Yu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Td(t))},(d,y)=>{o=this.jn(t,y)}).next(()=>o)}Wn(e,t){let o={size:0,document:ri.newInvalidDocument(t)};return Yu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Td(t))},(d,y)=>{o={document:this.jn(t,y),size:Gf(y)}}).next(()=>o)}getEntries(e,t){let o=Br();return this.zn(e,t,(d,y)=>{const C=this.jn(d,y);o=o.insert(d,C)}).next(()=>o)}Hn(e,t){let o=Br(),d=new yi(Kt.comparator);return this.zn(e,t,(y,C)=>{const R=this.jn(y,C);o=o.insert(y,R),d=d.insert(y,Gf(C))}).next(()=>({documents:o,Jn:d}))}zn(e,t,o){if(t.isEmpty())return lt.resolve();let d=new ci(Sd);t.forEach(G=>d=d.add(G));const y=IDBKeyRange.bound(Td(d.first()),Td(d.last())),C=d.getIterator();let R=C.getNext();return Yu(e).Z({index:"documentKeyIndex",range:y},(G,Z,de)=>{const be=Kt.fromSegments([...Z.prefixPath,Z.collectionGroup,Z.documentId]);for(;R&&Sd(R,be)<0;)o(R,null),R=C.getNext();R&&R.isEqual(be)&&(o(R,Z),R=C.hasNext()?C.getNext():null),R?de.j(Td(R)):de.done()}).next(()=>{for(;R;)o(R,null),R=C.hasNext()?C.getNext():null})}getDocumentsMatchingQuery(e,t,o,d){const y=t.path,C=[y.popLast().toArray(),y.lastSegment(),yh(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],R=[y.popLast().toArray(),y.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yu(e).W(IDBKeyRange.bound(C,R,!0)).next(G=>{let Z=Br();for(const de of G){const be=this.jn(Kt.fromSegments(de.prefixPath.concat(de.collectionGroup,de.documentId)),de);be.isFoundDocument()&&(Do(t,be)||d.has(be.key))&&(Z=Z.insert(be.key,be))}return Z})}getAllFromCollectionGroup(e,t,o,d){let y=Br();const C=Cy(t,o),R=Cy(t,ss.max());return Yu(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,R,!0)},(G,Z,de)=>{const be=this.jn(Kt.fromSegments(Z.prefixPath.concat(Z.collectionGroup,Z.documentId)),Z);y=y.insert(be.key,be),y.size===d&&de.done()}).next(()=>y)}newChangeBuffer(e){return new Ic(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Yf(e).get("remoteDocumentGlobalKey").next(t=>(en(!!t),t))}Qn(e,t){return Yf(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function my(i,e){let t;if(e.document)t=function Of(i,e,t){const o=Tl(i,e.name),d=Js(e.updateTime),y=e.createTime?Js(e.createTime):Sn.min(),C=new ho({mapValue:{fields:e.fields}}),R=ri.newFoundDocument(o,d,y,C);return t&&R.setHasCommittedMutations(),t?R.setHasCommittedMutations():R}(i.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Kt.fromSegments(e.noDocument.path),d=_c(e.noDocument.readTime);t=ri.newNoDocument(o,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ln();{const o=Kt.fromSegments(e.unknownDocument.path),d=_c(e.unknownDocument.version);t=ri.newUnknownDocument(o,d)}}return e.readTime&&t.setReadTime(function(o){const d=new Kr(o[0],o[1]);return Sn.fromTimestamp(d)}(e.readTime)),t}(this.yt,t);if(!o.isNoDocument()||!o.version.isEqual(Sn.min()))return o}return ri.newInvalidDocument(e)}}function zf(i){return new $g(i)}class Ic extends Hg{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new xs(o=>o.toString(),(o,d)=>o.isEqual(d))}applyChanges(e){const t=[];let o=0,d=new ci((y,C)=>Xn(y.canonicalString(),C.canonicalString()));return this.changes.forEach((y,C)=>{const R=this.Xn.get(y);if(t.push(this.Yn.removeEntry(e,y,R.readTime)),C.isValidDocument()){const G=Mg(this.Yn.yt,C);d=d.add(y.path.popLast()),o+=Gf(G)-R.size,t.push(this.Yn.addEntry(e,y,G))}else if(o-=R.size,this.trackRemovals){const G=Mg(this.Yn.yt,C.convertToNoDocument(Sn.min()));t.push(this.Yn.addEntry(e,y,G))}}),d.forEach(y=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,y))}),t.push(this.Yn.updateMetadata(e,o)),lt.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:d})=>(d.forEach((y,C)=>{this.Xn.set(y,{size:C,readTime:o.get(y).readTime})}),o))}}function Yf(i){return ls(i,"remoteDocumentGlobal")}function Yu(i){return ls(i,"remoteDocumentsV14")}function Td(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Cy(i,e){const t=e.documentKey.path.toArray();return[i,yh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Sd(i,e){const t=i.path.toArray(),o=e.path.toArray();let d=0;for(let y=0;y<t.length-2&&y<o.length-2;++y)if(d=Xn(t[y],o[y]),d)return d;return d=Xn(t.length,o.length),d||(d=Xn(t[t.length-2],o[o.length-2]),d||Xn(t[t.length-1],o[o.length-1]))}class Iy{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Qf{constructor(e,t,o,d){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=d}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(d=>(o=d,this.remoteDocumentCache.getEntry(e,t))).next(d=>(null!==o&&ie(o.mutation,d,js.empty(),Kr.now()),d))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,kt()).next(()=>o))}getLocalViewOfDocuments(e,t,o=kt()){const d=Zs();return this.populateOverlays(e,d,t).next(()=>this.computeViews(e,t,d,o).next(y=>{let C=za();return y.forEach((R,G)=>{C=C.insert(R,G.overlayedDocument)}),C}))}getOverlayedDocuments(e,t){const o=Zs();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,kt()))}populateOverlays(e,t,o){const d=[];return o.forEach(y=>{t.has(y)||d.push(y)}),this.documentOverlayCache.getOverlays(e,d).next(y=>{y.forEach((C,R)=>{t.set(C,R)})})}computeViews(e,t,o,d){let y=Br();const C=Nl(),R=Nl();return t.forEach((G,Z)=>{const de=o.get(Z.key);d.has(Z.key)&&(void 0===de||de.mutation instanceof Et)?y=y.insert(Z.key,Z):void 0!==de?(C.set(Z.key,de.mutation.getFieldMask()),ie(de.mutation,Z,de.mutation.getFieldMask(),Kr.now())):C.set(Z.key,js.empty())}),this.recalculateAndSaveOverlays(e,y).next(G=>(G.forEach((Z,de)=>C.set(Z,de)),t.forEach((Z,de)=>{var be;return R.set(Z,new Iy(de,null!==(be=C.get(Z))&&void 0!==be?be:null))}),R))}recalculateAndSaveOverlays(e,t){const o=Nl();let d=new yi((C,R)=>C-R),y=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(C=>{for(const R of C)R.keys().forEach(G=>{const Z=t.get(G);if(null===Z)return;let de=o.get(G)||js.empty();de=R.applyToLocalView(Z,de),o.set(G,de);const be=(d.get(R.batchId)||kt()).add(G);d=d.insert(R.batchId,be)})}).next(()=>{const C=[],R=d.getReverseIterator();for(;R.hasNext();){const G=R.getNext(),Z=G.key,de=G.value,be=Zl();de.forEach(rt=>{if(!y.has(rt)){const Ot=S(t.get(rt),o.get(rt));null!==Ot&&be.set(rt,Ot),y=y.add(rt)}}),C.push(this.documentOverlayCache.saveOverlays(e,Z,be))}return lt.waitFor(C)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return Kt.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):_l(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var d}getNextDocuments(e,t,o,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,d).next(y=>{const C=d-y.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,d-y.size):lt.resolve(Zs());let R=-1,G=y;return C.next(Z=>lt.forEach(Z,(de,be)=>(R<be.largestBatchId&&(R=be.largestBatchId),y.get(de)?lt.resolve():this.remoteDocumentCache.getEntry(e,de).next(rt=>{G=G.insert(de,rt)}))).next(()=>this.populateOverlays(e,Z,y)).next(()=>this.computeViews(e,G,Z,kt())).next(de=>({batchId:R,changes:Sa(de)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Kt(t)).next(o=>{let d=za();return o.isFoundDocument()&&(d=d.insert(o.key,o)),d})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const d=t.collectionGroup;let y=za();return this.indexManager.getCollectionParents(e,d).next(C=>lt.forEach(C,R=>{const G=(Z=t,de=R.child(d),new vs(de,null,Z.explicitOrderBy.slice(),Z.filters.slice(),Z.limit,Z.limitType,Z.startAt,Z.endAt));var Z,de;return this.getDocumentsMatchingCollectionQuery(e,G,o).next(Z=>{Z.forEach((de,be)=>{y=y.insert(de,be)})})}).next(()=>y))}getDocumentsMatchingCollectionQuery(e,t,o){let d;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next(y=>(d=y,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,d))).next(y=>{d.forEach((R,G)=>{const Z=G.getKey();null===y.get(Z)&&(y=y.insert(Z,ri.newInvalidDocument(Z)))});let C=za();return y.forEach((R,G)=>{const Z=d.get(R);void 0!==Z&&ie(Z.mutation,G,js.empty(),Kr.now()),Do(t,G)&&(C=C.insert(R,G))}),C})}}class Gg{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return lt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:Js(o.createTime)}),lt.resolve()}getNamedQuery(e,t){return lt.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:Lf(o.bundledQuery),readTime:Js(o.readTime)}),lt.resolve();var o}}class Wg{constructor(){this.overlays=new yi(Kt.comparator),this.es=new Map}getOverlay(e,t){return lt.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Zs();return lt.forEach(t,d=>this.getOverlay(e,d).next(y=>{null!==y&&o.set(d,y)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((d,y)=>{this.oe(e,t,y)}),lt.resolve()}removeOverlaysForBatchId(e,t,o){const d=this.es.get(o);return void 0!==d&&(d.forEach(y=>this.overlays=this.overlays.remove(y)),this.es.delete(o)),lt.resolve()}getOverlaysForCollection(e,t,o){const d=Zs(),y=t.length+1,C=new Kt(t.child("")),R=this.overlays.getIteratorFrom(C);for(;R.hasNext();){const G=R.getNext().value,Z=G.getKey();if(!t.isPrefixOf(Z.path))break;Z.path.length===y&&G.largestBatchId>o&&d.set(G.getKey(),G)}return lt.resolve(d)}getOverlaysForCollectionGroup(e,t,o,d){let y=new yi((Z,de)=>Z-de);const C=this.overlays.getIterator();for(;C.hasNext();){const Z=C.getNext().value;if(Z.getKey().getCollectionGroup()===t&&Z.largestBatchId>o){let de=y.get(Z.largestBatchId);null===de&&(de=Zs(),y=y.insert(Z.largestBatchId,de)),de.set(Z.getKey(),Z)}}const R=Zs(),G=y.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((Z,de)=>R.set(Z,de)),!(R.size()>=d)););return lt.resolve(R)}oe(e,t,o){const d=this.overlays.get(o.key);if(null!==d){const C=this.es.get(d.largestBatchId).delete(o.key);this.es.set(d.largestBatchId,C)}this.overlays=this.overlays.insert(o.key,new xf(t,o));let y=this.es.get(t);void 0===y&&(y=kt(),this.es.set(t,y)),this.es.set(t,y.add(o.key))}}class bd{constructor(){this.ns=new ci(Ao.ss),this.rs=new ci(Ao.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new Ao(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new Ao(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new Kt(new yr([])),o=new Ao(t,e),d=new Ao(t,e+1),y=[];return this.rs.forEachInRange([o,d],C=>{this.cs(C),y.push(C.key)}),y}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Kt(new yr([])),o=new Ao(t,e),d=new Ao(t,e+1);let y=kt();return this.rs.forEachInRange([o,d],C=>{y=y.add(C.key)}),y}containsKey(e){const t=new Ao(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Ao{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Kt.comparator(e.key,t.key)||Xn(e._s,t._s)}static os(e,t){return Xn(e._s,t._s)||Kt.comparator(e.key,t.key)}}class wh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new ci(Ao.ss)}checkEmpty(e){return lt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,d){const y=this.ws;this.ws++;const C=new yc(y,t,o,d);this.mutationQueue.push(C);for(const R of d)this.gs=this.gs.add(new Ao(R.key,y)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return lt.resolve(C)}lookupMutationBatch(e,t){return lt.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.ps(t+1),y=d<0?0:d;return lt.resolve(this.mutationQueue.length>y?this.mutationQueue[y]:null)}getHighestUnacknowledgedBatchId(){return lt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return lt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Ao(t,0),d=new Ao(t,Number.POSITIVE_INFINITY),y=[];return this.gs.forEachInRange([o,d],C=>{const R=this.ys(C._s);y.push(R)}),lt.resolve(y)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new ci(Xn);return t.forEach(d=>{const y=new Ao(d,0),C=new Ao(d,Number.POSITIVE_INFINITY);this.gs.forEachInRange([y,C],R=>{o=o.add(R._s)})}),lt.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1;let y=o;Kt.isDocumentKey(y)||(y=y.child(""));const C=new Ao(new Kt(y),0);let R=new ci(Xn);return this.gs.forEachWhile(G=>{const Z=G.key.path;return!!o.isPrefixOf(Z)&&(Z.length===d&&(R=R.add(G._s)),!0)},C),lt.resolve(this.Is(R))}Is(e){const t=[];return e.forEach(o=>{const d=this.ys(o);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){en(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return lt.forEach(t.mutations,d=>{const y=new Ao(d.key,t.batchId);return o=o.delete(y),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new Ao(t,0),d=this.gs.firstAfterOrEqual(o);return lt.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return lt.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Th{constructor(e){this.Es=e,this.docs=new yi(Kt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,d=this.docs.get(o),y=d?d.size:0,C=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:C}),this.size+=C-y,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return lt.resolve(o?o.document.mutableCopy():ri.newInvalidDocument(t))}getEntries(e,t){let o=Br();return t.forEach(d=>{const y=this.docs.get(d);o=o.insert(d,y?y.document.mutableCopy():ri.newInvalidDocument(d))}),lt.resolve(o)}getDocumentsMatchingQuery(e,t,o,d){let y=Br();const C=t.path,R=new Kt(C.child("")),G=this.docs.getIteratorFrom(R);for(;G.hasNext();){const{key:Z,value:{document:de}}=G.getNext();if(!C.isPrefixOf(Z.path))break;Z.path.length>C.length+1||Xa(Ja(de),o)<=0||(d.has(de.key)||Do(t,de))&&(y=y.insert(de.key,de.mutableCopy()))}return lt.resolve(y)}getAllFromCollectionGroup(e,t,o,d){ln()}As(e,t){return lt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new Kg(this)}getSize(e){return lt.resolve(this.size)}}class Kg extends Hg{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,d)=>{d.isValidDocument()?t.push(this.Yn.addEntry(e,d)):this.Yn.removeEntry(o)}),lt.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class qf{constructor(e){this.persistence=e,this.Rs=new xs(t=>sl(t),Eo),this.lastRemoteSnapshotVersion=Sn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new bd,this.targetCount=0,this.vs=Cc.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,d)=>t(d)),lt.resolve()}getLastRemoteSnapshotVersion(e){return lt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return lt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),lt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),lt.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Cc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,lt.resolve()}updateTargetData(e,t){return this.Dn(t),lt.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,lt.resolve()}removeTargets(e,t,o){let d=0;const y=[];return this.Rs.forEach((C,R)=>{R.sequenceNumber<=t&&null===o.get(R.targetId)&&(this.Rs.delete(C),y.push(this.removeMatchingKeysForTargetId(e,R.targetId)),d++)}),lt.waitFor(y).next(()=>d)}getTargetCount(e){return lt.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return lt.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),lt.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const d=this.persistence.referenceDelegate,y=[];return d&&t.forEach(C=>{y.push(d.markPotentiallyOrphaned(e,C))}),lt.waitFor(y)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),lt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return lt.resolve(o)}containsKey(e,t){return lt.resolve(this.Ps.containsKey(t))}}class Zf{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new co(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new qf(this),this.indexManager=new yu,this.remoteDocumentCache=new Th(o=>this.referenceDelegate.xs(o)),this.yt=new Ag(t),this.Ns=new Gg(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Wg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new wh(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){xt("MemoryPersistence","Starting transaction:",e);const d=new Jf(this.Ss.next());return this.referenceDelegate.ks(),o(d).next(y=>this.referenceDelegate.Os(d).next(()=>y)).toPromise().then(y=>(d.raiseOnCommittedEvent(),y))}Ms(e,t){return lt.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class Jf extends el{constructor(e){super(),this.currentSequenceNumber=e}}class Qu{constructor(e){this.persistence=e,this.Fs=new bd,this.$s=null}static Bs(e){return new Qu(e)}get Ls(){if(this.$s)return this.$s;throw ln()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),lt.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),lt.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),lt.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(d=>this.Ls.add(d.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(y=>this.Ls.add(y.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.Ls,o=>{const d=Kt.fromPath(o);return this.qs(e,d).next(y=>{y||t.removeEntry(d,Sn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return lt.or([()=>lt.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class wy{constructor(e){this.yt=e}$(e,t,o,d){const y=new Qs("createOrUpgrade",t);var R;o<1&&d>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gh,{unique:!0}),R.createObjectStore("documentMutations"),Xf(e),function(R){R.createObjectStore("remoteDocuments")}(e));let C=lt.resolve();return o<3&&d>=3&&(0!==o&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),Xf(e)),C=C.next(()=>function(R){const G=R.store("targetGlobal"),Z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Sn.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",Z)}(y))),o<4&&d>=4&&(0!==o&&(C=C.next(()=>function(R,G){return G.store("mutations").W().next(Z=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gh,{unique:!0});const de=G.store("mutations"),be=Z.map(rt=>de.put(rt));return lt.waitFor(be)})}(e,y))),C=C.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&d>=5&&(C=C.next(()=>this.Us(y))),o<6&&d>=6&&(C=C.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(y)))),o<7&&d>=7&&(C=C.next(()=>this.Gs(y))),o<8&&d>=8&&(C=C.next(()=>this.Qs(e,y))),o<9&&d>=9&&(C=C.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&d>=10&&(C=C.next(()=>this.js(y))),o<11&&d>=11&&(C=C.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&d>=12&&(C=C.next(()=>{!function(R){const G=R.createObjectStore("documentOverlays",{keyPath:Ne});G.createIndex("collectionPathOverlayIndex",_t,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",Dt,{unique:!1})}(e)})),o<13&&d>=13&&(C=C.next(()=>function(R){const G=R.createObjectStore("remoteDocumentsV14",{keyPath:Sg});G.createIndex("documentKeyIndex",bg),G.createIndex("collectionGroupIndex",m)}(e)).next(()=>this.Ws(e,y)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&d>=14&&(C=C.next(()=>this.zs(e,y))),o<15&&d>=15&&(C=C.next(()=>function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:V}).createIndex("sequenceNumberIndex",K,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:ce}).createIndex("documentKeyIndex",we,{unique:!1})}(e))),C}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,d)=>{t+=Gf(d)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Us(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(d=>lt.forEach(d,y=>{const C=IDBKeyRange.bound([y.userId,-1],[y.userId,y.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",C).next(R=>lt.forEach(R,G=>{en(G.userId===y.userId);const Z=vc(this.yt,G);return $f(e,y.userId,Z).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const y=[];return o.Z((C,R)=>{const G=new yr(C),Z=[0,Ya(G)];y.push(t.get(Z).next(de=>de?lt.resolve():t.put({targetId:0,path:Ya(G),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>lt.waitFor(y))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:M});const o=t.store("collectionParents"),d=new Cd,y=C=>{if(d.add(C)){const R=C.lastSegment(),G=C.popLast();return o.put({collectionId:R,parent:Ya(G)})}};return t.store("remoteDocuments").Z({X:!0},(C,R)=>{const G=new yr(C);return y(G.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([C,R,G],Z)=>{const de=Ll(R);return y(de.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,d)=>{const y=Dd(d),C=Nf(this.yt,y);return t.put(C)})}Ws(e,t){const o=t.store("remoteDocuments"),d=[];return o.Z((y,C)=>{const R=t.store("remoteDocumentsV14"),G=(Z=C,Z.document?new Kt(yr.fromString(Z.document.name).popFirst(5)):Z.noDocument?Kt.fromSegments(Z.noDocument.path):Z.unknownDocument?Kt.fromSegments(Z.unknownDocument.path):ln()).path.toArray();var Z;const de={prefixPath:G.slice(0,G.length-2),collectionGroup:G[G.length-2],documentId:G[G.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};d.push(R.put(de))}).next(()=>lt.waitFor(d))}zs(e,t){const o=t.store("mutations"),d=zf(this.yt),y=new Zf(Qu.Bs,this.yt.ie);return o.W().next(C=>{const R=new Map;return C.forEach(G=>{var Z;let de=null!==(Z=R.get(G.userId))&&void 0!==Z?Z:kt();vc(this.yt,G).keys().forEach(be=>de=de.add(be)),R.set(G.userId,de)}),lt.forEach(R,(G,Z)=>{const de=new Wr(Z),be=Gu.re(this.yt,de),rt=y.getIndexManager(de),Ot=xu.re(de,this.yt,rt,y.referenceDelegate);return new Qf(d,Ot,be,rt).recalculateAndSaveOverlaysForDocumentKeys(new Fl(t,co.at),G).next()})})}}function Xf(i){i.createObjectStore("targetDocuments",{keyPath:f}).createIndex("documentTargetsIndex",v,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",h,{unique:!0}),i.createObjectStore("targetGlobal")}const ep="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class tp{constructor(e,t,o,d,y,C,R,G,Z,de,be=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=y,this.window=C,this.document=R,this.Js=Z,this.Ys=de,this.Xs=be,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=rt=>Promise.resolve(),!tp.C())throw new Pt(ot.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kf(this,d),this.ii=t+"main",this.yt=new Ag(G),this.ri=new ys(this.ii,this.Xs,new wy(this.yt)),this.Cs=new Dy(this.referenceDelegate,this.yt),this.remoteDocumentCache=zf(this.yt),this.Ns=new Og,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===de&&Gi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pt(ot.FAILED_PRECONDITION,ep);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new co(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,g.Z)(function*(d){if(t.started)return e(d)});return function(d){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,g.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,g.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(os(e))return xt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return zc(e).get("owner").next(t=>lt.resolve(this.mi(t)))}gi(e){return Yc(e).delete(this.clientId)}yi(){var e=this;return(0,g.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const d=ls(o,"clientMetadata");return d.W().next(y=>{const C=e.Ii(y,18e5),R=y.filter(G=>-1===C.indexOf(G));return lt.forEach(R,G=>d.delete(G.clientId)).next(()=>R)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?lt.resolve(!0):zc(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Pt(ot.FAILED_PRECONDITION,ep);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yc(e).W().next(o=>void 0===this.Ii(o,5e3).find(d=>{if(this.clientId!==d.clientId){const C=!this.inForeground&&d.inForeground,R=this.networkEnabled===d.networkEnabled;if(!this.networkEnabled&&d.networkEnabled||C&&R)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&xt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,g.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new Fl(t,co.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Yc(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return xu.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ey(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Gu.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){xt("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",y=15===(C=this.Xs)?bo:14===C?ii:13===C?Yn:12===C?yn:11===C?Mt:void ln();var C;let R;return this.ri.runTransaction(e,d,y,G=>(R=new Fl(G,this.Ss?this.Ss.next():co.at),"readwrite-primary"===t?this.fi(R).next(Z=>!!Z||this.di(R)).next(Z=>{if(!Z)throw Gi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Pt(ot.FAILED_PRECONDITION,su);return o(R)}).next(Z=>this.wi(R).next(()=>Z)):this.Vi(R).next(()=>o(R)))).then(G=>(R.raiseOnCommittedEvent(),G))}Vi(e){return zc(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pt(ot.FAILED_PRECONDITION,ep)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zc(e).put("owner",t)}static C(){return ys.C()}_i(e){const t=zc(e);return t.get("owner").next(o=>this.mi(o)?(xt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):lt.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Gi(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Y.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return xt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Gi("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Gi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zc(i){return ls(i,"owner")}function Yc(i){return ls(i,"clientMetadata")}class zg{constructor(e,t,o,d){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=d}static Ci(e,t){let o=kt(),d=kt();for(const y of t.docChanges)switch(y.type){case 0:o=o.add(y.doc.key);break;case 1:d=d.add(y.doc.key)}return new zg(e,t.fromCache,o,d)}}class np{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,d){return this.ki(e,t).next(y=>y||this.Oi(e,t,d,o)).next(y=>y||this.Mi(e,t))}ki(e,t){if(Kl(t))return lt.resolve(null);let o=wi(t);return this.indexManager.getIndexType(e,o).next(d=>0===d?null:(null!==t.limit&&1===d&&(t=zl(t,null,"F"),o=wi(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(y=>{const C=kt(...y);return this.Ni.getDocuments(e,C).next(R=>this.indexManager.getMinOffset(e,o).next(G=>{const Z=this.Fi(t,R);return this.$i(t,Z,C,G.readTime)?this.ki(e,zl(t,null,"F")):this.Bi(e,Z,t,G)}))})))}Oi(e,t,o,d){return Kl(t)||d.isEqual(Sn.min())?this.Mi(e,t):this.Ni.getDocuments(e,o).next(y=>{const C=this.Fi(t,y);return this.$i(t,C,o,d)?this.Mi(e,t):(bi()<=B.in.DEBUG&&xt("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),ol(t)),this.Bi(e,C,t,function cl(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,d=Sn.fromTimestamp(1e9===o?new Kr(t+1,0):new Kr(t,o));return new ss(d,Kt.empty(),e)}(d,-1)))})}Fi(e,t){let o=new ci(hu(e));return t.forEach((d,y)=>{Do(e,y)&&(o=o.add(y))}),o}$i(e,t,o,d){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const y="F"===e.limitType?t.last():t.first();return!!y&&(y.hasPendingWrites||y.version.compareTo(d)>0)}Mi(e,t){return bi()<=B.in.DEBUG&&xt("QueryEngine","Using full collection scan to execute query:",ol(t)),this.Ni.getDocumentsMatchingQuery(e,t,ss.min())}Bi(e,t,o,d){return this.Ni.getDocumentsMatchingQuery(e,o,d).next(y=>(t.forEach(C=>{y=y.insert(C.key,C)}),y))}}class Ty{constructor(e,t,o,d){this.persistence=e,this.Li=t,this.yt=d,this.qi=new yi(Xn),this.Ui=new xs(y=>sl(y),Eo),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qf(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function rp(i,e,t,o){return new Ty(i,e,t,o)}function Yg(i,e){return ip.apply(this,arguments)}function ip(){return ip=(0,g.Z)(function*(i,e){const t=Zt(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let d;return t.mutationQueue.getAllMutationBatches(o).next(y=>(d=y,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(y=>{const C=[],R=[];let G=kt();for(const Z of d){C.push(Z.batchId);for(const de of Z.mutations)G=G.add(de.key)}for(const Z of y){R.push(Z.batchId);for(const de of Z.mutations)G=G.add(de.key)}return t.localDocuments.getDocuments(o,G).next(Z=>({ji:Z,removedBatchIds:C,addedBatchIds:R}))})})}),ip.apply(this,arguments)}function eu(i,e){const t=Zt(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const d=e.batch.keys(),y=t.Gi.newChangeBuffer({trackRemovals:!0});return function(C,R,G,Z){const de=G.batch,be=de.keys();let rt=lt.resolve();return be.forEach(Ot=>{rt=rt.next(()=>Z.getEntry(R,Ot)).next(jt=>{const gn=G.docVersions.get(Ot);en(null!==gn),jt.version.compareTo(gn)<0&&(de.applyToRemoteDocument(jt,G),jt.isValidDocument()&&(jt.setReadTime(G.commitVersion),Z.addEntry(jt)))})}),rt.next(()=>C.mutationQueue.removeMutationBatch(R,de))}(t,o,e,y).next(()=>y.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,d,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(C){let R=kt();for(let G=0;G<C.mutationResults.length;++G)C.mutationResults[G].transformResults.length>0&&(R=R.add(C.batch.mutations[G].key));return R}(e))).next(()=>t.localDocuments.getDocuments(o,d))})}function Qg(i){const e=Zt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function qg(i,e){const t=Zt(i),o=e.snapshotVersion;let d=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",y=>{const C=t.Gi.newChangeBuffer({trackRemovals:!0});d=t.qi;const R=[];e.targetChanges.forEach((de,be)=>{const rt=d.get(be);if(!rt)return;R.push(t.Cs.removeMatchingKeys(y,de.removedDocuments,be).next(()=>t.Cs.addMatchingKeys(y,de.addedDocuments,be)));let Ot=rt.withSequenceNumber(y.currentSequenceNumber);var jt,gn,Qn;e.targetMismatches.has(be)?Ot=Ot.withResumeToken(zi.EMPTY_BYTE_STRING,Sn.min()).withLastLimboFreeSnapshotVersion(Sn.min()):de.resumeToken.approximateByteSize()>0&&(Ot=Ot.withResumeToken(de.resumeToken,o)),d=d.insert(be,Ot),gn=Ot,Qn=de,(0===(jt=rt).resumeToken.approximateByteSize()||gn.snapshotVersion.toMicroseconds()-jt.snapshotVersion.toMicroseconds()>=3e8||Qn.addedDocuments.size+Qn.modifiedDocuments.size+Qn.removedDocuments.size>0)&&R.push(t.Cs.updateTargetData(y,Ot))});let G=Br(),Z=kt();if(e.documentUpdates.forEach(de=>{e.resolvedLimboDocuments.has(de)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(y,de))}),R.push(function Zg(i,e,t){let o=kt(),d=kt();return t.forEach(y=>o=o.add(y)),e.getEntries(i,o).next(y=>{let C=Br();return t.forEach((R,G)=>{const Z=y.get(R);G.isFoundDocument()!==Z.isFoundDocument()&&(d=d.add(R)),G.isNoDocument()&&G.version.isEqual(Sn.min())?(e.removeEntry(R,G.readTime),C=C.insert(R,G)):!Z.isValidDocument()||G.version.compareTo(Z.version)>0||0===G.version.compareTo(Z.version)&&Z.hasPendingWrites?(e.addEntry(G),C=C.insert(R,G)):xt("LocalStore","Ignoring outdated watch update for ",R,". Current version:",Z.version," Watch version:",G.version)}),{Wi:C,zi:d}})}(y,C,e.documentUpdates).next(de=>{G=de.Wi,Z=de.zi})),!o.isEqual(Sn.min())){const de=t.Cs.getLastRemoteSnapshotVersion(y).next(be=>t.Cs.setTargetsMetadata(y,y.currentSequenceNumber,o));R.push(de)}return lt.waitFor(R).next(()=>C.apply(y)).next(()=>t.localDocuments.getLocalViewOfDocuments(y,G,Z)).next(()=>G)}).then(y=>(t.qi=d,y))}function Sy(i,e){const t=Zt(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Qc(i,e){const t=Zt(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let d;return t.Cs.getTargetData(o,e).next(y=>y?(d=y,lt.resolve(d)):t.Cs.allocateTargetId(o).next(C=>(d=new Pu(e,C,0,o.currentSequenceNumber),t.Cs.addTargetData(o,d).next(()=>d))))}).then(o=>{const d=t.qi.get(o.targetId);return(null===d||o.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.qi=t.qi.insert(o.targetId,o),t.Ui.set(e,o.targetId)),o})}function qc(i,e,t){return bh.apply(this,arguments)}function bh(){return bh=(0,g.Z)(function*(i,e,t){const o=Zt(i),d=o.qi.get(e),y=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",y,C=>o.persistence.referenceDelegate.removeTarget(C,d)))}catch(C){if(!os(C))throw C;xt("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}o.qi=o.qi.remove(e),o.Ui.delete(d.target)}),bh.apply(this,arguments)}function Ah(i,e,t){const o=Zt(i);let d=Sn.min(),y=kt();return o.persistence.runTransaction("Execute query","readonly",C=>function(R,G,Z){const de=Zt(R),be=de.Ui.get(Z);return void 0!==be?lt.resolve(de.qi.get(be)):de.Cs.getTargetData(G,Z)}(o,C,wi(e)).next(R=>{if(R)return d=R.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(C,R.targetId).next(G=>{y=G})}).next(()=>o.Li.getDocumentsMatchingQuery(C,e,t?d:Sn.min(),t?y:kt())).next(R=>(function Tr(i,e,t){let o=i.Ki.get(e)||Sn.min();t.forEach((d,y)=>{y.readTime.compareTo(o)>0&&(o=y.readTime)}),i.Ki.set(e,o)}(o,function Ql(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}(e),R),{documents:R,Hi:y})))}class Ph{constructor(){this.activeTargetIds=Hn()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qu{constructor(){this.Lr=new Ph,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,o){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Ph,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class by{Ur(e){}shutdown(){}}class xh{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){xt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){xt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const lp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ay{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class pv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,o,d,y){const C=this.ho(e,t);xt("RestConnection","Sending: ",C,o);const R={};return this.lo(R,d,y),this.fo(e,C,R,o).then(G=>(xt("RestConnection","Received: ",G),G),G=>{throw wo("RestConnection",`${e} failed with error: `,G,"url: ",C,"request:",o),G})}_o(e,t,o,d,y,C){return this.ao(e,t,o,d,y)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,y)=>e[y]=d),o&&o.headers.forEach((d,y)=>e[y]=d)}ho(e,t){return`${this.oo}/v1/${t}:${lp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,d){return new Promise((y,C)=>{const R=new Ii;R.setWithCredentials(!0),R.listenOnce(bn.COMPLETE,()=>{try{switch(R.getLastErrorCode()){case Mr.NO_ERROR:const Z=R.getResponseJson();xt("Connection","XHR received:",JSON.stringify(Z)),y(Z);break;case Mr.TIMEOUT:xt("Connection",'RPC "'+e+'" timed out'),C(new Pt(ot.DEADLINE_EXCEEDED,"Request time out"));break;case Mr.HTTP_ERROR:const de=R.getStatus();if(xt("Connection",'RPC "'+e+'" failed with status:',de,"response text:",R.getResponseText()),de>0){let be=R.getResponseJson();Array.isArray(be)&&(be=be[0]);const rt=null==be?void 0:be.error;if(rt&&rt.status&&rt.message){const Ot=function(jt){const gn=jt.toLowerCase().replace(/_/g,"-");return Object.values(ot).indexOf(gn)>=0?gn:ot.UNKNOWN}(rt.status);C(new Pt(Ot,rt.message))}else C(new Pt(ot.UNKNOWN,"Server responded with status "+R.getStatus()))}else C(new Pt(ot.UNAVAILABLE,"Connection failed."));break;default:ln()}}finally{xt("Connection",'RPC "'+e+'" completed.')}});const G=JSON.stringify(d);R.send(t,"POST",G,o,15)})}wo(e,t,o){const d=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],y=ft(),C=Jt(),R={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(R.xmlHttpFactory=new Ci({})),this.lo(R.initMessageHeaders,t,o),R.encodeInitMessageHeaders=!0;const G=d.join("");xt("Connection","Creating WebChannel: "+G,R);const Z=y.createWebChannel(G,R);let de=!1,be=!1;const rt=new Ay({Hr:jt=>{be?xt("Connection","Not sending because WebChannel is closed:",jt):(de||(xt("Connection","Opening WebChannel transport."),Z.open(),de=!0),xt("Connection","WebChannel sending:",jt),Z.send(jt))},Jr:()=>Z.close()}),Ot=(jt,gn,Qn)=>{jt.listen(gn,us=>{try{Qn(us)}catch(Ns){setTimeout(()=>{throw Ns},0)}})};return Ot(Z,br.EventType.OPEN,()=>{be||xt("Connection","WebChannel transport opened.")}),Ot(Z,br.EventType.CLOSE,()=>{be||(be=!0,xt("Connection","WebChannel transport closed"),rt.io())}),Ot(Z,br.EventType.ERROR,jt=>{be||(be=!0,wo("Connection","WebChannel transport errored:",jt),rt.io(new Pt(ot.UNAVAILABLE,"The operation could not be completed")))}),Ot(Z,br.EventType.MESSAGE,jt=>{var gn;if(!be){const Qn=jt.data[0];en(!!Qn);const us=Qn,Ns=us.error||(null===(gn=us[0])||void 0===gn?void 0:gn.error);if(Ns){xt("Connection","WebChannel received error:",Ns);const ji=Ns.status;let Oo=function(Ni){const Po=Gn[Ni];if(void 0!==Po)return di(Po)}(ji),es=Ns.message;void 0===Oo&&(Oo=ot.INTERNAL,es="Unknown error status: "+ji+" with message "+Ns.message),be=!0,rt.io(new Pt(Oo,es)),Z.close()}else xt("Connection","WebChannel received:",Qn),rt.ro(Qn)}}),Ot(C,pr.STAT_EVENT,jt=>{jt.stat===ur.PROXY?xt("Connection","Detected buffering proxy"):jt.stat===ur.NOPROXY&&xt("Connection","Detected no buffering proxy")}),setTimeout(()=>{rt.so()},0),rt}}function up(){return"undefined"!=typeof document?document:null}function Od(i){return new ju(i,!0)}class Nh{constructor(e,t,o=1e3,d=1.5,y=6e4){this.Hs=e,this.timerId=t,this.mo=o,this.yo=d,this.po=y,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),d=Math.max(0,t-o);d>0&&xt("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,d,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Oy{constructor(e,t,o,d,y,C,R,G){this.Hs=e,this.vo=o,this.Vo=d,this.connection=y,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=R,this.listener=G,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Nh(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,g.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,g.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var o=this;return(0,g.Z)(function*(){o.Lo(),o.qo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():t&&t.code===ot.RESOURCE_EXHAUSTED?(Gi(t.toString()),Gi("Using maximum backoff delay to prevent overloading the backend."),o.xo.Ao()):t&&t.code===ot.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Uo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,d])=>{this.So===t&&this.Go(o,d)},o=>{e(()=>{const d=new Pt(ot.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(d)})})}Go(e,t){const o=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(d=>{o(()=>this.Qo(d))}),this.stream.onMessage(d=>{o(()=>this.onMessage(d))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,g.Z)(function*(){e.state=0,e.start()}))}Qo(e){return xt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(xt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Py extends Oy{constructor(e,t,o,d,y,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,d,C),this.yt=y}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function hc(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:ln(),d=e.targetChange.targetIds||[],y=function(G,Z){return G.wt?(en(void 0===Z||"string"==typeof Z),zi.fromBase64String(Z||"")):(en(void 0===Z||Z instanceof Uint8Array),zi.fromUint8Array(Z||new Uint8Array))}(i,e.targetChange.resumeToken),C=e.targetChange.cause,R=C&&function(G){const Z=void 0===G.code?ot.UNKNOWN:di(G.code);return new Pt(Z,G.message||"")}(C);t=new Il(o,d,y,R||null)}else if("documentChange"in e){const o=e.documentChange,d=Tl(i,o.document.name),y=Js(o.document.updateTime),C=o.document.createTime?Js(o.document.createTime):Sn.min(),R=new ho({mapValue:{fields:o.document.fields}}),G=ri.newFoundDocument(d,y,C,R);t=new Go(o.targetIds||[],o.removedTargetIds||[],G.key,G)}else if("documentDelete"in e){const o=e.documentDelete,d=Tl(i,o.document),y=o.readTime?Js(o.readTime):Sn.min(),C=ri.newNoDocument(d,y);t=new Go([],o.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const o=e.documentRemove,d=Tl(i,o.document);t=new Go([],o.removedTargetIds||[],d,null)}else{if(!("filter"in e))return ln();{const o=e.filter,y=new Ir(o.count||0);t=new Wo(o.targetId,y)}}var G;return t}(this.yt,e),o=function(d){if(!("targetChange"in d))return Sn.min();const y=d.targetChange;return y.targetIds&&y.targetIds.length?Sn.min():y.readTime?Js(y.readTime):Sn.min()}(e);return this.listener.Wo(t,o)}zo(e){const t={};t.database=$u(this.yt),t.addTarget=function(d,y){let C;const R=y.target;return C=Ho(R)?{documents:_d(d,R)}:{query:fc(d,R)},C.targetId=y.targetId,y.resumeToken.approximateByteSize()>0?C.resumeToken=oh(d,y.resumeToken):y.snapshotVersion.compareTo(Sn.min())>0&&(C.readTime=bu(d,y.snapshotVersion.toTimestamp())),C}(this.yt,e);const o=function ch(i,e){const t=function(o,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ln()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Bo(t)}Ho(e){const t={};t.database=$u(this.yt),t.removeTarget=e,this.Bo(t)}}class Zc extends Oy{constructor(e,t,o,d,y,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,d,C),this.yt=y,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(en(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function yd(i,e){return i&&i.length>0?(en(void 0!==e),i.map(t=>function(o,d){let y=Js(o.updateTime?o.updateTime:d);return y.isEqual(Sn.min())&&(y=Js(d)),new l(y,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Js(e.commitTime);return this.listener.Zo(o,t)}return en(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=$u(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Bc(this.yt,o))};this.Bo(t)}}class Ry extends class{}{constructor(e,t,o,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.yt=d,this.nu=!1}su(){if(this.nu)throw new Pt(ot.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,y])=>this.connection.ao(e,t,o,d,y)).catch(d=>{throw"FirebaseError"===d.name?(d.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Pt(ot.UNKNOWN,d.toString())})}_o(e,t,o,d){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([y,C])=>this.connection._o(e,t,o,y,C,d)).catch(y=>{throw"FirebaseError"===y.name?(y.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),y):new Pt(ot.UNKNOWN,y.toString())})}terminate(){this.nu=!0}}class xy{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Gi(t),this.ou=!1):xt("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class sm{constructor(e,t,o,d,y){var C=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=y,this.mu.Ur(R=>{o.enqueueAndForget((0,g.Z)(function*(){var G;Zu(C)&&(xt("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,g.Z)(function*(Z){const de=Zt(Z);de._u.add(4),yield Xc(de),de.gu.set("Unknown"),de._u.delete(4),yield Pd(de)}),function(Z){return G.apply(this,arguments)})(C))}))}),this.gu=new xy(o,d)}}function Pd(i){return cp.apply(this,arguments)}function cp(){return cp=(0,g.Z)(function*(i){if(Zu(i))for(const e of i.wu)yield e(!0)}),cp.apply(this,arguments)}function Xc(i){return dp.apply(this,arguments)}function dp(){return dp=(0,g.Z)(function*(i){for(const e of i.wu)yield e(!1)}),dp.apply(this,arguments)}function Lh(i,e){const t=Zt(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Rd(t)?Fh(t):wc(t).ko()&&hp(t,e))}function ed(i,e){const t=Zt(i),o=wc(t);t.du.delete(e),o.ko()&&fp(t,e),0===t.du.size&&(o.ko()?o.Fo():Zu(t)&&t.gu.set("Unknown"))}function hp(i,e){i.yu.Ot(e.targetId),wc(i).zo(e)}function fp(i,e){i.yu.Ot(e),wc(i).Ho(e)}function Fh(i){i.yu=new pd({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.du.get(e)||null}),wc(i).start(),i.gu.uu()}function Rd(i){return Zu(i)&&!wc(i).No()&&i.du.size>0}function Zu(i){return 0===Zt(i)._u.size}function kh(i){i.yu=void 0}function Ny(i){return om.apply(this,arguments)}function om(){return om=(0,g.Z)(function*(i){i.du.forEach((e,t)=>{hp(i,e)})}),om.apply(this,arguments)}function td(i,e){return Uh.apply(this,arguments)}function Uh(){return Uh=(0,g.Z)(function*(i,e){kh(i),Rd(i)?(i.gu.hu(e),Fh(i)):i.gu.set("Unknown")}),Uh.apply(this,arguments)}function am(i,e,t){return nd.apply(this,arguments)}function nd(){return nd=(0,g.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof Il&&2===e.state&&e.cause)try{yield(o=(0,g.Z)(function*(d,y){const C=y.cause;for(const R of y.targetIds)d.du.has(R)&&(yield d.remoteSyncer.rejectListen(R,C),d.du.delete(R),d.yu.removeTarget(R))}),function(d,y){return o.apply(this,arguments)})(i,e)}catch(o){xt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield ll(i,o)}else if(e instanceof Go?i.yu.Kt(e):e instanceof Wo?i.yu.Jt(e):i.yu.jt(e),!t.isEqual(Sn.min()))try{const o=yield Qg(i.localStore);t.compareTo(o)>=0&&(yield function(d,y){const C=d.yu.Zt(y);return C.targetChanges.forEach((R,G)=>{if(R.resumeToken.approximateByteSize()>0){const Z=d.du.get(G);Z&&d.du.set(G,Z.withResumeToken(R.resumeToken,y))}}),C.targetMismatches.forEach(R=>{const G=d.du.get(R);if(!G)return;d.du.set(R,G.withResumeToken(zi.EMPTY_BYTE_STRING,G.snapshotVersion)),fp(d,R);const Z=new Pu(G.target,R,1,G.sequenceNumber);hp(d,Z)}),d.remoteSyncer.applyRemoteEvent(C)}(i,t))}catch(o){xt("RemoteStore","Failed to raise snapshot:",o),yield ll(i,o)}var o}),nd.apply(this,arguments)}function ll(i,e,t){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,g.Z)(function*(i,e,t){if(!os(e))throw e;i._u.add(1),yield Xc(i),i.gu.set("Offline"),t||(t=()=>Qg(i.localStore)),i.asyncQueue.enqueueRetryable((0,g.Z)(function*(){xt("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield Pd(i)}))}),Vh.apply(this,arguments)}function lm(i,e){return e().catch(t=>ll(i,t,e))}function Ju(i){return tu.apply(this,arguments)}function tu(){return tu=(0,g.Z)(function*(i){const e=Zt(i),t=Tc(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;pp(e);)try{const d=yield Sy(e.localStore,o);if(null===d){0===e.fu.length&&t.Fo();break}o=d.batchId,um(e,d)}catch(d){yield ll(e,d)}Bh(e)&&Ly(e)}),tu.apply(this,arguments)}function pp(i){return Zu(i)&&i.fu.length<10}function um(i,e){i.fu.push(e);const t=Tc(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Bh(i){return Zu(i)&&!Tc(i).No()&&i.fu.length>0}function Ly(i){Tc(i).start()}function cm(i){return dm.apply(this,arguments)}function dm(){return dm=(0,g.Z)(function*(i){Tc(i).eu()}),dm.apply(this,arguments)}function jh(i){return rd.apply(this,arguments)}function rd(){return rd=(0,g.Z)(function*(i){const e=Tc(i);for(const t of i.fu)e.Xo(t.mutations)}),rd.apply(this,arguments)}function gp(i,e,t){return xd.apply(this,arguments)}function xd(){return xd=(0,g.Z)(function*(i,e,t){const o=i.fu.shift(),d=Ed.from(o,e,t);yield lm(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield Ju(i)}),xd.apply(this,arguments)}function mp(i,e){return hm.apply(this,arguments)}function hm(){return hm=(0,g.Z)(function*(i,e){var t;e&&Tc(i).Yo&&(yield(t=(0,g.Z)(function*(o,d){if(_i(y=d.code)&&y!==ot.ABORTED){const C=o.fu.shift();Tc(o).Mo(),yield lm(o,()=>o.remoteSyncer.rejectFailedWrite(C.batchId,d)),yield Ju(o)}var y}),function(o,d){return t.apply(this,arguments)})(i,e)),Bh(i)&&Ly(i)}),hm.apply(this,arguments)}function fm(i,e){return yp.apply(this,arguments)}function yp(){return yp=(0,g.Z)(function*(i,e){const t=Zt(i);t.asyncQueue.verifyOperationInProgress(),xt("RemoteStore","RemoteStore received new credentials");const o=Zu(t);t._u.add(3),yield Xc(t),o&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Pd(t)}),yp.apply(this,arguments)}function vp(){return vp=(0,g.Z)(function*(i,e){const t=Zt(i);e?(t._u.delete(2),yield Pd(t)):e||(t._u.add(2),yield Xc(t),t.gu.set("Unknown"))}),vp.apply(this,arguments)}function wc(i){return i.pu||(i.pu=function(e,t,o){const d=Zt(e);return d.su(),new Py(t,d.connection,d.authCredentials,d.appCheckCredentials,d.yt,o)}(i.datastore,i.asyncQueue,{Yr:Ny.bind(null,i),Zr:td.bind(null,i),Wo:am.bind(null,i)}),i.wu.push(function(){var e=(0,g.Z)(function*(t){t?(i.pu.Mo(),Rd(i)?Fh(i):i.gu.set("Unknown")):(yield i.pu.stop(),kh(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function Tc(i){return i.Iu||(i.Iu=function(e,t,o){const d=Zt(e);return d.su(),new Zc(t,d.connection,d.authCredentials,d.appCheckCredentials,d.yt,o)}(i.datastore,i.asyncQueue,{Yr:cm.bind(null,i),Zr:mp.bind(null,i),tu:jh.bind(null,i),Zo:gp.bind(null,i)}),i.wu.push(function(){var e=(0,g.Z)(function*(t){t?(i.Iu.Mo(),yield Ju(i)):(yield i.Iu.stop(),i.fu.length>0&&(xt("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class Ep{constructor(e,t,o,d,y){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=d,this.removalCallback=y,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,t,o,d,y){const C=Date.now()+o,R=new Ep(e,t,C,d,y);return R.start(o),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pt(ot.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nd(i,e){if(Gi("AsyncQueue",`${e}: ${i}`),os(i))return new Pt(ot.UNAVAILABLE,`${e}: ${i}`);throw i}class Sc{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Kt.comparator(t.key,o.key):(t,o)=>Kt.comparator(t.key,o.key),this.keyedMap=za(),this.sortedSet=new yi(this.comparator)}static emptySet(e){return new Sc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,y=o.getNext().key;if(!d.isEqual(y))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Sc;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class Dp{constructor(){this.Tu=new yi(Kt.comparator)}track(e){const t=e.doc.key,o=this.Tu.get(t);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(t):1===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ln():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,o)=>{e.push(o)}),e}}class id{constructor(e,t,o,d,y,C,R,G,Z){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=d,this.mutatedKeys=y,this.fromCache=C,this.syncStateChanged=R,this.excludesMetadataChanges=G,this.hasCachedResults=Z}static fromInitialDocuments(e,t,o,d,y){const C=[];return t.forEach(R=>{C.push({type:0,doc:R})}),new id(e,t,Sc.emptySet(t),C,o,d,!0,!1,y)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==o[d].type||!t[d].doc.isEqual(o[d].doc))return!1;return!0}}class Cp{constructor(){this.Au=void 0,this.listeners=[]}}class gv{constructor(){this.queries=new xs(e=>vl(e),Yl),this.onlineState="Unknown",this.Ru=new Set}}function pm(i,e){return gm.apply(this,arguments)}function gm(){return gm=(0,g.Z)(function*(i,e){const t=Zt(i),o=e.query;let d=!1,y=t.queries.get(o);if(y||(d=!0,y=new Cp),d)try{y.Au=yield t.onListen(o)}catch(C){const R=Nd(C,`Initialization of query '${ol(e.query)}' failed`);return void e.onError(R)}t.queries.set(o,y),y.listeners.push(e),e.bu(t.onlineState),y.Au&&e.Pu(y.Au)&&_m(t)}),gm.apply(this,arguments)}function mm(i,e){return ym.apply(this,arguments)}function ym(){return ym=(0,g.Z)(function*(i,e){const t=Zt(i),o=e.query;let d=!1;const y=t.queries.get(o);if(y){const C=y.listeners.indexOf(e);C>=0&&(y.listeners.splice(C,1),d=0===y.listeners.length)}if(d)return t.queries.delete(o),t.onUnlisten(o)}),ym.apply(this,arguments)}function mv(i,e){const t=Zt(i);let o=!1;for(const d of e){const C=t.queries.get(d.query);if(C){for(const R of C.listeners)R.Pu(d)&&(o=!0);C.Au=d}}o&&_m(t)}function yv(i,e,t){const o=Zt(i),d=o.queries.get(e);if(d)for(const y of d.listeners)y.onError(t);o.queries.delete(e)}function _m(i){i.Ru.forEach(e=>{e.next()})}class vm{constructor(e,t,o){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const d of e.docChanges)3!==d.type&&o.push(d);e=new id(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=id.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class wp{constructor(e){this.key=e}}class Hh{constructor(e){this.key=e}}class Tp{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=kt(),this.mutatedKeys=kt(),this.Gu=hu(e),this.Qu=new Sc(this.Gu)}get ju(){return this.qu}Wu(e,t){const o=t?t.zu:new Dp,d=t?t.Qu:this.Qu;let y=t?t.mutatedKeys:this.mutatedKeys,C=d,R=!1;const G="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,Z="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((de,be)=>{const rt=d.get(de),Ot=Do(this.query,be)?be:null,jt=!!rt&&this.mutatedKeys.has(rt.key),gn=!!Ot&&(Ot.hasLocalMutations||this.mutatedKeys.has(Ot.key)&&Ot.hasCommittedMutations);let Qn=!1;rt&&Ot?rt.data.isEqual(Ot.data)?jt!==gn&&(o.track({type:3,doc:Ot}),Qn=!0):this.Hu(rt,Ot)||(o.track({type:2,doc:Ot}),Qn=!0,(G&&this.Gu(Ot,G)>0||Z&&this.Gu(Ot,Z)<0)&&(R=!0)):!rt&&Ot?(o.track({type:0,doc:Ot}),Qn=!0):rt&&!Ot&&(o.track({type:1,doc:rt}),Qn=!0,(G||Z)&&(R=!0)),Qn&&(Ot?(C=C.add(Ot),y=gn?y.add(de):y.delete(de)):(C=C.delete(de),y=y.delete(de)))}),null!==this.query.limit)for(;C.size>this.query.limit;){const de="F"===this.query.limitType?C.last():C.first();C=C.delete(de.key),y=y.delete(de.key),o.track({type:1,doc:de})}return{Qu:C,zu:o,$i:R,mutatedKeys:y}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const d=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const y=e.zu.Eu();y.sort((Z,de)=>function(be,rt){const Ot=jt=>{switch(jt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ln()}};return Ot(be)-Ot(rt)}(Z.type,de.type)||this.Gu(Z.doc,de.doc)),this.Ju(o);const C=t?this.Yu():[],R=0===this.Ku.size&&this.current?1:0,G=R!==this.Uu;return this.Uu=R,0!==y.length||G?{snapshot:new id(this.query,e.Qu,d,y,e.mutatedKeys,0===R,G,!1,!!o&&o.resumeToken.approximateByteSize()>0),Xu:C}:{Xu:C}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Dp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=kt(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new Hh(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new wp(o))}),t}tc(e){this.qu=e.Hi,this.Ku=kt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return id.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class Sp{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class Fy{constructor(e){this.key=e,this.nc=!1}}class Xu{constructor(e,t,o,d,y,C){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=d,this.currentUser=y,this.maxConcurrentLimboResolutions=C,this.sc={},this.ic=new xs(R=>vl(R),Yl),this.rc=new Map,this.oc=new Set,this.uc=new yi(Kt.comparator),this.cc=new Map,this.ac=new bd,this.hc={},this.lc=new Map,this.fc=Cc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function Dm(i,e){return bp.apply(this,arguments)}function bp(){return bp=(0,g.Z)(function*(i,e){const t=jp(i);let o,d;const y=t.ic.get(e);if(y)o=y.targetId,t.sharedClientState.addLocalQueryTarget(o),d=y.view.ec();else{const C=yield Qc(t.localStore,wi(e));t.isPrimaryClient&&Lh(t.remoteStore,C);const R=t.sharedClientState.addLocalQueryTarget(C.targetId);o=C.targetId,d=yield Ap(t,e,o,"current"===R,C.resumeToken)}return d}),bp.apply(this,arguments)}function Ap(i,e,t,o,d){return $h.apply(this,arguments)}function $h(){return $h=(0,g.Z)(function*(i,e,t,o,d){i._c=(be,rt,Ot)=>{return(jt=(0,g.Z)(function*(gn,Qn,us,Ns){let ji=Qn.view.Wu(us);ji.$i&&(ji=yield Ah(gn.localStore,Qn.query,!1).then(({documents:Ni})=>Qn.view.Wu(Ni,ji)));const Oo=Ns&&Ns.targetChanges.get(Qn.targetId),es=Qn.view.applyChanges(ji,gn.isPrimaryClient,Oo);return qh(gn,Qn.targetId,es.Xu),es.snapshot}),function(gn,Qn,us,Ns){return jt.apply(this,arguments)})(i,be,rt,Ot);var jt};const y=yield Ah(i.localStore,e,!0),C=new Tp(e,y.Hi),R=C.Wu(y.documents),G=Ti.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,d),Z=C.applyChanges(R,i.isPrimaryClient,G);qh(i,t,Z.Xu);const de=new Sp(e,t,C);return i.ic.set(e,de),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),Z.snapshot}),$h.apply(this,arguments)}function ky(i,e){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,g.Z)(function*(i,e){const t=Zt(i),o=t.ic.get(e),d=t.rc.get(o.targetId);if(d.length>1)return t.rc.set(o.targetId,d.filter(y=>!Yl(y,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield qc(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),ed(t.remoteStore,o.targetId),bc(t,o.targetId)}).catch(uo))):(bc(t,o.targetId),yield qc(t.localStore,o.targetId,!0))}),Mp.apply(this,arguments)}function ec(){return ec=(0,g.Z)(function*(i,e,t){const o=Mm(i);try{const d=yield function(y,C){const R=Zt(y),G=Kr.now(),Z=C.reduce((rt,Ot)=>rt.add(Ot.key),kt());let de,be;return R.persistence.runTransaction("Locally write mutations","readwrite",rt=>{let Ot=Br(),jt=kt();return R.Gi.getEntries(rt,Z).next(gn=>{Ot=gn,Ot.forEach((Qn,us)=>{us.isValidDocument()||(jt=jt.add(Qn))})}).next(()=>R.localDocuments.getOverlayedDocuments(rt,Ot)).next(gn=>{de=gn;const Qn=[];for(const us of C){const Ns=fe(us,de.get(us.key).overlayedDocument);null!=Ns&&Qn.push(new Et(us.key,Ns,Cu(Ns.value.mapValue),a.exists(!0)))}return R.mutationQueue.addMutationBatch(rt,G,Qn,C)}).next(gn=>{be=gn;const Qn=gn.applyToLocalDocumentSet(de,jt);return R.documentOverlayCache.saveOverlays(rt,gn.batchId,Qn)})}).then(()=>({batchId:be.batchId,changes:Sa(de)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(d.batchId),function(y,C,R){let G=y.hc[y.currentUser.toKey()];G||(G=new yi(Xn)),G=G.insert(C,R),y.hc[y.currentUser.toKey()]=G}(o,d.batchId,t),yield po(o,d.changes),yield Ju(o.remoteStore)}catch(d){const y=Nd(d,"Failed to persist write");t.reject(y)}}),ec.apply(this,arguments)}function Wh(i,e){return tc.apply(this,arguments)}function tc(){return tc=(0,g.Z)(function*(i,e){const t=Zt(i);try{const o=yield qg(t.localStore,e);e.targetChanges.forEach((d,y)=>{const C=t.cc.get(y);C&&(en(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?C.nc=!0:d.modifiedDocuments.size>0?en(C.nc):d.removedDocuments.size>0&&(en(C.nc),C.nc=!1))}),yield po(t,o,e)}catch(o){yield uo(o)}}),tc.apply(this,arguments)}function Kh(i,e,t){const o=Zt(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const d=[];o.ic.forEach((y,C)=>{const R=C.view.bu(e);R.snapshot&&d.push(R.snapshot)}),function(y,C){const R=Zt(y);R.onlineState=C;let G=!1;R.queries.forEach((Z,de)=>{for(const be of de.listeners)be.bu(C)&&(G=!0)}),G&&_m(R)}(o.eventManager,e),d.length&&o.sc.Wo(d),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function zh(i,e,t){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,g.Z)(function*(i,e,t){const o=Zt(i);o.sharedClientState.updateQueryState(e,"rejected",t);const d=o.cc.get(e),y=d&&d.key;if(y){let C=new yi(Kt.comparator);C=C.insert(y,ri.newNoDocument(y,Sn.min()));const R=kt().add(y),G=new wr(Sn.min(),new Map,new ci(Xn),C,R);yield Wh(o,G),o.uc=o.uc.remove(y),o.cc.delete(e),Np(o)}else yield qc(o.localStore,e,!1).then(()=>bc(o,e,t)).catch(uo)}),Yh.apply(this,arguments)}function Cm(i,e){return Ld.apply(this,arguments)}function Ld(){return Ld=(0,g.Z)(function*(i,e){const t=Zt(i),o=e.batch.batchId;try{const d=yield eu(t.localStore,e);xp(t,o,null),Im(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield po(t,d)}catch(d){yield uo(d)}}),Ld.apply(this,arguments)}function Op(i,e,t){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,g.Z)(function*(i,e,t){const o=Zt(i);try{const d=yield function(y,C){const R=Zt(y);return R.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let Z;return R.mutationQueue.lookupMutationBatch(G,C).next(de=>(en(null!==de),Z=de.keys(),R.mutationQueue.removeMutationBatch(G,de))).next(()=>R.mutationQueue.performConsistencyCheck(G)).next(()=>R.documentOverlayCache.removeOverlaysForBatchId(G,Z,C)).next(()=>R.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,Z)).next(()=>R.localDocuments.getDocuments(G,Z))})}(o.localStore,e);xp(o,e,t),Im(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield po(o,d)}catch(d){yield uo(d)}}),Qh.apply(this,arguments)}function Im(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function xp(i,e,t){const o=Zt(i);let d=o.hc[o.currentUser.toKey()];if(d){const y=d.get(e);y&&(t?y.reject(t):y.resolve(),d=d.remove(e)),o.hc[o.currentUser.toKey()]=d}}function bc(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.rc.get(e))i.ic.delete(o),t&&i.sc.wc(o,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(o=>{i.ac.containsKey(o)||wm(i,o)})}function wm(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(ed(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),Np(i))}function qh(i,e,t){for(const o of t)o instanceof wp?(i.ac.addReference(o.key,e),Tm(i,o)):o instanceof Hh?(xt("SyncEngine","Document no longer in limbo: "+o.key),i.ac.removeReference(o.key,e),i.ac.containsKey(o.key)||wm(i,o.key)):ln()}function Tm(i,e){const t=e.key,o=t.path.canonicalString();i.uc.get(t)||i.oc.has(o)||(xt("SyncEngine","New document in limbo: "+t),i.oc.add(o),Np(i))}function Np(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new Kt(yr.fromString(e)),o=i.fc.next();i.cc.set(o,new Fy(t)),i.uc=i.uc.insert(t,o),Lh(i.remoteStore,new Pu(wi(ml(t.path)),o,2,co.at))}}function po(i,e,t){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,g.Z)(function*(i,e,t){const o=Zt(i),d=[],y=[],C=[];var R;o.ic.isEmpty()||(o.ic.forEach((R,G)=>{C.push(o._c(G,e,t).then(Z=>{if((Z||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(G.targetId,null!=Z&&Z.fromCache?"not-current":"current"),Z){d.push(Z);const de=zg.Ci(G.targetId,Z);y.push(de)}}))}),yield Promise.all(C),o.sc.Wo(d),yield(R=(0,g.Z)(function*(G,Z){const de=Zt(G);try{yield de.persistence.runTransaction("notifyLocalViewChanges","readwrite",be=>lt.forEach(Z,rt=>lt.forEach(rt.Si,Ot=>de.persistence.referenceDelegate.addReference(be,rt.targetId,Ot)).next(()=>lt.forEach(rt.Di,Ot=>de.persistence.referenceDelegate.removeReference(be,rt.targetId,Ot)))))}catch(be){if(!os(be))throw be;xt("LocalStore","Failed to update sequence numbers: "+be)}for(const be of Z){const rt=be.targetId;if(!be.fromCache){const Ot=de.qi.get(rt),gn=Ot.withLastLimboFreeSnapshotVersion(Ot.snapshotVersion);de.qi=de.qi.insert(rt,gn)}}}),function(G,Z){return R.apply(this,arguments)})(o.localStore,y))}),Zh.apply(this,arguments)}function Uy(i,e){return Sm.apply(this,arguments)}function Sm(){return Sm=(0,g.Z)(function*(i,e){const t=Zt(i);if(!t.currentUser.isEqual(e)){xt("SyncEngine","User change. New user:",e.toKey());const o=yield Yg(t.localStore,e);t.currentUser=e,(d=t).lc.forEach(C=>{C.forEach(R=>{R.reject(new Pt(ot.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.lc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield po(t,o.ji)}var d}),Sm.apply(this,arguments)}function Vy(i,e){const t=Zt(i),o=t.cc.get(e);if(o&&o.nc)return kt().add(o.key);{let d=kt();const y=t.rc.get(e);if(!y)return d;for(const C of y){const R=t.ic.get(C);d=d.unionWith(R.view.ju)}return d}}function jp(i){const e=Zt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zh.bind(null,e),e.sc.Wo=mv.bind(null,e.eventManager),e.sc.wc=yv.bind(null,e.eventManager),e}function Mm(i){const e=Zt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Cm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Op.bind(null,e),e}class Pm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,g.Z)(function*(){t.yt=Od(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return rp(this.persistence,new np,e.initialUser,this.yt)}yc(e){return new Zf(Qu.Bs,this.yt)}gc(e){return new qu}terminate(){var e=this;return(0,g.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Gy extends Pm{constructor(e,t,o){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,g.Z)(function*(){yield t().call(o,e),yield o.Ac.initialize(o,e),yield Mm(o.Ac.syncEngine),yield Ju(o.Ac.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return rp(this.persistence,new np,e.initialUser,this.yt)}Tc(e,t){return new Wf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const o=new au(t,this.persistence);return new tl(e.asyncQueue,o)}yc(e){const t=function Sh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Aa.withCacheSize(this.cacheSizeBytes):Aa.DEFAULT;return new tp(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,function My(){return"undefined"!=typeof window?window:null}(),up(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new qu}}class Fd{initialize(e,t){var o=this;return(0,g.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=d=>Kh(o.syncEngine,d,1),o.remoteStore.remoteSyncer.handleCredentialChange=Uy.bind(null,o.syncEngine),yield function _p(i,e){return vp.apply(this,arguments)}(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new gv}createDatastore(e){const t=Od(e.databaseInfo.databaseId),o=new pv(e.databaseInfo);return new Ry(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,d=e.asyncQueue,y=R=>Kh(this.syncEngine,R,0),C=xh.C()?new xh:new by,new sm(t,o,d,y,C);var t,o,d,y,C}createSyncEngine(e,t){return function(o,d,y,C,R,G,Z){const de=new Xu(o,d,y,C,R,G);return Z&&(de.dc=!0),de}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,g.Z)(function*(t){const o=Zt(t);xt("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield Xc(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Hp(i,e,t){if(!t)throw new Pt(ot.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function kd(i){if(!Kt.isDocumentKey(i))throw new Pt(ot.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function tf(i){if(Kt.isDocumentKey(i))throw new Pt(ot.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Ac(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":ln()}function vi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Pt(ot.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ac(i);throw new Pt(ot.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}const zy=new Map;class $p{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pt(ot.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pt(ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function Ky(i,e,t,o){if(!0===e&&!0===o)throw new Pt(ot.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sd{constructor(e,t,o,d){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $p({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pt(ot.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pt(ot.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $p(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Za;switch(t.type){case"gapi":return new so(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Pt(ot.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=zy.get(e);t&&(xt("ComponentProvider","Removing Datastore"),zy.delete(e),t.terminate())}(this),Promise.resolve()}}class Xs{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ko(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xs(this.firestore,e,this._key)}}class Mo{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Mo(this.firestore,e,this._query)}}class Ko extends Mo{constructor(e,t,o){super(e,t,ml(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xs(this.firestore,null,new Kt(e))}withConverter(e){return new Ko(this.firestore,e,this._path)}}function rf(i,e,...t){if(i=(0,Y.m9)(i),Hp("collection","path",e),i instanceof sd){const o=yr.fromString(e,...t);return tf(o),new Ko(i,null,o)}{if(!(i instanceof Xs||i instanceof Ko))throw new Pt(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(yr.fromString(e,...t));return tf(o),new Ko(i.firestore,null,o)}}function od(i,e,...t){if(i=(0,Y.m9)(i),1===arguments.length&&(e=mi.R()),Hp("doc","path",e),i instanceof sd){const o=yr.fromString(e,...t);return kd(o),new Xs(i,null,new Kt(o))}{if(!(i instanceof Xs||i instanceof Ko))throw new Pt(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(yr.fromString(e,...t));return kd(o),new Xs(i.firestore,i instanceof Ko?i.converter:null,new Kt(o))}}class af{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Gi("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Zy{constructor(e,t,o,d){var y=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=d,this.user=Wr.UNAUTHENTICATED,this.clientId=mi.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var C=(0,g.Z)(function*(R){xt("FirestoreClient","Received user=",R.uid),yield y.authCredentialListener(R),y.user=R});return function(R){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(o,C=>(xt("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,g.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pt(ot.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,g.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const d=Nd(o,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function xm(i,e){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,g.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),xt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var d=(0,g.Z)(function*(y){o.isEqual(y)||(yield Yg(e.localStore,y),o=y)});return function(y){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Kp.apply(this,arguments)}function zp(i,e){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,g.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Yp(i);xt("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(d=>fm(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,y)=>fm(e.remoteStore,y)),i.onlineComponents=e}),Ud.apply(this,arguments)}function Yp(i){return Vd.apply(this,arguments)}function Vd(){return Vd=(0,g.Z)(function*(i){return i.offlineComponents||(xt("FirestoreClient","Using default OfflineComponentProvider"),yield xm(i,new Pm)),i.offlineComponents}),Vd.apply(this,arguments)}function uf(i){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,g.Z)(function*(i){return i.onlineComponents||(xt("FirestoreClient","Using default OnlineComponentProvider"),yield zp(i,new Fd)),i.onlineComponents}),Qp.apply(this,arguments)}function Ul(i){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,g.Z)(function*(i){const e=yield uf(i),t=e.eventManager;return t.onListen=Dm.bind(null,e.syncEngine),t.onUnlisten=ky.bind(null,e.syncEngine),t}),Lm.apply(this,arguments)}class hf{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Nh(this,"async_queue_retry"),this.Wc=()=>{const t=up();t&&xt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=up();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=up();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new ti;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,g.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!os(t))throw t;xt("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(o=>{throw this.Kc=o,this.Gc=!1,Gi("INTERNAL UNHANDLED ERROR: ",function(y){let C=y.message||"";return y.stack&&(C=y.stack.includes(y.message)?y.stack:y.message+"\n"+y.stack),C}(o)),o}).then(o=>(this.Gc=!1,o))));return this.Bc=t,t}enqueueAfterDelay(e,t,o){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const d=Ep.createAndSchedule(this,e,t,o,y=>this.Yc(y));return this.Uc.push(d),d}zc(){this.Kc&&ln()}verifyOperationInProgress(){}Xc(){var e=this;return(0,g.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function ul(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const d of["next","error","complete"])if(d in o&&"function"==typeof o[d])return!0;return!1}(i)}class Bi extends sd{constructor(e,t,o,d){super(e,t,o,d),this.type="firestore",this._queue=new hf,this._persistenceKey=(null==d?void 0:d.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Oc(this),this._firestoreClient.terminate()}}function ad(i,e){const t="object"==typeof i?i:(0,I.Mq)(),o="string"==typeof i?i:e||"(default)",d=(0,I.qX)(t,"firestore").getImmediate({identifier:o});if(!d._initialized){const y=(0,Y.P0)("firestore");y&&function Rm(i,e,t,o={}){var d;const y=(i=vi(i,sd))._getSettings();if("firestore.googleapis.com"!==y.host&&y.host!==e&&wo("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},y),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let C,R;if("string"==typeof o.mockUserToken)C=o.mockUserToken,R=Wr.MOCK_USER;else{C=(0,Y.Sg)(o.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const G=o.mockUserToken.sub||o.mockUserToken.user_id;if(!G)throw new Pt(ot.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new Wr(G)}i._authCredentials=new Ri(new Vl(C,R))}}(d,...y)}return d}function Ts(i){return i._firestoreClient||Oc(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Oc(i){var e;const t=i._freezeSettings(),o=(y=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Du(i._databaseId,y,i._persistenceKey,(R=t).host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,R.useFetchStreams));var y,R;i._firestoreClient=new Zy(i._authCredentials,i._appCheckCredentials,i._queue,o)}function ld(i,e){!function Xp(i){if(i._initialized||i._terminated)throw new Pt(ot.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}(i=vi(i,Bi));const t=Ts(i),o=i._freezeSettings(),d=new Fd;return function Pc(i,e,t){const o=new ti;return i.asyncQueue.enqueue((0,g.Z)(function*(){try{yield xm(i,t),yield zp(i,e),o.resolve()}catch(d){const y=d;if(!("FirebaseError"===(C=y).name?C.code===ot.FAILED_PRECONDITION||C.code===ot.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&C instanceof DOMException)||22===C.code||20===C.code||11===C.code))throw y;wo("Error enabling offline persistence. Falling back to persistence disabled: "+y),o.reject(y)}var C})).then(()=>o.promise)}(t,d,new Gy(d,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}class nc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nc(zi.fromBase64String(e))}catch(t){throw new Pt(ot.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nc(zi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ud{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pt(ot.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kd{constructor(e){this._methodName=e}}class eg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pt(ot.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pt(ot.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xn(this._lat,e._lat)||Xn(this._long,e._long)}}const Fm=/^__.*__$/;class tg{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new Et(e,this.data,this.fieldMask,t,this.fieldTransforms):new ze(e,this.data,t,this.fieldTransforms)}}class ff{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new Et(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function km(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ln()}}class Rc{constructor(e,t,o,d,y,C){this.settings=e,this.databaseId=t,this.yt=o,this.ignoreUndefinedProperties=d,void 0===y&&this.na(),this.fieldTransforms=y||[],this.fieldMask=C||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Rc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ia({path:o,oa:!1});return d.ua(e),d}ca(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ia({path:o,oa:!1});return d.na(),d}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return qd(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(km(this.sa)&&Fm.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class pf{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=o||Od(e)}da(e,t,o,d=!1){return new Rc({sa:e,methodName:t,fa:o,path:Ai.emptyPath(),oa:!1,la:d},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function rc(i){const e=i._freezeSettings(),t=Od(i._databaseId);return new pf(i._databaseId,!!e.ignoreUndefinedProperties,t)}function ng(i,e,t,o,d,y={}){const C=i.da(y.merge||y.mergeFields?2:0,e,t,d);mf("Data must be an object, but it was:",C,o);const R=og(o,C);let G,Z;if(y.merge)G=new js(C.fieldMask),Z=C.fieldTransforms;else if(y.mergeFields){const de=[];for(const be of y.mergeFields){const rt=yf(e,be,t);if(!C.contains(rt))throw new Pt(ot.INVALID_ARGUMENT,`Field '${rt}' is specified in your field mask but missing from your input data.`);_f(de,rt)||de.push(rt)}G=new js(de),Z=C.fieldTransforms.filter(be=>G.covers(be.field))}else G=null,Z=C.fieldTransforms;return new tg(new ho(R),G,Z)}class ic extends Kd{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ic}}class Yd extends Kd{_toFieldTransform(e){return new ql(e.path,new Dl)}isEqual(e){return e instanceof Yd}}function sg(i,e,t,o=!1){return xc(t,i.da(o?4:3,e))}function xc(i,e){if(ag(i=(0,Y.m9)(i)))return mf("Unsupported field value:",e,i),og(i,e);if(i instanceof Kd)return function(t,o){if(!km(o.sa))throw o.ha(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ha(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(o);d&&o.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,o){const d=[];let y=0;for(const C of t){let R=xc(C,o.aa(y));null==R&&(R={nullValue:"NULL_VALUE"}),d.push(R),y++}return{arrayValue:{values:d}}}(i,e)}return function(t,o){if(null===(t=(0,Y.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Uu(o.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=Kr.fromDate(t);return{timestampValue:bu(o.yt,d)}}if(t instanceof Kr){const d=new Kr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:bu(o.yt,d)}}if(t instanceof eg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof nc)return{bytesValue:oh(o.yt,t._byteString)};if(t instanceof Xs){const d=o.databaseId,y=t.firestore._databaseId;if(!y.isEqual(d))throw o.ha(`Document reference is for database ${y.projectId}/${y.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:cc(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ha(`Unsupported field value: ${Ac(t)}`)}(i,e)}function og(i,e){const t={};return Da(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ua(i,(o,d)=>{const y=xc(d,e.ra(o));null!=y&&(t[o]=y)}),{mapValue:{fields:t}}}function ag(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Kr||i instanceof eg||i instanceof nc||i instanceof Xs||i instanceof Kd)}function mf(i,e,t){if(!ag(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Ac(t);throw e.ha("an object"===o?i+" a custom object":i+" "+o)}var o}function yf(i,e,t){if((e=(0,Y.m9)(e))instanceof ud)return e._internalPath;if("string"==typeof e)return Qd(i,e);throw qd("Field path arguments must be of type string or ",i,!1,void 0,t)}const l_=new RegExp("[~\\*/\\[\\]]");function Qd(i,e,t){if(e.search(l_)>=0)throw qd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new ud(...e.split("."))._internalPath}catch(o){throw qd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function qd(i,e,t,o,d){const y=o&&!o.isEmpty(),C=void 0!==d;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let G="";return(y||C)&&(G+=" (found",y&&(G+=` in field ${o}`),C&&(G+=` in document ${d}`),G+=")"),new Pt(ot.INVALID_ARGUMENT,R+i+G)}function _f(i,e){return i.some(t=>t.isEqual(e))}class cd{constructor(e,t,o,d,y){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=d,this._converter=y}get id(){return this._key.path.lastSegment()}get ref(){return new Xs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Bm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Bm extends cd{data(){return super.data()}}function Zd(i,e){return"string"==typeof e?Qd(i,e):e instanceof ud?e._internalPath:e._delegate._internalPath}function lg(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Pt(ot.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vf{}class dd extends vf{}function jm(i,e,...t){let o=[];e instanceof vf&&o.push(e),o=o.concat(t),function(d){const y=d.filter(R=>R instanceof Jd).length,C=d.filter(R=>R instanceof hd).length;if(y>1||y>0&&C>0)throw new Pt(ot.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const d of o)i=d._apply(i);return i}class hd extends dd{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new hd(e,t,o)}_apply(e){const t=this._parse(e);return Km(e._query,t),new Mo(e.firestore,e.converter,du(e._query,t))}_parse(e){const t=rc(e.firestore);return function(d,y,C,R,G,Z,de){let be;if(G.isKeyField()){if("array-contains"===Z||"array-contains-any"===Z)throw new Pt(ot.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Z}' queries on documentId().`);if("in"===Z||"not-in"===Z){ug(de,Z);const rt=[];for(const Ot of de)rt.push(Wm(R,d,Ot));be={arrayValue:{values:rt}}}else be=Wm(R,d,de)}else"in"!==Z&&"not-in"!==Z&&"array-contains-any"!==Z||ug(de,Z),be=sg(C,"where",de,"in"===Z||"not-in"===Z);return Or.create(G,Z,be)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Jd extends vf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jd(e,t)}_parse(e){const t=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===t.length?t[0]:Jr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(o,d){let y=o;const C=d.getFlattenedFilters();for(const R of C)Km(y,R),y=du(y,R)}(e._query,t),new Mo(e.firestore,e.converter,du(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ef extends dd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ef(e,t)}_apply(e){const t=function(o,d,y){if(null!==o.startAt)throw new Pt(ot.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Pt(ot.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new Ha(d,y);return function(R,G){if(null===Iu(R)){const Z=yl(R);null!==Z&&cg(0,Z,G.field)}}(o,C),C}(e._query,this._field,this._direction);return new Mo(e.firestore,e.converter,function(o,d){const y=o.explicitOrderBy.concat([d]);return new vs(o.path,o.collectionGroup,y,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function c_(i,e="asc"){const t=e,o=Zd("orderBy",i);return Ef._create(o,t)}class eo extends dd{constructor(e,t,o){super(),this.type=e,this._limit=t,this._limitType=o}static _create(e,t,o){return new eo(e,t,o)}_apply(e){return new Mo(e.firestore,e.converter,zl(e._query,this._limit,this._limitType))}}function Hm(i){return function nf(i,e){if(e<=0)throw new Pt(ot.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}("limit",i),eo._create("limit",i,"F")}class Df extends dd{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new Df(e,t,o)}_apply(e){const t=Gm(e,this.type,this._docOrFields,this._inclusive);return new Mo(e.firestore,e.converter,(d=t,new vs((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,d,o.endAt)));var o,d}}function h_(...i){return Df._create("startAfter",i,!1)}class Xd extends dd{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new Xd(e,t,o)}_apply(e){const t=Gm(e,this.type,this._docOrFields,this._inclusive);return new Mo(e.firestore,e.converter,(d=t,new vs((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,d)));var o,d}}function $m(...i){return Xd._create("endBefore",i,!1)}function Gm(i,e,t,o){if(t[0]=(0,Y.m9)(t[0]),t[0]instanceof cd)return function(d,y,C,R,G){if(!R)throw new Pt(ot.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const Z=[];for(const de of wa(d))if(de.field.isKeyField())Z.push(_s(y,R.key));else{const be=R.data.field(de.field);if(N(be))throw new Pt(ot.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+de.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===be){const rt=de.field.canonicalString();throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${rt}' (used as the orderBy) does not exist.`)}Z.push(be)}return new sa(Z,G)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const d=rc(i.firestore);return function(y,C,R,G,Z,de){const be=y.explicitOrderBy;if(Z.length>be.length)throw new Pt(ot.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const rt=[];for(let Ot=0;Ot<Z.length;Ot++){const jt=Z[Ot];if(be[Ot].field.isKeyField()){if("string"!=typeof jt)throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof jt}`);if(!_l(y)&&-1!==jt.indexOf("/"))throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${jt}' contains a slash.`);const gn=y.path.child(yr.fromString(jt));if(!Kt.isDocumentKey(gn))throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${gn}' is not because it contains an odd number of segments.`);const Qn=new Kt(gn);rt.push(_s(C,Qn))}else{const gn=sg(R,G,jt);rt.push(gn)}}return new sa(rt,de)}(i._query,i.firestore._databaseId,d,e,t,o)}}function Wm(i,e,t){if("string"==typeof(t=(0,Y.m9)(t))){if(""===t)throw new Pt(ot.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_l(e)&&-1!==t.indexOf("/"))throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(yr.fromString(t));if(!Kt.isDocumentKey(o))throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return _s(i,new Kt(o))}if(t instanceof Xs)return _s(i,t._key);throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ac(t)}.`)}function ug(i,e){if(!Array.isArray(i)||0===i.length)throw new Pt(ot.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Pt(ot.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Km(i,e){if(e.isInequality()){const o=yl(i),d=e.field;if(null!==o&&!o.isEqual(d))throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${o.toString()}' and '${d.toString()}'`);const y=Iu(i);null!==y&&cg(0,d,y)}const t=function(o,d){for(const y of o)for(const C of y.getFlattenedFilters())if(d.indexOf(C.op)>=0)return C.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Pt(ot.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function cg(i,e,t){if(!t.isEqual(e))throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Nc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lc extends cd{constructor(e,t,o,d,y,C){super(e,t,o,d,C),this._firestore=e,this._firestoreImpl=e,this.metadata=y}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Sl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Zd("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Sl extends Lc{data(e={}){return super.data(e)}}class Oa{constructor(e,t,o,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new Nc(d.hasPendingWrites,d.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Sl(this._firestore,this._userDataWriter,o.key,o,new Nc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pt(ot.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,d){if(o._snapshot.oldDocs.isEmpty()){let y=0;return o._snapshot.docChanges.map(C=>({type:"added",doc:new Sl(o._firestore,o._userDataWriter,C.doc.key,C.doc,new Nc(o._snapshot.mutatedKeys.has(C.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:y++}))}{let y=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(C=>d||3!==C.type).map(C=>{const R=new Sl(o._firestore,o._userDataWriter,C.doc.key,C.doc,new Nc(o._snapshot.mutatedKeys.has(C.doc.key),o._snapshot.fromCache),o.query.converter);let G=-1,Z=-1;return 0!==C.type&&(G=y.indexOf(C.doc.key),y=y.delete(C.doc.key)),1!==C.type&&(y=y.add(C.doc),Z=y.indexOf(C.doc.key)),{type:ru(C.type),doc:R,oldIndex:G,newIndex:Z}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ru(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ln()}}function zm(i){i=vi(i,Xs);const e=vi(i.firestore,Bi);return function df(i,e,t={}){const o=new ti;return i.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return function(d,y,C,R,G){const Z=new af({next:be=>{y.enqueueAndForget(()=>mm(d,de));const rt=be.docs.has(C);!rt&&be.fromCache?G.reject(new Pt(ot.UNAVAILABLE,"Failed to get document because the client is offline.")):rt&&be.fromCache&&R&&"server"===R.source?G.reject(new Pt(ot.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(be)},error:be=>G.reject(be)}),de=new vm(ml(C.path),Z,{includeMetadataChanges:!0,Nu:!0});return pm(d,de)}(yield Ul(i),i.asyncQueue,e,t,o)})),o.promise}(Ts(e),i._key).then(t=>If(e,i,t))}class sc extends class dg{convertValue(e,t="none"){switch(Ze(e)){case 0:return null;case 1:return e.booleanValue;case 2:return A(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(T(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ln()}}convertObject(e,t){const o={};return Ua(e.fields,(d,y)=>{o[d]=this.convertValue(y,t)}),o}convertGeoPoint(e){return new eg(A(e.latitude),A(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=j(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(X(e));default:return null}}convertTimestamp(e){const t=b(e);return new Kr(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=yr.fromString(e);en(Pf(o));const d=new Ki(o.get(1),o.get(3)),y=new Kt(o.popFirst(5));return d.isEqual(t)||Gi(`Document ${y} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),y}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new nc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xs(this.firestore,null,t)}}function g_(i){i=vi(i,Xs);const e=vi(i.firestore,Bi),t=Ts(e),o=new sc(e);return function Xy(i,e){const t=new ti;return i.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return(o=(0,g.Z)(function*(d,y,C){try{const R=yield function(G,Z){const de=Zt(G);return de.persistence.runTransaction("read document","readonly",be=>de.localDocuments.getDocument(be,Z))}(d,y);R.isFoundDocument()?C.resolve(R):R.isNoDocument()?C.resolve(null):C.reject(new Pt(ot.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const G=Nd(R,`Failed to get document '${y} from cache`);C.reject(G)}}),function(d,y,C){return o.apply(this,arguments)})(yield function cf(i){return Yp(i).then(e=>e.localStore)}(i),e,t);var o})),t.promise}(t,i._key).then(d=>new Lc(e,o,i._key,d,new Nc(null!==d&&d.hasLocalMutations,!0),i.converter))}function m_(i){i=vi(i,Mo);const e=vi(i.firestore,Bi),t=Ts(e),o=new sc(e);return lg(i._query),function nu(i,e,t={}){const o=new ti;return i.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return function(d,y,C,R,G){const Z=new af({next:be=>{y.enqueueAndForget(()=>mm(d,de)),be.fromCache&&"server"===R.source?G.reject(new Pt(ot.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(be)},error:be=>G.reject(be)}),de=new vm(C,Z,{includeMetadataChanges:!0,Nu:!0});return pm(d,de)}(yield Ul(i),i.asyncQueue,e,t,o)})),o.promise}(t,i._query).then(d=>new Oa(e,o,i,d))}function Qm(i,e,t,...o){i=vi(i,Xs);const d=vi(i.firestore,Bi),y=rc(d);let C;return C="string"==typeof(e=(0,Y.m9)(e))||e instanceof ud?function gf(i,e,t,o,d,y){const C=i.da(1,e,t),R=[yf(e,o,t)],G=[d];if(y.length%2!=0)throw new Pt(ot.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let rt=0;rt<y.length;rt+=2)R.push(yf(e,y[rt])),G.push(y[rt+1]);const Z=[],de=ho.empty();for(let rt=R.length-1;rt>=0;--rt)if(!_f(Z,R[rt])){const Ot=R[rt];let jt=G[rt];jt=(0,Y.m9)(jt);const gn=C.ca(Ot);if(jt instanceof ic)Z.push(Ot);else{const Qn=xc(jt,gn);null!=Qn&&(Z.push(Ot),de.set(Ot,Qn))}}const be=new js(Z);return new ff(de,be,C.fieldTransforms)}(y,"updateDoc",i._key,e,t,o):function ig(i,e,t,o){const d=i.da(1,e,t);mf("Data must be an object, but it was:",d,o);const y=[],C=ho.empty();Ua(o,(G,Z)=>{const de=Qd(e,G,t);Z=(0,Y.m9)(Z);const be=d.ca(de);if(Z instanceof ic)y.push(de);else{const rt=xc(Z,be);null!=rt&&(y.push(de),C.set(de,rt))}});const R=new js(y);return new ff(C,R,d.fieldTransforms)}(y,"updateDoc",i._key,e),nh(d,[C.toMutation(i._key,a.exists(!0))])}function y_(i){return nh(vi(i.firestore,Bi),[new cn(i._key,a.none())])}function qm(i,e){const t=vi(i.firestore,Bi),o=od(i),d=function th(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}(i.converter,e);return nh(t,[ng(rc(i.firestore),"addDoc",o._key,d,null!==i.converter,{}).toMutation(o._key,a.exists(!1))]).then(()=>o)}function Zm(i,...e){var t,o,d;i=(0,Y.m9)(i);let y={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||ul(e[C])||(y=e[C],C++);const R={includeMetadataChanges:y.includeMetadataChanges};if(ul(e[C])){const be=e[C];e[C]=null===(t=be.next)||void 0===t?void 0:t.bind(be),e[C+1]=null===(o=be.error)||void 0===o?void 0:o.bind(be),e[C+2]=null===(d=be.complete)||void 0===d?void 0:d.bind(be)}let G,Z,de;if(i instanceof Xs)Z=vi(i.firestore,Bi),de=ml(i._key.path),G={next:be=>{e[C]&&e[C](If(Z,i,be))},error:e[C+1],complete:e[C+2]};else{const be=vi(i,Mo);Z=vi(be.firestore,Bi),de=be._query;const rt=new sc(Z);G={next:Ot=>{e[C]&&e[C](new Oa(Z,rt,be,Ot))},error:e[C+1],complete:e[C+2]},lg(i._query)}return function(be,rt,Ot,jt){const gn=new af(jt),Qn=new vm(rt,gn,Ot);return be.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return pm(yield Ul(be),Qn)})),()=>{gn.bc(),be.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return mm(yield Ul(be),Qn)}))}}(Ts(Z),de,R,G)}function nh(i,e){return function(t,o){const d=new ti;return t.asyncQueue.enqueueAndForget((0,g.Z)(function*(){return function Gh(i,e,t){return ec.apply(this,arguments)}(yield function Zp(i){return uf(i).then(e=>e.syncEngine)}(t),o,d)})),d.promise}(Ts(i),e)}function If(i,e,t){const o=t.docs.get(e._key),d=new sc(i);return new Lc(i,d,e._key,o,new Nc(t.hasPendingWrites,t.fromCache),e.converter)}function ey(){return new Yd("serverTimestamp")}!function(i,e=!0){Vi=I.Jn,(0,I.Xd)(new J.wA("firestore",(t,{instanceIdentifier:o,options:d})=>{const y=t.getProvider("app").getImmediate(),C=new Bi(new Us(t.getProvider("auth-internal")),new Na(t.getProvider("app-check-internal")),function(R,G){if(!Object.prototype.hasOwnProperty.apply(R.options,["projectId"]))throw new Pt(ot.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ki(R.options.projectId,G)}(y,o),y);return d=Object.assign({useFetchStreams:e},d),C._setSettings(d),C},"PUBLIC").setMultipleInstances(!0)),(0,I.KN)(gs,"3.8.3",i),(0,I.KN)(gs,"3.8.3","esm2017")}()},5861:(_e,ne,D)=>{function g(J,B,Y,re,ee,z,oe){try{var Q=J[z](oe),le=Q.value}catch(ue){return void Y(ue)}Q.done?B(le):Promise.resolve(le).then(re,ee)}function I(J){return function(){var B=this,Y=arguments;return new Promise(function(re,ee){var z=J.apply(B,Y);function oe(le){g(z,re,ee,oe,Q,"next",le)}function Q(le){g(z,re,ee,oe,Q,"throw",le)}oe(void 0)})}}D.d(ne,{Z:()=>I})},4147:_e=>{_e.exports={i8:"0.0.20"}}},_e=>{_e(_e.s=5543)}]);