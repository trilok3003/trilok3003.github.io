"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[4497],{2743:(k,P,o)=>{o.d(P,{A:()=>I});var c=o(467),d=o(4438),p=o(4668),b=o(7673),m=o(4572),C=o(8810),A=o(9437),D=o(8141),l=o(6354);function T(r){return new Date(r).toISOString().split("T")[0]}var H=o(9972);let B=(()=>{class r{constructor(){this.methodCallCount={}}trackMethodCall(e){this.methodCallCount[e]||(this.methodCallCount[e]=0),this.methodCallCount[e]++,console.log(`${e} called ${this.methodCallCount[e]} times`)}getMethodCallCount(e){return this.methodCallCount[e]||0}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275prov=d.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var v=function(r){return r.CATEGORY="categories_wise",r.STATUS="status_wise",r.DATE="date_wise",r}(v||{});let I=(()=>{class r{constructor(e,t){this.firebaseRealtimeDatabaseService=e,this.trackingService=t,this.BASE="topics-db",this.PATHS={posts:`${this.BASE}/posts`,categories:`${this.BASE}/categories`,sprints:`${this.BASE}/sprints`,checklist:`${this.BASE}/checklist`},this.legacySpacesPath="spaces-db",this.newBasePath="topics-db",this.totalPosts=(0,d.vPA)(0),this.posts$=this.fetchPosts().pipe((0,p.t)(2)),this.categories$=this.fetchCategories().pipe((0,p.t)(2)),this.safePosts$=this.posts$.pipe((0,A.W)(s=>(this.handleError(s),(0,b.of)([])))),this.postsWithCategory$=(0,m.z)([this.posts$,this.categories$]).pipe((0,D.M)(([s])=>this.totalPosts.set(s.length)),(0,l.T)(([s,i])=>this.attachCategoryNames(s,i)),(0,p.t)(2)),this.groupedCategories$=(0,m.z)([this.categories$,this.posts$]).pipe((0,l.T)(([s,i])=>s.reduce((n,u)=>{const f=i.filter(y=>y.categoryId===u.key);return(f.length?n.withPosts:n.withoutPosts).push({...u,posts:f}),n},{withPosts:[],withoutPosts:[]})))}createPost(e){return this.firebaseRealtimeDatabaseService.create(this.PATHS.posts,e)}updatePost(e,t){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.posts}/${e}`,t)}removePost(e){return this.firebaseRealtimeDatabaseService.remove(`${this.PATHS.posts}/${e}`)}removeMultiplePosts(e){var t=this;return(0,c.A)(function*(){const s=e.map(i=>t.removePost(i));yield Promise.all(s)})()}getPost(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.posts}/${e}`)}fetchPosts(){return this.firebaseRealtimeDatabaseService.readRealtime$(this.PATHS.posts)}createCategory(e){return this.firebaseRealtimeDatabaseService.create(this.PATHS.categories,e)}removeCategory(e){return this.firebaseRealtimeDatabaseService.remove(`${this.PATHS.categories}/${e}`)}getCategories(){return this.categories$}getCategory(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.categories}/${e}`)}getCategoryById(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.categories}/${e}`)}getPostsByCategoryId(e){return this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.posts,{categoryId:e})}getPostsByCategoryWithName(e){return(0,m.z)([this.getPostsByCategoryId(e),this.categories$]).pipe((0,l.T)(([t,s])=>t.map(i=>({...i,categoryName:s.find(n=>n.key===i.categoryId)?.title??"Uncategorized"}))))}getPostsByStatus(e){return"All"===e?this.postsWithCategory$:this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.posts,{status:e})}getPostsBySprintId(e){return this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.posts,{sprintId:e})}fetchCategories(){return this.firebaseRealtimeDatabaseService.readRealtime$(this.PATHS.categories)}attachCategoryNames(e,t){return e.map(s=>({...s,categoryName:t.find(i=>i.key===s.categoryId)?.title||"Uncategorized"}))}getPostsServerSide(e,t,s){return e?this.getPostsByCategoryId(e):t?this.getPostsBySprintId(t):s&&"All"!==s?this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.posts,{status:s}):this.posts$}filterPosts(e,t,s="All",i="createdAt",n="desc",u="",f=null){const g=this.getPostsServerSide(e||void 0,u||void 0,s);return this.withCategoryNames(g).pipe((0,l.T)(y=>function E(r,a,e,t,s,i,n,u){const f=e.toLowerCase().trim();return function S(r,a,e="asc"){return[...r].sort((t,s)=>{const i=t[a],n=s[a],u=i<n?-1:i>n?1:0;return"asc"===e?u:-u})}(r,s,i).filter(g=>{const y=!a||g.categoryId===a,O=g.title?.toLowerCase().includes(f)||g.body?.toLowerCase().includes(f);return y&&O&&("All"===t||g.status===t)&&(!n||g.sprintId===n)&&(null===u||g.bookmark===u)})}(y,e,t,s,i,n,u,f)))}matchesSearch(e,t){const s=e.title?.toLowerCase().includes(t),i=e.body?.toLowerCase().includes(t);return!(!s&&!i)}handleError(e){return console.error("Error occurred:",e),(0,C.$)(()=>new Error("Unknown error occurred. Please try again later."))}getCategoriesWisePosts(){return this.groupPosts(v.CATEGORY)}groupPosts(e){return this.postsWithCategory$.pipe((0,l.T)(t=>this.groupData(e,t)))}groupData(e,t){let s,i;switch(e){case v.CATEGORY:s=n=>n.categoryId,i=n=>n.categoryName;break;case v.STATUS:s=n=>n.status,i=n=>n.status;break;case v.DATE:s=n=>T(n.updatedAt),i=n=>T(n.updatedAt);break;default:return[]}return function $(r,a,e){const t={};for(const s of r){const i=a(s),n=e(s);t[i]||(t[i]={key:i,title:n,data:[]}),t[i].data.push(s)}return Object.values(t)}(t,s,i)}createSprint(e){return this.firebaseRealtimeDatabaseService.create(this.PATHS.sprints,e)}getSprints(){return this.firebaseRealtimeDatabaseService.readRealtime$(this.PATHS.sprints)}getSprint(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.sprints}/${e}`)}updateSprint(e,t){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.sprints}/${e}`,t)}withCategoryNames(e){return(0,m.z)([e,this.categories$]).pipe((0,l.T)(([t,s])=>t.map(i=>({...i,categoryName:s.find(n=>n.key===i.categoryId)?.title??"Uncategorized"}))))}moveLists(e,t,s=!1){return(0,c.A)(function*(){})()}createChecklist(e){return this.firebaseRealtimeDatabaseService.create(this.PATHS.checklist,e)}updateChecklist(e,t){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.checklist}/${e}`,t)}getChecklist(){return this.firebaseRealtimeDatabaseService.readRealtime$(this.PATHS.checklist)}getChecklistByCategoryId(e){return this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.checklist,{categoryId:e})}getChecklistByCategoryOrSpace(e,t){if(!e&&!t)throw new Error("categoryId or spaceId is required");return this.firebaseRealtimeDatabaseService.readRealtimeWhere$(this.PATHS.checklist,e?{categoryId:e}:{spaceId:t})}getChecklistById(e){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.PATHS.checklist}/${e}`)}getChecklistItemsById(e){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.PATHS.checklist}/${e}/items`)}updateTitle(e,t){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.checklist}/${e}`,{title:t})}addItem(e,t,s=!1){return this.firebaseRealtimeDatabaseService.create(`${this.PATHS.checklist}/${e}/items`,{name:t,completed:s})}toggleItem(e,t,s){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.checklist}/${e}/items/${t}`,{completed:s})}renameItem(e,t,s){return this.firebaseRealtimeDatabaseService.update(`${this.PATHS.checklist}/${e}/items/${t}`,{name:s})}removeItem(e,t){return this.firebaseRealtimeDatabaseService.remove(`${this.PATHS.checklist}/${e}/items/${t}`)}createCheckListWithOrginalKey(e,t){var s=this;return(0,c.A)(function*(){yield s.firebaseRealtimeDatabaseService.set(`${s.PATHS.checklist}/${e}`,t)})()}addItemWithKey(e,t,s){return this.firebaseRealtimeDatabaseService.set(`${this.PATHS.checklist}/${e}/items/${t}`,{name:s.name,completed:s.completed})}checkIfExists(e){return this.firebaseRealtimeDatabaseService.readOnceOriginal(`${this.PATHS.checklist}/${e}`)}static{this.\u0275fac=function(t){return new(t||r)(d.KVO(H.h),d.KVO(B))}}static{this.\u0275prov=d.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},6815:(k,P,o)=>{o.r(P),o.d(P,{SpacesNavigationsComponent:()=>D});var c=o(4438),d=o(4973),p=o(2557),b=o(8326),m=o(8701);const C=(l,$)=>$.key;function A(l,$){if(1&l&&(c.j41(0,"ng-sidenav-link",1),c.EFF(1),c.k0s()),2&l){const h=$.$implicit;c.Mz_("routerLink","spaces/details/",null==h?null:h.key,""),c.R7$(),c.SpI(" ",(null==h?null:h.name)||(null==h?null:h.title)," ")}}let D=(()=>{class l{constructor(h){this.spacesService=h,this.spacesList=[]}ngOnInit(){this.spacesService.getSpaces().subscribe(h=>{this.spacesList=h})}static{this.\u0275fac=function(S){return new(S||l)(c.rXU(d.b))}}static{this.\u0275cmp=c.VBU({type:l,selectors:[["app-spaces-navigations"]],standalone:!1,decls:5,vars:0,consts:[["routerLink","spaces/create"],[3,"routerLink"]],template:function(S,R){1&S&&(c.j41(0,"ng-sidenav")(1,"ng-sidenav-link",0),c.EFF(2," Create "),c.k0s(),c.Z7z(3,A,2,3,"ng-sidenav-link",1,C),c.k0s()),2&S&&(c.R7$(3),c.Dyx(R.spacesList))},dependencies:[p.Wk,b.D,m.$],encapsulation:2})}}return l})()}}]);