"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[5205],{2743:(O,$,c)=>{c.d($,{A:()=>I});var o=c(467),g=c(4438),v=c(4668),P=c(7673),C=c(4572),D=c(8810),S=c(9437),b=c(8141),d=c(6354);function T(r){return new Date(r).toISOString().split("T")[0]}var L=c(9972);let B=(()=>{class r{constructor(){this.methodCallCount={}}trackMethodCall(t){this.methodCallCount[t]||(this.methodCallCount[t]=0),this.methodCallCount[t]++,console.log(`${t} called ${this.methodCallCount[t]} times`)}getMethodCallCount(t){return this.methodCallCount[t]||0}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=g.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var y=function(r){return r.CATEGORY="categories_wise",r.STATUS="status_wise",r.DATE="date_wise",r}(y||{});let I=(()=>{class r{constructor(t,e){this.firebaseRealtimeDatabaseService=t,this.trackingService=e,this.basePath="topics-db",this.postEndpoint="posts",this.categoryEndpoint="categories",this.sprintEndpoint="sprints",this.totalPosts=(0,g.vPA)(0),this.posts$=this.fetchPosts().pipe((0,v.t)(1)),this.categories$=this.fetchCategories().pipe((0,v.t)(1)),this.safePosts$=this.posts$.pipe((0,S.W)(s=>(this.handleError(s),(0,P.of)([])))),this.postsWithCategory$=(0,C.z)([this.posts$,this.categories$]).pipe((0,b.M)(([s])=>this.totalPosts.set(s.length)),(0,d.T)(([s,n])=>this.attachCategoryNames(s,n))),this.groupedCategories$=(0,C.z)([this.categories$,this.posts$]).pipe((0,d.T)(([s,n])=>s.reduce((i,h)=>{const p=n.filter(M=>M.categoryId===h.key);return(p.length?i.withPosts:i.withoutPosts).push({...h,posts:p}),i},{withPosts:[],withoutPosts:[]})))}fetchPosts(){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.basePath}/${this.postEndpoint}`)}fetchCategories(){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.basePath}/${this.categoryEndpoint}`)}attachCategoryNames(t,e){return t.map(s=>({...s,categoryName:e.find(n=>n.key===s.categoryId)?.title||"Uncategorized"}))}createPost(t){return this.firebaseRealtimeDatabaseService.create(`${this.basePath}/${this.postEndpoint}`,t)}updatePost(t,e){return this.firebaseRealtimeDatabaseService.update(`${this.basePath}/${this.postEndpoint}/${t}`,e)}removePost(t){return this.firebaseRealtimeDatabaseService.remove(`${this.basePath}/${this.postEndpoint}/${t}`)}removeMultiplePosts(t){var e=this;return(0,o.A)(function*(){const s=t.map(n=>e.removePost(n));yield Promise.all(s)})()}getPost(t){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.basePath}/${this.postEndpoint}/${t}`)}getCategoriesWisePosts(){return this.postsWithCategory$.pipe((0,d.T)(t=>this.manageData(y.CATEGORY,t)))}createCategory(t){return this.firebaseRealtimeDatabaseService.create(`${this.basePath}/${this.categoryEndpoint}`,t)}removeCategory(t){return this.firebaseRealtimeDatabaseService.remove(`${this.basePath}/${this.categoryEndpoint}/${t}`)}getCategories(){return this.categories$}getCategory(t){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.basePath}/${this.categoryEndpoint}/${t}`)}getPostsByCategoryId(t){return this.postsWithCategory$.pipe((0,d.T)(e=>e.filter(s=>s.categoryId===t)))}getPostsBySprintId(t){return this.postsWithCategory$.pipe((0,d.T)(e=>e.filter(s=>s.sprintId===t)))}filterPosts(t,e,s="All",n="createdAt",i="desc",h="",p=null){return this.postsWithCategory$.pipe((0,d.T)(u=>function w(r,a,t,e,s,n,i,h){const p=t.toLowerCase().trim();return function R(r,a,t="asc"){return[...r].sort((e,s)=>{const n=e[a],i=s[a],h=n<i?-1:n>i?1:0;return"asc"===t?h:-h})}(r,s,n).filter(u=>{const M=!a||u.categoryId===a,F=u.title?.toLowerCase().includes(p)||u.body?.toLowerCase().includes(p);return M&&F&&("All"===e||u.status===e)&&(!i||u.sprintId===i)&&(null===h||u.bookmark===h)})}(u,t,e,s,n,i,h,p)))}matchesSearch(t,e){const s=t.title?.toLowerCase().includes(e),n=t.body?.toLowerCase().includes(e);return!(!s&&!n)}handleError(t){return console.error("Error occurred:",t),(0,D.$)(()=>new Error("Unknown error occurred. Please try again later."))}manageData(t,e){let s,n;switch(t){case y.CATEGORY:s=i=>i.categoryId,n=i=>i.categoryName;break;case y.STATUS:s=i=>i.status,n=i=>i.status;break;case y.DATE:s=i=>T(i.updatedAt),n=i=>T(i.updatedAt);break;default:return[]}return function E(r,a,t){const e={};for(const s of r){const n=a(s),i=t(s);e[n]||(e[n]={key:n,title:i,data:[]}),e[n].data.push(s)}return Object.values(e)}(e,s,n)}createSprint(t){return this.firebaseRealtimeDatabaseService.create(`${this.basePath}/${this.sprintEndpoint}`,t)}getSprints(){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.basePath}/${this.sprintEndpoint}`)}getSprint(t){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.basePath}/${this.sprintEndpoint}/${t}`)}updateSprint(t,e){return this.firebaseRealtimeDatabaseService.update(`${this.basePath}/${this.sprintEndpoint}/${t}`,e)}moveLists(t,e,s=!1){return(0,o.A)(function*(){})()}static{this.\u0275fac=function(e){return new(e||r)(g.KVO(L.h),g.KVO(B))}}static{this.\u0275prov=g.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},5205:(O,$,c)=>{c.r($),c.d($,{SprintsNavigationsComponent:()=>E});var o=c(4438),g=c(2743),v=c(2557),P=c(8326),C=c(8701),D=c(177);const S=()=>["sprints","create"],b=l=>["sprints","profile",l];function d(l,R){if(1&l&&o.nrm(0,"ng-sidenav-link",1),2&l){const f=R.$implicit;o.FS9("label",f.title),o.Y8G("routerLink",o.eq3(2,b,f.key))}}let E=(()=>{class l{constructor(){this.jsonDataService=(0,o.WQX)(g.A),this.collections$=this.jsonDataService.getSprints()}static{this.\u0275fac=function(m){return new(m||l)}}static{this.\u0275cmp=o.VBU({type:l,selectors:[["app-sprints-navigations"]],standalone:!1,decls:9,vars:4,consts:[[3,"routerLink"],[3,"routerLink","label"]],template:function(m,A){1&m&&(o.j41(0,"h1"),o.EFF(1,"Sprints"),o.k0s(),o.j41(2,"ng-sidenav")(3,"ng-sidenav-link",0),o.EFF(4," Create "),o.k0s(),o.nrm(5,"hr"),o.Z7z(6,d,1,4,"ng-sidenav-link",1,o.Vm6),o.nI1(8,"async"),o.k0s()),2&m&&(o.R7$(3),o.Y8G("routerLink",o.lJ4(3,S)),o.R7$(3),o.Dyx(o.bMT(8,1,A.collections$)))},dependencies:[v.Wk,P.D,C.$,D.AsyncPipe],encapsulation:2})}}return l})()}}]);