"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[179],{2090:(we,le,I)=>{I.d(le,{BH:()=>Fe,DV:()=>Kn,G6:()=>Ht,GJ:()=>Lt,L:()=>K,LL:()=>ur,P0:()=>Ye,Pz:()=>ke,Sg:()=>Et,UI:()=>is,US:()=>ie,Wl:()=>ii,Yr:()=>Tt,ZR:()=>vn,aH:()=>qe,b$:()=>Be,cI:()=>hn,dS:()=>_r,eu:()=>an,g5:()=>te,gK:()=>Ur,gQ:()=>Tn,h$:()=>ee,hl:()=>ir,hu:()=>w,m9:()=>Ot,ne:()=>Yn,p$:()=>q,pd:()=>Ar,q4:()=>We,r3:()=>Vn,ru:()=>Je,tV:()=>se,uI:()=>Ze,ug:()=>Vi,vZ:()=>cr,w1:()=>nt,w9:()=>yt,xO:()=>Qr,xb:()=>kr,z$:()=>Ct,zd:()=>Tr});const f={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},w=function(pe,ve){if(!pe)throw te(ve)},te=function(pe){return new Error("Firebase Database ("+f.SDK_VERSION+") INTERNAL ASSERT FAILED: "+pe)},H=function(pe){const ve=[];let Te=0;for(let et=0;et<pe.length;et++){let Le=pe.charCodeAt(et);Le<128?ve[Te++]=Le:Le<2048?(ve[Te++]=Le>>6|192,ve[Te++]=63&Le|128):55296==(64512&Le)&&et+1<pe.length&&56320==(64512&pe.charCodeAt(et+1))?(Le=65536+((1023&Le)<<10)+(1023&pe.charCodeAt(++et)),ve[Te++]=Le>>18|240,ve[Te++]=Le>>12&63|128,ve[Te++]=Le>>6&63|128,ve[Te++]=63&Le|128):(ve[Te++]=Le>>12|224,ve[Te++]=Le>>6&63|128,ve[Te++]=63&Le|128)}return ve},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(pe,ve){if(!Array.isArray(pe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Te=ve?this.byteToCharMapWebSafe_:this.byteToCharMap_,et=[];for(let Le=0;Le<pe.length;Le+=3){const Rt=pe[Le],zt=Le+1<pe.length,Re=zt?pe[Le+1]:0,Ae=Le+2<pe.length,he=Ae?pe[Le+2]:0;let Ft=(15&Re)<<2|he>>6,rn=63&he;Ae||(rn=64,zt||(Ft=64)),et.push(Te[Rt>>2],Te[(3&Rt)<<4|Re>>4],Te[Ft],Te[rn])}return et.join("")},encodeString(pe,ve){return this.HAS_NATIVE_SUPPORT&&!ve?btoa(pe):this.encodeByteArray(H(pe),ve)},decodeString(pe,ve){return this.HAS_NATIVE_SUPPORT&&!ve?atob(pe):function(pe){const ve=[];let Te=0,et=0;for(;Te<pe.length;){const Le=pe[Te++];if(Le<128)ve[et++]=String.fromCharCode(Le);else if(Le>191&&Le<224){const Rt=pe[Te++];ve[et++]=String.fromCharCode((31&Le)<<6|63&Rt)}else if(Le>239&&Le<365){const Ae=((7&Le)<<18|(63&pe[Te++])<<12|(63&pe[Te++])<<6|63&pe[Te++])-65536;ve[et++]=String.fromCharCode(55296+(Ae>>10)),ve[et++]=String.fromCharCode(56320+(1023&Ae))}else{const Rt=pe[Te++],zt=pe[Te++];ve[et++]=String.fromCharCode((15&Le)<<12|(63&Rt)<<6|63&zt)}}return ve.join("")}(this.decodeStringToByteArray(pe,ve))},decodeStringToByteArray(pe,ve){this.init_();const Te=ve?this.charToByteMapWebSafe_:this.charToByteMap_,et=[];for(let Le=0;Le<pe.length;){const Rt=Te[pe.charAt(Le++)],Re=Le<pe.length?Te[pe.charAt(Le)]:0;++Le;const he=Le<pe.length?Te[pe.charAt(Le)]:64;++Le;const Ge=Le<pe.length?Te[pe.charAt(Le)]:64;if(++Le,null==Rt||null==Re||null==he||null==Ge)throw Error();et.push(Rt<<2|Re>>4),64!==he&&(et.push(Re<<4&240|he>>2),64!==Ge&&et.push(he<<6&192|Ge))}return et},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let pe=0;pe<this.ENCODED_VALS.length;pe++)this.byteToCharMap_[pe]=this.ENCODED_VALS.charAt(pe),this.charToByteMap_[this.byteToCharMap_[pe]]=pe,this.byteToCharMapWebSafe_[pe]=this.ENCODED_VALS_WEBSAFE.charAt(pe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[pe]]=pe,pe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(pe)]=pe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(pe)]=pe)}}},ee=function(pe){const ve=H(pe);return ie.encodeByteArray(ve,!0)},K=function(pe){return ee(pe).replace(/\./g,"")},se=function(pe){try{return ie.decodeString(pe,!0)}catch(ve){console.error("base64Decode failed: ",ve)}return null};function q(pe){return de(void 0,pe)}function de(pe,ve){if(!(ve instanceof Object))return ve;switch(ve.constructor){case Date:return new Date(ve.getTime());case Object:void 0===pe&&(pe={});break;case Array:pe=[];break;default:return ve}for(const Te in ve)!ve.hasOwnProperty(Te)||!ge(Te)||(pe[Te]=de(pe[Te],ve[Te]));return pe}function ge(pe){return"__proto__"!==pe}const Ve=()=>{try{return function Ne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const pe=process.env.__FIREBASE_DEFAULTS__;return pe?JSON.parse(pe):void 0})()||(()=>{if(typeof document>"u")return;let pe;try{pe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ve=pe&&se(pe[1]);return ve&&JSON.parse(ve)})()}catch(pe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${pe}`)}},We=pe=>{var ve,Te;return null===(Te=null===(ve=Ve())||void 0===ve?void 0:ve.emulatorHosts)||void 0===Te?void 0:Te[pe]},Ye=pe=>{const ve=We(pe);if(!ve)return;const Te=ve.lastIndexOf(":");if(Te<=0||Te+1===ve.length)throw new Error(`Invalid host ${ve} with no separate hostname and port!`);const et=parseInt(ve.substring(Te+1),10);return"["===ve[0]?[ve.substring(1,Te-1),et]:[ve.substring(0,Te),et]},qe=()=>{var pe;return null===(pe=Ve())||void 0===pe?void 0:pe.config},ke=pe=>{var ve;return null===(ve=Ve())||void 0===ve?void 0:ve[`_${pe}`]};class Fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ve,Te)=>{this.resolve=ve,this.reject=Te})}wrapCallback(ve){return(Te,et)=>{Te?this.reject(Te):this.resolve(et),"function"==typeof ve&&(this.promise.catch(()=>{}),1===ve.length?ve(Te):ve(Te,et))}}}function Et(pe,ve){if(pe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const et=ve||"demo-project",Le=pe.iat||0,Rt=pe.sub||pe.user_id;if(!Rt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const zt=Object.assign({iss:`https://securetoken.google.com/${et}`,aud:et,iat:Le,exp:Le+3600,auth_time:Le,sub:Rt,user_id:Rt,firebase:{sign_in_provider:"custom",identities:{}}},pe);return[K(JSON.stringify({alg:"none",type:"JWT"})),K(JSON.stringify(zt)),""].join(".")}function Ct(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ze(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function Je(){const pe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof pe&&void 0!==pe.id}function Be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function nt(){const pe=Ct();return pe.indexOf("MSIE ")>=0||pe.indexOf("Trident/")>=0}function Tt(){return!0===f.NODE_CLIENT||!0===f.NODE_ADMIN}function Ht(){return!function Nt(){var pe;const ve=null===(pe=Ve())||void 0===pe?void 0:pe.forceEnvironment;if("node"===ve)return!0;if("browser"===ve)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ir(){try{return"object"==typeof indexedDB}catch{return!1}}function an(){return new Promise((pe,ve)=>{try{let Te=!0;const et="validate-browser-context-for-indexeddb-analytics-module",Le=self.indexedDB.open(et);Le.onsuccess=()=>{Le.result.close(),Te||self.indexedDB.deleteDatabase(et),pe(!0)},Le.onupgradeneeded=()=>{Te=!1},Le.onerror=()=>{var Rt;ve((null===(Rt=Le.error)||void 0===Rt?void 0:Rt.message)||"")}}catch(Te){ve(Te)}})}class vn extends Error{constructor(ve,Te,et){super(Te),this.code=ve,this.customData=et,this.name="FirebaseError",Object.setPrototypeOf(this,vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ur.prototype.create)}}class ur{constructor(ve,Te,et){this.service=ve,this.serviceName=Te,this.errors=et}create(ve,...Te){const et=Te[0]||{},Le=`${this.service}/${ve}`,Rt=this.errors[ve],zt=Rt?function Fr(pe,ve){return pe.replace(Mn,(Te,et)=>{const Le=ve[et];return null!=Le?String(Le):`<${et}?>`})}(Rt,et):"Error";return new vn(Le,`${this.serviceName}: ${zt} (${Le}).`,et)}}const Mn=/\{\$([^}]+)}/g;function hn(pe){return JSON.parse(pe)}function ii(pe){return JSON.stringify(pe)}const It=function(pe){let ve={},Te={},et={},Le="";try{const Rt=pe.split(".");ve=hn(se(Rt[0])||""),Te=hn(se(Rt[1])||""),Le=Rt[2],et=Te.d||{},delete Te.d}catch{}return{header:ve,claims:Te,data:et,signature:Le}},yt=function(pe){const Te=It(pe).claims;return!!Te&&"object"==typeof Te&&Te.hasOwnProperty("iat")},Lt=function(pe){const ve=It(pe).claims;return"object"==typeof ve&&!0===ve.admin};function Vn(pe,ve){return Object.prototype.hasOwnProperty.call(pe,ve)}function Kn(pe,ve){if(Object.prototype.hasOwnProperty.call(pe,ve))return pe[ve]}function kr(pe){for(const ve in pe)if(Object.prototype.hasOwnProperty.call(pe,ve))return!1;return!0}function is(pe,ve,Te){const et={};for(const Le in pe)Object.prototype.hasOwnProperty.call(pe,Le)&&(et[Le]=ve.call(Te,pe[Le],Le,pe));return et}function cr(pe,ve){if(pe===ve)return!0;const Te=Object.keys(pe),et=Object.keys(ve);for(const Le of Te){if(!et.includes(Le))return!1;const Rt=pe[Le],zt=ve[Le];if(ln(Rt)&&ln(zt)){if(!cr(Rt,zt))return!1}else if(Rt!==zt)return!1}for(const Le of et)if(!Te.includes(Le))return!1;return!0}function ln(pe){return null!==pe&&"object"==typeof pe}function Qr(pe){const ve=[];for(const[Te,et]of Object.entries(pe))Array.isArray(et)?et.forEach(Le=>{ve.push(encodeURIComponent(Te)+"="+encodeURIComponent(Le))}):ve.push(encodeURIComponent(Te)+"="+encodeURIComponent(et));return ve.length?"&"+ve.join("&"):""}function Tr(pe){const ve={};return pe.replace(/^\?/,"").split("&").forEach(et=>{if(et){const[Le,Rt]=et.split("=");ve[decodeURIComponent(Le)]=decodeURIComponent(Rt)}}),ve}function Ar(pe){const ve=pe.indexOf("?");if(!ve)return"";const Te=pe.indexOf("#",ve);return pe.substring(ve,Te>0?Te:void 0)}class Tn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ve=1;ve<this.blockSize;++ve)this.pad_[ve]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ve,Te){Te||(Te=0);const et=this.W_;if("string"==typeof ve)for(let Ge=0;Ge<16;Ge++)et[Ge]=ve.charCodeAt(Te)<<24|ve.charCodeAt(Te+1)<<16|ve.charCodeAt(Te+2)<<8|ve.charCodeAt(Te+3),Te+=4;else for(let Ge=0;Ge<16;Ge++)et[Ge]=ve[Te]<<24|ve[Te+1]<<16|ve[Te+2]<<8|ve[Te+3],Te+=4;for(let Ge=16;Ge<80;Ge++){const Ft=et[Ge-3]^et[Ge-8]^et[Ge-14]^et[Ge-16];et[Ge]=4294967295&(Ft<<1|Ft>>>31)}let he,Pe,Le=this.chain_[0],Rt=this.chain_[1],zt=this.chain_[2],Re=this.chain_[3],Ae=this.chain_[4];for(let Ge=0;Ge<80;Ge++){Ge<40?Ge<20?(he=Re^Rt&(zt^Re),Pe=1518500249):(he=Rt^zt^Re,Pe=1859775393):Ge<60?(he=Rt&zt|Re&(Rt|zt),Pe=2400959708):(he=Rt^zt^Re,Pe=3395469782);const Ft=(Le<<5|Le>>>27)+he+Ae+Pe+et[Ge]&4294967295;Ae=Re,Re=zt,zt=4294967295&(Rt<<30|Rt>>>2),Rt=Le,Le=Ft}this.chain_[0]=this.chain_[0]+Le&4294967295,this.chain_[1]=this.chain_[1]+Rt&4294967295,this.chain_[2]=this.chain_[2]+zt&4294967295,this.chain_[3]=this.chain_[3]+Re&4294967295,this.chain_[4]=this.chain_[4]+Ae&4294967295}update(ve,Te){if(null==ve)return;void 0===Te&&(Te=ve.length);const et=Te-this.blockSize;let Le=0;const Rt=this.buf_;let zt=this.inbuf_;for(;Le<Te;){if(0===zt)for(;Le<=et;)this.compress_(ve,Le),Le+=this.blockSize;if("string"==typeof ve){for(;Le<Te;)if(Rt[zt]=ve.charCodeAt(Le),++zt,++Le,zt===this.blockSize){this.compress_(Rt),zt=0;break}}else for(;Le<Te;)if(Rt[zt]=ve[Le],++zt,++Le,zt===this.blockSize){this.compress_(Rt),zt=0;break}}this.inbuf_=zt,this.total_+=Te}digest(){const ve=[];let Te=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Le=this.blockSize-1;Le>=56;Le--)this.buf_[Le]=255&Te,Te/=256;this.compress_(this.buf_);let et=0;for(let Le=0;Le<5;Le++)for(let Rt=24;Rt>=0;Rt-=8)ve[et]=this.chain_[Le]>>Rt&255,++et;return ve}}function Yn(pe,ve){const Te=new dr(pe,ve);return Te.subscribe.bind(Te)}class dr{constructor(ve,Te){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Te,this.task.then(()=>{ve(this)}).catch(et=>{this.error(et)})}next(ve){this.forEachObserver(Te=>{Te.next(ve)})}error(ve){this.forEachObserver(Te=>{Te.error(ve)}),this.close(ve)}complete(){this.forEachObserver(ve=>{ve.complete()}),this.close()}subscribe(ve,Te,et){let Le;if(void 0===ve&&void 0===Te&&void 0===et)throw new Error("Missing Observer.");Le=function en(pe,ve){if("object"!=typeof pe||null===pe)return!1;for(const Te of ve)if(Te in pe&&"function"==typeof pe[Te])return!0;return!1}(ve,["next","error","complete"])?ve:{next:ve,error:Te,complete:et},void 0===Le.next&&(Le.next=Qn),void 0===Le.error&&(Le.error=Qn),void 0===Le.complete&&(Le.complete=Qn);const Rt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Le.error(this.finalError):Le.complete()}catch{}}),this.observers.push(Le),Rt}unsubscribeOne(ve){void 0===this.observers||void 0===this.observers[ve]||(delete this.observers[ve],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ve){if(!this.finalized)for(let Te=0;Te<this.observers.length;Te++)this.sendOne(Te,ve)}sendOne(ve,Te){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ve])try{Te(this.observers[ve])}catch(et){typeof console<"u"&&console.error&&console.error(et)}})}close(ve){this.finalized||(this.finalized=!0,void 0!==ve&&(this.finalError=ve),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qn(){}function Ur(pe,ve){return`${pe} failed: ${ve} argument `}const _r=function(pe){const ve=[];let Te=0;for(let et=0;et<pe.length;et++){let Le=pe.charCodeAt(et);if(Le>=55296&&Le<=56319){const Rt=Le-55296;et++,w(et<pe.length,"Surrogate pair missing trail surrogate."),Le=65536+(Rt<<10)+(pe.charCodeAt(et)-56320)}Le<128?ve[Te++]=Le:Le<2048?(ve[Te++]=Le>>6|192,ve[Te++]=63&Le|128):Le<65536?(ve[Te++]=Le>>12|224,ve[Te++]=Le>>6&63|128,ve[Te++]=63&Le|128):(ve[Te++]=Le>>18|240,ve[Te++]=Le>>12&63|128,ve[Te++]=Le>>6&63|128,ve[Te++]=63&Le|128)}return ve},Vi=function(pe){let ve=0;for(let Te=0;Te<pe.length;Te++){const et=pe.charCodeAt(Te);et<128?ve++:et<2048?ve+=2:et>=55296&&et<=56319?(ve+=4,Te++):ve+=3}return ve};function Ot(pe){return pe&&pe._delegate?pe._delegate:pe}},8285:(we,le,I)=>{I.d(le,{Y:()=>te});var f=I(4650),w=(()=>{return(H=w||(w={}))[H.slideToLeft=1]="slideToLeft",H[H.slideToRight=2]="slideToRight",H[H.slideToTop=3]="slideToTop",H[H.slideToBottom=4]="slideToBottom",w;var H})();let te=(()=>{class H{constructor(){this.routeAnimation=null}setRouteAnimation(ie){this.routeAnimation=w[ie]}get currentRouteAnimation(){return this.routeAnimation}static#e=this.\u0275fac=function(ee){return new(ee||H)};static#t=this.\u0275prov=f.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"})}return H})()},8311:(we,le,I)=>{I.d(le,{g:()=>X});var f=I(1135),w=I(8646),te=I(8343),H=I(4650);let X=(()=>{class ie{constructor(){this._notification=new f.X(null),this.notification$=this._notification.asObservable().pipe((0,w.n)(),(0,te.x)())}notify(K){this._notification.next(K),setTimeout(()=>this._notification.next(null),3e3)}static#e=this.\u0275fac=function(se){return new(se||ie)};static#t=this.\u0275prov=H.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"})}return ie})()},9662:(we,le,I)=>{I.d(le,{O:()=>Ve});var f=I(2805),w=I(4351),te=I(576),X=I(4128),ie=I(4707),ee=I(4086),K=I(5625),se=I(262),q=I(8505),de=I(9770),ge=I(4782),Ne=I(2843),Ke=I(4650),$e=I(529),Qe=(()=>{return(We=Qe||(Qe={})).LOADING="LOADING",We.SUCCESS="SUCCESS",We.ERROR="ERROR",Qe;var We})();let Ve=(()=>{class We{constructor(qe){this.http=qe}getNotifications(){return this.http.get("http://api").pipe(this.poll(1e3))}poll(qe,ke=0){return function(Fe){return(0,f.H)(ke,qe).pipe(function H(We,Ye){return(0,te.m)(Ye)?(0,w.b)(()=>We,Ye):(0,w.b)(()=>We)}(Fe))}}get(qe){return this.http.get(qe)}post(qe,ke){return this.http.post(qe,ke)}getSwapi(){let qe=this.http.get("https://swapi.dev/api/people/1/"),ke=this.http.get("https://swapi.dev/api/planets/1/");(0,X.D)([qe,ke]).subscribe(Fe=>{Fe[0].homeworld=Fe[1],this.loadedCharacter=Fe[0]})}load(qe){const ke=new ie.t,Fe=this.http.get(`https://swapi.dev/api/people/${qe}/`).pipe((0,ee.g)(2e3),(0,K.X)(2),(0,se.K)(Ct=>{throw ke.next(Qe.ERROR),"error loading user"}),(0,q.b)(()=>ke.next(Qe.SUCCESS)));return{data:(0,de.P)(()=>(ke.next(Qe.LOADING),Fe)),status:ke}}share(){this.rawData$=this.http.get("https://jsonplaceholder.typicode.com/todos/1").pipe((0,ge.d)())}GetData(){return this.rawData$.toPromise()}getRandomjoke(){return this.http.get("https://icanhazdadjoke.com/slack").pipe((0,se.K)(this.handleError))}handleError(){return(0,Ne._)("Network Error Occured")}static#e=this.\u0275fac=function(ke){return new(ke||We)(Ke.LFG($e.eN))};static#t=this.\u0275prov=Ke.Yz7({token:We,factory:We.\u0275fac,providedIn:"root"})}return We})()},4185:(we,le,I)=>{I.d(le,{N:()=>X,g:()=>ie});var f=I(4650),w=I(529);class te{constructor(){this.http=(0,f.f3M)(w.eN)}post(K,se){return this.http.post(`${this.databaseURL}/${K}`,se)}get(K,se){return this.http.get(`${this.databaseURL}/${K}`,{params:se})}delete(K){return this.http.delete(`${this.databaseURL}/${K}`)}put(K,se){return this.http.put(`${this.databaseURL}/${K}`,se)}patch(K,se){return this.http.patch(`${this.databaseURL}/${K}`,se)}}var H=I(197);class X{}let ie=(()=>{class ee extends te{constructor(){super(...arguments),this.databaseURL=H.w.databaseURL}static#e=this.\u0275fac=function(){let se;return function(de){return(se||(se=f.n5z(ee)))(de||ee)}}();static#t=this.\u0275prov=f.Yz7({token:ee,factory:ee.\u0275fac})}return ee})()},8405:(we,le,I)=>{I.d(le,{R1:()=>te,ex:()=>ie,lt:()=>X,zI:()=>H});var f=I(4650),w=I(7697);const te=new f.OlP("GenericFirebaseDbInterface");class H{}let X=(()=>{class ee extends w.s{static#e=this.\u0275fac=function(){let se;return function(de){return(se||(se=f.n5z(ee)))(de||ee)}}();static#t=this.\u0275prov=f.Yz7({token:ee,factory:ee.\u0275fac})}return ee})(),ie=(()=>{class ee extends w.s{static#e=this.\u0275fac=function(){let se;return function(de){return(se||(se=f.n5z(ee)))(de||ee)}}();static#t=this.\u0275prov=f.Yz7({token:ee,factory:ee.\u0275fac})}return ee})()},7697:(we,le,I)=>{I.d(le,{s:()=>H});var f=I(9671),w=I(6197),te=I(9751);class H{constructor(){this.db=(0,w.N8)()}create(ie,ee={}){let K=(0,w.VF)((0,w.iH)(this.db,ie));return(0,w.t8)(K,{key:K.key,createdAt:(0,w.Bt)(),updatedAt:(0,w.Bt)(),...ee}).then(),Promise.resolve({key:K.key})}set(ie,ee={}){var K=this;return(0,f.Z)(function*(){const se=(0,w.iH)(K.db,ie);yield(0,w.t8)(se,ee)})()}update(ie,ee={}){var K=this;return(0,f.Z)(function*(){const se=(0,w.iH)(K.db,ie);yield(0,w.Vx)(se,{updatedAt:(0,w.Bt)(),...ee})})()}remove(ie){var ee=this;return(0,f.Z)(function*(){const K=(0,w.iH)(ee.db,ie);yield(0,w.Od)(K)})()}readRealtime$(ie){return new te.y(ee=>{(0,w.jM)((0,w.iH)(this.db,ie),K=>{let se=[];K.exists()?(K.forEach(q=>{se.push({key:q.key,...q.val()})}),ee.next(se)):ee.next([])})})}readRealtimeOriginal$(ie){return new te.y(ee=>{(0,w.jM)((0,w.iH)(this.db,ie),K=>{K.exists()?ee.next(K.val()):ee.next(null)})})}readOnceWithObserver(ie){return(0,w.jM)((0,w.iH)(this.db,ie),ee=>ee.val(),{onlyOnce:!0})}readOnce(ie){return new Promise((ee,K)=>{(0,w.U2)((0,w.iH)(this.db,ie)).then(se=>{let q=[];se.exists()?(se.forEach(de=>{q.push({key:de.key,...de.val()})}),ee(q)):ee([])}).catch(se=>{K(se)})})}readOnceOriginal(ie){return new Promise((ee,K)=>{(0,w.U2)((0,w.iH)(this.db,ie)).then(se=>{se.exists()?ee(se.val()):ee([])}).catch(se=>{K(se)})})}checkPresence(ie){const ee=(0,w.iH)(this.db,`${ie}/connections`),K=(0,w.iH)(this.db,`${ie}/lastOnline`),se=(0,w.iH)(this.db,".info/connected");(0,w.jM)(se,q=>{if(!0===q.val()){const de=(0,w.VF)(ee);(0,w.ae)(de).remove().then(),(0,w.t8)(de,!0).then(),(0,w.ae)(K).set((0,w.Bt)()).then()}})}onDisconnect(ie){const ee=(0,w.iH)(this.db,ie);return(0,w.ae)(ee)}detectingConnectionState(){return new te.y(ie=>{const ee=(0,w.iH)(this.db,".info/connected");(0,w.jM)(ee,K=>{ie.next(K.val())})})}updateCounter(ie,ee=!0){return new Promise((K,se)=>{const q=(0,w.iH)(this.db);(0,w.U2)((0,w.iU)(q,"counter")).then(de=>{(0,w.Vx)((0,w.iH)(this.db,ie),{counter:(0,w.nP)(ee?1:-1)}).then(ge=>{K(ge)})})})}others(){}}},4466:(we,le,I)=>{I.d(le,{m:()=>X});var f=I(6895),w=I(4006),te=I(4793),H=I(4650);let X=(()=>{class ie{static#e=this.\u0275fac=function(se){return new(se||ie)};static#t=this.\u0275mod=H.oAB({type:ie});static#n=this.\u0275inj=H.cJS({imports:[f.ez,te.Bz,w.u5,w.UX,w.u5,w.UX]})}return ie})()},255:(we,le,I)=>{I.d(le,{u:()=>f});class f{}},7522:(we,le,I)=>{I.d(le,{Yk:()=>f,wJ:()=>w});var f=(()=>{return(H=f||(f={})).Clear="Clear",H.Snow="Snow",H.Rain="Rain",H.Clouds="Clouds",H.Thunderstorm="Thunderstorm",H.Atmosphere="Atmosphere",H.Drizzle="Drizzle",H.Unknown="Unknown",f;var H})();function w(H){return(new Map).set("Thunderstorm",f.Thunderstorm).set("Drizzle",f.Drizzle).set("Rain",f.Rain).set("Snow",f.Snow).set("Atmosphere",f.Atmosphere).set("Clouds",f.Clouds).set("Clear",f.Clear).get(H.main)||f.Unknown}},1944:(we,le,I)=>{I.d(le,{$0:()=>ie,$f:()=>H,$s:()=>X,GO:()=>w,HD:()=>ee,JW:()=>de,Xt:()=>Ne,hS:()=>ge,m0:()=>te,mm:()=>q,n3:()=>K,rc:()=>se});var f=I(8555);const w=(0,f.PH)("[ARTICLE] Show All"),te=(0,f.PH)("[ARTICLE] Show All Success",(0,f.Ky)()),H=(0,f.PH)("[ARTICLE] Create",(0,f.Ky)()),X=(0,f.PH)("[ARTICLE] Create Success",(0,f.Ky)()),ie=(0,f.PH)("[ARTICLE] Create Failure",(0,f.Ky)()),ee=(0,f.PH)("[ARTICLE] Get by Id",(0,f.Ky)()),K=(0,f.PH)("[ARTICLE] Get by Id Success",(0,f.Ky)()),se=(0,f.PH)("[ARTICLE] Reset"),q=(0,f.PH)("[Product] Add to cart",(0,f.Ky)()),de=(0,f.PH)("[Product] Remove from cart",(0,f.Ky)()),ge=(0,f.PH)("[Products] Load items from server"),Ne=(0,f.PH)("[Products] Load success",(0,f.Ky)())},8713:(we,le,I)=>{I.d(le,{FC:()=>se,N5:()=>Ke,Zz:()=>K,kk:()=>Ne,ll:()=>$e});var f=I(8555),w=I(1944);const X=(0,f.Lq)({articles:[],message:""},(0,f.on)(w.m0,(Qe,{payload:Ve})=>({articles:Ve,message:"Success"})),(0,f.on)(w.$s,(Qe,{payload:Ve})=>({articles:[Ve],message:"Article Created."})),(0,f.on)(w.$0,(Qe,{payload:Ve})=>({articles:[],message:Ve})),(0,f.on)(w.n3,(Qe,{payload:Ve})=>({articles:Ve,message:"Success"})),(0,f.on)(w.rc,Qe=>({articles:[],message:""}))),ee=(0,f.ZF)("articleState"),K=(0,f.P1)(ee,Qe=>Qe.articles),se=(0,f.P1)(ee,Qe=>Qe.message),q=(0,f.Lq)({products:[],cart:[]},(0,f.on)(w.Xt,(Qe,{payload:Ve})=>({...Qe,products:Ve})),(0,f.on)(w.mm,(Qe,{payload:Ve})=>({...Qe,cart:[...Qe.cart,Ve]})),(0,f.on)(w.JW,(Qe,{payload:Ve})=>({...Qe,cart:[...Qe.cart.filter(We=>We.name!==Ve.name)]}))),ge=(0,f.ZF)("productState1"),Ne=(0,f.P1)(ge,Qe=>Qe.products),Ke=(0,f.P1)(ge,Qe=>Qe.cart),$e={articleState:function ie(Qe,Ve){return X(Qe,Ve)},productState1:function de(Qe,Ve){return q(Qe,Ve)}}},9884:(we,le,I)=>{I.d(le,{y:()=>te});var f=I(7579),w=I(1135);class te{constructor(X){this.reducer=X,this.action=new f.x;const ie={type:"@ngrx/store/init"},ee=X(void 0,ie);this.state=new w.X(ee),this.state$=this.state.asObservable(),this.action$=this.action.asObservable(),this.action.next(ie)}dispatch(X){const ie=this.state.getValue(),ee=this.reducer(ie,X);this.state.next(ee),this.action.next(X)}}},8625:(we,le,I)=>{I.d(le,{IH:()=>X,Mj:()=>H,nP:()=>te,zD:()=>ie});var f=I(8555),w=(()=>{return(ee=w||(w={})).INCREMENT="Increment Article",ee.DECREMENT="Decrememnt Article",ee.ADD="Add Article",ee.LOAD="Load Articles",w;var ee})();const te=(0,f.PH)(w.INCREMENT,(0,f.Ky)()),H=(0,f.PH)(w.DECREMENT,(0,f.Ky)()),X=(0,f.PH)(w.ADD,(0,f.Ky)()),ie=(0,f.PH)(w.LOAD)},7369:(we,le,I)=>{I.d(le,{Jl:()=>ie,UN:()=>te});var f=I(8555),w=I(8625);const te="article",X=(0,f.Lq)({articles:[]},(0,f.on)(w.nP,(ee,K)=>({...ee,articles:ee.articles.map(se=>se.id==K.id?{...se,points:se.points+1}:se)})),(0,f.on)(w.Mj,(ee,K)=>({...ee,articles:ee.articles.map(se=>se.id==K.id?{...se,points:se.points-1}:se)})),(0,f.on)(w.IH,(ee,{payload:K})=>({...ee,articles:[...ee.articles,K]})));function ie(ee,K){return X(ee,K)}},3550:(we,le,I)=>{I.d(le,{T:()=>K});var f=I(8555),w=I(8625),te=I(7369);const H=(0,f.ZF)(te.UN),X=(0,f.P1)(H,se=>se.articles);class ie{constructor(q,de,ge,Ne){this.id=q,this.title=de,this.link=ge,this.points=Ne||0,this.time=new Date}}var ee=I(4650);let K=(()=>{class se{constructor(de){this.store=de,this.id=0}getArticle(){return this.store.pipe((0,f.Ys)(X))}incArticle(de){this.store.dispatch(w.nP(de))}decArticle(de){this.store.dispatch(w.Mj(de))}addArticle(de){let ge=new ie(++this.id,de.title,de.link,0);this.store.dispatch(w.IH({payload:ge}))}loadArticle(de){this.store.dispatch(w.zD())}static#e=this.\u0275fac=function(ge){return new(ge||se)(ee.LFG(f.yh))};static#t=this.\u0275prov=ee.Yz7({token:se,factory:se.\u0275fac})}return se})()},5054:(we,le,I)=>{I.d(le,{e:()=>ee});var f=I(8555),w=I(4579),te=I(2852);const H=(0,f.ZF)(te.UN),X=(0,f.P1)(H,K=>K.count);var ie=I(4650);let ee=(()=>{class K{constructor(q){this.store=q}getCount(){return this.store.pipe((0,f.Ys)(X))}incrementCount(){this.store.dispatch(w.nP())}decrementCount(){this.store.dispatch(w.Mj())}resetCount(){this.store.dispatch(w.mc())}setValue(q){this.store.dispatch(w.Zf({newValue:q}))}loadValue(){this.store.dispatch(w.zK())}static#e=this.\u0275fac=function(de){return new(de||K)(ie.LFG(f.yh))};static#t=this.\u0275prov=ie.Yz7({token:K,factory:K.\u0275fac})}return K})()},4579:(we,le,I)=>{I.d(le,{Mj:()=>H,Zf:()=>ie,mc:()=>X,nP:()=>te,zK:()=>ee});var f=I(8555),w=(()=>{return(K=w||(w={})).INCREMENT="[Counter Component] Increment",K.DECREMENT="[Counter Component] Decrement",K.RESET="[Counter Component] Reset",K.SETVALUE="[Counter Component] Set Value",K.LOADVALUE="[Counter Component] Load Value",w;var K})();const te=(0,f.PH)(w.INCREMENT),H=(0,f.PH)(w.DECREMENT),X=(0,f.PH)(w.RESET),ie=(0,f.PH)(w.SETVALUE,(0,f.Ky)()),ee=(0,f.PH)(w.LOADVALUE)},2852:(we,le,I)=>{I.d(le,{UN:()=>te,jX:()=>ie});var f=I(8555),w=I(4579);const te="counter",X=(0,f.Lq)({count:0},(0,f.on)(w.nP,ee=>({...ee,count:ee.count+1})),(0,f.on)(w.Mj,ee=>({...ee,count:ee.count-1})),(0,f.on)(w.mc,ee=>({...ee,count:0})),(0,f.on)(w.Zf,(ee,K)=>({...ee,count:K.newValue})));function ie(ee,K){return X(ee,K)}},2542:(we,le,I)=>{I.d(le,{F3:()=>H,WU:()=>X,mu:()=>te});var f=I(8555),w=(()=>{return(ie=w||(w={})).loadData="[loadData] load",ie.loadDataSuccess="[loadData] success",ie.loadDataFailure="[loadData] failure",w;var ie})();const te=(0,f.PH)(w.loadData),H=(0,f.PH)(w.loadDataSuccess,(0,f.Ky)()),X=(0,f.PH)(w.loadDataFailure,(0,f.Ky)())},3880:(we,le,I)=>{I.d(le,{B5:()=>ie,UN:()=>te});var f=I(8555),w=I(2542);const te="load-data",X=(0,f.Lq)({data:null,loading:!1,error:null},(0,f.on)(w.mu,ee=>({...ee,loading:!0})),(0,f.on)(w.F3,(ee,{payload:K})=>({...ee,loading:!1,data:K})),(0,f.on)(w.WU,(ee,{payload:K})=>({...ee,loading:!1,error:K})));function ie(ee,K){return X(ee,K)}},9610:(we,le,I)=>{I.d(le,{L:()=>ee});var f=I(8555),w=I(3880);const te=(0,f.ZF)(w.UN),H=(0,f.P1)(te,K=>K.data);var X=I(2542),ie=I(4650);let ee=(()=>{class K{constructor(q){this.store=q}getData(){return this.store.pipe((0,f.Ys)(H))}loadData(){this.store.dispatch(X.mu())}loadDataSuccess(q){this.store.dispatch(X.F3(q))}loadDataFailure(q){this.store.dispatch(X.WU(q))}static#e=this.\u0275fac=function(de){return new(de||K)(ie.LFG(f.yh))};static#t=this.\u0275prov=ie.Yz7({token:K,factory:K.\u0275fac})}return K})()},7403:(we,le,I)=>{I.d(le,{a:()=>X});var f=I(4004),w=I(4650),te=I(529);let X=(()=>{class ie{constructor(K){this.http=K}register(K){return this.http.post("https://conduit.productionready.io/api/users",K).pipe((0,f.U)(se=>se.user))}static#e=this.\u0275fac=function(se){return new(se||ie)(w.LFG(te.eN))};static#t=this.\u0275prov=w.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"})}return ie})()},2766:(we,le,I)=>{I.d(le,{Pw:()=>H,_0:()=>te,zH:()=>X});var f=I(8555),w=(()=>{return(ie=w||(w={})).REGISTER="[AUTH] REGISTER",ie.REGISTER_SUCCESS="[AUTH] REGISTER SUCCESS",ie.REGISTER_FAILURE="[AUTH] REGISTER FAILURE",w;var ie})();const te=(0,f.PH)(w.REGISTER,(0,f.Ky)()),H=(0,f.PH)(w.REGISTER_SUCCESS,(0,f.Ky)()),X=(0,f.PH)(w.REGISTER_FAILURE,(0,f.Ky)())},5650:(we,le,I)=>{I.d(le,{UN:()=>H,xw:()=>ie});var f=I(8555),w=I(2766);const H="Register",X=(0,f.Lq)({isSubmitting:!1,currentUser:null,isLoggedIn:null,validationErrors:null},(0,f.on)(w._0,ee=>({...ee,isSubmitting:!0,validationErrors:null})),(0,f.on)(w.Pw,(ee,K)=>({...ee,isSubmitting:!1,isLoggedIn:!0,currentUser:K.currentUser})),(0,f.on)(w.zH,(ee,K)=>({...ee,isSubmitting:!1,validationErrors:K.errors})));function ie(ee,K){return X(ee,K)}},4964:(we,le,I)=>{I.d(le,{q:()=>K});var f=I(8555),w=I(2766),te=I(5650);const H=(0,f.ZF)(te.UN),X=(0,f.P1)(H,se=>se.isSubmitting),ie=(0,f.P1)(H,se=>se.validationErrors);var ee=I(4650);let K=(()=>{class se{constructor(de){this.store=de}register(de){this.store.dispatch((0,w._0)(de))}isSubmitting(){return this.store.pipe((0,f.Ys)(X))}backendErrors(){return this.store.pipe((0,f.Ys)(ie))}static#e=this.\u0275fac=function(ge){return new(ge||se)(ee.LFG(f.yh))};static#t=this.\u0275prov=ee.Yz7({token:se,factory:se.\u0275fac})}return se})()},817:(we,le,I)=>{I.d(le,{N2:()=>X,Ni:()=>H,PR:()=>te});var f=I(8555),w=(()=>{return(ie=w||(w={})).GET_USER="[User] Get User",ie.GET_USER_SUCCESS="[User] Get User Success",ie.GET_USER_FAILED="[User] Get User Failed",w;var ie})();const te=(0,f.PH)(w.GET_USER),H=(0,f.PH)(w.GET_USER_SUCCESS,(0,f.Ky)()),X=(0,f.PH)(w.GET_USER_FAILED,(0,f.Ky)())},173:(we,le,I)=>{I.d(le,{U:()=>H,M:()=>ie});var f=I(8555),te=I(817);const H="user_info",X=(0,f.Lq)({user:{userId:null,name:null,lastName:null,email:null},error:null},(0,f.on)(te.Ni,(ee,{user:K})=>({...ee,user:K,error:null})),(0,f.on)(te.N2,(ee,{error:K})=>({...ee,user:{userId:null,name:null,lastName:null,email:null},error:K})));function ie(ee,K){return X(ee,K)}},2842:(we,le,I)=>{I.d(le,{p:()=>ee});var f=I(8555),w=I(817),te=I(173);const H=(0,f.ZF)(te.U),X=(0,f.P1)(H,K=>K.user);var ie=I(4650);let ee=(()=>{class K{constructor(q){this.store=q}userInfo$(){return this.store.pipe((0,f.Ys)(X))}getUserInfo(){this.store.dispatch(w.PR())}static#e=this.\u0275fac=function(de){return new(de||K)(ie.LFG(f.yh))};static#t=this.\u0275prov=ie.Yz7({token:K,factory:K.\u0275fac})}return K})()},2944:(we,le,I)=>{I.d(le,{s:()=>te});var f=I(4650),w=I(529);let te=(()=>{class H{constructor(ie){this.http=ie}login(ie,ee){return this.http.post("login",{username:ie,password:ee})}getProducts(){return this.http.get("products",{headers:{}})}static#e=this.\u0275fac=function(ee){return new(ee||H)(f.LFG(w.eN))};static#t=this.\u0275prov=f.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"})}return H})()},7385:(we,le,I)=>{I.d(le,{e:()=>X});var f=I(1135),w=I(8505),te=I(4650),H=I(2944);let X=(()=>{class ie{constructor(K){this.apiService=K,this._isLoggedIn$=new f.X(!1),this.isLoggedIn$=this._isLoggedIn$.asObservable(),this.TOKEN_NAME="profanis_auth",this._isLoggedIn$.next(!!this.token),this.user=this.getUser(this.token)}get token(){return localStorage.getItem(this.TOKEN_NAME)}login(K,se){return this.apiService.login(K,se).pipe((0,w.b)(q=>{this._isLoggedIn$.next(!0),localStorage.setItem(this.TOKEN_NAME,q.token),this.user=this.getUser(q.token)}))}getUser(K){return K?JSON.parse(atob(K.split(".")[1])):null}hasRole(K){return this.user?.Role.includes(K)||!1}static#e=this.\u0275fac=function(se){return new(se||ie)(te.LFG(H.s))};static#t=this.\u0275prov=te.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"})}return ie})()},2340:(we,le,I)=>{I.d(le,{N:()=>w});var f=I(197);const w={production:!0,version:I(4147).i8,firebaseConfig:f.w}},197:(we,le,I)=>{I.d(le,{w:()=>f});const f={apiKey:"AIzaSyAQszHYa_YW__6DdJDCqlKOsRBpszVz8sQ",authDomain:"rktect-rest.firebaseapp.com",databaseURL:"https://rktect-rest-default-rtdb.firebaseio.com",projectId:"rktect-rest",storageBucket:"rktect-rest.appspot.com",messagingSenderId:"797842765239",appId:"1:797842765239:web:e3ddfbb57fbdff9dd42432",auth_Token:"kpPiWBeAJJ3KlXNQ1tULjJcYLWZoLMwdEpDRzKSc"}},6553:(we,le,I)=>{var f=I(1481),w=I(4650),te=I(9671),H=I(4793),X=I(7340);const ie=[(0,X.IO)(":enter, :leave",(0,X.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,X.IO)(":leave",(0,X.oB)({transform:"translateX(0%)"}),{optional:!0}),(0,X.IO)(":enter",(0,X.oB)({transform:"translateX(100%)"}),{optional:!0}),(0,X.ru)([(0,X.IO)(":leave",[(0,X.jt)(".3s ease-in-out",(0,X.oB)({transform:"translateX(-100%)"}))],{optional:!0}),(0,X.IO)(":enter",[(0,X.jt)(".3s ease-in-out",(0,X.oB)({transform:"translateX(0%)"}))],{optional:!0})])],ee=[(0,X.IO)(":enter, :leave",(0,X.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,X.IO)(":leave",(0,X.oB)({transform:"translateX(0%)"}),{optional:!0}),(0,X.IO)(":enter",(0,X.oB)({transform:"translateX(-100%)"}),{optional:!0}),(0,X.ru)([(0,X.IO)(":leave",[(0,X.jt)(".3s ease-in-out",(0,X.oB)({transform:"translateX(100%)"}))],{optional:!0}),(0,X.IO)(":enter",[(0,X.jt)(".3s ease-in-out",(0,X.oB)({transform:"translateX(0%)"}))],{optional:!0})])],K=[(0,X.IO)(":enter, :leave",(0,X.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,X.IO)(":leave",(0,X.oB)({transform:"translateY(0%)"}),{optional:!0}),(0,X.IO)(":enter",(0,X.oB)({transform:"translateY(100%)"}),{optional:!0}),(0,X.ru)([(0,X.IO)(":leave",[(0,X.jt)(".3s ease-in-out",(0,X.oB)({transform:"translateY(-100%)"}))],{optional:!0}),(0,X.IO)(":enter",[(0,X.jt)(".3s ease-in-out",(0,X.oB)({transform:"translateY(0%)"}))],{optional:!0})])],se=[(0,X.IO)(":enter, :leave",(0,X.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,X.IO)(":leave",(0,X.oB)({transform:"translateY(0%)"}),{optional:!0}),(0,X.IO)(":enter",(0,X.oB)({transform:"translateY(-100%)"}),{optional:!0}),(0,X.ru)([(0,X.IO)(":leave",[(0,X.jt)(".3s ease-in-out",(0,X.oB)({transform:"translateY(100%)"}))],{optional:!0}),(0,X.IO)(":enter",[(0,X.jt)(".3s ease-in-out",(0,X.oB)({transform:"translateY(0%)"}))],{optional:!0})])],q=(0,X.X$)("slideTransition",[(0,X.eR)("* => slideToLeft",ie),(0,X.eR)("* => slideToRight",ee),(0,X.eR)("* => slideToTop",K),(0,X.eR)("* => slideToBottom",se)]);var de=I(8285),ge=I(6895);function Ne(y,_){if(1&y&&(w.TgZ(0,"li",11)(1,"a",12),w._uU(2),w.qZA()()),2&y){const g=_.$implicit;w.xp6(1),w.Q6J("routerLink",null==g?null:g.path),w.xp6(1),w.Oqu((null==g?null:g.name)||(null==g?null:g.path))}}function Ke(y,_){if(1&y&&(w.TgZ(0,"a",13),w._uU(1),w.qZA()),2&y){const g=_.$implicit;w.xp6(1),w.Oqu(g)}}const $e=function(){return["navbar-dark","bg-dark"]},Qe=function(){return["navbar-light","bg-light"]},Ve=function(y){return{show:y}};let We=(()=>{class y{constructor(){this.isCollapsed=!1,this.routes=[],this.template="DARK",this.languages=["English","Hindi"]}ngOnInit(){}toggleNavbar(){this.isCollapsed=!this.isCollapsed}static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275cmp=w.Xpm({type:y,selectors:[["app-navbar"]],inputs:{routes:"routes",template:"template"},decls:13,vars:10,consts:[[1,"navbar","navbar-expand-lg","sticky-top1",3,"ngClass"],["href","/",1,"navbar-brand"],["type","button",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse",3,"ngClass"],[1,"navbar-nav","mr-auto"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item","dropdown","align-right",3,"click"],["id","navbarDropdown","role","button","data-toggle","dropdown","aria-expanded","false","aria-haspopup","true",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["class","dropdown-item",4,"ngFor","ngForOf"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"dropdown-item"]],template:function(b,j){1&b&&(w.TgZ(0,"nav",0)(1,"a",1),w._uU(2,"Navbar"),w.qZA(),w.TgZ(3,"button",2),w.NdJ("click",function(){return j.toggleNavbar()}),w._UZ(4,"span",3),w.qZA(),w.TgZ(5,"div",4)(6,"ul",5),w.YNc(7,Ne,3,2,"li",6),w.TgZ(8,"li",7),w.NdJ("click",function(){return j.show=!j.show}),w.TgZ(9,"a",8),w._uU(10,"Language"),w.qZA(),w.TgZ(11,"div",9),w.YNc(12,Ke,2,1,"a",10),w.qZA()()()()()),2&b&&(w.Q6J("ngClass","DARK"===j.template?w.DdM(6,$e):w.DdM(7,Qe)),w.xp6(5),w.Q6J("ngClass",w.VKq(8,Ve,j.isCollapsed)),w.xp6(2),w.Q6J("ngForOf",j.routes),w.xp6(4),w.ekj("show",j.show),w.xp6(1),w.Q6J("ngForOf",j.languages))},dependencies:[ge.mk,ge.sg,H.rH,H.Od],styles:["nav[_ngcontent-%COMP%]{border-bottom:1px solid hsla(0,0%,100%,.07);box-shadow:0 2.2px 2.2px #00000012,0 5.3px 5.3px #0000000d,0 10px 10px #0000000a,0 17.9px 17.9px #0000000a,0 33.4px 33.4px #00000008,0 80px 80px #00000005}"]})}return y})(),Ye=(()=>{class y{constructor(g){this.animationService=g,this.routes=[{path:"resume"},{path:"my-site"},{path:"../personal",name:"Personal"},{path:"form"},{path:"svg"},{path:"svg/customize"},{path:"task"},{path:"unit-testing"}],this.links=[{name:"Home",url:["home"],iconClass:"fa fa-home"},{name:"About",url:["/navigations/form/invoice"],iconClass:"fa fa-user-circle"}],this.animationService.setRouteAnimation(1)}ngOnInit(){}getRouteAnimation(g){return g.activatedRouteData.animation}static#e=this.\u0275fac=function(b){return new(b||y)(w.Y36(de.Y))};static#t=this.\u0275cmp=w.Xpm({type:y,selectors:[["app-navigations"]],decls:3,vars:2,consts:[[3,"routes","template"]],template:function(b,j){1&b&&(w._UZ(0,"app-navbar",0),w.TgZ(1,"main"),w._UZ(2,"router-outlet"),w.qZA()),2&b&&w.Q6J("routes",j.routes)("template","LIGHT")},dependencies:[H.lC,We],data:{animation:[q]}})}return y})();var qe=I(529);let ke=(()=>{class y{constructor(g){this.httpClient=g}ngOnInit(){this.httpClient.get("assets/data/agenda.md",{responseType:"text"}).subscribe(g=>{this.data=Fe(g),console.log(this.data)})}readMd(){const g={headers:new qe.WM({Accept:"text/plain, */*","Content-Type":"application/json"}),responseType:"text"};this.httpClient.get("assets/data/agenda.md",g).subscribe(b=>{this.data=b})}static#e=this.\u0275fac=function(b){return new(b||y)(w.Y36(qe.eN))};static#t=this.\u0275cmp=w.Xpm({type:y,selectors:[["app-markdown"]],decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(b,j){1&b&&w._UZ(0,"div",0),2&b&&w.Q6J("innerHTML",j.data,w.oJD)}})}return y})();const Fe=y=>y.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/\*\*(.*)\*\*/gim,"<b>$1</b>").replace(/\*(.*)\*/gim,"<i>$1</i>").trim(),Et=[{path:"application",loadChildren:()=>Promise.all([I.e(1189),I.e(8270)]).then(I.bind(I,8270)).then(y=>y.ApplicationModule)},{path:"v2",loadChildren:()=>Promise.all([I.e(6073),I.e(8592),I.e(3819)]).then(I.bind(I,3819)).then(y=>y.PersonalModule)},{path:"audios",loadChildren:()=>Promise.all([I.e(6619),I.e(4859)]).then(I.bind(I,870)).then(y=>y.AudiosModule)},{path:"books",loadChildren:()=>Promise.all([I.e(6619),I.e(1839)]).then(I.bind(I,1839)).then(y=>y.BooksModule)},{path:"bootstrap-design",loadChildren:()=>Promise.all([I.e(6619),I.e(5170),I.e(8521)]).then(I.bind(I,8521)).then(y=>y.BootstrapDesignModule)},{path:"cocktail",loadChildren:()=>Promise.all([I.e(6619),I.e(7539)]).then(I.bind(I,7539)).then(y=>y.CocktailModule)},{path:"cookbook",loadChildren:()=>Promise.all([I.e(6619),I.e(3261)]).then(I.bind(I,3261)).then(y=>y.CookBookModule)},{path:"covid",loadChildren:()=>Promise.all([I.e(1189),I.e(6619),I.e(3980)]).then(I.bind(I,3980)).then(y=>y.CovidModule)},{path:"github",loadChildren:()=>Promise.all([I.e(1189),I.e(6619),I.e(8592),I.e(8580)]).then(I.bind(I,8580)).then(y=>y.GithubModule)},{path:"hacker-ranks",loadChildren:()=>Promise.all([I.e(8554),I.e(8592),I.e(2737)]).then(I.bind(I,2737)).then(y=>y.HackerRanksModule)},{path:"itunes",loadChildren:()=>Promise.all([I.e(6619),I.e(94)]).then(I.bind(I,94)).then(y=>y.ItunesModule)},{path:"movies",loadChildren:()=>Promise.all([I.e(6619),I.e(8592),I.e(9045)]).then(I.bind(I,9045)).then(y=>y.MoviesModule)},{path:"encapsulating",loadChildren:()=>I.e(4333).then(I.bind(I,4333)).then(y=>y.EncapsulatingModule)},{path:"sports",loadChildren:()=>Promise.all([I.e(6619),I.e(7968)]).then(I.bind(I,7968)).then(y=>y.SportsModule)},{path:"shop",loadChildren:()=>Promise.all([I.e(8592),I.e(3787)]).then(I.bind(I,3787)).then(y=>y.ShopModule)},{path:"store",loadChildren:()=>I.e(9065).then(I.bind(I,9065)).then(y=>y.StoreModule)},{path:"ngrx-store",loadChildren:()=>I.e(2138).then(I.bind(I,2138)).then(y=>y.NgrxStoreModule)},{path:"survey",loadChildren:()=>I.e(2404).then(I.bind(I,2404)).then(y=>y.SurveyPollVoterPridictionModule)},{path:"abstract-animation",loadChildren:()=>I.e(2792).then(I.bind(I,2792)).then(y=>y.AbstractAnimationModule)},{path:"animation-game",loadChildren:()=>I.e(3425).then(I.bind(I,3425)).then(y=>y.AnimationGameModule)},{path:"responsive-site",loadChildren:()=>I.e(6085).then(I.bind(I,6085)).then(y=>y.ResponsiveSiteModule)},{path:"mockApi",loadChildren:()=>I.e(7784).then(I.bind(I,7784)).then(y=>y.MockapiModule)},{path:"routeReuse",loadChildren:()=>I.e(772).then(I.bind(I,772)).then(y=>y.RouteReuseStrategyTutsModule)},{path:"sample",loadChildren:()=>I.e(1827).then(I.bind(I,1827)).then(y=>y.SampleModule)},{path:"navigations",component:Ye,children:[{path:"my-site",loadChildren:()=>I.e(7391).then(I.bind(I,7391)).then(y=>y.MysiteModule)},{path:"svg",loadChildren:()=>I.e(3971).then(I.bind(I,3971)).then(y=>y.SvgRendererModule)},{path:"task",loadChildren:()=>Promise.all([I.e(1189),I.e(7473),I.e(8592),I.e(5485)]).then(I.bind(I,5485)).then(y=>y.TaskModule)},{path:"unit-testing",loadChildren:()=>I.e(4376).then(I.bind(I,4376)).then(y=>y.UnitTestingModule)}]},{path:"apps",loadChildren:()=>Promise.all([I.e(5170),I.e(4524),I.e(8592),I.e(8214)]).then(I.bind(I,8214)).then(y=>y.UsefullAppsModule)},{path:"library-ex",loadChildren:()=>Promise.all([I.e(1189),I.e(5170),I.e(4524),I.e(8592),I.e(1306)]).then(I.bind(I,1306)).then(y=>y.LibraryExModule)},{path:"firebase",loadChildren:()=>Promise.all([I.e(1189),I.e(5170),I.e(4524),I.e(7230)]).then(I.bind(I,7230)).then(y=>y.FirebaseModule)},{path:"tutorials",loadChildren:()=>Promise.all([I.e(5170),I.e(3854)]).then(I.bind(I,3854)).then(y=>y.TutorialsModule)},{path:"css",loadChildren:()=>Promise.all([I.e(1189),I.e(8592),I.e(3670)]).then(I.bind(I,149)).then(y=>y.CssLearnModule)},{path:"code-task",loadChildren:()=>I.e(2374).then(I.bind(I,2374)).then(y=>y.CodeTaskModule)},{path:"custom",loadComponent:(y=(0,te.Z)(function*(){return(yield Promise.all([I.e(1189),I.e(8592),I.e(8738)]).then(I.bind(I,8738))).CustomComponent}),function(){return y.apply(this,arguments)})},{path:"declarative",loadChildren:function(){var y=(0,te.Z)(function*(){return(yield I.e(8123).then(I.bind(I,8123))).DeclarativeModule});return function(){return y.apply(this,arguments)}}()},{path:"sidenav",loadChildren:function(){var y=(0,te.Z)(function*(){return(yield I.e(1592).then(I.bind(I,1592))).SidenavModule});return function(){return y.apply(this,arguments)}}()},{path:"certificate",loadChildren:function(){var y=(0,te.Z)(function*(){return(yield I.e(1918).then(I.bind(I,1918))).CertificateModule});return function(){return y.apply(this,arguments)}}()},{path:"systems",loadChildren:function(){var y=(0,te.Z)(function*(){return(yield Promise.all([I.e(8554),I.e(2759)]).then(I.bind(I,2759))).SystemsModule});return function(){return y.apply(this,arguments)}}()},{path:"assignment",loadChildren:function(){var y=(0,te.Z)(function*(){return(yield Promise.all([I.e(1189),I.e(5774)]).then(I.bind(I,5774))).AssignmentModule});return function(){return y.apply(this,arguments)}}()},{path:"",loadChildren:function(){var y=(0,te.Z)(function*(){return(yield Promise.all([I.e(1189),I.e(7473),I.e(6073),I.e(8592),I.e(6281)]).then(I.bind(I,6281))).WebsiteModule});return function(){return y.apply(this,arguments)}}()},{path:"markdown",component:ke},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:""}];var y;let Ct=(()=>{class y{static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275mod=w.oAB({type:y});static#n=this.\u0275inj=w.cJS({imports:[H.Bz.forRoot(Et,{anchorScrolling:"enabled",scrollPositionRestoration:"enabled",useHash:!1}),H.Bz]})}return y})(),Ze=(()=>{class y{constructor(g){this.http=g,this.CONFIGURATION_URL="assets/config/configuration.json"}loadConfiguration(){return this.http.get(this.CONFIGURATION_URL).toPromise().then(g=>(this.configuration=g,g)).catch(g=>{console.error(g)})}getConfiguration(){return this.configuration}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(qe.eN))};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();var Nt=I(1135),bt=I(2843),Je=I(3900),Be=I(9646),ct=I(6805),Pt=I(262),Tt=I(8505),Ht=I(4004);let ir=(()=>{class y{constructor(g){this.http=g,this.alertSubject=new Nt.X(null),this.alertObservable=this.alertSubject.asObservable()}getUser(g){return this.http.get(`https://jsonplaceholder.typicode.com/users/${g}`).pipe((0,Pt.K)(b=>(0,bt._)(b)))}getToDo(g){return this.http.get(`https://jsonplaceholder.typicode.com/todos?userId=${g}`).pipe((0,Pt.K)(b=>(0,bt._)(b)))}setUser(g){console.log(g)}setToDos(g){console.log(g)}initialiseAppUsingObservables(){return this.getUser(5).pipe((0,Je.w)(g=>(this.setUser(g),this.getToDo(g.id).pipe((0,Tt.b)(b=>this.setToDos(b))))),(0,Pt.K)(g=>(this.alertSubject.next(g),(0,Be.of)(g))))}initialiseAppUsingPromises(){return function nt(y,_){const g="object"==typeof _;return new Promise((b,j)=>{let _e,ne=!1;y.subscribe({next:Ie=>{_e=Ie,ne=!0},error:j,complete:()=>{ne?b(_e):g?b(_.defaultValue):j(new ct.K)}})})}(this.initialiseAppUsingObservables())}getAlbums(){return this.http.get("https://jsonplaceholder.typicode.com/albums").pipe((0,Ht.U)(g=>g))}getPhotos(){return this.http.get("https://jsonplaceholder.typicode.com/photos").pipe((0,Ht.U)(g=>g))}getComments(){return this.http.get("https://jsonplaceholder.typicode.com/comments").pipe((0,Ht.U)(g=>g))}deleteToDo(){return this.http.delete("https://jsonplaceholder.typicode.com/todos/2").pipe((0,Ht.U)(g=>g))}getToDos(){return this.http.get("https://jsonplaceholder.typicode.com/todos").pipe((0,Ht.U)(g=>g))}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(qe.eN))};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();var an=I(8311);function Yt(y,_){if(1&y){const g=w.EpF();w.TgZ(0,"div",1),w.NdJ("click",function(){w.CHM(g);const j=w.oxw();return w.KtG(j.showNotification=!j.showNotification)}),w.TgZ(1,"p"),w._uU(2),w.qZA()()}if(2&y){const g=w.oxw();w.xp6(2),w.Oqu(g.notification)}}let Fn=(()=>{class y{constructor(g){this.notificationService=g,this.notificationService.notification$.subscribe(b=>{this.notification=b,console.log(this.notification),this.showNotification=!0})}ngOnInit(){}static#e=this.\u0275fac=function(b){return new(b||y)(w.Y36(an.g))};static#t=this.\u0275cmp=w.Xpm({type:y,selectors:[["app-notification"]],decls:1,vars:1,consts:[["class","notification",3,"click",4,"ngIf"],[1,"notification",3,"click"]],template:function(b,j){1&b&&w.YNc(0,Yt,3,1,"div",0),2&b&&w.Q6J("ngIf",j.notification&&j.showNotification)},dependencies:[ge.O5],styles:[".notification[_ngcontent-%COMP%]{position:absolute;z-index:1;top:5px;line-height:20px;text-align:center;right:5px;background:linear-gradient(-90deg,#cb5cd2,#cc3fa0);color:#fff;font-style:oblique;text-transform:capitalize;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f;min-height:20px;min-width:160px;max-width:300px;padding:15px;cursor:pointer}"]})}return y})(),vn=(()=>{class y{constructor(g,b,j){this.configurationService=g,this.jsonPlaceholderService=b,this.route=j,this.title="portfolio-all-in-one",this.version=w.q4F.major}ngOnInit(){window.addEventListener("beforeinstallprompt",g=>{console.log("'beforeinstallprompt' event was fired.")})}static#e=this.\u0275fac=function(b){return new(b||y)(w.Y36(Ze),w.Y36(ir),w.Y36(H.gz))};static#t=this.\u0275cmp=w.Xpm({type:y,selectors:[["app-root"]],decls:2,vars:0,template:function(b,j){1&b&&w._UZ(0,"app-notification")(1,"router-outlet")},dependencies:[H.lC,Fn]})}return y})();function Fr(y){return new w.vHH(3e3,!1)}function tt(){return typeof window<"u"&&typeof window.document<"u"}function Se(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Oe(y){switch(y.length){case 0:return new X.ZN;case 1:return y[0];default:return new X.ZE(y)}}function Ot(y,_,g,b,j=new Map,ne=new Map){const _e=[],Ie=[];let Xe=-1,pt=null;if(b.forEach(Bt=>{const Gt=Bt.get("offset"),On=Gt==Xe,tn=On&&pt||new Map;Bt.forEach((Vt,bn)=>{let pr=bn,Nr=Vt;if("offset"!==bn)switch(pr=_.normalizePropertyName(pr,_e),Nr){case X.k1:Nr=j.get(bn);break;case X.l3:Nr=ne.get(bn);break;default:Nr=_.normalizeStyleValue(bn,pr,Nr,_e)}tn.set(pr,Nr)}),On||Ie.push(tn),pt=tn,Xe=Gt}),_e.length)throw function Qn(y){return new w.vHH(3502,!1)}();return Ie}function pe(y,_,g,b){switch(_){case"start":y.onStart(()=>b(g&&ve(g,"start",y)));break;case"done":y.onDone(()=>b(g&&ve(g,"done",y)));break;case"destroy":y.onDestroy(()=>b(g&&ve(g,"destroy",y)))}}function ve(y,_,g){const ne=Te(y.element,y.triggerName,y.fromState,y.toState,_||y.phaseName,g.totalTime??y.totalTime,!!g.disabled),_e=y._data;return null!=_e&&(ne._data=_e),ne}function Te(y,_,g,b,j="",ne=0,_e){return{element:y,triggerName:_,fromState:g,toState:b,phaseName:j,totalTime:ne,disabled:!!_e}}function et(y,_,g){let b=y.get(_);return b||y.set(_,b=g),b}function Le(y){const _=y.indexOf(":");return[y.substring(1,_),y.slice(_+1)]}let Rt=(y,_)=>!1,zt=(y,_,g)=>[],Re=null;function Ae(y){const _=y.parentNode||y.host;return _===Re?null:_}(Se()||typeof Element<"u")&&(tt()?(Re=(()=>document.documentElement)(),Rt=(y,_)=>{for(;_;){if(_===y)return!0;_=Ae(_)}return!1}):Rt=(y,_)=>y.contains(_),zt=(y,_,g)=>{if(g)return Array.from(y.querySelectorAll(_));const b=y.querySelector(_);return b?[b]:[]});let Ge=null,Ft=!1;const Ti=Rt,ht=zt;let xt=(()=>{class y{validateStyleProperty(g){return function rn(y){Ge||(Ge=function Ir(){return typeof document<"u"?document.body:null}()||{},Ft=!!Ge.style&&"WebkitAppearance"in Ge.style);let _=!0;return Ge.style&&!function Pe(y){return"ebkit"==y.substring(1,6)}(y)&&(_=y in Ge.style,!_&&Ft&&(_="Webkit"+y.charAt(0).toUpperCase()+y.slice(1)in Ge.style)),_}(g)}matchesElement(g,b){return!1}containsElement(g,b){return Ti(g,b)}getParentElement(g){return Ae(g)}query(g,b,j){return ht(g,b,j)}computeStyle(g,b,j){return j||""}animate(g,b,j,ne,_e,Ie=[],Xe){return new X.ZN(j,ne)}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac}),y})(),Zt=(()=>{class y{}return y.NOOP=new xt,y})();const Rn=1e3,gr="ng-enter",nr="ng-leave",ei="ng-trigger",zr=".ng-trigger",xs="ng-animating",Ts=".ng-animating";function _i(y){if("number"==typeof y)return y;const _=y.match(/^(-?[\.\d]+)(m?s)/);return!_||_.length<2?0:Kr(parseFloat(_[1]),_[2])}function Kr(y,_){return"s"===_?y*Rn:y}function kt(y,_,g){return y.hasOwnProperty("duration")?y:function xn(y,_,g){let j,ne=0,_e="";if("string"==typeof y){const Ie=y.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Ie)return _.push(Fr()),{duration:0,delay:0,easing:""};j=Kr(parseFloat(Ie[1]),Ie[2]);const Xe=Ie[3];null!=Xe&&(ne=Kr(parseFloat(Xe),Ie[4]));const pt=Ie[5];pt&&(_e=pt)}else j=y;if(!g){let Ie=!1,Xe=_.length;j<0&&(_.push(function Mn(){return new w.vHH(3100,!1)}()),Ie=!0),ne<0&&(_.push(function hn(){return new w.vHH(3101,!1)}()),Ie=!0),Ie&&_.splice(Xe,0,Fr())}return{duration:j,delay:ne,easing:_e}}(y,_,g)}function fn(y,_={}){return Object.keys(y).forEach(g=>{_[g]=y[g]}),_}function Sn(y){const _=new Map;return Object.keys(y).forEach(g=>{_.set(g,y[g])}),_}function Xn(y,_=new Map,g){if(g)for(let[b,j]of g)_.set(b,j);for(let[b,j]of y)_.set(b,j);return _}function Mr(y,_,g){return g?_+":"+g+";":""}function Qi(y){let _="";for(let g=0;g<y.style.length;g++){const b=y.style.item(g);_+=Mr(0,b,y.style.getPropertyValue(b))}for(const g in y.style)y.style.hasOwnProperty(g)&&!g.startsWith("_")&&(_+=Mr(0,$t(g),y.style[g]));y.setAttribute("style",_)}function si(y,_,g){y.style&&(_.forEach((b,j)=>{const ne=gt(j);g&&!g.has(j)&&g.set(j,y.style[ne]),y.style[ne]=b}),Se()&&Qi(y))}function An(y,_){y.style&&(_.forEach((g,b)=>{const j=gt(b);y.style[j]=""}),Se()&&Qi(y))}function ar(y){return Array.isArray(y)?1==y.length?y[0]:(0,X.vP)(y):y}const Br=new RegExp("{{\\s*(.+?)\\s*}}","g");function Ys(y){let _=[];if("string"==typeof y){let g;for(;g=Br.exec(y);)_.push(g[1]);Br.lastIndex=0}return _}function Ee(y,_,g){const b=y.toString(),j=b.replace(Br,(ne,_e)=>{let Ie=_[_e];return null==Ie&&(g.push(function It(y){return new w.vHH(3003,!1)}()),Ie=""),Ie.toString()});return j==b?y:j}function it(y){const _=[];let g=y.next();for(;!g.done;)_.push(g.value),g=y.next();return _}const ze=/-+([a-z0-9])/g;function gt(y){return y.replace(ze,(..._)=>_[1].toUpperCase())}function $t(y){return y.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Un(y,_,g){switch(_.type){case 7:return y.visitTrigger(_,g);case 0:return y.visitState(_,g);case 1:return y.visitTransition(_,g);case 2:return y.visitSequence(_,g);case 3:return y.visitGroup(_,g);case 4:return y.visitAnimate(_,g);case 5:return y.visitKeyframes(_,g);case 6:return y.visitStyle(_,g);case 8:return y.visitReference(_,g);case 9:return y.visitAnimateChild(_,g);case 10:return y.visitAnimateRef(_,g);case 11:return y.visitQuery(_,g);case 12:return y.visitStagger(_,g);default:throw function ut(y){return new w.vHH(3004,!1)}()}}function mr(y,_){return window.getComputedStyle(y)[_]}const yn="*";function Ss(y,_){const g=[];return"string"==typeof y?y.split(/\s*,\s*/).forEach(b=>function Qs(y,_,g){if(":"==y[0]){const Xe=function ds(y,_){switch(y){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(g,b)=>parseFloat(b)>parseFloat(g);case":decrement":return(g,b)=>parseFloat(b)<parseFloat(g);default:return _.push(function Yn(y){return new w.vHH(3016,!1)}()),"* => *"}}(y,g);if("function"==typeof Xe)return void _.push(Xe);y=Xe}const b=y.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==b||b.length<4)return g.push(function Tn(y){return new w.vHH(3015,!1)}()),_;const j=b[1],ne=b[2],_e=b[3];_.push(bi(j,_e));"<"==ne[0]&&!(j==yn&&_e==yn)&&_.push(bi(_e,j))}(b,g,_)):g.push(y),g}const sr=new Set(["true","1"]),Ns=new Set(["false","0"]);function bi(y,_){const g=sr.has(y)||Ns.has(y),b=sr.has(_)||Ns.has(_);return(j,ne)=>{let _e=y==yn||y==j,Ie=_==yn||_==ne;return!_e&&g&&"boolean"==typeof j&&(_e=j?sr.has(y):Ns.has(y)),!Ie&&b&&"boolean"==typeof ne&&(Ie=ne?sr.has(_):Ns.has(_)),_e&&Ie}}const qn=new RegExp("s*:selfs*,?","g");function io(y,_,g,b){return new so(y).build(_,g,b)}class so{constructor(_){this._driver=_}build(_,g,b){const j=new wo(g);return this._resetContextStyleTimingState(j),Un(this,ar(_),j)}_resetContextStyleTimingState(_){_.currentQuerySelector="",_.collectedStyles=new Map,_.collectedStyles.set("",new Map),_.currentTime=0}visitTrigger(_,g){let b=g.queryCount=0,j=g.depCount=0;const ne=[],_e=[];return"@"==_.name.charAt(0)&&g.errors.push(function yt(){return new w.vHH(3006,!1)}()),_.definitions.forEach(Ie=>{if(this._resetContextStyleTimingState(g),0==Ie.type){const Xe=Ie,pt=Xe.name;pt.toString().split(/\s*,\s*/).forEach(Bt=>{Xe.name=Bt,ne.push(this.visitState(Xe,g))}),Xe.name=pt}else if(1==Ie.type){const Xe=this.visitTransition(Ie,g);b+=Xe.queryCount,j+=Xe.depCount,_e.push(Xe)}else g.errors.push(function Lt(){return new w.vHH(3007,!1)}())}),{type:7,name:_.name,states:ne,transitions:_e,queryCount:b,depCount:j,options:null}}visitState(_,g){const b=this.visitStyle(_.styles,g),j=_.options&&_.options.params||null;if(b.containsDynamicStyles){const ne=new Set,_e=j||{};b.styles.forEach(Ie=>{Ie instanceof Map&&Ie.forEach(Xe=>{Ys(Xe).forEach(pt=>{_e.hasOwnProperty(pt)||ne.add(pt)})})}),ne.size&&(it(ne.values()),g.errors.push(function Vn(y,_){return new w.vHH(3008,!1)}()))}return{type:0,name:_.name,style:b,options:j?{params:j}:null}}visitTransition(_,g){g.queryCount=0,g.depCount=0;const b=Un(this,ar(_.animation),g);return{type:1,matchers:Ss(_.expr,g.errors),animation:b,queryCount:g.queryCount,depCount:g.depCount,options:po(_.options)}}visitSequence(_,g){return{type:2,steps:_.steps.map(b=>Un(this,b,g)),options:po(_.options)}}visitGroup(_,g){const b=g.currentTime;let j=0;const ne=_.steps.map(_e=>{g.currentTime=b;const Ie=Un(this,_e,g);return j=Math.max(j,g.currentTime),Ie});return g.currentTime=j,{type:3,steps:ne,options:po(_.options)}}visitAnimate(_,g){const b=function Fs(y,_){if(y.hasOwnProperty("duration"))return y;if("number"==typeof y)return go(kt(y,_).duration,0,"");const g=y;if(g.split(/\s+/).some(ne=>"{"==ne.charAt(0)&&"{"==ne.charAt(1))){const ne=go(0,0,"");return ne.dynamic=!0,ne.strValue=g,ne}const j=kt(g,_);return go(j.duration,j.delay,j.easing)}(_.timings,g.errors);g.currentAnimateTimings=b;let j,ne=_.styles?_.styles:(0,X.oB)({});if(5==ne.type)j=this.visitKeyframes(ne,g);else{let _e=_.styles,Ie=!1;if(!_e){Ie=!0;const pt={};b.easing&&(pt.easing=b.easing),_e=(0,X.oB)(pt)}g.currentTime+=b.duration+b.delay;const Xe=this.visitStyle(_e,g);Xe.isEmptyStep=Ie,j=Xe}return g.currentAnimateTimings=null,{type:4,timings:b,style:j,options:null}}visitStyle(_,g){const b=this._makeStyleAst(_,g);return this._validateStyleAst(b,g),b}_makeStyleAst(_,g){const b=[],j=Array.isArray(_.styles)?_.styles:[_.styles];for(let Ie of j)"string"==typeof Ie?Ie===X.l3?b.push(Ie):g.errors.push(new w.vHH(3002,!1)):b.push(Sn(Ie));let ne=!1,_e=null;return b.forEach(Ie=>{if(Ie instanceof Map&&(Ie.has("easing")&&(_e=Ie.get("easing"),Ie.delete("easing")),!ne))for(let Xe of Ie.values())if(Xe.toString().indexOf("{{")>=0){ne=!0;break}}),{type:6,styles:b,easing:_e,offset:_.offset,containsDynamicStyles:ne,options:null}}_validateStyleAst(_,g){const b=g.currentAnimateTimings;let j=g.currentTime,ne=g.currentTime;b&&ne>0&&(ne-=b.duration+b.delay),_.styles.forEach(_e=>{"string"!=typeof _e&&_e.forEach((Ie,Xe)=>{const pt=g.collectedStyles.get(g.currentQuerySelector),Bt=pt.get(Xe);let Gt=!0;Bt&&(ne!=j&&ne>=Bt.startTime&&j<=Bt.endTime&&(g.errors.push(function is(y,_,g,b,j){return new w.vHH(3010,!1)}()),Gt=!1),ne=Bt.startTime),Gt&&pt.set(Xe,{startTime:ne,endTime:j}),g.options&&function kn(y,_,g){const b=_.params||{},j=Ys(y);j.length&&j.forEach(ne=>{b.hasOwnProperty(ne)||g.push(function ii(y){return new w.vHH(3001,!1)}())})}(Ie,g.options,g.errors)})})}visitKeyframes(_,g){const b={type:5,styles:[],options:null};if(!g.currentAnimateTimings)return g.errors.push(function cr(){return new w.vHH(3011,!1)}()),b;let ne=0;const _e=[];let Ie=!1,Xe=!1,pt=0;const Bt=_.steps.map(Nr=>{const Ms=this._makeStyleAst(Nr,g);let Gr=null!=Ms.offset?Ms.offset:function To(y){if("string"==typeof y)return null;let _=null;if(Array.isArray(y))y.forEach(g=>{if(g instanceof Map&&g.has("offset")){const b=g;_=parseFloat(b.get("offset")),b.delete("offset")}});else if(y instanceof Map&&y.has("offset")){const g=y;_=parseFloat(g.get("offset")),g.delete("offset")}return _}(Ms.styles),ms=0;return null!=Gr&&(ne++,ms=Ms.offset=Gr),Xe=Xe||ms<0||ms>1,Ie=Ie||ms<pt,pt=ms,_e.push(ms),Ms});Xe&&g.errors.push(function ln(){return new w.vHH(3012,!1)}()),Ie&&g.errors.push(function Ui(){return new w.vHH(3200,!1)}());const Gt=_.steps.length;let On=0;ne>0&&ne<Gt?g.errors.push(function Qr(){return new w.vHH(3202,!1)}()):0==ne&&(On=1/(Gt-1));const tn=Gt-1,Vt=g.currentTime,bn=g.currentAnimateTimings,pr=bn.duration;return Bt.forEach((Nr,Ms)=>{const Gr=On>0?Ms==tn?1:On*Ms:_e[Ms],ms=Gr*pr;g.currentTime=Vt+bn.delay+ms,bn.duration=ms,this._validateStyleAst(Nr,g),Nr.offset=Gr,b.styles.push(Nr)}),b}visitReference(_,g){return{type:8,animation:Un(this,ar(_.animation),g),options:po(_.options)}}visitAnimateChild(_,g){return g.depCount++,{type:9,options:po(_.options)}}visitAnimateRef(_,g){return{type:10,animation:this.visitReference(_.animation,g),options:po(_.options)}}visitQuery(_,g){const b=g.currentQuerySelector,j=_.options||{};g.queryCount++,g.currentQuery=_;const[ne,_e]=function Al(y){const _=!!y.split(/\s*,\s*/).find(g=>":self"==g);return _&&(y=y.replace(qn,"")),y=y.replace(/@\*/g,zr).replace(/@\w+/g,g=>zr+"-"+g.slice(1)).replace(/:animating/g,Ts),[y,_]}(_.selector);g.currentQuerySelector=b.length?b+" "+ne:ne,et(g.collectedStyles,g.currentQuerySelector,new Map);const Ie=Un(this,ar(_.animation),g);return g.currentQuery=null,g.currentQuerySelector=b,{type:11,selector:ne,limit:j.limit||0,optional:!!j.optional,includeSelf:_e,animation:Ie,originalSelector:_.selector,options:po(_.options)}}visitStagger(_,g){g.currentQuery||g.errors.push(function Tr(){return new w.vHH(3013,!1)}());const b="full"===_.timings?{duration:0,delay:0,easing:"full"}:kt(_.timings,g.errors,!0);return{type:12,animation:Un(this,ar(_.animation),g),timings:b,options:null}}}class wo{constructor(_){this.errors=_,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function po(y){return y?(y=fn(y)).params&&(y.params=function Vo(y){return y?fn(y):null}(y.params)):y={},y}function go(y,_,g){return{duration:y,delay:_,easing:g}}function ss(y,_,g,b,j,ne,_e=null,Ie=!1){return{type:1,element:y,keyframes:_,preStyleProps:g,postStyleProps:b,duration:j,delay:ne,totalTime:j+ne,easing:_e,subTimeline:Ie}}class Bi{constructor(){this._map=new Map}get(_){return this._map.get(_)||[]}append(_,g){let b=this._map.get(_);b||this._map.set(_,b=[]),b.push(...g)}has(_){return this._map.has(_)}clear(){this._map.clear()}}const mo=new RegExp(":enter","g"),qs=new RegExp(":leave","g");function ks(y,_,g,b,j,ne=new Map,_e=new Map,Ie,Xe,pt=[]){return(new ua).buildKeyframes(y,_,g,b,j,ne,_e,Ie,Xe,pt)}class ua{buildKeyframes(_,g,b,j,ne,_e,Ie,Xe,pt,Bt=[]){pt=pt||new Bi;const Gt=new bs(_,g,pt,j,ne,Bt,[]);Gt.options=Xe;const On=Xe.delay?_i(Xe.delay):0;Gt.currentTimeline.delayNextStep(On),Gt.currentTimeline.setStyles([_e],null,Gt.errors,Xe),Un(this,b,Gt);const tn=Gt.timelines.filter(Vt=>Vt.containsAnimation());if(tn.length&&Ie.size){let Vt;for(let bn=tn.length-1;bn>=0;bn--){const pr=tn[bn];if(pr.element===g){Vt=pr;break}}Vt&&!Vt.allowOnlyTimelineStyles()&&Vt.setStyles([Ie],null,Gt.errors,Xe)}return tn.length?tn.map(Vt=>Vt.buildKeyframes()):[ss(g,[],[],[],0,On,"",!1)]}visitTrigger(_,g){}visitState(_,g){}visitTransition(_,g){}visitAnimateChild(_,g){const b=g.subInstructions.get(g.element);if(b){const j=g.createSubContext(_.options),ne=g.currentTimeline.currentTime,_e=this._visitSubInstructions(b,j,j.options);ne!=_e&&g.transformIntoNewTimeline(_e)}g.previousNode=_}visitAnimateRef(_,g){const b=g.createSubContext(_.options);b.transformIntoNewTimeline(),this._applyAnimationRefDelays([_.options,_.animation.options],g,b),this.visitReference(_.animation,b),g.transformIntoNewTimeline(b.currentTimeline.currentTime),g.previousNode=_}_applyAnimationRefDelays(_,g,b){for(const j of _){const ne=j?.delay;if(ne){const _e="number"==typeof ne?ne:_i(Ee(ne,j?.params??{},g.errors));b.delayNextStep(_e)}}}_visitSubInstructions(_,g,b){let ne=g.currentTimeline.currentTime;const _e=null!=b.duration?_i(b.duration):null,Ie=null!=b.delay?_i(b.delay):null;return 0!==_e&&_.forEach(Xe=>{const pt=g.appendInstructionToTimeline(Xe,_e,Ie);ne=Math.max(ne,pt.duration+pt.delay)}),ne}visitReference(_,g){g.updateOptions(_.options,!0),Un(this,_.animation,g),g.previousNode=_}visitSequence(_,g){const b=g.subContextCount;let j=g;const ne=_.options;if(ne&&(ne.params||ne.delay)&&(j=g.createSubContext(ne),j.transformIntoNewTimeline(),null!=ne.delay)){6==j.previousNode.type&&(j.currentTimeline.snapshotCurrentStyles(),j.previousNode=os);const _e=_i(ne.delay);j.delayNextStep(_e)}_.steps.length&&(_.steps.forEach(_e=>Un(this,_e,j)),j.currentTimeline.applyStylesToKeyframe(),j.subContextCount>b&&j.transformIntoNewTimeline()),g.previousNode=_}visitGroup(_,g){const b=[];let j=g.currentTimeline.currentTime;const ne=_.options&&_.options.delay?_i(_.options.delay):0;_.steps.forEach(_e=>{const Ie=g.createSubContext(_.options);ne&&Ie.delayNextStep(ne),Un(this,_e,Ie),j=Math.max(j,Ie.currentTimeline.currentTime),b.push(Ie.currentTimeline)}),b.forEach(_e=>g.currentTimeline.mergeTimelineCollectedStyles(_e)),g.transformIntoNewTimeline(j),g.previousNode=_}_visitTiming(_,g){if(_.dynamic){const b=_.strValue;return kt(g.params?Ee(b,g.params,g.errors):b,g.errors)}return{duration:_.duration,delay:_.delay,easing:_.easing}}visitAnimate(_,g){const b=g.currentAnimateTimings=this._visitTiming(_.timings,g),j=g.currentTimeline;b.delay&&(g.incrementTime(b.delay),j.snapshotCurrentStyles());const ne=_.style;5==ne.type?this.visitKeyframes(ne,g):(g.incrementTime(b.duration),this.visitStyle(ne,g),j.applyStylesToKeyframe()),g.currentAnimateTimings=null,g.previousNode=_}visitStyle(_,g){const b=g.currentTimeline,j=g.currentAnimateTimings;!j&&b.hasCurrentStyleProperties()&&b.forwardFrame();const ne=j&&j.easing||_.easing;_.isEmptyStep?b.applyEmptyStep(ne):b.setStyles(_.styles,ne,g.errors,g.options),g.previousNode=_}visitKeyframes(_,g){const b=g.currentAnimateTimings,j=g.currentTimeline.duration,ne=b.duration,Ie=g.createSubContext().currentTimeline;Ie.easing=b.easing,_.styles.forEach(Xe=>{Ie.forwardTime((Xe.offset||0)*ne),Ie.setStyles(Xe.styles,Xe.easing,g.errors,g.options),Ie.applyStylesToKeyframe()}),g.currentTimeline.mergeTimelineCollectedStyles(Ie),g.transformIntoNewTimeline(j+ne),g.previousNode=_}visitQuery(_,g){const b=g.currentTimeline.currentTime,j=_.options||{},ne=j.delay?_i(j.delay):0;ne&&(6===g.previousNode.type||0==b&&g.currentTimeline.hasCurrentStyleProperties())&&(g.currentTimeline.snapshotCurrentStyles(),g.previousNode=os);let _e=b;const Ie=g.invokeQuery(_.selector,_.originalSelector,_.limit,_.includeSelf,!!j.optional,g.errors);g.currentQueryTotal=Ie.length;let Xe=null;Ie.forEach((pt,Bt)=>{g.currentQueryIndex=Bt;const Gt=g.createSubContext(_.options,pt);ne&&Gt.delayNextStep(ne),pt===g.element&&(Xe=Gt.currentTimeline),Un(this,_.animation,Gt),Gt.currentTimeline.applyStylesToKeyframe(),_e=Math.max(_e,Gt.currentTimeline.currentTime)}),g.currentQueryIndex=0,g.currentQueryTotal=0,g.transformIntoNewTimeline(_e),Xe&&(g.currentTimeline.mergeTimelineCollectedStyles(Xe),g.currentTimeline.snapshotCurrentStyles()),g.previousNode=_}visitStagger(_,g){const b=g.parentContext,j=g.currentTimeline,ne=_.timings,_e=Math.abs(ne.duration),Ie=_e*(g.currentQueryTotal-1);let Xe=_e*g.currentQueryIndex;switch(ne.duration<0?"reverse":ne.easing){case"reverse":Xe=Ie-Xe;break;case"full":Xe=b.currentStaggerTime}const Bt=g.currentTimeline;Xe&&Bt.delayNextStep(Xe);const Gt=Bt.currentTime;Un(this,_.animation,g),g.previousNode=_,b.currentStaggerTime=j.currentTime-Gt+(j.startTime-b.currentTimeline.startTime)}}const os={};class bs{constructor(_,g,b,j,ne,_e,Ie,Xe){this._driver=_,this.element=g,this.subInstructions=b,this._enterClassName=j,this._leaveClassName=ne,this.errors=_e,this.timelines=Ie,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=os,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Xe||new Pn(this._driver,g,0),Ie.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(_,g){if(!_)return;const b=_;let j=this.options;null!=b.duration&&(j.duration=_i(b.duration)),null!=b.delay&&(j.delay=_i(b.delay));const ne=b.params;if(ne){let _e=j.params;_e||(_e=this.options.params={}),Object.keys(ne).forEach(Ie=>{(!g||!_e.hasOwnProperty(Ie))&&(_e[Ie]=Ee(ne[Ie],_e,this.errors))})}}_copyOptions(){const _={};if(this.options){const g=this.options.params;if(g){const b=_.params={};Object.keys(g).forEach(j=>{b[j]=g[j]})}}return _}createSubContext(_=null,g,b){const j=g||this.element,ne=new bs(this._driver,j,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(j,b||0));return ne.previousNode=this.previousNode,ne.currentAnimateTimings=this.currentAnimateTimings,ne.options=this._copyOptions(),ne.updateOptions(_),ne.currentQueryIndex=this.currentQueryIndex,ne.currentQueryTotal=this.currentQueryTotal,ne.parentContext=this,this.subContextCount++,ne}transformIntoNewTimeline(_){return this.previousNode=os,this.currentTimeline=this.currentTimeline.fork(this.element,_),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(_,g,b){const j={duration:g??_.duration,delay:this.currentTimeline.currentTime+(b??0)+_.delay,easing:""},ne=new So(this._driver,_.element,_.keyframes,_.preStyleProps,_.postStyleProps,j,_.stretchStartingKeyframe);return this.timelines.push(ne),j}incrementTime(_){this.currentTimeline.forwardTime(this.currentTimeline.duration+_)}delayNextStep(_){_>0&&this.currentTimeline.delayNextStep(_)}invokeQuery(_,g,b,j,ne,_e){let Ie=[];if(j&&Ie.push(this.element),_.length>0){_=(_=_.replace(mo,"."+this._enterClassName)).replace(qs,"."+this._leaveClassName);let pt=this._driver.query(this.element,_,1!=b);0!==b&&(pt=b<0?pt.slice(pt.length+b,pt.length):pt.slice(0,b)),Ie.push(...pt)}return!ne&&0==Ie.length&&_e.push(function Ar(y){return new w.vHH(3014,!1)}()),Ie}}class Pn{constructor(_,g,b,j){this._driver=_,this.element=g,this.startTime=b,this._elementTimelineStylesLookup=j,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(g),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(g,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(_){const g=1===this._keyframes.size&&this._pendingStyles.size;this.duration||g?(this.forwardTime(this.currentTime+_),g&&this.snapshotCurrentStyles()):this.startTime+=_}fork(_,g){return this.applyStylesToKeyframe(),new Pn(this._driver,_,g||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(_){this.applyStylesToKeyframe(),this.duration=_,this._loadKeyframe()}_updateStyle(_,g){this._localTimelineStyles.set(_,g),this._globalTimelineStyles.set(_,g),this._styleSummary.set(_,{time:this.currentTime,value:g})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(_){_&&this._previousKeyframe.set("easing",_);for(let[g,b]of this._globalTimelineStyles)this._backFill.set(g,b||X.l3),this._currentKeyframe.set(g,X.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(_,g,b,j){g&&this._previousKeyframe.set("easing",g);const ne=j&&j.params||{},_e=function wa(y,_){const g=new Map;let b;return y.forEach(j=>{if("*"===j){b=b||_.keys();for(let ne of b)g.set(ne,X.l3)}else Xn(j,g)}),g}(_,this._globalTimelineStyles);for(let[Ie,Xe]of _e){const pt=Ee(Xe,ne,b);this._pendingStyles.set(Ie,pt),this._localTimelineStyles.has(Ie)||this._backFill.set(Ie,this._globalTimelineStyles.get(Ie)??X.l3),this._updateStyle(Ie,pt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((_,g)=>{this._currentKeyframe.set(g,_)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((_,g)=>{this._currentKeyframe.has(g)||this._currentKeyframe.set(g,_)}))}snapshotCurrentStyles(){for(let[_,g]of this._localTimelineStyles)this._pendingStyles.set(_,g),this._updateStyle(_,g)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const _=[];for(let g in this._currentKeyframe)_.push(g);return _}mergeTimelineCollectedStyles(_){_._styleSummary.forEach((g,b)=>{const j=this._styleSummary.get(b);(!j||g.time>j.time)&&this._updateStyle(b,g.value)})}buildKeyframes(){this.applyStylesToKeyframe();const _=new Set,g=new Set,b=1===this._keyframes.size&&0===this.duration;let j=[];this._keyframes.forEach((Ie,Xe)=>{const pt=Xn(Ie,new Map,this._backFill);pt.forEach((Bt,Gt)=>{Bt===X.k1?_.add(Gt):Bt===X.l3&&g.add(Gt)}),b||pt.set("offset",Xe/this.duration),j.push(pt)});const ne=_.size?it(_.values()):[],_e=g.size?it(g.values()):[];if(b){const Ie=j[0],Xe=new Map(Ie);Ie.set("offset",0),Xe.set("offset",1),j=[Ie,Xe]}return ss(this.element,j,ne,_e,this.duration,this.startTime,this.easing,!1)}}class So extends Pn{constructor(_,g,b,j,ne,_e,Ie=!1){super(_,g,_e.delay),this.keyframes=b,this.preStyleProps=j,this.postStyleProps=ne,this._stretchStartingKeyframe=Ie,this.timings={duration:_e.duration,delay:_e.delay,easing:_e.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let _=this.keyframes,{delay:g,duration:b,easing:j}=this.timings;if(this._stretchStartingKeyframe&&g){const ne=[],_e=b+g,Ie=g/_e,Xe=Xn(_[0]);Xe.set("offset",0),ne.push(Xe);const pt=Xn(_[0]);pt.set("offset",vs(Ie)),ne.push(pt);const Bt=_.length-1;for(let Gt=1;Gt<=Bt;Gt++){let On=Xn(_[Gt]);const tn=On.get("offset");On.set("offset",vs((g+tn*b)/_e)),ne.push(On)}b=_e,g=0,j="",_=ne}return ss(this.element,_,this.preStyleProps,this.postStyleProps,b,g,j,!0)}}function vs(y,_=3){const g=Math.pow(10,_-1);return Math.round(y*g)/g}class xi{}const Ei=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class yo extends xi{normalizePropertyName(_,g){return gt(_)}normalizeStyleValue(_,g,b,j){let ne="";const _e=b.toString().trim();if(Ei.has(g)&&0!==b&&"0"!==b)if("number"==typeof b)ne="px";else{const Ie=b.match(/^[+-]?[\d\.]+([a-z]*)$/);Ie&&0==Ie[1].length&&j.push(function Ue(y,_){return new w.vHH(3005,!1)}())}return _e+ne}}function hs(y,_,g,b,j,ne,_e,Ie,Xe,pt,Bt,Gt,On){return{type:0,element:y,triggerName:_,isRemovalTransition:j,fromState:g,fromStyles:ne,toState:b,toStyles:_e,timelines:Ie,queriedElements:Xe,preStyleProps:pt,postStyleProps:Bt,totalTime:Gt,errors:On}}const Lr={};class qi{constructor(_,g,b){this._triggerName=_,this.ast=g,this._stateStyles=b}match(_,g,b,j){return function Di(y,_,g,b,j){return y.some(ne=>ne(_,g,b,j))}(this.ast.matchers,_,g,b,j)}buildStyles(_,g,b){let j=this._stateStyles.get("*");return void 0!==_&&(j=this._stateStyles.get(_?.toString())||j),j?j.buildStyles(g,b):new Map}build(_,g,b,j,ne,_e,Ie,Xe,pt,Bt){const Gt=[],On=this.ast.options&&this.ast.options.params||Lr,Vt=this.buildStyles(b,Ie&&Ie.params||Lr,Gt),bn=Xe&&Xe.params||Lr,pr=this.buildStyles(j,bn,Gt),Nr=new Set,Ms=new Map,Gr=new Map,ms="void"===j,Da={params:as(bn,On),delay:this.ast.options?.delay},Ia=Bt?[]:ks(_,g,this.ast.animation,ne,_e,Vt,pr,Da,pt,Gt);let ki=0;if(Ia.forEach(La=>{ki=Math.max(La.duration+La.delay,ki)}),Gt.length)return hs(g,this._triggerName,b,j,ms,Vt,pr,[],[],Ms,Gr,ki,Gt);Ia.forEach(La=>{const Cl=La.element,uc=et(Ms,Cl,new Set);La.preStyleProps.forEach(Eo=>uc.add(Eo));const Jn=et(Gr,Cl,new Set);La.postStyleProps.forEach(Eo=>Jn.add(Eo)),Cl!==g&&Nr.add(Cl)});const Ka=it(Nr.values());return hs(g,this._triggerName,b,j,ms,Vt,pr,Ia,Ka,Ms,Gr,ki)}}function as(y,_){const g=fn(_);for(const b in y)y.hasOwnProperty(b)&&null!=y[b]&&(g[b]=y[b]);return g}class jo{constructor(_,g,b){this.styles=_,this.defaultParams=g,this.normalizer=b}buildStyles(_,g){const b=new Map,j=fn(this.defaultParams);return Object.keys(_).forEach(ne=>{const _e=_[ne];null!==_e&&(j[ne]=_e)}),this.styles.styles.forEach(ne=>{"string"!=typeof ne&&ne.forEach((_e,Ie)=>{_e&&(_e=Ee(_e,j,g));const Xe=this.normalizer.normalizePropertyName(Ie,g);_e=this.normalizer.normalizeStyleValue(Ie,Xe,_e,g),b.set(Ie,_e)})}),b}}class Zi{constructor(_,g,b){this.name=_,this.ast=g,this._normalizer=b,this.transitionFactories=[],this.states=new Map,g.states.forEach(j=>{this.states.set(j.name,new jo(j.style,j.options&&j.options.params||{},b))}),Es(this.states,"true","1"),Es(this.states,"false","0"),g.transitions.forEach(j=>{this.transitionFactories.push(new qi(_,j,this.states))}),this.fallbackTransition=function Ho(y,_,g){return new qi(y,{type:1,animation:{type:2,steps:[],options:null},matchers:[(_e,Ie)=>!0],options:null,queryCount:0,depCount:0},_)}(_,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(_,g,b,j){return this.transitionFactories.find(_e=>_e.match(_,g,b,j))||null}matchStyles(_,g,b){return this.fallbackTransition.buildStyles(_,g,b)}}function Es(y,_,g){y.has(_)?y.has(g)||y.set(g,y.get(_)):y.has(g)&&y.set(_,y.get(g))}const Qa=new Bi;class ao{constructor(_,g,b){this.bodyNode=_,this._driver=g,this._normalizer=b,this._animations=new Map,this._playersById=new Map,this.players=[]}register(_,g){const b=[],j=[],ne=io(this._driver,g,b,j);if(b.length)throw function yi(y){return new w.vHH(3503,!1)}();this._animations.set(_,ne)}_buildPlayer(_,g,b){const j=_.element,ne=Ot(0,this._normalizer,0,_.keyframes,g,b);return this._driver.animate(j,ne,_.duration,_.delay,_.easing,[],!0)}create(_,g,b={}){const j=[],ne=this._animations.get(_);let _e;const Ie=new Map;if(ne?(_e=ks(this._driver,g,ne,gr,nr,new Map,new Map,b,Qa,j),_e.forEach(Bt=>{const Gt=et(Ie,Bt.element,new Map);Bt.postStyleProps.forEach(On=>Gt.set(On,null))})):(j.push(function Ur(){return new w.vHH(3300,!1)}()),_e=[]),j.length)throw function mi(y){return new w.vHH(3504,!1)}();Ie.forEach((Bt,Gt)=>{Bt.forEach((On,tn)=>{Bt.set(tn,this._driver.computeStyle(Gt,tn,X.l3))})});const pt=Oe(_e.map(Bt=>{const Gt=Ie.get(Bt.element);return this._buildPlayer(Bt,new Map,Gt)}));return this._playersById.set(_,pt),pt.onDestroy(()=>this.destroy(_)),this.players.push(pt),pt}destroy(_){const g=this._getPlayer(_);g.destroy(),this._playersById.delete(_);const b=this.players.indexOf(g);b>=0&&this.players.splice(b,1)}_getPlayer(_){const g=this._playersById.get(_);if(!g)throw function Vr(y){return new w.vHH(3301,!1)}();return g}listen(_,g,b,j){const ne=Te(g,"","","");return pe(this._getPlayer(_),b,ne,j),()=>{}}command(_,g,b,j){if("register"==b)return void this.register(_,j[0]);if("create"==b)return void this.create(_,g,j[0]||{});const ne=this._getPlayer(_);switch(b){case"play":ne.play();break;case"pause":ne.pause();break;case"reset":ne.reset();break;case"restart":ne.restart();break;case"finish":ne.finish();break;case"init":ne.init();break;case"setPosition":ne.setPosition(parseFloat(j[0]));break;case"destroy":this.destroy(_)}}}const Ta="ng-animate-queued",Nn="ng-animate-disabled",U=[],ue={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ot={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Qt="__ng_removed";class Zr{get params(){return this.options.params}constructor(_,g=""){this.namespaceId=g;const b=_&&_.hasOwnProperty("value");if(this.value=function Xi(y){return y??null}(b?_.value:_),b){const ne=fn(_);delete ne.value,this.options=ne}else this.options={};this.options.params||(this.options.params={})}absorbOptions(_){const g=_.params;if(g){const b=this.options.params;Object.keys(g).forEach(j=>{null==b[j]&&(b[j]=g[j])})}}}const mt="void",rr=new Zr(mt);class Go{constructor(_,g,b){this.id=_,this.hostElement=g,this._engine=b,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+_,hi(g,this._hostClassName)}listen(_,g,b,j){if(!this._triggers.has(g))throw function ci(y,_){return new w.vHH(3302,!1)}();if(null==b||0==b.length)throw function _r(y){return new w.vHH(3303,!1)}();if(!function Wo(y){return"start"==y||"done"==y}(b))throw function Vi(y,_){return new w.vHH(3400,!1)}();const ne=et(this._elementListeners,_,[]),_e={name:g,phase:b,callback:j};ne.push(_e);const Ie=et(this._engine.statesByElement,_,new Map);return Ie.has(g)||(hi(_,ei),hi(_,ei+"-"+g),Ie.set(g,rr)),()=>{this._engine.afterFlush(()=>{const Xe=ne.indexOf(_e);Xe>=0&&ne.splice(Xe,1),this._triggers.has(g)||Ie.delete(g)})}}register(_,g){return!this._triggers.has(_)&&(this._triggers.set(_,g),!0)}_getTrigger(_){const g=this._triggers.get(_);if(!g)throw function Hn(y){return new w.vHH(3401,!1)}();return g}trigger(_,g,b,j=!0){const ne=this._getTrigger(g),_e=new Ni(this.id,g,_);let Ie=this._engine.statesByElement.get(_);Ie||(hi(_,ei),hi(_,ei+"-"+g),this._engine.statesByElement.set(_,Ie=new Map));let Xe=Ie.get(g);const pt=new Zr(b,this.id);if(!(b&&b.hasOwnProperty("value"))&&Xe&&pt.absorbOptions(Xe.options),Ie.set(g,pt),Xe||(Xe=rr),pt.value!==mt&&Xe.value===pt.value){if(!function Ds(y,_){const g=Object.keys(y),b=Object.keys(_);if(g.length!=b.length)return!1;for(let j=0;j<g.length;j++){const ne=g[j];if(!_.hasOwnProperty(ne)||y[ne]!==_[ne])return!1}return!0}(Xe.params,pt.params)){const bn=[],pr=ne.matchStyles(Xe.value,Xe.params,bn),Nr=ne.matchStyles(pt.value,pt.params,bn);bn.length?this._engine.reportError(bn):this._engine.afterFlush(()=>{An(_,pr),si(_,Nr)})}return}const On=et(this._engine.playersByElement,_,[]);On.forEach(bn=>{bn.namespaceId==this.id&&bn.triggerName==g&&bn.queued&&bn.destroy()});let tn=ne.matchTransition(Xe.value,pt.value,_,pt.params),Vt=!1;if(!tn){if(!j)return;tn=ne.fallbackTransition,Vt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:_,triggerName:g,transition:tn,fromState:Xe,toState:pt,player:_e,isFallbackTransition:Vt}),Vt||(hi(_,Ta),_e.onStart(()=>{oi(_,Ta)})),_e.onDone(()=>{let bn=this.players.indexOf(_e);bn>=0&&this.players.splice(bn,1);const pr=this._engine.playersByElement.get(_);if(pr){let Nr=pr.indexOf(_e);Nr>=0&&pr.splice(Nr,1)}}),this.players.push(_e),On.push(_e),_e}deregister(_){this._triggers.delete(_),this._engine.statesByElement.forEach(g=>g.delete(_)),this._elementListeners.forEach((g,b)=>{this._elementListeners.set(b,g.filter(j=>j.name!=_))})}clearElementCache(_){this._engine.statesByElement.delete(_),this._elementListeners.delete(_);const g=this._engine.playersByElement.get(_);g&&(g.forEach(b=>b.destroy()),this._engine.playersByElement.delete(_))}_signalRemovalForInnerTriggers(_,g){const b=this._engine.driver.query(_,zr,!0);b.forEach(j=>{if(j[Qt])return;const ne=this._engine.fetchNamespacesByElement(j);ne.size?ne.forEach(_e=>_e.triggerLeaveAnimation(j,g,!1,!0)):this.clearElementCache(j)}),this._engine.afterFlushAnimationsDone(()=>b.forEach(j=>this.clearElementCache(j)))}triggerLeaveAnimation(_,g,b,j){const ne=this._engine.statesByElement.get(_),_e=new Map;if(ne){const Ie=[];if(ne.forEach((Xe,pt)=>{if(_e.set(pt,Xe.value),this._triggers.has(pt)){const Bt=this.trigger(_,pt,mt,j);Bt&&Ie.push(Bt)}}),Ie.length)return this._engine.markElementAsRemoved(this.id,_,!0,g,_e),b&&Oe(Ie).onDone(()=>this._engine.processLeaveNode(_)),!0}return!1}prepareLeaveAnimationListeners(_){const g=this._elementListeners.get(_),b=this._engine.statesByElement.get(_);if(g&&b){const j=new Set;g.forEach(ne=>{const _e=ne.name;if(j.has(_e))return;j.add(_e);const Xe=this._triggers.get(_e).fallbackTransition,pt=b.get(_e)||rr,Bt=new Zr(mt),Gt=new Ni(this.id,_e,_);this._engine.totalQueuedPlayers++,this._queue.push({element:_,triggerName:_e,transition:Xe,fromState:pt,toState:Bt,player:Gt,isFallbackTransition:!0})})}}removeNode(_,g){const b=this._engine;if(_.childElementCount&&this._signalRemovalForInnerTriggers(_,g),this.triggerLeaveAnimation(_,g,!0))return;let j=!1;if(b.totalAnimations){const ne=b.players.length?b.playersByQueriedElement.get(_):[];if(ne&&ne.length)j=!0;else{let _e=_;for(;_e=_e.parentNode;)if(b.statesByElement.get(_e)){j=!0;break}}}if(this.prepareLeaveAnimationListeners(_),j)b.markElementAsRemoved(this.id,_,!1,g);else{const ne=_[Qt];(!ne||ne===ue)&&(b.afterFlush(()=>this.clearElementCache(_)),b.destroyInnerAnimations(_),b._onRemovalComplete(_,g))}}insertNode(_,g){hi(_,this._hostClassName)}drainQueuedTransitions(_){const g=[];return this._queue.forEach(b=>{const j=b.player;if(j.destroyed)return;const ne=b.element,_e=this._elementListeners.get(ne);_e&&_e.forEach(Ie=>{if(Ie.name==b.triggerName){const Xe=Te(ne,b.triggerName,b.fromState.value,b.toState.value);Xe._data=_,pe(b.player,Ie.phase,Xe,Ie.callback)}}),j.markedForDestroy?this._engine.afterFlush(()=>{j.destroy()}):g.push(b)}),this._queue=[],g.sort((b,j)=>{const ne=b.transition.ast.depCount,_e=j.transition.ast.depCount;return 0==ne||0==_e?ne-_e:this._engine.driver.containsElement(b.element,j.element)?1:-1})}destroy(_){this.players.forEach(g=>g.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,_)}elementContainsData(_){let g=!1;return this._elementListeners.has(_)&&(g=!0),g=!!this._queue.find(b=>b.element===_)||g,g}}class nu{_onRemovalComplete(_,g){this.onRemovalComplete(_,g)}constructor(_,g,b){this.bodyNode=_,this.driver=g,this._normalizer=b,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(j,ne)=>{}}get queuedPlayers(){const _=[];return this._namespaceList.forEach(g=>{g.players.forEach(b=>{b.queued&&_.push(b)})}),_}createNamespace(_,g){const b=new Go(_,g,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,g)?this._balanceNamespaceList(b,g):(this.newHostElements.set(g,b),this.collectEnterElement(g)),this._namespaceLookup[_]=b}_balanceNamespaceList(_,g){const b=this._namespaceList,j=this.namespacesByHostElement;if(b.length-1>=0){let _e=!1,Ie=this.driver.getParentElement(g);for(;Ie;){const Xe=j.get(Ie);if(Xe){const pt=b.indexOf(Xe);b.splice(pt+1,0,_),_e=!0;break}Ie=this.driver.getParentElement(Ie)}_e||b.unshift(_)}else b.push(_);return j.set(g,_),_}register(_,g){let b=this._namespaceLookup[_];return b||(b=this.createNamespace(_,g)),b}registerTrigger(_,g,b){let j=this._namespaceLookup[_];j&&j.register(g,b)&&this.totalAnimations++}destroy(_,g){if(!_)return;const b=this._fetchNamespace(_);this.afterFlush(()=>{this.namespacesByHostElement.delete(b.hostElement),delete this._namespaceLookup[_];const j=this._namespaceList.indexOf(b);j>=0&&this._namespaceList.splice(j,1)}),this.afterFlushAnimationsDone(()=>b.destroy(g))}_fetchNamespace(_){return this._namespaceLookup[_]}fetchNamespacesByElement(_){const g=new Set,b=this.statesByElement.get(_);if(b)for(let j of b.values())if(j.namespaceId){const ne=this._fetchNamespace(j.namespaceId);ne&&g.add(ne)}return g}trigger(_,g,b,j){if(fs(g)){const ne=this._fetchNamespace(_);if(ne)return ne.trigger(g,b,j),!0}return!1}insertNode(_,g,b,j){if(!fs(g))return;const ne=g[Qt];if(ne&&ne.setForRemoval){ne.setForRemoval=!1,ne.setForMove=!0;const _e=this.collectedLeaveElements.indexOf(g);_e>=0&&this.collectedLeaveElements.splice(_e,1)}if(_){const _e=this._fetchNamespace(_);_e&&_e.insertNode(g,b)}j&&this.collectEnterElement(g)}collectEnterElement(_){this.collectedEnterElements.push(_)}markElementAsDisabled(_,g){g?this.disabledNodes.has(_)||(this.disabledNodes.add(_),hi(_,Nn)):this.disabledNodes.has(_)&&(this.disabledNodes.delete(_),oi(_,Nn))}removeNode(_,g,b,j){if(fs(g)){const ne=_?this._fetchNamespace(_):null;if(ne?ne.removeNode(g,j):this.markElementAsRemoved(_,g,!1,j),b){const _e=this.namespacesByHostElement.get(g);_e&&_e.id!==_&&_e.removeNode(g,j)}}else this._onRemovalComplete(g,j)}markElementAsRemoved(_,g,b,j,ne){this.collectedLeaveElements.push(g),g[Qt]={namespaceId:_,setForRemoval:j,hasAnimation:b,removedBeforeQueried:!1,previousTriggersValues:ne}}listen(_,g,b,j,ne){return fs(g)?this._fetchNamespace(_).listen(g,b,j,ne):()=>{}}_buildInstruction(_,g,b,j,ne){return _.transition.build(this.driver,_.element,_.fromState.value,_.toState.value,b,j,_.fromState.options,_.toState.options,g,ne)}destroyInnerAnimations(_){let g=this.driver.query(_,zr,!0);g.forEach(b=>this.destroyActiveAnimationsForElement(b)),0!=this.playersByQueriedElement.size&&(g=this.driver.query(_,Ts,!0),g.forEach(b=>this.finishActiveQueriedAnimationOnElement(b)))}destroyActiveAnimationsForElement(_){const g=this.playersByElement.get(_);g&&g.forEach(b=>{b.queued?b.markedForDestroy=!0:b.destroy()})}finishActiveQueriedAnimationOnElement(_){const g=this.playersByQueriedElement.get(_);g&&g.forEach(b=>b.finish())}whenRenderingDone(){return new Promise(_=>{if(this.players.length)return Oe(this.players).onDone(()=>_());_()})}processLeaveNode(_){const g=_[Qt];if(g&&g.setForRemoval){if(_[Qt]=ue,g.namespaceId){this.destroyInnerAnimations(_);const b=this._fetchNamespace(g.namespaceId);b&&b.clearElementCache(_)}this._onRemovalComplete(_,g.setForRemoval)}_.classList?.contains(Nn)&&this.markElementAsDisabled(_,!1),this.driver.query(_,".ng-animate-disabled",!0).forEach(b=>{this.markElementAsDisabled(b,!1)})}flush(_=-1){let g=[];if(this.newHostElements.size&&(this.newHostElements.forEach((b,j)=>this._balanceNamespaceList(b,j)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let b=0;b<this.collectedEnterElements.length;b++)hi(this.collectedEnterElements[b],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const b=[];try{g=this._flushAnimations(b,_)}finally{for(let j=0;j<b.length;j++)b[j]()}}else for(let b=0;b<this.collectedLeaveElements.length;b++)this.processLeaveNode(this.collectedLeaveElements[b]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(b=>b()),this._flushFns=[],this._whenQuietFns.length){const b=this._whenQuietFns;this._whenQuietFns=[],g.length?Oe(g).onDone(()=>{b.forEach(j=>j())}):b.forEach(j=>j())}}reportError(_){throw function Yi(y){return new w.vHH(3402,!1)}()}_flushAnimations(_,g){const b=new Bi,j=[],ne=new Map,_e=[],Ie=new Map,Xe=new Map,pt=new Map,Bt=new Set;this.disabledNodes.forEach(wn=>{Bt.add(wn);const $n=this.driver.query(wn,".ng-animate-queued",!0);for(let Zn=0;Zn<$n.length;Zn++)Bt.add($n[Zn])});const Gt=this.bodyNode,On=Array.from(this.statesByElement.keys()),tn=_o(On,this.collectedEnterElements),Vt=new Map;let bn=0;tn.forEach((wn,$n)=>{const Zn=gr+bn++;Vt.set($n,Zn),wn.forEach(ri=>hi(ri,Zn))});const pr=[],Nr=new Set,Ms=new Set;for(let wn=0;wn<this.collectedLeaveElements.length;wn++){const $n=this.collectedLeaveElements[wn],Zn=$n[Qt];Zn&&Zn.setForRemoval&&(pr.push($n),Nr.add($n),Zn.hasAnimation?this.driver.query($n,".ng-star-inserted",!0).forEach(ri=>Nr.add(ri)):Ms.add($n))}const Gr=new Map,ms=_o(On,Array.from(Nr));ms.forEach((wn,$n)=>{const Zn=nr+bn++;Gr.set($n,Zn),wn.forEach(ri=>hi(ri,Zn))}),_.push(()=>{tn.forEach((wn,$n)=>{const Zn=Vt.get($n);wn.forEach(ri=>oi(ri,Zn))}),ms.forEach((wn,$n)=>{const Zn=Gr.get($n);wn.forEach(ri=>oi(ri,Zn))}),pr.forEach(wn=>{this.processLeaveNode(wn)})});const Da=[],Ia=[];for(let wn=this._namespaceList.length-1;wn>=0;wn--)this._namespaceList[wn].drainQueuedTransitions(g).forEach(Zn=>{const ri=Zn.player,Ps=Zn.element;if(Da.push(ri),this.collectedEnterElements.length){const Io=Ps[Qt];if(Io&&Io.setForMove){if(Io.previousTriggersValues&&Io.previousTriggersValues.has(Zn.triggerName)){const ta=Io.previousTriggersValues.get(Zn.triggerName),na=this.statesByElement.get(Zn.element);if(na&&na.has(Zn.triggerName)){const pu=na.get(Zn.triggerName);pu.value=ta,na.set(Zn.triggerName,pu)}}return void ri.destroy()}}const ll=!Gt||!this.driver.containsElement(Gt,Ps),Do=Gr.get(Ps),ul=Vt.get(Ps),rs=this._buildInstruction(Zn,b,ul,Do,ll);if(rs.errors&&rs.errors.length)return void Ia.push(rs);if(ll)return ri.onStart(()=>An(Ps,rs.fromStyles)),ri.onDestroy(()=>si(Ps,rs.toStyles)),void j.push(ri);if(Zn.isFallbackTransition)return ri.onStart(()=>An(Ps,rs.fromStyles)),ri.onDestroy(()=>si(Ps,rs.toStyles)),void j.push(ri);const Qu=[];rs.timelines.forEach(Io=>{Io.stretchStartingKeyframe=!0,this.disabledNodes.has(Io.element)||Qu.push(Io)}),rs.timelines=Qu,b.append(Ps,rs.timelines),_e.push({instruction:rs,player:ri,element:Ps}),rs.queriedElements.forEach(Io=>et(Ie,Io,[]).push(ri)),rs.preStyleProps.forEach((Io,ta)=>{if(Io.size){let na=Xe.get(ta);na||Xe.set(ta,na=new Set),Io.forEach((pu,Wi)=>na.add(Wi))}}),rs.postStyleProps.forEach((Io,ta)=>{let na=pt.get(ta);na||pt.set(ta,na=new Set),Io.forEach((pu,Wi)=>na.add(Wi))})});if(Ia.length){const wn=[];Ia.forEach($n=>{wn.push(function Ri(y,_){return new w.vHH(3505,!1)}())}),Da.forEach($n=>$n.destroy()),this.reportError(wn)}const ki=new Map,Ka=new Map;_e.forEach(wn=>{const $n=wn.element;b.has($n)&&(Ka.set($n,$n),this._beforeAnimationBuild(wn.player.namespaceId,wn.instruction,ki))}),j.forEach(wn=>{const $n=wn.element;this._getPreviousPlayers($n,!1,wn.namespaceId,wn.triggerName,null).forEach(ri=>{et(ki,$n,[]).push(ri),ri.destroy()})});const La=pr.filter(wn=>qa(wn,Xe,pt)),Cl=new Map;Ko(Cl,this.driver,Ms,pt,X.l3).forEach(wn=>{qa(wn,Xe,pt)&&La.push(wn)});const Jn=new Map;tn.forEach((wn,$n)=>{Ko(Jn,this.driver,new Set(wn),Xe,X.k1)}),La.forEach(wn=>{const $n=Cl.get(wn),Zn=Jn.get(wn);Cl.set(wn,new Map([...Array.from($n?.entries()??[]),...Array.from(Zn?.entries()??[])]))});const Eo=[],al=[],jl={};_e.forEach(wn=>{const{element:$n,player:Zn,instruction:ri}=wn;if(b.has($n)){if(Bt.has($n))return Zn.onDestroy(()=>si($n,ri.toStyles)),Zn.disabled=!0,Zn.overrideTotalTime(ri.totalTime),void j.push(Zn);let Ps=jl;if(Ka.size>1){let Do=$n;const ul=[];for(;Do=Do.parentNode;){const rs=Ka.get(Do);if(rs){Ps=rs;break}ul.push(Do)}ul.forEach(rs=>Ka.set(rs,Ps))}const ll=this._buildAnimation(Zn.namespaceId,ri,ki,ne,Jn,Cl);if(Zn.setRealPlayer(ll),Ps===jl)Eo.push(Zn);else{const Do=this.playersByElement.get(Ps);Do&&Do.length&&(Zn.parentPlayer=Oe(Do)),j.push(Zn)}}else An($n,ri.fromStyles),Zn.onDestroy(()=>si($n,ri.toStyles)),al.push(Zn),Bt.has($n)&&j.push(Zn)}),al.forEach(wn=>{const $n=ne.get(wn.element);if($n&&$n.length){const Zn=Oe($n);wn.setRealPlayer(Zn)}}),j.forEach(wn=>{wn.parentPlayer?wn.syncPlayerEvents(wn.parentPlayer):wn.destroy()});for(let wn=0;wn<pr.length;wn++){const $n=pr[wn],Zn=$n[Qt];if(oi($n,nr),Zn&&Zn.hasAnimation)continue;let ri=[];if(Ie.size){let ll=Ie.get($n);ll&&ll.length&&ri.push(...ll);let Do=this.driver.query($n,Ts,!0);for(let ul=0;ul<Do.length;ul++){let rs=Ie.get(Do[ul]);rs&&rs.length&&ri.push(...rs)}}const Ps=ri.filter(ll=>!ll.destroyed);Ps.length?ai(this,$n,Ps):this.processLeaveNode($n)}return pr.length=0,Eo.forEach(wn=>{this.players.push(wn),wn.onDone(()=>{wn.destroy();const $n=this.players.indexOf(wn);this.players.splice($n,1)}),wn.play()}),Eo}elementContainsData(_,g){let b=!1;const j=g[Qt];return j&&j.setForRemoval&&(b=!0),this.playersByElement.has(g)&&(b=!0),this.playersByQueriedElement.has(g)&&(b=!0),this.statesByElement.has(g)&&(b=!0),this._fetchNamespace(_).elementContainsData(g)||b}afterFlush(_){this._flushFns.push(_)}afterFlushAnimationsDone(_){this._whenQuietFns.push(_)}_getPreviousPlayers(_,g,b,j,ne){let _e=[];if(g){const Ie=this.playersByQueriedElement.get(_);Ie&&(_e=Ie)}else{const Ie=this.playersByElement.get(_);if(Ie){const Xe=!ne||ne==mt;Ie.forEach(pt=>{pt.queued||!Xe&&pt.triggerName!=j||_e.push(pt)})}}return(b||j)&&(_e=_e.filter(Ie=>!(b&&b!=Ie.namespaceId||j&&j!=Ie.triggerName))),_e}_beforeAnimationBuild(_,g,b){const ne=g.element,_e=g.isRemovalTransition?void 0:_,Ie=g.isRemovalTransition?void 0:g.triggerName;for(const Xe of g.timelines){const pt=Xe.element,Bt=pt!==ne,Gt=et(b,pt,[]);this._getPreviousPlayers(pt,Bt,_e,Ie,g.toState).forEach(tn=>{const Vt=tn.getRealPlayer();Vt.beforeDestroy&&Vt.beforeDestroy(),tn.destroy(),Gt.push(tn)})}An(ne,g.fromStyles)}_buildAnimation(_,g,b,j,ne,_e){const Ie=g.triggerName,Xe=g.element,pt=[],Bt=new Set,Gt=new Set,On=g.timelines.map(Vt=>{const bn=Vt.element;Bt.add(bn);const pr=bn[Qt];if(pr&&pr.removedBeforeQueried)return new X.ZN(Vt.duration,Vt.delay);const Nr=bn!==Xe,Ms=function Sa(y){const _=[];return bo(y,_),_}((b.get(bn)||U).map(ki=>ki.getRealPlayer())).filter(ki=>!!ki.element&&ki.element===bn),Gr=ne.get(bn),ms=_e.get(bn),Da=Ot(0,this._normalizer,0,Vt.keyframes,Gr,ms),Ia=this._buildPlayer(Vt,Da,Ms);if(Vt.subTimeline&&j&&Gt.add(bn),Nr){const ki=new Ni(_,Ie,bn);ki.setRealPlayer(Ia),pt.push(ki)}return Ia});pt.forEach(Vt=>{et(this.playersByQueriedElement,Vt.element,[]).push(Vt),Vt.onDone(()=>function ka(y,_,g){let b=y.get(_);if(b){if(b.length){const j=b.indexOf(g);b.splice(j,1)}0==b.length&&y.delete(_)}return b}(this.playersByQueriedElement,Vt.element,Vt))}),Bt.forEach(Vt=>hi(Vt,xs));const tn=Oe(On);return tn.onDestroy(()=>{Bt.forEach(Vt=>oi(Vt,xs)),si(Xe,g.toStyles)}),Gt.forEach(Vt=>{et(j,Vt,[]).push(tn)}),tn}_buildPlayer(_,g,b){return g.length>0?this.driver.animate(_.element,g,_.duration,_.delay,_.easing,b):new X.ZN(_.duration,_.delay)}}class Ni{constructor(_,g,b){this.namespaceId=_,this.triggerName=g,this.element=b,this._player=new X.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(_){this._containsRealPlayer||(this._player=_,this._queuedCallbacks.forEach((g,b)=>{g.forEach(j=>pe(_,b,void 0,j))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(_.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(_){this.totalTime=_}syncPlayerEvents(_){const g=this._player;g.triggerCallback&&_.onStart(()=>g.triggerCallback("start")),_.onDone(()=>this.finish()),_.onDestroy(()=>this.destroy())}_queueEvent(_,g){et(this._queuedCallbacks,_,[]).push(g)}onDone(_){this.queued&&this._queueEvent("done",_),this._player.onDone(_)}onStart(_){this.queued&&this._queueEvent("start",_),this._player.onStart(_)}onDestroy(_){this.queued&&this._queueEvent("destroy",_),this._player.onDestroy(_)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(_){this.queued||this._player.setPosition(_)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(_){const g=this._player;g.triggerCallback&&g.triggerCallback(_)}}function fs(y){return y&&1===y.nodeType}function zo(y,_){const g=y.style.display;return y.style.display=_??"none",g}function Ko(y,_,g,b,j){const ne=[];g.forEach(Xe=>ne.push(zo(Xe)));const _e=[];b.forEach((Xe,pt)=>{const Bt=new Map;Xe.forEach(Gt=>{const On=_.computeStyle(pt,Gt,j);Bt.set(Gt,On),(!On||0==On.length)&&(pt[Qt]=ot,_e.push(pt))}),y.set(pt,Bt)});let Ie=0;return g.forEach(Xe=>zo(Xe,ne[Ie++])),_e}function _o(y,_){const g=new Map;if(y.forEach(Ie=>g.set(Ie,[])),0==_.length)return g;const b=1,j=new Set(_),ne=new Map;function _e(Ie){if(!Ie)return b;let Xe=ne.get(Ie);if(Xe)return Xe;const pt=Ie.parentNode;return Xe=g.has(pt)?pt:j.has(pt)?b:_e(pt),ne.set(Ie,Xe),Xe}return _.forEach(Ie=>{const Xe=_e(Ie);Xe!==b&&g.get(Xe).push(Ie)}),g}function hi(y,_){y.classList?.add(_)}function oi(y,_){y.classList?.remove(_)}function ai(y,_,g){Oe(g).onDone(()=>y.processLeaveNode(_))}function bo(y,_){for(let g=0;g<y.length;g++){const b=y[g];b instanceof X.ZE?bo(b.players,_):_.push(b)}}function qa(y,_,g){const b=g.get(y);if(!b)return!1;let j=_.get(y);return j?b.forEach(ne=>j.add(ne)):_.set(y,b),g.delete(y),!0}class lo{constructor(_,g,b){this.bodyNode=_,this._driver=g,this._normalizer=b,this._triggerCache={},this.onRemovalComplete=(j,ne)=>{},this._transitionEngine=new nu(_,g,b),this._timelineEngine=new ao(_,g,b),this._transitionEngine.onRemovalComplete=(j,ne)=>this.onRemovalComplete(j,ne)}registerTrigger(_,g,b,j,ne){const _e=_+"-"+j;let Ie=this._triggerCache[_e];if(!Ie){const Xe=[],pt=[],Bt=io(this._driver,ne,Xe,pt);if(Xe.length)throw function en(y,_){return new w.vHH(3404,!1)}();Ie=function Sr(y,_,g){return new Zi(y,_,g)}(j,Bt,this._normalizer),this._triggerCache[_e]=Ie}this._transitionEngine.registerTrigger(g,j,Ie)}register(_,g){this._transitionEngine.register(_,g)}destroy(_,g){this._transitionEngine.destroy(_,g)}onInsert(_,g,b,j){this._transitionEngine.insertNode(_,g,b,j)}onRemove(_,g,b,j){this._transitionEngine.removeNode(_,g,j||!1,b)}disableAnimations(_,g){this._transitionEngine.markElementAsDisabled(_,g)}process(_,g,b,j){if("@"==b.charAt(0)){const[ne,_e]=Le(b);this._timelineEngine.command(ne,g,_e,j)}else this._transitionEngine.trigger(_,g,b,j)}listen(_,g,b,j,ne){if("@"==b.charAt(0)){const[_e,Ie]=Le(b);return this._timelineEngine.listen(_e,g,Ie,ne)}return this._transitionEngine.listen(_,g,b,j,ne)}flush(_=-1){this._transitionEngine.flush(_)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Yo=(()=>{class y{constructor(g,b,j){this._element=g,this._startStyles=b,this._endStyles=j,this._state=0;let ne=y.initialStylesByElement.get(g);ne||y.initialStylesByElement.set(g,ne=new Map),this._initialStyles=ne}start(){this._state<1&&(this._startStyles&&si(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(si(this._element,this._initialStyles),this._endStyles&&(si(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(y.initialStylesByElement.delete(this._element),this._startStyles&&(An(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(An(this._element,this._endStyles),this._endStyles=null),si(this._element,this._initialStyles),this._state=3)}}return y.initialStylesByElement=new WeakMap,y})();function Us(y){let _=null;return y.forEach((g,b)=>{(function ls(y){return"display"===y||"position"===y})(b)&&(_=_||new Map,_.set(b,g))}),_}class Ao{constructor(_,g,b,j){this.element=_,this.keyframes=g,this.options=b,this._specialStyles=j,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=b.duration,this._delay=b.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_=>_()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const _=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,_,this.options),this._finalKeyframe=_.length?_[_.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(_){const g=[];return _.forEach(b=>{g.push(Object.fromEntries(b))}),g}_triggerWebAnimation(_,g,b){return _.animate(this._convertKeyframesToObject(g),b)}onStart(_){this._originalOnStartFns.push(_),this._onStartFns.push(_)}onDone(_){this._originalOnDoneFns.push(_),this._onDoneFns.push(_)}onDestroy(_){this._onDestroyFns.push(_)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(_=>_()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(_=>_()),this._onDestroyFns=[])}setPosition(_){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=_*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const _=new Map;this.hasStarted()&&this._finalKeyframe.forEach((b,j)=>{"offset"!==j&&_.set(j,this._finished?b:mr(this.element,j))}),this.currentSnapshot=_}triggerCallback(_){const g="start"===_?this._onStartFns:this._onDoneFns;g.forEach(b=>b()),g.length=0}}class Za{validateStyleProperty(_){return!0}validateAnimatableStyleProperty(_){return!0}matchesElement(_,g){return!1}containsElement(_,g){return Ti(_,g)}getParentElement(_){return Ae(_)}query(_,g,b){return ht(_,g,b)}computeStyle(_,g,b){return window.getComputedStyle(_)[g]}animate(_,g,b,j,ne,_e=[]){const Xe={duration:b,delay:j,fill:0==j?"both":"forwards"};ne&&(Xe.easing=ne);const pt=new Map,Bt=_e.filter(tn=>tn instanceof Ao);(function Kt(y,_){return 0===y||0===_})(b,j)&&Bt.forEach(tn=>{tn.currentSnapshot.forEach((Vt,bn)=>pt.set(bn,Vt))});let Gt=function Cn(y){return y.length?y[0]instanceof Map?y:y.map(_=>Sn(_)):[]}(g).map(tn=>Xn(tn));Gt=function mn(y,_,g){if(g.size&&_.length){let b=_[0],j=[];if(g.forEach((ne,_e)=>{b.has(_e)||j.push(_e),b.set(_e,ne)}),j.length)for(let ne=1;ne<_.length;ne++){let _e=_[ne];j.forEach(Ie=>_e.set(Ie,mr(y,Ie)))}}return _}(_,Gt,pt);const On=function ji(y,_){let g=null,b=null;return Array.isArray(_)&&_.length?(g=Us(_[0]),_.length>1&&(b=Us(_[_.length-1]))):_ instanceof Map&&(g=Us(_)),g||b?new Yo(y,g,b):null}(_,Gt);return new Ao(_,Gt,Xe,On)}}let Ml=(()=>{class y extends X._j{constructor(g,b){super(),this._nextAnimationId=0,this._renderer=g.createRenderer(b.body,{id:"0",encapsulation:w.ifc.None,styles:[],data:{animation:[]}})}build(g){const b=this._nextAnimationId.toString();this._nextAnimationId++;const j=Array.isArray(g)?(0,X.vP)(g):g;return ba(this._renderer,null,b,"register",[j]),new li(b,this._renderer)}}return y.\u0275fac=function(g){return new(g||y)(w.LFG(w.FYo),w.LFG(ge.K0))},y.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac}),y})();class li extends X.LC{constructor(_,g){super(),this._id=_,this._renderer=g}create(_,g){return new Zs(this._id,_,g||{},this._renderer)}}class Zs{constructor(_,g,b,j){this.id=_,this.element=g,this._renderer=j,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",b)}_listen(_,g){return this._renderer.listen(this.element,`@@${this.id}:${_}`,g)}_command(_,...g){return ba(this._renderer,this.element,this.id,_,g)}onDone(_){this._listen("done",_)}onStart(_){this._listen("start",_)}onDestroy(_){this._listen("destroy",_)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(_){this._command("setPosition",_)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function ba(y,_,g,b,j){return y.setProperty(_,`@@${g}:${b}`,j)}const Aa="@.disabled";let cl=(()=>{class y{constructor(g,b,j){this.delegate=g,this.engine=b,this._zone=j,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),b.onRemovalComplete=(ne,_e)=>{const Ie=_e?.parentNode(ne);Ie&&_e.removeChild(Ie,ne)}}createRenderer(g,b){const ne=this.delegate.createRenderer(g,b);if(!(g&&b&&b.data&&b.data.animation)){let Bt=this._rendererCache.get(ne);return Bt||(Bt=new Mo("",ne,this.engine,()=>this._rendererCache.delete(ne)),this._rendererCache.set(ne,Bt)),Bt}const _e=b.id,Ie=b.id+"-"+this._currentId;this._currentId++,this.engine.register(Ie,g);const Xe=Bt=>{Array.isArray(Bt)?Bt.forEach(Xe):this.engine.registerTrigger(_e,Ie,g,Bt.name,Bt)};return b.data.animation.forEach(Xe),new Ji(this,Ie,ne,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(g,b,j){g>=0&&g<this._microtaskId?this._zone.run(()=>b(j)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(ne=>{const[_e,Ie]=ne;_e(Ie)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([b,j]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return y.\u0275fac=function(g){return new(g||y)(w.LFG(w.FYo),w.LFG(lo),w.LFG(w.R0b))},y.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac}),y})();class Mo{constructor(_,g,b,j){this.namespaceId=_,this.delegate=g,this.engine=b,this._onDestroy=j,this.destroyNode=this.delegate.destroyNode?ne=>g.destroyNode(ne):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(_,g){return this.delegate.createElement(_,g)}createComment(_){return this.delegate.createComment(_)}createText(_){return this.delegate.createText(_)}appendChild(_,g){this.delegate.appendChild(_,g),this.engine.onInsert(this.namespaceId,g,_,!1)}insertBefore(_,g,b,j=!0){this.delegate.insertBefore(_,g,b),this.engine.onInsert(this.namespaceId,g,_,j)}removeChild(_,g,b){this.engine.onRemove(this.namespaceId,g,this.delegate,b)}selectRootElement(_,g){return this.delegate.selectRootElement(_,g)}parentNode(_){return this.delegate.parentNode(_)}nextSibling(_){return this.delegate.nextSibling(_)}setAttribute(_,g,b,j){this.delegate.setAttribute(_,g,b,j)}removeAttribute(_,g,b){this.delegate.removeAttribute(_,g,b)}addClass(_,g){this.delegate.addClass(_,g)}removeClass(_,g){this.delegate.removeClass(_,g)}setStyle(_,g,b,j){this.delegate.setStyle(_,g,b,j)}removeStyle(_,g,b){this.delegate.removeStyle(_,g,b)}setProperty(_,g,b){"@"==g.charAt(0)&&g==Aa?this.disableAnimations(_,!!b):this.delegate.setProperty(_,g,b)}setValue(_,g){this.delegate.setValue(_,g)}listen(_,g,b){return this.delegate.listen(_,g,b)}disableAnimations(_,g){this.engine.disableAnimations(_,g)}}class Ji extends Mo{constructor(_,g,b,j,ne){super(g,b,j,ne),this.factory=_,this.namespaceId=g}setProperty(_,g,b){"@"==g.charAt(0)?"."==g.charAt(1)&&g==Aa?this.disableAnimations(_,b=void 0===b||!!b):this.engine.process(this.namespaceId,_,g.slice(1),b):this.delegate.setProperty(_,g,b)}listen(_,g,b){if("@"==g.charAt(0)){const j=function Xs(y){switch(y){case"body":return document.body;case"document":return document;case"window":return window;default:return y}}(_);let ne=g.slice(1),_e="";return"@"!=ne.charAt(0)&&([ne,_e]=function Ii(y){const _=y.indexOf(".");return[y.substring(0,_),y.slice(_+1)]}(ne)),this.engine.listen(this.namespaceId,j,ne,_e,Ie=>{this.factory.scheduleListenerCallback(Ie._data||-1,b,Ie)})}return this.delegate.listen(_,g,b)}}let ps=(()=>{class y extends lo{constructor(g,b,j,ne){super(g.body,b,j)}ngOnDestroy(){this.flush()}}return y.\u0275fac=function(g){return new(g||y)(w.LFG(ge.K0),w.LFG(Zt),w.LFG(xi),w.LFG(w.z2F))},y.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac}),y})();const Li=[{provide:X._j,useClass:Ml},{provide:xi,useFactory:function Yr(){return new yo}},{provide:lo,useClass:ps},{provide:w.FYo,useFactory:function Ut(y,_,g){return new cl(y,_,g)},deps:[f.se,lo,w.R0b]}],Po=[{provide:Zt,useFactory:()=>new Za},{provide:w.QbO,useValue:"BrowserAnimations"},...Li],Pl=[{provide:Zt,useClass:xt},{provide:w.QbO,useValue:"NoopAnimations"},...Li];let pn=(()=>{class y{static withConfig(g){return{ngModule:y,providers:g.disableAnimations?Pl:Po}}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275mod=w.oAB({type:y}),y.\u0275inj=w.cJS({providers:Po,imports:[f.b2]}),y})(),dt=(()=>{class y{constructor(g){this.router=g,this.loadCount=0,this.loadState=new Nt.X(!1),this.router.events.subscribe(b=>{this.navigationInterceptor(b)})}showLoader(){this.loadCount+=1,this.loadState.next(!0)}hideLoader(){this.loadCount=this.loadCount?--this.loadCount:0,this.loadCount||this.loadState.next(!1)}navigationInterceptor(g){g instanceof H.OD&&this.showLoader(),g instanceof H.m2&&this.hideLoader(),g instanceof H.gk&&this.hideLoader(),g instanceof H.Q3&&this.hideLoader()}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(H.F0))};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})(),P=(()=>{class y{constructor(g){this.loaderService=g}intercept(g,b){return this.loaderService.showLoader(),b.handle(g).pipe((0,Tt.b)(j=>{j instanceof qe.Zn&&this.loaderService.hideLoader()},j=>{this.loaderService.hideLoader()}))}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(dt))};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac})}return y})();const Q={provide:qe.TP,useClass:P,multi:!0};var V=I(9770),ae=I(4968),Ce=I(7272),ft=I(7579),vt=I(9751),dn=I(5032);const Dr=new vt.y(dn.Z);var lr=I(6451),Bn=I(9300),or=I(8646),Xt=I(5698),ti=I(4086);const Is="Service workers are disabled or not supported by this browser";class gn{constructor(_){if(this.serviceWorker=_,_){const b=(0,ae.R)(_,"controllerchange").pipe((0,Ht.U)(()=>_.controller)),j=(0,V.P)(()=>(0,Be.of)(_.controller)),ne=(0,Ce.z)(j,b);this.worker=ne.pipe((0,Bn.h)(Bt=>!!Bt)),this.registration=this.worker.pipe((0,Je.w)(()=>_.getRegistration()));const pt=(0,ae.R)(_,"message").pipe((0,Ht.U)(Bt=>Bt.data)).pipe((0,Bn.h)(Bt=>Bt&&Bt.type)).pipe((0,or.n)());pt.connect(),this.events=pt}else this.worker=this.events=this.registration=function Er(y){return(0,V.P)(()=>(0,bt._)(new Error(y)))}(Is)}postMessage(_,g){return this.worker.pipe((0,Xt.q)(1),(0,Tt.b)(b=>{b.postMessage({action:_,...g})})).toPromise().then(()=>{})}postMessageWithOperation(_,g,b){const j=this.waitForOperationCompleted(b),ne=this.postMessage(_,g);return Promise.all([ne,j]).then(([,_e])=>_e)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(_){let g;return g="string"==typeof _?b=>b.type===_:b=>_.includes(b.type),this.events.pipe((0,Bn.h)(g))}nextEventOfType(_){return this.eventsOfType(_).pipe((0,Xt.q)(1))}waitForOperationCompleted(_){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,Bn.h)(g=>g.nonce===_),(0,Xt.q)(1),(0,Ht.U)(g=>{if(void 0!==g.result)return g.result;throw new Error(g.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let es=(()=>{class y{get isEnabled(){return this.sw.isEnabled}constructor(g){if(this.sw=g,this.pushManager=null,this.subscriptionChanges=new ft.x,!g.isEnabled)return this.messages=Dr,this.notificationClicks=Dr,void(this.subscription=Dr);this.messages=this.sw.eventsOfType("PUSH").pipe((0,Ht.U)(j=>j.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,Ht.U)(j=>j.data)),this.pushManager=this.sw.registration.pipe((0,Ht.U)(j=>j.pushManager));const b=this.pushManager.pipe((0,Je.w)(j=>j.getSubscription()));this.subscription=(0,lr.T)(b,this.subscriptionChanges)}requestSubscription(g){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(Is));const b={userVisibleOnly:!0};let j=this.decodeBase64(g.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),ne=new Uint8Array(new ArrayBuffer(j.length));for(let _e=0;_e<j.length;_e++)ne[_e]=j.charCodeAt(_e);return b.applicationServerKey=ne,this.pushManager.pipe((0,Je.w)(_e=>_e.subscribe(b)),(0,Xt.q)(1)).toPromise().then(_e=>(this.subscriptionChanges.next(_e),_e))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Xt.q)(1),(0,Je.w)(b=>{if(null===b)throw new Error("Not subscribed to push notifications.");return b.unsubscribe().then(j=>{if(!j)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Is))}decodeBase64(g){return atob(g)}}return y.\u0275fac=function(g){return new(g||y)(w.LFG(gn))},y.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac}),y})(),Wn=(()=>{class y{get isEnabled(){return this.sw.isEnabled}constructor(g){if(this.sw=g,!g.isEnabled)return this.versionUpdates=Dr,this.available=Dr,this.activated=Dr,void(this.unrecoverable=Dr);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe((0,Bn.h)(b=>"VERSION_READY"===b.type),(0,Ht.U)(b=>({type:"UPDATE_AVAILABLE",current:b.currentVersion,available:b.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Is));const g=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:g},g)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Is));const g=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:g},g)}}return y.\u0275fac=function(g){return new(g||y)(w.LFG(gn))},y.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac}),y})();class Oo{}const Or=new w.OlP("NGSW_REGISTER_SCRIPT");function qt(y,_,g,b){return()=>{if(!(0,ge.NF)(b)||!("serviceWorker"in navigator)||!1===g.enabled)return;let j;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof g.registrationStrategy)j=g.registrationStrategy();else{const[_e,...Ie]=(g.registrationStrategy||"registerWhenStable:30000").split(":");switch(_e){case"registerImmediately":j=(0,Be.of)(null);break;case"registerWithDelay":j=uo(+Ie[0]||0);break;case"registerWhenStable":j=Ie[0]?(0,lr.T)(pa(y),uo(+Ie[0])):pa(y);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${g.registrationStrategy}`)}}y.get(w.R0b).runOutsideAngular(()=>j.pipe((0,Xt.q)(1)).subscribe(()=>navigator.serviceWorker.register(_,{scope:g.scope}).catch(_e=>console.error("Service worker registration failed with:",_e))))}}function uo(y){return(0,Be.of)(null).pipe((0,ti.g)(y))}function pa(y){return y.get(w.z2F).isStable.pipe((0,Bn.h)(g=>g))}function Qo(y,_){return new gn((0,ge.NF)(_)&&!1!==y.enabled?navigator.serviceWorker:void 0)}let hl=(()=>{class y{static register(g,b={}){return{ngModule:y,providers:[{provide:Or,useValue:g},{provide:Oo,useValue:b},{provide:gn,useFactory:Qo,deps:[Oo,w.Lbi]},{provide:w.ip1,useFactory:qt,deps:[w.zs3,Or,Oo,w.Lbi],multi:!0}]}}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275mod=w.oAB({type:y}),y.\u0275inj=w.cJS({providers:[es,Wn]}),y})();var Hi=I(2340);let co=(()=>{class y{constructor(g){this.injector=g}handleError(g){const b=this.injector.get(an.g);this.injector.get(H.F0),g instanceof qe.UA?(navigator.onLine||b.notify("No Internet Connection"),b.notify(`${g.status} - ${g.message}`)):b.notify(g),console.error(g)}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(w.zs3))};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac})}return y})();function Ro(y,_){if(1&y&&(w.TgZ(0,"div")(1,"h1"),w._uU(2),w.qZA(),w.TgZ(3,"a",2)(4,"h5"),w._uU(5,"Go to Home"),w.qZA()()()),2&y){const g=w.oxw();w.xp6(2),w.hij("ERROR ",null==g.routeParams?null:g.routeParams.error,""),w.xp6(1),w.Q6J("routerLink","/")}}const fl=[{path:"error",component:(()=>{class y{constructor(g){this.activatedRoute=g}ngOnInit(){this.routeParams=this.activatedRoute.snapshot.queryParams}static#e=this.\u0275fac=function(b){return new(b||y)(w.Y36(H.gz))};static#t=this.\u0275cmp=w.Xpm({type:y,selectors:[["app-errors"]],decls:2,vars:1,consts:[[1,"error-container"],[4,"ngIf"],[3,"routerLink"]],template:function(b,j){1&b&&(w.TgZ(0,"div",0),w.YNc(1,Ro,6,2,"div",1),w.qZA()),2&b&&(w.xp6(1),w.Q6J("ngIf",null==j.routeParams?null:j.routeParams.error))},dependencies:[ge.O5,H.rH],styles:[".error-container[_ngcontent-%COMP%]{width:220px;margin:50% auto 0;transform:translateY(-50%);text-align:center}"]})}return y})()}];let Vs=(()=>{class y{static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275mod=w.oAB({type:y});static#n=this.\u0275inj=w.cJS({imports:[H.Bz.forChild(fl),H.Bz]})}return y})();var Ol=I(5625);const iu={provide:qe.TP,useClass:class ru{intercept(_,g){return g.handle(_).pipe((0,Ol.X)(0),(0,Pt.K)(this.handleError))}handleError(_){let g="";return g=_.error instanceof ErrorEvent?`Error: ${_.error.message}`:`Error Code: ${_.status}\\nMessage: ${_.message}`,(0,bt._)(_)}},multi:!0};let xo=(()=>{class y{static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275mod=w.oAB({type:y});static#n=this.\u0275inj=w.cJS({providers:[{provide:w.qLn,useClass:co},iu],imports:[ge.ez,Vs]})}return y})();var Xa=I(4466);let st=(()=>{class y{static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275mod=w.oAB({type:y});static#n=this.\u0275inj=w.cJS({providers:[Q],imports:[ge.ez]})}return y})();var ga=I(9884);const Cs={todos:[]},Rl=(y=Cs,_)=>{switch(_.type){case"ADD":return{todos:[...y.todos,{index:y.todos.length,text:_.text,done:!1,saved:!1}]};case"TOGGLE":return{todos:y.todos.map((g,b)=>b===_.index?{...g,done:!g.done}:g)};case"REMOVE":return{todos:y.todos.splice(y.todos.findIndex(g=>g.index===_.index),1)};case"SAVED":return{todos:y.todos.map((g,b)=>b===_.index?{...g,saved:!0}:g)};default:return y}};var Js=I(457),Ai=I(5577),pl=I(9468);let No=(()=>{class y{constructor(){this.recordTimeoutMs=500,this.localStorageKey="__lastActive",this.events=["keydown","click","wheel","mousemove"];const g=this.getLastActiveFromLocalStorage()??new Date;this.lastActive=new Nt.X(g),this.lastActive$=this.lastActive.asObservable()}setUp(){(0,Js.D)(this.events).pipe((0,Ai.z)(g=>(0,ae.R)(document,g)),(0,pl.p)(this.recordTimeoutMs)).subscribe(g=>this.recordLastActiveDate()),(0,ae.R)(window,"storage").pipe((0,Bn.h)(g=>g.storageArea===localStorage&&g.key===this.localStorageKey&&!!g.newValue),(0,Ht.U)(g=>new Date(g.newValue))).subscribe(g=>this.lastActive.next(g))}getLastActiveDate(){return this.lastActive.value}recordLastActiveDate(){var g=new Date;localStorage.setItem(this.localStorageKey,g.toString()),this.lastActive.next(g)}getLastActiveFromLocalStorage(){const g=localStorage.getItem(this.localStorageKey);return g?new Date(g):null}static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})();const Ja={provide:w.ip1,multi:!0,deps:[No],useFactory:y=>()=>y.setUp()};let su=1;class el{constructor(){this.userName="Philip Marlowe"}}let Va=(()=>{class y{constructor(g){this.id=su++,this._userName="Sherlock Holmes",g&&(this._userName=g.userName)}get userName(){return this._userName+(this.id>1?` times ${this.id}`:"")}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(el,8))};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac})}return y})(),Bs=(()=>{class y{constructor(g){if(g)throw new Error("CoreModule is already loaded. Import it in the AppModule only")}static forRoot(g){return{ngModule:y,providers:[{provide:el,useValue:g}]}}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(y,12))};static#t=this.\u0275mod=w.oAB({type:y});static#n=this.\u0275inj=w.cJS({providers:[Va],imports:[ge.ez]})}return y})();var Kl=I(4440),Mi=I(8555),js=I(7369),eo=I(3550);let ma=(()=>{class y{static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275mod=w.oAB({type:y});static#n=this.\u0275inj=w.cJS({providers:[eo.T],imports:[Mi.Aw.forFeature(js.UN,js.Jl)]})}return y})();var ho=I(2852),Ma=I(8502),ya=I(515),gl=I(576);class Cr{constructor(_,g,b){this.kind=_,this.value=g,this.error=b,this.hasValue="N"===_}observe(_){return Pa(this,_)}do(_,g,b){const{kind:j,value:ne,error:_e}=this;return"N"===j?_?.(ne):"E"===j?g?.(_e):b?.()}accept(_,g,b){var j;return(0,gl.m)(null===(j=_)||void 0===j?void 0:j.next)?this.observe(_):this.do(_,g,b)}toObservable(){const{kind:_,value:g,error:b}=this,j="N"===_?(0,Be.of)(g):"E"===_?(0,bt._)(()=>b):"C"===_?ya.E:0;if(!j)throw new TypeError(`Unexpected notification kind ${_}`);return j}static createNext(_){return new Cr("N",_)}static createError(_){return new Cr("E",void 0,_)}static createComplete(){return Cr.completeNotification}}function Pa(y,_){var g,b,j;const{kind:ne,value:_e,error:Ie}=y;if("string"!=typeof ne)throw new TypeError('Invalid notification, missing "kind"');"N"===ne?null===(g=_.next)||void 0===g||g.call(_,_e):"E"===ne?null===(b=_.error)||void 0===b||b.call(_,Ie):null===(j=_.complete)||void 0===j||j.call(_)}Cr.completeNotification=new Cr("C");var fi=I(4482),Oa=I(5403),Ba=I(8421);function ja(y,_,g,b){return(0,fi.e)((j,ne)=>{let _e;_&&"function"!=typeof _?({duration:g,element:_e,connector:b}=_):_e=_;const Ie=new Map,Xe=On=>{Ie.forEach(On),On(ne)},pt=On=>Xe(tn=>tn.error(On)),Bt=new tl(ne,On=>{try{const tn=y(On);let Vt=Ie.get(tn);if(!Vt){Ie.set(tn,Vt=b?b():new ft.x);const bn=function Gt(On,tn){const Vt=new vt.y(bn=>{Bt.activeGroups++;const pr=tn.subscribe(bn);return()=>{pr.unsubscribe(),0==--Bt.activeGroups&&Bt.teardownAttempted&&Bt.unsubscribe()}});return Vt.key=On,Vt}(tn,Vt);if(ne.next(bn),g){const pr=new Oa.Q(Vt,()=>{Vt.complete(),pr?.unsubscribe()},void 0,void 0,()=>Ie.delete(tn));Bt.add((0,Ba.Xf)(g(bn)).subscribe(pr))}}Vt.next(_e?_e(On):On)}catch(tn){pt(tn)}},()=>Xe(On=>On.complete()),pt,()=>Ie.clear());j.subscribe(Bt)})}class tl extends Oa.Q{constructor(){super(...arguments),this.activeGroups=0,this.teardownAttempted=!1}unsubscribe(){this.teardownAttempted=!0,0===this.activeGroups&&super.unsubscribe()}}var qo=I(6129);const ws={dispatch:!0,useEffectsErrorHandler:!0},pi="__@ngrx/effects_create__";function A(y,_){const g=y(),b={...ws,..._};return Object.defineProperty(g,pi,{value:b}),g}function O(y){return Object.getOwnPropertyNames(y).filter(b=>!(!y[b]||!y[b].hasOwnProperty(pi))&&y[b][pi].hasOwnProperty("dispatch")).map(b=>({propertyName:b,...y[b][pi]}))}function T(y){return Object.getPrototypeOf(y)}const F="__@ngrx/effects__";function oe(y){return(0,Mi.qC)(wt,T)(y)}function wt(y){return function fe(y){return y.constructor.hasOwnProperty(F)}(y)?y.constructor[F]:[]}function br(y,_,g){const b=T(y).constructor.name,j=function on(y){return[oe,O].reduce((g,b)=>g.concat(b(y)),[])}(y).map(({propertyName:ne,dispatch:_e,useEffectsErrorHandler:Ie})=>{const Xe="function"==typeof y[ne]?y[ne]():y[ne],pt=Ie?g(Xe,_):Xe;return!1===_e?pt.pipe((0,Ma.l)()):pt.pipe(function Lo(){return(0,fi.e)((y,_)=>{y.subscribe(new Oa.Q(_,g=>{_.next(Cr.createNext(g))},()=>{_.next(Cr.createComplete()),_.complete()},g=>{_.next(Cr.createError(g)),_.complete()}))})}()).pipe((0,Ht.U)(Gt=>({effect:y[ne],notification:Gt,propertyName:ne,sourceName:b,sourceInstance:y})))});return(0,lr.T)(...j)}const $r=10;function Hs(y,_,g=$r){return y.pipe((0,Pt.K)(b=>(_&&_.handleError(b),g<=1?y:Hs(y,_,g-1))))}let Fi=(()=>{class y extends vt.y{constructor(g){super(),g&&(this.source=g)}lift(g){const b=new y;return b.source=this,b.operator=g,b}}return y.\u0275fac=function(g){return new(g||y)(w.LFG(Mi.Y$))},y.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();function $s(...y){return(0,Bn.h)(_=>y.some(g=>"string"==typeof g?g===_.type:g.type===_.type))}const ts=new w.OlP("@ngrx/effects Internal Root Guard"),Ra=new w.OlP("@ngrx/effects User Provided Effects"),Zo=new w.OlP("@ngrx/effects Internal Root Effects"),ml=new w.OlP("@ngrx/effects Root Effects"),Rr=new w.OlP("@ngrx/effects Internal Feature Effects"),ui=new w.OlP("@ngrx/effects Feature Effects"),yl=new w.OlP("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>Hs}),nl="@ngrx/effects/init";(0,Mi.PH)(nl);const Nl="ngrxOnIdentifyEffects",ou="ngrxOnInitEffects";function Iu(y){return $a(y,ou)}function $a(y,_){return y&&_ in y&&"function"==typeof y[_]}let Jo=(()=>{class y extends ft.x{constructor(g,b){super(),this.errorHandler=g,this.effectsErrorHandler=b}addEffects(g){this.next(g)}toActions(){return this.pipe(ja(T),(0,Ai.z)(g=>g.pipe(ja(Ll))),(0,Ai.z)(g=>{const b=g.pipe((0,qo.z)(ne=>function rl(y,_){return g=>{const b=br(g,y,_);return function Ha(y){return $a(y,"ngrxOnRunEffects")}(g)?g.ngrxOnRunEffects(b):b}}(this.errorHandler,this.effectsErrorHandler)(ne)),(0,Ht.U)(ne=>(function vl(y,_){if("N"===y.notification.kind){const g=y.notification.value;!function va(y){return"function"!=typeof y&&y&&y.type&&"string"==typeof y.type}(g)&&_.handleError(new Error(`Effect ${function xl({propertyName:y,sourceInstance:_,sourceName:g}){const b="function"==typeof _[y];return`"${g}.${String(y)}${b?"()":""}"`}(y)} dispatched an invalid action: ${function Xo(y){try{return JSON.stringify(y)}catch{return y}}(g)}`))}}(ne,this.errorHandler),ne.notification)),(0,Bn.h)(ne=>"N"===ne.kind&&null!=ne.value),function _a(){return(0,fi.e)((y,_)=>{y.subscribe(new Oa.Q(_,g=>Pa(g,_)))})}()),j=g.pipe((0,Xt.q)(1),(0,Bn.h)(Iu),(0,Ht.U)(ne=>ne.ngrxOnInitEffects()));return(0,lr.T)(b,j)}))}}return y.\u0275fac=function(g){return new(g||y)(w.LFG(w.qLn),w.LFG(yl))},y.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})();function Ll(y){return function Bu(y){return $a(y,Nl)}(y)?y.ngrxOnIdentifyEffects():""}let ju=(()=>{class y{constructor(g,b){this.effectSources=g,this.store=b,this.effectsSubscription=null}get isStarted(){return!!this.effectsSubscription}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return y.\u0275fac=function(g){return new(g||y)(w.LFG(Jo),w.LFG(Mi.yh))},y.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})(),Pi=(()=>{class y{constructor(g,b,j,ne,_e,Ie,Xe){this.sources=g,b.start(),ne.forEach(pt=>g.addEffects(pt)),j.dispatch({type:nl})}addEffects(g){this.sources.addEffects(g)}}return y.\u0275fac=function(g){return new(g||y)(w.LFG(Jo),w.LFG(ju),w.LFG(Mi.yh),w.LFG(ml),w.LFG(Mi.cr,8),w.LFG(Mi.CK,8),w.LFG(ts,8))},y.\u0275mod=w.oAB({type:y}),y.\u0275inj=w.cJS({}),y})(),il=(()=>{class y{constructor(g,b,j,ne){b.forEach(_e=>_e.forEach(Ie=>g.addEffects(Ie)))}}return y.\u0275fac=function(g){return new(g||y)(w.LFG(Pi),w.LFG(ui),w.LFG(Mi.cr,8),w.LFG(Mi.CK,8))},y.\u0275mod=w.oAB({type:y}),y.\u0275inj=w.cJS({}),y})(),ns=(()=>{class y{static forFeature(g=[]){return{ngModule:il,providers:[g,{provide:Rr,multi:!0,useValue:g},{provide:Ra,multi:!0,useValue:[]},{provide:ui,multi:!0,useFactory:gi,deps:[w.zs3,Rr,Ra]}]}}static forRoot(g=[]){return{ngModule:Pi,providers:[g,{provide:Zo,useValue:[g]},{provide:ts,useFactory:Gs,deps:[[ju,new w.FiY,new w.tp0],[Zo,new w.PiD]]},{provide:Ra,multi:!0,useValue:[]},{provide:ml,useFactory:gi,deps:[w.zs3,Zo,Ra]}]}}}return y.\u0275fac=function(g){return new(g||y)},y.\u0275mod=w.oAB({type:y}),y.\u0275inj=w.cJS({}),y})();function gi(y,_,g){const b=[];for(const j of _)b.push(...j);for(const j of g)b.push(...j);return function Fl(y,_){return _.map(g=>y.get(g))}(y,b)}function Gs(y,_){if((1!==_.length||0!==_[0].length)&&y)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}var ni=I(4579);let au=(()=>{class y{loadCounter(){return(0,Be.of)(1999)}static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})(),kl=(()=>{class y{constructor(g,b){this.actions$=g,this.counterService=b,this.loadData$=A(()=>this.actions$.pipe($s(ni.zK),(0,Ai.z)(()=>this.counterService.loadCounter().pipe((0,Ht.U)(j=>ni.Zf({newValue:j}))))))}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(Fi),w.LFG(au))};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac})}return y})();var El=I(5054);let vo=(()=>{class y{static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275mod=w.oAB({type:y});static#n=this.\u0275inj=w.cJS({providers:[El.e],imports:[Mi.Aw.forFeature(ho.UN,ho.jX),ns.forFeature([kl])]})}return y})();var Ga=I(3880),sl=I(2542);let lu=(()=>{class y{constructor(g,b){this.actions$=g,this.http=b,this.loadData$=A(()=>this.actions$.pipe($s(sl.mu),(0,Je.w)(()=>this.http.get("https://jsonplaceholder.typicode.com/posts").pipe((0,Ht.U)(j=>sl.F3({payload:j})),(0,Pt.K)(j=>(0,Be.of)(sl.WU({payload:j})))))))}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(Fi),w.LFG(qe.eN))};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac})}return y})();var $u=I(9610);let Ki=(()=>{class y{static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275mod=w.oAB({type:y});static#n=this.\u0275inj=w.cJS({providers:[$u.L],imports:[Mi.Aw.forFeature(Ga.UN,Ga.B5),ns.forFeature([lu])]})}return y})();var Cu=I(173),Dl=I(817);let Gu=(()=>{class y{constructor(g){this.actions$=g,this.getUser$=A(()=>this.actions$.pipe($s(Dl.PR),(0,Ai.z)(()=>(0,Be.of)({userId:"1",name:"trilok",lastName:"singh",email:"trilok@gmaill.com"}).pipe((0,Ht.U)(b=>Dl.Ni({user:b})),(0,Pt.K)(b=>(console.error("An error occurred while getting user information.",b.message),(0,Be.of)(Dl.N2({error:"Unable to retrieve user information."}))))))))}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(Fi))};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac})}return y})();var Wu=I(2842);let Ql=(()=>{class y{static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275mod=w.oAB({type:y});static#n=this.\u0275inj=w.cJS({providers:[Wu.p],imports:[Mi.Aw.forFeature(Cu.U,Cu.M),ns.forFeature([Gu])]})}return y})();var uu=I(5650),Wa=I(4964),$i=I(2766),ql=I(7403);let Ul=(()=>{class y{set(g,b){try{localStorage.setItem(g,JSON.stringify(b))}catch(j){console.error("Error saving to localStorage",j)}}get(g){try{return JSON.parse(localStorage.getItem(g))}catch(b){return console.error("Error getting data from localStorage",b),null}}static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})(),Il=(()=>{class y{constructor(g,b,j,ne){this.actions$=g,this.registerService=b,this.persistenceService=j,this.router=ne,this.register$=A(()=>this.actions$.pipe($s($i._0),(0,Je.w)(({request:_e})=>this.registerService.register(_e).pipe((0,Ht.U)(Ie=>(this.persistenceService.set("accessToken1",Ie.token),(0,$i.Pw)({currentUser:Ie}))),(0,Pt.K)(Ie=>(console.log(Ie),(0,Be.of)((0,$i.zH)({errors:Ie.error.errors})))))))),this.redirectAfterSubmit$=A(()=>this.actions$.pipe($s($i.Pw),(0,Tt.b)(()=>{this.router.navigateByUrl("/")})),{dispatch:!1})}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(Fi),w.LFG(ql.a),w.LFG(Ul),w.LFG(H.F0))};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac})}return y})(),Fo=(()=>{class y{static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275mod=w.oAB({type:y});static#n=this.\u0275inj=w.cJS({providers:[Wa.q],imports:[Mi.Aw.forFeature(uu.UN,uu.xw),ns.forFeature([Il])]})}return y})();var Vl=I(8713),ko=I(1944),cu=I(8372),du=I(9662);let wu=(()=>{class y{constructor(g){this.http=g,this.url="http://localhost:4000/articles"}getAll(){return this.http.get("http://localhost:4000/fruits")}getAllArticles(){return this.http.get(this.url)}createArticle(g){return this.http.post(this.url,g)}getArticleById(g){return this.http.get(this.url+"/"+g)}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(du.O))};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})(),hu=(()=>{class y{constructor(g,b){this.actions$=g,this.fruitsService=b,this.loadAllArticles$=A(()=>this.actions$.pipe($s(ko.GO),(0,Je.w)(()=>this.fruitsService.getAllArticles().pipe((0,Ht.U)(j=>ko.m0({payload:j})))))),this.createArticle$=A(()=>this.actions$.pipe($s(ko.$f),(0,Ht.U)(j=>j.payload),(0,Ai.z)(j=>this.fruitsService.createArticle(j).pipe((0,Ht.U)(ne=>ko.$s({payload:ne})),(0,Pt.K)(ne=>(0,Be.of)(ko.$0({payload:ne}))))))),this.searchArticleById$=A(()=>this.actions$.pipe($s(ko.HD),(0,cu.b)(500),(0,Ht.U)(j=>j.payload),(0,Je.w)(j=>this.fruitsService.getArticleById(j).pipe((0,Ht.U)(ne=>ko.n3({payload:ne})))))),this.loadProducts$=A(()=>this.actions$.pipe($s(ko.hS),(0,Ai.z)(()=>this.fruitsService.getAll().pipe((0,Ht.U)(j=>ko.Xt({payload:j}))))))}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(Fi),w.LFG(wu))};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac})}return y})();var Tu=I(825);let zu=(()=>{class y{static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275mod=w.oAB({type:y});static#n=this.\u0275inj=w.cJS({imports:[Mi.Aw.forRoot(Vl.ll),ns.forRoot([hu]),ma,vo,Ki,Ql,Fo,Tu.FT.instrument({maxAge:25,logOnly:!Hi.N.production})]})}return y})();const Zl="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJDb2RlIFNob3RzIFdpdGggUHJvZmFuaXMiLCJpYXQiOjE2MjQyNzU1MjUsImV4cCI6MTY1NTgxMTUyNSwiYXVkIjoiQ29kZSBTaG90IFdpdGggUHJvZmFuaXMgU3Vic2NyaWJlcnMiLCJzdWIiOiJDb2RlIFNob3QgV2l0aCBQcm9mYW5pcyBTdWJzY3JpYmVycyIsIlVzZXJuYW1lIjoicHJvZmFuaXMiLCJGaXJzdE5hbWUiOiJGYW5pcyIsIlJvbGUiOlsiQWRtaW4iLCJTdXBlciBBZG1pbiJdfQ.mT1UD7DXTWRm4etsW9BuWcg5bj2CaeAQVXaoEOIwB7o";let Ku=(()=>{class y{constructor(){}intercept(g,b){const{url:j,method:ne,headers:_e}=g;return j.endsWith("login")&&"POST"===ne?function Xe(){return(0,Be.of)(new qe.Zn({status:200,body:{id:"1",username:"profanis",token:Zl}}))}():j.endsWith("products")&&"GET"===ne?function pt(){if(!function Ie(){return _e.get("authorization")===Zl}())return(0,bt._)({status:401,error:{message:"Unauthorized"}});const Bt=[...new Array(20).keys()].map(Gt=>({id:Gt,name:`Product ${Gt}`,weight:30,symbol:"ngf"}));return(0,Be.of)(new qe.Zn({status:200,body:Bt}))}():b.handle(g)}static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac})}return y})();const Yu={provide:qe.TP,useClass:Ku,multi:!0};I(7385);let Ea=(()=>{class y{static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275mod=w.oAB({type:y});static#n=this.\u0275inj=w.cJS({})}return y})();var Gi=I(4185);let ol=(()=>{class y{constructor(g){this.realtimeDbService=g}handleError(g){console.log(g),Hi.N.production&&this.realtimeDbService.post("2023/logging.json",g).subscribe()}handleError1(g){g instanceof qe.UA?g.error instanceof ErrorEvent?console.error("Error Event"):console.log(`error status : ${g.status} ${g.statusText}`):console.error("some thing else happened")}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(Gi.N))};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac})}return y})();const xa={provide:w.qLn,useClass:ol};class fu{static get injector(){return this._injector}static set injector(_){this._injector=_}}var Na=I(8405);const Bl=[{provide:Na.R1,useClass:Na.lt},{provide:Na.zI,useClass:Na.ex},{provide:Gi.N,useClass:Gi.g}];var R=I(255),v=I(7522);let D=(()=>{class y{get apiKey(){return"5a4b2d457ecbef9eb2a71e480b947604"}static#e=this.\u0275fac=function(b){return new(b||y)};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})(),L=(()=>{class y extends R.u{constructor(g,b){super(),this.http=g,this.config=b}getCurrentWeather(g,b){const ne=this.getParams(g,b);return this.http.get("https://api.openweathermap.org/data/2.5/weather",{params:ne}).pipe((0,Ht.U)(_e=>({temperature:_e.main.temp,temperatureMin:_e.main.temp_min,temperatureMax:_e.main.temp_max,city:_e.name,conditions:(0,v.wJ)(_e.weather[0]),date:new Date(_e.dt),zipCode:g,countryCode:b})))}getWeatherForecast(g,b){const ne=this.getParams(g,b);return this.http.get("https://api.openweathermap.org/data/2.5/forecast/daily",{params:ne}).pipe((0,Ht.U)(_e=>_e.list.map(Ie=>({temperature:Ie.temp.day,temperatureMin:Ie.temp.min,temperatureMax:Ie.temp.max,city:_e.city.name,conditions:(0,v.wJ)(Ie.weather[0]),date:new Date(1e3*Ie.dt),zipCode:g,countryCode:b}))))}getParams(g,b="us"){return new qe.LE({fromObject:{zip:`${g},${b}`,appid:this.config.apiKey}})}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(qe.eN),w.LFG(D))};static#t=this.\u0275prov=w.Yz7({token:y,factory:y.\u0275fac})}return y})(),re=(()=>{class y{constructor(g){this.injector=g,fu.injector=g}static#e=this.\u0275fac=function(b){return new(b||y)(w.LFG(w.zs3))};static#t=this.\u0275mod=w.oAB({type:y,bootstrap:[vn]});static#n=this.\u0275inj=w.cJS({providers:[Q,{provide:R.u,useClass:L},ge.uU,qe.JF,{provide:ga.y,useValue:new ga.y(Rl)},Ja,Yu,xa,Bl],imports:[f.b2,pn,qe.JF,qe.Ed,Xa.m,Ct,xo,hl.register("ngsw-worker.js",{enabled:Hi.N.production,registrationStrategy:"registerWhenStable:30000"}),zu,st,Bs.forRoot({userName:"Trilok Singh"}),Kl.G2.initializeApp(Hi.N.firebaseConfig),Kl.G2.initialize({activityInRouter:!0,activityOfAnonymousUser:!0,activityInHttp:!0}),Ea,pn]})}return y})();Hi.N.production&&(0,w.G48)(),f.q6().bootstrapModule(re).catch(y=>console.error(y))},1135:(we,le,I)=>{I.d(le,{X:()=>w});var f=I(7579);class w extends f.x{constructor(H){super(),this._value=H}get value(){return this.getValue()}_subscribe(H){const X=super._subscribe(H);return!X.closed&&H.next(this._value),X}getValue(){const{hasError:H,thrownError:X,_value:ie}=this;if(H)throw X;return this._throwIfClosed(),ie}next(H){super.next(this._value=H)}}},9751:(we,le,I)=>{I.d(le,{y:()=>K});var f=I(930),w=I(727),te=I(8822),H=I(9635),X=I(2416),ie=I(576),ee=I(2806);let K=(()=>{class ge{constructor(Ke){Ke&&(this._subscribe=Ke)}lift(Ke){const $e=new ge;return $e.source=this,$e.operator=Ke,$e}subscribe(Ke,$e,Qe){const Ve=function de(ge){return ge&&ge instanceof f.Lv||function q(ge){return ge&&(0,ie.m)(ge.next)&&(0,ie.m)(ge.error)&&(0,ie.m)(ge.complete)}(ge)&&(0,w.Nn)(ge)}(Ke)?Ke:new f.Hp(Ke,$e,Qe);return(0,ee.x)(()=>{const{operator:We,source:Ye}=this;Ve.add(We?We.call(Ve,Ye):Ye?this._subscribe(Ve):this._trySubscribe(Ve))}),Ve}_trySubscribe(Ke){try{return this._subscribe(Ke)}catch($e){Ke.error($e)}}forEach(Ke,$e){return new($e=se($e))((Qe,Ve)=>{const We=new f.Hp({next:Ye=>{try{Ke(Ye)}catch(qe){Ve(qe),We.unsubscribe()}},error:Ve,complete:Qe});this.subscribe(We)})}_subscribe(Ke){var $e;return null===($e=this.source)||void 0===$e?void 0:$e.subscribe(Ke)}[te.L](){return this}pipe(...Ke){return(0,H.U)(Ke)(this)}toPromise(Ke){return new(Ke=se(Ke))(($e,Qe)=>{let Ve;this.subscribe(We=>Ve=We,We=>Qe(We),()=>$e(Ve))})}}return ge.create=Ne=>new ge(Ne),ge})();function se(ge){var Ne;return null!==(Ne=ge??X.v.Promise)&&void 0!==Ne?Ne:Promise}},4707:(we,le,I)=>{I.d(le,{t:()=>te});var f=I(7579),w=I(6063);class te extends f.x{constructor(X=1/0,ie=1/0,ee=w.l){super(),this._bufferSize=X,this._windowTime=ie,this._timestampProvider=ee,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ie===1/0,this._bufferSize=Math.max(1,X),this._windowTime=Math.max(1,ie)}next(X){const{isStopped:ie,_buffer:ee,_infiniteTimeWindow:K,_timestampProvider:se,_windowTime:q}=this;ie||(ee.push(X),!K&&ee.push(se.now()+q)),this._trimBuffer(),super.next(X)}_subscribe(X){this._throwIfClosed(),this._trimBuffer();const ie=this._innerSubscribe(X),{_infiniteTimeWindow:ee,_buffer:K}=this,se=K.slice();for(let q=0;q<se.length&&!X.closed;q+=ee?1:2)X.next(se[q]);return this._checkFinalizedStatuses(X),ie}_trimBuffer(){const{_bufferSize:X,_timestampProvider:ie,_buffer:ee,_infiniteTimeWindow:K}=this,se=(K?1:2)*X;if(X<1/0&&se<ee.length&&ee.splice(0,ee.length-se),!K){const q=ie.now();let de=0;for(let ge=1;ge<ee.length&&ee[ge]<=q;ge+=2)de=ge;de&&ee.splice(0,de+1)}}}},7579:(we,le,I)=>{I.d(le,{x:()=>ee});var f=I(9751),w=I(727);const H=(0,I(3888).d)(se=>function(){se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=I(8737),ie=I(2806);let ee=(()=>{class se extends f.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(de){const ge=new K(this,this);return ge.operator=de,ge}_throwIfClosed(){if(this.closed)throw new H}next(de){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ge=this.observers.slice();for(const Ne of ge)Ne.next(de)}})}error(de){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=de;const{observers:ge}=this;for(;ge.length;)ge.shift().error(de)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:de}=this;for(;de.length;)de.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var de;return(null===(de=this.observers)||void 0===de?void 0:de.length)>0}_trySubscribe(de){return this._throwIfClosed(),super._trySubscribe(de)}_subscribe(de){return this._throwIfClosed(),this._checkFinalizedStatuses(de),this._innerSubscribe(de)}_innerSubscribe(de){const{hasError:ge,isStopped:Ne,observers:Ke}=this;return ge||Ne?w.Lc:(Ke.push(de),new w.w0(()=>(0,X.P)(Ke,de)))}_checkFinalizedStatuses(de){const{hasError:ge,thrownError:Ne,isStopped:Ke}=this;ge?de.error(Ne):Ke&&de.complete()}asObservable(){const de=new f.y;return de.source=this,de}}return se.create=(q,de)=>new K(q,de),se})();class K extends ee{constructor(q,de){super(),this.destination=q,this.source=de}next(q){var de,ge;null===(ge=null===(de=this.destination)||void 0===de?void 0:de.next)||void 0===ge||ge.call(de,q)}error(q){var de,ge;null===(ge=null===(de=this.destination)||void 0===de?void 0:de.error)||void 0===ge||ge.call(de,q)}complete(){var q,de;null===(de=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===de||de.call(q)}_subscribe(q){var de,ge;return null!==(ge=null===(de=this.source)||void 0===de?void 0:de.subscribe(q))&&void 0!==ge?ge:w.Lc}}},930:(we,le,I)=>{I.d(le,{Hp:()=>Ne,Lv:()=>ge});var f=I(576),w=I(727),te=I(2416),H=I(7849),X=I(5032);const ie=se("C",void 0,void 0);function se(We,Ye,qe){return{kind:We,value:Ye,error:qe}}var q=I(3410),de=I(2806);class ge extends w.w0{constructor(Ye){super(),this.isStopped=!1,Ye?(this.destination=Ye,(0,w.Nn)(Ye)&&Ye.add(this)):this.destination=Ve}static create(Ye,qe,ke){return new Ne(Ye,qe,ke)}next(Ye){this.isStopped?Qe(function K(We){return se("N",We,void 0)}(Ye),this):this._next(Ye)}error(Ye){this.isStopped?Qe(function ee(We){return se("E",void 0,We)}(Ye),this):(this.isStopped=!0,this._error(Ye))}complete(){this.isStopped?Qe(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ye){this.destination.next(Ye)}_error(Ye){try{this.destination.error(Ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ne extends ge{constructor(Ye,qe,ke){let Fe;if(super(),(0,f.m)(Ye))Fe=Ye;else if(Ye){let Et;({next:Fe,error:qe,complete:ke}=Ye),this&&te.v.useDeprecatedNextContext?(Et=Object.create(Ye),Et.unsubscribe=()=>this.unsubscribe()):Et=Ye,Fe=Fe?.bind(Et),qe=qe?.bind(Et),ke=ke?.bind(Et)}this.destination={next:Fe?Ke(Fe):X.Z,error:Ke(qe??$e),complete:ke?Ke(ke):X.Z}}}function Ke(We,Ye){return(...qe)=>{try{We(...qe)}catch(ke){te.v.useDeprecatedSynchronousErrorHandling?(0,de.O)(ke):(0,H.h)(ke)}}}function $e(We){throw We}function Qe(We,Ye){const{onStoppedNotification:qe}=te.v;qe&&q.z.setTimeout(()=>qe(We,Ye))}const Ve={closed:!0,next:X.Z,error:$e,complete:X.Z}},727:(we,le,I)=>{I.d(le,{Lc:()=>ie,w0:()=>X,Nn:()=>ee});var f=I(576);const te=(0,I(3888).d)(se=>function(de){se(this),this.message=de?`${de.length} errors occurred during unsubscription:\n${de.map((ge,Ne)=>`${Ne+1}) ${ge.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=de});var H=I(8737);class X{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:de}=this;if(de)if(this._parentage=null,Array.isArray(de))for(const Ke of de)Ke.remove(this);else de.remove(this);const{initialTeardown:ge}=this;if((0,f.m)(ge))try{ge()}catch(Ke){q=Ke instanceof te?Ke.errors:[Ke]}const{_teardowns:Ne}=this;if(Ne){this._teardowns=null;for(const Ke of Ne)try{K(Ke)}catch($e){q=q??[],$e instanceof te?q=[...q,...$e.errors]:q.push($e)}}if(q)throw new te(q)}}add(q){var de;if(q&&q!==this)if(this.closed)K(q);else{if(q instanceof X){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._teardowns=null!==(de=this._teardowns)&&void 0!==de?de:[]).push(q)}}_hasParent(q){const{_parentage:de}=this;return de===q||Array.isArray(de)&&de.includes(q)}_addParent(q){const{_parentage:de}=this;this._parentage=Array.isArray(de)?(de.push(q),de):de?[de,q]:q}_removeParent(q){const{_parentage:de}=this;de===q?this._parentage=null:Array.isArray(de)&&(0,H.P)(de,q)}remove(q){const{_teardowns:de}=this;de&&(0,H.P)(de,q),q instanceof X&&q._removeParent(this)}}X.EMPTY=(()=>{const se=new X;return se.closed=!0,se})();const ie=X.EMPTY;function ee(se){return se instanceof X||se&&"closed"in se&&(0,f.m)(se.remove)&&(0,f.m)(se.add)&&(0,f.m)(se.unsubscribe)}function K(se){(0,f.m)(se)?se():se.unsubscribe()}},2416:(we,le,I)=>{I.d(le,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(we,le,I)=>{I.d(le,{c:()=>ie});var f=I(9751),w=I(727),te=I(8343),H=I(5403),X=I(4482);class ie extends f.y{constructor(K,se){super(),this.source=K,this.subjectFactory=se,this._subject=null,this._refCount=0,this._connection=null,(0,X.A)(K)&&(this.lift=K.lift)}_subscribe(K){return this.getSubject().subscribe(K)}getSubject(){const K=this._subject;return(!K||K.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:K}=this;this._subject=this._connection=null,K?.unsubscribe()}connect(){let K=this._connection;if(!K){K=this._connection=new w.w0;const se=this.getSubject();K.add(this.source.subscribe(new H.Q(se,void 0,()=>{this._teardown(),se.complete()},q=>{this._teardown(),se.error(q)},()=>this._teardown()))),K.closed&&(this._connection=null,K=w.w0.EMPTY)}return K}refCount(){return(0,te.x)()(this)}}},9841:(we,le,I)=>{I.d(le,{a:()=>q});var f=I(9751),w=I(4742),te=I(457),H=I(4671),X=I(3268),ie=I(3269),ee=I(1810),K=I(5403),se=I(9672);function q(...Ne){const Ke=(0,ie.yG)(Ne),$e=(0,ie.jO)(Ne),{args:Qe,keys:Ve}=(0,w.D)(Ne);if(0===Qe.length)return(0,te.D)([],Ke);const We=new f.y(function de(Ne,Ke,$e=H.y){return Qe=>{ge(Ke,()=>{const{length:Ve}=Ne,We=new Array(Ve);let Ye=Ve,qe=Ve;for(let ke=0;ke<Ve;ke++)ge(Ke,()=>{const Fe=(0,te.D)(Ne[ke],Ke);let Et=!1;Fe.subscribe(new K.Q(Qe,Ct=>{We[ke]=Ct,Et||(Et=!0,qe--),qe||Qe.next($e(We.slice()))},()=>{--Ye||Qe.complete()}))},Qe)},Qe)}}(Qe,Ke,Ve?Ye=>(0,ee.n)(Ve,Ye):H.y));return $e?We.pipe((0,X.Z)($e)):We}function ge(Ne,Ke,$e){Ne?(0,se.f)($e,Ne,Ke):Ke()}},7272:(we,le,I)=>{I.d(le,{z:()=>X});var f=I(8189),te=I(3269),H=I(457);function X(...ie){return function w(){return(0,f.J)(1)}()((0,H.D)(ie,(0,te.yG)(ie)))}},9770:(we,le,I)=>{I.d(le,{P:()=>te});var f=I(9751),w=I(8421);function te(H){return new f.y(X=>{(0,w.Xf)(H()).subscribe(X)})}},515:(we,le,I)=>{I.d(le,{E:()=>w,c:()=>te});var f=I(9751);const w=new f.y(X=>X.complete());function te(X){return X?function H(X){return new f.y(ie=>X.schedule(()=>ie.complete()))}(X):w}},4128:(we,le,I)=>{I.d(le,{D:()=>K});var f=I(9751),w=I(4742),te=I(8421),H=I(3269),X=I(5403),ie=I(3268),ee=I(1810);function K(...se){const q=(0,H.jO)(se),{args:de,keys:ge}=(0,w.D)(se),Ne=new f.y(Ke=>{const{length:$e}=de;if(!$e)return void Ke.complete();const Qe=new Array($e);let Ve=$e,We=$e;for(let Ye=0;Ye<$e;Ye++){let qe=!1;(0,te.Xf)(de[Ye]).subscribe(new X.Q(Ke,ke=>{qe||(qe=!0,We--),Qe[Ye]=ke},()=>Ve--,void 0,()=>{(!Ve||!qe)&&(We||Ke.next(ge?(0,ee.n)(ge,Qe):Qe),Ke.complete())}))}});return q?Ne.pipe((0,ie.Z)(q)):Ne}},457:(we,le,I)=>{I.d(le,{D:()=>Et});var f=I(8421),w=I(5363),te=I(4482);function H(Ct,Ze=0){return(0,te.e)((Nt,bt)=>{bt.add(Ct.schedule(()=>Nt.subscribe(bt),Ze))})}var ee=I(9751),se=I(2202),q=I(576),de=I(9672);function Ne(Ct,Ze){if(!Ct)throw new Error("Iterable cannot be null");return new ee.y(Nt=>{(0,de.f)(Nt,Ze,()=>{const bt=Ct[Symbol.asyncIterator]();(0,de.f)(Nt,Ze,()=>{bt.next().then(Je=>{Je.done?Nt.complete():Nt.next(Je.value)})},0,!0)})})}var Ke=I(3670),$e=I(8239),Qe=I(1144),Ve=I(6495),We=I(2206),Ye=I(4532),qe=I(3260);function Et(Ct,Ze){return Ze?function Fe(Ct,Ze){if(null!=Ct){if((0,Ke.c)(Ct))return function X(Ct,Ze){return(0,f.Xf)(Ct).pipe(H(Ze),(0,w.Q)(Ze))}(Ct,Ze);if((0,Qe.z)(Ct))return function K(Ct,Ze){return new ee.y(Nt=>{let bt=0;return Ze.schedule(function(){bt===Ct.length?Nt.complete():(Nt.next(Ct[bt++]),Nt.closed||this.schedule())})})}(Ct,Ze);if((0,$e.t)(Ct))return function ie(Ct,Ze){return(0,f.Xf)(Ct).pipe(H(Ze),(0,w.Q)(Ze))}(Ct,Ze);if((0,We.D)(Ct))return Ne(Ct,Ze);if((0,Ve.T)(Ct))return function ge(Ct,Ze){return new ee.y(Nt=>{let bt;return(0,de.f)(Nt,Ze,()=>{bt=Ct[se.h](),(0,de.f)(Nt,Ze,()=>{let Je,Be;try{({value:Je,done:Be}=bt.next())}catch(ct){return void Nt.error(ct)}Be?Nt.complete():Nt.next(Je)},0,!0)}),()=>(0,q.m)(bt?.return)&&bt.return()})}(Ct,Ze);if((0,qe.L)(Ct))return function ke(Ct,Ze){return Ne((0,qe.Q)(Ct),Ze)}(Ct,Ze)}throw(0,Ye.z)(Ct)}(Ct,Ze):(0,f.Xf)(Ct)}},4968:(we,le,I)=>{I.d(le,{R:()=>q});var f=I(8421),w=I(9751),te=I(5577),H=I(1144),X=I(576),ie=I(3268);const ee=["addListener","removeListener"],K=["addEventListener","removeEventListener"],se=["on","off"];function q($e,Qe,Ve,We){if((0,X.m)(Ve)&&(We=Ve,Ve=void 0),We)return q($e,Qe,Ve).pipe((0,ie.Z)(We));const[Ye,qe]=function Ke($e){return(0,X.m)($e.addEventListener)&&(0,X.m)($e.removeEventListener)}($e)?K.map(ke=>Fe=>$e[ke](Qe,Fe,Ve)):function ge($e){return(0,X.m)($e.addListener)&&(0,X.m)($e.removeListener)}($e)?ee.map(de($e,Qe)):function Ne($e){return(0,X.m)($e.on)&&(0,X.m)($e.off)}($e)?se.map(de($e,Qe)):[];if(!Ye&&(0,H.z)($e))return(0,te.z)(ke=>q(ke,Qe,Ve))((0,f.Xf)($e));if(!Ye)throw new TypeError("Invalid event target");return new w.y(ke=>{const Fe=(...Et)=>ke.next(1<Et.length?Et:Et[0]);return Ye(Fe),()=>qe(Fe)})}function de($e,Qe){return Ve=>We=>$e[Ve](Qe,We)}},8421:(we,le,I)=>{I.d(le,{Xf:()=>Ne});var f=I(655),w=I(1144),te=I(8239),H=I(9751),X=I(3670),ie=I(2206),ee=I(4532),K=I(6495),se=I(3260),q=I(576),de=I(7849),ge=I(8822);function Ne(ke){if(ke instanceof H.y)return ke;if(null!=ke){if((0,X.c)(ke))return function Ke(ke){return new H.y(Fe=>{const Et=ke[ge.L]();if((0,q.m)(Et.subscribe))return Et.subscribe(Fe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,w.z)(ke))return function $e(ke){return new H.y(Fe=>{for(let Et=0;Et<ke.length&&!Fe.closed;Et++)Fe.next(ke[Et]);Fe.complete()})}(ke);if((0,te.t)(ke))return function Qe(ke){return new H.y(Fe=>{ke.then(Et=>{Fe.closed||(Fe.next(Et),Fe.complete())},Et=>Fe.error(Et)).then(null,de.h)})}(ke);if((0,ie.D)(ke))return We(ke);if((0,K.T)(ke))return function Ve(ke){return new H.y(Fe=>{for(const Et of ke)if(Fe.next(Et),Fe.closed)return;Fe.complete()})}(ke);if((0,se.L)(ke))return function Ye(ke){return We((0,se.Q)(ke))}(ke)}throw(0,ee.z)(ke)}function We(ke){return new H.y(Fe=>{(function qe(ke,Fe){var Et,Ct,Ze,Nt;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Et=(0,f.KL)(ke);!(Ct=yield Et.next()).done;)if(Fe.next(Ct.value),Fe.closed)return}catch(bt){Ze={error:bt}}finally{try{Ct&&!Ct.done&&(Nt=Et.return)&&(yield Nt.call(Et))}finally{if(Ze)throw Ze.error}}Fe.complete()})})(ke,Fe).catch(Et=>Fe.error(Et))})}},6451:(we,le,I)=>{I.d(le,{T:()=>ie});var f=I(8189),w=I(8421),te=I(515),H=I(3269),X=I(457);function ie(...ee){const K=(0,H.yG)(ee),se=(0,H._6)(ee,1/0),q=ee;return q.length?1===q.length?(0,w.Xf)(q[0]):(0,f.J)(se)((0,X.D)(q,K)):te.E}},9646:(we,le,I)=>{I.d(le,{of:()=>te});var f=I(3269),w=I(457);function te(...H){const X=(0,f.yG)(H);return(0,w.D)(H,X)}},2843:(we,le,I)=>{I.d(le,{_:()=>te});var f=I(9751),w=I(576);function te(H,X){const ie=(0,w.m)(H)?H:()=>H,ee=K=>K.error(ie());return new f.y(X?K=>X.schedule(ee,0,K):ee)}},2805:(we,le,I)=>{I.d(le,{H:()=>X});var f=I(9751),w=I(4986),te=I(3532),H=I(1165);function X(ie=0,ee,K=w.P){let se=-1;return null!=ee&&((0,te.K)(ee)?K=ee:se=ee),new f.y(q=>{let de=(0,H.q)(ie)?+ie-K.now():ie;de<0&&(de=0);let ge=0;return K.schedule(function(){q.closed||(q.next(ge++),0<=se?this.schedule(void 0,se):q.complete())},de)})}},5403:(we,le,I)=>{I.d(le,{Q:()=>w});var f=I(930);class w extends f.Lv{constructor(H,X,ie,ee,K){super(H),this.onFinalize=K,this._next=X?function(se){try{X(se)}catch(q){H.error(q)}}:super._next,this._error=ee?function(se){try{ee(se)}catch(q){H.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(se){H.error(se)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var H;const{closed:X}=this;super.unsubscribe(),!X&&(null===(H=this.onFinalize)||void 0===H||H.call(this))}}},262:(we,le,I)=>{I.d(le,{K:()=>H});var f=I(8421),w=I(5403),te=I(4482);function H(X){return(0,te.e)((ie,ee)=>{let q,K=null,se=!1;K=ie.subscribe(new w.Q(ee,void 0,void 0,de=>{q=(0,f.Xf)(X(de,H(X)(ie))),K?(K.unsubscribe(),K=null,q.subscribe(ee)):se=!0})),se&&(K.unsubscribe(),K=null,q.subscribe(ee))})}},4351:(we,le,I)=>{I.d(le,{b:()=>te});var f=I(5577),w=I(576);function te(H,X){return(0,w.m)(X)?(0,f.z)(H,X,1):(0,f.z)(H,1)}},8372:(we,le,I)=>{I.d(le,{b:()=>H});var f=I(4986),w=I(4482),te=I(5403);function H(X,ie=f.z){return(0,w.e)((ee,K)=>{let se=null,q=null,de=null;const ge=()=>{if(se){se.unsubscribe(),se=null;const Ke=q;q=null,K.next(Ke)}};function Ne(){const Ke=de+X,$e=ie.now();if($e<Ke)return se=this.schedule(void 0,Ke-$e),void K.add(se);ge()}ee.subscribe(new te.Q(K,Ke=>{q=Ke,de=ie.now(),se||(se=ie.schedule(Ne,X),K.add(se))},()=>{ge(),K.complete()},void 0,()=>{q=se=null}))})}},6590:(we,le,I)=>{I.d(le,{d:()=>te});var f=I(4482),w=I(5403);function te(H){return(0,f.e)((X,ie)=>{let ee=!1;X.subscribe(new w.Q(ie,K=>{ee=!0,ie.next(K)},()=>{ee||ie.next(H),ie.complete()}))})}},4086:(we,le,I)=>{I.d(le,{g:()=>se});var f=I(4986),w=I(7272),te=I(5698),H=I(8502),X=I(9718),ie=I(5577);function ee(q,de){return de?ge=>(0,w.z)(de.pipe((0,te.q)(1),(0,H.l)()),ge.pipe(ee(q))):(0,ie.z)((ge,Ne)=>q(ge,Ne).pipe((0,te.q)(1),(0,X.h)(ge)))}var K=I(2805);function se(q,de=f.z){const ge=(0,K.H)(q,de);return ee(()=>ge)}},1884:(we,le,I)=>{I.d(le,{x:()=>H});var f=I(4671),w=I(4482),te=I(5403);function H(ie,ee=f.y){return ie=ie??X,(0,w.e)((K,se)=>{let q,de=!0;K.subscribe(new te.Q(se,ge=>{const Ne=ee(ge);(de||!ie(q,Ne))&&(de=!1,q=Ne,se.next(ge))}))})}function X(ie,ee){return ie===ee}},6129:(we,le,I)=>{I.d(le,{z:()=>X});var f=I(4004),w=I(8421),te=I(4482),H=I(5403);function X(ie,ee){return ee?K=>K.pipe(X((se,q)=>(0,w.Xf)(ie(se,q)).pipe((0,f.U)((de,ge)=>ee(se,de,q,ge))))):(0,te.e)((K,se)=>{let q=0,de=null,ge=!1;K.subscribe(new H.Q(se,Ne=>{de||(de=new H.Q(se,void 0,()=>{de=null,ge&&se.complete()}),(0,w.Xf)(ie(Ne,q++)).subscribe(de))},()=>{ge=!0,!de&&se.complete()}))})}},9300:(we,le,I)=>{I.d(le,{h:()=>te});var f=I(4482),w=I(5403);function te(H,X){return(0,f.e)((ie,ee)=>{let K=0;ie.subscribe(new w.Q(ee,se=>H.call(X,se,K++)&&ee.next(se)))})}},8746:(we,le,I)=>{I.d(le,{x:()=>w});var f=I(4482);function w(te){return(0,f.e)((H,X)=>{try{H.subscribe(X)}finally{X.add(te)}})}},590:(we,le,I)=>{I.d(le,{P:()=>ee});var f=I(6805),w=I(9300),te=I(5698),H=I(6590),X=I(8068),ie=I(4671);function ee(K,se){const q=arguments.length>=2;return de=>de.pipe(K?(0,w.h)((ge,Ne)=>K(ge,Ne,de)):ie.y,(0,te.q)(1),q?(0,H.d)(se):(0,X.T)(()=>new f.K))}},8502:(we,le,I)=>{I.d(le,{l:()=>H});var f=I(4482),w=I(5403),te=I(5032);function H(){return(0,f.e)((X,ie)=>{X.subscribe(new w.Q(ie,te.Z))})}},3103:(we,le,I)=>{I.d(le,{Z:()=>ee});var f=I(6805),w=I(9300),te=I(2035),H=I(8068),X=I(6590),ie=I(4671);function ee(K,se){const q=arguments.length>=2;return de=>de.pipe(K?(0,w.h)((ge,Ne)=>K(ge,Ne,de)):ie.y,(0,te.h)(1),q?(0,X.d)(se):(0,H.T)(()=>new f.K))}},4004:(we,le,I)=>{I.d(le,{U:()=>te});var f=I(4482),w=I(5403);function te(H,X){return(0,f.e)((ie,ee)=>{let K=0;ie.subscribe(new w.Q(ee,se=>{ee.next(H.call(X,se,K++))}))})}},9718:(we,le,I)=>{I.d(le,{h:()=>w});var f=I(4004);function w(te){return(0,f.U)(()=>te)}},8189:(we,le,I)=>{I.d(le,{J:()=>te});var f=I(5577),w=I(4671);function te(H=1/0){return(0,f.z)(w.y,H)}},5577:(we,le,I)=>{I.d(le,{z:()=>K});var f=I(4004),w=I(8421),te=I(4482),H=I(9672),X=I(5403),ee=I(576);function K(se,q,de=1/0){return(0,ee.m)(q)?K((ge,Ne)=>(0,f.U)((Ke,$e)=>q(ge,Ke,Ne,$e))((0,w.Xf)(se(ge,Ne))),de):("number"==typeof q&&(de=q),(0,te.e)((ge,Ne)=>function ie(se,q,de,ge,Ne,Ke,$e,Qe){const Ve=[];let We=0,Ye=0,qe=!1;const ke=()=>{qe&&!Ve.length&&!We&&q.complete()},Fe=Ct=>We<ge?Et(Ct):Ve.push(Ct),Et=Ct=>{Ke&&q.next(Ct),We++;let Ze=!1;(0,w.Xf)(de(Ct,Ye++)).subscribe(new X.Q(q,Nt=>{Ne?.(Nt),Ke?Fe(Nt):q.next(Nt)},()=>{Ze=!0},void 0,()=>{if(Ze)try{for(We--;Ve.length&&We<ge;){const Nt=Ve.shift();$e?(0,H.f)(q,$e,()=>Et(Nt)):Et(Nt)}ke()}catch(Nt){q.error(Nt)}}))};return se.subscribe(new X.Q(q,Fe,()=>{qe=!0,ke()})),()=>{Qe?.()}}(ge,Ne,se,de)))}},5363:(we,le,I)=>{I.d(le,{Q:()=>H});var f=I(9672),w=I(4482),te=I(5403);function H(X,ie=0){return(0,w.e)((ee,K)=>{ee.subscribe(new te.Q(K,se=>(0,f.f)(K,X,()=>K.next(se),ie),()=>(0,f.f)(K,X,()=>K.complete(),ie),se=>(0,f.f)(K,X,()=>K.error(se),ie)))})}},4813:(we,le,I)=>{I.d(le,{j:()=>w});var f=I(4004);function w(...te){const H=te.length;if(0===H)throw new Error("list of properties cannot be empty.");return(0,f.U)(X=>{let ie=X;for(let ee=0;ee<H;ee++){const K=ie?.[te[ee]];if(!(typeof K<"u"))return;ie=K}return ie})}},8646:(we,le,I)=>{I.d(le,{n:()=>de});var f=I(7579),w=I(4033),te=I(576),H=I(457),X=I(4482),ie=I(9751);const K={connector:()=>new f.x};function se(ge,Ne=K){const{connector:Ke}=Ne;return(0,X.e)(($e,Qe)=>{const Ve=Ke();(0,H.D)(ge(function ee(ge){return new ie.y(Ne=>ge.subscribe(Ne))}(Ve))).subscribe(Qe),Qe.add($e.subscribe(Ve))})}function de(ge){return ge?Ne=>se(ge)(Ne):Ne=>function q(ge,Ne){const Ke=(0,te.m)(ge)?ge:()=>ge;return(0,te.m)(Ne)?se(Ne,{connector:Ke}):$e=>new w.c($e,Ke)}(new f.x)(Ne)}},8343:(we,le,I)=>{I.d(le,{x:()=>te});var f=I(4482),w=I(5403);function te(){return(0,f.e)((H,X)=>{let ie=null;H._refCount++;const ee=new w.Q(X,void 0,void 0,void 0,()=>{if(!H||H._refCount<=0||0<--H._refCount)return void(ie=null);const K=H._connection,se=ie;ie=null,K&&(!se||K===se)&&K.unsubscribe(),X.unsubscribe()});H.subscribe(ee),ee.closed||(ie=H.connect())})}},5625:(we,le,I)=>{I.d(le,{X:()=>ie});var f=I(4482),w=I(5403),te=I(4671),H=I(2805),X=I(8421);function ie(ee=1/0){let K;K=ee&&"object"==typeof ee?ee:{count:ee};const{count:se=1/0,delay:q,resetOnSuccess:de=!1}=K;return se<=0?te.y:(0,f.e)((ge,Ne)=>{let $e,Ke=0;const Qe=()=>{let Ve=!1;$e=ge.subscribe(new w.Q(Ne,We=>{de&&(Ke=0),Ne.next(We)},void 0,We=>{if(Ke++<se){const Ye=()=>{$e?($e.unsubscribe(),$e=null,Qe()):Ve=!0};if(null!=q){const qe="number"==typeof q?(0,H.H)(q):(0,X.Xf)(q(We,Ke)),ke=new w.Q(Ne,()=>{ke.unsubscribe(),Ye()},()=>{Ne.complete()});qe.subscribe(ke)}else Ye()}else Ne.error(We)})),Ve&&($e.unsubscribe(),$e=null,Qe())};Qe()})}},5026:(we,le,I)=>{I.d(le,{R:()=>H});var f=I(4482),w=I(5403);function H(X,ie){return(0,f.e)(function te(X,ie,ee,K,se){return(q,de)=>{let ge=ee,Ne=ie,Ke=0;q.subscribe(new w.Q(de,$e=>{const Qe=Ke++;Ne=ge?X(Ne,$e,Qe):(ge=!0,$e),K&&de.next(Ne)},se&&(()=>{ge&&de.next(Ne),de.complete()})))}}(X,ie,arguments.length>=2,!0))}},3099:(we,le,I)=>{I.d(le,{B:()=>ie});var f=I(457),w=I(5698),te=I(7579),H=I(930),X=I(4482);function ie(K={}){const{connector:se=(()=>new te.x),resetOnError:q=!0,resetOnComplete:de=!0,resetOnRefCountZero:ge=!0}=K;return Ne=>{let Ke=null,$e=null,Qe=null,Ve=0,We=!1,Ye=!1;const qe=()=>{$e?.unsubscribe(),$e=null},ke=()=>{qe(),Ke=Qe=null,We=Ye=!1},Fe=()=>{const Et=Ke;ke(),Et?.unsubscribe()};return(0,X.e)((Et,Ct)=>{Ve++,!Ye&&!We&&qe();const Ze=Qe=Qe??se();Ct.add(()=>{Ve--,0===Ve&&!Ye&&!We&&($e=ee(Fe,ge))}),Ze.subscribe(Ct),Ke||(Ke=new H.Hp({next:Nt=>Ze.next(Nt),error:Nt=>{Ye=!0,qe(),$e=ee(ke,q,Nt),Ze.error(Nt)},complete:()=>{We=!0,qe(),$e=ee(ke,de),Ze.complete()}}),(0,f.D)(Et).subscribe(Ke))})(Ne)}}function ee(K,se,...q){return!0===se?(K(),null):!1===se?null:se(...q).pipe((0,w.q)(1)).subscribe(()=>K())}},4782:(we,le,I)=>{I.d(le,{d:()=>te});var f=I(4707),w=I(3099);function te(H,X,ie){var ee,K;let se,q=!1;return H&&"object"==typeof H?(se=null!==(ee=H.bufferSize)&&void 0!==ee?ee:1/0,X=null!==(K=H.windowTime)&&void 0!==K?K:1/0,q=!!H.refCount,ie=H.scheduler):se=H??1/0,(0,w.B)({connector:()=>new f.t(se,X,ie),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:q})}},5684:(we,le,I)=>{I.d(le,{T:()=>w});var f=I(9300);function w(te){return(0,f.h)((H,X)=>te<=X)}},8675:(we,le,I)=>{I.d(le,{O:()=>H});var f=I(7272),w=I(3269),te=I(4482);function H(...X){const ie=(0,w.yG)(X);return(0,te.e)((ee,K)=>{(ie?(0,f.z)(X,ee,ie):(0,f.z)(X,ee)).subscribe(K)})}},3900:(we,le,I)=>{I.d(le,{w:()=>H});var f=I(8421),w=I(4482),te=I(5403);function H(X,ie){return(0,w.e)((ee,K)=>{let se=null,q=0,de=!1;const ge=()=>de&&!se&&K.complete();ee.subscribe(new te.Q(K,Ne=>{se?.unsubscribe();let Ke=0;const $e=q++;(0,f.Xf)(X(Ne,$e)).subscribe(se=new te.Q(K,Qe=>K.next(ie?ie(Ne,Qe,$e,Ke++):Qe),()=>{se=null,ge()}))},()=>{de=!0,ge()}))})}},5698:(we,le,I)=>{I.d(le,{q:()=>H});var f=I(515),w=I(4482),te=I(5403);function H(X){return X<=0?()=>f.E:(0,w.e)((ie,ee)=>{let K=0;ie.subscribe(new te.Q(ee,se=>{++K<=X&&(ee.next(se),X<=K&&ee.complete())}))})}},2035:(we,le,I)=>{I.d(le,{h:()=>H});var f=I(515),w=I(4482),te=I(5403);function H(X){return X<=0?()=>f.E:(0,w.e)((ie,ee)=>{let K=[];ie.subscribe(new te.Q(ee,se=>{K.push(se),X<K.length&&K.shift()},()=>{for(const se of K)ee.next(se);ee.complete()},void 0,()=>{K=null}))})}},2722:(we,le,I)=>{I.d(le,{R:()=>X});var f=I(4482),w=I(5403),te=I(8421),H=I(5032);function X(ie){return(0,f.e)((ee,K)=>{(0,te.Xf)(ie).subscribe(new w.Q(K,()=>K.complete(),H.Z)),!K.closed&&ee.subscribe(K)})}},2529:(we,le,I)=>{I.d(le,{o:()=>te});var f=I(4482),w=I(5403);function te(H,X=!1){return(0,f.e)((ie,ee)=>{let K=0;ie.subscribe(new w.Q(ee,se=>{const q=H(se,K++);(q||X)&&ee.next(se),!q&&ee.complete()}))})}},8505:(we,le,I)=>{I.d(le,{b:()=>X});var f=I(576),w=I(4482),te=I(5403),H=I(4671);function X(ie,ee,K){const se=(0,f.m)(ie)||ee||K?{next:ie,error:ee,complete:K}:ie;return se?(0,w.e)((q,de)=>{var ge;null===(ge=se.subscribe)||void 0===ge||ge.call(se);let Ne=!0;q.subscribe(new te.Q(de,Ke=>{var $e;null===($e=se.next)||void 0===$e||$e.call(se,Ke),de.next(Ke)},()=>{var Ke;Ne=!1,null===(Ke=se.complete)||void 0===Ke||Ke.call(se),de.complete()},Ke=>{var $e;Ne=!1,null===($e=se.error)||void 0===$e||$e.call(se,Ke),de.error(Ke)},()=>{var Ke,$e;Ne&&(null===(Ke=se.unsubscribe)||void 0===Ke||Ke.call(se)),null===($e=se.finalize)||void 0===$e||$e.call(se)}))}):H.y}},9468:(we,le,I)=>{I.d(le,{p:()=>K});var f=I(4986),w=I(4482),te=I(5403),H=I(8421);const X={leading:!0,trailing:!1};var ee=I(2805);function K(se,q=f.z,de=X){const ge=(0,ee.H)(se,q);return function ie(se,q=X){return(0,w.e)((de,ge)=>{const{leading:Ne,trailing:Ke}=q;let $e=!1,Qe=null,Ve=null,We=!1;const Ye=()=>{Ve?.unsubscribe(),Ve=null,Ke&&(Fe(),We&&ge.complete())},qe=()=>{Ve=null,We&&ge.complete()},ke=Et=>Ve=(0,H.Xf)(se(Et)).subscribe(new te.Q(ge,Ye,qe)),Fe=()=>{if($e){$e=!1;const Et=Qe;Qe=null,ge.next(Et),!We&&ke(Et)}};de.subscribe(new te.Q(ge,Et=>{$e=!0,Qe=Et,(!Ve||Ve.closed)&&(Ne?Fe():ke(Et))},()=>{We=!0,(!(Ke&&$e&&Ve)||Ve.closed)&&ge.complete()}))})}(()=>ge,de)}},8068:(we,le,I)=>{I.d(le,{T:()=>H});var f=I(6805),w=I(4482),te=I(5403);function H(ie=X){return(0,w.e)((ee,K)=>{let se=!1;ee.subscribe(new te.Q(K,q=>{se=!0,K.next(q)},()=>se?K.complete():K.error(ie())))})}function X(){return new f.K}},7414:(we,le,I)=>{I.d(le,{V:()=>se});var f=I(4986),w=I(1165),te=I(4482),H=I(8421),X=I(3888),ie=I(5403),ee=I(9672);const K=(0,X.d)(de=>function(Ne=null){de(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=Ne});function se(de,ge){const{first:Ne,each:Ke,with:$e=q,scheduler:Qe=ge??f.z,meta:Ve=null}=(0,w.q)(de)?{first:de}:"number"==typeof de?{each:de}:de;if(null==Ne&&null==Ke)throw new TypeError("No timeout provided.");return(0,te.e)((We,Ye)=>{let qe,ke,Fe=null,Et=0;const Ct=Ze=>{ke=(0,ee.f)(Ye,Qe,()=>{try{qe.unsubscribe(),(0,H.Xf)($e({meta:Ve,lastValue:Fe,seen:Et})).subscribe(Ye)}catch(Nt){Ye.error(Nt)}},Ze)};qe=We.subscribe(new ie.Q(Ye,Ze=>{ke?.unsubscribe(),Et++,Ye.next(Fe=Ze),Ke>0&&Ct(Ke)},void 0,void 0,()=>{ke?.closed||ke?.unsubscribe(),Fe=null})),Ct(null!=Ne?"number"==typeof Ne?Ne:+Ne-Qe.now():Ke)})}function q(de){throw new K(de)}},1365:(we,le,I)=>{I.d(le,{M:()=>ee});var f=I(4482),w=I(5403),te=I(8421),H=I(4671),X=I(5032),ie=I(3269);function ee(...K){const se=(0,ie.jO)(K);return(0,f.e)((q,de)=>{const ge=K.length,Ne=new Array(ge);let Ke=K.map(()=>!1),$e=!1;for(let Qe=0;Qe<ge;Qe++)(0,te.Xf)(K[Qe]).subscribe(new w.Q(de,Ve=>{Ne[Qe]=Ve,!$e&&!Ke[Qe]&&(Ke[Qe]=!0,($e=Ke.every(H.y))&&(Ke=null))},X.Z));q.subscribe(new w.Q(de,Qe=>{if($e){const Ve=[Qe,...Ne];de.next(se?se(...Ve):Ve)}}))})}},4408:(we,le,I)=>{I.d(le,{o:()=>X});var f=I(727);class w extends f.w0{constructor(ee,K){super()}schedule(ee,K=0){return this}}const te={setInterval(...ie){const{delegate:ee}=te;return(ee?.setInterval||setInterval)(...ie)},clearInterval(ie){const{delegate:ee}=te;return(ee?.clearInterval||clearInterval)(ie)},delegate:void 0};var H=I(8737);class X extends w{constructor(ee,K){super(ee,K),this.scheduler=ee,this.work=K,this.pending=!1}schedule(ee,K=0){if(this.closed)return this;this.state=ee;const se=this.id,q=this.scheduler;return null!=se&&(this.id=this.recycleAsyncId(q,se,K)),this.pending=!0,this.delay=K,this.id=this.id||this.requestAsyncId(q,this.id,K),this}requestAsyncId(ee,K,se=0){return te.setInterval(ee.flush.bind(ee,this),se)}recycleAsyncId(ee,K,se=0){if(null!=se&&this.delay===se&&!1===this.pending)return K;te.clearInterval(K)}execute(ee,K){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const se=this._execute(ee,K);if(se)return se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ee,K){let q,se=!1;try{this.work(ee)}catch(de){se=!0,q=de||new Error("Scheduled action threw falsy error")}if(se)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:ee,scheduler:K}=this,{actions:se}=K;this.work=this.state=this.scheduler=null,this.pending=!1,(0,H.P)(se,this),null!=ee&&(this.id=this.recycleAsyncId(K,ee,null)),this.delay=null,super.unsubscribe()}}}},7565:(we,le,I)=>{I.d(le,{v:()=>te});var f=I(6063);class w{constructor(X,ie=w.now){this.schedulerActionCtor=X,this.now=ie}schedule(X,ie=0,ee){return new this.schedulerActionCtor(this,X).schedule(ee,ie)}}w.now=f.l.now;class te extends w{constructor(X,ie=w.now){super(X,ie),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:ie}=this;if(this._active)return void ie.push(X);let ee;this._active=!0;do{if(ee=X.execute(X.state,X.delay))break}while(X=ie.shift());if(this._active=!1,ee){for(;X=ie.shift();)X.unsubscribe();throw ee}}}},4986:(we,le,I)=>{I.d(le,{P:()=>H,z:()=>te});var f=I(4408);const te=new(I(7565).v)(f.o),H=te},6063:(we,le,I)=>{I.d(le,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},233:(we,le,I)=>{I.d(le,{N:()=>X});var f=I(4408),te=I(7565);const X=new class H extends te.v{}(class w extends f.o{constructor(K,se){super(K,se),this.scheduler=K,this.work=se}schedule(K,se=0){return se>0?super.schedule(K,se):(this.delay=se,this.state=K,this.scheduler.flush(this),this)}execute(K,se){return se>0||this.closed?super.execute(K,se):this._execute(K,se)}requestAsyncId(K,se,q=0){return null!=q&&q>0||null==q&&this.delay>0?super.requestAsyncId(K,se,q):K.flush(this)}})},3410:(we,le,I)=>{I.d(le,{z:()=>f});const f={setTimeout(...w){const{delegate:te}=f;return(te?.setTimeout||setTimeout)(...w)},clearTimeout(w){const{delegate:te}=f;return(te?.clearTimeout||clearTimeout)(w)},delegate:void 0}},2202:(we,le,I)=>{I.d(le,{h:()=>w});const w=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(we,le,I)=>{I.d(le,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(we,le,I)=>{I.d(le,{K:()=>w});const w=(0,I(3888).d)(te=>function(){te(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(we,le,I)=>{I.d(le,{_6:()=>ie,jO:()=>H,yG:()=>X});var f=I(576),w=I(3532);function te(ee){return ee[ee.length-1]}function H(ee){return(0,f.m)(te(ee))?ee.pop():void 0}function X(ee){return(0,w.K)(te(ee))?ee.pop():void 0}function ie(ee,K){return"number"==typeof te(ee)?ee.pop():K}},4742:(we,le,I)=>{I.d(le,{D:()=>X});const{isArray:f}=Array,{getPrototypeOf:w,prototype:te,keys:H}=Object;function X(ee){if(1===ee.length){const K=ee[0];if(f(K))return{args:K,keys:null};if(function ie(ee){return ee&&"object"==typeof ee&&w(ee)===te}(K)){const se=H(K);return{args:se.map(q=>K[q]),keys:se}}}return{args:ee,keys:null}}},8737:(we,le,I)=>{function f(w,te){if(w){const H=w.indexOf(te);0<=H&&w.splice(H,1)}}I.d(le,{P:()=>f})},3888:(we,le,I)=>{function f(w){const H=w(X=>{Error.call(X),X.stack=(new Error).stack});return H.prototype=Object.create(Error.prototype),H.prototype.constructor=H,H}I.d(le,{d:()=>f})},1810:(we,le,I)=>{function f(w,te){return w.reduce((H,X,ie)=>(H[X]=te[ie],H),{})}I.d(le,{n:()=>f})},2806:(we,le,I)=>{I.d(le,{O:()=>H,x:()=>te});var f=I(2416);let w=null;function te(X){if(f.v.useDeprecatedSynchronousErrorHandling){const ie=!w;if(ie&&(w={errorThrown:!1,error:null}),X(),ie){const{errorThrown:ee,error:K}=w;if(w=null,ee)throw K}}else X()}function H(X){f.v.useDeprecatedSynchronousErrorHandling&&w&&(w.errorThrown=!0,w.error=X)}},9672:(we,le,I)=>{function f(w,te,H,X=0,ie=!1){const ee=te.schedule(function(){H(),ie?w.add(this.schedule(null,X)):this.unsubscribe()},X);if(w.add(ee),!ie)return ee}I.d(le,{f:()=>f})},4671:(we,le,I)=>{function f(w){return w}I.d(le,{y:()=>f})},1144:(we,le,I)=>{I.d(le,{z:()=>f});const f=w=>w&&"number"==typeof w.length&&"function"!=typeof w},2206:(we,le,I)=>{I.d(le,{D:()=>w});var f=I(576);function w(te){return Symbol.asyncIterator&&(0,f.m)(te?.[Symbol.asyncIterator])}},1165:(we,le,I)=>{function f(w){return w instanceof Date&&!isNaN(w)}I.d(le,{q:()=>f})},576:(we,le,I)=>{function f(w){return"function"==typeof w}I.d(le,{m:()=>f})},3670:(we,le,I)=>{I.d(le,{c:()=>te});var f=I(8822),w=I(576);function te(H){return(0,w.m)(H[f.L])}},6495:(we,le,I)=>{I.d(le,{T:()=>te});var f=I(2202),w=I(576);function te(H){return(0,w.m)(H?.[f.h])}},8239:(we,le,I)=>{I.d(le,{t:()=>w});var f=I(576);function w(te){return(0,f.m)(te?.then)}},3260:(we,le,I)=>{I.d(le,{L:()=>H,Q:()=>te});var f=I(655),w=I(576);function te(X){return(0,f.FC)(this,arguments,function*(){const ee=X.getReader();try{for(;;){const{value:K,done:se}=yield(0,f.qq)(ee.read());if(se)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(K)}}finally{ee.releaseLock()}})}function H(X){return(0,w.m)(X?.getReader)}},3532:(we,le,I)=>{I.d(le,{K:()=>w});var f=I(576);function w(te){return te&&(0,f.m)(te.schedule)}},4482:(we,le,I)=>{I.d(le,{A:()=>w,e:()=>te});var f=I(576);function w(H){return(0,f.m)(H?.lift)}function te(H){return X=>{if(w(X))return X.lift(function(ie){try{return H(ie,this)}catch(ee){this.error(ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(we,le,I)=>{I.d(le,{Z:()=>H});var f=I(4004);const{isArray:w}=Array;function H(X){return(0,f.U)(ie=>function te(X,ie){return w(ie)?X(...ie):X(ie)}(X,ie))}},5032:(we,le,I)=>{function f(){}I.d(le,{Z:()=>f})},9635:(we,le,I)=>{I.d(le,{U:()=>te,z:()=>w});var f=I(4671);function w(...H){return te(H)}function te(H){return 0===H.length?f.y:1===H.length?H[0]:function(ie){return H.reduce((ee,K)=>K(ee),ie)}}},7849:(we,le,I)=>{I.d(le,{h:()=>te});var f=I(2416),w=I(3410);function te(H){w.z.setTimeout(()=>{const{onUnhandledError:X}=f.v;if(!X)throw H;X(H)})}},4532:(we,le,I)=>{function f(w){return new TypeError(`You provided ${null!==w&&"object"==typeof w?"an invalid object":`'${w}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}I.d(le,{z:()=>f})},655:(we,le,I)=>{function H(Je,Be){var ct={};for(var nt in Je)Object.prototype.hasOwnProperty.call(Je,nt)&&Be.indexOf(nt)<0&&(ct[nt]=Je[nt]);if(null!=Je&&"function"==typeof Object.getOwnPropertySymbols){var Pt=0;for(nt=Object.getOwnPropertySymbols(Je);Pt<nt.length;Pt++)Be.indexOf(nt[Pt])<0&&Object.prototype.propertyIsEnumerable.call(Je,nt[Pt])&&(ct[nt[Pt]]=Je[nt[Pt]])}return ct}function X(Je,Be,ct,nt){var Ht,Pt=arguments.length,Tt=Pt<3?Be:null===nt?nt=Object.getOwnPropertyDescriptor(Be,ct):nt;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Tt=Reflect.decorate(Je,Be,ct,nt);else for(var ir=Je.length-1;ir>=0;ir--)(Ht=Je[ir])&&(Tt=(Pt<3?Ht(Tt):Pt>3?Ht(Be,ct,Tt):Ht(Be,ct))||Tt);return Pt>3&&Tt&&Object.defineProperty(Be,ct,Tt),Tt}function K(Je,Be,ct,nt){return new(ct||(ct=Promise))(function(Tt,Ht){function ir(Fn){try{Yt(nt.next(Fn))}catch(vn){Ht(vn)}}function an(Fn){try{Yt(nt.throw(Fn))}catch(vn){Ht(vn)}}function Yt(Fn){Fn.done?Tt(Fn.value):function Pt(Tt){return Tt instanceof ct?Tt:new ct(function(Ht){Ht(Tt)})}(Fn.value).then(ir,an)}Yt((nt=nt.apply(Je,Be||[])).next())})}function Ve(Je){return this instanceof Ve?(this.v=Je,this):new Ve(Je)}function We(Je,Be,ct){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pt,nt=ct.apply(Je,Be||[]),Tt=[];return Pt={},Ht("next"),Ht("throw"),Ht("return"),Pt[Symbol.asyncIterator]=function(){return this},Pt;function Ht(ur){nt[ur]&&(Pt[ur]=function(Fr){return new Promise(function(Mn,hn){Tt.push([ur,Fr,Mn,hn])>1||ir(ur,Fr)})})}function ir(ur,Fr){try{!function an(ur){ur.value instanceof Ve?Promise.resolve(ur.value.v).then(Yt,Fn):vn(Tt[0][2],ur)}(nt[ur](Fr))}catch(Mn){vn(Tt[0][3],Mn)}}function Yt(ur){ir("next",ur)}function Fn(ur){ir("throw",ur)}function vn(ur,Fr){ur(Fr),Tt.shift(),Tt.length&&ir(Tt[0][0],Tt[0][1])}}function qe(Je){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ct,Be=Je[Symbol.asyncIterator];return Be?Be.call(Je):(Je=function ge(Je){var Be="function"==typeof Symbol&&Symbol.iterator,ct=Be&&Je[Be],nt=0;if(ct)return ct.call(Je);if(Je&&"number"==typeof Je.length)return{next:function(){return Je&&nt>=Je.length&&(Je=void 0),{value:Je&&Je[nt++],done:!Je}}};throw new TypeError(Be?"Object is not iterable.":"Symbol.iterator is not defined.")}(Je),ct={},nt("next"),nt("throw"),nt("return"),ct[Symbol.asyncIterator]=function(){return this},ct);function nt(Tt){ct[Tt]=Je[Tt]&&function(Ht){return new Promise(function(ir,an){!function Pt(Tt,Ht,ir,an){Promise.resolve(an).then(function(Yt){Tt({value:Yt,done:ir})},Ht)}(ir,an,(Ht=Je[Tt](Ht)).done,Ht.value)})}}}I.d(le,{FC:()=>We,KL:()=>qe,_T:()=>H,gn:()=>X,mG:()=>K,qq:()=>Ve})},9671:(we,le,I)=>{function f(te,H,X,ie,ee,K,se){try{var q=te[K](se),de=q.value}catch(ge){return void X(ge)}q.done?H(de):Promise.resolve(de).then(ie,ee)}function w(te){return function(){var H=this,X=arguments;return new Promise(function(ie,ee){var K=te.apply(H,X);function se(de){f(K,ie,ee,se,q,"next",de)}function q(de){f(K,ie,ee,se,q,"throw",de)}se(void 0)})}}I.d(le,{Z:()=>w})},7340:(we,le,I)=>{I.d(le,{EY:()=>Qe,F4:()=>q,IO:()=>$e,LC:()=>w,SB:()=>se,X$:()=>H,ZE:()=>Ye,ZN:()=>We,_j:()=>f,eR:()=>de,jt:()=>X,k1:()=>qe,l3:()=>te,oB:()=>K,pV:()=>Ne,ru:()=>ie,vP:()=>ee});class f{}class w{}const te="*";function H(ke,Fe){return{type:7,name:ke,definitions:Fe,options:{}}}function X(ke,Fe=null){return{type:4,styles:Fe,timings:ke}}function ie(ke,Fe=null){return{type:3,steps:ke,options:Fe}}function ee(ke,Fe=null){return{type:2,steps:ke,options:Fe}}function K(ke){return{type:6,styles:ke,offset:null}}function se(ke,Fe,Et){return{type:0,name:ke,styles:Fe,options:Et}}function q(ke){return{type:5,steps:ke}}function de(ke,Fe,Et=null){return{type:1,expr:ke,animation:Fe,options:Et}}function Ne(ke=null){return{type:9,options:ke}}function $e(ke,Fe,Et=null){return{type:11,selector:ke,animation:Fe,options:Et}}function Qe(ke,Fe){return{type:12,timings:ke,animation:Fe}}function Ve(ke){Promise.resolve().then(ke)}class We{constructor(Fe=0,Et=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Fe+Et}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Fe=>Fe()),this._onDoneFns=[])}onStart(Fe){this._originalOnStartFns.push(Fe),this._onStartFns.push(Fe)}onDone(Fe){this._originalOnDoneFns.push(Fe),this._onDoneFns.push(Fe)}onDestroy(Fe){this._onDestroyFns.push(Fe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ve(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Fe=>Fe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Fe=>Fe()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Fe){this._position=this.totalTime?Fe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Fe){const Et="start"==Fe?this._onStartFns:this._onDoneFns;Et.forEach(Ct=>Ct()),Et.length=0}}class Ye{constructor(Fe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Fe;let Et=0,Ct=0,Ze=0;const Nt=this.players.length;0==Nt?Ve(()=>this._onFinish()):this.players.forEach(bt=>{bt.onDone(()=>{++Et==Nt&&this._onFinish()}),bt.onDestroy(()=>{++Ct==Nt&&this._onDestroy()}),bt.onStart(()=>{++Ze==Nt&&this._onStart()})}),this.totalTime=this.players.reduce((bt,Je)=>Math.max(bt,Je.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Fe=>Fe()),this._onDoneFns=[])}init(){this.players.forEach(Fe=>Fe.init())}onStart(Fe){this._onStartFns.push(Fe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Fe=>Fe()),this._onStartFns=[])}onDone(Fe){this._onDoneFns.push(Fe)}onDestroy(Fe){this._onDestroyFns.push(Fe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Fe=>Fe.play())}pause(){this.players.forEach(Fe=>Fe.pause())}restart(){this.players.forEach(Fe=>Fe.restart())}finish(){this._onFinish(),this.players.forEach(Fe=>Fe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Fe=>Fe.destroy()),this._onDestroyFns.forEach(Fe=>Fe()),this._onDestroyFns=[])}reset(){this.players.forEach(Fe=>Fe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Fe){const Et=Fe*this.totalTime;this.players.forEach(Ct=>{const Ze=Ct.totalTime?Math.min(1,Et/Ct.totalTime):1;Ct.setPosition(Ze)})}getPosition(){const Fe=this.players.reduce((Et,Ct)=>null===Et||Ct.totalTime>Et.totalTime?Ct:Et,null);return null!=Fe?Fe.getPosition():0}beforeDestroy(){this.players.forEach(Fe=>{Fe.beforeDestroy&&Fe.beforeDestroy()})}triggerCallback(Fe){const Et="start"==Fe?this._onStartFns:this._onDoneFns;Et.forEach(Ct=>Ct()),Et.length=0}}const qe="!"},6895:(we,le,I)=>{I.d(le,{Do:()=>Ye,ED:()=>Ee,EM:()=>bs,Gx:()=>bi,H9:()=>wo,HT:()=>H,JF:()=>Hr,JJ:()=>Al,K0:()=>ie,Mx:()=>_i,NF:()=>Bo,Nd:()=>Ls,O5:()=>si,OU:()=>po,Ov:()=>Si,PC:()=>$t,RF:()=>Br,S$:()=>Qe,Ts:()=>qn,V_:()=>se,Ye:()=>qe,Zx:()=>Vo,_K:()=>_s,b0:()=>We,bD:()=>Bi,ez:()=>ss,gd:()=>yn,i8:()=>qr,mk:()=>xn,n9:()=>Ys,p6:()=>Qn,q:()=>te,rS:()=>vi,sg:()=>Xn,tP:()=>Kt,uU:()=>sr,w_:()=>X});var f=I(4650);let w=null;function te(){return w}function H(P){w||(w=P)}class X{}const ie=new f.OlP("DocumentToken");let ee=(()=>{class P{historyGo(V){throw new Error("Not implemented")}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275prov=f.Yz7({token:P,factory:function(){return function K(){return(0,f.LFG)(q)}()},providedIn:"platform"}),P})();const se=new f.OlP("Location Initialized");let q=(()=>{class P extends ee{constructor(V){super(),this._doc=V,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return te().getBaseHref(this._doc)}onPopState(V){const ae=te().getGlobalEventTarget(this._doc,"window");return ae.addEventListener("popstate",V,!1),()=>ae.removeEventListener("popstate",V)}onHashChange(V){const ae=te().getGlobalEventTarget(this._doc,"window");return ae.addEventListener("hashchange",V,!1),()=>ae.removeEventListener("hashchange",V)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(V){this._location.pathname=V}pushState(V,ae,Ce){de()?this._history.pushState(V,ae,Ce):this._location.hash=Ce}replaceState(V,ae,Ce){de()?this._history.replaceState(V,ae,Ce):this._location.hash=Ce}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return P.\u0275fac=function(V){return new(V||P)(f.LFG(ie))},P.\u0275prov=f.Yz7({token:P,factory:function(){return function ge(){return new q((0,f.LFG)(ie))}()},providedIn:"platform"}),P})();function de(){return!!window.history.pushState}function Ne(P,Q){if(0==P.length)return Q;if(0==Q.length)return P;let V=0;return P.endsWith("/")&&V++,Q.startsWith("/")&&V++,2==V?P+Q.substring(1):1==V?P+Q:P+"/"+Q}function Ke(P){const Q=P.match(/#|\?|$/),V=Q&&Q.index||P.length;return P.slice(0,V-("/"===P[V-1]?1:0))+P.slice(V)}function $e(P){return P&&"?"!==P[0]?"?"+P:P}let Qe=(()=>{class P{historyGo(V){throw new Error("Not implemented")}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275prov=f.Yz7({token:P,factory:function(){return(0,f.f3M)(We)},providedIn:"root"}),P})();const Ve=new f.OlP("appBaseHref");let We=(()=>{class P extends Qe{constructor(V,ae){super(),this._platformLocation=V,this._removeListenerFns=[],this._baseHref=ae??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return Ne(this._baseHref,V)}path(V=!1){const ae=this._platformLocation.pathname+$e(this._platformLocation.search),Ce=this._platformLocation.hash;return Ce&&V?`${ae}${Ce}`:ae}pushState(V,ae,Ce,ft){const vt=this.prepareExternalUrl(Ce+$e(ft));this._platformLocation.pushState(V,ae,vt)}replaceState(V,ae,Ce,ft){const vt=this.prepareExternalUrl(Ce+$e(ft));this._platformLocation.replaceState(V,ae,vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){this._platformLocation.historyGo?.(V)}}return P.\u0275fac=function(V){return new(V||P)(f.LFG(ee),f.LFG(Ve,8))},P.\u0275prov=f.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),Ye=(()=>{class P extends Qe{constructor(V,ae){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=ae&&(this._baseHref=ae)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let ae=this._platformLocation.hash;return null==ae&&(ae="#"),ae.length>0?ae.substring(1):ae}prepareExternalUrl(V){const ae=Ne(this._baseHref,V);return ae.length>0?"#"+ae:ae}pushState(V,ae,Ce,ft){let vt=this.prepareExternalUrl(Ce+$e(ft));0==vt.length&&(vt=this._platformLocation.pathname),this._platformLocation.pushState(V,ae,vt)}replaceState(V,ae,Ce,ft){let vt=this.prepareExternalUrl(Ce+$e(ft));0==vt.length&&(vt=this._platformLocation.pathname),this._platformLocation.replaceState(V,ae,vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){this._platformLocation.historyGo?.(V)}}return P.\u0275fac=function(V){return new(V||P)(f.LFG(ee),f.LFG(Ve,8))},P.\u0275prov=f.Yz7({token:P,factory:P.\u0275fac}),P})(),qe=(()=>{class P{constructor(V){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=V;const ae=this._locationStrategy.getBaseHref();this._basePath=function Ct(P){if(new RegExp("^(https?:)?//").test(P)){const[,V]=P.split(/\/\/[^\/]+/);return V}return P}(Ke(Et(ae))),this._locationStrategy.onPopState(Ce=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ce.state,type:Ce.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(V=!1){return this.normalize(this._locationStrategy.path(V))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(V,ae=""){return this.path()==this.normalize(V+$e(ae))}normalize(V){return P.stripTrailingSlash(function Fe(P,Q){if(!P||!Q.startsWith(P))return Q;const V=Q.substring(P.length);return""===V||["/",";","?","#"].includes(V[0])?V:Q}(this._basePath,Et(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._locationStrategy.prepareExternalUrl(V)}go(V,ae="",Ce=null){this._locationStrategy.pushState(Ce,"",V,ae),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+$e(ae)),Ce)}replaceState(V,ae="",Ce=null){this._locationStrategy.replaceState(Ce,"",V,ae),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+$e(ae)),Ce)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(V=0){this._locationStrategy.historyGo?.(V)}onUrlChange(V){return this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ae=>{this._notifyUrlChangeListeners(ae.url,ae.state)})),()=>{const ae=this._urlChangeListeners.indexOf(V);this._urlChangeListeners.splice(ae,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(V="",ae){this._urlChangeListeners.forEach(Ce=>Ce(V,ae))}subscribe(V,ae,Ce){return this._subject.subscribe({next:V,error:ae,complete:Ce})}}return P.normalizeQueryParams=$e,P.joinWithSlash=Ne,P.stripTrailingSlash=Ke,P.\u0275fac=function(V){return new(V||P)(f.LFG(Qe))},P.\u0275prov=f.Yz7({token:P,factory:function(){return function ke(){return new qe((0,f.LFG)(Qe))}()},providedIn:"root"}),P})();function Et(P){return P.replace(/\/index.html$/,"")}const Ze={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var Nt=(()=>((Nt=Nt||{})[Nt.Decimal=0]="Decimal",Nt[Nt.Percent=1]="Percent",Nt[Nt.Currency=2]="Currency",Nt[Nt.Scientific=3]="Scientific",Nt))(),bt=(()=>((bt=bt||{})[bt.Zero=0]="Zero",bt[bt.One=1]="One",bt[bt.Two=2]="Two",bt[bt.Few=3]="Few",bt[bt.Many=4]="Many",bt[bt.Other=5]="Other",bt))(),Je=(()=>((Je=Je||{})[Je.Format=0]="Format",Je[Je.Standalone=1]="Standalone",Je))(),Be=(()=>((Be=Be||{})[Be.Narrow=0]="Narrow",Be[Be.Abbreviated=1]="Abbreviated",Be[Be.Wide=2]="Wide",Be[Be.Short=3]="Short",Be))(),ct=(()=>((ct=ct||{})[ct.Short=0]="Short",ct[ct.Medium=1]="Medium",ct[ct.Long=2]="Long",ct[ct.Full=3]="Full",ct))(),nt=(()=>((nt=nt||{})[nt.Decimal=0]="Decimal",nt[nt.Group=1]="Group",nt[nt.List=2]="List",nt[nt.PercentSign=3]="PercentSign",nt[nt.PlusSign=4]="PlusSign",nt[nt.MinusSign=5]="MinusSign",nt[nt.Exponential=6]="Exponential",nt[nt.SuperscriptingExponent=7]="SuperscriptingExponent",nt[nt.PerMille=8]="PerMille",nt[nt.Infinity=9]="Infinity",nt[nt.NaN=10]="NaN",nt[nt.TimeSeparator=11]="TimeSeparator",nt[nt.CurrencyDecimal=12]="CurrencyDecimal",nt[nt.CurrencyGroup=13]="CurrencyGroup",nt))();function ur(P,Q){return cr((0,f.cg1)(P)[f.wAp.DateFormat],Q)}function Fr(P,Q){return cr((0,f.cg1)(P)[f.wAp.TimeFormat],Q)}function Mn(P,Q){return cr((0,f.cg1)(P)[f.wAp.DateTimeFormat],Q)}function hn(P,Q){const V=(0,f.cg1)(P),ae=V[f.wAp.NumberSymbols][Q];if(typeof ae>"u"){if(Q===nt.CurrencyDecimal)return V[f.wAp.NumberSymbols][nt.Decimal];if(Q===nt.CurrencyGroup)return V[f.wAp.NumberSymbols][nt.Group]}return ae}function ii(P,Q){return(0,f.cg1)(P)[f.wAp.NumberFormats][Q]}const Lt=f.kL8;function Vn(P){if(!P[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${P[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function cr(P,Q){for(let V=Q;V>-1;V--)if(typeof P[V]<"u")return P[V];throw new Error("Locale data API: locale data undefined")}function ln(P){const[Q,V]=P.split(":");return{hours:+Q,minutes:+V}}const Qr=2,Ar=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Tn={},Yn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var dr=(()=>((dr=dr||{})[dr.Short=0]="Short",dr[dr.ShortGMT=1]="ShortGMT",dr[dr.Long=2]="Long",dr[dr.Extended=3]="Extended",dr))(),un=(()=>((un=un||{})[un.FullYear=0]="FullYear",un[un.Month=1]="Month",un[un.Date=2]="Date",un[un.Hours=3]="Hours",un[un.Minutes=4]="Minutes",un[un.Seconds=5]="Seconds",un[un.FractionalSeconds=6]="FractionalSeconds",un[un.Day=7]="Day",un))(),en=(()=>((en=en||{})[en.DayPeriods=0]="DayPeriods",en[en.Days=1]="Days",en[en.Months=2]="Months",en[en.Eras=3]="Eras",en))();function Qn(P,Q,V,ae){let Ce=function Rt(P){if(Re(P))return P;if("number"==typeof P&&!isNaN(P))return new Date(P);if("string"==typeof P){if(P=P.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(P)){const[Ce,ft=1,vt=1]=P.split("-").map(dn=>+dn);return yi(Ce,ft-1,vt)}const V=parseFloat(P);if(!isNaN(P-V))return new Date(V);let ae;if(ae=P.match(Ar))return function zt(P){const Q=new Date(0);let V=0,ae=0;const Ce=P[8]?Q.setUTCFullYear:Q.setFullYear,ft=P[8]?Q.setUTCHours:Q.setHours;P[9]&&(V=Number(P[9]+P[10]),ae=Number(P[9]+P[11])),Ce.call(Q,Number(P[1]),Number(P[2])-1,Number(P[3]));const vt=Number(P[4]||0)-V,dn=Number(P[5]||0)-ae,Dr=Number(P[6]||0),Xr=Math.floor(1e3*parseFloat("0."+(P[7]||0)));return ft.call(Q,vt,dn,Dr,Xr),Q}(ae)}const Q=new Date(P);if(!Re(Q))throw new Error(`Unable to convert "${P}" into a date`);return Q}(P);Q=Ur(V,Q)||Q;let dn,vt=[];for(;Q;){if(dn=Yn.exec(Q),!dn){vt.push(Q);break}{vt=vt.concat(dn.slice(1));const lr=vt.pop();if(!lr)break;Q=lr}}let Dr=Ce.getTimezoneOffset();ae&&(Dr=Te(ae,Dr),Ce=function Le(P,Q,V){const ae=V?-1:1,Ce=P.getTimezoneOffset();return function et(P,Q){return(P=new Date(P.getTime())).setMinutes(P.getMinutes()+Q),P}(P,ae*(Te(Q,Ce)-Ce))}(Ce,ae,!0));let Xr="";return vt.forEach(lr=>{const Bn=function ve(P){if(pe[P])return pe[P];let Q;switch(P){case"G":case"GG":case"GGG":Q=Hn(en.Eras,Be.Abbreviated);break;case"GGGG":Q=Hn(en.Eras,Be.Wide);break;case"GGGGG":Q=Hn(en.Eras,Be.Narrow);break;case"y":Q=_r(un.FullYear,1,0,!1,!0);break;case"yy":Q=_r(un.FullYear,2,0,!0,!0);break;case"yyy":Q=_r(un.FullYear,3,0,!1,!0);break;case"yyyy":Q=_r(un.FullYear,4,0,!1,!0);break;case"Y":Q=Ot(1);break;case"YY":Q=Ot(2,!0);break;case"YYY":Q=Ot(3);break;case"YYYY":Q=Ot(4);break;case"M":case"L":Q=_r(un.Month,1,1);break;case"MM":case"LL":Q=_r(un.Month,2,1);break;case"MMM":Q=Hn(en.Months,Be.Abbreviated);break;case"MMMM":Q=Hn(en.Months,Be.Wide);break;case"MMMMM":Q=Hn(en.Months,Be.Narrow);break;case"LLL":Q=Hn(en.Months,Be.Abbreviated,Je.Standalone);break;case"LLLL":Q=Hn(en.Months,Be.Wide,Je.Standalone);break;case"LLLLL":Q=Hn(en.Months,Be.Narrow,Je.Standalone);break;case"w":Q=Oe(1);break;case"ww":Q=Oe(2);break;case"W":Q=Oe(1,!0);break;case"d":Q=_r(un.Date,1);break;case"dd":Q=_r(un.Date,2);break;case"c":case"cc":Q=_r(un.Day,1);break;case"ccc":Q=Hn(en.Days,Be.Abbreviated,Je.Standalone);break;case"cccc":Q=Hn(en.Days,Be.Wide,Je.Standalone);break;case"ccccc":Q=Hn(en.Days,Be.Narrow,Je.Standalone);break;case"cccccc":Q=Hn(en.Days,Be.Short,Je.Standalone);break;case"E":case"EE":case"EEE":Q=Hn(en.Days,Be.Abbreviated);break;case"EEEE":Q=Hn(en.Days,Be.Wide);break;case"EEEEE":Q=Hn(en.Days,Be.Narrow);break;case"EEEEEE":Q=Hn(en.Days,Be.Short);break;case"a":case"aa":case"aaa":Q=Hn(en.DayPeriods,Be.Abbreviated);break;case"aaaa":Q=Hn(en.DayPeriods,Be.Wide);break;case"aaaaa":Q=Hn(en.DayPeriods,Be.Narrow);break;case"b":case"bb":case"bbb":Q=Hn(en.DayPeriods,Be.Abbreviated,Je.Standalone,!0);break;case"bbbb":Q=Hn(en.DayPeriods,Be.Wide,Je.Standalone,!0);break;case"bbbbb":Q=Hn(en.DayPeriods,Be.Narrow,Je.Standalone,!0);break;case"B":case"BB":case"BBB":Q=Hn(en.DayPeriods,Be.Abbreviated,Je.Format,!0);break;case"BBBB":Q=Hn(en.DayPeriods,Be.Wide,Je.Format,!0);break;case"BBBBB":Q=Hn(en.DayPeriods,Be.Narrow,Je.Format,!0);break;case"h":Q=_r(un.Hours,1,-12);break;case"hh":Q=_r(un.Hours,2,-12);break;case"H":Q=_r(un.Hours,1);break;case"HH":Q=_r(un.Hours,2);break;case"m":Q=_r(un.Minutes,1);break;case"mm":Q=_r(un.Minutes,2);break;case"s":Q=_r(un.Seconds,1);break;case"ss":Q=_r(un.Seconds,2);break;case"S":Q=_r(un.FractionalSeconds,1);break;case"SS":Q=_r(un.FractionalSeconds,2);break;case"SSS":Q=_r(un.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":Q=hr(dr.Short);break;case"ZZZZZ":Q=hr(dr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":Q=hr(dr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":Q=hr(dr.Long);break;default:return null}return pe[P]=Q,Q}(lr);Xr+=Bn?Bn(Ce,V,Dr):"''"===lr?"'":lr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Xr}function yi(P,Q,V){const ae=new Date(0);return ae.setFullYear(P,Q,V),ae.setHours(0,0,0),ae}function Ur(P,Q){const V=function Tt(P){return(0,f.cg1)(P)[f.wAp.LocaleId]}(P);if(Tn[V]=Tn[V]||{},Tn[V][Q])return Tn[V][Q];let ae="";switch(Q){case"shortDate":ae=ur(P,ct.Short);break;case"mediumDate":ae=ur(P,ct.Medium);break;case"longDate":ae=ur(P,ct.Long);break;case"fullDate":ae=ur(P,ct.Full);break;case"shortTime":ae=Fr(P,ct.Short);break;case"mediumTime":ae=Fr(P,ct.Medium);break;case"longTime":ae=Fr(P,ct.Long);break;case"fullTime":ae=Fr(P,ct.Full);break;case"short":const Ce=Ur(P,"shortTime"),ft=Ur(P,"shortDate");ae=mi(Mn(P,ct.Short),[Ce,ft]);break;case"medium":const vt=Ur(P,"mediumTime"),dn=Ur(P,"mediumDate");ae=mi(Mn(P,ct.Medium),[vt,dn]);break;case"long":const Dr=Ur(P,"longTime"),Xr=Ur(P,"longDate");ae=mi(Mn(P,ct.Long),[Dr,Xr]);break;case"full":const lr=Ur(P,"fullTime"),Bn=Ur(P,"fullDate");ae=mi(Mn(P,ct.Full),[lr,Bn])}return ae&&(Tn[V][Q]=ae),ae}function mi(P,Q){return Q&&(P=P.replace(/\{([^}]+)}/g,function(V,ae){return null!=Q&&ae in Q?Q[ae]:V})),P}function Vr(P,Q,V="-",ae,Ce){let ft="";(P<0||Ce&&P<=0)&&(Ce?P=1-P:(P=-P,ft=V));let vt=String(P);for(;vt.length<Q;)vt="0"+vt;return ae&&(vt=vt.slice(vt.length-Q)),ft+vt}function _r(P,Q,V=0,ae=!1,Ce=!1){return function(ft,vt){let dn=function Vi(P,Q){switch(P){case un.FullYear:return Q.getFullYear();case un.Month:return Q.getMonth();case un.Date:return Q.getDate();case un.Hours:return Q.getHours();case un.Minutes:return Q.getMinutes();case un.Seconds:return Q.getSeconds();case un.FractionalSeconds:return Q.getMilliseconds();case un.Day:return Q.getDay();default:throw new Error(`Unknown DateType value "${P}".`)}}(P,ft);if((V>0||dn>-V)&&(dn+=V),P===un.Hours)0===dn&&-12===V&&(dn=12);else if(P===un.FractionalSeconds)return function ci(P,Q){return Vr(P,3).substring(0,Q)}(dn,Q);const Dr=hn(vt,nt.MinusSign);return Vr(dn,Q,Dr,ae,Ce)}}function Hn(P,Q,V=Je.Format,ae=!1){return function(Ce,ft){return function Yi(P,Q,V,ae,Ce,ft){switch(V){case en.Months:return function an(P,Q,V){const ae=(0,f.cg1)(P),ft=cr([ae[f.wAp.MonthsFormat],ae[f.wAp.MonthsStandalone]],Q);return cr(ft,V)}(Q,Ce,ae)[P.getMonth()];case en.Days:return function ir(P,Q,V){const ae=(0,f.cg1)(P),ft=cr([ae[f.wAp.DaysFormat],ae[f.wAp.DaysStandalone]],Q);return cr(ft,V)}(Q,Ce,ae)[P.getDay()];case en.DayPeriods:const vt=P.getHours(),dn=P.getMinutes();if(ft){const Xr=function Kn(P){const Q=(0,f.cg1)(P);return Vn(Q),(Q[f.wAp.ExtraData][2]||[]).map(ae=>"string"==typeof ae?ln(ae):[ln(ae[0]),ln(ae[1])])}(Q),lr=function kr(P,Q,V){const ae=(0,f.cg1)(P);Vn(ae);const ft=cr([ae[f.wAp.ExtraData][0],ae[f.wAp.ExtraData][1]],Q)||[];return cr(ft,V)||[]}(Q,Ce,ae),Bn=Xr.findIndex(or=>{if(Array.isArray(or)){const[Xt,ti]=or,Is=vt>=Xt.hours&&dn>=Xt.minutes,Er=vt<ti.hours||vt===ti.hours&&dn<ti.minutes;if(Xt.hours<ti.hours){if(Is&&Er)return!0}else if(Is||Er)return!0}else if(or.hours===vt&&or.minutes===dn)return!0;return!1});if(-1!==Bn)return lr[Bn]}return function Ht(P,Q,V){const ae=(0,f.cg1)(P),ft=cr([ae[f.wAp.DayPeriodsFormat],ae[f.wAp.DayPeriodsStandalone]],Q);return cr(ft,V)}(Q,Ce,ae)[vt<12?0:1];case en.Eras:return function Yt(P,Q){return cr((0,f.cg1)(P)[f.wAp.Eras],Q)}(Q,ae)[P.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${V}`)}}(Ce,ft,P,Q,V,ae)}}function hr(P){return function(Q,V,ae){const Ce=-1*ae,ft=hn(V,nt.MinusSign),vt=Ce>0?Math.floor(Ce/60):Math.ceil(Ce/60);switch(P){case dr.Short:return(Ce>=0?"+":"")+Vr(vt,2,ft)+Vr(Math.abs(Ce%60),2,ft);case dr.ShortGMT:return"GMT"+(Ce>=0?"+":"")+Vr(vt,1,ft);case dr.Long:return"GMT"+(Ce>=0?"+":"")+Vr(vt,2,ft)+":"+Vr(Math.abs(Ce%60),2,ft);case dr.Extended:return 0===ae?"Z":(Ce>=0?"+":"")+Vr(vt,2,ft)+":"+Vr(Math.abs(Ce%60),2,ft);default:throw new Error(`Unknown zone width "${P}"`)}}}const Ri=0,Jr=4;function Se(P){return yi(P.getFullYear(),P.getMonth(),P.getDate()+(Jr-P.getDay()))}function Oe(P,Q=!1){return function(V,ae){let Ce;if(Q){const ft=new Date(V.getFullYear(),V.getMonth(),1).getDay()-1,vt=V.getDate();Ce=1+Math.floor((vt+ft)/7)}else{const ft=Se(V),vt=function tt(P){const Q=yi(P,Ri,1).getDay();return yi(P,0,1+(Q<=Jr?Jr:Jr+7)-Q)}(ft.getFullYear()),dn=ft.getTime()-vt.getTime();Ce=1+Math.round(dn/6048e5)}return Vr(Ce,P,hn(ae,nt.MinusSign))}}function Ot(P,Q=!1){return function(V,ae){return Vr(Se(V).getFullYear(),P,hn(ae,nt.MinusSign),Q)}}const pe={};function Te(P,Q){P=P.replace(/:/g,"");const V=Date.parse("Jan 01, 1970 00:00:00 "+P)/6e4;return isNaN(V)?Q:V}function Re(P){return P instanceof Date&&!isNaN(P.valueOf())}const Ae=/^(\d+)?\.((\d+)(-(\d+))?)?$/,he=22,Pe=".",Ge="0",Ft=";",rn=",",tr="#",Ir="\xa4";function ht(P,Q,V,ae,Ce,ft,vt=!1){let dn="",Dr=!1;if(isFinite(P)){let Xr=function cn(P){let ae,Ce,ft,vt,dn,Q=Math.abs(P)+"",V=0;for((Ce=Q.indexOf(Pe))>-1&&(Q=Q.replace(Pe,"")),(ft=Q.search(/e/i))>0?(Ce<0&&(Ce=ft),Ce+=+Q.slice(ft+1),Q=Q.substring(0,ft)):Ce<0&&(Ce=Q.length),ft=0;Q.charAt(ft)===Ge;ft++);if(ft===(dn=Q.length))ae=[0],Ce=1;else{for(dn--;Q.charAt(dn)===Ge;)dn--;for(Ce-=ft,ae=[],vt=0;ft<=dn;ft++,vt++)ae[vt]=Number(Q.charAt(ft))}return Ce>he&&(ae=ae.splice(0,he-1),V=Ce-1,Ce=1),{digits:ae,exponent:V,integerLen:Ce}}(P);vt&&(Xr=function Gn(P){if(0===P.digits[0])return P;const Q=P.digits.length-P.integerLen;return P.exponent?P.exponent+=2:(0===Q?P.digits.push(0,0):1===Q&&P.digits.push(0),P.integerLen+=2),P}(Xr));let lr=Q.minInt,Bn=Q.minFrac,or=Q.maxFrac;if(ft){const es=ft.match(Ae);if(null===es)throw new Error(`${ft} is not a valid digit info`);const Wn=es[1],Oo=es[3],Or=es[5];null!=Wn&&(lr=nr(Wn)),null!=Oo&&(Bn=nr(Oo)),null!=Or?or=nr(Or):null!=Oo&&Bn>or&&(or=Bn)}!function gr(P,Q,V){if(Q>V)throw new Error(`The minimum number of digits after fraction (${Q}) is higher than the maximum (${V}).`);let ae=P.digits,Ce=ae.length-P.integerLen;const ft=Math.min(Math.max(Q,Ce),V);let vt=ft+P.integerLen,dn=ae[vt];if(vt>0){ae.splice(Math.max(P.integerLen,vt));for(let Bn=vt;Bn<ae.length;Bn++)ae[Bn]=0}else{Ce=Math.max(0,Ce),P.integerLen=1,ae.length=Math.max(1,vt=ft+1),ae[0]=0;for(let Bn=1;Bn<vt;Bn++)ae[Bn]=0}if(dn>=5)if(vt-1<0){for(let Bn=0;Bn>vt;Bn--)ae.unshift(0),P.integerLen++;ae.unshift(1),P.integerLen++}else ae[vt-1]++;for(;Ce<Math.max(0,ft);Ce++)ae.push(0);let Dr=0!==ft;const Xr=Q+P.integerLen,lr=ae.reduceRight(function(Bn,or,Xt,ti){return ti[Xt]=(or+=Bn)<10?or:or-10,Dr&&(0===ti[Xt]&&Xt>=Xr?ti.pop():Dr=!1),or>=10?1:0},0);lr&&(ae.unshift(lr),P.integerLen++)}(Xr,Bn,or);let Xt=Xr.digits,ti=Xr.integerLen;const Is=Xr.exponent;let Er=[];for(Dr=Xt.every(es=>!es);ti<lr;ti++)Xt.unshift(0);for(;ti<0;ti++)Xt.unshift(0);ti>0?Er=Xt.splice(ti,Xt.length):(Er=Xt,Xt=[0]);const gn=[];for(Xt.length>=Q.lgSize&&gn.unshift(Xt.splice(-Q.lgSize,Xt.length).join(""));Xt.length>Q.gSize;)gn.unshift(Xt.splice(-Q.gSize,Xt.length).join(""));Xt.length&&gn.unshift(Xt.join("")),dn=gn.join(hn(V,ae)),Er.length&&(dn+=hn(V,Ce)+Er.join("")),Is&&(dn+=hn(V,nt.Exponential)+"+"+Is)}else dn=hn(V,nt.Infinity);return dn=P<0&&!Dr?Q.negPre+dn+Q.negSuf:Q.posPre+dn+Q.posSuf,dn}function Rn(P,Q="-"){const V={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},ae=P.split(Ft),Ce=ae[0],ft=ae[1],vt=-1!==Ce.indexOf(Pe)?Ce.split(Pe):[Ce.substring(0,Ce.lastIndexOf(Ge)+1),Ce.substring(Ce.lastIndexOf(Ge)+1)],dn=vt[0],Dr=vt[1]||"";V.posPre=dn.substring(0,dn.indexOf(tr));for(let lr=0;lr<Dr.length;lr++){const Bn=Dr.charAt(lr);Bn===Ge?V.minFrac=V.maxFrac=lr+1:Bn===tr?V.maxFrac=lr+1:V.posSuf+=Bn}const Xr=dn.split(rn);if(V.gSize=Xr[1]?Xr[1].length:0,V.lgSize=Xr[2]||Xr[1]?(Xr[2]||Xr[1]).length:0,ft){const lr=Ce.length-V.posPre.length-V.posSuf.length,Bn=ft.indexOf(tr);V.negPre=ft.substring(0,Bn).replace(/'/g,""),V.negSuf=ft.slice(Bn+lr).replace(/'/g,"")}else V.negPre=Q+V.posPre,V.negSuf=V.posSuf;return V}function nr(P){const Q=parseInt(P);if(isNaN(Q))throw new Error("Invalid integer literal when parsing "+P);return Q}let ei=(()=>{class P{}return P.\u0275fac=function(V){return new(V||P)},P.\u0275prov=f.Yz7({token:P,factory:function(V){let ae=null;return V?ae=new V:(Ce=f.LFG(f.soG),ae=new xs(Ce)),ae;var Ce},providedIn:"root"}),P})();let xs=(()=>{class P extends ei{constructor(V){super(),this.locale=V}getPluralCategory(V,ae){switch(Lt(ae||this.locale)(V)){case bt.Zero:return"zero";case bt.One:return"one";case bt.Two:return"two";case bt.Few:return"few";case bt.Many:return"many";default:return"other"}}}return P.\u0275fac=function(V){return new(V||P)(f.LFG(f.soG))},P.\u0275prov=f.Yz7({token:P,factory:P.\u0275fac}),P})();function _i(P,Q){Q=encodeURIComponent(Q);for(const V of P.split(";")){const ae=V.indexOf("="),[Ce,ft]=-1==ae?[V,""]:[V.slice(0,ae),V.slice(ae+1)];if(Ce.trim()===Q)return decodeURIComponent(ft)}return null}const Kr=/\s+/,kt=[];let xn=(()=>{class P{constructor(V,ae,Ce,ft){this._iterableDiffers=V,this._keyValueDiffers=ae,this._ngEl=Ce,this._renderer=ft,this.initialClasses=kt,this.stateMap=new Map}set klass(V){this.initialClasses=null!=V?V.trim().split(Kr):kt}set ngClass(V){this.rawClass="string"==typeof V?V.trim().split(Kr):V}ngDoCheck(){for(const ae of this.initialClasses)this._updateState(ae,!0);const V=this.rawClass;if(Array.isArray(V)||V instanceof Set)for(const ae of V)this._updateState(ae,!0);else if(null!=V)for(const ae of Object.keys(V))this._updateState(ae,Boolean(V[ae]));this._applyStateDiff()}_updateState(V,ae){const Ce=this.stateMap.get(V);void 0!==Ce?(Ce.enabled!==ae&&(Ce.changed=!0,Ce.enabled=ae),Ce.touched=!0):this.stateMap.set(V,{enabled:ae,changed:!0,touched:!0})}_applyStateDiff(){for(const V of this.stateMap){const ae=V[0],Ce=V[1];Ce.changed?(this._toggleClass(ae,Ce.enabled),Ce.changed=!1):Ce.touched||(Ce.enabled&&this._toggleClass(ae,!1),this.stateMap.delete(ae)),Ce.touched=!1}}_toggleClass(V,ae){(V=V.trim()).length>0&&V.split(Kr).forEach(Ce=>{ae?this._renderer.addClass(this._ngEl.nativeElement,Ce):this._renderer.removeClass(this._ngEl.nativeElement,Ce)})}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},P.\u0275dir=f.lG2({type:P,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),P})();class vr{constructor(Q,V,ae,Ce){this.$implicit=Q,this.ngForOf=V,this.index=ae,this.count=Ce}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xn=(()=>{class P{set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}constructor(V,ae,Ce){this._viewContainer=V,this._template=ae,this._differs=Ce,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const ae=this._viewContainer;V.forEachOperation((Ce,ft,vt)=>{if(null==Ce.previousIndex)ae.createEmbeddedView(this._template,new vr(Ce.item,this._ngForOf,-1,-1),null===vt?void 0:vt);else if(null==vt)ae.remove(null===ft?void 0:ft);else if(null!==ft){const dn=ae.get(ft);ae.move(dn,vt),Mr(dn,Ce)}});for(let Ce=0,ft=ae.length;Ce<ft;Ce++){const dn=ae.get(Ce).context;dn.index=Ce,dn.count=ft,dn.ngForOf=this._ngForOf}V.forEachIdentityChange(Ce=>{Mr(ae.get(Ce.currentIndex),Ce)})}static ngTemplateContextGuard(V,ae){return!0}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},P.\u0275dir=f.lG2({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),P})();function Mr(P,Q){P.context.$implicit=Q.item}let si=(()=>{class P{constructor(V,ae){this._viewContainer=V,this._context=new An,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ae}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){ar("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){ar("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,ae){return!0}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.s_b),f.Y36(f.Rgc))},P.\u0275dir=f.lG2({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),P})();class An{constructor(){this.$implicit=null,this.ngIf=null}}function ar(P,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,f.AaK)(Q)}'.`)}class kn{constructor(Q,V){this._viewContainerRef=Q,this._templateRef=V,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(Q){Q&&!this._created?this.create():!Q&&this._created&&this.destroy()}}let Br=(()=>{class P{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(V){this._ngSwitch=V,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(V){this._defaultViews.push(V)}_matchCase(V){const ae=V==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ae,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ae}_updateDefaultCases(V){if(this._defaultViews.length>0&&V!==this._defaultUsed){this._defaultUsed=V;for(const ae of this._defaultViews)ae.enforceState(V)}}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275dir=f.lG2({type:P,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),P})(),Ys=(()=>{class P{constructor(V,ae,Ce){this.ngSwitch=Ce,Ce._addCase(),this._view=new kn(V,ae)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(Br,9))},P.\u0275dir=f.lG2({type:P,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),P})(),Ee=(()=>{class P{constructor(V,ae,Ce){Ce._addDefault(new kn(V,ae))}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(Br,9))},P.\u0275dir=f.lG2({type:P,selectors:[["","ngSwitchDefault",""]],standalone:!0}),P})(),$t=(()=>{class P{constructor(V,ae,Ce){this._ngEl=V,this._differs=ae,this._renderer=Ce,this._ngStyle=null,this._differ=null}set ngStyle(V){this._ngStyle=V,!this._differ&&V&&(this._differ=this._differs.find(V).create())}ngDoCheck(){if(this._differ){const V=this._differ.diff(this._ngStyle);V&&this._applyChanges(V)}}_setStyle(V,ae){const[Ce,ft]=V.split("."),vt=-1===Ce.indexOf("-")?void 0:f.JOm.DashCase;null!=ae?this._renderer.setStyle(this._ngEl.nativeElement,Ce,ft?`${ae}${ft}`:ae,vt):this._renderer.removeStyle(this._ngEl.nativeElement,Ce,vt)}_applyChanges(V){V.forEachRemovedItem(ae=>this._setStyle(ae.key,null)),V.forEachAddedItem(ae=>this._setStyle(ae.key,ae.currentValue)),V.forEachChangedItem(ae=>this._setStyle(ae.key,ae.currentValue))}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.SBq),f.Y36(f.aQg),f.Y36(f.Qsj))},P.\u0275dir=f.lG2({type:P,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),P})(),Kt=(()=>{class P{constructor(V){this._viewContainerRef=V,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(V){if(V.ngTemplateOutlet||V.ngTemplateOutletInjector){const ae=this._viewContainerRef;if(this._viewRef&&ae.remove(ae.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Ce,ngTemplateOutletContext:ft,ngTemplateOutletInjector:vt}=this;this._viewRef=ae.createEmbeddedView(Ce,ft,vt?{injector:vt}:void 0)}else this._viewRef=null}else this._viewRef&&V.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.s_b))},P.\u0275dir=f.lG2({type:P,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[f.TTD]}),P})();function Un(P,Q){return new f.vHH(2100,!1)}class mr{createSubscription(Q,V){return Q.subscribe({next:V,error:ae=>{throw ae}})}dispose(Q){Q.unsubscribe()}}class di{createSubscription(Q,V){return Q.then(V,ae=>{throw ae})}dispose(Q){}}const fr=new di,Pr=new mr;let Si=(()=>{class P{constructor(V){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=V}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(V){return this._obj?V!==this._obj?(this._dispose(),this.transform(V)):this._latestValue:(V&&this._subscribe(V),this._latestValue)}_subscribe(V){this._obj=V,this._strategy=this._selectStrategy(V),this._subscription=this._strategy.createSubscription(V,ae=>this._updateLatestValue(V,ae))}_selectStrategy(V){if((0,f.QGY)(V))return fr;if((0,f.F4k)(V))return Pr;throw Un()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(V,ae){V===this._obj&&(this._latestValue=ae,this._ref.markForCheck())}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.sBO,16))},P.\u0275pipe=f.Yjl({name:"async",type:P,pure:!1,standalone:!0}),P})(),qr=(()=>{class P{transform(V){if(null==V)return null;if("string"!=typeof V)throw Un();return V.toLowerCase()}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275pipe=f.Yjl({name:"lowercase",type:P,pure:!0,standalone:!0}),P})();const Ca=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let vi=(()=>{class P{transform(V){if(null==V)return null;if("string"!=typeof V)throw Un();return V.replace(Ca,ae=>ae[0].toUpperCase()+ae.slice(1).toLowerCase())}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275pipe=f.Yjl({name:"titlecase",type:P,pure:!0,standalone:!0}),P})(),yn=(()=>{class P{transform(V){if(null==V)return null;if("string"!=typeof V)throw Un();return V.toUpperCase()}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275pipe=f.Yjl({name:"uppercase",type:P,pure:!0,standalone:!0}),P})();const Qs=new f.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),ds=new f.OlP("DATE_PIPE_DEFAULT_OPTIONS");let sr=(()=>{class P{constructor(V,ae,Ce){this.locale=V,this.defaultTimezone=ae,this.defaultOptions=Ce}transform(V,ae,Ce,ft){if(null==V||""===V||V!=V)return null;try{return Qn(V,ae??this.defaultOptions?.dateFormat??"mediumDate",ft||this.locale,Ce??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(vt){throw Un()}}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.soG,16),f.Y36(Qs,24),f.Y36(ds,24))},P.\u0275pipe=f.Yjl({name:"date",type:P,pure:!0,standalone:!0}),P})();const Ns=/#/g;let bi=(()=>{class P{constructor(V){this._localization=V}transform(V,ae,Ce){if(null==V)return"";if("object"!=typeof ae||null===ae)throw Un();return ae[function zr(P,Q,V,ae){let Ce=`=${P}`;if(Q.indexOf(Ce)>-1||(Ce=V.getPluralCategory(P,ae),Q.indexOf(Ce)>-1))return Ce;if(Q.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${P}"`)}(V,Object.keys(ae),this._localization,Ce)].replace(Ns,V.toString())}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(ei,16))},P.\u0275pipe=f.Yjl({name:"i18nPlural",type:P,pure:!0,standalone:!0}),P})(),_s=(()=>{class P{transform(V,ae){if(null==V)return"";if("object"!=typeof ae||"string"!=typeof V)throw Un();return ae.hasOwnProperty(V)?ae[V]:ae.hasOwnProperty("other")?ae.other:""}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275pipe=f.Yjl({name:"i18nSelect",type:P,pure:!0,standalone:!0}),P})(),qn=(()=>{class P{transform(V){return JSON.stringify(V,null,2)}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275pipe=f.Yjl({name:"json",type:P,pure:!1,standalone:!0}),P})(),Ls=(()=>{class P{constructor(V){this.differs=V,this.keyValues=[],this.compareFn=so}transform(V,ae=so){if(!V||!(V instanceof Map)&&"object"!=typeof V)return null;this.differ||(this.differ=this.differs.find(V).create());const Ce=this.differ.diff(V),ft=ae!==this.compareFn;return Ce&&(this.keyValues=[],Ce.forEachItem(vt=>{this.keyValues.push(function io(P,Q){return{key:P,value:Q}}(vt.key,vt.currentValue))})),(Ce||ft)&&(this.keyValues.sort(ae),this.compareFn=ae),this.keyValues}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.aQg,16))},P.\u0275pipe=f.Yjl({name:"keyvalue",type:P,pure:!1,standalone:!0}),P})();function so(P,Q){const V=P.key,ae=Q.key;if(V===ae)return 0;if(void 0===V)return 1;if(void 0===ae)return-1;if(null===V)return 1;if(null===ae)return-1;if("string"==typeof V&&"string"==typeof ae)return V<ae?-1:1;if("number"==typeof V&&"number"==typeof ae)return V-ae;if("boolean"==typeof V&&"boolean"==typeof ae)return V<ae?-1:1;const Ce=String(V),ft=String(ae);return Ce==ft?0:Ce<ft?-1:1}let Al=(()=>{class P{constructor(V){this._locale=V}transform(V,ae,Ce){if(!To(V))return null;Ce=Ce||this._locale;try{return function Zt(P,Q,V){return ht(P,Rn(ii(Q,Nt.Decimal),hn(Q,nt.MinusSign)),Q,nt.Group,nt.Decimal,V)}(Fs(V),Ce,ae)}catch(ft){throw Un()}}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.soG,16))},P.\u0275pipe=f.Yjl({name:"number",type:P,pure:!0,standalone:!0}),P})(),Vo=(()=>{class P{constructor(V){this._locale=V}transform(V,ae,Ce){if(!To(V))return null;Ce=Ce||this._locale;try{return function xt(P,Q,V){return ht(P,Rn(ii(Q,Nt.Percent),hn(Q,nt.MinusSign)),Q,nt.Group,nt.Decimal,V,!0).replace(new RegExp("%","g"),hn(Q,nt.PercentSign))}(Fs(V),Ce,ae)}catch(ft){throw Un()}}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.soG,16))},P.\u0275pipe=f.Yjl({name:"percent",type:P,pure:!0,standalone:!0}),P})(),wo=(()=>{class P{constructor(V,ae="USD"){this._locale=V,this._defaultCurrencyCode=ae}transform(V,ae=this._defaultCurrencyCode,Ce="symbol",ft,vt){if(!To(V))return null;vt=vt||this._locale,"boolean"==typeof Ce&&(Ce=Ce?"symbol":"code");let dn=ae||this._defaultCurrencyCode;"code"!==Ce&&(dn="symbol"===Ce||"symbol-narrow"===Ce?function Ui(P,Q,V="en"){const ae=function yt(P){return(0,f.cg1)(P)[f.wAp.Currencies]}(V)[P]||Ze[P]||[],Ce=ae[1];return"narrow"===Q&&"string"==typeof Ce?Ce:ae[0]||P}(dn,"symbol"===Ce?"wide":"narrow",vt):Ce);try{return function rt(P,Q,V,ae,Ce){const vt=Rn(ii(Q,Nt.Currency),hn(Q,nt.MinusSign));return vt.minFrac=function Tr(P){let Q;const V=Ze[P];return V&&(Q=V[2]),"number"==typeof Q?Q:Qr}(ae),vt.maxFrac=vt.minFrac,ht(P,vt,Q,nt.CurrencyGroup,nt.CurrencyDecimal,Ce).replace(Ir,V).replace(Ir,"").trim()}(Fs(V),vt,dn,ae,ft)}catch(Dr){throw Un()}}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.soG,16),f.Y36(f.EJc,16))},P.\u0275pipe=f.Yjl({name:"currency",type:P,pure:!0,standalone:!0}),P})();function To(P){return!(null==P||""===P||P!=P)}function Fs(P){if("string"==typeof P&&!isNaN(Number(P)-parseFloat(P)))return Number(P);if("number"!=typeof P)throw new Error(`${P} is not a number`);return P}let po=(()=>{class P{transform(V,ae,Ce){if(null==V)return null;if(!this.supports(V))throw Un();return V.slice(ae,Ce)}supports(V){return"string"==typeof V||Array.isArray(V)}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275pipe=f.Yjl({name:"slice",type:P,pure:!1,standalone:!0}),P})(),ss=(()=>{class P{}return P.\u0275fac=function(V){return new(V||P)},P.\u0275mod=f.oAB({type:P}),P.\u0275inj=f.cJS({}),P})();const Bi="browser";function Bo(P){return P===Bi}let bs=(()=>{class P{}return P.\u0275prov=(0,f.Yz7)({token:P,providedIn:"root",factory:()=>new Pn((0,f.LFG)(ie),window)}),P})();class Pn{constructor(Q,V){this.document=Q,this.window=V,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const V=function vs(P,Q){const V=P.getElementById(Q)||P.getElementsByName(Q)[0];if(V)return V;if("function"==typeof P.createTreeWalker&&P.body&&(P.body.createShadowRoot||P.body.attachShadow)){const ae=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let Ce=ae.currentNode;for(;Ce;){const ft=Ce.shadowRoot;if(ft){const vt=ft.getElementById(Q)||ft.querySelector(`[name="${Q}"]`);if(vt)return vt}Ce=ae.nextNode()}}return null}(this.document,Q);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(Q){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=Q)}}scrollToElement(Q){const V=Q.getBoundingClientRect(),ae=V.left+this.window.pageXOffset,Ce=V.top+this.window.pageYOffset,ft=this.offset();this.window.scrollTo(ae-ft[0],Ce-ft[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Q=So(this.window.history)||So(Object.getPrototypeOf(this.window.history));return!(!Q||!Q.writable&&!Q.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function So(P){return Object.getOwnPropertyDescriptor(P,"scrollRestoration")}class Hr{}},529:(we,le,I)=>{I.d(le,{Ed:()=>Ri,JF:()=>hr,LE:()=>We,TP:()=>Yt,UA:()=>nt,WM:()=>q,Zn:()=>ct,eN:()=>Tt});var f=I(6895),w=I(4650),te=I(9646),H=I(9751),X=I(4351),ie=I(9300),ee=I(4004);class K{}class se{}class q{constructor(Se){this.normalizedNames=new Map,this.lazyUpdate=null,Se?this.lazyInit="string"==typeof Se?()=>{this.headers=new Map,Se.split("\n").forEach(Oe=>{const Ot=Oe.indexOf(":");if(Ot>0){const pe=Oe.slice(0,Ot),ve=pe.toLowerCase(),Te=Oe.slice(Ot+1).trim();this.maybeSetNormalizedName(pe,ve),this.headers.has(ve)?this.headers.get(ve).push(Te):this.headers.set(ve,[Te])}})}:()=>{this.headers=new Map,Object.entries(Se).forEach(([Oe,Ot])=>{let pe;if(pe="string"==typeof Ot?[Ot]:"number"==typeof Ot?[Ot.toString()]:Ot.map(ve=>ve.toString()),pe.length>0){const ve=Oe.toLowerCase();this.headers.set(ve,pe),this.maybeSetNormalizedName(Oe,ve)}})}:this.headers=new Map}has(Se){return this.init(),this.headers.has(Se.toLowerCase())}get(Se){this.init();const Oe=this.headers.get(Se.toLowerCase());return Oe&&Oe.length>0?Oe[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Se){return this.init(),this.headers.get(Se.toLowerCase())||null}append(Se,Oe){return this.clone({name:Se,value:Oe,op:"a"})}set(Se,Oe){return this.clone({name:Se,value:Oe,op:"s"})}delete(Se,Oe){return this.clone({name:Se,value:Oe,op:"d"})}maybeSetNormalizedName(Se,Oe){this.normalizedNames.has(Oe)||this.normalizedNames.set(Oe,Se)}init(){this.lazyInit&&(this.lazyInit instanceof q?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Se=>this.applyUpdate(Se)),this.lazyUpdate=null))}copyFrom(Se){Se.init(),Array.from(Se.headers.keys()).forEach(Oe=>{this.headers.set(Oe,Se.headers.get(Oe)),this.normalizedNames.set(Oe,Se.normalizedNames.get(Oe))})}clone(Se){const Oe=new q;return Oe.lazyInit=this.lazyInit&&this.lazyInit instanceof q?this.lazyInit:this,Oe.lazyUpdate=(this.lazyUpdate||[]).concat([Se]),Oe}applyUpdate(Se){const Oe=Se.name.toLowerCase();switch(Se.op){case"a":case"s":let Ot=Se.value;if("string"==typeof Ot&&(Ot=[Ot]),0===Ot.length)return;this.maybeSetNormalizedName(Se.name,Oe);const pe=("a"===Se.op?this.headers.get(Oe):void 0)||[];pe.push(...Ot),this.headers.set(Oe,pe);break;case"d":const ve=Se.value;if(ve){let Te=this.headers.get(Oe);if(!Te)return;Te=Te.filter(et=>-1===ve.indexOf(et)),0===Te.length?(this.headers.delete(Oe),this.normalizedNames.delete(Oe)):this.headers.set(Oe,Te)}else this.headers.delete(Oe),this.normalizedNames.delete(Oe)}}forEach(Se){this.init(),Array.from(this.normalizedNames.keys()).forEach(Oe=>Se(this.normalizedNames.get(Oe),this.headers.get(Oe)))}}class ge{encodeKey(Se){return Qe(Se)}encodeValue(Se){return Qe(Se)}decodeKey(Se){return decodeURIComponent(Se)}decodeValue(Se){return decodeURIComponent(Se)}}const Ke=/%(\d[a-f0-9])/gi,$e={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Qe(tt){return encodeURIComponent(tt).replace(Ke,(Se,Oe)=>$e[Oe]??Se)}function Ve(tt){return`${tt}`}class We{constructor(Se={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Se.encoder||new ge,Se.fromString){if(Se.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ne(tt,Se){const Oe=new Map;return tt.length>0&&tt.replace(/^\?/,"").split("&").forEach(pe=>{const ve=pe.indexOf("="),[Te,et]=-1==ve?[Se.decodeKey(pe),""]:[Se.decodeKey(pe.slice(0,ve)),Se.decodeValue(pe.slice(ve+1))],Le=Oe.get(Te)||[];Le.push(et),Oe.set(Te,Le)}),Oe}(Se.fromString,this.encoder)}else Se.fromObject?(this.map=new Map,Object.keys(Se.fromObject).forEach(Oe=>{const Ot=Se.fromObject[Oe],pe=Array.isArray(Ot)?Ot.map(Ve):[Ve(Ot)];this.map.set(Oe,pe)})):this.map=null}has(Se){return this.init(),this.map.has(Se)}get(Se){this.init();const Oe=this.map.get(Se);return Oe?Oe[0]:null}getAll(Se){return this.init(),this.map.get(Se)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Se,Oe){return this.clone({param:Se,value:Oe,op:"a"})}appendAll(Se){const Oe=[];return Object.keys(Se).forEach(Ot=>{const pe=Se[Ot];Array.isArray(pe)?pe.forEach(ve=>{Oe.push({param:Ot,value:ve,op:"a"})}):Oe.push({param:Ot,value:pe,op:"a"})}),this.clone(Oe)}set(Se,Oe){return this.clone({param:Se,value:Oe,op:"s"})}delete(Se,Oe){return this.clone({param:Se,value:Oe,op:"d"})}toString(){return this.init(),this.keys().map(Se=>{const Oe=this.encoder.encodeKey(Se);return this.map.get(Se).map(Ot=>Oe+"="+this.encoder.encodeValue(Ot)).join("&")}).filter(Se=>""!==Se).join("&")}clone(Se){const Oe=new We({encoder:this.encoder});return Oe.cloneFrom=this.cloneFrom||this,Oe.updates=(this.updates||[]).concat(Se),Oe}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Se=>this.map.set(Se,this.cloneFrom.map.get(Se))),this.updates.forEach(Se=>{switch(Se.op){case"a":case"s":const Oe=("a"===Se.op?this.map.get(Se.param):void 0)||[];Oe.push(Ve(Se.value)),this.map.set(Se.param,Oe);break;case"d":if(void 0===Se.value){this.map.delete(Se.param);break}{let Ot=this.map.get(Se.param)||[];const pe=Ot.indexOf(Ve(Se.value));-1!==pe&&Ot.splice(pe,1),Ot.length>0?this.map.set(Se.param,Ot):this.map.delete(Se.param)}}}),this.cloneFrom=this.updates=null)}}class qe{constructor(){this.map=new Map}set(Se,Oe){return this.map.set(Se,Oe),this}get(Se){return this.map.has(Se)||this.map.set(Se,Se.defaultValue()),this.map.get(Se)}delete(Se){return this.map.delete(Se),this}has(Se){return this.map.has(Se)}keys(){return this.map.keys()}}function Fe(tt){return typeof ArrayBuffer<"u"&&tt instanceof ArrayBuffer}function Et(tt){return typeof Blob<"u"&&tt instanceof Blob}function Ct(tt){return typeof FormData<"u"&&tt instanceof FormData}class Nt{constructor(Se,Oe,Ot,pe){let ve;if(this.url=Oe,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Se.toUpperCase(),function ke(tt){switch(tt){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||pe?(this.body=void 0!==Ot?Ot:null,ve=pe):ve=Ot,ve&&(this.reportProgress=!!ve.reportProgress,this.withCredentials=!!ve.withCredentials,ve.responseType&&(this.responseType=ve.responseType),ve.headers&&(this.headers=ve.headers),ve.context&&(this.context=ve.context),ve.params&&(this.params=ve.params)),this.headers||(this.headers=new q),this.context||(this.context=new qe),this.params){const Te=this.params.toString();if(0===Te.length)this.urlWithParams=Oe;else{const et=Oe.indexOf("?");this.urlWithParams=Oe+(-1===et?"?":et<Oe.length-1?"&":"")+Te}}else this.params=new We,this.urlWithParams=Oe}serializeBody(){return null===this.body?null:Fe(this.body)||Et(this.body)||Ct(this.body)||function Ze(tt){return typeof URLSearchParams<"u"&&tt instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof We?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ct(this.body)?null:Et(this.body)?this.body.type||null:Fe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof We?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Se={}){const Oe=Se.method||this.method,Ot=Se.url||this.url,pe=Se.responseType||this.responseType,ve=void 0!==Se.body?Se.body:this.body,Te=void 0!==Se.withCredentials?Se.withCredentials:this.withCredentials,et=void 0!==Se.reportProgress?Se.reportProgress:this.reportProgress;let Le=Se.headers||this.headers,Rt=Se.params||this.params;const zt=Se.context??this.context;return void 0!==Se.setHeaders&&(Le=Object.keys(Se.setHeaders).reduce((Re,Ae)=>Re.set(Ae,Se.setHeaders[Ae]),Le)),Se.setParams&&(Rt=Object.keys(Se.setParams).reduce((Re,Ae)=>Re.set(Ae,Se.setParams[Ae]),Rt)),new Nt(Oe,Ot,ve,{params:Rt,headers:Le,context:zt,reportProgress:et,responseType:pe,withCredentials:Te})}}var bt=(()=>((bt=bt||{})[bt.Sent=0]="Sent",bt[bt.UploadProgress=1]="UploadProgress",bt[bt.ResponseHeader=2]="ResponseHeader",bt[bt.DownloadProgress=3]="DownloadProgress",bt[bt.Response=4]="Response",bt[bt.User=5]="User",bt))();class Je{constructor(Se,Oe=200,Ot="OK"){this.headers=Se.headers||new q,this.status=void 0!==Se.status?Se.status:Oe,this.statusText=Se.statusText||Ot,this.url=Se.url||null,this.ok=this.status>=200&&this.status<300}}class Be extends Je{constructor(Se={}){super(Se),this.type=bt.ResponseHeader}clone(Se={}){return new Be({headers:Se.headers||this.headers,status:void 0!==Se.status?Se.status:this.status,statusText:Se.statusText||this.statusText,url:Se.url||this.url||void 0})}}class ct extends Je{constructor(Se={}){super(Se),this.type=bt.Response,this.body=void 0!==Se.body?Se.body:null}clone(Se={}){return new ct({body:void 0!==Se.body?Se.body:this.body,headers:Se.headers||this.headers,status:void 0!==Se.status?Se.status:this.status,statusText:Se.statusText||this.statusText,url:Se.url||this.url||void 0})}}class nt extends Je{constructor(Se){super(Se,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Se.url||"(unknown url)"}`:`Http failure response for ${Se.url||"(unknown url)"}: ${Se.status} ${Se.statusText}`,this.error=Se.error||null}}function Pt(tt,Se){return{body:Se,headers:tt.headers,context:tt.context,observe:tt.observe,params:tt.params,reportProgress:tt.reportProgress,responseType:tt.responseType,withCredentials:tt.withCredentials}}let Tt=(()=>{class tt{constructor(Oe){this.handler=Oe}request(Oe,Ot,pe={}){let ve;if(Oe instanceof Nt)ve=Oe;else{let Le,Rt;Le=pe.headers instanceof q?pe.headers:new q(pe.headers),pe.params&&(Rt=pe.params instanceof We?pe.params:new We({fromObject:pe.params})),ve=new Nt(Oe,Ot,void 0!==pe.body?pe.body:null,{headers:Le,context:pe.context,params:Rt,reportProgress:pe.reportProgress,responseType:pe.responseType||"json",withCredentials:pe.withCredentials})}const Te=(0,te.of)(ve).pipe((0,X.b)(Le=>this.handler.handle(Le)));if(Oe instanceof Nt||"events"===pe.observe)return Te;const et=Te.pipe((0,ie.h)(Le=>Le instanceof ct));switch(pe.observe||"body"){case"body":switch(ve.responseType){case"arraybuffer":return et.pipe((0,ee.U)(Le=>{if(null!==Le.body&&!(Le.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Le.body}));case"blob":return et.pipe((0,ee.U)(Le=>{if(null!==Le.body&&!(Le.body instanceof Blob))throw new Error("Response is not a Blob.");return Le.body}));case"text":return et.pipe((0,ee.U)(Le=>{if(null!==Le.body&&"string"!=typeof Le.body)throw new Error("Response is not a string.");return Le.body}));default:return et.pipe((0,ee.U)(Le=>Le.body))}case"response":return et;default:throw new Error(`Unreachable: unhandled observe type ${pe.observe}}`)}}delete(Oe,Ot={}){return this.request("DELETE",Oe,Ot)}get(Oe,Ot={}){return this.request("GET",Oe,Ot)}head(Oe,Ot={}){return this.request("HEAD",Oe,Ot)}jsonp(Oe,Ot){return this.request("JSONP",Oe,{params:(new We).append(Ot,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Oe,Ot={}){return this.request("OPTIONS",Oe,Ot)}patch(Oe,Ot,pe={}){return this.request("PATCH",Oe,Pt(pe,Ot))}post(Oe,Ot,pe={}){return this.request("POST",Oe,Pt(pe,Ot))}put(Oe,Ot,pe={}){return this.request("PUT",Oe,Pt(pe,Ot))}}return tt.\u0275fac=function(Oe){return new(Oe||tt)(w.LFG(K))},tt.\u0275prov=w.Yz7({token:tt,factory:tt.\u0275fac}),tt})();function Ht(tt,Se){return Se(tt)}function ir(tt,Se){return(Oe,Ot)=>Se.intercept(Oe,{handle:pe=>tt(pe,Ot)})}const Yt=new w.OlP("HTTP_INTERCEPTORS"),Fn=new w.OlP("HTTP_INTERCEPTOR_FNS");function vn(){let tt=null;return(Se,Oe)=>(null===tt&&(tt=((0,w.f3M)(Yt,{optional:!0})??[]).reduceRight(ir,Ht)),tt(Se,Oe))}let Mn,ur=(()=>{class tt extends K{constructor(Oe,Ot){super(),this.backend=Oe,this.injector=Ot,this.chain=null}handle(Oe){if(null===this.chain){const Ot=Array.from(new Set(this.injector.get(Fn)));this.chain=Ot.reduceRight((pe,ve)=>function an(tt,Se,Oe){return(Ot,pe)=>Oe.runInContext(()=>Se(Ot,ve=>tt(ve,pe)))}(pe,ve,this.injector),Ht)}return this.chain(Oe,Ot=>this.backend.handle(Ot))}}return tt.\u0275fac=function(Oe){return new(Oe||tt)(w.LFG(se),w.LFG(w.lqb))},tt.\u0275prov=w.Yz7({token:tt,factory:tt.\u0275fac}),tt})(),Fr=0;class Ue{}function yt(){return"object"==typeof window?window:{}}let Lt=(()=>{class tt{constructor(Oe,Ot){this.callbackMap=Oe,this.document=Ot,this.resolvedPromise=Promise.resolve()}nextCallback(){return"ng_jsonp_callback_"+Fr++}handle(Oe){if("JSONP"!==Oe.method)throw new Error("JSONP requests must use JSONP request method.");if("json"!==Oe.responseType)throw new Error("JSONP requests must use Json response type.");if(Oe.headers.keys().length>0)throw new Error("JSONP requests do not support headers.");return new H.y(Ot=>{const pe=this.nextCallback(),ve=Oe.urlWithParams.replace(/=JSONP_CALLBACK(&|$)/,`=${pe}$1`),Te=this.document.createElement("script");Te.src=ve;let et=null,Le=!1;this.callbackMap[pe]=Ae=>{delete this.callbackMap[pe],et=Ae,Le=!0};const Rt=()=>{Te.parentNode&&Te.parentNode.removeChild(Te),delete this.callbackMap[pe]};return Te.addEventListener("load",Ae=>{this.resolvedPromise.then(()=>{Rt(),Le?(Ot.next(new ct({body:et,status:200,statusText:"OK",url:ve})),Ot.complete()):Ot.error(new nt({url:ve,status:0,statusText:"JSONP Error",error:new Error("JSONP injected script did not invoke callback.")}))})}),Te.addEventListener("error",Ae=>{Rt(),Ot.error(new nt({error:Ae,status:0,statusText:"JSONP Error",url:ve}))}),this.document.body.appendChild(Te),Ot.next({type:bt.Sent}),()=>{Le||this.removeListeners(Te),Rt()}})}removeListeners(Oe){Mn||(Mn=this.document.implementation.createHTMLDocument()),Mn.adoptNode(Oe)}}return tt.\u0275fac=function(Oe){return new(Oe||tt)(w.LFG(Ue),w.LFG(f.K0))},tt.\u0275prov=w.Yz7({token:tt,factory:tt.\u0275fac}),tt})();function Vn(tt,Se){return"JSONP"===tt.method?(0,w.f3M)(Lt).handle(tt):Se(tt)}const kr=/^\)\]\}',?\n/;let cr=(()=>{class tt{constructor(Oe){this.xhrFactory=Oe}handle(Oe){if("JSONP"===Oe.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new H.y(Ot=>{const pe=this.xhrFactory.build();if(pe.open(Oe.method,Oe.urlWithParams),Oe.withCredentials&&(pe.withCredentials=!0),Oe.headers.forEach((he,Pe)=>pe.setRequestHeader(he,Pe.join(","))),Oe.headers.has("Accept")||pe.setRequestHeader("Accept","application/json, text/plain, */*"),!Oe.headers.has("Content-Type")){const he=Oe.detectContentTypeHeader();null!==he&&pe.setRequestHeader("Content-Type",he)}if(Oe.responseType){const he=Oe.responseType.toLowerCase();pe.responseType="json"!==he?he:"text"}const ve=Oe.serializeBody();let Te=null;const et=()=>{if(null!==Te)return Te;const he=pe.statusText||"OK",Pe=new q(pe.getAllResponseHeaders()),Ge=function is(tt){return"responseURL"in tt&&tt.responseURL?tt.responseURL:/^X-Request-URL:/m.test(tt.getAllResponseHeaders())?tt.getResponseHeader("X-Request-URL"):null}(pe)||Oe.url;return Te=new Be({headers:Pe,status:pe.status,statusText:he,url:Ge}),Te},Le=()=>{let{headers:he,status:Pe,statusText:Ge,url:Ft}=et(),rn=null;204!==Pe&&(rn=typeof pe.response>"u"?pe.responseText:pe.response),0===Pe&&(Pe=rn?200:0);let tr=Pe>=200&&Pe<300;if("json"===Oe.responseType&&"string"==typeof rn){const Ir=rn;rn=rn.replace(kr,"");try{rn=""!==rn?JSON.parse(rn):null}catch(Ti){rn=Ir,tr&&(tr=!1,rn={error:Ti,text:rn})}}tr?(Ot.next(new ct({body:rn,headers:he,status:Pe,statusText:Ge,url:Ft||void 0})),Ot.complete()):Ot.error(new nt({error:rn,headers:he,status:Pe,statusText:Ge,url:Ft||void 0}))},Rt=he=>{const{url:Pe}=et(),Ge=new nt({error:he,status:pe.status||0,statusText:pe.statusText||"Unknown Error",url:Pe||void 0});Ot.error(Ge)};let zt=!1;const Re=he=>{zt||(Ot.next(et()),zt=!0);let Pe={type:bt.DownloadProgress,loaded:he.loaded};he.lengthComputable&&(Pe.total=he.total),"text"===Oe.responseType&&pe.responseText&&(Pe.partialText=pe.responseText),Ot.next(Pe)},Ae=he=>{let Pe={type:bt.UploadProgress,loaded:he.loaded};he.lengthComputable&&(Pe.total=he.total),Ot.next(Pe)};return pe.addEventListener("load",Le),pe.addEventListener("error",Rt),pe.addEventListener("timeout",Rt),pe.addEventListener("abort",Rt),Oe.reportProgress&&(pe.addEventListener("progress",Re),null!==ve&&pe.upload&&pe.upload.addEventListener("progress",Ae)),pe.send(ve),Ot.next({type:bt.Sent}),()=>{pe.removeEventListener("error",Rt),pe.removeEventListener("abort",Rt),pe.removeEventListener("load",Le),pe.removeEventListener("timeout",Rt),Oe.reportProgress&&(pe.removeEventListener("progress",Re),null!==ve&&pe.upload&&pe.upload.removeEventListener("progress",Ae)),pe.readyState!==pe.DONE&&pe.abort()}})}}return tt.\u0275fac=function(Oe){return new(Oe||tt)(w.LFG(f.JF))},tt.\u0275prov=w.Yz7({token:tt,factory:tt.\u0275fac}),tt})();const ln=new w.OlP("XSRF_ENABLED"),Qr=new w.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Ar=new w.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Tn{}let Yn=(()=>{class tt{constructor(Oe,Ot,pe){this.doc=Oe,this.platform=Ot,this.cookieName=pe,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Oe=this.doc.cookie||"";return Oe!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,f.Mx)(Oe,this.cookieName),this.lastCookieString=Oe),this.lastToken}}return tt.\u0275fac=function(Oe){return new(Oe||tt)(w.LFG(f.K0),w.LFG(w.Lbi),w.LFG(Qr))},tt.\u0275prov=w.Yz7({token:tt,factory:tt.\u0275fac}),tt})();function dr(tt,Se){const Oe=tt.url.toLowerCase();if(!(0,w.f3M)(ln)||"GET"===tt.method||"HEAD"===tt.method||Oe.startsWith("http://")||Oe.startsWith("https://"))return Se(tt);const Ot=(0,w.f3M)(Tn).getToken(),pe=(0,w.f3M)(Ar);return null!=Ot&&!tt.headers.has(pe)&&(tt=tt.clone({headers:tt.headers.set(pe,Ot)})),Se(tt)}var en=(()=>((en=en||{})[en.Interceptors=0]="Interceptors",en[en.LegacyInterceptors=1]="LegacyInterceptors",en[en.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",en[en.NoXsrfProtection=3]="NoXsrfProtection",en[en.JsonpSupport=4]="JsonpSupport",en[en.RequestsMadeViaParent=5]="RequestsMadeViaParent",en))();function Qn(tt,Se){return{\u0275kind:tt,\u0275providers:Se}}function yi(...tt){const Se=[Tt,cr,ur,{provide:K,useExisting:ur},{provide:se,useExisting:cr},{provide:Fn,useValue:dr,multi:!0},{provide:ln,useValue:!0},{provide:Tn,useClass:Yn}];for(const Oe of tt)Se.push(...Oe.\u0275providers);return(0,w.MR2)(Se)}const mi=new w.OlP("LEGACY_INTERCEPTOR_FN");let hr=(()=>{class tt{}return tt.\u0275fac=function(Oe){return new(Oe||tt)},tt.\u0275mod=w.oAB({type:tt}),tt.\u0275inj=w.cJS({providers:[yi(Qn(en.LegacyInterceptors,[{provide:mi,useFactory:vn},{provide:Fn,useExisting:mi,multi:!0}]))]}),tt})(),Ri=(()=>{class tt{}return tt.\u0275fac=function(Oe){return new(Oe||tt)},tt.\u0275mod=w.oAB({type:tt}),tt.\u0275inj=w.cJS({providers:[Qn(en.JsonpSupport,[Lt,{provide:Ue,useFactory:yt},{provide:Fn,useValue:Vn,multi:!0}]).\u0275providers]}),tt})()},4650:(we,le,I)=>{I.d(le,{$8M:()=>Mi,$WT:()=>ei,$Z:()=>od,AFp:()=>EE,ALo:()=>kv,AaK:()=>K,Akn:()=>Sl,AsE:()=>Om,B6R:()=>Ir,BQk:()=>yd,CHM:()=>Go,CRH:()=>Zv,CZH:()=>Xm,CqO:()=>ih,D6c:()=>CI,DdM:()=>Av,Dn7:()=>Bv,EJc:()=>UD,EiD:()=>Df,EpF:()=>Jh,F$t:()=>pm,F4k:()=>ef,FYo:()=>Pu,FiY:()=>va,G48:()=>sI,G7q:()=>Hv,Gf:()=>Qv,GfV:()=>Tg,GkF:()=>Xh,Gpc:()=>de,Gre:()=>Gy,HOy:()=>ch,Hsn:()=>gm,IAx:()=>Zr,Ikx:()=>Wm,IyS:()=>hh,JOm:()=>Fo,JVY:()=>Hl,JZr:()=>Qe,Jf7:()=>Of,Jzz:()=>Qp,KtG:()=>nu,L6k:()=>Ih,LAX:()=>Ch,LFG:()=>hr,LMc:()=>TI,LSH:()=>bu,Lbi:()=>ND,Lck:()=>U0,MAs:()=>th,MGl:()=>oh,MMx:()=>l_,MR2:()=>pg,MT6:()=>Lm,NdJ:()=>sh,O4$:()=>Ut,OlP:()=>Cr,Oqu:()=>Pm,P3R:()=>Tf,PXZ:()=>JD,PiD:()=>xl,Q6J:()=>Rp,QGY:()=>rh,QbO:()=>LD,Qsj:()=>wg,R0b:()=>Du,RDi:()=>Rd,Rgc:()=>sg,SBq:()=>_u,Sil:()=>BD,Suo:()=>qv,TTD:()=>os,TgZ:()=>qh,Tol:()=>Sm,Udp:()=>kc,VKq:()=>Mv,W1O:()=>tE,WLB:()=>Pv,X6Q:()=>iI,XFs:()=>ln,Xpm:()=>tr,Xts:()=>zc,Y36:()=>xu,YKP:()=>vv,YNc:()=>Op,Yjl:()=>Gn,Yz7:()=>hn,Z0I:()=>Ue,ZZ4:()=>N_,_Bn:()=>_v,_UZ:()=>xp,_Vd:()=>Jc,_c5:()=>DI,_uU:()=>Dd,aQg:()=>L_,c2e:()=>FD,cJS:()=>It,cg1:()=>ph,d8E:()=>Zp,dDg:()=>QD,dqk:()=>Yn,eBb:()=>Gc,eFA:()=>xE,eJc:()=>__,ekj:()=>cf,eoX:()=>ME,evT:()=>Mg,f3M:()=>Jr,fQ9:()=>Qt,g9A:()=>IE,gL8:()=>Id,gM2:()=>jv,h0i:()=>pf,hGG:()=>II,hij:()=>ku,iGM:()=>Yv,ifc:()=>Le,ip1:()=>vE,jDz:()=>Dv,kEZ:()=>Ov,kL8:()=>Jy,kcU:()=>Po,lG2:()=>Rn,lcZ:()=>Uv,lnq:()=>Rm,lqb:()=>Dc,lri:()=>bE,mCW:()=>E,n5z:()=>el,oAB:()=>rt,oJD:()=>Xu,oxw:()=>Nc,pB0:()=>lg,q3G:()=>Rs,q4F:()=>Sg,qLn:()=>Ud,qOj:()=>Ep,qZA:()=>Zh,qzn:()=>gc,rWj:()=>AE,s9C:()=>kp,sBO:()=>oI,s_b:()=>Qm,soG:()=>Jm,tBr:()=>vl,tb:()=>OE,tp0:()=>Xo,uIk:()=>Ap,uOi:()=>_c,vHH:()=>Ve,vpe:()=>lc,wAp:()=>er,xi3:()=>Vv,xp6:()=>kg,ynx:()=>nh,z2F:()=>ey,z3N:()=>Os,zSh:()=>Th,zs3:()=>Ru});var f=I(7579),w=I(727),te=I(9751),H=I(6451),X=I(3099);function ie(n){for(let r in n)if(n[r]===ie)return r;throw Error("Could not find renamed property on target object.")}function ee(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function K(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(K).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function se(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const q=ie({__forward_ref__:ie});function de(n){return n.__forward_ref__=de,n.toString=function(){return K(this())},n}function ge(n){return Ne(n)?n():n}function Ne(n){return"function"==typeof n&&n.hasOwnProperty(q)&&n.__forward_ref__===de}function Ke(n){return n&&!!n.\u0275providers}const Qe="https://g.co/ng/security#xss";class Ve extends Error{constructor(r,s){super(We(r,s)),this.code=r}}function We(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}function Ye(n){return"string"==typeof n?n:null==n?"":String(n)}function Ct(n,r){throw new Ve(-201,!1)}function Fn(n,r){null==n&&function vn(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function hn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function It(n){return{providers:n.providers||[],imports:n.imports||[]}}function ut(n){return yt(n,Kn)||yt(n,is)}function Ue(n){return null!==ut(n)}function yt(n,r){return n.hasOwnProperty(r)?n[r]:null}function Vn(n){return n&&(n.hasOwnProperty(kr)||n.hasOwnProperty(cr))?n[kr]:null}const Kn=ie({\u0275prov:ie}),kr=ie({\u0275inj:ie}),is=ie({ngInjectableDef:ie}),cr=ie({ngInjectorDef:ie});var ln=(()=>((ln=ln||{})[ln.Default=0]="Default",ln[ln.Host=1]="Host",ln[ln.Self=2]="Self",ln[ln.SkipSelf=4]="SkipSelf",ln[ln.Optional=8]="Optional",ln))();let Ui;function Tr(n){const r=Ui;return Ui=n,r}function Ar(n,r,s){const a=ut(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&ln.Optional?null:void 0!==r?r:void Ct(K(n))}const Yn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Qn={},yi="__NG_DI_FLAG__",Ur="ngTempTokenPath",mi="ngTokenPath",Vr=/\n/gm,ci="\u0275",_r="__source";let Vi;function Hn(n){const r=Vi;return Vi=n,r}function Yi(n,r=ln.Default){if(void 0===Vi)throw new Ve(-203,!1);return null===Vi?Ar(n,void 0,r):Vi.get(n,r&ln.Optional?null:void 0,r)}function hr(n,r=ln.Default){return(function Qr(){return Ui}()||Yi)(ge(n),r)}function Jr(n,r=ln.Default){return hr(n,tt(r))}function tt(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Se(n){const r=[];for(let s=0;s<n.length;s++){const a=ge(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Ve(900,!1);let d,m=ln.Default;for(let S=0;S<a.length;S++){const x=a[S],k=Ot(x);"number"==typeof k?-1===k?d=x.token:m|=k:d=x}r.push(hr(d,m))}else r.push(hr(a))}return r}function Oe(n,r){return n[yi]=r,n.prototype[yi]=r,n}function Ot(n){return n[yi]}function Te(n){return{toString:n}.toString()}var et=(()=>((et=et||{})[et.OnPush=0]="OnPush",et[et.Default=1]="Default",et))(),Le=(()=>{return(n=Le||(Le={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Le;var n})();const Rt={},zt=[],Re=ie({\u0275cmp:ie}),Ae=ie({\u0275dir:ie}),he=ie({\u0275pipe:ie}),Pe=ie({\u0275mod:ie}),Ge=ie({\u0275fac:ie}),Ft=ie({__NG_ELEMENT_ID__:ie});let rn=0;function tr(n){return Te(()=>{const r=xs(n),s={...r,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===et.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||Le.Emulated,id:"c"+rn++,styles:n.styles||zt,_:null,schemas:n.schemas||null,tView:null};Ts(s);const a=n.dependencies;return s.directiveDefs=_i(a,!1),s.pipeDefs=_i(a,!0),s})}function Ir(n,r,s){const a=n.\u0275cmp;a.directiveDefs=_i(r,!1),a.pipeDefs=_i(s,!0)}function Ti(n){return cn(n)||gr(n)}function ht(n){return null!==n}function rt(n){return Te(()=>({type:n.type,bootstrap:n.bootstrap||zt,declarations:n.declarations||zt,imports:n.imports||zt,exports:n.exports||zt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Zt(n,r){if(null==n)return Rt;const s={};for(const a in n)if(n.hasOwnProperty(a)){let d=n[a],m=d;Array.isArray(d)&&(m=d[1],d=d[0]),s[d]=a,r&&(r[d]=m)}return s}function Rn(n){return Te(()=>{const r=xs(n);return Ts(r),r})}function Gn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function cn(n){return n[Re]||null}function gr(n){return n[Ae]||null}function nr(n){return n[he]||null}function ei(n){const r=cn(n)||gr(n)||nr(n);return null!==r&&r.standalone}function zr(n,r){const s=n[Pe]||null;if(!s&&!0===r)throw new Error(`Type ${K(n)} does not have '\u0275mod' property.`);return s}function xs(n){const r={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||zt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Zt(n.inputs,r),outputs:Zt(n.outputs)}}function Ts(n){n.features?.forEach(r=>r(n))}function _i(n,r){if(!n)return null;const s=r?nr:Ti;return()=>("function"==typeof n?n():n).map(a=>s(a)).filter(ht)}const Kr=0,kt=1,xn=2,fn=3,Sn=4,Cn=5,vr=6,Xn=7,Mr=8,Qi=9,si=10,An=11,ar=12,kn=13,Br=14,Ys=15,Ee=16,it=17,ze=18,gt=19,$t=20,Kt=21,mn=22,mr=1,di=2,fr=7,Pr=8,Si=9,qr=10;function vi(n){return Array.isArray(n)&&"object"==typeof n[mr]}function yn(n){return Array.isArray(n)&&!0===n[mr]}function Ss(n){return 0!=(4&n.flags)}function Qs(n){return n.componentOffset>-1}function ds(n){return 1==(1&n.flags)}function sr(n){return!!n.template}function Ns(n){return 0!=(256&n[xn])}function ks(n,r){return n.hasOwnProperty(Ge)?n[Ge]:null}class ua{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function os(){return bs}function bs(n){return n.type.prototype.ngOnChanges&&(n.setInput=So),Pn}function Pn(){const n=wa(this),r=n?.current;if(r){const s=n.previous;if(s===Rt)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function So(n,r,s,a){const d=this.declaredInputs[s],m=wa(n)||function Hr(n,r){return n[vs]=r}(n,{previous:Rt,current:null}),S=m.current||(m.current={}),x=m.previous,k=x[d];S[d]=new ua(k&&k.currentValue,r,x===Rt),n[a]=r}os.ngInherit=!0;const vs="__ngSimpleChanges__";function wa(n){return n[vs]||null}const Ei=function(n,r,s){},yo="svg";function Lr(n){for(;Array.isArray(n);)n=n[Kr];return n}function da(n,r){return Lr(r[n])}function Di(n,r){return Lr(r[n.index])}function jo(n,r){return n.data[r]}function Sr(n,r){return n[r]}function Zi(n,r){const s=r[n];return vi(s)?s:s[Kr]}function Es(n){return 64==(64&n[xn])}function ao(n,r){return null==r?null:n[r]}function Ta(n){n[ze]=0}function ha(n,r){n[Cn]+=r;let s=n,a=n[fn];for(;null!==a&&(1===r&&1===s[Cn]||-1===r&&0===s[Cn]);)a[Cn]+=r,s=a,a=a[fn]}const Nn={lFrame:fa(null),bindingsEnabled:!0};function ot(){return Nn.bindingsEnabled}function Qt(){Nn.bindingsEnabled=!0}function Zr(){Nn.bindingsEnabled=!1}function mt(){return Nn.lFrame.lView}function rr(){return Nn.lFrame.tView}function Go(n){return Nn.lFrame.contextLView=n,n[Mr]}function nu(n){return Nn.lFrame.contextLView=null,n}function Ni(){let n=ka();for(;null!==n&&64===n.type;)n=n.parent;return n}function ka(){return Nn.lFrame.currentTNode}function fs(n,r){const s=Nn.lFrame;s.currentTNode=n,s.isParent=r}function Wo(){return Nn.lFrame.isParent}function zo(){Nn.lFrame.isParent=!1}function oi(){const n=Nn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function ai(){return Nn.lFrame.bindingIndex}function bo(){return Nn.lFrame.bindingIndex++}function Ds(n){const r=Nn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function ji(n,r){const s=Nn.lFrame;s.bindingIndex=s.bindingRootIndex=n,Us(r)}function Us(n){Nn.lFrame.currentDirectiveIndex=n}function ls(n){const r=Nn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function Ao(){return Nn.lFrame.currentQueryIndex}function Za(n){Nn.lFrame.currentQueryIndex=n}function Ml(n){const r=n[kt];return 2===r.type?r.declTNode:1===r.type?n[vr]:null}function li(n,r,s){if(s&ln.SkipSelf){let d=r,m=n;for(;!(d=d.parent,null!==d||s&ln.Host||(d=Ml(m),null===d||(m=m[Ys],10&d.type))););if(null===d)return!1;r=d,n=m}const a=Nn.lFrame=ba();return a.currentTNode=r,a.lView=n,!0}function Zs(n){const r=ba(),s=n[kt];Nn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function ba(){const n=Nn.lFrame,r=null===n?null:n.child;return null===r?fa(n):r}function fa(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Aa(){const n=Nn.lFrame;return Nn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const cl=Aa;function Mo(){const n=Aa();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ii(){return Nn.lFrame.selectedIndex}function ps(n){Nn.lFrame.selectedIndex=n}function Yr(){const n=Nn.lFrame;return jo(n.tView,n.selectedIndex)}function Ut(){Nn.lFrame.currentNamespace=yo}function Po(){!function Pl(){Nn.lFrame.currentNamespace=null}()}function dl(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const m=n.data[s].type.prototype,{ngAfterContentInit:S,ngAfterContentChecked:x,ngAfterViewInit:k,ngAfterViewChecked:Z,ngOnDestroy:ce}=m;S&&(n.contentHooks??(n.contentHooks=[])).push(-s,S),x&&((n.contentHooks??(n.contentHooks=[])).push(s,x),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(s,x)),k&&(n.viewHooks??(n.viewHooks=[])).push(-s,k),Z&&((n.viewHooks??(n.viewHooks=[])).push(s,Z),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(s,Z)),null!=ce&&(n.destroyHooks??(n.destroyHooks=[])).push(s,ce)}}function nn(n,r,s){Q(n,r,3,s)}function dt(n,r,s,a){(3&n[xn])===s&&Q(n,r,s,a)}function P(n,r){let s=n[xn];(3&s)===r&&(s&=2047,s+=1,n[xn]=s)}function Q(n,r,s,a){const m=a??-1,S=r.length-1;let x=0;for(let k=void 0!==a?65535&n[ze]:0;k<S;k++)if("number"==typeof r[k+1]){if(x=r[k],null!=a&&x>=a)break}else r[k]<0&&(n[ze]+=65536),(x<m||-1==m)&&(V(n,s,r,k),n[ze]=(4294901760&n[ze])+k+2),k++}function V(n,r,s,a){const d=s[a]<0,m=s[a+1],x=n[d?-s[a]:s[a]];if(d){if(n[xn]>>11<n[ze]>>16&&(3&n[xn])===r){n[xn]+=2048,Ei(4,x,m);try{m.call(x)}finally{Ei(5,x,m)}}}else{Ei(4,x,m);try{m.call(x)}finally{Ei(5,x,m)}}}const ae=-1;class Ce{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function Xt(n,r,s){let a=0;for(;a<s.length;){const d=s[a];if("number"==typeof d){if(0!==d)break;a++;const m=s[a++],S=s[a++],x=s[a++];n.setAttribute(r,S,x,m)}else{const m=d,S=s[++a];Is(m)?n.setProperty(r,m,S):n.setAttribute(r,m,S),a++}}return a}function ti(n){return 3===n||4===n||6===n}function Is(n){return 64===n.charCodeAt(0)}function Er(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const d=r[a];"number"==typeof d?s=d:0===s||gn(n,s,d,null,-1===s||2===s?r[++a]:null)}}return n}function gn(n,r,s,a,d){let m=0,S=n.length;if(-1===r)S=-1;else for(;m<n.length;){const x=n[m++];if("number"==typeof x){if(x===r){S=-1;break}if(x>r){S=m-1;break}}}for(;m<n.length;){const x=n[m];if("number"==typeof x)break;if(x===s){if(null===a)return void(null!==d&&(n[m+1]=d));if(a===n[m+1])return void(n[m+2]=d)}m++,null!==a&&m++,null!==d&&m++}-1!==S&&(n.splice(S,0,r),m=S+1),n.splice(m++,0,s),null!==a&&n.splice(m++,0,a),null!==d&&n.splice(m++,0,d)}function es(n){return n!==ae}function Wn(n){return 32767&n}function Or(n,r){let s=function Oo(n){return n>>16}(n),a=r;for(;s>0;)a=a[Ys],s--;return a}let qt=!0;function uo(n){const r=qt;return qt=n,r}const Qo=255,hl=5;let Hi=0;const co={};function Ua(n,r){const s=Vs(n,r);if(-1!==s)return s;const a=r[kt];a.firstCreatePass&&(n.injectorIndex=r.length,fl(a.data,n),fl(r,null),fl(a.blueprint,null));const d=Ol(n,r),m=n.injectorIndex;if(es(d)){const S=Wn(d),x=Or(d,r),k=x[kt].data;for(let Z=0;Z<8;Z++)r[m+Z]=x[S+Z]|k[S+Z]}return r[m+8]=d,m}function fl(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Vs(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Ol(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,d=r;for(;null!==d;){if(a=Kl(d),null===a)return ae;if(s++,d=d[Ys],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return ae}function ru(n,r,s){!function Ro(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Ft)&&(a=s[Ft]),null==a&&(a=s[Ft]=Hi++);const d=a&Qo;r.data[n+(d>>hl)]|=1<<d}(n,r,s)}function xo(n,r,s){if(s&ln.Optional||void 0!==n)return n;Ct()}function Xa(n,r,s,a){if(s&ln.Optional&&void 0===a&&(a=null),!(s&(ln.Self|ln.Host))){const d=n[Qi],m=Tr(void 0);try{return d?d.get(r,a,s&ln.Optional):Ar(r,a,s&ln.Optional)}finally{Tr(m)}}return xo(a,0,s)}function st(n,r,s,a=ln.Default,d){if(null!==n){if(1024&r[xn]){const S=function Bs(n,r,s,a,d){let m=n,S=r;for(;null!==m&&null!==S&&1024&S[xn]&&!(256&S[xn]);){const x=ga(m,S,s,a|ln.Self,co);if(x!==co)return x;let k=m.parent;if(!k){const Z=S[Kt];if(Z){const ce=Z.get(s,co,a);if(ce!==co)return ce}k=Kl(S),S=S[Ys]}m=k}return d}(n,r,s,a,co);if(S!==co)return S}const m=ga(n,r,s,a,co);if(m!==co)return m}return Xa(r,s,a,d)}function ga(n,r,s,a,d){const m=function Ai(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Ft)?n[Ft]:void 0;return"number"==typeof r?r>=0?r&Qo:su:r}(s);if("function"==typeof m){if(!li(r,n,a))return a&ln.Host?xo(d,0,a):Xa(r,s,a,d);try{const S=m(a);if(null!=S||a&ln.Optional)return S;Ct()}finally{cl()}}else if("number"==typeof m){let S=null,x=Vs(n,r),k=ae,Z=a&ln.Host?r[Ee][vr]:null;for((-1===x||a&ln.SkipSelf)&&(k=-1===x?Ol(n,r):r[x+8],k!==ae&&No(a,!1)?(S=r[kt],x=Wn(k),r=Or(k,r)):x=-1);-1!==x;){const ce=r[kt];if(pl(m,x,ce.data)){const De=Cs(x,r,s,S,a,Z);if(De!==co)return De}k=r[x+8],k!==ae&&No(a,r[kt].data[x+8]===Z)&&pl(m,x,r)?(S=ce,x=Wn(k),r=Or(k,r)):x=-1}}return d}function Cs(n,r,s,a,d,m){const S=r[kt],x=S.data[n+8],ce=Rl(x,S,s,null==a?Qs(x)&&qt:a!=S&&0!=(3&x.type),d&ln.Host&&m===x);return null!==ce?Js(r,S,ce,x):co}function Rl(n,r,s,a,d){const m=n.providerIndexes,S=r.data,x=1048575&m,k=n.directiveStart,ce=m>>20,He=d?x+ce:n.directiveEnd;for(let lt=a?x:x+ce;lt<He;lt++){const St=S[lt];if(lt<k&&s===St||lt>=k&&St.type===s)return lt}if(d){const lt=S[k];if(lt&&sr(lt)&&lt.type===s)return k}return null}function Js(n,r,s,a){let d=n[s];const m=r.data;if(function ft(n){return n instanceof Ce}(d)){const S=d;S.resolving&&function ke(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ve(-200,`Circular dependency in DI detected for ${n}${s}`)}(function qe(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ye(n)}(m[s]));const x=uo(S.canSeeViewProviders);S.resolving=!0;const k=S.injectImpl?Tr(S.injectImpl):null;li(n,a,ln.Default);try{d=n[s]=S.factory(void 0,m,n,a),r.firstCreatePass&&s>=a.directiveStart&&function In(n,r,s){const{ngOnChanges:a,ngOnInit:d,ngDoCheck:m}=r.type.prototype;if(a){const S=bs(r);(s.preOrderHooks??(s.preOrderHooks=[])).push(n,S),(s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(n,S)}d&&(s.preOrderHooks??(s.preOrderHooks=[])).push(0-n,d),m&&((s.preOrderHooks??(s.preOrderHooks=[])).push(n,m),(s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(n,m))}(s,m[s],r)}finally{null!==k&&Tr(k),uo(x),S.resolving=!1,cl()}}return d}function pl(n,r,s){return!!(s[r+(n>>hl)]&1<<n)}function No(n,r){return!(n&ln.Self||n&ln.Host&&r)}class Ja{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return st(this._tNode,this._lView,r,tt(a),s)}}function su(){return new Ja(Ni(),mt())}function el(n){return Te(()=>{const r=n.prototype.constructor,s=r[Ge]||Va(r),a=Object.prototype;let d=Object.getPrototypeOf(n.prototype).constructor;for(;d&&d!==a;){const m=d[Ge]||Va(d);if(m&&m!==s)return m;d=Object.getPrototypeOf(d)}return m=>new m})}function Va(n){return Ne(n)?()=>{const r=Va(ge(n));return r&&r()}:ks(n)}function Kl(n){const r=n[kt],s=r.type;return 2===s?r.declTNode:1===s?n[vr]:null}function Mi(n){return function iu(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let d=0;for(;d<a;){const m=s[d];if(ti(m))break;if(0===m)d+=2;else if("number"==typeof m)for(d++;d<a&&"string"==typeof s[d];)d++;else{if(m===r)return s[d+1];d+=2}}}return null}(Ni(),n)}const eo="__parameters__";function ya(n,r,s){return Te(()=>{const a=function Ma(n){return function(...s){if(n){const a=n(...s);for(const d in a)this[d]=a[d]}}}(r);function d(...m){if(this instanceof d)return a.apply(this,m),this;const S=new d(...m);return x.annotation=S,x;function x(k,Z,ce){const De=k.hasOwnProperty(eo)?k[eo]:Object.defineProperty(k,eo,{value:[]})[eo];for(;De.length<=ce;)De.push(null);return(De[ce]=De[ce]||[]).push(S),k}}return s&&(d.prototype=Object.create(s.prototype)),d.prototype.ngMetadataName=n,d.annotationCls=d,d})}class Cr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=hn({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function W(n,r){n.forEach(s=>Array.isArray(s)?W(s,r):r(s))}function oe(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function fe(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function je(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}function $r(n,r,s){let a=Fi(n,r);return a>=0?n[1|a]=s:(a=~a,function on(n,r,s,a){let d=n.length;if(d==r)n.push(s,a);else if(1===d)n.push(a,n[0]),n[0]=s;else{for(d--,n.push(n[d-1],n[d]);d>r;)n[d]=n[d-2],d--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function Hs(n,r){const s=Fi(n,r);if(s>=0)return n[1|s]}function Fi(n,r){return function ts(n,r,s){let a=0,d=n.length>>s;for(;d!==a;){const m=a+(d-a>>1),S=n[m<<s];if(r===S)return m<<s;S>r?d=m:a=m+1}return~(d<<s)}(n,r,1)}const vl=Oe(ya("Inject",n=>({token:n})),-1),va=Oe(ya("Optional"),8),xl=Oe(ya("Self"),2),Xo=Oe(ya("SkipSelf"),4);var Fo=(()=>((Fo=Fo||{})[Fo.Important=1]="Important",Fo[Fo.DashCase=2]="DashCase",Fo))();const wu=new Map;let hu=0;const Ea="__ngContext__";function Gi(n,r){vi(r)?(n[Ea]=r[$t],function zu(n){wu.set(n[$t],n)}(r)):n[Ea]=r}let _;function g(n,r){return _(n,r)}function j(n){const r=n[fn];return yn(r)?r[fn]:r}function Ie(n){return pt(n[kn])}function Xe(n){return pt(n[Sn])}function pt(n){for(;null!==n&&!yn(n);)n=n[Sn];return n}function Bt(n,r,s,a,d){if(null!=a){let m,S=!1;yn(a)?m=a:vi(a)&&(S=!0,a=a[Kr]);const x=Lr(a);0===n&&null!==s?null==d?al(r,s,x):Eo(r,s,x,d||null,!0):1===n&&null!==s?Eo(r,s,x,d||null,!0):2===n?function na(n,r,s){const a=Zn(n,r);a&&function wn(n,r,s,a){n.removeChild(r,s,a)}(n,a,r,s)}(r,x,S):3===n&&r.destroyNode(x),null!=m&&function cc(n,r,s,a,d){const m=s[fr];m!==Lr(s)&&Bt(r,n,a,m,d);for(let x=qr;x<s.length;x++){const k=s[x];Wi(k[kt],k,n,r,a,m)}}(r,n,m,s,d)}}function Vt(n,r,s){return n.createElement(r,s)}function Da(n,r){const s=n[Si],a=s.indexOf(r),d=r[fn];512&r[xn]&&(r[xn]&=-513,ha(d,-1)),s.splice(a,1)}function Ia(n,r){if(n.length<=qr)return;const s=qr+r,a=n[s];if(a){const d=a[it];null!==d&&d!==n&&Da(d,a),r>0&&(n[s-1][Sn]=a[Sn]);const m=fe(n,qr+r);!function bn(n,r){Wi(n,r,r[An],2,null,null),r[Kr]=null,r[vr]=null}(a[kt],a);const S=m[gt];null!==S&&S.detachView(m[kt]),a[fn]=null,a[Sn]=null,a[xn]&=-65}return a}function ki(n,r){if(!(128&r[xn])){const s=r[An];s.destroyNode&&Wi(n,r,s,3,null,null),function Ms(n){let r=n[kn];if(!r)return Ka(n[kt],n);for(;r;){let s=null;if(vi(r))s=r[kn];else{const a=r[qr];a&&(s=a)}if(!s){for(;r&&!r[Sn]&&r!==n;)vi(r)&&Ka(r[kt],r),r=r[fn];null===r&&(r=n),vi(r)&&Ka(r[kt],r),s=r&&r[Sn]}r=s}}(r)}}function Ka(n,r){if(!(128&r[xn])){r[xn]&=-65,r[xn]|=128,function Cl(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const d=r[s[a]];if(!(d instanceof Ce)){const m=s[a+1];if(Array.isArray(m))for(let S=0;S<m.length;S+=2){const x=d[m[S]],k=m[S+1];Ei(4,x,k);try{k.call(x)}finally{Ei(5,x,k)}}else{Ei(4,d,m);try{m.call(d)}finally{Ei(5,d,m)}}}}}(n,r),function La(n,r){const s=n.cleanup,a=r[Xn];let d=-1;if(null!==s)for(let m=0;m<s.length-1;m+=2)if("string"==typeof s[m]){const S=s[m+3];S>=0?a[d=S]():a[d=-S].unsubscribe(),m+=2}else{const S=a[d=s[m+1]];s[m].call(S)}if(null!==a){for(let m=d+1;m<a.length;m++)(0,a[m])();r[Xn]=null}}(n,r),1===r[kt].type&&r[An].destroy();const s=r[it];if(null!==s&&yn(r[fn])){s!==r[fn]&&Da(s,r);const a=r[gt];null!==a&&a.detachView(n)}!function Ku(n){wu.delete(n[$t])}(r)}}function uc(n,r,s){return function Jn(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[Kr];{const{componentOffset:d}=a;if(d>-1){const{encapsulation:m}=n.data[a.directiveStart+d];if(m===Le.None||m===Le.Emulated)return null}return Di(a,s)}}(n,r.parent,s)}function Eo(n,r,s,a,d){n.insertBefore(r,s,a,d)}function al(n,r,s){n.appendChild(r,s)}function jl(n,r,s,a,d){null!==a?Eo(n,r,s,a,d):al(n,r,s)}function Zn(n,r){return n.parentNode(r)}function Ps(n,r,s){return Do(n,r,s)}let ul,jc,dc,hc,Do=function ll(n,r,s){return 40&n.type?Di(n,s):null};function Qu(n,r,s,a){const d=uc(n,a,r),m=r[An],x=Ps(a.parent||r[vr],a,r);if(null!=d)if(Array.isArray(s))for(let k=0;k<s.length;k++)jl(m,d,s[k],x,!1);else jl(m,d,s,x,!1);void 0!==ul&&ul(m,a,r,s,d)}function Su(n,r){if(null!==r){const s=r.type;if(3&s)return Di(r,n);if(4&s)return ta(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return Su(n,a);{const d=n[r.index];return yn(d)?ta(-1,d):Lr(d)}}if(32&s)return g(r,n)()||Lr(n[r.index]);{const a=Io(n,r);return null!==a?Array.isArray(a)?a[0]:Su(j(n[Ee]),a):Su(n,r.next)}}return null}function Io(n,r){return null!==r?n[Ee][vr].projection[r.projection]:null}function ta(n,r){const s=qr+n+1;if(s<r.length){const a=r[s],d=a[kt].firstChild;if(null!==d)return Su(a,d)}return r[fr]}function pu(n,r,s,a,d,m,S){for(;null!=s;){const x=a[s.index],k=s.type;if(S&&0===r&&(x&&Gi(Lr(x),a),s.flags|=2),32!=(32&s.flags))if(8&k)pu(n,r,s.child,a,d,m,!1),Bt(r,n,d,x,m);else if(32&k){const Z=g(s,a);let ce;for(;ce=Z();)Bt(r,n,d,ce,m);Bt(r,n,d,x,m)}else 16&k?mh(n,r,a,s,d,m):Bt(r,n,d,x,m);s=S?s.projectionNext:s.next}}function Wi(n,r,s,a,d,m){pu(s,a,n.firstChild,r,d,m,!1)}function mh(n,r,s,a,d,m){const S=s[Ee],k=S[vr].projection[a.projection];if(Array.isArray(k))for(let Z=0;Z<k.length;Z++)Bt(r,n,d,k[Z],m);else pu(n,r,k,S[fn],d,m,!0)}function yh(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function qu(n,r,s){const{mergedAttrs:a,classes:d,styles:m}=s;null!==a&&Xt(n,r,a),null!==d&&yh(n,r,d),null!==m&&function Md(n,r,s){n.setAttribute(r,"style",s)}(n,r,m)}function Zu(n){return function Hc(){if(void 0===jc&&(jc=null,Yn.trustedTypes))try{jc=Yn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return jc}()?.createHTML(n)||n}function Rd(n){dc=n}function xd(){if(void 0===hc&&(hc=null,Yn.trustedTypes))try{hc=Yn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return hc}function Nd(n){return xd()?.createHTML(n)||n}function vh(n){return xd()?.createScriptURL(n)||n}class gu{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qe})`}}class fc extends gu{getTypeName(){return"HTML"}}class pc extends gu{getTypeName(){return"Style"}}class Eh extends gu{getTypeName(){return"Script"}}class _f extends gu{getTypeName(){return"URL"}}class vf extends gu{getTypeName(){return"ResourceURL"}}function Os(n){return n instanceof gu?n.changingThisBreaksApplicationSecurity:n}function gc(n,r){const s=function Dh(n){return n instanceof gu&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Qe})`)}return s===r}function Hl(n){return new fc(n)}function Ih(n){return new pc(n)}function Gc(n){return new Eh(n)}function Ch(n){return new _f(n)}function lg(n){return new vf(n)}class ug{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(Zu(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class h{constructor(r){this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(r){const s=this.inertDocument.createElement("template");return s.innerHTML=Zu(r),s}}const c=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function E(n){return(n=String(n)).match(c)?n:"unsafe:"+n}function M(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function B(...n){const r={};for(const s of n)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const Y=M("area,br,col,hr,img,wbr"),me=M("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),be=M("rp,rt"),At=B(Y,B(me,M("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),B(be,M("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),B(be,me)),En=M("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Co=B(En,M("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),M("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),mu=M("script,style,template");class Ks{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let d=this.checkClobberedElement(s,s.nextSibling);if(d){s=d;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!At.hasOwnProperty(s))return this.sanitizedSomething=!0,!mu.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let d=0;d<a.length;d++){const m=a.item(d),S=m.name,x=S.toLowerCase();if(!Co.hasOwnProperty(x)){this.sanitizedSomething=!0;continue}let k=m.value;En[x]&&(k=E(k)),this.buf.push(" ",S,'="',wh(k),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();At.hasOwnProperty(s)&&!Y.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(wh(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const mc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ld=/([^\#-~ |!])/g;function wh(n){return n.replace(/&/g,"&amp;").replace(mc,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Ld,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Jl;function Df(n,r){let s=null;try{Jl=Jl||function Ef(n){const r=new h(n);return function u(){try{return!!(new window.DOMParser).parseFromString(Zu(""),"text/html")}catch{return!1}}()?new ug(r):r}(n);let a=r?String(r):"";s=Jl.getInertBodyElement(a);let d=5,m=a;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,a=m,m=s.innerHTML,s=Jl.getInertBodyElement(a)}while(a!==m);return Zu((new Ks).sanitizeChildren(If(s)||s))}finally{if(s){const a=If(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function If(n){return"content"in n&&function cg(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Rs=(()=>((Rs=Rs||{})[Rs.NONE=0]="NONE",Rs[Rs.HTML=1]="HTML",Rs[Rs.STYLE=2]="STYLE",Rs[Rs.SCRIPT=3]="SCRIPT",Rs[Rs.URL=4]="URL",Rs[Rs.RESOURCE_URL=5]="RESOURCE_URL",Rs))();function Xu(n){const r=Wc();return r?Nd(r.sanitize(Rs.HTML,n)||""):gc(n,"HTML")?Nd(Os(n)):Df(function $c(){return void 0!==dc?dc:typeof document<"u"?document:void 0}(),Ye(n))}function bu(n){const r=Wc();return r?r.sanitize(Rs.URL,n)||"":gc(n,"URL")?Os(n):E(Ye(n))}function _c(n){const r=Wc();if(r)return vh(r.sanitize(Rs.RESOURCE_URL,n)||"");if(gc(n,"ResourceURL"))return vh(Os(n));throw new Ve(904,!1)}function Tf(n,r,s){return function hg(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?_c:bu}(r,s)(n)}function Wc(){const n=mt();return n&&n[ar]}const zc=new Cr("ENVIRONMENT_INITIALIZER"),Kc=new Cr("INJECTOR",-1),Ju=new Cr("INJECTOR_DEF_TYPES");class fg{get(r,s=Qn){if(s===Qn){const a=new Error(`NullInjectorError: No provider for ${K(r)}!`);throw a.name="NullInjectorError",a}return s}}function pg(n){return{\u0275providers:n}}function sy(...n){return{\u0275providers:gg(0,n),\u0275fromNgModule:!0}}function gg(n,...r){const s=[],a=new Set;let d;return W(r,m=>{const S=m;vc(S,s,[],a)&&(d||(d=[]),d.push(S))}),void 0!==d&&mg(d,s),s}function mg(n,r){for(let s=0;s<n.length;s++){const{providers:d}=n[s];yu(d,m=>{r.push(m)})}}function vc(n,r,s,a){if(!(n=ge(n)))return!1;let d=null,m=Vn(n);const S=!m&&cn(n);if(m||S){if(S&&!S.standalone)return!1;d=n}else{const k=n.ngModule;if(m=Vn(k),!m)return!1;d=k}const x=a.has(d);if(S){if(x)return!1;if(a.add(d),S.dependencies){const k="function"==typeof S.dependencies?S.dependencies():S.dependencies;for(const Z of k)vc(Z,r,s,a)}}else{if(!m)return!1;{if(null!=m.imports&&!x){let Z;a.add(d);try{W(m.imports,ce=>{vc(ce,r,s,a)&&(Z||(Z=[]),Z.push(ce))})}finally{}void 0!==Z&&mg(Z,r)}if(!x){const Z=ks(d)||(()=>new d);r.push({provide:d,useFactory:Z,deps:zt},{provide:Ju,useValue:d,multi:!0},{provide:zc,useValue:()=>hr(d),multi:!0})}const k=m.providers;null==k||x||yu(k,ce=>{r.push(ce)})}}return d!==n&&void 0!==n.providers}function yu(n,r){for(let s of n)Ke(s)&&(s=s.\u0275providers),Array.isArray(s)?yu(s,r):r(s)}const yg=ie({provide:String,useValue:ie});function Sf(n){return null!==n&&"object"==typeof n&&yg in n}function Au(n){return"function"==typeof n}const Th=new Cr("Set Injector scope."),Qc={},Mf={};let Sh;function Ec(){return void 0===Sh&&(Sh=new fg),Sh}class Dc{}class bh extends Dc{get destroyed(){return this._destroyed}constructor(r,s,a,d){super(),this.parent=s,this.source=a,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fa(r,S=>this.processProvider(S)),this.records.set(Kc,Mu(void 0,this)),d.has("environment")&&this.records.set(Dc,Mu(void 0,this));const m=this.records.get(Th);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Ju.multi,zt,ln.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=Hn(this),a=Tr(void 0);try{return r()}finally{Hn(s),Tr(a)}}get(r,s=Qn,a=ln.Default){this.assertNotDestroyed(),a=tt(a);const d=Hn(this),m=Tr(void 0);try{if(!(a&ln.SkipSelf)){let x=this.records.get(r);if(void 0===x){const k=function Dg(n){return"function"==typeof n||"object"==typeof n&&n instanceof Cr}(r)&&ut(r);x=k&&this.injectableDefInScope(k)?Mu(qc(r),Qc):null,this.records.set(r,x)}if(null!=x)return this.hydrate(r,x)}return(a&ln.Self?Ec():this.parent).get(r,s=a&ln.Optional&&s===Qn?null:s)}catch(S){if("NullInjectorError"===S.name){if((S[Ur]=S[Ur]||[]).unshift(K(r)),d)throw S;return function pe(n,r,s,a){const d=n[Ur];throw r[_r]&&d.unshift(r[_r]),n.message=function ve(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==ci?n.slice(2):n;let d=K(r);if(Array.isArray(r))d=r.map(K).join(" -> ");else if("object"==typeof r){let m=[];for(let S in r)if(r.hasOwnProperty(S)){let x=r[S];m.push(S+":"+("string"==typeof x?JSON.stringify(x):K(x)))}d=`{${m.join(", ")}}`}return`${s}${a?"("+a+")":""}[${d}]: ${n.replace(Vr,"\n  ")}`}("\n"+n.message,d,s,a),n[mi]=d,n[Ur]=null,n}(S,r,"R3InjectorError",this.source)}throw S}finally{Tr(m),Hn(d)}}resolveInjectorInitializers(){const r=Hn(this),s=Tr(void 0);try{const a=this.get(zc.multi,zt,ln.Self);for(const d of a)d()}finally{Hn(r),Tr(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(K(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ve(205,!1)}processProvider(r){let s=Au(r=ge(r))?r:ge(r&&r.provide);const a=function vg(n){return Sf(n)?Mu(void 0,n.useValue):Mu(Zc(n),Qc)}(r);if(Au(r)||!0!==r.multi)this.records.get(s);else{let d=this.records.get(s);d||(d=Mu(void 0,Qc,!0),d.factory=()=>Se(d.multi),this.records.set(s,d)),s=r,d.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===Qc&&(s.value=Mf,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Eg(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ge(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function qc(n){const r=ut(n),s=null!==r?r.factory:ks(n);if(null!==s)return s;if(n instanceof Cr)throw new Ve(204,!1);if(n instanceof Function)return function oy(n){const r=n.length;if(r>0)throw je(r,"?"),new Ve(204,!1);const s=function Lt(n){return n&&(n[Kn]||n[is])||null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Ve(204,!1)}function Zc(n,r,s){let a;if(Au(n)){const d=ge(n);return ks(d)||qc(d)}if(Sf(n))a=()=>ge(n.useValue);else if(function _g(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Se(n.deps||[]));else if(function bf(n){return!(!n||!n.useExisting)}(n))a=()=>hr(ge(n.useExisting));else{const d=ge(n&&(n.useClass||n.provide));if(!function Fd(n){return!!n.deps}(n))return ks(d)||qc(d);a=()=>new d(...Se(n.deps))}return a}function Mu(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Fa(n,r){for(const s of n)Array.isArray(s)?Fa(s,r):s&&Ke(s)?Fa(s.\u0275providers,r):r(s)}class Ig{}class kd{}class Xc{resolveComponentFactory(r){throw function Ah(n){const r=Error(`No component factory found for ${K(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Jc=(()=>{class n{}return n.NULL=new Xc,n})();function Cc(){return ed(Ni(),mt())}function ed(n,r){return new _u(Di(n,r))}let _u=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Cc,n})();function Cg(n){return n instanceof _u?n.nativeElement:n}class Pu{}let wg=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function ay(){const n=mt(),s=Zi(Ni().index,n);return(vi(s)?s:n)[An]}(),n})(),ly=(()=>{class n{}return n.\u0275prov=hn({token:n,providedIn:"root",factory:()=>null}),n})();class Tg{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Sg=new Tg("15.2.10"),td={},Mh="ngOriginalError";function Ph(n){return n[Mh]}class Ud{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Ph(r);for(;s&&Ph(s);)s=Ph(s);return s||null}}function Of(n){return n.ownerDocument.defaultView}function Mg(n){return n.ownerDocument}function Ou(n){return n instanceof Function?n():n}function xf(n,r,s){let a=n.length;for(;;){const d=n.indexOf(r,s);if(-1===d)return d;if(0===d||n.charCodeAt(d-1)<=32){const m=r.length;if(d+m===a||n.charCodeAt(d+m)<=32)return d}s=d+1}}const Rg="ng-template";function Oh(n,r,s){let a=0,d=!0;for(;a<n.length;){let m=n[a++];if("string"==typeof m&&d){const S=n[a++];if(s&&"class"===m&&-1!==xf(S.toLowerCase(),r,0))return!0}else{if(1===m){for(;a<n.length&&"string"==typeof(m=n[a++]);)if(m.toLowerCase()===r)return!0;return!1}"number"==typeof m&&(d=!1)}}return!1}function xg(n){return 4===n.type&&n.value!==Rg}function Ng(n,r,s){return r===(4!==n.type||s?n.value:Rg)}function Nf(n,r,s){let a=4;const d=n.attrs||[],m=function Ff(n){for(let r=0;r<n.length;r++)if(ti(n[r]))return r;return n.length}(d);let S=!1;for(let x=0;x<r.length;x++){const k=r[x];if("number"!=typeof k){if(!S)if(4&a){if(a=2|1&a,""!==k&&!Ng(n,k,s)||""===k&&1===r.length){if(wl(a))return!1;S=!0}}else{const Z=8&a?k:r[++x];if(8&a&&null!==n.attrs){if(!Oh(n.attrs,Z,s)){if(wl(a))return!1;S=!0}continue}const De=Bd(8&a?"class":k,d,xg(n),s);if(-1===De){if(wl(a))return!1;S=!0;continue}if(""!==Z){let He;He=De>m?"":d[De+1].toLowerCase();const lt=8&a?He:null;if(lt&&-1!==xf(lt,Z,0)||2&a&&Z!==He){if(wl(a))return!1;S=!0}}}}else{if(!S&&!wl(a)&&!wl(k))return!1;if(S&&wl(k))continue;S=!1,a=k|1&a}}return wl(a)||S}function wl(n){return 0==(1&n)}function Bd(n,r,s,a){if(null===r)return-1;let d=0;if(a||!s){let m=!1;for(;d<r.length;){const S=r[d];if(S===n)return d;if(3===S||6===S)m=!0;else{if(1===S||2===S){let x=r[++d];for(;"string"==typeof x;)x=r[++d];continue}if(4===S)break;if(0===S){d+=4;continue}}d+=m?1:2}return-1}return function Lg(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function jd(n,r,s=!1){for(let a=0;a<r.length;a++)if(Nf(n,r[a],s))return!0;return!1}function cy(n,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(n.length===a.length){for(let d=0;d<n.length;d++)if(n[d]!==a[d])continue e;return!0}}return!1}function kf(n,r){return n?":not("+r.trim()+")":r}function Fg(n){let r=n[0],s=1,a=2,d="",m=!1;for(;s<n.length;){let S=n[s];if("string"==typeof S)if(2&a){const x=n[++s];d+="["+S+(x.length>0?'="'+x+'"':"")+"]"}else 8&a?d+="."+S:4&a&&(d+=" "+S);else""!==d&&!wl(S)&&(r+=kf(m,d),d=""),a=S,m=m||!wl(a);s++}return""!==d&&(r+=kf(m,d)),r}const wr={};function kg(n){Vf(rr(),mt(),Ii()+n,!1)}function Vf(n,r,s,a){if(!a)if(3==(3&r[xn])){const m=n.preOrderCheckHooks;null!==m&&nn(r,m,s)}else{const m=n.preOrderHooks;null!==m&&dt(r,m,0,s)}ps(s)}function Nh(n,r=null,s=null,a){const d=jg(n,r,s,a);return d.resolveInjectorInitializers(),d}function jg(n,r=null,s=null,a,d=new Set){const m=[s||zt,sy(n)];return a=a||("object"==typeof n?void 0:K(n)),new bh(m,r||Ec(),a||null,d)}let Ru=(()=>{class n{static create(s,a){if(Array.isArray(s))return Nh({name:""},a,s,"");{const d=s.name??"";return Nh({name:d},s.parent,s.providers,d)}}}return n.THROW_IF_NOT_FOUND=Qn,n.NULL=new fg,n.\u0275prov=hn({token:n,providedIn:"any",factory:()=>hr(Kc)}),n.__NG_ELEMENT_ID__=-1,n})();function xu(n,r=ln.Default){const s=mt();return null===s?hr(n,r):st(Ni(),s,ge(n),r)}function od(){throw new Error("invalid")}function zf(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const m=s[a+1];if(-1!==m){const S=n.data[m];Za(s[a]),S.contentQueries(2,r[m],m)}}}function $l(n,r,s,a,d,m,S,x,k,Z,ce){const De=r.blueprint.slice();return De[Kr]=d,De[xn]=76|a,(null!==ce||n&&1024&n[xn])&&(De[xn]|=1024),Ta(De),De[fn]=De[Ys]=n,De[Mr]=s,De[si]=S||n&&n[si],De[An]=x||n&&n[An],De[ar]=k||n&&n[ar]||null,De[Qi]=Z||n&&n[Qi]||null,De[vr]=m,De[$t]=function Tu(){return hu++}(),De[Kt]=ce,De[Ee]=2==r.type?n[Ee]:De,De}function Sc(n,r,s,a,d){let m=n.data[r];if(null===m)m=function Qf(n,r,s,a,d){const m=ka(),S=Wo(),k=n.data[r]=function Xg(n,r,s,a,d,m){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,S?m:m&&m.parent,s,r,a,d);return null===n.firstChild&&(n.firstChild=k),null!==m&&(S?null==m.child&&null!==k.parent&&(m.child=k):null===m.next&&(m.next=k,k.prev=m)),k}(n,r,s,a,d),function qa(){return Nn.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=s,m.value=a,m.attrs=d;const S=function Xi(){const n=Nn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();m.injectorIndex=null===S?-1:S.injectorIndex}return fs(m,!0),m}function bc(n,r,s,a){if(0===s)return-1;const d=r.length;for(let m=0;m<s;m++)r.push(a),n.blueprint.push(a),n.data.push(null);return d}function qf(n,r,s){Zs(r);try{const a=n.viewQuery;null!==a&&hp(1,a,s);const d=n.template;null!==d&&qg(n,r,d,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&zf(n,r),n.staticViewQueries&&hp(2,n.viewQuery,s);const m=n.components;null!==m&&function Yf(n,r){for(let s=0;s<r.length;s++)nm(n,r[s])}(r,m)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[xn]&=-5,Mo()}}function ad(n,r,s,a){const d=r[xn];if(128!=(128&d)){Zs(r);try{Ta(r),function Sa(n){return Nn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&qg(n,r,s,2,a);const S=3==(3&d);if(S){const Z=n.preOrderCheckHooks;null!==Z&&nn(r,Z,null)}else{const Z=n.preOrderHooks;null!==Z&&dt(r,Z,0,null),P(r,0)}if(function up(n){for(let r=Ie(n);null!==r;r=Xe(r)){if(!r[di])continue;const s=r[Si];for(let a=0;a<s.length;a++){const d=s[a];512&d[xn]||ha(d[fn],1),d[xn]|=512}}}(r),function Cy(n){for(let r=Ie(n);null!==r;r=Xe(r))for(let s=qr;s<r.length;s++){const a=r[s],d=a[kt];Es(a)&&ad(d,a,d.template,a[Mr])}}(r),null!==n.contentQueries&&zf(n,r),S){const Z=n.contentCheckHooks;null!==Z&&nn(r,Z)}else{const Z=n.contentHooks;null!==Z&&dt(r,Z,1),P(r,1)}!function Wf(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const d=s[a];if(d<0)ps(~d);else{const m=d,S=s[++a],x=s[++a];ji(S,m),x(2,r[m])}}}finally{ps(-1)}}(n,r);const x=n.components;null!==x&&function Kf(n,r){for(let s=0;s<r.length;s++)cp(n,r[s])}(r,x);const k=n.viewQuery;if(null!==k&&hp(2,k,a),S){const Z=n.viewCheckHooks;null!==Z&&nn(r,Z)}else{const Z=n.viewHooks;null!==Z&&dt(r,Z,2),P(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[xn]&=-41,512&r[xn]&&(r[xn]&=-513,ha(r[fn],-1))}finally{Mo()}}}function qg(n,r,s,a,d){const m=Ii(),S=2&a;try{ps(-1),S&&r.length>mn&&Vf(n,r,mn,!1),Ei(S?2:0,d),s(a,d)}finally{ps(m),Ei(S?3:1,d)}}function zd(n,r,s){if(Ss(r)){const d=r.directiveEnd;for(let m=r.directiveStart;m<d;m++){const S=n.data[m];S.contentQueries&&S.contentQueries(1,s[m],m)}}}function ld(n,r,s){ot()&&(function sp(n,r,s,a){const d=s.directiveStart,m=s.directiveEnd;Qs(s)&&function Iy(n,r,s){const a=Di(r,n),d=Zf(s),m=n[si],S=qd(n,$l(n,d,null,s.onPush?32:16,a,r,m,m.createRenderer(a,s),null,null,null));n[r.index]=S}(r,s,n.data[d+s.componentOffset]),n.firstCreatePass||Ua(s,r),Gi(a,r);const S=s.initialInputs;for(let x=d;x<m;x++){const k=n.data[x],Z=Js(r,n,x,s);Gi(Z,r),null!==S&&ap(0,x-d,Z,k,0,S),sr(k)&&(Zi(s.index,r)[Mr]=Js(r,n,x,s))}}(n,r,s,Di(s,r)),64==(64&s.flags)&&Ac(n,r,s))}function Kd(n,r,s=Di){const a=r.localNames;if(null!==a){let d=r.index+1;for(let m=0;m<a.length;m+=2){const S=a[m+1],x=-1===S?s(r,n):n[S];n[d++]=x}}}function Zf(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=ec(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function ec(n,r,s,a,d,m,S,x,k,Z){const ce=mn+a,De=ce+d,He=function Xf(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:wr);return s}(ce,De),lt="function"==typeof Z?Z():Z;return He[kt]={type:n,blueprint:He,template:s,queries:null,viewQuery:x,declTNode:r,data:He.slice().fill(null,ce),bindingStartIndex:ce,expandoStartIndex:De,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof S?S():S,firstChild:null,schemas:k,consts:lt,incompleteFirstPass:!1}}function Zg(n,r,s,a){const d=rm(r);null===s?d.push(a):(d.push(s),n.firstCreatePass&&im(n).push(a,d.length-1))}function Jf(n,r,s,a){for(let d in n)if(n.hasOwnProperty(d)){s=null===s?{}:s;const m=n[d];null===a?Jg(s,r,d,m):a.hasOwnProperty(d)&&Jg(s,r,a[d],m)}return s}function Jg(n,r,s,a){n.hasOwnProperty(s)?n[s].push(r,a):n[s]=[r,a]}function Ya(n,r,s,a,d,m,S,x){const k=Di(r,s);let ce,Z=r.inputs;!x&&null!=Z&&(ce=Z[a])?(Jd(n,s,ce,a,d),Qs(r)&&function Ey(n,r){const s=Zi(r,n);16&s[xn]||(s[xn]|=32)}(s,r.index)):3&r.type&&(a=function vy(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),d=null!=S?S(d,r.value||"",a):d,m.setProperty(k,a,d))}function Yd(n,r,s,a){if(ot()){const d=null===a?null:{"":-1},m=function op(n,r){const s=n.directiveRegistry;let a=null,d=null;if(s)for(let m=0;m<s.length;m++){const S=s[m];if(jd(r,S.selectors,!1))if(a||(a=[]),sr(S))if(null!==S.findHostDirectiveDefs){const x=[];d=d||new Map,S.findHostDirectiveDefs(S,x,d),a.unshift(...x,S),nc(n,r,x.length)}else a.unshift(S),nc(n,r,0);else d=d||new Map,S.findHostDirectiveDefs?.(S,a,d),a.push(S)}return null===a?null:[a,d]}(n,s);let S,x;null===m?S=x=null:[S,x]=m,null!==S&&np(n,r,s,S,d,x),d&&function ud(n,r,s){if(r){const a=n.localNames=[];for(let d=0;d<r.length;d+=2){const m=s[r[d+1]];if(null==m)throw new Ve(-301,!1);a.push(r[d],m)}}}(s,a,d)}s.mergedAttrs=Er(s.mergedAttrs,s.attrs)}function np(n,r,s,a,d,m){for(let Z=0;Z<a.length;Z++)ru(Ua(s,r),n,a[Z].type);!function cd(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}(s,n.data.length,a.length);for(let Z=0;Z<a.length;Z++){const ce=a[Z];ce.providersResolver&&ce.providersResolver(ce)}let S=!1,x=!1,k=bc(n,r,a.length,null);for(let Z=0;Z<a.length;Z++){const ce=a[Z];s.mergedAttrs=Er(s.mergedAttrs,ce.hostAttrs),Dy(n,s,r,k,ce),em(k,ce,d),null!==ce.contentQueries&&(s.flags|=4),(null!==ce.hostBindings||null!==ce.hostAttrs||0!==ce.hostVars)&&(s.flags|=64);const De=ce.type.prototype;!S&&(De.ngOnChanges||De.ngOnInit||De.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(s.index),S=!0),!x&&(De.ngOnChanges||De.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(s.index),x=!0),k++}!function ep(n,r,s){const d=r.directiveEnd,m=n.data,S=r.attrs,x=[];let k=null,Z=null;for(let ce=r.directiveStart;ce<d;ce++){const De=m[ce],He=s?s.get(De):null,St=He?He.outputs:null;k=Jf(De.inputs,ce,k,He?He.inputs:null),Z=Jf(De.outputs,ce,Z,St);const Jt=null===k||null===S||xg(r)?null:lp(k,ce,S);x.push(Jt)}null!==k&&(k.hasOwnProperty("class")&&(r.flags|=8),k.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=x,r.inputs=k,r.outputs=Z}(n,s,m)}function Ac(n,r,s){const a=s.directiveStart,d=s.directiveEnd,m=s.index,S=function Yo(){return Nn.lFrame.currentDirectiveIndex}();try{ps(m);for(let x=a;x<d;x++){const k=n.data[x],Z=r[x];Us(x),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&tc(k,Z)}}finally{ps(-1),Us(S)}}function tc(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function nc(n,r,s){r.componentOffset=s,(n.components??(n.components=[])).push(r.index)}function em(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;sr(r)&&(s[""]=n)}}function Dy(n,r,s,a,d){n.data[a]=d;const m=d.factory||(d.factory=ks(d.type)),S=new Ce(m,sr(d),xu);n.blueprint[a]=S,s[a]=S,function rp(n,r,s,a,d){const m=d.hostBindings;if(m){let S=n.hostBindingOpCodes;null===S&&(S=n.hostBindingOpCodes=[]);const x=~r.index;(function ip(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(S)!=x&&S.push(x),S.push(s,a,m)}}(n,r,a,bc(n,s,d.hostVars,wr),d)}function Gl(n,r,s,a,d,m){const S=Di(n,r);!function Qd(n,r,s,a,d,m,S){if(null==m)n.removeAttribute(r,d,s);else{const x=null==S?Ye(m):S(m,a||"",d);n.setAttribute(r,d,x,s)}}(r[An],S,m,n.value,s,a,d)}function ap(n,r,s,a,d,m){const S=m[r];if(null!==S){const x=a.setInput;for(let k=0;k<S.length;){const Z=S[k++],ce=S[k++],De=S[k++];null!==x?a.setInput(s,De,Z,ce):s[ce]=De}}}function lp(n,r,s){let a=null,d=0;for(;d<s.length;){const m=s[d];if(0!==m)if(5!==m){if("number"==typeof m)break;if(n.hasOwnProperty(m)){null===a&&(a=[]);const S=n[m];for(let x=0;x<S.length;x+=2)if(S[x]===r){a.push(m,S[x+1],s[d+1]);break}}d+=2}else d+=2;else d+=4}return a}function tm(n,r,s,a){return[n,!0,!1,r,null,0,a,s,null,null]}function cp(n,r){const s=Zi(r,n);if(Es(s)){const a=s[kt];48&s[xn]?ad(a,s,a.template,s[Mr]):s[Cn]>0&&dp(s)}}function dp(n){for(let a=Ie(n);null!==a;a=Xe(a))for(let d=qr;d<a.length;d++){const m=a[d];if(Es(m))if(512&m[xn]){const S=m[kt];ad(S,m,S.template,m[Mr])}else m[Cn]>0&&dp(m)}const s=n[kt].components;if(null!==s)for(let a=0;a<s.length;a++){const d=Zi(s[a],n);Es(d)&&d[Cn]>0&&dp(d)}}function nm(n,r){const s=Zi(r,n),a=s[kt];(function wy(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),qf(a,s,s[Mr])}function qd(n,r){return n[kn]?n[Br][Sn]=r:n[kn]=r,n[Br]=r,r}function Zd(n){for(;n;){n[xn]|=32;const r=j(n);if(Ns(n)&&!r)return n;n=r}return null}function Xd(n,r,s,a=!0){const d=r[si];d.begin&&d.begin();try{ad(n,r,n.template,s)}catch(S){throw a&&$h(r,S),S}finally{d.end&&d.end()}}function hp(n,r,s){Za(0),r(n,s)}function rm(n){return n[Xn]||(n[Xn]=[])}function im(n){return n.cleanup||(n.cleanup=[])}function $h(n,r){const s=n[Qi],a=s?s.get(Ud,null):null;a&&a.handleError(r)}function Jd(n,r,s,a,d){for(let m=0;m<s.length;){const S=s[m++],x=s[m++],k=r[S],Z=n.data[S];null!==Z.setInput?Z.setInput(k,d,a,x):k[x]=d}}function Nu(n,r,s){const a=da(r,n);!function On(n,r,s){n.setValue(r,s)}(n[An],a,s)}function dd(n,r,s){let a=s?n.styles:null,d=s?n.classes:null,m=0;if(null!==r)for(let S=0;S<r.length;S++){const x=r[S];"number"==typeof x?m=x:1==m?d=se(d,x):2==m&&(a=se(a,x+": "+r[++S]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=d:n.classesWithoutHost=d}function Gh(n,r,s,a,d=!1){for(;null!==s;){const m=r[s.index];if(null!==m&&a.push(Lr(m)),yn(m))for(let x=qr;x<m.length;x++){const k=m[x],Z=k[kt].firstChild;null!==Z&&Gh(k[kt],k,Z,a)}const S=s.type;if(8&S)Gh(n,r,s.child,a);else if(32&S){const x=g(s,r);let k;for(;k=x();)a.push(k)}else if(16&S){const x=Io(r,s);if(Array.isArray(x))a.push(...x);else{const k=j(r[Ee]);Gh(k[kt],k,x,a,!0)}}s=d?s.projectionNext:s.next}return a}class Mc{get rootNodes(){const r=this._lView,s=r[kt];return Gh(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Mr]}set context(r){this._lView[Mr]=r}get destroyed(){return 128==(128&this._lView[xn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[fn];if(yn(r)){const s=r[Pr],a=s?s.indexOf(this):-1;a>-1&&(Ia(r,a),fe(s,a))}this._attachedToViewContainer=!1}ki(this._lView[kt],this._lView)}onDestroy(r){Zg(this._lView[kt],this._lView,null,r)}markForCheck(){Zd(this._cdRefInjectingView||this._lView)}detach(){this._lView[xn]&=-65}reattach(){this._lView[xn]|=64}detectChanges(){Xd(this._lView[kt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ve(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Nr(n,r){Wi(n,r,r[An],2,null,null)}(this._lView[kt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ve(902,!1);this._appRef=r}}class sm extends Mc{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Xd(r[kt],r,r[Mr],!1)}checkNoChanges(){}get context(){return null}}class Wh extends Jc{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=cn(r);return new eh(s,this.ngModule)}}function fp(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class pp{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=tt(a);const d=this.injector.get(r,td,a);return d!==td||s===td?d:this.parentInjector.get(r,s,a)}}class eh extends kd{get inputs(){return fp(this.componentDef.inputs)}get outputs(){return fp(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Uf(n){return n.map(Fg).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,d){let m=(d=d||this.ngModule)instanceof Dc?d:d?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const S=m?new pp(r,m):r,x=S.get(Pu,null);if(null===x)throw new Ve(407,!1);const k=S.get(ly,null),Z=x.createRenderer(null,this.componentDef),ce=this.componentDef.selectors[0][0]||"div",De=a?function _y(n,r,s){return n.selectRootElement(r,s===Le.ShadowDom)}(Z,a,this.componentDef.encapsulation):Vt(Z,ce,function Sy(n){const r=n.toLowerCase();return"svg"===r?yo:"math"===r?"math":null}(ce)),He=this.componentDef.onPush?288:272,lt=ec(0,null,null,1,0,null,null,null,null,null),St=$l(null,lt,null,He,null,null,x,Z,k,S,null);let Jt,_n;Zs(St);try{const Ln=this.componentDef;let yr,Wt=null;Ln.findHostDirectiveDefs?(yr=[],Wt=new Map,Ln.findHostDirectiveDefs(Ln,yr,Wt),yr.push(Ln)):yr=[Ln];const xr=function mp(n,r){const s=n[kt],a=mn;return n[a]=r,Sc(s,a,2,"#host",null)}(St,De),ro=function by(n,r,s,a,d,m,S,x){const k=d[kt];!function yp(n,r,s,a){for(const d of n)r.mergedAttrs=Er(r.mergedAttrs,d.hostAttrs);null!==r.mergedAttrs&&(dd(r,r.mergedAttrs,!0),null!==s&&qu(a,s,r))}(a,n,r,S);const Z=m.createRenderer(r,s),ce=$l(d,Zf(s),null,s.onPush?32:16,d[n.index],n,m,Z,x||null,null,null);return k.firstCreatePass&&nc(k,n,a.length-1),qd(d,ce),d[n.index]=ce}(xr,De,Ln,yr,St,x,Z);_n=jo(lt,mn),De&&function vp(n,r,s,a){if(a)Xt(n,s,["ng-version",Sg.full]);else{const{attrs:d,classes:m}=function dy(n){const r=[],s=[];let a=1,d=2;for(;a<n.length;){let m=n[a];if("string"==typeof m)2===d?""!==m&&r.push(m,n[++a]):8===d&&s.push(m);else{if(!wl(d))break;d=m}a++}return{attrs:r,classes:s}}(r.selectors[0]);d&&Xt(n,s,d),m&&m.length>0&&yh(n,s,m.join(" "))}}(Z,Ln,De,a),void 0!==s&&function hd(n,r,s){const a=n.projection=[];for(let d=0;d<r.length;d++){const m=s[d];a.push(null!=m?Array.from(m):null)}}(_n,this.ngContentSelectors,s),Jt=function _p(n,r,s,a,d,m){const S=Ni(),x=d[kt],k=Di(S,d);np(x,d,S,s,null,a);for(let ce=0;ce<s.length;ce++)Gi(Js(d,x,S.directiveStart+ce,S),d);Ac(x,d,S),k&&Gi(k,d);const Z=Js(d,x,S.directiveStart+S.componentOffset,S);if(n[Mr]=d[Mr]=Z,null!==m)for(const ce of m)ce(Z,r);return zd(x,S,n),Z}(ro,Ln,yr,Wt,St,[om]),qf(lt,St,null)}finally{Mo()}return new gp(this.componentType,Jt,ed(_n,St),St,_n)}}class gp extends Ig{constructor(r,s,a,d,m){super(),this.location=a,this._rootLView=d,this._tNode=m,this.instance=s,this.hostView=this.changeDetectorRef=new sm(d),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let d;if(null!==a&&(d=a[r])){const m=this._rootLView;Jd(m[kt],m,d,r,s),Zd(Zi(this._tNode.index,m))}}get injector(){return new Ja(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function om(){const n=Ni();dl(mt()[kt],n)}function Ep(n){let r=function zh(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let d;if(sr(n))d=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ve(903,!1);d=r.\u0275dir}if(d){if(s){a.push(d);const S=n;S.inputs=eu(n.inputs),S.declaredInputs=eu(n.declaredInputs),S.outputs=eu(n.outputs);const x=d.hostBindings;x&&Cp(n,x);const k=d.viewQuery,Z=d.contentQueries;if(k&&Ip(n,k),Z&&Ay(n,Z),ee(n.inputs,d.inputs),ee(n.declaredInputs,d.declaredInputs),ee(n.outputs,d.outputs),sr(d)&&d.data.animation){const ce=n.data;ce.animation=(ce.animation||[]).concat(d.data.animation)}}const m=d.features;if(m)for(let S=0;S<m.length;S++){const x=m[S];x&&x.ngInherit&&x(n),x===Ep&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Dp(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const d=n[a];d.hostVars=r+=d.hostVars,d.hostAttrs=Er(d.hostAttrs,s=Er(s,d.hostAttrs))}}(a)}function eu(n){return n===Rt?{}:n===zt?[]:n}function Ip(n,r){const s=n.viewQuery;n.viewQuery=s?(a,d)=>{r(a,d),s(a,d)}:r}function Ay(n,r){const s=n.contentQueries;n.contentQueries=s?(a,d,m)=>{r(a,d,m),s(a,d,m)}:r}function Cp(n,r){const s=n.hostBindings;n.hostBindings=s?(a,d)=>{r(a,d),s(a,d)}:r}function fd(n){return!!Sp(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Sp(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function vu(n,r,s){return n[r]=s}function ia(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Lu(n,r,s,a){const d=ia(n,r,s);return ia(n,r+1,a)||d}function Qh(n,r,s,a,d){const m=Lu(n,r,s,a);return ia(n,r+2,d)||m}function Tl(n,r,s,a,d,m){const S=Lu(n,r,s,a);return Lu(n,r+2,d,m)||S}function Ap(n,r,s,a){const d=mt();return ia(d,bo(),r)&&(rr(),Gl(Yr(),d,n,r,s,a)),Ap}function rc(n,r,s,a){return ia(n,bo(),s)?r+Ye(s)+a:wr}function ic(n,r,s,a,d,m){const x=Lu(n,ai(),s,d);return Ds(2),x?r+Ye(s)+a+Ye(d)+m:wr}function gd(n,r,s,a,d,m,S,x){const Z=Qh(n,ai(),s,d,S);return Ds(3),Z?r+Ye(s)+a+Ye(d)+m+Ye(S)+x:wr}function Op(n,r,s,a,d,m,S,x){const k=mt(),Z=rr(),ce=n+mn,De=Z.firstCreatePass?function W_(n,r,s,a,d,m,S,x,k){const Z=r.consts,ce=Sc(r,n,4,S||null,ao(Z,x));Yd(r,s,ce,ao(Z,k)),dl(r,ce);const De=ce.tView=ec(2,ce,a,d,m,r.directiveRegistry,r.pipeRegistry,null,r.schemas,Z);return null!==r.queries&&(r.queries.template(r,ce),De.queries=r.queries.embeddedTView(ce)),ce}(ce,Z,k,r,s,a,d,m,S):Z.data[ce];fs(De,!1);const He=k[An].createComment("");Qu(Z,k,He,De),Gi(He,k),qd(k,k[ce]=tm(He,k,He,De)),ds(De)&&ld(Z,k,De),null!=S&&Kd(k,De,x)}function th(n){return Sr(function Ko(){return Nn.lFrame.contextLView}(),mn+n)}function Rp(n,r,s){const a=mt();return ia(a,bo(),r)&&Ya(rr(),Yr(),a,n,r,a[An],s,!1),Rp}function fm(n,r,s,a,d){const S=d?"class":"style";Jd(n,s,r.inputs[S],S,a)}function qh(n,r,s,a){const d=mt(),m=rr(),S=mn+n,x=d[An],k=m.firstCreatePass?function Ly(n,r,s,a,d,m){const S=r.consts,k=Sc(r,n,2,a,ao(S,d));return Yd(r,s,k,ao(S,m)),null!==k.attrs&&dd(k,k.attrs,!1),null!==k.mergedAttrs&&dd(k,k.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,k),k}(S,m,d,r,s,a):m.data[S],Z=d[S]=Vt(x,r,function pn(){return Nn.lFrame.currentNamespace}()),ce=ds(k);return fs(k,!0),qu(x,Z,k),32!=(32&k.flags)&&Qu(m,d,Z,k),0===function $(){return Nn.lFrame.elementDepthCount}()&&Gi(Z,d),function U(){Nn.lFrame.elementDepthCount++}(),ce&&(ld(m,d,k),zd(m,k,d)),null!==a&&Kd(d,k),qh}function Zh(){let n=Ni();Wo()?zo():(n=n.parent,fs(n,!1));const r=n;!function ue(){Nn.lFrame.elementDepthCount--}();const s=rr();return s.firstCreatePass&&(dl(s,n),Ss(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Xr(n){return 0!=(8&n.flags)}(r)&&fm(s,r,mt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function lr(n){return 0!=(16&n.flags)}(r)&&fm(s,r,mt(),r.stylesWithoutHost,!1),Zh}function xp(n,r,s,a){return qh(n,r,s,a),Zh(),xp}function nh(n,r,s){const a=mt(),d=rr(),m=n+mn,S=d.firstCreatePass?function Fy(n,r,s,a,d){const m=r.consts,S=ao(m,a),x=Sc(r,n,8,"ng-container",S);return null!==S&&dd(x,S,!0),Yd(r,s,x,ao(m,d)),null!==r.queries&&r.queries.elementStart(r,x),x}(m,d,a,r,s):d.data[m];fs(S,!0);const x=a[m]=a[An].createComment("");return Qu(d,a,x,S),Gi(x,a),ds(S)&&(ld(d,a,S),zd(d,S,a)),null!=s&&Kd(a,S),nh}function yd(){let n=Ni();const r=rr();return Wo()?zo():(n=n.parent,fs(n,!1)),r.firstCreatePass&&(dl(r,n),Ss(n)&&r.queries.elementEnd(n)),yd}function Xh(n,r,s){return nh(n,r,s),yd(),Xh}function Jh(){return mt()}function rh(n){return!!n&&"function"==typeof n.then}function ef(n){return!!n&&"function"==typeof n.subscribe}const ih=ef;function sh(n,r,s,a){const d=mt(),m=rr(),S=Ni();return function nf(n,r,s,a,d,m,S){const x=ds(a),Z=n.firstCreatePass&&im(n),ce=r[Mr],De=rm(r);let He=!0;if(3&a.type||S){const Jt=Di(a,r),_n=S?S(Jt):Jt,Ln=De.length,yr=S?xr=>S(Lr(xr[a.index])):a.index;let Wt=null;if(!S&&x&&(Wt=function tf(n,r,s,a){const d=n.cleanup;if(null!=d)for(let m=0;m<d.length-1;m+=2){const S=d[m];if(S===s&&d[m+1]===a){const x=r[Xn],k=d[m+2];return x.length>k?x[k]:null}"string"==typeof S&&(m+=2)}return null}(n,r,d,a.index)),null!==Wt)(Wt.__ngLastListenerFn__||Wt).__ngNextListenerFn__=m,Wt.__ngLastListenerFn__=m,He=!1;else{m=Lp(a,r,ce,m,!1);const xr=s.listen(_n,d,m);De.push(m,xr),Z&&Z.push(d,yr,Ln,Ln+1)}}else m=Lp(a,r,ce,m,!1);const lt=a.outputs;let St;if(He&&null!==lt&&(St=lt[d])){const Jt=St.length;if(Jt)for(let _n=0;_n<Jt;_n+=2){const ro=r[St[_n]][St[_n+1]].subscribe(m),Uo=De.length;De.push(m,ro),Z&&Z.push(d,a.index,Uo,-(Uo+1))}}}(m,d,d[An],S,n,r,a),sh}function rf(n,r,s,a){try{return Ei(6,r,s),!1!==s(a)}catch(d){return $h(n,d),!1}finally{Ei(7,r,s)}}function Lp(n,r,s,a,d){return function m(S){if(S===Function)return a;Zd(n.componentOffset>-1?Zi(n.index,r):r);let k=rf(r,s,a,S),Z=m.__ngNextListenerFn__;for(;Z;)k=rf(r,s,Z,S)&&k,Z=Z.__ngNextListenerFn__;return d&&!1===k&&(S.preventDefault(),S.returnValue=!1),k}}function Nc(n=1){return function Ji(n){return(Nn.lFrame.contextLView=function Xs(n,r){for(;n>0;)r=r[Ys],n--;return r}(n,Nn.lFrame.contextLView))[Mr]}(n)}function Fp(n,r){let s=null;const a=function Lf(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(n);for(let d=0;d<r.length;d++){const m=r[d];if("*"!==m){if(null===a?jd(n,m,!0):cy(a,m))return d}else s=d}return s}function pm(n){const r=mt()[Ee][vr];if(!r.projection){const a=r.projection=je(n?n.length:1,null),d=a.slice();let m=r.child;for(;null!==m;){const S=n?Fp(m,n):0;null!==S&&(d[S]?d[S].projectionNext=m:a[S]=m,d[S]=m),m=m.next}}}function gm(n,r=0,s){const a=mt(),d=rr(),m=Sc(d,mn+n,16,null,s||null);null===m.projection&&(m.projection=r),zo(),32!=(32&m.flags)&&function Ad(n,r,s){mh(r[An],0,r,s,uc(n,s,r),Ps(s.parent||r[vr],s,r))}(d,a,m)}function kp(n,r,s){return oh(n,"",r,"",s),kp}function oh(n,r,s,a,d){const m=mt(),S=rc(m,r,s,a);return S!==wr&&Ya(rr(),Yr(),m,n,S,m[An],d,!1),oh}function Vp(n,r){return n<<17|r<<2}function Oi(n){return n>>17&32767}function no(n){return 2|n}function sc(n){return(131068&n)>>2}function Bp(n,r){return-131069&n|r<<2}function af(n){return 1|n}function Uy(n,r,s,a,d){const m=n[s+1],S=null===r;let x=a?Oi(m):sc(m),k=!1;for(;0!==x&&(!1===k||S);){const ce=n[x+1];q_(n[x],r)&&(k=!0,n[x+1]=a?af(ce):no(ce)),x=a?Oi(ce):sc(ce)}k&&(n[s+1]=a?no(m):af(m))}function q_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Fi(n,r)>=0}const oa={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jp(n){return n.substring(oa.key,oa.keyEnd)}function Lc(n){return n.substring(oa.value,oa.valueEnd)}function Vy(n,r){const s=oa.textEnd;return s===r?-1:(r=oa.keyEnd=function Cm(n,r,s){for(;r<s&&n.charCodeAt(r)>32;)r++;return r}(n,oa.key=r,s),vd(n,r,s))}function uf(n,r){const s=oa.textEnd;let a=oa.key=vd(n,r,s);return s===a?-1:(a=oa.keyEnd=function wm(n,r,s){let a;for(;r<s&&(45===(a=n.charCodeAt(r))||95===a||(-33&a)>=65&&(-33&a)<=90||a>=48&&a<=57);)r++;return r}(n,a,s),a=ah(n,a,s),a=oa.value=vd(n,a,s),a=oa.valueEnd=function By(n,r,s){let a=-1,d=-1,m=-1,S=r,x=S;for(;S<s;){const k=n.charCodeAt(S++);if(59===k)return x;34===k||39===k?x=S=Fc(n,k,S,s):r===S-4&&85===m&&82===d&&76===a&&40===k?x=S=Fc(n,41,S,s):k>32&&(x=S),m=d,d=a,a=-33&k}return x}(n,a,s),ah(n,a,s))}function Im(n){oa.key=0,oa.keyEnd=0,oa.value=0,oa.valueEnd=0,oa.textEnd=n.length}function vd(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function ah(n,r,s,a){return(r=vd(n,r,s))<s&&r++,r}function Fc(n,r,s,a){let d=-1,m=s;for(;m<a;){const S=n.charCodeAt(m++);if(S==r&&92!==d)return m;d=92==S&&92===d?0:S}throw new Error}function kc(n,r,s){return Wl(n,r,s,!1),kc}function cf(n,r){return Wl(n,r,null,!0),cf}function Sl(n){zl(zp,jy,n,!1)}function jy(n,r){for(let s=function lf(n){return Im(n),uf(n,vd(n,0,oa.textEnd))}(r);s>=0;s=uf(r,s))zp(n,jp(r),Lc(r))}function Sm(n){zl(Kp,Eu,n,!0)}function Eu(n,r){for(let s=function _d(n){return Im(n),Vy(n,vd(n,0,oa.textEnd))}(r);s>=0;s=Vy(r,s))$r(n,jp(r),!0)}function Wl(n,r,s,a){const d=mt(),m=rr(),S=Ds(2);m.firstUpdatePass&&oc(m,n,S,a),r!==wr&&ia(d,S,r)&&lh(m,m.data[Ii()],d,d[An],n,d[S+1]=function uh(n,r){return null==n||""===n||("string"==typeof r?n+=r:"object"==typeof n&&(n=K(Os(n)))),n}(r,s),a,S)}function zl(n,r,s,a){const d=rr(),m=Ds(2);d.firstUpdatePass&&oc(d,null,m,a);const S=mt();if(s!==wr&&ia(S,m,s)){const x=d.data[Ii()];if(Mm(x,a)&&!Hp(d,m)){let k=a?x.classesWithoutHost:x.stylesWithoutHost;null!==k&&(s=se(k,s||"")),fm(d,x,S,s,a)}else!function Hy(n,r,s,a,d,m,S,x){d===wr&&(d=zt);let k=0,Z=0,ce=0<d.length?d[0]:null,De=0<m.length?m[0]:null;for(;null!==ce||null!==De;){const He=k<d.length?d[k+1]:void 0,lt=Z<m.length?m[Z+1]:void 0;let Jt,St=null;ce===De?(k+=2,Z+=2,He!==lt&&(St=De,Jt=lt)):null===De||null!==ce&&ce<De?(k+=2,St=ce):(Z+=2,St=De,Jt=lt),null!==St&&lh(n,r,s,a,St,Jt,S,x),ce=k<d.length?d[k]:null,De=Z<m.length?m[Z]:null}}(d,x,S,S[An],S[m+1],S[m+1]=function df(n,r,s){if(null==s||""===s)return zt;const a=[],d=Os(s);if(Array.isArray(d))for(let m=0;m<d.length;m++)n(a,d[m],!0);else if("object"==typeof d)for(const m in d)d.hasOwnProperty(m)&&n(a,m,d[m]);else"string"==typeof d&&r(a,d);return a}(n,r,s),a,m)}}function Hp(n,r){return r>=n.expandoStartIndex}function oc(n,r,s,a){const d=n.data;if(null===d[s+1]){const m=d[Ii()],S=Hp(n,s);Mm(m,a)&&null===r&&!S&&(r=!1),r=function bm(n,r,s,a){const d=ls(n);let m=a?r.residualClasses:r.residualStyles;if(null===d)0===(a?r.classBindings:r.styleBindings)&&(s=ac(s=Wp(null,n,r,s,a),r.attrs,a),m=null);else{const S=r.directiveStylingLast;if(-1===S||n[S]!==d)if(s=Wp(d,n,r,s,a),null===m){let k=function Am(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==sc(a))return n[Oi(a)]}(n,r,a);void 0!==k&&Array.isArray(k)&&(k=Wp(null,n,r,k[1],a),k=ac(k,r.attrs,a),function $p(n,r,s,a){n[Oi(s?r.classBindings:r.styleBindings)]=a}(n,r,a,k))}else m=function Gp(n,r,s){let a;const d=r.directiveEnd;for(let m=1+r.directiveStylingLast;m<d;m++)a=ac(a,n[m].hostAttrs,s);return ac(a,r.attrs,s)}(n,r,a)}return void 0!==m&&(a?r.residualClasses=m:r.residualStyles=m),s}(d,m,r,a),function Y_(n,r,s,a,d,m){let S=m?r.classBindings:r.styleBindings,x=Oi(S),k=sc(S);n[a]=s;let ce,Z=!1;if(Array.isArray(s)?(ce=s[1],(null===ce||Fi(s,ce)>0)&&(Z=!0)):ce=s,d)if(0!==k){const He=Oi(n[x+1]);n[a+1]=Vp(He,x),0!==He&&(n[He+1]=Bp(n[He+1],a)),n[x+1]=function ky(n,r){return 131071&n|r<<17}(n[x+1],a)}else n[a+1]=Vp(x,0),0!==x&&(n[x+1]=Bp(n[x+1],a)),x=a;else n[a+1]=Vp(k,0),0===x?x=a:n[k+1]=Bp(n[k+1],a),k=a;Z&&(n[a+1]=no(n[a+1])),Uy(n,ce,a,!0),Uy(n,ce,a,!1),function Q_(n,r,s,a,d){const m=d?n.residualClasses:n.residualStyles;null!=m&&"string"==typeof r&&Fi(m,r)>=0&&(s[a+1]=af(s[a+1]))}(r,ce,n,a,m),S=Vp(x,k),m?r.classBindings=S:r.styleBindings=S}(d,m,r,s,S,a)}}function Wp(n,r,s,a,d){let m=null;const S=s.directiveEnd;let x=s.directiveStylingLast;for(-1===x?x=s.directiveStart:x++;x<S&&(m=r[x],a=ac(a,m.hostAttrs,d),m!==n);)x++;return null!==n&&(s.directiveStylingLast=x),a}function ac(n,r,s){const a=s?1:2;let d=-1;if(null!==r)for(let m=0;m<r.length;m++){const S=r[m];"number"==typeof S?d=S:d===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),$r(n,S,!!s||r[++m]))}return void 0===n?null:n}function zp(n,r,s){$r(n,r,Os(s))}function Kp(n,r,s){const a=String(r);""!==a&&!a.includes(" ")&&$r(n,a,s)}function lh(n,r,s,a,d,m,S,x){if(!(3&r.type))return;const k=n.data,Z=k[x+1],ce=function K_(n){return 1==(1&n)}(Z)?Yp(k,r,s,d,sc(Z),S):void 0;Ed(ce)||(Ed(m)||function z_(n){return 2==(2&n)}(Z)&&(m=Yp(k,null,s,d,x,S)),function Xl(n,r,s,a,d){if(r)d?n.addClass(s,a):n.removeClass(s,a);else{let m=-1===a.indexOf("-")?void 0:Fo.DashCase;null==d?n.removeStyle(s,a,m):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),m|=Fo.Important),n.setStyle(s,a,d,m))}}(a,S,da(Ii(),s),d,m))}function Yp(n,r,s,a,d,m){const S=null===r;let x;for(;d>0;){const k=n[d],Z=Array.isArray(k),ce=Z?k[1]:k,De=null===ce;let He=s[d+1];He===wr&&(He=De?zt:void 0);let lt=De?Hs(He,a):ce===a?He:void 0;if(Z&&!Ed(lt)&&(lt=Hs(k,a)),Ed(lt)&&(x=lt,S))return x;const St=n[d+1];d=S?Oi(St):sc(St)}if(null!==r){let k=m?r.residualClasses:r.residualStyles;null!=k&&(x=Hs(k,a))}return x}function Ed(n){return void 0!==n}function Mm(n,r){return 0!=(n.flags&(r?8:16))}function Dd(n,r=""){const s=mt(),a=rr(),d=n+mn,m=a.firstCreatePass?Sc(a,d,1,r,null):a.data[d],S=s[d]=function Gt(n,r){return n.createText(r)}(s[An],r);Qu(a,s,S,m),fs(m,!1)}function Pm(n){return ku("",n,""),Pm}function ku(n,r,s){const a=mt(),d=rc(a,n,r,s);return d!==wr&&Nu(a,Ii(),d),ku}function Om(n,r,s,a,d){const m=mt(),S=ic(m,n,r,s,a,d);return S!==wr&&Nu(m,Ii(),S),Om}function Rm(n,r,s,a,d,m,S){const x=mt(),k=gd(x,n,r,s,a,d,m,S);return k!==wr&&Nu(x,Ii(),k),Rm}function ch(n,r,s,a,d,m,S,x,k){const Z=mt(),ce=function Oc(n,r,s,a,d,m,S,x,k,Z){const De=Tl(n,ai(),s,d,S,k);return Ds(4),De?r+Ye(s)+a+Ye(d)+m+Ye(S)+x+Ye(k)+Z:wr}(Z,n,r,s,a,d,m,S,x,k);return ce!==wr&&Nu(Z,Ii(),ce),ch}function Id(n,r,s,a,d,m,S,x,k,Z,ce,De,He){const lt=mt(),St=function Fu(n,r,s,a,d,m,S,x,k,Z,ce,De,He,lt){const St=ai();let Jt=Tl(n,St,s,d,S,k);return Jt=Lu(n,St+4,ce,He)||Jt,Ds(6),Jt?r+Ye(s)+a+Ye(d)+m+Ye(S)+x+Ye(k)+Z+Ye(ce)+De+Ye(He)+lt:wr}(lt,n,r,s,a,d,m,S,x,k,Z,ce,De,He);return St!==wr&&Nu(lt,Ii(),St),Id}function Gy(n,r,s){zl($r,Eu,rc(mt(),n,r,s),!0)}function Lm(n,r,s,a,d){zl($r,Eu,ic(mt(),n,r,s,a,d),!0)}function hh(n,r,s,a,d,m,S){zl($r,Eu,gd(mt(),n,r,s,a,d,m,S),!0)}function Qp(n,r,s){Sl(rc(mt(),n,r,s))}function Wm(n,r,s){const a=mt();return ia(a,bo(),r)&&Ya(rr(),Yr(),a,n,r,a[An],s,!0),Wm}function Zp(n,r,s){const a=mt();if(ia(a,bo(),r)){const m=rr(),S=Yr();Ya(m,S,a,n,r,function Hh(n,r,s){return(null===n||sr(n))&&(s=function qi(n){for(;Array.isArray(n);){if("object"==typeof n[mr])return n;n=n[Kr]}return null}(s[r.index])),s[An]}(ls(m.data),S,a),s,!0)}return Zp}const Vc=void 0;var Xy=["en",[["a","p"],["AM","PM"],Vc],[["AM","PM"],Vc,Vc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vc,"{1} 'at' {0}",Vc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Zy(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let fh={};function ph(n){const r=function e_(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=zm(r);if(s)return s;const a=r.split("-")[0];if(s=zm(a),s)return s;if("en"===a)return Xy;throw new Ve(701,!1)}function Jy(n){return ph(n)[er.PluralCase]}function zm(n){return n in fh||(fh[n]=Yn.ng&&Yn.ng.common&&Yn.ng.common.locales&&Yn.ng.common.locales[n]),fh[n]}var er=(()=>((er=er||{})[er.LocaleId=0]="LocaleId",er[er.DayPeriodsFormat=1]="DayPeriodsFormat",er[er.DayPeriodsStandalone=2]="DayPeriodsStandalone",er[er.DaysFormat=3]="DaysFormat",er[er.DaysStandalone=4]="DaysStandalone",er[er.MonthsFormat=5]="MonthsFormat",er[er.MonthsStandalone=6]="MonthsStandalone",er[er.Eras=7]="Eras",er[er.FirstDayOfWeek=8]="FirstDayOfWeek",er[er.WeekendRange=9]="WeekendRange",er[er.DateFormat=10]="DateFormat",er[er.TimeFormat=11]="TimeFormat",er[er.DateTimeFormat=12]="DateTimeFormat",er[er.NumberSymbols=13]="NumberSymbols",er[er.NumberFormats=14]="NumberFormats",er[er.CurrencyCode=15]="CurrencyCode",er[er.CurrencySymbol=16]="CurrencySymbol",er[er.CurrencyName=17]="CurrencyName",er[er.Currencies=18]="Currencies",er[er.Directionality=19]="Directionality",er[er.PluralCase=20]="PluralCase",er[er.ExtraData=21]="ExtraData",er))();const Td="en-US";let eg=Td;function r_(n,r,s,a,d){if(n=ge(n),Array.isArray(n))for(let m=0;m<n.length;m++)r_(n[m],r,s,a,d);else{const m=rr(),S=mt();let x=Au(n)?n:ge(n.provide),k=Zc(n);const Z=Ni(),ce=1048575&Z.providerIndexes,De=Z.directiveStart,He=Z.providerIndexes>>20;if(Au(n)||!n.multi){const lt=new Ce(k,d,xu),St=s_(x,r,d?ce:ce+He,De);-1===St?(ru(Ua(Z,S),m,x),i_(m,n,r.length),r.push(x),Z.directiveStart++,Z.directiveEnd++,d&&(Z.providerIndexes+=1048576),s.push(lt),S.push(lt)):(s[St]=lt,S[St]=lt)}else{const lt=s_(x,r,ce+He,De),St=s_(x,r,ce,ce+He),_n=St>=0&&s[St];if(d&&!_n||!d&&!(lt>=0&&s[lt])){ru(Ua(Z,S),m,x);const Ln=function k0(n,r,s,a,d){const m=new Ce(n,s,xu);return m.multi=[],m.index=r,m.componentProviders=0,yv(m,d,a&&!s),m}(d?F0:L0,s.length,d,a,k);!d&&_n&&(s[St].providerFactory=Ln),i_(m,n,r.length,0),r.push(x),Z.directiveStart++,Z.directiveEnd++,d&&(Z.providerIndexes+=1048576),s.push(Ln),S.push(Ln)}else i_(m,n,lt>-1?lt:St,yv(s[d?St:lt],k,!d&&a));!d&&a&&_n&&s[St].componentProviders++}}}function i_(n,r,s,a){const d=Au(r),m=function Af(n){return!!n.useClass}(r);if(d||m){const k=(m?ge(r.useClass):r).prototype.ngOnDestroy;if(k){const Z=n.destroyHooks||(n.destroyHooks=[]);if(!d&&r.multi){const ce=Z.indexOf(s);-1===ce?Z.push(s,[a,k]):Z[ce+1].push(a,k)}else Z.push(s,k)}}}function yv(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function s_(n,r,s,a){for(let d=s;d<a;d++)if(r[d]===n)return d;return-1}function L0(n,r,s,a){return o_(this.multi,[])}function F0(n,r,s,a){const d=this.multi;let m;if(this.providerFactory){const S=this.providerFactory.componentProviders,x=Js(s,s[kt],this.providerFactory.index,a);m=x.slice(0,S),o_(d,m);for(let k=S;k<x.length;k++)m.push(x[k])}else m=[],o_(d,m);return m}function o_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function _v(n,r=[]){return s=>{s.providersResolver=(a,d)=>function N0(n,r,s){const a=rr();if(a.firstCreatePass){const d=sr(n);r_(s,a.data,a.blueprint,d,!0),r_(r,a.data,a.blueprint,d,!1)}}(a,d?d(n):n,r)}}class pf{}class vv{}function U0(n,r){return new Ev(n,r??null)}class Ev extends pf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Wh(this);const a=zr(r);this._bootstrapComponents=Ou(a.bootstrap),this._r3Injector=jg(r,s,[{provide:pf,useValue:this},{provide:Jc,useValue:this.componentFactoryResolver}],K(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class a_ extends vv{constructor(r){super(),this.moduleType=r}create(r){return new Ev(this.moduleType,r)}}class V0 extends pf{constructor(r,s,a){super(),this.componentFactoryResolver=new Wh(this),this.instance=null;const d=new bh([...r,{provide:pf,useValue:this},{provide:Jc,useValue:this.componentFactoryResolver}],s||Ec(),a,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function l_(n,r,s=null){return new V0(n,r,s).injector}let B0=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=gg(0,s.type),d=a.length>0?l_([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,d)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=hn({token:n,providedIn:"environment",factory:()=>new n(hr(Dc))}),n})();function Dv(n){n.getStandaloneInjector=r=>r.get(B0).getOrCreateStandaloneInjector(n)}function Av(n,r,s){const a=oi()+n,d=mt();return d[a]===wr?vu(d,a,s?r.call(s):r()):function Pc(n,r){return n[r]}(d,a)}function Mv(n,r,s,a){return Rv(mt(),oi(),n,r,s,a)}function Pv(n,r,s,a,d){return xv(mt(),oi(),n,r,s,a,d)}function Ov(n,r,s,a,d,m){return Nv(mt(),oi(),n,r,s,a,d,m)}function rg(n,r){const s=n[r];return s===wr?void 0:s}function Rv(n,r,s,a,d,m){const S=r+s;return ia(n,S,d)?vu(n,S+1,m?a.call(m,d):a(d)):rg(n,S+1)}function xv(n,r,s,a,d,m,S){const x=r+s;return Lu(n,x,d,m)?vu(n,x+2,S?a.call(S,d,m):a(d,m)):rg(n,x+2)}function Nv(n,r,s,a,d,m,S,x){const k=r+s;return Qh(n,k,d,m,S)?vu(n,k+3,x?a.call(x,d,m,S):a(d,m,S)):rg(n,k+3)}function kv(n,r){const s=rr();let a;const d=n+mn;s.firstCreatePass?(a=function tD(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[d]=a,a.onDestroy&&(s.destroyHooks??(s.destroyHooks=[])).push(d,a.onDestroy)):a=s.data[d];const m=a.factory||(a.factory=ks(a.type)),S=Tr(xu);try{const x=uo(!1),k=m();return uo(x),function hm(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,mt(),d,k),k}finally{Tr(S)}}function Uv(n,r,s){const a=n+mn,d=mt(),m=Sr(d,a);return ig(d,a)?Rv(d,oi(),r,m.transform,s,m):m.transform(s)}function Vv(n,r,s,a){const d=n+mn,m=mt(),S=Sr(m,d);return ig(m,d)?xv(m,oi(),r,S.transform,s,a,S):S.transform(s,a)}function Bv(n,r,s,a,d){const m=n+mn,S=mt(),x=Sr(S,m);return ig(S,m)?Nv(S,oi(),r,x.transform,s,a,d,x):x.transform(s,a,d)}function jv(n,r,s,a,d,m){const S=n+mn,x=mt(),k=Sr(x,S);return ig(x,S)?function Lv(n,r,s,a,d,m,S,x,k){const Z=r+s;return Tl(n,Z,d,m,S,x)?vu(n,Z+4,k?a.call(k,d,m,S,x):a(d,m,S,x)):rg(n,Z+4)}(x,oi(),r,k.transform,s,a,d,m,k):k.transform(s,a,d,m)}function Hv(n,r,s){const a=n+mn,d=mt(),m=Sr(d,a);return ig(d,a)?function Fv(n,r,s,a,d,m){let S=r+s,x=!1;for(let k=0;k<d.length;k++)ia(n,S++,d[k])&&(x=!0);return x?vu(n,S,a.apply(m,d)):rg(n,S)}(d,oi(),r,m.transform,s,m):m.transform.apply(m,s)}function ig(n,r){return n[kt].data[r].pure}function c_(n){return r=>{setTimeout(n,void 0,r)}}const lc=class nD extends f.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let d=r,m=s||(()=>null),S=a;if(r&&"object"==typeof r){const k=r;d=k.next?.bind(k),m=k.error?.bind(k),S=k.complete?.bind(k)}this.__isAsync&&(m=c_(m),d&&(d=c_(d)),S&&(S=c_(S)));const x=super.subscribe({next:d,error:m,complete:S});return r instanceof w.w0&&r.add(x),x}};function rD(){return this._results[Symbol.iterator]()}class d_{get changes(){return this._changes||(this._changes=new lc)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=d_.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=rD)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const d=function F(n){return n.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function T(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let d=n[a],m=r[a];if(s&&(d=s(d),m=s(m)),m!==d)return!1}return!0}(a._results,d,s))&&(a._results=d,a.length=d.length,a.last=d[this.length-1],a.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let sg=(()=>{class n{}return n.__NG_ELEMENT_ID__=oD,n})();const iD=sg,sD=class extends iD{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tView,d=$l(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);d[it]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[gt];return null!==S&&(d[gt]=S.createEmbeddedView(a)),qf(a,d,r),new Mc(d)}};function oD(){return Ym(Ni(),mt())}function Ym(n,r){return 4&n.type?new sD(r,n,ed(n,r)):null}let Qm=(()=>{class n{}return n.__NG_ELEMENT_ID__=aD,n})();function aD(){return Wv(Ni(),mt())}const lD=Qm,$v=class extends lD{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return ed(this._hostTNode,this._hostLView)}get injector(){return new Ja(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ol(this._hostTNode,this._hostLView);if(es(r)){const s=Or(r,this._hostLView),a=Wn(r);return new Ja(s[kt].data[a+8],s)}return new Ja(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Gv(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-qr}createEmbeddedView(r,s,a){let d,m;"number"==typeof a?d=a:null!=a&&(d=a.index,m=a.injector);const S=r.createEmbeddedView(s||{},m);return this.insert(S,d),S}createComponent(r,s,a,d,m){const S=r&&!function O(n){return"function"==typeof n}(r);let x;if(S)x=s;else{const De=s||{};x=De.index,a=De.injector,d=De.projectableNodes,m=De.environmentInjector||De.ngModuleRef}const k=S?r:new eh(cn(r)),Z=a||this.parentInjector;if(!m&&null==k.ngModule){const He=(S?Z:this.parentInjector).get(Dc,null);He&&(m=He)}const ce=k.create(Z,d,void 0,m);return this.insert(ce.hostView,x),ce}insert(r,s){const a=r._lView,d=a[kt];if(function Qa(n){return yn(n[fn])}(a)){const ce=this.indexOf(r);if(-1!==ce)this.detach(ce);else{const De=a[fn],He=new $v(De,De[vr],De[fn]);He.detach(He.indexOf(r))}}const m=this._adjustIndex(s),S=this._lContainer;!function Gr(n,r,s,a){const d=qr+a,m=s.length;a>0&&(s[d-1][Sn]=r),a<m-qr?(r[Sn]=s[d],oe(s,qr+a,r)):(s.push(r),r[Sn]=null),r[fn]=s;const S=r[it];null!==S&&s!==S&&function ms(n,r){const s=n[Si];r[Ee]!==r[fn][fn][Ee]&&(n[di]=!0),null===s?n[Si]=[r]:s.push(r)}(S,r);const x=r[gt];null!==x&&x.insertView(n),r[xn]|=64}(d,a,S,m);const x=ta(m,S),k=a[An],Z=Zn(k,S[fr]);return null!==Z&&function pr(n,r,s,a,d,m){a[Kr]=d,a[vr]=r,Wi(n,a,s,1,d,m)}(d,S[vr],k,a,Z,x),r.attachToViewContainerRef(),oe(h_(S),m,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Gv(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Ia(this._lContainer,s);a&&(fe(h_(this._lContainer),s),ki(a[kt],a))}detach(r){const s=this._adjustIndex(r,-1),a=Ia(this._lContainer,s);return a&&null!=fe(h_(this._lContainer),s)?new Mc(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function Gv(n){return n[Pr]}function h_(n){return n[Pr]||(n[Pr]=[])}function Wv(n,r){let s;const a=r[n.index];if(yn(a))s=a;else{let d;if(8&n.type)d=Lr(a);else{const m=r[An];d=m.createComment("");const S=Di(n,r);Eo(m,Zn(m,S),d,function ri(n,r){return n.nextSibling(r)}(m,S),!1)}r[n.index]=s=tm(a,r,d,n),qd(r,s)}return new $v(s,n,r)}class f_{constructor(r){this.queryList=r,this.matches=null}clone(){return new f_(this.queryList)}setDirty(){this.queryList.setDirty()}}class p_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,d=[];for(let m=0;m<a;m++){const S=s.getByIndex(m);d.push(this.queries[S.indexInDeclarationView].clone())}return new p_(d)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==eE(r,s).matches&&this.queries[s].setDirty()}}class zv{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class g_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const d=null!==s?s.length:0,m=this.getByIndex(a).embeddedTView(r,d);m&&(m.indexInDeclarationView=a,null!==s?s.push(m):s=[m])}return null!==s?new g_(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class m_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new m_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let d=0;d<a.length;d++){const m=a[d];this.matchTNodeWithReadOption(r,s,uD(s,m)),this.matchTNodeWithReadOption(r,s,Rl(s,r,m,!1,!1))}else a===sg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Rl(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const d=this.metadata.read;if(null!==d)if(d===_u||d===Qm||d===sg&&4&s.type)this.addMatch(s.index,-2);else{const m=Rl(s,r,d,!1,!1);null!==m&&this.addMatch(s.index,m)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function uD(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function dD(n,r,s,a){return-1===s?function cD(n,r){return 11&n.type?ed(n,r):4&n.type?Ym(n,r):null}(r,n):-2===s?function hD(n,r,s){return s===_u?ed(r,n):s===sg?Ym(r,n):s===Qm?Wv(r,n):void 0}(n,r,a):Js(n,n[kt],s,r)}function Kv(n,r,s,a){const d=r[gt].queries[a];if(null===d.matches){const m=n.data,S=s.matches,x=[];for(let k=0;k<S.length;k+=2){const Z=S[k];x.push(Z<0?null:dD(r,m[Z],S[k+1],s.metadata.read))}d.matches=x}return d.matches}function y_(n,r,s,a){const d=n.queries.getByIndex(s),m=d.matches;if(null!==m){const S=Kv(n,r,d,s);for(let x=0;x<m.length;x+=2){const k=m[x];if(k>0)a.push(S[x/2]);else{const Z=m[x+1],ce=r[-k];for(let De=qr;De<ce.length;De++){const He=ce[De];He[it]===He[fn]&&y_(He[kt],He,Z,a)}if(null!==ce[Si]){const De=ce[Si];for(let He=0;He<De.length;He++){const lt=De[He];y_(lt[kt],lt,Z,a)}}}}}return a}function Yv(n){const r=mt(),s=rr(),a=Ao();Za(a+1);const d=eE(s,a);if(n.dirty&&function Ho(n){return 4==(4&n[xn])}(r)===(2==(2&d.metadata.flags))){if(null===d.matches)n.reset([]);else{const m=d.crossesNgTemplate?y_(s,r,a,[]):Kv(s,r,d,a);n.reset(m,Cg),n.notifyOnChanges()}return!0}return!1}function Qv(n,r,s){const a=rr();a.firstCreatePass&&(Jv(a,new zv(n,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),Xv(a,mt(),r)}function qv(n,r,s,a){const d=rr();if(d.firstCreatePass){const m=Ni();Jv(d,new zv(r,s,a),m.index),function pD(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(d,n),2==(2&s)&&(d.staticContentQueries=!0)}Xv(d,mt(),s)}function Zv(){return function fD(n,r){return n[gt].queries[r].queryList}(mt(),Ao())}function Xv(n,r,s){const a=new d_(4==(4&s));Zg(n,r,a,a.destroy),null===r[gt]&&(r[gt]=new p_),r[gt].queries.push(new f_(a))}function Jv(n,r,s){null===n.queries&&(n.queries=new g_),n.queries.track(new m_(r,s))}function eE(n,r){return n.queries.getByIndex(r)}function tE(n,r){return Ym(n,r)}function __(n){return!!zr(n)}function Zm(...n){}const vE=new Cr("Application Initializer");let Xm=(()=>{class n{constructor(s){this.appInits=s,this.resolve=Zm,this.reject=Zm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,d)=>{this.resolve=a,this.reject=d})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const m=this.appInits[d]();if(rh(m))s.push(m);else if(ih(m)){const S=new Promise((x,k)=>{m.subscribe({complete:x,error:k})});s.push(S)}}Promise.all(s).then(()=>{a()}).catch(d=>{this.reject(d)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(hr(vE,8))},n.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const EE=new Cr("AppId",{providedIn:"root",factory:function DE(){return`${C_()}${C_()}${C_()}`}});function C_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const IE=new Cr("Platform Initializer"),ND=new Cr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),LD=new Cr("AnimationModuleType");let FD=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Jm=new Cr("LocaleId",{providedIn:"root",factory:()=>Jr(Jm,ln.Optional|ln.SkipSelf)||function kD(){return typeof $localize<"u"&&$localize.locale||Td}()}),UD=new Cr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class VD{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let BD=(()=>{class n{compileModuleSync(s){return new a_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),m=Ou(zr(s).declarations).reduce((S,x)=>{const k=cn(x);return k&&S.push(new eh(k)),S},[]);return new VD(a,m)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $D=(()=>Promise.resolve(0))();function w_(n){typeof Zone>"u"?$D.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Du{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lc(!1),this.onMicrotaskEmpty=new lc(!1),this.onStable=new lc(!1),this.onError=new lc(!1),typeof Zone>"u")throw new Ve(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!a&&s,d.shouldCoalesceRunChangeDetection=a,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function GD(){let n=Yn.requestAnimationFrame,r=Yn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function KD(n){const r=()=>{!function zD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Yn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,S_(n),n.isCheckStableRunning=!0,T_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),S_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,d,m,S,x)=>{try{return TE(n),s.invokeTask(d,m,S,x)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||n.shouldCoalesceRunChangeDetection)&&r(),SE(n)}},onInvoke:(s,a,d,m,S,x,k)=>{try{return TE(n),s.invoke(d,m,S,x,k)}finally{n.shouldCoalesceRunChangeDetection&&r(),SE(n)}},onHasTask:(s,a,d,m)=>{s.hasTask(d,m),a===d&&("microTask"==m.change?(n._hasPendingMicrotasks=m.microTask,S_(n),T_(n)):"macroTask"==m.change&&(n.hasPendingMacrotasks=m.macroTask))},onHandleError:(s,a,d,m)=>(s.handleError(d,m),n.runOutsideAngular(()=>n.onError.emit(m)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Du.isInAngularZone())throw new Ve(909,!1)}static assertNotInAngularZone(){if(Du.isInAngularZone())throw new Ve(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,d){const m=this._inner,S=m.scheduleEventTask("NgZoneEvent: "+d,r,WD,Zm,Zm);try{return m.runTask(S,s,a)}finally{m.cancelTask(S)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const WD={};function T_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function S_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function TE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function SE(n){n._nesting--,T_(n)}class YD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lc,this.onMicrotaskEmpty=new lc,this.onStable=new lc,this.onError=new lc}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,d){return r.apply(s,a)}}const bE=new Cr(""),AE=new Cr("");let b_,QD=(()=>{class n{constructor(s,a,d){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,b_||(function qD(n){b_=n}(d),d.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Du.assertNotInAngularZone(),w_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())w_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,d){let m=-1;a&&a>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(S=>S.timeoutId!==m),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:m,updateCb:d})}whenStable(s,a,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,d){return[]}}return n.\u0275fac=function(s){return new(s||n)(hr(Du),hr(ME),hr(AE))},n.\u0275prov=hn({token:n,factory:n.\u0275fac}),n})(),ME=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return b_?.findTestabilityInTree(this,s,a)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Bc=!1;let bd=null;const PE=new Cr("AllowMultipleToken"),A_=new Cr("PlatformDestroyListeners"),OE=new Cr("appBootstrapListener");class JD{constructor(r,s){this.name=r,this.token=s}}function xE(n,r,s=[]){const a=`Platform: ${r}`,d=new Cr(a);return(m=[])=>{let S=M_();if(!S||S.injector.get(PE,!1)){const x=[...s,...m,{provide:d,useValue:!0}];n?n(x):function eI(n){if(bd&&!bd.get(PE,!1))throw new Ve(400,!1);bd=n;const r=n.get(LE);(function RE(n){const r=n.get(IE,null);r&&r.forEach(s=>s())})(n)}(function NE(n=[],r){return Ru.create({name:r,providers:[{provide:Th,useValue:"platform"},{provide:A_,useValue:new Set([()=>bd=null])},...n]})}(x,a))}return function nI(n){const r=M_();if(!r)throw new Ve(401,!1);return r}()}}function M_(){return bd?.get(LE)??null}let LE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const d=function kE(n,r){let s;return s="noop"===n?new YD:("zone.js"===n?void 0:n)||new Du(r),s}(a?.ngZone,function FE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),m=[{provide:Du,useValue:d}];return d.run(()=>{const S=Ru.create({providers:m,parent:this.injector,name:s.moduleType.name}),x=s.create(S),k=x.injector.get(Ud,null);if(!k)throw new Ve(402,!1);return d.runOutsideAngular(()=>{const Z=d.onError.subscribe({next:ce=>{k.handleError(ce)}});x.onDestroy(()=>{ty(this._modules,x),Z.unsubscribe()})}),function UE(n,r,s){try{const a=s();return rh(a)?a.catch(d=>{throw r.runOutsideAngular(()=>n.handleError(d)),d}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(k,d,()=>{const Z=x.injector.get(Xm);return Z.runInitializers(),Z.donePromise.then(()=>(function i(n){Fn(n,"Expected localeId to be defined"),"string"==typeof n&&(eg=n.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Jm,Td)||Td),this._moduleDoBootstrap(x),x))})})}bootstrapModule(s,a=[]){const d=VE({},a);return function ZD(n,r,s){const a=new a_(s);return Promise.resolve(a)}(0,0,s).then(m=>this.bootstrapModuleFactory(m,d))}_moduleDoBootstrap(s){const a=s.injector.get(ey);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(d=>a.bootstrap(d));else{if(!s.instance.ngDoBootstrap)throw new Ve(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ve(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(A_,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(hr(Ru))},n.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function VE(n,r){return Array.isArray(r)?r.reduce(VE,n):{...n,...r}}let ey=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(s,a,d){this._zone=s,this._injector=a,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new te.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),S=new te.y(x=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{Du.assertNotInAngularZone(),w_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const Z=this._zone.onUnstable.subscribe(()=>{Du.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{k.unsubscribe(),Z.unsubscribe()}});this.isStable=(0,H.T)(m,S.pipe((0,X.B)()))}bootstrap(s,a){const d=s instanceof kd;if(!this._injector.get(Xm).done){!d&&ei(s);throw new Ve(405,Bc)}let S;S=d?s:this._injector.get(Jc).resolveComponentFactory(s),this.componentTypes.push(S.componentType);const x=function XD(n){return n.isBoundToModule}(S)?void 0:this._injector.get(pf),Z=S.create(Ru.NULL,[],a||S.selector,x),ce=Z.location.nativeElement,De=Z.injector.get(bE,null);return De?.registerApplication(ce),Z.onDestroy(()=>{this.detachView(Z.hostView),ty(this.components,Z),De?.unregisterApplication(ce)}),this._loadComponent(Z),Z}tick(){if(this._runningTick)throw new Ve(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;ty(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(OE,[]);a.push(...this._bootstrapListeners),a.forEach(d=>d(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>ty(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Ve(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(hr(Du),hr(Dc),hr(Ud))},n.\u0275prov=hn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ty(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}function iI(){return!1}function sI(){}let oI=(()=>{class n{}return n.__NG_ELEMENT_ID__=aI,n})();function aI(n){return function lI(n,r,s){if(Qs(n)&&!s){const a=Zi(n.index,r);return new Mc(a,a)}return 47&n.type?new Mc(r[Ee],r):null}(Ni(),mt(),16==(16&n))}class GE{constructor(){}supports(r){return fd(r)}create(r){return new pI(r)}}const fI=(n,r)=>r;class pI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||fI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,d=0,m=null;for(;s||a;){const S=!a||s&&s.currentIndex<zE(a,d,m)?s:a,x=zE(S,d,m),k=S.currentIndex;if(S===a)d--,a=a._nextRemoved;else if(s=s._next,null==S.previousIndex)d++;else{m||(m=[]);const Z=x-d,ce=k-d;if(Z!=ce){for(let He=0;He<Z;He++){const lt=He<m.length?m[He]:m[He]=0,St=lt+He;ce<=St&&St<Z&&(m[He]=lt+1)}m[S.previousIndex]=ce-Z}}x!==k&&r(S,x,k)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!fd(r))throw new Ve(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let d,m,S,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let x=0;x<this.length;x++)m=r[x],S=this._trackByFn(x,m),null!==s&&Object.is(s.trackById,S)?(a&&(s=this._verifyReinsertion(s,m,S,x)),Object.is(s.item,m)||this._addIdentityChange(s,m)):(s=this._mismatch(s,m,S,x),a=!0),s=s._next}else d=0,function xy(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,x=>{S=this._trackByFn(d,x),null!==s&&Object.is(s.trackById,S)?(a&&(s=this._verifyReinsertion(s,x,S,d)),Object.is(s.item,x)||this._addIdentityChange(s,x)):(s=this._mismatch(s,x,S,d),a=!0),s=s._next,d++}),this.length=d;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,d){let m;return null===r?m=this._itTail:(m=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,m,d)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,d))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,m,d)):r=this._addAfter(new gI(s,a),m,d),r}_verifyReinsertion(r,s,a,d){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==m?r=this._reinsertAfter(m,r._prev,d):r.currentIndex!=d&&(r.currentIndex=d,this._addToMoves(r,d)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const d=r._prevRemoved,m=r._nextRemoved;return null===d?this._removalsHead=m:d._nextRemoved=m,null===m?this._removalsTail=d:m._prevRemoved=d,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const d=null===s?this._itHead:s._next;return r._next=d,r._prev=s,null===d?this._itTail=r:d._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new WE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new WE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class gI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class WE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new mI,this.map.set(s,a)),a.add(r)}get(r,s){const d=this.map.get(r);return d?d.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zE(n,r,s){const a=n.previousIndex;if(null===a)return a;let d=0;return s&&a<s.length&&(d=s[a]),a+r+d}class KE{constructor(){}supports(r){return r instanceof Map||Sp(r)}create(){return new yI}}class yI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Sp(r)))throw new Ve(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,d)=>{if(s&&s.key===d)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const m=this._getOrCreateRecordForKey(d,a);s=this._insertBeforeOrAppend(s,m)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const d=this._records.get(r);this._maybeAddToChanges(d,s);const m=d._prev,S=d._next;return m&&(m._next=S),S&&(S._prev=m),d._next=null,d._prev=null,d}const a=new _I(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class _I{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function YE(){return new N_([new GE])}let N_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const d=a.factories.slice();s=s.concat(d)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||YE()),deps:[[n,new Xo,new va]]}}find(s){const a=this.factories.find(d=>d.supports(s));if(null!=a)return a;throw new Ve(901,!1)}}return n.\u0275prov=hn({token:n,providedIn:"root",factory:YE}),n})();function QE(){return new L_([new KE])}let L_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const d=a.factories.slice();s=s.concat(d)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||QE()),deps:[[n,new Xo,new va]]}}find(s){const a=this.factories.find(d=>d.supports(s));if(a)return a;throw new Ve(901,!1)}}return n.\u0275prov=hn({token:n,providedIn:"root",factory:QE}),n})();const DI=xE(null,"core",[]);let II=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(hr(ey))},n.\u0275mod=rt({type:n}),n.\u0275inj=It({}),n})();function CI(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function TI(n,r){const s=cn(n),a=r.elementInjector||Ec();return new eh(s).create(a,r.projectableNodes,r.hostElement,r.environmentInjector)}},4006:(we,le,I)=>{I.d(le,{CE:()=>qn,Cf:()=>We,EJ:()=>To,F:()=>vr,Fd:()=>ua,Fj:()=>Ke,JJ:()=>cr,JL:()=>ln,JU:()=>K,K7:()=>oo,Kr:()=>jr,Mq:()=>ze,NI:()=>Qi,Oe:()=>Sr,On:()=>Kt,Q7:()=>vs,UX:()=>$o,Wl:()=>q,YN:()=>Fs,_:()=>qr,_Y:()=>mn,a5:()=>Vn,c5:()=>qi,cw:()=>Le,eT:()=>vi,gN:()=>Lt,kI:()=>ke,nD:()=>hs,oH:()=>Qs,qQ:()=>bs,qu:()=>Qa,sg:()=>sr,u:()=>so,u5:()=>Nn,wO:()=>Ei,wV:()=>mr,x0:()=>bi});var f=I(4650),w=I(6895),te=I(457),H=I(4128),X=I(4004);let ie=(()=>{class G{constructor(U,ue){this._renderer=U,this._elementRef=ue,this.onChange=ot=>{},this.onTouched=()=>{}}setProperty(U,ue){this._renderer.setProperty(this._elementRef.nativeElement,U,ue)}registerOnTouched(U){this.onTouched=U}registerOnChange(U){this.onChange=U}setDisabledState(U){this.setProperty("disabled",U)}}return G.\u0275fac=function(U){return new(U||G)(f.Y36(f.Qsj),f.Y36(f.SBq))},G.\u0275dir=f.lG2({type:G}),G})(),ee=(()=>{class G extends ie{}return G.\u0275fac=function(){let $;return function(ue){return($||($=f.n5z(G)))(ue||G)}}(),G.\u0275dir=f.lG2({type:G,features:[f.qOj]}),G})();const K=new f.OlP("NgValueAccessor"),se={provide:K,useExisting:(0,f.Gpc)(()=>q),multi:!0};let q=(()=>{class G extends ee{writeValue(U){this.setProperty("checked",U)}}return G.\u0275fac=function(){let $;return function(ue){return($||($=f.n5z(G)))(ue||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(U,ue){1&U&&f.NdJ("change",function(Qt){return ue.onChange(Qt.target.checked)})("blur",function(){return ue.onTouched()})},features:[f._Bn([se]),f.qOj]}),G})();const de={provide:K,useExisting:(0,f.Gpc)(()=>Ke),multi:!0},Ne=new f.OlP("CompositionEventMode");let Ke=(()=>{class G extends ie{constructor(U,ue,ot){super(U,ue),this._compositionMode=ot,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ge(){const G=(0,w.q)()?(0,w.q)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(U){this.setProperty("value",U??"")}_handleInput(U){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(U)}_compositionStart(){this._composing=!0}_compositionEnd(U){this._composing=!1,this._compositionMode&&this.onChange(U)}}return G.\u0275fac=function(U){return new(U||G)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Ne,8))},G.\u0275dir=f.lG2({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(U,ue){1&U&&f.NdJ("input",function(Qt){return ue._handleInput(Qt.target.value)})("blur",function(){return ue.onTouched()})("compositionstart",function(){return ue._compositionStart()})("compositionend",function(Qt){return ue._compositionEnd(Qt.target.value)})},features:[f._Bn([de]),f.qOj]}),G})();const $e=!1;function Qe(G){return null==G||("string"==typeof G||Array.isArray(G))&&0===G.length}function Ve(G){return null!=G&&"number"==typeof G.length}const We=new f.OlP("NgValidators"),Ye=new f.OlP("NgAsyncValidators"),qe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ke{static min($){return Fe($)}static max($){return Et($)}static required($){return Ct($)}static requiredTrue($){return function Ze(G){return!0===G.value?null:{required:!0}}($)}static email($){return function Nt(G){return Qe(G.value)||qe.test(G.value)?null:{email:!0}}($)}static minLength($){return bt($)}static maxLength($){return Je($)}static pattern($){return Be($)}static nullValidator($){return null}static compose($){return Yt($)}static composeAsync($){return vn($)}}function Fe(G){return $=>{if(Qe($.value)||Qe(G))return null;const U=parseFloat($.value);return!isNaN(U)&&U<G?{min:{min:G,actual:$.value}}:null}}function Et(G){return $=>{if(Qe($.value)||Qe(G))return null;const U=parseFloat($.value);return!isNaN(U)&&U>G?{max:{max:G,actual:$.value}}:null}}function Ct(G){return Qe(G.value)?{required:!0}:null}function bt(G){return $=>Qe($.value)||!Ve($.value)?null:$.value.length<G?{minlength:{requiredLength:G,actualLength:$.value.length}}:null}function Je(G){return $=>Ve($.value)&&$.value.length>G?{maxlength:{requiredLength:G,actualLength:$.value.length}}:null}function Be(G){if(!G)return ct;let $,U;return"string"==typeof G?(U="","^"!==G.charAt(0)&&(U+="^"),U+=G,"$"!==G.charAt(G.length-1)&&(U+="$"),$=new RegExp(U)):(U=G.toString(),$=G),ue=>{if(Qe(ue.value))return null;const ot=ue.value;return $.test(ot)?null:{pattern:{requiredPattern:U,actualValue:ot}}}}function ct(G){return null}function nt(G){return null!=G}function Pt(G){const $=(0,f.QGY)(G)?(0,te.D)(G):G;if($e&&!(0,f.CqO)($)){let U="Expected async validator to return Promise or Observable.";throw"object"==typeof G&&(U+=" Are you using a synchronous validator where an async validator is expected?"),new f.vHH(-1101,U)}return $}function Tt(G){let $={};return G.forEach(U=>{$=null!=U?{...$,...U}:$}),0===Object.keys($).length?null:$}function Ht(G,$){return $.map(U=>U(G))}function an(G){return G.map($=>function ir(G){return!G.validate}($)?$:U=>$.validate(U))}function Yt(G){if(!G)return null;const $=G.filter(nt);return 0==$.length?null:function(U){return Tt(Ht(U,$))}}function Fn(G){return null!=G?Yt(an(G)):null}function vn(G){if(!G)return null;const $=G.filter(nt);return 0==$.length?null:function(U){const ue=Ht(U,$).map(Pt);return(0,H.D)(ue).pipe((0,X.U)(Tt))}}function ur(G){return null!=G?vn(an(G)):null}function Fr(G,$){return null===G?[$]:Array.isArray(G)?[...G,$]:[G,$]}function Mn(G){return G._rawValidators}function hn(G){return G._rawAsyncValidators}function ii(G){return G?Array.isArray(G)?G:[G]:[]}function It(G,$){return Array.isArray(G)?G.includes($):G===$}function ut(G,$){const U=ii($);return ii(G).forEach(ot=>{It(U,ot)||U.push(ot)}),U}function Ue(G,$){return ii($).filter(U=>!It(G,U))}class yt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators($){this._rawValidators=$||[],this._composedValidatorFn=Fn(this._rawValidators)}_setAsyncValidators($){this._rawAsyncValidators=$||[],this._composedAsyncValidatorFn=ur(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy($){this._onDestroyCallbacks.push($)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach($=>$()),this._onDestroyCallbacks=[]}reset($){this.control&&this.control.reset($)}hasError($,U){return!!this.control&&this.control.hasError($,U)}getError($,U){return this.control?this.control.getError($,U):null}}class Lt extends yt{get formDirective(){return null}get path(){return null}}class Vn extends yt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Kn{constructor($){this._cd=$}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let cr=(()=>{class G extends Kn{constructor(U){super(U)}}return G.\u0275fac=function(U){return new(U||G)(f.Y36(Vn,2))},G.\u0275dir=f.lG2({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(U,ue){2&U&&f.ekj("ng-untouched",ue.isUntouched)("ng-touched",ue.isTouched)("ng-pristine",ue.isPristine)("ng-dirty",ue.isDirty)("ng-valid",ue.isValid)("ng-invalid",ue.isInvalid)("ng-pending",ue.isPending)},features:[f.qOj]}),G})(),ln=(()=>{class G extends Kn{constructor(U){super(U)}}return G.\u0275fac=function(U){return new(U||G)(f.Y36(Lt,10))},G.\u0275dir=f.lG2({type:G,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(U,ue){2&U&&f.ekj("ng-untouched",ue.isUntouched)("ng-touched",ue.isTouched)("ng-pristine",ue.isPristine)("ng-dirty",ue.isDirty)("ng-valid",ue.isValid)("ng-invalid",ue.isInvalid)("ng-pending",ue.isPending)("ng-submitted",ue.isSubmitted)},features:[f.qOj]}),G})();function Vr(G,$){return G?`with name: '${$}'`:`at index: ${$}`}const Hn=!1,Yi="VALID",hr="INVALID",Ri="PENDING",Jr="DISABLED";function tt(G){return(pe(G)?G.validators:G)||null}function Oe(G,$){return(pe($)?$.asyncValidators:G)||null}function pe(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}function ve(G,$,U){const ue=G.controls;if(!($?Object.keys(ue):ue).length)throw new f.vHH(1e3,Hn?function ci(G){return`\n    There are no form controls registered with this ${G?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}($):"");if(!ue[U])throw new f.vHH(1001,Hn?function _r(G,$){return`Cannot find form control ${Vr(G,$)}`}($,U):"")}function Te(G,$,U){G._forEachChild((ue,ot)=>{if(void 0===U[ot])throw new f.vHH(1002,Hn?function Vi(G,$){return`Must supply a value for form control ${Vr(G,$)}`}($,ot):"")})}class et{constructor($,U){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators($),this._assignAsyncValidators(U)}get validator(){return this._composedValidatorFn}set validator($){this._rawValidators=this._composedValidatorFn=$}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator($){this._rawAsyncValidators=this._composedAsyncValidatorFn=$}get parent(){return this._parent}get valid(){return this.status===Yi}get invalid(){return this.status===hr}get pending(){return this.status==Ri}get disabled(){return this.status===Jr}get enabled(){return this.status!==Jr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators($){this._assignValidators($)}setAsyncValidators($){this._assignAsyncValidators($)}addValidators($){this.setValidators(ut($,this._rawValidators))}addAsyncValidators($){this.setAsyncValidators(ut($,this._rawAsyncValidators))}removeValidators($){this.setValidators(Ue($,this._rawValidators))}removeAsyncValidators($){this.setAsyncValidators(Ue($,this._rawAsyncValidators))}hasValidator($){return It(this._rawValidators,$)}hasAsyncValidator($){return It(this._rawAsyncValidators,$)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched($={}){this.touched=!0,this._parent&&!$.onlySelf&&this._parent.markAsTouched($)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild($=>$.markAllAsTouched())}markAsUntouched($={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(U=>{U.markAsUntouched({onlySelf:!0})}),this._parent&&!$.onlySelf&&this._parent._updateTouched($)}markAsDirty($={}){this.pristine=!1,this._parent&&!$.onlySelf&&this._parent.markAsDirty($)}markAsPristine($={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(U=>{U.markAsPristine({onlySelf:!0})}),this._parent&&!$.onlySelf&&this._parent._updatePristine($)}markAsPending($={}){this.status=Ri,!1!==$.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!$.onlySelf&&this._parent.markAsPending($)}disable($={}){const U=this._parentMarkedDirty($.onlySelf);this.status=Jr,this.errors=null,this._forEachChild(ue=>{ue.disable({...$,onlySelf:!0})}),this._updateValue(),!1!==$.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...$,skipPristineCheck:U}),this._onDisabledChange.forEach(ue=>ue(!0))}enable($={}){const U=this._parentMarkedDirty($.onlySelf);this.status=Yi,this._forEachChild(ue=>{ue.enable({...$,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:$.emitEvent}),this._updateAncestors({...$,skipPristineCheck:U}),this._onDisabledChange.forEach(ue=>ue(!1))}_updateAncestors($){this._parent&&!$.onlySelf&&(this._parent.updateValueAndValidity($),$.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent($){this._parent=$}getRawValue(){return this.value}updateValueAndValidity($={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yi||this.status===Ri)&&this._runAsyncValidator($.emitEvent)),!1!==$.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!$.onlySelf&&this._parent.updateValueAndValidity($)}_updateTreeValidity($={emitEvent:!0}){this._forEachChild(U=>U._updateTreeValidity($)),this.updateValueAndValidity({onlySelf:!0,emitEvent:$.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Jr:Yi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator($){if(this.asyncValidator){this.status=Ri,this._hasOwnPendingAsyncValidator=!0;const U=Pt(this.asyncValidator(this));this._asyncValidationSubscription=U.subscribe(ue=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ue,{emitEvent:$})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors($,U={}){this.errors=$,this._updateControlsErrors(!1!==U.emitEvent)}get($){let U=$;return null==U||(Array.isArray(U)||(U=U.split(".")),0===U.length)?null:U.reduce((ue,ot)=>ue&&ue._find(ot),this)}getError($,U){const ue=U?this.get(U):this;return ue&&ue.errors?ue.errors[$]:null}hasError($,U){return!!this.getError($,U)}get root(){let $=this;for(;$._parent;)$=$._parent;return $}_updateControlsErrors($){this.status=this._calculateStatus(),$&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors($)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Jr:this.errors?hr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ri)?Ri:this._anyControlsHaveStatus(hr)?hr:Yi}_anyControlsHaveStatus($){return this._anyControls(U=>U.status===$)}_anyControlsDirty(){return this._anyControls($=>$.dirty)}_anyControlsTouched(){return this._anyControls($=>$.touched)}_updatePristine($={}){this.pristine=!this._anyControlsDirty(),this._parent&&!$.onlySelf&&this._parent._updatePristine($)}_updateTouched($={}){this.touched=this._anyControlsTouched(),this._parent&&!$.onlySelf&&this._parent._updateTouched($)}_registerOnCollectionChange($){this._onCollectionChange=$}_setUpdateStrategy($){pe($)&&null!=$.updateOn&&(this._updateOn=$.updateOn)}_parentMarkedDirty($){return!$&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find($){return null}_assignValidators($){this._rawValidators=Array.isArray($)?$.slice():$,this._composedValidatorFn=function Se(G){return Array.isArray(G)?Fn(G):G||null}(this._rawValidators)}_assignAsyncValidators($){this._rawAsyncValidators=Array.isArray($)?$.slice():$,this._composedAsyncValidatorFn=function Ot(G){return Array.isArray(G)?ur(G):G||null}(this._rawAsyncValidators)}}class Le extends et{constructor($,U,ue){super(tt(U),Oe(ue,U)),this.controls=$,this._initObservables(),this._setUpdateStrategy(U),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl($,U){return this.controls[$]?this.controls[$]:(this.controls[$]=U,U.setParent(this),U._registerOnCollectionChange(this._onCollectionChange),U)}addControl($,U,ue={}){this.registerControl($,U),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}removeControl($,U={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),delete this.controls[$],this.updateValueAndValidity({emitEvent:U.emitEvent}),this._onCollectionChange()}setControl($,U,ue={}){this.controls[$]&&this.controls[$]._registerOnCollectionChange(()=>{}),delete this.controls[$],U&&this.registerControl($,U),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}contains($){return this.controls.hasOwnProperty($)&&this.controls[$].enabled}setValue($,U={}){Te(this,!0,$),Object.keys($).forEach(ue=>{ve(this,!0,ue),this.controls[ue].setValue($[ue],{onlySelf:!0,emitEvent:U.emitEvent})}),this.updateValueAndValidity(U)}patchValue($,U={}){null!=$&&(Object.keys($).forEach(ue=>{const ot=this.controls[ue];ot&&ot.patchValue($[ue],{onlySelf:!0,emitEvent:U.emitEvent})}),this.updateValueAndValidity(U))}reset($={},U={}){this._forEachChild((ue,ot)=>{ue.reset($[ot],{onlySelf:!0,emitEvent:U.emitEvent})}),this._updatePristine(U),this._updateTouched(U),this.updateValueAndValidity(U)}getRawValue(){return this._reduceChildren({},($,U,ue)=>($[ue]=U.getRawValue(),$))}_syncPendingControls(){let $=this._reduceChildren(!1,(U,ue)=>!!ue._syncPendingControls()||U);return $&&this.updateValueAndValidity({onlySelf:!0}),$}_forEachChild($){Object.keys(this.controls).forEach(U=>{const ue=this.controls[U];ue&&$(ue,U)})}_setUpControls(){this._forEachChild($=>{$.setParent(this),$._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls($){for(const[U,ue]of Object.entries(this.controls))if(this.contains(U)&&$(ue))return!0;return!1}_reduceValue(){return this._reduceChildren({},(U,ue,ot)=>((ue.enabled||this.disabled)&&(U[ot]=ue.value),U))}_reduceChildren($,U){let ue=$;return this._forEachChild((ot,Qt)=>{ue=U(ue,ot,Qt)}),ue}_allControlsDisabled(){for(const $ of Object.keys(this.controls))if(this.controls[$].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find($){return this.controls.hasOwnProperty($)?this.controls[$]:null}}class Re extends Le{}const he=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Pe}),Pe="always";function Ge(G,$){return[...$.path,G]}function Ft(G,$,U=Pe){Ti(G,$),$.valueAccessor.writeValue(G.value),(G.disabled||"always"===U)&&$.valueAccessor.setDisabledState?.(G.disabled),function rt(G,$){$.valueAccessor.registerOnChange(U=>{G._pendingValue=U,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&Zt(G,$)})}(G,$),function Rn(G,$){const U=(ue,ot)=>{$.valueAccessor.writeValue(ue),ot&&$.viewToModelUpdate(ue)};G.registerOnChange(U),$._registerOnDestroy(()=>{G._unregisterOnChange(U)})}(G,$),function xt(G,$){$.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&Zt(G,$),"submit"!==G.updateOn&&G.markAsTouched()})}(G,$),function Ir(G,$){if($.valueAccessor.setDisabledState){const U=ue=>{$.valueAccessor.setDisabledState(ue)};G.registerOnDisabledChange(U),$._registerOnDestroy(()=>{G._unregisterOnDisabledChange(U)})}}(G,$)}function rn(G,$,U=!0){const ue=()=>{};$.valueAccessor&&($.valueAccessor.registerOnChange(ue),$.valueAccessor.registerOnTouched(ue)),ht(G,$),G&&($._invokeOnDestroyCallbacks(),G._registerOnCollectionChange(()=>{}))}function tr(G,$){G.forEach(U=>{U.registerOnValidatorChange&&U.registerOnValidatorChange($)})}function Ti(G,$){const U=Mn(G);null!==$.validator?G.setValidators(Fr(U,$.validator)):"function"==typeof U&&G.setValidators([U]);const ue=hn(G);null!==$.asyncValidator?G.setAsyncValidators(Fr(ue,$.asyncValidator)):"function"==typeof ue&&G.setAsyncValidators([ue]);const ot=()=>G.updateValueAndValidity();tr($._rawValidators,ot),tr($._rawAsyncValidators,ot)}function ht(G,$){let U=!1;if(null!==G){if(null!==$.validator){const ot=Mn(G);if(Array.isArray(ot)&&ot.length>0){const Qt=ot.filter(Zr=>Zr!==$.validator);Qt.length!==ot.length&&(U=!0,G.setValidators(Qt))}}if(null!==$.asyncValidator){const ot=hn(G);if(Array.isArray(ot)&&ot.length>0){const Qt=ot.filter(Zr=>Zr!==$.asyncValidator);Qt.length!==ot.length&&(U=!0,G.setAsyncValidators(Qt))}}}const ue=()=>{};return tr($._rawValidators,ue),tr($._rawAsyncValidators,ue),U}function Zt(G,$){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),$.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function Gn(G,$){Ti(G,$)}function Ts(G,$){if(!G.hasOwnProperty("model"))return!1;const U=G.model;return!!U.isFirstChange()||!Object.is($,U.currentValue)}function Kr(G,$){G._syncPendingControls(),$.forEach(U=>{const ue=U.control;"submit"===ue.updateOn&&ue._pendingChange&&(U.viewToModelUpdate(ue._pendingValue),ue._pendingChange=!1)})}function kt(G,$){if(!$)return null;let U,ue,ot;return Array.isArray($),$.forEach(Qt=>{Qt.constructor===Ke?U=Qt:function _i(G){return Object.getPrototypeOf(G.constructor)===ee}(Qt)?ue=Qt:ot=Qt}),ot||ue||U||null}const Sn={provide:Lt,useExisting:(0,f.Gpc)(()=>vr)},Cn=(()=>Promise.resolve())();let vr=(()=>{class G extends Lt{constructor(U,ue,ot){super(),this.callSetDisabledState=ot,this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new Le({},Fn(U),ur(ue))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(U){Cn.then(()=>{const ue=this._findContainer(U.path);U.control=ue.registerControl(U.name,U.control),Ft(U.control,U,this.callSetDisabledState),U.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(U)})}getControl(U){return this.form.get(U.path)}removeControl(U){Cn.then(()=>{const ue=this._findContainer(U.path);ue&&ue.removeControl(U.name),this._directives.delete(U)})}addFormGroup(U){Cn.then(()=>{const ue=this._findContainer(U.path),ot=new Le({});Gn(ot,U),ue.registerControl(U.name,ot),ot.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(U){Cn.then(()=>{const ue=this._findContainer(U.path);ue&&ue.removeControl(U.name)})}getFormGroup(U){return this.form.get(U.path)}updateModel(U,ue){Cn.then(()=>{this.form.get(U.path).setValue(ue)})}setValue(U){this.control.setValue(U)}onSubmit(U){return this.submitted=!0,Kr(this.form,this._directives),this.ngSubmit.emit(U),"dialog"===U?.target?.method}onReset(){this.resetForm()}resetForm(U){this.form.reset(U),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(U){return U.pop(),U.length?this.form.get(U):this.form}}return G.\u0275fac=function(U){return new(U||G)(f.Y36(We,10),f.Y36(Ye,10),f.Y36(he,8))},G.\u0275dir=f.lG2({type:G,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(U,ue){1&U&&f.NdJ("submit",function(Qt){return ue.onSubmit(Qt)})("reset",function(){return ue.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([Sn]),f.qOj]}),G})();function Xn(G,$){const U=G.indexOf($);U>-1&&G.splice(U,1)}function Mr(G){return"object"==typeof G&&null!==G&&2===Object.keys(G).length&&"value"in G&&"disabled"in G}const Qi=class extends et{constructor($=null,U,ue){super(tt(U),Oe(ue,U)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState($),this._setUpdateStrategy(U),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pe(U)&&(U.nonNullable||U.initialValueIsDefault)&&(this.defaultValue=Mr($)?$.value:$)}setValue($,U={}){this.value=this._pendingValue=$,this._onChange.length&&!1!==U.emitModelToViewChange&&this._onChange.forEach(ue=>ue(this.value,!1!==U.emitViewToModelChange)),this.updateValueAndValidity(U)}patchValue($,U={}){this.setValue($,U)}reset($=this.defaultValue,U={}){this._applyFormState($),this.markAsPristine(U),this.markAsUntouched(U),this.setValue(this.value,U),this._pendingChange=!1}_updateValue(){}_anyControls($){return!1}_allControlsDisabled(){return this.disabled}registerOnChange($){this._onChange.push($)}_unregisterOnChange($){Xn(this._onChange,$)}registerOnDisabledChange($){this._onDisabledChange.push($)}_unregisterOnDisabledChange($){Xn(this._onDisabledChange,$)}_forEachChild($){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState($){Mr($)?(this.value=this._pendingValue=$.value,$.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=$}};let ar=(()=>{class G extends Lt{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Ge(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return G.\u0275fac=function(){let $;return function(ue){return($||($=f.n5z(G)))(ue||G)}}(),G.\u0275dir=f.lG2({type:G,features:[f.qOj]}),G})();const it={provide:Lt,useExisting:(0,f.Gpc)(()=>ze)};let ze=(()=>{class G extends ar{constructor(U,ue,ot){super(),this._parent=U,this._setValidators(ue),this._setAsyncValidators(ot)}_checkParentType(){}}return G.\u0275fac=function(U){return new(U||G)(f.Y36(Lt,5),f.Y36(We,10),f.Y36(Ye,10))},G.\u0275dir=f.lG2({type:G,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[f._Bn([it]),f.qOj]}),G})();const gt={provide:Vn,useExisting:(0,f.Gpc)(()=>Kt)},$t=(()=>Promise.resolve())();let Kt=(()=>{class G extends Vn{constructor(U,ue,ot,Qt,Zr,mt){super(),this._changeDetectorRef=Zr,this.callSetDisabledState=mt,this.control=new Qi,this._registered=!1,this.update=new f.vpe,this._parent=U,this._setValidators(ue),this._setAsyncValidators(ot),this.valueAccessor=kt(0,Qt)}ngOnChanges(U){if(this._checkForErrors(),!this._registered||"name"in U){if(this._registered&&(this._checkName(),this.formDirective)){const ue=U.name.previousValue;this.formDirective.removeControl({name:ue,path:this._getPath(ue)})}this._setUpControl()}"isDisabled"in U&&this._updateDisabled(U),Ts(U,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(U){this.viewModel=U,this.update.emit(U)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ft(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(U){$t.then(()=>{this.control.setValue(U,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(U){const ue=U.isDisabled.currentValue,ot=0!==ue&&(0,f.D6c)(ue);$t.then(()=>{ot&&!this.control.disabled?this.control.disable():!ot&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(U){return this._parent?Ge(U,this._parent):[U]}}return G.\u0275fac=function(U){return new(U||G)(f.Y36(Lt,9),f.Y36(We,10),f.Y36(Ye,10),f.Y36(K,10),f.Y36(f.sBO,8),f.Y36(he,8))},G.\u0275dir=f.lG2({type:G,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([gt]),f.qOj,f.TTD]}),G})(),mn=(()=>{class G{}return G.\u0275fac=function(U){return new(U||G)},G.\u0275dir=f.lG2({type:G,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),G})();const Un={provide:K,useExisting:(0,f.Gpc)(()=>mr),multi:!0};let mr=(()=>{class G extends ee{writeValue(U){this.setProperty("value",U??"")}registerOnChange(U){this.onChange=ue=>{U(""==ue?null:parseFloat(ue))}}}return G.\u0275fac=function(){let $;return function(ue){return($||($=f.n5z(G)))(ue||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(U,ue){1&U&&f.NdJ("input",function(Qt){return ue.onChange(Qt.target.value)})("blur",function(){return ue.onTouched()})},features:[f._Bn([Un]),f.qOj]}),G})();const di={provide:K,useExisting:(0,f.Gpc)(()=>qr),multi:!0};let Pr=(()=>{class G{}return G.\u0275fac=function(U){return new(U||G)},G.\u0275mod=f.oAB({type:G}),G.\u0275inj=f.cJS({}),G})(),Si=(()=>{class G{constructor(){this._accessors=[]}add(U,ue){this._accessors.push([U,ue])}remove(U){for(let ue=this._accessors.length-1;ue>=0;--ue)if(this._accessors[ue][1]===U)return void this._accessors.splice(ue,1)}select(U){this._accessors.forEach(ue=>{this._isSameGroup(ue,U)&&ue[1]!==U&&ue[1].fireUncheck(U.value)})}_isSameGroup(U,ue){return!!U[0].control&&U[0]._parent===ue._control._parent&&U[1].name===ue.name}}return G.\u0275fac=function(U){return new(U||G)},G.\u0275prov=f.Yz7({token:G,factory:G.\u0275fac,providedIn:Pr}),G})(),qr=(()=>{class G extends ee{constructor(U,ue,ot,Qt){super(U,ue),this._registry=ot,this._injector=Qt,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,f.f3M)(he,{optional:!0})??Pe}ngOnInit(){this._control=this._injector.get(Vn),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(U){this._state=U===this.value,this.setProperty("checked",this._state)}registerOnChange(U){this._fn=U,this.onChange=()=>{U(this.value),this._registry.select(this)}}setDisabledState(U){(this.setDisabledStateFired||U||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",U),this.setDisabledStateFired=!0}fireUncheck(U){this.writeValue(U)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return G.\u0275fac=function(U){return new(U||G)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Si),f.Y36(f.zs3))},G.\u0275dir=f.lG2({type:G,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(U,ue){1&U&&f.NdJ("change",function(){return ue.onChange()})("blur",function(){return ue.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[f._Bn([di]),f.qOj]}),G})();const Ca={provide:K,useExisting:(0,f.Gpc)(()=>vi),multi:!0};let vi=(()=>{class G extends ee{writeValue(U){this.setProperty("value",parseFloat(U))}registerOnChange(U){this.onChange=ue=>{U(""==ue?null:parseFloat(ue))}}}return G.\u0275fac=function(){let $;return function(ue){return($||($=f.n5z(G)))(ue||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(U,ue){1&U&&f.NdJ("change",function(Qt){return ue.onChange(Qt.target.value)})("input",function(Qt){return ue.onChange(Qt.target.value)})("blur",function(){return ue.onTouched()})},features:[f._Bn([Ca]),f.qOj]}),G})();const yn=new f.OlP("NgModelWithFormControlWarning"),Ss={provide:Vn,useExisting:(0,f.Gpc)(()=>Qs)};let Qs=(()=>{class G extends Vn{set isDisabled(U){}constructor(U,ue,ot,Qt,Zr){super(),this._ngModelWarningConfig=Qt,this.callSetDisabledState=Zr,this.update=new f.vpe,this._ngModelWarningSent=!1,this._setValidators(U),this._setAsyncValidators(ue),this.valueAccessor=kt(0,ot)}ngOnChanges(U){if(this._isControlChanged(U)){const ue=U.form.previousValue;ue&&rn(ue,this,!1),Ft(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Ts(U,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&rn(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(U){this.viewModel=U,this.update.emit(U)}_isControlChanged(U){return U.hasOwnProperty("form")}}return G._ngModelWarningSentOnce=!1,G.\u0275fac=function(U){return new(U||G)(f.Y36(We,10),f.Y36(Ye,10),f.Y36(K,10),f.Y36(yn,8),f.Y36(he,8))},G.\u0275dir=f.lG2({type:G,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[f._Bn([Ss]),f.qOj,f.TTD]}),G})();const ds={provide:Lt,useExisting:(0,f.Gpc)(()=>sr)};let sr=(()=>{class G extends Lt{constructor(U,ue,ot){super(),this.callSetDisabledState=ot,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(U),this._setAsyncValidators(ue)}ngOnChanges(U){this._checkFormPresent(),U.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ht(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(U){const ue=this.form.get(U.path);return Ft(ue,U,this.callSetDisabledState),ue.updateValueAndValidity({emitEvent:!1}),this.directives.push(U),ue}getControl(U){return this.form.get(U.path)}removeControl(U){rn(U.control||null,U,!1),function xn(G,$){const U=G.indexOf($);U>-1&&G.splice(U,1)}(this.directives,U)}addFormGroup(U){this._setUpFormContainer(U)}removeFormGroup(U){this._cleanUpFormContainer(U)}getFormGroup(U){return this.form.get(U.path)}addFormArray(U){this._setUpFormContainer(U)}removeFormArray(U){this._cleanUpFormContainer(U)}getFormArray(U){return this.form.get(U.path)}updateModel(U,ue){this.form.get(U.path).setValue(ue)}onSubmit(U){return this.submitted=!0,Kr(this.form,this.directives),this.ngSubmit.emit(U),"dialog"===U?.target?.method}onReset(){this.resetForm()}resetForm(U){this.form.reset(U),this.submitted=!1}_updateDomValue(){this.directives.forEach(U=>{const ue=U.control,ot=this.form.get(U.path);ue!==ot&&(rn(ue||null,U),(G=>G instanceof Qi)(ot)&&(Ft(ot,U,this.callSetDisabledState),U.control=ot))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(U){const ue=this.form.get(U.path);Gn(ue,U),ue.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(U){if(this.form){const ue=this.form.get(U.path);ue&&function cn(G,$){return ht(G,$)}(ue,U)&&ue.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ti(this.form,this),this._oldForm&&ht(this._oldForm,this)}_checkFormPresent(){}}return G.\u0275fac=function(U){return new(U||G)(f.Y36(We,10),f.Y36(Ye,10),f.Y36(he,8))},G.\u0275dir=f.lG2({type:G,selectors:[["","formGroup",""]],hostBindings:function(U,ue){1&U&&f.NdJ("submit",function(Qt){return ue.onSubmit(Qt)})("reset",function(){return ue.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([ds]),f.qOj,f.TTD]}),G})();const Ns={provide:Lt,useExisting:(0,f.Gpc)(()=>bi)};let bi=(()=>{class G extends ar{constructor(U,ue,ot){super(),this._parent=U,this._setValidators(ue),this._setAsyncValidators(ot)}_checkParentType(){io(this._parent)}}return G.\u0275fac=function(U){return new(U||G)(f.Y36(Lt,13),f.Y36(We,10),f.Y36(Ye,10))},G.\u0275dir=f.lG2({type:G,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[f._Bn([Ns]),f.qOj]}),G})();const _s={provide:Lt,useExisting:(0,f.Gpc)(()=>qn)};let qn=(()=>{class G extends Lt{constructor(U,ue,ot){super(),this._parent=U,this._setValidators(ue),this._setAsyncValidators(ot)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Ge(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){io(this._parent)}}return G.\u0275fac=function(U){return new(U||G)(f.Y36(Lt,13),f.Y36(We,10),f.Y36(Ye,10))},G.\u0275dir=f.lG2({type:G,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[f._Bn([_s]),f.qOj]}),G})();function io(G){return!(G instanceof bi||G instanceof sr||G instanceof qn)}const Ls={provide:Vn,useExisting:(0,f.Gpc)(()=>so)};let so=(()=>{class G extends Vn{set isDisabled(U){}constructor(U,ue,ot,Qt,Zr){super(),this._ngModelWarningConfig=Zr,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=U,this._setValidators(ue),this._setAsyncValidators(ot),this.valueAccessor=kt(0,Qt)}ngOnChanges(U){this._added||this._setUpControl(),Ts(U,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(U){this.viewModel=U,this.update.emit(U)}get path(){return Ge(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return G._ngModelWarningSentOnce=!1,G.\u0275fac=function(U){return new(U||G)(f.Y36(Lt,13),f.Y36(We,10),f.Y36(Ye,10),f.Y36(K,10),f.Y36(yn,8))},G.\u0275dir=f.lG2({type:G,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([Ls]),f.qOj,f.TTD]}),G})();const Al={provide:K,useExisting:(0,f.Gpc)(()=>To),multi:!0};function Vo(G,$){return null==G?`${$}`:($&&"object"==typeof $&&($="Object"),`${G}: ${$}`.slice(0,50))}let To=(()=>{class G extends ee{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(U){this._compareWith=U}writeValue(U){this.value=U;const ot=Vo(this._getOptionId(U),U);this.setProperty("value",ot)}registerOnChange(U){this.onChange=ue=>{this.value=this._getOptionValue(ue),U(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(U){for(const ue of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ue),U))return ue;return null}_getOptionValue(U){const ue=function wo(G){return G.split(":")[0]}(U);return this._optionMap.has(ue)?this._optionMap.get(ue):U}}return G.\u0275fac=function(){let $;return function(ue){return($||($=f.n5z(G)))(ue||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(U,ue){1&U&&f.NdJ("change",function(Qt){return ue.onChange(Qt.target.value)})("blur",function(){return ue.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([Al]),f.qOj]}),G})(),Fs=(()=>{class G{constructor(U,ue,ot){this._element=U,this._renderer=ue,this._select=ot,this._select&&(this.id=this._select._registerOption())}set ngValue(U){null!=this._select&&(this._select._optionMap.set(this.id,U),this._setElementValue(Vo(this.id,U)),this._select.writeValue(this._select.value))}set value(U){this._setElementValue(U),this._select&&this._select.writeValue(this._select.value)}_setElementValue(U){this._renderer.setProperty(this._element.nativeElement,"value",U)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return G.\u0275fac=function(U){return new(U||G)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(To,9))},G.\u0275dir=f.lG2({type:G,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),G})();const po={provide:K,useExisting:(0,f.Gpc)(()=>oo),multi:!0};function go(G,$){return null==G?`${$}`:("string"==typeof $&&($=`'${$}'`),$&&"object"==typeof $&&($="Object"),`${G}: ${$}`.slice(0,50))}let oo=(()=>{class G extends ee{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(U){this._compareWith=U}writeValue(U){let ue;if(this.value=U,Array.isArray(U)){const ot=U.map(Qt=>this._getOptionId(Qt));ue=(Qt,Zr)=>{Qt._setSelected(ot.indexOf(Zr.toString())>-1)}}else ue=(ot,Qt)=>{ot._setSelected(!1)};this._optionMap.forEach(ue)}registerOnChange(U){this.onChange=ue=>{const ot=[],Qt=ue.selectedOptions;if(void 0!==Qt){const Zr=Qt;for(let mt=0;mt<Zr.length;mt++){const Go=this._getOptionValue(Zr[mt].value);ot.push(Go)}}else{const Zr=ue.options;for(let mt=0;mt<Zr.length;mt++){const rr=Zr[mt];if(rr.selected){const Go=this._getOptionValue(rr.value);ot.push(Go)}}}this.value=ot,U(ot)}}_registerOption(U){const ue=(this._idCounter++).toString();return this._optionMap.set(ue,U),ue}_getOptionId(U){for(const ue of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ue)._value,U))return ue;return null}_getOptionValue(U){const ue=function ss(G){return G.split(":")[0]}(U);return this._optionMap.has(ue)?this._optionMap.get(ue)._value:U}}return G.\u0275fac=function(){let $;return function(ue){return($||($=f.n5z(G)))(ue||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(U,ue){1&U&&f.NdJ("change",function(Qt){return ue.onChange(Qt.target)})("blur",function(){return ue.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([po]),f.qOj]}),G})(),jr=(()=>{class G{constructor(U,ue,ot){this._element=U,this._renderer=ue,this._select=ot,this._select&&(this.id=this._select._registerOption(this))}set ngValue(U){null!=this._select&&(this._value=U,this._setElementValue(go(this.id,U)),this._select.writeValue(this._select.value))}set value(U){this._select?(this._value=U,this._setElementValue(go(this.id,U)),this._select.writeValue(this._select.value)):this._setElementValue(U)}_setElementValue(U){this._renderer.setProperty(this._element.nativeElement,"value",U)}_setSelected(U){this._renderer.setProperty(this._element.nativeElement,"selected",U)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return G.\u0275fac=function(U){return new(U||G)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(oo,9))},G.\u0275dir=f.lG2({type:G,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),G})();function mo(G){return"number"==typeof G?G:parseInt(G,10)}function Bo(G){return"number"==typeof G?G:parseFloat(G)}let qs=(()=>{class G{constructor(){this._validator=ct}ngOnChanges(U){if(this.inputName in U){const ue=this.normalizeInput(U[this.inputName].currentValue);this._enabled=this.enabled(ue),this._validator=this._enabled?this.createValidator(ue):ct,this._onChange&&this._onChange()}}validate(U){return this._validator(U)}registerOnValidatorChange(U){this._onChange=U}enabled(U){return null!=U}}return G.\u0275fac=function(U){return new(U||G)},G.\u0275dir=f.lG2({type:G,features:[f.TTD]}),G})();const ks={provide:We,useExisting:(0,f.Gpc)(()=>ua),multi:!0};let ua=(()=>{class G extends qs{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=U=>Bo(U),this.createValidator=U=>Et(U)}}return G.\u0275fac=function(){let $;return function(ue){return($||($=f.n5z(G)))(ue||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(U,ue){2&U&&f.uIk("max",ue._enabled?ue.max:null)},inputs:{max:"max"},features:[f._Bn([ks]),f.qOj]}),G})();const os={provide:We,useExisting:(0,f.Gpc)(()=>bs),multi:!0};let bs=(()=>{class G extends qs{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=U=>Bo(U),this.createValidator=U=>Fe(U)}}return G.\u0275fac=function(){let $;return function(ue){return($||($=f.n5z(G)))(ue||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(U,ue){2&U&&f.uIk("min",ue._enabled?ue.min:null)},inputs:{min:"min"},features:[f._Bn([os]),f.qOj]}),G})();const Pn={provide:We,useExisting:(0,f.Gpc)(()=>vs),multi:!0};let vs=(()=>{class G extends qs{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.D6c,this.createValidator=U=>Ct}enabled(U){return U}}return G.\u0275fac=function(){let $;return function(ue){return($||($=f.n5z(G)))(ue||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(U,ue){2&U&&f.uIk("required",ue._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([Pn]),f.qOj]}),G})();const ca={provide:We,useExisting:(0,f.Gpc)(()=>Ei),multi:!0};let Ei=(()=>{class G extends qs{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=U=>mo(U),this.createValidator=U=>bt(U)}}return G.\u0275fac=function(){let $;return function(ue){return($||($=f.n5z(G)))(ue||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(U,ue){2&U&&f.uIk("minlength",ue._enabled?ue.minlength:null)},inputs:{minlength:"minlength"},features:[f._Bn([ca]),f.qOj]}),G})();const yo={provide:We,useExisting:(0,f.Gpc)(()=>hs),multi:!0};let hs=(()=>{class G extends qs{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=U=>mo(U),this.createValidator=U=>Je(U)}}return G.\u0275fac=function(){let $;return function(ue){return($||($=f.n5z(G)))(ue||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(U,ue){2&U&&f.uIk("maxlength",ue._enabled?ue.maxlength:null)},inputs:{maxlength:"maxlength"},features:[f._Bn([yo]),f.qOj]}),G})();const Lr={provide:We,useExisting:(0,f.Gpc)(()=>qi),multi:!0};let qi=(()=>{class G extends qs{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=U=>U,this.createValidator=U=>Be(U)}}return G.\u0275fac=function(){let $;return function(ue){return($||($=f.n5z(G)))(ue||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(U,ue){2&U&&f.uIk("pattern",ue._enabled?ue.pattern:null)},inputs:{pattern:"pattern"},features:[f._Bn([Lr]),f.qOj]}),G})(),jo=(()=>{class G{}return G.\u0275fac=function(U){return new(U||G)},G.\u0275mod=f.oAB({type:G}),G.\u0275inj=f.cJS({imports:[Pr]}),G})();class Sr extends et{constructor($,U,ue){super(tt(U),Oe(ue,U)),this.controls=$,this._initObservables(),this._setUpdateStrategy(U),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at($){return this.controls[this._adjustIndex($)]}push($,U={}){this.controls.push($),this._registerControl($),this.updateValueAndValidity({emitEvent:U.emitEvent}),this._onCollectionChange()}insert($,U,ue={}){this.controls.splice($,0,U),this._registerControl(U),this.updateValueAndValidity({emitEvent:ue.emitEvent})}removeAt($,U={}){let ue=this._adjustIndex($);ue<0&&(ue=0),this.controls[ue]&&this.controls[ue]._registerOnCollectionChange(()=>{}),this.controls.splice(ue,1),this.updateValueAndValidity({emitEvent:U.emitEvent})}setControl($,U,ue={}){let ot=this._adjustIndex($);ot<0&&(ot=0),this.controls[ot]&&this.controls[ot]._registerOnCollectionChange(()=>{}),this.controls.splice(ot,1),U&&(this.controls.splice(ot,0,U),this._registerControl(U)),this.updateValueAndValidity({emitEvent:ue.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue($,U={}){Te(this,!1,$),$.forEach((ue,ot)=>{ve(this,!1,ot),this.at(ot).setValue(ue,{onlySelf:!0,emitEvent:U.emitEvent})}),this.updateValueAndValidity(U)}patchValue($,U={}){null!=$&&($.forEach((ue,ot)=>{this.at(ot)&&this.at(ot).patchValue(ue,{onlySelf:!0,emitEvent:U.emitEvent})}),this.updateValueAndValidity(U))}reset($=[],U={}){this._forEachChild((ue,ot)=>{ue.reset($[ot],{onlySelf:!0,emitEvent:U.emitEvent})}),this._updatePristine(U),this._updateTouched(U),this.updateValueAndValidity(U)}getRawValue(){return this.controls.map($=>$.getRawValue())}clear($={}){this.controls.length<1||(this._forEachChild(U=>U._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:$.emitEvent}))}_adjustIndex($){return $<0?$+this.length:$}_syncPendingControls(){let $=this.controls.reduce((U,ue)=>!!ue._syncPendingControls()||U,!1);return $&&this.updateValueAndValidity({onlySelf:!0}),$}_forEachChild($){this.controls.forEach((U,ue)=>{$(U,ue)})}_updateValue(){this.value=this.controls.filter($=>$.enabled||this.disabled).map($=>$.value)}_anyControls($){return this.controls.some(U=>U.enabled&&$(U))}_setUpControls(){this._forEachChild($=>this._registerControl($))}_allControlsDisabled(){for(const $ of this.controls)if($.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl($){$.setParent(this),$._registerOnCollectionChange(this._onCollectionChange)}_find($){return this.at($)??null}}function Es(G){return!!G&&(void 0!==G.asyncValidators||void 0!==G.validators||void 0!==G.updateOn)}let Qa=(()=>{class G{constructor(){this.useNonNullable=!1}get nonNullable(){const U=new G;return U.useNonNullable=!0,U}group(U,ue=null){const ot=this._reduceControls(U);let Qt={};return Es(ue)?Qt=ue:null!==ue&&(Qt.validators=ue.validator,Qt.asyncValidators=ue.asyncValidator),new Le(ot,Qt)}record(U,ue=null){const ot=this._reduceControls(U);return new Re(ot,ue)}control(U,ue,ot){let Qt={};return this.useNonNullable?(Es(ue)?Qt=ue:(Qt.validators=ue,Qt.asyncValidators=ot),new Qi(U,{...Qt,nonNullable:!0})):new Qi(U,ue,ot)}array(U,ue,ot){const Qt=U.map(Zr=>this._createControl(Zr));return new Sr(Qt,ue,ot)}_reduceControls(U){const ue={};return Object.keys(U).forEach(ot=>{ue[ot]=this._createControl(U[ot])}),ue}_createControl(U){return U instanceof Qi||U instanceof et?U:Array.isArray(U)?this.control(U[0],U.length>1?U[1]:null,U.length>2?U[2]:null):this.control(U)}}return G.\u0275fac=function(U){return new(U||G)},G.\u0275prov=f.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"}),G})(),Nn=(()=>{class G{static withConfig(U){return{ngModule:G,providers:[{provide:he,useValue:U.callSetDisabledState??Pe}]}}}return G.\u0275fac=function(U){return new(U||G)},G.\u0275mod=f.oAB({type:G}),G.\u0275inj=f.cJS({imports:[jo]}),G})(),$o=(()=>{class G{static withConfig(U){return{ngModule:G,providers:[{provide:yn,useValue:U.warnOnNgModelWithFormControl??"always"},{provide:he,useValue:U.callSetDisabledState??Pe}]}}}return G.\u0275fac=function(U){return new(U||G)},G.\u0275mod=f.oAB({type:G}),G.\u0275inj=f.cJS({imports:[jo]}),G})()},1481:(we,le,I)=>{I.d(le,{Dx:()=>dr,H7:()=>et,b2:()=>Qr,h_:()=>Ar,q6:()=>is,se:()=>nt});var f=I(6895),w=I(4650);class te extends f.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class H extends te{static makeCurrent(){(0,f.HT)(new H)}onAndCancel(Ae,he,Pe){return Ae.addEventListener(he,Pe,!1),()=>{Ae.removeEventListener(he,Pe,!1)}}dispatchEvent(Ae,he){Ae.dispatchEvent(he)}remove(Ae){Ae.parentNode&&Ae.parentNode.removeChild(Ae)}createElement(Ae,he){return(he=he||this.getDefaultDocument()).createElement(Ae)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ae){return Ae.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ae){return Ae instanceof DocumentFragment}getGlobalEventTarget(Ae,he){return"window"===he?window:"document"===he?Ae:"body"===he?Ae.body:null}getBaseHref(Ae){const he=function ie(){return X=X||document.querySelector("base"),X?X.getAttribute("href"):null}();return null==he?null:function K(Re){ee=ee||document.createElement("a"),ee.setAttribute("href",Re);const Ae=ee.pathname;return"/"===Ae.charAt(0)?Ae:`/${Ae}`}(he)}resetBaseElement(){X=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ae){return(0,f.Mx)(document.cookie,Ae)}}let ee,X=null;const se=new w.OlP("TRANSITION_ID"),de=[{provide:w.ip1,useFactory:function q(Re,Ae,he){return()=>{he.get(w.CZH).donePromise.then(()=>{const Pe=(0,f.q)(),Ge=Ae.querySelectorAll(`style[ng-transition="${Re}"]`);for(let Ft=0;Ft<Ge.length;Ft++)Pe.remove(Ge[Ft])})}},deps:[se,f.K0,w.zs3],multi:!0}];let Ne=(()=>{class Re{build(){return new XMLHttpRequest}}return Re.\u0275fac=function(he){return new(he||Re)},Re.\u0275prov=w.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const Ke=new w.OlP("EventManagerPlugins");let $e=(()=>{class Re{constructor(he,Pe){this._zone=Pe,this._eventNameToPlugin=new Map,he.forEach(Ge=>{Ge.manager=this}),this._plugins=he.slice().reverse()}addEventListener(he,Pe,Ge){return this._findPluginFor(Pe).addEventListener(he,Pe,Ge)}addGlobalEventListener(he,Pe,Ge){return this._findPluginFor(Pe).addGlobalEventListener(he,Pe,Ge)}getZone(){return this._zone}_findPluginFor(he){const Pe=this._eventNameToPlugin.get(he);if(Pe)return Pe;const Ge=this._plugins;for(let Ft=0;Ft<Ge.length;Ft++){const rn=Ge[Ft];if(rn.supports(he))return this._eventNameToPlugin.set(he,rn),rn}throw new Error(`No event manager plugin found for event ${he}`)}}return Re.\u0275fac=function(he){return new(he||Re)(w.LFG(Ke),w.LFG(w.R0b))},Re.\u0275prov=w.Yz7({token:Re,factory:Re.\u0275fac}),Re})();class Qe{constructor(Ae){this._doc=Ae}addGlobalEventListener(Ae,he,Pe){const Ge=(0,f.q)().getGlobalEventTarget(this._doc,Ae);if(!Ge)throw new Error(`Unsupported event target ${Ge} for event ${he}`);return this.addEventListener(Ge,he,Pe)}}let Ve=(()=>{class Re{constructor(){this.usageCount=new Map}addStyles(he){for(const Pe of he)1===this.changeUsageCount(Pe,1)&&this.onStyleAdded(Pe)}removeStyles(he){for(const Pe of he)0===this.changeUsageCount(Pe,-1)&&this.onStyleRemoved(Pe)}onStyleRemoved(he){}onStyleAdded(he){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(he,Pe){const Ge=this.usageCount;let Ft=Ge.get(he)??0;return Ft+=Pe,Ft>0?Ge.set(he,Ft):Ge.delete(he),Ft}ngOnDestroy(){for(const he of this.getAllStyles())this.onStyleRemoved(he);this.usageCount.clear()}}return Re.\u0275fac=function(he){return new(he||Re)},Re.\u0275prov=w.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),We=(()=>{class Re extends Ve{constructor(he){super(),this.doc=he,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(he){for(const Pe of this.hostNodes)this.addStyleToHost(Pe,he)}onStyleRemoved(he){const Pe=this.styleRef;Pe.get(he)?.forEach(Ft=>Ft.remove()),Pe.delete(he)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(he){this.hostNodes.add(he);for(const Pe of this.getAllStyles())this.addStyleToHost(he,Pe)}removeHost(he){this.hostNodes.delete(he)}addStyleToHost(he,Pe){const Ge=this.doc.createElement("style");Ge.textContent=Pe,he.appendChild(Ge);const Ft=this.styleRef.get(Pe);Ft?Ft.push(Ge):this.styleRef.set(Pe,[Ge])}resetHostNodes(){const he=this.hostNodes;he.clear(),he.add(this.doc.head)}}return Re.\u0275fac=function(he){return new(he||Re)(w.LFG(f.K0))},Re.\u0275prov=w.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const Ye={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qe=/%COMP%/g,Nt=new w.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Be(Re,Ae){return Ae.flat(100).map(he=>he.replace(qe,Re))}function ct(Re){return Ae=>{if("__ngUnwrap__"===Ae)return Re;!1===Re(Ae)&&(Ae.preventDefault(),Ae.returnValue=!1)}}let nt=(()=>{class Re{constructor(he,Pe,Ge,Ft){this.eventManager=he,this.sharedStylesHost=Pe,this.appId=Ge,this.removeStylesOnCompDestory=Ft,this.rendererByCompId=new Map,this.defaultRenderer=new Pt(he)}createRenderer(he,Pe){if(!he||!Pe)return this.defaultRenderer;const Ge=this.getOrCreateRenderer(he,Pe);return Ge instanceof Fn?Ge.applyToHost(he):Ge instanceof Yt&&Ge.applyStyles(),Ge}getOrCreateRenderer(he,Pe){const Ge=this.rendererByCompId;let Ft=Ge.get(Pe.id);if(!Ft){const rn=this.eventManager,tr=this.sharedStylesHost,Ir=this.removeStylesOnCompDestory;switch(Pe.encapsulation){case w.ifc.Emulated:Ft=new Fn(rn,tr,Pe,this.appId,Ir);break;case w.ifc.ShadowDom:return new an(rn,tr,he,Pe);default:Ft=new Yt(rn,tr,Pe,Ir)}Ft.onDestroy=()=>Ge.delete(Pe.id),Ge.set(Pe.id,Ft)}return Ft}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Re.\u0275fac=function(he){return new(he||Re)(w.LFG($e),w.LFG(We),w.LFG(w.AFp),w.LFG(Nt))},Re.\u0275prov=w.Yz7({token:Re,factory:Re.\u0275fac}),Re})();class Pt{constructor(Ae){this.eventManager=Ae,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ae,he){return he?document.createElementNS(Ye[he]||he,Ae):document.createElement(Ae)}createComment(Ae){return document.createComment(Ae)}createText(Ae){return document.createTextNode(Ae)}appendChild(Ae,he){(ir(Ae)?Ae.content:Ae).appendChild(he)}insertBefore(Ae,he,Pe){Ae&&(ir(Ae)?Ae.content:Ae).insertBefore(he,Pe)}removeChild(Ae,he){Ae&&Ae.removeChild(he)}selectRootElement(Ae,he){let Pe="string"==typeof Ae?document.querySelector(Ae):Ae;if(!Pe)throw new Error(`The selector "${Ae}" did not match any elements`);return he||(Pe.textContent=""),Pe}parentNode(Ae){return Ae.parentNode}nextSibling(Ae){return Ae.nextSibling}setAttribute(Ae,he,Pe,Ge){if(Ge){he=Ge+":"+he;const Ft=Ye[Ge];Ft?Ae.setAttributeNS(Ft,he,Pe):Ae.setAttribute(he,Pe)}else Ae.setAttribute(he,Pe)}removeAttribute(Ae,he,Pe){if(Pe){const Ge=Ye[Pe];Ge?Ae.removeAttributeNS(Ge,he):Ae.removeAttribute(`${Pe}:${he}`)}else Ae.removeAttribute(he)}addClass(Ae,he){Ae.classList.add(he)}removeClass(Ae,he){Ae.classList.remove(he)}setStyle(Ae,he,Pe,Ge){Ge&(w.JOm.DashCase|w.JOm.Important)?Ae.style.setProperty(he,Pe,Ge&w.JOm.Important?"important":""):Ae.style[he]=Pe}removeStyle(Ae,he,Pe){Pe&w.JOm.DashCase?Ae.style.removeProperty(he):Ae.style[he]=""}setProperty(Ae,he,Pe){Ae[he]=Pe}setValue(Ae,he){Ae.nodeValue=he}listen(Ae,he,Pe){return"string"==typeof Ae?this.eventManager.addGlobalEventListener(Ae,he,ct(Pe)):this.eventManager.addEventListener(Ae,he,ct(Pe))}}function ir(Re){return"TEMPLATE"===Re.tagName&&void 0!==Re.content}class an extends Pt{constructor(Ae,he,Pe,Ge){super(Ae),this.sharedStylesHost=he,this.hostEl=Pe,this.shadowRoot=Pe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ft=Be(Ge.id,Ge.styles);for(const rn of Ft){const tr=document.createElement("style");tr.textContent=rn,this.shadowRoot.appendChild(tr)}}nodeOrShadowRoot(Ae){return Ae===this.hostEl?this.shadowRoot:Ae}appendChild(Ae,he){return super.appendChild(this.nodeOrShadowRoot(Ae),he)}insertBefore(Ae,he,Pe){return super.insertBefore(this.nodeOrShadowRoot(Ae),he,Pe)}removeChild(Ae,he){return super.removeChild(this.nodeOrShadowRoot(Ae),he)}parentNode(Ae){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ae)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Yt extends Pt{constructor(Ae,he,Pe,Ge,Ft=Pe.id){super(Ae),this.sharedStylesHost=he,this.removeStylesOnCompDestory=Ge,this.rendererUsageCount=0,this.styles=Be(Ft,Pe.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Fn extends Yt{constructor(Ae,he,Pe,Ge,Ft){const rn=Ge+"-"+Pe.id;super(Ae,he,Pe,Ft,rn),this.contentAttr=function bt(Re){return"_ngcontent-%COMP%".replace(qe,Re)}(rn),this.hostAttr=function Je(Re){return"_nghost-%COMP%".replace(qe,Re)}(rn)}applyToHost(Ae){this.applyStyles(),this.setAttribute(Ae,this.hostAttr,"")}createElement(Ae,he){const Pe=super.createElement(Ae,he);return super.setAttribute(Pe,this.contentAttr,""),Pe}}let vn=(()=>{class Re extends Qe{constructor(he){super(he)}supports(he){return!0}addEventListener(he,Pe,Ge){return he.addEventListener(Pe,Ge,!1),()=>this.removeEventListener(he,Pe,Ge)}removeEventListener(he,Pe,Ge){return he.removeEventListener(Pe,Ge)}}return Re.\u0275fac=function(he){return new(he||Re)(w.LFG(f.K0))},Re.\u0275prov=w.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const ur=["alt","control","meta","shift"],Fr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mn={alt:Re=>Re.altKey,control:Re=>Re.ctrlKey,meta:Re=>Re.metaKey,shift:Re=>Re.shiftKey};let hn=(()=>{class Re extends Qe{constructor(he){super(he)}supports(he){return null!=Re.parseEventName(he)}addEventListener(he,Pe,Ge){const Ft=Re.parseEventName(Pe),rn=Re.eventCallback(Ft.fullKey,Ge,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,f.q)().onAndCancel(he,Ft.domEventName,rn))}static parseEventName(he){const Pe=he.toLowerCase().split("."),Ge=Pe.shift();if(0===Pe.length||"keydown"!==Ge&&"keyup"!==Ge)return null;const Ft=Re._normalizeKey(Pe.pop());let rn="",tr=Pe.indexOf("code");if(tr>-1&&(Pe.splice(tr,1),rn="code."),ur.forEach(Ti=>{const ht=Pe.indexOf(Ti);ht>-1&&(Pe.splice(ht,1),rn+=Ti+".")}),rn+=Ft,0!=Pe.length||0===Ft.length)return null;const Ir={};return Ir.domEventName=Ge,Ir.fullKey=rn,Ir}static matchEventFullKeyCode(he,Pe){let Ge=Fr[he.key]||he.key,Ft="";return Pe.indexOf("code.")>-1&&(Ge=he.code,Ft="code."),!(null==Ge||!Ge)&&(Ge=Ge.toLowerCase()," "===Ge?Ge="space":"."===Ge&&(Ge="dot"),ur.forEach(rn=>{rn!==Ge&&(0,Mn[rn])(he)&&(Ft+=rn+".")}),Ft+=Ge,Ft===Pe)}static eventCallback(he,Pe,Ge){return Ft=>{Re.matchEventFullKeyCode(Ft,he)&&Ge.runGuarded(()=>Pe(Ft))}}static _normalizeKey(he){return"esc"===he?"escape":he}}return Re.\u0275fac=function(he){return new(he||Re)(w.LFG(f.K0))},Re.\u0275prov=w.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const is=(0,w.eFA)(w._c5,"browser",[{provide:w.Lbi,useValue:f.bD},{provide:w.g9A,useValue:function Lt(){H.makeCurrent()},multi:!0},{provide:f.K0,useFactory:function Kn(){return(0,w.RDi)(document),document},deps:[]}]),cr=new w.OlP(""),ln=[{provide:w.rWj,useClass:class ge{addToWindow(Ae){w.dqk.getAngularTestability=(Pe,Ge=!0)=>{const Ft=Ae.findTestabilityInTree(Pe,Ge);if(null==Ft)throw new Error("Could not find testability for element.");return Ft},w.dqk.getAllAngularTestabilities=()=>Ae.getAllTestabilities(),w.dqk.getAllAngularRootElements=()=>Ae.getAllRootElements(),w.dqk.frameworkStabilizers||(w.dqk.frameworkStabilizers=[]),w.dqk.frameworkStabilizers.push(Pe=>{const Ge=w.dqk.getAllAngularTestabilities();let Ft=Ge.length,rn=!1;const tr=function(Ir){rn=rn||Ir,Ft--,0==Ft&&Pe(rn)};Ge.forEach(function(Ir){Ir.whenStable(tr)})})}findTestabilityInTree(Ae,he,Pe){return null==he?null:Ae.getTestability(he)??(Pe?(0,f.q)().isShadowRoot(he)?this.findTestabilityInTree(Ae,he.host,!0):this.findTestabilityInTree(Ae,he.parentElement,!0):null)}},deps:[]},{provide:w.lri,useClass:w.dDg,deps:[w.R0b,w.eoX,w.rWj]},{provide:w.dDg,useClass:w.dDg,deps:[w.R0b,w.eoX,w.rWj]}],Ui=[{provide:w.zSh,useValue:"root"},{provide:w.qLn,useFactory:function Vn(){return new w.qLn},deps:[]},{provide:Ke,useClass:vn,multi:!0,deps:[f.K0,w.R0b,w.Lbi]},{provide:Ke,useClass:hn,multi:!0,deps:[f.K0]},{provide:nt,useClass:nt,deps:[$e,We,w.AFp,Nt]},{provide:w.FYo,useExisting:nt},{provide:Ve,useExisting:We},{provide:We,useClass:We,deps:[f.K0]},{provide:$e,useClass:$e,deps:[Ke,w.R0b]},{provide:f.JF,useClass:Ne,deps:[]},[]];let Qr=(()=>{class Re{constructor(he){}static withServerTransition(he){return{ngModule:Re,providers:[{provide:w.AFp,useValue:he.appId},{provide:se,useExisting:w.AFp},de]}}}return Re.\u0275fac=function(he){return new(he||Re)(w.LFG(cr,12))},Re.\u0275mod=w.oAB({type:Re}),Re.\u0275inj=w.cJS({providers:[...Ui,...ln],imports:[f.ez,w.hGG]}),Re})(),Ar=(()=>{class Re{constructor(he){this._doc=he,this._dom=(0,f.q)()}addTag(he,Pe=!1){return he?this._getOrCreateElement(he,Pe):null}addTags(he,Pe=!1){return he?he.reduce((Ge,Ft)=>(Ft&&Ge.push(this._getOrCreateElement(Ft,Pe)),Ge),[]):[]}getTag(he){return he&&this._doc.querySelector(`meta[${he}]`)||null}getTags(he){if(!he)return[];const Pe=this._doc.querySelectorAll(`meta[${he}]`);return Pe?[].slice.call(Pe):[]}updateTag(he,Pe){if(!he)return null;Pe=Pe||this._parseSelector(he);const Ge=this.getTag(Pe);return Ge?this._setMetaElementAttributes(he,Ge):this._getOrCreateElement(he,!0)}removeTag(he){this.removeTagElement(this.getTag(he))}removeTagElement(he){he&&this._dom.remove(he)}_getOrCreateElement(he,Pe=!1){if(!Pe){const rn=this._parseSelector(he),tr=this.getTags(rn).filter(Ir=>this._containsAttributes(he,Ir))[0];if(void 0!==tr)return tr}const Ge=this._dom.createElement("meta");return this._setMetaElementAttributes(he,Ge),this._doc.getElementsByTagName("head")[0].appendChild(Ge),Ge}_setMetaElementAttributes(he,Pe){return Object.keys(he).forEach(Ge=>Pe.setAttribute(this._getMetaKeyMap(Ge),he[Ge])),Pe}_parseSelector(he){const Pe=he.name?"name":"property";return`${Pe}="${he[Pe]}"`}_containsAttributes(he,Pe){return Object.keys(he).every(Ge=>Pe.getAttribute(this._getMetaKeyMap(Ge))===he[Ge])}_getMetaKeyMap(he){return Tn[he]||he}}return Re.\u0275fac=function(he){return new(he||Re)(w.LFG(f.K0))},Re.\u0275prov=w.Yz7({token:Re,factory:function(he){let Pe=null;return Pe=he?new he:function Tr(){return new Ar((0,w.LFG)(f.K0))}(),Pe},providedIn:"root"}),Re})();const Tn={httpEquiv:"http-equiv"};let dr=(()=>{class Re{constructor(he){this._doc=he}getTitle(){return this._doc.title}setTitle(he){this._doc.title=he||""}}return Re.\u0275fac=function(he){return new(he||Re)(w.LFG(f.K0))},Re.\u0275prov=w.Yz7({token:Re,factory:function(he){let Pe=null;return Pe=he?new he:function Yn(){return new dr((0,w.LFG)(f.K0))}(),Pe},providedIn:"root"}),Re})();typeof window<"u"&&window;let et=(()=>{class Re{}return Re.\u0275fac=function(he){return new(he||Re)},Re.\u0275prov=w.Yz7({token:Re,factory:function(he){let Pe=null;return Pe=he?new(he||Re):w.LFG(Rt),Pe},providedIn:"root"}),Re})(),Rt=(()=>{class Re extends et{constructor(he){super(),this._doc=he}sanitize(he,Pe){if(null==Pe)return null;switch(he){case w.q3G.NONE:return Pe;case w.q3G.HTML:return(0,w.qzn)(Pe,"HTML")?(0,w.z3N)(Pe):(0,w.EiD)(this._doc,String(Pe)).toString();case w.q3G.STYLE:return(0,w.qzn)(Pe,"Style")?(0,w.z3N)(Pe):Pe;case w.q3G.SCRIPT:if((0,w.qzn)(Pe,"Script"))return(0,w.z3N)(Pe);throw new Error("unsafe value used in a script context");case w.q3G.URL:return(0,w.qzn)(Pe,"URL")?(0,w.z3N)(Pe):(0,w.mCW)(String(Pe));case w.q3G.RESOURCE_URL:if((0,w.qzn)(Pe,"ResourceURL"))return(0,w.z3N)(Pe);throw new Error(`unsafe value used in a resource URL context (see ${w.JZr})`);default:throw new Error(`Unexpected SecurityContext ${he} (see ${w.JZr})`)}}bypassSecurityTrustHtml(he){return(0,w.JVY)(he)}bypassSecurityTrustStyle(he){return(0,w.L6k)(he)}bypassSecurityTrustScript(he){return(0,w.eBb)(he)}bypassSecurityTrustUrl(he){return(0,w.LAX)(he)}bypassSecurityTrustResourceUrl(he){return(0,w.pB0)(he)}}return Re.\u0275fac=function(he){return new(he||Re)(w.LFG(f.K0))},Re.\u0275prov=w.Yz7({token:Re,factory:function(he){let Pe=null;return Pe=he?new he:function Le(Re){return new Rt(Re.get(f.K0))}(w.LFG(w.zs3)),Pe},providedIn:"root"}),Re})()},4793:(we,le,I)=>{I.d(le,{Bz:()=>Oa,F0:()=>Hi,OD:()=>xn,Od:()=>Ua,Q3:()=>vr,gk:()=>Sn,gz:()=>yn,lC:()=>oo,m2:()=>fn,rH:()=>Ro,wN:()=>Is,yS:()=>Ro});var f=I(4650),w=I(457),te=I(9646),H=I(1135),X=I(6805),ie=I(9841),ee=I(7272),K=I(9770),se=I(9635),q=I(2843),de=I(9751),ge=I(515),Ne=I(4033),Ke=I(7579),$e=I(6895),Qe=I(4004),Ve=I(3900),We=I(5698),Ye=I(8675),qe=I(9300),ke=I(5577),Fe=I(590),Et=I(4351),Ct=I(8505),Ze=I(262),Nt=I(5026),bt=I(3103),Je=I(2529),Be=I(6590),ct=I(2035),nt=I(9718),Pt=I(8746),Tt=I(8343),Ht=I(8189),ir=I(1481);const an="primary",Yt=Symbol("RouteTitle");class Fn{constructor(O){this.params=O||{}}has(O){return Object.prototype.hasOwnProperty.call(this.params,O)}get(O){if(this.has(O)){const T=this.params[O];return Array.isArray(T)?T[0]:T}return null}getAll(O){if(this.has(O)){const T=this.params[O];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function vn(A){return new Fn(A)}function ur(A,O,T){const F=T.path.split("/");if(F.length>A.length||"full"===T.pathMatch&&(O.hasChildren()||F.length<A.length))return null;const W={};for(let oe=0;oe<F.length;oe++){const fe=F[oe],je=A[oe];if(fe.startsWith(":"))W[fe.substring(1)]=je;else if(fe!==je.path)return null}return{consumed:A.slice(0,F.length),posParams:W}}function Mn(A,O){const T=A?Object.keys(A):void 0,F=O?Object.keys(O):void 0;if(!T||!F||T.length!=F.length)return!1;let W;for(let oe=0;oe<T.length;oe++)if(W=T[oe],!hn(A[W],O[W]))return!1;return!0}function hn(A,O){if(Array.isArray(A)&&Array.isArray(O)){if(A.length!==O.length)return!1;const T=[...A].sort(),F=[...O].sort();return T.every((W,oe)=>F[oe]===W)}return A===O}function ii(A){return Array.prototype.concat.apply([],A)}function It(A){return A.length>0?A[A.length-1]:null}function Ue(A,O){for(const T in A)A.hasOwnProperty(T)&&O(A[T],T)}function yt(A){return(0,f.CqO)(A)?A:(0,f.QGY)(A)?(0,w.D)(Promise.resolve(A)):(0,te.of)(A)}const Lt=!1,Vn={exact:function cr(A,O,T){if(!un(A.segments,O.segments)||!Tr(A.segments,O.segments,T)||A.numberOfChildren!==O.numberOfChildren)return!1;for(const F in O.children)if(!A.children[F]||!cr(A.children[F],O.children[F],T))return!1;return!0},subset:Ui},Kn={exact:function is(A,O){return Mn(A,O)},subset:function ln(A,O){return Object.keys(O).length<=Object.keys(A).length&&Object.keys(O).every(T=>hn(A[T],O[T]))},ignored:()=>!0};function kr(A,O,T){return Vn[T.paths](A.root,O.root,T.matrixParams)&&Kn[T.queryParams](A.queryParams,O.queryParams)&&!("exact"===T.fragment&&A.fragment!==O.fragment)}function Ui(A,O,T){return Qr(A,O,O.segments,T)}function Qr(A,O,T,F){if(A.segments.length>T.length){const W=A.segments.slice(0,T.length);return!(!un(W,T)||O.hasChildren()||!Tr(W,T,F))}if(A.segments.length===T.length){if(!un(A.segments,T)||!Tr(A.segments,T,F))return!1;for(const W in O.children)if(!A.children[W]||!Ui(A.children[W],O.children[W],F))return!1;return!0}{const W=T.slice(0,A.segments.length),oe=T.slice(A.segments.length);return!!(un(A.segments,W)&&Tr(A.segments,W,F)&&A.children[an])&&Qr(A.children[an],O,oe,F)}}function Tr(A,O,T){return O.every((F,W)=>Kn[T](A[W].parameters,F.parameters))}class Ar{constructor(O=new Tn([],{}),T={},F=null){this.root=O,this.queryParams=T,this.fragment=F}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vn(this.queryParams)),this._queryParamMap}toString(){return Ur.serialize(this)}}class Tn{constructor(O,T){this.segments=O,this.children=T,this.parent=null,Ue(T,(F,W)=>F.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mi(this)}}class Yn{constructor(O,T){this.path=O,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=vn(this.parameters)),this._parameterMap}toString(){return Ri(this)}}function un(A,O){return A.length===O.length&&A.every((T,F)=>T.path===O[F].path)}let Qn=(()=>{class A{}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:function(){return new yi},providedIn:"root"}),A})();class yi{parse(O){const T=new et(O);return new Ar(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(O){const T=`/${Vr(O.root,!0)}`,F=function tt(A){const O=Object.keys(A).map(T=>{const F=A[T];return Array.isArray(F)?F.map(W=>`${_r(T)}=${_r(W)}`).join("&"):`${_r(T)}=${_r(F)}`}).filter(T=>!!T);return O.length?`?${O.join("&")}`:""}(O.queryParams);return`${T}${F}${"string"==typeof O.fragment?`#${function Vi(A){return encodeURI(A)}(O.fragment)}`:""}`}}const Ur=new yi;function mi(A){return A.segments.map(O=>Ri(O)).join("/")}function Vr(A,O){if(!A.hasChildren())return mi(A);if(O){const T=A.children[an]?Vr(A.children[an],!1):"",F=[];return Ue(A.children,(W,oe)=>{oe!==an&&F.push(`${oe}:${Vr(W,!1)}`)}),F.length>0?`${T}(${F.join("//")})`:T}{const T=function en(A,O){let T=[];return Ue(A.children,(F,W)=>{W===an&&(T=T.concat(O(F,W)))}),Ue(A.children,(F,W)=>{W!==an&&(T=T.concat(O(F,W)))}),T}(A,(F,W)=>W===an?[Vr(A.children[an],!1)]:[`${W}:${Vr(F,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[an]?`${mi(A)}/${T[0]}`:`${mi(A)}/(${T.join("//")})`}}function ci(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _r(A){return ci(A).replace(/%3B/gi,";")}function Hn(A){return ci(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yi(A){return decodeURIComponent(A)}function hr(A){return Yi(A.replace(/\+/g,"%20"))}function Ri(A){return`${Hn(A.path)}${function Jr(A){return Object.keys(A).map(O=>`;${Hn(O)}=${Hn(A[O])}`).join("")}(A.parameters)}`}const Se=/^[^\/()?;=#]+/;function Oe(A){const O=A.match(Se);return O?O[0]:""}const Ot=/^[^=?&#]+/,ve=/^[^&#]+/;class et{constructor(O){this.url=O,this.remaining=O}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tn([],{}):new Tn([],this.parseChildren())}parseQueryParams(){const O={};if(this.consumeOptional("?"))do{this.parseQueryParam(O)}while(this.consumeOptional("&"));return O}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const O=[];for(this.peekStartsWith("(")||O.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),O.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let F={};return this.peekStartsWith("(")&&(F=this.parseParens(!1)),(O.length>0||Object.keys(T).length>0)&&(F[an]=new Tn(O,T)),F}parseSegment(){const O=Oe(this.remaining);if(""===O&&this.peekStartsWith(";"))throw new f.vHH(4009,Lt);return this.capture(O),new Yn(Yi(O),this.parseMatrixParams())}parseMatrixParams(){const O={};for(;this.consumeOptional(";");)this.parseParam(O);return O}parseParam(O){const T=Oe(this.remaining);if(!T)return;this.capture(T);let F="";if(this.consumeOptional("=")){const W=Oe(this.remaining);W&&(F=W,this.capture(F))}O[Yi(T)]=Yi(F)}parseQueryParam(O){const T=function pe(A){const O=A.match(Ot);return O?O[0]:""}(this.remaining);if(!T)return;this.capture(T);let F="";if(this.consumeOptional("=")){const fe=function Te(A){const O=A.match(ve);return O?O[0]:""}(this.remaining);fe&&(F=fe,this.capture(F))}const W=hr(T),oe=hr(F);if(O.hasOwnProperty(W)){let fe=O[W];Array.isArray(fe)||(fe=[fe],O[W]=fe),fe.push(oe)}else O[W]=oe}parseParens(O){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const F=Oe(this.remaining),W=this.remaining[F.length];if("/"!==W&&")"!==W&&";"!==W)throw new f.vHH(4010,Lt);let oe;F.indexOf(":")>-1?(oe=F.slice(0,F.indexOf(":")),this.capture(oe),this.capture(":")):O&&(oe=an);const fe=this.parseChildren();T[oe]=1===Object.keys(fe).length?fe[an]:new Tn([],fe),this.consumeOptional("//")}return T}peekStartsWith(O){return this.remaining.startsWith(O)}consumeOptional(O){return!!this.peekStartsWith(O)&&(this.remaining=this.remaining.substring(O.length),!0)}capture(O){if(!this.consumeOptional(O))throw new f.vHH(4011,Lt)}}function Le(A){return A.segments.length>0?new Tn([],{[an]:A}):A}function Rt(A){const O={};for(const F of Object.keys(A.children)){const oe=Rt(A.children[F]);(oe.segments.length>0||oe.hasChildren())&&(O[F]=oe)}return function zt(A){if(1===A.numberOfChildren&&A.children[an]){const O=A.children[an];return new Tn(A.segments.concat(O.segments),O.children)}return A}(new Tn(A.segments,O))}function Re(A){return A instanceof Ar}const Ae=!1;function Ft(A,O,T,F,W){if(0===T.length)return Ir(O.root,O.root,O.root,F,W);const oe=function rt(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new ht(!0,0,A);let O=0,T=!1;const F=A.reduce((W,oe,fe)=>{if("object"==typeof oe&&null!=oe){if(oe.outlets){const je={};return Ue(oe.outlets,(wt,sn)=>{je[sn]="string"==typeof wt?wt.split("/"):wt}),[...W,{outlets:je}]}if(oe.segmentPath)return[...W,oe.segmentPath]}return"string"!=typeof oe?[...W,oe]:0===fe?(oe.split("/").forEach((je,wt)=>{0==wt&&"."===je||(0==wt&&""===je?T=!0:".."===je?O++:""!=je&&W.push(je))}),W):[...W,oe]},[]);return new ht(T,O,F)}(T);return oe.toRoot()?Ir(O.root,O.root,new Tn([],{}),F,W):function fe(wt){const sn=function Rn(A,O,T,F){if(A.isAbsolute)return new xt(O.root,!0,0);if(-1===F)return new xt(T,T===O.root,0);return function Gn(A,O,T){let F=A,W=O,oe=T;for(;oe>W;){if(oe-=W,F=F.parent,!F)throw new f.vHH(4005,Ae&&"Invalid number of '../'");W=F.segments.length}return new xt(F,!1,W-oe)}(T,F+(rn(A.commands[0])?0:1),A.numberOfDoubleDots)}(oe,O,A.snapshot?._urlSegment,wt),on=sn.processChildren?nr(sn.segmentGroup,sn.index,oe.commands):gr(sn.segmentGroup,sn.index,oe.commands);return Ir(O.root,sn.segmentGroup,on,F,W)}(A.snapshot?._lastPathIndex)}function rn(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function tr(A){return"object"==typeof A&&null!=A&&A.outlets}function Ir(A,O,T,F,W){let fe,oe={};F&&Ue(F,(wt,sn)=>{oe[sn]=Array.isArray(wt)?wt.map(on=>`${on}`):`${wt}`}),fe=A===O?T:Ti(A,O,T);const je=Le(Rt(fe));return new Ar(je,oe,W)}function Ti(A,O,T){const F={};return Ue(A.children,(W,oe)=>{F[oe]=W===O?T:Ti(W,O,T)}),new Tn(A.segments,F)}class ht{constructor(O,T,F){if(this.isAbsolute=O,this.numberOfDoubleDots=T,this.commands=F,O&&F.length>0&&rn(F[0]))throw new f.vHH(4003,Ae&&"Root segment cannot have matrix parameters");const W=F.find(tr);if(W&&W!==It(F))throw new f.vHH(4004,Ae&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xt{constructor(O,T,F){this.segmentGroup=O,this.processChildren=T,this.index=F}}function gr(A,O,T){if(A||(A=new Tn([],{})),0===A.segments.length&&A.hasChildren())return nr(A,O,T);const F=function ei(A,O,T){let F=0,W=O;const oe={match:!1,pathIndex:0,commandIndex:0};for(;W<A.segments.length;){if(F>=T.length)return oe;const fe=A.segments[W],je=T[F];if(tr(je))break;const wt=`${je}`,sn=F<T.length-1?T[F+1]:null;if(W>0&&void 0===wt)break;if(wt&&sn&&"object"==typeof sn&&void 0===sn.outlets){if(!_i(wt,sn,fe))return oe;F+=2}else{if(!_i(wt,{},fe))return oe;F++}W++}return{match:!0,pathIndex:W,commandIndex:F}}(A,O,T),W=T.slice(F.commandIndex);if(F.match&&F.pathIndex<A.segments.length){const oe=new Tn(A.segments.slice(0,F.pathIndex),{});return oe.children[an]=new Tn(A.segments.slice(F.pathIndex),A.children),nr(oe,0,W)}return F.match&&0===W.length?new Tn(A.segments,{}):F.match&&!A.hasChildren()?zr(A,O,T):F.match?nr(A,0,W):zr(A,O,T)}function nr(A,O,T){if(0===T.length)return new Tn(A.segments,{});{const F=function cn(A){return tr(A[0])?A[0].outlets:{[an]:A}}(T),W={};if(!F[an]&&A.children[an]&&1===A.numberOfChildren&&0===A.children[an].segments.length){const oe=nr(A.children[an],O,T);return new Tn(A.segments,oe.children)}return Ue(F,(oe,fe)=>{"string"==typeof oe&&(oe=[oe]),null!==oe&&(W[fe]=gr(A.children[fe],O,oe))}),Ue(A.children,(oe,fe)=>{void 0===F[fe]&&(W[fe]=oe)}),new Tn(A.segments,W)}}function zr(A,O,T){const F=A.segments.slice(0,O);let W=0;for(;W<T.length;){const oe=T[W];if(tr(oe)){const wt=xs(oe.outlets);return new Tn(F,wt)}if(0===W&&rn(T[0])){F.push(new Yn(A.segments[O].path,Ts(T[0]))),W++;continue}const fe=tr(oe)?oe.outlets[an]:`${oe}`,je=W<T.length-1?T[W+1]:null;fe&&je&&rn(je)?(F.push(new Yn(fe,Ts(je))),W+=2):(F.push(new Yn(fe,{})),W++)}return new Tn(F,{})}function xs(A){const O={};return Ue(A,(T,F)=>{"string"==typeof T&&(T=[T]),null!==T&&(O[F]=zr(new Tn([],{}),0,T))}),O}function Ts(A){const O={};return Ue(A,(T,F)=>O[F]=`${T}`),O}function _i(A,O,T){return A==T.path&&Mn(O,T.parameters)}const Kr="imperative";class kt{constructor(O,T){this.id=O,this.url=T}}class xn extends kt{constructor(O,T,F="imperative",W=null){super(O,T),this.type=0,this.navigationTrigger=F,this.restoredState=W}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fn extends kt{constructor(O,T,F){super(O,T),this.urlAfterRedirects=F,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Sn extends kt{constructor(O,T,F,W){super(O,T),this.reason=F,this.code=W,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Cn extends kt{constructor(O,T,F,W){super(O,T),this.reason=F,this.code=W,this.type=16}}class vr extends kt{constructor(O,T,F,W){super(O,T),this.error=F,this.target=W,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Xn extends kt{constructor(O,T,F,W){super(O,T),this.urlAfterRedirects=F,this.state=W,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mr extends kt{constructor(O,T,F,W){super(O,T),this.urlAfterRedirects=F,this.state=W,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qi extends kt{constructor(O,T,F,W,oe){super(O,T),this.urlAfterRedirects=F,this.state=W,this.shouldActivate=oe,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class si extends kt{constructor(O,T,F,W){super(O,T),this.urlAfterRedirects=F,this.state=W,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class An extends kt{constructor(O,T,F,W){super(O,T),this.urlAfterRedirects=F,this.state=W,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ar{constructor(O){this.route=O,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kn{constructor(O){this.route=O,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Br{constructor(O){this.snapshot=O,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ys{constructor(O){this.snapshot=O,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ee{constructor(O){this.snapshot=O,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class it{constructor(O){this.snapshot=O,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ze{constructor(O,T,F){this.routerEvent=O,this.position=T,this.anchor=F,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Kt=(()=>{class A{createUrlTree(T,F,W,oe,fe,je){return Ft(T||F.root,W,oe,fe,je)}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac}),A})(),Un=(()=>{class A{}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:function(O){return Kt.\u0275fac(O)},providedIn:"root"}),A})();class mr{constructor(O){this._root=O}get root(){return this._root.value}parent(O){const T=this.pathFromRoot(O);return T.length>1?T[T.length-2]:null}children(O){const T=di(O,this._root);return T?T.children.map(F=>F.value):[]}firstChild(O){const T=di(O,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(O){const T=fr(O,this._root);return T.length<2?[]:T[T.length-2].children.map(W=>W.value).filter(W=>W!==O)}pathFromRoot(O){return fr(O,this._root).map(T=>T.value)}}function di(A,O){if(A===O.value)return O;for(const T of O.children){const F=di(A,T);if(F)return F}return null}function fr(A,O){if(A===O.value)return[O];for(const T of O.children){const F=fr(A,T);if(F.length)return F.unshift(O),F}return[]}class Pr{constructor(O,T){this.value=O,this.children=T}toString(){return`TreeNode(${this.value})`}}function Si(A){const O={};return A&&A.children.forEach(T=>O[T.value.outlet]=T),O}class qr extends mr{constructor(O,T){super(O),this.snapshot=T,Ns(this,O)}toString(){return this.snapshot.toString()}}function Ca(A,O){const T=function vi(A,O){const fe=new ds([],{},{},"",{},an,O,null,A.root,-1,{});return new sr("",new Pr(fe,[]))}(A,O),F=new H.X([new Yn("",{})]),W=new H.X({}),oe=new H.X({}),fe=new H.X({}),je=new H.X(""),wt=new yn(F,W,fe,je,oe,an,O,T.root);return wt.snapshot=T.root,new qr(new Pr(wt,[]),T)}class yn{constructor(O,T,F,W,oe,fe,je,wt){this.url=O,this.params=T,this.queryParams=F,this.fragment=W,this.data=oe,this.outlet=fe,this.component=je,this.title=this.data?.pipe((0,Qe.U)(sn=>sn[Yt]))??(0,te.of)(void 0),this._futureSnapshot=wt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qe.U)(O=>vn(O)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qe.U)(O=>vn(O)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ss(A,O="emptyOnly"){const T=A.pathFromRoot;let F=0;if("always"!==O)for(F=T.length-1;F>=1;){const W=T[F],oe=T[F-1];if(W.routeConfig&&""===W.routeConfig.path)F--;else{if(oe.component)break;F--}}return function Qs(A){return A.reduce((O,T)=>({params:{...O.params,...T.params},data:{...O.data,...T.data},resolve:{...T.data,...O.resolve,...T.routeConfig?.data,...T._resolvedData}}),{params:{},data:{},resolve:{}})}(T.slice(F))}class ds{get title(){return this.data?.[Yt]}constructor(O,T,F,W,oe,fe,je,wt,sn,on,br){this.url=O,this.params=T,this.queryParams=F,this.fragment=W,this.data=oe,this.outlet=fe,this.component=je,this.routeConfig=wt,this._urlSegment=sn,this._lastPathIndex=on,this._resolve=br}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(F=>F.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class sr extends mr{constructor(O,T){super(T),this.url=O,Ns(this,T)}toString(){return bi(this._root)}}function Ns(A,O){O.value._routerState=A,O.children.forEach(T=>Ns(A,T))}function bi(A){const O=A.children.length>0?` { ${A.children.map(bi).join(", ")} } `:"";return`${A.value}${O}`}function _s(A){if(A.snapshot){const O=A.snapshot,T=A._futureSnapshot;A.snapshot=T,Mn(O.queryParams,T.queryParams)||A.queryParams.next(T.queryParams),O.fragment!==T.fragment&&A.fragment.next(T.fragment),Mn(O.params,T.params)||A.params.next(T.params),function Fr(A,O){if(A.length!==O.length)return!1;for(let T=0;T<A.length;++T)if(!Mn(A[T],O[T]))return!1;return!0}(O.url,T.url)||A.url.next(T.url),Mn(O.data,T.data)||A.data.next(T.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function qn(A,O){const T=Mn(A.params,O.params)&&function dr(A,O){return un(A,O)&&A.every((T,F)=>Mn(T.parameters,O[F].parameters))}(A.url,O.url);return T&&!(!A.parent!=!O.parent)&&(!A.parent||qn(A.parent,O.parent))}function Ls(A,O,T){if(T&&A.shouldReuseRoute(O.value,T.value.snapshot)){const F=T.value;F._futureSnapshot=O.value;const W=function so(A,O,T){return O.children.map(F=>{for(const W of T.children)if(A.shouldReuseRoute(F.value,W.value.snapshot))return Ls(A,F,W);return Ls(A,F)})}(A,O,T);return new Pr(F,W)}{if(A.shouldAttach(O.value)){const oe=A.retrieve(O.value);if(null!==oe){const fe=oe.route;return fe.value._futureSnapshot=O.value,fe.children=O.children.map(je=>Ls(A,je)),fe}}const F=function Al(A){return new yn(new H.X(A.url),new H.X(A.params),new H.X(A.queryParams),new H.X(A.fragment),new H.X(A.data),A.outlet,A.component,A)}(O.value),W=O.children.map(oe=>Ls(A,oe));return new Pr(F,W)}}const Vo="ngNavigationCancelingError";function wo(A,O){const{redirectTo:T,navigationBehaviorOptions:F}=Re(O)?{redirectTo:O,navigationBehaviorOptions:void 0}:O,W=To(!1,0,O);return W.url=T,W.navigationBehaviorOptions=F,W}function To(A,O,T){const F=new Error("NavigationCancelingError: "+(A||""));return F[Vo]=!0,F.cancellationCode=O,T&&(F.url=T),F}function Fs(A){return po(A)&&Re(A.url)}function po(A){return A&&A[Vo]}class go{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ss,this.attachRef=null}}let ss=(()=>{class A{constructor(){this.contexts=new Map}onChildOutletCreated(T,F){const W=this.getOrCreateContext(T);W.outlet=F,this.contexts.set(T,W)}onChildOutletDestroyed(T){const F=this.getContext(T);F&&(F.outlet=null,F.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let F=this.getContext(T);return F||(F=new go,this.contexts.set(T,F)),F}getContext(T){return this.contexts.get(T)||null}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Bi=!1;let oo=(()=>{class A{constructor(){this.activated=null,this._activatedRoute=null,this.name=an,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(ss),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb)}ngOnChanges(T){if(T.name){const{firstChange:F,previousValue:W}=T.name;if(F)return;this.isTrackedInParentContexts(W)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(W)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(T){return this.parentContexts.getContext(T)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const T=this.parentContexts.getContext(this.name);T?.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,Bi);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,Bi);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,Bi);this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,F){this.activated=T,this._activatedRoute=F,this.location.insert(T.hostView),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,F){if(this.isActivated)throw new f.vHH(4013,Bi);this._activatedRoute=T;const W=this.location,fe=T.snapshot.component,je=this.parentContexts.getOrCreateContext(this.name).children,wt=new jr(T,je,W.injector);if(F&&function mo(A){return!!A.resolveComponentFactory}(F)){const sn=F.resolveComponentFactory(fe);this.activated=W.createComponent(sn,W.length,wt)}else this.activated=W.createComponent(fe,{index:W.length,injector:wt,environmentInjector:F??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275dir=f.lG2({type:A,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),A})();class jr{constructor(O,T,F){this.route=O,this.childContexts=T,this.parent=F}get(O,T){return O===yn?this.route:O===ss?this.childContexts:this.parent.get(O,T)}}let Bo=(()=>{class A{}return A.\u0275fac=function(T){return new(T||A)},A.\u0275cmp=f.Xpm({type:A,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(T,F){1&T&&f._UZ(0,"router-outlet")},dependencies:[oo],encapsulation:2}),A})();function qs(A,O){return A.providers&&!A._injector&&(A._injector=(0,f.MMx)(A.providers,O,`Route: ${A.path}`)),A._injector??O}function Hr(A){const O=A.children&&A.children.map(Hr),T=O?{...A,children:O}:{...A};return!T.component&&!T.loadComponent&&(O||T.loadChildren)&&T.outlet&&T.outlet!==an&&(T.component=Bo),T}function xi(A){return A.outlet||an}function ca(A,O){const T=A.filter(F=>xi(F)===O);return T.push(...A.filter(F=>xi(F)!==O)),T}function Ei(A){if(!A)return null;if(A.routeConfig?._injector)return A.routeConfig._injector;for(let O=A.parent;O;O=O.parent){const T=O.routeConfig;if(T?._loadedInjector)return T._loadedInjector;if(T?._injector)return T._injector}return null}class hs{constructor(O,T,F,W){this.routeReuseStrategy=O,this.futureState=T,this.currState=F,this.forwardEvent=W}activate(O){const T=this.futureState._root,F=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,F,O),_s(this.futureState.root),this.activateChildRoutes(T,F,O)}deactivateChildRoutes(O,T,F){const W=Si(T);O.children.forEach(oe=>{const fe=oe.value.outlet;this.deactivateRoutes(oe,W[fe],F),delete W[fe]}),Ue(W,(oe,fe)=>{this.deactivateRouteAndItsChildren(oe,F)})}deactivateRoutes(O,T,F){const W=O.value,oe=T?T.value:null;if(W===oe)if(W.component){const fe=F.getContext(W.outlet);fe&&this.deactivateChildRoutes(O,T,fe.children)}else this.deactivateChildRoutes(O,T,F);else oe&&this.deactivateRouteAndItsChildren(T,F)}deactivateRouteAndItsChildren(O,T){O.value.component&&this.routeReuseStrategy.shouldDetach(O.value.snapshot)?this.detachAndStoreRouteSubtree(O,T):this.deactivateRouteAndOutlet(O,T)}detachAndStoreRouteSubtree(O,T){const F=T.getContext(O.value.outlet),W=F&&O.value.component?F.children:T,oe=Si(O);for(const fe of Object.keys(oe))this.deactivateRouteAndItsChildren(oe[fe],W);if(F&&F.outlet){const fe=F.outlet.detach(),je=F.children.onOutletDeactivated();this.routeReuseStrategy.store(O.value.snapshot,{componentRef:fe,route:O,contexts:je})}}deactivateRouteAndOutlet(O,T){const F=T.getContext(O.value.outlet),W=F&&O.value.component?F.children:T,oe=Si(O);for(const fe of Object.keys(oe))this.deactivateRouteAndItsChildren(oe[fe],W);F&&(F.outlet&&(F.outlet.deactivate(),F.children.onOutletDeactivated()),F.attachRef=null,F.resolver=null,F.route=null)}activateChildRoutes(O,T,F){const W=Si(T);O.children.forEach(oe=>{this.activateRoutes(oe,W[oe.value.outlet],F),this.forwardEvent(new it(oe.value.snapshot))}),O.children.length&&this.forwardEvent(new Ys(O.value.snapshot))}activateRoutes(O,T,F){const W=O.value,oe=T?T.value:null;if(_s(W),W===oe)if(W.component){const fe=F.getOrCreateContext(W.outlet);this.activateChildRoutes(O,T,fe.children)}else this.activateChildRoutes(O,T,F);else if(W.component){const fe=F.getOrCreateContext(W.outlet);if(this.routeReuseStrategy.shouldAttach(W.snapshot)){const je=this.routeReuseStrategy.retrieve(W.snapshot);this.routeReuseStrategy.store(W.snapshot,null),fe.children.onOutletReAttached(je.contexts),fe.attachRef=je.componentRef,fe.route=je.route.value,fe.outlet&&fe.outlet.attach(je.componentRef,je.route.value),_s(je.route.value),this.activateChildRoutes(O,null,fe.children)}else{const je=Ei(W.snapshot),wt=je?.get(f._Vd)??null;fe.attachRef=null,fe.route=W,fe.resolver=wt,fe.injector=je,fe.outlet&&fe.outlet.activateWith(W,fe.injector),this.activateChildRoutes(O,null,fe.children)}}else this.activateChildRoutes(O,null,F)}}class Lr{constructor(O){this.path=O,this.route=this.path[this.path.length-1]}}class qi{constructor(O,T){this.component=O,this.route=T}}function da(A,O,T){const F=A._root;return jo(F,O?O._root:null,T,[F.value])}function as(A,O){const T=Symbol(),F=O.get(A,T);return F===T?"function"!=typeof A||(0,f.Z0I)(A)?O.get(A):A:F}function jo(A,O,T,F,W={canDeactivateChecks:[],canActivateChecks:[]}){const oe=Si(O);return A.children.forEach(fe=>{(function Sr(A,O,T,F,W={canDeactivateChecks:[],canActivateChecks:[]}){const oe=A.value,fe=O?O.value:null,je=T?T.getContext(A.value.outlet):null;if(fe&&oe.routeConfig===fe.routeConfig){const wt=function Zi(A,O,T){if("function"==typeof T)return T(A,O);switch(T){case"pathParamsChange":return!un(A.url,O.url);case"pathParamsOrQueryParamsChange":return!un(A.url,O.url)||!Mn(A.queryParams,O.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qn(A,O)||!Mn(A.queryParams,O.queryParams);default:return!qn(A,O)}}(fe,oe,oe.routeConfig.runGuardsAndResolvers);wt?W.canActivateChecks.push(new Lr(F)):(oe.data=fe.data,oe._resolvedData=fe._resolvedData),jo(A,O,oe.component?je?je.children:null:T,F,W),wt&&je&&je.outlet&&je.outlet.isActivated&&W.canDeactivateChecks.push(new qi(je.outlet.component,fe))}else fe&&Ho(O,je,W),W.canActivateChecks.push(new Lr(F)),jo(A,null,oe.component?je?je.children:null:T,F,W)})(fe,oe[fe.value.outlet],T,F.concat([fe.value]),W),delete oe[fe.value.outlet]}),Ue(oe,(fe,je)=>Ho(fe,T.getContext(je),W)),W}function Ho(A,O,T){const F=Si(A),W=A.value;Ue(F,(oe,fe)=>{Ho(oe,W.component?O?O.children.getContext(fe):null:O,T)}),T.canDeactivateChecks.push(new qi(W.component&&O&&O.outlet&&O.outlet.isActivated?O.outlet.component:null,W))}function Es(A){return"function"==typeof A}function U(A){return A instanceof X.K||"EmptyError"===A?.name}const ue=Symbol("INITIAL_VALUE");function ot(){return(0,Ve.w)(A=>(0,ie.a)(A.map(O=>O.pipe((0,We.q)(1),(0,Ye.O)(ue)))).pipe((0,Qe.U)(O=>{for(const T of O)if(!0!==T){if(T===ue)return ue;if(!1===T||T instanceof Ar)return T}return!0}),(0,qe.h)(O=>O!==ue),(0,We.q)(1)))}function fs(A){return(0,se.z)((0,Ct.b)(O=>{if(Re(O))throw wo(0,O)}),(0,Qe.U)(O=>!0===O))}const zo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ko(A,O,T,F,W){const oe=_o(A,O,T);return oe.matched?function Wo(A,O,T,F){const W=O.canMatch;if(!W||0===W.length)return(0,te.of)(!0);const oe=W.map(fe=>{const je=as(fe,A);return yt(function $o(A){return A&&Es(A.canMatch)}(je)?je.canMatch(O,T):A.runInContext(()=>je(O,T)))});return(0,te.of)(oe).pipe(ot(),fs())}(F=qs(O,F),O,T).pipe((0,Qe.U)(fe=>!0===fe?oe:{...zo})):(0,te.of)(oe)}function _o(A,O,T){if(""===O.path)return"full"===O.pathMatch&&(A.hasChildren()||T.length>0)?{...zo}:{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const W=(O.matcher||ur)(T,A,O);if(!W)return{...zo};const oe={};Ue(W.posParams,(je,wt)=>{oe[wt]=je.path});const fe=W.consumed.length>0?{...oe,...W.consumed[W.consumed.length-1].parameters}:oe;return{matched:!0,consumedSegments:W.consumed,remainingSegments:T.slice(W.consumed.length),parameters:fe,positionalParamSegments:W.posParams??{}}}function hi(A,O,T,F){if(T.length>0&&function Sa(A,O,T){return T.some(F=>Ds(A,O,F)&&xi(F)!==an)}(A,T,F)){const oe=new Tn(O,function ai(A,O,T,F){const W={};W[an]=F,F._sourceSegment=A,F._segmentIndexShift=O.length;for(const oe of T)if(""===oe.path&&xi(oe)!==an){const fe=new Tn([],{});fe._sourceSegment=A,fe._segmentIndexShift=O.length,W[xi(oe)]=fe}return W}(A,O,F,new Tn(T,A.children)));return oe._sourceSegment=A,oe._segmentIndexShift=O.length,{segmentGroup:oe,slicedSegments:[]}}if(0===T.length&&function bo(A,O,T){return T.some(F=>Ds(A,O,F))}(A,T,F)){const oe=new Tn(A.segments,function oi(A,O,T,F,W){const oe={};for(const fe of F)if(Ds(A,T,fe)&&!W[xi(fe)]){const je=new Tn([],{});je._sourceSegment=A,je._segmentIndexShift=O.length,oe[xi(fe)]=je}return{...W,...oe}}(A,O,T,F,A.children));return oe._sourceSegment=A,oe._segmentIndexShift=O.length,{segmentGroup:oe,slicedSegments:T}}const W=new Tn(A.segments,A.children);return W._sourceSegment=A,W._segmentIndexShift=O.length,{segmentGroup:W,slicedSegments:T}}function Ds(A,O,T){return(!(A.hasChildren()||O.length>0)||"full"!==T.pathMatch)&&""===T.path}function qa(A,O,T,F){return!!(xi(A)===F||F!==an&&Ds(O,T,A))&&("**"===A.path||_o(O,A,T).matched)}function lo(A,O,T){return 0===O.length&&!A.children[T]}const ji=!1;class Yo{constructor(O){this.segmentGroup=O||null}}class Us{constructor(O){this.urlTree=O}}function ls(A){return(0,q._)(new Yo(A))}function Ao(A){return(0,q._)(new Us(A))}class Zs{constructor(O,T,F,W,oe){this.injector=O,this.configLoader=T,this.urlSerializer=F,this.urlTree=W,this.config=oe,this.allowRedirects=!0}apply(){const O=hi(this.urlTree.root,[],[],this.config).segmentGroup,T=new Tn(O.segments,O.children);return this.expandSegmentGroup(this.injector,this.config,T,an).pipe((0,Qe.U)(oe=>this.createUrlTree(Rt(oe),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Ze.K)(oe=>{if(oe instanceof Us)return this.allowRedirects=!1,this.match(oe.urlTree);throw oe instanceof Yo?this.noMatchError(oe):oe}))}match(O){return this.expandSegmentGroup(this.injector,this.config,O.root,an).pipe((0,Qe.U)(W=>this.createUrlTree(Rt(W),O.queryParams,O.fragment))).pipe((0,Ze.K)(W=>{throw W instanceof Yo?this.noMatchError(W):W}))}noMatchError(O){return new f.vHH(4002,ji)}createUrlTree(O,T,F){const W=Le(O);return new Ar(W,T,F)}expandSegmentGroup(O,T,F,W){return 0===F.segments.length&&F.hasChildren()?this.expandChildren(O,T,F).pipe((0,Qe.U)(oe=>new Tn([],oe))):this.expandSegment(O,F,T,F.segments,W,!0)}expandChildren(O,T,F){const W=[];for(const oe of Object.keys(F.children))"primary"===oe?W.unshift(oe):W.push(oe);return(0,w.D)(W).pipe((0,Et.b)(oe=>{const fe=F.children[oe],je=ca(T,oe);return this.expandSegmentGroup(O,je,fe,oe).pipe((0,Qe.U)(wt=>({segment:wt,outlet:oe})))}),(0,Nt.R)((oe,fe)=>(oe[fe.outlet]=fe.segment,oe),{}),(0,bt.Z)())}expandSegment(O,T,F,W,oe,fe){return(0,w.D)(F).pipe((0,Et.b)(je=>this.expandSegmentAgainstRoute(O,T,F,je,W,oe,fe).pipe((0,Ze.K)(sn=>{if(sn instanceof Yo)return(0,te.of)(null);throw sn}))),(0,Fe.P)(je=>!!je),(0,Ze.K)((je,wt)=>{if(U(je))return lo(T,W,oe)?(0,te.of)(new Tn([],{})):ls(T);throw je}))}expandSegmentAgainstRoute(O,T,F,W,oe,fe,je){return qa(W,T,oe,fe)?void 0===W.redirectTo?this.matchSegmentAgainstRoute(O,T,W,oe,fe):je&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(O,T,F,W,oe,fe):ls(T):ls(T)}expandSegmentAgainstRouteUsingRedirect(O,T,F,W,oe,fe){return"**"===W.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(O,F,W,fe):this.expandRegularSegmentAgainstRouteUsingRedirect(O,T,F,W,oe,fe)}expandWildCardWithParamsAgainstRouteUsingRedirect(O,T,F,W){const oe=this.applyRedirectCommands([],F.redirectTo,{});return F.redirectTo.startsWith("/")?Ao(oe):this.lineralizeSegments(F,oe).pipe((0,ke.z)(fe=>{const je=new Tn(fe,{});return this.expandSegment(O,je,T,fe,W,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(O,T,F,W,oe,fe){const{matched:je,consumedSegments:wt,remainingSegments:sn,positionalParamSegments:on}=_o(T,W,oe);if(!je)return ls(T);const br=this.applyRedirectCommands(wt,W.redirectTo,on);return W.redirectTo.startsWith("/")?Ao(br):this.lineralizeSegments(W,br).pipe((0,ke.z)($r=>this.expandSegment(O,T,F,$r.concat(sn),fe,!1)))}matchSegmentAgainstRoute(O,T,F,W,oe){return"**"===F.path?(O=qs(F,O),F.loadChildren?(F._loadedRoutes?(0,te.of)({routes:F._loadedRoutes,injector:F._loadedInjector}):this.configLoader.loadChildren(O,F)).pipe((0,Qe.U)(je=>(F._loadedRoutes=je.routes,F._loadedInjector=je.injector,new Tn(W,{})))):(0,te.of)(new Tn(W,{}))):Ko(T,F,W,O).pipe((0,Ve.w)(({matched:fe,consumedSegments:je,remainingSegments:wt})=>fe?this.getChildConfig(O=F._injector??O,F,W).pipe((0,ke.z)(on=>{const br=on.injector??O,$r=on.routes,{segmentGroup:Hs,slicedSegments:Fi}=hi(T,je,wt,$r),$s=new Tn(Hs.segments,Hs.children);if(0===Fi.length&&$s.hasChildren())return this.expandChildren(br,$r,$s).pipe((0,Qe.U)(ml=>new Tn(je,ml)));if(0===$r.length&&0===Fi.length)return(0,te.of)(new Tn(je,{}));const ts=xi(F)===oe;return this.expandSegment(br,$s,$r,Fi,ts?an:oe,!0).pipe((0,Qe.U)(Zo=>new Tn(je.concat(Zo.segments),Zo.children)))})):ls(T)))}getChildConfig(O,T,F){return T.children?(0,te.of)({routes:T.children,injector:O}):T.loadChildren?void 0!==T._loadedRoutes?(0,te.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):function Xi(A,O,T,F){const W=O.canLoad;if(void 0===W||0===W.length)return(0,te.of)(!0);const oe=W.map(fe=>{const je=as(fe,A);return yt(function ao(A){return A&&Es(A.canLoad)}(je)?je.canLoad(O,T):A.runInContext(()=>je(O,T)))});return(0,te.of)(oe).pipe(ot(),fs())}(O,T,F).pipe((0,ke.z)(W=>W?this.configLoader.loadChildren(O,T).pipe((0,Ct.b)(oe=>{T._loadedRoutes=oe.routes,T._loadedInjector=oe.injector})):function Ml(A){return(0,q._)(To(ji,3))}())):(0,te.of)({routes:[],injector:O})}lineralizeSegments(O,T){let F=[],W=T.root;for(;;){if(F=F.concat(W.segments),0===W.numberOfChildren)return(0,te.of)(F);if(W.numberOfChildren>1||!W.children[an])return O.redirectTo,(0,q._)(new f.vHH(4e3,ji));W=W.children[an]}}applyRedirectCommands(O,T,F){return this.applyRedirectCreateUrlTree(T,this.urlSerializer.parse(T),O,F)}applyRedirectCreateUrlTree(O,T,F,W){const oe=this.createSegmentGroup(O,T.root,F,W);return new Ar(oe,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(O,T){const F={};return Ue(O,(W,oe)=>{if("string"==typeof W&&W.startsWith(":")){const je=W.substring(1);F[oe]=T[je]}else F[oe]=W}),F}createSegmentGroup(O,T,F,W){const oe=this.createSegments(O,T.segments,F,W);let fe={};return Ue(T.children,(je,wt)=>{fe[wt]=this.createSegmentGroup(O,je,F,W)}),new Tn(oe,fe)}createSegments(O,T,F,W){return T.map(oe=>oe.path.startsWith(":")?this.findPosParam(O,oe,W):this.findOrReturn(oe,F))}findPosParam(O,T,F){const W=F[T.path.substring(1)];if(!W)throw new f.vHH(4001,ji);return W}findOrReturn(O,T){let F=0;for(const W of T){if(W.path===O.path)return T.splice(F),W;F++}return O}}class Aa{}class Ji{constructor(O,T,F,W,oe,fe,je){this.injector=O,this.rootComponentType=T,this.config=F,this.urlTree=W,this.url=oe,this.paramsInheritanceStrategy=fe,this.urlSerializer=je}recognize(){const O=hi(this.urlTree.root,[],[],this.config.filter(T=>void 0===T.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,O,an).pipe((0,Qe.U)(T=>{if(null===T)return null;const F=new ds([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},an,this.rootComponentType,null,this.urlTree.root,-1,{}),W=new Pr(F,T),oe=new sr(this.url,W);return this.inheritParamsAndData(oe._root),oe}))}inheritParamsAndData(O){const T=O.value,F=Ss(T,this.paramsInheritanceStrategy);T.params=Object.freeze(F.params),T.data=Object.freeze(F.data),O.children.forEach(W=>this.inheritParamsAndData(W))}processSegmentGroup(O,T,F,W){return 0===F.segments.length&&F.hasChildren()?this.processChildren(O,T,F):this.processSegment(O,T,F,F.segments,W)}processChildren(O,T,F){return(0,w.D)(Object.keys(F.children)).pipe((0,Et.b)(W=>{const oe=F.children[W],fe=ca(T,W);return this.processSegmentGroup(O,fe,oe,W)}),(0,Nt.R)((W,oe)=>W&&oe?(W.push(...oe),W):null),(0,Je.o)(W=>null!==W),(0,Be.d)(null),(0,bt.Z)(),(0,Qe.U)(W=>{if(null===W)return null;const oe=Yr(W);return function Xs(A){A.sort((O,T)=>O.value.outlet===an?-1:T.value.outlet===an?1:O.value.outlet.localeCompare(T.value.outlet))}(oe),oe}))}processSegment(O,T,F,W,oe){return(0,w.D)(T).pipe((0,Et.b)(fe=>this.processSegmentAgainstRoute(fe._injector??O,fe,F,W,oe)),(0,Fe.P)(fe=>!!fe),(0,Ze.K)(fe=>{if(U(fe))return lo(F,W,oe)?(0,te.of)([]):(0,te.of)(null);throw fe}))}processSegmentAgainstRoute(O,T,F,W,oe){if(T.redirectTo||!qa(T,F,W,oe))return(0,te.of)(null);let fe;if("**"===T.path){const je=W.length>0?It(W).parameters:{},wt=Po(F)+W.length,sn=new ds(W,je,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pn(T),xi(T),T.component??T._loadedComponent??null,T,Li(F),wt,In(T));fe=(0,te.of)({snapshot:sn,consumedSegments:[],remainingSegments:[]})}else fe=Ko(F,T,W,O).pipe((0,Qe.U)(({matched:je,consumedSegments:wt,remainingSegments:sn,parameters:on})=>{if(!je)return null;const br=Po(F)+wt.length;return{snapshot:new ds(wt,on,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pn(T),xi(T),T.component??T._loadedComponent??null,T,Li(F),br,In(T)),consumedSegments:wt,remainingSegments:sn}}));return fe.pipe((0,Ve.w)(je=>{if(null===je)return(0,te.of)(null);const{snapshot:wt,consumedSegments:sn,remainingSegments:on}=je;O=T._injector??O;const br=T._loadedInjector??O,$r=function Ii(A){return A.children?A.children:A.loadChildren?A._loadedRoutes:[]}(T),{segmentGroup:Hs,slicedSegments:Fi}=hi(F,sn,on,$r.filter(ts=>void 0===ts.redirectTo));if(0===Fi.length&&Hs.hasChildren())return this.processChildren(br,$r,Hs).pipe((0,Qe.U)(ts=>null===ts?null:[new Pr(wt,ts)]));if(0===$r.length&&0===Fi.length)return(0,te.of)([new Pr(wt,[])]);const $s=xi(T)===oe;return this.processSegment(br,$r,Hs,Fi,$s?an:oe).pipe((0,Qe.U)(ts=>null===ts?null:[new Pr(wt,ts)]))}))}}function ps(A){const O=A.value.routeConfig;return O&&""===O.path&&void 0===O.redirectTo}function Yr(A){const O=[],T=new Set;for(const F of A){if(!ps(F)){O.push(F);continue}const W=O.find(oe=>F.value.routeConfig===oe.value.routeConfig);void 0!==W?(W.children.push(...F.children),T.add(W)):O.push(F)}for(const F of T){const W=Yr(F.children);O.push(new Pr(F.value,W))}return O.filter(F=>!T.has(F))}function Li(A){let O=A;for(;O._sourceSegment;)O=O._sourceSegment;return O}function Po(A){let O=A,T=O._segmentIndexShift??0;for(;O._sourceSegment;)O=O._sourceSegment,T+=O._segmentIndexShift??0;return T-1}function pn(A){return A.data||{}}function In(A){return A.resolve||{}}function ae(A){return"string"==typeof A.title||null===A.title}function Ce(A){return(0,Ve.w)(O=>{const T=A(O);return T?(0,w.D)(T).pipe((0,Qe.U)(()=>O)):(0,te.of)(O)})}const vt=new f.OlP("ROUTES");let dn=(()=>{class A{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(T){if(this.componentLoaders.get(T))return this.componentLoaders.get(T);if(T._loadedComponent)return(0,te.of)(T._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(T);const F=yt(T.loadComponent()).pipe((0,Qe.U)(Xr),(0,Ct.b)(oe=>{this.onLoadEndListener&&this.onLoadEndListener(T),T._loadedComponent=oe}),(0,Pt.x)(()=>{this.componentLoaders.delete(T)})),W=new Ne.c(F,()=>new Ke.x).pipe((0,Tt.x)());return this.componentLoaders.set(T,W),W}loadChildren(T,F){if(this.childrenLoaders.get(F))return this.childrenLoaders.get(F);if(F._loadedRoutes)return(0,te.of)({routes:F._loadedRoutes,injector:F._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(F);const oe=this.loadModuleFactoryOrRoutes(F.loadChildren).pipe((0,Qe.U)(je=>{this.onLoadEndListener&&this.onLoadEndListener(F);let wt,sn,on=!1;Array.isArray(je)?sn=je:(wt=je.create(T).injector,sn=ii(wt.get(vt,[],f.XFs.Self|f.XFs.Optional)));return{routes:sn.map(Hr),injector:wt}}),(0,Pt.x)(()=>{this.childrenLoaders.delete(F)})),fe=new Ne.c(oe,()=>new Ke.x).pipe((0,Tt.x)());return this.childrenLoaders.set(F,fe),fe}loadModuleFactoryOrRoutes(T){return yt(T()).pipe((0,Qe.U)(Xr),(0,ke.z)(F=>F instanceof f.YKP||Array.isArray(F)?(0,te.of)(F):(0,w.D)(this.compiler.compileModuleAsync(F))))}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Xr(A){return function Dr(A){return A&&"object"==typeof A&&"default"in A}(A)?A.default:A}let Bn=(()=>{class A{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ke.x,this.configLoader=(0,f.f3M)(dn),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(Qn),this.rootContexts=(0,f.f3M)(ss),this.navigationId=0,this.afterPreactivation=()=>(0,te.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=W=>this.events.next(new kn(W)),this.configLoader.onLoadStartListener=W=>this.events.next(new ar(W))}complete(){this.transitions?.complete()}handleNavigationRequest(T){const F=++this.navigationId;this.transitions?.next({...this.transitions.value,...T,id:F})}setupNavigations(T){return this.transitions=new H.X({id:0,targetPageId:0,currentUrlTree:T.currentUrlTree,currentRawUrl:T.currentUrlTree,extractedUrl:T.urlHandlingStrategy.extract(T.currentUrlTree),urlAfterRedirects:T.urlHandlingStrategy.extract(T.currentUrlTree),rawUrl:T.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Kr,restoredState:null,currentSnapshot:T.routerState.snapshot,targetSnapshot:null,currentRouterState:T.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,qe.h)(F=>0!==F.id),(0,Qe.U)(F=>({...F,extractedUrl:T.urlHandlingStrategy.extract(F.rawUrl)})),(0,Ve.w)(F=>{let W=!1,oe=!1;return(0,te.of)(F).pipe((0,Ct.b)(fe=>{this.currentNavigation={id:fe.id,initialUrl:fe.rawUrl,extractedUrl:fe.extractedUrl,trigger:fe.source,extras:fe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ve.w)(fe=>{const je=T.browserUrlTree.toString(),wt=!T.navigated||fe.extractedUrl.toString()!==je||je!==T.currentUrlTree.toString();if(!wt&&"reload"!==(fe.extras.onSameUrlNavigation??T.onSameUrlNavigation)){const on="";return this.events.next(new Cn(fe.id,T.serializeUrl(F.rawUrl),on,0)),T.rawUrlTree=fe.rawUrl,fe.resolve(null),ge.E}if(T.urlHandlingStrategy.shouldProcessUrl(fe.rawUrl))return or(fe.source)&&(T.browserUrlTree=fe.extractedUrl),(0,te.of)(fe).pipe((0,Ve.w)(on=>{const br=this.transitions?.getValue();return this.events.next(new xn(on.id,this.urlSerializer.serialize(on.extractedUrl),on.source,on.restoredState)),br!==this.transitions?.getValue()?ge.E:Promise.resolve(on)}),function ba(A,O,T,F){return(0,Ve.w)(W=>function li(A,O,T,F,W){return new Zs(A,O,T,F,W).apply()}(A,O,T,W.extractedUrl,F).pipe((0,Qe.U)(oe=>({...W,urlAfterRedirects:oe}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,T.config),(0,Ct.b)(on=>{this.currentNavigation={...this.currentNavigation,finalUrl:on.urlAfterRedirects},F.urlAfterRedirects=on.urlAfterRedirects}),function dl(A,O,T,F,W){return(0,ke.z)(oe=>function Mo(A,O,T,F,W,oe,fe="emptyOnly"){return new Ji(A,O,T,F,W,fe,oe).recognize().pipe((0,Ve.w)(je=>null===je?function cl(A){return new de.y(O=>O.error(A))}(new Aa):(0,te.of)(je)))}(A,O,T,oe.urlAfterRedirects,F.serialize(oe.urlAfterRedirects),F,W).pipe((0,Qe.U)(fe=>({...oe,targetSnapshot:fe}))))}(this.environmentInjector,this.rootComponentType,T.config,this.urlSerializer,T.paramsInheritanceStrategy),(0,Ct.b)(on=>{if(F.targetSnapshot=on.targetSnapshot,"eager"===T.urlUpdateStrategy){if(!on.extras.skipLocationChange){const $r=T.urlHandlingStrategy.merge(on.urlAfterRedirects,on.rawUrl);T.setBrowserUrl($r,on)}T.browserUrlTree=on.urlAfterRedirects}const br=new Xn(on.id,this.urlSerializer.serialize(on.extractedUrl),this.urlSerializer.serialize(on.urlAfterRedirects),on.targetSnapshot);this.events.next(br)}));if(wt&&T.urlHandlingStrategy.shouldProcessUrl(T.rawUrlTree)){const{id:on,extractedUrl:br,source:$r,restoredState:Hs,extras:Fi}=fe,$s=new xn(on,this.urlSerializer.serialize(br),$r,Hs);this.events.next($s);const ts=Ca(br,this.rootComponentType).snapshot;return F={...fe,targetSnapshot:ts,urlAfterRedirects:br,extras:{...Fi,skipLocationChange:!1,replaceUrl:!1}},(0,te.of)(F)}{const on="";return this.events.next(new Cn(fe.id,T.serializeUrl(F.extractedUrl),on,1)),T.rawUrlTree=fe.rawUrl,fe.resolve(null),ge.E}}),(0,Ct.b)(fe=>{const je=new Mr(fe.id,this.urlSerializer.serialize(fe.extractedUrl),this.urlSerializer.serialize(fe.urlAfterRedirects),fe.targetSnapshot);this.events.next(je)}),(0,Qe.U)(fe=>F={...fe,guards:da(fe.targetSnapshot,fe.currentSnapshot,this.rootContexts)}),function Qt(A,O){return(0,ke.z)(T=>{const{targetSnapshot:F,currentSnapshot:W,guards:{canActivateChecks:oe,canDeactivateChecks:fe}}=T;return 0===fe.length&&0===oe.length?(0,te.of)({...T,guardsResult:!0}):function Zr(A,O,T,F){return(0,w.D)(A).pipe((0,ke.z)(W=>function ka(A,O,T,F,W){const oe=O&&O.routeConfig?O.routeConfig.canDeactivate:null;if(!oe||0===oe.length)return(0,te.of)(!0);const fe=oe.map(je=>{const wt=Ei(O)??W,sn=as(je,wt);return yt(function Nn(A){return A&&Es(A.canDeactivate)}(sn)?sn.canDeactivate(A,O,T,F):wt.runInContext(()=>sn(A,O,T,F))).pipe((0,Fe.P)())});return(0,te.of)(fe).pipe(ot())}(W.component,W.route,T,O,F)),(0,Fe.P)(W=>!0!==W,!0))}(fe,F,W,A).pipe((0,ke.z)(je=>je&&function Qa(A){return"boolean"==typeof A}(je)?function mt(A,O,T,F){return(0,w.D)(O).pipe((0,Et.b)(W=>(0,ee.z)(function Go(A,O){return null!==A&&O&&O(new Br(A)),(0,te.of)(!0)}(W.route.parent,F),function rr(A,O){return null!==A&&O&&O(new Ee(A)),(0,te.of)(!0)}(W.route,F),function Ni(A,O,T){const F=O[O.length-1],oe=O.slice(0,O.length-1).reverse().map(fe=>function Di(A){const O=A.routeConfig?A.routeConfig.canActivateChild:null;return O&&0!==O.length?{node:A,guards:O}:null}(fe)).filter(fe=>null!==fe).map(fe=>(0,K.P)(()=>{const je=fe.guards.map(wt=>{const sn=Ei(fe.node)??T,on=as(wt,sn);return yt(function ha(A){return A&&Es(A.canActivateChild)}(on)?on.canActivateChild(F,A):sn.runInContext(()=>on(F,A))).pipe((0,Fe.P)())});return(0,te.of)(je).pipe(ot())}));return(0,te.of)(oe).pipe(ot())}(A,W.path,T),function nu(A,O,T){const F=O.routeConfig?O.routeConfig.canActivate:null;if(!F||0===F.length)return(0,te.of)(!0);const W=F.map(oe=>(0,K.P)(()=>{const fe=Ei(O)??T,je=as(oe,fe);return yt(function Ta(A){return A&&Es(A.canActivate)}(je)?je.canActivate(O,A):fe.runInContext(()=>je(O,A))).pipe((0,Fe.P)())}));return(0,te.of)(W).pipe(ot())}(A,W.route,T))),(0,Fe.P)(W=>!0!==W,!0))}(F,oe,A,O):(0,te.of)(je)),(0,Qe.U)(je=>({...T,guardsResult:je})))})}(this.environmentInjector,fe=>this.events.next(fe)),(0,Ct.b)(fe=>{if(F.guardsResult=fe.guardsResult,Re(fe.guardsResult))throw wo(0,fe.guardsResult);const je=new Qi(fe.id,this.urlSerializer.serialize(fe.extractedUrl),this.urlSerializer.serialize(fe.urlAfterRedirects),fe.targetSnapshot,!!fe.guardsResult);this.events.next(je)}),(0,qe.h)(fe=>!!fe.guardsResult||(T.restoreHistory(fe),this.cancelNavigationTransition(fe,"",3),!1)),Ce(fe=>{if(fe.guards.canActivateChecks.length)return(0,te.of)(fe).pipe((0,Ct.b)(je=>{const wt=new si(je.id,this.urlSerializer.serialize(je.extractedUrl),this.urlSerializer.serialize(je.urlAfterRedirects),je.targetSnapshot);this.events.next(wt)}),(0,Ve.w)(je=>{let wt=!1;return(0,te.of)(je).pipe(function nn(A,O){return(0,ke.z)(T=>{const{targetSnapshot:F,guards:{canActivateChecks:W}}=T;if(!W.length)return(0,te.of)(T);let oe=0;return(0,w.D)(W).pipe((0,Et.b)(fe=>function dt(A,O,T,F){const W=A.routeConfig,oe=A._resolve;return void 0!==W?.title&&!ae(W)&&(oe[Yt]=W.title),function P(A,O,T,F){const W=function Q(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}(A);if(0===W.length)return(0,te.of)({});const oe={};return(0,w.D)(W).pipe((0,ke.z)(fe=>function V(A,O,T,F){const W=Ei(O)??F,oe=as(A,W);return yt(oe.resolve?oe.resolve(O,T):W.runInContext(()=>oe(O,T)))}(A[fe],O,T,F).pipe((0,Fe.P)(),(0,Ct.b)(je=>{oe[fe]=je}))),(0,ct.h)(1),(0,nt.h)(oe),(0,Ze.K)(fe=>U(fe)?ge.E:(0,q._)(fe)))}(oe,A,O,F).pipe((0,Qe.U)(fe=>(A._resolvedData=fe,A.data=Ss(A,T).resolve,W&&ae(W)&&(A.data[Yt]=W.title),null)))}(fe.route,F,A,O)),(0,Ct.b)(()=>oe++),(0,ct.h)(1),(0,ke.z)(fe=>oe===W.length?(0,te.of)(T):ge.E))})}(T.paramsInheritanceStrategy,this.environmentInjector),(0,Ct.b)({next:()=>wt=!0,complete:()=>{wt||(T.restoreHistory(je),this.cancelNavigationTransition(je,"",2))}}))}),(0,Ct.b)(je=>{const wt=new An(je.id,this.urlSerializer.serialize(je.extractedUrl),this.urlSerializer.serialize(je.urlAfterRedirects),je.targetSnapshot);this.events.next(wt)}))}),Ce(fe=>{const je=wt=>{const sn=[];wt.routeConfig?.loadComponent&&!wt.routeConfig._loadedComponent&&sn.push(this.configLoader.loadComponent(wt.routeConfig).pipe((0,Ct.b)(on=>{wt.component=on}),(0,Qe.U)(()=>{})));for(const on of wt.children)sn.push(...je(on));return sn};return(0,ie.a)(je(fe.targetSnapshot.root)).pipe((0,Be.d)(),(0,We.q)(1))}),Ce(()=>this.afterPreactivation()),(0,Qe.U)(fe=>{const je=function io(A,O,T){const F=Ls(A,O._root,T?T._root:void 0);return new qr(F,O)}(T.routeReuseStrategy,fe.targetSnapshot,fe.currentRouterState);return F={...fe,targetRouterState:je}}),(0,Ct.b)(fe=>{T.currentUrlTree=fe.urlAfterRedirects,T.rawUrlTree=T.urlHandlingStrategy.merge(fe.urlAfterRedirects,fe.rawUrl),T.routerState=fe.targetRouterState,"deferred"===T.urlUpdateStrategy&&(fe.extras.skipLocationChange||T.setBrowserUrl(T.rawUrlTree,fe),T.browserUrlTree=fe.urlAfterRedirects)}),((A,O,T)=>(0,Qe.U)(F=>(new hs(O,F.targetRouterState,F.currentRouterState,T).activate(A),F)))(this.rootContexts,T.routeReuseStrategy,fe=>this.events.next(fe)),(0,We.q)(1),(0,Ct.b)({next:fe=>{W=!0,this.lastSuccessfulNavigation=this.currentNavigation,T.navigated=!0,this.events.next(new fn(fe.id,this.urlSerializer.serialize(fe.extractedUrl),this.urlSerializer.serialize(T.currentUrlTree))),T.titleStrategy?.updateTitle(fe.targetRouterState.snapshot),fe.resolve(!0)},complete:()=>{W=!0}}),(0,Pt.x)(()=>{W||oe||this.cancelNavigationTransition(F,"",1),this.currentNavigation?.id===F.id&&(this.currentNavigation=null)}),(0,Ze.K)(fe=>{if(oe=!0,po(fe)){Fs(fe)||(T.navigated=!0,T.restoreHistory(F,!0));const je=new Sn(F.id,this.urlSerializer.serialize(F.extractedUrl),fe.message,fe.cancellationCode);if(this.events.next(je),Fs(fe)){const wt=T.urlHandlingStrategy.merge(fe.url,T.rawUrlTree),sn={skipLocationChange:F.extras.skipLocationChange,replaceUrl:"eager"===T.urlUpdateStrategy||or(F.source)};T.scheduleNavigation(wt,Kr,null,sn,{resolve:F.resolve,reject:F.reject,promise:F.promise})}else F.resolve(!1)}else{T.restoreHistory(F,!0);const je=new vr(F.id,this.urlSerializer.serialize(F.extractedUrl),fe,F.targetSnapshot??void 0);this.events.next(je);try{F.resolve(T.errorHandler(fe))}catch(wt){F.reject(wt)}}return ge.E}))}))}cancelNavigationTransition(T,F,W){const oe=new Sn(T.id,this.urlSerializer.serialize(T.extractedUrl),F,W);this.events.next(oe),T.resolve(!1)}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function or(A){return A!==Kr}let Xt=(()=>{class A{buildTitle(T){let F,W=T.root;for(;void 0!==W;)F=this.getResolvedTitleForRoute(W)??F,W=W.children.find(oe=>oe.outlet===an);return F}getResolvedTitleForRoute(T){return T.data[Yt]}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:function(){return(0,f.f3M)(ti)},providedIn:"root"}),A})(),ti=(()=>{class A extends Xt{constructor(T){super(),this.title=T}updateTitle(T){const F=this.buildTitle(T);void 0!==F&&this.title.setTitle(F)}}return A.\u0275fac=function(T){return new(T||A)(f.LFG(ir.Dx))},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Is=(()=>{class A{}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:function(){return(0,f.f3M)(gn)},providedIn:"root"}),A})();class Er{shouldDetach(O){return!1}store(O,T){}shouldAttach(O){return!1}retrieve(O){return null}shouldReuseRoute(O,T){return O.routeConfig===T.routeConfig}}let gn=(()=>{class A extends Er{}return A.\u0275fac=function(){let O;return function(F){return(O||(O=f.n5z(A)))(F||A)}}(),A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Wn=new f.OlP("",{providedIn:"root",factory:()=>({})});let Oo=(()=>{class A{}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:function(){return(0,f.f3M)(Or)},providedIn:"root"}),A})(),Or=(()=>{class A{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,F){return T}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function uo(A){throw A}function pa(A,O,T){return O.parse("/")}const Qo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hl={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Hi=(()=>{class A{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this.options=(0,f.f3M)(Wn,{optional:!0})||{},this.errorHandler=this.options.errorHandler||uo,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||pa,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(Oo),this.routeReuseStrategy=(0,f.f3M)(Is),this.urlCreationStrategy=(0,f.f3M)(Un),this.titleStrategy=(0,f.f3M)(Xt),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ii((0,f.f3M)(vt,{optional:!0})??[]),this.navigationTransitions=(0,f.f3M)(Bn),this.urlSerializer=(0,f.f3M)(Qn),this.location=(0,f.f3M)($e.Ye),this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ar,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ca(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(T=>{this.lastSuccessfulId=T.id,this.currentPageId=this.browserPageId??0},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}resetRootComponentType(T){this.routerState.root.component=T,this.navigationTransitions.rootComponentType=T}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const T=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Kr,T)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const F="popstate"===T.type?"popstate":"hashchange";"popstate"===F&&setTimeout(()=>{this.navigateToSyncWithBrowser(T.url,F,T.state)},0)}))}navigateToSyncWithBrowser(T,F,W){const oe={replaceUrl:!0},fe=W?.navigationId?W:null;if(W){const wt={...W};delete wt.navigationId,delete wt.\u0275routerPageId,0!==Object.keys(wt).length&&(oe.state=wt)}const je=this.parseUrl(T);this.scheduleNavigation(je,F,fe,oe)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(T){this.config=T.map(Hr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,F={}){const{relativeTo:W,queryParams:oe,fragment:fe,queryParamsHandling:je,preserveFragment:wt}=F,sn=wt?this.currentUrlTree.fragment:fe;let on=null;switch(je){case"merge":on={...this.currentUrlTree.queryParams,...oe};break;case"preserve":on=this.currentUrlTree.queryParams;break;default:on=oe||null}return null!==on&&(on=this.removeEmptyProps(on)),this.urlCreationStrategy.createUrlTree(W,this.routerState,this.currentUrlTree,T,on,sn??null)}navigateByUrl(T,F={skipLocationChange:!1}){const W=Re(T)?T:this.parseUrl(T),oe=this.urlHandlingStrategy.merge(W,this.rawUrlTree);return this.scheduleNavigation(oe,Kr,null,F)}navigate(T,F={skipLocationChange:!1}){return function co(A){for(let O=0;O<A.length;O++){const T=A[O];if(null==T)throw new f.vHH(4008,false)}}(T),this.navigateByUrl(this.createUrlTree(T,F),F)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let F;try{F=this.urlSerializer.parse(T)}catch(W){F=this.malformedUriErrorHandler(W,this.urlSerializer,T)}return F}isActive(T,F){let W;if(W=!0===F?{...Qo}:!1===F?{...hl}:F,Re(T))return kr(this.currentUrlTree,T,W);const oe=this.parseUrl(T);return kr(this.currentUrlTree,oe,W)}removeEmptyProps(T){return Object.keys(T).reduce((F,W)=>{const oe=T[W];return null!=oe&&(F[W]=oe),F},{})}scheduleNavigation(T,F,W,oe,fe){if(this.disposed)return Promise.resolve(!1);let je,wt,sn,on;return fe?(je=fe.resolve,wt=fe.reject,sn=fe.promise):sn=new Promise((br,$r)=>{je=br,wt=$r}),on="computed"===this.canceledNavigationResolution?W&&W.\u0275routerPageId?W.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:on,source:F,restoredState:W,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:T,extras:oe,resolve:je,reject:wt,promise:sn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),sn.catch(br=>Promise.reject(br))}setBrowserUrl(T,F){const W=this.urlSerializer.serialize(T);if(this.location.isCurrentPathEqualTo(W)||F.extras.replaceUrl){const fe={...F.extras.state,...this.generateNgRouterState(F.id,this.browserPageId)};this.location.replaceState(W,"",fe)}else{const oe={...F.extras.state,...this.generateNgRouterState(F.id,F.targetPageId)};this.location.go(W,"",oe)}}restoreHistory(T,F=!1){if("computed"===this.canceledNavigationResolution){const oe=this.currentPageId-(this.browserPageId??this.currentPageId);0!==oe?this.location.historyGo(oe):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===oe&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(F&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(T,F){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:F}:{navigationId:T}}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),Ro=(()=>{class A{constructor(T,F,W,oe,fe,je){this.router=T,this.route=F,this.tabIndexAttribute=W,this.renderer=oe,this.el=fe,this.locationStrategy=je,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Ke.x;const wt=fe.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===wt||"area"===wt,this.isAnchorElement?this.subscription=T.events.subscribe(sn=>{sn instanceof fn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(T){this._preserveFragment=(0,f.D6c)(T)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(T){this._skipLocationChange=(0,f.D6c)(T)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(T){this._replaceUrl=(0,f.D6c)(T)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(T){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",T)}ngOnChanges(T){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(T){null!=T?(this.commands=Array.isArray(T)?T:[T],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(T,F,W,oe,fe){return!!(null===this.urlTree||this.isAnchorElement&&(0!==T||F||W||oe||fe||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const T=null===this.href?null:(0,f.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",T)}applyAttributeValue(T,F){const W=this.renderer,oe=this.el.nativeElement;null!==F?W.setAttribute(oe,T,F):W.removeAttribute(oe,T)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return A.\u0275fac=function(T){return new(T||A)(f.Y36(Hi),f.Y36(yn),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36($e.S$))},A.\u0275dir=f.lG2({type:A,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(T,F){1&T&&f.NdJ("click",function(oe){return F.onClick(oe.button,oe.ctrlKey,oe.shiftKey,oe.altKey,oe.metaKey)}),2&T&&f.uIk("target",F.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),A})(),Ua=(()=>{class A{get isActive(){return this._isActive}constructor(T,F,W,oe,fe){this.router=T,this.element=F,this.renderer=W,this.cdr=oe,this.link=fe,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new f.vpe,this.routerEventsSubscription=T.events.subscribe(je=>{je instanceof fn&&this.update()})}ngAfterContentInit(){(0,te.of)(this.links.changes,(0,te.of)(null)).pipe((0,Ht.J)()).subscribe(T=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const T=[...this.links.toArray(),this.link].filter(F=>!!F).map(F=>F.onChanges);this.linkInputChangesSubscription=(0,w.D)(T).pipe((0,Ht.J)()).subscribe(F=>{this._isActive!==this.isLinkActive(this.router)(F)&&this.update()})}set routerLinkActive(T){const F=Array.isArray(T)?T:T.split(" ");this.classes=F.filter(W=>!!W)}ngOnChanges(T){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const T=this.hasActiveLinks();this._isActive!==T&&(this._isActive=T,this.cdr.markForCheck(),this.classes.forEach(F=>{T?this.renderer.addClass(this.element.nativeElement,F):this.renderer.removeClass(this.element.nativeElement,F)}),T&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(T))})}isLinkActive(T){const F=function fl(A){return!!A.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return W=>!!W.urlTree&&T.isActive(W.urlTree,F)}hasActiveLinks(){const T=this.isLinkActive(this.router);return this.link&&T(this.link)||this.links.some(T)}}return A.\u0275fac=function(T){return new(T||A)(f.Y36(Hi),f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(f.sBO),f.Y36(Ro,8))},A.\u0275dir=f.lG2({type:A,selectors:[["","routerLinkActive",""]],contentQueries:function(T,F,W){if(1&T&&f.Suo(W,Ro,5),2&T){let oe;f.iGM(oe=f.CRH())&&(F.links=oe)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[f.TTD]}),A})();class Vs{}let iu=(()=>{class A{constructor(T,F,W,oe,fe){this.router=T,this.injector=W,this.preloadingStrategy=oe,this.loader=fe}setUpPreloading(){this.subscription=this.router.events.pipe((0,qe.h)(T=>T instanceof fn),(0,Et.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,F){const W=[];for(const oe of F){oe.providers&&!oe._injector&&(oe._injector=(0,f.MMx)(oe.providers,T,`Route: ${oe.path}`));const fe=oe._injector??T,je=oe._loadedInjector??fe;(oe.loadChildren&&!oe._loadedRoutes&&void 0===oe.canLoad||oe.loadComponent&&!oe._loadedComponent)&&W.push(this.preloadConfig(fe,oe)),(oe.children||oe._loadedRoutes)&&W.push(this.processRoutes(je,oe.children??oe._loadedRoutes))}return(0,w.D)(W).pipe((0,Ht.J)())}preloadConfig(T,F){return this.preloadingStrategy.preload(F,()=>{let W;W=F.loadChildren&&void 0===F.canLoad?this.loader.loadChildren(T,F):(0,te.of)(null);const oe=W.pipe((0,ke.z)(fe=>null===fe?(0,te.of)(void 0):(F._loadedRoutes=fe.routes,F._loadedInjector=fe.injector,this.processRoutes(fe.injector??T,fe.routes))));if(F.loadComponent&&!F._loadedComponent){const fe=this.loader.loadComponent(F);return(0,w.D)([oe,fe]).pipe((0,Ht.J)())}return oe})}}return A.\u0275fac=function(T){return new(T||A)(f.LFG(Hi),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(Vs),f.LFG(dn))},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const xo=new f.OlP("");let Xa=(()=>{class A{constructor(T,F,W,oe,fe={}){this.urlSerializer=T,this.transitions=F,this.viewportScroller=W,this.zone=oe,this.options=fe,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},fe.scrollPositionRestoration=fe.scrollPositionRestoration||"disabled",fe.anchorScrolling=fe.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof xn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof fn&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.urlSerializer.parse(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof ze&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,F){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ze(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,F))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return A.\u0275fac=function(T){f.$Z()},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac}),A})();var st=(()=>((st=st||{})[st.COMPLETE=0]="COMPLETE",st[st.FAILED=1]="FAILED",st[st.REDIRECTING=2]="REDIRECTING",st))();const Cs=!1;function Ai(A,O){return{\u0275kind:A,\u0275providers:O}}const pl=new f.OlP("",{providedIn:"root",factory:()=>!1});function el(){const A=(0,f.f3M)(f.zs3);return O=>{const T=A.get(f.z2F);if(O!==T.components[0])return;const F=A.get(Hi),W=A.get(Va);1===A.get(Bs)&&F.initialNavigation(),A.get(eo,null,f.XFs.Optional)?.setUpPreloading(),A.get(xo,null,f.XFs.Optional)?.init(),F.resetRootComponentType(T.componentTypes[0]),W.closed||(W.next(),W.complete(),W.unsubscribe())}}const Va=new f.OlP(Cs?"bootstrap done indicator":"",{factory:()=>new Ke.x}),Bs=new f.OlP(Cs?"initial navigation":"",{providedIn:"root",factory:()=>1});function js(){let A=[];return A=Cs?[{provide:f.Xts,multi:!0,useFactory:()=>{const O=(0,f.f3M)(Hi);return()=>O.events.subscribe(T=>{console.group?.(`Router Event: ${T.constructor.name}`),console.log(function gt(A){if(!("type"in A))return`Unknown Router Event: ${A.constructor.name}`;switch(A.type){case 14:return`ActivationEnd(path: '${A.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${A.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${A.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${A.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state}, shouldActivate: ${A.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 2:return`NavigationCancel(id: ${A.id}, url: '${A.url}')`;case 16:return`NavigationSkipped(id: ${A.id}, url: '${A.url}')`;case 1:return`NavigationEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${A.id}, url: '${A.url}', error: ${A.error})`;case 0:return`NavigationStart(id: ${A.id}, url: '${A.url}')`;case 6:return`ResolveEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 5:return`ResolveStart(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 10:return`RouteConfigLoadEnd(path: ${A.route.path})`;case 9:return`RouteConfigLoadStart(path: ${A.route.path})`;case 4:return`RoutesRecognized(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 15:return`Scroll(anchor: '${A.anchor}', position: '${A.position?`${A.position[0]}, ${A.position[1]}`:null}')`}}(T)),console.log(T),console.groupEnd?.()})}}]:[],Ai(1,A)}const eo=new f.OlP(Cs?"router preloader":"");function ma(A){return Ai(0,[{provide:eo,useExisting:iu},{provide:Vs,useExisting:A}])}const gl=!1,Cr=new f.OlP(gl?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Pa=[$e.Ye,{provide:Qn,useClass:yi},Hi,ss,{provide:yn,useFactory:function Js(A){return A.routerState.root},deps:[Hi]},dn,gl?{provide:pl,useValue:!0}:[]];function fi(){return new f.PXZ("Router",Hi)}let Oa=(()=>{class A{constructor(T){}static forRoot(T,F){return{ngModule:A,providers:[Pa,gl&&F?.enableTracing?js().\u0275providers:[],{provide:vt,multi:!0,useValue:T},{provide:Cr,useFactory:tl,deps:[[Hi,new f.FiY,new f.tp0]]},{provide:Wn,useValue:F||{}},F?.useHash?{provide:$e.S$,useClass:$e.Do}:{provide:$e.S$,useClass:$e.b0},{provide:xo,useFactory:()=>{const A=(0,f.f3M)($e.EM),O=(0,f.f3M)(f.R0b),T=(0,f.f3M)(Wn),F=(0,f.f3M)(Bn),W=(0,f.f3M)(Qn);return T.scrollOffset&&A.setOffset(T.scrollOffset),new Xa(W,F,A,O,T)}},F?.preloadingStrategy?ma(F.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:fi},F?.initialNavigation?qo(F):[],[{provide:_a,useFactory:el},{provide:f.tb,multi:!0,useExisting:_a}]]}}static forChild(T){return{ngModule:A,providers:[{provide:vt,multi:!0,useValue:T}]}}}return A.\u0275fac=function(T){return new(T||A)(f.LFG(Cr,8))},A.\u0275mod=f.oAB({type:A}),A.\u0275inj=f.cJS({imports:[Bo]}),A})();function tl(A){if(gl&&A)throw new f.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function qo(A){return["disabled"===A.initialNavigation?Ai(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const O=(0,f.f3M)(Hi);return()=>{O.setUpLocationChangeListener()}}},{provide:Bs,useValue:2}]).\u0275providers:[],"enabledBlocking"===A.initialNavigation?Ai(2,[{provide:Bs,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:O=>{const T=O.get($e.V_,Promise.resolve());return()=>T.then(()=>new Promise(F=>{const W=O.get(Hi),oe=O.get(Va);(function ga(A,O){A.events.pipe((0,qe.h)(T=>T instanceof fn||T instanceof Sn||T instanceof vr||T instanceof Cn),(0,Qe.U)(T=>T instanceof fn||T instanceof Cn?st.COMPLETE:T instanceof Sn&&(0===T.code||1===T.code)?st.REDIRECTING:st.FAILED),(0,qe.h)(T=>T!==st.REDIRECTING),(0,We.q)(1)).subscribe(()=>{O()})})(W,()=>{F(!0)}),O.get(Bn).afterPreactivation=()=>(F(!0),oe.closed?(0,te.of)(void 0):oe),W.initialNavigation()}))}}]).\u0275providers:[]]}const _a=new f.OlP(gl?"Router Initializer":"")},6881:(we,le,I)=>{I.d(le,{Jn:()=>Vi,qX:()=>yi,Xd:()=>Qn,Mq:()=>Yi,C6:()=>hr,ZF:()=>Hn,KN:()=>tt});var f=I(9671),w=I(4859),te=I(1877),H=I(2090);const X=(ht,rt)=>rt.some(xt=>ht instanceof xt);let ie,ee;const q=new WeakMap,de=new WeakMap,ge=new WeakMap,Ne=new WeakMap,Ke=new WeakMap;let Ve={get(ht,rt,xt){if(ht instanceof IDBTransaction){if("done"===rt)return de.get(ht);if("objectStoreNames"===rt)return ht.objectStoreNames||ge.get(ht);if("store"===rt)return xt.objectStoreNames[1]?void 0:xt.objectStore(xt.objectStoreNames[0])}return ke(ht[rt])},set:(ht,rt,xt)=>(ht[rt]=xt,!0),has:(ht,rt)=>ht instanceof IDBTransaction&&("done"===rt||"store"===rt)||rt in ht};function qe(ht){return"function"==typeof ht?function Ye(ht){return ht!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function se(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ht)?function(...rt){return ht.apply(Fe(this),rt),ke(q.get(this))}:function(...rt){return ke(ht.apply(Fe(this),rt))}:function(rt,...xt){const Zt=ht.call(Fe(this),rt,...xt);return ge.set(Zt,rt.sort?rt.sort():[rt]),ke(Zt)}}(ht):(ht instanceof IDBTransaction&&function Qe(ht){if(de.has(ht))return;const rt=new Promise((xt,Zt)=>{const Rn=()=>{ht.removeEventListener("complete",Gn),ht.removeEventListener("error",cn),ht.removeEventListener("abort",cn)},Gn=()=>{xt(),Rn()},cn=()=>{Zt(ht.error||new DOMException("AbortError","AbortError")),Rn()};ht.addEventListener("complete",Gn),ht.addEventListener("error",cn),ht.addEventListener("abort",cn)});de.set(ht,rt)}(ht),X(ht,function K(){return ie||(ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ht,Ve):ht)}function ke(ht){if(ht instanceof IDBRequest)return function $e(ht){const rt=new Promise((xt,Zt)=>{const Rn=()=>{ht.removeEventListener("success",Gn),ht.removeEventListener("error",cn)},Gn=()=>{xt(ke(ht.result)),Rn()},cn=()=>{Zt(ht.error),Rn()};ht.addEventListener("success",Gn),ht.addEventListener("error",cn)});return rt.then(xt=>{xt instanceof IDBCursor&&q.set(xt,ht)}).catch(()=>{}),Ke.set(rt,ht),rt}(ht);if(Ne.has(ht))return Ne.get(ht);const rt=qe(ht);return rt!==ht&&(Ne.set(ht,rt),Ke.set(rt,ht)),rt}const Fe=ht=>Ke.get(ht),Ze=["get","getKey","getAll","getAllKeys","count"],Nt=["put","add","delete","clear"],bt=new Map;function Je(ht,rt){if(!(ht instanceof IDBDatabase)||rt in ht||"string"!=typeof rt)return;if(bt.get(rt))return bt.get(rt);const xt=rt.replace(/FromIndex$/,""),Zt=rt!==xt,Rn=Nt.includes(xt);if(!(xt in(Zt?IDBIndex:IDBObjectStore).prototype)||!Rn&&!Ze.includes(xt))return;const Gn=function(){var cn=(0,f.Z)(function*(gr,...nr){const ei=this.transaction(gr,Rn?"readwrite":"readonly");let zr=ei.store;return Zt&&(zr=zr.index(nr.shift())),(yield Promise.all([zr[xt](...nr),Rn&&ei.done]))[0]});return function(nr){return cn.apply(this,arguments)}}();return bt.set(rt,Gn),Gn}!function We(ht){Ve=ht(Ve)}(ht=>({...ht,get:(rt,xt,Zt)=>Je(rt,xt)||ht.get(rt,xt,Zt),has:(rt,xt)=>!!Je(rt,xt)||ht.has(rt,xt)}));class Be{constructor(rt){this.container=rt}getPlatformInfoString(){return this.container.getProviders().map(xt=>{if(function ct(ht){return"VERSION"===ht.getComponent()?.type}(xt)){const Zt=xt.getImmediate();return`${Zt.library}/${Zt.version}`}return null}).filter(xt=>xt).join(" ")}}const nt="@firebase/app",Tt=new te.Yd("@firebase/app"),Ar="[DEFAULT]",Tn={[nt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yn=new Map,dr=new Map;function un(ht,rt){try{ht.container.addComponent(rt)}catch(xt){Tt.debug(`Component ${rt.name} failed to register with FirebaseApp ${ht.name}`,xt)}}function Qn(ht){const rt=ht.name;if(dr.has(rt))return Tt.debug(`There were multiple attempts to register component ${rt}.`),!1;dr.set(rt,ht);for(const xt of Yn.values())un(xt,ht);return!0}function yi(ht,rt){const xt=ht.container.getProvider("heartbeat").getImmediate({optional:!0});return xt&&xt.triggerHeartbeat(),ht.container.getProvider(rt)}const ci=new H.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class _r{constructor(rt,xt,Zt){this._isDeleted=!1,this._options=Object.assign({},rt),this._config=Object.assign({},xt),this._name=xt.name,this._automaticDataCollectionEnabled=xt.automaticDataCollectionEnabled,this._container=Zt,this.container.addComponent(new w.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(rt){this.checkDestroyed(),this._automaticDataCollectionEnabled=rt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(rt){this._isDeleted=rt}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}const Vi="9.17.1";function Hn(ht,rt={}){let xt=ht;"object"!=typeof rt&&(rt={name:rt});const Zt=Object.assign({name:Ar,automaticDataCollectionEnabled:!1},rt),Rn=Zt.name;if("string"!=typeof Rn||!Rn)throw ci.create("bad-app-name",{appName:String(Rn)});if(xt||(xt=(0,H.aH)()),!xt)throw ci.create("no-options");const Gn=Yn.get(Rn);if(Gn){if((0,H.vZ)(xt,Gn.options)&&(0,H.vZ)(Zt,Gn.config))return Gn;throw ci.create("duplicate-app",{appName:Rn})}const cn=new w.H0(Rn);for(const nr of dr.values())cn.addComponent(nr);const gr=new _r(xt,Zt,cn);return Yn.set(Rn,gr),gr}function Yi(ht=Ar){const rt=Yn.get(ht);if(!rt&&ht===Ar)return Hn();if(!rt)throw ci.create("no-app",{appName:ht});return rt}function hr(){return Array.from(Yn.values())}function tt(ht,rt,xt){var Zt;let Rn=null!==(Zt=Tn[ht])&&void 0!==Zt?Zt:ht;xt&&(Rn+=`-${xt}`);const Gn=Rn.match(/\s|\//),cn=rt.match(/\s|\//);if(Gn||cn){const gr=[`Unable to register library "${Rn}" with version "${rt}":`];return Gn&&gr.push(`library name "${Rn}" contains illegal characters (whitespace or "/")`),Gn&&cn&&gr.push("and"),cn&&gr.push(`version name "${rt}" contains illegal characters (whitespace or "/")`),void Tt.warn(gr.join(" "))}Qn(new w.wA(`${Rn}-version`,()=>({library:Rn,version:rt}),"VERSION"))}const Ot="firebase-heartbeat-database",pe=1,ve="firebase-heartbeat-store";let Te=null;function et(){return Te||(Te=function Et(ht,rt,{blocked:xt,upgrade:Zt,blocking:Rn,terminated:Gn}={}){const cn=indexedDB.open(ht,rt),gr=ke(cn);return Zt&&cn.addEventListener("upgradeneeded",nr=>{Zt(ke(cn.result),nr.oldVersion,nr.newVersion,ke(cn.transaction))}),xt&&cn.addEventListener("blocked",()=>xt()),gr.then(nr=>{Gn&&nr.addEventListener("close",()=>Gn()),Rn&&nr.addEventListener("versionchange",()=>Rn())}).catch(()=>{}),gr}(Ot,pe,{upgrade:(ht,rt)=>{0===rt&&ht.createObjectStore(ve)}}).catch(ht=>{throw ci.create("idb-open",{originalErrorMessage:ht.message})})),Te}function Rt(){return(Rt=(0,f.Z)(function*(ht){try{return(yield et()).transaction(ve).objectStore(ve).get(Ae(ht))}catch(rt){if(rt instanceof H.ZR)Tt.warn(rt.message);else{const xt=ci.create("idb-get",{originalErrorMessage:rt?.message});Tt.warn(xt.message)}}})).apply(this,arguments)}function zt(ht,rt){return Re.apply(this,arguments)}function Re(){return(Re=(0,f.Z)(function*(ht,rt){try{const Zt=(yield et()).transaction(ve,"readwrite");return yield Zt.objectStore(ve).put(rt,Ae(ht)),Zt.done}catch(xt){if(xt instanceof H.ZR)Tt.warn(xt.message);else{const Zt=ci.create("idb-set",{originalErrorMessage:xt?.message});Tt.warn(Zt.message)}}})).apply(this,arguments)}function Ae(ht){return`${ht.name}!${ht.options.appId}`}class Ge{constructor(rt){this.container=rt,this._heartbeatsCache=null;const xt=this.container.getProvider("app").getImmediate();this._storage=new tr(xt),this._heartbeatsCachePromise=this._storage.read().then(Zt=>(this._heartbeatsCache=Zt,Zt))}triggerHeartbeat(){var rt=this;return(0,f.Z)(function*(){const Zt=rt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Rn=Ft();if(null===rt._heartbeatsCache&&(rt._heartbeatsCache=yield rt._heartbeatsCachePromise),rt._heartbeatsCache.lastSentHeartbeatDate!==Rn&&!rt._heartbeatsCache.heartbeats.some(Gn=>Gn.date===Rn))return rt._heartbeatsCache.heartbeats.push({date:Rn,agent:Zt}),rt._heartbeatsCache.heartbeats=rt._heartbeatsCache.heartbeats.filter(Gn=>{const cn=new Date(Gn.date).valueOf();return Date.now()-cn<=2592e6}),rt._storage.overwrite(rt._heartbeatsCache)})()}getHeartbeatsHeader(){var rt=this;return(0,f.Z)(function*(){if(null===rt._heartbeatsCache&&(yield rt._heartbeatsCachePromise),null===rt._heartbeatsCache||0===rt._heartbeatsCache.heartbeats.length)return"";const xt=Ft(),{heartbeatsToSend:Zt,unsentEntries:Rn}=function rn(ht,rt=1024){const xt=[];let Zt=ht.slice();for(const Rn of ht){const Gn=xt.find(cn=>cn.agent===Rn.agent);if(Gn){if(Gn.dates.push(Rn.date),Ir(xt)>rt){Gn.dates.pop();break}}else if(xt.push({agent:Rn.agent,dates:[Rn.date]}),Ir(xt)>rt){xt.pop();break}Zt=Zt.slice(1)}return{heartbeatsToSend:xt,unsentEntries:Zt}}(rt._heartbeatsCache.heartbeats),Gn=(0,H.L)(JSON.stringify({version:2,heartbeats:Zt}));return rt._heartbeatsCache.lastSentHeartbeatDate=xt,Rn.length>0?(rt._heartbeatsCache.heartbeats=Rn,yield rt._storage.overwrite(rt._heartbeatsCache)):(rt._heartbeatsCache.heartbeats=[],rt._storage.overwrite(rt._heartbeatsCache)),Gn})()}}function Ft(){return(new Date).toISOString().substring(0,10)}class tr{constructor(rt){this.app=rt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,H.hl)()&&(0,H.eu)().then(()=>!0).catch(()=>!1)})()}read(){var rt=this;return(0,f.Z)(function*(){return(yield rt._canUseIndexedDBPromise)&&(yield function Le(ht){return Rt.apply(this,arguments)}(rt.app))||{heartbeats:[]}})()}overwrite(rt){var xt=this;return(0,f.Z)(function*(){var Zt;if(yield xt._canUseIndexedDBPromise){const Gn=yield xt.read();return zt(xt.app,{lastSentHeartbeatDate:null!==(Zt=rt.lastSentHeartbeatDate)&&void 0!==Zt?Zt:Gn.lastSentHeartbeatDate,heartbeats:rt.heartbeats})}})()}add(rt){var xt=this;return(0,f.Z)(function*(){var Zt;if(yield xt._canUseIndexedDBPromise){const Gn=yield xt.read();return zt(xt.app,{lastSentHeartbeatDate:null!==(Zt=rt.lastSentHeartbeatDate)&&void 0!==Zt?Zt:Gn.lastSentHeartbeatDate,heartbeats:[...Gn.heartbeats,...rt.heartbeats]})}})()}}function Ir(ht){return(0,H.L)(JSON.stringify({version:2,heartbeats:ht})).length}!function Ti(ht){Qn(new w.wA("platform-logger",rt=>new Be(rt),"PRIVATE")),Qn(new w.wA("heartbeat",rt=>new Ge(rt),"PRIVATE")),tt(nt,"0.9.3",ht),tt(nt,"0.9.3","esm2017"),tt("fire-js","")}("")},4859:(we,le,I)=>{I.d(le,{H0:()=>K,wA:()=>te});var f=I(9671),w=I(2090);class te{constructor(q,de,ge){this.name=q,this.instanceFactory=de,this.type=ge,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const H="[DEFAULT]";class X{constructor(q,de){this.name=q,this.container=de,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const de=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(de)){const ge=new w.BH;if(this.instancesDeferred.set(de,ge),this.isInitialized(de)||this.shouldAutoInitialize())try{const Ne=this.getOrInitializeService({instanceIdentifier:de});Ne&&ge.resolve(Ne)}catch{}}return this.instancesDeferred.get(de).promise}getImmediate(q){var de;const ge=this.normalizeInstanceIdentifier(q?.identifier),Ne=null!==(de=q?.optional)&&void 0!==de&&de;if(!this.isInitialized(ge)&&!this.shouldAutoInitialize()){if(Ne)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ge})}catch(Ke){if(Ne)return null;throw Ke}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function ee(se){return"EAGER"===se.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:H})}catch{}for(const[de,ge]of this.instancesDeferred.entries()){const Ne=this.normalizeInstanceIdentifier(de);try{const Ke=this.getOrInitializeService({instanceIdentifier:Ne});ge.resolve(Ke)}catch{}}}}clearInstance(q=H){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,f.Z)(function*(){const de=Array.from(q.instances.values());yield Promise.all([...de.filter(ge=>"INTERNAL"in ge).map(ge=>ge.INTERNAL.delete()),...de.filter(ge=>"_delete"in ge).map(ge=>ge._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=H){return this.instances.has(q)}getOptions(q=H){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:de={}}=q,ge=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(ge))throw Error(`${this.name}(${ge}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ne=this.getOrInitializeService({instanceIdentifier:ge,options:de});for(const[Ke,$e]of this.instancesDeferred.entries())ge===this.normalizeInstanceIdentifier(Ke)&&$e.resolve(Ne);return Ne}onInit(q,de){var ge;const Ne=this.normalizeInstanceIdentifier(de),Ke=null!==(ge=this.onInitCallbacks.get(Ne))&&void 0!==ge?ge:new Set;Ke.add(q),this.onInitCallbacks.set(Ne,Ke);const $e=this.instances.get(Ne);return $e&&q($e,Ne),()=>{Ke.delete(q)}}invokeOnInitCallbacks(q,de){const ge=this.onInitCallbacks.get(de);if(ge)for(const Ne of ge)try{Ne(q,de)}catch{}}getOrInitializeService({instanceIdentifier:q,options:de={}}){let ge=this.instances.get(q);if(!ge&&this.component&&(ge=this.component.instanceFactory(this.container,{instanceIdentifier:(se=q,se===H?void 0:se),options:de}),this.instances.set(q,ge),this.instancesOptions.set(q,de),this.invokeOnInitCallbacks(ge,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,ge)}catch{}var se;return ge||null}normalizeInstanceIdentifier(q=H){return this.component?this.component.multipleInstances?q:H:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class K{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const de=this.getProvider(q.name);if(de.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);de.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const de=new X(q,this);return this.providers.set(q,de),de}getProviders(){return Array.from(this.providers.values())}}},1877:(we,le,I)=>{I.d(le,{Yd:()=>ee,in:()=>w});const f=[];var w=(()=>{return(q=w||(w={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",w;var q})();const te={debug:w.DEBUG,verbose:w.VERBOSE,info:w.INFO,warn:w.WARN,error:w.ERROR,silent:w.SILENT},H=w.INFO,X={[w.DEBUG]:"log",[w.VERBOSE]:"log",[w.INFO]:"info",[w.WARN]:"warn",[w.ERROR]:"error"},ie=(q,de,...ge)=>{if(de<q.logLevel)return;const Ne=(new Date).toISOString(),Ke=X[de];if(!Ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${de})`);console[Ke](`[${Ne}]  ${q.name}:`,...ge)};class ee{constructor(de){this.name=de,this._logLevel=H,this._logHandler=ie,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(de){if(!(de in w))throw new TypeError(`Invalid value "${de}" assigned to \`logLevel\``);this._logLevel=de}setLogLevel(de){this._logLevel="string"==typeof de?te[de]:de}get logHandler(){return this._logHandler}set logHandler(de){if("function"!=typeof de)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=de}get userLogHandler(){return this._userLogHandler}set userLogHandler(de){this._userLogHandler=de}debug(...de){this._userLogHandler&&this._userLogHandler(this,w.DEBUG,...de),this._logHandler(this,w.DEBUG,...de)}log(...de){this._userLogHandler&&this._userLogHandler(this,w.VERBOSE,...de),this._logHandler(this,w.VERBOSE,...de)}info(...de){this._userLogHandler&&this._userLogHandler(this,w.INFO,...de),this._logHandler(this,w.INFO,...de)}warn(...de){this._userLogHandler&&this._userLogHandler(this,w.WARN,...de),this._logHandler(this,w.WARN,...de)}error(...de){this._userLogHandler&&this._userLogHandler(this,w.ERROR,...de),this._logHandler(this,w.ERROR,...de)}}},825:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4650),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8555),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(515),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9751),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(9646),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6451),rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(233),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(4707),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3099),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9300),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4004),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4351),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7414),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8372),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(262),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5698),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2722),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(3900),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(5684),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5363),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1365),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(5026);const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(le,I){if(this.action=le,this.timestamp=I,this.type=PERFORM_ACTION,typeof le.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(le){this.timestamp=le,this.type=RESET}}class Rollback{constructor(le){this.timestamp=le,this.type=ROLLBACK}}class Commit{constructor(le){this.timestamp=le,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(le){this.id=le,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(le,I,f=!0){this.start=le,this.end=I,this.active=f,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(le){this.index=le,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(le){this.actionId=le,this.type=JUMP_TO_ACTION}}class ImportState{constructor(le){this.nextLiftedState=le,this.type=IMPORT_STATE}}class LockChanges{constructor(le){this.status=le,this.type=LOCK_CHANGES}}class PauseRecording{constructor(le){this.status=le,this.type=PAUSE_RECORDING}}class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(we){const le={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},I="function"==typeof we?we():we,te=Object.assign({},le,{features:I.features||!!I.logOnly&&{pause:!0,export:!0,test:!0}||le.features},I);if(te.maxAge&&te.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${te.maxAge}`);return te}function difference(we,le){return we.filter(I=>le.indexOf(I)<0)}function unliftState(we){const{computedStates:le,currentStateIndex:I}=we;if(I>=le.length){const{state:w}=le[le.length-1];return w}const{state:f}=le[I];return f}function unliftAction(we){return we.actionsById[we.nextActionId-1]}function liftAction(we){return new PerformAction(we,+Date.now())}function sanitizeActions(we,le){return Object.keys(le).reduce((I,f)=>{const w=Number(f);return I[w]=sanitizeAction(we,le[w],w),I},{})}function sanitizeAction(we,le,I){return{...le,action:we(le.action,I)}}function sanitizeStates(we,le){return le.map((I,f)=>({state:sanitizeState(we,I.state,f),error:I.error}))}function sanitizeState(we,le,I){return we(le,I)}function shouldFilterActions(we){return we.predicate||we.actionsSafelist||we.actionsBlocklist}function filterLiftedState(we,le,I,f){const w=[],te={},H=[];return we.stagedActionIds.forEach((X,ie)=>{const ee=we.actionsById[X];ee&&(ie&&isActionFiltered(we.computedStates[ie],ee,le,I,f)||(te[X]=ee,w.push(X),H.push(we.computedStates[ie])))}),{...we,stagedActionIds:w,actionsById:te,computedStates:H}}function isActionFiltered(we,le,I,f,w){const te=I&&!I(we,le.action),H=f&&!le.action.type.match(f.map(ie=>escapeRegExp(ie)).join("|")),X=w&&le.action.type.match(w.map(ie=>escapeRegExp(ie)).join("|"));return te||H||X}function escapeRegExp(we){return we.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}let DevtoolsDispatcher=(()=>{class we extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO{}return we.\u0275fac=function(){let le;return function(f){return(le||(le=_angular_core__WEBPACK_IMPORTED_MODULE_0__.n5z(we)))(f||we)}}(),we.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:we,factory:we.\u0275fac}),we})();const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Redux Devtools Extension");let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(we,le,I){this.config=le,this.dispatcher=I,this.devtoolsExtension=we,this.createActionStreams()}notify(we,le){if(this.devtoolsExtension)if(we.type===PERFORM_ACTION){if(le.isLocked||le.isPaused)return;const I=unliftState(le);if(shouldFilterActions(this.config)&&isActionFiltered(I,we,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const f=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,I,le.currentStateIndex):I,w=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,we,le.nextActionId):we;this.sendToReduxDevtools(()=>this.extensionConnection.send(w,f))}else{const I={...le,stagedActionIds:le.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,le.actionsById):le.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,le.computedStates):le.computedStates};this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,I,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.y(we=>{const le=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=le,le.init(),le.subscribe(I=>we.next(I)),le.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.E}createActionStreams(){const we=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()),le=we.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(X=>X.type===ExtensionActionTypes.START)),I=we.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(X=>X.type===ExtensionActionTypes.STOP)),f=we.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(X=>X.type===ExtensionActionTypes.DISPATCH),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(X=>this.unwrapAction(X.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)(X=>X.type===IMPORT_STATE?this.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(ie=>ie.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(()=>X),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.K)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(X)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(X))),te=we.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(X=>X.type===ExtensionActionTypes.ACTION),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(X=>this.unwrapAction(X.payload))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(I)),H=f.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(I));this.start$=le.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(I)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>te)),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>H))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(we){const le={name:we.name,features:we.features,serialize:we.serialize,autoPause:we.autoPause??!1};return!1!==we.maxAge&&(le.maxAge=we.maxAge),le}sendToReduxDevtools(we){try{we()}catch(le){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",le)}}}return DevtoolsExtension.\u0275fac=function we(le){return new(le||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})();const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(we,le,I,f,w){if(f)return{state:I,error:"Interrupted by an error up the chain"};let H,te=I;try{te=we(I,le)}catch(X){H=X.toString(),w.handleError(X)}return{state:te,error:H}}function recomputeStates(we,le,I,f,w,te,H,X,ie){if(le>=we.length&&we.length===te.length)return we;const ee=we.slice(0,le),K=te.length-(ie?1:0);for(let se=le;se<K;se++){const q=te[se],de=w[q].action,ge=ee[se-1],Ne=ge?ge.state:f,Ke=ge?ge.error:void 0,Qe=H.indexOf(q)>-1?ge:computeNextEntry(I,de,Ne,Ke,X);ee.push(Qe)}return ie&&ee.push(we[we.length-1]),ee}function liftInitialState(we,le){return{monitorState:le(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:we,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(we,le,I,f,w={}){return te=>(H,X)=>{let{monitorState:ie,actionsById:ee,nextActionId:K,stagedActionIds:se,skippedActionIds:q,committedState:de,currentStateIndex:ge,computedStates:Ne,isLocked:Ke,isPaused:$e}=H||le;function Qe(Ye){let qe=Ye,ke=se.slice(1,qe+1);for(let Fe=0;Fe<ke.length;Fe++){if(Ne[Fe+1].error){qe=Fe,ke=se.slice(1,qe+1);break}delete ee[ke[Fe]]}q=q.filter(Fe=>-1===ke.indexOf(Fe)),se=[0,...se.slice(qe+1)],de=Ne[qe].state,Ne=Ne.slice(qe),ge=ge>qe?ge-qe:0}function Ve(){ee={0:liftAction(INIT_ACTION)},K=1,se=[0],q=[],de=Ne[ge].state,ge=0,Ne=[]}H||(ee=Object.create(ee));let We=0;switch(X.type){case LOCK_CHANGES:Ke=X.status,We=1/0;break;case PAUSE_RECORDING:$e=X.status,$e?(se=[...se,K],ee[K]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),K++,We=se.length-1,Ne=Ne.concat(Ne[Ne.length-1]),ge===se.length-2&&ge++,We=1/0):Ve();break;case RESET:ee={0:liftAction(INIT_ACTION)},K=1,se=[0],q=[],de=we,ge=0,Ne=[];break;case COMMIT:Ve();break;case ROLLBACK:ee={0:liftAction(INIT_ACTION)},K=1,se=[0],q=[],ge=0,Ne=[];break;case TOGGLE_ACTION:{const{id:Ye}=X;q=-1===q.indexOf(Ye)?[Ye,...q]:q.filter(ke=>ke!==Ye),We=se.indexOf(Ye);break}case SET_ACTIONS_ACTIVE:{const{start:Ye,end:qe,active:ke}=X,Fe=[];for(let Et=Ye;Et<qe;Et++)Fe.push(Et);q=ke?difference(q,Fe):[...q,...Fe],We=se.indexOf(Ye);break}case JUMP_TO_STATE:ge=X.index,We=1/0;break;case JUMP_TO_ACTION:{const Ye=se.indexOf(X.actionId);-1!==Ye&&(ge=Ye),We=1/0;break}case SWEEP:se=difference(se,q),q=[],ge=Math.min(ge,se.length-1);break;case PERFORM_ACTION:{if(Ke)return H||le;if($e||H&&isActionFiltered(H.computedStates[ge],X,w.predicate,w.actionsSafelist,w.actionsBlocklist)){const qe=Ne[Ne.length-1];Ne=[...Ne.slice(0,-1),computeNextEntry(te,X.action,qe.state,qe.error,I)],We=1/0;break}w.maxAge&&se.length===w.maxAge&&Qe(1),ge===se.length-1&&ge++;const Ye=K++;ee[Ye]=X,se=[...se,Ye],We=se.length-1;break}case IMPORT_STATE:({monitorState:ie,actionsById:ee,nextActionId:K,stagedActionIds:se,skippedActionIds:q,committedState:de,currentStateIndex:ge,computedStates:Ne,isLocked:Ke,isPaused:$e}=X.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg:We=0,w.maxAge&&se.length>w.maxAge&&(Ne=recomputeStates(Ne,We,te,de,ee,se,q,I,$e),Qe(se.length-w.maxAge),We=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb:if(Ne.filter(qe=>qe.error).length>0)We=0,w.maxAge&&se.length>w.maxAge&&(Ne=recomputeStates(Ne,We,te,de,ee,se,q,I,$e),Qe(se.length-w.maxAge),We=1/0);else{if(!$e&&!Ke){ge===se.length-1&&ge++;const qe=K++;ee[qe]=new PerformAction(X,+Date.now()),se=[...se,qe],We=se.length-1,Ne=recomputeStates(Ne,We,te,de,ee,se,q,I,$e)}Ne=Ne.map(qe=>({...qe,state:te(qe.state,RECOMPUTE_ACTION)})),ge=se.length-1,w.maxAge&&se.length>w.maxAge&&Qe(se.length-w.maxAge),We=1/0}break;default:We=1/0}return Ne=recomputeStates(Ne,We,te,de,ee,se,q,I,$e),ie=f(ie,X),{monitorState:ie,actionsById:ee,nextActionId:K,stagedActionIds:se,skippedActionIds:q,committedState:de,currentStateIndex:ge,computedStates:Ne,isLocked:Ke,isPaused:$e}}}let StoreDevtools=(()=>{class we{constructor(I,f,w,te,H,X,ie,ee){const K=liftInitialState(ie,ee.monitor),se=liftReducerWith(ie,K,X,ee.monitor,ee),q=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)(f.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.T)(1)),te.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(liftAction)),I,te.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Q)(rxjs__WEBPACK_IMPORTED_MODULE_18__.N)),de=w.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(se)),ge=new rxjs__WEBPACK_IMPORTED_MODULE_19__.t(1),Ne=q.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.M)(de),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.R)(({state:Ve},[We,Ye])=>{let qe=Ye(Ve,We);return We.type!==PERFORM_ACTION&&shouldFilterActions(ee)&&(qe=filterLiftedState(qe,ee.predicate,ee.actionsSafelist,ee.actionsBlocklist)),te.notify(We,qe),{state:qe,action:We}},{state:K,action:null})).subscribe(({state:Ve,action:We})=>{ge.next(Ve),We.type===PERFORM_ACTION&&H.next(We.action)}),Ke=te.start$.subscribe(()=>{this.refresh()}),$e=ge.asObservable(),Qe=$e.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(unliftState));this.extensionStartSubscription=Ke,this.stateSubscription=Ne,this.dispatcher=I,this.liftedState=$e,this.state=Qe}dispatch(I){this.dispatcher.next(I)}next(I){this.dispatcher.next(I)}error(I){}complete(){}performAction(I){this.dispatch(new PerformAction(I,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(I){this.dispatch(new ToggleAction(I))}jumpToAction(I){this.dispatch(new JumpToAction(I))}jumpToState(I){this.dispatch(new JumpToState(I))}importState(I){this.dispatch(new ImportState(I))}lockChanges(I){this.dispatch(new LockChanges(I))}pauseRecording(I){this.dispatch(new PauseRecording(I))}}return we.\u0275fac=function(I){return new(I||we)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_0__.qLn),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG))},we.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:we,factory:we.\u0275fac}),we})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(we,le){return Boolean(we)||le.monitor!==noMonitor}function createReduxDevtoolsExtension(){const we="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&typeof window[we]<"u"?window[we]:null}function provideStoreDevtools(we={}){return{\u0275providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:we},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.mK,useExisting:DevtoolsDispatcher}]}}function createStateObservable(we){return we.state}let StoreDevtoolsModule=(()=>{class we{static instrument(I={}){return{ngModule:we,providers:[...provideStoreDevtools(I).\u0275providers]}}}return we.\u0275fac=function(I){return new(I||we)},we.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.oAB({type:we}),we.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.cJS({}),we})()},8555:(we,le,I)=>{I.d(le,{Aw:()=>kn,CK:()=>ar,FR:()=>Yn,Ky:()=>$e,Lq:()=>Ys,P1:()=>zt,PH:()=>Ke,UO:()=>Ct,Y$:()=>Ar,Y6:()=>Je,Ys:()=>Ur,ZF:()=>he,cr:()=>An,mK:()=>ln,n$:()=>cr,on:()=>Br,qC:()=>Kn,qg:()=>Et,wb:()=>Ui,yh:()=>Qn});var f=I(4650),w=I(1135),te=I(9751),H=I(7579),X=I(233),ie=I(5363),ee=I(1365),K=I(5026),se=I(4813),q=I(4004),de=I(1884);const ge={};function Ke(Ee,it){if(ge[Ee]=(ge[Ee]||0)+1,"function"==typeof it)return Ve(Ee,(...gt)=>({...it(...gt),type:Ee}));switch(it?it._as:"empty"){case"empty":return Ve(Ee,()=>({type:Ee}));case"props":return Ve(Ee,gt=>({...gt,type:Ee}));default:throw new Error("Unexpected config.")}}function $e(){return{_as:"props",_p:void 0}}function Ve(Ee,it){return Object.defineProperty(it,"type",{value:Ee,writable:!1})}const Et="@ngrx/store/init";let Ct=(()=>{class Ee extends w.X{constructor(){super({type:Et})}next(ze){if("function"==typeof ze)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof ze>"u")throw new TypeError("Actions must be objects");if(typeof ze.type>"u")throw new TypeError("Actions must have a type property");super.next(ze)}complete(){}ngOnDestroy(){super.complete()}}return Ee.\u0275fac=function(ze){return new(ze||Ee)},Ee.\u0275prov=f.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const Ze=[Ct],Nt=new f.OlP("@ngrx/store Internal Root Guard"),bt=new f.OlP("@ngrx/store Internal Initial State"),Je=new f.OlP("@ngrx/store Initial State"),Be=new f.OlP("@ngrx/store Reducer Factory"),ct=new f.OlP("@ngrx/store Internal Reducer Factory Provider"),nt=new f.OlP("@ngrx/store Initial Reducers"),Pt=new f.OlP("@ngrx/store Internal Initial Reducers"),Tt=new f.OlP("@ngrx/store Store Features"),Ht=new f.OlP("@ngrx/store Internal Store Reducers"),ir=new f.OlP("@ngrx/store Internal Feature Reducers"),an=new f.OlP("@ngrx/store Internal Feature Configs"),Yt=new f.OlP("@ngrx/store Internal Store Features"),Fn=new f.OlP("@ngrx/store Internal Feature Reducers Token"),vn=new f.OlP("@ngrx/store Feature Reducers"),ur=new f.OlP("@ngrx/store User Provided Meta Reducers"),Fr=new f.OlP("@ngrx/store Meta Reducers"),Mn=new f.OlP("@ngrx/store Internal Resolved Meta Reducers"),hn=new f.OlP("@ngrx/store User Runtime Checks Config"),ii=new f.OlP("@ngrx/store Internal User Runtime Checks Config"),It=new f.OlP("@ngrx/store Internal Runtime Checks"),ut=new f.OlP("@ngrx/store Check if Action types are unique");function Lt(Ee,it={}){const ze=Object.keys(Ee),gt={};for(let Kt=0;Kt<ze.length;Kt++){const mn=ze[Kt];"function"==typeof Ee[mn]&&(gt[mn]=Ee[mn])}const $t=Object.keys(gt);return function(mn,Un){mn=void 0===mn?it:mn;let mr=!1;const di={};for(let fr=0;fr<$t.length;fr++){const Pr=$t[fr],qr=mn[Pr],Ca=(0,gt[Pr])(qr,Un);di[Pr]=Ca,mr=mr||Ca!==qr}return mr?di:mn}}function Kn(...Ee){return function(it){if(0===Ee.length)return it;const ze=Ee[Ee.length-1];return Ee.slice(0,-1).reduceRight(($t,Kt)=>Kt($t),ze(it))}}function kr(Ee,it){return Array.isArray(it)&&it.length>0&&(Ee=Kn.apply(null,[...it,Ee])),(ze,gt)=>{const $t=Ee(ze);return(Kt,mn)=>$t(Kt=void 0===Kt?gt:Kt,mn)}}new f.OlP("@ngrx/store Root Store Provider"),new f.OlP("@ngrx/store Feature State Provider");class cr extends te.y{}class ln extends Ct{}const Ui="@ngrx/store/update-reducers";let Qr=(()=>{class Ee extends w.X{constructor(ze,gt,$t,Kt){super(Kt($t,gt)),this.dispatcher=ze,this.initialState=gt,this.reducers=$t,this.reducerFactory=Kt}get currentReducers(){return this.reducers}addFeature(ze){this.addFeatures([ze])}addFeatures(ze){const gt=ze.reduce(($t,{reducers:Kt,reducerFactory:mn,metaReducers:Un,initialState:mr,key:di})=>{const fr="function"==typeof Kt?function is(Ee){const it=Array.isArray(Ee)&&Ee.length>0?Kn(...Ee):ze=>ze;return(ze,gt)=>(ze=it(ze),($t,Kt)=>ze($t=void 0===$t?gt:$t,Kt))}(Un)(Kt,mr):kr(mn,Un)(Kt,mr);return $t[di]=fr,$t},{});this.addReducers(gt)}removeFeature(ze){this.removeFeatures([ze])}removeFeatures(ze){this.removeReducers(ze.map(gt=>gt.key))}addReducer(ze,gt){this.addReducers({[ze]:gt})}addReducers(ze){this.reducers={...this.reducers,...ze},this.updateReducers(Object.keys(ze))}removeReducer(ze){this.removeReducers([ze])}removeReducers(ze){ze.forEach(gt=>{this.reducers=function Vn(Ee,it){return Object.keys(Ee).filter(ze=>ze!==it).reduce((ze,gt)=>Object.assign(ze,{[gt]:Ee[gt]}),{})}(this.reducers,gt)}),this.updateReducers(ze)}updateReducers(ze){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:Ui,features:ze})}ngOnDestroy(){this.complete()}}return Ee.\u0275fac=function(ze){return new(ze||Ee)(f.LFG(ln),f.LFG(Je),f.LFG(nt),f.LFG(Be))},Ee.\u0275prov=f.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const Tr=[Qr,{provide:cr,useExisting:Qr},{provide:ln,useExisting:Ct}];let Ar=(()=>{class Ee extends H.x{ngOnDestroy(){this.complete()}}return Ee.\u0275fac=function(){let it;return function(gt){return(it||(it=f.n5z(Ee)))(gt||Ee)}}(),Ee.\u0275prov=f.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const Tn=[Ar];class Yn extends te.y{}let dr=(()=>{class Ee extends w.X{constructor(ze,gt,$t,Kt){super(Kt);const di=ze.pipe((0,ie.Q)(X.N)).pipe((0,ee.M)(gt)).pipe((0,K.R)(un,{state:Kt}));this.stateSubscription=di.subscribe(({state:fr,action:Pr})=>{this.next(fr),$t.next(Pr)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return Ee.INIT=Et,Ee.\u0275fac=function(ze){return new(ze||Ee)(f.LFG(Ct),f.LFG(cr),f.LFG(Ar),f.LFG(Je))},Ee.\u0275prov=f.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();function un(Ee={state:void 0},[it,ze]){const{state:gt}=Ee;return{state:ze(gt,it),action:it}}const en=[dr,{provide:Yn,useExisting:dr}];let Qn=(()=>{class Ee extends te.y{constructor(ze,gt,$t){super(),this.actionsObserver=gt,this.reducerManager=$t,this.source=ze}select(ze,...gt){return Ur.call(null,ze,...gt)(this)}lift(ze){const gt=new Ee(this,this.actionsObserver,this.reducerManager);return gt.operator=ze,gt}dispatch(ze){this.actionsObserver.next(ze)}next(ze){this.actionsObserver.next(ze)}error(ze){this.actionsObserver.error(ze)}complete(){this.actionsObserver.complete()}addReducer(ze,gt){this.reducerManager.addReducer(ze,gt)}removeReducer(ze){this.reducerManager.removeReducer(ze)}}return Ee.\u0275fac=function(ze){return new(ze||Ee)(f.LFG(Yn),f.LFG(Ct),f.LFG(Qr))},Ee.\u0275prov=f.Yz7({token:Ee,factory:Ee.\u0275fac}),Ee})();const yi=[Qn];function Ur(Ee,it,...ze){return function($t){let Kt;if("string"==typeof Ee){const mn=[it,...ze].filter(Boolean);Kt=$t.pipe((0,se.j)(Ee,...mn))}else{if("function"!=typeof Ee)throw new TypeError(`Unexpected type '${typeof Ee}' in select operator, expected 'string' or 'function'`);Kt=$t.pipe((0,q.U)(mn=>Ee(mn,it)))}return Kt.pipe((0,de.x)())}}const mi="https://ngrx.io/guide/store/configuration/runtime-checks";function Vr(Ee){return void 0===Ee}function ci(Ee){return null===Ee}function _r(Ee){return Array.isArray(Ee)}function hr(Ee){return"object"==typeof Ee&&null!==Ee}function tt(Ee){return"function"==typeof Ee}let Ot=!1;function Te(Ee,it){return Ee===it}function Rt(Ee,it=Te,ze=Te){let Kt,gt=null,$t=null;return{memoized:function di(){if(void 0!==Kt)return Kt.result;if(!gt)return $t=Ee.apply(null,arguments),gt=arguments,$t;if(!function et(Ee,it,ze){for(let gt=0;gt<Ee.length;gt++)if(!ze(Ee[gt],it[gt]))return!0;return!1}(arguments,gt,it))return $t;const fr=Ee.apply(null,arguments);return gt=arguments,ze($t,fr)?$t:($t=fr,fr)},reset:function mn(){gt=null,$t=null},setResult:function Un(fr){Kt={result:fr}},clearResult:function mr(){Kt=void 0}}}function zt(...Ee){return function Ae(Ee,it={stateFn:Re}){return function(...ze){let gt=ze;if(Array.isArray(gt[0])){const[fr,...Pr]=gt;gt=[...fr,...Pr]}const $t=gt.slice(0,gt.length-1),Kt=gt[gt.length-1],mn=$t.filter(fr=>fr.release&&"function"==typeof fr.release),Un=Ee(function(...fr){return Kt.apply(null,fr)}),mr=Rt(function(fr,Pr){return it.stateFn.apply(null,[fr,$t,Pr,Un])});return Object.assign(mr.memoized,{release:function di(){mr.reset(),Un.reset(),mn.forEach(fr=>fr.release())},projector:Un.memoized,setResult:mr.setResult,clearResult:mr.clearResult})}}(Rt)(...Ee)}function Re(Ee,it,ze,gt){if(void 0===ze){const Kt=it.map(mn=>mn(Ee));return gt.memoized.apply(null,Kt)}const $t=it.map(Kt=>Kt(Ee,ze));return gt.memoized.apply(null,[...$t,ze])}function he(Ee){return zt(it=>{const ze=it[Ee];return!function ve(){return Ot}()&&(0,f.X6Q)()&&!(Ee in it)&&console.warn(`@ngrx/store: The feature name "${Ee}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${Ee}', ...) or StoreModule.forFeature('${Ee}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),ze},it=>it)}function rn(Ee,it){return it instanceof f.OlP?Ee.get(it):it}function tr(Ee,it,ze){return ze.map((gt,$t)=>{if(it[$t]instanceof f.OlP){const Kt=Ee.get(it[$t]);return{key:gt.key,reducerFactory:Kt.reducerFactory?Kt.reducerFactory:Lt,metaReducers:Kt.metaReducers?Kt.metaReducers:[],initialState:Kt.initialState}}return gt})}function Ir(Ee,it){return it.map(gt=>gt instanceof f.OlP?Ee.get(gt):gt)}function Ti(Ee){return"function"==typeof Ee?Ee():Ee}function ht(Ee,it){return Ee.concat(it)}function rt(Ee){if(Ee)throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function Zt(Ee){Object.freeze(Ee);const it=tt(Ee);return Object.getOwnPropertyNames(Ee).forEach(ze=>{if(!ze.startsWith("\u0275")&&function Oe(Ee,it){return Object.prototype.hasOwnProperty.call(Ee,it)}(Ee,ze)&&(!it||"caller"!==ze&&"callee"!==ze&&"arguments"!==ze)){const gt=Ee[ze];(hr(gt)||tt(gt))&&!Object.isFrozen(gt)&&Zt(gt)}}),Ee}function Gn(Ee,it=[]){return(Vr(Ee)||ci(Ee))&&0===it.length?{path:["root"],value:Ee}:Object.keys(Ee).reduce((gt,$t)=>{if(gt)return gt;const Kt=Ee[$t];return function Se(Ee){return tt(Ee)&&Ee.hasOwnProperty("\u0275cmp")}(Kt)?gt:!(Vr(Kt)||ci(Kt)||function Yi(Ee){return"number"==typeof Ee}(Kt)||function Hn(Ee){return"boolean"==typeof Ee}(Kt)||function Vi(Ee){return"string"==typeof Ee}(Kt)||_r(Kt))&&(function Jr(Ee){if(!function Ri(Ee){return hr(Ee)&&!_r(Ee)}(Ee))return!1;const it=Object.getPrototypeOf(Ee);return it===Object.prototype||null===it}(Kt)?Gn(Kt,[...it,$t]):{path:[...it,$t],value:Kt})},!1)}function cn(Ee,it){if(!1===Ee)return;const ze=Ee.path.join("."),gt=new Error(`Detected unserializable ${it} at "${ze}". ${mi}#strict${it}serializability`);throw gt.value=Ee.value,gt.unserializablePath=ze,gt}function nr(Ee){return(0,f.X6Q)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...Ee}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function ei({strictActionSerializability:Ee,strictStateSerializability:it}){return ze=>Ee||it?function Rn(Ee,it){return function(ze,gt){it.action(gt)&&cn(Gn(gt),"action");const $t=Ee(ze,gt);return it.state()&&cn(Gn($t),"state"),$t}}(ze,{action:gt=>Ee&&!xs(gt),state:()=>it}):ze}function zr({strictActionImmutability:Ee,strictStateImmutability:it}){return ze=>Ee||it?function xt(Ee,it){return function(ze,gt){const $t=it.action(gt)?Zt(gt):gt,Kt=Ee(ze,$t);return it.state()?Zt(Kt):Kt}}(ze,{action:gt=>Ee&&!xs(gt),state:()=>it}):ze}function xs(Ee){return Ee.type.startsWith("@ngrx")}function Ts({strictActionWithinNgZone:Ee}){return it=>Ee?function gr(Ee,it){return function(ze,gt){if(it.action(gt)&&!f.R0b.isInAngularZone())throw new Error(`Action '${gt.type}' running outside NgZone. ${mi}#strictactionwithinngzone`);return Ee(ze,gt)}}(it,{action:ze=>Ee&&!xs(ze)}):it}function _i(Ee){return[{provide:ii,useValue:Ee},{provide:hn,useFactory:kt,deps:[ii]},{provide:It,deps:[hn],useFactory:nr},{provide:Fr,multi:!0,deps:[It],useFactory:zr},{provide:Fr,multi:!0,deps:[It],useFactory:ei},{provide:Fr,multi:!0,deps:[It],useFactory:Ts}]}function Kr(){return[{provide:ut,multi:!0,deps:[It],useFactory:xn}]}function kt(Ee){return Ee}function xn(Ee){if(!Ee.strictActionTypeUniqueness)return;const it=Object.entries(ge).filter(([,ze])=>ze>1).map(([ze])=>ze);if(it.length)throw new Error(`Action types are registered more than once, ${it.map(ze=>`"${ze}"`).join(", ")}. ${mi}#strictactiontypeuniqueness`)}function Sn(Ee,it){return[{provide:Nt,useFactory:rt,deps:[[Qn,new f.FiY,new f.tp0]]},{provide:bt,useValue:it.initialState},{provide:Je,useFactory:Ti,deps:[bt]},{provide:Pt,useValue:Ee},{provide:Ht,useExisting:Ee instanceof f.OlP?Ee:Pt},{provide:nt,deps:[f.zs3,Pt,[new f.tBr(Ht)]],useFactory:rn},{provide:ur,useValue:it.metaReducers?it.metaReducers:[]},{provide:Mn,deps:[Fr,ur],useFactory:ht},{provide:ct,useValue:it.reducerFactory?it.reducerFactory:Lt},{provide:Be,deps:[ct,Mn],useFactory:kr},Ze,Tr,Tn,en,yi,_i(it.runtimeChecks),Kr()]}function si(Ee,it,ze={}){return[{provide:an,multi:!0,useValue:Ee instanceof Object?{}:ze},{provide:Tt,multi:!0,useValue:{key:Ee instanceof Object?Ee.name:Ee,reducerFactory:ze instanceof f.OlP||!ze.reducerFactory?Lt:ze.reducerFactory,metaReducers:ze instanceof f.OlP||!ze.metaReducers?[]:ze.metaReducers,initialState:ze instanceof f.OlP||!ze.initialState?void 0:ze.initialState}},{provide:Yt,deps:[f.zs3,an,Tt],useFactory:tr},{provide:ir,multi:!0,useValue:Ee instanceof Object?Ee.reducer:it},{provide:Fn,multi:!0,useExisting:it instanceof f.OlP?it:ir},{provide:vn,multi:!0,deps:[f.zs3,ir,[new f.tBr(Fn)]],useFactory:Ir},Kr()]}let An=(()=>{class Ee{constructor(ze,gt,$t,Kt,mn,Un){}}return Ee.\u0275fac=function(ze){return new(ze||Ee)(f.LFG(Ct),f.LFG(cr),f.LFG(Ar),f.LFG(Qn),f.LFG(Nt,8),f.LFG(ut,8))},Ee.\u0275mod=f.oAB({type:Ee}),Ee.\u0275inj=f.cJS({}),Ee})(),ar=(()=>{class Ee{constructor(ze,gt,$t,Kt,mn){this.features=ze,this.featureReducers=gt,this.reducerManager=$t;const Un=ze.map((mr,di)=>{const Pr=gt.shift()[di];return{...mr,reducers:Pr,initialState:Ti(mr.initialState)}});$t.addFeatures(Un)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return Ee.\u0275fac=function(ze){return new(ze||Ee)(f.LFG(Yt),f.LFG(vn),f.LFG(Qr),f.LFG(An),f.LFG(ut,8))},Ee.\u0275mod=f.oAB({type:Ee}),Ee.\u0275inj=f.cJS({}),Ee})(),kn=(()=>{class Ee{static forRoot(ze,gt={}){return{ngModule:An,providers:[...Sn(ze,gt)]}}static forFeature(ze,gt,$t={}){return{ngModule:ar,providers:[...si(ze,gt,$t)]}}}return Ee.\u0275fac=function(ze){return new(ze||Ee)},Ee.\u0275mod=f.oAB({type:Ee}),Ee.\u0275inj=f.cJS({}),Ee})();function Br(...Ee){return{reducer:Ee.pop(),types:Ee.map(gt=>gt.type)}}function Ys(Ee,...it){const ze=new Map;for(const gt of it)for(const $t of gt.types){const Kt=ze.get($t);ze.set($t,Kt?(Un,mr)=>gt.reducer(Kt(Un,mr),mr):gt.reducer)}return function(gt=Ee,$t){const Kt=ze.get($t.type);return Kt?Kt(gt,$t):gt}}},4440:(we,le,I)=>{I.d(le,{C5:()=>ii,G2:()=>ur,gm:()=>hn});var f=I(9671),w=I(4650),te=I(6197),H=I(9751),X=I(4004),ie=I(6895),ee=I(4793),K=I(529),se=I(259),q=I(9996),de=I(4716);class Je{constructor(){this.db=(0,te.N8)()}create(ut,Ue={}){let yt=(0,te.VF)((0,te.iH)(this.db,ut));return(0,te.t8)(yt,{key:yt.key,...Ue}).then(),Promise.resolve({key:yt.key})}set(ut,Ue={}){var yt=this;return(0,f.Z)(function*(){const Lt=(0,te.iH)(yt.db,ut);yield(0,te.t8)(Lt,Ue)})()}update(ut,Ue={}){var yt=this;return(0,f.Z)(function*(){const Lt=(0,te.iH)(yt.db,ut);yield(0,te.Vx)(Lt,Ue)})()}remove(ut){var Ue=this;return(0,f.Z)(function*(){const yt=(0,te.iH)(Ue.db,ut);yield(0,te.Od)(yt)})()}readRealTime(ut){return new H.y(Ue=>{(0,te.jM)((0,te.iH)(this.db,ut),yt=>{let Lt=[];yt.exists()?(yt.forEach(Vn=>{Lt.push({key:Vn.key,...Vn.val()})}),Ue.next(Lt)):Ue.next([])})})}readOnceWithObserver(ut){return(0,te.jM)((0,te.iH)(this.db,ut),Ue=>Ue.val(),{onlyOnce:!0})}readOnce(ut){return new Promise((Ue,yt)=>{(0,te.U2)((0,te.iH)(this.db,ut)).then(Lt=>{Lt.exists()?Ue({key:Lt.key,...Lt.val()}):Ue([])}).catch(Lt=>{yt(Lt)})})}readReal(ut){return new H.y(Ue=>{(0,te.jM)((0,te.iH)(this.db,ut),yt=>{yt.exists()?Ue.next(yt.val()):Ue.next(null)})})}updateCounter(ut,Ue=!0){return new Promise((yt,Lt)=>{const Vn=(0,te.iH)(this.db);(0,te.U2)((0,te.iU)(Vn,"counter")).then(Kn=>{(0,te.Vx)((0,te.iH)(this.db,ut),{counter:(0,te.nP)(Ue?1:-1)}).then(kr=>{yt(kr)})})})}others(){}checkPresence(ut){const Ue=(0,te.iH)(this.db,`${ut}/connections`),yt=(0,te.iH)(this.db,`${ut}/lastOnline`),Lt=(0,te.iH)(this.db,".info/connected");(0,te.jM)(Lt,Vn=>{if(!0===Vn.val()){const Kn=(0,te.VF)(Ue);(0,te.ae)(Kn).remove().then(),(0,te.t8)(Kn,!0).then(),(0,te.ae)(yt).set((0,te.Bt)()).then()}})}onDisconnect(ut){const Ue=(0,te.iH)(this.db,ut);return(0,te.ae)(Ue)}detectingConnectionState(){return new H.y(ut=>{const Ue=(0,te.iH)(this.db,".info/connected");(0,te.jM)(Ue,yt=>{ut.next(yt.val())})})}}let Be=(()=>{class It extends Je{constructor(){super()}get timestamp(){return(new Date).getTime()}getPresence(Ue){return this.readReal(`status/${Ue}`)}getUserOnlineCounts(){return this.readRealTime("status").pipe((0,X.U)(Ue=>Ue.reduce((yt,Lt)=>"online"===Lt.status?++yt:yt,0)))}getTotalUserCounts(){return this.readRealTime("status").pipe((0,X.U)(Ue=>Ue))}setPresence(Ue,yt){return this.set(`status/${Ue}`,{status:yt,timestamp:this.timestamp})}updateOnAway(Ue){document.onvisibilitychange=yt=>{"hidden"===document.visibilityState?this.setPresence(Ue,"away"):this.setPresence(Ue,"online")}}updateOnUser(Ue){this.detectingConnectionState().pipe((0,X.U)(Lt=>Lt?"online":"offline")).subscribe(Lt=>this.setPresence(Ue,Lt))}updateOnDisconnect(Ue){this.onDisconnect(`status/${Ue}`).update({status:"offline",timestamp:this.timestamp})}configure(Ue){this.updateOnAway(Ue),this.updateOnUser(Ue),this.updateOnDisconnect(Ue)}configureUserPresenceByLocal(){let Ue=localStorage.getItem("uid");this.checkingUser(Ue)}configureUserPresenceByLogin(Ue,yt={}){this.checkingUser(Ue,yt)}checkingUser(Ue,yt={}){Ue?this.configure(Ue):this.create("status",{uid:Ue,...yt}).then(Lt=>{localStorage.setItem("uid",Lt.key),this.configure(Lt.key)})}}return It.\u0275fac=function(Ue){return new(Ue||It)},It.\u0275prov=w.Yz7({token:It,factory:It.\u0275fac}),It})();const nt={provide:w.ip1,useFactory:function ct(It){return()=>new Promise(function(){var ut=(0,f.Z)(function*(Ue,yt){yield It.configureUserPresenceByLocal(),Ue("done")});return function(Ue,yt){return ut.apply(this,arguments)}}())},deps:[Be],multi:!0};let Tt=(()=>{class It extends Je{constructor(Ue){super(),this.router=Ue}config(){this.router.events.subscribe(Ue=>{Ue instanceof ee.m2&&(/[#$\[\]'?]/g.test(Ue.url)||this.updateCounter(`router-activities${Ue.url}`).then())})}}return It.\u0275fac=function(Ue){return new(Ue||It)(w.LFG(ee.F0))},It.\u0275prov=w.Yz7({token:It,factory:It.\u0275fac}),It})();const ir={provide:w.ip1,useFactory:It=>()=>It.config(),multi:!0,deps:[Tt]},Yt={provide:K.TP,useClass:(()=>{class It extends Je{constructor(){super()}intercept(Ue,yt){return this.updateCounter("server-activities").then(),yt.handle(Ue)}}return It.\u0275fac=function(Ue){return new(Ue||It)},It.\u0275prov=w.Yz7({token:It,factory:It.\u0275fac}),It})(),multi:!0},Fn=new w.OlP(null);function vn(It){return()=>{const ut=(0,se.ZF)(It);(0,te.N8)(ut),(0,q.ad)(ut),console.log(`no of Firebase app:: ${(0,se.C6)().length}`)}}let ur=(()=>{class It{constructor(Ue){this.config=Ue}static initializeApp(Ue){return{ngModule:It,providers:[{provide:Fn,useFactory:vn(Ue)}]}}static initialize(Ue){let yt=[];return Ue.activityInHttp&&yt.push(Yt),Ue.activityInRouter&&yt.push(ir),Ue.activityOfAnonymousUser&&yt.push(nt),{ngModule:It,providers:yt}}}return It.\u0275fac=function(Ue){return new(Ue||It)(w.LFG(Fn))},It.\u0275mod=w.oAB({type:It}),It.\u0275inj=w.cJS({providers:[Tt,Be],imports:[ie.ez]}),It})();const Fr="https://rktect-rest-default-rtdb.firebaseio.com/users.json",Mn="kpPiWBeAJJ3KlXNQ1tULjJcYLWZoLMwdEpDRzKSc";let hn=(()=>{class It{constructor(Ue){this.http=Ue}getUsers(){return this.http.get(Fr,{params:{auth:Mn}})}createUser(Ue){return this.http.post(Fr,Ue,{params:{auth:Mn}})}}return It.\u0275fac=function(Ue){return new(Ue||It)(w.LFG(K.eN))},It.\u0275prov=w.Yz7({token:It,factory:It.\u0275fac,providedIn:"root"}),It})();class ii{constructor(){this.db=(0,q.ad)(),this.auth=(0,de.v0)(),(0,q.ST)(this.db).catch(ut=>{"failed-precondition"==ut.code?console.log("persistance failed"):"unimplemented"==ut.code&&console.log("persistance not available")})}get colRef(){return(0,q.hJ)(this.db,this.collectionPath)}getCollectionData(){return new Promise((ut,Ue)=>{(0,q.PL)(this.colRef).then(yt=>{let Lt=this.setData2(yt);ut(Lt)}).catch(yt=>{Ue(yt.message)})})}getSingleDoc(ut){const Ue=(0,q.JU)(this.db,this.collectionPath,ut);return new Promise((yt,Lt)=>(0,q.QT)(Ue).then(Vn=>{let Kn=this.transformSingleDoc(Vn);yt(Kn)}).catch(Vn=>{Lt(Vn.message)}))}getSingleDocFromCache(ut){var Ue=this;return(0,f.Z)(function*(){const yt=(0,q.JU)(Ue.db,Ue.collectionPath,ut);try{const Lt=yield(0,q.kl)(yt);console.log("Cached document data:",Lt.data())}catch(Lt){console.log("Error getting cached document:",Lt)}})()}getCollectionRealTime(ut){return this.unsubscribe=(0,q.cf)(this.colRef,Ue=>{ut(this.setData2(Ue))})}getDocRealTime(ut,Ue){const yt=(0,q.JU)(this.db,this.collectionPath,ut);return(0,q.cf)(yt,Lt=>{Ue(this.transformSingleDoc(Lt))})}g(){(0,q.cf)(void 0,Ue=>{Ue.docChanges().forEach(yt=>{"added"===yt.type&&console.log("New city: ",yt.doc.data()),"modified"===yt.type&&console.log("Modified city: ",yt.doc.data()),"removed"===yt.type&&console.log("Removed city: ",yt.doc.data())})})}addingDoc(ut={}){return(0,q.ET)(this.colRef,{createdAt:(0,q.Bt)(),updatedAt:(0,q.Bt)(),...ut})}deletingDoc(ut){const Ue=(0,q.JU)(this.db,this.collectionPath,ut);return(0,q.oe)(Ue)}updatingDoc(ut,Ue){const yt=(0,q.JU)(this.db,this.collectionPath,ut);return(0,q.r7)(yt,{updatedAt:(0,q.Bt)(),...Ue})}signUpWithEmailPass({email:ut,password:Ue}){return(0,de.Xb)(this.auth,ut,Ue).then(yt=>Promise.resolve(yt.user)).catch(yt=>Promise.reject(yt.message))}signInWithEmailPass({email:ut,password:Ue}){return(0,de.e5)(this.auth,ut,Ue).then(yt=>Promise.resolve(yt.user)).catch(yt=>Promise.reject(yt.message))}onSignOut(){return(0,de.w7)(this.auth).then(ut=>Promise.resolve(ut)).catch(ut=>Promise.reject(ut.message))}subscribingAuthChangedRealTime(ut){return(0,de.Aj)(this.auth,Ue=>{ut(Ue)})}getPaginationData1(ut={latestDoc:null,empty:!1,data:[]},Ue=5){return new Promise((yt,Lt)=>{const Vn=(0,q.IO)(this.colRef,(0,q.Xo)("createdAt"),(0,q.TQ)(ut.latestDoc||0),(0,q.b9)(Ue));(0,q.PL)(Vn).then(Kn=>{let kr=this.setData2(Kn);ut.latestDoc=Kn.docs[Kn.docs.length-1],ut.data=[...ut.data,...kr],ut.empty=Kn.empty,yt(ut)}).catch(Kn=>{Lt(Kn.message)})})}getPaginationData(ut={latestDoc:null,empty:!1,data:[],size:0},Ue=5){var yt=this;return(0,f.Z)(function*(){if(!ut.empty)try{const Lt=(0,q.IO)(yt.colRef,(0,q.Xo)("createdAt"),(0,q.TQ)(ut.latestDoc||0),(0,q.b9)(Ue)),Vn=yield(0,q.PL)(Lt);let Kn=yt.setData2(Vn);return ut.latestDoc=Vn.docs[Vn.docs.length-1],ut.data=[...ut.data,...Kn],ut.empty=Vn.empty,ut.size=Vn.size,ut}catch(Lt){return Lt}})()}unsubscribeRealTime(){this.unsubscribe()}nextPage(ut={latestDoc:null,empty:!1,data:[],size:0},Ue=5){var yt=this;return(0,f.Z)(function*(){const Lt=(0,q.IO)(yt.colRef,(0,q.Xo)("createdAt"),(0,q.TQ)(ut.latestDoc||0),(0,q.b9)(Ue));return yield yt.handlePagination(Lt)})()}prePage(ut={latestDoc:null,empty:!1,data:[],size:0},Ue=5){var yt=this;return(0,f.Z)(function*(){const Lt=(0,q.IO)(yt.colRef,(0,q.Xo)("createdAt"),(0,q.Lx)(ut.latestDoc||0),(0,q.b9)(Ue));return yield yt.handlePagination(Lt,!1)})()}setData(ut){return ut.docs.map(Ue=>({id:Ue.id,...Ue.data()}))}setData2(ut){let Ue=[];return ut.docs.forEach(yt=>{Ue.push({...yt.data(),id:yt.id})}),Ue}transformSingleDoc(ut){return{...ut.data(),id:ut.id}}handlePagination(ut,Ue=!0){var yt=this;return(0,f.Z)(function*(){try{const Lt=yield(0,q.PL)(ut);let Vn=yt.setData2(Lt);return{latestDoc:Ue?Lt.docs[Lt.docs.length-1]:Lt.docs[0],data:Vn,empty:Lt.empty,size:Lt.size}}catch(Lt){return Lt}})()}}},259:(we,le,I)=>{I.d(le,{C6:()=>f.C6,ZF:()=>f.ZF});var f=I(6881);(0,f.KN)("firebase","9.17.1","app")},4716:(we,le,I)=>{I.d(le,{hJ:()=>so,Xb:()=>ot,gK:()=>Zs,v0:()=>Bl,cx:()=>ou,Aj:()=>cl,e5:()=>Zr,rh:()=>fe,w7:()=>Xs});var f=I(9671),w=I(2090),te=I(6881),H=I(1877),X=I(655),ie=I(4859);const $e=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Qe=new w.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new H.Yd("@firebase/auth");function Ye(R,...v){We.logLevel<=H.in.ERROR&&We.error(`Auth (${te.Jn}): ${R}`,...v)}function qe(R,...v){throw Ct(R,...v)}function ke(R,...v){return Ct(R,...v)}function Fe(R,v,D){const L=Object.assign(Object.assign({},$e()),{[v]:D});return new w.LL("auth","Firebase",L).create(v,{appName:R.name})}function Ct(R,...v){if("string"!=typeof R){const D=v[0],L=[...v.slice(1)];return L[0]&&(L[0].appName=R.name),R._errorFactory.create(D,...L)}return Qe.create(R,...v)}function Ze(R,v,...D){if(!R)throw Ct(v,...D)}function Nt(R){const v="INTERNAL ASSERTION FAILED: "+R;throw Ye(v),new Error(v)}function bt(R,v){R||Nt(v)}const Je=new Map;function Be(R){bt(R instanceof Function,"Expected a class definition");let v=Je.get(R);return v?(bt(v instanceof R,"Instance stored in cache mismatched with class"),v):(v=new R,Je.set(R,v),v)}function Pt(){var R;return typeof self<"u"&&(null===(R=self.location)||void 0===R?void 0:R.href)||""}function Ht(){var R;return typeof self<"u"&&(null===(R=self.location)||void 0===R?void 0:R.protocol)||null}class Yt{constructor(v,D){this.shortDelay=v,this.longDelay=D,bt(D>v,"Short delay should be less than long delay!"),this.isMobile=(0,w.uI)()||(0,w.b$)()}get(){return function ir(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function Tt(){return"http:"===Ht()||"https:"===Ht()}()||(0,w.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fn(R,v){bt(R.emulator,"Emulator should always be set here");const{url:D}=R.emulator;return v?`${D}${v.startsWith("/")?v.slice(1):v}`:D}class vn{static initialize(v,D,L){this.fetchImpl=v,D&&(this.headersImpl=D),L&&(this.responseImpl=L)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Nt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Nt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Nt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ur={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Fr=new Yt(3e4,6e4);function Mn(R,v){return R.tenantId&&!v.tenantId?Object.assign(Object.assign({},v),{tenantId:R.tenantId}):v}function hn(R,v,D,L){return ii.apply(this,arguments)}function ii(){return(ii=(0,f.Z)(function*(R,v,D,L,re={}){return It(R,re,(0,f.Z)(function*(){let y={},_={};L&&("GET"===v?_=L:y={body:JSON.stringify(L)});const g=(0,w.xO)(Object.assign({key:R.config.apiKey},_)).slice(1),b=yield R._getAdditionalHeaders();return b["Content-Type"]="application/json",R.languageCode&&(b["X-Firebase-Locale"]=R.languageCode),vn.fetch()(Lt(R,R.config.apiHost,D,g),Object.assign({method:v,headers:b,referrerPolicy:"no-referrer"},y))}))})).apply(this,arguments)}function It(R,v,D){return ut.apply(this,arguments)}function ut(){return(ut=(0,f.Z)(function*(R,v,D){R._canInitEmulator=!1;const L=Object.assign(Object.assign({},ur),v);try{const re=new Vn(R),y=yield Promise.race([D(),re.promise]);re.clearNetworkTimeout();const _=yield y.json();if("needConfirmation"in _)throw Kn(R,"account-exists-with-different-credential",_);if(y.ok&&!("errorMessage"in _))return _;{const g=y.ok?_.errorMessage:_.error.message,[b,j]=g.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===b)throw Kn(R,"credential-already-in-use",_);if("EMAIL_EXISTS"===b)throw Kn(R,"email-already-in-use",_);if("USER_DISABLED"===b)throw Kn(R,"user-disabled",_);const ne=L[b]||b.toLowerCase().replace(/[_\s]+/g,"-");if(j)throw Fe(R,ne,j);qe(R,ne)}}catch(re){if(re instanceof w.ZR)throw re;qe(R,"network-request-failed")}})).apply(this,arguments)}function Ue(R,v,D,L){return yt.apply(this,arguments)}function yt(){return(yt=(0,f.Z)(function*(R,v,D,L,re={}){const y=yield hn(R,v,D,L,re);return"mfaPendingCredential"in y&&qe(R,"multi-factor-auth-required",{_serverResponse:y}),y})).apply(this,arguments)}function Lt(R,v,D,L){const re=`${v}${D}?${L}`;return R.config.emulator?Fn(R.config,re):`${R.config.apiScheme}://${re}`}class Vn{constructor(v){this.auth=v,this.timer=null,this.promise=new Promise((D,L)=>{this.timer=setTimeout(()=>L(ke(this.auth,"network-request-failed")),Fr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kn(R,v,D){const L={appName:R.name};D.email&&(L.email=D.email),D.phoneNumber&&(L.phoneNumber=D.phoneNumber);const re=ke(R,v,L);return re.customData._tokenResponse=D,re}function is(){return(is=(0,f.Z)(function*(R,v){return hn(R,"POST","/v1/accounts:delete",v)})).apply(this,arguments)}function Qr(){return(Qr=(0,f.Z)(function*(R,v){return hn(R,"POST","/v1/accounts:lookup",v)})).apply(this,arguments)}function Tr(R){if(R)try{const v=new Date(Number(R));if(!isNaN(v.getTime()))return v.toUTCString()}catch{}}function Yn(){return(Yn=(0,f.Z)(function*(R,v=!1){const D=(0,w.m9)(R),L=yield D.getIdToken(v),re=un(L);Ze(re&&re.exp&&re.auth_time&&re.iat,D.auth,"internal-error");const y="object"==typeof re.firebase?re.firebase:void 0,_=y?.sign_in_provider;return{claims:re,token:L,authTime:Tr(dr(re.auth_time)),issuedAtTime:Tr(dr(re.iat)),expirationTime:Tr(dr(re.exp)),signInProvider:_||null,signInSecondFactor:y?.sign_in_second_factor||null}})).apply(this,arguments)}function dr(R){return 1e3*Number(R)}function un(R){const[v,D,L]=R.split(".");if(void 0===v||void 0===D||void 0===L)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const re=(0,w.tV)(D);return re?JSON.parse(re):(Ye("Failed to decode base64 JWT payload"),null)}catch(re){return Ye("Caught error parsing JWT payload as JSON",re?.toString()),null}}function Qn(R,v){return yi.apply(this,arguments)}function yi(){return(yi=(0,f.Z)(function*(R,v,D=!1){if(D)return v;try{return yield v}catch(L){throw L instanceof w.ZR&&function Ur({code:R}){return"auth/user-disabled"===R||"auth/user-token-expired"===R}(L)&&R.auth.currentUser===R&&(yield R.auth.signOut()),L}})).apply(this,arguments)}class mi{constructor(v){this.user=v,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(v){var D;if(v){const L=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),L}{this.errorBackoff=3e4;const re=(null!==(D=this.user.stsTokenManager.expirationTime)&&void 0!==D?D:0)-Date.now()-3e5;return Math.max(0,re)}}schedule(v=!1){var D=this;if(!this.isRunning)return;const L=this.getInterval(v);this.timerId=setTimeout((0,f.Z)(function*(){yield D.iteration()}),L)}iteration(){var v=this;return(0,f.Z)(function*(){try{yield v.user.getIdToken(!0)}catch(D){return void("auth/network-request-failed"===D?.code&&v.schedule(!0))}v.schedule()})()}}class Vr{constructor(v,D){this.createdAt=v,this.lastLoginAt=D,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tr(this.lastLoginAt),this.creationTime=Tr(this.createdAt)}_copy(v){this.createdAt=v.createdAt,this.lastLoginAt=v.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ci(R){return _r.apply(this,arguments)}function _r(){return _r=(0,f.Z)(function*(R){var v;const D=R.auth,L=yield R.getIdToken(),re=yield Qn(R,function Ui(R,v){return Qr.apply(this,arguments)}(D,{idToken:L}));Ze(re?.users.length,D,"internal-error");const y=re.users[0];R._notifyReloadListener(y);const _=null!==(v=y.providerUserInfo)&&void 0!==v&&v.length?function hr(R){return R.map(v=>{var{providerId:D}=v,L=(0,X._T)(v,["providerId"]);return{providerId:D,uid:L.rawId||"",displayName:L.displayName||null,email:L.email||null,phoneNumber:L.phoneNumber||null,photoURL:L.photoUrl||null}})}(y.providerUserInfo):[],g=function Yi(R,v){return[...R.filter(L=>!v.some(re=>re.providerId===L.providerId)),...v]}(R.providerData,_),ne=!!R.isAnonymous&&!(R.email&&y.passwordHash||g?.length),_e={uid:y.localId,displayName:y.displayName||null,photoURL:y.photoUrl||null,email:y.email||null,emailVerified:y.emailVerified||!1,phoneNumber:y.phoneNumber||null,tenantId:y.tenantId||null,providerData:g,metadata:new Vr(y.createdAt,y.lastLoginAt),isAnonymous:ne};Object.assign(R,_e)}),_r.apply(this,arguments)}function Hn(){return(Hn=(0,f.Z)(function*(R){const v=(0,w.m9)(R);yield ci(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}function Jr(){return(Jr=(0,f.Z)(function*(R,v){const D=yield It(R,{},(0,f.Z)(function*(){const L=(0,w.xO)({grant_type:"refresh_token",refresh_token:v}).slice(1),{tokenApiHost:re,apiKey:y}=R.config,_=Lt(R,re,"/v1/token",`key=${y}`),g=yield R._getAdditionalHeaders();return g["Content-Type"]="application/x-www-form-urlencoded",vn.fetch()(_,{method:"POST",headers:g,body:L})}));return{accessToken:D.access_token,expiresIn:D.expires_in,refreshToken:D.refresh_token}})).apply(this,arguments)}class tt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(v){Ze(v.idToken,"internal-error"),Ze(typeof v.idToken<"u","internal-error"),Ze(typeof v.refreshToken<"u","internal-error");const D="expiresIn"in v&&typeof v.expiresIn<"u"?Number(v.expiresIn):function en(R){const v=un(R);return Ze(v,"internal-error"),Ze(typeof v.exp<"u","internal-error"),Ze(typeof v.iat<"u","internal-error"),Number(v.exp)-Number(v.iat)}(v.idToken);this.updateTokensAndExpiration(v.idToken,v.refreshToken,D)}getToken(v,D=!1){var L=this;return(0,f.Z)(function*(){return Ze(!L.accessToken||L.refreshToken,v,"user-token-expired"),D||!L.accessToken||L.isExpired?L.refreshToken?(yield L.refresh(v,L.refreshToken),L.accessToken):null:L.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(v,D){var L=this;return(0,f.Z)(function*(){const{accessToken:re,refreshToken:y,expiresIn:_}=yield function Ri(R,v){return Jr.apply(this,arguments)}(v,D);L.updateTokensAndExpiration(re,y,Number(_))})()}updateTokensAndExpiration(v,D,L){this.refreshToken=D||null,this.accessToken=v||null,this.expirationTime=Date.now()+1e3*L}static fromJSON(v,D){const{refreshToken:L,accessToken:re,expirationTime:y}=D,_=new tt;return L&&(Ze("string"==typeof L,"internal-error",{appName:v}),_.refreshToken=L),re&&(Ze("string"==typeof re,"internal-error",{appName:v}),_.accessToken=re),y&&(Ze("number"==typeof y,"internal-error",{appName:v}),_.expirationTime=y),_}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(v){this.accessToken=v.accessToken,this.refreshToken=v.refreshToken,this.expirationTime=v.expirationTime}_clone(){return Object.assign(new tt,this.toJSON())}_performRefresh(){return Nt("not implemented")}}function Se(R,v){Ze("string"==typeof R||typeof R>"u","internal-error",{appName:v})}class Oe{constructor(v){var{uid:D,auth:L,stsTokenManager:re}=v,y=(0,X._T)(v,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=D,this.auth=L,this.stsTokenManager=re,this.accessToken=re.accessToken,this.displayName=y.displayName||null,this.email=y.email||null,this.emailVerified=y.emailVerified||!1,this.phoneNumber=y.phoneNumber||null,this.photoURL=y.photoURL||null,this.isAnonymous=y.isAnonymous||!1,this.tenantId=y.tenantId||null,this.providerData=y.providerData?[...y.providerData]:[],this.metadata=new Vr(y.createdAt||void 0,y.lastLoginAt||void 0)}getIdToken(v){var D=this;return(0,f.Z)(function*(){const L=yield Qn(D,D.stsTokenManager.getToken(D.auth,v));return Ze(L,D.auth,"internal-error"),D.accessToken!==L&&(D.accessToken=L,yield D.auth._persistUserIfCurrent(D),D.auth._notifyListenersIfCurrent(D)),L})()}getIdTokenResult(v){return function Tn(R){return Yn.apply(this,arguments)}(this,v)}reload(){return function Vi(R){return Hn.apply(this,arguments)}(this)}_assign(v){this!==v&&(Ze(this.uid===v.uid,this.auth,"internal-error"),this.displayName=v.displayName,this.photoURL=v.photoURL,this.email=v.email,this.emailVerified=v.emailVerified,this.phoneNumber=v.phoneNumber,this.isAnonymous=v.isAnonymous,this.tenantId=v.tenantId,this.providerData=v.providerData.map(D=>Object.assign({},D)),this.metadata._copy(v.metadata),this.stsTokenManager._assign(v.stsTokenManager))}_clone(v){return new Oe(Object.assign(Object.assign({},this),{auth:v,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(v){Ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=v,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(v){this.reloadListener?this.reloadListener(v):this.reloadUserInfo=v}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(v,D=!1){var L=this;return(0,f.Z)(function*(){let re=!1;v.idToken&&v.idToken!==L.stsTokenManager.accessToken&&(L.stsTokenManager.updateFromServerResponse(v),re=!0),D&&(yield ci(L)),yield L.auth._persistUserIfCurrent(L),re&&L.auth._notifyListenersIfCurrent(L)})()}delete(){var v=this;return(0,f.Z)(function*(){const D=yield v.getIdToken();return yield Qn(v,function kr(R,v){return is.apply(this,arguments)}(v.auth,{idToken:D})),v.stsTokenManager.clearRefreshToken(),v.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(v=>Object.assign({},v)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(v,D){var L,re,y,_,g,b,j,ne;const _e=null!==(L=D.displayName)&&void 0!==L?L:void 0,Ie=null!==(re=D.email)&&void 0!==re?re:void 0,Xe=null!==(y=D.phoneNumber)&&void 0!==y?y:void 0,pt=null!==(_=D.photoURL)&&void 0!==_?_:void 0,Bt=null!==(g=D.tenantId)&&void 0!==g?g:void 0,Gt=null!==(b=D._redirectEventId)&&void 0!==b?b:void 0,On=null!==(j=D.createdAt)&&void 0!==j?j:void 0,tn=null!==(ne=D.lastLoginAt)&&void 0!==ne?ne:void 0,{uid:Vt,emailVerified:bn,isAnonymous:pr,providerData:Nr,stsTokenManager:Ms}=D;Ze(Vt&&Ms,v,"internal-error");const Gr=tt.fromJSON(this.name,Ms);Ze("string"==typeof Vt,v,"internal-error"),Se(_e,v.name),Se(Ie,v.name),Ze("boolean"==typeof bn,v,"internal-error"),Ze("boolean"==typeof pr,v,"internal-error"),Se(Xe,v.name),Se(pt,v.name),Se(Bt,v.name),Se(Gt,v.name),Se(On,v.name),Se(tn,v.name);const ms=new Oe({uid:Vt,auth:v,email:Ie,emailVerified:bn,displayName:_e,isAnonymous:pr,photoURL:pt,phoneNumber:Xe,tenantId:Bt,stsTokenManager:Gr,createdAt:On,lastLoginAt:tn});return Nr&&Array.isArray(Nr)&&(ms.providerData=Nr.map(Da=>Object.assign({},Da))),Gt&&(ms._redirectEventId=Gt),ms}static _fromIdTokenResponse(v,D,L=!1){return(0,f.Z)(function*(){const re=new tt;re.updateFromServerResponse(D);const y=new Oe({uid:D.localId,auth:v,stsTokenManager:re,isAnonymous:L});return yield ci(y),y})()}}const pe=(()=>{class R{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(D,L){var re=this;return(0,f.Z)(function*(){re.storage[D]=L})()}_get(D){var L=this;return(0,f.Z)(function*(){const re=L.storage[D];return void 0===re?null:re})()}_remove(D){var L=this;return(0,f.Z)(function*(){delete L.storage[D]})()}_addListener(D,L){}_removeListener(D,L){}}return R.type="NONE",R})();function ve(R,v,D){return`firebase:${R}:${v}:${D}`}class Te{constructor(v,D,L){this.persistence=v,this.auth=D,this.userKey=L;const{config:re,name:y}=this.auth;this.fullUserKey=ve(this.userKey,re.apiKey,y),this.fullPersistenceKey=ve("persistence",re.apiKey,y),this.boundEventHandler=D._onStorageEvent.bind(D),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(v){return this.persistence._set(this.fullUserKey,v.toJSON())}getCurrentUser(){var v=this;return(0,f.Z)(function*(){const D=yield v.persistence._get(v.fullUserKey);return D?Oe._fromJSON(v.auth,D):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(v){var D=this;return(0,f.Z)(function*(){if(D.persistence===v)return;const L=yield D.getCurrentUser();return yield D.removeCurrentUser(),D.persistence=v,L?D.setCurrentUser(L):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(v,D,L="authUser"){return(0,f.Z)(function*(){if(!D.length)return new Te(Be(pe),v,L);const re=(yield Promise.all(D.map(function(){var j=(0,f.Z)(function*(ne){if(yield ne._isAvailable())return ne});return function(ne){return j.apply(this,arguments)}}()))).filter(j=>j);let y=re[0]||Be(pe);const _=ve(L,v.config.apiKey,v.name);let g=null;for(const j of D)try{const ne=yield j._get(_);if(ne){const _e=Oe._fromJSON(v,ne);j!==y&&(g=_e),y=j;break}}catch{}const b=re.filter(j=>j._shouldAllowMigration);return y._shouldAllowMigration&&b.length?(y=b[0],g&&(yield y._set(_,g.toJSON())),yield Promise.all(D.map(function(){var j=(0,f.Z)(function*(ne){if(ne!==y)try{yield ne._remove(_)}catch{}});return function(ne){return j.apply(this,arguments)}}())),new Te(y,v,L)):new Te(y,v,L)})()}}function et(R){const v=R.toLowerCase();if(v.includes("opera/")||v.includes("opr/")||v.includes("opios/"))return"Opera";if(Re(v))return"IEMobile";if(v.includes("msie")||v.includes("trident/"))return"IE";if(v.includes("edge/"))return"Edge";if(Le(v))return"Firefox";if(v.includes("silk/"))return"Silk";if(he(v))return"Blackberry";if(Pe(v))return"Webos";if(Rt(v))return"Safari";if((v.includes("chrome/")||zt(v))&&!v.includes("edge/"))return"Chrome";if(Ae(v))return"Android";{const L=R.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===L?.length)return L[1]}return"Other"}function Le(R=(0,w.z$)()){return/firefox\//i.test(R)}function Rt(R=(0,w.z$)()){const v=R.toLowerCase();return v.includes("safari/")&&!v.includes("chrome/")&&!v.includes("crios/")&&!v.includes("android")}function zt(R=(0,w.z$)()){return/crios\//i.test(R)}function Re(R=(0,w.z$)()){return/iemobile/i.test(R)}function Ae(R=(0,w.z$)()){return/android/i.test(R)}function he(R=(0,w.z$)()){return/blackberry/i.test(R)}function Pe(R=(0,w.z$)()){return/webos/i.test(R)}function Ge(R=(0,w.z$)()){return/iphone|ipad|ipod/i.test(R)||/macintosh/i.test(R)&&/mobile/i.test(R)}function Ir(R=(0,w.z$)()){return Ge(R)||Ae(R)||Pe(R)||he(R)||/windows phone/i.test(R)||Re(R)}function ht(R,v=[]){let D;switch(R){case"Browser":D=et((0,w.z$)());break;case"Worker":D=`${et((0,w.z$)())}-${R}`;break;default:D=R}const L=v.length?v.join(","):"FirebaseCore-web";return`${D}/JsCore/${te.Jn}/${L}`}class rt{constructor(v){this.auth=v,this.queue=[]}pushCallback(v,D){const L=y=>new Promise((_,g)=>{try{_(v(y))}catch(b){g(b)}});L.onAbort=D,this.queue.push(L);const re=this.queue.length-1;return()=>{this.queue[re]=()=>Promise.resolve()}}runMiddleware(v){var D=this;return(0,f.Z)(function*(){if(D.auth.currentUser===v)return;const L=[];try{for(const re of D.queue)yield re(v),re.onAbort&&L.push(re.onAbort)}catch(re){L.reverse();for(const y of L)try{y()}catch{}throw D.auth._errorFactory.create("login-blocked",{originalMessage:re?.message})}})()}}class xt{constructor(v,D,L){this.app=v,this.heartbeatServiceProvider=D,this.config=L,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rn(this),this.idTokenSubscription=new Rn(this),this.beforeStateQueue=new rt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=v.name,this.clientVersion=L.sdkClientVersion}_initializeWithPersistence(v,D){var L=this;return D&&(this._popupRedirectResolver=Be(D)),this._initializationPromise=this.queue((0,f.Z)(function*(){var re,y;if(!L._deleted&&(L.persistenceManager=yield Te.create(L,v),!L._deleted)){if(null!==(re=L._popupRedirectResolver)&&void 0!==re&&re._shouldInitProactively)try{yield L._popupRedirectResolver._initialize(L)}catch{}yield L.initializeCurrentUser(D),L.lastNotifiedUid=(null===(y=L.currentUser)||void 0===y?void 0:y.uid)||null,!L._deleted&&(L._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var v=this;return(0,f.Z)(function*(){if(v._deleted)return;const D=yield v.assertedPersistence.getCurrentUser();if(v.currentUser||D){if(v.currentUser&&D&&v.currentUser.uid===D.uid)return v._currentUser._assign(D),void(yield v.currentUser.getIdToken());yield v._updateCurrentUser(D,!0)}})()}initializeCurrentUser(v){var D=this;return(0,f.Z)(function*(){var L;const re=yield D.assertedPersistence.getCurrentUser();let y=re,_=!1;if(v&&D.config.authDomain){yield D.getOrInitRedirectPersistenceManager();const g=null===(L=D.redirectUser)||void 0===L?void 0:L._redirectEventId,b=y?._redirectEventId,j=yield D.tryRedirectSignIn(v);(!g||g===b)&&j?.user&&(y=j.user,_=!0)}if(!y)return D.directlySetCurrentUser(null);if(!y._redirectEventId){if(_)try{yield D.beforeStateQueue.runMiddleware(y)}catch(g){y=re,D._popupRedirectResolver._overrideRedirectResult(D,()=>Promise.reject(g))}return y?D.reloadAndSetCurrentUserOrClear(y):D.directlySetCurrentUser(null)}return Ze(D._popupRedirectResolver,D,"argument-error"),yield D.getOrInitRedirectPersistenceManager(),D.redirectUser&&D.redirectUser._redirectEventId===y._redirectEventId?D.directlySetCurrentUser(y):D.reloadAndSetCurrentUserOrClear(y)})()}tryRedirectSignIn(v){var D=this;return(0,f.Z)(function*(){let L=null;try{L=yield D._popupRedirectResolver._completeRedirectFn(D,v,!0)}catch{yield D._setRedirectUser(null)}return L})()}reloadAndSetCurrentUserOrClear(v){var D=this;return(0,f.Z)(function*(){try{yield ci(v)}catch(L){if("auth/network-request-failed"!==L?.code)return D.directlySetCurrentUser(null)}return D.directlySetCurrentUser(v)})()}useDeviceLanguage(){this.languageCode=function an(){if(typeof navigator>"u")return null;const R=navigator;return R.languages&&R.languages[0]||R.language||null}()}_delete(){var v=this;return(0,f.Z)(function*(){v._deleted=!0})()}updateCurrentUser(v){var D=this;return(0,f.Z)(function*(){const L=v?(0,w.m9)(v):null;return L&&Ze(L.auth.config.apiKey===D.config.apiKey,D,"invalid-user-token"),D._updateCurrentUser(L&&L._clone(D))})()}_updateCurrentUser(v,D=!1){var L=this;return(0,f.Z)(function*(){if(!L._deleted)return v&&Ze(L.tenantId===v.tenantId,L,"tenant-id-mismatch"),D||(yield L.beforeStateQueue.runMiddleware(v)),L.queue((0,f.Z)(function*(){yield L.directlySetCurrentUser(v),L.notifyAuthListeners()}))})()}signOut(){var v=this;return(0,f.Z)(function*(){return yield v.beforeStateQueue.runMiddleware(null),(v.redirectPersistenceManager||v._popupRedirectResolver)&&(yield v._setRedirectUser(null)),v._updateCurrentUser(null,!0)})()}setPersistence(v){var D=this;return this.queue((0,f.Z)(function*(){yield D.assertedPersistence.setPersistence(Be(v))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(v){this._errorFactory=new w.LL("auth","Firebase",v())}onAuthStateChanged(v,D,L){return this.registerStateListener(this.authStateSubscription,v,D,L)}beforeAuthStateChanged(v,D){return this.beforeStateQueue.pushCallback(v,D)}onIdTokenChanged(v,D,L){return this.registerStateListener(this.idTokenSubscription,v,D,L)}toJSON(){var v;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(v=this._currentUser)||void 0===v?void 0:v.toJSON()}}_setRedirectUser(v,D){var L=this;return(0,f.Z)(function*(){const re=yield L.getOrInitRedirectPersistenceManager(D);return null===v?re.removeCurrentUser():re.setCurrentUser(v)})()}getOrInitRedirectPersistenceManager(v){var D=this;return(0,f.Z)(function*(){if(!D.redirectPersistenceManager){const L=v&&Be(v)||D._popupRedirectResolver;Ze(L,D,"argument-error"),D.redirectPersistenceManager=yield Te.create(D,[Be(L._redirectPersistence)],"redirectUser"),D.redirectUser=yield D.redirectPersistenceManager.getCurrentUser()}return D.redirectPersistenceManager})()}_redirectUserForId(v){var D=this;return(0,f.Z)(function*(){var L,re;return D._isInitialized&&(yield D.queue((0,f.Z)(function*(){}))),(null===(L=D._currentUser)||void 0===L?void 0:L._redirectEventId)===v?D._currentUser:(null===(re=D.redirectUser)||void 0===re?void 0:re._redirectEventId)===v?D.redirectUser:null})()}_persistUserIfCurrent(v){var D=this;return(0,f.Z)(function*(){if(v===D.currentUser)return D.queue((0,f.Z)(function*(){return D.directlySetCurrentUser(v)}))})()}_notifyListenersIfCurrent(v){v===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var v,D;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const L=null!==(D=null===(v=this.currentUser)||void 0===v?void 0:v.uid)&&void 0!==D?D:null;this.lastNotifiedUid!==L&&(this.lastNotifiedUid=L,this.authStateSubscription.next(this.currentUser))}registerStateListener(v,D,L,re){if(this._deleted)return()=>{};const y="function"==typeof D?D:D.next.bind(D),_=this._isInitialized?Promise.resolve():this._initializationPromise;return Ze(_,this,"internal-error"),_.then(()=>y(this.currentUser)),"function"==typeof D?v.addObserver(D,L,re):v.addObserver(D)}directlySetCurrentUser(v){var D=this;return(0,f.Z)(function*(){D.currentUser&&D.currentUser!==v&&D._currentUser._stopProactiveRefresh(),v&&D.isProactiveRefreshEnabled&&v._startProactiveRefresh(),D.currentUser=v,v?yield D.assertedPersistence.setCurrentUser(v):yield D.assertedPersistence.removeCurrentUser()})()}queue(v){return this.operations=this.operations.then(v,v),this.operations}get assertedPersistence(){return Ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(v){!v||this.frameworks.includes(v)||(this.frameworks.push(v),this.frameworks.sort(),this.clientVersion=ht(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var v=this;return(0,f.Z)(function*(){var D;const L={"X-Client-Version":v.clientVersion};v.app.options.appId&&(L["X-Firebase-gmpid"]=v.app.options.appId);const re=yield null===(D=v.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===D?void 0:D.getHeartbeatsHeader();return re&&(L["X-Firebase-Client"]=re),L})()}}function Zt(R){return(0,w.m9)(R)}class Rn{constructor(v){this.auth=v,this.observer=null,this.addObserver=(0,w.ne)(D=>this.observer=D)}get next(){return Ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function cn(R){const v=R.indexOf(":");return v<0?"":R.substr(0,v+1)}function nr(R){if(!R)return null;const v=Number(R);return isNaN(v)?null:v}class zr{constructor(v,D){this.providerId=v,this.signInMethod=D}toJSON(){return Nt("not implemented")}_getIdTokenResponse(v){return Nt("not implemented")}_linkToIdToken(v,D){return Nt("not implemented")}_getReauthenticationResolver(v){return Nt("not implemented")}}function _i(R,v){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,f.Z)(function*(R,v){return hn(R,"POST","/v1/accounts:update",v)})).apply(this,arguments)}function Sn(){return(Sn=(0,f.Z)(function*(R,v){return Ue(R,"POST","/v1/accounts:signInWithPassword",Mn(R,v))})).apply(this,arguments)}function Ee(){return(Ee=(0,f.Z)(function*(R,v){return Ue(R,"POST","/v1/accounts:signInWithEmailLink",Mn(R,v))})).apply(this,arguments)}function ze(){return(ze=(0,f.Z)(function*(R,v){return Ue(R,"POST","/v1/accounts:signInWithEmailLink",Mn(R,v))})).apply(this,arguments)}class gt extends zr{constructor(v,D,L,re=null){super("password",L),this._email=v,this._password=D,this._tenantId=re}static _fromEmailAndPassword(v,D){return new gt(v,D,"password")}static _fromEmailAndCode(v,D,L=null){return new gt(v,D,"emailLink",L)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(v){const D="string"==typeof v?JSON.parse(v):v;if(D?.email&&D?.password){if("password"===D.signInMethod)return this._fromEmailAndPassword(D.email,D.password);if("emailLink"===D.signInMethod)return this._fromEmailAndCode(D.email,D.password,D.tenantId)}return null}_getIdTokenResponse(v){var D=this;return(0,f.Z)(function*(){switch(D.signInMethod){case"password":return function fn(R,v){return Sn.apply(this,arguments)}(v,{returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function Ys(R,v){return Ee.apply(this,arguments)}(v,{email:D._email,oobCode:D._password});default:qe(v,"internal-error")}})()}_linkToIdToken(v,D){var L=this;return(0,f.Z)(function*(){switch(L.signInMethod){case"password":return _i(v,{idToken:D,returnSecureToken:!0,email:L._email,password:L._password});case"emailLink":return function it(R,v){return ze.apply(this,arguments)}(v,{idToken:D,email:L._email,oobCode:L._password});default:qe(v,"internal-error")}})()}_getReauthenticationResolver(v){return this._getIdTokenResponse(v)}}function $t(R,v){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,f.Z)(function*(R,v){return Ue(R,"POST","/v1/accounts:signInWithIdp",Mn(R,v))})).apply(this,arguments)}class Un extends zr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(v){const D=new Un(v.providerId,v.signInMethod);return v.idToken||v.accessToken?(v.idToken&&(D.idToken=v.idToken),v.accessToken&&(D.accessToken=v.accessToken),v.nonce&&!v.pendingToken&&(D.nonce=v.nonce),v.pendingToken&&(D.pendingToken=v.pendingToken)):v.oauthToken&&v.oauthTokenSecret?(D.accessToken=v.oauthToken,D.secret=v.oauthTokenSecret):qe("argument-error"),D}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(v){const D="string"==typeof v?JSON.parse(v):v,{providerId:L,signInMethod:re}=D,y=(0,X._T)(D,["providerId","signInMethod"]);if(!L||!re)return null;const _=new Un(L,re);return _.idToken=y.idToken||void 0,_.accessToken=y.accessToken||void 0,_.secret=y.secret,_.nonce=y.nonce,_.pendingToken=y.pendingToken||null,_}_getIdTokenResponse(v){return $t(v,this.buildRequest())}_linkToIdToken(v,D){const L=this.buildRequest();return L.idToken=D,$t(v,L)}_getReauthenticationResolver(v){const D=this.buildRequest();return D.autoCreate=!1,$t(v,D)}buildRequest(){const v={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)v.pendingToken=this.pendingToken;else{const D={};this.idToken&&(D.id_token=this.idToken),this.accessToken&&(D.access_token=this.accessToken),this.secret&&(D.oauth_token_secret=this.secret),D.providerId=this.providerId,this.nonce&&!this.pendingToken&&(D.nonce=this.nonce),v.postBody=(0,w.xO)(D)}return v}}class sr{constructor(v){var D,L,re,y,_,g;const b=(0,w.zd)((0,w.pd)(v)),j=null!==(D=b.apiKey)&&void 0!==D?D:null,ne=null!==(L=b.oobCode)&&void 0!==L?L:null,_e=function Qs(R){switch(R){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(re=b.mode)&&void 0!==re?re:null);Ze(j&&ne&&_e,"argument-error"),this.apiKey=j,this.operation=_e,this.code=ne,this.continueUrl=null!==(y=b.continueUrl)&&void 0!==y?y:null,this.languageCode=null!==(_=b.languageCode)&&void 0!==_?_:null,this.tenantId=null!==(g=b.tenantId)&&void 0!==g?g:null}static parseLink(v){const D=function ds(R){const v=(0,w.zd)((0,w.pd)(R)).link,D=v?(0,w.zd)((0,w.pd)(v)).deep_link_id:null,L=(0,w.zd)((0,w.pd)(R)).deep_link_id;return(L?(0,w.zd)((0,w.pd)(L)).link:null)||L||D||v||R}(v);try{return new sr(D)}catch{return null}}}let bi=(()=>{class R{constructor(){this.providerId=R.PROVIDER_ID}static credential(D,L){return gt._fromEmailAndPassword(D,L)}static credentialWithLink(D,L){const re=sr.parseLink(L);return Ze(re,"argument-error"),gt._fromEmailAndCode(D,re.code,re.tenantId)}}return R.PROVIDER_ID="password",R.EMAIL_PASSWORD_SIGN_IN_METHOD="password",R.EMAIL_LINK_SIGN_IN_METHOD="emailLink",R})();class _s{constructor(v){this.providerId=v,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(v){this.defaultLanguageCode=v}setCustomParameters(v){return this.customParameters=v,this}getCustomParameters(){return this.customParameters}}class qn extends _s{constructor(){super(...arguments),this.scopes=[]}addScope(v){return this.scopes.includes(v)||this.scopes.push(v),this}getScopes(){return[...this.scopes]}}let so=(()=>{class R extends qn{constructor(){super("google.com"),this.addScope("profile")}static credential(D,L){return Un._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.GOOGLE_SIGN_IN_METHOD,idToken:D,accessToken:L})}static credentialFromResult(D){return R.credentialFromTaggedObject(D)}static credentialFromError(D){return R.credentialFromTaggedObject(D.customData||{})}static credentialFromTaggedObject({_tokenResponse:D}){if(!D)return null;const{oauthIdToken:L,oauthAccessToken:re}=D;if(!L&&!re)return null;try{return R.credential(L,re)}catch{return null}}}return R.GOOGLE_SIGN_IN_METHOD="google.com",R.PROVIDER_ID="google.com",R})();function go(R,v){return ss.apply(this,arguments)}function ss(){return(ss=(0,f.Z)(function*(R,v){return Ue(R,"POST","/v1/accounts:signUp",Mn(R,v))})).apply(this,arguments)}class Bi{constructor(v){this.user=v.user,this.providerId=v.providerId,this._tokenResponse=v._tokenResponse,this.operationType=v.operationType}static _fromIdTokenResponse(v,D,L,re=!1){return(0,f.Z)(function*(){const y=yield Oe._fromIdTokenResponse(v,L,re),_=oo(L);return new Bi({user:y,providerId:_,_tokenResponse:L,operationType:D})})()}static _forOperation(v,D,L){return(0,f.Z)(function*(){yield v._updateTokensIfNecessary(L,!0);const re=oo(L);return new Bi({user:v,providerId:re,_tokenResponse:L,operationType:D})})()}}function oo(R){return R.providerId?R.providerId:"phoneNumber"in R?"phone":null}class Bo extends w.ZR{constructor(v,D,L,re){var y;super(D.code,D.message),this.operationType=L,this.user=re,Object.setPrototypeOf(this,Bo.prototype),this.customData={appName:v.name,tenantId:null!==(y=v.tenantId)&&void 0!==y?y:void 0,_serverResponse:D.customData._serverResponse,operationType:L}}static _fromErrorAndOperation(v,D,L,re){return new Bo(v,D,L,re)}}function qs(R,v,D,L){return("reauthenticate"===v?D._getReauthenticationResolver(R):D._getIdTokenResponse(R)).catch(y=>{throw"auth/multi-factor-auth-required"===y.code?Bo._fromErrorAndOperation(R,y,v,L):y})}function bs(R,v){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,f.Z)(function*(R,v,D=!1){const L=yield Qn(R,v._linkToIdToken(R.auth,yield R.getIdToken()),D);return Bi._forOperation(R,"link",L)})).apply(this,arguments)}function wa(R,v){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,f.Z)(function*(R,v,D=!1){const{auth:L}=R,re="reauthenticate";try{const y=yield Qn(R,qs(L,re,v,R),D);Ze(y.idToken,L,"internal-error");const _=un(y.idToken);Ze(_,L,"internal-error");const{sub:g}=_;return Ze(R.uid===g,L,"user-mismatch"),Bi._forOperation(R,re,y)}catch(y){throw"auth/user-not-found"===y?.code&&qe(L,"user-mismatch"),y}})).apply(this,arguments)}function xi(R,v){return ca.apply(this,arguments)}function ca(){return(ca=(0,f.Z)(function*(R,v,D=!1){const L="signIn",re=yield qs(R,L,v),y=yield Bi._fromIdTokenResponse(R,L,re);return D||(yield R._updateCurrentUser(y.user)),y})).apply(this,arguments)}function Ei(R,v){return yo.apply(this,arguments)}function yo(){return(yo=(0,f.Z)(function*(R,v){return xi(Zt(R),v)})).apply(this,arguments)}function ot(R,v,D){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,f.Z)(function*(R,v,D){const L=Zt(R),re=yield go(L,{returnSecureToken:!0,email:v,password:D}),y=yield Bi._fromIdTokenResponse(L,"signIn",re);return yield L._updateCurrentUser(y.user),y})).apply(this,arguments)}function Zr(R,v,D){return Ei((0,w.m9)(R),bi.credential(v,D))}class Us{constructor(v,D,L={}){this.isNewUser=v,this.providerId=D,this.profile=L}}class ls extends Us{constructor(v,D,L,re){super(v,D,L),this.username=re}}class Ao extends Us{constructor(v,D){super(v,"facebook.com",D)}}class Za extends ls{constructor(v,D){super(v,"github.com",D,"string"==typeof D?.login?D?.login:null)}}class Ml extends Us{constructor(v,D){super(v,"google.com",D)}}class li extends ls{constructor(v,D,L){super(v,"twitter.com",D,L)}}function Zs(R){const{user:v,_tokenResponse:D}=R;return v.isAnonymous&&!D?{providerId:null,isNewUser:!1,profile:null}:function Yo(R){var v,D;if(!R)return null;const{providerId:L}=R,re=R.rawUserInfo?JSON.parse(R.rawUserInfo):{},y=R.isNewUser||"identitytoolkit#SignupNewUserResponse"===R.kind;if(!L&&R?.idToken){const _=null===(D=null===(v=un(R.idToken))||void 0===v?void 0:v.firebase)||void 0===D?void 0:D.sign_in_provider;if(_)return new Us(y,"anonymous"!==_&&"custom"!==_?_:null)}if(!L)return null;switch(L){case"facebook.com":return new Ao(y,re);case"github.com":return new Za(y,re);case"google.com":return new Ml(y,re);case"twitter.com":return new li(y,re,R.screenName||null);case"custom":case"anonymous":return new Us(y,null);default:return new Us(y,L,re)}}(D)}function cl(R,v,D,L){return(0,w.m9)(R).onAuthStateChanged(v,D,L)}function Xs(R){return(0,w.m9)(R).signOut()}const dt="__sak";class P{constructor(v,D){this.storageRetriever=v,this.type=D}_isAvailable(){try{return this.storage?(this.storage.setItem(dt,"1"),this.storage.removeItem(dt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(v,D){return this.storage.setItem(v,JSON.stringify(D)),Promise.resolve()}_get(v){const D=this.storage.getItem(v);return Promise.resolve(D?JSON.parse(D):null)}_remove(v){return this.storage.removeItem(v),Promise.resolve()}get storage(){return this.storageRetriever()}}const ft=(()=>{class R extends P{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(D,L)=>this.onStorageEvent(D,L),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Q(){const R=(0,w.z$)();return Rt(R)||Ge(R)}()&&function Ti(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ir(),this._shouldAllowMigration=!0}forAllChangedKeys(D){for(const L of Object.keys(this.listeners)){const re=this.storage.getItem(L),y=this.localCache[L];re!==y&&D(L,y,re)}}onStorageEvent(D,L=!1){if(!D.key)return void this.forAllChangedKeys((g,b,j)=>{this.notifyListeners(g,j)});const re=D.key;if(L?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const g=this.storage.getItem(re);if(D.newValue!==g)null!==D.newValue?this.storage.setItem(re,D.newValue):this.storage.removeItem(re);else if(this.localCache[re]===D.newValue&&!L)return}const y=()=>{const g=this.storage.getItem(re);!L&&this.localCache[re]===g||this.notifyListeners(re,g)},_=this.storage.getItem(re);!function tr(){return(0,w.w1)()&&10===document.documentMode}()||_===D.newValue||D.newValue===D.oldValue?y():setTimeout(y,10)}notifyListeners(D,L){this.localCache[D]=L;const re=this.listeners[D];if(re)for(const y of Array.from(re))y(L&&JSON.parse(L))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((D,L,re)=>{this.onStorageEvent(new StorageEvent("storage",{key:D,oldValue:L,newValue:re}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(D,L){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[D]||(this.listeners[D]=new Set,this.localCache[D]=this.storage.getItem(D)),this.listeners[D].add(L)}_removeListener(D,L){this.listeners[D]&&(this.listeners[D].delete(L),0===this.listeners[D].size&&delete this.listeners[D]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(D,L){var re=()=>super._set,y=this;return(0,f.Z)(function*(){yield re().call(y,D,L),y.localCache[D]=JSON.stringify(L)})()}_get(D){var L=()=>super._get,re=this;return(0,f.Z)(function*(){const y=yield L().call(re,D);return re.localCache[D]=JSON.stringify(y),y})()}_remove(D){var L=()=>super._remove,re=this;return(0,f.Z)(function*(){yield L().call(re,D),delete re.localCache[D]})()}}return R.type="LOCAL",R})(),dn=(()=>{class R extends P{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(D,L){}_removeListener(D,L){}}return R.type="SESSION",R})();let Xr=(()=>{class R{constructor(D){this.eventTarget=D,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(D){const L=this.receivers.find(y=>y.isListeningto(D));if(L)return L;const re=new R(D);return this.receivers.push(re),re}isListeningto(D){return this.eventTarget===D}handleEvent(D){var L=this;return(0,f.Z)(function*(){const re=D,{eventId:y,eventType:_,data:g}=re.data,b=L.handlersMap[_];if(!b?.size)return;re.ports[0].postMessage({status:"ack",eventId:y,eventType:_});const j=Array.from(b).map(function(){var _e=(0,f.Z)(function*(Ie){return Ie(re.origin,g)});return function(Ie){return _e.apply(this,arguments)}}()),ne=yield function Dr(R){return Promise.all(R.map(function(){var v=(0,f.Z)(function*(D){try{return{fulfilled:!0,value:yield D}}catch(L){return{fulfilled:!1,reason:L}}});return function(D){return v.apply(this,arguments)}}()))}(j);re.ports[0].postMessage({status:"done",eventId:y,eventType:_,response:ne})})()}_subscribe(D,L){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[D]||(this.handlersMap[D]=new Set),this.handlersMap[D].add(L)}_unsubscribe(D,L){this.handlersMap[D]&&L&&this.handlersMap[D].delete(L),(!L||0===this.handlersMap[D].size)&&delete this.handlersMap[D],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return R.receivers=[],R})();function lr(R="",v=10){let D="";for(let L=0;L<v;L++)D+=Math.floor(10*Math.random());return R+D}class Bn{constructor(v){this.target=v,this.handlers=new Set}removeMessageHandler(v){v.messageChannel&&(v.messageChannel.port1.removeEventListener("message",v.onMessage),v.messageChannel.port1.close()),this.handlers.delete(v)}_send(v,D,L=50){var re=this;return(0,f.Z)(function*(){const y=typeof MessageChannel<"u"?new MessageChannel:null;if(!y)throw new Error("connection_unavailable");let _,g;return new Promise((b,j)=>{const ne=lr("",20);y.port1.start();const _e=setTimeout(()=>{j(new Error("unsupported_event"))},L);g={messageChannel:y,onMessage(Ie){const Xe=Ie;if(Xe.data.eventId===ne)switch(Xe.data.status){case"ack":clearTimeout(_e),_=setTimeout(()=>{j(new Error("timeout"))},3e3);break;case"done":clearTimeout(_),b(Xe.data.response);break;default:clearTimeout(_e),clearTimeout(_),j(new Error("invalid_response"))}}},re.handlers.add(g),y.port1.addEventListener("message",g.onMessage),re.target.postMessage({eventType:v,eventId:ne,data:D},[y.port2])}).finally(()=>{g&&re.removeMessageHandler(g)})})()}}function or(){return window}function ti(){return typeof or().WorkerGlobalScope<"u"&&"function"==typeof or().importScripts}function Er(){return(Er=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Wn="firebaseLocalStorageDb",Oo=1,Or="firebaseLocalStorage",qt="fbase_key";class uo{constructor(v){this.request=v}toPromise(){return new Promise((v,D)=>{this.request.addEventListener("success",()=>{v(this.request.result)}),this.request.addEventListener("error",()=>{D(this.request.error)})})}}function pa(R,v){return R.transaction([Or],v?"readwrite":"readonly").objectStore(Or)}function hl(){const R=indexedDB.open(Wn,Oo);return new Promise((v,D)=>{R.addEventListener("error",()=>{D(R.error)}),R.addEventListener("upgradeneeded",()=>{const L=R.result;try{L.createObjectStore(Or,{keyPath:qt})}catch(re){D(re)}}),R.addEventListener("success",(0,f.Z)(function*(){const L=R.result;L.objectStoreNames.contains(Or)?v(L):(L.close(),yield function Qo(){const R=indexedDB.deleteDatabase(Wn);return new uo(R).toPromise()}(),v(yield hl()))}))})}function Hi(R,v,D){return co.apply(this,arguments)}function co(){return(co=(0,f.Z)(function*(R,v,D){const L=pa(R,!0).put({[qt]:v,value:D});return new uo(L).toPromise()})).apply(this,arguments)}function Ua(){return(Ua=(0,f.Z)(function*(R,v){const D=pa(R,!1).get(v),L=yield new uo(D).toPromise();return void 0===L?null:L.value})).apply(this,arguments)}function fl(R,v){const D=pa(R,!0).delete(v);return new uo(D).toPromise()}const iu=(()=>{class R{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var D=this;return(0,f.Z)(function*(){return D.db||(D.db=yield hl()),D.db})()}_withRetries(D){var L=this;return(0,f.Z)(function*(){let re=0;for(;;)try{const y=yield L._openDb();return yield D(y)}catch(y){if(re++>3)throw y;L.db&&(L.db.close(),L.db=void 0)}})()}initializeServiceWorkerMessaging(){var D=this;return(0,f.Z)(function*(){return ti()?D.initializeReceiver():D.initializeSender()})()}initializeReceiver(){var D=this;return(0,f.Z)(function*(){D.receiver=Xr._getInstance(function es(){return ti()?self:null}()),D.receiver._subscribe("keyChanged",function(){var L=(0,f.Z)(function*(re,y){return{keyProcessed:(yield D._poll()).includes(y.key)}});return function(re,y){return L.apply(this,arguments)}}()),D.receiver._subscribe("ping",function(){var L=(0,f.Z)(function*(re,y){return["keyChanged"]});return function(re,y){return L.apply(this,arguments)}}())})()}initializeSender(){var D=this;return(0,f.Z)(function*(){var L,re;if(D.activeServiceWorker=yield function Is(){return Er.apply(this,arguments)}(),!D.activeServiceWorker)return;D.sender=new Bn(D.activeServiceWorker);const y=yield D.sender._send("ping",{},800);y&&null!==(L=y[0])&&void 0!==L&&L.fulfilled&&null!==(re=y[0])&&void 0!==re&&re.value.includes("keyChanged")&&(D.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(D){var L=this;return(0,f.Z)(function*(){if(L.sender&&L.activeServiceWorker&&function gn(){var R;return(null===(R=navigator?.serviceWorker)||void 0===R?void 0:R.controller)||null}()===L.activeServiceWorker)try{yield L.sender._send("keyChanged",{key:D},L.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const D=yield hl();return yield Hi(D,dt,"1"),yield fl(D,dt),!0}catch{}return!1})()}_withPendingWrite(D){var L=this;return(0,f.Z)(function*(){L.pendingWrites++;try{yield D()}finally{L.pendingWrites--}})()}_set(D,L){var re=this;return(0,f.Z)(function*(){return re._withPendingWrite((0,f.Z)(function*(){return yield re._withRetries(y=>Hi(y,D,L)),re.localCache[D]=L,re.notifyServiceWorker(D)}))})()}_get(D){var L=this;return(0,f.Z)(function*(){const re=yield L._withRetries(y=>function Ro(R,v){return Ua.apply(this,arguments)}(y,D));return L.localCache[D]=re,re})()}_remove(D){var L=this;return(0,f.Z)(function*(){return L._withPendingWrite((0,f.Z)(function*(){return yield L._withRetries(re=>fl(re,D)),delete L.localCache[D],L.notifyServiceWorker(D)}))})()}_poll(){var D=this;return(0,f.Z)(function*(){const L=yield D._withRetries(_=>{const g=pa(_,!1).getAll();return new uo(g).toPromise()});if(!L)return[];if(0!==D.pendingWrites)return[];const re=[],y=new Set;for(const{fbase_key:_,value:g}of L)y.add(_),JSON.stringify(D.localCache[_])!==JSON.stringify(g)&&(D.notifyListeners(_,g),re.push(_));for(const _ of Object.keys(D.localCache))D.localCache[_]&&!y.has(_)&&(D.notifyListeners(_,null),re.push(_));return re})()}notifyListeners(D,L){this.localCache[D]=L;const re=this.listeners[D];if(re)for(const y of Array.from(re))y(L)}startPolling(){var D=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return D._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(D,L){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[D]||(this.listeners[D]=new Set,this._get(D)),this.listeners[D].add(L)}_removeListener(D,L){this.listeners[D]&&(this.listeners[D].delete(L),0===this.listeners[D].size&&delete this.listeners[D]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return R.type="LOCAL",R})();function Js(R){return`__${R}${Math.floor(1e6*Math.random())}`}function ws(R,v){return v?Be(v):(Ze(R._popupRedirectResolver,R,"argument-error"),R._popupRedirectResolver)}Js("rcb"),new Yt(3e4,6e4);class pi extends zr{constructor(v){super("custom","custom"),this.params=v}_getIdTokenResponse(v){return $t(v,this._buildIdpRequest())}_linkToIdToken(v,D){return $t(v,this._buildIdpRequest(D))}_getReauthenticationResolver(v){return $t(v,this._buildIdpRequest())}_buildIdpRequest(v){const D={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return v&&(D.idToken=v),D}}function A(R){return xi(R.auth,new pi(R),R.bypassAuthState)}function O(R){const{auth:v,user:D}=R;return Ze(D,v,"internal-error"),wa(D,new pi(R),R.bypassAuthState)}function T(R){return F.apply(this,arguments)}function F(){return(F=(0,f.Z)(function*(R){const{auth:v,user:D}=R;return Ze(D,v,"internal-error"),bs(D,new pi(R),R.bypassAuthState)})).apply(this,arguments)}class W{constructor(v,D,L,re,y=!1){this.auth=v,this.resolver=L,this.user=re,this.bypassAuthState=y,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(D)?D:[D]}execute(){var v=this;return new Promise(function(){var D=(0,f.Z)(function*(L,re){v.pendingPromise={resolve:L,reject:re};try{v.eventManager=yield v.resolver._initialize(v.auth),yield v.onExecution(),v.eventManager.registerConsumer(v)}catch(y){v.reject(y)}});return function(L,re){return D.apply(this,arguments)}}())}onAuthEvent(v){var D=this;return(0,f.Z)(function*(){const{urlResponse:L,sessionId:re,postBody:y,tenantId:_,error:g,type:b}=v;if(g)return void D.reject(g);const j={auth:D.auth,requestUri:L,sessionId:re,tenantId:_||void 0,postBody:y||void 0,user:D.user,bypassAuthState:D.bypassAuthState};try{D.resolve(yield D.getIdpTask(b)(j))}catch(ne){D.reject(ne)}})()}onError(v){this.reject(v)}getIdpTask(v){switch(v){case"signInViaPopup":case"signInViaRedirect":return A;case"linkViaPopup":case"linkViaRedirect":return T;case"reauthViaPopup":case"reauthViaRedirect":return O;default:qe(this.auth,"internal-error")}}resolve(v){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(v),this.unregisterAndCleanUp()}reject(v){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(v),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oe=new Yt(2e3,1e4);function fe(R,v,D){return je.apply(this,arguments)}function je(){return(je=(0,f.Z)(function*(R,v,D){const L=Zt(R);!function Et(R,v,D){if(!(v instanceof D))throw D.name!==v.constructor.name&&qe(R,"argument-error"),Fe(R,"argument-error",`Type of ${v.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(R,v,_s);const re=ws(L,D);return new $r(L,"signInViaPopup",v,re).executeNotNull()})).apply(this,arguments)}let $r=(()=>{class R extends W{constructor(D,L,re,y,_){super(D,L,y,_),this.provider=re,this.authWindow=null,this.pollId=null,R.currentPopupAction&&R.currentPopupAction.cancel(),R.currentPopupAction=this}executeNotNull(){var D=this;return(0,f.Z)(function*(){const L=yield D.execute();return Ze(L,D.auth,"internal-error"),L})()}onExecution(){var D=this;return(0,f.Z)(function*(){bt(1===D.filter.length,"Popup operations only handle one event");const L=lr();D.authWindow=yield D.resolver._openPopup(D.auth,D.provider,D.filter[0],L),D.authWindow.associatedEvent=L,D.resolver._originValidation(D.auth).catch(re=>{D.reject(re)}),D.resolver._isIframeWebStorageSupported(D.auth,re=>{re||D.reject(ke(D.auth,"web-storage-unsupported"))}),D.pollUserCancellation()})()}get eventId(){var D;return(null===(D=this.authWindow)||void 0===D?void 0:D.associatedEvent)||null}cancel(){this.reject(ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,R.currentPopupAction=null}pollUserCancellation(){const D=()=>{var L,re;this.pollId=null!==(re=null===(L=this.authWindow)||void 0===L?void 0:L.window)&&void 0!==re&&re.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ke(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(D,oe.get())};D()}}return R.currentPopupAction=null,R})();const Hs="pendingRedirect",Fi=new Map;class $s extends W{constructor(v,D,L=!1){super(v,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],D,void 0,L),this.eventId=null}execute(){var v=()=>super.execute,D=this;return(0,f.Z)(function*(){let L=Fi.get(D.auth._key());if(!L){try{const y=(yield function ts(R,v){return Ra.apply(this,arguments)}(D.resolver,D.auth))?yield v().call(D):null;L=()=>Promise.resolve(y)}catch(re){L=()=>Promise.reject(re)}Fi.set(D.auth._key(),L)}return D.bypassAuthState||Fi.set(D.auth._key(),()=>Promise.resolve(null)),L()})()}onAuthEvent(v){var D=()=>super.onAuthEvent,L=this;return(0,f.Z)(function*(){if("signInViaRedirect"===v.type)return D().call(L,v);if("unknown"!==v.type){if(v.eventId){const re=yield L.auth._redirectUserForId(v.eventId);if(re)return L.user=re,D().call(L,v);L.resolve(null)}}else L.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Ra(){return(Ra=(0,f.Z)(function*(R,v){const D=function nl(R){return ve(Hs,R.config.apiKey,R.name)}(v),L=function yl(R){return Be(R._redirectPersistence)}(R);if(!(yield L._isAvailable()))return!1;const re="true"===(yield L._get(D));return yield L._remove(D),re})).apply(this,arguments)}function ui(R,v){Fi.set(R._key(),v)}function ou(R,v){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,f.Z)(function*(R,v){return yield Zt(R)._initializationPromise,$a(R,v,!1)})).apply(this,arguments)}function $a(R,v){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,f.Z)(function*(R,v,D=!1){const L=Zt(R),re=ws(L,v),_=yield new $s(L,re,D).execute();return _&&!D&&(delete _.user._redirectEventId,yield L._persistUserIfCurrent(_.user),yield L._setRedirectUser(null,v)),_})).apply(this,arguments)}class Pi{constructor(v){this.auth=v,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(v){this.consumers.add(v),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,v)&&(this.sendToConsumer(this.queuedRedirectEvent,v),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(v){this.consumers.delete(v)}onEvent(v){if(this.hasEventBeenHandled(v))return!1;let D=!1;return this.consumers.forEach(L=>{this.isEventForConsumer(v,L)&&(D=!0,this.sendToConsumer(v,L),this.saveEventToCache(v))}),this.hasHandledPotentialRedirect||!function gi(R){switch(R.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ns(R);default:return!1}}(v)||(this.hasHandledPotentialRedirect=!0,D||(this.queuedRedirectEvent=v,D=!0)),D}sendToConsumer(v,D){var L;if(v.error&&!ns(v)){const re=(null===(L=v.error.code)||void 0===L?void 0:L.split("auth/")[1])||"internal-error";D.onError(ke(this.auth,re))}else D.onAuthEvent(v)}isEventForConsumer(v,D){const L=null===D.eventId||!!v.eventId&&v.eventId===D.eventId;return D.filter.includes(v.type)&&L}hasEventBeenHandled(v){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(il(v))}saveEventToCache(v){this.cachedEventUids.add(il(v)),this.lastProcessedEventTime=Date.now()}}function il(R){return[R.type,R.eventId,R.sessionId,R.tenantId].filter(v=>v).join("-")}function ns({type:R,error:v}){return"unknown"===R&&"auth/no-auth-event"===v?.code}function Gs(){return(Gs=(0,f.Z)(function*(R,v={}){return hn(R,"GET","/v1/projects",v)})).apply(this,arguments)}const gs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ws=/^https?/;function ni(){return ni=(0,f.Z)(function*(R){if(R.config.emulator)return;const{authorizedDomains:v}=yield function Fl(R){return Gs.apply(this,arguments)}(R);for(const D of v)try{if(au(D))return}catch{}qe(R,"unauthorized-domain")}),ni.apply(this,arguments)}function au(R){const v=Pt(),{protocol:D,hostname:L}=new URL(v);if(R.startsWith("chrome-extension://")){const _=new URL(R);return""===_.hostname&&""===L?"chrome-extension:"===D&&R.replace("chrome-extension://","")===v.replace("chrome-extension://",""):"chrome-extension:"===D&&_.hostname===L}if(!Ws.test(D))return!1;if(gs.test(R))return L===R;const re=R.replace(/\./g,"\\.");return new RegExp("^(.+\\."+re+"|"+re+")$","i").test(L)}const kl=new Yt(3e4,6e4);function El(){const R=or().___jsl;if(R?.H)for(const v of Object.keys(R.H))if(R.H[v].r=R.H[v].r||[],R.H[v].L=R.H[v].L||[],R.H[v].r=[...R.H[v].L],R.CP)for(let D=0;D<R.CP.length;D++)R.CP[D]=null}let Ga=null;function sl(R){return Ga=Ga||function vo(R){return new Promise((v,D)=>{var L,re,y;function _(){El(),gapi.load("gapi.iframes",{callback:()=>{v(gapi.iframes.getContext())},ontimeout:()=>{El(),D(ke(R,"network-request-failed"))},timeout:kl.get()})}if(null!==(re=null===(L=or().gapi)||void 0===L?void 0:L.iframes)&&void 0!==re&&re.Iframe)v(gapi.iframes.getContext());else{if(null===(y=or().gapi)||void 0===y||!y.load){const g=Js("iframefcb");return or()[g]=()=>{gapi.load?_():D(ke(R,"network-request-failed"))},function Rl(R){return new Promise((v,D)=>{const L=document.createElement("script");L.setAttribute("src",R),L.onload=v,L.onerror=re=>{const y=ke("internal-error");y.customData=re,D(y)},L.type="text/javascript",L.charset="UTF-8",function Cs(){var R,v;return null!==(v=null===(R=document.getElementsByTagName("head"))||void 0===R?void 0:R[0])&&void 0!==v?v:document}().appendChild(L)})}(`https://apis.google.com/js/api.js?onload=${g}`).catch(b=>D(b))}_()}}).catch(v=>{throw Ga=null,v})}(R),Ga}const lu=new Yt(5e3,15e3),$u="__/auth/iframe",Ki="emulator/auth/iframe",Cu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gu(R){const v=R.config;Ze(v.authDomain,R,"auth-domain-config-required");const D=v.emulator?Fn(v,Ki):`https://${R.config.authDomain}/${$u}`,L={apiKey:v.apiKey,appName:R.name,v:te.Jn},re=Dl.get(R.config.apiHost);re&&(L.eid=re);const y=R._getFrameworks();return y.length&&(L.fw=y.join(",")),`${D}?${(0,w.xO)(L).slice(1)}`}function Ql(){return Ql=(0,f.Z)(function*(R){const v=yield sl(R),D=or().gapi;return Ze(D,R,"internal-error"),v.open({where:document.body,url:Gu(R),messageHandlersFilter:D.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cu,dontclear:!0},L=>new Promise(function(){var re=(0,f.Z)(function*(y,_){yield L.restyle({setHideOnLeave:!1});const g=ke(R,"network-request-failed"),b=or().setTimeout(()=>{_(g)},lu.get());function j(){or().clearTimeout(b),y(L)}L.ping(j).then(j,()=>{_(g)})});return function(y,_){return re.apply(this,arguments)}}()))}),Ql.apply(this,arguments)}const uu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wa=500,$i=600,ql="_blank",Ul="http://localhost";class Il{constructor(v){this.window=v,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ko="__/auth/handler",cu="emulator/auth/handler";function du(R,v,D,L,re,y){Ze(R.config.authDomain,R,"auth-domain-config-required"),Ze(R.config.apiKey,R,"invalid-api-key");const _={apiKey:R.config.apiKey,appName:R.name,authType:D,redirectUrl:L,v:te.Jn,eventId:re};if(v instanceof _s){v.setDefaultLanguage(R.languageCode),_.providerId=v.providerId||"",(0,w.xb)(v.getCustomParameters())||(_.customParameters=JSON.stringify(v.getCustomParameters()));for(const[b,j]of Object.entries(y||{}))_[b]=j}if(v instanceof qn){const b=v.getScopes().filter(j=>""!==j);b.length>0&&(_.scopes=b.join(","))}R.tenantId&&(_.tid=R.tenantId);const g=_;for(const b of Object.keys(g))void 0===g[b]&&delete g[b];return`${function wu({config:R}){return R.emulator?Fn(R,cu):`https://${R.authDomain}/${ko}`}(R)}?${(0,w.xO)(g).slice(1)}`}const hu="webStorageSupport",zu=class Tu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dn,this._completeRedirectFn=$a,this._overrideRedirectResult=ui}_openPopup(v,D,L,re){var y=this;return(0,f.Z)(function*(){var _;bt(null===(_=y.eventManagers[v._key()])||void 0===_?void 0:_.manager,"_initialize() not called before _openPopup()");const g=du(v,D,L,Pt(),re);return function Fo(R,v,D,L=Wa,re=$i){const y=Math.max((window.screen.availHeight-re)/2,0).toString(),_=Math.max((window.screen.availWidth-L)/2,0).toString();let g="";const b=Object.assign(Object.assign({},uu),{width:L.toString(),height:re.toString(),top:y,left:_}),j=(0,w.z$)().toLowerCase();D&&(g=zt(j)?ql:D),Le(j)&&(v=v||Ul,b.scrollbars="yes");const ne=Object.entries(b).reduce((Ie,[Xe,pt])=>`${Ie}${Xe}=${pt},`,"");if(function rn(R=(0,w.z$)()){var v;return Ge(R)&&!(null===(v=window.navigator)||void 0===v||!v.standalone)}(j)&&"_self"!==g)return function Vl(R,v){const D=document.createElement("a");D.href=R,D.target=v;const L=document.createEvent("MouseEvent");L.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),D.dispatchEvent(L)}(v||"",g),new Il(null);const _e=window.open(v||"",g,ne);Ze(_e,R,"popup-blocked");try{_e.focus()}catch{}return new Il(_e)}(v,g,lr())})()}_openRedirect(v,D,L,re){var y=this;return(0,f.Z)(function*(){return yield y._originValidation(v),function Xt(R){or().location.href=R}(du(v,D,L,Pt(),re)),new Promise(()=>{})})()}_initialize(v){const D=v._key();if(this.eventManagers[D]){const{manager:re,promise:y}=this.eventManagers[D];return re?Promise.resolve(re):(bt(y,"If manager is not set, promise should be"),y)}const L=this.initAndGetManager(v);return this.eventManagers[D]={promise:L},L.catch(()=>{delete this.eventManagers[D]}),L}initAndGetManager(v){var D=this;return(0,f.Z)(function*(){const L=yield function Wu(R){return Ql.apply(this,arguments)}(v),re=new Pi(v);return L.register("authEvent",y=>(Ze(y?.authEvent,v,"invalid-auth-event"),{status:re.onEvent(y.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),D.eventManagers[v._key()]={manager:re},D.iframes[v._key()]=L,re})()}_isIframeWebStorageSupported(v,D){this.iframes[v._key()].send(hu,{type:hu},re=>{var y;const _=null===(y=re?.[0])||void 0===y?void 0:y[hu];void 0!==_&&D(!!_),qe(v,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(v){const D=v._key();return this.originValidationPromises[D]||(this.originValidationPromises[D]=function Hu(R){return ni.apply(this,arguments)}(v)),this.originValidationPromises[D]}get _shouldInitProactively(){return Ir()||Rt()||Ge()}};var zs="@firebase/auth";class ea{constructor(v){this.auth=v,this.internalListeners=new Map}getUid(){var v;return this.assertAuthConfigured(),(null===(v=this.auth.currentUser)||void 0===v?void 0:v.uid)||null}getToken(v){var D=this;return(0,f.Z)(function*(){return D.assertAuthConfigured(),yield D.auth._initializationPromise,D.auth.currentUser?{accessToken:yield D.auth.currentUser.getIdToken(v)}:null})()}addAuthTokenListener(v){if(this.assertAuthConfigured(),this.internalListeners.has(v))return;const D=this.auth.onIdTokenChanged(L=>{v(L?.stsTokenManager.accessToken||null)});this.internalListeners.set(v,D),this.updateProactiveRefresh()}removeAuthTokenListener(v){this.assertAuthConfigured();const D=this.internalListeners.get(v);D&&(this.internalListeners.delete(v),D(),this.updateProactiveRefresh())}assertAuthConfigured(){Ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const xa=(0,w.Pz)("authIdTokenMaxAge")||300;let fu=null;const Na=R=>function(){var v=(0,f.Z)(function*(D){const L=D&&(yield D.getIdTokenResult()),re=L&&((new Date).getTime()-Date.parse(L.issuedAtTime))/1e3;if(re&&re>xa)return;const y=L?.token;fu!==y&&(fu=y,yield fetch(R,{method:y?"POST":"DELETE",headers:y?{Authorization:`Bearer ${y}`}:{}}))});return function(D){return v.apply(this,arguments)}}();function Bl(R=(0,te.Mq)()){const v=(0,te.qX)(R,"auth");if(v.isInitialized())return v.getImmediate();const D=function ct(R,v){const D=(0,te.qX)(R,"auth");if(D.isInitialized()){const re=D.getImmediate(),y=D.getOptions();if((0,w.vZ)(y,v??{}))return re;qe(re,"already-initialized")}return D.initialize({options:v})}(R,{popupRedirectResolver:zu,persistence:[iu,ft,dn]}),L=(0,w.Pz)("authTokenSyncURL");if(L){const y=Na(L);(function Aa(R,v,D){(0,w.m9)(R).beforeAuthStateChanged(v,D)})(D,y,()=>y(D.currentUser)),function fa(R,v,D,L){(0,w.m9)(R).onIdTokenChanged(v,D,L)}(D,_=>y(_))}const re=(0,w.q4)("auth");return re&&function Gn(R,v,D){const L=Zt(R);Ze(L._canInitEmulator,L,"emulator-config-failed"),Ze(/^https?:\/\//.test(v),L,"invalid-emulator-scheme");const re=!!D?.disableWarnings,y=cn(v),{host:_,port:g}=function gr(R){const v=cn(R),D=/(\/\/)?([^?#/]+)/.exec(R.substr(v.length));if(!D)return{host:"",port:null};const L=D[2].split("@").pop()||"",re=/^(\[[^\]]+\])(:|$)/.exec(L);if(re){const y=re[1];return{host:y,port:nr(L.substr(y.length+1))}}{const[y,_]=L.split(":");return{host:y,port:nr(_)}}}(v);L.config.emulator={url:`${y}//${_}${null===g?"":`:${g}`}/`},L.settings.appVerificationDisabledForTesting=!0,L.emulatorConfig=Object.freeze({host:_,port:g,protocol:y.replace(":",""),options:Object.freeze({disableWarnings:re})}),re||function ei(){function R(){const v=document.createElement("p"),D=v.style;v.innerText="Running in emulator mode. Do not use with production credentials.",D.position="fixed",D.width="100%",D.backgroundColor="#ffffff",D.border=".1em solid #000000",D.color="#b50000",D.bottom="0px",D.left="0px",D.margin="0px",D.zIndex="10000",D.textAlign="center",v.classList.add("firebase-emulator-warning"),document.body.appendChild(v)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",R):R())}()}(D,`http://${re}`),D}!function Gi(R){(0,te.Xd)(new ie.wA("auth",(v,{options:D})=>{const L=v.getProvider("app").getImmediate(),re=v.getProvider("heartbeat"),{apiKey:y,authDomain:_}=L.options;return((g,b)=>{Ze(y&&!y.includes(":"),"invalid-api-key",{appName:g.name}),Ze(!_?.includes(":"),"argument-error",{appName:g.name});const j={apiKey:y,authDomain:_,clientPlatform:R,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ht(R)},ne=new xt(g,b,j);return function nt(R,v){const D=v?.persistence||[],L=(Array.isArray(D)?D:[D]).map(Be);v?.errorMap&&R._updateErrorMap(v.errorMap),R._initializeWithPersistence(L,v?.popupRedirectResolver)}(ne,D),ne})(L,re)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((v,D,L)=>{v.getProvider("auth-internal").initialize()})),(0,te.Xd)(new ie.wA("auth-internal",v=>{const D=Zt(v.getProvider("auth").getImmediate());return new ea(D)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,te.KN)(zs,"0.21.3",function Ea(R){switch(R){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(R)),(0,te.KN)(zs,"0.21.3","esm2017")}("Browser")},6197:(we,le,I)=>{I.d(le,{iU:()=>Gr,U2:()=>uc,N8:()=>Eh,nP:()=>Gc,S1:()=>Ps,ae:()=>ms,jM:()=>jl,VF:()=>Da,iH:()=>Nr,Od:()=>Ia,Bt:()=>Ih,t8:()=>ki,Vx:()=>Cl});var f=I(9671),w=I(6881),te=I(4859),H=I(2090),X=I(1877);const ie="@firebase/database";let K="";class q{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,c){null==c?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,H.Wl)(c))}get(u){const c=this.domStorage_.getItem(this.prefixedName_(u));return null==c?null:(0,H.cI)(c)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class de{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,c){null==c?delete this.cache_[u]:this.cache_[u]=c}get(u){return(0,H.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const ge=function(h){try{if(typeof window<"u"&&typeof window[h]<"u"){const u=window[h];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new q(u)}}catch{}return new de},Ne=ge("localStorage"),Ke=ge("sessionStorage"),$e=new X.Yd("@firebase/database"),Qe=function(){let h=1;return function(){return h++}}(),Ve=function(h){const u=(0,H.dS)(h),c=new H.gQ;c.update(u);const E=c.digest();return H.US.encodeByteArray(E)},We=function(...h){let u="";for(let c=0;c<h.length;c++){const E=h[c];Array.isArray(E)||E&&"object"==typeof E&&"number"==typeof E.length?u+=We.apply(null,E):u+="object"==typeof E?(0,H.Wl)(E):E,u+=" "}return u};let Ye=null,qe=!0;const Fe=function(...h){if(!0===qe&&(qe=!1,null===Ye&&!0===Ke.get("logging_enabled")&&function(h,u){(0,H.hu)(!u||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?($e.logLevel=X.in.VERBOSE,Ye=$e.log.bind($e),u&&Ke.set("logging_enabled",!0)):"function"==typeof h?Ye=h:(Ye=null,Ke.remove("logging_enabled"))}(!0)),Ye){const u=We.apply(null,h);Ye(u)}},Et=function(h){return function(...u){Fe(h,...u)}},Ct=function(...h){const u="FIREBASE INTERNAL ERROR: "+We(...h);$e.error(u)},Ze=function(...h){const u=`FIREBASE FATAL ERROR: ${We(...h)}`;throw $e.error(u),new Error(u)},Nt=function(...h){const u="FIREBASE WARNING: "+We(...h);$e.warn(u)},Je=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},ct="[MIN_NAME]",nt="[MAX_NAME]",Pt=function(h,u){if(h===u)return 0;if(h===ct||u===nt)return-1;if(u===ct||h===nt)return 1;{const c=It(h),E=It(u);return null!==c?null!==E?c-E==0?h.length-u.length:c-E:-1:null!==E?1:h<u?-1:1}},Tt=function(h,u){return h===u?0:h<u?-1:1},Ht=function(h,u){if(u&&h in u)return u[h];throw new Error("Missing required key ("+h+") in object: "+(0,H.Wl)(u))},ir=function(h){if("object"!=typeof h||null===h)return(0,H.Wl)(h);const u=[];for(const E in h)u.push(E);u.sort();let c="{";for(let E=0;E<u.length;E++)0!==E&&(c+=","),c+=(0,H.Wl)(u[E]),c+=":",c+=ir(h[u[E]]);return c+="}",c},an=function(h,u){const c=h.length;if(c<=u)return[h];const E=[];for(let M=0;M<c;M+=u)E.push(h.substring(M,M+u>c?c:M+u));return E};function Yt(h,u){for(const c in h)h.hasOwnProperty(c)&&u(c,h[c])}const Fn=function(h){(0,H.hu)(!Je(h),"Invalid JSON number");const E=1023;let M,B,Y,me,be;0===h?(B=0,Y=0,M=1/h==-1/0?1:0):(M=h<0,(h=Math.abs(h))>=Math.pow(2,1-E)?(me=Math.min(Math.floor(Math.log(h)/Math.LN2),E),B=me+E,Y=Math.round(h*Math.pow(2,52-me)-Math.pow(2,52))):(B=0,Y=Math.round(h/Math.pow(2,-1074))));const xe=[];for(be=52;be;be-=1)xe.push(Y%2?1:0),Y=Math.floor(Y/2);for(be=11;be;be-=1)xe.push(B%2?1:0),B=Math.floor(B/2);xe.push(M?1:0),xe.reverse();const _t=xe.join("");let Dt="";for(be=0;be<64;be+=8){let At=parseInt(_t.substr(be,8),2).toString(16);1===At.length&&(At="0"+At),Dt+=At}return Dt.toLowerCase()},Mn=new RegExp("^-?(0*)\\d{1,10}$"),It=function(h){if(Mn.test(h)){const u=Number(h);if(u>=-2147483648&&u<=2147483647)return u}return null},ut=function(h){try{h()}catch(u){setTimeout(()=>{throw Nt("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},Ue=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},yt=function(h,u){const c=setTimeout(h,u);return"number"==typeof c&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class Lt{constructor(u,c){this.appName_=u,this.appCheckProvider=c,this.appCheck=c?.getImmediate({optional:!0}),this.appCheck||c?.get().then(E=>this.appCheck=E)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((c,E)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(c,E):c(null)},0)})}addTokenChangeListener(u){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(E=>E.addTokenListener(u))}notifyForInvalidToken(){Nt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Vn{constructor(u,c,E){this.appName_=u,this.firebaseOptions_=c,this.authProvider_=E,this.auth_=null,this.auth_=E.getImmediate({optional:!0}),this.auth_||E.onInit(M=>this.auth_=M)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(c=>c&&"auth/token-not-initialized"===c.code?(Fe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,E)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(c,E):c(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(c=>c.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(c=>c.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Nt(u)}}let Kn=(()=>{class h{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const Qr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Yn="websocket",dr="long_polling";class un{constructor(u,c,E,M,B=!1,Y="",me=!1,be=!1){this.secure=c,this.namespace=E,this.webSocketOnly=M,this.nodeAdmin=B,this.persistenceKey=Y,this.includeNamespaceInQueryParams=me,this.isUsingEmulator=be,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ne.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&Ne.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Qn(h,u,c){let E;if((0,H.hu)("string"==typeof u,"typeof type must == string"),(0,H.hu)("object"==typeof c,"typeof params must == object"),u===Yn)E=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(u!==dr)throw new Error("Unknown connection type: "+u);E=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function en(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(c.ns=h.namespace);const M=[];return Yt(c,(B,Y)=>{M.push(B+"="+Y)}),E+M.join("&")}class yi{constructor(){this.counters_={}}incrementCounter(u,c=1){(0,H.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=c}get(){return(0,H.p$)(this.counters_)}}const Ur={},mi={};function Vr(h){const u=h.toString();return Ur[u]||(Ur[u]=new yi),Ur[u]}class _r{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,c){this.closeAfterResponse=u,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,c){for(this.pendingResponses[u]=c;this.pendingResponses[this.currentResponseNum];){const E=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let M=0;M<E.length;++M)E[M]&&ut(()=>{this.onMessage_(E[M])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Re{constructor(u,c,E,M,B,Y,me){this.connId=u,this.repoInfo=c,this.applicationId=E,this.appCheckToken=M,this.authToken=B,this.transportSessionId=Y,this.lastSessionId=me,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Et(u),this.stats_=Vr(c),this.urlFn=be=>(this.appCheckToken&&(be.ac=this.appCheckToken),Qn(c,dr,be))}open(u,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new _r(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,H.Yr)()||"complete"===document.readyState)h();else{let u=!1;const c=function(){document.body?u||(u=!0,h()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ae((...B)=>{const[Y,me,be,xe,_t]=B;if(this.incrementIncomingBytes_(B),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===Y)this.id=me,this.password=be;else{if("close"!==Y)throw new Error("Unrecognized command received: "+Y);me?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(me,()=>{this.onClosed_()})):this.onClosed_()}},(...B)=>{const[Y,me]=B;this.incrementIncomingBytes_(B),this.myPacketOrderer.handleResponse(Y,me)},()=>{this.onClosed_()},this.urlFn);const E={start:"t"};E.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(E.cb=this.scriptTagHolder.uniqueCallbackIdentifier),E.v="5",this.transportSessionId&&(E.s=this.transportSessionId),this.lastSessionId&&(E.ls=this.lastSessionId),this.applicationId&&(E.p=this.applicationId),this.appCheckToken&&(E.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Qr.test(location.hostname)&&(E.r="f");const M=this.urlFn(E);this.log_("Connecting via long-poll to "+M),this.scriptTagHolder.addTag(M,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Re.forceAllow_=!0}static forceDisallow(){Re.forceDisallow_=!0}static isAvailable(){return!((0,H.Yr)()||!Re.forceAllow_&&(Re.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const c=(0,H.Wl)(u);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const E=(0,H.h$)(c),M=an(E,1840);for(let B=0;B<M.length;B++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,M.length,M[B]),this.curSegmentNum++}addDisconnectPingFrame(u,c){if((0,H.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const E={dframe:"t"};E.id=u,E.pw=c,this.myDisconnFrame.src=this.urlFn(E),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const c=(0,H.Wl)(u).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class Ae{constructor(u,c,E,M){if(this.onDisconnect=E,this.urlFn=M,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,H.Yr)())this.commandCB=u,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=Qe(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=Ae.createIFrame_();let B="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(B='<script>document.domain="'+document.domain+'";<\/script>');const Y="<html><body>"+B+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(Y),this.myIFrame.doc.close()}catch(me){Fe("frame writing exception"),me.stack&&Fe(me.stack),Fe(me)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||Fe("No IE domain setting required")}catch{const E=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+E+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,c){for(this.myID=u,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let c=this.urlFn(u),E="",M=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+E.length<=1870;){const Y=this.pendingSegs.shift();E=E+"&seg"+M+"="+Y.seg+"&ts"+M+"="+Y.ts+"&d"+M+"="+Y.d,M++}return c+=E,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(u,c,E){this.pendingSegs.push({seg:u,ts:c,d:E}),this.alive&&this.newRequest_()}addLongPollTag_(u,c){this.outstandingRequests.add(c);const E=()=>{this.outstandingRequests.delete(c),this.newRequest_()},M=setTimeout(E,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(M),E()})}addTag(u,c){(0,H.Yr)()?this.doNodeLongPoll(u,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const E=this.myIFrame.doc.createElement("script");E.type="text/javascript",E.async=!0,E.src=u,E.onload=E.onreadystatechange=function(){const M=E.readyState;(!M||"loaded"===M||"complete"===M)&&(E.onload=E.onreadystatechange=null,E.parentNode&&E.parentNode.removeChild(E),c())},E.onerror=()=>{Fe("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(E)}catch{}},Math.floor(1))}}let Ge=null;typeof MozWebSocket<"u"?Ge=MozWebSocket:typeof WebSocket<"u"&&(Ge=WebSocket);let Ft=(()=>{class h{constructor(c,E,M,B,Y,me,be){this.connId=c,this.applicationId=M,this.appCheckToken=B,this.authToken=Y,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Et(this.connId),this.stats_=Vr(E),this.connURL=h.connectionURL_(E,me,be,B,M),this.nodeAdmin=E.nodeAdmin}static connectionURL_(c,E,M,B,Y){const me={v:"5"};return!(0,H.Yr)()&&typeof location<"u"&&location.hostname&&Qr.test(location.hostname)&&(me.r="f"),E&&(me.s=E),M&&(me.ls=M),B&&(me.ac=B),Y&&(me.p=Y),Qn(c,Yn,me)}open(c,E){this.onDisconnect=E,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ne.set("previous_websocket_failure",!0);try{let M;if((0,H.Yr)()){M={headers:{"User-Agent":`Firebase/5/${K}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(M.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(M.headers["X-Firebase-AppCheck"]=this.appCheckToken);const Y=process.env,me=0===this.connURL.indexOf("wss://")?Y.HTTPS_PROXY||Y.https_proxy:Y.HTTP_PROXY||Y.http_proxy;me&&(M.proxy={origin:me})}this.mySock=new Ge(this.connURL,[],M)}catch(M){this.log_("Error instantiating WebSocket.");const B=M.message||M.data;return B&&this.log_(B),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=M=>{this.handleIncomingFrame(M)},this.mySock.onerror=M=>{this.log_("WebSocket error.  Closing connection.");const B=M.message||M.data;B&&this.log_(B),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let c=!1;if(typeof navigator<"u"&&navigator.userAgent){const M=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);M&&M.length>1&&parseFloat(M[1])<4.4&&(c=!0)}return!c&&null!==Ge&&!h.forceDisallow_}static previouslyFailed(){return Ne.isInMemoryStorage||!0===Ne.get("previous_websocket_failure")}markConnectionHealthy(){Ne.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const E=this.frames.join("");this.frames=null;const M=(0,H.cI)(E);this.onMessage(M)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,H.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const E=Number(c);if(!isNaN(E))return this.handleNewFrameCount_(E),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const E=c.data;if(this.bytesReceived+=E.length,this.stats_.incrementCounter("bytes_received",E.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(E);else{const M=this.extractFrameCount_(E);null!==M&&this.appendFrame_(M)}}send(c){this.resetKeepAlive();const E=(0,H.Wl)(c);this.bytesSent+=E.length,this.stats_.incrementCounter("bytes_sent",E.length);const M=an(E,16384);M.length>1&&this.sendString_(String(M.length));for(let B=0;B<M.length;B++)this.sendString_(M[B])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(E){this.log_("Exception thrown from WebSocket.send():",E.message||E.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),rn=(()=>{class h{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[Re,Ft]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const E=Ft&&Ft.isAvailable();let M=E&&!Ft.previouslyFailed();if(c.webSocketOnly&&(E||Nt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),M=!0),M)this.transports_=[Ft];else{const B=this.transports_=[];for(const Y of h.ALL_TRANSPORTS)Y&&Y.isAvailable()&&B.push(Y);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class xs{constructor(u,c,E,M,B,Y,me,be,xe,_t){this.id=u,this.repoInfo_=c,this.applicationId_=E,this.appCheckToken_=M,this.authToken_=B,this.onMessage_=Y,this.onReady_=me,this.onDisconnect_=be,this.onKill_=xe,this.lastSessionId=_t,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Et("c:"+this.id+":"),this.transportManager_=new rn(c),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),E=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,E)},Math.floor(0));const M=u.healthyTimeout||0;M>0&&(this.healthyTimeout_=yt(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(M)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return c=>{u===this.conn_?this.onConnectionLost_(c):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return c=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(c):u===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const c=u.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const c=Ht("t",u),E=Ht("d",u);if("c"===c)this.onSecondaryControl_(E);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(E)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const c=Ht("t",u),E=Ht("d",u);"c"===c?this.onControl_(E):"d"===c&&this.onDataMessage_(E)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const c=Ht("t",u);if("d"in u){const E=u.d;if("h"===c){const M=Object.assign({},E);this.repoInfo_.isUsingEmulator&&(M.h=this.repoInfo_.host),this.onHandshake_(M)}else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let M=0;M<this.pendingDataMessages.length;++M)this.onDataMessage_(this.pendingDataMessages[M]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(E):"r"===c?this.onReset_(E):"e"===c?Ct("Server Error: "+E):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ct("Unknown control packet command: "+c)}}onHandshake_(u){const c=u.ts,E=u.v,M=u.h;this.sessionId=u.s,this.repoInfo_.host=M,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==E&&Nt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),E=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,E),yt(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,c){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yt(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ne.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ts{put(u,c,E,M){}merge(u,c,E,M){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,c,E){}onDisconnectMerge(u,c,E){}onDisconnectCancel(u,c){}reportStats(u){}}class _i{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,H.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...c){if(Array.isArray(this.listeners_[u])){const E=[...this.listeners_[u]];for(let M=0;M<E.length;M++)E[M].callback.apply(E[M].context,c)}}on(u,c,E){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:c,context:E});const M=this.getInitialEvent(u);M&&c.apply(E,M)}off(u,c,E){this.validateEventType_(u);const M=this.listeners_[u]||[];for(let B=0;B<M.length;B++)if(M[B].callback===c&&(!E||E===M[B].context))return void M.splice(B,1)}validateEventType_(u){(0,H.hu)(this.allowedEvents_.find(c=>c===u),"Unknown event: "+u)}}class Kr extends _i{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,H.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Kr}getInitialEvent(u){return(0,H.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}const kt=32,xn=768;class fn{constructor(u,c){if(void 0===c){this.pieces_=u.split("/");let E=0;for(let M=0;M<this.pieces_.length;M++)this.pieces_[M].length>0&&(this.pieces_[E]=this.pieces_[M],E++);this.pieces_.length=E,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=c}toString(){let u="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(u+="/"+this.pieces_[c]);return u||"/"}}function Sn(){return new fn("")}function Cn(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function vr(h){return h.pieces_.length-h.pieceNum_}function Xn(h){let u=h.pieceNum_;return u<h.pieces_.length&&u++,new fn(h.pieces_,u)}function Mr(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function si(h,u=0){return h.pieces_.slice(h.pieceNum_+u)}function An(h){if(h.pieceNum_>=h.pieces_.length)return null;const u=[];for(let c=h.pieceNum_;c<h.pieces_.length-1;c++)u.push(h.pieces_[c]);return new fn(u,0)}function ar(h,u){const c=[];for(let E=h.pieceNum_;E<h.pieces_.length;E++)c.push(h.pieces_[E]);if(u instanceof fn)for(let E=u.pieceNum_;E<u.pieces_.length;E++)c.push(u.pieces_[E]);else{const E=u.split("/");for(let M=0;M<E.length;M++)E[M].length>0&&c.push(E[M])}return new fn(c,0)}function kn(h){return h.pieceNum_>=h.pieces_.length}function Br(h,u){const c=Cn(h),E=Cn(u);if(null===c)return u;if(c===E)return Br(Xn(h),Xn(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+h+")")}function Ys(h,u){const c=si(h,0),E=si(u,0);for(let M=0;M<c.length&&M<E.length;M++){const B=Pt(c[M],E[M]);if(0!==B)return B}return c.length===E.length?0:c.length<E.length?-1:1}function Ee(h,u){if(vr(h)!==vr(u))return!1;for(let c=h.pieceNum_,E=u.pieceNum_;c<=h.pieces_.length;c++,E++)if(h.pieces_[c]!==u.pieces_[E])return!1;return!0}function it(h,u){let c=h.pieceNum_,E=u.pieceNum_;if(vr(h)>vr(u))return!1;for(;c<h.pieces_.length;){if(h.pieces_[c]!==u.pieces_[E])return!1;++c,++E}return!0}class ze{constructor(u,c){this.errorPrefix_=c,this.parts_=si(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let E=0;E<this.parts_.length;E++)this.byteLength_+=(0,H.ug)(this.parts_[E]);Kt(this)}}function Kt(h){if(h.byteLength_>xn)throw new Error(h.errorPrefix_+"has a key path longer than "+xn+" bytes ("+h.byteLength_+").");if(h.parts_.length>kt)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kt+") or object contains a cycle "+mn(h))}function mn(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class Un extends _i{constructor(){let u,c;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(c="visibilitychange",u="hidden"):typeof document.mozHidden<"u"?(c="mozvisibilitychange",u="mozHidden"):typeof document.msHidden<"u"?(c="msvisibilitychange",u="msHidden"):typeof document.webkitHidden<"u"&&(c="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const E=!document[u];E!==this.visible_&&(this.visible_=E,this.trigger("visible",E))},!1)}static getInstance(){return new Un}getInitialEvent(u){return(0,H.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const mr=1e3;let Qs,vi=(()=>{class h extends Ts{constructor(c,E,M,B,Y,me,be,xe){if(super(),this.repoInfo_=c,this.applicationId_=E,this.onDataUpdate_=M,this.onConnectStatus_=B,this.onServerInfoUpdate_=Y,this.authTokenProvider_=me,this.appCheckTokenProvider_=be,this.authOverride_=xe,this.id=h.nextPersistentConnectionId_++,this.log_=Et("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=mr,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,xe&&!(0,H.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Un.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&Kr.getInstance().on("online",this.onOnline_,this)}sendRequest(c,E,M){const B=++this.requestNumber_,Y={r:B,a:c,b:E};this.log_((0,H.Wl)(Y)),(0,H.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(Y),M&&(this.requestCBHash_[B]=M)}get(c){this.initConnection_();const E=new H.BH,B={action:"g",request:{p:c._path.toString(),q:c._queryObject},onComplete:me=>{const be=me.d;"ok"===me.s?E.resolve(be):E.reject(be)}};return this.outstandingGets_.push(B),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),E.promise}listen(c,E,M,B){this.initConnection_();const Y=c._queryIdentifier,me=c._path.toString();this.log_("Listen called for "+me+" "+Y),this.listens.has(me)||this.listens.set(me,new Map),(0,H.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,H.hu)(!this.listens.get(me).has(Y),"listen() called twice for same path/queryId.");const be={onComplete:B,hashFn:E,query:c,tag:M};this.listens.get(me).set(Y,be),this.connected_&&this.sendListen_(be)}sendGet_(c){const E=this.outstandingGets_[c];this.sendRequest("g",E.request,M=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),E.onComplete&&E.onComplete(M)})}sendListen_(c){const E=c.query,M=E._path.toString(),B=E._queryIdentifier;this.log_("Listen on "+M+" for "+B);const Y={p:M};c.tag&&(Y.q=E._queryObject,Y.t=c.tag),Y.h=c.hashFn(),this.sendRequest("q",Y,be=>{const xe=be.d,_t=be.s;h.warnOnListenWarnings_(xe,E),(this.listens.get(M)&&this.listens.get(M).get(B))===c&&(this.log_("listen response",be),"ok"!==_t&&this.removeListen_(M,B),c.onComplete&&c.onComplete(_t,xe))})}static warnOnListenWarnings_(c,E){if(c&&"object"==typeof c&&(0,H.r3)(c,"w")){const M=(0,H.DV)(c,"w");if(Array.isArray(M)&&~M.indexOf("no_index")){const B='".indexOn": "'+E._queryParams.getIndex().toString()+'"',Y=E._path.toString();Nt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${B} at ${Y} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,H.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,E=(0,H.w9)(c)?"auth":"gauth",M={cred:c};null===this.authOverride_?M.noauth=!0:"object"==typeof this.authOverride_&&(M.authvar=this.authOverride_),this.sendRequest(E,M,B=>{const Y=B.s,me=B.d||"error";this.authToken_===c&&("ok"===Y?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(Y,me))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const E=c.s,M=c.d||"error";"ok"===E?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(E,M)})}unlisten(c,E){const M=c._path.toString(),B=c._queryIdentifier;this.log_("Unlisten called for "+M+" "+B),(0,H.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(M,B)&&this.connected_&&this.sendUnlisten_(M,B,c._queryObject,E)}sendUnlisten_(c,E,M,B){this.log_("Unlisten on "+c+" for "+E);const Y={p:c};B&&(Y.q=M,Y.t=B),this.sendRequest("n",Y)}onDisconnectPut(c,E,M){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,E,M):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:E,onComplete:M})}onDisconnectMerge(c,E,M){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,E,M):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:E,onComplete:M})}onDisconnectCancel(c,E){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,E):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:E})}sendOnDisconnect_(c,E,M,B){const Y={p:E,d:M};this.log_("onDisconnect "+c,Y),this.sendRequest(c,Y,me=>{B&&setTimeout(()=>{B(me.s,me.d)},Math.floor(0))})}put(c,E,M,B){this.putInternal("p",c,E,M,B)}merge(c,E,M,B){this.putInternal("m",c,E,M,B)}putInternal(c,E,M,B,Y){this.initConnection_();const me={p:E,d:M};void 0!==Y&&(me.h=Y),this.outstandingPuts_.push({action:c,request:me,onComplete:B}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+E)}sendPut_(c){const E=this.outstandingPuts_[c].action,M=this.outstandingPuts_[c].request,B=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(E,M,Y=>{this.log_(E+" response",Y),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),B&&B(Y.s,Y.d)})}reportStats(c){if(this.connected_){const E={c};this.log_("reportStats",E),this.sendRequest("s",E,M=>{"ok"!==M.s&&this.log_("reportStats","Error sending stats: "+M.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,H.Wl)(c));const E=c.r,M=this.requestCBHash_[E];M&&(delete this.requestCBHash_[E],M(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,E){this.log_("handleServerMessage",c,E),"d"===c?this.onDataUpdate_(E.p,E.d,!1,E.t):"m"===c?this.onDataUpdate_(E.p,E.d,!0,E.t):"c"===c?this.onListenRevoked_(E.p,E.q):"ac"===c?this.onAuthRevoked_(E.s,E.d):"apc"===c?this.onAppCheckRevoked_(E.s,E.d):"sd"===c?this.onSecurityDebugPacket_(E):Ct("Unrecognized action received from server: "+(0,H.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,E){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=E,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,H.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=mr,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=mr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=mr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let E=Math.max(0,this.reconnectDelay_-c);E=Math.random()*E,this.log_("Trying to reconnect in "+E+"ms"),this.scheduleConnect_(E),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,f.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const E=c.onDataMessage_.bind(c),M=c.onReady_.bind(c),B=c.onRealtimeDisconnect_.bind(c),Y=c.id+":"+h.nextConnectionId_++,me=c.lastSessionId;let be=!1,xe=null;const _t=function(){xe?xe.close():(be=!0,B())};c.realtime_={close:_t,sendRequest:function(En){(0,H.hu)(xe,"sendRequest call when we're not connected not allowed."),xe.sendRequest(En)}};const At=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[En,zn]=yield Promise.all([c.authTokenProvider_.getToken(At),c.appCheckTokenProvider_.getToken(At)]);be?Fe("getToken() completed but was canceled"):(Fe("getToken() completed. Creating connection."),c.authToken_=En&&En.accessToken,c.appCheckToken_=zn&&zn.token,xe=new xs(Y,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,E,M,B,Ci=>{Nt(Ci+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},me))}catch(En){c.log_("Failed to get token: "+En),be||(c.repoInfo_.nodeAdmin&&Nt(En),_t())}}})()}interrupt(c){Fe("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){Fe("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,H.xb)(this.interruptReasons_)&&(this.reconnectDelay_=mr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const E=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:E})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const E=this.outstandingPuts_[c];E&&"h"in E.request&&E.queued&&(E.onComplete&&E.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,E){let M;M=E?E.map(Y=>ir(Y)).join("$"):"default";const B=this.removeListen_(c,M);B&&B.onComplete&&B.onComplete("permission_denied")}removeListen_(c,E){const M=new fn(c).toString();let B;if(this.listens.has(M)){const Y=this.listens.get(M);B=Y.get(E),Y.delete(E),0===Y.size&&this.listens.delete(M)}else B=void 0;return B}onAuthRevoked_(c,E){Fe("Auth token revoked: "+c+"/"+E),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,E){Fe("App check token revoked: "+c+"/"+E),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const E of c.values())this.sendListen_(E);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let E="js";(0,H.Yr)()&&(E=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+E+"."+K.replace(/\./g,"-")]=1,(0,H.uI)()?c["framework.cordova"]=1:(0,H.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=Kr.getInstance().currentlyOnline();return(0,H.xb)(this.interruptReasons_)&&c}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class yn{constructor(u,c){this.name=u,this.node=c}static Wrap(u,c){return new yn(u,c)}}class Ss{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,c){const E=new yn(ct,u),M=new yn(ct,c);return 0!==this.compare(E,M)}minPost(){return yn.MIN}}class ds extends Ss{static get __EMPTY_NODE(){return Qs}static set __EMPTY_NODE(u){Qs=u}compare(u,c){return Pt(u.name,c.name)}isDefinedOn(u){throw(0,H.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,c){return!1}minPost(){return yn.MIN}maxPost(){return new yn(nt,Qs)}makePost(u,c){return(0,H.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new yn(u,Qs)}toString(){return".key"}}const sr=new ds;class Ns{constructor(u,c,E,M,B=null){this.isReverse_=M,this.resultGenerator_=B,this.nodeStack_=[];let Y=1;for(;!u.isEmpty();)if(Y=c?E(u.key,c):1,M&&(Y*=-1),Y<0)u=this.isReverse_?u.left:u.right;else{if(0===Y){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,u=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let so,bi=(()=>{class h{constructor(c,E,M,B,Y){this.key=c,this.value=E,this.color=M??h.RED,this.left=B??qn.EMPTY_NODE,this.right=Y??qn.EMPTY_NODE}copy(c,E,M,B,Y){return new h(c??this.key,E??this.value,M??this.color,B??this.left,Y??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,E,M){let B=this;const Y=M(c,B.key);return B=Y<0?B.copy(null,null,null,B.left.insert(c,E,M),null):0===Y?B.copy(null,E,null,null,null):B.copy(null,null,null,null,B.right.insert(c,E,M)),B.fixUp_()}removeMin_(){if(this.left.isEmpty())return qn.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,E){let M,B;if(M=this,E(c,M.key)<0)!M.left.isEmpty()&&!M.left.isRed_()&&!M.left.left.isRed_()&&(M=M.moveRedLeft_()),M=M.copy(null,null,null,M.left.remove(c,E),null);else{if(M.left.isRed_()&&(M=M.rotateRight_()),!M.right.isEmpty()&&!M.right.isRed_()&&!M.right.left.isRed_()&&(M=M.moveRedRight_()),0===E(c,M.key)){if(M.right.isEmpty())return qn.EMPTY_NODE;B=M.right.min_(),M=M.copy(B.key,B.value,null,null,M.right.removeMin_())}M=M.copy(null,null,null,null,M.right.remove(c,E))}return M.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),E=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,E)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class qn{constructor(u,c=qn.EMPTY_NODE){this.comparator_=u,this.root_=c}insert(u,c){return new qn(this.comparator_,this.root_.insert(u,c,this.comparator_).copy(null,null,bi.BLACK,null,null))}remove(u){return new qn(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,bi.BLACK,null,null))}get(u){let c,E=this.root_;for(;!E.isEmpty();){if(c=this.comparator_(u,E.key),0===c)return E.value;c<0?E=E.left:c>0&&(E=E.right)}return null}getPredecessorKey(u){let c,E=this.root_,M=null;for(;!E.isEmpty();){if(c=this.comparator_(u,E.key),0===c){if(E.left.isEmpty())return M?M.key:null;for(E=E.left;!E.right.isEmpty();)E=E.right;return E.key}c<0?E=E.left:c>0&&(M=E,E=E.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new Ns(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,c){return new Ns(this.root_,u,this.comparator_,!1,c)}getReverseIteratorFrom(u,c){return new Ns(this.root_,u,this.comparator_,!0,c)}getReverseIterator(u){return new Ns(this.root_,null,this.comparator_,!0,u)}}function io(h,u){return Pt(h.name,u.name)}function Ls(h,u){return Pt(h,u)}qn.EMPTY_NODE=new class _s{copy(u,c,E,M,B){return this}insert(u,c,E){return new bi(u,c,null)}remove(u,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Vo=function(h){return"number"==typeof h?"number:"+Fn(h):"string:"+h},wo=function(h){if(h.isLeafNode()){const u=h.val();(0,H.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,H.r3)(u,".sv"),"Priority must be a string or number.")}else(0,H.hu)(h===so||h.isEmpty(),"priority of unexpected type.");(0,H.hu)(h===so||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let To,po,go,Fs=(()=>{class h{constructor(c,E=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=E,this.lazyHash_=null,(0,H.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),wo(this.priorityNode_)}static set __childrenNodeConstructor(c){To=c}static get __childrenNodeConstructor(){return To}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new h(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return kn(c)?this:".priority"===Cn(c)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,E){return null}updateImmediateChild(c,E){return".priority"===c?this.updatePriority(E):E.isEmpty()&&".priority"!==c?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,E).updatePriority(this.priorityNode_)}updateChild(c,E){const M=Cn(c);return null===M?E:E.isEmpty()&&".priority"!==M?this:((0,H.hu)(".priority"!==M||1===vr(c),".priority must be the last token in a path"),this.updateImmediateChild(M,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xn(c),E)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,E){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+Vo(this.priorityNode_.val())+":");const E=typeof this.value_;c+=E+":",c+="number"===E?Fn(this.value_):this.value_,this.lazyHash_=Ve(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===h.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof h.__childrenNodeConstructor?-1:((0,H.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const E=typeof c.value_,M=typeof this.value_,B=h.VALUE_TYPE_ORDER.indexOf(E),Y=h.VALUE_TYPE_ORDER.indexOf(M);return(0,H.hu)(B>=0,"Unknown leaf type: "+E),(0,H.hu)(Y>=0,"Unknown leaf type: "+M),B===Y?"object"===M?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:Y-B}withIndex(){return this}isIndexed(){return!0}equals(c){return c===this||!!c.isLeafNode()&&(this.value_===c.value_&&this.priorityNode_.equals(c.priorityNode_))}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const jr=new class oo extends Ss{compare(u,c){const E=u.node.getPriority(),M=c.node.getPriority(),B=E.compareTo(M);return 0===B?Pt(u.name,c.name):B}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,c){return!u.getPriority().equals(c.getPriority())}minPost(){return yn.MIN}maxPost(){return new yn(nt,new Fs("[PRIORITY-POST]",go))}makePost(u,c){const E=po(u);return new yn(c,new Fs("[PRIORITY-POST]",E))}toString(){return".priority"}},mo=Math.log(2);class Bo{constructor(u){this.count=parseInt(Math.log(u+1)/mo,10),this.current_=this.count-1;const M=(B=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&M}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const qs=function(h,u,c,E){h.sort(u);const M=function(be,xe){const _t=xe-be;let Dt,At;if(0===_t)return null;if(1===_t)return Dt=h[be],At=c?c(Dt):Dt,new bi(At,Dt.node,bi.BLACK,null,null);{const En=parseInt(_t/2,10)+be,zn=M(be,En),Ci=M(En+1,xe);return Dt=h[En],At=c?c(Dt):Dt,new bi(At,Dt.node,bi.BLACK,zn,Ci)}},me=function(be){let xe=null,_t=null,Dt=h.length;const At=function(zn,Ci){const Co=Dt-zn,mu=Dt;Dt-=zn;const Ks=M(Co+1,mu),mc=h[Co],Ld=c?c(mc):mc;En(new bi(Ld,mc.node,Ci,null,Ks))},En=function(zn){xe?(xe.left=zn,xe=zn):(_t=zn,xe=zn)};for(let zn=0;zn<be.count;++zn){const Ci=be.nextBitIsOne(),Co=Math.pow(2,be.count-(zn+1));Ci?At(Co,bi.BLACK):(At(Co,bi.BLACK),At(Co,bi.RED))}return _t}(new Bo(h.length));return new qn(E||u,me)};let ks;const ua={};class os{constructor(u,c){this.indexes_=u,this.indexSet_=c}static get Default(){return(0,H.hu)(ua&&jr,"ChildrenNode.ts has not been loaded"),ks=ks||new os({".priority":ua},{".priority":jr}),ks}get(u){const c=(0,H.DV)(this.indexes_,u);if(!c)throw new Error("No index defined for "+u);return c instanceof qn?c:null}hasIndex(u){return(0,H.r3)(this.indexSet_,u.toString())}addIndex(u,c){(0,H.hu)(u!==sr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const E=[];let M=!1;const B=c.getIterator(yn.Wrap);let me,Y=B.getNext();for(;Y;)M=M||u.isDefinedOn(Y.node),E.push(Y),Y=B.getNext();me=M?qs(E,u.getCompare()):ua;const be=u.toString(),xe=Object.assign({},this.indexSet_);xe[be]=u;const _t=Object.assign({},this.indexes_);return _t[be]=me,new os(_t,xe)}addToIndexes(u,c){const E=(0,H.UI)(this.indexes_,(M,B)=>{const Y=(0,H.DV)(this.indexSet_,B);if((0,H.hu)(Y,"Missing index implementation for "+B),M===ua){if(Y.isDefinedOn(u.node)){const me=[],be=c.getIterator(yn.Wrap);let xe=be.getNext();for(;xe;)xe.name!==u.name&&me.push(xe),xe=be.getNext();return me.push(u),qs(me,Y.getCompare())}return ua}{const me=c.get(u.name);let be=M;return me&&(be=be.remove(new yn(u.name,me))),be.insert(u,u.node)}});return new os(E,this.indexSet_)}removeFromIndexes(u,c){const E=(0,H.UI)(this.indexes_,M=>{if(M===ua)return M;{const B=c.get(u.name);return B?M.remove(new yn(u.name,B)):M}});return new os(E,this.indexSet_)}}let bs,Pn=(()=>{class h{constructor(c,E,M){this.children_=c,this.priorityNode_=E,this.indexMap_=M,this.lazyHash_=null,this.priorityNode_&&wo(this.priorityNode_),this.children_.isEmpty()&&(0,H.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return bs||(bs=new h(new qn(Ls),null,os.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||bs}updatePriority(c){return this.children_.isEmpty()?this:new h(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const E=this.children_.get(c);return null===E?bs:E}}getChild(c){const E=Cn(c);return null===E?this:this.getImmediateChild(E).getChild(Xn(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,E){if((0,H.hu)(E,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(E);{const M=new yn(c,E);let B,Y;E.isEmpty()?(B=this.children_.remove(c),Y=this.indexMap_.removeFromIndexes(M,this.children_)):(B=this.children_.insert(c,E),Y=this.indexMap_.addToIndexes(M,this.children_));const me=B.isEmpty()?bs:this.priorityNode_;return new h(B,me,Y)}}updateChild(c,E){const M=Cn(c);if(null===M)return E;{(0,H.hu)(".priority"!==Cn(c)||1===vr(c),".priority must be the last token in a path");const B=this.getImmediateChild(M).updateChild(Xn(c),E);return this.updateImmediateChild(M,B)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const E={};let M=0,B=0,Y=!0;if(this.forEachChild(jr,(me,be)=>{E[me]=be.val(c),M++,Y&&h.INTEGER_REGEXP_.test(me)?B=Math.max(B,Number(me)):Y=!1}),!c&&Y&&B<2*M){const me=[];for(const be in E)me[be]=E[be];return me}return c&&!this.getPriority().isEmpty()&&(E[".priority"]=this.getPriority().val()),E}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+Vo(this.getPriority().val())+":"),this.forEachChild(jr,(E,M)=>{const B=M.hash();""!==B&&(c+=":"+E+":"+B)}),this.lazyHash_=""===c?"":Ve(c)}return this.lazyHash_}getPredecessorChildName(c,E,M){const B=this.resolveIndex_(M);if(B){const Y=B.getPredecessorKey(new yn(c,E));return Y?Y.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const E=this.resolveIndex_(c);if(E){const M=E.minKey();return M&&M.name}return this.children_.minKey()}getFirstChild(c){const E=this.getFirstChildName(c);return E?new yn(E,this.children_.get(E)):null}getLastChildName(c){const E=this.resolveIndex_(c);if(E){const M=E.maxKey();return M&&M.name}return this.children_.maxKey()}getLastChild(c){const E=this.getLastChildName(c);return E?new yn(E,this.children_.get(E)):null}forEachChild(c,E){const M=this.resolveIndex_(c);return M?M.inorderTraversal(B=>E(B.name,B.node)):this.children_.inorderTraversal(E)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,E){const M=this.resolveIndex_(E);if(M)return M.getIteratorFrom(c,B=>B);{const B=this.children_.getIteratorFrom(c.name,yn.Wrap);let Y=B.peek();for(;null!=Y&&E.compare(Y,c)<0;)B.getNext(),Y=B.peek();return B}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,E){const M=this.resolveIndex_(E);if(M)return M.getReverseIteratorFrom(c,B=>B);{const B=this.children_.getReverseIteratorFrom(c.name,yn.Wrap);let Y=B.peek();for(;null!=Y&&E.compare(Y,c)>0;)B.getNext(),Y=B.peek();return B}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===vs?-1:0}withIndex(c){if(c===sr||this.indexMap_.hasIndex(c))return this;{const E=this.indexMap_.addIndex(c,this.children_);return new h(this.children_,this.priorityNode_,E)}}isIndexed(c){return c===sr||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const E=c;if(this.getPriority().equals(E.getPriority())){if(this.children_.count()===E.children_.count()){const M=this.getIterator(jr),B=E.getIterator(jr);let Y=M.getNext(),me=B.getNext();for(;Y&&me;){if(Y.name!==me.name||!Y.node.equals(me.node))return!1;Y=M.getNext(),me=B.getNext()}return null===Y&&null===me}return!1}return!1}}resolveIndex_(c){return c===sr?null:this.indexMap_.get(c.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const vs=new class So extends Pn{constructor(){super(new qn(Ls),Pn.EMPTY_NODE,os.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return Pn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(yn,{MIN:{value:new yn(ct,Pn.EMPTY_NODE)},MAX:{value:new yn(nt,vs)}}),ds.__EMPTY_NODE=Pn.EMPTY_NODE,Fs.__childrenNodeConstructor=Pn,function Al(h){so=h}(vs),function Bi(h){go=h}(vs);const wa=!0;function Hr(h,u=null){if(null===h)return Pn.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(u=h[".priority"]),(0,H.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new Fs(h,Hr(u));if(h instanceof Array||!wa){let c=Pn.EMPTY_NODE;return Yt(h,(E,M)=>{if((0,H.r3)(h,E)&&"."!==E.substring(0,1)){const B=Hr(M);(B.isLeafNode()||!B.isEmpty())&&(c=c.updateImmediateChild(E,B))}}),c.updatePriority(Hr(u))}{const c=[];let E=!1;if(Yt(h,(Y,me)=>{if("."!==Y.substring(0,1)){const be=Hr(me);be.isEmpty()||(E=E||!be.getPriority().isEmpty(),c.push(new yn(Y,be)))}}),0===c.length)return Pn.EMPTY_NODE;const B=qs(c,io,Y=>Y.name,Ls);if(E){const Y=qs(c,jr.getCompare());return new Pn(B,Hr(u),new os({".priority":Y},{".priority":jr}))}return new Pn(B,Hr(u),os.Default)}}!function ss(h){po=h}(Hr);class xi extends Ss{constructor(u){super(),this.indexPath_=u,(0,H.hu)(!kn(u)&&".priority"!==Cn(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,c){const E=this.extractChild(u.node),M=this.extractChild(c.node),B=E.compareTo(M);return 0===B?Pt(u.name,c.name):B}makePost(u,c){const E=Hr(u),M=Pn.EMPTY_NODE.updateChild(this.indexPath_,E);return new yn(c,M)}maxPost(){const u=Pn.EMPTY_NODE.updateChild(this.indexPath_,vs);return new yn(nt,u)}toString(){return si(this.indexPath_,0).join("/")}}const Ei=new class ca extends Ss{compare(u,c){const E=u.node.compareTo(c.node);return 0===E?Pt(u.name,c.name):E}isDefinedOn(u){return!0}indexedValueChanged(u,c){return!u.equals(c)}minPost(){return yn.MIN}maxPost(){return yn.MAX}makePost(u,c){const E=Hr(u);return new yn(c,E)}toString(){return".value"}};function yo(h){return{type:"value",snapshotNode:h}}function hs(h,u){return{type:"child_added",snapshotNode:u,childName:h}}function Lr(h,u){return{type:"child_removed",snapshotNode:u,childName:h}}function qi(h,u,c){return{type:"child_changed",snapshotNode:u,childName:h,oldSnap:c}}class Di{constructor(u){this.index_=u}updateChild(u,c,E,M,B,Y){(0,H.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const me=u.getImmediateChild(c);return me.getChild(M).equals(E.getChild(M))&&me.isEmpty()===E.isEmpty()||(null!=Y&&(E.isEmpty()?u.hasChild(c)?Y.trackChildChange(Lr(c,me)):(0,H.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):me.isEmpty()?Y.trackChildChange(hs(c,E)):Y.trackChildChange(qi(c,E,me))),u.isLeafNode()&&E.isEmpty())?u:u.updateImmediateChild(c,E).withIndex(this.index_)}updateFullNode(u,c,E){return null!=E&&(u.isLeafNode()||u.forEachChild(jr,(M,B)=>{c.hasChild(M)||E.trackChildChange(Lr(M,B))}),c.isLeafNode()||c.forEachChild(jr,(M,B)=>{if(u.hasChild(M)){const Y=u.getImmediateChild(M);Y.equals(B)||E.trackChildChange(qi(M,B,Y))}else E.trackChildChange(hs(M,B))})),c.withIndex(this.index_)}updatePriority(u,c){return u.isEmpty()?Pn.EMPTY_NODE:u.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class as{constructor(u){this.indexedFilter_=new Di(u.getIndex()),this.index_=u.getIndex(),this.startPost_=as.getStartPost_(u),this.endPost_=as.getEndPost_(u),this.startIsInclusive_=!u.startAfterSet_,this.endIsInclusive_=!u.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){const c=this.startIsInclusive_?this.index_.compare(this.getStartPost(),u)<=0:this.index_.compare(this.getStartPost(),u)<0,E=this.endIsInclusive_?this.index_.compare(u,this.getEndPost())<=0:this.index_.compare(u,this.getEndPost())<0;return c&&E}updateChild(u,c,E,M,B,Y){return this.matches(new yn(c,E))||(E=Pn.EMPTY_NODE),this.indexedFilter_.updateChild(u,c,E,M,B,Y)}updateFullNode(u,c,E){c.isLeafNode()&&(c=Pn.EMPTY_NODE);let M=c.withIndex(this.index_);M=M.updatePriority(Pn.EMPTY_NODE);const B=this;return c.forEachChild(jr,(Y,me)=>{B.matches(new yn(Y,me))||(M=M.updateImmediateChild(Y,Pn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,M,E)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const c=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),c)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const c=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),c)}return u.getIndex().maxPost()}}class jo{constructor(u){this.withinDirectionalStart=c=>this.reverse_?this.withinEndPost(c):this.withinStartPost(c),this.withinDirectionalEnd=c=>this.reverse_?this.withinStartPost(c):this.withinEndPost(c),this.withinStartPost=c=>{const E=this.index_.compare(this.rangedFilter_.getStartPost(),c);return this.startIsInclusive_?E<=0:E<0},this.withinEndPost=c=>{const E=this.index_.compare(c,this.rangedFilter_.getEndPost());return this.endIsInclusive_?E<=0:E<0},this.rangedFilter_=new as(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft(),this.startIsInclusive_=!u.startAfterSet_,this.endIsInclusive_=!u.endBeforeSet_}updateChild(u,c,E,M,B,Y){return this.rangedFilter_.matches(new yn(c,E))||(E=Pn.EMPTY_NODE),u.getImmediateChild(c).equals(E)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,c,E,M,B,Y):this.fullLimitUpdateChild_(u,c,E,B,Y)}updateFullNode(u,c,E){let M;if(c.isLeafNode()||c.isEmpty())M=Pn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let B;M=Pn.EMPTY_NODE.withIndex(this.index_),B=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let Y=0;for(;B.hasNext()&&Y<this.limit_;){const me=B.getNext();if(this.withinDirectionalStart(me)){if(!this.withinDirectionalEnd(me))break;M=M.updateImmediateChild(me.name,me.node),Y++}}}else{let B;M=c.withIndex(this.index_),M=M.updatePriority(Pn.EMPTY_NODE),B=this.reverse_?M.getReverseIterator(this.index_):M.getIterator(this.index_);let Y=0;for(;B.hasNext();){const me=B.getNext();Y<this.limit_&&this.withinDirectionalStart(me)&&this.withinDirectionalEnd(me)?Y++:M=M.updateImmediateChild(me.name,Pn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,M,E)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,c,E,M,B){let Y;if(this.reverse_){const Dt=this.index_.getCompare();Y=(At,En)=>Dt(En,At)}else Y=this.index_.getCompare();const me=u;(0,H.hu)(me.numChildren()===this.limit_,"");const be=new yn(c,E),xe=this.reverse_?me.getFirstChild(this.index_):me.getLastChild(this.index_),_t=this.rangedFilter_.matches(be);if(me.hasChild(c)){const Dt=me.getImmediateChild(c);let At=M.getChildAfterChild(this.index_,xe,this.reverse_);for(;null!=At&&(At.name===c||me.hasChild(At.name));)At=M.getChildAfterChild(this.index_,At,this.reverse_);const En=null==At?1:Y(At,be);if(_t&&!E.isEmpty()&&En>=0)return B?.trackChildChange(qi(c,E,Dt)),me.updateImmediateChild(c,E);{B?.trackChildChange(Lr(c,Dt));const Ci=me.updateImmediateChild(c,Pn.EMPTY_NODE);return null!=At&&this.rangedFilter_.matches(At)?(B?.trackChildChange(hs(At.name,At.node)),Ci.updateImmediateChild(At.name,At.node)):Ci}}return E.isEmpty()?u:_t&&Y(xe,be)>=0?(null!=B&&(B.trackChildChange(Lr(xe.name,xe.node)),B.trackChildChange(hs(c,E))),me.updateImmediateChild(c,E).updateImmediateChild(xe.name,Pn.EMPTY_NODE)):u}}class Sr{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=jr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ct}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:nt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,H.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===jr}copy(){const u=new Sr;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.startAfterSet_=this.startAfterSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.endBeforeSet_=this.endBeforeSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function $o(h){const u={};if(h.isDefault())return u;let c;if(h.index_===jr?c="$priority":h.index_===Ei?c="$value":h.index_===sr?c="$key":((0,H.hu)(h.index_ instanceof xi,"Unrecognized index type!"),c=h.index_.toString()),u.orderBy=(0,H.Wl)(c),h.startSet_){const E=h.startAfterSet_?"startAfter":"startAt";u[E]=(0,H.Wl)(h.indexStartValue_),h.startNameSet_&&(u[E]+=","+(0,H.Wl)(h.indexStartName_))}if(h.endSet_){const E=h.endBeforeSet_?"endBefore":"endAt";u[E]=(0,H.Wl)(h.indexEndValue_),h.endNameSet_&&(u[E]+=","+(0,H.Wl)(h.indexEndName_))}return h.limitSet_&&(h.isViewFromLeft()?u.limitToFirst=h.limit_:u.limitToLast=h.limit_),u}function G(h){const u={};if(h.startSet_&&(u.sp=h.indexStartValue_,h.startNameSet_&&(u.sn=h.indexStartName_),u.sin=!h.startAfterSet_),h.endSet_&&(u.ep=h.indexEndValue_,h.endNameSet_&&(u.en=h.indexEndName_),u.ein=!h.endBeforeSet_),h.limitSet_){u.l=h.limit_;let c=h.viewFrom_;""===c&&(c=h.isViewFromLeft()?"l":"r"),u.vf=c}return h.index_!==jr&&(u.i=h.index_.toString()),u}class $ extends Ts{constructor(u,c,E,M){super(),this.repoInfo_=u,this.onDataUpdate_=c,this.authTokenProvider_=E,this.appCheckTokenProvider_=M,this.log_=Et("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,c){return void 0!==c?"tag$"+c:((0,H.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,c,E,M){const B=u._path.toString();this.log_("Listen called for "+B+" "+u._queryIdentifier);const Y=$.getListenId_(u,E),me={};this.listens_[Y]=me;const be=$o(u._queryParams);this.restRequest_(B+".json",be,(xe,_t)=>{let Dt=_t;if(404===xe&&(Dt=null,xe=null),null===xe&&this.onDataUpdate_(B,Dt,!1,E),(0,H.DV)(this.listens_,Y)===me){let At;At=xe?401===xe?"permission_denied":"rest_error:"+xe:"ok",M(At,null)}})}unlisten(u,c){const E=$.getListenId_(u,c);delete this.listens_[E]}get(u){const c=$o(u._queryParams),E=u._path.toString(),M=new H.BH;return this.restRequest_(E+".json",c,(B,Y)=>{let me=Y;404===B&&(me=null,B=null),null===B?(this.onDataUpdate_(E,me,!1,null),M.resolve(me)):M.reject(new Error(me))}),M.promise}refreshAuthToken(u){}restRequest_(u,c={},E){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([M,B])=>{M&&M.accessToken&&(c.auth=M.accessToken),B&&B.token&&(c.ac=B.token);const Y=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,H.xO)(c);this.log_("Sending REST request for "+Y);const me=new XMLHttpRequest;me.onreadystatechange=()=>{if(E&&4===me.readyState){this.log_("REST Response for "+Y+" received. status:",me.status,"response:",me.responseText);let be=null;if(me.status>=200&&me.status<300){try{be=(0,H.cI)(me.responseText)}catch{Nt("Failed to parse JSON response for "+Y+": "+me.responseText)}E(null,be)}else 401!==me.status&&404!==me.status&&Nt("Got unsuccessful REST response for "+Y+" Status: "+me.status),E(me.status);E=null}},me.open("GET",Y,!0),me.send()})}}class U{constructor(){this.rootNode_=Pn.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,c){this.rootNode_=this.rootNode_.updateChild(u,c)}}function ue(){return{value:null,children:new Map}}function ot(h,u,c){if(kn(u))h.value=c,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(u,c);else{const E=Cn(u);h.children.has(E)||h.children.set(E,ue()),ot(h.children.get(E),u=Xn(u),c)}}function Qt(h,u){if(kn(u))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const c=h.value;return h.value=null,c.forEachChild(jr,(E,M)=>{ot(h,new fn(E),M)}),Qt(h,u)}}if(h.children.size>0){const c=Cn(u);return u=Xn(u),h.children.has(c)&&Qt(h.children.get(c),u)&&h.children.delete(c),0===h.children.size}return!0}function Zr(h,u,c){null!==h.value?c(u,h.value):function mt(h,u){h.children.forEach((c,E)=>{u(E,c)})}(h,(E,M)=>{Zr(M,new fn(u.toString()+"/"+E),c)})}class rr{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),c=Object.assign({},u);return this.last_&&Yt(this.last_,(E,M)=>{c[E]=c[E]-M}),this.last_=u,c}}class ka{constructor(u,c){this.server_=c,this.statsToReport_={},this.statsListener_=new rr(u);const E=1e4+2e4*Math.random();yt(this.reportStats_.bind(this),Math.floor(E))}reportStats_(){const u=this.statsListener_.get(),c={};let E=!1;Yt(u,(M,B)=>{B>0&&(0,H.r3)(this.statsToReport_,M)&&(c[M]=B,E=!0)}),E&&this.server_.reportStats(c),yt(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Xi=(()=>{return(h=Xi||(Xi={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Xi;var h})();function zo(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class Ko{constructor(u,c,E){this.path=u,this.affectedTree=c,this.revert=E,this.type=Xi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(kn(this.path)){if(null!=this.affectedTree.value)return(0,H.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new fn(u));return new Ko(Sn(),c,this.revert)}}return(0,H.hu)(Cn(this.path)===u,"operationForChild called for unrelated child."),new Ko(Xn(this.path),this.affectedTree,this.revert)}}class _o{constructor(u,c){this.source=u,this.path=c,this.type=Xi.LISTEN_COMPLETE}operationForChild(u){return kn(this.path)?new _o(this.source,Sn()):new _o(this.source,Xn(this.path))}}class hi{constructor(u,c,E){this.source=u,this.path=c,this.snap=E,this.type=Xi.OVERWRITE}operationForChild(u){return kn(this.path)?new hi(this.source,Sn(),this.snap.getImmediateChild(u)):new hi(this.source,Xn(this.path),this.snap)}}class oi{constructor(u,c,E){this.source=u,this.path=c,this.children=E,this.type=Xi.MERGE}operationForChild(u){if(kn(this.path)){const c=this.children.subtree(new fn(u));return c.isEmpty()?null:c.value?new hi(this.source,Sn(),c.value):new oi(this.source,Sn(),c)}return(0,H.hu)(Cn(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new oi(this.source,Xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ai{constructor(u,c,E){this.node_=u,this.fullyInitialized_=c,this.filtered_=E}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(kn(u))return this.isFullyInitialized()&&!this.filtered_;const c=Cn(u);return this.isCompleteForChild(c)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class Sa{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function Ds(h,u,c,E,M,B){const Y=E.filter(me=>me.type===c);Y.sort((me,be)=>function lo(h,u,c){if(null==u.childName||null==c.childName)throw(0,H.g5)("Should only compare child_ events.");const E=new yn(u.childName,u.snapshotNode),M=new yn(c.childName,c.snapshotNode);return h.index_.compare(E,M)}(h,me,be)),Y.forEach(me=>{const be=function qa(h,u,c){return"value"===u.type||"child_removed"===u.type||(u.prevName=c.getPredecessorChildName(u.childName,u.snapshotNode,h.index_)),u}(h,me,B);M.forEach(xe=>{xe.respondsTo(me.type)&&u.push(xe.createEvent(be,h.query_))})})}function ji(h,u){return{eventCache:h,serverCache:u}}function Yo(h,u,c,E){return ji(new ai(u,c,E),h.serverCache)}function Us(h,u,c,E){return ji(h.eventCache,new ai(u,c,E))}function ls(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function Ao(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let Za;class li{constructor(u,c=(()=>(Za||(Za=new qn(Tt)),Za))()){this.value=u,this.children=c}static fromObject(u){let c=new li(null);return Yt(u,(E,M)=>{c=c.set(new fn(E),M)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,c){if(null!=this.value&&c(this.value))return{path:Sn(),value:this.value};if(kn(u))return null;{const E=Cn(u),M=this.children.get(E);if(null!==M){const B=M.findRootMostMatchingPathAndValue(Xn(u),c);return null!=B?{path:ar(new fn(E),B.path),value:B.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(kn(u))return this;{const c=Cn(u),E=this.children.get(c);return null!==E?E.subtree(Xn(u)):new li(null)}}set(u,c){if(kn(u))return new li(c,this.children);{const E=Cn(u),B=(this.children.get(E)||new li(null)).set(Xn(u),c),Y=this.children.insert(E,B);return new li(this.value,Y)}}remove(u){if(kn(u))return this.children.isEmpty()?new li(null):new li(null,this.children);{const c=Cn(u),E=this.children.get(c);if(E){const M=E.remove(Xn(u));let B;return B=M.isEmpty()?this.children.remove(c):this.children.insert(c,M),null===this.value&&B.isEmpty()?new li(null):new li(this.value,B)}return this}}get(u){if(kn(u))return this.value;{const c=Cn(u),E=this.children.get(c);return E?E.get(Xn(u)):null}}setTree(u,c){if(kn(u))return c;{const E=Cn(u),B=(this.children.get(E)||new li(null)).setTree(Xn(u),c);let Y;return Y=B.isEmpty()?this.children.remove(E):this.children.insert(E,B),new li(this.value,Y)}}fold(u){return this.fold_(Sn(),u)}fold_(u,c){const E={};return this.children.inorderTraversal((M,B)=>{E[M]=B.fold_(ar(u,M),c)}),c(u,this.value,E)}findOnPath(u,c){return this.findOnPath_(u,Sn(),c)}findOnPath_(u,c,E){const M=!!this.value&&E(c,this.value);if(M)return M;if(kn(u))return null;{const B=Cn(u),Y=this.children.get(B);return Y?Y.findOnPath_(Xn(u),ar(c,B),E):null}}foreachOnPath(u,c){return this.foreachOnPath_(u,Sn(),c)}foreachOnPath_(u,c,E){if(kn(u))return this;{this.value&&E(c,this.value);const M=Cn(u),B=this.children.get(M);return B?B.foreachOnPath_(Xn(u),ar(c,M),E):new li(null)}}foreach(u){this.foreach_(Sn(),u)}foreach_(u,c){this.children.inorderTraversal((E,M)=>{M.foreach_(ar(u,E),c)}),this.value&&c(u,this.value)}foreachChild(u){this.children.inorderTraversal((c,E)=>{E.value&&u(c,E.value)})}}class Zs{constructor(u){this.writeTree_=u}static empty(){return new Zs(new li(null))}}function ba(h,u,c){if(kn(u))return new Zs(new li(c));{const E=h.writeTree_.findRootMostValueAndPath(u);if(null!=E){const M=E.path;let B=E.value;const Y=Br(M,u);return B=B.updateChild(Y,c),new Zs(h.writeTree_.set(M,B))}{const M=new li(c),B=h.writeTree_.setTree(u,M);return new Zs(B)}}}function fa(h,u,c){let E=h;return Yt(c,(M,B)=>{E=ba(E,ar(u,M),B)}),E}function Aa(h,u){if(kn(u))return Zs.empty();{const c=h.writeTree_.setTree(u,new li(null));return new Zs(c)}}function cl(h,u){return null!=Mo(h,u)}function Mo(h,u){const c=h.writeTree_.findRootMostValueAndPath(u);return null!=c?h.writeTree_.get(c.path).getChild(Br(c.path,u)):null}function Ji(h){const u=[],c=h.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(jr,(E,M)=>{u.push(new yn(E,M))}):h.writeTree_.children.inorderTraversal((E,M)=>{null!=M.value&&u.push(new yn(E,M.value))}),u}function Xs(h,u){if(kn(u))return h;{const c=Mo(h,u);return new Zs(null!=c?new li(c):h.writeTree_.subtree(u))}}function Ii(h){return h.writeTree_.isEmpty()}function ps(h,u){return Yr(Sn(),h.writeTree_,u)}function Yr(h,u,c){if(null!=u.value)return c.updateChild(h,u.value);{let E=null;return u.children.inorderTraversal((M,B)=>{".priority"===M?((0,H.hu)(null!==B.value,"Priority writes must always be leaf nodes"),E=B.value):c=Yr(ar(h,M),B,c)}),!c.getChild(h).isEmpty()&&null!==E&&(c=c.updateChild(ar(h,".priority"),E)),c}}function Ut(h,u){return ti(u,h)}function In(h,u){if(h.snap)return it(h.path,u);for(const c in h.children)if(h.children.hasOwnProperty(c)&&it(ar(h.path,c),u))return!0;return!1}function nn(h){return h.visible}function dt(h,u,c){let E=Zs.empty();for(let M=0;M<h.length;++M){const B=h[M];if(u(B)){const Y=B.path;let me;if(B.snap)it(c,Y)?(me=Br(c,Y),E=ba(E,me,B.snap)):it(Y,c)&&(me=Br(Y,c),E=ba(E,Sn(),B.snap.getChild(me)));else{if(!B.children)throw(0,H.g5)("WriteRecord should have .snap or .children");if(it(c,Y))me=Br(c,Y),E=fa(E,me,B.children);else if(it(Y,c))if(me=Br(Y,c),kn(me))E=fa(E,Sn(),B.children);else{const be=(0,H.DV)(B.children,Cn(me));if(be){const xe=be.getChild(Xn(me));E=ba(E,Sn(),xe)}}}}}return E}function P(h,u,c,E,M){if(E||M){const B=Xs(h.visibleWrites,u);return!M&&Ii(B)?c:M||null!=c||cl(B,Sn())?ps(dt(h.allWrites,function(xe){return(xe.visible||M)&&(!E||!~E.indexOf(xe.writeId))&&(it(xe.path,u)||it(u,xe.path))},u),c||Pn.EMPTY_NODE):null}{const B=Mo(h.visibleWrites,u);if(null!=B)return B;{const Y=Xs(h.visibleWrites,u);return Ii(Y)?c:null!=c||cl(Y,Sn())?ps(Y,c||Pn.EMPTY_NODE):null}}}function dn(h,u,c,E){return P(h.writeTree,h.treePath,u,c,E)}function Dr(h,u){return function Q(h,u,c){let E=Pn.EMPTY_NODE;const M=Mo(h.visibleWrites,u);if(M)return M.isLeafNode()||M.forEachChild(jr,(B,Y)=>{E=E.updateImmediateChild(B,Y)}),E;if(c){const B=Xs(h.visibleWrites,u);return c.forEachChild(jr,(Y,me)=>{const be=ps(Xs(B,new fn(Y)),me);E=E.updateImmediateChild(Y,be)}),Ji(B).forEach(Y=>{E=E.updateImmediateChild(Y.name,Y.node)}),E}return Ji(Xs(h.visibleWrites,u)).forEach(Y=>{E=E.updateImmediateChild(Y.name,Y.node)}),E}(h.writeTree,h.treePath,u)}function Xr(h,u,c,E){return function V(h,u,c,E,M){(0,H.hu)(E||M,"Either existingEventSnap or existingServerSnap must exist");const B=ar(u,c);if(cl(h.visibleWrites,B))return null;{const Y=Xs(h.visibleWrites,B);return Ii(Y)?M.getChild(c):ps(Y,M.getChild(c))}}(h.writeTree,h.treePath,u,c,E)}function lr(h,u){return function Ce(h,u){return Mo(h.visibleWrites,u)}(h.writeTree,ar(h.treePath,u))}function or(h,u,c){return function ae(h,u,c,E){const M=ar(u,c),B=Mo(h.visibleWrites,M);return null!=B?B:E.isCompleteForChild(c)?ps(Xs(h.visibleWrites,M),E.getNode().getImmediateChild(c)):null}(h.writeTree,h.treePath,u,c)}function Xt(h,u){return ti(ar(h.treePath,u),h.writeTree)}function ti(h,u){return{treePath:h,writeTree:u}}class Is{constructor(){this.changeMap=new Map}trackChildChange(u){const c=u.type,E=u.childName;(0,H.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,H.hu)(".priority"!==E,"Only non-priority child changes can be tracked.");const M=this.changeMap.get(E);if(M){const B=M.type;if("child_added"===c&&"child_removed"===B)this.changeMap.set(E,qi(E,u.snapshotNode,M.snapshotNode));else if("child_removed"===c&&"child_added"===B)this.changeMap.delete(E);else if("child_removed"===c&&"child_changed"===B)this.changeMap.set(E,Lr(E,M.oldSnap));else if("child_changed"===c&&"child_added"===B)this.changeMap.set(E,hs(E,u.snapshotNode));else{if("child_changed"!==c||"child_changed"!==B)throw(0,H.g5)("Illegal combination of changes: "+u+" occurred after "+M);this.changeMap.set(E,qi(E,u.snapshotNode,M.oldSnap))}}else this.changeMap.set(E,u)}getChanges(){return Array.from(this.changeMap.values())}}const gn=new class Er{getCompleteChild(u){return null}getChildAfterChild(u,c,E){return null}};class es{constructor(u,c,E=null){this.writes_=u,this.viewCache_=c,this.optCompleteServerCache_=E}getCompleteChild(u){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(u))return c.getNode().getImmediateChild(u);{const E=null!=this.optCompleteServerCache_?new ai(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return or(this.writes_,u,E)}}getChildAfterChild(u,c,E){const M=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ao(this.viewCache_),B=function Bn(h,u,c,E,M,B){return function ft(h,u,c,E,M,B,Y){let me;const be=Xs(h.visibleWrites,u),xe=Mo(be,Sn());if(null!=xe)me=xe;else{if(null==c)return[];me=ps(be,c)}if(me=me.withIndex(Y),me.isEmpty()||me.isLeafNode())return[];{const _t=[],Dt=Y.getCompare(),At=B?me.getReverseIteratorFrom(E,Y):me.getIteratorFrom(E,Y);let En=At.getNext();for(;En&&_t.length<M;)0!==Dt(En,E)&&_t.push(En),En=At.getNext();return _t}}(h.writeTree,h.treePath,u,c,E,M,B)}(this.writes_,M,c,1,E,u);return 0===B.length?null:B[0]}}function uo(h,u,c,E,M,B){const Y=u.eventCache;if(null!=lr(E,c))return u;{let me,be;if(kn(c))if((0,H.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const xe=Ao(u),Dt=Dr(E,xe instanceof Pn?xe:Pn.EMPTY_NODE);me=h.filter.updateFullNode(u.eventCache.getNode(),Dt,B)}else{const xe=dn(E,Ao(u));me=h.filter.updateFullNode(u.eventCache.getNode(),xe,B)}else{const xe=Cn(c);if(".priority"===xe){(0,H.hu)(1===vr(c),"Can't have a priority with additional path components");const _t=Y.getNode();be=u.serverCache.getNode();const Dt=Xr(E,c,_t,be);me=null!=Dt?h.filter.updatePriority(_t,Dt):Y.getNode()}else{const _t=Xn(c);let Dt;if(Y.isCompleteForChild(xe)){be=u.serverCache.getNode();const At=Xr(E,c,Y.getNode(),be);Dt=null!=At?Y.getNode().getImmediateChild(xe).updateChild(_t,At):Y.getNode().getImmediateChild(xe)}else Dt=or(E,xe,u.serverCache);me=null!=Dt?h.filter.updateChild(Y.getNode(),xe,Dt,_t,M,B):Y.getNode()}}return Yo(u,me,Y.isFullyInitialized()||kn(c),h.filter.filtersNodes())}}function pa(h,u,c,E,M,B,Y,me){const be=u.serverCache;let xe;const _t=Y?h.filter:h.filter.getIndexedFilter();if(kn(c))xe=_t.updateFullNode(be.getNode(),E,null);else if(_t.filtersNodes()&&!be.isFiltered()){const En=be.getNode().updateChild(c,E);xe=_t.updateFullNode(be.getNode(),En,null)}else{const En=Cn(c);if(!be.isCompleteForPath(c)&&vr(c)>1)return u;const zn=Xn(c),Co=be.getNode().getImmediateChild(En).updateChild(zn,E);xe=".priority"===En?_t.updatePriority(be.getNode(),Co):_t.updateChild(be.getNode(),En,Co,zn,gn,null)}const Dt=Us(u,xe,be.isFullyInitialized()||kn(c),_t.filtersNodes());return uo(h,Dt,c,M,new es(M,Dt,B),me)}function Qo(h,u,c,E,M,B,Y){const me=u.eventCache;let be,xe;const _t=new es(M,u,B);if(kn(c))xe=h.filter.updateFullNode(u.eventCache.getNode(),E,Y),be=Yo(u,xe,!0,h.filter.filtersNodes());else{const Dt=Cn(c);if(".priority"===Dt)xe=h.filter.updatePriority(u.eventCache.getNode(),E),be=Yo(u,xe,me.isFullyInitialized(),me.isFiltered());else{const At=Xn(c),En=me.getNode().getImmediateChild(Dt);let zn;if(kn(At))zn=E;else{const Ci=_t.getCompleteChild(Dt);zn=null!=Ci?".priority"===Mr(At)&&Ci.getChild(An(At)).isEmpty()?Ci:Ci.updateChild(At,E):Pn.EMPTY_NODE}be=En.equals(zn)?u:Yo(u,h.filter.updateChild(me.getNode(),Dt,zn,At,_t,Y),me.isFullyInitialized(),h.filter.filtersNodes())}}return be}function hl(h,u){return h.eventCache.isCompleteForChild(u)}function co(h,u,c){return c.foreach((E,M)=>{u=u.updateChild(E,M)}),u}function Ro(h,u,c,E,M,B,Y,me){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let xe,be=u;xe=kn(c)?E:new li(null).setTree(c,E);const _t=u.serverCache.getNode();return xe.children.inorderTraversal((Dt,At)=>{if(_t.hasChild(Dt)){const zn=co(0,u.serverCache.getNode().getImmediateChild(Dt),At);be=pa(h,be,new fn(Dt),zn,M,B,Y,me)}}),xe.children.inorderTraversal((Dt,At)=>{const En=!u.serverCache.isCompleteForChild(Dt)&&null===At.value;if(!_t.hasChild(Dt)&&!En){const Ci=co(0,u.serverCache.getNode().getImmediateChild(Dt),At);be=pa(h,be,new fn(Dt),Ci,M,B,Y,me)}}),be}class Ol{constructor(u,c){this.query_=u,this.eventRegistrations_=[];const E=this.query_._queryParams,M=new Di(E.getIndex()),B=function Zi(h){return h.loadsAllData()?new Di(h.getIndex()):h.hasLimit()?new jo(h):new as(h)}(E);this.processor_=function Wn(h){return{filter:h}}(B);const Y=c.serverCache,me=c.eventCache,be=M.updateFullNode(Pn.EMPTY_NODE,Y.getNode(),null),xe=B.updateFullNode(Pn.EMPTY_NODE,me.getNode(),null),_t=new ai(be,Y.isFullyInitialized(),M.filtersNodes()),Dt=new ai(xe,me.isFullyInitialized(),B.filtersNodes());this.viewCache_=ji(Dt,_t),this.eventGenerator_=new Sa(this.query_)}get query(){return this.query_}}function xo(h,u){const c=Ao(h.viewCache_);return c&&(h.query._queryParams.loadsAllData()||!kn(u)&&!c.getImmediateChild(Cn(u)).isEmpty())?c.getChild(u):null}function Xa(h){return 0===h.eventRegistrations_.length}function ga(h,u,c){const E=[];if(c){(0,H.hu)(null==u,"A cancel should cancel all event registrations.");const M=h.query._path;h.eventRegistrations_.forEach(B=>{const Y=B.createCancelEvent(c,M);Y&&E.push(Y)})}if(u){let M=[];for(let B=0;B<h.eventRegistrations_.length;++B){const Y=h.eventRegistrations_[B];if(Y.matches(u)){if(u.hasAnyCallback()){M=M.concat(h.eventRegistrations_.slice(B+1));break}}else M.push(Y)}h.eventRegistrations_=M}else h.eventRegistrations_=[];return E}function Cs(h,u,c,E){u.type===Xi.MERGE&&null!==u.source.queryId&&((0,H.hu)(Ao(h.viewCache_),"We should always have a full cache before handling merges"),(0,H.hu)(ls(h.viewCache_),"Missing event cache, even though we have a server cache"));const M=h.viewCache_,B=function Or(h,u,c,E,M){const B=new Is;let Y,me;if(c.type===Xi.OVERWRITE){const xe=c;xe.source.fromUser?Y=Qo(h,u,xe.path,xe.snap,E,M,B):((0,H.hu)(xe.source.fromServer,"Unknown source."),me=xe.source.tagged||u.serverCache.isFiltered()&&!kn(xe.path),Y=pa(h,u,xe.path,xe.snap,E,M,me,B))}else if(c.type===Xi.MERGE){const xe=c;xe.source.fromUser?Y=function Hi(h,u,c,E,M,B,Y){let me=u;return E.foreach((be,xe)=>{const _t=ar(c,be);hl(u,Cn(_t))&&(me=Qo(h,me,_t,xe,M,B,Y))}),E.foreach((be,xe)=>{const _t=ar(c,be);hl(u,Cn(_t))||(me=Qo(h,me,_t,xe,M,B,Y))}),me}(h,u,xe.path,xe.children,E,M,B):((0,H.hu)(xe.source.fromServer,"Unknown source."),me=xe.source.tagged||u.serverCache.isFiltered(),Y=Ro(h,u,xe.path,xe.children,E,M,me,B))}else if(c.type===Xi.ACK_USER_WRITE){const xe=c;Y=xe.revert?function Vs(h,u,c,E,M,B){let Y;if(null!=lr(E,c))return u;{const me=new es(E,u,M),be=u.eventCache.getNode();let xe;if(kn(c)||".priority"===Cn(c)){let _t;if(u.serverCache.isFullyInitialized())_t=dn(E,Ao(u));else{const Dt=u.serverCache.getNode();(0,H.hu)(Dt instanceof Pn,"serverChildren would be complete if leaf node"),_t=Dr(E,Dt)}xe=h.filter.updateFullNode(be,_t,B)}else{const _t=Cn(c);let Dt=or(E,_t,u.serverCache);null==Dt&&u.serverCache.isCompleteForChild(_t)&&(Dt=be.getImmediateChild(_t)),xe=null!=Dt?h.filter.updateChild(be,_t,Dt,Xn(c),me,B):u.eventCache.getNode().hasChild(_t)?h.filter.updateChild(be,_t,Pn.EMPTY_NODE,Xn(c),me,B):be,xe.isEmpty()&&u.serverCache.isFullyInitialized()&&(Y=dn(E,Ao(u)),Y.isLeafNode()&&(xe=h.filter.updateFullNode(xe,Y,B)))}return Y=u.serverCache.isFullyInitialized()||null!=lr(E,Sn()),Yo(u,xe,Y,h.filter.filtersNodes())}}(h,u,xe.path,E,M,B):function Ua(h,u,c,E,M,B,Y){if(null!=lr(M,c))return u;const me=u.serverCache.isFiltered(),be=u.serverCache;if(null!=E.value){if(kn(c)&&be.isFullyInitialized()||be.isCompleteForPath(c))return pa(h,u,c,be.getNode().getChild(c),M,B,me,Y);if(kn(c)){let xe=new li(null);return be.getNode().forEachChild(sr,(_t,Dt)=>{xe=xe.set(new fn(_t),Dt)}),Ro(h,u,c,xe,M,B,me,Y)}return u}{let xe=new li(null);return E.foreach((_t,Dt)=>{const At=ar(c,_t);be.isCompleteForPath(At)&&(xe=xe.set(_t,be.getNode().getChild(At)))}),Ro(h,u,c,xe,M,B,me,Y)}}(h,u,xe.path,xe.affectedTree,E,M,B)}else{if(c.type!==Xi.LISTEN_COMPLETE)throw(0,H.g5)("Unknown operation type: "+c.type);Y=function fl(h,u,c,E,M){const B=u.serverCache;return uo(h,Us(u,B.getNode(),B.isFullyInitialized()||kn(c),B.isFiltered()),c,E,gn,M)}(h,u,c.path,E,B)}const be=B.getChanges();return function qt(h,u,c){const E=u.eventCache;if(E.isFullyInitialized()){const M=E.getNode().isLeafNode()||E.getNode().isEmpty(),B=ls(h);(c.length>0||!h.eventCache.isFullyInitialized()||M&&!E.getNode().equals(B)||!E.getNode().getPriority().equals(B.getPriority()))&&c.push(yo(ls(u)))}}(u,Y,be),{viewCache:Y,changes:be}}(h.processor_,M,u,c,E);return function Oo(h,u){(0,H.hu)(u.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,H.hu)(u.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,B.viewCache),(0,H.hu)(B.viewCache.serverCache.isFullyInitialized()||!M.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=B.viewCache,Js(h,B.changes,B.viewCache.eventCache.getNode(),null)}function Js(h,u,c,E){return function bo(h,u,c,E){const M=[],B=[];return u.forEach(Y=>{"child_changed"===Y.type&&h.index_.indexedValueChanged(Y.oldSnap,Y.snapshotNode)&&B.push(function da(h,u){return{type:"child_moved",snapshotNode:u,childName:h}}(Y.childName,Y.snapshotNode))}),Ds(h,M,"child_removed",u,E,c),Ds(h,M,"child_added",u,E,c),Ds(h,M,"child_moved",B,E,c),Ds(h,M,"child_changed",u,E,c),Ds(h,M,"value",u,E,c),M}(h.eventGenerator_,u,c,E?[E]:h.eventRegistrations_)}let Ai,ya;class pl{constructor(){this.views=new Map}}function el(h,u,c,E){const M=u.source.queryId;if(null!==M){const B=h.views.get(M);return(0,H.hu)(null!=B,"SyncTree gave us an op for an invalid query."),Cs(B,u,c,E)}{let B=[];for(const Y of h.views.values())B=B.concat(Cs(Y,u,c,E));return B}}function Va(h,u,c,E,M){const Y=h.views.get(u._queryIdentifier);if(!Y){let me=dn(c,M?E:null),be=!1;me?be=!0:E instanceof Pn?(me=Dr(c,E),be=!1):(me=Pn.EMPTY_NODE,be=!1);const xe=ji(new ai(me,be,!1),new ai(E,M,!1));return new Ol(u,xe)}return Y}function Mi(h){const u=[];for(const c of h.views.values())c.query._queryParams.loadsAllData()||u.push(c);return u}function js(h,u){let c=null;for(const E of h.views.values())c=c||xo(E,u);return c}function eo(h,u){return u._queryParams.loadsAllData()?Ma(h):h.views.get(u._queryIdentifier)}function ma(h,u){return null!=eo(h,u)}function ho(h){return null!=Ma(h)}function Ma(h){for(const u of h.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let Cr=1;class Pa{constructor(u){this.listenProvider_=u,this.syncPointTree_=new li(null),this.pendingWriteTree_=function vt(){return{visibleWrites:Zs.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fi(h,u,c,E,M){return function Li(h,u,c,E,M){(0,H.hu)(E>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===M&&(M=!0),h.allWrites.push({path:u,snap:c,writeId:E,visible:M}),M&&(h.visibleWrites=ba(h.visibleWrites,u,c)),h.lastWriteId=E}(h.pendingWriteTree_,u,c,E,M),M?F(h,new hi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,c)):[]}function Lo(h,u,c=!1){const E=function Pl(h,u){for(let c=0;c<h.allWrites.length;c++){const E=h.allWrites[c];if(E.writeId===u)return E}return null}(h.pendingWriteTree_,u);if(function pn(h,u){const c=h.allWrites.findIndex(me=>me.writeId===u);(0,H.hu)(c>=0,"removeWrite called with nonexistent writeId.");const E=h.allWrites[c];h.allWrites.splice(c,1);let M=E.visible,B=!1,Y=h.allWrites.length-1;for(;M&&Y>=0;){const me=h.allWrites[Y];me.visible&&(Y>=c&&In(me,E.path)?M=!1:it(E.path,me.path)&&(B=!0)),Y--}return!!M&&(B?(function dl(h){h.visibleWrites=dt(h.allWrites,nn,Sn()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(E.snap?h.visibleWrites=Aa(h.visibleWrites,E.path):Yt(E.children,be=>{h.visibleWrites=Aa(h.visibleWrites,ar(E.path,be))}),!0))}(h.pendingWriteTree_,u)){let B=new li(null);return null!=E.snap?B=B.set(Sn(),!0):Yt(E.children,Y=>{B=B.set(new fn(Y),!0)}),F(h,new Ko(E.path,B,c))}return[]}function Ba(h,u,c){return F(h,new hi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,c))}function _a(h,u,c,E,M=!1){const B=u._path,Y=h.syncPointTree_.get(B);let me=[];if(Y&&("default"===u._queryIdentifier||ma(Y,u))){const be=function Kl(h,u,c,E){const M=u._queryIdentifier,B=[];let Y=[];const me=ho(h);if("default"===M)for(const[be,xe]of h.views.entries())Y=Y.concat(ga(xe,c,E)),Xa(xe)&&(h.views.delete(be),xe.query._queryParams.loadsAllData()||B.push(xe.query));else{const be=h.views.get(M);be&&(Y=Y.concat(ga(be,c,E)),Xa(be)&&(h.views.delete(M),be.query._queryParams.loadsAllData()||B.push(be.query)))}return me&&!ho(h)&&B.push(new(function Ja(){return(0,H.hu)(Ai,"Reference.ts has not been loaded"),Ai}())(u._repo,u._path)),{removed:B,events:Y}}(Y,u,c,E);(function su(h){return 0===h.views.size})(Y)&&(h.syncPointTree_=h.syncPointTree_.remove(B));const xe=be.removed;if(me=be.events,!M){const _t=-1!==xe.findIndex(At=>At._queryParams.loadsAllData()),Dt=h.syncPointTree_.findOnPath(B,(At,En)=>ho(En));if(_t&&!Dt){const At=h.syncPointTree_.subtree(B);if(!At.isEmpty()){const En=function $r(h){return h.fold((u,c,E)=>{if(c&&ho(c))return[Ma(c)];{let M=[];return c&&(M=Mi(c)),Yt(E,(B,Y)=>{M=M.concat(Y)}),M}})}(At);for(let zn=0;zn<En.length;++zn){const Ci=En[zn],Co=Ci.query,mu=fe(h,Ci);h.listenProvider_.startListening(Hs(Co),je(h,Co),mu.hashFn,mu.onComplete)}}}!Dt&&xe.length>0&&!E&&(_t?h.listenProvider_.stopListening(Hs(u),null):xe.forEach(At=>{const En=h.queryToTagMap.get(wt(At));h.listenProvider_.stopListening(Hs(At),En)}))}!function Fi(h,u){for(let c=0;c<u.length;++c){const E=u[c];if(!E._queryParams.loadsAllData()){const M=wt(E),B=h.queryToTagMap.get(M);h.queryToTagMap.delete(M),h.tagToQueryMap.delete(B)}}}(h,xe)}return me}function ws(h,u,c,E){const M=sn(h,E);if(null!=M){const B=on(M),Y=B.path,me=B.queryId,be=Br(Y,u);return br(h,Y,new hi(zo(me),be,c))}return[]}function A(h,u,c,E=!1){const M=u._path;let B=null,Y=!1;h.syncPointTree_.foreachOnPath(M,(At,En)=>{const zn=Br(At,M);B=B||js(En,zn),Y=Y||ho(En)});let be,me=h.syncPointTree_.get(M);me?(Y=Y||ho(me),B=B||js(me,Sn())):(me=new pl,h.syncPointTree_=h.syncPointTree_.set(M,me)),null!=B?be=!0:(be=!1,B=Pn.EMPTY_NODE,h.syncPointTree_.subtree(M).foreachChild((En,zn)=>{const Ci=js(zn,Sn());Ci&&(B=B.updateImmediateChild(En,Ci))}));const xe=ma(me,u);if(!xe&&!u._queryParams.loadsAllData()){const At=wt(u);(0,H.hu)(!h.queryToTagMap.has(At),"View does not exist, but we have a tag");const En=function $s(){return Cr++}();h.queryToTagMap.set(At,En),h.tagToQueryMap.set(En,At)}let Dt=function Bs(h,u,c,E,M,B){const Y=Va(h,u,E,M,B);return h.views.has(u._queryIdentifier)||h.views.set(u._queryIdentifier,Y),function st(h,u){h.eventRegistrations_.push(u)}(Y,c),function Rl(h,u){const c=h.viewCache_.eventCache,E=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(jr,(B,Y)=>{E.push(hs(B,Y))}),c.isFullyInitialized()&&E.push(yo(c.getNode())),Js(h,E,c.getNode(),u)}(Y,c)}(me,u,c,Ut(h.pendingWriteTree_,M),B,be);if(!xe&&!Y&&!E){const At=eo(me,u);Dt=Dt.concat(function ts(h,u,c){const E=u._path,M=je(h,u),B=fe(h,c),Y=h.listenProvider_.startListening(Hs(u),M,B.hashFn,B.onComplete),me=h.syncPointTree_.subtree(E);if(M)(0,H.hu)(!ho(me.value),"If we're adding a query, it shouldn't be shadowed");else{const be=me.fold((xe,_t,Dt)=>{if(!kn(xe)&&_t&&ho(_t))return[Ma(_t).query];{let At=[];return _t&&(At=At.concat(Mi(_t).map(En=>En.query))),Yt(Dt,(En,zn)=>{At=At.concat(zn)}),At}});for(let xe=0;xe<be.length;++xe){const _t=be[xe];h.listenProvider_.stopListening(Hs(_t),je(h,_t))}}return Y}(h,u,At))}return Dt}function O(h,u,c){const M=h.pendingWriteTree_,B=h.syncPointTree_.findOnPath(u,(Y,me)=>{const xe=js(me,Br(Y,u));if(xe)return xe});return P(M,u,B,c,!0)}function F(h,u){return W(u,h.syncPointTree_,null,Ut(h.pendingWriteTree_,Sn()))}function W(h,u,c,E){if(kn(h.path))return oe(h,u,c,E);{const M=u.get(Sn());null==c&&null!=M&&(c=js(M,Sn()));let B=[];const Y=Cn(h.path),me=h.operationForChild(Y),be=u.children.get(Y);if(be&&me){const xe=c?c.getImmediateChild(Y):null,_t=Xt(E,Y);B=B.concat(W(me,be,xe,_t))}return M&&(B=B.concat(el(M,h,E,c))),B}}function oe(h,u,c,E){const M=u.get(Sn());null==c&&null!=M&&(c=js(M,Sn()));let B=[];return u.children.inorderTraversal((Y,me)=>{const be=c?c.getImmediateChild(Y):null,xe=Xt(E,Y),_t=h.operationForChild(Y);_t&&(B=B.concat(oe(_t,me,be,xe)))}),M&&(B=B.concat(el(M,h,E,c))),B}function fe(h,u){const c=u.query,E=je(h,c);return{hashFn:()=>(function ru(h){return h.viewCache_.serverCache.getNode()}(u)||Pn.EMPTY_NODE).hash(),onComplete:M=>{if("ok"===M)return E?function qo(h,u,c){const E=sn(h,c);if(E){const M=on(E),B=M.path,Y=M.queryId,me=Br(B,u);return br(h,B,new _o(zo(Y),me))}return[]}(h,c._path,E):function tl(h,u){return F(h,new _o({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(h,c._path);{const B=function Fr(h,u){let c="Unknown Error";"too_big"===h?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?c="Client doesn't have permission to access the desired data.":"unavailable"===h&&(c="The service is unavailable");const E=new Error(h+" at "+u._path.toString()+": "+c);return E.code=h.toUpperCase(),E}(M,c);return _a(h,c,null,B)}}}}function je(h,u){const c=wt(u);return h.queryToTagMap.get(c)}function wt(h){return h._path.toString()+"$"+h._queryIdentifier}function sn(h,u){return h.tagToQueryMap.get(u)}function on(h){const u=h.indexOf("$");return(0,H.hu)(-1!==u&&u<h.length-1,"Bad queryKey."),{queryId:h.substr(u+1),path:new fn(h.substr(0,u))}}function br(h,u,c){const E=h.syncPointTree_.get(u);return(0,H.hu)(E,"Missing sync point for query tag that we're tracking"),el(E,c,Ut(h.pendingWriteTree_,u),null)}function Hs(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function As(){return(0,H.hu)(ya,"Reference.ts has not been loaded"),ya}())(h._repo,h._path):h}class Ra{constructor(u){this.node_=u}getImmediateChild(u){const c=this.node_.getImmediateChild(u);return new Ra(c)}node(){return this.node_}}class Zo{constructor(u,c){this.syncTree_=u,this.path_=c}getImmediateChild(u){const c=ar(this.path_,u);return new Zo(this.syncTree_,c)}node(){return O(this.syncTree_,this.path_)}}const ml=function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h},Rr=function(h,u,c){return h&&"object"==typeof h?((0,H.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?ui(h[".sv"],u,c):"object"==typeof h[".sv"]?yl(h[".sv"],u):void(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},ui=function(h,u,c){if("timestamp"===h)return c.timestamp;(0,H.hu)(!1,"Unexpected server value: "+h)},yl=function(h,u,c){h.hasOwnProperty("increment")||(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const E=h.increment;"number"!=typeof E&&(0,H.hu)(!1,"Unexpected increment value: "+E);const M=u.node();if((0,H.hu)(null!==M&&typeof M<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!M.isLeafNode())return E;const Y=M.getValue();return"number"!=typeof Y?E:Y+E},nl=function(h,u,c,E){return vl(u,new Zo(c,h),E)},_l=function(h,u,c){return vl(h,new Ra(u),c)};function vl(h,u,c){const E=h.getPriority().val(),M=Rr(E,u.getImmediateChild(".priority"),c);let B;if(h.isLeafNode()){const Y=h,me=Rr(Y.getValue(),u,c);return me!==Y.getValue()||M!==Y.getPriority().val()?new Fs(me,Hr(M)):h}{const Y=h;return B=Y,M!==Y.getPriority().val()&&(B=B.updatePriority(new Fs(M))),Y.forEachChild(jr,(me,be)=>{const xe=vl(be,u.getImmediateChild(me),c);xe!==be&&(B=B.updateImmediateChild(me,xe))}),B}}class va{constructor(u="",c=null,E={children:{},childCount:0}){this.name=u,this.parent=c,this.node=E}}function xl(h,u){let c=u instanceof fn?u:new fn(u),E=h,M=Cn(c);for(;null!==M;){const B=(0,H.DV)(E.node.children,M)||{children:{},childCount:0};E=new va(M,E,B),c=Xn(c),M=Cn(c)}return E}function Xo(h){return h.node.value}function Nl(h,u){h.node.value=u,Jo(h)}function Bu(h){return h.node.childCount>0}function Ha(h,u){Yt(h.node.children,(c,E)=>{u(new va(c,h,E))})}function ou(h,u,c,E){c&&!E&&u(h),Ha(h,M=>{ou(M,u,!0,E)}),c&&E&&u(h)}function $a(h){return new fn(null===h.parent?h.name:$a(h.parent)+"/"+h.name)}function Jo(h){null!==h.parent&&function Ll(h,u,c){const E=function Yl(h){return void 0===Xo(h)&&!Bu(h)}(c),M=(0,H.r3)(h.node.children,u);E&&M?(delete h.node.children[u],h.node.childCount--,Jo(h)):!E&&!M&&(h.node.children[u]=c.node,h.node.childCount++,Jo(h))}(h.parent,h.name,h)}const rl=/[\[\].#$\/\u0000-\u001F\u007F]/,ju=/[\[\].#$\u0000-\u001F\u007F]/,Pi=10485760,il=function(h){return"string"==typeof h&&0!==h.length&&!rl.test(h)},ns=function(h){return"string"==typeof h&&0!==h.length&&!ju.test(h)},Fl=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!Je(h)||h&&"object"==typeof h&&(0,H.r3)(h,".sv")},Gs=function(h,u,c,E){E&&void 0===u||gs((0,H.gK)(h,"value"),u,c)},gs=function(h,u,c){const E=c instanceof fn?new ze(c,h):c;if(void 0===u)throw new Error(h+"contains undefined "+mn(E));if("function"==typeof u)throw new Error(h+"contains a function "+mn(E)+" with contents = "+u.toString());if(Je(u))throw new Error(h+"contains "+u.toString()+" "+mn(E));if("string"==typeof u&&u.length>Pi/3&&(0,H.ug)(u)>Pi)throw new Error(h+"contains a string greater than "+Pi+" utf8 bytes "+mn(E)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let M=!1,B=!1;if(Yt(u,(Y,me)=>{if(".value"===Y)M=!0;else if(".priority"!==Y&&".sv"!==Y&&(B=!0,!il(Y)))throw new Error(h+" contains an invalid key ("+Y+") "+mn(E)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function gt(h,u){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(u),h.byteLength_+=(0,H.ug)(u),Kt(h)})(E,Y),gs(h,me,E),function $t(h){const u=h.parts_.pop();h.byteLength_-=(0,H.ug)(u),h.parts_.length>0&&(h.byteLength_-=1)}(E)}),M&&B)throw new Error(h+' contains ".value" child '+mn(E)+" in addition to actual children.")}},Hu=function(h,u,c,E){if(E&&void 0===u)return;const M=(0,H.gK)(h,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(M+" must be an object containing the children to replace.");const B=[];Yt(u,(Y,me)=>{const be=new fn(Y);if(gs(M,me,ar(c,be)),".priority"===Mr(be)&&!Fl(me))throw new Error(M+"contains an invalid value for '"+be.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");B.push(be)}),function(h,u){let c,E;for(c=0;c<u.length;c++){E=u[c];const B=si(E);for(let Y=0;Y<B.length;Y++)if((".priority"!==B[Y]||Y!==B.length-1)&&!il(B[Y]))throw new Error(h+"contains an invalid key ("+B[Y]+") in path "+E.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(Ys);let M=null;for(c=0;c<u.length;c++){if(E=u[c],null!==M&&it(M,E))throw new Error(h+"contains a path "+M.toString()+" that is ancestor of another path "+E.toString());M=E}}(M,B)},kl=function(h,u,c,E){if(!(E&&void 0===c||ns(c)))throw new Error((0,H.gK)(h,u)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},El=function(h,u,c,E){c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),kl(h,u,c,E)},vo=function(h,u){if(".info"===Cn(u))throw new Error(h+" failed = Can't modify data under /.info/")},Ga=function(h,u){const c=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!il(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==c.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),ns(h)}(c))throw new Error((0,H.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class sl{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function lu(h,u){let c=null;for(let E=0;E<u.length;E++){const M=u[E],B=M.getPath();null!==c&&!Ee(B,c.path)&&(h.eventLists_.push(c),c=null),null===c&&(c={events:[],path:B}),c.events.push(M)}c&&h.eventLists_.push(c)}function $u(h,u,c){lu(h,c),Cu(h,E=>Ee(E,u))}function Ki(h,u,c){lu(h,c),Cu(h,E=>it(E,u)||it(u,E))}function Cu(h,u){h.recursionDepth_++;let c=!0;for(let E=0;E<h.eventLists_.length;E++){const M=h.eventLists_[E];M&&(u(M.path)?(Dl(h.eventLists_[E]),h.eventLists_[E]=null):c=!1)}c&&(h.eventLists_=[]),h.recursionDepth_--}function Dl(h){for(let u=0;u<h.events.length;u++){const c=h.events[u];if(null!==c){h.events[u]=null;const E=c.getEventRunner();Ye&&Fe("event: "+c.toString()),ut(E)}}}const Gu="repo_interrupt",Wu=25;class Ql{constructor(u,c,E,M){this.repoInfo_=u,this.forceRestClient_=c,this.authTokenProvider_=E,this.appCheckProvider_=M,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ue(),this.transactionQueueTree_=new va,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Wa(h){const c=h.infoData_.getNode(new fn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function $i(h){return ml({timestamp:Wa(h)})}function ql(h,u,c,E,M){h.dataUpdateCount++;const B=new fn(u);c=h.interceptServerDataCallback_?h.interceptServerDataCallback_(u,c):c;let Y=[];if(M)if(E){const be=(0,H.UI)(c,xe=>Hr(xe));Y=function pi(h,u,c,E){const M=sn(h,E);if(M){const B=on(M),Y=B.path,me=B.queryId,be=Br(Y,u),xe=li.fromObject(c);return br(h,Y,new oi(zo(me),be,xe))}return[]}(h.serverSyncTree_,B,be,M)}else{const be=Hr(c);Y=ws(h.serverSyncTree_,B,be,M)}else if(E){const be=(0,H.UI)(c,xe=>Hr(xe));Y=function ja(h,u,c){const E=li.fromObject(c);return F(h,new oi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,E))}(h.serverSyncTree_,B,be)}else{const be=Hr(c);Y=Ba(h.serverSyncTree_,B,be)}let me=B;Y.length>0&&(me=Na(h,B)),Ki(h.eventQueue_,me,Y)}function Ul(h,u){Fo(h,"connected",u),!1===u&&function wu(h){ea(h,"onDisconnectEvents");const u=$i(h),c=ue();Zr(h.onDisconnect_,Sn(),(M,B)=>{const Y=nl(M,B,h.serverSyncTree_,u);ot(c,M,Y)});let E=[];Zr(c,Sn(),(M,B)=>{E=E.concat(Ba(h.serverSyncTree_,M,B));const Y=re(h,M);Na(h,Y)}),h.onDisconnect_=ue(),Ki(h.eventQueue_,Sn(),E)}(h)}function Fo(h,u,c){const E=new fn("/.info/"+u),M=Hr(c);h.infoData_.updateSnapshot(E,M);const B=Ba(h.infoSyncTree_,E,M);Ki(h.eventQueue_,E,B)}function Vl(h){return h.nextWriteId_++}function hu(h,u,c){h.server_.onDisconnectCancel(u.toString(),(E,M)=>{"ok"===E&&Qt(h.onDisconnect_,u),Ea(0,c,E,M)})}function Tu(h,u,c,E){const M=Hr(c);h.server_.onDisconnectPut(u.toString(),M.val(!0),(B,Y)=>{"ok"===B&&ot(h.onDisconnect_,u,M),Ea(0,E,B,Y)})}function Yu(h,u,c){let E;E=".info"===Cn(u._path)?_a(h.infoSyncTree_,u,c):_a(h.serverSyncTree_,u,c),$u(h.eventQueue_,u._path,E)}function ea(h,...u){let c="";h.persistentConnection_&&(c=h.persistentConnection_.id+":"),Fe(c,...u)}function Ea(h,u,c,E){u&&ut(()=>{if("ok"===c)u(null);else{const M=(c||"error").toUpperCase();let B=M;E&&(B+=": "+E);const Y=new Error(B);Y.code=M,u(Y)}})}function ol(h,u,c){return O(h.serverSyncTree_,u,c)||Pn.EMPTY_NODE}function xa(h,u=h.transactionQueueTree_){if(u||L(h,u),Xo(u)){const c=v(h,u);(0,H.hu)(c.length>0,"Sending zero length transaction queue"),c.every(M=>0===M.status)&&function fu(h,u,c){const E=c.map(xe=>xe.currentWriteId),M=ol(h,u,E);let B=M;const Y=M.hash();for(let xe=0;xe<c.length;xe++){const _t=c[xe];(0,H.hu)(0===_t.status,"tryToSendTransactionQueue_: items in queue should all be run."),_t.status=1,_t.retryCount++;const Dt=Br(u,_t.path);B=B.updateChild(Dt,_t.currentOutputSnapshotRaw)}const me=B.val(!0),be=u;h.server_.put(be.toString(),me,xe=>{ea(h,"transaction put response",{path:be.toString(),status:xe});let _t=[];if("ok"===xe){const Dt=[];for(let At=0;At<c.length;At++)c[At].status=2,_t=_t.concat(Lo(h.serverSyncTree_,c[At].currentWriteId)),c[At].onComplete&&Dt.push(()=>c[At].onComplete(null,!0,c[At].currentOutputSnapshotResolved)),c[At].unwatcher();L(h,xl(h.transactionQueueTree_,u)),xa(h,h.transactionQueueTree_),Ki(h.eventQueue_,u,_t);for(let At=0;At<Dt.length;At++)ut(Dt[At])}else{if("datastale"===xe)for(let Dt=0;Dt<c.length;Dt++)c[Dt].status=3===c[Dt].status?4:0;else{Nt("transaction at "+be.toString()+" failed: "+xe);for(let Dt=0;Dt<c.length;Dt++)c[Dt].status=4,c[Dt].abortReason=xe}Na(h,u)}},Y)}(h,$a(u),c)}else Bu(u)&&Ha(u,c=>{xa(h,c)})}function Na(h,u){const c=R(h,u),E=$a(c);return function Bl(h,u,c){if(0===u.length)return;const E=[];let M=[];const Y=u.filter(me=>0===me.status).map(me=>me.currentWriteId);for(let me=0;me<u.length;me++){const be=u[me],xe=Br(c,be.path);let Dt,_t=!1;if((0,H.hu)(null!==xe,"rerunTransactionsUnderNode_: relativePath should not be null."),4===be.status)_t=!0,Dt=be.abortReason,M=M.concat(Lo(h.serverSyncTree_,be.currentWriteId,!0));else if(0===be.status)if(be.retryCount>=Wu)_t=!0,Dt="maxretry",M=M.concat(Lo(h.serverSyncTree_,be.currentWriteId,!0));else{const At=ol(h,be.path,Y);be.currentInputSnapshot=At;const En=u[me].update(At.val());if(void 0!==En){gs("transaction failed: Data returned ",En,be.path);let zn=Hr(En);"object"==typeof En&&null!=En&&(0,H.r3)(En,".priority")||(zn=zn.updatePriority(At.getPriority()));const Co=be.currentWriteId,mu=$i(h),Ks=_l(zn,At,mu);be.currentOutputSnapshotRaw=zn,be.currentOutputSnapshotResolved=Ks,be.currentWriteId=Vl(h),Y.splice(Y.indexOf(Co),1),M=M.concat(fi(h.serverSyncTree_,be.path,Ks,be.currentWriteId,be.applyLocally)),M=M.concat(Lo(h.serverSyncTree_,Co,!0))}else _t=!0,Dt="nodata",M=M.concat(Lo(h.serverSyncTree_,be.currentWriteId,!0))}Ki(h.eventQueue_,c,M),M=[],_t&&(u[me].status=2,setTimeout(u[me].unwatcher,Math.floor(0)),u[me].onComplete&&E.push("nodata"===Dt?()=>u[me].onComplete(null,!1,u[me].currentInputSnapshot):()=>u[me].onComplete(new Error(Dt),!1,null)))}L(h,h.transactionQueueTree_);for(let me=0;me<E.length;me++)ut(E[me]);xa(h,h.transactionQueueTree_)}(h,v(h,c),E),E}function R(h,u){let c,E=h.transactionQueueTree_;for(c=Cn(u);null!==c&&void 0===Xo(E);)E=xl(E,c),c=Cn(u=Xn(u));return E}function v(h,u){const c=[];return D(h,u,c),c.sort((E,M)=>E.order-M.order),c}function D(h,u,c){const E=Xo(u);if(E)for(let M=0;M<E.length;M++)c.push(E[M]);Ha(u,M=>{D(h,M,c)})}function L(h,u){const c=Xo(u);if(c){let E=0;for(let M=0;M<c.length;M++)2!==c[M].status&&(c[E]=c[M],E++);c.length=E,Nl(u,c.length>0?c:void 0)}Ha(u,E=>{L(h,E)})}function re(h,u){const c=$a(R(h,u)),E=xl(h.transactionQueueTree_,u);return function Iu(h,u,c){let E=c?h:h.parent;for(;null!==E;){if(u(E))return!0;E=E.parent}}(E,M=>{y(h,M)}),y(h,E),ou(E,M=>{y(h,M)}),c}function y(h,u){const c=Xo(u);if(c){const E=[];let M=[],B=-1;for(let Y=0;Y<c.length;Y++)3===c[Y].status||(1===c[Y].status?((0,H.hu)(B===Y-1,"All SENT items should be at beginning of queue."),B=Y,c[Y].status=3,c[Y].abortReason="set"):((0,H.hu)(0===c[Y].status,"Unexpected transaction status in abort"),c[Y].unwatcher(),M=M.concat(Lo(h.serverSyncTree_,c[Y].currentWriteId,!0)),c[Y].onComplete&&E.push(c[Y].onComplete.bind(null,new Error("set"),!1,null))));-1===B?Nl(u,void 0):c.length=B+1,Ki(h.eventQueue_,$a(u),M);for(let Y=0;Y<E.length;Y++)ut(E[Y])}}const b=function(h,u){const c=j(h),E=c.namespace;return"firebase.com"===c.domain&&Ze(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!E||"undefined"===E)&&"localhost"!==c.domain&&Ze("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Nt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new un(c.host,c.secure,E,"ws"===c.scheme||"wss"===c.scheme,u,"",E!==c.subdomain),path:new fn(c.pathString)}},j=function(h){let u="",c="",E="",M="",B="",Y=!0,me="https",be=443;if("string"==typeof h){let xe=h.indexOf("//");xe>=0&&(me=h.substring(0,xe-1),h=h.substring(xe+2));let _t=h.indexOf("/");-1===_t&&(_t=h.length);let Dt=h.indexOf("?");-1===Dt&&(Dt=h.length),u=h.substring(0,Math.min(_t,Dt)),_t<Dt&&(M=function _(h){let u="";const c=h.split("/");for(let E=0;E<c.length;E++)if(c[E].length>0){let M=c[E];try{M=decodeURIComponent(M.replace(/\+/g," "))}catch{}u+="/"+M}return u}(h.substring(_t,Dt)));const At=function g(h){const u={};"?"===h.charAt(0)&&(h=h.substring(1));for(const c of h.split("&")){if(0===c.length)continue;const E=c.split("=");2===E.length?u[decodeURIComponent(E[0])]=decodeURIComponent(E[1]):Nt(`Invalid query segment '${c}' in query '${h}'`)}return u}(h.substring(Math.min(h.length,Dt)));xe=u.indexOf(":"),xe>=0?(Y="https"===me||"wss"===me,be=parseInt(u.substring(xe+1),10)):xe=u.length;const En=u.slice(0,xe);if("localhost"===En.toLowerCase())c="localhost";else if(En.split(".").length<=2)c=En;else{const zn=u.indexOf(".");E=u.substring(0,zn).toLowerCase(),c=u.substring(zn+1),B=E}"ns"in At&&(B=At.ns)}return{host:u,port:be,domain:c,subdomain:E,secure:Y,scheme:me,pathString:M,namespace:B}},ne="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",_e=function(){let h=0;const u=[];return function(c){const E=c===h;let M;h=c;const B=new Array(8);for(M=7;M>=0;M--)B[M]=ne.charAt(c%64),c=Math.floor(c/64);(0,H.hu)(0===c,"Cannot push at time == 0");let Y=B.join("");if(E){for(M=11;M>=0&&63===u[M];M--)u[M]=0;u[M]++}else for(M=0;M<12;M++)u[M]=Math.floor(64*Math.random());for(M=0;M<12;M++)Y+=ne.charAt(u[M]);return(0,H.hu)(20===Y.length,"nextPushId: Length should be 20."),Y}}();class Ie{constructor(u,c,E,M){this.eventType=u,this.eventRegistration=c,this.snapshot=E,this.prevName=M}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,H.Wl)(this.snapshot.exportVal())}}class Xe{constructor(u,c,E){this.eventRegistration=u,this.error=c,this.path=E}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class pt{constructor(u,c){this.snapshotCallback=u,this.cancelCallback=c}onValue(u,c){this.snapshotCallback.call(null,u,c)}onCancel(u){return(0,H.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class Bt{constructor(u,c){this._repo=u,this._path=c}cancel(){const u=new H.BH;return hu(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){vo("OnDisconnect.remove",this._path);const u=new H.BH;return Tu(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){vo("OnDisconnect.set",this._path),Gs("OnDisconnect.set",u,this._path,!1);const c=new H.BH;return Tu(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}setWithPriority(u,c){vo("OnDisconnect.setWithPriority",this._path),Gs("OnDisconnect.setWithPriority",u,this._path,!1),function(h,u,c){if(!c||void 0!==u){if(Je(u))throw new Error((0,H.gK)(h,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Fl(u))throw new Error((0,H.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}("OnDisconnect.setWithPriority",c,!1);const E=new H.BH;return function zu(h,u,c,E,M){const B=Hr(c,E);h.server_.onDisconnectPut(u.toString(),B.val(!0),(Y,me)=>{"ok"===Y&&ot(h.onDisconnect_,u,B),Ea(0,M,Y,me)})}(this._repo,this._path,u,c,E.wrapCallback(()=>{})),E.promise}update(u){vo("OnDisconnect.update",this._path),Hu("OnDisconnect.update",u,this._path,!1);const c=new H.BH;return function Zl(h,u,c,E){if((0,H.xb)(c))return Fe("onDisconnect().update() called with empty data.  Don't do anything."),void Ea(0,E,"ok",void 0);h.server_.onDisconnectMerge(u.toString(),c,(M,B)=>{"ok"===M&&Yt(c,(Y,me)=>{const be=Hr(me);ot(h.onDisconnect_,ar(u,Y),be)}),Ea(0,E,M,B)})}(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}}class Gt{constructor(u,c,E,M){this._repo=u,this._path=c,this._queryParams=E,this._orderByCalled=M}get key(){return kn(this._path)?null:Mr(this._path)}get ref(){return new bn(this._repo,this._path)}get _queryIdentifier(){const u=G(this._queryParams),c=ir(u);return"{}"===c?"default":c}get _queryObject(){return G(this._queryParams)}isEqual(u){if(!((u=(0,H.m9)(u))instanceof Gt))return!1;const c=this._repo===u._repo,E=Ee(this._path,u._path);return c&&E&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Qi(h){let u="";for(let c=h.pieceNum_;c<h.pieces_.length;c++)""!==h.pieces_[c]&&(u+="/"+encodeURIComponent(String(h.pieces_[c])));return u||"/"}(this._path)}}class bn extends Gt{constructor(u,c){super(u,c,new Sr,!1)}get parent(){const u=An(this._path);return null===u?null:new bn(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class pr{constructor(u,c,E){this._node=u,this.ref=c,this._index=E}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const c=new fn(u),E=Gr(this.ref,u);return new pr(this._node.getChild(c),E,jr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(E,M)=>u(new pr(M,Gr(this.ref,E),jr)))}hasChild(u){const c=new fn(u);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Nr(h,u){return(h=(0,H.m9)(h))._checkNotDeleted("ref"),void 0!==u?Gr(h._root,u):h._root}function Gr(h,u){return null===Cn((h=(0,H.m9)(h))._path)?El("child","path",u,!1):kl("child","path",u,!1),new bn(h._repo,ar(h._path,u))}function ms(h){return h=(0,H.m9)(h),new Bt(h._repo,h._path)}function Da(h,u){h=(0,H.m9)(h),vo("push",h._path),Gs("push",u,h._path,!0);const c=Wa(h._repo),E=_e(c),M=Gr(h,E),B=Gr(h,E);let Y;return Y=null!=u?ki(B,u).then(()=>B):Promise.resolve(B),M.then=Y.then.bind(Y),M.catch=Y.then.bind(Y,void 0),M}function Ia(h){return vo("remove",h._path),ki(h,null)}function ki(h,u){h=(0,H.m9)(h),vo("set",h._path),Gs("set",u,h._path,!1);const c=new H.BH;return function cu(h,u,c,E,M){ea(h,"set",{path:u.toString(),value:c,priority:E});const B=$i(h),Y=Hr(c,E),me=O(h.serverSyncTree_,u),be=_l(Y,me,B),xe=Vl(h),_t=fi(h.serverSyncTree_,u,be,xe,!0);lu(h.eventQueue_,_t),h.server_.put(u.toString(),Y.val(!0),(At,En)=>{const zn="ok"===At;zn||Nt("set at "+u+" failed: "+At);const Ci=Lo(h.serverSyncTree_,xe,!zn);Ki(h.eventQueue_,u,Ci),Ea(0,M,At,En)});const Dt=re(h,u);Na(h,Dt),Ki(h.eventQueue_,Dt,[])}(h._repo,h._path,u,null,c.wrapCallback(()=>{})),c.promise}function Cl(h,u){Hu("update",u,h._path,!1);const c=new H.BH;return function du(h,u,c,E){ea(h,"update",{path:u.toString(),value:c});let M=!0;const B=$i(h),Y={};if(Yt(c,(me,be)=>{M=!1,Y[me]=nl(ar(u,me),Hr(be),h.serverSyncTree_,B)}),M)Fe("update() called with empty data.  Don't do anything."),Ea(0,E,"ok",void 0);else{const me=Vl(h),be=function Oa(h,u,c,E){!function Po(h,u,c,E){(0,H.hu)(E>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:u,children:c,writeId:E,visible:!0}),h.visibleWrites=fa(h.visibleWrites,u,c),h.lastWriteId=E}(h.pendingWriteTree_,u,c,E);const M=li.fromObject(c);return F(h,new oi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,M))}(h.serverSyncTree_,u,Y,me);lu(h.eventQueue_,be),h.server_.merge(u.toString(),c,(xe,_t)=>{const Dt="ok"===xe;Dt||Nt("update at "+u+" failed: "+xe);const At=Lo(h.serverSyncTree_,me,!Dt),En=At.length>0?Na(h,u):u;Ki(h.eventQueue_,En,At),Ea(0,E,xe,_t)}),Yt(c,xe=>{const _t=re(h,ar(u,xe));Na(h,_t)}),Ki(h.eventQueue_,u,[])}}(h._repo,h._path,u,c.wrapCallback(()=>{})),c.promise}function uc(h){h=(0,H.m9)(h);const u=new pt(()=>{}),c=new Jn(u);return function ko(h,u,c){const E=function T(h,u){const c=u._path;let E=null;h.syncPointTree_.foreachOnPath(c,(xe,_t)=>{const Dt=Br(xe,c);E=E||js(_t,Dt)});let M=h.syncPointTree_.get(c);M?E=E||js(M,Sn()):(M=new pl,h.syncPointTree_=h.syncPointTree_.set(c,M));const B=null!=E,Y=B?new ai(E,!0,!1):null;return function iu(h){return ls(h.viewCache_)}(Va(M,u,Ut(h.pendingWriteTree_,u._path),B?Y.getNode():Pn.EMPTY_NODE,B))}(h.serverSyncTree_,u);return null!=E?Promise.resolve(E):h.server_.get(u).then(M=>{const B=Hr(M).withIndex(u._queryParams.getIndex());let Y;if(A(h.serverSyncTree_,u,c,!0),u._queryParams.loadsAllData())Y=Ba(h.serverSyncTree_,u._path,B);else{const me=je(h.serverSyncTree_,u);Y=ws(h.serverSyncTree_,u._path,B,me)}return Ki(h.eventQueue_,u._path,Y),_a(h.serverSyncTree_,u,c,null,!0),B},M=>(ea(h,"get for query "+(0,H.Wl)(u)+" failed: "+M),Promise.reject(new Error(M))))}(h._repo,h,c).then(E=>new pr(E,new bn(h._repo,h._path),h._queryParams.getIndex()))}class Jn{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,c){const E=c._queryParams.getIndex();return new Ie("value",this,new pr(u.snapshotNode,new bn(c._repo,c._path),E))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new Xe(this,u,c):null}matches(u){return u instanceof Jn&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Eo{constructor(u,c){this.eventType=u,this.callbackContext=c}respondsTo(u){let c="children_added"===u?"child_added":u;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new Xe(this,u,c):null}createEvent(u,c){(0,H.hu)(null!=u.childName,"Child events should have a childName.");const E=Gr(new bn(c._repo,c._path),u.childName),M=c._queryParams.getIndex();return new Ie(u.type,this,new pr(u.snapshotNode,E,M),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof Eo&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function jl(h,u,c,E){return function al(h,u,c,E,M){let B;if("object"==typeof E&&(B=void 0,M=E),"function"==typeof E&&(B=E),M&&M.onlyOnce){const be=c,xe=(_t,Dt)=>{Yu(h._repo,h,me),be(_t,Dt)};xe.userCallback=c.userCallback,xe.context=c.context,c=xe}const Y=new pt(c,B||void 0),me="value"===u?new Jn(Y):new Eo(u,Y);return function Ku(h,u,c){let E;E=".info"===Cn(u._path)?A(h.infoSyncTree_,u,c):A(h.serverSyncTree_,u,c),$u(h.eventQueue_,u._path,E)}(h._repo,h,me),()=>Yu(h._repo,h,me)}(h,"value",u,c,E)}function Ps(h,u,c){let E=null;const M=c?new pt(c):null;"value"===u?E=new Jn(M):u&&(E=new Eo(u,M)),Yu(h._repo,h,E)}(function No(h){(0,H.hu)(!Ai,"__referenceConstructor has already been defined"),Ai=h})(bn),function gl(h){(0,H.hu)(!ya,"__referenceConstructor has already been defined"),ya=h}(bn);const Od="FIREBASE_DATABASE_EMULATOR_HOST",dc={};let Rd=!1;class vh{constructor(u,c){this._repoInternal=u,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function uu(h,u,c){if(h.stats_=Vr(h.repoInfo_),h.forceRestClient_||Ue())h.server_=new $(h.repoInfo_,(E,M,B,Y)=>{ql(h,E,M,B,Y)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>Ul(h,!0),0);else{if(typeof c<"u"&&null!==c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,H.Wl)(c)}catch(E){throw new Error("Invalid authOverride provided: "+E)}}h.persistentConnection_=new vi(h.repoInfo_,u,(E,M,B,Y)=>{ql(h,E,M,B,Y)},E=>{Ul(h,E)},E=>{!function Il(h,u){Yt(u,(c,E)=>{Fo(h,c,E)})}(h,E)},h.authTokenProvider_,h.appCheckProvider_,c),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(E=>{h.server_.refreshAuthToken(E)}),h.appCheckProvider_.addTokenChangeListener(E=>{h.server_.refreshAppCheckToken(E.token)}),h.statsReporter_=function ci(h,u){const c=h.toString();return mi[c]||(mi[c]=u()),mi[c]}(h.repoInfo_,()=>new ka(h.stats_,h.server_)),h.infoData_=new U,h.infoSyncTree_=new Pa({startListening:(E,M,B,Y)=>{let me=[];const be=h.infoData_.getNode(E._path);return be.isEmpty()||(me=Ba(h.infoSyncTree_,E._path,be),setTimeout(()=>{Y("ok")},0)),me},stopListening:()=>{}}),Fo(h,"connected",!1),h.serverSyncTree_=new Pa({startListening:(E,M,B,Y)=>(h.server_.listen(E,B,M,(me,be)=>{const xe=Y(me,be);Ki(h.eventQueue_,E._path,xe)}),[]),stopListening:(E,M)=>{h.server_.unlisten(E,M)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new bn(this._repo,Sn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function xd(h,u){const c=dc[u];(!c||c[h.key]!==h)&&Ze(`Database ${u}(${h.repoInfo_}) has already been deleted.`),function zs(h){h.persistentConnection_&&h.persistentConnection_.interrupt(Gu)}(h),delete c[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&Ze("Cannot call "+u+" on a deleted database.")}}function Eh(h=(0,w.Mq)(),u){const c=(0,w.qX)(h,"database").getImmediate({identifier:u});if(!c._instanceStarted){const E=(0,H.P0)("database");E&&function _f(h,u,c,E={}){(h=(0,H.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&Ze("Cannot call useEmulator() after instance has already been initialized.");const M=h._repoInternal;let B;if(M.repoInfo_.nodeAdmin)E.mockUserToken&&Ze('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),B=new Kn(Kn.OWNER);else if(E.mockUserToken){const Y="string"==typeof E.mockUserToken?E.mockUserToken:(0,H.Sg)(E.mockUserToken,h.app.options.projectId);B=new Kn(Y)}!function $c(h,u,c,E){h.repoInfo_=new un(`${u}:${c}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams,!0),E&&(h.authTokenProvider_=E)}(M,u,c,B)}(c,...E)}return c}const Hl={".sv":"timestamp"};function Ih(){return Hl}function Gc(h){return{".sv":{increment:h}}}vi.prototype.simpleListen=function(h,u){this.sendRequest("q",{p:h},u)},vi.prototype.echo=function(h,u){this.sendRequest("echo",{d:h},u)},function Dh(h){(function se(h){K=h})(w.Jn),(0,w.Xd)(new te.wA("database",(u,{instanceIdentifier:c})=>function hc(h,u,c,E,M){let B=E||h.options.databaseURL;void 0===B&&(h.options.projectId||Ze("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fe("Using default host for project ",h.options.projectId),B=`${h.options.projectId}-default-rtdb.firebaseio.com`);let be,xe,Y=b(B,M),me=Y.repoInfo;typeof process<"u"&&process.env&&(xe=process.env[Od]),xe?(be=!0,B=`http://${xe}?ns=${me.namespace}`,Y=b(B,M),me=Y.repoInfo):be=!Y.repoInfo.secure;const _t=M&&be?new Kn(Kn.OWNER):new Vn(h.name,h.options,u);Ga("Invalid Firebase Database URL",Y),kn(Y.path)||Ze("Database URL must point to the root of a Firebase Database (not including a child path).");const Dt=function Nd(h,u,c,E){let M=dc[u.name];M||(M={},dc[u.name]=M);let B=M[h.toURLString()];return B&&Ze("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),B=new Ql(h,Rd,c,E),M[h.toURLString()]=B,B}(me,h,_t,new Lt(h.name,c));return new vh(Dt,h)}(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,w.KN)(ie,"0.14.3",h),(0,w.KN)(ie,"0.14.3","esm2017")}()},9996:(we,le,I)=>{I.d(le,{ET:()=>Zy,hJ:()=>cm,oe:()=>Vc,JU:()=>dm,ST:()=>Bp,Lx:()=>Wy,QT:()=>Hm,kl:()=>$m,PL:()=>Gm,ad:()=>ky,b9:()=>Nm,cf:()=>Xy,Xo:()=>xm,IO:()=>Mm,Bt:()=>Td,TQ:()=>Lm,r7:()=>Zp});var K,f=I(9671),w=I(6881),te=I(4859),H=I(1877),X=I(2090),ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ee={},se=se||{},q=ie||self;function de(){}function ge(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ne(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var $e="closure_uid_"+(1e9*Math.random()>>>0),Qe=0;function Ve(i,e,t){return i.call.apply(i.bind,arguments)}function We(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var l=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(l,o),i.apply(e,l)}}return function(){return i.apply(e,arguments)}}function Ye(i,e,t){return(Ye=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ve:We).apply(null,arguments)}function qe(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function ke(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(o,l,p){for(var C=Array(arguments.length-2),N=2;N<arguments.length;N++)C[N-2]=arguments[N];return e.prototype[l].apply(o,C)}}function Fe(){this.s=this.s,this.o=this.o}Fe.prototype.s=!1,Fe.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Ke(i){Object.prototype.hasOwnProperty.call(i,$e)&&i[$e]||(i[$e]=++Qe)}(this)},Fe.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ct=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Ze(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function Nt(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(ge(o)){const l=i.length||0,p=o.length||0;i.length=l+p;for(let C=0;C<p;C++)i[l+C]=o[C]}else i.push(o)}}function bt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}bt.prototype.h=function(){this.defaultPrevented=!0};var Je=function(){if(!q.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{q.addEventListener("test",de,e),q.removeEventListener("test",de,e)}catch{}return i}();function Be(i){return/^[\s\xa0]*$/.test(i)}var ct=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function nt(i,e){return i<e?-1:i>e?1:0}function Pt(){var i=q.navigator;return i&&(i=i.userAgent)?i:""}function Tt(i){return-1!=Pt().indexOf(i)}function Ht(i){return Ht[" "](i),i}Ht[" "]=de;var hn,i,an=Tt("Opera"),Yt=Tt("Trident")||Tt("MSIE"),Fn=Tt("Edge"),vn=Fn||Yt,ur=Tt("Gecko")&&!(-1!=Pt().toLowerCase().indexOf("webkit")&&!Tt("Edge"))&&!(Tt("Trident")||Tt("MSIE"))&&!Tt("Edge"),Fr=-1!=Pt().toLowerCase().indexOf("webkit")&&!Tt("Edge");function Mn(){var i=q.document;return i?i.documentMode:void 0}e:{var ii="",It=(i=Pt(),ur?/rv:([^\);]+)(\)|;)/.exec(i):Fn?/Edge\/([\d\.]+)/.exec(i):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Fr?/WebKit\/(\S+)/.exec(i):an?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(It&&(ii=It?It[1]:""),Yt){var ut=Mn();if(null!=ut&&ut>parseFloat(ii)){hn=String(ut);break e}}hn=ii}var Ue={};var Kn=q.document&&Yt&&(Mn()||parseInt(hn,10))||void 0;function kr(i,e){if(bt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(ur){e:{try{Ht(e.nodeName);var l=!0;break e}catch{}l=!1}l||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:is[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&kr.X.h.call(this)}}ke(kr,bt);var is={2:"touch",3:"pen",4:"mouse"};kr.prototype.h=function(){kr.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var cr="closure_listenable_"+(1e6*Math.random()|0),ln=0;function Ui(i,e,t,o,l){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=l,this.key=++ln,this.ba=this.ea=!1}function Qr(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function Tr(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function Ar(i){const e={};for(const t in i)e[t]=i[t];return e}const Tn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yn(i,e){let t,o;for(let l=1;l<arguments.length;l++){for(t in o=arguments[l],o)i[t]=o[t];for(let p=0;p<Tn.length;p++)t=Tn[p],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function dr(i){this.src=i,this.g={},this.h=0}function un(i,e){var t=e.type;if(t in i.g){var p,o=i.g[t],l=Ct(o,e);(p=0<=l)&&Array.prototype.splice.call(o,l,1),p&&(Qr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function en(i,e,t,o){for(var l=0;l<i.length;++l){var p=i[l];if(!p.ba&&p.listener==e&&p.capture==!!t&&p.ha==o)return l}return-1}dr.prototype.add=function(i,e,t,o,l){var p=i.toString();(i=this.g[p])||(i=this.g[p]=[],this.h++);var C=en(i,e,o,l);return-1<C?(e=i[C],t||(e.ea=!1)):((e=new Ui(e,this.src,p,!!o,l)).ea=t,i.push(e)),e};var Qn="closure_lm_"+(1e6*Math.random()|0),yi={};function Ur(i,e,t,o,l){if(o&&o.once)return ci(i,e,t,o,l);if(Array.isArray(e)){for(var p=0;p<e.length;p++)Ur(i,e[p],t,o,l);return null}return t=Jr(t),i&&i[cr]?i.N(e,t,Ne(o)?!!o.capture:!!o,l):mi(i,e,t,!1,o,l)}function mi(i,e,t,o,l,p){if(!e)throw Error("Invalid event type");var C=Ne(l)?!!l.capture:!!l,N=hr(i);if(N||(i[Qn]=N=new dr(i)),(t=N.add(e,t,o,C,p)).proxy)return t;if(o=function Vr(){const e=Yi;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Je||(l=C),void 0===l&&(l=!1),i.addEventListener(e.toString(),o,l);else if(i.attachEvent)i.attachEvent(Hn(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function ci(i,e,t,o,l){if(Array.isArray(e)){for(var p=0;p<e.length;p++)ci(i,e[p],t,o,l);return null}return t=Jr(t),i&&i[cr]?i.O(e,t,Ne(o)?!!o.capture:!!o,l):mi(i,e,t,!0,o,l)}function _r(i,e,t,o,l){if(Array.isArray(e))for(var p=0;p<e.length;p++)_r(i,e[p],t,o,l);else o=Ne(o)?!!o.capture:!!o,t=Jr(t),i&&i[cr]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=en(p=i.g[e],t,o,l))&&(Qr(p[t]),Array.prototype.splice.call(p,t,1),0==p.length&&(delete i.g[e],i.h--))):i&&(i=hr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=en(e,t,o,l)),(t=-1<i?e[i]:null)&&Vi(t))}function Vi(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[cr])un(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(Hn(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=hr(e))?(un(t,i),0==t.h&&(t.src=null,e[Qn]=null)):Qr(i)}}}function Hn(i){return i in yi?yi[i]:yi[i]="on"+i}function Yi(i,e){if(i.ba)i=!0;else{e=new kr(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&Vi(i),i=t.call(o,e)}return i}function hr(i){return(i=i[Qn])instanceof dr?i:null}var Ri="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jr(i){return"function"==typeof i?i:(i[Ri]||(i[Ri]=function(e){return i.handleEvent(e)}),i[Ri])}function tt(){Fe.call(this),this.i=new dr(this),this.P=this,this.I=null}function Se(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new bt(e,i);else if(e instanceof bt)e.target=e.target||i;else{var l=e;Yn(e=new bt(o,i),l)}if(l=!0,t)for(var p=t.length-1;0<=p;p--){var C=e.g=t[p];l=Oe(C,o,!0,e)&&l}if(l=Oe(C=e.g=i,o,!0,e)&&l,l=Oe(C,o,!1,e)&&l,t)for(p=0;p<t.length;p++)l=Oe(C=e.g=t[p],o,!1,e)&&l}function Oe(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var l=!0,p=0;p<e.length;++p){var C=e[p];if(C&&!C.ba&&C.capture==t){var N=C.listener,z=C.ha||C.src;C.ea&&un(i.i,C),l=!1!==N.call(z,o)&&l}}return l&&!o.defaultPrevented}ke(tt,Fe),tt.prototype[cr]=!0,tt.prototype.removeEventListener=function(i,e,t,o){_r(this,i,e,t,o)},tt.prototype.M=function(){if(tt.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)Qr(t[o]);delete i.g[e],i.h--}}this.I=null},tt.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},tt.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Ot=q.JSON.stringify;function pe(){var i=he;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var zt,Te=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new et,i=>i.reset());class et{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Le(i){q.setTimeout(()=>{throw i},0)}function Rt(i,e){zt||function Re(){var i=q.Promise.resolve(void 0);zt=function(){i.then(Pe)}}(),Ae||(zt(),Ae=!0),he.add(i,e)}var Ae=!1,he=new class ve{constructor(){this.h=this.g=null}add(e,t){const o=Te.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Pe(){for(var i;i=pe();){try{i.h.call(i.g)}catch(t){Le(t)}var e=Te;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Ae=!1}function Ge(i,e){tt.call(this),this.h=i||1,this.g=e||q,this.j=Ye(this.lb,this),this.l=Date.now()}function Ft(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function rn(i,e,t){if("function"==typeof i)t&&(i=Ye(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ye(i.handleEvent,i)}return 2147483647<Number(e)?-1:q.setTimeout(i,e||0)}function tr(i){i.g=rn(()=>{i.g=null,i.i&&(i.i=!1,tr(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}ke(Ge,tt),(K=Ge.prototype).ca=!1,K.R=null,K.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Se(this,"tick"),this.ca&&(Ft(this),this.start()))}},K.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},K.M=function(){Ge.X.M.call(this),Ft(this),delete this.g};class Ir extends Fe{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tr(this)}M(){super.M(),this.g&&(q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ti(i){Fe.call(this),this.h=i,this.g={}}ke(Ti,Fe);var ht=[];function rt(i,e,t,o){Array.isArray(t)||(t&&(ht[0]=t.toString()),t=ht);for(var l=0;l<t.length;l++){var p=Ur(e,t[l],o||i.handleEvent,!1,i.h||i);if(!p)break;i.g[p.key]=p}}function xt(i){Tr(i.g,function(e,t){this.g.hasOwnProperty(t)&&Vi(e)},i),i.g={}}function Zt(){this.g=!0}function cn(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function nr(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var l=o[1];if(Array.isArray(l)&&!(1>l.length)){var p=l[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var C=1;C<l.length;C++)l[C]=""}}}return Ot(t)}catch{return e}}(i,t)+(o?" "+o:"")})}Ti.prototype.M=function(){Ti.X.M.call(this),xt(this)},Ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zt.prototype.Aa=function(){this.g=!1},Zt.prototype.info=function(){};var ei={},zr=null;function xs(){return zr=zr||new tt}function Ts(i){bt.call(this,ei.Pa,i)}function _i(i){const e=xs();Se(e,new Ts(e))}function Kr(i,e){bt.call(this,ei.STAT_EVENT,i),this.stat=e}function kt(i){const e=xs();Se(e,new Kr(e,i))}function xn(i,e){bt.call(this,ei.Qa,i),this.size=e}function fn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return q.setTimeout(function(){i()},e)}ei.Pa="serverreachability",ke(Ts,bt),ei.STAT_EVENT="statevent",ke(Kr,bt),ei.Qa="timingevent",ke(xn,bt);var Sn={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Cn={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function vr(){}function Mr(){}vr.prototype.h=null;var ar,Qi={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function si(){bt.call(this,"d")}function An(){bt.call(this,"c")}function kn(){}function Br(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new Ti(this),this.O=Ee,this.T=new Ge(i=vn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ys}function Ys(){this.i=null,this.g="",this.h=!1}ke(si,bt),ke(An,bt),ke(kn,vr),kn.prototype.g=function(){return new XMLHttpRequest},kn.prototype.i=function(){return{}},ar=new kn;var Ee=45e3,it={},ze={};function gt(i,e,t){i.K=1,i.v=io(sr(e)),i.s=t,i.P=!0,$t(i,null)}function $t(i,e){i.F=Date.now(),mr(i),i.A=sr(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),jr(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Ys,i.g=Ds(i.l,t?e:null,!i.s),0<i.N&&(i.L=new Ir(Ye(i.La,i,i.g),i.N)),rt(i.S,i.g,"readystatechange",i.ib),e=i.H?Ar(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),_i(),function Rn(i,e,t,o,l,p){i.info(function(){if(i.g)if(p)for(var C="",N=p.split("&"),z=0;z<N.length;z++){var J=N[z].split("=");if(1<J.length){var ye=J[0];J=J[1];var Me=ye.split("_");C=2<=Me.length&&"type"==Me[1]?C+(ye+"=")+J+"&":C+(ye+"=redacted&")}}else C=null;else C=p;return"XMLHTTP REQ ("+o+") [attempt "+l+"]: "+e+"\n"+t+"\n"+C})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Kt(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function mn(i,e,t){let l,o=!0;for(;!i.I&&i.C<t.length;){if(l=Un(i,t),l==ze){4==e&&(i.o=4,kt(14),o=!1),cn(i.j,i.m,null,"[Incomplete Response]");break}if(l==it){i.o=4,kt(15),cn(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}cn(i.j,i.m,l,null),qr(i,l)}Kt(i)&&l!=ze&&l!=it&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,kt(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),zo(e),e.K=!0,kt(11))):(cn(i.j,i.m,t,"[Invalid Chunked Response]"),Si(i),Pr(i))}function Un(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?ze:(t=Number(e.substring(t,o)),isNaN(t)?it:(o+=1)+t>e.length?ze:(e=e.substr(o,t),i.C=o+t,e))}function mr(i){i.V=Date.now()+i.O,di(i,i.O)}function di(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=fn(Ye(i.gb,i),e)}function fr(i){i.B&&(q.clearTimeout(i.B),i.B=null)}function Pr(i){0==i.l.G||i.I||hi(i.l,i)}function Si(i){fr(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Ft(i.T),xt(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function qr(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Pn(t.h,i)))if(!i.J&&Pn(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var l=o;if(0==l[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;_o(t),mt(t)}Wo(t),kt(18)}}else t.Ba=l[1],0<t.Ba-t.T&&37500>l[2]&&t.L&&0==t.A&&!t.v&&(t.v=fn(Ye(t.cb,t),6e3));if(1>=bs(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ai(t,11)}else if((i.J||t.g==i)&&_o(t),!Be(e))for(l=t.Fa.g.parse(e),e=0;e<l.length;e++){let J=l[e];if(t.T=J[0],J=J[1],2==t.G)if("c"==J[0]){t.I=J[1],t.ka=J[2];const ye=J[3];null!=ye&&(t.ma=ye,t.j.info("VER="+t.ma));const Me=J[4];null!=Me&&(t.Ca=Me,t.j.info("SVER="+t.Ca));const at=J[5];null!=at&&"number"==typeof at&&0<at&&(t.J=o=1.5*at,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const Mt=i.g;if(Mt){const jt=Mt.g?Mt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jt){var p=o.h;p.g||-1==jt.indexOf("spdy")&&-1==jt.indexOf("quic")&&-1==jt.indexOf("h2")||(p.j=p.l,p.g=new Set,p.h&&(So(p,p.h),p.h=null))}if(o.D){const Dn=Mt.g?Mt.g.getResponseHeader("X-HTTP-Session-Id"):null;Dn&&(o.za=Dn,qn(o.F,o.D,Dn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var C=i;if((o=t).sa=bo(o,o.H?o.ka:null,o.V),C.J){vs(o.h,C);var N=C,z=o.J;z&&N.setTimeout(z),N.B&&(fr(N),mr(N)),o.g=C}else fs(o);0<t.i.length&&Go(t)}else"stop"!=J[0]&&"close"!=J[0]||ai(t,7);else 3==t.G&&("stop"==J[0]||"close"==J[0]?"stop"==J[0]?ai(t,7):Zr(t):"noop"!=J[0]&&t.l&&t.l.wa(J),t.A=0)}_i()}catch{}}function yn(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ge(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function vi(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(ge(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function Ca(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ge(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),l=o.length,p=0;p<l;p++)e.call(void 0,o[p],t&&t[p],i)}(K=Br.prototype).setTimeout=function(i){this.O=i},K.ib=function(i){i=i.target;const e=this.L;e&&3==G(i)?e.l():this.La(i)},K.La=function(i){try{if(i==this.g)e:{const ye=G(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ye)&&(3!=ye||vn||this.g&&(this.h.h||this.g.fa()||$(this.g)))){this.I||4!=ye||7==e||_i(),fr(this);var t=this.g.aa();this.Y=t;t:if(Kt(this)){var o=$(this.g);i="";var l=o.length,p=4==G(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Si(this),Pr(this);var C="";break t}this.h.i=new q.TextDecoder}for(e=0;e<l;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:p&&e==l-1});o.splice(0,l),this.h.g+=i,this.C=0,C=this.h.g}else C=this.g.fa();if(this.i=200==t,function Gn(i,e,t,o,l,p,C){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+l+"]: "+e+"\n"+t+"\n"+p+" "+C})}(this.j,this.u,this.A,this.m,this.U,ye,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var N,z=this.g;if((N=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Be(N)){var J=N;break t}}J=null}if(!(t=J)){this.i=!1,this.o=3,kt(12),Si(this),Pr(this);break e}cn(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,qr(this,t)}this.P?(mn(this,ye,C),vn&&this.i&&3==ye&&(rt(this.S,this.T,"tick",this.hb),this.T.start())):(cn(this.j,this.m,C,null),qr(this,C)),4==ye&&Si(this),this.i&&!this.I&&(4==ye?hi(this.l,this):(this.i=!1,mr(this)))}else 400==t&&0<C.indexOf("Unknown SID")?(this.o=3,kt(12)):(this.o=0,kt(13)),Si(this),Pr(this)}}}catch{}},K.hb=function(){if(this.g){var i=G(this.g),e=this.g.fa();this.C<e.length&&(fr(this),mn(this,i,e),this.i&&4!=i&&mr(this))}},K.cancel=function(){this.I=!0,Si(this)},K.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function gr(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(_i(),kt(17)),Si(this),this.o=2,Pr(this)):di(this,this.V-i)};var Ss=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ds(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof ds){this.h=void 0!==e?e:i.h,Ns(this,i.j),this.s=i.s,this.g=i.g,bi(this,i.m),this.l=i.l,e=i.i;var t=new go;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),_s(this,t),this.o=i.o}else i&&(t=String(i).match(Ss))?(this.h=!!e,Ns(this,t[1]||"",!0),this.s=Ls(t[2]||""),this.g=Ls(t[3]||"",!0),bi(this,t[4]),this.l=Ls(t[5]||"",!0),_s(this,t[6]||"",!0),this.o=Ls(t[7]||"")):(this.h=!!e,this.i=new go(null,this.h))}function sr(i){return new ds(i)}function Ns(i,e,t){i.j=t?Ls(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function bi(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function _s(i,e,t){e instanceof go?(i.i=e,function Bo(i,e){e&&!i.j&&(ss(i),i.i=null,i.g.forEach(function(t,o){var l=o.toLowerCase();o!=l&&(Bi(this,o),jr(this,l,t))},i)),i.j=e}(i.i,i.h)):(t||(e=so(e,Fs)),i.i=new go(e,i.h))}function qn(i,e,t){i.i.set(e,t)}function io(i){return qn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ls(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function so(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Al),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Al(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}ds.prototype.toString=function(){var i=[],e=this.j;e&&i.push(so(e,Vo,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(so(e,Vo,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(so(t,"/"==t.charAt(0)?To:wo,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",so(t,po)),i.join("")};var Vo=/[#\/\?@]/g,wo=/[#\?:]/g,To=/[#\?]/g,Fs=/[#\?@]/g,po=/#/g;function go(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function ss(i){i.g||(i.g=new Map,i.h=0,i.i&&function Qs(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),l=null;if(0<=o){var p=i[t].substring(0,o);l=i[t].substring(o+1)}else p=i[t];e(p,l?decodeURIComponent(l.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Bi(i,e){ss(i),e=mo(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function oo(i,e){return ss(i),e=mo(i,e),i.g.has(e)}function jr(i,e,t){Bi(i,e),0<t.length&&(i.i=null,i.g.set(mo(i,e),Ze(t)),i.h+=t.length)}function mo(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ks(i){this.l=i||ua,i=q.PerformanceNavigationTiming?0<(i=q.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(q.g&&q.g.Ga&&q.g.Ga()&&q.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(K=go.prototype).add=function(i,e){ss(this),this.i=null,i=mo(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},K.forEach=function(i,e){ss(this),this.g.forEach(function(t,o){t.forEach(function(l){i.call(e,l,o,this)},this)},this)},K.oa=function(){ss(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const l=i[o];for(let p=0;p<l.length;p++)t.push(e[o])}return t},K.W=function(i){ss(this);let e=[];if("string"==typeof i)oo(this,i)&&(e=e.concat(this.g.get(mo(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},K.set=function(i,e){return ss(this),this.i=null,oo(this,i=mo(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},K.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},K.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const p=encodeURIComponent(String(o)),C=this.W(o);for(o=0;o<C.length;o++){var l=p;""!==C[o]&&(l+="="+encodeURIComponent(String(C[o]))),i.push(l)}}return this.i=i.join("&")};var ua=10;function os(i){return!!i.h||!!i.g&&i.g.size>=i.j}function bs(i){return i.h?1:i.g?i.g.size:0}function Pn(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function So(i,e){i.g?i.g.add(e):i.h=e}function vs(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function wa(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Ze(i.i)}function Hr(){}function xi(){this.g=new Hr}function ca(i,e,t){const o=t||"";try{yn(i,function(l,p){let C=l;Ne(l)&&(C=Ot(l)),e.push(o+p+"="+encodeURIComponent(C))})}catch(l){throw e.push(o+"type="+encodeURIComponent("_badmap")),l}}function yo(i,e,t,o,l){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,l(o)}catch{}}function hs(i){this.l=i.ac||null,this.j=i.jb||!1}function Lr(i,e){tt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=qi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ks.prototype.cancel=function(){if(this.i=wa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Hr.prototype.stringify=function(i){return q.JSON.stringify(i,void 0)},Hr.prototype.parse=function(i){return q.JSON.parse(i,void 0)},ke(hs,vr),hs.prototype.g=function(){return new Lr(this.l,this.j)},hs.prototype.i=function(i){return function(){return i}}({}),ke(Lr,tt);var qi=0;function da(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Di(i){i.readyState=4,i.l=null,i.j=null,i.A=null,as(i)}function as(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(K=Lr.prototype).open=function(i,e){if(this.readyState!=qi)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,as(this)},K.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||q).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},K.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Di(this)),this.readyState=qi},K.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,as(this)),this.g&&(this.readyState=3,as(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof q.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;da(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},K.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Di(this):as(this),3==this.readyState&&da(this)}},K.Va=function(i){this.g&&(this.response=this.responseText=i,Di(this))},K.Ua=function(i){this.g&&(this.response=i,Di(this))},K.ga=function(){this.g&&Di(this)},K.setRequestHeader=function(i,e){this.v.append(i,e)},K.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},K.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Lr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var jo=q.JSON.parse;function Sr(i){tt.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Zi,this.K=this.L=!1}ke(Sr,tt);var Zi="",Ho=/^https?$/i,Es=["POST","PUT"];function ao(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Ta(i),Nn(i)}function Ta(i){i.D||(i.D=!0,Se(i,"complete"),Se(i,"error"))}function ha(i){if(i.h&&typeof se<"u"&&(!i.C[1]||4!=G(i)||2!=i.aa()))if(i.v&&4==G(i))rn(i.Ha,0,i);else if(Se(i,"readystatechange"),4==G(i)){i.h=!1;try{const N=i.aa();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===N){var l=String(i.H).match(Ss)[1]||null;if(!l&&q.self&&q.self.location){var p=q.self.location.protocol;l=p.substr(0,p.length-1)}o=!Ho.test(l?l.toLowerCase():"")}t=o}if(t)Se(i,"complete"),Se(i,"success");else{i.m=6;try{var C=2<G(i)?i.g.statusText:""}catch{C=""}i.j=C+" ["+i.aa()+"]",Ta(i)}}finally{Nn(i)}}}function Nn(i,e){if(i.g){$o(i);const t=i.g,o=i.C[0]?de:null;i.g=null,i.C=null,e||Se(i,"ready");try{t.onreadystatechange=o}catch{}}}function $o(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(q.clearTimeout(i.A),i.A=null)}function G(i){return i.g?i.g.readyState:0}function $(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Zi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function U(i){let e="";return Tr(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function ue(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=U(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):qn(i,e,t))}function ot(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Qt(i){this.Ca=0,this.i=[],this.j=new Zt,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ot("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ot("baseRetryDelayMs",5e3,i),this.bb=ot("retryDelaySeedMs",1e4,i),this.$a=ot("forwardChannelMaxRetries",2,i),this.ta=ot("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new ks(i&&i.concurrentRequestLimit),this.Fa=new xi,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Zr(i){if(rr(i),3==i.G){var e=i.U++,t=sr(i.F);qn(t,"SID",i.I),qn(t,"RID",e),qn(t,"TYPE","terminate"),ka(i,t),(e=new Br(i,i.j,e,void 0)).K=2,e.v=io(sr(t)),t=!1,q.navigator&&q.navigator.sendBeacon&&(t=q.navigator.sendBeacon(e.v.toString(),"")),!t&&q.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ds(e.l,null),e.g.da(e.v)),e.F=Date.now(),mr(e)}Sa(i)}function mt(i){i.g&&(zo(i),i.g.cancel(),i.g=null)}function rr(i){mt(i),i.u&&(q.clearTimeout(i.u),i.u=null),_o(i),i.h.cancel(),i.m&&("number"==typeof i.m&&q.clearTimeout(i.m),i.m=null)}function Go(i){os(i.h)||i.m||(i.m=!0,Rt(i.Ja,i),i.C=0)}function Ni(i,e){var t;t=e?e.m:i.U++;const o=sr(i.F);qn(o,"SID",i.I),qn(o,"RID",t),qn(o,"AID",i.T),ka(i,o),i.o&&i.s&&ue(o,i.o,i.s),t=new Br(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=Xi(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),So(i.h,t),gt(t,o,e)}function ka(i,e){i.ia&&Tr(i.ia,function(t,o){qn(e,o,t)}),i.l&&yn({},function(t,o){qn(e,o,t)})}function Xi(i,e,t){t=Math.min(i.i.length,t);var o=i.l?Ye(i.l.Ra,i.l,i):null;e:{var l=i.i;let p=-1;for(;;){const C=["count="+t];-1==p?0<t?(p=l[0].h,C.push("ofs="+p)):p=0:C.push("ofs="+p);let N=!0;for(let z=0;z<t;z++){let J=l[z].h;const ye=l[z].g;if(J-=p,0>J)p=Math.max(0,l[z].h-100),N=!1;else try{ca(ye,C,"req"+J+"_")}catch{o&&o(ye)}}if(N){o=C.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function fs(i){i.g||i.u||(i.Z=1,Rt(i.Ia,i),i.A=0)}function Wo(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=fn(Ye(i.Ia,i),oi(i,i.A)),i.A++,0))}function zo(i){null!=i.B&&(q.clearTimeout(i.B),i.B=null)}function Ko(i){i.g=new Br(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=sr(i.sa);qn(e,"RID","rpc"),qn(e,"SID",i.I),qn(e,"CI",i.L?"0":"1"),qn(e,"AID",i.T),qn(e,"TYPE","xmlhttp"),ka(i,e),i.o&&i.s&&ue(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=io(sr(e)),t.s=null,t.P=!0,$t(t,i)}function _o(i){null!=i.v&&(q.clearTimeout(i.v),i.v=null)}function hi(i,e){var t=null;if(i.g==e){_o(i),zo(i),i.g=null;var o=2}else{if(!Pn(i.h,e))return;t=e.D,vs(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var l=i.C;Se(o=xs(),new xn(o,t)),Go(i)}else fs(i);else if(3==(l=e.o)||0==l&&0<i.pa||!(1==o&&function nu(i,e){return!(bs(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=fn(Ye(i.Ja,i,e),oi(i,i.C)),i.C++,0)))}(i,e)||2==o&&Wo(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),l){case 1:ai(i,5);break;case 4:ai(i,10);break;case 3:ai(i,6);break;default:ai(i,2)}}function oi(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function ai(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=Ye(i.kb,i);t||(t=new ds("//www.google.com/images/cleardot.gif"),q.location&&"http"==q.location.protocol||Ns(t,"https"),io(t)),function Ei(i,e){const t=new Zt;if(q.Image){const o=new Image;o.onload=qe(yo,t,o,"TestLoadImage: loaded",!0,e),o.onerror=qe(yo,t,o,"TestLoadImage: error",!1,e),o.onabort=qe(yo,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=qe(yo,t,o,"TestLoadImage: timeout",!1,e),q.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else kt(2);i.G=0,i.l&&i.l.va(e),Sa(i),rr(i)}function Sa(i){if(i.G=0,i.la=[],i.l){const e=wa(i.h);(0!=e.length||0!=i.i.length)&&(Nt(i.la,e),Nt(i.la,i.i),i.h.i.length=0,Ze(i.i),i.i.length=0),i.l.ua()}}function bo(i,e,t){var o=t instanceof ds?sr(t):new ds(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),bi(o,o.m);else{var l=q.location;o=l.protocol,e=e?e+"."+l.hostname:l.hostname,l=+l.port;var p=new ds(null,void 0);o&&Ns(p,o),e&&(p.g=e),l&&bi(p,l),t&&(p.l=t),o=p}return e=i.za,(t=i.D)&&e&&qn(o,t,e),qn(o,"VER",i.ma),ka(i,o),o}function Ds(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sr(t&&i.Da&&!i.ra?new hs({jb:!0}):i.ra)).Ka(i.H),e}function qa(){}function lo(){if(Yt&&!(10<=Number(Kn)))throw Error("Environmental error: no available transport.")}function ji(i,e){tt.call(this),this.g=new Qt(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!Be(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Be(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new ls(this)}function Yo(i){si.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Us(){An.call(this),this.status=1}function ls(i){this.g=i}(K=Sr.prototype).Ka=function(i){this.L=i},K.da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ar.g(),this.C=function Xn(i){return i.h||(i.h=i.i())}(this.u?this.u:ar),this.g.onreadystatechange=Ye(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(p){return void ao(this,p)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var l in o)t.set(l,o[l]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const p of o.keys())t.set(p,o.get(p))}o=Array.from(t.keys()).find(p=>"content-type"==p.toLowerCase()),l=q.FormData&&i instanceof q.FormData,!(0<=Ct(Es,e))||o||l||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[p,C]of t)this.g.setRequestHeader(p,C);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{$o(this),0<this.B&&((this.K=function Qa(i){return Yt&&function yt(){return function ir(i){var e=Ue;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=ct(String(hn)).split("."),t=ct("9").split("."),o=Math.max(e.length,t.length);for(let C=0;0==i&&C<o;C++){var l=e[C]||"",p=t[C]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],0==l[0].length&&0==p[0].length)break;i=nt(0==l[1].length?0:parseInt(l[1],10),0==p[1].length?0:parseInt(p[1],10))||nt(0==l[2].length,0==p[2].length)||nt(l[2],p[2]),l=l[3],p=p[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ye(this.qa,this)):this.A=rn(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(p){ao(this,p)}},K.qa=function(){typeof se<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Se(this,"timeout"),this.abort(8))},K.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Se(this,"complete"),Se(this,"abort"),Nn(this))},K.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Nn(this,!0)),Sr.X.M.call(this)},K.Ha=function(){this.s||(this.F||this.v||this.l?ha(this):this.fb())},K.fb=function(){ha(this)},K.aa=function(){try{return 2<G(this)?this.g.status:-1}catch{return-1}},K.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},K.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),jo(e)}},K.Ea=function(){return this.m},K.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(K=Qt.prototype).ma=8,K.G=1,K.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const l=new Br(this,this.j,i,void 0);let p=this.s;if(this.S&&(p?(p=Ar(p),Yn(p,this.S)):p=this.S),null!==this.o||this.N||(l.H=p,p=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Xi(this,l,e),qn(t=sr(this.F),"RID",i),qn(t,"CVER",22),this.D&&qn(t,"X-HTTP-Session-Id",this.D),ka(this,t),p&&(this.N?e="headers="+encodeURIComponent(String(U(p)))+"&"+e:this.o&&ue(t,this.o,p)),So(this.h,l),this.Ya&&qn(t,"TYPE","init"),this.O?(qn(t,"$req",e),qn(t,"SID","null"),l.Z=!0,gt(l,t,null)):gt(l,t,e),this.G=2}}else 3==this.G&&(i?Ni(this,i):0==this.i.length||os(this.h)||Ni(this))},K.Ia=function(){if(this.u=null,Ko(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=fn(Ye(this.eb,this),i)}},K.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,kt(10),mt(this),Ko(this))},K.cb=function(){null!=this.v&&(this.v=null,mt(this),Wo(this),kt(19))},K.kb=function(i){i?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))},(K=qa.prototype).xa=function(){},K.wa=function(){},K.va=function(){},K.ua=function(){},K.Ra=function(){},lo.prototype.g=function(i,e){return new ji(i,e)},ke(ji,tt),ji.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;kt(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=bo(i,null,i.V),Go(i)},ji.prototype.close=function(){Zr(this.g)},ji.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Ot(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&Go(e)},ji.prototype.M=function(){this.g.l=null,delete this.j,Zr(this.g),delete this.g,ji.X.M.call(this)},ke(Yo,si),ke(Us,An),ke(ls,qa),ls.prototype.xa=function(){Se(this.g,"a")},ls.prototype.wa=function(i){Se(this.g,new Yo(i))},ls.prototype.va=function(i){Se(this.g,new Us)},ls.prototype.ua=function(){Se(this.g,"b")},lo.prototype.createWebChannel=lo.prototype.g,ji.prototype.send=ji.prototype.u,ji.prototype.open=ji.prototype.m,ji.prototype.close=ji.prototype.close,Sn.NO_ERROR=0,Sn.TIMEOUT=8,Sn.HTTP_ERROR=6,Cn.COMPLETE="complete",Mr.EventType=Qi,Qi.OPEN="a",Qi.CLOSE="b",Qi.ERROR="c",Qi.MESSAGE="d",tt.prototype.listen=tt.prototype.N,Sr.prototype.listenOnce=Sr.prototype.O,Sr.prototype.getLastError=Sr.prototype.Oa,Sr.prototype.getLastErrorCode=Sr.prototype.Ea,Sr.prototype.getStatus=Sr.prototype.aa,Sr.prototype.getResponseJson=Sr.prototype.Sa,Sr.prototype.getResponseText=Sr.prototype.fa,Sr.prototype.send=Sr.prototype.da,Sr.prototype.setWithCredentials=Sr.prototype.Ka;var Ao=ee.createWebChannelTransport=function(){return new lo},Za=ee.getStatEventTarget=function(){return xs()},Ml=ee.ErrorCode=Sn,li=ee.EventType=Cn,Zs=ee.Event=ei,ba=ee.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},fa=ee.FetchXmlHttpFactory=hs,Aa=ee.WebChannel=Mr,cl=ee.XhrIo=Sr;const Mo="@firebase/firestore";class Ji{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ji.UNAUTHENTICATED=new Ji(null),Ji.GOOGLE_CREDENTIALS=new Ji("google-credentials-uid"),Ji.FIRST_PARTY=new Ji("first-party-uid"),Ji.MOCK_USER=new Ji("mock-user");let Xs="9.17.1";const Ii=new H.Yd("@firebase/firestore");function ps(){return Ii.logLevel}function Ut(i,...e){if(Ii.logLevel<=H.in.DEBUG){const t=e.map(Pl);Ii.debug(`Firestore (${Xs}): ${i}`,...t)}}function Li(i,...e){if(Ii.logLevel<=H.in.ERROR){const t=e.map(Pl);Ii.error(`Firestore (${Xs}): ${i}`,...t)}}function Po(i,...e){if(Ii.logLevel<=H.in.WARN){const t=e.map(Pl);Ii.warn(`Firestore (${Xs}): ${i}`,...t)}}function Pl(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function pn(i="Unexpected state"){const e=`FIRESTORE (${Xs}) INTERNAL ASSERTION FAILED: `+i;throw Li(e),new Error(e)}function In(i,e){i||pn()}function nn(i,e){return i}const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class P extends X.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Q{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class V{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ae{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ji.UNAUTHENTICATED))}shutdown(){}}class Ce{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ft{constructor(e){this.t=e,this.currentUser=Ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let l=this.i;const p=J=>this.i!==l?(l=this.i,t(J)):Promise.resolve();let C=new Q;this.o=()=>{this.i++,this.currentUser=this.u(),C.resolve(),C=new Q,e.enqueueRetryable(()=>p(this.currentUser))};const N=()=>{const J=C;e.enqueueRetryable((0,f.Z)(function*(){yield J.promise,yield p(o.currentUser)}))},z=J=>{Ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=J,this.auth.addAuthTokenListener(this.o),N()};this.t.onInit(J=>z(J)),setTimeout(()=>{if(!this.auth){const J=this.t.getImmediate({optional:!0});J?z(J):(Ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),C.resolve(),C=new Q)}},0),N()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(Ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(In("string"==typeof o.accessToken),new V(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return In(null===e||"string"==typeof e),new Ji(e)}}class vt{constructor(e,t,o,l){this.h=e,this.l=t,this.m=o,this.g=l,this.type="FirstParty",this.user=Ji.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(In(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class dn{constructor(e,t,o,l){this.h=e,this.l=t,this.m=o,this.g=l}getToken(){return Promise.resolve(new vt(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ji.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xr{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=p=>{null!=p.error&&Ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const C=p.token!==this.A;return this.A=p.token,Ut("FirebaseAppCheckTokenProvider",`Received ${C?"new":"existing"} token.`),C?t(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>o(p))};const l=p=>{Ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.T.onInit(p=>l(p)),setTimeout(()=>{if(!this.appCheck){const p=this.T.getImmediate({optional:!0});p?l(p):Ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(In("string"==typeof t.token),this.A=t.token,new Dr(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Bn(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class or{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const l=Bn(40);for(let p=0;p<l.length;++p)o.length<20&&l[p]<t&&(o+=e.charAt(l[p]%e.length))}return o}}function Xt(i,e){return i<e?-1:i>e?1:0}function ti(i,e,t){return i.length===e.length&&i.every((o,l)=>t(o,e[l]))}function Is(i){return i+"\0"}class Er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Er.fromMillis(Date.now())}static fromDate(e){return Er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Er(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class gn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new gn(e)}static min(){return new gn(new Er(0,0))}static max(){return new gn(new Er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class es{constructor(e,t,o){void 0===t?t=0:t>e.length&&pn(),void 0===o?o=e.length-t:o>e.length-t&&pn(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===es.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let l=0;l<o;l++){const p=e.get(l),C=t.get(l);if(p<C)return-1;if(p>C)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wn extends es{construct(e,t,o){return new Wn(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new P(dt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(l=>l.length>0))}return new Wn(t)}static emptyPath(){return new Wn([])}}const Oo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Or extends es{construct(e,t,o){return new Or(e,t,o)}static isValidIdentifier(e){return Oo.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Or(["__name__"])}static fromServerFormat(e){const t=[];let o="",l=0;const p=()=>{if(0===o.length)throw new P(dt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let C=!1;for(;l<e.length;){const N=e[l];if("\\"===N){if(l+1===e.length)throw new P(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const z=e[l+1];if("\\"!==z&&"."!==z&&"`"!==z)throw new P(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=z,l+=2}else"`"===N?(C=!C,l++):"."!==N||C?(o+=N,l++):(p(),l++)}if(p(),C)throw new P(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Or(t)}static emptyPath(){return new Or([])}}class qt{constructor(e){this.path=e}static fromPath(e){return new qt(Wn.fromString(e))}static fromName(e){return new qt(Wn.fromString(e).popFirst(5))}static empty(){return new qt(Wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qt(new Wn(e.slice()))}}class uo{constructor(e,t,o,l){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=l}}function pa(i){return i.fields.find(e=>2===e.kind)}function Qo(i){return i.fields.filter(e=>2!==e.kind)}uo.UNKNOWN_ID=-1;class Hi{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ro{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ro(0,Vs.min())}}function fl(i){return new Vs(i.readTime,i.key,-1)}class Vs{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Vs(gn.min(),qt.empty(),-1)}static max(){return new Vs(gn.max(),qt.empty(),-1)}}function Ol(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=qt.comparator(i.documentKey,e.documentKey),0!==t?t:Xt(i.largestBatchId,e.largestBatchId))}const ru="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xo(i){return Xa.apply(this,arguments)}function Xa(){return Xa=(0,f.Z)(function*(i){if(i.code!==dt.FAILED_PRECONDITION||i.message!==ru)throw i;Ut("LocalStore","Unexpectedly lost primary lease")}),Xa.apply(this,arguments)}class st{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new st((o,l)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(o,l)},this.catchCallback=p=>{this.wrapFailure(t,p).next(o,l)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof st?t:st.resolve(t)}catch(t){return st.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):st.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):st.reject(t)}static resolve(e){return new st((t,o)=>{t(e)})}static reject(e){return new st((t,o)=>{o(e)})}static waitFor(e){return new st((t,o)=>{let l=0,p=0,C=!1;e.forEach(N=>{++l,N.next(()=>{++p,C&&p===l&&t()},z=>o(z))}),C=!0,p===l&&t()})}static or(e){let t=st.resolve(!1);for(const o of e)t=t.next(l=>l?st.resolve(l):o());return t}static forEach(e,t){const o=[];return e.forEach((l,p)=>{o.push(t.call(this,l,p))}),this.waitFor(o)}static mapArray(e,t){return new st((o,l)=>{const p=e.length,C=new Array(p);let N=0;for(let z=0;z<p;z++){const J=z;t(e[J]).next(ye=>{C[J]=ye,++N,N===p&&o(C)},ye=>l(ye))}})}static doWhile(e,t){return new st((o,l)=>{const p=()=>{!0===e()?t().next(()=>{p()},l):o()};p()})}}class ga{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Q,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Js(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const l=su(o.target.error);this.P.reject(new Js(e,l))}}static open(e,t,o,l){try{return new ga(t,e.transaction(l,o))}catch(p){throw new Js(t,p)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ut("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pl(t)}}class Cs{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===Cs.D((0,X.z$)())&&Li("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ut("SimpleDb","Removing database:",e),No(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,X.hl)())return!1;if(Cs.N())return!0;const e=(0,X.z$)(),t=Cs.D(e),o=0<t&&t<10,l=Cs.k(e),p=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||p)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,f.Z)(function*(){return t.db||(Ut("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,l)=>{const p=indexedDB.open(t.name,t.version);p.onsuccess=C=>{o(C.target.result)},p.onblocked=()=>{l(new Js(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=C=>{const N=C.target.error;l("VersionError"===N.name?new P(dt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===N.name?new P(dt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+N):new Js(e,N))},p.onupgradeneeded=C=>{Ut("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',C.oldVersion),t.S.$(C.target.result,p.transaction,C.oldVersion,t.version).next(()=>{Ut("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,l){var p=this;return(0,f.Z)(function*(){const C="readonly"===t;let N=0;for(;;){++N;try{p.db=yield p.F(e);const z=ga.open(p.db,e,C?"readonly":"readwrite",o),J=l(z).next(ye=>(z.V(),ye)).catch(ye=>(z.abort(ye),st.reject(ye))).toPromise();return J.catch(()=>{}),yield z.v,J}catch(z){const J=z,ye="FirebaseError"!==J.name&&N<3;if(Ut("SimpleDb","Transaction failed with error:",J.message,"Retrying:",ye),p.close(),!ye)return Promise.reject(J)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Rl{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return No(this.q.delete())}}class Js extends P{constructor(e,t){super(dt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ai(i){return"IndexedDbTransactionError"===i.name}class pl{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(Ut("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Ut("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),No(o)}add(e){return Ut("SimpleDb","ADD",this.store.name,e,e),No(this.store.add(e))}get(e){return No(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ut("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ut("SimpleDb","DELETE",this.store.name,e),No(this.store.delete(e))}count(){return Ut("SimpleDb","COUNT",this.store.name),No(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const l=this.cursor(o),p=[];return this.H(l,(C,N)=>{p.push(N)}).next(()=>p)}{const l=this.store.getAll(o.range);return new st((p,C)=>{l.onerror=N=>{C(N.target.error)},l.onsuccess=N=>{p(N.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new st((l,p)=>{o.onerror=C=>{p(C.target.error)},o.onsuccess=C=>{l(C.target.result)}})}Y(e,t){Ut("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const l=this.cursor(o);return this.H(l,(p,C,N)=>N.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const l=this.cursor(o);return this.H(l,t)}tt(e){const t=this.cursor({});return new st((o,l)=>{t.onerror=p=>{const C=su(p.target.error);l(C)},t.onsuccess=p=>{const C=p.target.result;C?e(C.primaryKey,C.value).next(N=>{N?C.continue():o()}):o()}})}H(e,t){const o=[];return new st((l,p)=>{e.onerror=C=>{p(C.target.error)},e.onsuccess=C=>{const N=C.target.result;if(!N)return void l();const z=new Rl(N),J=t(N.primaryKey,N.value,z);if(J instanceof st){const ye=J.catch(Me=>(z.done(),st.reject(Me)));o.push(ye)}z.isDone?l():null===z.G?N.continue():N.continue(z.G)}}).next(()=>st.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function No(i){return new st((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const l=su(o.target.error);t(l)}})}let Ja=!1;function su(i){const e=Cs.D((0,X.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ja||(Ja=!0,setTimeout(()=>{throw o},0)),o}}return i}class el{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ut("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,f.Z)(function*(){t.task=null;try{Ut("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){Ai(o)?Ut("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield xo(o)}yield t.nt(6e4)}))}}class Va{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,f.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let l=t,p=!0;return st.doWhile(()=>!0===p&&l>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(C=>{if(null!==C&&!o.has(C))return Ut("IndexBackiller",`Processing collection: ${C}`),this.rt(e,C,l).next(N=>{l-=N,o.add(C)});p=!1})).next(()=>t-l)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(l=>this.localStore.localDocuments.getNextDocuments(e,t,l,o).next(p=>{const C=p.changes;return this.localStore.indexManager.updateIndexEntries(e,C).next(()=>this.ot(l,p)).next(N=>(Ut("IndexBackiller",`Updating offset: ${N}`),this.localStore.indexManager.updateCollectionGroup(e,t,N))).next(()=>C.size)}))}ot(e,t){let o=e;return t.changes.forEach((l,p)=>{const C=fl(p);Ol(C,o)>0&&(o=C)}),new Vs(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Bs=(()=>{class i{constructor(t,o){this.previousValue=t,o&&(o.sequenceNumberHandler=l=>this.ut(l),this.ct=l=>o.writeSequenceNumber(l))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class Kl{constructor(e,t,o,l,p,C,N,z){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=l,this.ssl=p,this.forceLongPolling=C,this.autoDetectLongPolling=N,this.useFetchStreams=z}}class Mi{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Mi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Mi&&e.projectId===this.projectId&&e.database===this.database}}function js(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function eo(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function ma(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ho(i){return null==i}function Ma(i){return 0===i&&1/i==-1/0}class As{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new As(t)}static fromUint8Array(e){const t=function(o){let l="";for(let p=0;p<o.length;++p)l+=String.fromCharCode(o[p]);return l}(e);return new As(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}As.EMPTY_BYTE_STRING=new As("");const Cr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pa(i){if(In(!!i),"string"==typeof i){let e=0;const t=Cr.exec(i);if(In(!!t),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:fi(i.seconds),nanos:fi(i.nanos)}}function fi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Oa(i){return"string"==typeof i?As.fromBase64String(i):As.fromUint8Array(i)}function Lo(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ba(i){const e=i.mapValue.fields.__previous_value__;return Lo(e)?Ba(e):e}function ja(i){const e=Pa(i.mapValue.fields.__local_write_time__.timestampValue);return new Er(e.seconds,e.nanos)}const tl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qo={nullValue:"NULL_VALUE"};function _a(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Lo(i)?4:br(i)?9007199254740991:10:pn()}function ws(i,e){if(i===e)return!0;const t=_a(i);if(t!==_a(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ja(i).isEqual(ja(e));case 3:return function(o,l){if("string"==typeof o.timestampValue&&"string"==typeof l.timestampValue&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const p=Pa(o.timestampValue),C=Pa(l.timestampValue);return p.seconds===C.seconds&&p.nanos===C.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return l=e,Oa(i.bytesValue).isEqual(Oa(l.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,l){return fi(o.geoPointValue.latitude)===fi(l.geoPointValue.latitude)&&fi(o.geoPointValue.longitude)===fi(l.geoPointValue.longitude)}(i,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return fi(o.integerValue)===fi(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const p=fi(o.doubleValue),C=fi(l.doubleValue);return p===C?Ma(p)===Ma(C):isNaN(p)&&isNaN(C)}return!1}(i,e);case 9:return ti(i.arrayValue.values||[],e.arrayValue.values||[],ws);case 10:return function(o,l){const p=o.mapValue.fields||{},C=l.mapValue.fields||{};if(js(p)!==js(C))return!1;for(const N in p)if(p.hasOwnProperty(N)&&(void 0===C[N]||!ws(p[N],C[N])))return!1;return!0}(i,e);default:return pn()}var l}function pi(i,e){return void 0!==(i.values||[]).find(t=>ws(t,e))}function A(i,e){if(i===e)return 0;const t=_a(i),o=_a(e);if(t!==o)return Xt(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xt(i.booleanValue,e.booleanValue);case 2:return function(l,p){const C=fi(l.integerValue||l.doubleValue),N=fi(p.integerValue||p.doubleValue);return C<N?-1:C>N?1:C===N?0:isNaN(C)?isNaN(N)?0:-1:1}(i,e);case 3:return O(i.timestampValue,e.timestampValue);case 4:return O(ja(i),ja(e));case 5:return Xt(i.stringValue,e.stringValue);case 6:return function(l,p){const C=Oa(l),N=Oa(p);return C.compareTo(N)}(i.bytesValue,e.bytesValue);case 7:return function(l,p){const C=l.split("/"),N=p.split("/");for(let z=0;z<C.length&&z<N.length;z++){const J=Xt(C[z],N[z]);if(0!==J)return J}return Xt(C.length,N.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,p){const C=Xt(fi(l.latitude),fi(p.latitude));return 0!==C?C:Xt(fi(l.longitude),fi(p.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(l,p){const C=l.values||[],N=p.values||[];for(let z=0;z<C.length&&z<N.length;++z){const J=A(C[z],N[z]);if(J)return J}return Xt(C.length,N.length)}(i.arrayValue,e.arrayValue);case 10:return function(l,p){if(l===tl.mapValue&&p===tl.mapValue)return 0;if(l===tl.mapValue)return 1;if(p===tl.mapValue)return-1;const C=l.fields||{},N=Object.keys(C),z=p.fields||{},J=Object.keys(z);N.sort(),J.sort();for(let ye=0;ye<N.length&&ye<J.length;++ye){const Me=Xt(N[ye],J[ye]);if(0!==Me)return Me;const at=A(C[N[ye]],z[J[ye]]);if(0!==at)return at}return Xt(N.length,J.length)}(i.mapValue,e.mapValue);default:throw pn()}}function O(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Xt(i,e);const t=Pa(i),o=Pa(e),l=Xt(t.seconds,o.seconds);return 0!==l?l:Xt(t.nanos,o.nanos)}function T(i){return F(i)}function F(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const l=Pa(o);return`time(${l.seconds},${l.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Oa(i.bytesValue).toBase64():"referenceValue"in i?qt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let l="[",p=!0;for(const C of o.values||[])p?p=!1:l+=",",l+=F(C);return l+"]"}(i.arrayValue):"mapValue"in i?function(o){const l=Object.keys(o.fields||{}).sort();let p="{",C=!0;for(const N of l)C?C=!1:p+=",",p+=`${N}:${F(o.fields[N])}`;return p+"}"}(i.mapValue):pn();var e}function W(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function oe(i){return!!i&&"integerValue"in i}function fe(i){return!!i&&"arrayValue"in i}function je(i){return!!i&&"nullValue"in i}function wt(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function sn(i){return!!i&&"mapValue"in i}function on(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return eo(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=on(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=on(i.arrayValue.values[t]);return e}return Object.assign({},i)}function br(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function $r(i){return"nullValue"in i?qo:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?W(Mi.empty(),qt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:pn()}function Hs(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?W(Mi.empty(),qt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?tl:pn()}function Fi(i,e){const t=A(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function $s(i,e){const t=A(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class ts{constructor(e,t){this.position=e,this.inclusive=t}}function Ra(i,e,t){let o=0;for(let l=0;l<i.position.length;l++){const p=e[l],C=i.position[l];if(o=p.field.isKeyField()?qt.comparator(qt.fromName(C.referenceValue),t.key):A(C,t.data.field(p.field)),"desc"===p.dir&&(o*=-1),0!==o)break}return o}function Zo(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ws(i.position[t],e.position[t]))return!1;return!0}class ml{}class Rr extends ml{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,o):new Bu(e,t,o):"array-contains"===t?new Iu(e,o):"in"===t?new $a(e,o):"not-in"===t?new Jo(e,o):"array-contains-any"===t?new Ll(e,o):new Rr(e,t,o)}static createKeyFieldInFilter(e,t,o){return"in"===t?new Yl(e,o):new Ha(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(A(t,this.value)):null!==t&&_a(this.value)===_a(t)&&this.matchesComparison(A(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ui extends ml{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new ui(e,t)}matches(e){return yl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function yl(i){return"and"===i.op}function nl(i){return"or"===i.op}function _l(i){return vl(i)&&yl(i)}function vl(i){for(const e of i.filters)if(e instanceof ui)return!1;return!0}function va(i){if(i instanceof Rr)return i.field.canonicalString()+i.op.toString()+T(i.value);if(_l(i))return i.filters.map(e=>va(e)).join(",");{const e=i.filters.map(t=>va(t)).join(",");return`${i.op}(${e})`}}function xl(i,e){return i instanceof Rr?(t=i,(o=e)instanceof Rr&&t.op===o.op&&t.field.isEqual(o.field)&&ws(t.value,o.value)):i instanceof ui?function(t,o){return o instanceof ui&&t.op===o.op&&t.filters.length===o.filters.length&&t.filters.reduce((l,p,C)=>l&&xl(p,o.filters[C]),!0)}(i,e):void pn();var t,o}function Xo(i,e){const t=i.filters.concat(e);return ui.create(t,i.op)}function Nl(i){return i instanceof Rr?`${(e=i).field.canonicalString()} ${e.op} ${T(e.value)}`:i instanceof ui?function(e){return e.op.toString()+" {"+e.getFilters().map(Nl).join(" ,")+"}"}(i):"Filter";var e}class Bu extends Rr{constructor(e,t,o){super(e,t,o),this.key=qt.fromName(o.referenceValue)}matches(e){const t=qt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Yl extends Rr{constructor(e,t){super(e,"in",t),this.keys=ou(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ha extends Rr{constructor(e,t){super(e,"not-in",t),this.keys=ou(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ou(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>qt.fromName(o.referenceValue))}class Iu extends Rr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fe(t)&&pi(t.arrayValue,this.value)}}class $a extends Rr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&pi(this.value.arrayValue,t)}}class Jo extends Rr{constructor(e,t){super(e,"not-in",t)}matches(e){if(pi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!pi(this.value.arrayValue,t)}}class Ll extends Rr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fe(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>pi(this.value.arrayValue,o))}}class rl{constructor(e,t="asc"){this.field=e,this.dir=t}}function ju(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Pi{constructor(e,t){this.comparator=e,this.root=t||ns.EMPTY}insert(e,t){return new Pi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(e){return new Pi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ns.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const l=this.comparator(e,o.key);if(0===l)return t+o.left.size;l<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new il(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new il(this.root,e,this.comparator,!1)}getReverseIterator(){return new il(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new il(this.root,e,this.comparator,!0)}}class il{constructor(e,t,o,l){this.isReverse=l,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=t?o(e.key,t):1,t&&l&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ns{constructor(e,t,o,l,p){this.key=e,this.value=t,this.color=o??ns.RED,this.left=l??ns.EMPTY,this.right=p??ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,l,p){return new ns(e??this.key,t??this.value,o??this.color,l??this.left,p??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let l=this;const p=o(e,l.key);return l=p<0?l.copy(null,null,null,l.left.insert(e,t,o),null):0===p?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,o)),l.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),0===t(e,l.key)){if(l.right.isEmpty())return ns.EMPTY;o=l.right.min(),l=l.copy(o.key,o.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pn();const e=this.left.check();if(e!==this.right.check())throw pn();return e+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw pn()}get value(){throw pn()}get color(){throw pn()}get left(){throw pn()}get right(){throw pn()}copy(i,e,t,o,l){return this}insert(i,e,t){return new ns(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gi{constructor(e){this.comparator=e,this.data=new Pi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const l=o.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fl(this.data.getIterator())}getIteratorFrom(e){return new Fl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof gi)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,p=o.getNext().key;if(0!==this.comparator(l,p))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gi(this.comparator);return t.data=e,t}}class Fl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gs(i){return i.hasNext()?i.getNext():void 0}class gs{constructor(e){this.fields=e,e.sort(Or.comparator)}static empty(){return new gs([])}unionWith(e){let t=new gi(Or.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new gs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ti(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class Ws{constructor(e){this.value=e}static empty(){return new Ws({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!sn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=on(t)}setAll(e){let t=Or.emptyPath(),o={},l=[];e.forEach((C,N)=>{if(!t.isImmediateParentOf(N)){const z=this.getFieldsMap(t);this.applyChanges(z,o,l),o={},l=[],t=N.popLast()}C?o[N.lastSegment()]=on(C):l.push(N.lastSegment())});const p=this.getFieldsMap(t);this.applyChanges(p,o,l)}delete(e){const t=this.field(e.popLast());sn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ws(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let l=t.mapValue.fields[e.get(o)];sn(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,o){eo(t,(l,p)=>e[l]=p);for(const l of o)delete e[l]}clone(){return new Ws(on(this.value))}}function Hu(i){const e=[];return eo(i.fields,(t,o)=>{const l=new Or([t]);if(sn(o)){const p=Hu(o.mapValue).fields;if(0===p.length)e.push(l);else for(const C of p)e.push(l.child(C))}else e.push(l)}),new gs(e)}class ni{constructor(e,t,o,l,p,C,N){this.key=e,this.documentType=t,this.version=o,this.readTime=l,this.createTime=p,this.data=C,this.documentState=N}static newInvalidDocument(e){return new ni(e,0,gn.min(),gn.min(),gn.min(),Ws.empty(),0)}static newFoundDocument(e,t,o,l){return new ni(e,1,t,gn.min(),o,l,0)}static newNoDocument(e,t){return new ni(e,2,t,gn.min(),gn.min(),Ws.empty(),0)}static newUnknownDocument(e,t){return new ni(e,3,t,gn.min(),gn.min(),Ws.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(gn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ws.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ws.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ni&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ni(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class au{constructor(e,t=null,o=[],l=[],p=null,C=null,N=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=l,this.limit=p,this.startAt=C,this.endAt=N,this.ft=null}}function kl(i,e=null,t=[],o=[],l=null,p=null,C=null){return new au(i,e,t,o,l,p,C)}function El(i){const e=nn(i);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>va(o)).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(l=o).field.canonicalString()+l.dir;var l}).join(","),ho(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>T(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>T(o)).join(",")),e.ft=t}return e.ft}function vo(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!ju(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!xl(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Zo(i.startAt,e.startAt)&&Zo(i.endAt,e.endAt)}function Ga(i){return qt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function sl(i,e){return i.filters.filter(t=>t instanceof Rr&&t.field.isEqual(e))}function lu(i,e,t){let o=qo,l=!0;for(const p of sl(i,e)){let C=qo,N=!0;switch(p.op){case"<":case"<=":C=$r(p.value);break;case"==":case"in":case">=":C=p.value;break;case">":C=p.value,N=!1;break;case"!=":case"not-in":C=qo}Fi({value:o,inclusive:l},{value:C,inclusive:N})<0&&(o=C,l=N)}if(null!==t)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const C=t.position[p];Fi({value:o,inclusive:l},{value:C,inclusive:t.inclusive})<0&&(o=C,l=t.inclusive);break}return{value:o,inclusive:l}}function $u(i,e,t){let o=tl,l=!0;for(const p of sl(i,e)){let C=tl,N=!0;switch(p.op){case">=":case">":C=Hs(p.value),N=!1;break;case"==":case"in":case"<=":C=p.value;break;case"<":C=p.value,N=!1;break;case"!=":case"not-in":C=tl}$s({value:o,inclusive:l},{value:C,inclusive:N})>0&&(o=C,l=N)}if(null!==t)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const C=t.position[p];$s({value:o,inclusive:l},{value:C,inclusive:t.inclusive})>0&&(o=C,l=t.inclusive);break}return{value:o,inclusive:l}}class Ki{constructor(e,t=null,o=[],l=[],p=null,C="F",N=null,z=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=l,this.limit=p,this.limitType=C,this.startAt=N,this.endAt=z,this.dt=null,this._t=null}}function Dl(i){return new Ki(i)}function Gu(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Wu(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Ql(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function uu(i){return null!==i.collectionGroup}function Wa(i){const e=nn(i);if(null===e.dt){e.dt=[];const t=Ql(e),o=Wu(e);if(null!==t&&null===o)t.isKeyField()||e.dt.push(new rl(t)),e.dt.push(new rl(Or.keyField(),"asc"));else{let l=!1;for(const p of e.explicitOrderBy)e.dt.push(p),p.field.isKeyField()&&(l=!0);if(!l){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new rl(Or.keyField(),p))}}}return e.dt}function $i(i){const e=nn(i);if(!e._t)if("F"===e.limitType)e._t=kl(e.path,e.collectionGroup,Wa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const p of Wa(e))t.push(new rl(p.field,"desc"===p.dir?"asc":"desc"));const o=e.endAt?new ts(e.endAt.position,e.endAt.inclusive):null,l=e.startAt?new ts(e.startAt.position,e.startAt.inclusive):null;e._t=kl(e.path,e.collectionGroup,t,e.filters,e.limit,o,l)}return e._t}function ql(i,e){e.getFirstInequalityField(),Ql(i);const t=i.filters.concat([e]);return new Ki(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Ul(i,e,t){return new Ki(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Il(i,e){return vo($i(i),$i(e))&&i.limitType===e.limitType}function Fo(i){return`${El($i(i))}|lt:${i.limitType}`}function Vl(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(o=>Nl(o)).join(", ")}]`),ho(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(o=>{return`${(l=o).field.canonicalString()} (${l.dir})`;var l}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>T(o)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>T(o)).join(",")),`Target(${t})`}($i(i))}; limitType=${i.limitType})`}function ko(i,e){return e.isFoundDocument()&&function(t,o){const l=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(l):qt.isDocumentKey(t.path)?t.path.isEqual(l):t.path.isImmediateParentOf(l)}(i,e)&&function(t,o){for(const l of Wa(t))if(!l.field.isKeyField()&&null===o.data.field(l.field))return!1;return!0}(i,e)&&function(t,o){for(const l of t.filters)if(!l.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(l,p,C){const N=Ra(l,p,C);return l.inclusive?N<=0:N<0}(t.startAt,Wa(t),o)||t.endAt&&!function(l,p,C){const N=Ra(l,p,C);return l.inclusive?N>=0:N>0}(t.endAt,Wa(t),o)));var t,o}function du(i){return(e,t)=>{let o=!1;for(const l of Wa(i)){const p=wu(l,e,t);if(0!==p)return p;o=o||l.field.isKeyField()}return 0}}function wu(i,e,t){const o=i.field.isKeyField()?qt.comparator(e.key,t.key):function(l,p,C){const N=p.data.field(l),z=C.data.field(l);return null!==N&&null!==z?A(N,z):pn()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return pn()}}function hu(i,e){if(i.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ma(e)?"-0":e}}function Tu(i){return{integerValue:""+i}}function zu(i,e){return function ya(i){return"number"==typeof i&&Number.isInteger(i)&&!Ma(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}(e)?Tu(e):hu(i,e)}class Zl{constructor(){this._=void 0}}function Ku(i,e,t){return i instanceof za?function(o,l){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&(p.fields.__previous_value__=l),{mapValue:p}}(t,e):i instanceof ea?Ea(i,e):i instanceof Gi?ol(i,e):function(o,l){const p=zs(o,l),C=fu(p)+fu(o.gt);return oe(p)&&oe(o.gt)?Tu(C):hu(o.yt,C)}(i,e)}function Yu(i,e,t){return i instanceof ea?Ea(i,e):i instanceof Gi?ol(i,e):t}function zs(i,e){return i instanceof xa?oe(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class za extends Zl{}class ea extends Zl{constructor(e){super(),this.elements=e}}function Ea(i,e){const t=Na(e);for(const o of i.elements)t.some(l=>ws(l,o))||t.push(o);return{arrayValue:{values:t}}}class Gi extends Zl{constructor(e){super(),this.elements=e}}function ol(i,e){let t=Na(e);for(const o of i.elements)t=t.filter(l=>!ws(l,o));return{arrayValue:{values:t}}}class xa extends Zl{constructor(e,t){super(),this.yt=e,this.gt=t}}function fu(i){return fi(i.integerValue||i.doubleValue)}function Na(i){return fe(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Bl{constructor(e,t){this.field=e,this.transform=t}}class v{constructor(e,t){this.version=e,this.transformResults=t}}class D{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new D}static exists(e){return new D(void 0,e)}static updateTime(e){return new D(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function L(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class re{}function y(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Bt(i.key,D.none()):new ne(i.key,i.data,D.none());{const t=i.data,o=Ws.empty();let l=new gi(Or.comparator);for(let p of e.fields)if(!l.has(p)){let C=t.field(p);null===C&&p.length>1&&(p=p.popLast(),C=t.field(p)),null===C?o.delete(p):o.set(p,C),l=l.add(p)}return new _e(i.key,o,new gs(l.toArray()),D.none())}}function _(i,e,t){i instanceof ne?function(o,l,p){const C=o.value.clone(),N=Xe(o.fieldTransforms,l,p.transformResults);C.setAll(N),l.convertToFoundDocument(p.version,C).setHasCommittedMutations()}(i,e,t):i instanceof _e?function(o,l,p){if(!L(o.precondition,l))return void l.convertToUnknownDocument(p.version);const C=Xe(o.fieldTransforms,l,p.transformResults),N=l.data;N.setAll(Ie(o)),N.setAll(C),l.convertToFoundDocument(p.version,N).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function g(i,e,t,o){return i instanceof ne?function(l,p,C,N){if(!L(l.precondition,p))return C;const z=l.value.clone(),J=pt(l.fieldTransforms,N,p);return z.setAll(J),p.convertToFoundDocument(p.version,z).setHasLocalMutations(),null}(i,e,t,o):i instanceof _e?function(l,p,C,N){if(!L(l.precondition,p))return C;const z=pt(l.fieldTransforms,N,p),J=p.data;return J.setAll(Ie(l)),J.setAll(z),p.convertToFoundDocument(p.version,J).setHasLocalMutations(),null===C?null:C.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(ye=>ye.field))}(i,e,t,o):(C=t,L(i.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):C);var p,C}function b(i,e){let t=null;for(const o of i.fieldTransforms){const l=e.data.field(o.field),p=zs(o.transform,l||null);null!=p&&(null===t&&(t=Ws.empty()),t.set(o.field,p))}return t||null}function j(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&ti(t,o,(l,p)=>function R(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof ea&&o instanceof ea||t instanceof Gi&&o instanceof Gi?ti(t.elements,o.elements,ws):t instanceof xa&&o instanceof xa?ws(t.gt,o.gt):t instanceof za&&o instanceof za);var t,o}(l,p))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class ne extends re{constructor(e,t,o,l=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class _e extends re{constructor(e,t,o,l,p=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=l,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function Ie(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Xe(i,e,t){const o=new Map;In(i.length===t.length);for(let l=0;l<t.length;l++){const p=i[l],C=p.transform,N=e.data.field(p.field);o.set(p.field,Yu(C,N,t[l]))}return o}function pt(i,e,t){const o=new Map;for(const l of i){const p=l.transform,C=t.data.field(l.field);o.set(l.field,Ku(p,C,e))}return o}class Bt extends re{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gt extends re{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class On{constructor(e){this.count=e}}var tn,Vt;function pr(i){if(void 0===i)return Li("GRPC error has no .code"),dt.UNKNOWN;switch(i){case tn.OK:return dt.OK;case tn.CANCELLED:return dt.CANCELLED;case tn.UNKNOWN:return dt.UNKNOWN;case tn.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case tn.INTERNAL:return dt.INTERNAL;case tn.UNAVAILABLE:return dt.UNAVAILABLE;case tn.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case tn.NOT_FOUND:return dt.NOT_FOUND;case tn.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case tn.ABORTED:return dt.ABORTED;case tn.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case tn.DATA_LOSS:return dt.DATA_LOSS;default:return pn()}}(Vt=tn||(tn={}))[Vt.OK=0]="OK",Vt[Vt.CANCELLED=1]="CANCELLED",Vt[Vt.UNKNOWN=2]="UNKNOWN",Vt[Vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vt[Vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vt[Vt.NOT_FOUND=5]="NOT_FOUND",Vt[Vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vt[Vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vt[Vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vt[Vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vt[Vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vt[Vt.ABORTED=10]="ABORTED",Vt[Vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vt[Vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vt[Vt.INTERNAL=13]="INTERNAL",Vt[Vt.UNAVAILABLE=14]="UNAVAILABLE",Vt[Vt.DATA_LOSS=15]="DATA_LOSS";class Nr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[l,p]of o)if(this.equalsFn(l,e))return p}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),l=this.inner[o];if(void 0===l)return this.inner[o]=[[e,t]],void this.innerSize++;for(let p=0;p<l.length;p++)if(this.equalsFn(l[p][0],e))return void(l[p]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return 1===o.length?delete this.inner[t]:o.splice(l,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,(t,o)=>{for(const[l,p]of o)e(l,p)})}isEmpty(){return ma(this.inner)}size(){return this.innerSize}}const Ms=new Pi(qt.comparator);function Gr(){return Ms}const ms=new Pi(qt.comparator);function Da(...i){let e=ms;for(const t of i)e=e.insert(t.key,t);return e}function Ia(i){let e=ms;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function ki(){return La()}function Ka(){return La()}function La(){return new Nr(i=>i.toString(),(i,e)=>i.isEqual(e))}const Cl=new Pi(qt.comparator),uc=new gi(qt.comparator);function Jn(...i){let e=uc;for(const t of i)e=e.add(t);return e}const Eo=new gi(Xt);function al(){return Eo}class jl{constructor(e,t,o,l,p){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=l,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const l=new Map;return l.set(e,wn.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new jl(gn.min(),l,al(),Gr(),Jn())}}class wn{constructor(e,t,o,l,p){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=l,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new wn(o,t,Jn(),Jn(),Jn())}}class $n{constructor(e,t,o,l){this.It=e,this.removedTargetIds=t,this.key=o,this.Tt=l}}class Zn{constructor(e,t){this.targetId=e,this.Et=t}}class ri{constructor(e,t,o=As.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=l}}class Ps{constructor(){this.At=0,this.Rt=ul(),this.bt=As.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=Jn(),t=Jn(),o=Jn();return this.Rt.forEach((l,p)=>{switch(p){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:o=o.add(l);break;default:pn()}}),new wn(this.bt,this.Pt,e,t,o)}xt(){this.vt=!1,this.Rt=ul()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class ll{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Gr(),this.qt=Do(),this.Ut=new gi(Xt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const o=this.Wt(t);switch(e.state){case 0:this.zt(t)&&o.Dt(e.resumeToken);break;case 1:o.Mt(),o.Vt||o.xt(),o.Dt(e.resumeToken);break;case 2:o.Mt(),o.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(o.Ft(),o.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),o.Dt(e.resumeToken));break;default:pn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((o,l)=>{this.zt(l)&&t(l)})}Jt(e){const t=e.targetId,o=e.Et.count,l=this.Yt(t);if(l){const p=l.target;if(Ga(p))if(0===o){const C=new qt(p.path);this.Qt(t,C,ni.newNoDocument(C,gn.min()))}else In(1===o);else this.Xt(t)!==o&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((p,C)=>{const N=this.Yt(C);if(N){if(p.current&&Ga(N.target)){const z=new qt(N.target.path);null!==this.Lt.get(z)||this.te(C,z)||this.Qt(C,z,ni.newNoDocument(z,e))}p.St&&(t.set(C,p.Ct()),p.xt())}});let o=Jn();this.qt.forEach((p,C)=>{let N=!0;C.forEachWhile(z=>{const J=this.Yt(z);return!J||2===J.purpose||(N=!1,!1)}),N&&(o=o.add(p))}),this.Lt.forEach((p,C)=>C.setReadTime(e));const l=new jl(e,t,this.Ut,this.Lt,o);return this.Lt=Gr(),this.qt=Do(),this.Ut=new gi(Xt),l}Gt(e,t){if(!this.zt(e))return;const o=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,o),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,o){if(!this.zt(e))return;const l=this.Wt(e);this.te(e,t)?l.Nt(t,1):l.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),o&&(this.Lt=this.Lt.insert(t,o))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new Ps,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new gi(Xt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Ut("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new Ps),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function Do(){return new Pi(qt.comparator)}function ul(){return new Pi(qt.comparator)}const rs={asc:"ASCENDING",desc:"DESCENDING"},Qu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Su={and:"AND",or:"OR"};class Io{constructor(e,t){this.databaseId=e,this.wt=t}}function ta(i,e){return i.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function na(i,e){return i.wt?e.toBase64():e.toUint8Array()}function pu(i,e){return ta(i,e.toTimestamp())}function Wi(i){return In(!!i),gn.fromTimestamp(function(e){const t=Pa(e);return new Er(t.seconds,t.nanos)}(i))}function Ad(i,e){return(t=i,new Wn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function mh(i){const e=Wn.fromString(i);return In(vf(e)),e}function cc(i,e){return Ad(i.databaseId,e.path)}function Xl(i,e){const t=mh(e);if(t.get(1)!==i.databaseId.projectId)throw new P(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new P(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new qt(jc(t))}function Md(i,e){return Ad(i.databaseId,e)}function yh(i){const e=mh(i);return 4===e.length?Wn.emptyPath():jc(e)}function qu(i){return new Wn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function jc(i){return In(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Hc(i,e,t){return{name:cc(i,e),fields:t.value.mapValue.fields}}function Pd(i,e){let t;if(e instanceof ne)t={update:Hc(i,e.key,e.value)};else if(e instanceof Bt)t={delete:cc(i,e.key)};else if(e instanceof _e)t={update:Hc(i,e.key,e.data),updateMask:_f(e.fieldMask)};else{if(!(e instanceof Gt))return pn();t={verify:cc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(l,p){const C=p.transform;if(C instanceof za)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof ea)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof Gi)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof xa)return{fieldPath:p.field.canonicalString(),increment:C.gt};throw pn()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(l=e.precondition).updateTime?{updateTime:pu(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:pn()),t;var l}function Od(i,e){const t=e.currentDocument?void 0!==(l=e.currentDocument).updateTime?D.updateTime(Wi(l.updateTime)):void 0!==l.exists?D.exists(l.exists):D.none():D.none(),o=e.updateTransforms?e.updateTransforms.map(l=>function(p,C){let N=null;"setToServerValue"in C?(In("REQUEST_TIME"===C.setToServerValue),N=new za):"appendMissingElements"in C?N=new ea(C.appendMissingElements.values||[]):"removeAllFromArray"in C?N=new Gi(C.removeAllFromArray.values||[]):"increment"in C?N=new xa(p,C.increment):pn();const z=Or.fromServerFormat(C.fieldPath);return new Bl(z,N)}(i,l)):[];var l;if(e.update){const l=Xl(i,e.update.name),p=new Ws({mapValue:{fields:e.update.fields}});if(e.updateMask){const C=new gs((e.updateMask.fieldPaths||[]).map(J=>Or.fromServerFormat(J)));return new _e(l,p,C,t,o)}return new ne(l,p,t,o)}if(e.delete){const l=Xl(i,e.delete);return new Bt(l,t)}if(e.verify){const l=Xl(i,e.verify);return new Gt(l,t)}return pn()}function Rd(i,e){return{documents:[Md(i,e.path)]}}function $c(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Md(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Md(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const l=function(z){if(0!==z.length)return Eh(ui.create(z,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const p=function(z){if(0!==z.length)return z.map(J=>{return{field:fc((ye=J).field),direction:_h(ye.dir)};var ye})}(e.orderBy);p&&(t.structuredQuery.orderBy=p);const C=(J=e.limit,i.wt||ho(J)?J:{value:J});var J,N,z;return null!==C&&(t.structuredQuery.limit=C),e.startAt&&(t.structuredQuery.startAt={before:(N=e.startAt).inclusive,values:N.position}),e.endAt&&(t.structuredQuery.endAt={before:!(z=e.endAt).inclusive,values:z.position}),t}function hc(i){let e=yh(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let l=null;if(o>0){In(1===o);const ye=t.from[0];ye.allDescendants?l=ye.collectionId:e=e.child(ye.collectionId)}let p=[];t.where&&(p=function(ye){const Me=Nd(ye);return Me instanceof ui&&_l(Me)?Me.getFilters():[Me]}(t.where));let C=[];t.orderBy&&(C=t.orderBy.map(ye=>{return new rl(pc((Me=ye).field),function(at){switch(at){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Me.direction));var Me}));let N=null;t.limit&&(N=function(ye){let Me;return Me="object"==typeof ye?ye.value:ye,ho(Me)?null:Me}(t.limit));let z=null;var ye;t.startAt&&(z=new ts((ye=t.startAt).values||[],!!ye.before));let J=null;return t.endAt&&(J=function(ye){return new ts(ye.values||[],!ye.before)}(t.endAt)),function Cu(i,e,t,o,l,p,C,N){return new Ki(i,e,t,o,l,p,C,N)}(e,l,C,p,N,"F",z,J)}function Nd(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=pc(e.unaryFilter.field);return Rr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const o=pc(e.unaryFilter.field);return Rr.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=pc(e.unaryFilter.field);return Rr.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=pc(e.unaryFilter.field);return Rr.create(p,"!=",{nullValue:"NULL_VALUE"});default:return pn()}}(i):void 0!==i.fieldFilter?Rr.create(pc((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return ui.create(e.compositeFilter.filters.map(t=>Nd(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return pn()}}(e.compositeFilter.op))}(i):pn();var e}function _h(i){return rs[i]}function vh(i){return Qu[i]}function gu(i){return Su[i]}function fc(i){return{fieldPath:i.canonicalString()}}function pc(i){return Or.fromServerFormat(i.fieldPath)}function Eh(i){return i instanceof Rr?function(e){if("=="===e.op){if(wt(e.value))return{unaryFilter:{field:fc(e.field),op:"IS_NAN"}};if(je(e.value))return{unaryFilter:{field:fc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(wt(e.value))return{unaryFilter:{field:fc(e.field),op:"IS_NOT_NAN"}};if(je(e.value))return{unaryFilter:{field:fc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fc(e.field),op:vh(e.op),value:e.value}}}(i):i instanceof ui?function(e){const t=e.getFilters().map(o=>Eh(o));return 1===t.length?t[0]:{compositeFilter:{op:gu(e.op),filters:t}}}(i):pn()}function _f(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Os(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Dh(e)),e=gc(i.get(t),e);return Dh(e)}function gc(i,e){let t=e;const o=i.length;for(let l=0;l<o;l++){const p=i.charAt(l);switch(p){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=p}}return t}function Dh(i){return i+"\x01\x01"}function Hl(i){const e=i.length;if(In(e>=2),2===e)return In("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Wn.emptyPath();const t=e-2,o=[];let l="";for(let p=0;p<e;){const C=i.indexOf("\x01",p);switch((C<0||C>t)&&pn(),i.charAt(C+1)){case"\x01":const N=i.substring(p,C);let z;0===l.length?z=N:(l+=N,z=l,l=""),o.push(z);break;case"\x10":l+=i.substring(p,C),l+="\0";break;case"\x11":l+=i.substring(p,C+1);break;default:pn()}p=C+2}return new Wn(o)}const Ih=["userId","batchId"];function Gc(i,e){return[i,Os(e)]}function Ch(i,e,t){return[i,Os(e),t]}const lg={},Ef=["prefixPath","collectionGroup","readTime","documentId"],ug=["prefixPath","collectionGroup","documentId"],h=["collectionGroup","readTime","prefixPath","documentId"],u=["canonicalId","targetId"],c=["targetId","path"],E=["path","targetId"],M=["collectionId","parent"],B=["indexId","uid"],Y=["uid","sequenceNumber"],me=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],be=["indexId","uid","orderedDocumentKey"],xe=["userId","collectionPath","documentId"],_t=["userId","collectionPath","largestBatchId"],Dt=["userId","collectionGroup","largestBatchId"],At=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],En=[...At,"documentOverlays"],zn=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ci=zn,Co=[...Ci,"indexConfiguration","indexState","indexEntries"];class mu extends iu{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Ks(i,e){const t=nn(i);return Cs.M(t.se,e)}class mc{constructor(e,t,o,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=l}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const p=this.mutations[l];p.key.isEqual(e.key)&&_(p,e,o[l])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=g(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=g(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=Ka();return this.mutations.forEach(l=>{const p=e.get(l.key),C=p.overlayedDocument;let N=this.applyToLocalView(C,p.mutatedFields);N=t.has(l.key)?null:N;const z=y(C,N);null!==z&&o.set(l.key,z),C.isValidDocument()||C.convertToNoDocument(gn.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jn())}isEqual(e){return this.batchId===e.batchId&&ti(this.mutations,e.mutations,(t,o)=>j(t,o))&&ti(this.baseMutations,e.baseMutations,(t,o)=>j(t,o))}}class Ld{constructor(e,t,o,l){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=l}static from(e,t,o){In(e.mutations.length===o.length);let l=Cl;const p=e.mutations;for(let C=0;C<p.length;C++)l=l.insert(p[C].key,o[C].version);return new Ld(e,t,o,l)}}class wh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Jl{constructor(e,t,o,l,p=gn.min(),C=gn.min(),N=As.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=l,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=C,this.resumeToken=N}withSequenceNumber(e){return new Jl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Df{constructor(e){this.ie=e}}function cg(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Rs(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:cc(l=i.ie,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:ta(l,p.version.toTimestamp()),createTime:ta(l,p.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Xu(e.version)};else{if(!e.isUnknownDocument())return pn();o.unknownDocument={path:t.path.toArray(),version:Xu(e.version)}}var l,p;return o}function Rs(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Xu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yc(i){const e=new Er(i.seconds,i.nanoseconds);return gn.fromTimestamp(e)}function bu(i,e){const t=(e.baseMutations||[]).map(p=>Od(i.ie,p));for(let p=0;p<e.mutations.length-1;++p)p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(e.mutations[p].updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p);const o=e.mutations.map(p=>Od(i.ie,p)),l=Er.fromMillis(e.localWriteTimeMs);return new mc(e.batchId,l,t,o)}function _c(i){const e=yc(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?yc(i.lastLimboFreeSnapshotVersion):gn.min();let o;var l;return void 0!==i.query.documents?(In(1===(l=i.query).documents.length),o=$i(Dl(yh(l.documents[0])))):o=$i(hc(i.query)),new Jl(o,i.targetId,0,i.lastListenSequenceNumber,e,t,As.fromBase64String(i.resumeToken))}function dg(i,e){const t=Xu(e.snapshotVersion),o=Xu(e.lastLimboFreeSnapshotVersion);let l;l=Ga(e.target)?Rd(i.ie,e.target):$c(i.ie,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:El(e.target),readTime:t,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:l}}function Cf(i){const e=hc({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Ul(e,e.limit,"L"):e}function wf(i,e){return new wh(e.largestBatchId,Od(i.ie,e.overlayMutation))}function hg(i,e){const t=e.path.lastSegment();return[i,Os(e.path.popLast()),t]}function Tf(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Xu(o.readTime),documentKey:Os(o.documentKey.path),largestBatchId:o.largestBatchId}}class F_{getBundleMetadata(e,t){return iy(e).get(t).next(o=>{if(o)return{id:(l=o).bundleId,createTime:yc(l.createTime),version:l.version};var l})}saveBundleMetadata(e,t){return iy(e).put({bundleId:(o=t).id,createTime:Xu(Wi(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Wc(e).get(t).next(o=>{if(o)return{name:(l=o).name,query:Cf(l.bundledQuery),readTime:yc(l.readTime)};var l})}saveNamedQuery(e,t){return Wc(e).put({name:(o=t).name,readTime:Xu(Wi(o.readTime)),bundledQuery:o.bundledQuery});var o}}function iy(i){return Ks(i,"bundles")}function Wc(i){return Ks(i,"namedQueries")}class zc{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new zc(e,t.uid||"")}getOverlay(e,t){return Kc(e).get(hg(this.userId,t)).next(o=>o?wf(this.yt,o):null)}getOverlays(e,t){const o=ki();return st.forEach(t,l=>this.getOverlay(e,l).next(p=>{null!==p&&o.set(l,p)})).next(()=>o)}saveOverlays(e,t,o){const l=[];return o.forEach((p,C)=>{const N=new wh(t,C);l.push(this.oe(e,N))}),st.waitFor(l)}removeOverlaysForBatchId(e,t,o){const l=new Set;t.forEach(C=>l.add(Os(C.getCollectionPath())));const p=[];return l.forEach(C=>{const N=IDBKeyRange.bound([this.userId,C,o],[this.userId,C,o+1],!1,!0);p.push(Kc(e).Y("collectionPathOverlayIndex",N))}),st.waitFor(p)}getOverlaysForCollection(e,t,o){const l=ki(),p=Os(t),C=IDBKeyRange.bound([this.userId,p,o],[this.userId,p,Number.POSITIVE_INFINITY],!0);return Kc(e).W("collectionPathOverlayIndex",C).next(N=>{for(const z of N){const J=wf(this.yt,z);l.set(J.getKey(),J)}return l})}getOverlaysForCollectionGroup(e,t,o,l){const p=ki();let C;const N=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kc(e).Z({index:"collectionGroupOverlayIndex",range:N},(z,J,ye)=>{const Me=wf(this.yt,J);p.size()<l||Me.largestBatchId===C?(p.set(Me.getKey(),Me),C=Me.largestBatchId):ye.done()}).next(()=>p)}oe(e,t){return Kc(e).put(function(o,l,p){const[C,N,z]=hg(l,p.mutation.key);return{userId:l,collectionPath:N,documentId:z,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:Pd(o.ie,p.mutation)}}(this.yt,this.userId,t))}}function Kc(i){return Ks(i,"documentOverlays")}class Ju{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(fi(e.integerValue));else if("doubleValue"in e){const o=fi(e.doubleValue);isNaN(o)?this.he(t,13):(this.he(t,15),Ma(o)?t.le(0):t.le(o))}else if("timestampValue"in e){const o=e.timestampValue;this.he(t,20),"string"==typeof o?t.fe(o):(t.fe(`${o.seconds||""}`),t.le(o.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Oa(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.he(t,45),t.le(o.latitude||0),t.le(o.longitude||0)}else"mapValue"in e?br(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):pn()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const o=e.fields||{};this.he(t,55);for(const l of Object.keys(o))this.de(l,t),this.ce(o[l],t)}ye(e,t){const o=e.values||[];this.he(t,50);for(const l of o)this.ce(l,t)}me(e,t){this.he(t,37),qt.fromName(e).path.forEach(o=>{this.he(t,60),this.pe(o,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function fg(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function pg(i){const e=64-function(t){let o=0;for(let l=0;l<8;++l){const p=fg(255&t[l]);if(o+=p,8!==p)break}return o}(i);return Math.ceil(e/8)}Ju.Ie=new Ju;class sy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ee(o.value),o=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.be(o.value),o=t.next();this.Pe()}ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ee(o);else if(o<2048)this.Ee(960|o>>>6),this.Ee(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|o>>>12),this.Ee(128|63&o>>>6),this.Ee(128|63&o);else{const l=t.codePointAt(0);this.Ee(240|l>>>18),this.Ee(128|63&l>>>12),this.Ee(128|63&l>>>6),this.Ee(128|63&l)}}this.Ae()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.be(o);else if(o<2048)this.be(960|o>>>6),this.be(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.be(480|o>>>12),this.be(128|63&o>>>6),this.be(128|63&o);else{const l=t.codePointAt(0);this.be(240|l>>>18),this.be(128|63&l>>>12),this.be(128|63&l>>>6),this.be(128|63&l)}}this.Pe()}Se(e){const t=this.De(e),o=pg(t);this.Ce(1+o),this.buffer[this.position++]=255&o;for(let l=t.length-o;l<t.length;++l)this.buffer[this.position++]=255&t[l]}xe(e){const t=this.De(e),o=pg(t);this.Ce(1+o),this.buffer[this.position++]=~(255&o);for(let l=t.length-o;l<t.length;++l)this.buffer[this.position++]=~(255&t[l])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(l){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,l,!1),new Uint8Array(p.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let l=1;l<t.length;++l)t[l]^=o?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const l=new Uint8Array(o);l.set(this.buffer),this.buffer=l}}class gg{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class mg{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class vc{constructor(){this.$e=new sy,this.Be=new gg(this.$e),this.Le=new mg(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Yc{constructor(e,t,o,l){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=l}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Yc(this.indexId,this.documentKey,this.arrayValue,o)}}function yu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=yg(i.arrayValue,e.arrayValue),0!==t?t:(t=yg(i.directionalValue,e.directionalValue),0!==t?t:qt.comparator(i.documentKey,e.documentKey)))}function yg(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Sf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const o=t;o.isInequality()?this.Qe=o:this.Ge.push(o)}}je(e){In(e.collectionGroup===this.collectionId);const t=pa(e);if(void 0!==t&&!this.We(t))return!1;const o=Qo(e);let l=0,p=0;for(;l<o.length&&this.We(o[l]);++l);if(l===o.length)return!0;if(void 0!==this.Qe){const C=o[l];if(!this.ze(this.Qe,C)||!this.He(this.Ke[p++],C))return!1;++l}for(;l<o.length;++l)if(p>=this.Ke.length||!this.He(this.Ke[p++],o[l]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function bf(i){var e,t;if(In(i instanceof Rr||i instanceof ui),i instanceof Rr){if(i instanceof $a){const l=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(p=>Rr.create(i.field,"==",p)))||[];return ui.create(l,"or")}return i}const o=i.filters.map(l=>bf(l));return ui.create(o,i.op)}function _g(i){if(0===i.getFilters().length)return[];const e=Qc(bf(i));return In(Th(e)),Au(e)||Af(e)?[e]:e.getFilters()}function Au(i){return i instanceof Rr}function Af(i){return i instanceof ui&&_l(i)}function Th(i){return Au(i)||Af(i)||function(e){if(e instanceof ui&&nl(e)){for(const t of e.getFilters())if(!Au(t)&&!Af(t))return!1;return!0}return!1}(i)}function Qc(i){if(In(i instanceof Rr||i instanceof ui),i instanceof Rr)return i;if(1===i.filters.length)return Qc(i.filters[0]);const e=i.filters.map(o=>Qc(o));let t=ui.create(e,i.op);return t=Ec(t),Th(t)?t:(In(t instanceof ui),In(yl(t)),In(t.filters.length>1),t.filters.reduce((o,l)=>Mf(o,l)))}function Mf(i,e){let t;return In(i instanceof Rr||i instanceof ui),In(e instanceof Rr||e instanceof ui),t=i instanceof Rr?e instanceof Rr?ui.create([i,e],"and"):Sh(i,e):e instanceof Rr?Sh(e,i):function(o,l){if(In(o.filters.length>0&&l.filters.length>0),yl(o)&&yl(l))return Xo(o,l.getFilters());const p=nl(o)?o:l,C=nl(o)?l:o,N=p.filters.map(z=>Mf(z,C));return ui.create(N,"or")}(i,e),Ec(t)}function Sh(i,e){if(yl(e))return Xo(e,i.getFilters());{const t=e.filters.map(o=>Mf(i,o));return ui.create(t,"or")}}function Ec(i){if(In(i instanceof Rr||i instanceof ui),i instanceof Rr)return i;const e=i.getFilters();if(1===e.length)return Ec(e[0]);if(vl(i))return i;const t=e.map(l=>Ec(l)),o=[];return t.forEach(l=>{l instanceof Rr?o.push(l):l instanceof ui&&(l.op===i.op?o.push(...l.filters):o.push(l))}),1===o.length?o[0]:ui.create(o,i.op)}class Dc{constructor(){this.Je=new bh}addToCollectionParentIndex(e,t){return this.Je.add(t),st.resolve()}getCollectionParents(e,t){return st.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return st.resolve()}deleteFieldIndex(e,t){return st.resolve()}getDocumentsMatchingTarget(e,t){return st.resolve(null)}getIndexType(e,t){return st.resolve(0)}getFieldIndexes(e,t){return st.resolve([])}getNextCollectionGroupToUpdate(e){return st.resolve(null)}getMinOffset(e,t){return st.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,t){return st.resolve(Vs.min())}updateCollectionGroup(e,t,o){return st.resolve()}updateIndexEntries(e,t){return st.resolve()}}class bh{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),l=this.index[t]||new gi(Wn.comparator),p=!l.has(o);return this.index[t]=l.add(o),p}has(e){const t=e.lastSegment(),o=e.popLast(),l=this.index[t];return l&&l.has(o)}getEntries(e){return(this.index[e]||new gi(Wn.comparator)).toArray()}}const qc=new Uint8Array(0);class oy{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new bh,this.Xe=new Nr(o=>El(o),(o,l)=>vo(o,l)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const o=t.lastSegment(),l=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const p={collectionId:o,parent:Os(l)};return vg(e).put(p)}return st.resolve()}getCollectionParents(e,t){const o=[],l=IDBKeyRange.bound([t,""],[Is(t),""],!1,!0);return vg(e).W(l).next(p=>{for(const C of p){if(C.collectionId!==t)break;o.push(Hl(C.parent))}return o})}addFieldIndex(e,t){const o=Mu(e),l={indexId:(C=t).indexId,collectionGroup:C.collectionGroup,fields:C.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var C;delete l.indexId;const p=o.add(l);if(t.indexState){const C=Fd(e);return p.next(N=>{C.put(Tf(N,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return p.next()}deleteFieldIndex(e,t){const o=Mu(e),l=Fd(e),p=Zc(e);return o.delete(t.indexId).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=Zc(e);let l=!0;const p=new Map;return st.forEach(this.Ze(t),C=>this.tn(e,C).next(N=>{l&&(l=!!N),p.set(C,N)})).next(()=>{if(l){let C=Jn();const N=[];return st.forEach(p,(z,J)=>{var ye;Ut("IndexedDbIndexManager",`Using index ${ye=z,`id=${ye.indexId}|cg=${ye.collectionGroup}|f=${ye.fields.map(wi=>`${wi.fieldPath}:${wi.kind}`).join(",")}`} to execute ${El(t)}`);const Me=function(wi,aa){const cs=pa(aa);if(void 0===cs)return null;for(const zi of sl(wi,cs.fieldPath))switch(zi.op){case"array-contains-any":return zi.value.arrayValue.values||[];case"array-contains":return[zi.value]}return null}(J,z),at=function(wi,aa){const cs=new Map;for(const zi of Qo(aa))for(const la of sl(wi,zi.fieldPath))switch(la.op){case"==":case"in":cs.set(zi.fieldPath.canonicalString(),la.value);break;case"not-in":case"!=":return cs.set(zi.fieldPath.canonicalString(),la.value),Array.from(cs.values())}return null}(J,z),Mt=function(wi,aa){const cs=[];let zi=!0;for(const la of Qo(aa)){const Sd=0===la.kind?lu(wi,la.fieldPath,wi.startAt):$u(wi,la.fieldPath,wi.startAt);cs.push(Sd.value),zi&&(zi=Sd.inclusive)}return new ts(cs,zi)}(J,z),jt=function(wi,aa){const cs=[];let zi=!0;for(const la of Qo(aa)){const Sd=0===la.kind?$u(wi,la.fieldPath,wi.endAt):lu(wi,la.fieldPath,wi.endAt);cs.push(Sd.value),zi&&(zi=Sd.inclusive)}return new ts(cs,zi)}(J,z),Dn=this.en(z,J,Mt),jn=this.en(z,J,jt),ys=this.nn(z,J,at),us=this.sn(z.indexId,Me,Dn,Mt.inclusive,jn,jt.inclusive,ys);return st.forEach(us,wi=>o.J(wi,t.limit).next(aa=>{aa.forEach(cs=>{const zi=qt.fromSegments(cs.documentKey);C.has(zi)||(C=C.add(zi),N.push(zi))})}))}).next(()=>N)}return st.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:_g(ui.create(e.filters,"and")).map(o=>kl(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,o,l,p,C,N){const z=(null!=t?t.length:1)*Math.max(o.length,p.length),J=z/(null!=t?t.length:1),ye=[];for(let Me=0;Me<z;++Me){const at=t?this.rn(t[Me/J]):qc,Mt=this.on(e,at,o[Me%J],l),jt=this.un(e,at,p[Me%J],C),Dn=N.map(jn=>this.on(e,at,jn,!0));ye.push(...this.createRange(Mt,jt,Dn))}return ye}on(e,t,o,l){const p=new Yc(e,qt.empty(),t,o);return l?p:p.Ue()}un(e,t,o,l){const p=new Yc(e,qt.empty(),t,o);return l?p.Ue():p}tn(e,t){const o=new Sf(t),l=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,l).next(p=>{let C=null;for(const N of p)o.je(N)&&(!C||N.fields.length>C.fields.length)&&(C=N);return C})}getIndexType(e,t){let o=2;const l=this.Ze(t);return st.forEach(l,p=>this.tn(e,p).next(C=>{C?0!==o&&C.fields.length<function(N){let z=new gi(Or.comparator),J=!1;for(const ye of N.filters)for(const Me of ye.getFlattenedFilters())Me.field.isKeyField()||("array-contains"===Me.op||"array-contains-any"===Me.op?J=!0:z=z.add(Me.field));for(const ye of N.orderBy)ye.field.isKeyField()||(z=z.add(ye.field));return z.size+(J?1:0)}(p)&&(o=1):o=0})).next(()=>null!==t.limit&&l.length>1&&2===o?1:o)}cn(e,t){const o=new vc;for(const l of Qo(e)){const p=t.data.field(l.fieldPath);if(null==p)return null;const C=o.qe(l.kind);Ju.Ie.ue(p,C)}return o.Fe()}rn(e){const t=new vc;return Ju.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const o=new vc;return Ju.Ie.ue(W(this.databaseId,t),o.qe(function(l){const p=Qo(l);return 0===p.length?0:p[p.length-1].kind}(e))),o.Fe()}nn(e,t,o){if(null===o)return[];let l=[];l.push(new vc);let p=0;for(const C of Qo(e)){const N=o[p++];for(const z of l)if(this.hn(t,C.fieldPath)&&fe(N))l=this.ln(l,C,N);else{const J=z.qe(C.kind);Ju.Ie.ue(N,J)}}return this.fn(l)}en(e,t,o){return this.nn(e,t,o.position)}fn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Fe();return t}ln(e,t,o){const l=[...e],p=[];for(const C of o.arrayValue.values||[])for(const N of l){const z=new vc;z.seed(N.Fe()),Ju.Ie.ue(C,z.qe(t.kind)),p.push(z)}return p}hn(e,t){return!!e.filters.find(o=>o instanceof Rr&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=Mu(e),l=Fd(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(p=>{const C=[];return st.forEach(p,N=>l.get([N.indexId,this.uid]).next(z=>{C.push(function(J,ye){const Me=ye?new Ro(ye.sequenceNumber,new Vs(yc(ye.readTime),new qt(Hl(ye.documentKey)),ye.largestBatchId)):Ro.empty(),at=J.fields.map(([Mt,jt])=>new Hi(Or.fromServerFormat(Mt),jt));return new uo(J.indexId,J.collectionGroup,at,Me)}(N,z))})).next(()=>C)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,l)=>{const p=o.indexState.sequenceNumber-l.indexState.sequenceNumber;return 0!==p?p:Xt(o.collectionGroup,l.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const l=Mu(e),p=Fd(e);return this.dn(e).next(C=>l.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(N=>st.forEach(N,z=>p.put(Tf(z.indexId,this.user,C,o)))))}updateIndexEntries(e,t){const o=new Map;return st.forEach(t,(l,p)=>{const C=o.get(l.collectionGroup);return(C?st.resolve(C):this.getFieldIndexes(e,l.collectionGroup)).next(N=>(o.set(l.collectionGroup,N),st.forEach(N,z=>this._n(e,l,z).next(J=>{const ye=this.wn(p,z);return J.isEqual(ye)?st.resolve():this.mn(e,p,z,J,ye)}))))})}gn(e,t,o,l){return Zc(e).put({indexId:l.indexId,uid:this.uid,arrayValue:l.arrayValue,directionalValue:l.directionalValue,orderedDocumentKey:this.an(o,t.key),documentKey:t.key.path.toArray()})}yn(e,t,o,l){return Zc(e).delete([l.indexId,this.uid,l.arrayValue,l.directionalValue,this.an(o,t.key),t.key.path.toArray()])}_n(e,t,o){const l=Zc(e);let p=new gi(yu);return l.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.an(o,t)])},(C,N)=>{p=p.add(new Yc(o.indexId,t,N.arrayValue,N.directionalValue))}).next(()=>p)}wn(e,t){let o=new gi(yu);const l=this.cn(t,e);if(null==l)return o;const p=pa(t);if(null!=p){const C=e.data.field(p.fieldPath);if(fe(C))for(const N of C.arrayValue.values||[])o=o.add(new Yc(t.indexId,e.key,this.rn(N),l))}else o=o.add(new Yc(t.indexId,e.key,qc,l));return o}mn(e,t,o,l,p){Ut("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const C=[];return function(N,z,J,ye,Me){const at=N.getIterator(),Mt=z.getIterator();let jt=Gs(at),Dn=Gs(Mt);for(;jt||Dn;){let jn=!1,ys=!1;if(jt&&Dn){const us=J(jt,Dn);us<0?ys=!0:us>0&&(jn=!0)}else null!=jt?ys=!0:jn=!0;jn?(ye(Dn),Dn=Gs(Mt)):ys?(Me(jt),jt=Gs(at)):(jt=Gs(at),Dn=Gs(Mt))}}(l,p,yu,N=>{C.push(this.gn(e,t,o,N))},N=>{C.push(this.yn(e,t,o,N))}),st.waitFor(C)}dn(e){let t=1;return Fd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,l,p)=>{p.done(),t=l.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((C,N)=>yu(C,N)).filter((C,N,z)=>!N||0!==yu(C,z[N-1]));const l=[];l.push(e);for(const C of o){const N=yu(C,e),z=yu(C,t);if(0===N)l[0]=e.Ue();else if(N>0&&z<0)l.push(C),l.push(C.Ue());else if(z>0)break}l.push(t);const p=[];for(let C=0;C<l.length;C+=2){if(this.pn(l[C],l[C+1]))return[];p.push(IDBKeyRange.bound([l[C].indexId,this.uid,l[C].arrayValue,l[C].directionalValue,qc,[]],[l[C+1].indexId,this.uid,l[C+1].arrayValue,l[C+1].directionalValue,qc,[]]))}return p}pn(e,t){return yu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Eg)}getMinOffset(e,t){return st.mapArray(this.Ze(t),o=>this.tn(e,o).next(l=>l||pn())).next(Eg)}}function vg(i){return Ks(i,"collectionParents")}function Zc(i){return Ks(i,"indexEntries")}function Mu(i){return Ks(i,"indexConfiguration")}function Fd(i){return Ks(i,"indexState")}function Eg(i){In(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const l=i[o].indexState.offset;Ol(l,e)<0&&(e=l),t<l.largestBatchId&&(t=l.largestBatchId)}return new Vs(e.readTime,e.documentKey,t)}const Dg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fa{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Fa(e,Fa.DEFAULT_COLLECTION_PERCENTILE,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ig(i,e,t){const o=i.store("mutations"),l=i.store("documentMutations"),p=[],C=IDBKeyRange.only(t.batchId);let N=0;const z=o.Z({range:C},(ye,Me,at)=>(N++,at.delete()));p.push(z.next(()=>{In(1===N)}));const J=[];for(const ye of t.mutations){const Me=Ch(e,ye.key.path,t.batchId);p.push(l.delete(Me)),J.push(ye.key)}return st.waitFor(p).next(()=>J)}function kd(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw pn();e=i.noDocument}return JSON.stringify(e).length}Fa.DEFAULT_COLLECTION_PERCENTILE=10,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fa.DEFAULT=new Fa(41943040,Fa.DEFAULT_COLLECTION_PERCENTILE,Fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fa.DISABLED=new Fa(-1,0,0);class Ah{constructor(e,t,o,l){this.userId=e,this.yt=t,this.indexManager=o,this.referenceDelegate=l,this.In={}}static re(e,t,o,l){In(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new Ah(p,t,o,l)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ic(e).Z({index:"userMutationsIndex",range:o},(l,p,C)=>{t=!1,C.done()}).next(()=>t)}addMutationBatch(e,t,o,l){const p=Xc(e),C=Ic(e);return C.add({}).next(N=>{In("number"==typeof N);const z=new mc(N,t,o,l),J=function(at,Mt,jt){const Dn=jt.baseMutations.map(ys=>Pd(at.ie,ys)),jn=jt.mutations.map(ys=>Pd(at.ie,ys));return{userId:Mt,batchId:jt.batchId,localWriteTimeMs:jt.localWriteTime.toMillis(),baseMutations:Dn,mutations:jn}}(this.yt,this.userId,z),ye=[];let Me=new gi((at,Mt)=>Xt(at.canonicalString(),Mt.canonicalString()));for(const at of l){const Mt=Ch(this.userId,at.key.path,N);Me=Me.add(at.key.path.popLast()),ye.push(C.put(J)),ye.push(p.put(Mt,lg))}return Me.forEach(at=>{ye.push(this.indexManager.addToCollectionParentIndex(e,at))}),e.addOnCommittedListener(()=>{this.In[N]=z.keys()}),st.waitFor(ye).next(()=>z)})}lookupMutationBatch(e,t){return Ic(e).get(t).next(o=>o?(In(o.userId===this.userId),bu(this.yt,o)):null)}Tn(e,t){return this.In[t]?st.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const l=o.keys();return this.In[t]=l,l}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,l=IDBKeyRange.lowerBound([this.userId,o]);let p=null;return Ic(e).Z({index:"userMutationsIndex",range:l},(C,N,z)=>{N.userId===this.userId&&(In(N.batchId>=o),p=bu(this.yt,N)),z.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Ic(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(l,p,C)=>{o=p.batchId,C.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ic(e).W("userMutationsIndex",t).next(o=>o.map(l=>bu(this.yt,l)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Gc(this.userId,t.path),l=IDBKeyRange.lowerBound(o),p=[];return Xc(e).Z({range:l},(C,N,z)=>{const[J,ye,Me]=C,at=Hl(ye);if(J===this.userId&&t.path.isEqual(at))return Ic(e).get(Me).next(Mt=>{if(!Mt)throw pn();In(Mt.userId===this.userId),p.push(bu(this.yt,Mt))});z.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new gi(Xt);const l=[];return t.forEach(p=>{const C=Gc(this.userId,p.path),N=IDBKeyRange.lowerBound(C),z=Xc(e).Z({range:N},(J,ye,Me)=>{const[at,Mt,jt]=J,Dn=Hl(Mt);at===this.userId&&p.path.isEqual(Dn)?o=o.add(jt):Me.done()});l.push(z)}),st.waitFor(l).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,l=o.length+1,p=Gc(this.userId,o),C=IDBKeyRange.lowerBound(p);let N=new gi(Xt);return Xc(e).Z({range:C},(z,J,ye)=>{const[Me,at,Mt]=z,jt=Hl(at);Me===this.userId&&o.isPrefixOf(jt)?jt.length===l&&(N=N.add(Mt)):ye.done()}).next(()=>this.En(e,N))}En(e,t){const o=[],l=[];return t.forEach(p=>{l.push(Ic(e).get(p).next(C=>{if(null===C)throw pn();In(C.userId===this.userId),o.push(bu(this.yt,C))}))}),st.waitFor(l).next(()=>o)}removeMutationBatch(e,t){return Ig(e.se,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),st.forEach(o,l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return st.resolve();const o=IDBKeyRange.lowerBound([this.userId]),l=[];return Xc(e).Z({range:o},(p,C,N)=>{if(p[0]===this.userId){const z=Hl(p[1]);l.push(z)}else N.done()}).next(()=>{In(0===l.length)})})}containsKey(e,t){return Pf(e,this.userId,t)}Rn(e){return Jc(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Pf(i,e,t){const o=Gc(e,t.path),l=o[1],p=IDBKeyRange.lowerBound(o);let C=!1;return Xc(i).Z({range:p,X:!0},(N,z,J)=>{const[ye,Me,at]=N;ye===e&&Me===l&&(C=!0),J.done()}).next(()=>C)}function Ic(i){return Ks(i,"mutations")}function Xc(i){return Ks(i,"documentMutations")}function Jc(i){return Ks(i,"mutationQueues")}class Cc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Cc(0)}static vn(){return new Cc(-1)}}class ed{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new Cc(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>gn.fromTimestamp(new Er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(l=>(l.highestListenSequenceNumber=t,o&&(l.lastRemoteSnapshotVersion=o.toTimestamp()),t>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=t),this.Sn(e,l)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>_u(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(In(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let l=0;const p=[];return _u(e).Z((C,N)=>{const z=_c(N);z.sequenceNumber<=t&&null===o.get(z.targetId)&&(l++,p.push(this.removeTargetData(e,z)))}).next(()=>st.waitFor(p)).next(()=>l)}forEachTarget(e,t){return _u(e).Z((o,l)=>{const p=_c(l);t(p)})}Vn(e){return Cg(e).get("targetGlobalKey").next(t=>(In(null!==t),t))}Sn(e,t){return Cg(e).put("targetGlobalKey",t)}Dn(e,t){return _u(e).put(dg(this.yt,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=El(t),l=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let p=null;return _u(e).Z({range:l,index:"queryTargetsIndex"},(C,N,z)=>{const J=_c(N);vo(t,J.target)&&(p=J,z.done())}).next(()=>p)}addMatchingKeys(e,t,o){const l=[],p=Pu(e);return t.forEach(C=>{const N=Os(C.path);l.push(p.put({targetId:o,path:N})),l.push(this.referenceDelegate.addReference(e,o,C))}),st.waitFor(l)}removeMatchingKeys(e,t,o){const l=Pu(e);return st.forEach(t,p=>{const C=Os(p.path);return st.waitFor([l.delete([o,C]),this.referenceDelegate.removeReference(e,o,p)])})}removeMatchingKeysForTargetId(e,t){const o=Pu(e),l=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(l)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),l=Pu(e);let p=Jn();return l.Z({range:o,X:!0},(C,N,z)=>{const J=Hl(C[1]),ye=new qt(J);p=p.add(ye)}).next(()=>p)}containsKey(e,t){const o=Os(t.path),l=IDBKeyRange.bound([o],[Is(o)],!1,!0);let p=0;return Pu(e).Z({index:"documentTargetsIndex",X:!0,range:l},([C,N],z,J)=>{0!==C&&(p++,J.done())}).next(()=>p>0)}ne(e,t){return _u(e).get(t).next(o=>o?_c(o):null)}}function _u(i){return Ks(i,"targets")}function Cg(i){return Ks(i,"targetGlobal")}function Pu(i){return Ks(i,"targetDocuments")}function wg([i,e],[t,o]){const l=Xt(i,t);return 0===l?Xt(e,o):l}class ay{constructor(e){this.xn=e,this.buffer=new gi(wg),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();wg(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ly{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ut("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,f.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){Ai(o)?Ut("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield xo(o)}yield t.Fn(3e5)}))}}class Tg{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return st.resolve(Bs.at);const o=new ay(t);return this.$n.forEachTarget(e,l=>o.On(l.sequenceNumber)).next(()=>this.$n.Ln(e,l=>o.On(l))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ut("LruGarbageCollector","Garbage collection skipped; disabled"),st.resolve(Dg)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dg):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let o,l,p,C,N,z,J;const ye=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Me=>(Me>this.params.maximumSequenceNumbersToCollect?(Ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Me}`),l=this.params.maximumSequenceNumbersToCollect):l=Me,C=Date.now(),this.nthSequenceNumber(e,l))).next(Me=>(o=Me,N=Date.now(),this.removeTargets(e,o,t))).next(Me=>(p=Me,z=Date.now(),this.removeOrphanedDocuments(e,o))).next(Me=>(J=Date.now(),ps()<=H.in.DEBUG&&Ut("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${C-ye}ms\n\tDetermined least recently used ${l} in `+(N-C)+`ms\n\tRemoved ${p} targets in `+(z-N)+`ms\n\tRemoved ${Me} documents in `+(J-z)+`ms\nTotal Duration: ${J-ye}ms`),st.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:p,documentsRemoved:Me})))}}class Sg{constructor(e,t){this.db=e,this.garbageCollector=new Tg(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(l=>o+l))}Un(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,l)=>t(l))}addReference(e,t,o){return td(e,o)}removeReference(e,t,o){return td(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return td(e,t)}Gn(e,t){return function(o,l){let p=!1;return Jc(o).tt(C=>Pf(o,C,l).next(N=>(N&&(p=!0),st.resolve(!N)))).next(()=>p)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let p=0;return this.Kn(e,(C,N)=>{if(N<=t){const z=this.Gn(e,C).next(J=>{if(!J)return p++,o.getEntry(e,C).next(()=>(o.removeEntry(C,gn.min()),Pu(e).delete([0,Os(C.path)])))});l.push(z)}}).next(()=>st.waitFor(l)).next(()=>o.apply(e)).next(()=>p)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return td(e,t)}Kn(e,t){const o=Pu(e);let l,p=Bs.at;return o.Z({index:"documentTargetsIndex"},([C,N],{path:z,sequenceNumber:J})=>{0===C?(p!==Bs.at&&t(new qt(Hl(l)),p),p=J,l=z):p=Bs.at}).next(()=>{p!==Bs.at&&t(new qt(Hl(l)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function td(i,e){return Pu(i).put((o=i.currentSequenceNumber,{targetId:0,path:Os(e.path),sequenceNumber:o}));var o}class Mh{constructor(){this.changes=new Nr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ni.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?st.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uy{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return wc(e).put(o)}removeEntry(e,t,o){return wc(e).delete(function(l,p){const C=l.path.toArray();return[C.slice(0,C.length-2),C[C.length-2],Rs(p),C[C.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=ni.newInvalidDocument(t);return wc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vd(t))},(l,p)=>{o=this.jn(t,p)}).next(()=>o)}Wn(e,t){let o={size:0,document:ni.newInvalidDocument(t)};return wc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vd(t))},(l,p)=>{o={document:this.jn(t,p),size:kd(p)}}).next(()=>o)}getEntries(e,t){let o=Gr();return this.zn(e,t,(l,p)=>{const C=this.jn(l,p);o=o.insert(l,C)}).next(()=>o)}Hn(e,t){let o=Gr(),l=new Pi(qt.comparator);return this.zn(e,t,(p,C)=>{const N=this.jn(p,C);o=o.insert(p,N),l=l.insert(p,kd(C))}).next(()=>({documents:o,Jn:l}))}zn(e,t,o){if(t.isEmpty())return st.resolve();let l=new gi(Of);t.forEach(z=>l=l.add(z));const p=IDBKeyRange.bound(Vd(l.first()),Vd(l.last())),C=l.getIterator();let N=C.getNext();return wc(e).Z({index:"documentKeyIndex",range:p},(z,J,ye)=>{const Me=qt.fromSegments([...J.prefixPath,J.collectionGroup,J.documentId]);for(;N&&Of(N,Me)<0;)o(N,null),N=C.getNext();N&&N.isEqual(Me)&&(o(N,J),N=C.hasNext()?C.getNext():null),N?ye.j(Vd(N)):ye.done()}).next(()=>{for(;N;)o(N,null),N=C.hasNext()?C.getNext():null})}getDocumentsMatchingQuery(e,t,o,l){const p=t.path,C=[p.popLast().toArray(),p.lastSegment(),Rs(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],N=[p.popLast().toArray(),p.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wc(e).W(IDBKeyRange.bound(C,N,!0)).next(z=>{let J=Gr();for(const ye of z){const Me=this.jn(qt.fromSegments(ye.prefixPath.concat(ye.collectionGroup,ye.documentId)),ye);Me.isFoundDocument()&&(ko(t,Me)||l.has(Me.key))&&(J=J.insert(Me.key,Me))}return J})}getAllFromCollectionGroup(e,t,o,l){let p=Gr();const C=Ag(t,o),N=Ag(t,Vs.max());return wc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(C,N,!0)},(z,J,ye)=>{const Me=this.jn(qt.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);p=p.insert(Me.key,Me),p.size===l&&ye.done()}).next(()=>p)}newChangeBuffer(e){return new Ud(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return bg(e).get("remoteDocumentGlobalKey").next(t=>(In(!!t),t))}Qn(e,t){return bg(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function If(i,e){let t;if(e.document)t=function Zu(i,e,t){const o=Xl(i,e.name),l=Wi(e.updateTime),p=e.createTime?Wi(e.createTime):gn.min(),C=new Ws({mapValue:{fields:e.fields}}),N=ni.newFoundDocument(o,l,p,C);return t&&N.setHasCommittedMutations(),t?N.setHasCommittedMutations():N}(i.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=qt.fromSegments(e.noDocument.path),l=yc(e.noDocument.readTime);t=ni.newNoDocument(o,l),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return pn();{const o=qt.fromSegments(e.unknownDocument.path),l=yc(e.unknownDocument.version);t=ni.newUnknownDocument(o,l)}}return e.readTime&&t.setReadTime(function(o){const l=new Er(o[0],o[1]);return gn.fromTimestamp(l)}(e.readTime)),t}(this.yt,t);if(!o.isNoDocument()||!o.version.isEqual(gn.min()))return o}return ni.newInvalidDocument(e)}}function Ph(i){return new uy(i)}class Ud extends Mh{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Nr(o=>o.toString(),(o,l)=>o.isEqual(l))}applyChanges(e){const t=[];let o=0,l=new gi((p,C)=>Xt(p.canonicalString(),C.canonicalString()));return this.changes.forEach((p,C)=>{const N=this.Xn.get(p);if(t.push(this.Yn.removeEntry(e,p,N.readTime)),C.isValidDocument()){const z=cg(this.Yn.yt,C);l=l.add(p.path.popLast());const J=kd(z);o+=J-N.size,t.push(this.Yn.addEntry(e,p,z))}else if(o-=N.size,this.trackRemovals){const z=cg(this.Yn.yt,C.convertToNoDocument(gn.min()));t.push(this.Yn.addEntry(e,p,z))}}),l.forEach(p=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,p))}),t.push(this.Yn.updateMetadata(e,o)),st.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:l})=>(l.forEach((p,C)=>{this.Xn.set(p,{size:C,readTime:o.get(p).readTime})}),o))}}function bg(i){return Ks(i,"remoteDocumentGlobal")}function wc(i){return Ks(i,"remoteDocumentsV14")}function Vd(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ag(i,e){const t=e.documentKey.path.toArray();return[i,Rs(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Of(i,e){const t=i.path.toArray(),o=e.path.toArray();let l=0;for(let p=0;p<t.length-2&&p<o.length-2;++p)if(l=Xt(t[p],o[p]),l)return l;return l=Xt(t.length,o.length),l||(l=Xt(t[t.length-2],o[o.length-2]),l||Xt(t[t.length-1],o[o.length-1]))}class Mg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Pg{constructor(e,t,o,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=l}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(l=>(o=l,this.remoteDocumentCache.getEntry(e,t))).next(l=>(null!==o&&g(o.mutation,l,gs.empty(),Er.now()),l))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,Jn()).next(()=>o))}getLocalViewOfDocuments(e,t,o=Jn()){const l=ki();return this.populateOverlays(e,l,t).next(()=>this.computeViews(e,t,l,o).next(p=>{let C=Da();return p.forEach((N,z)=>{C=C.insert(N,z.overlayedDocument)}),C}))}getOverlayedDocuments(e,t){const o=ki();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,Jn()))}populateOverlays(e,t,o){const l=[];return o.forEach(p=>{t.has(p)||l.push(p)}),this.documentOverlayCache.getOverlays(e,l).next(p=>{p.forEach((C,N)=>{t.set(C,N)})})}computeViews(e,t,o,l){let p=Gr();const C=La(),N=La();return t.forEach((z,J)=>{const ye=o.get(J.key);l.has(J.key)&&(void 0===ye||ye.mutation instanceof _e)?p=p.insert(J.key,J):void 0!==ye?(C.set(J.key,ye.mutation.getFieldMask()),g(ye.mutation,J,ye.mutation.getFieldMask(),Er.now())):C.set(J.key,gs.empty())}),this.recalculateAndSaveOverlays(e,p).next(z=>(z.forEach((J,ye)=>C.set(J,ye)),t.forEach((J,ye)=>{var Me;return N.set(J,new Mg(ye,null!==(Me=C.get(J))&&void 0!==Me?Me:null))}),N))}recalculateAndSaveOverlays(e,t){const o=La();let l=new Pi((C,N)=>C-N),p=Jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(C=>{for(const N of C)N.keys().forEach(z=>{const J=t.get(z);if(null===J)return;let ye=o.get(z)||gs.empty();ye=N.applyToLocalView(J,ye),o.set(z,ye);const Me=(l.get(N.batchId)||Jn()).add(z);l=l.insert(N.batchId,Me)})}).next(()=>{const C=[],N=l.getReverseIterator();for(;N.hasNext();){const z=N.getNext(),J=z.key,ye=z.value,Me=Ka();ye.forEach(at=>{if(!p.has(at)){const Mt=y(t.get(at),o.get(at));null!==Mt&&Me.set(at,Mt),p=p.add(at)}}),C.push(this.documentOverlayCache.saveOverlays(e,J,Me))}return st.waitFor(C)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return qt.isDocumentKey((l=t).path)&&null===l.collectionGroup&&0===l.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):uu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var l}getNextDocuments(e,t,o,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,l).next(p=>{const C=l-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,l-p.size):st.resolve(ki());let N=-1,z=p;return C.next(J=>st.forEach(J,(ye,Me)=>(N<Me.largestBatchId&&(N=Me.largestBatchId),p.get(ye)?st.resolve():this.remoteDocumentCache.getEntry(e,ye).next(at=>{z=z.insert(ye,at)}))).next(()=>this.populateOverlays(e,J,p)).next(()=>this.computeViews(e,z,J,Jn())).next(ye=>({batchId:N,changes:Ia(ye)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qt(t)).next(o=>{let l=Da();return o.isFoundDocument()&&(l=l.insert(o.key,o)),l})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const l=t.collectionGroup;let p=Da();return this.indexManager.getCollectionParents(e,l).next(C=>st.forEach(C,N=>{const z=(J=t,ye=N.child(l),new Ki(ye,null,J.explicitOrderBy.slice(),J.filters.slice(),J.limit,J.limitType,J.startAt,J.endAt));var J,ye;return this.getDocumentsMatchingCollectionQuery(e,z,o).next(J=>{J.forEach((ye,Me)=>{p=p.insert(ye,Me)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,t,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next(p=>(l=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,l))).next(p=>{l.forEach((N,z)=>{const J=z.getKey();null===p.get(J)&&(p=p.insert(J,ni.newInvalidDocument(J)))});let C=Da();return p.forEach((N,z)=>{const J=l.get(N);void 0!==J&&g(J.mutation,z,gs.empty(),Er.now()),ko(t,z)&&(C=C.insert(N,z))}),C})}}class nd{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return st.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:Wi(o.createTime)}),st.resolve()}getNamedQuery(e,t){return st.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:Cf(o.bundledQuery),readTime:Wi(o.readTime)}),st.resolve();var o}}class Ou{constructor(){this.overlays=new Pi(qt.comparator),this.es=new Map}getOverlay(e,t){return st.resolve(this.overlays.get(t))}getOverlays(e,t){const o=ki();return st.forEach(t,l=>this.getOverlay(e,l).next(p=>{null!==p&&o.set(l,p)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((l,p)=>{this.oe(e,t,p)}),st.resolve()}removeOverlaysForBatchId(e,t,o){const l=this.es.get(o);return void 0!==l&&(l.forEach(p=>this.overlays=this.overlays.remove(p)),this.es.delete(o)),st.resolve()}getOverlaysForCollection(e,t,o){const l=ki(),p=t.length+1,C=new qt(t.child("")),N=this.overlays.getIteratorFrom(C);for(;N.hasNext();){const z=N.getNext().value,J=z.getKey();if(!t.isPrefixOf(J.path))break;J.path.length===p&&z.largestBatchId>o&&l.set(z.getKey(),z)}return st.resolve(l)}getOverlaysForCollectionGroup(e,t,o,l){let p=new Pi((J,ye)=>J-ye);const C=this.overlays.getIterator();for(;C.hasNext();){const J=C.getNext().value;if(J.getKey().getCollectionGroup()===t&&J.largestBatchId>o){let ye=p.get(J.largestBatchId);null===ye&&(ye=ki(),p=p.insert(J.largestBatchId,ye)),ye.set(J.getKey(),J)}}const N=ki(),z=p.getIterator();for(;z.hasNext()&&(z.getNext().value.forEach((J,ye)=>N.set(J,ye)),!(N.size()>=l)););return st.resolve(N)}oe(e,t,o){const l=this.overlays.get(o.key);if(null!==l){const C=this.es.get(l.largestBatchId).delete(o.key);this.es.set(l.largestBatchId,C)}this.overlays=this.overlays.insert(o.key,new wh(t,o));let p=this.es.get(t);void 0===p&&(p=Jn(),this.es.set(t,p)),this.es.set(t,p.add(o.key))}}class Rf{constructor(){this.ns=new gi(ra.ss),this.rs=new gi(ra.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new ra(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new ra(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new qt(new Wn([])),o=new ra(t,e),l=new ra(t,e+1),p=[];return this.rs.forEachInRange([o,l],C=>{this.cs(C),p.push(C.key)}),p}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new qt(new Wn([])),o=new ra(t,e),l=new ra(t,e+1);let p=Jn();return this.rs.forEachInRange([o,l],C=>{p=p.add(C.key)}),p}containsKey(e){const t=new ra(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class ra{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return qt.comparator(e.key,t.key)||Xt(e._s,t._s)}static os(e,t){return Xt(e._s,t._s)||qt.comparator(e.key,t.key)}}class k_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new gi(ra.ss)}checkEmpty(e){return st.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,l){const p=this.ws;this.ws++;const C=new mc(p,t,o,l);this.mutationQueue.push(C);for(const N of l)this.gs=this.gs.add(new ra(N.key,p)),this.indexManager.addToCollectionParentIndex(e,N.key.path.popLast());return st.resolve(C)}lookupMutationBatch(e,t){return st.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const l=this.ps(t+1),p=l<0?0:l;return st.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return st.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return st.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new ra(t,0),l=new ra(t,Number.POSITIVE_INFINITY),p=[];return this.gs.forEachInRange([o,l],C=>{const N=this.ys(C._s);p.push(N)}),st.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new gi(Xt);return t.forEach(l=>{const p=new ra(l,0),C=new ra(l,Number.POSITIVE_INFINITY);this.gs.forEachInRange([p,C],N=>{o=o.add(N._s)})}),st.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,l=o.length+1;let p=o;qt.isDocumentKey(p)||(p=p.child(""));const C=new ra(new qt(p),0);let N=new gi(Xt);return this.gs.forEachWhile(z=>{const J=z.key.path;return!!o.isPrefixOf(J)&&(J.length===l&&(N=N.add(z._s)),!0)},C),st.resolve(this.Is(N))}Is(e){const t=[];return e.forEach(o=>{const l=this.ys(o);null!==l&&t.push(l)}),t}removeMutationBatch(e,t){In(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return st.forEach(t.mutations,l=>{const p=new ra(l.key,t.batchId);return o=o.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new ra(t,0),l=this.gs.firstAfterOrEqual(o);return st.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return st.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class U_{constructor(e){this.Es=e,this.docs=new Pi(qt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,l=this.docs.get(o),p=l?l.size:0,C=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:C}),this.size+=C-p,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return st.resolve(o?o.document.mutableCopy():ni.newInvalidDocument(t))}getEntries(e,t){let o=Gr();return t.forEach(l=>{const p=this.docs.get(l);o=o.insert(l,p?p.document.mutableCopy():ni.newInvalidDocument(l))}),st.resolve(o)}getDocumentsMatchingQuery(e,t,o,l){let p=Gr();const C=t.path,N=new qt(C.child("")),z=this.docs.getIteratorFrom(N);for(;z.hasNext();){const{key:J,value:{document:ye}}=z.getNext();if(!C.isPrefixOf(J.path))break;J.path.length>C.length+1||Ol(fl(ye),o)<=0||(l.has(ye.key)||ko(t,ye))&&(p=p.insert(ye.key,ye.mutableCopy()))}return st.resolve(p)}getAllFromCollectionGroup(e,t,o,l){pn()}As(e,t){return st.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new Og(this)}getSize(e){return st.resolve(this.size)}}class Og extends Mh{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,l)=>{l.isValidDocument()?t.push(this.Yn.addEntry(e,l)):this.Yn.removeEntry(o)}),st.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class V_{constructor(e){this.persistence=e,this.Rs=new Nr(t=>El(t),vo),this.lastRemoteSnapshotVersion=gn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Rf,this.targetCount=0,this.vs=Cc.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,l)=>t(l)),st.resolve()}getLastRemoteSnapshotVersion(e){return st.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return st.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),st.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),st.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Cc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,st.resolve()}updateTargetData(e,t){return this.Dn(t),st.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,st.resolve()}removeTargets(e,t,o){let l=0;const p=[];return this.Rs.forEach((C,N)=>{N.sequenceNumber<=t&&null===o.get(N.targetId)&&(this.Rs.delete(C),p.push(this.removeMatchingKeysForTargetId(e,N.targetId)),l++)}),st.waitFor(p).next(()=>l)}getTargetCount(e){return st.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return st.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),st.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const l=this.persistence.referenceDelegate,p=[];return l&&t.forEach(C=>{p.push(l.markPotentiallyOrphaned(e,C))}),st.waitFor(p)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),st.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return st.resolve(o)}containsKey(e,t){return st.resolve(this.Ps.containsKey(t))}}class xf{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Bs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new V_(this),this.indexManager=new Dc,this.remoteDocumentCache=new U_(o=>this.referenceDelegate.xs(o)),this.yt=new Df(t),this.Ns=new nd(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ou,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new k_(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){Ut("MemoryPersistence","Starting transaction:",e);const l=new Rg(this.Ss.next());return this.referenceDelegate.ks(),o(l).next(p=>this.referenceDelegate.Os(l).next(()=>p)).toPromise().then(p=>(l.raiseOnCommittedEvent(),p))}Ms(e,t){return st.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class Rg extends iu{constructor(e){super(),this.currentSequenceNumber=e}}class Oh{constructor(e){this.persistence=e,this.Fs=new Rf,this.$s=null}static Bs(e){return new Oh(e)}get Ls(){if(this.$s)return this.$s;throw pn()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),st.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),st.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),st.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(l=>this.Ls.add(l.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(l=>{l.forEach(p=>this.Ls.add(p.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return st.forEach(this.Ls,o=>{const l=qt.fromPath(o);return this.qs(e,l).next(p=>{p||t.removeEntry(l,gn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return st.or([()=>st.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class xg{constructor(e){this.yt=e}$(e,t,o,l){const p=new ga("createOrUpgrade",t);var N;o<1&&l>=1&&(e.createObjectStore("owner"),(N=e).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ih,{unique:!0}),N.createObjectStore("documentMutations"),Ng(e),function(N){N.createObjectStore("remoteDocuments")}(e));let C=st.resolve();return o<3&&l>=3&&(0!==o&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(e),Ng(e)),C=C.next(()=>function(N){const z=N.store("targetGlobal"),J={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:gn.min().toTimestamp(),targetCount:0};return z.put("targetGlobalKey",J)}(p))),o<4&&l>=4&&(0!==o&&(C=C.next(()=>function(N,z){return z.store("mutations").W().next(J=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ih,{unique:!0});const ye=z.store("mutations"),Me=J.map(at=>ye.put(at));return st.waitFor(Me)})}(e,p))),C=C.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&l>=5&&(C=C.next(()=>this.Us(p))),o<6&&l>=6&&(C=C.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(p)))),o<7&&l>=7&&(C=C.next(()=>this.Gs(p))),o<8&&l>=8&&(C=C.next(()=>this.Qs(e,p))),o<9&&l>=9&&(C=C.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&l>=10&&(C=C.next(()=>this.js(p))),o<11&&l>=11&&(C=C.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&l>=12&&(C=C.next(()=>{!function(N){const z=N.createObjectStore("documentOverlays",{keyPath:xe});z.createIndex("collectionPathOverlayIndex",_t,{unique:!1}),z.createIndex("collectionGroupOverlayIndex",Dt,{unique:!1})}(e)})),o<13&&l>=13&&(C=C.next(()=>function(N){const z=N.createObjectStore("remoteDocumentsV14",{keyPath:Ef});z.createIndex("documentKeyIndex",ug),z.createIndex("collectionGroupIndex",h)}(e)).next(()=>this.Ws(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&l>=14&&(C=C.next(()=>this.zs(e,p))),o<15&&l>=15&&(C=C.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:B}).createIndex("sequenceNumberIndex",Y,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:me}).createIndex("documentKeyIndex",be,{unique:!1})}(e))),C}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,l)=>{t+=kd(l)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Us(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(l=>st.forEach(l,p=>{const C=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",C).next(N=>st.forEach(N,z=>{In(z.userId===p.userId);const J=bu(this.yt,z);return Ig(e,p.userId,J).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(l=>{const p=[];return o.Z((C,N)=>{const z=new Wn(C),J=[0,Os(z)];p.push(t.get(J).next(ye=>ye?st.resolve():t.put({targetId:0,path:Os(z),sequenceNumber:l.highestListenSequenceNumber})))}).next(()=>st.waitFor(p))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:M});const o=t.store("collectionParents"),l=new bh,p=C=>{if(l.add(C)){const N=C.lastSegment(),z=C.popLast();return o.put({collectionId:N,parent:Os(z)})}};return t.store("remoteDocuments").Z({X:!0},(C,N)=>{const z=new Wn(C);return p(z.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([C,N,z],J)=>{const ye=Hl(N);return p(ye.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,l)=>{const p=_c(l),C=dg(this.yt,p);return t.put(C)})}Ws(e,t){const o=t.store("remoteDocuments"),l=[];return o.Z((p,C)=>{const N=t.store("remoteDocumentsV14"),z=(J=C,J.document?new qt(Wn.fromString(J.document.name).popFirst(5)):J.noDocument?qt.fromSegments(J.noDocument.path):J.unknownDocument?qt.fromSegments(J.unknownDocument.path):pn()).path.toArray();var J;const ye={prefixPath:z.slice(0,z.length-2),collectionGroup:z[z.length-2],documentId:z[z.length-1],readTime:C.readTime||[0,0],unknownDocument:C.unknownDocument,noDocument:C.noDocument,document:C.document,hasCommittedMutations:!!C.hasCommittedMutations};l.push(N.put(ye))}).next(()=>st.waitFor(l))}zs(e,t){const o=t.store("mutations"),l=Ph(this.yt),p=new xf(Oh.Bs,this.yt.ie);return o.W().next(C=>{const N=new Map;return C.forEach(z=>{var J;let ye=null!==(J=N.get(z.userId))&&void 0!==J?J:Jn();bu(this.yt,z).keys().forEach(Me=>ye=ye.add(Me)),N.set(z.userId,ye)}),st.forEach(N,(z,J)=>{const ye=new Ji(J),Me=zc.re(this.yt,ye),at=p.getIndexManager(ye),Mt=Ah.re(ye,this.yt,at,p.referenceDelegate);return new Pg(l,Mt,Me,at).recalculateAndSaveOverlaysForDocumentKeys(new mu(t,Bs.at),z).next()})})}}function Ng(i){i.createObjectStore("targetDocuments",{keyPath:c}).createIndex("documentTargetsIndex",E,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",u,{unique:!0}),i.createObjectStore("targetGlobal")}const Nf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class wl{constructor(e,t,o,l,p,C,N,z,J,ye,Me=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=p,this.window=C,this.document=N,this.Js=J,this.Ys=ye,this.Xs=Me,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=at=>Promise.resolve(),!wl.C())throw new P(dt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Sg(this,l),this.ii=t+"main",this.yt=new Df(z),this.ri=new Cs(this.ii,this.Xs,new xg(this.yt)),this.Cs=new ed(this.referenceDelegate,this.yt),this.remoteDocumentCache=Ph(this.yt),this.Ns=new F_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===ye&&Li("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(dt.FAILED_PRECONDITION,Nf);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Bs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,f.Z)(function*(l){if(t.started)return e(l)});return function(l){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,f.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,f.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ai(e))return Ut("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ut("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Bd(e).get("owner").next(t=>st.resolve(this.mi(t)))}gi(e){return jd(e).delete(this.clientId)}yi(){var e=this;return(0,f.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const l=Ks(o,"clientMetadata");return l.W().next(p=>{const C=e.Ii(p,18e5),N=p.filter(z=>-1===C.indexOf(z));return st.forEach(N,z=>l.delete(z.clientId)).next(()=>N)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?st.resolve(!0):Bd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new P(dt.FAILED_PRECONDITION,Nf);return!1}}return!(!this.networkEnabled||!this.inForeground)||jd(e).W().next(o=>void 0===this.Ii(o,5e3).find(l=>!(this.clientId===l.clientId||!(!this.networkEnabled&&l.networkEnabled||!this.inForeground&&l.inForeground&&this.networkEnabled===l.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ut("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,f.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new mu(t,Bs.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>jd(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Ah.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new oy(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return zc.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){Ut("IndexedDbPersistence","Starting transaction:",e);const l="readonly"===t?"readonly":"readwrite",p=15===(C=this.Xs)?Co:14===C?Ci:13===C?zn:12===C?En:11===C?At:void pn();var C;let N;return this.ri.runTransaction(e,l,p,z=>(N=new mu(z,this.Ss?this.Ss.next():Bs.at),"readwrite-primary"===t?this.fi(N).next(J=>!!J||this.di(N)).next(J=>{if(!J)throw Li(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new P(dt.FAILED_PRECONDITION,ru);return o(N)}).next(J=>this.wi(N).next(()=>J)):this.Vi(N).next(()=>o(N)))).then(z=>(N.raiseOnCommittedEvent(),z))}Vi(e){return Bd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(dt.FAILED_PRECONDITION,Nf)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bd(e).put("owner",t)}static C(){return Cs.C()}_i(e){const t=Bd(e);return t.get("owner").next(o=>this.mi(o)?(Ut("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):st.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Li(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,X.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ut("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Li("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Li("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bd(i){return Ks(i,"owner")}function jd(i){return Ks(i,"clientMetadata")}class Ff{constructor(e,t,o,l){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=l}static Ci(e,t){let o=Jn(),l=Jn();for(const p of t.docChanges)switch(p.type){case 0:o=o.add(p.doc.key);break;case 1:l=l.add(p.doc.key)}return new Ff(e,t.fromCache,o,l)}}class Lg{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,l){return this.ki(e,t).next(p=>p||this.Oi(e,t,l,o)).next(p=>p||this.Mi(e,t))}ki(e,t){if(Gu(t))return st.resolve(null);let o=$i(t);return this.indexManager.getIndexType(e,o).next(l=>0===l?null:(null!==t.limit&&1===l&&(t=Ul(t,null,"F"),o=$i(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(p=>{const C=Jn(...p);return this.Ni.getDocuments(e,C).next(N=>this.indexManager.getMinOffset(e,o).next(z=>{const J=this.Fi(t,N);return this.$i(t,J,C,z.readTime)?this.ki(e,Ul(t,null,"F")):this.Bi(e,J,t,z)}))})))}Oi(e,t,o,l){return Gu(t)||l.isEqual(gn.min())?this.Mi(e,t):this.Ni.getDocuments(e,o).next(p=>{const C=this.Fi(t,p);return this.$i(t,C,o,l)?this.Mi(e,t):(ps()<=H.in.DEBUG&&Ut("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Vl(t)),this.Bi(e,C,t,function Ua(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,l=gn.fromTimestamp(1e9===o?new Er(t+1,0):new Er(t,o));return new Vs(l,qt.empty(),e)}(l,-1)))})}Fi(e,t){let o=new gi(du(e));return t.forEach((l,p)=>{ko(e,p)&&(o=o.add(p))}),o}$i(e,t,o,l){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const p="F"===e.limitType?t.last():t.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(l)>0)}Mi(e,t){return ps()<=H.in.DEBUG&&Ut("QueryEngine","Using full collection scan to execute query:",Vl(t)),this.Ni.getDocumentsMatchingQuery(e,t,Vs.min())}Bi(e,t,o,l){return this.Ni.getDocumentsMatchingQuery(e,o,l).next(p=>(t.forEach(C=>{p=p.insert(C.key,C)}),p))}}class cy{constructor(e,t,o,l){this.persistence=e,this.Li=t,this.yt=l,this.qi=new Pi(Xt),this.Ui=new Nr(p=>El(p),vo),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pg(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function kf(i,e,t,o){return new cy(i,e,t,o)}function Fg(i,e){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,f.Z)(function*(i,e){const t=nn(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let l;return t.mutationQueue.getAllMutationBatches(o).next(p=>(l=p,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(p=>{const C=[],N=[];let z=Jn();for(const J of l){C.push(J.batchId);for(const ye of J.mutations)z=z.add(ye.key)}for(const J of p){N.push(J.batchId);for(const ye of J.mutations)z=z.add(ye.key)}return t.localDocuments.getDocuments(o,z).next(J=>({ji:J,removedBatchIds:C,addedBatchIds:N}))})})}),Uf.apply(this,arguments)}function wr(i){const e=nn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Ug(i,e){const t=nn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function id(i,e,t){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,f.Z)(function*(i,e,t){const o=nn(i),l=o.qi.get(e),p=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",p,C=>o.persistence.referenceDelegate.removeTarget(C,l)))}catch(C){if(!Ai(C))throw C;Ut("LocalStore",`Failed to update sequence numbers for target ${e}: ${C}`)}o.qi=o.qi.remove(e),o.Ui.delete(l.target)}),Rh.apply(this,arguments)}function xh(i,e,t){const o=nn(i);let l=gn.min(),p=Jn();return o.persistence.runTransaction("Execute query","readonly",C=>function(N,z,J){const ye=nn(N),Me=ye.Ui.get(J);return void 0!==Me?st.resolve(ye.qi.get(Me)):ye.Cs.getTargetData(z,J)}(o,C,$i(e)).next(N=>{if(N)return l=N.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(C,N.targetId).next(z=>{p=z})}).next(()=>o.Li.getDocumentsMatchingQuery(C,e,t?l:gn.min(),t?p:Jn())).next(N=>(function Bg(i,e,t){let o=i.Ki.get(e)||gn.min();t.forEach((l,p)=>{p.readTime.compareTo(o)>0&&(o=p.readTime)}),i.Ki.set(e,o)}(o,function cu(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}(e),N),{documents:N,Hi:p})))}class Hf{constructor(){this.activeTargetIds=al()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hy{constructor(){this.Lr=new Hf,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,o){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Hf,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fy{Ur(e){}shutdown(){}}class Tc{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ut("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ut("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const py={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gg{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Vh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,o,l,p){const C=this.ho(e,t);Ut("RestConnection","Sending: ",C,o);const N={};return this.lo(N,l,p),this.fo(e,C,N,o).then(z=>(Ut("RestConnection","Received: ",z),z),z=>{throw Po("RestConnection",`${e} failed with error: `,z,"url: ",C,"request:",o),z})}_o(e,t,o,l,p,C){return this.ao(e,t,o,l,p)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((l,p)=>e[p]=l),o&&o.headers.forEach((l,p)=>e[p]=l)}ho(e,t){return`${this.oo}/v1/${t}:${py[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,l){return new Promise((p,C)=>{const N=new cl;N.setWithCredentials(!0),N.listenOnce(li.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case Ml.NO_ERROR:const J=N.getResponseJson();Ut("Connection","XHR received:",JSON.stringify(J)),p(J);break;case Ml.TIMEOUT:Ut("Connection",'RPC "'+e+'" timed out'),C(new P(dt.DEADLINE_EXCEEDED,"Request time out"));break;case Ml.HTTP_ERROR:const ye=N.getStatus();if(Ut("Connection",'RPC "'+e+'" failed with status:',ye,"response text:",N.getResponseText()),ye>0){let Me=N.getResponseJson();Array.isArray(Me)&&(Me=Me[0]);const at=Me?.error;if(at&&at.status&&at.message){const Mt=function(jt){const Dn=jt.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(Dn)>=0?Dn:dt.UNKNOWN}(at.status);C(new P(Mt,at.message))}else C(new P(dt.UNKNOWN,"Server responded with status "+N.getStatus()))}else C(new P(dt.UNAVAILABLE,"Connection failed."));break;default:pn()}}finally{Ut("Connection",'RPC "'+e+'" completed.')}});const z=JSON.stringify(l);N.send(t,"POST",z,o,15)})}wo(e,t,o){const l=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=Ao(),C=Za(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(N.xmlHttpFactory=new fa({})),this.lo(N.initMessageHeaders,t,o),N.encodeInitMessageHeaders=!0;const z=l.join("");Ut("Connection","Creating WebChannel: "+z,N);const J=p.createWebChannel(z,N);let ye=!1,Me=!1;const at=new Gg({Hr:jt=>{Me?Ut("Connection","Not sending because WebChannel is closed:",jt):(ye||(Ut("Connection","Opening WebChannel transport."),J.open(),ye=!0),Ut("Connection","WebChannel sending:",jt),J.send(jt))},Jr:()=>J.close()}),Mt=(jt,Dn,jn)=>{jt.listen(Dn,ys=>{try{jn(ys)}catch(us){setTimeout(()=>{throw us},0)}})};return Mt(J,Aa.EventType.OPEN,()=>{Me||Ut("Connection","WebChannel transport opened.")}),Mt(J,Aa.EventType.CLOSE,()=>{Me||(Me=!0,Ut("Connection","WebChannel transport closed"),at.io())}),Mt(J,Aa.EventType.ERROR,jt=>{Me||(Me=!0,Po("Connection","WebChannel transport errored:",jt),at.io(new P(dt.UNAVAILABLE,"The operation could not be completed")))}),Mt(J,Aa.EventType.MESSAGE,jt=>{var Dn;if(!Me){const jn=jt.data[0];In(!!jn);const us=jn.error||(null===(Dn=jn[0])||void 0===Dn?void 0:Dn.error);if(us){Ut("Connection","WebChannel received error:",us);const wi=us.status;let aa=function(zi){const la=tn[zi];if(void 0!==la)return pr(la)}(wi),cs=us.message;void 0===aa&&(aa=dt.INTERNAL,cs="Unknown error status: "+wi+" with message "+us.message),Me=!0,at.io(new P(aa,cs)),J.close()}else Ut("Connection","WebChannel received:",jn),at.ro(jn)}}),Mt(C,Zs.STAT_EVENT,jt=>{jt.stat===ba.PROXY?Ut("Connection","Detected buffering proxy"):jt.stat===ba.NOPROXY&&Ut("Connection","Detected no buffering proxy")}),setTimeout(()=>{at.so()},0),at}}function $d(){return typeof document<"u"?document:null}function Gd(i){return new Io(i,!0)}class $f{constructor(e,t,o=1e3,l=1.5,p=6e4){this.Hs=e,this.timerId=t,this.mo=o,this.yo=l,this.po=p,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),l=Math.max(0,t-o);l>0&&Ut("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,l,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class zg{constructor(e,t,o,l,p,C,N,z){this.Hs=e,this.vo=o,this.Vo=l,this.connection=p,this.authCredentialsProvider=C,this.appCheckCredentialsProvider=N,this.listener=z,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new $f(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,f.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,f.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var o=this;return(0,f.Z)(function*(){o.Lo(),o.qo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():t&&t.code===dt.RESOURCE_EXHAUSTED?(Li(t.toString()),Li("Using maximum backoff delay to prevent overloading the backend."),o.xo.Ao()):t&&t.code===dt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Uo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,l])=>{this.So===t&&this.Go(o,l)},o=>{e(()=>{const l=new P(dt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(l)})})}Go(e,t){const o=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(l=>{o(()=>this.Qo(l))}),this.stream.onMessage(l=>{o(()=>this.onMessage(l))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,f.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ut("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ut("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gy extends zg{constructor(e,t,o,l,p,C){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,l,C),this.yt=p}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function ag(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(z=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===z?1:"REMOVE"===z?2:"CURRENT"===z?3:"RESET"===z?4:pn(),l=e.targetChange.targetIds||[],p=function(z,J){return z.wt?(In(void 0===J||"string"==typeof J),As.fromBase64String(J||"")):(In(void 0===J||J instanceof Uint8Array),As.fromUint8Array(J||new Uint8Array))}(i,e.targetChange.resumeToken),C=e.targetChange.cause,N=C&&function(z){const J=void 0===z.code?dt.UNKNOWN:pr(z.code);return new P(J,z.message||"")}(C);t=new ri(o,l,p,N||null)}else if("documentChange"in e){const o=e.documentChange,l=Xl(i,o.document.name),p=Wi(o.document.updateTime),C=o.document.createTime?Wi(o.document.createTime):gn.min(),N=new Ws({mapValue:{fields:o.document.fields}}),z=ni.newFoundDocument(l,p,C,N);t=new $n(o.targetIds||[],o.removedTargetIds||[],z.key,z)}else if("documentDelete"in e){const o=e.documentDelete,l=Xl(i,o.document),p=o.readTime?Wi(o.readTime):gn.min(),C=ni.newNoDocument(l,p);t=new $n([],o.removedTargetIds||[],C.key,C)}else if("documentRemove"in e){const o=e.documentRemove,l=Xl(i,o.document);t=new $n([],o.removedTargetIds||[],l,null)}else{if(!("filter"in e))return pn();{const o=e.filter,p=new On(o.count||0);t=new Zn(o.targetId,p)}}var z;return t}(this.yt,e),o=function(l){if(!("targetChange"in l))return gn.min();const p=l.targetChange;return p.targetIds&&p.targetIds.length?gn.min():p.readTime?Wi(p.readTime):gn.min()}(e);return this.listener.Wo(t,o)}zo(e){const t={};t.database=qu(this.yt),t.addTarget=function(l,p){let C;const N=p.target;return C=Ga(N)?{documents:Rd(l,N)}:{query:$c(l,N)},C.targetId=p.targetId,p.resumeToken.approximateByteSize()>0?C.resumeToken=na(l,p.resumeToken):p.snapshotVersion.compareTo(gn.min())>0&&(C.readTime=ta(l,p.snapshotVersion.toTimestamp())),C}(this.yt,e);const o=function xd(i,e){const t=function(o,l){switch(l){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Bo(t)}Ho(e){const t={};t.database=qu(this.yt),t.removeTarget=e,this.Bo(t)}}class my extends zg{constructor(e,t,o,l,p,C){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,l,C),this.yt=p,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(In(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function dc(i,e){return i&&i.length>0?(In(void 0!==e),i.map(t=>function(o,l){let p=Wi(o.updateTime?o.updateTime:l);return p.isEqual(gn.min())&&(p=Wi(l)),new v(p,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Wi(e.commitTime);return this.listener.Zo(o,t)}return In(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=qu(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Pd(this.yt,o))};this.Bo(t)}}class Kg extends class{}{constructor(e,t,o,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.yt=l,this.nu=!1}su(){if(this.nu)throw new P(dt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.connection.ao(e,t,o,l,p)).catch(l=>{throw"FirebaseError"===l.name?(l.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new P(dt.UNKNOWN,l.toString())})}_o(e,t,o,l){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,C])=>this.connection._o(e,t,o,p,C,l)).catch(p=>{throw"FirebaseError"===p.name?(p.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new P(dt.UNKNOWN,p.toString())})}terminate(){this.nu=!0}}class Yg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Li(t),this.ou=!1):Ut("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Gf{constructor(e,t,o,l,p){var C=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=p,this.mu.Ur(N=>{o.enqueueAndForget((0,f.Z)(function*(){var z;$l(C)&&(Ut("RemoteStore","Restarting streams for network reachability change."),yield(z=(0,f.Z)(function*(J){const ye=nn(J);ye._u.add(4),yield sd(ye),ye.gu.set("Unknown"),ye._u.delete(4),yield jh(ye)}),function(J){return z.apply(this,arguments)})(C))}))}),this.gu=new Yg(o,l)}}function jh(i){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,f.Z)(function*(i){if($l(i))for(const e of i.wu)yield e(!0)}),Wd.apply(this,arguments)}function sd(i){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,f.Z)(function*(i){for(const e of i.wu)yield e(!1)}),Qg.apply(this,arguments)}function xu(i,e){const t=nn(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Yf(t)?Kf(t):Ac(t).ko()&&Wf(t,e))}function od(i,e){const t=nn(i),o=Ac(t);t.du.delete(e),o.ko()&&zf(t,e),0===t.du.size&&(o.ko()?o.Fo():$l(t)&&t.gu.set("Unknown"))}function Wf(i,e){i.yu.Ot(e.targetId),Ac(i).zo(e)}function zf(i,e){i.yu.Ot(e),Ac(i).Ho(e)}function Kf(i){i.yu=new ll({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.du.get(e)||null}),Ac(i).start(),i.gu.uu()}function Yf(i){return $l(i)&&!Ac(i).No()&&i.du.size>0}function $l(i){return 0===nn(i)._u.size}function Sc(i){i.yu=void 0}function Qf(i){return bc.apply(this,arguments)}function bc(){return bc=(0,f.Z)(function*(i){i.du.forEach((e,t)=>{Wf(i,e)})}),bc.apply(this,arguments)}function qf(i,e){return ad.apply(this,arguments)}function ad(){return ad=(0,f.Z)(function*(i,e){Sc(i),Yf(i)?(i.gu.hu(e),Kf(i)):i.gu.set("Unknown")}),ad.apply(this,arguments)}function qg(i,e,t){return zd.apply(this,arguments)}function zd(){return zd=(0,f.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof ri&&2===e.state&&e.cause)try{yield(o=(0,f.Z)(function*(l,p){const C=p.cause;for(const N of p.targetIds)l.du.has(N)&&(yield l.remoteSyncer.rejectListen(N,C),l.du.delete(N),l.yu.removeTarget(N))}),function(l,p){return o.apply(this,arguments)})(i,e)}catch(o){Ut("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield ld(i,o)}else if(e instanceof $n?i.yu.Kt(e):e instanceof Zn?i.yu.Jt(e):i.yu.jt(e),!t.isEqual(gn.min()))try{const o=yield wr(i.localStore);t.compareTo(o)>=0&&(yield function(l,p){const C=l.yu.Zt(p);return C.targetChanges.forEach((N,z)=>{if(N.resumeToken.approximateByteSize()>0){const J=l.du.get(z);J&&l.du.set(z,J.withResumeToken(N.resumeToken,p))}}),C.targetMismatches.forEach(N=>{const z=l.du.get(N);if(!z)return;l.du.set(N,z.withResumeToken(As.EMPTY_BYTE_STRING,z.snapshotVersion)),zf(l,N);const J=new Jl(z.target,N,1,z.sequenceNumber);Wf(l,J)}),l.remoteSyncer.applyRemoteEvent(C)}(i,t))}catch(o){Ut("RemoteStore","Failed to raise snapshot:",o),yield ld(i,o)}var o}),zd.apply(this,arguments)}function ld(i,e,t){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,f.Z)(function*(i,e,t){if(!Ai(e))throw e;i._u.add(1),yield sd(i),i.gu.set("Offline"),t||(t=()=>wr(i.localStore)),i.asyncQueue.enqueueRetryable((0,f.Z)(function*(){Ut("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield jh(i)}))}),Kd.apply(this,arguments)}function Zf(i,e){return e().catch(t=>ld(i,t,e))}function ec(i){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,f.Z)(function*(i){const e=nn(i),t=tc(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;_y(e);)try{const l=yield Ug(e.localStore,o);if(null===l){0===e.fu.length&&t.Fo();break}o=l.batchId,Zg(e,l)}catch(l){yield ld(e,l)}Xg(e)&&Jf(e)}),Xf.apply(this,arguments)}function _y(i){return $l(i)&&i.fu.length<10}function Zg(i,e){i.fu.push(e);const t=tc(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Xg(i){return $l(i)&&!tc(i).No()&&i.fu.length>0}function Jf(i){tc(i).start()}function Jg(i){return ep.apply(this,arguments)}function ep(){return ep=(0,f.Z)(function*(i){tc(i).eu()}),ep.apply(this,arguments)}function vy(i){return Ya.apply(this,arguments)}function Ya(){return Ya=(0,f.Z)(function*(i){const e=tc(i);for(const t of i.fu)e.Xo(t.mutations)}),Ya.apply(this,arguments)}function Ey(i,e,t){return tp.apply(this,arguments)}function tp(){return tp=(0,f.Z)(function*(i,e,t){const o=i.fu.shift(),l=Ld.from(o,e,t);yield Zf(i,()=>i.remoteSyncer.applySuccessfulWrite(l)),yield ec(i)}),tp.apply(this,arguments)}function j_(i,e){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,f.Z)(function*(i,e){var t;e&&tc(i).Yo&&(yield(t=(0,f.Z)(function*(o,l){if(function bn(i){switch(i){default:return pn();case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0}}(p=l.code)&&p!==dt.ABORTED){const C=o.fu.shift();tc(o).Mo(),yield Zf(o,()=>o.remoteSyncer.rejectFailedWrite(C.batchId,l)),yield ec(o)}var p}),function(o,l){return t.apply(this,arguments)})(i,e)),Xg(i)&&Jf(i)}),Yd.apply(this,arguments)}function np(i,e){return rp.apply(this,arguments)}function rp(){return rp=(0,f.Z)(function*(i,e){const t=nn(i);t.asyncQueue.verifyOperationInProgress(),Ut("RemoteStore","RemoteStore received new credentials");const o=$l(t);t._u.add(3),yield sd(t),o&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield jh(t)}),rp.apply(this,arguments)}function sp(){return sp=(0,f.Z)(function*(i,e){const t=nn(i);e?(t._u.delete(2),yield jh(t)):e||(t._u.add(2),yield sd(t),t.gu.set("Unknown"))}),sp.apply(this,arguments)}function Ac(i){return i.pu||(i.pu=function(e,t,o){const l=nn(e);return l.su(),new gy(t,l.connection,l.authCredentials,l.appCheckCredentials,l.yt,o)}(i.datastore,i.asyncQueue,{Yr:Qf.bind(null,i),Zr:qf.bind(null,i),Wo:qg.bind(null,i)}),i.wu.push(function(){var e=(0,f.Z)(function*(t){t?(i.pu.Mo(),Yf(i)?Kf(i):i.gu.set("Unknown")):(yield i.pu.stop(),Sc(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function tc(i){return i.Iu||(i.Iu=function(e,t,o){const l=nn(e);return l.su(),new my(t,l.connection,l.authCredentials,l.appCheckCredentials,l.yt,o)}(i.datastore,i.asyncQueue,{Yr:Jg.bind(null,i),Zr:j_.bind(null,i),tu:vy.bind(null,i),Zo:Ey.bind(null,i)}),i.wu.push(function(){var e=(0,f.Z)(function*(t){t?(i.Iu.Mo(),yield ec(i)):(yield i.Iu.stop(),i.fu.length>0&&(Ut("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class op{constructor(e,t,o,l,p){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=l,this.removalCallback=p,this.deferred=new Q,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(C=>{})}static createAndSchedule(e,t,o,l,p){const C=Date.now()+o,N=new op(e,t,C,l,p);return N.start(o),N}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new P(dt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nc(i,e){if(Li("AsyncQueue",`${e}: ${i}`),Ai(i))return new P(dt.UNAVAILABLE,`${e}: ${i}`);throw i}class ud{constructor(e){this.comparator=e?(t,o)=>e(t,o)||qt.comparator(t.key,o.key):(t,o)=>qt.comparator(t.key,o.key),this.keyedMap=Da(),this.sortedSet=new Pi(this.comparator)}static emptySet(e){return new ud(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ud)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,p=o.getNext().key;if(!l.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new ud;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class em{constructor(){this.Tu=new Pi(qt.comparator)}track(e){const t=e.doc.key,o=this.Tu.get(t);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(t):1===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):pn():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,o)=>{e.push(o)}),e}}class cd{constructor(e,t,o,l,p,C,N,z,J){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=l,this.mutatedKeys=p,this.fromCache=C,this.syncStateChanged=N,this.excludesMetadataChanges=z,this.hasCachedResults=J}static fromInitialDocuments(e,t,o,l,p){const C=[];return t.forEach(N=>{C.push({type:0,doc:N})}),new cd(e,t,ud.emptySet(t),C,o,l,!0,!1,p)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Il(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==o[l].type||!t[l].doc.isEqual(o[l].doc))return!1;return!0}}class Dy{constructor(){this.Au=void 0,this.listeners=[]}}class Iy{constructor(){this.queries=new Nr(e=>Fo(e),Il),this.onlineState="Unknown",this.Ru=new Set}}function Gl(i,e){return Qd.apply(this,arguments)}function Qd(){return Qd=(0,f.Z)(function*(i,e){const t=nn(i),o=e.query;let l=!1,p=t.queries.get(o);if(p||(l=!0,p=new Dy),l)try{p.Au=yield t.onListen(o)}catch(C){const N=nc(C,`Initialization of query '${Vl(e.query)}' failed`);return void e.onError(N)}t.queries.set(o,p),p.listeners.push(e),e.bu(t.onlineState),p.Au&&e.Pu(p.Au)&&up(t)}),Qd.apply(this,arguments)}function ap(i,e){return lp.apply(this,arguments)}function lp(){return lp=(0,f.Z)(function*(i,e){const t=nn(i),o=e.query;let l=!1;const p=t.queries.get(o);if(p){const C=p.listeners.indexOf(e);C>=0&&(p.listeners.splice(C,1),l=0===p.listeners.length)}if(l)return t.queries.delete(o),t.onUnlisten(o)}),lp.apply(this,arguments)}function tm(i,e){const t=nn(i);let o=!1;for(const l of e){const C=t.queries.get(l.query);if(C){for(const N of C.listeners)N.Pu(l)&&(o=!0);C.Au=l}}o&&up(t)}function Cy(i,e,t){const o=nn(i),l=o.queries.get(e);if(l)for(const p of l.listeners)p.onError(t);o.queries.delete(e)}function up(i){i.Ru.forEach(e=>{e.next()})}class cp{constructor(e,t,o){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const l of e.docChanges)3!==l.type&&o.push(l);e=new cd(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Zd{constructor(e){this.key=e}}class Xd{constructor(e){this.key=e}}class Ty{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Jn(),this.mutatedKeys=Jn(),this.Gu=du(e),this.Qu=new ud(this.Gu)}get ju(){return this.qu}Wu(e,t){const o=t?t.zu:new em,l=t?t.Qu:this.Qu;let p=t?t.mutatedKeys:this.mutatedKeys,C=l,N=!1;const z="F"===this.query.limitType&&l.size===this.query.limit?l.last():null,J="L"===this.query.limitType&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((ye,Me)=>{const at=l.get(ye),Mt=ko(this.query,Me)?Me:null,jt=!!at&&this.mutatedKeys.has(at.key),Dn=!!Mt&&(Mt.hasLocalMutations||this.mutatedKeys.has(Mt.key)&&Mt.hasCommittedMutations);let jn=!1;at&&Mt?at.data.isEqual(Mt.data)?jt!==Dn&&(o.track({type:3,doc:Mt}),jn=!0):this.Hu(at,Mt)||(o.track({type:2,doc:Mt}),jn=!0,(z&&this.Gu(Mt,z)>0||J&&this.Gu(Mt,J)<0)&&(N=!0)):!at&&Mt?(o.track({type:0,doc:Mt}),jn=!0):at&&!Mt&&(o.track({type:1,doc:at}),jn=!0,(z||J)&&(N=!0)),jn&&(Mt?(C=C.add(Mt),p=Dn?p.add(ye):p.delete(ye)):(C=C.delete(ye),p=p.delete(ye)))}),null!==this.query.limit)for(;C.size>this.query.limit;){const ye="F"===this.query.limitType?C.last():C.first();C=C.delete(ye.key),p=p.delete(ye.key),o.track({type:1,doc:ye})}return{Qu:C,zu:o,$i:N,mutatedKeys:p}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const l=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const p=e.zu.Eu();p.sort((J,ye)=>function(Me,at){const Mt=jt=>{switch(jt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pn()}};return Mt(Me)-Mt(at)}(J.type,ye.type)||this.Gu(J.doc,ye.doc)),this.Ju(o);const C=t?this.Yu():[],N=0===this.Ku.size&&this.current?1:0,z=N!==this.Uu;return this.Uu=N,0!==p.length||z?{snapshot:new cd(this.query,e.Qu,l,p,e.mutatedKeys,0===N,z,!1,!!o&&o.resumeToken.approximateByteSize()>0),Xu:C}:{Xu:C}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new em,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Jn(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new Xd(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new Zd(o))}),t}tc(e){this.qu=e.Hi,this.Ku=Jn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return cd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class hp{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class H_{constructor(e){this.key=e,this.nc=!1}}class rm{constructor(e,t,o,l,p,C){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=l,this.currentUser=p,this.maxConcurrentLimboResolutions=C,this.sc={},this.ic=new Nr(N=>Fo(N),Il),this.rc=new Map,this.oc=new Set,this.uc=new Pi(qt.comparator),this.cc=new Map,this.ac=new Rf,this.hc={},this.lc=new Map,this.fc=Cc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function im(i,e){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,f.Z)(function*(i,e){const t=function ia(i){const e=nn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=sm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=My.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sy.bind(null,e),e.sc.Wo=tm.bind(null,e.eventManager),e.sc.wc=Cy.bind(null,e.eventManager),e}(i);let o,l;const p=t.ic.get(e);if(p)o=p.targetId,t.sharedClientState.addLocalQueryTarget(o),l=p.view.ec();else{const C=yield function rd(i,e){const t=nn(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let l;return t.Cs.getTargetData(o,e).next(p=>p?(l=p,st.resolve(l)):t.Cs.allocateTargetId(o).next(C=>(l=new Jl(e,C,0,o.currentSequenceNumber),t.Cs.addTargetData(o,l).next(()=>l))))}).then(o=>{const l=t.qi.get(o.targetId);return(null===l||o.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.qi=t.qi.insert(o.targetId,o),t.Ui.set(e,o.targetId)),o})}(t.localStore,$i(e));t.isPrimaryClient&&xu(t.remoteStore,C);const N=t.sharedClientState.addLocalQueryTarget(C.targetId);o=C.targetId,l=yield function $h(i,e,t,o,l){return Jd.apply(this,arguments)}(t,e,o,"current"===N,C.resumeToken)}return l}),Hh.apply(this,arguments)}function Jd(){return Jd=(0,f.Z)(function*(i,e,t,o,l){i._c=(Me,at,Mt)=>{return(jt=(0,f.Z)(function*(Dn,jn,ys,us){let wi=jn.view.Wu(ys);wi.$i&&(wi=yield xh(Dn.localStore,jn.query,!1).then(({documents:zi})=>jn.view.Wu(zi,wi)));const aa=us&&us.targetChanges.get(jn.targetId),cs=jn.view.applyChanges(wi,Dn.isPrimaryClient,aa);return zh(Dn,jn.targetId,cs.Xu),cs.snapshot}),function(Dn,jn,ys,us){return jt.apply(this,arguments)})(i,Me,at,Mt);var jt};const p=yield xh(i.localStore,e,!0),C=new Ty(e,p.Hi),N=C.Wu(p.documents),z=wn.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,l),J=C.applyChanges(N,i.isPrimaryClient,z);zh(i,t,J.Xu);const ye=new hp(e,t,C);return i.ic.set(e,ye),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),J.snapshot}),Jd.apply(this,arguments)}function Nu(i,e){return dd.apply(this,arguments)}function dd(){return dd=(0,f.Z)(function*(i,e){const t=nn(i),o=t.ic.get(e),l=t.rc.get(o.targetId);if(l.length>1)return t.rc.set(o.targetId,l.filter(p=>!Il(p,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield id(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),od(t.remoteStore,o.targetId),hd(t,o.targetId)}).catch(xo))):(hd(t,o.targetId),yield id(t.localStore,o.targetId,!0))}),dd.apply(this,arguments)}function Mc(){return Mc=(0,f.Z)(function*(i,e,t){const o=Lu(i);try{const l=yield function(p,C){const N=nn(p),z=Er.now(),J=C.reduce((at,Mt)=>at.add(Mt.key),Jn());let ye,Me;return N.persistence.runTransaction("Locally write mutations","readwrite",at=>{let Mt=Gr(),jt=Jn();return N.Gi.getEntries(at,J).next(Dn=>{Mt=Dn,Mt.forEach((jn,ys)=>{ys.isValidDocument()||(jt=jt.add(jn))})}).next(()=>N.localDocuments.getOverlayedDocuments(at,Mt)).next(Dn=>{ye=Dn;const jn=[];for(const ys of C){const us=b(ys,ye.get(ys.key).overlayedDocument);null!=us&&jn.push(new _e(ys.key,us,Hu(us.value.mapValue),D.exists(!0)))}return N.mutationQueue.addMutationBatch(at,z,jn,C)}).next(Dn=>{Me=Dn;const jn=Dn.applyToLocalDocumentSet(ye,jt);return N.documentOverlayCache.saveOverlays(at,Dn.batchId,jn)})}).then(()=>({batchId:Me.batchId,changes:Ia(ye)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(l.batchId),function(p,C,N){let z=p.hc[p.currentUser.toKey()];z||(z=new Pi(Xt)),z=z.insert(C,N),p.hc[p.currentUser.toKey()]=z}(o,l.batchId,t),yield eu(o,l.changes),yield ec(o.remoteStore)}catch(l){const p=nc(l,"Failed to persist write");t.reject(p)}}),Mc.apply(this,arguments)}function sm(i,e){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,f.Z)(function*(i,e){const t=nn(i);try{const o=yield function kg(i,e){const t=nn(i),o=e.snapshotVersion;let l=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const C=t.Gi.newChangeBuffer({trackRemovals:!0});l=t.qi;const N=[];e.targetChanges.forEach((ye,Me)=>{const at=l.get(Me);if(!at)return;N.push(t.Cs.removeMatchingKeys(p,ye.removedDocuments,Me).next(()=>t.Cs.addMatchingKeys(p,ye.addedDocuments,Me)));let Mt=at.withSequenceNumber(p.currentSequenceNumber);var jt,Dn,jn;e.targetMismatches.has(Me)?Mt=Mt.withResumeToken(As.EMPTY_BYTE_STRING,gn.min()).withLastLimboFreeSnapshotVersion(gn.min()):ye.resumeToken.approximateByteSize()>0&&(Mt=Mt.withResumeToken(ye.resumeToken,o)),l=l.insert(Me,Mt),Dn=Mt,jn=ye,(0===(jt=at).resumeToken.approximateByteSize()||Dn.snapshotVersion.toMicroseconds()-jt.snapshotVersion.toMicroseconds()>=3e8||jn.addedDocuments.size+jn.modifiedDocuments.size+jn.removedDocuments.size>0)&&N.push(t.Cs.updateTargetData(p,Mt))});let z=Gr(),J=Jn();if(e.documentUpdates.forEach(ye=>{e.resolvedLimboDocuments.has(ye)&&N.push(t.persistence.referenceDelegate.updateLimboDocument(p,ye))}),N.push(function Vf(i,e,t){let o=Jn(),l=Jn();return t.forEach(p=>o=o.add(p)),e.getEntries(i,o).next(p=>{let C=Gr();return t.forEach((N,z)=>{const J=p.get(N);z.isFoundDocument()!==J.isFoundDocument()&&(l=l.add(N)),z.isNoDocument()&&z.version.isEqual(gn.min())?(e.removeEntry(N,z.readTime),C=C.insert(N,z)):!J.isValidDocument()||z.version.compareTo(J.version)>0||0===z.version.compareTo(J.version)&&J.hasPendingWrites?(e.addEntry(z),C=C.insert(N,z)):Ut("LocalStore","Ignoring outdated watch update for ",N,". Current version:",J.version," Watch version:",z.version)}),{Wi:C,zi:l}})}(p,C,e.documentUpdates).next(ye=>{z=ye.Wi,J=ye.zi})),!o.isEqual(gn.min())){const ye=t.Cs.getLastRemoteSnapshotVersion(p).next(Me=>t.Cs.setTargetsMetadata(p,p.currentSequenceNumber,o));N.push(ye)}return st.waitFor(N).next(()=>C.apply(p)).next(()=>t.localDocuments.getLocalViewOfDocuments(p,z,J)).next(()=>z)}).then(p=>(t.qi=l,p))}(t.localStore,e);e.targetChanges.forEach((l,p)=>{const C=t.cc.get(p);C&&(In(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?C.nc=!0:l.modifiedDocuments.size>0?In(C.nc):l.removedDocuments.size>0&&(In(C.nc),C.nc=!1))}),yield eu(t,o,e)}catch(o){yield xo(o)}}),Wh.apply(this,arguments)}function fp(i,e,t){const o=nn(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const l=[];o.ic.forEach((p,C)=>{const N=C.view.bu(e);N.snapshot&&l.push(N.snapshot)}),function(p,C){const N=nn(p);N.onlineState=C;let z=!1;N.queries.forEach((J,ye)=>{for(const Me of ye.listeners)Me.bu(C)&&(z=!0)}),z&&up(N)}(o.eventManager,e),l.length&&o.sc.Wo(l),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Sy(i,e,t){return pp.apply(this,arguments)}function pp(){return pp=(0,f.Z)(function*(i,e,t){const o=nn(i);o.sharedClientState.updateQueryState(e,"rejected",t);const l=o.cc.get(e),p=l&&l.key;if(p){let C=new Pi(qt.comparator);C=C.insert(p,ni.newNoDocument(p,gn.min()));const N=Jn().add(p),z=new jl(gn.min(),new Map,new gi(Xt),C,N);yield sm(o,z),o.uc=o.uc.remove(p),o.cc.delete(e),Dp(o)}else yield id(o.localStore,e,!1).then(()=>hd(o,e,t)).catch(xo)}),pp.apply(this,arguments)}function eh(i,e){return gp.apply(this,arguments)}function gp(){return gp=(0,f.Z)(function*(i,e){const t=nn(i),o=e.batch.batchId;try{const l=yield function dy(i,e){const t=nn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const l=e.batch.keys(),p=t.Gi.newChangeBuffer({trackRemovals:!0});return function(C,N,z,J){const ye=z.batch,Me=ye.keys();let at=st.resolve();return Me.forEach(Mt=>{at=at.next(()=>J.getEntry(N,Mt)).next(jt=>{const Dn=z.docVersions.get(Mt);In(null!==Dn),jt.version.compareTo(Dn)<0&&(ye.applyToRemoteDocument(jt,z),jt.isValidDocument()&&(jt.setReadTime(z.commitVersion),J.addEntry(jt)))})}),at.next(()=>C.mutationQueue.removeMutationBatch(N,ye))}(t,o,e,p).next(()=>p.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,l,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(C){let N=Jn();for(let z=0;z<C.mutationResults.length;++z)C.mutationResults[z].transformResults.length>0&&(N=N.add(C.batch.mutations[z].key));return N}(e))).next(()=>t.localDocuments.getDocuments(o,l))})}(t.localStore,e);vp(t,o,null),_p(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield eu(t,l)}catch(l){yield xo(l)}}),gp.apply(this,arguments)}function $_(i,e,t){return mp.apply(this,arguments)}function mp(){return mp=(0,f.Z)(function*(i,e,t){const o=nn(i);try{const l=yield function(p,C){const N=nn(p);return N.persistence.runTransaction("Reject batch","readwrite-primary",z=>{let J;return N.mutationQueue.lookupMutationBatch(z,C).next(ye=>(In(null!==ye),J=ye.keys(),N.mutationQueue.removeMutationBatch(z,ye))).next(()=>N.mutationQueue.performConsistencyCheck(z)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(z,J,C)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(z,J)).next(()=>N.localDocuments.getDocuments(z,J))})}(o.localStore,e);vp(o,e,t),_p(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield eu(o,l)}catch(l){yield xo(l)}}),mp.apply(this,arguments)}function _p(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function vp(i,e,t){const o=nn(i);let l=o.hc[o.currentUser.toKey()];if(l){const p=l.get(e);p&&(t?p.reject(t):p.resolve(),l=l.remove(e)),o.hc[o.currentUser.toKey()]=l}}function hd(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.rc.get(e))i.ic.delete(o),t&&i.sc.wc(o,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(o=>{i.ac.containsKey(o)||om(i,o)})}function om(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(od(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),Dp(i))}function zh(i,e,t){for(const o of t)o instanceof Zd?(i.ac.addReference(o.key,e),Ep(i,o)):o instanceof Xd?(Ut("SyncEngine","Document no longer in limbo: "+o.key),i.ac.removeReference(o.key,e),i.ac.containsKey(o.key)||om(i,o.key)):pn()}function Ep(i,e){const t=e.key,o=t.path.canonicalString();i.uc.get(t)||i.oc.has(o)||(Ut("SyncEngine","New document in limbo: "+t),i.oc.add(o),Dp(i))}function Dp(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new qt(Wn.fromString(e)),o=i.fc.next();i.cc.set(o,new H_(t)),i.uc=i.uc.insert(t,o),xu(i.remoteStore,new Jl($i(Dl(t.path)),o,2,Bs.at))}}function eu(i,e,t){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,f.Z)(function*(i,e,t){const o=nn(i),l=[],p=[],C=[];var N;o.ic.isEmpty()||(o.ic.forEach((N,z)=>{C.push(o._c(z,e,t).then(J=>{if((J||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(z.targetId,J?.fromCache?"not-current":"current"),J){l.push(J);const ye=Ff.Ci(z.targetId,J);p.push(ye)}}))}),yield Promise.all(C),o.sc.Wo(l),yield(N=(0,f.Z)(function*(z,J){const ye=nn(z);try{yield ye.persistence.runTransaction("notifyLocalViewChanges","readwrite",Me=>st.forEach(J,at=>st.forEach(at.Si,Mt=>ye.persistence.referenceDelegate.addReference(Me,at.targetId,Mt)).next(()=>st.forEach(at.Di,Mt=>ye.persistence.referenceDelegate.removeReference(Me,at.targetId,Mt)))))}catch(Me){if(!Ai(Me))throw Me;Ut("LocalStore","Failed to update sequence numbers: "+Me)}for(const Me of J){const at=Me.targetId;if(!Me.fromCache){const Mt=ye.qi.get(at),Dn=Mt.withLastLimboFreeSnapshotVersion(Mt.snapshotVersion);ye.qi=ye.qi.insert(at,Dn)}}}),function(z,J){return N.apply(this,arguments)})(o.localStore,p))}),Ip.apply(this,arguments)}function Ay(i,e){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,f.Z)(function*(i,e){const t=nn(i);if(!t.currentUser.isEqual(e)){Ut("SyncEngine","User change. New user:",e.toKey());const o=yield Fg(t.localStore,e);t.currentUser=e,(l=t).lc.forEach(C=>{C.forEach(N=>{N.reject(new P(dt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.lc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield eu(t,o.ji)}var l}),Cp.apply(this,arguments)}function My(i,e){const t=nn(i),o=t.cc.get(e);if(o&&o.nc)return Jn().add(o.key);{let l=Jn();const p=t.rc.get(e);if(!p)return l;for(const C of p){const N=t.ic.get(C);l=l.unionWith(N.view.ju)}return l}}function Lu(i){const e=nn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$_.bind(null,e),e}class Tl{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,f.Z)(function*(){t.yt=Gd(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return kf(this.persistence,new Lg,e.initialUser,this.yt)}yc(e){return new xf(Oh.Bs,this.yt)}gc(e){return new hy}terminate(){var e=this;return(0,f.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ap extends Tl{constructor(e,t,o){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,f.Z)(function*(){yield t().call(o,e),yield o.Ac.initialize(o,e),yield Lu(o.Ac.syncEngine),yield ec(o.Ac.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return kf(this.persistence,new Lg,e.initialUser,this.yt)}Tc(e,t){return new ly(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const o=new Va(t,this.persistence);return new el(e.asyncQueue,o)}yc(e){const t=function Lf(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Fa.withCacheSize(this.cacheSizeBytes):Fa.DEFAULT;return new wl(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,function Wg(){return typeof window<"u"?window:null}(),$d(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new hy}}class rc{initialize(e,t){var o=this;return(0,f.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=l=>fp(o.syncEngine,l,1),o.remoteStore.remoteSyncer.handleCredentialChange=Ay.bind(null,o.syncEngine),yield function ip(i,e){return sp.apply(this,arguments)}(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Iy}createDatastore(e){const t=Gd(e.databaseInfo.databaseId),o=new Vh(e.databaseInfo);return new Kg(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,l=e.asyncQueue,p=N=>fp(this.syncEngine,N,0),C=Tc.C()?new Tc:new fy,new Gf(t,o,l,p,C);var t,o,l,p,C}createSyncEngine(e,t){return function(o,l,p,C,N,z,J){const ye=new rm(o,l,p,C,N,z);return J&&(ye.dc=!0),ye}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,f.Z)(function*(t){const o=nn(t);Ut("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield sd(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ic(i,e,t){if(!t)throw new P(dt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Oc(i){if(!qt.isDocumentKey(i))throw new P(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Rc(i){if(qt.isDocumentKey(i))throw new P(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Fu(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":pn()}function Wr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new P(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Fu(i);throw new P(dt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}const Mp=new Map;class Pp{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new P(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new P(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function gd(i,e,t,o){if(!0===e&&!0===o)throw new P(dt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class md{constructor(e,t,o,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new P(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new P(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pp(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ae;switch(t.type){case"gapi":return new dn(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new P(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Mp.get(e);t&&(Ut("ComponentProvider","Removing Datastore"),Mp.delete(e),t.terminate())}(this),Promise.resolve()}}class to{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new to(this.firestore,e,this._key)}}class sa{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new sa(this.firestore,e,this._query)}}class tu extends sa{constructor(e,t,o){super(e,t,Dl(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new to(this.firestore,null,new qt(e))}withConverter(e){return new tu(this.firestore,e,this._path)}}function cm(i,e,...t){if(i=(0,X.m9)(i),ic("collection","path",e),i instanceof md){const o=Wn.fromString(e,...t);return Rc(o),new tu(i,null,o)}{if(!(i instanceof to||i instanceof tu))throw new P(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Wn.fromString(e,...t));return Rc(o),new tu(i.firestore,null,o)}}function dm(i,e,...t){if(i=(0,X.m9)(i),1===arguments.length&&(e=or.R()),ic("doc","path",e),i instanceof md){const o=Wn.fromString(e,...t);return Oc(o),new to(i,null,new qt(o))}{if(!(i instanceof to||i instanceof tu))throw new P(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Wn.fromString(e,...t));return Oc(o),new to(i.firestore,i instanceof tu?i.converter:null,new qt(o))}}class th{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Li("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Fy{constructor(e,t,o,l){var p=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=l,this.user=Ji.UNAUTHENTICATED,this.clientId=or.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var C=(0,f.Z)(function*(N){Ut("FirestoreClient","Received user=",N.uid),yield p.authCredentialListener(N),p.user=N});return function(N){return C.apply(this,arguments)}}()),this.appCheckCredentials.start(o,C=>(Ut("FirestoreClient","Received new app check token=",C),this.appCheckCredentialListener(C,this.user)))}getConfiguration(){var e=this;return(0,f.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new P(dt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Q;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,f.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const l=nc(o,"Failed to shutdown persistence");t.reject(l)}})),t.promise}}function nh(i,e){return yd.apply(this,arguments)}function yd(){return yd=(0,f.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Ut("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var l=(0,f.Z)(function*(p){o.isEqual(p)||(yield Fg(e.localStore,p),o=p)});return function(p){return l.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),yd.apply(this,arguments)}function Xh(i,e){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,f.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield rh(i);Ut("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(l=>np(e.remoteStore,l)),i.setAppCheckTokenChangeListener((l,p)=>np(e.remoteStore,p)),i.onlineComponents=e}),Jh.apply(this,arguments)}function rh(i){return ef.apply(this,arguments)}function ef(){return ef=(0,f.Z)(function*(i){return i.offlineComponents||(Ut("FirestoreClient","Using default OfflineComponentProvider"),yield nh(i,new Tl)),i.offlineComponents}),ef.apply(this,arguments)}function ih(i){return sh.apply(this,arguments)}function sh(){return sh=(0,f.Z)(function*(i){return i.onlineComponents||(Ut("FirestoreClient","Using default OnlineComponentProvider"),yield Xh(i,new rc)),i.onlineComponents}),sh.apply(this,arguments)}function Nc(i){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,f.Z)(function*(i){const e=yield ih(i),t=e.eventManager;return t.onListen=im.bind(null,e.syncEngine),t.onUnlisten=Nu.bind(null,e.syncEngine),t}),Fp.apply(this,arguments)}class Em{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new $f(this,"async_queue_retry"),this.Wc=()=>{const t=$d();t&&Ut("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=$d();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=$d();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Q;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,f.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Ai(t))throw t;Ut("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(o=>{throw this.Kc=o,this.Gc=!1,Li("INTERNAL UNHANDLED ERROR: ",function(p){let C=p.message||"";return p.stack&&(C=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),C}(o)),o}).then(o=>(this.Gc=!1,o))));return this.Bc=t,t}enqueueAfterDelay(e,t,o){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const l=op.createAndSchedule(this,e,t,o,p=>this.Yc(p));return this.Uc.push(l),l}zc(){this.Kc&&pn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,f.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function sf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const l of["next","error","complete"])if(l in o&&"function"==typeof o[l])return!0;return!1}(i)}class Oi extends md{constructor(e,t,o,l){super(e,t,o,l),this.type="firestore",this._queue=new Em,this._persistenceKey=l?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||sc(this),this._firestoreClient.terminate()}}function ky(i,e){const t="object"==typeof i?i:(0,w.Mq)(),o="string"==typeof i?i:e||"(default)",l=(0,w.qX)(t,"firestore").getImmediate({identifier:o});if(!l._initialized){const p=(0,X.P0)("firestore");p&&function um(i,e,t,o={}){var l;const p=(i=Wr(i,md))._getSettings();if("firestore.googleapis.com"!==p.host&&p.host!==e&&Po("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},p),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let C,N;if("string"==typeof o.mockUserToken)C=o.mockUserToken,N=Ji.MOCK_USER;else{C=(0,X.Sg)(o.mockUserToken,null===(l=i._app)||void 0===l?void 0:l.options.projectId);const z=o.mockUserToken.sub||o.mockUserToken.user_id;if(!z)throw new P(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new Ji(z)}i._authCredentials=new Ce(new V(C,N))}}(l,...p)}return l}function no(i){return i._firestoreClient||sc(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function sc(i){var e;const t=i._freezeSettings(),o=(p=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Kl(i._databaseId,p,i._persistenceKey,(N=t).host,N.ssl,N.experimentalForceLongPolling,N.experimentalAutoDetectLongPolling,N.useFetchStreams));var p,N;i._firestoreClient=new Fy(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Bp(i,e){!function jp(i){if(i._initialized||i._terminated)throw new P(dt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}(i=Wr(i,Oi));const t=no(i),o=i._freezeSettings(),l=new rc;return function af(i,e,t){const o=new Q;return i.asyncQueue.enqueue((0,f.Z)(function*(){try{yield nh(i,t),yield Xh(i,e),o.resolve()}catch(l){const p=l;if(!("FirebaseError"===(C=p).name?C.code===dt.FAILED_PRECONDITION||C.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&C instanceof DOMException)||22===C.code||20===C.code||11===C.code))throw p;Po("Error enabling offline persistence. Falling back to persistence disabled: "+p),o.reject(p)}var C})).then(()=>o.promise)}(t,l,new Ap(l,o.cacheSizeBytes,e?.forceOwnership))}class Lc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lc(As.fromBase64String(e))}catch(t){throw new P(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lc(As.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _d{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new P(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lf{constructor(e){this._methodName=e}}class uf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}}const Im=/^__.*__$/;class vd{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new _e(e,this.data,this.fieldMask,t,this.fieldTransforms):new ne(e,this.data,t,this.fieldTransforms)}}class Cm{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new _e(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pn()}}class ah{constructor(e,t,o,l,p,C){this.settings=e,this.databaseId=t,this.yt=o,this.ignoreUndefinedProperties=l,void 0===p&&this.na(),this.fieldTransforms=p||[],this.fieldMask=C||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ah(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),l=this.ia({path:o,oa:!1});return l.ua(e),l}ca(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),l=this.ia({path:o,oa:!1});return l.na(),l}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return df(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(wm(this.sa)&&Im.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class By{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=o||Gd(e)}da(e,t,o,l=!1){return new ah({sa:e,methodName:t,fa:o,path:Or.emptyPath(),oa:!1,la:l},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Fc(i){const e=i._freezeSettings(),t=Gd(i._databaseId);return new By(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Tm(i,e,t,o,l,p={}){const C=i.da(p.merge||p.mergeFields?2:0,e,t,l);$p("Data must be an object, but it was:",C,o);const N=bm(o,C);let z,J;if(p.merge)z=new gs(C.fieldMask),J=C.fieldTransforms;else if(p.mergeFields){const ye=[];for(const Me of p.mergeFields){const at=Gp(e,Me,t);if(!C.contains(at))throw new P(dt.INVALID_ARGUMENT,`Field '${at}' is specified in your field mask but missing from your input data.`);zp(ye,at)||ye.push(at)}z=new gs(ye),J=C.fieldTransforms.filter(Me=>z.covers(Me.field))}else z=null,J=C.fieldTransforms;return new vd(new Ws(N),z,J)}class kc extends lf{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kc}}class Sl extends lf{_toFieldTransform(e){return new Bl(e.path,new za)}isEqual(e){return e instanceof Sl}}function Hp(i,e,t,o=!1){return oc(t,i.da(o?4:3,e))}function oc(i,e){if(Am(i=(0,X.m9)(i)))return $p("Unsupported field value:",e,i),bm(i,e);if(i instanceof lf)return function(t,o){if(!wm(o.sa))throw o.ha(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ha(`${t._methodName}() is not currently supported inside arrays`);const l=t._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,o){const l=[];let p=0;for(const C of t){let N=oc(C,o.aa(p));null==N&&(N={nullValue:"NULL_VALUE"}),l.push(N),p++}return{arrayValue:{values:l}}}(i,e)}return function(t,o){if(null===(t=(0,X.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zu(o.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const l=Er.fromDate(t);return{timestampValue:ta(o.yt,l)}}if(t instanceof Er){const l=new Er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ta(o.yt,l)}}if(t instanceof uf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Lc)return{bytesValue:na(o.yt,t._byteString)};if(t instanceof to){const l=o.databaseId,p=t.firestore._databaseId;if(!p.isEqual(l))throw o.ha(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ad(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ha(`Unsupported field value: ${Fu(t)}`)}(i,e)}function bm(i,e){const t={};return ma(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(i,(o,l)=>{const p=oc(l,e.ra(o));null!=p&&(t[o]=p)}),{mapValue:{fields:t}}}function Am(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Er||i instanceof uf||i instanceof Lc||i instanceof to||i instanceof lf)}function $p(i,e,t){if(!Am(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Fu(t);throw e.ha("an object"===o?i+" a custom object":i+" "+o)}var o}function Gp(i,e,t){if((e=(0,X.m9)(e))instanceof _d)return e._internalPath;if("string"==typeof e)return ac(i,e);throw df("Field path arguments must be of type string or ",i,!1,void 0,t)}const Wp=new RegExp("[~\\*/\\[\\]]");function ac(i,e,t){if(e.search(Wp)>=0)throw df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new _d(...e.split("."))._internalPath}catch{throw df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function df(i,e,t,o,l){const p=o&&!o.isEmpty(),C=void 0!==l;let N=`Function ${e}() called with invalid data`;t&&(N+=" (via `toFirestore()`)"),N+=". ";let z="";return(p||C)&&(z+=" (found",p&&(z+=` in field ${o}`),C&&(z+=` in document ${l}`),z+=")"),new P(dt.INVALID_ARGUMENT,N+i+z)}function zp(i,e){return i.some(t=>t.isEqual(e))}class Kp{constructor(e,t,o,l,p){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=l,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new to(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Hy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Hy extends Kp{data(){return super.data()}}function lh(i,e){return"string"==typeof e?ac(i,e):e instanceof _d?e._internalPath:e._delegate._internalPath}function Yp(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new P(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ed{}class uh extends Ed{}function Mm(i,e,...t){let o=[];e instanceof Ed&&o.push(e),o=o.concat(t),function(l){const p=l.filter(N=>N instanceof ku).length,C=l.filter(N=>N instanceof Dd).length;if(p>1||p>0&&C>0)throw new P(dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const l of o)i=l._apply(i);return i}class Dd extends uh{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new Dd(e,t,o)}_apply(e){const t=this._parse(e);return Vm(e._query,t),new sa(e.firestore,e.converter,ql(e._query,t))}_parse(e){const t=Fc(e.firestore);return function(l,p,C,N,z,J,ye){let Me;if(z.isKeyField()){if("array-contains"===J||"array-contains-any"===J)throw new P(dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on documentId().`);if("in"===J||"not-in"===J){Um(ye,J);const at=[];for(const Mt of ye)at.push(km(N,l,Mt));Me={arrayValue:{values:at}}}else Me=km(N,l,ye)}else"in"!==J&&"not-in"!==J&&"array-contains-any"!==J||Um(ye,J),Me=Hp(C,"where",ye,"in"===J||"not-in"===J);return Rr.create(z,J,Me)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ku extends Ed{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ku(e,t)}_parse(e){const t=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===t.length?t[0]:ui.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(o,l){let p=o;const C=l.getFlattenedFilters();for(const N of C)Vm(p,N),p=ql(p,N)}(e._query,t),new sa(e.firestore,e.converter,ql(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ch extends uh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ch(e,t)}_apply(e){const t=function(o,l,p){if(null!==o.startAt)throw new P(dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new P(dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const C=new rl(l,p);return function(N,z){if(null===Wu(N)){const J=Ql(N);null!==J&&Qp(0,J,z.field)}}(o,C),C}(e._query,this._field,this._direction);return new sa(e.firestore,e.converter,function(o,l){const p=o.explicitOrderBy.concat([l]);return new Ki(o.path,o.collectionGroup,p,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function xm(i,e="asc"){const t=e,o=lh("orderBy",i);return ch._create(o,t)}class Id extends uh{constructor(e,t,o){super(),this.type=e,this._limit=t,this._limitType=o}static _create(e,t,o){return new Id(e,t,o)}_apply(e){return new sa(e.firestore,e.converter,Ul(e._query,this._limit,this._limitType))}}function Nm(i){return function xc(i,e){if(e<=0)throw new P(dt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}("limit",i),Id._create("limit",i,"F")}class dh extends uh{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new dh(e,t,o)}_apply(e){const t=Fm(e,this.type,this._docOrFields,this._inclusive);return new sa(e.firestore,e.converter,(l=t,new Ki((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,l,o.endAt)));var o,l}}function Lm(...i){return dh._create("startAfter",i,!1)}class hh extends uh{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new hh(e,t,o)}_apply(e){const t=Fm(e,this.type,this._docOrFields,this._inclusive);return new sa(e.firestore,e.converter,(l=t,new Ki((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,l)));var o,l}}function Wy(...i){return hh._create("endBefore",i,!1)}function Fm(i,e,t,o){if(t[0]=(0,X.m9)(t[0]),t[0]instanceof Kp)return function(l,p,C,N,z){if(!N)throw new P(dt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${C}().`);const J=[];for(const ye of Wa(l))if(ye.field.isKeyField())J.push(W(p,N.key));else{const Me=N.data.field(ye.field);if(Lo(Me))throw new P(dt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ye.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Me){const at=ye.field.canonicalString();throw new P(dt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${at}' (used as the orderBy) does not exist.`)}J.push(Me)}return new ts(J,z)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const l=Fc(i.firestore);return function(p,C,N,z,J,ye){const Me=p.explicitOrderBy;if(J.length>Me.length)throw new P(dt.INVALID_ARGUMENT,`Too many arguments provided to ${z}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const at=[];for(let Mt=0;Mt<J.length;Mt++){const jt=J[Mt];if(Me[Mt].field.isKeyField()){if("string"!=typeof jt)throw new P(dt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${z}(), but got a ${typeof jt}`);if(!uu(p)&&-1!==jt.indexOf("/"))throw new P(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${z}() must be a plain document ID, but '${jt}' contains a slash.`);const Dn=p.path.child(Wn.fromString(jt));if(!qt.isDocumentKey(Dn))throw new P(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${z}() must result in a valid document path, but '${Dn}' is not because it contains an odd number of segments.`);const jn=new qt(Dn);at.push(W(C,jn))}else{const Dn=Hp(N,z,jt);at.push(Dn)}}return new ts(at,ye)}(i._query,i.firestore._databaseId,l,e,t,o)}}function km(i,e,t){if("string"==typeof(t=(0,X.m9)(t))){if(""===t)throw new P(dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uu(e)&&-1!==t.indexOf("/"))throw new P(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Wn.fromString(t));if(!qt.isDocumentKey(o))throw new P(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return W(i,new qt(o))}if(t instanceof to)return W(i,t._key);throw new P(dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fu(t)}.`)}function Um(i,e){if(!Array.isArray(i)||0===i.length)throw new P(dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new P(dt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Vm(i,e){if(e.isInequality()){const o=Ql(i),l=e.field;if(null!==o&&!o.isEqual(l))throw new P(dt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${o.toString()}' and '${l.toString()}'`);const p=Wu(i);null!==p&&Qp(0,l,p)}const t=function(o,l){for(const p of o)for(const C of p.getFlattenedFilters())if(l.indexOf(C.op)>=0)return C.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new P(dt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Qp(i,e,t){if(!t.isEqual(e))throw new P(dt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class zy{convertValue(e,t="none"){switch(_a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw pn()}}convertObject(e,t){const o={};return eo(e.fields,(l,p)=>{o[l]=this.convertValue(p,t)}),o}convertGeoPoint(e){return new uf(fi(e.latitude),fi(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Ba(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(ja(e));default:return null}}convertTimestamp(e){const t=Pa(e);return new Er(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Wn.fromString(e);In(vf(o));const l=new Mi(o.get(1),o.get(3)),p=new qt(o.popFirst(5));return l.isEqual(t)||Li(`Document ${p} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),p}}class Uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Cd extends Kp{constructor(e,t,o,l,p,C){super(e,t,o,l,C),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(lh("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class hf extends Cd{data(e={}){return super.data(e)}}class wd{constructor(e,t,o,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new Uc(l.hasPendingWrites,l.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new hf(this._firestore,this._userDataWriter,o.key,o,new Uc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let p=0;return o._snapshot.docChanges.map(C=>({type:"added",doc:new hf(o._firestore,o._userDataWriter,C.doc.key,C.doc,new Uc(o._snapshot.mutatedKeys.has(C.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:p++}))}{let p=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(C=>l||3!==C.type).map(C=>{const N=new hf(o._firestore,o._userDataWriter,C.doc.key,C.doc,new Uc(o._snapshot.mutatedKeys.has(C.doc.key),o._snapshot.fromCache),o.query.converter);let z=-1,J=-1;return 0!==C.type&&(z=p.indexOf(C.doc.key),p=p.delete(C.doc.key)),1!==C.type&&(p=p.add(C.doc),J=p.indexOf(C.doc.key)),{type:jm(C.type),doc:N,oldIndex:z,newIndex:J}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function jm(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pn()}}function Hm(i){i=Wr(i,to);const e=Wr(i.firestore,Oi);return function oh(i,e,t={}){const o=new Q;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function(l,p,C,N,z){const J=new th({next:Me=>{p.enqueueAndForget(()=>ap(l,ye));const at=Me.docs.has(C);!at&&Me.fromCache?z.reject(new P(dt.UNAVAILABLE,"Failed to get document because the client is offline.")):at&&Me.fromCache&&N&&"server"===N.source?z.reject(new P(dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):z.resolve(Me)},error:Me=>z.reject(Me)}),ye=new cp(Dl(C.path),J,{includeMetadataChanges:!0,Nu:!0});return Gl(l,ye)}(yield Nc(i),i.asyncQueue,e,t,o)})),o.promise}(no(e),i._key).then(t=>ph(e,i,t))}class Uu extends zy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new to(this.firestore,null,t)}}function $m(i){i=Wr(i,to);const e=Wr(i.firestore,Oi),t=no(e),o=new Uu(e);return function kp(i,e){const t=new Q;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return(o=(0,f.Z)(function*(l,p,C){try{const N=yield function(z,J){const ye=nn(z);return ye.persistence.runTransaction("read document","readonly",Me=>ye.localDocuments.getDocument(Me,J))}(l,p);N.isFoundDocument()?C.resolve(N):N.isNoDocument()?C.resolve(null):C.reject(new P(dt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const z=nc(N,`Failed to get document '${p} from cache`);C.reject(z)}}),function(l,p,C){return o.apply(this,arguments)})(yield function tf(i){return rh(i).then(e=>e.localStore)}(i),e,t);var o})),t.promise}(t,i._key).then(l=>new Cd(e,o,i._key,l,new Uc(null!==l&&l.hasLocalMutations,!0),i.converter))}function Gm(i){i=Wr(i,sa);const e=Wr(i.firestore,Oi),t=no(e),o=new Uu(e);return Yp(i._query),function Up(i,e,t={}){const o=new Q;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function(l,p,C,N,z){const J=new th({next:Me=>{p.enqueueAndForget(()=>ap(l,ye)),Me.fromCache&&"server"===N.source?z.reject(new P(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):z.resolve(Me)},error:Me=>z.reject(Me)}),ye=new cp(C,J,{includeMetadataChanges:!0,Nu:!0});return Gl(l,ye)}(yield Nc(i),i.asyncQueue,e,t,o)})),o.promise}(t,i._query).then(l=>new wd(e,o,i,l))}function Zp(i,e,t,...o){i=Wr(i,to);const l=Wr(i.firestore,Oi),p=Fc(l);let C;return C="string"==typeof(e=(0,X.m9)(e))||e instanceof _d?function zl(i,e,t,o,l,p){const C=i.da(1,e,t),N=[Gp(e,o,t)],z=[l];if(p.length%2!=0)throw new P(dt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let at=0;at<p.length;at+=2)N.push(Gp(e,p[at])),z.push(p[at+1]);const J=[],ye=Ws.empty();for(let at=N.length-1;at>=0;--at)if(!zp(J,N[at])){const Mt=N[at];let jt=z[at];jt=(0,X.m9)(jt);const Dn=C.ca(Mt);if(jt instanceof kc)J.push(Mt);else{const jn=oc(jt,Dn);null!=jn&&(J.push(Mt),ye.set(Mt,jn))}}const Me=new gs(J);return new Cm(ye,Me,C.fieldTransforms)}(p,"updateDoc",i._key,e,t,o):function Wl(i,e,t,o){const l=i.da(1,e,t);$p("Data must be an object, but it was:",l,o);const p=[],C=Ws.empty();eo(o,(z,J)=>{const ye=ac(e,z,t);J=(0,X.m9)(J);const Me=l.ca(ye);if(J instanceof kc)p.push(ye);else{const at=oc(J,Me);null!=at&&(p.push(ye),C.set(ye,at))}});const N=new gs(p);return new Cm(C,N,l.fieldTransforms)}(p,"updateDoc",i._key,e),ff(l,[C.toMutation(i._key,D.exists(!0))])}function Vc(i){return ff(Wr(i.firestore,Oi),[new Bt(i._key,D.none())])}function Zy(i,e){const t=Wr(i.firestore,Oi),o=dm(i),l=function qp(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}(i.converter,e);return ff(t,[Tm(Fc(i.firestore),"addDoc",o._key,l,null!==i.converter,{}).toMutation(o._key,D.exists(!1))]).then(()=>o)}function Xy(i,...e){var t,o,l;i=(0,X.m9)(i);let p={includeMetadataChanges:!1},C=0;"object"!=typeof e[C]||sf(e[C])||(p=e[C],C++);const N={includeMetadataChanges:p.includeMetadataChanges};if(sf(e[C])){const Me=e[C];e[C]=null===(t=Me.next)||void 0===t?void 0:t.bind(Me),e[C+1]=null===(o=Me.error)||void 0===o?void 0:o.bind(Me),e[C+2]=null===(l=Me.complete)||void 0===l?void 0:l.bind(Me)}let z,J,ye;if(i instanceof to)J=Wr(i.firestore,Oi),ye=Dl(i._key.path),z={next:Me=>{e[C]&&e[C](ph(J,i,Me))},error:e[C+1],complete:e[C+2]};else{const Me=Wr(i,sa);J=Wr(Me.firestore,Oi),ye=Me._query;const at=new Uu(J);z={next:Mt=>{e[C]&&e[C](new wd(J,at,Me,Mt))},error:e[C+1],complete:e[C+2]},Yp(i._query)}return function(Me,at,Mt,jt){const Dn=new th(jt),jn=new cp(at,Dn,Mt);return Me.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return Gl(yield Nc(Me),jn)})),()=>{Dn.bc(),Me.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return ap(yield Nc(Me),jn)}))}}(no(J),ye,N,z)}function ff(i,e){return function(t,o){const l=new Q;return t.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function Gh(i,e,t){return Mc.apply(this,arguments)}(yield function rf(i){return ih(i).then(e=>e.syncEngine)}(t),o,l)})),l.promise}(no(i),e)}function ph(i,e,t){const o=t.docs.get(e._key),l=new Uu(i);return new Cd(i,l,e._key,o,new Uc(t.hasPendingWrites,t.fromCache),e.converter)}function Td(){return new Sl("serverTimestamp")}!function(i,e=!0){Xs=w.Jn,(0,w.Xd)(new te.wA("firestore",(t,{instanceIdentifier:o,options:l})=>{const p=t.getProvider("app").getImmediate(),C=new Oi(new ft(t.getProvider("auth-internal")),new Xr(t.getProvider("app-check-internal")),function(N,z){if(!Object.prototype.hasOwnProperty.apply(N.options,["projectId"]))throw new P(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mi(N.options.projectId,z)}(p,o),p);return l=Object.assign({useFetchStreams:e},l),C._setSettings(l),C},"PUBLIC").setMultipleInstances(!0)),(0,w.KN)(Mo,"3.8.3",i),(0,w.KN)(Mo,"3.8.3","esm2017")}()},4147:we=>{we.exports={i8:"0.0.129"}}},we=>{we(we.s=6553)}]);