"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[4333],{4333:(T,f,i)=>{i.r(f),i.d(f,{EncapsulatingModule:()=>Z});var u=i(9808),h=i(4202),e=i(5e3);class m{}var c=i(3075);function M(t,n){if(1&t){const s=e.EpF();e.TgZ(0,"li",5),e._uU(1),e.TgZ(2,"a",6),e.NdJ("click",function(){const g=e.CHM(s).$implicit,l=e.oxw(2);return e.KtG(l.deleteMessage(g))}),e._uU(3,"Delete"),e.qZA()()}if(2&t){const s=n.$implicit;e.MGl("title","Created at ",s.createdAt.toTimeString(),""),e.xp6(1),e.hij(" ",s.text," \u2014 ")}}function y(t,n){if(1&t&&(e.TgZ(0,"ul"),e.YNc(1,M,4,2,"li",4),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngForOf",s.messages)}}const C=[{path:"",component:(()=>{class t{constructor(s){this.messageGateway=s,this.form={message:""},this.messages=[]}addMessage(){!this.form.message||(this.messageGateway.createMessage({text:this.form.message,createdAt:new Date}),this.form.message="")}deleteMessage(s){this.messageGateway.deleteMessage(s.id)}ngOnInit(){this.messageGateway.readMessagesAsStream().subscribe(a=>{this.messages=a},a=>{console.warn("Read Message As Stream Error"),console.error(a)})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(m))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-encapsulating"]],decls:11,vars:3,consts:[[4,"ngIf"],[3,"submit"],["type","text","name","message","autofocus","",3,"ngModel","ngModelChange"],["type","submit","value","Add Message"],[3,"title",4,"ngFor","ngForOf"],[3,"title"],[3,"click"]],template:function(s,a){1&s&&(e.TgZ(0,"h2"),e._uU(1),e.qZA(),e.YNc(2,y,2,1,"ul",0),e.TgZ(3,"form",1),e.NdJ("submit",function(){return a.addMessage()}),e.TgZ(4,"input",2),e.NdJ("ngModelChange",function(g){return a.form.message=g}),e.qZA(),e._UZ(5,"input",3),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"h2"),e._uU(8," Choose A Gateway Implementation\n"),e.qZA(),e.TgZ(9,"p"),e._uU(10,' Note that all of these implementations provide a "stream" I/O method.\n'),e.qZA()),2&s&&(e.xp6(1),e.hij(" You Have ",a.messages.length," Message(s)!\n"),e.xp6(1),e.Q6J("ngIf",a.messages.length),e.xp6(2),e.Q6J("ngModel",a.form.message))},dependencies:[u.sg,u.O5,c._Y,c.Fj,c.JJ,c.JL,c.On,c.F]}),t})()}];let v=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[h.Bz.forChild(C),h.Bz]}),t})();var A=i(259),o=i(6197),w=i(9751),x=i(2340);class E extends m{constructor(){super(),this.firebaseApp=(0,A.ZF)(x.N.firebaseConfig),this.firebaseDB=(0,o.N8)(this.firebaseApp)}createMessage(n){const s=(0,o.VF)((0,o.iH)(this.firebaseDB,"/2017-09-03/")),a={id:s.key,text:n.text,createdAt:n.createdAt.getTime()};return(0,o.t8)(s,a).catch(r=>{console.log("Create Message Failed"),console.error(r),console.log("Transfer Object:"),console.dir(a)}),Promise.resolve(s.key)}deleteMessage(n){return(0,o.Od)((0,o.iH)(this.firebaseDB,"/2017-09-03/"+n)).catch(s=>{console.log("Delete Message Failed"),console.error(s),console.log("ID:",n)}),Promise.resolve()}readMessages(){const n=(0,o.iH)(this.firebaseDB,"/2017-09-03/");return(0,o.U2)(n).then(a=>{const r=[];return a.exists()&&a.forEach(g=>{const l=g.val();return r.push({id:l.id,text:l.text,createdAt:new Date(l.createdAt)}),!1}),r})}readMessagesAsStream(){return new w.y(s=>{let a=(0,o.iH)(this.firebaseDB,"/2017-09-03/"),r=(0,o.jM)(a,l=>{const d=[];l.exists()?(l.forEach(b=>{const p=b.val();return d.push({id:p.id,text:p.text,createdAt:new Date(p.createdAt)}),!1}),s.next(d)):s.next(d)});return function g(){(0,o.S1)(a,"value",r),a=r=null}})}}let Z=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[{provide:m,useClass:E}],imports:[u.ez,v,c.u5]}),t})()}}]);