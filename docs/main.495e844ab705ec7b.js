"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[179],{2090:(Se,ae,D)=>{D.d(ae,{BH:()=>xe,DV:()=>qn,G6:()=>gn,GJ:()=>kt,L:()=>K,LL:()=>ir,P0:()=>Ke,Pz:()=>Ue,Sg:()=>Ct,UI:()=>is,US:()=>ie,Wl:()=>si,Yr:()=>At,ZR:()=>Cn,aH:()=>it,b$:()=>qe,cI:()=>pn,dS:()=>vr,eu:()=>fn,g5:()=>ee,gK:()=>Vr,gQ:()=>Sn,h$:()=>te,hl:()=>rr,hu:()=>I,m9:()=>Ot,ne:()=>Yn,p$:()=>Z,pd:()=>br,q4:()=>ze,r3:()=>Vn,ru:()=>rt,tV:()=>ne,uI:()=>Ze,ug:()=>ki,vZ:()=>dr,w1:()=>Xe,w9:()=>_t,xO:()=>qr,xb:()=>Fr,z$:()=>It,zd:()=>wr});const f={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},I=function(ge,ve){if(!ge)throw ee(ve)},ee=function(ge){return new Error("Firebase Database ("+f.SDK_VERSION+") INTERNAL ASSERT FAILED: "+ge)},B=function(ge){const ve=[];let Ie=0;for(let ot=0;ot<ge.length;ot++){let ke=ge.charCodeAt(ot);ke<128?ve[Ie++]=ke:ke<2048?(ve[Ie++]=ke>>6|192,ve[Ie++]=63&ke|128):55296==(64512&ke)&&ot+1<ge.length&&56320==(64512&ge.charCodeAt(ot+1))?(ke=65536+((1023&ke)<<10)+(1023&ge.charCodeAt(++ot)),ve[Ie++]=ke>>18|240,ve[Ie++]=ke>>12&63|128,ve[Ie++]=ke>>6&63|128,ve[Ie++]=63&ke|128):(ve[Ie++]=ke>>12|224,ve[Ie++]=ke>>6&63|128,ve[Ie++]=63&ke|128)}return ve},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,ve){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ie=ve?this.byteToCharMapWebSafe_:this.byteToCharMap_,ot=[];for(let ke=0;ke<ge.length;ke+=3){const Ft=ge[ke],Wt=ke+1<ge.length,Re=Wt?ge[ke+1]:0,Oe=ke+2<ge.length,he=Oe?ge[ke+2]:0;let Vt=(15&Re)<<2|he>>6,sn=63&he;Oe||(sn=64,Wt||(Vt=64)),ot.push(Ie[Ft>>2],Ie[(3&Ft)<<4|Re>>4],Ie[Vt],Ie[sn])}return ot.join("")},encodeString(ge,ve){return this.HAS_NATIVE_SUPPORT&&!ve?btoa(ge):this.encodeByteArray(B(ge),ve)},decodeString(ge,ve){return this.HAS_NATIVE_SUPPORT&&!ve?atob(ge):function(ge){const ve=[];let Ie=0,ot=0;for(;Ie<ge.length;){const ke=ge[Ie++];if(ke<128)ve[ot++]=String.fromCharCode(ke);else if(ke>191&&ke<224){const Ft=ge[Ie++];ve[ot++]=String.fromCharCode((31&ke)<<6|63&Ft)}else if(ke>239&&ke<365){const Oe=((7&ke)<<18|(63&ge[Ie++])<<12|(63&ge[Ie++])<<6|63&ge[Ie++])-65536;ve[ot++]=String.fromCharCode(55296+(Oe>>10)),ve[ot++]=String.fromCharCode(56320+(1023&Oe))}else{const Ft=ge[Ie++],Wt=ge[Ie++];ve[ot++]=String.fromCharCode((15&ke)<<12|(63&Ft)<<6|63&Wt)}}return ve.join("")}(this.decodeStringToByteArray(ge,ve))},decodeStringToByteArray(ge,ve){this.init_();const Ie=ve?this.charToByteMapWebSafe_:this.charToByteMap_,ot=[];for(let ke=0;ke<ge.length;){const Ft=Ie[ge.charAt(ke++)],Re=ke<ge.length?Ie[ge.charAt(ke)]:0;++ke;const he=ke<ge.length?Ie[ge.charAt(ke)]:64;++ke;const Ye=ke<ge.length?Ie[ge.charAt(ke)]:64;if(++ke,null==Ft||null==Re||null==he||null==Ye)throw Error();ot.push(Ft<<2|Re>>4),64!==he&&(ot.push(Re<<4&240|he>>2),64!==Ye&&ot.push(he<<6&192|Ye))}return ot},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}},te=function(ge){const ve=B(ge);return ie.encodeByteArray(ve,!0)},K=function(ge){return te(ge).replace(/\./g,"")},ne=function(ge){try{return ie.decodeString(ge,!0)}catch(ve){console.error("base64Decode failed: ",ve)}return null};function Z(ge){return le(void 0,ge)}function le(ge,ve){if(!(ve instanceof Object))return ve;switch(ve.constructor){case Date:return new Date(ve.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return ve}for(const Ie in ve)!ve.hasOwnProperty(Ie)||!fe(Ie)||(ge[Ie]=le(ge[Ie],ve[Ie]));return ge}function fe(ge){return"__proto__"!==ge}const Be=()=>{try{return function Le(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ge=process.env.__FIREBASE_DEFAULTS__;return ge?JSON.parse(ge):void 0})()||(()=>{if(typeof document>"u")return;let ge;try{ge=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ve=ge&&ne(ge[1]);return ve&&JSON.parse(ve)})()}catch(ge){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ge}`)}},ze=ge=>{var ve,Ie;return null===(Ie=null===(ve=Be())||void 0===ve?void 0:ve.emulatorHosts)||void 0===Ie?void 0:Ie[ge]},Ke=ge=>{const ve=ze(ge);if(!ve)return;const Ie=ve.lastIndexOf(":");if(Ie<=0||Ie+1===ve.length)throw new Error(`Invalid host ${ve} with no separate hostname and port!`);const ot=parseInt(ve.substring(Ie+1),10);return"["===ve[0]?[ve.substring(1,Ie-1),ot]:[ve.substring(0,Ie),ot]},it=()=>{var ge;return null===(ge=Be())||void 0===ge?void 0:ge.config},Ue=ge=>{var ve;return null===(ve=Be())||void 0===ve?void 0:ve[`_${ge}`]};class xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ve,Ie)=>{this.resolve=ve,this.reject=Ie})}wrapCallback(ve){return(Ie,ot)=>{Ie?this.reject(Ie):this.resolve(ot),"function"==typeof ve&&(this.promise.catch(()=>{}),1===ve.length?ve(Ie):ve(Ie,ot))}}}function Ct(ge,ve){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ot=ve||"demo-project",ke=ge.iat||0,Ft=ge.sub||ge.user_id;if(!Ft)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Wt=Object.assign({iss:`https://securetoken.google.com/${ot}`,aud:ot,iat:ke,exp:ke+3600,auth_time:ke,sub:Ft,user_id:Ft,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[K(JSON.stringify({alg:"none",type:"JWT"})),K(JSON.stringify(Wt)),""].join(".")}function It(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ze(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function rt(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function qe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xe(){const ge=It();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function At(){return!0===f.NODE_CLIENT||!0===f.NODE_ADMIN}function gn(){return!function Pt(){var ge;const ve=null===(ge=Be())||void 0===ge?void 0:ge.forceEnvironment;if("node"===ve)return!0;if("browser"===ve)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rr(){try{return"object"==typeof indexedDB}catch{return!1}}function fn(){return new Promise((ge,ve)=>{try{let Ie=!0;const ot="validate-browser-context-for-indexeddb-analytics-module",ke=self.indexedDB.open(ot);ke.onsuccess=()=>{ke.result.close(),Ie||self.indexedDB.deleteDatabase(ot),ge(!0)},ke.onupgradeneeded=()=>{Ie=!1},ke.onerror=()=>{var Ft;ve((null===(Ft=ke.error)||void 0===Ft?void 0:Ft.message)||"")}}catch(Ie){ve(Ie)}})}class Cn extends Error{constructor(ve,Ie,ot){super(Ie),this.code=ve,this.customData=ot,this.name="FirebaseError",Object.setPrototypeOf(this,Cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ir.prototype.create)}}class ir{constructor(ve,Ie,ot){this.service=ve,this.serviceName=Ie,this.errors=ot}create(ve,...Ie){const ot=Ie[0]||{},ke=`${this.service}/${ve}`,Ft=this.errors[ve],Wt=Ft?function Kr(ge,ve){return ge.replace(Pn,(Ie,ot)=>{const ke=ve[ot];return null!=ke?String(ke):`<${ot}?>`})}(Ft,ot):"Error";return new Cn(ke,`${this.serviceName}: ${Wt} (${ke}).`,ot)}}const Pn=/\{\$([^}]+)}/g;function pn(ge){return JSON.parse(ge)}function si(ge){return JSON.stringify(ge)}const Tt=function(ge){let ve={},Ie={},ot={},ke="";try{const Ft=ge.split(".");ve=pn(ne(Ft[0])||""),Ie=pn(ne(Ft[1])||""),ke=Ft[2],ot=Ie.d||{},delete Ie.d}catch{}return{header:ve,claims:Ie,data:ot,signature:ke}},_t=function(ge){const Ie=Tt(ge).claims;return!!Ie&&"object"==typeof Ie&&Ie.hasOwnProperty("iat")},kt=function(ge){const ve=Tt(ge).claims;return"object"==typeof ve&&!0===ve.admin};function Vn(ge,ve){return Object.prototype.hasOwnProperty.call(ge,ve)}function qn(ge,ve){if(Object.prototype.hasOwnProperty.call(ge,ve))return ge[ve]}function Fr(ge){for(const ve in ge)if(Object.prototype.hasOwnProperty.call(ge,ve))return!1;return!0}function is(ge,ve,Ie){const ot={};for(const ke in ge)Object.prototype.hasOwnProperty.call(ge,ke)&&(ot[ke]=ve.call(Ie,ge[ke],ke,ge));return ot}function dr(ge,ve){if(ge===ve)return!0;const Ie=Object.keys(ge),ot=Object.keys(ve);for(const ke of Ie){if(!ot.includes(ke))return!1;const Ft=ge[ke],Wt=ve[ke];if(cn(Ft)&&cn(Wt)){if(!dr(Ft,Wt))return!1}else if(Ft!==Wt)return!1}for(const ke of ot)if(!Ie.includes(ke))return!1;return!0}function cn(ge){return null!==ge&&"object"==typeof ge}function qr(ge){const ve=[];for(const[Ie,ot]of Object.entries(ge))Array.isArray(ot)?ot.forEach(ke=>{ve.push(encodeURIComponent(Ie)+"="+encodeURIComponent(ke))}):ve.push(encodeURIComponent(Ie)+"="+encodeURIComponent(ot));return ve.length?"&"+ve.join("&"):""}function wr(ge){const ve={};return ge.replace(/^\?/,"").split("&").forEach(ot=>{if(ot){const[ke,Ft]=ot.split("=");ve[decodeURIComponent(ke)]=decodeURIComponent(Ft)}}),ve}function br(ge){const ve=ge.indexOf("?");if(!ve)return"";const Ie=ge.indexOf("#",ve);return ge.substring(ve,Ie>0?Ie:void 0)}class Sn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ve=1;ve<this.blockSize;++ve)this.pad_[ve]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ve,Ie){Ie||(Ie=0);const ot=this.W_;if("string"==typeof ve)for(let Ye=0;Ye<16;Ye++)ot[Ye]=ve.charCodeAt(Ie)<<24|ve.charCodeAt(Ie+1)<<16|ve.charCodeAt(Ie+2)<<8|ve.charCodeAt(Ie+3),Ie+=4;else for(let Ye=0;Ye<16;Ye++)ot[Ye]=ve[Ie]<<24|ve[Ie+1]<<16|ve[Ie+2]<<8|ve[Ie+3],Ie+=4;for(let Ye=16;Ye<80;Ye++){const Vt=ot[Ye-3]^ot[Ye-8]^ot[Ye-14]^ot[Ye-16];ot[Ye]=4294967295&(Vt<<1|Vt>>>31)}let he,Me,ke=this.chain_[0],Ft=this.chain_[1],Wt=this.chain_[2],Re=this.chain_[3],Oe=this.chain_[4];for(let Ye=0;Ye<80;Ye++){Ye<40?Ye<20?(he=Re^Ft&(Wt^Re),Me=1518500249):(he=Ft^Wt^Re,Me=1859775393):Ye<60?(he=Ft&Wt|Re&(Ft|Wt),Me=2400959708):(he=Ft^Wt^Re,Me=3395469782);const Vt=(ke<<5|ke>>>27)+he+Oe+Me+ot[Ye]&4294967295;Oe=Re,Re=Wt,Wt=4294967295&(Ft<<30|Ft>>>2),Ft=ke,ke=Vt}this.chain_[0]=this.chain_[0]+ke&4294967295,this.chain_[1]=this.chain_[1]+Ft&4294967295,this.chain_[2]=this.chain_[2]+Wt&4294967295,this.chain_[3]=this.chain_[3]+Re&4294967295,this.chain_[4]=this.chain_[4]+Oe&4294967295}update(ve,Ie){if(null==ve)return;void 0===Ie&&(Ie=ve.length);const ot=Ie-this.blockSize;let ke=0;const Ft=this.buf_;let Wt=this.inbuf_;for(;ke<Ie;){if(0===Wt)for(;ke<=ot;)this.compress_(ve,ke),ke+=this.blockSize;if("string"==typeof ve){for(;ke<Ie;)if(Ft[Wt]=ve.charCodeAt(ke),++Wt,++ke,Wt===this.blockSize){this.compress_(Ft),Wt=0;break}}else for(;ke<Ie;)if(Ft[Wt]=ve[ke],++Wt,++ke,Wt===this.blockSize){this.compress_(Ft),Wt=0;break}}this.inbuf_=Wt,this.total_+=Ie}digest(){const ve=[];let Ie=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ke=this.blockSize-1;ke>=56;ke--)this.buf_[ke]=255&Ie,Ie/=256;this.compress_(this.buf_);let ot=0;for(let ke=0;ke<5;ke++)for(let Ft=24;Ft>=0;Ft-=8)ve[ot]=this.chain_[ke]>>Ft&255,++ot;return ve}}function Yn(ge,ve){const Ie=new hr(ge,ve);return Ie.subscribe.bind(Ie)}class hr{constructor(ve,Ie){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ie,this.task.then(()=>{ve(this)}).catch(ot=>{this.error(ot)})}next(ve){this.forEachObserver(Ie=>{Ie.next(ve)})}error(ve){this.forEachObserver(Ie=>{Ie.error(ve)}),this.close(ve)}complete(){this.forEachObserver(ve=>{ve.complete()}),this.close()}subscribe(ve,Ie,ot){let ke;if(void 0===ve&&void 0===Ie&&void 0===ot)throw new Error("Missing Observer.");ke=function Zt(ge,ve){if("object"!=typeof ge||null===ge)return!1;for(const Ie of ve)if(Ie in ge&&"function"==typeof ge[Ie])return!0;return!1}(ve,["next","error","complete"])?ve:{next:ve,error:Ie,complete:ot},void 0===ke.next&&(ke.next=Qn),void 0===ke.error&&(ke.error=Qn),void 0===ke.complete&&(ke.complete=Qn);const Ft=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ke.error(this.finalError):ke.complete()}catch{}}),this.observers.push(ke),Ft}unsubscribeOne(ve){void 0===this.observers||void 0===this.observers[ve]||(delete this.observers[ve],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ve){if(!this.finalized)for(let Ie=0;Ie<this.observers.length;Ie++)this.sendOne(Ie,ve)}sendOne(ve,Ie){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ve])try{Ie(this.observers[ve])}catch(ot){typeof console<"u"&&console.error&&console.error(ot)}})}close(ve){this.finalized||(this.finalized=!0,void 0!==ve&&(this.finalError=ve),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qn(){}function Vr(ge,ve){return`${ge} failed: ${ve} argument `}const vr=function(ge){const ve=[];let Ie=0;for(let ot=0;ot<ge.length;ot++){let ke=ge.charCodeAt(ot);if(ke>=55296&&ke<=56319){const Ft=ke-55296;ot++,I(ot<ge.length,"Surrogate pair missing trail surrogate."),ke=65536+(Ft<<10)+(ge.charCodeAt(ot)-56320)}ke<128?ve[Ie++]=ke:ke<2048?(ve[Ie++]=ke>>6|192,ve[Ie++]=63&ke|128):ke<65536?(ve[Ie++]=ke>>12|224,ve[Ie++]=ke>>6&63|128,ve[Ie++]=63&ke|128):(ve[Ie++]=ke>>18|240,ve[Ie++]=ke>>12&63|128,ve[Ie++]=ke>>6&63|128,ve[Ie++]=63&ke|128)}return ve},ki=function(ge){let ve=0;for(let Ie=0;Ie<ge.length;Ie++){const ot=ge.charCodeAt(Ie);ot<128?ve++:ot<2048?ve+=2:ot>=55296&&ot<=56319?(ve+=4,Ie++):ve+=3}return ve};function Ot(ge){return ge&&ge._delegate?ge._delegate:ge}},9267:(Se,ae,D)=>{D.d(ae,{EV:()=>B,kl:()=>I.k});var f=D(6895),I=D(2743),ee=D(4650);let B=(()=>{class ie{constructor(K){if(K)throw new Error("ToastModule is already loaded. Import it in the AppModule only")}static forRoot(){return{ngModule:ie,providers:[I.k]}}static#e=this.\u0275fac=function(ne){return new(ne||ie)(ee.LFG(ie,12))};static#t=this.\u0275mod=ee.oAB({type:ie});static#n=this.\u0275inj=ee.cJS({imports:[f.ez]})}return ie})();D(1469)},1469:(Se,ae,D)=>{D.d(ae,{qR:()=>K});var f=D(7340),I=D(4650),ee=D(2743),B=D(6895);function q(ne,Z){if(1&ne){const le=I.EpF();I.TgZ(0,"div",2),I.NdJ("click",function(){const Ge=I.CHM(le).$implicit,je=I.oxw();return I.KtG(je.dispose(Ge))}),I._UZ(1,"i"),I.TgZ(2,"div",3)(3,"div",4),I._uU(4),I.qZA(),I.TgZ(5,"div",5),I._uU(6),I.qZA()(),I.TgZ(7,"i",6),I.NdJ("click",function(){const Ge=I.CHM(le).$implicit,je=I.oxw();return I.KtG(je.dispose(Ge))}),I.qZA()()}if(2&ne){const le=Z.$implicit;I.Gre("toaster toast-",le.type,""),I.Q6J("@slideInOut",void 0),I.xp6(1),I.Gre("fa-solid ",le.icon,""),I.xp6(3),I.hij(" ",le.title," "),I.xp6(2),I.Oqu(le.message)}}const ie=(0,f.X$)("slideUp",[(0,f.eR)(":enter",[(0,f.oB)({transform:"translate(0,500px)"}),(0,f.jt)("350ms cubic-bezier(0.17, 0.89, 0.24, 1.11)",(0,f.oB)({transform:"translate(0,0)"}))]),(0,f.eR)(":leave",[(0,f.jt)("300ms ease-in-out",(0,f.oB)({transform:"translate(0,500px)"}))])]),te=(0,f.X$)("slideInOut",[(0,f.eR)(":enter",[(0,f.oB)({transform:"translateX(calc(100% + 30px))"}),(0,f.jt)("350ms cubic-bezier(0.68, -0.55, 0.25, 1.35)",(0,f.oB)({transform:"translateX(0)"}))]),(0,f.eR)(":leave",[(0,f.jt)("300ms ease-in-out",(0,f.oB)({transform:"translateX(calc(100% + 30px))"}))])]);let K=(()=>{class ne{constructor(le,fe){this.toastService=le,this.cdr=fe,this.currentToasts=[]}ngOnInit(){this.subscribeToToasts()}subscribeToToasts(){this.toastService.toastEvents.subscribe(le=>{const fe=this.currentToasts.length;this.currentToasts.push(le),this.cdr.detectChanges(),this.automaticDismiss(fe)})}dispose(le){let fe=this.currentToasts.indexOf(le);this.currentToasts.splice(fe,1),this.cdr.detectChanges()}automaticDismiss(le){setTimeout(()=>{this.dispose(le)},this.toastService.toastConfig.timer)}static#e=this.\u0275fac=function(fe){return new(fe||ne)(I.Y36(ee.k),I.Y36(I.sBO))};static#t=this.\u0275cmp=I.Xpm({type:ne,selectors:[["ng-toast"]],decls:2,vars:1,consts:[[1,"toast-container","top-right"],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"],[2,"flex","1"],[1,"toaster__title"],[1,"toaster__message"],[1,"fa-xmark","fa-solid",3,"click"]],template:function(fe,Le){1&fe&&(I.TgZ(0,"div",0),I.YNc(1,q,8,9,"div",1),I.qZA()),2&fe&&(I.xp6(1),I.Q6J("ngForOf",Le.currentToasts))},dependencies:[B.sg],styles:['.toast-container[_ngcontent-%COMP%]{--dark: #34495E;--light: #ffffff;--success: #0ABF30;--error: #E24D4C;--warning: #E9BD0C;--info: #3498DB}.toast-container[_ngcontent-%COMP%]{width:max-content;max-width:100%;pointer-events:none;position:fixed;z-index:999999}.toast-container.bottom-left[_ngcontent-%COMP%]{bottom:12px;left:12px}.toast-container.top-right[_ngcontent-%COMP%]{top:12px;right:12px}.toast-container[_ngcontent-%COMP%]   .toaster[_ngcontent-%COMP%]{--toast-width: 400px;position:relative;overflow:hidden;margin:0 0 6px;width:var(--toast-width);padding:16px 17px;border-radius:4px;pointer-events:auto;display:flex;align-items:center;gap:.5rem;--toast-light-color: color-mix(in srgb, var(--toast-color) 20%, white);background-color:var(--toast-light-color);color:var(--toast-color)}.toast-container[_ngcontent-%COMP%]   .toaster[_ngcontent-%COMP%]:hover{opacity:1;cursor:pointer}.toast-container[_ngcontent-%COMP%]   .toaster__title[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.toast-container[_ngcontent-%COMP%]   .toaster__message[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.toast-container[_ngcontent-%COMP%]   .toaster[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:not(:last-child){font-size:1.5rem}.toast-container[_ngcontent-%COMP%]   .toaster.toast-success[_ngcontent-%COMP%]{--toast-color: var(--success)}.toast-container[_ngcontent-%COMP%]   .toaster.toast-warning[_ngcontent-%COMP%]{--toast-color: var(--warning)}.toast-container[_ngcontent-%COMP%]   .toaster.toast-error[_ngcontent-%COMP%]{--toast-color: var(--danger)}.toast-container[_ngcontent-%COMP%]   .toaster.toast-info[_ngcontent-%COMP%]{--toast-color: var(--info)}.toaster[_ngcontent-%COMP%]:before{position:absolute;content:"";height:3px;width:100%;bottom:0;left:0;animation:_ngcontent-%COMP%_progress 5s linear forwards;background-color:var(--toast-color)}@keyframes _ngcontent-%COMP%_progress{to{width:0%}}.toaster-animation[_ngcontent-%COMP%]{transform:translate(calc(100% + 30px));transition:all .5s cubic-bezier(.68,-.55,.25,1.35)}.toaster-animation.active[_ngcontent-%COMP%]{transform:translate(0)}.show-toast[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_show_toast .3s ease forwards}.hide-toast[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hide_toast .3s ease forwards}@keyframes _ngcontent-%COMP%_hide_toast{0%{transform:translate(-10px)}40%{transform:translate(0)}80%{transform:translate(-5%)}to{transform:translate(calc(100% + 20px))}}@keyframes _ngcontent-%COMP%_show_toast{0%{transform:translate(100%)}40%{transform:translate(-5%)}80%{transform:translate(0)}to{transform:translate(-10px)}}@media (max-width: 530px){.toast-container[_ngcontent-%COMP%]{width:95%;margin:0 auto}.toast-container[_ngcontent-%COMP%]   .toaster[_ngcontent-%COMP%]{width:100%}}'],data:{animation:[ie,te]},changeDetection:0})}return ne})()},2743:(Se,ae,D)=>{D.d(ae,{k:()=>B});var f=D(7579),I=D(4650);const ee={timer:5e3,success:{icon:"fa-circle-check",text:"Success: This is a success toast."},error:{icon:"fa-circle-xmark",text:"Error: This is an error toast."},warning:{icon:"fa-triangle-exclamation",text:"Warning: This is a warning toast."},info:{icon:"fa-circle-info",text:"Info: This is an information toast."}};let B=(()=>{class q{constructor(){this.toastConfig=ee,this._toastEvents=new f.x,this.toastEvents=this._toastEvents.asObservable()}showToast(te,K="",ne="success"){const{icon:Z}=ee[ne];this._toastEvents.next({title:te,message:K,type:ne,icon:Z})}static#e=this.\u0275fac=function(K){return new(K||q)};static#t=this.\u0275prov=I.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"})}return q})()},8285:(Se,ae,D)=>{D.d(ae,{Y:()=>ee});var f=D(4650),I=(()=>{return(B=I||(I={}))[B.slideToLeft=1]="slideToLeft",B[B.slideToRight=2]="slideToRight",B[B.slideToTop=3]="slideToTop",B[B.slideToBottom=4]="slideToBottom",I;var B})();let ee=(()=>{class B{constructor(){this.routeAnimation=null}setRouteAnimation(ie){this.routeAnimation=I[ie]}get currentRouteAnimation(){return this.routeAnimation}static#e=this.\u0275fac=function(te){return new(te||B)};static#t=this.\u0275prov=f.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"})}return B})()},8311:(Se,ae,D)=>{D.d(ae,{g:()=>q});var f=D(1135),I=D(8646),ee=D(8343),B=D(4650);let q=(()=>{class ie{constructor(){this._notification=new f.X(null),this.notification$=this._notification.asObservable().pipe((0,I.n)(),(0,ee.x)())}notify(K){this._notification.next(K),setTimeout(()=>this._notification.next(null),3e3)}static#e=this.\u0275fac=function(ne){return new(ne||ie)};static#t=this.\u0275prov=B.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"})}return ie})()},9662:(Se,ae,D)=>{D.d(ae,{O:()=>Be});var f=D(2805),I=D(4351),ee=D(576),q=D(4128),ie=D(4707),te=D(4086),K=D(5625),ne=D(262),Z=D(8505),le=D(9770),fe=D(4782),Le=D(2843),Ge=D(4650),je=D(529),Qe=(()=>{return(ze=Qe||(Qe={})).LOADING="LOADING",ze.SUCCESS="SUCCESS",ze.ERROR="ERROR",Qe;var ze})();let Be=(()=>{class ze{constructor(it){this.http=it}getNotifications(){return this.http.get("http://api").pipe(this.poll(1e3))}poll(it,Ue=0){return function(xe){return(0,f.H)(Ue,it).pipe(function B(ze,Ke){return(0,ee.m)(Ke)?(0,I.b)(()=>ze,Ke):(0,I.b)(()=>ze)}(xe))}}get(it){return this.http.get(it)}post(it,Ue){return this.http.post(it,Ue)}getSwapi(){let it=this.http.get("https://swapi.dev/api/people/1/"),Ue=this.http.get("https://swapi.dev/api/planets/1/");(0,q.D)([it,Ue]).subscribe(xe=>{xe[0].homeworld=xe[1],this.loadedCharacter=xe[0]})}load(it){const Ue=new ie.t,xe=this.http.get(`https://swapi.dev/api/people/${it}/`).pipe((0,te.g)(2e3),(0,K.X)(2),(0,ne.K)(It=>{throw Ue.next(Qe.ERROR),"error loading user"}),(0,Z.b)(()=>Ue.next(Qe.SUCCESS)));return{data:(0,le.P)(()=>(Ue.next(Qe.LOADING),xe)),status:Ue}}share(){this.rawData$=this.http.get("https://jsonplaceholder.typicode.com/todos/1").pipe((0,fe.d)())}GetData(){return this.rawData$.toPromise()}getRandomjoke(){return this.http.get("https://icanhazdadjoke.com/slack").pipe((0,ne.K)(this.handleError))}handleError(){return(0,Le._)("Network Error Occured")}static#e=this.\u0275fac=function(Ue){return new(Ue||ze)(Ge.LFG(je.eN))};static#t=this.\u0275prov=Ge.Yz7({token:ze,factory:ze.\u0275fac,providedIn:"root"})}return ze})()},4185:(Se,ae,D)=>{D.d(ae,{N:()=>q,g:()=>ie});var f=D(4650),I=D(529);class ee{constructor(){this.http=(0,f.f3M)(I.eN)}post(K,ne){return this.http.post(`${this.databaseURL}/${K}`,ne)}get(K,ne){return this.http.get(`${this.databaseURL}/${K}`,{params:ne})}delete(K){return this.http.delete(`${this.databaseURL}/${K}`)}put(K,ne){return this.http.put(`${this.databaseURL}/${K}`,ne)}patch(K,ne){return this.http.patch(`${this.databaseURL}/${K}`,ne)}}var B=D(197);class q{}let ie=(()=>{class te extends ee{constructor(){super(...arguments),this.databaseURL=B.w.databaseURL}static#e=this.\u0275fac=function(){let ne;return function(le){return(ne||(ne=f.n5z(te)))(le||te)}}();static#t=this.\u0275prov=f.Yz7({token:te,factory:te.\u0275fac})}return te})()},8405:(Se,ae,D)=>{D.d(ae,{R:()=>I,z:()=>ee});const I=new(D(4650).OlP)("GenericFirebaseDbInterface");class ee{}},7697:(Se,ae,D)=>{D.d(ae,{s:()=>B});var f=D(9671),I=D(6197),ee=D(9751);class B{constructor(){this.db=(0,I.N8)(),this.formatSnapshot=ie=>{let te=[];return ie.exists()&&ie.forEach(K=>{te.push({key:K.key,...K.val()})}),te}}create(ie,te={}){let K=(0,I.VF)((0,I.iH)(this.db,ie));return(0,I.t8)(K,{key:K.key,createdAt:(0,I.Bt)(),updatedAt:(0,I.Bt)(),...te}).then(),Promise.resolve({key:K.key})}set(ie,te={}){var K=this;return(0,f.Z)(function*(){const ne=(0,I.iH)(K.db,ie);yield(0,I.t8)(ne,te)})()}update(ie,te={}){var K=this;return(0,f.Z)(function*(){const ne=(0,I.iH)(K.db,ie);yield(0,I.Vx)(ne,{updatedAt:(0,I.Bt)(),...te})})()}remove(ie){var te=this;return(0,f.Z)(function*(){const K=(0,I.iH)(te.db,ie);yield(0,I.Od)(K)})()}readRealtime$(ie,te=!1){return new ee.y(K=>{(0,I.jM)((0,I.iH)(this.db,ie),ne=>{let Z=[];ne.exists()?(ne.forEach(le=>{Z.push({key:le.key,...le.val()})}),K.next(Z)):K.next([])},{onlyOnce:te})})}readRealtimeOriginal$(ie,te=!1){return new ee.y(K=>{(0,I.jM)((0,I.iH)(this.db,ie),ne=>{ne.exists()?K.next(ne.val()):K.next(null)},{onlyOnce:te})})}getKeys$(ie){return new ee.y(te=>{(0,I.jM)((0,I.iH)(this.db,ie),K=>{let ne=[];K.exists()?(K.forEach(Z=>{ne.push(Z.key)}),te.next(ne)):te.next(null)})})}readOnce(ie){return new Promise((te,K)=>{(0,I.U2)((0,I.iH)(this.db,ie)).then(ne=>{let Z=[];ne.exists()?(ne.forEach(le=>{Z.push({key:le.key,...le.val()})}),te(Z)):te([])}).catch(ne=>{K(ne)})})}readOnceOriginal(ie){return new Promise((te,K)=>{(0,I.U2)((0,I.iH)(this.db,ie)).then(ne=>{ne.exists()?te(ne.val()):te([])}).catch(ne=>{K(ne)})})}getKeys(ie){return new Promise((te,K)=>{(0,I.U2)((0,I.iH)(this.db,ie)).then(ne=>{let Z=[];ne.exists()?(ne.forEach(le=>{Z.push(le.key)}),te(Z)):te([])}).catch(ne=>{K(ne)})})}checkPresence(ie){const te=(0,I.iH)(this.db,`${ie}/connections`),K=(0,I.iH)(this.db,`${ie}/lastOnline`),ne=(0,I.iH)(this.db,".info/connected");(0,I.jM)(ne,Z=>{if(!0===Z.val()){const le=(0,I.VF)(te);(0,I.ae)(le).remove().then(),(0,I.t8)(le,!0).then(),(0,I.ae)(K).set((0,I.Bt)()).then()}})}onDisconnect(ie){const te=(0,I.iH)(this.db,ie);return(0,I.ae)(te)}detectingConnectionState(){return new ee.y(ie=>{const te=(0,I.iH)(this.db,".info/connected");(0,I.jM)(te,K=>{ie.next(K.val())})})}updateCounter(ie,te=!0){return new Promise((K,ne)=>{const Z=(0,I.iH)(this.db);(0,I.U2)((0,I.iU)(Z,"counter")).then(le=>{(0,I.Vx)((0,I.iH)(this.db,ie),{counter:(0,I.nP)(te?1:-1)}).then(fe=>{K(fe)})})})}#e(){}}},4466:(Se,ae,D)=>{D.d(ae,{m:()=>q});var f=D(6895),I=D(4006),ee=D(4793),B=D(4650);let q=(()=>{class ie{static#e=this.\u0275fac=function(ne){return new(ne||ie)};static#t=this.\u0275mod=B.oAB({type:ie});static#n=this.\u0275inj=B.cJS({imports:[f.ez,ee.Bz,I.u5,I.UX,I.u5,I.UX]})}return ie})()},255:(Se,ae,D)=>{D.d(ae,{u:()=>f});class f{}},7522:(Se,ae,D)=>{D.d(ae,{Yk:()=>f,wJ:()=>I});var f=(()=>{return(B=f||(f={})).Clear="Clear",B.Snow="Snow",B.Rain="Rain",B.Clouds="Clouds",B.Thunderstorm="Thunderstorm",B.Atmosphere="Atmosphere",B.Drizzle="Drizzle",B.Unknown="Unknown",f;var B})();function I(B){return(new Map).set("Thunderstorm",f.Thunderstorm).set("Drizzle",f.Drizzle).set("Rain",f.Rain).set("Snow",f.Snow).set("Atmosphere",f.Atmosphere).set("Clouds",f.Clouds).set("Clear",f.Clear).get(B.main)||f.Unknown}},1944:(Se,ae,D)=>{D.d(ae,{$0:()=>ie,$f:()=>B,$s:()=>q,GO:()=>I,HD:()=>te,JW:()=>le,Xt:()=>Le,hS:()=>fe,m0:()=>ee,mm:()=>Z,n3:()=>K,rc:()=>ne});var f=D(8555);const I=(0,f.PH)("[ARTICLE] Show All"),ee=(0,f.PH)("[ARTICLE] Show All Success",(0,f.Ky)()),B=(0,f.PH)("[ARTICLE] Create",(0,f.Ky)()),q=(0,f.PH)("[ARTICLE] Create Success",(0,f.Ky)()),ie=(0,f.PH)("[ARTICLE] Create Failure",(0,f.Ky)()),te=(0,f.PH)("[ARTICLE] Get by Id",(0,f.Ky)()),K=(0,f.PH)("[ARTICLE] Get by Id Success",(0,f.Ky)()),ne=(0,f.PH)("[ARTICLE] Reset"),Z=(0,f.PH)("[Product] Add to cart",(0,f.Ky)()),le=(0,f.PH)("[Product] Remove from cart",(0,f.Ky)()),fe=(0,f.PH)("[Products] Load items from server"),Le=(0,f.PH)("[Products] Load success",(0,f.Ky)())},8713:(Se,ae,D)=>{D.d(ae,{FC:()=>ne,N5:()=>Ge,Zz:()=>K,kk:()=>Le,ll:()=>je});var f=D(8555),I=D(1944);const q=(0,f.Lq)({articles:[],message:""},(0,f.on)(I.m0,(Qe,{payload:Be})=>({articles:Be,message:"Success"})),(0,f.on)(I.$s,(Qe,{payload:Be})=>({articles:[Be],message:"Article Created."})),(0,f.on)(I.$0,(Qe,{payload:Be})=>({articles:[],message:Be})),(0,f.on)(I.n3,(Qe,{payload:Be})=>({articles:Be,message:"Success"})),(0,f.on)(I.rc,Qe=>({articles:[],message:""}))),te=(0,f.ZF)("articleState"),K=(0,f.P1)(te,Qe=>Qe.articles),ne=(0,f.P1)(te,Qe=>Qe.message),Z=(0,f.Lq)({products:[],cart:[]},(0,f.on)(I.Xt,(Qe,{payload:Be})=>({...Qe,products:Be})),(0,f.on)(I.mm,(Qe,{payload:Be})=>({...Qe,cart:[...Qe.cart,Be]})),(0,f.on)(I.JW,(Qe,{payload:Be})=>({...Qe,cart:[...Qe.cart.filter(ze=>ze.name!==Be.name)]}))),fe=(0,f.ZF)("productState1"),Le=(0,f.P1)(fe,Qe=>Qe.products),Ge=(0,f.P1)(fe,Qe=>Qe.cart),je={articleState:function ie(Qe,Be){return q(Qe,Be)},productState1:function le(Qe,Be){return Z(Qe,Be)}}},9884:(Se,ae,D)=>{D.d(ae,{y:()=>ee});var f=D(7579),I=D(1135);class ee{constructor(q){this.reducer=q,this.action=new f.x;const ie={type:"@ngrx/store/init"},te=q(void 0,ie);this.state=new I.X(te),this.state$=this.state.asObservable(),this.action$=this.action.asObservable(),this.action.next(ie)}dispatch(q){const ie=this.state.getValue(),te=this.reducer(ie,q);this.state.next(te),this.action.next(q)}}},8625:(Se,ae,D)=>{D.d(ae,{IH:()=>q,Mj:()=>B,nP:()=>ee,zD:()=>ie});var f=D(8555),I=(()=>{return(te=I||(I={})).INCREMENT="Increment Article",te.DECREMENT="Decrememnt Article",te.ADD="Add Article",te.LOAD="Load Articles",I;var te})();const ee=(0,f.PH)(I.INCREMENT,(0,f.Ky)()),B=(0,f.PH)(I.DECREMENT,(0,f.Ky)()),q=(0,f.PH)(I.ADD,(0,f.Ky)()),ie=(0,f.PH)(I.LOAD)},7369:(Se,ae,D)=>{D.d(ae,{Jl:()=>ie,UN:()=>ee});var f=D(8555),I=D(8625);const ee="article",q=(0,f.Lq)({articles:[]},(0,f.on)(I.nP,(te,K)=>({...te,articles:te.articles.map(ne=>ne.id==K.id?{...ne,points:ne.points+1}:ne)})),(0,f.on)(I.Mj,(te,K)=>({...te,articles:te.articles.map(ne=>ne.id==K.id?{...ne,points:ne.points-1}:ne)})),(0,f.on)(I.IH,(te,{payload:K})=>({...te,articles:[...te.articles,K]})));function ie(te,K){return q(te,K)}},3550:(Se,ae,D)=>{D.d(ae,{T:()=>K});var f=D(8555),I=D(8625),ee=D(7369);const B=(0,f.ZF)(ee.UN),q=(0,f.P1)(B,ne=>ne.articles);class ie{constructor(Z,le,fe,Le){this.id=Z,this.title=le,this.link=fe,this.points=Le||0,this.time=new Date}}var te=D(4650);let K=(()=>{class ne{constructor(le){this.store=le,this.id=0}getArticle(){return this.store.pipe((0,f.Ys)(q))}incArticle(le){this.store.dispatch(I.nP(le))}decArticle(le){this.store.dispatch(I.Mj(le))}addArticle(le){let fe=new ie(++this.id,le.title,le.link,0);this.store.dispatch(I.IH({payload:fe}))}loadArticle(le){this.store.dispatch(I.zD())}static#e=this.\u0275fac=function(fe){return new(fe||ne)(te.LFG(f.yh))};static#t=this.\u0275prov=te.Yz7({token:ne,factory:ne.\u0275fac})}return ne})()},5054:(Se,ae,D)=>{D.d(ae,{e:()=>te});var f=D(8555),I=D(4579),ee=D(2852);const B=(0,f.ZF)(ee.UN),q=(0,f.P1)(B,K=>K.count);var ie=D(4650);let te=(()=>{class K{constructor(Z){this.store=Z}getCount(){return this.store.pipe((0,f.Ys)(q))}incrementCount(){this.store.dispatch(I.nP())}decrementCount(){this.store.dispatch(I.Mj())}resetCount(){this.store.dispatch(I.mc())}setValue(Z){this.store.dispatch(I.Zf({newValue:Z}))}loadValue(){this.store.dispatch(I.zK())}static#e=this.\u0275fac=function(le){return new(le||K)(ie.LFG(f.yh))};static#t=this.\u0275prov=ie.Yz7({token:K,factory:K.\u0275fac})}return K})()},4579:(Se,ae,D)=>{D.d(ae,{Mj:()=>B,Zf:()=>ie,mc:()=>q,nP:()=>ee,zK:()=>te});var f=D(8555),I=(()=>{return(K=I||(I={})).INCREMENT="[Counter Component] Increment",K.DECREMENT="[Counter Component] Decrement",K.RESET="[Counter Component] Reset",K.SETVALUE="[Counter Component] Set Value",K.LOADVALUE="[Counter Component] Load Value",I;var K})();const ee=(0,f.PH)(I.INCREMENT),B=(0,f.PH)(I.DECREMENT),q=(0,f.PH)(I.RESET),ie=(0,f.PH)(I.SETVALUE,(0,f.Ky)()),te=(0,f.PH)(I.LOADVALUE)},2852:(Se,ae,D)=>{D.d(ae,{UN:()=>ee,jX:()=>ie});var f=D(8555),I=D(4579);const ee="counter",q=(0,f.Lq)({count:0},(0,f.on)(I.nP,te=>({...te,count:te.count+1})),(0,f.on)(I.Mj,te=>({...te,count:te.count-1})),(0,f.on)(I.mc,te=>({...te,count:0})),(0,f.on)(I.Zf,(te,K)=>({...te,count:K.newValue})));function ie(te,K){return q(te,K)}},2542:(Se,ae,D)=>{D.d(ae,{F3:()=>B,WU:()=>q,mu:()=>ee});var f=D(8555),I=(()=>{return(ie=I||(I={})).loadData="[loadData] load",ie.loadDataSuccess="[loadData] success",ie.loadDataFailure="[loadData] failure",I;var ie})();const ee=(0,f.PH)(I.loadData),B=(0,f.PH)(I.loadDataSuccess,(0,f.Ky)()),q=(0,f.PH)(I.loadDataFailure,(0,f.Ky)())},3880:(Se,ae,D)=>{D.d(ae,{B5:()=>ie,UN:()=>ee});var f=D(8555),I=D(2542);const ee="load-data",q=(0,f.Lq)({data:null,loading:!1,error:null},(0,f.on)(I.mu,te=>({...te,loading:!0})),(0,f.on)(I.F3,(te,{payload:K})=>({...te,loading:!1,data:K})),(0,f.on)(I.WU,(te,{payload:K})=>({...te,loading:!1,error:K})));function ie(te,K){return q(te,K)}},9610:(Se,ae,D)=>{D.d(ae,{L:()=>te});var f=D(8555),I=D(3880);const ee=(0,f.ZF)(I.UN),B=(0,f.P1)(ee,K=>K.data);var q=D(2542),ie=D(4650);let te=(()=>{class K{constructor(Z){this.store=Z}getData(){return this.store.pipe((0,f.Ys)(B))}loadData(){this.store.dispatch(q.mu())}loadDataSuccess(Z){this.store.dispatch(q.F3(Z))}loadDataFailure(Z){this.store.dispatch(q.WU(Z))}static#e=this.\u0275fac=function(le){return new(le||K)(ie.LFG(f.yh))};static#t=this.\u0275prov=ie.Yz7({token:K,factory:K.\u0275fac})}return K})()},7403:(Se,ae,D)=>{D.d(ae,{a:()=>q});var f=D(4004),I=D(4650),ee=D(529);let q=(()=>{class ie{constructor(K){this.http=K}register(K){return this.http.post("https://conduit.productionready.io/api/users",K).pipe((0,f.U)(ne=>ne.user))}static#e=this.\u0275fac=function(ne){return new(ne||ie)(I.LFG(ee.eN))};static#t=this.\u0275prov=I.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"})}return ie})()},2766:(Se,ae,D)=>{D.d(ae,{Pw:()=>B,_0:()=>ee,zH:()=>q});var f=D(8555),I=(()=>{return(ie=I||(I={})).REGISTER="[AUTH] REGISTER",ie.REGISTER_SUCCESS="[AUTH] REGISTER SUCCESS",ie.REGISTER_FAILURE="[AUTH] REGISTER FAILURE",I;var ie})();const ee=(0,f.PH)(I.REGISTER,(0,f.Ky)()),B=(0,f.PH)(I.REGISTER_SUCCESS,(0,f.Ky)()),q=(0,f.PH)(I.REGISTER_FAILURE,(0,f.Ky)())},5650:(Se,ae,D)=>{D.d(ae,{UN:()=>B,xw:()=>ie});var f=D(8555),I=D(2766);const B="Register",q=(0,f.Lq)({isSubmitting:!1,currentUser:null,isLoggedIn:null,validationErrors:null},(0,f.on)(I._0,te=>({...te,isSubmitting:!0,validationErrors:null})),(0,f.on)(I.Pw,(te,K)=>({...te,isSubmitting:!1,isLoggedIn:!0,currentUser:K.currentUser})),(0,f.on)(I.zH,(te,K)=>({...te,isSubmitting:!1,validationErrors:K.errors})));function ie(te,K){return q(te,K)}},4964:(Se,ae,D)=>{D.d(ae,{q:()=>K});var f=D(8555),I=D(2766),ee=D(5650);const B=(0,f.ZF)(ee.UN),q=(0,f.P1)(B,ne=>ne.isSubmitting),ie=(0,f.P1)(B,ne=>ne.validationErrors);var te=D(4650);let K=(()=>{class ne{constructor(le){this.store=le}register(le){this.store.dispatch((0,I._0)(le))}isSubmitting(){return this.store.pipe((0,f.Ys)(q))}backendErrors(){return this.store.pipe((0,f.Ys)(ie))}static#e=this.\u0275fac=function(fe){return new(fe||ne)(te.LFG(f.yh))};static#t=this.\u0275prov=te.Yz7({token:ne,factory:ne.\u0275fac})}return ne})()},817:(Se,ae,D)=>{D.d(ae,{N2:()=>q,Ni:()=>B,PR:()=>ee});var f=D(8555),I=(()=>{return(ie=I||(I={})).GET_USER="[User] Get User",ie.GET_USER_SUCCESS="[User] Get User Success",ie.GET_USER_FAILED="[User] Get User Failed",I;var ie})();const ee=(0,f.PH)(I.GET_USER),B=(0,f.PH)(I.GET_USER_SUCCESS,(0,f.Ky)()),q=(0,f.PH)(I.GET_USER_FAILED,(0,f.Ky)())},173:(Se,ae,D)=>{D.d(ae,{U:()=>B,M:()=>ie});var f=D(8555),ee=D(817);const B="user_info",q=(0,f.Lq)({user:{userId:null,name:null,lastName:null,email:null},error:null},(0,f.on)(ee.Ni,(te,{user:K})=>({...te,user:K,error:null})),(0,f.on)(ee.N2,(te,{error:K})=>({...te,user:{userId:null,name:null,lastName:null,email:null},error:K})));function ie(te,K){return q(te,K)}},2842:(Se,ae,D)=>{D.d(ae,{p:()=>te});var f=D(8555),I=D(817),ee=D(173);const B=(0,f.ZF)(ee.U),q=(0,f.P1)(B,K=>K.user);var ie=D(4650);let te=(()=>{class K{constructor(Z){this.store=Z}userInfo$(){return this.store.pipe((0,f.Ys)(q))}getUserInfo(){this.store.dispatch(I.PR())}static#e=this.\u0275fac=function(le){return new(le||K)(ie.LFG(f.yh))};static#t=this.\u0275prov=ie.Yz7({token:K,factory:K.\u0275fac})}return K})()},2944:(Se,ae,D)=>{D.d(ae,{s:()=>ee});var f=D(4650),I=D(529);let ee=(()=>{class B{constructor(ie){this.http=ie}login(ie,te){return this.http.post("login",{username:ie,password:te})}getProducts(){return this.http.get("products",{headers:{}})}static#e=this.\u0275fac=function(te){return new(te||B)(f.LFG(I.eN))};static#t=this.\u0275prov=f.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"})}return B})()},7385:(Se,ae,D)=>{D.d(ae,{e:()=>q});var f=D(1135),I=D(8505),ee=D(4650),B=D(2944);let q=(()=>{class ie{constructor(K){this.apiService=K,this._isLoggedIn$=new f.X(!1),this.isLoggedIn$=this._isLoggedIn$.asObservable(),this.TOKEN_NAME="profanis_auth",this._isLoggedIn$.next(!!this.token),this.user=this.getUser(this.token)}get token(){return localStorage.getItem(this.TOKEN_NAME)}login(K,ne){return this.apiService.login(K,ne).pipe((0,I.b)(Z=>{this._isLoggedIn$.next(!0),localStorage.setItem(this.TOKEN_NAME,Z.token),this.user=this.getUser(Z.token)}))}getUser(K){return K?JSON.parse(atob(K.split(".")[1])):null}hasRole(K){return this.user?.Role.includes(K)||!1}static#e=this.\u0275fac=function(ne){return new(ne||ie)(ee.LFG(B.s))};static#t=this.\u0275prov=ee.Yz7({token:ie,factory:ie.\u0275fac,providedIn:"root"})}return ie})()},2340:(Se,ae,D)=>{D.d(ae,{N:()=>I});var f=D(197);const I={production:!0,version:D(4147).i8,firebaseConfig:f.w}},197:(Se,ae,D)=>{D.d(ae,{w:()=>f});const f={apiKey:"AIzaSyAQszHYa_YW__6DdJDCqlKOsRBpszVz8sQ",authDomain:"rktect-rest.firebaseapp.com",databaseURL:"https://rktect-rest-default-rtdb.firebaseio.com",projectId:"rktect-rest",storageBucket:"rktect-rest.appspot.com",messagingSenderId:"797842765239",appId:"1:797842765239:web:e3ddfbb57fbdff9dd42432",auth_Token:"kpPiWBeAJJ3KlXNQ1tULjJcYLWZoLMwdEpDRzKSc"}},2077:(Se,ae,D)=>{var f=D(1481),I=D(4650),ee=D(9671),B=D(4793),q=D(7340);const ie=[(0,q.IO)(":enter, :leave",(0,q.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,q.IO)(":leave",(0,q.oB)({transform:"translateX(0%)"}),{optional:!0}),(0,q.IO)(":enter",(0,q.oB)({transform:"translateX(100%)"}),{optional:!0}),(0,q.ru)([(0,q.IO)(":leave",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateX(-100%)"}))],{optional:!0}),(0,q.IO)(":enter",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateX(0%)"}))],{optional:!0})])],te=[(0,q.IO)(":enter, :leave",(0,q.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,q.IO)(":leave",(0,q.oB)({transform:"translateX(0%)"}),{optional:!0}),(0,q.IO)(":enter",(0,q.oB)({transform:"translateX(-100%)"}),{optional:!0}),(0,q.ru)([(0,q.IO)(":leave",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateX(100%)"}))],{optional:!0}),(0,q.IO)(":enter",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateX(0%)"}))],{optional:!0})])],K=[(0,q.IO)(":enter, :leave",(0,q.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,q.IO)(":leave",(0,q.oB)({transform:"translateY(0%)"}),{optional:!0}),(0,q.IO)(":enter",(0,q.oB)({transform:"translateY(100%)"}),{optional:!0}),(0,q.ru)([(0,q.IO)(":leave",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateY(-100%)"}))],{optional:!0}),(0,q.IO)(":enter",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateY(0%)"}))],{optional:!0})])],ne=[(0,q.IO)(":enter, :leave",(0,q.oB)({position:"fixed",left:0,right:0,top:0,bottom:0}),{optional:!0}),(0,q.IO)(":leave",(0,q.oB)({transform:"translateY(0%)"}),{optional:!0}),(0,q.IO)(":enter",(0,q.oB)({transform:"translateY(-100%)"}),{optional:!0}),(0,q.ru)([(0,q.IO)(":leave",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateY(100%)"}))],{optional:!0}),(0,q.IO)(":enter",[(0,q.jt)(".3s ease-in-out",(0,q.oB)({transform:"translateY(0%)"}))],{optional:!0})])],Z=(0,q.X$)("slideTransition",[(0,q.eR)("* => slideToLeft",ie),(0,q.eR)("* => slideToRight",te),(0,q.eR)("* => slideToTop",K),(0,q.eR)("* => slideToBottom",ne)]);var le=D(8285),fe=D(6895);function Le(E,_){if(1&E&&(I.TgZ(0,"li",11)(1,"a",12),I._uU(2),I.qZA()()),2&E){const g=_.$implicit;I.xp6(1),I.Q6J("routerLink",null==g?null:g.path),I.xp6(1),I.Oqu((null==g?null:g.name)||(null==g?null:g.path))}}function Ge(E,_){if(1&E&&(I.TgZ(0,"a",13),I._uU(1),I.qZA()),2&E){const g=_.$implicit;I.xp6(1),I.Oqu(g)}}const je=function(){return["navbar-dark","bg-dark"]},Qe=function(){return["navbar-light","bg-light"]},Be=function(E){return{show:E}};let ze=(()=>{class E{constructor(){this.isCollapsed=!1,this.routes=[],this.template="DARK",this.languages=["English","Hindi"]}ngOnInit(){}toggleNavbar(){this.isCollapsed=!this.isCollapsed}static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275cmp=I.Xpm({type:E,selectors:[["app-navbar"]],inputs:{routes:"routes",template:"template"},decls:13,vars:10,consts:[[1,"navbar","navbar-expand-lg","sticky-top1",3,"ngClass"],["href","/",1,"navbar-brand"],["type","button",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse",3,"ngClass"],[1,"navbar-nav","mr-auto"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item","dropdown","align-right",3,"click"],["id","navbarDropdown","role","button","data-toggle","dropdown","aria-expanded","false","aria-haspopup","true",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu"],["class","dropdown-item",4,"ngFor","ngForOf"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"dropdown-item"]],template:function(b,$){1&b&&(I.TgZ(0,"nav",0)(1,"a",1),I._uU(2,"Navbar"),I.qZA(),I.TgZ(3,"button",2),I.NdJ("click",function(){return $.toggleNavbar()}),I._UZ(4,"span",3),I.qZA(),I.TgZ(5,"div",4)(6,"ul",5),I.YNc(7,Le,3,2,"li",6),I.TgZ(8,"li",7),I.NdJ("click",function(){return $.show=!$.show}),I.TgZ(9,"a",8),I._uU(10,"Language"),I.qZA(),I.TgZ(11,"div",9),I.YNc(12,Ge,2,1,"a",10),I.qZA()()()()()),2&b&&(I.Q6J("ngClass","DARK"===$.template?I.DdM(6,je):I.DdM(7,Qe)),I.xp6(5),I.Q6J("ngClass",I.VKq(8,Be,$.isCollapsed)),I.xp6(2),I.Q6J("ngForOf",$.routes),I.xp6(4),I.ekj("show",$.show),I.xp6(1),I.Q6J("ngForOf",$.languages))},dependencies:[fe.mk,fe.sg,B.rH,B.Od],styles:["nav[_ngcontent-%COMP%]{border-bottom:1px solid hsla(0,0%,100%,.07);box-shadow:0 2.2px 2.2px #00000012,0 5.3px 5.3px #0000000d,0 10px 10px #0000000a,0 17.9px 17.9px #0000000a,0 33.4px 33.4px #00000008,0 80px 80px #00000005}"]})}return E})();const it=[{path:"application",loadChildren:()=>Promise.all([D.e(1189),D.e(8270)]).then(D.bind(D,8270)).then(E=>E.ApplicationModule)},{path:"animations",loadChildren:()=>Promise.all([D.e(1189),D.e(566)]).then(D.bind(D,566)).then(E=>E.AnimationsModule)},{path:"v2",loadChildren:()=>Promise.all([D.e(4877),D.e(8592),D.e(4012)]).then(D.bind(D,4012)).then(E=>E.PersonalModule)},{path:"audios",loadChildren:()=>Promise.all([D.e(6619),D.e(4859)]).then(D.bind(D,870)).then(E=>E.AudiosModule)},{path:"books",loadChildren:()=>Promise.all([D.e(6619),D.e(1839)]).then(D.bind(D,1839)).then(E=>E.BooksModule)},{path:"bootstrap-design",loadChildren:()=>Promise.all([D.e(6619),D.e(5170),D.e(8521)]).then(D.bind(D,8521)).then(E=>E.BootstrapDesignModule)},{path:"cocktail",loadChildren:()=>Promise.all([D.e(6619),D.e(7539)]).then(D.bind(D,7539)).then(E=>E.CocktailModule)},{path:"cookbook",loadChildren:()=>Promise.all([D.e(6619),D.e(3261)]).then(D.bind(D,3261)).then(E=>E.CookBookModule)},{path:"covid",loadChildren:()=>Promise.all([D.e(1189),D.e(6619),D.e(3980)]).then(D.bind(D,3980)).then(E=>E.CovidModule)},{path:"github",loadChildren:()=>Promise.all([D.e(1189),D.e(6619),D.e(8592),D.e(8580)]).then(D.bind(D,8580)).then(E=>E.GithubModule)},{path:"hacker-ranks",loadChildren:()=>Promise.all([D.e(8554),D.e(8592),D.e(2737)]).then(D.bind(D,2737)).then(E=>E.HackerRanksModule)},{path:"itunes",loadChildren:()=>Promise.all([D.e(6619),D.e(94)]).then(D.bind(D,94)).then(E=>E.ItunesModule)},{path:"movies",loadChildren:()=>Promise.all([D.e(6619),D.e(8592),D.e(9045)]).then(D.bind(D,9045)).then(E=>E.MoviesModule)},{path:"encapsulating",loadChildren:()=>D.e(4333).then(D.bind(D,4333)).then(E=>E.EncapsulatingModule)},{path:"sports",loadChildren:()=>Promise.all([D.e(6619),D.e(7968)]).then(D.bind(D,7968)).then(E=>E.SportsModule)},{path:"shop",loadChildren:()=>Promise.all([D.e(8592),D.e(3787)]).then(D.bind(D,3787)).then(E=>E.ShopModule)},{path:"store",loadChildren:()=>D.e(9065).then(D.bind(D,9065)).then(E=>E.StoreModule)},{path:"ngrx-store",loadChildren:()=>D.e(2138).then(D.bind(D,2138)).then(E=>E.NgrxStoreModule)},{path:"survey",loadChildren:()=>D.e(1801).then(D.bind(D,7847)).then(E=>E.SurveyPollVoterPridictionModule)},{path:"responsive-site",loadChildren:()=>D.e(6085).then(D.bind(D,6085)).then(E=>E.ResponsiveSiteModule)},{path:"mockApi",loadChildren:()=>D.e(7784).then(D.bind(D,7784)).then(E=>E.MockapiModule)},{path:"routeReuse",loadChildren:()=>D.e(772).then(D.bind(D,772)).then(E=>E.RouteReuseStrategyTutsModule)},{path:"sample",loadChildren:()=>D.e(1827).then(D.bind(D,1827)).then(E=>E.SampleModule)},{path:"navigations",component:(()=>{class E{constructor(g){this.animationService=g,this.routes=[{path:"resume"},{path:"my-site"},{path:"../personal",name:"Personal"},{path:"form"},{path:"svg"},{path:"svg/customize"},{path:"task"},{path:"unit-testing"}],this.links=[{name:"Home",url:["home"],iconClass:"fa fa-home"},{name:"About",url:["/navigations/form/invoice"],iconClass:"fa fa-user-circle"}],this.animationService.setRouteAnimation(1)}ngOnInit(){}getRouteAnimation(g){return g.activatedRouteData.animation}static#e=this.\u0275fac=function(b){return new(b||E)(I.Y36(le.Y))};static#t=this.\u0275cmp=I.Xpm({type:E,selectors:[["app-navigations"]],decls:3,vars:2,consts:[[3,"routes","template"]],template:function(b,$){1&b&&(I._UZ(0,"app-navbar",0),I.TgZ(1,"main"),I._UZ(2,"router-outlet"),I.qZA()),2&b&&I.Q6J("routes",$.routes)("template","LIGHT")},dependencies:[B.lC,ze],data:{animation:[Z]}})}return E})(),children:[{path:"my-site",loadChildren:()=>D.e(7391).then(D.bind(D,7391)).then(E=>E.MysiteModule)},{path:"svg",loadChildren:()=>D.e(3971).then(D.bind(D,3971)).then(E=>E.SvgRendererModule)},{path:"task",loadChildren:()=>Promise.all([D.e(1189),D.e(37),D.e(8592),D.e(3061)]).then(D.bind(D,3061)).then(E=>E.TaskModule)},{path:"unit-testing",loadChildren:()=>D.e(4376).then(D.bind(D,4376)).then(E=>E.UnitTestingModule)}]},{path:"apps",loadChildren:()=>Promise.all([D.e(5170),D.e(4524),D.e(8703)]).then(D.bind(D,8703)).then(E=>E.UsefullAppsModule)},{path:"library-ex",loadChildren:()=>Promise.all([D.e(1189),D.e(5170),D.e(4524),D.e(8592),D.e(1306)]).then(D.bind(D,1306)).then(E=>E.LibraryExModule)},{path:"firebase",loadChildren:()=>Promise.all([D.e(1189),D.e(5170),D.e(9710),D.e(4524),D.e(7230)]).then(D.bind(D,7230)).then(E=>E.FirebaseModule)},{path:"tutorials",loadChildren:()=>Promise.all([D.e(5170),D.e(5951)]).then(D.bind(D,5951)).then(E=>E.TutorialsModule)},{path:"css",loadChildren:()=>Promise.all([D.e(1189),D.e(8592),D.e(4446)]).then(D.bind(D,4446)).then(E=>E.CssLearnModule)},{path:"code-task",loadChildren:()=>D.e(4529).then(D.bind(D,4529)).then(E=>E.CodeTaskModule)},{path:"custom",loadComponent:(E=(0,ee.Z)(function*(){return(yield Promise.all([D.e(1189),D.e(8592),D.e(8738)]).then(D.bind(D,8738))).CustomComponent}),function(){return E.apply(this,arguments)})},{path:"declarative",loadChildren:function(){var E=(0,ee.Z)(function*(){return(yield D.e(8123).then(D.bind(D,8123))).DeclarativeModule});return function(){return E.apply(this,arguments)}}()},{path:"sidenav",loadChildren:function(){var E=(0,ee.Z)(function*(){return(yield D.e(1592).then(D.bind(D,1592))).SidenavModule});return function(){return E.apply(this,arguments)}}()},{path:"certificate",loadChildren:function(){var E=(0,ee.Z)(function*(){return(yield D.e(1918).then(D.bind(D,1918))).CertificateModule});return function(){return E.apply(this,arguments)}}()},{path:"systems",loadChildren:function(){var E=(0,ee.Z)(function*(){return(yield Promise.all([D.e(8554),D.e(2759)]).then(D.bind(D,2759))).SystemsModule});return function(){return E.apply(this,arguments)}}()},{path:"assignment",loadChildren:function(){var E=(0,ee.Z)(function*(){return(yield Promise.all([D.e(1189),D.e(5774)]).then(D.bind(D,5774))).AssignmentModule});return function(){return E.apply(this,arguments)}}()},{path:"",loadChildren:function(){var E=(0,ee.Z)(function*(){return(yield Promise.all([D.e(1189),D.e(37),D.e(4877),D.e(8592),D.e(9646)]).then(D.bind(D,9666))).WebsiteModule});return function(){return E.apply(this,arguments)}}()},{path:"",loadChildren:function(){var E=(0,ee.Z)(function*(){return(yield D.e(1982).then(D.bind(D,1982))).DemosModule});return function(){return E.apply(this,arguments)}}()},{path:"markdown",loadChildren:function(){var E=(0,ee.Z)(function*(){return(yield Promise.all([D.e(1189),D.e(8592),D.e(2588)]).then(D.bind(D,2588))).MarkdownModule});return function(){return E.apply(this,arguments)}}()},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:""}];var E;let Ue=(()=>{class E{static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275mod=I.oAB({type:E});static#n=this.\u0275inj=I.cJS({imports:[B.Bz.forRoot(it,{anchorScrolling:"enabled",scrollPositionRestoration:"enabled",useHash:!1}),B.Bz]})}return E})();var xe=D(529);let Ct=(()=>{class E{constructor(g){this.http=g,this.CONFIGURATION_URL="assets/config/configuration.json"}loadConfiguration(){return this.http.get(this.CONFIGURATION_URL).toPromise().then(g=>(this.configuration=g,g)).catch(g=>{console.error(g)})}getConfiguration(){return this.configuration}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(xe.eN))};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();var It=D(1135),Ze=D(2843),Pt=D(3900),St=D(9646),rt=D(6805),lt=D(262),Xe=D(8505),vt=D(4004);let At=(()=>{class E{constructor(g){this.http=g,this.alertSubject=new It.X(null),this.alertObservable=this.alertSubject.asObservable()}getUser(g){return this.http.get(`https://jsonplaceholder.typicode.com/users/${g}`).pipe((0,lt.K)(b=>(0,Ze._)(b)))}getToDo(g){return this.http.get(`https://jsonplaceholder.typicode.com/todos?userId=${g}`).pipe((0,lt.K)(b=>(0,Ze._)(b)))}setUser(g){console.log(g)}setToDos(g){console.log(g)}initialiseAppUsingObservables(){return this.getUser(5).pipe((0,Pt.w)(g=>(this.setUser(g),this.getToDo(g.id).pipe((0,Xe.b)(b=>this.setToDos(b))))),(0,lt.K)(g=>(this.alertSubject.next(g),(0,St.of)(g))))}initialiseAppUsingPromises(){return function qe(E,_){const g="object"==typeof _;return new Promise((b,$)=>{let Ee,re=!1;E.subscribe({next:Te=>{Ee=Te,re=!0},error:$,complete:()=>{re?b(Ee):g?b(_.defaultValue):$(new rt.K)}})})}(this.initialiseAppUsingObservables())}getAlbums(){return this.http.get("https://jsonplaceholder.typicode.com/albums").pipe((0,vt.U)(g=>g))}getPhotos(){return this.http.get("https://jsonplaceholder.typicode.com/photos").pipe((0,vt.U)(g=>g))}getComments(){return this.http.get("https://jsonplaceholder.typicode.com/comments").pipe((0,vt.U)(g=>g))}deleteToDo(){return this.http.delete("https://jsonplaceholder.typicode.com/todos/2").pipe((0,vt.U)(g=>g))}getToDos(){return this.http.get("https://jsonplaceholder.typicode.com/todos").pipe((0,vt.U)(g=>g))}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(xe.eN))};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();var gn=D(8311);function rr(E,_){if(1&E){const g=I.EpF();I.TgZ(0,"div",1),I.NdJ("click",function(){I.CHM(g);const $=I.oxw();return I.KtG($.showNotification=!$.showNotification)}),I.TgZ(1,"p"),I._uU(2),I.qZA()()}if(2&E){const g=I.oxw();I.xp6(2),I.Oqu(g.notification)}}let fn=(()=>{class E{constructor(g){this.notificationService=g,this.notificationService.notification$.subscribe(b=>{this.notification=b,this.showNotification=!0})}ngOnInit(){}static#e=this.\u0275fac=function(b){return new(b||E)(I.Y36(gn.g))};static#t=this.\u0275cmp=I.Xpm({type:E,selectors:[["app-notification"]],decls:1,vars:1,consts:[["class","notification",3,"click",4,"ngIf"],[1,"notification",3,"click"]],template:function(b,$){1&b&&I.YNc(0,rr,3,1,"div",0),2&b&&I.Q6J("ngIf",$.notification&&$.showNotification)},dependencies:[fe.O5],styles:[".notification[_ngcontent-%COMP%]{position:absolute;z-index:1;top:5px;line-height:20px;text-align:center;right:5px;background:linear-gradient(-90deg,#cb5cd2,#cc3fa0);color:#fff;font-style:oblique;text-transform:capitalize;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f;min-height:20px;min-width:160px;max-width:300px;padding:15px;cursor:pointer}"]})}return E})();var Kt=D(1469);let Fn=(()=>{class E{constructor(g,b,$){this.configurationService=g,this.jsonPlaceholderService=b,this.route=$,this.title="portfolio-all-in-one",this.version=I.q4F.major}ngOnInit(){window.addEventListener("beforeinstallprompt",g=>{console.log("'beforeinstallprompt' event was fired.")})}static#e=this.\u0275fac=function(b){return new(b||E)(I.Y36(Ct),I.Y36(At),I.Y36(B.gz))};static#t=this.\u0275cmp=I.Xpm({type:E,selectors:[["app-root"]],decls:3,vars:0,template:function(b,$){1&b&&I._UZ(0,"app-notification")(1,"router-outlet")(2,"ng-toast")},dependencies:[B.lC,fn,Kt.qR]})}return E})();function ir(E){return new I.vHH(3e3,!1)}function ei(){return typeof window<"u"&&typeof window.document<"u"}function Je(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function be(E){switch(E.length){case 0:return new q.ZN;case 1:return E[0];default:return new q.ZE(E)}}function Ne(E,_,g,b,$=new Map,re=new Map){const Ee=[],Te=[];let tt=-1,ht=null;if(b.forEach(Lt=>{const qt=Lt.get("offset"),rn=qt==tt,Gt=rn&&ht||new Map;Lt.forEach((an,Rn)=>{let or=Rn,Mi=an;if("offset"!==Rn)switch(or=_.normalizePropertyName(or,Ee),Mi){case q.k1:Mi=$.get(Rn);break;case q.l3:Mi=re.get(Rn);break;default:Mi=_.normalizeStyleValue(Rn,or,Mi,Ee)}Gt.set(or,Mi)}),rn||Te.push(Gt),ht=Gt,tt=qt}),Ee.length)throw function Zt(E){return new I.vHH(3502,!1)}();return Te}function Ot(E,_,g,b){switch(_){case"start":E.onStart(()=>b(g&&ge(g,"start",E)));break;case"done":E.onDone(()=>b(g&&ge(g,"done",E)));break;case"destroy":E.onDestroy(()=>b(g&&ge(g,"destroy",E)))}}function ge(E,_,g){const re=ve(E.element,E.triggerName,E.fromState,E.toState,_||E.phaseName,g.totalTime??E.totalTime,!!g.disabled),Ee=E._data;return null!=Ee&&(re._data=Ee),re}function ve(E,_,g,b,$="",re=0,Ee){return{element:E,triggerName:_,fromState:g,toState:b,phaseName:$,totalTime:re,disabled:!!Ee}}function Ie(E,_,g){let b=E.get(_);return b||E.set(_,b=g),b}function ot(E){const _=E.indexOf(":");return[E.substring(1,_),E.slice(_+1)]}let ke=(E,_)=>!1,Ft=(E,_,g)=>[],Wt=null;function Re(E){const _=E.parentNode||E.host;return _===Wt?null:_}(Je()||typeof Element<"u")&&(ei()?(Wt=(()=>document.documentElement)(),ke=(E,_)=>{for(;_;){if(_===E)return!0;_=Re(_)}return!1}):ke=(E,_)=>E.contains(_),Ft=(E,_,g)=>{if(g)return Array.from(E.querySelectorAll(_));const b=E.querySelector(_);return b?[b]:[]});let Me=null,Ye=!1;const Cr=ke,Ti=Ft;let nt=(()=>{class E{validateStyleProperty(g){return function Vt(E){Me||(Me=function Xn(){return typeof document<"u"?document.body:null}()||{},Ye=!!Me.style&&"WebkitAppearance"in Me.style);let _=!0;return Me.style&&!function he(E){return"ebkit"==E.substring(1,6)}(E)&&(_=E in Me.style,!_&&Ye&&(_="Webkit"+E.charAt(0).toUpperCase()+E.slice(1)in Me.style)),_}(g)}matchesElement(g,b){return!1}containsElement(g,b){return Cr(g,b)}getParentElement(g){return Re(g)}query(g,b,$){return Ti(g,b,$)}computeStyle(g,b,$){return $||""}animate(g,b,$,re,Ee,Te=[],tt){return new q.ZN($,re)}}return E.\u0275fac=function(g){return new(g||E)},E.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac}),E})(),Nt=(()=>{class E{}return E.NOOP=new nt,E})();const Xt=1e3,hn="ng-enter",fr="ng-leave",tr="ng-trigger",ti=".ng-trigger",ni="ng-animating",Ms=".ng-animating";function Ui(E){if("number"==typeof E)return E;const _=E.match(/^(-?[\.\d]+)(m?s)/);return!_||_.length<2?0:os(parseFloat(_[1]),_[2])}function os(E,_){return"s"===_?E*Xt:E}function jr(E,_,g){return E.hasOwnProperty("duration")?E:function Bt(E,_,g){let $,re=0,Ee="";if("string"==typeof E){const Te=E.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Te)return _.push(ir()),{duration:0,delay:0,easing:""};$=os(parseFloat(Te[1]),Te[2]);const tt=Te[3];null!=tt&&(re=os(parseFloat(tt),Te[4]));const ht=Te[5];ht&&(Ee=ht)}else $=E;if(!g){let Te=!1,tt=_.length;$<0&&(_.push(function Kr(){return new I.vHH(3100,!1)}()),Te=!0),re<0&&(_.push(function Pn(){return new I.vHH(3101,!1)}()),Te=!0),Te&&_.splice(tt,0,ir())}return{duration:$,delay:re,easing:Ee}}(E,_,g)}function bn(E,_={}){return Object.keys(E).forEach(g=>{_[g]=E[g]}),_}function mn(E){const _=new Map;return Object.keys(E).forEach(g=>{_.set(g,E[g])}),_}function er(E,_=new Map,g){if(g)for(let[b,$]of g)_.set(b,$);for(let[b,$]of E)_.set(b,$);return _}function yr(E,_,g){return g?_+":"+g+";":""}function Ar(E){let _="";for(let g=0;g<E.style.length;g++){const b=E.style.item(g);_+=yr(0,b,E.style.getPropertyValue(b))}for(const g in E.style)E.style.hasOwnProperty(g)&&!g.startsWith("_")&&(_+=yr(0,mt(g),E.style[g]));E.setAttribute("style",_)}function oi(E,_,g){E.style&&(_.forEach((b,$)=>{const re=We($);g&&!g.has($)&&g.set($,E.style[re]),E.style[re]=b}),Je()&&Ar(E))}function _i(E,_){E.style&&(_.forEach((g,b)=>{const $=We(b);E.style[$]=""}),Je()&&Ar(E))}function xn(E){return Array.isArray(E)?1==E.length?E[0]:(0,q.vP)(E):E}const Nn=new RegExp("{{\\s*(.+?)\\s*}}","g");function Yr(E){let _=[];if("string"==typeof E){let g;for(;g=Nn.exec(E);)_.push(g[1]);Nn.lastIndex=0}return _}function Ts(E,_,g){const b=E.toString(),$=b.replace(Nn,(re,Ee)=>{let Te=_[Ee];return null==Te&&(g.push(function si(E){return new I.vHH(3003,!1)}()),Te=""),Te.toString()});return $==b?E:$}function De(E){const _=[];let g=E.next();for(;!g.done;)_.push(g.value),g=E.next();return _}const at=/-+([a-z0-9])/g;function We(E){return E.replace(at,(..._)=>_[1].toUpperCase())}function mt(E){return E.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Jt(E,_,g){switch(_.type){case 7:return E.visitTrigger(_,g);case 0:return E.visitState(_,g);case 1:return E.visitTransition(_,g);case 2:return E.visitSequence(_,g);case 3:return E.visitGroup(_,g);case 4:return E.visitAnimate(_,g);case 5:return E.visitKeyframes(_,g);case 6:return E.visitStyle(_,g);case 8:return E.visitReference(_,g);case 9:return E.visitAnimateChild(_,g);case 10:return E.visitAnimateRef(_,g);case 11:return E.visitQuery(_,g);case 12:return E.visitStagger(_,g);default:throw function Tt(E){return new I.vHH(3004,!1)}()}}function pr(E,_){return window.getComputedStyle(E)[_]}const ii="*";function wn(E,_){const g=[];return"string"==typeof E?E.split(/\s*,\s*/).forEach(b=>function Ps(E,_,g){if(":"==E[0]){const tt=function zs(E,_){switch(E){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(g,b)=>parseFloat(b)>parseFloat(g);case":decrement":return(g,b)=>parseFloat(b)<parseFloat(g);default:return _.push(function Sn(E){return new I.vHH(3016,!1)}()),"* => *"}}(E,g);if("function"==typeof tt)return void _.push(tt);E=tt}const b=E.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==b||b.length<4)return g.push(function br(E){return new I.vHH(3015,!1)}()),_;const $=b[1],re=b[2],Ee=b[3];_.push(ro($,Ee));"<"==re[0]&&!($==ii&&Ee==ii)&&_.push(ro(Ee,$))}(b,g,_)):g.push(E),g}const Gi=new Set(["true","1"]),sr=new Set(["false","0"]);function ro(E,_){const g=Gi.has(E)||sr.has(E),b=Gi.has(_)||sr.has(_);return($,re)=>{let Ee=E==ii||E==$,Te=_==ii||_==re;return!Ee&&g&&"boolean"==typeof $&&(Ee=$?Gi.has(E):sr.has(E)),!Te&&b&&"boolean"==typeof re&&(Te=re?Gi.has(_):sr.has(_)),Ee&&Te}}const Os=new RegExp("s*:selfs*,?","g");function Gn(E,_,g,b){return new Ks(E).build(_,g,b)}class Ks{constructor(_){this._driver=_}build(_,g,b){const $=new Bo(g);return this._resetContextStyleTimingState($),Jt(this,xn(_),$)}_resetContextStyleTimingState(_){_.currentQuerySelector="",_.collectedStyles=new Map,_.collectedStyles.set("",new Map),_.currentTime=0}visitTrigger(_,g){let b=g.queryCount=0,$=g.depCount=0;const re=[],Ee=[];return"@"==_.name.charAt(0)&&g.errors.push(function Ve(){return new I.vHH(3006,!1)}()),_.definitions.forEach(Te=>{if(this._resetContextStyleTimingState(g),0==Te.type){const tt=Te,ht=tt.name;ht.toString().split(/\s*,\s*/).forEach(Lt=>{tt.name=Lt,re.push(this.visitState(tt,g))}),tt.name=ht}else if(1==Te.type){const tt=this.visitTransition(Te,g);b+=tt.queryCount,$+=tt.depCount,Ee.push(tt)}else g.errors.push(function _t(){return new I.vHH(3007,!1)}())}),{type:7,name:_.name,states:re,transitions:Ee,queryCount:b,depCount:$,options:null}}visitState(_,g){const b=this.visitStyle(_.styles,g),$=_.options&&_.options.params||null;if(b.containsDynamicStyles){const re=new Set,Ee=$||{};b.styles.forEach(Te=>{Te instanceof Map&&Te.forEach(tt=>{Yr(tt).forEach(ht=>{Ee.hasOwnProperty(ht)||re.add(ht)})})}),re.size&&(De(re.values()),g.errors.push(function kt(E,_){return new I.vHH(3008,!1)}()))}return{type:0,name:_.name,style:b,options:$?{params:$}:null}}visitTransition(_,g){g.queryCount=0,g.depCount=0;const b=Jt(this,xn(_.animation),g);return{type:1,matchers:wn(_.expr,g.errors),animation:b,queryCount:g.queryCount,depCount:g.depCount,options:Wi(_.options)}}visitSequence(_,g){return{type:2,steps:_.steps.map(b=>Jt(this,b,g)),options:Wi(_.options)}}visitGroup(_,g){const b=g.currentTime;let $=0;const re=_.steps.map(Ee=>{g.currentTime=b;const Te=Jt(this,Ee,g);return $=Math.max($,g.currentTime),Te});return g.currentTime=$,{type:3,steps:re,options:Wi(_.options)}}visitAnimate(_,g){const b=function So(E,_){if(E.hasOwnProperty("duration"))return E;if("number"==typeof E)return Sa(jr(E,_).duration,0,"");const g=E;if(g.split(/\s+/).some(re=>"{"==re.charAt(0)&&"{"==re.charAt(1))){const re=Sa(0,0,"");return re.dynamic=!0,re.strValue=g,re}const $=jr(g,_);return Sa($.duration,$.delay,$.easing)}(_.timings,g.errors);g.currentAnimateTimings=b;let $,re=_.styles?_.styles:(0,q.oB)({});if(5==re.type)$=this.visitKeyframes(re,g);else{let Ee=_.styles,Te=!1;if(!Ee){Te=!0;const ht={};b.easing&&(ht.easing=b.easing),Ee=(0,q.oB)(ht)}g.currentTime+=b.duration+b.delay;const tt=this.visitStyle(Ee,g);tt.isEmptyStep=Te,$=tt}return g.currentAnimateTimings=null,{type:4,timings:b,style:$,options:null}}visitStyle(_,g){const b=this._makeStyleAst(_,g);return this._validateStyleAst(b,g),b}_makeStyleAst(_,g){const b=[],$=Array.isArray(_.styles)?_.styles:[_.styles];for(let Te of $)"string"==typeof Te?Te===q.l3?b.push(Te):g.errors.push(new I.vHH(3002,!1)):b.push(mn(Te));let re=!1,Ee=null;return b.forEach(Te=>{if(Te instanceof Map&&(Te.has("easing")&&(Ee=Te.get("easing"),Te.delete("easing")),!re))for(let tt of Te.values())if(tt.toString().indexOf("{{")>=0){re=!0;break}}),{type:6,styles:b,easing:Ee,offset:_.offset,containsDynamicStyles:re,options:null}}_validateStyleAst(_,g){const b=g.currentAnimateTimings;let $=g.currentTime,re=g.currentTime;b&&re>0&&(re-=b.duration+b.delay),_.styles.forEach(Ee=>{"string"!=typeof Ee&&Ee.forEach((Te,tt)=>{const ht=g.collectedStyles.get(g.currentQuerySelector),Lt=ht.get(tt);let qt=!0;Lt&&(re!=$&&re>=Lt.startTime&&$<=Lt.endTime&&(g.errors.push(function Fr(E,_,g,b,$){return new I.vHH(3010,!1)}()),qt=!1),re=Lt.startTime),qt&&ht.set(tt,{startTime:re,endTime:$}),g.options&&function Er(E,_,g){const b=_.params||{},$=Yr(E);$.length&&$.forEach(re=>{b.hasOwnProperty(re)||g.push(function pn(E){return new I.vHH(3001,!1)}())})}(Te,g.options,g.errors)})})}visitKeyframes(_,g){const b={type:5,styles:[],options:null};if(!g.currentAnimateTimings)return g.errors.push(function is(){return new I.vHH(3011,!1)}()),b;let re=0;const Ee=[];let Te=!1,tt=!1,ht=0;const Lt=_.steps.map(Mi=>{const Rr=this._makeStyleAst(Mi,g);let ks=null!=Rr.offset?Rr.offset:function To(E){if("string"==typeof E)return null;let _=null;if(Array.isArray(E))E.forEach(g=>{if(g instanceof Map&&g.has("offset")){const b=g;_=parseFloat(b.get("offset")),b.delete("offset")}});else if(E instanceof Map&&E.has("offset")){const g=E;_=parseFloat(g.get("offset")),g.delete("offset")}return _}(Rr.styles),rs=0;return null!=ks&&(re++,rs=Rr.offset=ks),tt=tt||rs<0||rs>1,Te=Te||rs<ht,ht=rs,Ee.push(rs),Rr});tt&&g.errors.push(function dr(){return new I.vHH(3012,!1)}()),Te&&g.errors.push(function cn(){return new I.vHH(3200,!1)}());const qt=_.steps.length;let rn=0;re>0&&re<qt?g.errors.push(function Fi(){return new I.vHH(3202,!1)}()):0==re&&(rn=1/(qt-1));const Gt=qt-1,an=g.currentTime,Rn=g.currentAnimateTimings,or=Rn.duration;return Lt.forEach((Mi,Rr)=>{const ks=rn>0?Rr==Gt?1:rn*Rr:Ee[Rr],rs=ks*or;g.currentTime=an+Rn.delay+rs,Rn.duration=rs,this._validateStyleAst(Mi,g),Mi.offset=ks,b.styles.push(Mi)}),b}visitReference(_,g){return{type:8,animation:Jt(this,xn(_.animation),g),options:Wi(_.options)}}visitAnimateChild(_,g){return g.depCount++,{type:9,options:Wi(_.options)}}visitAnimateRef(_,g){return{type:10,animation:this.visitReference(_.animation,g),options:Wi(_.options)}}visitQuery(_,g){const b=g.currentQuerySelector,$=_.options||{};g.queryCount++,g.currentQuery=_;const[re,Ee]=function io(E){const _=!!E.split(/\s*,\s*/).find(g=>":self"==g);return _&&(E=E.replace(Os,"")),E=E.replace(/@\*/g,ti).replace(/@\w+/g,g=>ti+"-"+g.slice(1)).replace(/:animating/g,Ms),[E,_]}(_.selector);g.currentQuerySelector=b.length?b+" "+re:re,Ie(g.collectedStyles,g.currentQuerySelector,new Map);const Te=Jt(this,xn(_.animation),g);return g.currentQuery=null,g.currentQuerySelector=b,{type:11,selector:re,limit:$.limit||0,optional:!!$.optional,includeSelf:Ee,animation:Te,originalSelector:_.selector,options:Wi(_.options)}}visitStagger(_,g){g.currentQuery||g.errors.push(function qr(){return new I.vHH(3013,!1)}());const b="full"===_.timings?{duration:0,delay:0,easing:"full"}:jr(_.timings,g.errors,!0);return{type:12,animation:Jt(this,xn(_.animation),g),timings:b,options:null}}}class Bo{constructor(_){this.errors=_,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Wi(E){return E?(E=bn(E)).params&&(E.params=function bl(E){return E?bn(E):null}(E.params)):E={},E}function Sa(E,_,g){return{duration:E,delay:_,easing:g}}function yo(E,_,g,b,$,re,Ee=null,Te=!1){return{type:1,element:E,keyframes:_,preStyleProps:g,postStyleProps:b,duration:$,delay:re,totalTime:$+re,easing:Ee,subTimeline:Te}}class Qi{constructor(){this._map=new Map}get(_){return this._map.get(_)||[]}append(_,g){let b=this._map.get(_);b||this._map.set(_,b=[]),b.push(...g)}has(_){return this._map.has(_)}clear(){this._map.clear()}}const Hr=new RegExp(":enter","g"),jo=new RegExp(":leave","g");function Rs(E,_,g,b,$,re=new Map,Ee=new Map,Te,tt,ht=[]){return(new oo).buildKeyframes(E,_,g,b,$,re,Ee,Te,tt,ht)}class oo{buildKeyframes(_,g,b,$,re,Ee,Te,tt,ht,Lt=[]){ht=ht||new Qi;const qt=new gs(_,g,ht,$,re,Lt,[]);qt.options=tt;const rn=tt.delay?Ui(tt.delay):0;qt.currentTimeline.delayNextStep(rn),qt.currentTimeline.setStyles([Ee],null,qt.errors,tt),Jt(this,b,qt);const Gt=qt.timelines.filter(an=>an.containsAnimation());if(Gt.length&&Te.size){let an;for(let Rn=Gt.length-1;Rn>=0;Rn--){const or=Gt[Rn];if(or.element===g){an=or;break}}an&&!an.allowOnlyTimelineStyles()&&an.setStyles([Te],null,qt.errors,tt)}return Gt.length?Gt.map(an=>an.buildKeyframes()):[yo(g,[],[],[],0,rn,"",!1)]}visitTrigger(_,g){}visitState(_,g){}visitTransition(_,g){}visitAnimateChild(_,g){const b=g.subInstructions.get(g.element);if(b){const $=g.createSubContext(_.options),re=g.currentTimeline.currentTime,Ee=this._visitSubInstructions(b,$,$.options);re!=Ee&&g.transformIntoNewTimeline(Ee)}g.previousNode=_}visitAnimateRef(_,g){const b=g.createSubContext(_.options);b.transformIntoNewTimeline(),this._applyAnimationRefDelays([_.options,_.animation.options],g,b),this.visitReference(_.animation,b),g.transformIntoNewTimeline(b.currentTimeline.currentTime),g.previousNode=_}_applyAnimationRefDelays(_,g,b){for(const $ of _){const re=$?.delay;if(re){const Ee="number"==typeof re?re:Ui(Ts(re,$?.params??{},g.errors));b.delayNextStep(Ee)}}}_visitSubInstructions(_,g,b){let re=g.currentTimeline.currentTime;const Ee=null!=b.duration?Ui(b.duration):null,Te=null!=b.delay?Ui(b.delay):null;return 0!==Ee&&_.forEach(tt=>{const ht=g.appendInstructionToTimeline(tt,Ee,Te);re=Math.max(re,ht.duration+ht.delay)}),re}visitReference(_,g){g.updateOptions(_.options,!0),Jt(this,_.animation,g),g.previousNode=_}visitSequence(_,g){const b=g.subContextCount;let $=g;const re=_.options;if(re&&(re.params||re.delay)&&($=g.createSubContext(re),$.transformIntoNewTimeline(),null!=re.delay)){6==$.previousNode.type&&($.currentTimeline.snapshotCurrentStyles(),$.previousNode=vo);const Ee=Ui(re.delay);$.delayNextStep(Ee)}_.steps.length&&(_.steps.forEach(Ee=>Jt(this,Ee,$)),$.currentTimeline.applyStylesToKeyframe(),$.subContextCount>b&&$.transformIntoNewTimeline()),g.previousNode=_}visitGroup(_,g){const b=[];let $=g.currentTimeline.currentTime;const re=_.options&&_.options.delay?Ui(_.options.delay):0;_.steps.forEach(Ee=>{const Te=g.createSubContext(_.options);re&&Te.delayNextStep(re),Jt(this,Ee,Te),$=Math.max($,Te.currentTimeline.currentTime),b.push(Te.currentTimeline)}),b.forEach(Ee=>g.currentTimeline.mergeTimelineCollectedStyles(Ee)),g.transformIntoNewTimeline($),g.previousNode=_}_visitTiming(_,g){if(_.dynamic){const b=_.strValue;return jr(g.params?Ts(b,g.params,g.errors):b,g.errors)}return{duration:_.duration,delay:_.delay,easing:_.easing}}visitAnimate(_,g){const b=g.currentAnimateTimings=this._visitTiming(_.timings,g),$=g.currentTimeline;b.delay&&(g.incrementTime(b.delay),$.snapshotCurrentStyles());const re=_.style;5==re.type?this.visitKeyframes(re,g):(g.incrementTime(b.duration),this.visitStyle(re,g),$.applyStylesToKeyframe()),g.currentAnimateTimings=null,g.previousNode=_}visitStyle(_,g){const b=g.currentTimeline,$=g.currentAnimateTimings;!$&&b.hasCurrentStyleProperties()&&b.forwardFrame();const re=$&&$.easing||_.easing;_.isEmptyStep?b.applyEmptyStep(re):b.setStyles(_.styles,re,g.errors,g.options),g.previousNode=_}visitKeyframes(_,g){const b=g.currentAnimateTimings,$=g.currentTimeline.duration,re=b.duration,Te=g.createSubContext().currentTimeline;Te.easing=b.easing,_.styles.forEach(tt=>{Te.forwardTime((tt.offset||0)*re),Te.setStyles(tt.styles,tt.easing,g.errors,g.options),Te.applyStylesToKeyframe()}),g.currentTimeline.mergeTimelineCollectedStyles(Te),g.transformIntoNewTimeline($+re),g.previousNode=_}visitQuery(_,g){const b=g.currentTimeline.currentTime,$=_.options||{},re=$.delay?Ui($.delay):0;re&&(6===g.previousNode.type||0==b&&g.currentTimeline.hasCurrentStyleProperties())&&(g.currentTimeline.snapshotCurrentStyles(),g.previousNode=vo);let Ee=b;const Te=g.invokeQuery(_.selector,_.originalSelector,_.limit,_.includeSelf,!!$.optional,g.errors);g.currentQueryTotal=Te.length;let tt=null;Te.forEach((ht,Lt)=>{g.currentQueryIndex=Lt;const qt=g.createSubContext(_.options,ht);re&&qt.delayNextStep(re),ht===g.element&&(tt=qt.currentTimeline),Jt(this,_.animation,qt),qt.currentTimeline.applyStylesToKeyframe(),Ee=Math.max(Ee,qt.currentTimeline.currentTime)}),g.currentQueryIndex=0,g.currentQueryTotal=0,g.transformIntoNewTimeline(Ee),tt&&(g.currentTimeline.mergeTimelineCollectedStyles(tt),g.currentTimeline.snapshotCurrentStyles()),g.previousNode=_}visitStagger(_,g){const b=g.parentContext,$=g.currentTimeline,re=_.timings,Ee=Math.abs(re.duration),Te=Ee*(g.currentQueryTotal-1);let tt=Ee*g.currentQueryIndex;switch(re.duration<0?"reverse":re.easing){case"reverse":tt=Te-tt;break;case"full":tt=b.currentStaggerTime}const Lt=g.currentTimeline;tt&&Lt.delayNextStep(tt);const qt=Lt.currentTime;Jt(this,_.animation,g),g.previousNode=_,b.currentStaggerTime=$.currentTime-qt+($.startTime-b.currentTimeline.startTime)}}const vo={};class gs{constructor(_,g,b,$,re,Ee,Te,tt){this._driver=_,this.element=g,this.subInstructions=b,this._enterClassName=$,this._leaveClassName=re,this.errors=Ee,this.timelines=Te,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vo,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=tt||new Ss(this._driver,g,0),Te.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(_,g){if(!_)return;const b=_;let $=this.options;null!=b.duration&&($.duration=Ui(b.duration)),null!=b.delay&&($.delay=Ui(b.delay));const re=b.params;if(re){let Ee=$.params;Ee||(Ee=this.options.params={}),Object.keys(re).forEach(Te=>{(!g||!Ee.hasOwnProperty(Te))&&(Ee[Te]=Ts(re[Te],Ee,this.errors))})}}_copyOptions(){const _={};if(this.options){const g=this.options.params;if(g){const b=_.params={};Object.keys(g).forEach($=>{b[$]=g[$]})}}return _}createSubContext(_=null,g,b){const $=g||this.element,re=new gs(this._driver,$,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork($,b||0));return re.previousNode=this.previousNode,re.currentAnimateTimings=this.currentAnimateTimings,re.options=this._copyOptions(),re.updateOptions(_),re.currentQueryIndex=this.currentQueryIndex,re.currentQueryTotal=this.currentQueryTotal,re.parentContext=this,this.subContextCount++,re}transformIntoNewTimeline(_){return this.previousNode=vo,this.currentTimeline=this.currentTimeline.fork(this.element,_),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(_,g,b){const $={duration:g??_.duration,delay:this.currentTimeline.currentTime+(b??0)+_.delay,easing:""},re=new kn(this._driver,_.element,_.keyframes,_.preStyleProps,_.postStyleProps,$,_.stretchStartingKeyframe);return this.timelines.push(re),$}incrementTime(_){this.currentTimeline.forwardTime(this.currentTimeline.duration+_)}delayNextStep(_){_>0&&this.currentTimeline.delayNextStep(_)}invokeQuery(_,g,b,$,re,Ee){let Te=[];if($&&Te.push(this.element),_.length>0){_=(_=_.replace(Hr,"."+this._enterClassName)).replace(jo,"."+this._leaveClassName);let ht=this._driver.query(this.element,_,1!=b);0!==b&&(ht=b<0?ht.slice(ht.length+b,ht.length):ht.slice(0,b)),Te.push(...ht)}return!re&&0==Te.length&&Ee.push(function wr(E){return new I.vHH(3014,!1)}()),Te}}class Ss{constructor(_,g,b,$){this._driver=_,this.element=g,this.startTime=b,this._elementTimelineStylesLookup=$,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(g),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(g,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(_){const g=1===this._keyframes.size&&this._pendingStyles.size;this.duration||g?(this.forwardTime(this.currentTime+_),g&&this.snapshotCurrentStyles()):this.startTime+=_}fork(_,g){return this.applyStylesToKeyframe(),new Ss(this._driver,_,g||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(_){this.applyStylesToKeyframe(),this.duration=_,this._loadKeyframe()}_updateStyle(_,g){this._localTimelineStyles.set(_,g),this._globalTimelineStyles.set(_,g),this._styleSummary.set(_,{time:this.currentTime,value:g})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(_){_&&this._previousKeyframe.set("easing",_);for(let[g,b]of this._globalTimelineStyles)this._backFill.set(g,b||q.l3),this._currentKeyframe.set(g,q.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(_,g,b,$){g&&this._previousKeyframe.set("easing",g);const re=$&&$.params||{},Ee=function xs(E,_){const g=new Map;let b;return E.forEach($=>{if("*"===$){b=b||_.keys();for(let re of b)g.set(re,q.l3)}else er($,g)}),g}(_,this._globalTimelineStyles);for(let[Te,tt]of Ee){const ht=Ts(tt,re,b);this._pendingStyles.set(Te,ht),this._localTimelineStyles.has(Te)||this._backFill.set(Te,this._globalTimelineStyles.get(Te)??q.l3),this._updateStyle(Te,ht)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((_,g)=>{this._currentKeyframe.set(g,_)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((_,g)=>{this._currentKeyframe.has(g)||this._currentKeyframe.set(g,_)}))}snapshotCurrentStyles(){for(let[_,g]of this._localTimelineStyles)this._pendingStyles.set(_,g),this._updateStyle(_,g)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const _=[];for(let g in this._currentKeyframe)_.push(g);return _}mergeTimelineCollectedStyles(_){_._styleSummary.forEach((g,b)=>{const $=this._styleSummary.get(b);(!$||g.time>$.time)&&this._updateStyle(b,g.value)})}buildKeyframes(){this.applyStylesToKeyframe();const _=new Set,g=new Set,b=1===this._keyframes.size&&0===this.duration;let $=[];this._keyframes.forEach((Te,tt)=>{const ht=er(Te,new Map,this._backFill);ht.forEach((Lt,qt)=>{Lt===q.k1?_.add(qt):Lt===q.l3&&g.add(qt)}),b||ht.set("offset",tt/this.duration),$.push(ht)});const re=_.size?De(_.values()):[],Ee=g.size?De(g.values()):[];if(b){const Te=$[0],tt=new Map(Te);Te.set("offset",0),tt.set("offset",1),$=[Te,tt]}return yo(this.element,$,re,Ee,this.duration,this.startTime,this.easing,!1)}}class kn extends Ss{constructor(_,g,b,$,re,Ee,Te=!1){super(_,g,Ee.delay),this.keyframes=b,this.preStyleProps=$,this.postStyleProps=re,this._stretchStartingKeyframe=Te,this.timings={duration:Ee.duration,delay:Ee.delay,easing:Ee.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let _=this.keyframes,{delay:g,duration:b,easing:$}=this.timings;if(this._stretchStartingKeyframe&&g){const re=[],Ee=b+g,Te=g/Ee,tt=er(_[0]);tt.set("offset",0),re.push(tt);const ht=er(_[0]);ht.set("offset",Eo(Te)),re.push(ht);const Lt=_.length-1;for(let qt=1;qt<=Lt;qt++){let rn=er(_[qt]);const Gt=rn.get("offset");rn.set("offset",Eo((g+Gt*b)/Ee)),re.push(rn)}b=Ee,g=0,$="",_=re}return yo(this.element,_,this.preStyleProps,this.postStyleProps,b,g,$,!0)}}function Eo(E,_=3){const g=Math.pow(10,_-1);return Math.round(E*g)/g}class Pr{}const Ho=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class vi extends Pr{normalizePropertyName(_,g){return We(_)}normalizeStyleValue(_,g,b,$){let re="";const Ee=b.toString().trim();if(Ho.has(g)&&0!==b&&"0"!==b)if("number"==typeof b)re="px";else{const Te=b.match(/^[+-]?[\d\.]+([a-z]*)$/);Te&&0==Te[1].length&&$.push(function dt(E,_){return new I.vHH(3005,!1)}())}return Ee+re}}function ao(E,_,g,b,$,re,Ee,Te,tt,ht,Lt,qt,rn){return{type:0,element:E,triggerName:_,isRemovalTransition:$,fromState:g,fromStyles:re,toState:b,toStyles:Ee,timelines:Te,queriedElements:tt,preStyleProps:ht,postStyleProps:Lt,totalTime:qt,errors:rn}}const ls={};class $r{constructor(_,g,b){this._triggerName=_,this.ast=g,this._stateStyles=b}match(_,g,b,$){return function $o(E,_,g,b,$){return E.some(re=>re(_,g,b,$))}(this.ast.matchers,_,g,b,$)}buildStyles(_,g,b){let $=this._stateStyles.get("*");return void 0!==_&&($=this._stateStyles.get(_?.toString())||$),$?$.buildStyles(g,b):new Map}build(_,g,b,$,re,Ee,Te,tt,ht,Lt){const qt=[],rn=this.ast.options&&this.ast.options.params||ls,an=this.buildStyles(b,Te&&Te.params||ls,qt),Rn=tt&&tt.params||ls,or=this.buildStyles($,Rn,qt),Mi=new Set,Rr=new Map,ks=new Map,rs="void"===$,vl={params:Ei(Rn,rn),delay:this.ast.options?.delay},Is=Lt?[]:Rs(_,g,this.ast.animation,re,Ee,an,or,vl,ht,qt);let po=0;if(Is.forEach(El=>{po=Math.max(El.duration+El.delay,po)}),qt.length)return ao(g,this._triggerName,b,$,rs,an,or,[],[],Rr,ks,po,qt);Is.forEach(El=>{const al=El.element,ar=Ie(Rr,al,new Set);El.preStyleProps.forEach(ko=>ar.add(ko));const ca=Ie(ks,al,new Set);El.postStyleProps.forEach(ko=>ca.add(ko)),al!==g&&Mi.add(al)});const Ua=De(Mi.values());return ao(g,this._triggerName,b,$,rs,an,or,Is,Ua,Rr,ks,po)}}function Ei(E,_){const g=bn(_);for(const b in E)E.hasOwnProperty(b)&&null!=E[b]&&(g[b]=E[b]);return g}class us{constructor(_,g,b){this.styles=_,this.defaultParams=g,this.normalizer=b}buildStyles(_,g){const b=new Map,$=bn(this.defaultParams);return Object.keys(_).forEach(re=>{const Ee=_[re];null!==Ee&&($[re]=Ee)}),this.styles.styles.forEach(re=>{"string"!=typeof re&&re.forEach((Ee,Te)=>{Ee&&(Ee=Ts(Ee,$,g));const tt=this.normalizer.normalizePropertyName(Te,g);Ee=this.normalizer.normalizeStyleValue(Te,tt,Ee,g),b.set(Te,Ee)})}),b}}class Tr{constructor(_,g,b){this.name=_,this.ast=g,this._normalizer=b,this.transitionFactories=[],this.states=new Map,g.states.forEach($=>{this.states.set($.name,new us($.style,$.options&&$.options.params||{},b))}),bo(this.states,"true","1"),bo(this.states,"false","0"),g.transitions.forEach($=>{this.transitionFactories.push(new $r(_,$,this.states))}),this.fallbackTransition=function qi(E,_,g){return new $r(E,{type:1,animation:{type:2,steps:[],options:null},matchers:[(Ee,Te)=>!0],options:null,queryCount:0,depCount:0},_)}(_,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(_,g,b,$){return this.transitionFactories.find(Ee=>Ee.match(_,g,b,$))||null}matchStyles(_,g,b){return this.fallbackTransition.buildStyles(_,g,b)}}function bo(E,_,g){E.has(_)?E.has(g)||E.set(g,E.get(_)):E.has(g)&&E.set(_,E.get(g))}const Ns=new Qi;class Za{constructor(_,g,b){this.bodyNode=_,this._driver=g,this._normalizer=b,this._animations=new Map,this._playersById=new Map,this.players=[]}register(_,g){const b=[],$=[],re=Gn(this._driver,g,b,$);if(b.length)throw function Qn(E){return new I.vHH(3503,!1)}();this._animations.set(_,re)}_buildPlayer(_,g,b){const $=_.element,re=Ne(0,this._normalizer,0,_.keyframes,g,b);return this._driver.animate($,re,_.duration,_.delay,_.easing,[],!0)}create(_,g,b={}){const $=[],re=this._animations.get(_);let Ee;const Te=new Map;if(re?(Ee=Rs(this._driver,g,re,hn,fr,new Map,new Map,b,Ns,$),Ee.forEach(Lt=>{const qt=Ie(Te,Lt.element,new Map);Lt.postStyleProps.forEach(rn=>qt.set(rn,null))})):($.push(function yi(){return new I.vHH(3300,!1)}()),Ee=[]),$.length)throw function Vr(E){return new I.vHH(3504,!1)}();Te.forEach((Lt,qt)=>{Lt.forEach((rn,Gt)=>{Lt.set(Gt,this._driver.computeStyle(qt,Gt,q.l3))})});const ht=be(Ee.map(Lt=>{const qt=Te.get(Lt.element);return this._buildPlayer(Lt,new Map,qt)}));return this._playersById.set(_,ht),ht.onDestroy(()=>this.destroy(_)),this.players.push(ht),ht}destroy(_){const g=this._getPlayer(_);g.destroy(),this._playersById.delete(_);const b=this.players.indexOf(g);b>=0&&this.players.splice(b,1)}_getPlayer(_){const g=this._playersById.get(_);if(!g)throw function gi(E){return new I.vHH(3301,!1)}();return g}listen(_,g,b,$){const re=ve(g,"","","");return Ot(this._getPlayer(_),b,re,$),()=>{}}command(_,g,b,$){if("register"==b)return void this.register(_,$[0]);if("create"==b)return void this.create(_,g,$[0]||{});const re=this._getPlayer(_);switch(b){case"play":re.play();break;case"pause":re.pause();break;case"reset":re.reset();break;case"restart":re.restart();break;case"finish":re.finish();break;case"init":re.init();break;case"setPosition":re.setPosition(parseFloat($[0]));break;case"destroy":this.destroy(_)}}}const Ys="ng-animate-queued",Ao="ng-animate-disabled",H=[],k={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ce={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},et="__ng_removed";class ln{get params(){return this.options.params}constructor(_,g=""){this.namespaceId=g;const b=_&&_.hasOwnProperty("value");if(this.value=function Ha(E){return E??null}(b?_.value:_),b){const re=bn(_);delete re.value,this.options=re}else this.options={};this.options.params||(this.options.params={})}absorbOptions(_){const g=_.params;if(g){const b=this.options.params;Object.keys(g).forEach($=>{null==b[$]&&(b[$]=g[$])})}}}const Gr="void",yt=new ln(Gr);class cr{constructor(_,g,b){this.id=_,this.hostElement=g,this._engine=b,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+_,Vi(g,this._hostClassName)}listen(_,g,b,$){if(!this._triggers.has(g))throw function Br(E,_){return new I.vHH(3302,!1)}();if(null==b||0==b.length)throw function di(E){return new I.vHH(3303,!1)}();if(!function Bs(E){return"start"==E||"done"==E}(b))throw function vr(E,_){return new I.vHH(3400,!1)}();const re=Ie(this._elementListeners,_,[]),Ee={name:g,phase:b,callback:$};re.push(Ee);const Te=Ie(this._engine.statesByElement,_,new Map);return Te.has(g)||(Vi(_,tr),Vi(_,tr+"-"+g),Te.set(g,yt)),()=>{this._engine.afterFlush(()=>{const tt=re.indexOf(Ee);tt>=0&&re.splice(tt,1),this._triggers.has(g)||Te.delete(g)})}}register(_,g){return!this._triggers.has(_)&&(this._triggers.set(_,g),!0)}_getTrigger(_){const g=this._triggers.get(_);if(!g)throw function ki(E){return new I.vHH(3401,!1)}();return g}trigger(_,g,b,$=!0){const re=this._getTrigger(g),Ee=new Al(this.id,g,_);let Te=this._engine.statesByElement.get(_);Te||(Vi(_,tr),Vi(_,tr+"-"+g),this._engine.statesByElement.set(_,Te=new Map));let tt=Te.get(g);const ht=new ln(b,this.id);if(!(b&&b.hasOwnProperty("value"))&&tt&&ht.absorbOptions(tt.options),Te.set(g,ht),tt||(tt=yt),ht.value!==Gr&&tt.value===ht.value){if(!function Qo(E,_){const g=Object.keys(E),b=Object.keys(_);if(g.length!=b.length)return!1;for(let $=0;$<g.length;$++){const re=g[$];if(!_.hasOwnProperty(re)||E[re]!==_[re])return!1}return!0}(tt.params,ht.params)){const Rn=[],or=re.matchStyles(tt.value,tt.params,Rn),Mi=re.matchStyles(ht.value,ht.params,Rn);Rn.length?this._engine.reportError(Rn):this._engine.afterFlush(()=>{_i(_,or),oi(_,Mi)})}return}const rn=Ie(this._engine.playersByElement,_,[]);rn.forEach(Rn=>{Rn.namespaceId==this.id&&Rn.triggerName==g&&Rn.queued&&Rn.destroy()});let Gt=re.matchTransition(tt.value,ht.value,_,ht.params),an=!1;if(!Gt){if(!$)return;Gt=re.fallbackTransition,an=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:_,triggerName:g,transition:Gt,fromState:tt,toState:ht,player:Ee,isFallbackTransition:an}),an||(Vi(_,Ys),Ee.onStart(()=>{Ki(_,Ys)})),Ee.onDone(()=>{let Rn=this.players.indexOf(Ee);Rn>=0&&this.players.splice(Rn,1);const or=this._engine.playersByElement.get(_);if(or){let Mi=or.indexOf(Ee);Mi>=0&&or.splice(Mi,1)}}),this.players.push(Ee),rn.push(Ee),Ee}deregister(_){this._triggers.delete(_),this._engine.statesByElement.forEach(g=>g.delete(_)),this._elementListeners.forEach((g,b)=>{this._elementListeners.set(b,g.filter($=>$.name!=_))})}clearElementCache(_){this._engine.statesByElement.delete(_),this._elementListeners.delete(_);const g=this._engine.playersByElement.get(_);g&&(g.forEach(b=>b.destroy()),this._engine.playersByElement.delete(_))}_signalRemovalForInnerTriggers(_,g){const b=this._engine.driver.query(_,ti,!0);b.forEach($=>{if($[et])return;const re=this._engine.fetchNamespacesByElement($);re.size?re.forEach(Ee=>Ee.triggerLeaveAnimation($,g,!1,!0)):this.clearElementCache($)}),this._engine.afterFlushAnimationsDone(()=>b.forEach($=>this.clearElementCache($)))}triggerLeaveAnimation(_,g,b,$){const re=this._engine.statesByElement.get(_),Ee=new Map;if(re){const Te=[];if(re.forEach((tt,ht)=>{if(Ee.set(ht,tt.value),this._triggers.has(ht)){const Lt=this.trigger(_,ht,Gr,$);Lt&&Te.push(Lt)}}),Te.length)return this._engine.markElementAsRemoved(this.id,_,!0,g,Ee),b&&be(Te).onDone(()=>this._engine.processLeaveNode(_)),!0}return!1}prepareLeaveAnimationListeners(_){const g=this._elementListeners.get(_),b=this._engine.statesByElement.get(_);if(g&&b){const $=new Set;g.forEach(re=>{const Ee=re.name;if($.has(Ee))return;$.add(Ee);const tt=this._triggers.get(Ee).fallbackTransition,ht=b.get(Ee)||yt,Lt=new ln(Gr),qt=new Al(this.id,Ee,_);this._engine.totalQueuedPlayers++,this._queue.push({element:_,triggerName:Ee,transition:tt,fromState:ht,toState:Lt,player:qt,isFallbackTransition:!0})})}}removeNode(_,g){const b=this._engine;if(_.childElementCount&&this._signalRemovalForInnerTriggers(_,g),this.triggerLeaveAnimation(_,g,!0))return;let $=!1;if(b.totalAnimations){const re=b.players.length?b.playersByQueriedElement.get(_):[];if(re&&re.length)$=!0;else{let Ee=_;for(;Ee=Ee.parentNode;)if(b.statesByElement.get(Ee)){$=!0;break}}}if(this.prepareLeaveAnimationListeners(_),$)b.markElementAsRemoved(this.id,_,!1,g);else{const re=_[et];(!re||re===k)&&(b.afterFlush(()=>this.clearElementCache(_)),b.destroyInnerAnimations(_),b._onRemovalComplete(_,g))}}insertNode(_,g){Vi(_,this._hostClassName)}drainQueuedTransitions(_){const g=[];return this._queue.forEach(b=>{const $=b.player;if($.destroyed)return;const re=b.element,Ee=this._elementListeners.get(re);Ee&&Ee.forEach(Te=>{if(Te.name==b.triggerName){const tt=ve(re,b.triggerName,b.fromState.value,b.toState.value);tt._data=_,Ot(b.player,Te.phase,tt,Te.callback)}}),$.markedForDestroy?this._engine.afterFlush(()=>{$.destroy()}):g.push(b)}),this._queue=[],g.sort((b,$)=>{const re=b.transition.ast.depCount,Ee=$.transition.ast.depCount;return 0==re||0==Ee?re-Ee:this._engine.driver.containsElement(b.element,$.element)?1:-1})}destroy(_){this.players.forEach(g=>g.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,_)}elementContainsData(_){let g=!1;return this._elementListeners.has(_)&&(g=!0),g=!!this._queue.find(b=>b.element===_)||g,g}}class zo{_onRemovalComplete(_,g){this.onRemovalComplete(_,g)}constructor(_,g,b){this.bodyNode=_,this.driver=g,this._normalizer=b,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=($,re)=>{}}get queuedPlayers(){const _=[];return this._namespaceList.forEach(g=>{g.players.forEach(b=>{b.queued&&_.push(b)})}),_}createNamespace(_,g){const b=new cr(_,g,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,g)?this._balanceNamespaceList(b,g):(this.newHostElements.set(g,b),this.collectEnterElement(g)),this._namespaceLookup[_]=b}_balanceNamespaceList(_,g){const b=this._namespaceList,$=this.namespacesByHostElement;if(b.length-1>=0){let Ee=!1,Te=this.driver.getParentElement(g);for(;Te;){const tt=$.get(Te);if(tt){const ht=b.indexOf(tt);b.splice(ht+1,0,_),Ee=!0;break}Te=this.driver.getParentElement(Te)}Ee||b.unshift(_)}else b.push(_);return $.set(g,_),_}register(_,g){let b=this._namespaceLookup[_];return b||(b=this.createNamespace(_,g)),b}registerTrigger(_,g,b){let $=this._namespaceLookup[_];$&&$.register(g,b)&&this.totalAnimations++}destroy(_,g){if(!_)return;const b=this._fetchNamespace(_);this.afterFlush(()=>{this.namespacesByHostElement.delete(b.hostElement),delete this._namespaceLookup[_];const $=this._namespaceList.indexOf(b);$>=0&&this._namespaceList.splice($,1)}),this.afterFlushAnimationsDone(()=>b.destroy(g))}_fetchNamespace(_){return this._namespaceLookup[_]}fetchNamespacesByElement(_){const g=new Set,b=this.statesByElement.get(_);if(b)for(let $ of b.values())if($.namespaceId){const re=this._fetchNamespace($.namespaceId);re&&g.add(re)}return g}trigger(_,g,b,$){if(Ri(g)){const re=this._fetchNamespace(_);if(re)return re.trigger(g,b,$),!0}return!1}insertNode(_,g,b,$){if(!Ri(g))return;const re=g[et];if(re&&re.setForRemoval){re.setForRemoval=!1,re.setForMove=!0;const Ee=this.collectedLeaveElements.indexOf(g);Ee>=0&&this.collectedLeaveElements.splice(Ee,1)}if(_){const Ee=this._fetchNamespace(_);Ee&&Ee.insertNode(g,b)}$&&this.collectEnterElement(g)}collectEnterElement(_){this.collectedEnterElements.push(_)}markElementAsDisabled(_,g){g?this.disabledNodes.has(_)||(this.disabledNodes.add(_),Vi(_,Ao)):this.disabledNodes.has(_)&&(this.disabledNodes.delete(_),Ki(_,Ao))}removeNode(_,g,b,$){if(Ri(g)){const re=_?this._fetchNamespace(_):null;if(re?re.removeNode(g,$):this.markElementAsRemoved(_,g,!1,$),b){const Ee=this.namespacesByHostElement.get(g);Ee&&Ee.id!==_&&Ee.removeNode(g,$)}}else this._onRemovalComplete(g,$)}markElementAsRemoved(_,g,b,$,re){this.collectedLeaveElements.push(g),g[et]={namespaceId:_,setForRemoval:$,hasAnimation:b,removedBeforeQueried:!1,previousTriggersValues:re}}listen(_,g,b,$,re){return Ri(g)?this._fetchNamespace(_).listen(g,b,$,re):()=>{}}_buildInstruction(_,g,b,$,re){return _.transition.build(this.driver,_.element,_.fromState.value,_.toState.value,b,$,_.fromState.options,_.toState.options,g,re)}destroyInnerAnimations(_){let g=this.driver.query(_,ti,!0);g.forEach(b=>this.destroyActiveAnimationsForElement(b)),0!=this.playersByQueriedElement.size&&(g=this.driver.query(_,Ms,!0),g.forEach(b=>this.finishActiveQueriedAnimationOnElement(b)))}destroyActiveAnimationsForElement(_){const g=this.playersByElement.get(_);g&&g.forEach(b=>{b.queued?b.markedForDestroy=!0:b.destroy()})}finishActiveQueriedAnimationOnElement(_){const g=this.playersByQueriedElement.get(_);g&&g.forEach(b=>b.finish())}whenRenderingDone(){return new Promise(_=>{if(this.players.length)return be(this.players).onDone(()=>_());_()})}processLeaveNode(_){const g=_[et];if(g&&g.setForRemoval){if(_[et]=k,g.namespaceId){this.destroyInnerAnimations(_);const b=this._fetchNamespace(g.namespaceId);b&&b.clearElementCache(_)}this._onRemovalComplete(_,g.setForRemoval)}_.classList?.contains(Ao)&&this.markElementAsDisabled(_,!1),this.driver.query(_,".ng-animate-disabled",!0).forEach(b=>{this.markElementAsDisabled(b,!1)})}flush(_=-1){let g=[];if(this.newHostElements.size&&(this.newHostElements.forEach((b,$)=>this._balanceNamespaceList(b,$)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let b=0;b<this.collectedEnterElements.length;b++)Vi(this.collectedEnterElements[b],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const b=[];try{g=this._flushAnimations(b,_)}finally{for(let $=0;$<b.length;$++)b[$]()}}else for(let b=0;b<this.collectedLeaveElements.length;b++)this.processLeaveNode(this.collectedLeaveElements[b]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(b=>b()),this._flushFns=[],this._whenQuietFns.length){const b=this._whenQuietFns;this._whenQuietFns=[],g.length?be(g).onDone(()=>{b.forEach($=>$())}):b.forEach($=>$())}}reportError(_){throw function $n(E){return new I.vHH(3402,!1)}()}_flushAnimations(_,g){const b=new Qi,$=[],re=new Map,Ee=[],Te=new Map,tt=new Map,ht=new Map,Lt=new Set;this.disabledNodes.forEach(Mn=>{Lt.add(Mn);const Bn=this.driver.query(Mn,".ng-animate-queued",!0);for(let nr=0;nr<Bn.length;nr++)Lt.add(Bn[nr])});const qt=this.bodyNode,rn=Array.from(this.statesByElement.keys()),Gt=Yo(rn,this.collectedEnterElements),an=new Map;let Rn=0;Gt.forEach((Mn,Bn)=>{const nr=hn+Rn++;an.set(Bn,nr),Mn.forEach(Zr=>Vi(Zr,nr))});const or=[],Mi=new Set,Rr=new Set;for(let Mn=0;Mn<this.collectedLeaveElements.length;Mn++){const Bn=this.collectedLeaveElements[Mn],nr=Bn[et];nr&&nr.setForRemoval&&(or.push(Bn),Mi.add(Bn),nr.hasAnimation?this.driver.query(Bn,".ng-star-inserted",!0).forEach(Zr=>Mi.add(Zr)):Rr.add(Bn))}const ks=new Map,rs=Yo(rn,Array.from(Mi));rs.forEach((Mn,Bn)=>{const nr=fr+Rn++;ks.set(Bn,nr),Mn.forEach(Zr=>Vi(Zr,nr))}),_.push(()=>{Gt.forEach((Mn,Bn)=>{const nr=an.get(Bn);Mn.forEach(Zr=>Ki(Zr,nr))}),rs.forEach((Mn,Bn)=>{const nr=ks.get(Bn);Mn.forEach(Zr=>Ki(Zr,nr))}),or.forEach(Mn=>{this.processLeaveNode(Mn)})});const vl=[],Is=[];for(let Mn=this._namespaceList.length-1;Mn>=0;Mn--)this._namespaceList[Mn].drainQueuedTransitions(g).forEach(nr=>{const Zr=nr.player,Js=nr.element;if(vl.push(Zr),this.collectedEnterElements.length){const hs=Js[et];if(hs&&hs.setForMove){if(hs.previousTriggersValues&&hs.previousTriggersValues.has(nr.triggerName)){const Cl=hs.previousTriggersValues.get(nr.triggerName),da=this.statesByElement.get(nr.element);if(da&&da.has(nr.triggerName)){const Li=da.get(nr.triggerName);Li.value=Cl,da.set(nr.triggerName,Li)}}return void Zr.destroy()}}const wa=!qt||!this.driver.containsElement(qt,Js),Uo=ks.get(Js),Dl=an.get(Js),Yi=this._buildInstruction(nr,b,Dl,Uo,wa);if(Yi.errors&&Yi.errors.length)return void Is.push(Yi);if(wa)return Zr.onStart(()=>_i(Js,Yi.fromStyles)),Zr.onDestroy(()=>oi(Js,Yi.toStyles)),void $.push(Zr);if(nr.isFallbackTransition)return Zr.onStart(()=>_i(Js,Yi.fromStyles)),Zr.onDestroy(()=>oi(Js,Yi.toStyles)),void $.push(Zr);const yu=[];Yi.timelines.forEach(hs=>{hs.stretchStartingKeyframe=!0,this.disabledNodes.has(hs.element)||yu.push(hs)}),Yi.timelines=yu,b.append(Js,Yi.timelines),Ee.push({instruction:Yi,player:Zr,element:Js}),Yi.queriedElements.forEach(hs=>Ie(Te,hs,[]).push(Zr)),Yi.preStyleProps.forEach((hs,Cl)=>{if(hs.size){let da=tt.get(Cl);da||tt.set(Cl,da=new Set),hs.forEach((Li,Pu)=>da.add(Pu))}}),Yi.postStyleProps.forEach((hs,Cl)=>{let da=ht.get(Cl);da||ht.set(Cl,da=new Set),hs.forEach((Li,Pu)=>da.add(Pu))})});if(Is.length){const Mn=[];Is.forEach(Bn=>{Mn.push(function lr(E,_){return new I.vHH(3505,!1)}())}),vl.forEach(Bn=>Bn.destroy()),this.reportError(Mn)}const po=new Map,Ua=new Map;Ee.forEach(Mn=>{const Bn=Mn.element;b.has(Bn)&&(Ua.set(Bn,Bn),this._beforeAnimationBuild(Mn.player.namespaceId,Mn.instruction,po))}),$.forEach(Mn=>{const Bn=Mn.element;this._getPreviousPlayers(Bn,!1,Mn.namespaceId,Mn.triggerName,null).forEach(Zr=>{Ie(po,Bn,[]).push(Zr),Zr.destroy()})});const El=or.filter(Mn=>ys(Mn,tt,ht)),al=new Map;Ko(al,this.driver,Rr,ht,q.l3).forEach(Mn=>{ys(Mn,tt,ht)&&El.push(Mn)});const ca=new Map;Gt.forEach((Mn,Bn)=>{Ko(ca,this.driver,new Set(Mn),tt,q.k1)}),El.forEach(Mn=>{const Bn=al.get(Mn),nr=ca.get(Mn);al.set(Mn,new Map([...Array.from(Bn?.entries()??[]),...Array.from(nr?.entries()??[])]))});const ko=[],$l=[],Mu={};Ee.forEach(Mn=>{const{element:Bn,player:nr,instruction:Zr}=Mn;if(b.has(Bn)){if(Lt.has(Bn))return nr.onDestroy(()=>oi(Bn,Zr.toStyles)),nr.disabled=!0,nr.overrideTotalTime(Zr.totalTime),void $.push(nr);let Js=Mu;if(Ua.size>1){let Uo=Bn;const Dl=[];for(;Uo=Uo.parentNode;){const Yi=Ua.get(Uo);if(Yi){Js=Yi;break}Dl.push(Uo)}Dl.forEach(Yi=>Ua.set(Yi,Js))}const wa=this._buildAnimation(nr.namespaceId,Zr,po,re,ca,al);if(nr.setRealPlayer(wa),Js===Mu)ko.push(nr);else{const Uo=this.playersByElement.get(Js);Uo&&Uo.length&&(nr.parentPlayer=be(Uo)),$.push(nr)}}else _i(Bn,Zr.fromStyles),nr.onDestroy(()=>oi(Bn,Zr.toStyles)),$l.push(nr),Lt.has(Bn)&&$.push(nr)}),$l.forEach(Mn=>{const Bn=re.get(Mn.element);if(Bn&&Bn.length){const nr=be(Bn);Mn.setRealPlayer(nr)}}),$.forEach(Mn=>{Mn.parentPlayer?Mn.syncPlayerEvents(Mn.parentPlayer):Mn.destroy()});for(let Mn=0;Mn<or.length;Mn++){const Bn=or[Mn],nr=Bn[et];if(Ki(Bn,fr),nr&&nr.hasAnimation)continue;let Zr=[];if(Te.size){let wa=Te.get(Bn);wa&&wa.length&&Zr.push(...wa);let Uo=this.driver.query(Bn,Ms,!0);for(let Dl=0;Dl<Uo.length;Dl++){let Yi=Te.get(Uo[Dl]);Yi&&Yi.length&&Zr.push(...Yi)}}const Js=Zr.filter(wa=>!wa.destroyed);Js.length?xi(this,Bn,Js):this.processLeaveNode(Bn)}return or.length=0,ko.forEach(Mn=>{this.players.push(Mn),Mn.onDone(()=>{Mn.destroy();const Bn=this.players.indexOf(Mn);this.players.splice(Bn,1)}),Mn.play()}),ko}elementContainsData(_,g){let b=!1;const $=g[et];return $&&$.setForRemoval&&(b=!0),this.playersByElement.has(g)&&(b=!0),this.playersByQueriedElement.has(g)&&(b=!0),this.statesByElement.has(g)&&(b=!0),this._fetchNamespace(_).elementContainsData(g)||b}afterFlush(_){this._flushFns.push(_)}afterFlushAnimationsDone(_){this._whenQuietFns.push(_)}_getPreviousPlayers(_,g,b,$,re){let Ee=[];if(g){const Te=this.playersByQueriedElement.get(_);Te&&(Ee=Te)}else{const Te=this.playersByElement.get(_);if(Te){const tt=!re||re==Gr;Te.forEach(ht=>{ht.queued||!tt&&ht.triggerName!=$||Ee.push(ht)})}}return(b||$)&&(Ee=Ee.filter(Te=>!(b&&b!=Te.namespaceId||$&&$!=Te.triggerName))),Ee}_beforeAnimationBuild(_,g,b){const re=g.element,Ee=g.isRemovalTransition?void 0:_,Te=g.isRemovalTransition?void 0:g.triggerName;for(const tt of g.timelines){const ht=tt.element,Lt=ht!==re,qt=Ie(b,ht,[]);this._getPreviousPlayers(ht,Lt,Ee,Te,g.toState).forEach(Gt=>{const an=Gt.getRealPlayer();an.beforeDestroy&&an.beforeDestroy(),Gt.destroy(),qt.push(Gt)})}_i(re,g.fromStyles)}_buildAnimation(_,g,b,$,re,Ee){const Te=g.triggerName,tt=g.element,ht=[],Lt=new Set,qt=new Set,rn=g.timelines.map(an=>{const Rn=an.element;Lt.add(Rn);const or=Rn[et];if(or&&or.removedBeforeQueried)return new q.ZN(an.duration,an.delay);const Mi=Rn!==tt,Rr=function ai(E){const _=[];return _a(E,_),_}((b.get(Rn)||H).map(po=>po.getRealPlayer())).filter(po=>!!po.element&&po.element===Rn),ks=re.get(Rn),rs=Ee.get(Rn),vl=Ne(0,this._normalizer,0,an.keyframes,ks,rs),Is=this._buildPlayer(an,vl,Rr);if(an.subTimeline&&$&&qt.add(Rn),Mi){const po=new Al(_,Te,Rn);po.setRealPlayer(Is),ht.push(po)}return Is});ht.forEach(an=>{Ie(this.playersByQueriedElement,an.element,[]).push(an),an.onDone(()=>function zi(E,_,g){let b=E.get(_);if(b){if(b.length){const $=b.indexOf(g);b.splice($,1)}0==b.length&&E.delete(_)}return b}(this.playersByQueriedElement,an.element,an))}),Lt.forEach(an=>Vi(an,ni));const Gt=be(rn);return Gt.onDestroy(()=>{Lt.forEach(an=>Ki(an,ni)),oi(tt,g.toStyles)}),qt.forEach(an=>{Ie($,an,[]).push(Gt)}),Gt}_buildPlayer(_,g,b){return g.length>0?this.driver.animate(_.element,g,_.duration,_.delay,_.easing,b):new q.ZN(_.duration,_.delay)}}class Al{constructor(_,g,b){this.namespaceId=_,this.triggerName=g,this.element=b,this._player=new q.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(_){this._containsRealPlayer||(this._player=_,this._queuedCallbacks.forEach((g,b)=>{g.forEach($=>Ot(_,b,void 0,$))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(_.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(_){this.totalTime=_}syncPlayerEvents(_){const g=this._player;g.triggerCallback&&_.onStart(()=>g.triggerCallback("start")),_.onDone(()=>this.finish()),_.onDestroy(()=>this.destroy())}_queueEvent(_,g){Ie(this._queuedCallbacks,_,[]).push(g)}onDone(_){this.queued&&this._queueEvent("done",_),this._player.onDone(_)}onStart(_){this.queued&&this._queueEvent("start",_),this._player.onStart(_)}onDestroy(_){this.queued&&this._queueEvent("destroy",_),this._player.onDestroy(_)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(_){this.queued||this._player.setPosition(_)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(_){const g=this._player;g.triggerCallback&&g.triggerCallback(_)}}function Ri(E){return E&&1===E.nodeType}function Mo(E,_){const g=E.style.display;return E.style.display=_??"none",g}function Ko(E,_,g,b,$){const re=[];g.forEach(tt=>re.push(Mo(tt)));const Ee=[];b.forEach((tt,ht)=>{const Lt=new Map;tt.forEach(qt=>{const rn=_.computeStyle(ht,qt,$);Lt.set(qt,rn),(!rn||0==rn.length)&&(ht[et]=ce,Ee.push(ht))}),E.set(ht,Lt)});let Te=0;return g.forEach(tt=>Mo(tt,re[Te++])),Ee}function Yo(E,_){const g=new Map;if(E.forEach(Te=>g.set(Te,[])),0==_.length)return g;const b=1,$=new Set(_),re=new Map;function Ee(Te){if(!Te)return b;let tt=re.get(Te);if(tt)return tt;const ht=Te.parentNode;return tt=g.has(ht)?ht:$.has(ht)?b:Ee(ht),re.set(Te,tt),tt}return _.forEach(Te=>{const tt=Ee(Te);tt!==b&&g.get(tt).push(Te)}),g}function Vi(E,_){E.classList?.add(_)}function Ki(E,_){E.classList?.remove(_)}function xi(E,_,g){be(g).onDone(()=>E.processLeaveNode(_))}function _a(E,_){for(let g=0;g<E.length;g++){const b=E[g];b instanceof q.ZE?_a(b.players,_):_.push(b)}}function ys(E,_,g){const b=g.get(E);if(!b)return!1;let $=_.get(E);return $?b.forEach(re=>$.add(re)):_.set(E,b),g.delete(E),!0}class ba{constructor(_,g,b){this.bodyNode=_,this._driver=g,this._normalizer=b,this._triggerCache={},this.onRemovalComplete=($,re)=>{},this._transitionEngine=new zo(_,g,b),this._timelineEngine=new Za(_,g,b),this._transitionEngine.onRemovalComplete=($,re)=>this.onRemovalComplete($,re)}registerTrigger(_,g,b,$,re){const Ee=_+"-"+$;let Te=this._triggerCache[Ee];if(!Te){const tt=[],ht=[],Lt=Gn(this._driver,re,tt,ht);if(tt.length)throw function dn(E,_){return new I.vHH(3404,!1)}();Te=function Go(E,_,g){return new Tr(E,_,g)}($,Lt,this._normalizer),this._triggerCache[Ee]=Te}this._transitionEngine.registerTrigger(g,$,Te)}register(_,g){this._transitionEngine.register(_,g)}destroy(_,g){this._transitionEngine.destroy(_,g)}onInsert(_,g,b,$){this._transitionEngine.insertNode(_,g,b,$)}onRemove(_,g,b,$){this._transitionEngine.removeNode(_,g,$||!1,b)}disableAnimations(_,g){this._transitionEngine.markElementAsDisabled(_,g)}process(_,g,b,$){if("@"==b.charAt(0)){const[re,Ee]=ot(b);this._timelineEngine.command(re,g,Ee,$)}else this._transitionEngine.trigger(_,g,b,$)}listen(_,g,b,$,re){if("@"==b.charAt(0)){const[Ee,Te]=ot(b);return this._timelineEngine.listen(Ee,g,Te,re)}return this._transitionEngine.listen(_,g,b,$,re)}flush(_=-1){this._transitionEngine.flush(_)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Bi=(()=>{class E{constructor(g,b,$){this._element=g,this._startStyles=b,this._endStyles=$,this._state=0;let re=E.initialStylesByElement.get(g);re||E.initialStylesByElement.set(g,re=new Map),this._initialStyles=re}start(){this._state<1&&(this._startStyles&&oi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(oi(this._element,this._initialStyles),this._endStyles&&(oi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(E.initialStylesByElement.delete(this._element),this._startStyles&&(_i(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(_i(this._element,this._endStyles),this._endStyles=null),oi(this._element,this._initialStyles),this._state=3)}}return E.initialStylesByElement=new WeakMap,E})();function Do(E){let _=null;return E.forEach((g,b)=>{(function lo(E){return"display"===E||"position"===E})(b)&&(_=_||new Map,_.set(b,g))}),_}class Xi{constructor(_,g,b,$){this.element=_,this.keyframes=g,this.options=b,this._specialStyles=$,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=b.duration,this._delay=b.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_=>_()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const _=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,_,this.options),this._finalKeyframe=_.length?_[_.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(_){const g=[];return _.forEach(b=>{g.push(Object.fromEntries(b))}),g}_triggerWebAnimation(_,g,b){return _.animate(this._convertKeyframesToObject(g),b)}onStart(_){this._originalOnStartFns.push(_),this._onStartFns.push(_)}onDone(_){this._originalOnDoneFns.push(_),this._onDoneFns.push(_)}onDestroy(_){this._onDestroyFns.push(_)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(_=>_()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(_=>_()),this._onDestroyFns=[])}setPosition(_){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=_*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const _=new Map;this.hasStarted()&&this._finalKeyframe.forEach((b,$)=>{"offset"!==$&&_.set($,this._finished?b:pr(this.element,$))}),this.currentSnapshot=_}triggerCallback(_){const g="start"===_?this._onStartFns:this._onDoneFns;g.forEach(b=>b()),g.length=0}}class qo{validateStyleProperty(_){return!0}validateAnimatableStyleProperty(_){return!0}matchesElement(_,g){return!1}containsElement(_,g){return Cr(_,g)}getParentElement(_){return Re(_)}query(_,g,b){return Ti(_,g,b)}computeStyle(_,g,b){return window.getComputedStyle(_)[g]}animate(_,g,b,$,re,Ee=[]){const tt={duration:b,delay:$,fill:0==$?"both":"forwards"};re&&(tt.easing=re);const ht=new Map,Lt=Ee.filter(Gt=>Gt instanceof Xi);(function Ht(E,_){return 0===E||0===_})(b,$)&&Lt.forEach(Gt=>{Gt.currentSnapshot.forEach((an,Rn)=>ht.set(Rn,an))});let qt=function An(E){return E.length?E[0]instanceof Map?E:E.map(_=>mn(_)):[]}(g).map(Gt=>er(Gt));qt=function zt(E,_,g){if(g.size&&_.length){let b=_[0],$=[];if(g.forEach((re,Ee)=>{b.has(Ee)||$.push(Ee),b.set(Ee,re)}),$.length)for(let re=1;re<_.length;re++){let Ee=_[re];$.forEach(Te=>Ee.set(Te,pr(E,Te)))}}return _}(_,qt,ht);const rn=function Zo(E,_){let g=null,b=null;return Array.isArray(_)&&_.length?(g=Do(_[0]),_.length>1&&(b=Do(_[_.length-1]))):_ instanceof Map&&(g=Do(_)),g||b?new Bi(E,g,b):null}(_,qt);return new Xi(_,qt,tt,rn)}}let qa=(()=>{class E extends q._j{constructor(g,b){super(),this._nextAnimationId=0,this._renderer=g.createRenderer(b.body,{id:"0",encapsulation:I.ifc.None,styles:[],data:{animation:[]}})}build(g){const b=this._nextAnimationId.toString();this._nextAnimationId++;const $=Array.isArray(g)?(0,q.vP)(g):g;return js(this._renderer,null,b,"register",[$]),new Ml(b,this._renderer)}}return E.\u0275fac=function(g){return new(g||E)(I.LFG(I.FYo),I.LFG(fe.K0))},E.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac}),E})();class Ml extends q.LC{constructor(_,g){super(),this._id=_,this._renderer=g}create(_,g){return new li(this._id,_,g||{},this._renderer)}}class li{constructor(_,g,b,$){this.id=_,this.element=g,this._renderer=$,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",b)}_listen(_,g){return this._renderer.listen(this.element,`@@${this.id}:${_}`,g)}_command(_,...g){return js(this._renderer,this.element,this.id,_,g)}onDone(_){this._listen("done",_)}onStart(_){this._listen("start",_)}onDestroy(_){this._listen("destroy",_)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(_){this._command("setPosition",_)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function js(E,_,g,b,$){return E.setProperty(_,`@@${g}:${b}`,$)}const $a="@.disabled";let Ga=(()=>{class E{constructor(g,b,$){this.delegate=g,this.engine=b,this._zone=$,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),b.onRemovalComplete=(re,Ee)=>{const Te=Ee?.parentNode(re);Te&&Ee.removeChild(Te,re)}}createRenderer(g,b){const re=this.delegate.createRenderer(g,b);if(!(g&&b&&b.data&&b.data.animation)){let Lt=this._rendererCache.get(re);return Lt||(Lt=new Xa("",re,this.engine,()=>this._rendererCache.delete(re)),this._rendererCache.set(re,Lt)),Lt}const Ee=b.id,Te=b.id+"-"+this._currentId;this._currentId++,this.engine.register(Te,g);const tt=Lt=>{Array.isArray(Lt)?Lt.forEach(tt):this.engine.registerTrigger(Ee,Te,g,Lt.name,Lt)};return b.data.animation.forEach(tt),new Jo(this,Te,re,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(g,b,$){g>=0&&g<this._microtaskId?this._zone.run(()=>b($)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(re=>{const[Ee,Te]=re;Ee(Te)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([b,$]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return E.\u0275fac=function(g){return new(g||E)(I.LFG(I.FYo),I.LFG(ba),I.LFG(I.R0b))},E.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac}),E})();class Xa{constructor(_,g,b,$){this.namespaceId=_,this.delegate=g,this.engine=b,this._onDestroy=$,this.destroyNode=this.delegate.destroyNode?re=>g.destroyNode(re):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(_,g){return this.delegate.createElement(_,g)}createComment(_){return this.delegate.createComment(_)}createText(_){return this.delegate.createText(_)}appendChild(_,g){this.delegate.appendChild(_,g),this.engine.onInsert(this.namespaceId,g,_,!1)}insertBefore(_,g,b,$=!0){this.delegate.insertBefore(_,g,b),this.engine.onInsert(this.namespaceId,g,_,$)}removeChild(_,g,b){this.engine.onRemove(this.namespaceId,g,this.delegate,b)}selectRootElement(_,g){return this.delegate.selectRootElement(_,g)}parentNode(_){return this.delegate.parentNode(_)}nextSibling(_){return this.delegate.nextSibling(_)}setAttribute(_,g,b,$){this.delegate.setAttribute(_,g,b,$)}removeAttribute(_,g,b){this.delegate.removeAttribute(_,g,b)}addClass(_,g){this.delegate.addClass(_,g)}removeClass(_,g){this.delegate.removeClass(_,g)}setStyle(_,g,b,$){this.delegate.setStyle(_,g,b,$)}removeStyle(_,g,b){this.delegate.removeStyle(_,g,b)}setProperty(_,g,b){"@"==g.charAt(0)&&g==$a?this.disableAnimations(_,!!b):this.delegate.setProperty(_,g,b)}setValue(_,g){this.delegate.setValue(_,g)}listen(_,g,b){return this.delegate.listen(_,g,b)}disableAnimations(_,g){this.engine.disableAnimations(_,g)}}class Jo extends Xa{constructor(_,g,b,$,re){super(g,b,$,re),this.factory=_,this.namespaceId=g}setProperty(_,g,b){"@"==g.charAt(0)?"."==g.charAt(1)&&g==$a?this.disableAnimations(_,b=void 0===b||!!b):this.engine.process(this.namespaceId,_,g.slice(1),b):this.delegate.setProperty(_,g,b)}listen(_,g,b){if("@"==g.charAt(0)){const $=function Ji(E){switch(E){case"body":return document.body;case"document":return document;case"window":return window;default:return E}}(_);let re=g.slice(1),Ee="";return"@"!=re.charAt(0)&&([re,Ee]=function Qs(E){const _=E.indexOf(".");return[E.substring(0,_),E.slice(_+1)]}(re)),this.engine.listen(this.namespaceId,$,re,Ee,Te=>{this.factory.scheduleListenerCallback(Te._data||-1,b,Te)})}return this.delegate.listen(_,g,b)}}let Di=(()=>{class E extends ba{constructor(g,b,$,re){super(g.body,b,$)}ngOnDestroy(){this.flush()}}return E.\u0275fac=function(g){return new(g||E)(I.LFG(fe.K0),I.LFG(Nt),I.LFG(Pr),I.LFG(I.z2F))},E.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac}),E})();const Ut=[{provide:q._j,useClass:qa},{provide:Pr,useFactory:function _s(){return new vi}},{provide:ba,useClass:Di},{provide:I.FYo,useFactory:function Qr(E,_,g){return new Ga(E,_,g)},deps:[f.se,ba,I.R0b]}],Ai=[{provide:Nt,useFactory:()=>new qo},{provide:I.QbO,useValue:"BrowserAnimations"},...Ut],ea=[{provide:Nt,useClass:nt},{provide:I.QbO,useValue:"NoopAnimations"},...Ut];let Pl=(()=>{class E{static withConfig(g){return{ngModule:E,providers:g.disableAnimations?ea:Ai}}}return E.\u0275fac=function(g){return new(g||E)},E.\u0275mod=I.oAB({type:E}),E.\u0275inj=I.cJS({providers:Ai,imports:[f.b2]}),E})(),en=(()=>{class E{constructor(g){this.router=g,this.loadCount=0,this.loadState=new It.X(!1),this.router.events.subscribe(b=>{this.navigationInterceptor(b)})}showLoader(){this.loadCount+=1,this.loadState.next(!0)}hideLoader(){this.loadCount=this.loadCount?--this.loadCount:0,this.loadCount||this.loadState.next(!1)}navigationInterceptor(g){g instanceof B.OD&&this.showLoader(),g instanceof B.m2&&this.hideLoader(),g instanceof B.gk&&this.hideLoader(),g instanceof B.Q3&&this.hideLoader()}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(B.F0))};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),ft=(()=>{class E{constructor(g){this.loaderService=g}intercept(g,b){return this.loaderService.showLoader(),b.handle(g).pipe((0,Xe.b)($=>{$ instanceof xe.Zn&&this.loaderService.hideLoader()},$=>{this.loaderService.hideLoader()}))}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(en))};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac})}return E})();const P={provide:xe.TP,useClass:ft,multi:!0};var Q=D(9770),V=D(4968),ue=D(7272),we=D(7579),pt=D(9751),Dt=D(5032);const nn=new pt.y(Dt.Z);var Nr=D(6451),zn=D(9300),gr=D(8646),Wn=D(5698),on=D(4086);const kr="Service workers are disabled or not supported by this browser";class mr{constructor(_){if(this.serviceWorker=_,_){const b=(0,V.R)(_,"controllerchange").pipe((0,vt.U)(()=>_.controller)),$=(0,Q.P)(()=>(0,St.of)(_.controller)),re=(0,ue.z)($,b);this.worker=re.pipe((0,zn.h)(Lt=>!!Lt)),this.registration=this.worker.pipe((0,Pt.w)(()=>_.getRegistration()));const ht=(0,V.R)(_,"message").pipe((0,vt.U)(Lt=>Lt.data)).pipe((0,zn.h)(Lt=>Lt&&Lt.type)).pipe((0,gr.n)());ht.connect(),this.events=ht}else this.worker=this.events=this.registration=function uo(E){return(0,Q.P)(()=>(0,Ze._)(new Error(E)))}(kr)}postMessage(_,g){return this.worker.pipe((0,Wn.q)(1),(0,Xe.b)(b=>{b.postMessage({action:_,...g})})).toPromise().then(()=>{})}postMessageWithOperation(_,g,b){const $=this.waitForOperationCompleted(b),re=this.postMessage(_,g);return Promise.all([re,$]).then(([,Ee])=>Ee)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(_){let g;return g="string"==typeof _?b=>b.type===_:b=>_.includes(b.type),this.events.pipe((0,zn.h)(g))}nextEventOfType(_){return this.eventsOfType(_).pipe((0,Wn.q)(1))}waitForOperationCompleted(_){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,zn.h)(g=>g.nonce===_),(0,Wn.q)(1),(0,vt.U)(g=>{if(void 0!==g.result)return g.result;throw new Error(g.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let vn=(()=>{class E{get isEnabled(){return this.sw.isEnabled}constructor(g){if(this.sw=g,this.pushManager=null,this.subscriptionChanges=new we.x,!g.isEnabled)return this.messages=nn,this.notificationClicks=nn,void(this.subscription=nn);this.messages=this.sw.eventsOfType("PUSH").pipe((0,vt.U)($=>$.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,vt.U)($=>$.data)),this.pushManager=this.sw.registration.pipe((0,vt.U)($=>$.pushManager));const b=this.pushManager.pipe((0,Pt.w)($=>$.getSubscription()));this.subscription=(0,Nr.T)(b,this.subscriptionChanges)}requestSubscription(g){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(kr));const b={userVisibleOnly:!0};let $=this.decodeBase64(g.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),re=new Uint8Array(new ArrayBuffer($.length));for(let Ee=0;Ee<$.length;Ee++)re[Ee]=$.charCodeAt(Ee);return b.applicationServerKey=re,this.pushManager.pipe((0,Pt.w)(Ee=>Ee.subscribe(b)),(0,Wn.q)(1)).toPromise().then(Ee=>(this.subscriptionChanges.next(Ee),Ee))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Wn.q)(1),(0,Pt.w)(b=>{if(null===b)throw new Error("Not subscribed to push notifications.");return b.unsubscribe().then($=>{if(!$)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(kr))}decodeBase64(g){return atob(g)}}return E.\u0275fac=function(g){return new(g||E)(I.LFG(mr))},E.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac}),E})(),es=(()=>{class E{get isEnabled(){return this.sw.isEnabled}constructor(g){if(this.sw=g,!g.isEnabled)return this.versionUpdates=nn,this.available=nn,this.activated=nn,void(this.unrecoverable=nn);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe((0,zn.h)(b=>"VERSION_READY"===b.type),(0,vt.U)(b=>({type:"UPDATE_AVAILABLE",current:b.currentVersion,available:b.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(kr));const g=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:g},g)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(kr));const g=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:g},g)}}return E.\u0275fac=function(g){return new(g||E)(I.LFG(mr))},E.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac}),E})();class jn{}const ta=new I.OlP("NGSW_REGISTER_SCRIPT");function Lr(E,_,g,b){return()=>{if(!(0,fe.NF)(b)||!("serviceWorker"in navigator)||!1===g.enabled)return;let $;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof g.registrationStrategy)$=g.registrationStrategy();else{const[Ee,...Te]=(g.registrationStrategy||"registerWhenStable:30000").split(":");switch(Ee){case"registerImmediately":$=(0,St.of)(null);break;case"registerWithDelay":$=Yt(+Te[0]||0);break;case"registerWhenStable":$=Te[0]?(0,Nr.T)(co(E),Yt(+Te[0])):co(E);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${g.registrationStrategy}`)}}E.get(I.R0b).runOutsideAngular(()=>$.pipe((0,Wn.q)(1)).subscribe(()=>navigator.serviceWorker.register(_,{scope:g.scope}).catch(Ee=>console.error("Service worker registration failed with:",Ee))))}}function Yt(E){return(0,St.of)(null).pipe((0,on.g)(E))}function co(E){return E.get(I.z2F).isStable.pipe((0,zn.h)(g=>g))}function Aa(E,_){return new mr((0,fe.NF)(_)&&!1!==E.enabled?navigator.serviceWorker:void 0)}let na=(()=>{class E{static register(g,b={}){return{ngModule:E,providers:[{provide:ta,useValue:g},{provide:jn,useValue:b},{provide:mr,useFactory:Aa,deps:[jn,I.Lbi]},{provide:I.ip1,useFactory:Lr,deps:[I.zs3,ta,jn,I.Lbi],multi:!0}]}}}return E.\u0275fac=function(g){return new(g||E)},E.\u0275mod=I.oAB({type:E}),E.\u0275inj=I.cJS({providers:[vn,es]}),E})();var va=D(2340);let vs=(()=>{class E{constructor(g){this.injector=g}handleError(g){const b=this.injector.get(gn.g);this.injector.get(B.F0),g instanceof xe.UA?(navigator.onLine||b.notify("No Internet Connection"),b.notify(`${g.status} - ${g.message}`)):b.notify(g),console.error(g)}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(I.zs3))};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac})}return E})();function ho(E,_){if(1&E&&(I.TgZ(0,"div")(1,"h1"),I._uU(2),I.qZA(),I.TgZ(3,"a",2)(4,"h5"),I._uU(5,"Go to Home"),I.qZA()()()),2&E){const g=I.oxw();I.xp6(2),I.hij("ERROR ",null==g.routeParams?null:g.routeParams.error,""),I.xp6(1),I.Q6J("routerLink","/")}}const Ma=[{path:"error",component:(()=>{class E{constructor(g){this.activatedRoute=g}ngOnInit(){this.routeParams=this.activatedRoute.snapshot.queryParams}static#e=this.\u0275fac=function(b){return new(b||E)(I.Y36(B.gz))};static#t=this.\u0275cmp=I.Xpm({type:E,selectors:[["app-errors"]],decls:2,vars:1,consts:[[1,"error-container"],[4,"ngIf"],[3,"routerLink"]],template:function(b,$){1&b&&(I.TgZ(0,"div",0),I.YNc(1,ho,6,2,"div",1),I.qZA()),2&b&&(I.xp6(1),I.Q6J("ngIf",null==$.routeParams?null:$.routeParams.error))},dependencies:[fe.O5,B.rH],styles:[".error-container[_ngcontent-%COMP%]{width:220px;margin:50% auto 0;transform:translateY(-50%);text-align:center}"]})}return E})()}];let ul=(()=>{class E{static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275mod=I.oAB({type:E});static#n=this.\u0275inj=I.cJS({imports:[B.Bz.forChild(Ma),B.Bz]})}return E})();var Hs=D(5625);const ou={provide:xe.TP,useClass:class Ol{intercept(_,g){return g.handle(_).pipe((0,Hs.X)(0),(0,lt.K)(this.handleError))}handleError(_){let g="";return g=_.error instanceof ErrorEvent?`Error: ${_.error.message}`:`Error Code: ${_.status}\\nMessage: ${_.message}`,(0,Ze._)(_)}},multi:!0};let au=(()=>{class E{static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275mod=I.oAB({type:E});static#n=this.\u0275inj=I.cJS({providers:[{provide:I.qLn,useClass:vs},ou],imports:[fe.ez,ul]})}return E})();var Po=D(4466);let Ja=(()=>{class E{static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275mod=I.oAB({type:E});static#n=this.\u0275inj=I.cJS({providers:[P],imports:[fe.ez]})}return E})();var st=D(9884);const Pa={todos:[]},bs=(E=Pa,_)=>{switch(_.type){case"ADD":return{todos:[...E.todos,{index:E.todos.length,text:_.text,done:!1,saved:!1}]};case"TOGGLE":return{todos:E.todos.map((g,b)=>b===_.index?{...g,done:!g.done}:g)};case"REMOVE":return{todos:E.todos.splice(E.todos.findIndex(g=>g.index===_.index),1)};case"SAVED":return{todos:E.todos.map((g,b)=>b===_.index?{...g,saved:!0}:g)};default:return E}};var Rl=D(457),ts=D(5577),Es=D(9468);let cl=(()=>{class E{constructor(){this.recordTimeoutMs=500,this.localStorageKey="__lastActive",this.events=["keydown","click","wheel","mousemove"];const g=this.getLastActiveFromLocalStorage()??new Date;this.lastActive=new It.X(g),this.lastActive$=this.lastActive.asObservable()}setUp(){(0,Rl.D)(this.events).pipe((0,ts.z)(g=>(0,V.R)(document,g)),(0,Es.p)(this.recordTimeoutMs)).subscribe(g=>this.recordLastActiveDate()),(0,V.R)(window,"storage").pipe((0,zn.h)(g=>g.storageArea===localStorage&&g.key===this.localStorageKey&&!!g.newValue),(0,vt.U)(g=>new Date(g.newValue))).subscribe(g=>this.lastActive.next(g))}getLastActiveDate(){return this.lastActive.value}recordLastActiveDate(){var g=new Date;localStorage.setItem(this.localStorageKey,g.toString()),this.lastActive.next(g)}getLastActiveFromLocalStorage(){const g=localStorage.getItem(this.localStorageKey);return g?new Date(g):null}static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const Oo={provide:I.ip1,multi:!0,deps:[cl],useFactory:E=>()=>E.setUp()};let el=1;class Ql{constructor(){this.userName="Philip Marlowe"}}let dl=(()=>{class E{constructor(g){this.id=el++,this._userName="Sherlock Holmes",g&&(this._userName=g.userName)}get userName(){return this._userName+(this.id>1?` times ${this.id}`:"")}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(Ql,8))};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac})}return E})(),Wa=(()=>{class E{constructor(g){if(g)throw new Error("CoreModule is already loaded. Import it in the AppModule only")}static forRoot(g){return{ngModule:E,providers:[{provide:Ql,useValue:g}]}}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(E,12))};static#t=this.\u0275mod=I.oAB({type:E});static#n=this.\u0275inj=I.cJS({providers:[dl],imports:[fe.ez]})}return E})();var Ls=D(4440),Fs=D(8555),Ro=D(7369),Zs=D(3550);let qs=(()=>{class E{static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275mod=I.oAB({type:E});static#n=this.\u0275inj=I.cJS({providers:[Zs.T],imports:[Fs.Aw.forFeature(Ro.UN,Ro.Jl)]})}return E})();var ia=D(2852),Co=D(8502),Oa=D(515),Ea=D(576);class Ci{constructor(_,g,b){this.kind=_,this.value=g,this.error=b,this.hasValue="N"===_}observe(_){return Jr(this,_)}do(_,g,b){const{kind:$,value:re,error:Ee}=this;return"N"===$?_?.(re):"E"===$?g?.(Ee):b?.()}accept(_,g,b){var $;return(0,Ea.m)(null===($=_)||void 0===$?void 0:$.next)?this.observe(_):this.do(_,g,b)}toObservable(){const{kind:_,value:g,error:b}=this,$="N"===_?(0,St.of)(g):"E"===_?(0,Ze._)(()=>b):"C"===_?Oa.E:0;if(!$)throw new TypeError(`Unexpected notification kind ${_}`);return $}static createNext(_){return new Ci("N",_)}static createError(_){return new Ci("E",void 0,_)}static createComplete(){return Ci.completeNotification}}function Jr(E,_){var g,b,$;const{kind:re,value:Ee,error:Te}=E;if("string"!=typeof re)throw new TypeError('Invalid notification, missing "kind"');"N"===re?null===(g=_.next)||void 0===g||g.call(_,Ee):"E"===re?null===(b=_.error)||void 0===b||b.call(_,Te):null===($=_.complete)||void 0===$||$.call(_)}Ci.completeNotification=new Ci("C");var Da=D(4482),ui=D(5403),xo=D(8421);function Ra(E,_,g,b){return(0,Da.e)(($,re)=>{let Ee;_&&"function"!=typeof _?({duration:g,element:Ee,connector:b}=_):Ee=_;const Te=new Map,tt=rn=>{Te.forEach(rn),rn(re)},ht=rn=>tt(Gt=>Gt.error(rn)),Lt=new tl(re,rn=>{try{const Gt=E(rn);let an=Te.get(Gt);if(!an){Te.set(Gt,an=b?b():new we.x);const Rn=function qt(rn,Gt){const an=new pt.y(Rn=>{Lt.activeGroups++;const or=Gt.subscribe(Rn);return()=>{or.unsubscribe(),0==--Lt.activeGroups&&Lt.teardownAttempted&&Lt.unsubscribe()}});return an.key=rn,an}(Gt,an);if(re.next(Rn),g){const or=new ui.Q(an,()=>{an.complete(),or?.unsubscribe()},void 0,void 0,()=>Te.delete(Gt));Lt.add((0,xo.Xf)(g(Rn)).subscribe(or))}}an.next(Ee?Ee(rn):rn)}catch(Gt){ht(Gt)}},()=>tt(rn=>rn.complete()),ht,()=>Te.clear());$.subscribe(Lt)})}class tl extends ui.Q{constructor(){super(...arguments),this.activeGroups=0,this.teardownAttempted=!1}unsubscribe(){this.teardownAttempted=!0,0===this.activeGroups&&super.unsubscribe()}}var nl=D(6129);const oa={dispatch:!0,useEffectsErrorHandler:!0},cs="__@ngrx/effects_create__";function Wr(E,_){const g=E(),b={...oa,..._};return Object.defineProperty(g,cs,{value:b}),g}function A(E){return Object.getOwnPropertyNames(E).filter(b=>!(!E[b]||!E[b].hasOwnProperty(cs))&&E[b][cs].hasOwnProperty("dispatch")).map(b=>({propertyName:b,...E[b][cs]}))}function O(E){return Object.getPrototypeOf(E)}const T="__@ngrx/effects__";function W(E){return(0,Fs.qC)(He,O)(E)}function He(E){return function oe(E){return E.constructor.hasOwnProperty(T)}(E)?E.constructor[T]:[]}function un(E,_,g){const b=O(E).constructor.name,$=function tn(E){return[W,A].reduce((g,b)=>g.concat(b(E)),[])}(E).map(({propertyName:re,dispatch:Ee,useEffectsErrorHandler:Te})=>{const tt="function"==typeof E[re]?E[re]():E[re],ht=Te?g(tt,_):tt;return!1===Ee?ht.pipe((0,Co.l)()):ht.pipe(function hl(){return(0,Da.e)((E,_)=>{E.subscribe(new ui.Q(_,g=>{_.next(Ci.createNext(g))},()=>{_.next(Ci.createComplete()),_.complete()},g=>{_.next(Ci.createError(g)),_.complete()}))})}()).pipe((0,vt.U)(qt=>({effect:E[re],notification:qt,propertyName:re,sourceName:b,sourceInstance:E})))});return(0,Nr.T)(...$)}const Sr=10;function Ur(E,_,g=Sr){return E.pipe((0,lt.K)(b=>(_&&_.handleError(b),g<=1?E:Ur(E,_,g-1))))}let Ds=(()=>{class E extends pt.y{constructor(g){super(),g&&(this.source=g)}lift(g){const b=new E;return b.source=this,b.operator=g,b}}return E.\u0275fac=function(g){return new(g||E)(I.LFG(Fs.Y$))},E.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function fi(...E){return(0,zn.h)(_=>E.some(g=>"string"==typeof g?g===_.type:g.type===_.type))}const xa=new I.OlP("@ngrx/effects Internal Root Guard"),ji=new I.OlP("@ngrx/effects User Provided Effects"),za=new I.OlP("@ngrx/effects Internal Root Effects"),Ca=new I.OlP("@ngrx/effects Root Effects"),fl=new I.OlP("@ngrx/effects Internal Feature Effects"),Or=new I.OlP("@ngrx/effects Feature Effects"),pi=new I.OlP("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>Ur}),rl="@ngrx/effects/init";(0,Fs.PH)(rl);const aa="ngrxOnIdentifyEffects",Ka="ngrxOnInitEffects";function lu(E){return ql(E,Ka)}function ql(E,_){return E&&_ in E&&"function"==typeof E[_]}let Ya=(()=>{class E extends we.x{constructor(g,b){super(),this.errorHandler=g,this.effectsErrorHandler=b}addEffects(g){this.next(g)}toActions(){return this.pipe(Ra(O),(0,ts.z)(g=>g.pipe(Ra(Na))),(0,ts.z)(g=>{const b=g.pipe((0,nl.z)(re=>function Fl(E,_){return g=>{const b=un(g,E,_);return function Zl(E){return ql(E,"ngrxOnRunEffects")}(g)?g.ngrxOnRunEffects(b):b}}(this.errorHandler,this.effectsErrorHandler)(re)),(0,vt.U)(re=>(function gl(E,_){if("N"===E.notification.kind){const g=E.notification.value;!function ml(E){return"function"!=typeof E&&E&&E.type&&"string"==typeof E.type}(g)&&_.handleError(new Error(`Effect ${function Ia({propertyName:E,sourceInstance:_,sourceName:g}){const b="function"==typeof _[E];return`"${g}.${String(E)}${b?"()":""}"`}(E)} dispatched an invalid action: ${function Nl(E){try{return JSON.stringify(E)}catch{return E}}(g)}`))}}(re,this.errorHandler),re.notification)),(0,zn.h)(re=>"N"===re.kind&&null!=re.value),function sa(){return(0,Da.e)((E,_)=>{E.subscribe(new ui.Q(_,g=>Jr(g,_)))})}()),$=g.pipe((0,Wn.q)(1),(0,zn.h)(lu),(0,vt.U)(re=>re.ngrxOnInitEffects()));return(0,Nr.T)(b,$)}))}}return E.\u0275fac=function(g){return new(g||E)(I.LFG(I.qLn),I.LFG(pi))},E.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Na(E){return function Ll(E){return ql(E,aa)}(E)?E.ngrxOnIdentifyEffects():""}let La=(()=>{class E{constructor(g,b){this.effectSources=g,this.store=b,this.effectsSubscription=null}get isStarted(){return!!this.effectsSubscription}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return E.\u0275fac=function(g){return new(g||E)(I.LFG(Ya),I.LFG(Fs.yh))},E.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})(),uc=(()=>{class E{constructor(g,b,$,re,Ee,Te,tt){this.sources=g,b.start(),re.forEach(ht=>g.addEffects(ht)),$.dispatch({type:rl})}addEffects(g){this.sources.addEffects(g)}}return E.\u0275fac=function(g){return new(g||E)(I.LFG(Ya),I.LFG(La),I.LFG(Fs.yh),I.LFG(Ca),I.LFG(Fs.cr,8),I.LFG(Fs.CK,8),I.LFG(xa,8))},E.\u0275mod=I.oAB({type:E}),E.\u0275inj=I.cJS({}),E})(),Ni=(()=>{class E{constructor(g,b,$,re){b.forEach(Ee=>Ee.forEach(Te=>g.addEffects(Te)))}}return E.\u0275fac=function(g){return new(g||E)(I.LFG(uc),I.LFG(Or),I.LFG(Fs.cr,8),I.LFG(Fs.CK,8))},E.\u0275mod=I.oAB({type:E}),E.\u0275inj=I.cJS({}),E})(),la=(()=>{class E{static forFeature(g=[]){return{ngModule:Ni,providers:[g,{provide:fl,multi:!0,useValue:g},{provide:ji,multi:!0,useValue:[]},{provide:Or,multi:!0,useFactory:As,deps:[I.zs3,fl,ji]}]}}static forRoot(g=[]){return{ngModule:uc,providers:[g,{provide:za,useValue:[g]},{provide:xa,useFactory:kl,deps:[[La,new I.FiY,new I.tp0],[za,new I.PiD]]},{provide:ji,multi:!0,useValue:[]},{provide:Ca,useFactory:As,deps:[I.zs3,za,ji]}]}}}return E.\u0275fac=function(g){return new(g||E)},E.\u0275mod=I.oAB({type:E}),E.\u0275inj=I.cJS({}),E})();function As(E,_,g){const b=[];for(const $ of _)b.push(...$);for(const $ of g)b.push(...$);return function mi(E,_){return _.map(g=>E.get(g))}(E,b)}function kl(E,_){if((1!==_.length||0!==_[0].length)&&E)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}var uu=D(4579);let ci=(()=>{class E{loadCounter(){return(0,St.of)(1999)}static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),cu=(()=>{class E{constructor(g,b){this.actions$=g,this.counterService=b,this.loadData$=Wr(()=>this.actions$.pipe(fi(uu.zK),(0,ts.z)(()=>this.counterService.loadCounter().pipe((0,vt.U)($=>uu.Zf({newValue:$}))))))}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(Ds),I.LFG(ci))};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac})}return E})();var Ul=D(5054);let yl=(()=>{class E{static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275mod=I.oAB({type:E});static#n=this.\u0275inj=I.cJS({providers:[Ul.e],imports:[Fs.Aw.forFeature(ia.UN,ia.jX),la.forFeature([cu])]})}return E})();var fo=D(3880),Fa=D(2542);let Vl=(()=>{class E{constructor(g,b){this.actions$=g,this.http=b,this.loadData$=Wr(()=>this.actions$.pipe(fi(Fa.mu),(0,Pt.w)(()=>this.http.get("https://jsonplaceholder.typicode.com/posts").pipe((0,vt.U)($=>Fa.F3({payload:$})),(0,lt.K)($=>(0,St.of)(Fa.WU({payload:$})))))))}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(Ds),I.LFG(xe.eN))};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac})}return E})();var du=D(9610);let Wu=(()=>{class E{static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275mod=I.oAB({type:E});static#n=this.\u0275inj=I.cJS({providers:[du.L],imports:[Fs.Aw.forFeature(fo.UN,fo.B5),la.forFeature([Vl])]})}return E})();var Hi=D(173),hu=D(817);let Xl=(()=>{class E{constructor(g){this.actions$=g,this.getUser$=Wr(()=>this.actions$.pipe(fi(hu.PR),(0,ts.z)(()=>(0,St.of)({userId:"1",name:"trilok",lastName:"singh",email:"trilok@gmaill.com"}).pipe((0,vt.U)(b=>hu.Ni({user:b})),(0,lt.K)(b=>(console.error("An error occurred while getting user information.",b.message),(0,St.of)(hu.N2({error:"Unable to retrieve user information."}))))))))}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(Ds))};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac})}return E})();var zu=D(2842);let Ku=(()=>{class E{static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275mod=I.oAB({type:E});static#n=this.\u0275inj=I.cJS({providers:[zu.p],imports:[Fs.Aw.forFeature(Hi.U,Hi.M),la.forFeature([Xl])]})}return E})();var Bl=D(5650),Tu=D(4964),ua=D(2766),ds=D(7403);let Jl=(()=>{class E{set(g,b){try{localStorage.setItem(g,JSON.stringify(b))}catch($){console.error("Error saving to localStorage",$)}}get(g){try{return JSON.parse(localStorage.getItem(g))}catch(b){return console.error("Error getting data from localStorage",b),null}}static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),jl=(()=>{class E{constructor(g,b,$,re){this.actions$=g,this.registerService=b,this.persistenceService=$,this.router=re,this.register$=Wr(()=>this.actions$.pipe(fi(ua._0),(0,Pt.w)(({request:Ee})=>this.registerService.register(Ee).pipe((0,vt.U)(Te=>(this.persistenceService.set("accessToken1",Te.token),(0,ua.Pw)({currentUser:Te}))),(0,lt.K)(Te=>(console.log(Te),(0,St.of)((0,ua.zH)({errors:Te.error.errors})))))))),this.redirectAfterSubmit$=Wr(()=>this.actions$.pipe(fi(ua.Pw),(0,Xe.b)(()=>{this.router.navigateByUrl("/")})),{dispatch:!1})}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(Ds),I.LFG(ds.a),I.LFG(Jl),I.LFG(B.F0))};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac})}return E})(),_l=(()=>{class E{static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275mod=I.oAB({type:E});static#n=this.\u0275inj=I.cJS({providers:[Tu.q],imports:[Fs.Aw.forFeature(Bl.UN,Bl.xw),la.forFeature([jl])]})}return E})();var No=D(8713),Io=D(1944),eu=D(8372),fu=D(9662);let pu=(()=>{class E{constructor(g){this.http=g,this.url="http://localhost:4000/articles"}getAll(){return this.http.get("http://localhost:4000/fruits")}getAllArticles(){return this.http.get(this.url)}createArticle(g){return this.http.post(this.url,g)}getArticleById(g){return this.http.get(this.url+"/"+g)}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(fu.O))};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),Su=(()=>{class E{constructor(g,b){this.actions$=g,this.fruitsService=b,this.loadAllArticles$=Wr(()=>this.actions$.pipe(fi(Io.GO),(0,Pt.w)(()=>this.fruitsService.getAllArticles().pipe((0,vt.U)($=>Io.m0({payload:$})))))),this.createArticle$=Wr(()=>this.actions$.pipe(fi(Io.$f),(0,vt.U)($=>$.payload),(0,ts.z)($=>this.fruitsService.createArticle($).pipe((0,vt.U)(re=>Io.$s({payload:re})),(0,lt.K)(re=>(0,St.of)(Io.$0({payload:re}))))))),this.searchArticleById$=Wr(()=>this.actions$.pipe(fi(Io.HD),(0,eu.b)(500),(0,vt.U)($=>$.payload),(0,Pt.w)($=>this.fruitsService.getArticleById($).pipe((0,vt.U)(re=>Io.n3({payload:re})))))),this.loadProducts$=Wr(()=>this.actions$.pipe(fi(Io.hS),(0,ts.z)(()=>this.fruitsService.getAll().pipe((0,vt.U)($=>Io.Xt({payload:$}))))))}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(Ds),I.LFG(pu))};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac})}return E})();var gu=D(825);let bu=(()=>{class E{static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275mod=I.oAB({type:E});static#n=this.\u0275inj=I.cJS({imports:[Fs.Aw.forRoot(No.ll),la.forRoot([Su]),qs,yl,Wu,Ku,_l,gu.FT.instrument({maxAge:25,logOnly:!va.N.production})]})}return E})();const Au="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJDb2RlIFNob3RzIFdpdGggUHJvZmFuaXMiLCJpYXQiOjE2MjQyNzU1MjUsImV4cCI6MTY1NTgxMTUyNSwiYXVkIjoiQ29kZSBTaG90IFdpdGggUHJvZmFuaXMgU3Vic2NyaWJlcnMiLCJzdWIiOiJDb2RlIFNob3QgV2l0aCBQcm9mYW5pcyBTdWJzY3JpYmVycyIsIlVzZXJuYW1lIjoicHJvZmFuaXMiLCJGaXJzdE5hbWUiOiJGYW5pcyIsIlJvbGUiOlsiQWRtaW4iLCJTdXBlciBBZG1pbiJdfQ.mT1UD7DXTWRm4etsW9BuWcg5bj2CaeAQVXaoEOIwB7o";let mu=(()=>{class E{constructor(){}intercept(g,b){const{url:$,method:re,headers:Ee}=g;return $.endsWith("login")&&"POST"===re?function tt(){return(0,St.of)(new xe.Zn({status:200,body:{id:"1",username:"profanis",token:Au}}))}():$.endsWith("products")&&"GET"===re?function ht(){if(!function Te(){return Ee.get("authorization")===Au}())return(0,Ze._)({status:401,error:{message:"Unauthorized"}});const Lt=[...new Array(20).keys()].map(qt=>({id:qt,name:`Product ${qt}`,weight:30,symbol:"ngf"}));return(0,St.of)(new xe.Zn({status:200,body:Lt}))}():b.handle(g)}static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac})}return E})();const Yu={provide:xe.TP,useClass:mu,multi:!0};D(7385);let Lo=(()=>{class E{static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275mod=I.oAB({type:E});static#n=this.\u0275inj=I.cJS({})}return E})();var Fo=D(4185);let ns=(()=>{class E{constructor(g){this.realtimeDbService=g}handleError(g){console.log(g),va.N.production&&this.realtimeDbService.post("2023/logging.json",g).subscribe()}handleError1(g){g instanceof xe.UA?g.error instanceof ErrorEvent?console.error("Error Event"):console.log(`error status : ${g.status} ${g.statusText}`):console.error("some thing else happened")}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(Fo.N))};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac})}return E})();const sl={provide:I.qLn,useClass:ns};class ka{static get injector(){return this._injector}static set injector(_){this._injector=_}}var tu=D(8405),ol=D(7697);const Hl=[{provide:tu.R,useClass:ol.s},{provide:tu.z,useClass:ol.s},{provide:Fo.N,useClass:Fo.g}];var R=D(255),y=D(7522);let C=(()=>{class E{get apiKey(){return"5a4b2d457ecbef9eb2a71e480b947604"}static#e=this.\u0275fac=function(b){return new(b||E)};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),L=(()=>{class E extends R.u{constructor(g,b){super(),this.http=g,this.config=b}getCurrentWeather(g,b){const re=this.getParams(g,b);return this.http.get("https://api.openweathermap.org/data/2.5/weather",{params:re}).pipe((0,vt.U)(Ee=>({temperature:Ee.main.temp,temperatureMin:Ee.main.temp_min,temperatureMax:Ee.main.temp_max,city:Ee.name,conditions:(0,y.wJ)(Ee.weather[0]),date:new Date(Ee.dt),zipCode:g,countryCode:b})))}getWeatherForecast(g,b){const re=this.getParams(g,b);return this.http.get("https://api.openweathermap.org/data/2.5/forecast/daily",{params:re}).pipe((0,vt.U)(Ee=>Ee.list.map(Te=>({temperature:Te.temp.day,temperatureMin:Te.temp.min,temperatureMax:Te.temp.max,city:Ee.city.name,conditions:(0,y.wJ)(Te.weather[0]),date:new Date(1e3*Te.dt),zipCode:g,countryCode:b}))))}getParams(g,b="us"){return new xe.LE({fromObject:{zip:`${g},${b}`,appid:this.config.apiKey}})}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(xe.eN),I.LFG(C))};static#t=this.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac})}return E})();var se=D(9267);let _e=(()=>{class E{constructor(g){this.injector=g,ka.injector=g}static#e=this.\u0275fac=function(b){return new(b||E)(I.LFG(I.zs3))};static#t=this.\u0275mod=I.oAB({type:E,bootstrap:[Fn]});static#n=this.\u0275inj=I.cJS({providers:[P,{provide:R.u,useClass:L},fe.uU,xe.JF,{provide:st.y,useValue:new st.y(bs)},Oo,Yu,sl,Hl],imports:[f.b2,Pl,xe.JF,xe.Ed,Po.m,Ue,au,na.register("ngsw-worker.js",{enabled:va.N.production,registrationStrategy:"registerWhenStable:30000"}),bu,Ja,Wa.forRoot({userName:"Trilok Singh"}),Ls.G2.initializeApp(va.N.firebaseConfig),Ls.G2.initialize({activityInRouter:!0,activityOfAnonymousUser:!0,activityInHttp:!0}),Lo,se.EV,Pl]})}return E})();va.N.production&&(0,I.G48)(),f.q6().bootstrapModule(_e).catch(E=>console.error(E))},1135:(Se,ae,D)=>{D.d(ae,{X:()=>I});var f=D(7579);class I extends f.x{constructor(B){super(),this._value=B}get value(){return this.getValue()}_subscribe(B){const q=super._subscribe(B);return!q.closed&&B.next(this._value),q}getValue(){const{hasError:B,thrownError:q,_value:ie}=this;if(B)throw q;return this._throwIfClosed(),ie}next(B){super.next(this._value=B)}}},9751:(Se,ae,D)=>{D.d(ae,{y:()=>K});var f=D(930),I=D(727),ee=D(8822),B=D(9635),q=D(2416),ie=D(576),te=D(2806);let K=(()=>{class fe{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const je=new fe;return je.source=this,je.operator=Ge,je}subscribe(Ge,je,Qe){const Be=function le(fe){return fe&&fe instanceof f.Lv||function Z(fe){return fe&&(0,ie.m)(fe.next)&&(0,ie.m)(fe.error)&&(0,ie.m)(fe.complete)}(fe)&&(0,I.Nn)(fe)}(Ge)?Ge:new f.Hp(Ge,je,Qe);return(0,te.x)(()=>{const{operator:ze,source:Ke}=this;Be.add(ze?ze.call(Be,Ke):Ke?this._subscribe(Be):this._trySubscribe(Be))}),Be}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(je){Ge.error(je)}}forEach(Ge,je){return new(je=ne(je))((Qe,Be)=>{const ze=new f.Hp({next:Ke=>{try{Ge(Ke)}catch(it){Be(it),ze.unsubscribe()}},error:Be,complete:Qe});this.subscribe(ze)})}_subscribe(Ge){var je;return null===(je=this.source)||void 0===je?void 0:je.subscribe(Ge)}[ee.L](){return this}pipe(...Ge){return(0,B.U)(Ge)(this)}toPromise(Ge){return new(Ge=ne(Ge))((je,Qe)=>{let Be;this.subscribe(ze=>Be=ze,ze=>Qe(ze),()=>je(Be))})}}return fe.create=Le=>new fe(Le),fe})();function ne(fe){var Le;return null!==(Le=fe??q.v.Promise)&&void 0!==Le?Le:Promise}},4707:(Se,ae,D)=>{D.d(ae,{t:()=>ee});var f=D(7579),I=D(6063);class ee extends f.x{constructor(q=1/0,ie=1/0,te=I.l){super(),this._bufferSize=q,this._windowTime=ie,this._timestampProvider=te,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ie===1/0,this._bufferSize=Math.max(1,q),this._windowTime=Math.max(1,ie)}next(q){const{isStopped:ie,_buffer:te,_infiniteTimeWindow:K,_timestampProvider:ne,_windowTime:Z}=this;ie||(te.push(q),!K&&te.push(ne.now()+Z)),this._trimBuffer(),super.next(q)}_subscribe(q){this._throwIfClosed(),this._trimBuffer();const ie=this._innerSubscribe(q),{_infiniteTimeWindow:te,_buffer:K}=this,ne=K.slice();for(let Z=0;Z<ne.length&&!q.closed;Z+=te?1:2)q.next(ne[Z]);return this._checkFinalizedStatuses(q),ie}_trimBuffer(){const{_bufferSize:q,_timestampProvider:ie,_buffer:te,_infiniteTimeWindow:K}=this,ne=(K?1:2)*q;if(q<1/0&&ne<te.length&&te.splice(0,te.length-ne),!K){const Z=ie.now();let le=0;for(let fe=1;fe<te.length&&te[fe]<=Z;fe+=2)le=fe;le&&te.splice(0,le+1)}}}},7579:(Se,ae,D)=>{D.d(ae,{x:()=>te});var f=D(9751),I=D(727);const B=(0,D(3888).d)(ne=>function(){ne(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var q=D(8737),ie=D(2806);let te=(()=>{class ne extends f.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(le){const fe=new K(this,this);return fe.operator=le,fe}_throwIfClosed(){if(this.closed)throw new B}next(le){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const fe=this.observers.slice();for(const Le of fe)Le.next(le)}})}error(le){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=le;const{observers:fe}=this;for(;fe.length;)fe.shift().error(le)}})}complete(){(0,ie.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:le}=this;for(;le.length;)le.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var le;return(null===(le=this.observers)||void 0===le?void 0:le.length)>0}_trySubscribe(le){return this._throwIfClosed(),super._trySubscribe(le)}_subscribe(le){return this._throwIfClosed(),this._checkFinalizedStatuses(le),this._innerSubscribe(le)}_innerSubscribe(le){const{hasError:fe,isStopped:Le,observers:Ge}=this;return fe||Le?I.Lc:(Ge.push(le),new I.w0(()=>(0,q.P)(Ge,le)))}_checkFinalizedStatuses(le){const{hasError:fe,thrownError:Le,isStopped:Ge}=this;fe?le.error(Le):Ge&&le.complete()}asObservable(){const le=new f.y;return le.source=this,le}}return ne.create=(Z,le)=>new K(Z,le),ne})();class K extends te{constructor(Z,le){super(),this.destination=Z,this.source=le}next(Z){var le,fe;null===(fe=null===(le=this.destination)||void 0===le?void 0:le.next)||void 0===fe||fe.call(le,Z)}error(Z){var le,fe;null===(fe=null===(le=this.destination)||void 0===le?void 0:le.error)||void 0===fe||fe.call(le,Z)}complete(){var Z,le;null===(le=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===le||le.call(Z)}_subscribe(Z){var le,fe;return null!==(fe=null===(le=this.source)||void 0===le?void 0:le.subscribe(Z))&&void 0!==fe?fe:I.Lc}}},930:(Se,ae,D)=>{D.d(ae,{Hp:()=>Le,Lv:()=>fe});var f=D(576),I=D(727),ee=D(2416),B=D(7849),q=D(5032);const ie=ne("C",void 0,void 0);function ne(ze,Ke,it){return{kind:ze,value:Ke,error:it}}var Z=D(3410),le=D(2806);class fe extends I.w0{constructor(Ke){super(),this.isStopped=!1,Ke?(this.destination=Ke,(0,I.Nn)(Ke)&&Ke.add(this)):this.destination=Be}static create(Ke,it,Ue){return new Le(Ke,it,Ue)}next(Ke){this.isStopped?Qe(function K(ze){return ne("N",ze,void 0)}(Ke),this):this._next(Ke)}error(Ke){this.isStopped?Qe(function te(ze){return ne("E",void 0,ze)}(Ke),this):(this.isStopped=!0,this._error(Ke))}complete(){this.isStopped?Qe(ie,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ke){this.destination.next(Ke)}_error(Ke){try{this.destination.error(Ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Le extends fe{constructor(Ke,it,Ue){let xe;if(super(),(0,f.m)(Ke))xe=Ke;else if(Ke){let Ct;({next:xe,error:it,complete:Ue}=Ke),this&&ee.v.useDeprecatedNextContext?(Ct=Object.create(Ke),Ct.unsubscribe=()=>this.unsubscribe()):Ct=Ke,xe=xe?.bind(Ct),it=it?.bind(Ct),Ue=Ue?.bind(Ct)}this.destination={next:xe?Ge(xe):q.Z,error:Ge(it??je),complete:Ue?Ge(Ue):q.Z}}}function Ge(ze,Ke){return(...it)=>{try{ze(...it)}catch(Ue){ee.v.useDeprecatedSynchronousErrorHandling?(0,le.O)(Ue):(0,B.h)(Ue)}}}function je(ze){throw ze}function Qe(ze,Ke){const{onStoppedNotification:it}=ee.v;it&&Z.z.setTimeout(()=>it(ze,Ke))}const Be={closed:!0,next:q.Z,error:je,complete:q.Z}},727:(Se,ae,D)=>{D.d(ae,{Lc:()=>ie,w0:()=>q,Nn:()=>te});var f=D(576);const ee=(0,D(3888).d)(ne=>function(le){ne(this),this.message=le?`${le.length} errors occurred during unsubscription:\n${le.map((fe,Le)=>`${Le+1}) ${fe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=le});var B=D(8737);class q{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:le}=this;if(le)if(this._parentage=null,Array.isArray(le))for(const Ge of le)Ge.remove(this);else le.remove(this);const{initialTeardown:fe}=this;if((0,f.m)(fe))try{fe()}catch(Ge){Z=Ge instanceof ee?Ge.errors:[Ge]}const{_teardowns:Le}=this;if(Le){this._teardowns=null;for(const Ge of Le)try{K(Ge)}catch(je){Z=Z??[],je instanceof ee?Z=[...Z,...je.errors]:Z.push(je)}}if(Z)throw new ee(Z)}}add(Z){var le;if(Z&&Z!==this)if(this.closed)K(Z);else{if(Z instanceof q){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._teardowns=null!==(le=this._teardowns)&&void 0!==le?le:[]).push(Z)}}_hasParent(Z){const{_parentage:le}=this;return le===Z||Array.isArray(le)&&le.includes(Z)}_addParent(Z){const{_parentage:le}=this;this._parentage=Array.isArray(le)?(le.push(Z),le):le?[le,Z]:Z}_removeParent(Z){const{_parentage:le}=this;le===Z?this._parentage=null:Array.isArray(le)&&(0,B.P)(le,Z)}remove(Z){const{_teardowns:le}=this;le&&(0,B.P)(le,Z),Z instanceof q&&Z._removeParent(this)}}q.EMPTY=(()=>{const ne=new q;return ne.closed=!0,ne})();const ie=q.EMPTY;function te(ne){return ne instanceof q||ne&&"closed"in ne&&(0,f.m)(ne.remove)&&(0,f.m)(ne.add)&&(0,f.m)(ne.unsubscribe)}function K(ne){(0,f.m)(ne)?ne():ne.unsubscribe()}},2416:(Se,ae,D)=>{D.d(ae,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4033:(Se,ae,D)=>{D.d(ae,{c:()=>ie});var f=D(9751),I=D(727),ee=D(8343),B=D(5403),q=D(4482);class ie extends f.y{constructor(K,ne){super(),this.source=K,this.subjectFactory=ne,this._subject=null,this._refCount=0,this._connection=null,(0,q.A)(K)&&(this.lift=K.lift)}_subscribe(K){return this.getSubject().subscribe(K)}getSubject(){const K=this._subject;return(!K||K.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:K}=this;this._subject=this._connection=null,K?.unsubscribe()}connect(){let K=this._connection;if(!K){K=this._connection=new I.w0;const ne=this.getSubject();K.add(this.source.subscribe(new B.Q(ne,void 0,()=>{this._teardown(),ne.complete()},Z=>{this._teardown(),ne.error(Z)},()=>this._teardown()))),K.closed&&(this._connection=null,K=I.w0.EMPTY)}return K}refCount(){return(0,ee.x)()(this)}}},9841:(Se,ae,D)=>{D.d(ae,{a:()=>Z});var f=D(9751),I=D(4742),ee=D(457),B=D(4671),q=D(3268),ie=D(3269),te=D(1810),K=D(5403),ne=D(9672);function Z(...Le){const Ge=(0,ie.yG)(Le),je=(0,ie.jO)(Le),{args:Qe,keys:Be}=(0,I.D)(Le);if(0===Qe.length)return(0,ee.D)([],Ge);const ze=new f.y(function le(Le,Ge,je=B.y){return Qe=>{fe(Ge,()=>{const{length:Be}=Le,ze=new Array(Be);let Ke=Be,it=Be;for(let Ue=0;Ue<Be;Ue++)fe(Ge,()=>{const xe=(0,ee.D)(Le[Ue],Ge);let Ct=!1;xe.subscribe(new K.Q(Qe,It=>{ze[Ue]=It,Ct||(Ct=!0,it--),it||Qe.next(je(ze.slice()))},()=>{--Ke||Qe.complete()}))},Qe)},Qe)}}(Qe,Ge,Be?Ke=>(0,te.n)(Be,Ke):B.y));return je?ze.pipe((0,q.Z)(je)):ze}function fe(Le,Ge,je){Le?(0,ne.f)(je,Le,Ge):Ge()}},7272:(Se,ae,D)=>{D.d(ae,{z:()=>q});var f=D(8189),ee=D(3269),B=D(457);function q(...ie){return function I(){return(0,f.J)(1)}()((0,B.D)(ie,(0,ee.yG)(ie)))}},9770:(Se,ae,D)=>{D.d(ae,{P:()=>ee});var f=D(9751),I=D(8421);function ee(B){return new f.y(q=>{(0,I.Xf)(B()).subscribe(q)})}},515:(Se,ae,D)=>{D.d(ae,{E:()=>I,c:()=>ee});var f=D(9751);const I=new f.y(q=>q.complete());function ee(q){return q?function B(q){return new f.y(ie=>q.schedule(()=>ie.complete()))}(q):I}},4128:(Se,ae,D)=>{D.d(ae,{D:()=>K});var f=D(9751),I=D(4742),ee=D(8421),B=D(3269),q=D(5403),ie=D(3268),te=D(1810);function K(...ne){const Z=(0,B.jO)(ne),{args:le,keys:fe}=(0,I.D)(ne),Le=new f.y(Ge=>{const{length:je}=le;if(!je)return void Ge.complete();const Qe=new Array(je);let Be=je,ze=je;for(let Ke=0;Ke<je;Ke++){let it=!1;(0,ee.Xf)(le[Ke]).subscribe(new q.Q(Ge,Ue=>{it||(it=!0,ze--),Qe[Ke]=Ue},()=>Be--,void 0,()=>{(!Be||!it)&&(ze||Ge.next(fe?(0,te.n)(fe,Qe):Qe),Ge.complete())}))}});return Z?Le.pipe((0,ie.Z)(Z)):Le}},457:(Se,ae,D)=>{D.d(ae,{D:()=>Ct});var f=D(8421),I=D(5363),ee=D(4482);function B(It,Ze=0){return(0,ee.e)((Pt,St)=>{St.add(It.schedule(()=>Pt.subscribe(St),Ze))})}var te=D(9751),ne=D(2202),Z=D(576),le=D(9672);function Le(It,Ze){if(!It)throw new Error("Iterable cannot be null");return new te.y(Pt=>{(0,le.f)(Pt,Ze,()=>{const St=It[Symbol.asyncIterator]();(0,le.f)(Pt,Ze,()=>{St.next().then(rt=>{rt.done?Pt.complete():Pt.next(rt.value)})},0,!0)})})}var Ge=D(3670),je=D(8239),Qe=D(1144),Be=D(6495),ze=D(2206),Ke=D(4532),it=D(3260);function Ct(It,Ze){return Ze?function xe(It,Ze){if(null!=It){if((0,Ge.c)(It))return function q(It,Ze){return(0,f.Xf)(It).pipe(B(Ze),(0,I.Q)(Ze))}(It,Ze);if((0,Qe.z)(It))return function K(It,Ze){return new te.y(Pt=>{let St=0;return Ze.schedule(function(){St===It.length?Pt.complete():(Pt.next(It[St++]),Pt.closed||this.schedule())})})}(It,Ze);if((0,je.t)(It))return function ie(It,Ze){return(0,f.Xf)(It).pipe(B(Ze),(0,I.Q)(Ze))}(It,Ze);if((0,ze.D)(It))return Le(It,Ze);if((0,Be.T)(It))return function fe(It,Ze){return new te.y(Pt=>{let St;return(0,le.f)(Pt,Ze,()=>{St=It[ne.h](),(0,le.f)(Pt,Ze,()=>{let rt,qe;try{({value:rt,done:qe}=St.next())}catch(lt){return void Pt.error(lt)}qe?Pt.complete():Pt.next(rt)},0,!0)}),()=>(0,Z.m)(St?.return)&&St.return()})}(It,Ze);if((0,it.L)(It))return function Ue(It,Ze){return Le((0,it.Q)(It),Ze)}(It,Ze)}throw(0,Ke.z)(It)}(It,Ze):(0,f.Xf)(It)}},4968:(Se,ae,D)=>{D.d(ae,{R:()=>Z});var f=D(8421),I=D(9751),ee=D(5577),B=D(1144),q=D(576),ie=D(3268);const te=["addListener","removeListener"],K=["addEventListener","removeEventListener"],ne=["on","off"];function Z(je,Qe,Be,ze){if((0,q.m)(Be)&&(ze=Be,Be=void 0),ze)return Z(je,Qe,Be).pipe((0,ie.Z)(ze));const[Ke,it]=function Ge(je){return(0,q.m)(je.addEventListener)&&(0,q.m)(je.removeEventListener)}(je)?K.map(Ue=>xe=>je[Ue](Qe,xe,Be)):function fe(je){return(0,q.m)(je.addListener)&&(0,q.m)(je.removeListener)}(je)?te.map(le(je,Qe)):function Le(je){return(0,q.m)(je.on)&&(0,q.m)(je.off)}(je)?ne.map(le(je,Qe)):[];if(!Ke&&(0,B.z)(je))return(0,ee.z)(Ue=>Z(Ue,Qe,Be))((0,f.Xf)(je));if(!Ke)throw new TypeError("Invalid event target");return new I.y(Ue=>{const xe=(...Ct)=>Ue.next(1<Ct.length?Ct:Ct[0]);return Ke(xe),()=>it(xe)})}function le(je,Qe){return Be=>ze=>je[Be](Qe,ze)}},8421:(Se,ae,D)=>{D.d(ae,{Xf:()=>Le});var f=D(655),I=D(1144),ee=D(8239),B=D(9751),q=D(3670),ie=D(2206),te=D(4532),K=D(6495),ne=D(3260),Z=D(576),le=D(7849),fe=D(8822);function Le(Ue){if(Ue instanceof B.y)return Ue;if(null!=Ue){if((0,q.c)(Ue))return function Ge(Ue){return new B.y(xe=>{const Ct=Ue[fe.L]();if((0,Z.m)(Ct.subscribe))return Ct.subscribe(xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ue);if((0,I.z)(Ue))return function je(Ue){return new B.y(xe=>{for(let Ct=0;Ct<Ue.length&&!xe.closed;Ct++)xe.next(Ue[Ct]);xe.complete()})}(Ue);if((0,ee.t)(Ue))return function Qe(Ue){return new B.y(xe=>{Ue.then(Ct=>{xe.closed||(xe.next(Ct),xe.complete())},Ct=>xe.error(Ct)).then(null,le.h)})}(Ue);if((0,ie.D)(Ue))return ze(Ue);if((0,K.T)(Ue))return function Be(Ue){return new B.y(xe=>{for(const Ct of Ue)if(xe.next(Ct),xe.closed)return;xe.complete()})}(Ue);if((0,ne.L)(Ue))return function Ke(Ue){return ze((0,ne.Q)(Ue))}(Ue)}throw(0,te.z)(Ue)}function ze(Ue){return new B.y(xe=>{(function it(Ue,xe){var Ct,It,Ze,Pt;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ct=(0,f.KL)(Ue);!(It=yield Ct.next()).done;)if(xe.next(It.value),xe.closed)return}catch(St){Ze={error:St}}finally{try{It&&!It.done&&(Pt=Ct.return)&&(yield Pt.call(Ct))}finally{if(Ze)throw Ze.error}}xe.complete()})})(Ue,xe).catch(Ct=>xe.error(Ct))})}},6451:(Se,ae,D)=>{D.d(ae,{T:()=>ie});var f=D(8189),I=D(8421),ee=D(515),B=D(3269),q=D(457);function ie(...te){const K=(0,B.yG)(te),ne=(0,B._6)(te,1/0),Z=te;return Z.length?1===Z.length?(0,I.Xf)(Z[0]):(0,f.J)(ne)((0,q.D)(Z,K)):ee.E}},9646:(Se,ae,D)=>{D.d(ae,{of:()=>ee});var f=D(3269),I=D(457);function ee(...B){const q=(0,f.yG)(B);return(0,I.D)(B,q)}},2843:(Se,ae,D)=>{D.d(ae,{_:()=>ee});var f=D(9751),I=D(576);function ee(B,q){const ie=(0,I.m)(B)?B:()=>B,te=K=>K.error(ie());return new f.y(q?K=>q.schedule(te,0,K):te)}},2805:(Se,ae,D)=>{D.d(ae,{H:()=>q});var f=D(9751),I=D(4986),ee=D(3532),B=D(1165);function q(ie=0,te,K=I.P){let ne=-1;return null!=te&&((0,ee.K)(te)?K=te:ne=te),new f.y(Z=>{let le=(0,B.q)(ie)?+ie-K.now():ie;le<0&&(le=0);let fe=0;return K.schedule(function(){Z.closed||(Z.next(fe++),0<=ne?this.schedule(void 0,ne):Z.complete())},le)})}},5403:(Se,ae,D)=>{D.d(ae,{Q:()=>I});var f=D(930);class I extends f.Lv{constructor(B,q,ie,te,K){super(B),this.onFinalize=K,this._next=q?function(ne){try{q(ne)}catch(Z){B.error(Z)}}:super._next,this._error=te?function(ne){try{te(ne)}catch(Z){B.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(ne){B.error(ne)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var B;const{closed:q}=this;super.unsubscribe(),!q&&(null===(B=this.onFinalize)||void 0===B||B.call(this))}}},262:(Se,ae,D)=>{D.d(ae,{K:()=>B});var f=D(8421),I=D(5403),ee=D(4482);function B(q){return(0,ee.e)((ie,te)=>{let Z,K=null,ne=!1;K=ie.subscribe(new I.Q(te,void 0,void 0,le=>{Z=(0,f.Xf)(q(le,B(q)(ie))),K?(K.unsubscribe(),K=null,Z.subscribe(te)):ne=!0})),ne&&(K.unsubscribe(),K=null,Z.subscribe(te))})}},4351:(Se,ae,D)=>{D.d(ae,{b:()=>ee});var f=D(5577),I=D(576);function ee(B,q){return(0,I.m)(q)?(0,f.z)(B,q,1):(0,f.z)(B,1)}},8372:(Se,ae,D)=>{D.d(ae,{b:()=>B});var f=D(4986),I=D(4482),ee=D(5403);function B(q,ie=f.z){return(0,I.e)((te,K)=>{let ne=null,Z=null,le=null;const fe=()=>{if(ne){ne.unsubscribe(),ne=null;const Ge=Z;Z=null,K.next(Ge)}};function Le(){const Ge=le+q,je=ie.now();if(je<Ge)return ne=this.schedule(void 0,Ge-je),void K.add(ne);fe()}te.subscribe(new ee.Q(K,Ge=>{Z=Ge,le=ie.now(),ne||(ne=ie.schedule(Le,q),K.add(ne))},()=>{fe(),K.complete()},void 0,()=>{Z=ne=null}))})}},6590:(Se,ae,D)=>{D.d(ae,{d:()=>ee});var f=D(4482),I=D(5403);function ee(B){return(0,f.e)((q,ie)=>{let te=!1;q.subscribe(new I.Q(ie,K=>{te=!0,ie.next(K)},()=>{te||ie.next(B),ie.complete()}))})}},4086:(Se,ae,D)=>{D.d(ae,{g:()=>ne});var f=D(4986),I=D(7272),ee=D(5698),B=D(8502),q=D(9718),ie=D(5577);function te(Z,le){return le?fe=>(0,I.z)(le.pipe((0,ee.q)(1),(0,B.l)()),fe.pipe(te(Z))):(0,ie.z)((fe,Le)=>Z(fe,Le).pipe((0,ee.q)(1),(0,q.h)(fe)))}var K=D(2805);function ne(Z,le=f.z){const fe=(0,K.H)(Z,le);return te(()=>fe)}},1884:(Se,ae,D)=>{D.d(ae,{x:()=>B});var f=D(4671),I=D(4482),ee=D(5403);function B(ie,te=f.y){return ie=ie??q,(0,I.e)((K,ne)=>{let Z,le=!0;K.subscribe(new ee.Q(ne,fe=>{const Le=te(fe);(le||!ie(Z,Le))&&(le=!1,Z=Le,ne.next(fe))}))})}function q(ie,te){return ie===te}},6129:(Se,ae,D)=>{D.d(ae,{z:()=>q});var f=D(4004),I=D(8421),ee=D(4482),B=D(5403);function q(ie,te){return te?K=>K.pipe(q((ne,Z)=>(0,I.Xf)(ie(ne,Z)).pipe((0,f.U)((le,fe)=>te(ne,le,Z,fe))))):(0,ee.e)((K,ne)=>{let Z=0,le=null,fe=!1;K.subscribe(new B.Q(ne,Le=>{le||(le=new B.Q(ne,void 0,()=>{le=null,fe&&ne.complete()}),(0,I.Xf)(ie(Le,Z++)).subscribe(le))},()=>{fe=!0,!le&&ne.complete()}))})}},9300:(Se,ae,D)=>{D.d(ae,{h:()=>ee});var f=D(4482),I=D(5403);function ee(B,q){return(0,f.e)((ie,te)=>{let K=0;ie.subscribe(new I.Q(te,ne=>B.call(q,ne,K++)&&te.next(ne)))})}},8746:(Se,ae,D)=>{D.d(ae,{x:()=>I});var f=D(4482);function I(ee){return(0,f.e)((B,q)=>{try{B.subscribe(q)}finally{q.add(ee)}})}},590:(Se,ae,D)=>{D.d(ae,{P:()=>te});var f=D(6805),I=D(9300),ee=D(5698),B=D(6590),q=D(8068),ie=D(4671);function te(K,ne){const Z=arguments.length>=2;return le=>le.pipe(K?(0,I.h)((fe,Le)=>K(fe,Le,le)):ie.y,(0,ee.q)(1),Z?(0,B.d)(ne):(0,q.T)(()=>new f.K))}},8502:(Se,ae,D)=>{D.d(ae,{l:()=>B});var f=D(4482),I=D(5403),ee=D(5032);function B(){return(0,f.e)((q,ie)=>{q.subscribe(new I.Q(ie,ee.Z))})}},3103:(Se,ae,D)=>{D.d(ae,{Z:()=>te});var f=D(6805),I=D(9300),ee=D(2035),B=D(8068),q=D(6590),ie=D(4671);function te(K,ne){const Z=arguments.length>=2;return le=>le.pipe(K?(0,I.h)((fe,Le)=>K(fe,Le,le)):ie.y,(0,ee.h)(1),Z?(0,q.d)(ne):(0,B.T)(()=>new f.K))}},4004:(Se,ae,D)=>{D.d(ae,{U:()=>ee});var f=D(4482),I=D(5403);function ee(B,q){return(0,f.e)((ie,te)=>{let K=0;ie.subscribe(new I.Q(te,ne=>{te.next(B.call(q,ne,K++))}))})}},9718:(Se,ae,D)=>{D.d(ae,{h:()=>I});var f=D(4004);function I(ee){return(0,f.U)(()=>ee)}},8189:(Se,ae,D)=>{D.d(ae,{J:()=>ee});var f=D(5577),I=D(4671);function ee(B=1/0){return(0,f.z)(I.y,B)}},5577:(Se,ae,D)=>{D.d(ae,{z:()=>K});var f=D(4004),I=D(8421),ee=D(4482),B=D(9672),q=D(5403),te=D(576);function K(ne,Z,le=1/0){return(0,te.m)(Z)?K((fe,Le)=>(0,f.U)((Ge,je)=>Z(fe,Ge,Le,je))((0,I.Xf)(ne(fe,Le))),le):("number"==typeof Z&&(le=Z),(0,ee.e)((fe,Le)=>function ie(ne,Z,le,fe,Le,Ge,je,Qe){const Be=[];let ze=0,Ke=0,it=!1;const Ue=()=>{it&&!Be.length&&!ze&&Z.complete()},xe=It=>ze<fe?Ct(It):Be.push(It),Ct=It=>{Ge&&Z.next(It),ze++;let Ze=!1;(0,I.Xf)(le(It,Ke++)).subscribe(new q.Q(Z,Pt=>{Le?.(Pt),Ge?xe(Pt):Z.next(Pt)},()=>{Ze=!0},void 0,()=>{if(Ze)try{for(ze--;Be.length&&ze<fe;){const Pt=Be.shift();je?(0,B.f)(Z,je,()=>Ct(Pt)):Ct(Pt)}Ue()}catch(Pt){Z.error(Pt)}}))};return ne.subscribe(new q.Q(Z,xe,()=>{it=!0,Ue()})),()=>{Qe?.()}}(fe,Le,ne,le)))}},5363:(Se,ae,D)=>{D.d(ae,{Q:()=>B});var f=D(9672),I=D(4482),ee=D(5403);function B(q,ie=0){return(0,I.e)((te,K)=>{te.subscribe(new ee.Q(K,ne=>(0,f.f)(K,q,()=>K.next(ne),ie),()=>(0,f.f)(K,q,()=>K.complete(),ie),ne=>(0,f.f)(K,q,()=>K.error(ne),ie)))})}},4813:(Se,ae,D)=>{D.d(ae,{j:()=>I});var f=D(4004);function I(...ee){const B=ee.length;if(0===B)throw new Error("list of properties cannot be empty.");return(0,f.U)(q=>{let ie=q;for(let te=0;te<B;te++){const K=ie?.[ee[te]];if(!(typeof K<"u"))return;ie=K}return ie})}},8646:(Se,ae,D)=>{D.d(ae,{n:()=>le});var f=D(7579),I=D(4033),ee=D(576),B=D(457),q=D(4482),ie=D(9751);const K={connector:()=>new f.x};function ne(fe,Le=K){const{connector:Ge}=Le;return(0,q.e)((je,Qe)=>{const Be=Ge();(0,B.D)(fe(function te(fe){return new ie.y(Le=>fe.subscribe(Le))}(Be))).subscribe(Qe),Qe.add(je.subscribe(Be))})}function le(fe){return fe?Le=>ne(fe)(Le):Le=>function Z(fe,Le){const Ge=(0,ee.m)(fe)?fe:()=>fe;return(0,ee.m)(Le)?ne(Le,{connector:Ge}):je=>new I.c(je,Ge)}(new f.x)(Le)}},8343:(Se,ae,D)=>{D.d(ae,{x:()=>ee});var f=D(4482),I=D(5403);function ee(){return(0,f.e)((B,q)=>{let ie=null;B._refCount++;const te=new I.Q(q,void 0,void 0,void 0,()=>{if(!B||B._refCount<=0||0<--B._refCount)return void(ie=null);const K=B._connection,ne=ie;ie=null,K&&(!ne||K===ne)&&K.unsubscribe(),q.unsubscribe()});B.subscribe(te),te.closed||(ie=B.connect())})}},5625:(Se,ae,D)=>{D.d(ae,{X:()=>ie});var f=D(4482),I=D(5403),ee=D(4671),B=D(2805),q=D(8421);function ie(te=1/0){let K;K=te&&"object"==typeof te?te:{count:te};const{count:ne=1/0,delay:Z,resetOnSuccess:le=!1}=K;return ne<=0?ee.y:(0,f.e)((fe,Le)=>{let je,Ge=0;const Qe=()=>{let Be=!1;je=fe.subscribe(new I.Q(Le,ze=>{le&&(Ge=0),Le.next(ze)},void 0,ze=>{if(Ge++<ne){const Ke=()=>{je?(je.unsubscribe(),je=null,Qe()):Be=!0};if(null!=Z){const it="number"==typeof Z?(0,B.H)(Z):(0,q.Xf)(Z(ze,Ge)),Ue=new I.Q(Le,()=>{Ue.unsubscribe(),Ke()},()=>{Le.complete()});it.subscribe(Ue)}else Ke()}else Le.error(ze)})),Be&&(je.unsubscribe(),je=null,Qe())};Qe()})}},5026:(Se,ae,D)=>{D.d(ae,{R:()=>B});var f=D(4482),I=D(5403);function B(q,ie){return(0,f.e)(function ee(q,ie,te,K,ne){return(Z,le)=>{let fe=te,Le=ie,Ge=0;Z.subscribe(new I.Q(le,je=>{const Qe=Ge++;Le=fe?q(Le,je,Qe):(fe=!0,je),K&&le.next(Le)},ne&&(()=>{fe&&le.next(Le),le.complete()})))}}(q,ie,arguments.length>=2,!0))}},3099:(Se,ae,D)=>{D.d(ae,{B:()=>ie});var f=D(457),I=D(5698),ee=D(7579),B=D(930),q=D(4482);function ie(K={}){const{connector:ne=(()=>new ee.x),resetOnError:Z=!0,resetOnComplete:le=!0,resetOnRefCountZero:fe=!0}=K;return Le=>{let Ge=null,je=null,Qe=null,Be=0,ze=!1,Ke=!1;const it=()=>{je?.unsubscribe(),je=null},Ue=()=>{it(),Ge=Qe=null,ze=Ke=!1},xe=()=>{const Ct=Ge;Ue(),Ct?.unsubscribe()};return(0,q.e)((Ct,It)=>{Be++,!Ke&&!ze&&it();const Ze=Qe=Qe??ne();It.add(()=>{Be--,0===Be&&!Ke&&!ze&&(je=te(xe,fe))}),Ze.subscribe(It),Ge||(Ge=new B.Hp({next:Pt=>Ze.next(Pt),error:Pt=>{Ke=!0,it(),je=te(Ue,Z,Pt),Ze.error(Pt)},complete:()=>{ze=!0,it(),je=te(Ue,le),Ze.complete()}}),(0,f.D)(Ct).subscribe(Ge))})(Le)}}function te(K,ne,...Z){return!0===ne?(K(),null):!1===ne?null:ne(...Z).pipe((0,I.q)(1)).subscribe(()=>K())}},4782:(Se,ae,D)=>{D.d(ae,{d:()=>ee});var f=D(4707),I=D(3099);function ee(B,q,ie){var te,K;let ne,Z=!1;return B&&"object"==typeof B?(ne=null!==(te=B.bufferSize)&&void 0!==te?te:1/0,q=null!==(K=B.windowTime)&&void 0!==K?K:1/0,Z=!!B.refCount,ie=B.scheduler):ne=B??1/0,(0,I.B)({connector:()=>new f.t(ne,q,ie),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Z})}},5684:(Se,ae,D)=>{D.d(ae,{T:()=>I});var f=D(9300);function I(ee){return(0,f.h)((B,q)=>ee<=q)}},8675:(Se,ae,D)=>{D.d(ae,{O:()=>B});var f=D(7272),I=D(3269),ee=D(4482);function B(...q){const ie=(0,I.yG)(q);return(0,ee.e)((te,K)=>{(ie?(0,f.z)(q,te,ie):(0,f.z)(q,te)).subscribe(K)})}},3900:(Se,ae,D)=>{D.d(ae,{w:()=>B});var f=D(8421),I=D(4482),ee=D(5403);function B(q,ie){return(0,I.e)((te,K)=>{let ne=null,Z=0,le=!1;const fe=()=>le&&!ne&&K.complete();te.subscribe(new ee.Q(K,Le=>{ne?.unsubscribe();let Ge=0;const je=Z++;(0,f.Xf)(q(Le,je)).subscribe(ne=new ee.Q(K,Qe=>K.next(ie?ie(Le,Qe,je,Ge++):Qe),()=>{ne=null,fe()}))},()=>{le=!0,fe()}))})}},5698:(Se,ae,D)=>{D.d(ae,{q:()=>B});var f=D(515),I=D(4482),ee=D(5403);function B(q){return q<=0?()=>f.E:(0,I.e)((ie,te)=>{let K=0;ie.subscribe(new ee.Q(te,ne=>{++K<=q&&(te.next(ne),q<=K&&te.complete())}))})}},2035:(Se,ae,D)=>{D.d(ae,{h:()=>B});var f=D(515),I=D(4482),ee=D(5403);function B(q){return q<=0?()=>f.E:(0,I.e)((ie,te)=>{let K=[];ie.subscribe(new ee.Q(te,ne=>{K.push(ne),q<K.length&&K.shift()},()=>{for(const ne of K)te.next(ne);te.complete()},void 0,()=>{K=null}))})}},2722:(Se,ae,D)=>{D.d(ae,{R:()=>q});var f=D(4482),I=D(5403),ee=D(8421),B=D(5032);function q(ie){return(0,f.e)((te,K)=>{(0,ee.Xf)(ie).subscribe(new I.Q(K,()=>K.complete(),B.Z)),!K.closed&&te.subscribe(K)})}},2529:(Se,ae,D)=>{D.d(ae,{o:()=>ee});var f=D(4482),I=D(5403);function ee(B,q=!1){return(0,f.e)((ie,te)=>{let K=0;ie.subscribe(new I.Q(te,ne=>{const Z=B(ne,K++);(Z||q)&&te.next(ne),!Z&&te.complete()}))})}},8505:(Se,ae,D)=>{D.d(ae,{b:()=>q});var f=D(576),I=D(4482),ee=D(5403),B=D(4671);function q(ie,te,K){const ne=(0,f.m)(ie)||te||K?{next:ie,error:te,complete:K}:ie;return ne?(0,I.e)((Z,le)=>{var fe;null===(fe=ne.subscribe)||void 0===fe||fe.call(ne);let Le=!0;Z.subscribe(new ee.Q(le,Ge=>{var je;null===(je=ne.next)||void 0===je||je.call(ne,Ge),le.next(Ge)},()=>{var Ge;Le=!1,null===(Ge=ne.complete)||void 0===Ge||Ge.call(ne),le.complete()},Ge=>{var je;Le=!1,null===(je=ne.error)||void 0===je||je.call(ne,Ge),le.error(Ge)},()=>{var Ge,je;Le&&(null===(Ge=ne.unsubscribe)||void 0===Ge||Ge.call(ne)),null===(je=ne.finalize)||void 0===je||je.call(ne)}))}):B.y}},9468:(Se,ae,D)=>{D.d(ae,{p:()=>K});var f=D(4986),I=D(4482),ee=D(5403),B=D(8421);const q={leading:!0,trailing:!1};var te=D(2805);function K(ne,Z=f.z,le=q){const fe=(0,te.H)(ne,Z);return function ie(ne,Z=q){return(0,I.e)((le,fe)=>{const{leading:Le,trailing:Ge}=Z;let je=!1,Qe=null,Be=null,ze=!1;const Ke=()=>{Be?.unsubscribe(),Be=null,Ge&&(xe(),ze&&fe.complete())},it=()=>{Be=null,ze&&fe.complete()},Ue=Ct=>Be=(0,B.Xf)(ne(Ct)).subscribe(new ee.Q(fe,Ke,it)),xe=()=>{if(je){je=!1;const Ct=Qe;Qe=null,fe.next(Ct),!ze&&Ue(Ct)}};le.subscribe(new ee.Q(fe,Ct=>{je=!0,Qe=Ct,(!Be||Be.closed)&&(Le?xe():Ue(Ct))},()=>{ze=!0,(!(Ge&&je&&Be)||Be.closed)&&fe.complete()}))})}(()=>fe,le)}},8068:(Se,ae,D)=>{D.d(ae,{T:()=>B});var f=D(6805),I=D(4482),ee=D(5403);function B(ie=q){return(0,I.e)((te,K)=>{let ne=!1;te.subscribe(new ee.Q(K,Z=>{ne=!0,K.next(Z)},()=>ne?K.complete():K.error(ie())))})}function q(){return new f.K}},7414:(Se,ae,D)=>{D.d(ae,{V:()=>ne});var f=D(4986),I=D(1165),ee=D(4482),B=D(8421),q=D(3888),ie=D(5403),te=D(9672);const K=(0,q.d)(le=>function(Le=null){le(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=Le});function ne(le,fe){const{first:Le,each:Ge,with:je=Z,scheduler:Qe=fe??f.z,meta:Be=null}=(0,I.q)(le)?{first:le}:"number"==typeof le?{each:le}:le;if(null==Le&&null==Ge)throw new TypeError("No timeout provided.");return(0,ee.e)((ze,Ke)=>{let it,Ue,xe=null,Ct=0;const It=Ze=>{Ue=(0,te.f)(Ke,Qe,()=>{try{it.unsubscribe(),(0,B.Xf)(je({meta:Be,lastValue:xe,seen:Ct})).subscribe(Ke)}catch(Pt){Ke.error(Pt)}},Ze)};it=ze.subscribe(new ie.Q(Ke,Ze=>{Ue?.unsubscribe(),Ct++,Ke.next(xe=Ze),Ge>0&&It(Ge)},void 0,void 0,()=>{Ue?.closed||Ue?.unsubscribe(),xe=null})),It(null!=Le?"number"==typeof Le?Le:+Le-Qe.now():Ge)})}function Z(le){throw new K(le)}},1365:(Se,ae,D)=>{D.d(ae,{M:()=>te});var f=D(4482),I=D(5403),ee=D(8421),B=D(4671),q=D(5032),ie=D(3269);function te(...K){const ne=(0,ie.jO)(K);return(0,f.e)((Z,le)=>{const fe=K.length,Le=new Array(fe);let Ge=K.map(()=>!1),je=!1;for(let Qe=0;Qe<fe;Qe++)(0,ee.Xf)(K[Qe]).subscribe(new I.Q(le,Be=>{Le[Qe]=Be,!je&&!Ge[Qe]&&(Ge[Qe]=!0,(je=Ge.every(B.y))&&(Ge=null))},q.Z));Z.subscribe(new I.Q(le,Qe=>{if(je){const Be=[Qe,...Le];le.next(ne?ne(...Be):Be)}}))})}},4408:(Se,ae,D)=>{D.d(ae,{o:()=>q});var f=D(727);class I extends f.w0{constructor(te,K){super()}schedule(te,K=0){return this}}const ee={setInterval(...ie){const{delegate:te}=ee;return(te?.setInterval||setInterval)(...ie)},clearInterval(ie){const{delegate:te}=ee;return(te?.clearInterval||clearInterval)(ie)},delegate:void 0};var B=D(8737);class q extends I{constructor(te,K){super(te,K),this.scheduler=te,this.work=K,this.pending=!1}schedule(te,K=0){if(this.closed)return this;this.state=te;const ne=this.id,Z=this.scheduler;return null!=ne&&(this.id=this.recycleAsyncId(Z,ne,K)),this.pending=!0,this.delay=K,this.id=this.id||this.requestAsyncId(Z,this.id,K),this}requestAsyncId(te,K,ne=0){return ee.setInterval(te.flush.bind(te,this),ne)}recycleAsyncId(te,K,ne=0){if(null!=ne&&this.delay===ne&&!1===this.pending)return K;ee.clearInterval(K)}execute(te,K){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ne=this._execute(te,K);if(ne)return ne;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(te,K){let Z,ne=!1;try{this.work(te)}catch(le){ne=!0,Z=le||new Error("Scheduled action threw falsy error")}if(ne)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:te,scheduler:K}=this,{actions:ne}=K;this.work=this.state=this.scheduler=null,this.pending=!1,(0,B.P)(ne,this),null!=te&&(this.id=this.recycleAsyncId(K,te,null)),this.delay=null,super.unsubscribe()}}}},7565:(Se,ae,D)=>{D.d(ae,{v:()=>ee});var f=D(6063);class I{constructor(q,ie=I.now){this.schedulerActionCtor=q,this.now=ie}schedule(q,ie=0,te){return new this.schedulerActionCtor(this,q).schedule(te,ie)}}I.now=f.l.now;class ee extends I{constructor(q,ie=I.now){super(q,ie),this.actions=[],this._active=!1,this._scheduled=void 0}flush(q){const{actions:ie}=this;if(this._active)return void ie.push(q);let te;this._active=!0;do{if(te=q.execute(q.state,q.delay))break}while(q=ie.shift());if(this._active=!1,te){for(;q=ie.shift();)q.unsubscribe();throw te}}}},4986:(Se,ae,D)=>{D.d(ae,{P:()=>B,z:()=>ee});var f=D(4408);const ee=new(D(7565).v)(f.o),B=ee},6063:(Se,ae,D)=>{D.d(ae,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},233:(Se,ae,D)=>{D.d(ae,{N:()=>q});var f=D(4408),ee=D(7565);const q=new class B extends ee.v{}(class I extends f.o{constructor(K,ne){super(K,ne),this.scheduler=K,this.work=ne}schedule(K,ne=0){return ne>0?super.schedule(K,ne):(this.delay=ne,this.state=K,this.scheduler.flush(this),this)}execute(K,ne){return ne>0||this.closed?super.execute(K,ne):this._execute(K,ne)}requestAsyncId(K,ne,Z=0){return null!=Z&&Z>0||null==Z&&this.delay>0?super.requestAsyncId(K,ne,Z):K.flush(this)}})},3410:(Se,ae,D)=>{D.d(ae,{z:()=>f});const f={setTimeout(...I){const{delegate:ee}=f;return(ee?.setTimeout||setTimeout)(...I)},clearTimeout(I){const{delegate:ee}=f;return(ee?.clearTimeout||clearTimeout)(I)},delegate:void 0}},2202:(Se,ae,D)=>{D.d(ae,{h:()=>I});const I=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Se,ae,D)=>{D.d(ae,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Se,ae,D)=>{D.d(ae,{K:()=>I});const I=(0,D(3888).d)(ee=>function(){ee(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(Se,ae,D)=>{D.d(ae,{_6:()=>ie,jO:()=>B,yG:()=>q});var f=D(576),I=D(3532);function ee(te){return te[te.length-1]}function B(te){return(0,f.m)(ee(te))?te.pop():void 0}function q(te){return(0,I.K)(ee(te))?te.pop():void 0}function ie(te,K){return"number"==typeof ee(te)?te.pop():K}},4742:(Se,ae,D)=>{D.d(ae,{D:()=>q});const{isArray:f}=Array,{getPrototypeOf:I,prototype:ee,keys:B}=Object;function q(te){if(1===te.length){const K=te[0];if(f(K))return{args:K,keys:null};if(function ie(te){return te&&"object"==typeof te&&I(te)===ee}(K)){const ne=B(K);return{args:ne.map(Z=>K[Z]),keys:ne}}}return{args:te,keys:null}}},8737:(Se,ae,D)=>{function f(I,ee){if(I){const B=I.indexOf(ee);0<=B&&I.splice(B,1)}}D.d(ae,{P:()=>f})},3888:(Se,ae,D)=>{function f(I){const B=I(q=>{Error.call(q),q.stack=(new Error).stack});return B.prototype=Object.create(Error.prototype),B.prototype.constructor=B,B}D.d(ae,{d:()=>f})},1810:(Se,ae,D)=>{function f(I,ee){return I.reduce((B,q,ie)=>(B[q]=ee[ie],B),{})}D.d(ae,{n:()=>f})},2806:(Se,ae,D)=>{D.d(ae,{O:()=>B,x:()=>ee});var f=D(2416);let I=null;function ee(q){if(f.v.useDeprecatedSynchronousErrorHandling){const ie=!I;if(ie&&(I={errorThrown:!1,error:null}),q(),ie){const{errorThrown:te,error:K}=I;if(I=null,te)throw K}}else q()}function B(q){f.v.useDeprecatedSynchronousErrorHandling&&I&&(I.errorThrown=!0,I.error=q)}},9672:(Se,ae,D)=>{function f(I,ee,B,q=0,ie=!1){const te=ee.schedule(function(){B(),ie?I.add(this.schedule(null,q)):this.unsubscribe()},q);if(I.add(te),!ie)return te}D.d(ae,{f:()=>f})},4671:(Se,ae,D)=>{function f(I){return I}D.d(ae,{y:()=>f})},1144:(Se,ae,D)=>{D.d(ae,{z:()=>f});const f=I=>I&&"number"==typeof I.length&&"function"!=typeof I},2206:(Se,ae,D)=>{D.d(ae,{D:()=>I});var f=D(576);function I(ee){return Symbol.asyncIterator&&(0,f.m)(ee?.[Symbol.asyncIterator])}},1165:(Se,ae,D)=>{function f(I){return I instanceof Date&&!isNaN(I)}D.d(ae,{q:()=>f})},576:(Se,ae,D)=>{function f(I){return"function"==typeof I}D.d(ae,{m:()=>f})},3670:(Se,ae,D)=>{D.d(ae,{c:()=>ee});var f=D(8822),I=D(576);function ee(B){return(0,I.m)(B[f.L])}},6495:(Se,ae,D)=>{D.d(ae,{T:()=>ee});var f=D(2202),I=D(576);function ee(B){return(0,I.m)(B?.[f.h])}},8239:(Se,ae,D)=>{D.d(ae,{t:()=>I});var f=D(576);function I(ee){return(0,f.m)(ee?.then)}},3260:(Se,ae,D)=>{D.d(ae,{L:()=>B,Q:()=>ee});var f=D(655),I=D(576);function ee(q){return(0,f.FC)(this,arguments,function*(){const te=q.getReader();try{for(;;){const{value:K,done:ne}=yield(0,f.qq)(te.read());if(ne)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(K)}}finally{te.releaseLock()}})}function B(q){return(0,I.m)(q?.getReader)}},3532:(Se,ae,D)=>{D.d(ae,{K:()=>I});var f=D(576);function I(ee){return ee&&(0,f.m)(ee.schedule)}},4482:(Se,ae,D)=>{D.d(ae,{A:()=>I,e:()=>ee});var f=D(576);function I(B){return(0,f.m)(B?.lift)}function ee(B){return q=>{if(I(q))return q.lift(function(ie){try{return B(ie,this)}catch(te){this.error(te)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Se,ae,D)=>{D.d(ae,{Z:()=>B});var f=D(4004);const{isArray:I}=Array;function B(q){return(0,f.U)(ie=>function ee(q,ie){return I(ie)?q(...ie):q(ie)}(q,ie))}},5032:(Se,ae,D)=>{function f(){}D.d(ae,{Z:()=>f})},9635:(Se,ae,D)=>{D.d(ae,{U:()=>ee,z:()=>I});var f=D(4671);function I(...B){return ee(B)}function ee(B){return 0===B.length?f.y:1===B.length?B[0]:function(ie){return B.reduce((te,K)=>K(te),ie)}}},7849:(Se,ae,D)=>{D.d(ae,{h:()=>ee});var f=D(2416),I=D(3410);function ee(B){I.z.setTimeout(()=>{const{onUnhandledError:q}=f.v;if(!q)throw B;q(B)})}},4532:(Se,ae,D)=>{function f(I){return new TypeError(`You provided ${null!==I&&"object"==typeof I?"an invalid object":`'${I}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}D.d(ae,{z:()=>f})},655:(Se,ae,D)=>{function B(rt,qe){var lt={};for(var Xe in rt)Object.prototype.hasOwnProperty.call(rt,Xe)&&qe.indexOf(Xe)<0&&(lt[Xe]=rt[Xe]);if(null!=rt&&"function"==typeof Object.getOwnPropertySymbols){var vt=0;for(Xe=Object.getOwnPropertySymbols(rt);vt<Xe.length;vt++)qe.indexOf(Xe[vt])<0&&Object.prototype.propertyIsEnumerable.call(rt,Xe[vt])&&(lt[Xe[vt]]=rt[Xe[vt]])}return lt}function q(rt,qe,lt,Xe){var gn,vt=arguments.length,At=vt<3?qe:null===Xe?Xe=Object.getOwnPropertyDescriptor(qe,lt):Xe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)At=Reflect.decorate(rt,qe,lt,Xe);else for(var rr=rt.length-1;rr>=0;rr--)(gn=rt[rr])&&(At=(vt<3?gn(At):vt>3?gn(qe,lt,At):gn(qe,lt))||At);return vt>3&&At&&Object.defineProperty(qe,lt,At),At}function K(rt,qe,lt,Xe){return new(lt||(lt=Promise))(function(At,gn){function rr(Fn){try{Kt(Xe.next(Fn))}catch(Cn){gn(Cn)}}function fn(Fn){try{Kt(Xe.throw(Fn))}catch(Cn){gn(Cn)}}function Kt(Fn){Fn.done?At(Fn.value):function vt(At){return At instanceof lt?At:new lt(function(gn){gn(At)})}(Fn.value).then(rr,fn)}Kt((Xe=Xe.apply(rt,qe||[])).next())})}function Be(rt){return this instanceof Be?(this.v=rt,this):new Be(rt)}function ze(rt,qe,lt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var vt,Xe=lt.apply(rt,qe||[]),At=[];return vt={},gn("next"),gn("throw"),gn("return"),vt[Symbol.asyncIterator]=function(){return this},vt;function gn(ir){Xe[ir]&&(vt[ir]=function(Kr){return new Promise(function(Pn,pn){At.push([ir,Kr,Pn,pn])>1||rr(ir,Kr)})})}function rr(ir,Kr){try{!function fn(ir){ir.value instanceof Be?Promise.resolve(ir.value.v).then(Kt,Fn):Cn(At[0][2],ir)}(Xe[ir](Kr))}catch(Pn){Cn(At[0][3],Pn)}}function Kt(ir){rr("next",ir)}function Fn(ir){rr("throw",ir)}function Cn(ir,Kr){ir(Kr),At.shift(),At.length&&rr(At[0][0],At[0][1])}}function it(rt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var lt,qe=rt[Symbol.asyncIterator];return qe?qe.call(rt):(rt=function fe(rt){var qe="function"==typeof Symbol&&Symbol.iterator,lt=qe&&rt[qe],Xe=0;if(lt)return lt.call(rt);if(rt&&"number"==typeof rt.length)return{next:function(){return rt&&Xe>=rt.length&&(rt=void 0),{value:rt&&rt[Xe++],done:!rt}}};throw new TypeError(qe?"Object is not iterable.":"Symbol.iterator is not defined.")}(rt),lt={},Xe("next"),Xe("throw"),Xe("return"),lt[Symbol.asyncIterator]=function(){return this},lt);function Xe(At){lt[At]=rt[At]&&function(gn){return new Promise(function(rr,fn){!function vt(At,gn,rr,fn){Promise.resolve(fn).then(function(Kt){At({value:Kt,done:rr})},gn)}(rr,fn,(gn=rt[At](gn)).done,gn.value)})}}}D.d(ae,{FC:()=>ze,KL:()=>it,_T:()=>B,gn:()=>q,mG:()=>K,qq:()=>Be})},9671:(Se,ae,D)=>{function f(ee,B,q,ie,te,K,ne){try{var Z=ee[K](ne),le=Z.value}catch(fe){return void q(fe)}Z.done?B(le):Promise.resolve(le).then(ie,te)}function I(ee){return function(){var B=this,q=arguments;return new Promise(function(ie,te){var K=ee.apply(B,q);function ne(le){f(K,ie,te,ne,Z,"next",le)}function Z(le){f(K,ie,te,ne,Z,"throw",le)}ne(void 0)})}}D.d(ae,{Z:()=>I})},7340:(Se,ae,D)=>{D.d(ae,{EY:()=>Qe,F4:()=>Z,IO:()=>je,LC:()=>I,SB:()=>ne,X$:()=>B,ZE:()=>Ke,ZN:()=>ze,_j:()=>f,eR:()=>le,jt:()=>q,k1:()=>it,l3:()=>ee,oB:()=>K,pV:()=>Le,ru:()=>ie,vP:()=>te});class f{}class I{}const ee="*";function B(Ue,xe){return{type:7,name:Ue,definitions:xe,options:{}}}function q(Ue,xe=null){return{type:4,styles:xe,timings:Ue}}function ie(Ue,xe=null){return{type:3,steps:Ue,options:xe}}function te(Ue,xe=null){return{type:2,steps:Ue,options:xe}}function K(Ue){return{type:6,styles:Ue,offset:null}}function ne(Ue,xe,Ct){return{type:0,name:Ue,styles:xe,options:Ct}}function Z(Ue){return{type:5,steps:Ue}}function le(Ue,xe,Ct=null){return{type:1,expr:Ue,animation:xe,options:Ct}}function Le(Ue=null){return{type:9,options:Ue}}function je(Ue,xe,Ct=null){return{type:11,selector:Ue,animation:xe,options:Ct}}function Qe(Ue,xe){return{type:12,timings:Ue,animation:xe}}function Be(Ue){Promise.resolve().then(Ue)}class ze{constructor(xe=0,Ct=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=xe+Ct}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(xe=>xe()),this._onDoneFns=[])}onStart(xe){this._originalOnStartFns.push(xe),this._onStartFns.push(xe)}onDone(xe){this._originalOnDoneFns.push(xe),this._onDoneFns.push(xe)}onDestroy(xe){this._onDestroyFns.push(xe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Be(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(xe=>xe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(xe=>xe()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(xe){this._position=this.totalTime?xe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(xe){const Ct="start"==xe?this._onStartFns:this._onDoneFns;Ct.forEach(It=>It()),Ct.length=0}}class Ke{constructor(xe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=xe;let Ct=0,It=0,Ze=0;const Pt=this.players.length;0==Pt?Be(()=>this._onFinish()):this.players.forEach(St=>{St.onDone(()=>{++Ct==Pt&&this._onFinish()}),St.onDestroy(()=>{++It==Pt&&this._onDestroy()}),St.onStart(()=>{++Ze==Pt&&this._onStart()})}),this.totalTime=this.players.reduce((St,rt)=>Math.max(St,rt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(xe=>xe()),this._onDoneFns=[])}init(){this.players.forEach(xe=>xe.init())}onStart(xe){this._onStartFns.push(xe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(xe=>xe()),this._onStartFns=[])}onDone(xe){this._onDoneFns.push(xe)}onDestroy(xe){this._onDestroyFns.push(xe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(xe=>xe.play())}pause(){this.players.forEach(xe=>xe.pause())}restart(){this.players.forEach(xe=>xe.restart())}finish(){this._onFinish(),this.players.forEach(xe=>xe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(xe=>xe.destroy()),this._onDestroyFns.forEach(xe=>xe()),this._onDestroyFns=[])}reset(){this.players.forEach(xe=>xe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(xe){const Ct=xe*this.totalTime;this.players.forEach(It=>{const Ze=It.totalTime?Math.min(1,Ct/It.totalTime):1;It.setPosition(Ze)})}getPosition(){const xe=this.players.reduce((Ct,It)=>null===Ct||It.totalTime>Ct.totalTime?It:Ct,null);return null!=xe?xe.getPosition():0}beforeDestroy(){this.players.forEach(xe=>{xe.beforeDestroy&&xe.beforeDestroy()})}triggerCallback(xe){const Ct="start"==xe?this._onStartFns:this._onDoneFns;Ct.forEach(It=>It()),Ct.length=0}}const it="!"},6895:(Se,ae,D)=>{D.d(ae,{Do:()=>Ke,ED:()=>De,EM:()=>Ss,Gx:()=>bi,H9:()=>To,HT:()=>B,JF:()=>Pr,JJ:()=>bl,K0:()=>ie,Mx:()=>os,NF:()=>jo,Nd:()=>Ks,O5:()=>_i,OU:()=>Sa,Ov:()=>Si,PC:()=>Ht,RF:()=>Yr,S$:()=>Qe,Ts:()=>Gn,V_:()=>ne,Ye:()=>it,Zx:()=>Bo,_K:()=>Os,b0:()=>ze,bD:()=>as,ez:()=>Qi,gd:()=>wn,i8:()=>ri,mk:()=>bn,n9:()=>Ts,p6:()=>Qn,q:()=>ee,rS:()=>ii,sg:()=>yr,tP:()=>zt,uU:()=>sr,w_:()=>q});var f=D(4650);let I=null;function ee(){return I}function B(P){I||(I=P)}class q{}const ie=new f.OlP("DocumentToken");let te=(()=>{class P{historyGo(V){throw new Error("Not implemented")}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275prov=f.Yz7({token:P,factory:function(){return function K(){return(0,f.LFG)(Z)}()},providedIn:"platform"}),P})();const ne=new f.OlP("Location Initialized");let Z=(()=>{class P extends te{constructor(V){super(),this._doc=V,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ee().getBaseHref(this._doc)}onPopState(V){const ue=ee().getGlobalEventTarget(this._doc,"window");return ue.addEventListener("popstate",V,!1),()=>ue.removeEventListener("popstate",V)}onHashChange(V){const ue=ee().getGlobalEventTarget(this._doc,"window");return ue.addEventListener("hashchange",V,!1),()=>ue.removeEventListener("hashchange",V)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(V){this._location.pathname=V}pushState(V,ue,we){le()?this._history.pushState(V,ue,we):this._location.hash=we}replaceState(V,ue,we){le()?this._history.replaceState(V,ue,we):this._location.hash=we}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return P.\u0275fac=function(V){return new(V||P)(f.LFG(ie))},P.\u0275prov=f.Yz7({token:P,factory:function(){return function fe(){return new Z((0,f.LFG)(ie))}()},providedIn:"platform"}),P})();function le(){return!!window.history.pushState}function Le(P,Q){if(0==P.length)return Q;if(0==Q.length)return P;let V=0;return P.endsWith("/")&&V++,Q.startsWith("/")&&V++,2==V?P+Q.substring(1):1==V?P+Q:P+"/"+Q}function Ge(P){const Q=P.match(/#|\?|$/),V=Q&&Q.index||P.length;return P.slice(0,V-("/"===P[V-1]?1:0))+P.slice(V)}function je(P){return P&&"?"!==P[0]?"?"+P:P}let Qe=(()=>{class P{historyGo(V){throw new Error("Not implemented")}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275prov=f.Yz7({token:P,factory:function(){return(0,f.f3M)(ze)},providedIn:"root"}),P})();const Be=new f.OlP("appBaseHref");let ze=(()=>{class P extends Qe{constructor(V,ue){super(),this._platformLocation=V,this._removeListenerFns=[],this._baseHref=ue??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return Le(this._baseHref,V)}path(V=!1){const ue=this._platformLocation.pathname+je(this._platformLocation.search),we=this._platformLocation.hash;return we&&V?`${ue}${we}`:ue}pushState(V,ue,we,pt){const Dt=this.prepareExternalUrl(we+je(pt));this._platformLocation.pushState(V,ue,Dt)}replaceState(V,ue,we,pt){const Dt=this.prepareExternalUrl(we+je(pt));this._platformLocation.replaceState(V,ue,Dt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){this._platformLocation.historyGo?.(V)}}return P.\u0275fac=function(V){return new(V||P)(f.LFG(te),f.LFG(Be,8))},P.\u0275prov=f.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),Ke=(()=>{class P extends Qe{constructor(V,ue){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=ue&&(this._baseHref=ue)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let ue=this._platformLocation.hash;return null==ue&&(ue="#"),ue.length>0?ue.substring(1):ue}prepareExternalUrl(V){const ue=Le(this._baseHref,V);return ue.length>0?"#"+ue:ue}pushState(V,ue,we,pt){let Dt=this.prepareExternalUrl(we+je(pt));0==Dt.length&&(Dt=this._platformLocation.pathname),this._platformLocation.pushState(V,ue,Dt)}replaceState(V,ue,we,pt){let Dt=this.prepareExternalUrl(we+je(pt));0==Dt.length&&(Dt=this._platformLocation.pathname),this._platformLocation.replaceState(V,ue,Dt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){this._platformLocation.historyGo?.(V)}}return P.\u0275fac=function(V){return new(V||P)(f.LFG(te),f.LFG(Be,8))},P.\u0275prov=f.Yz7({token:P,factory:P.\u0275fac}),P})(),it=(()=>{class P{constructor(V){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=V;const ue=this._locationStrategy.getBaseHref();this._basePath=function It(P){if(new RegExp("^(https?:)?//").test(P)){const[,V]=P.split(/\/\/[^\/]+/);return V}return P}(Ge(Ct(ue))),this._locationStrategy.onPopState(we=>{this._subject.emit({url:this.path(!0),pop:!0,state:we.state,type:we.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(V=!1){return this.normalize(this._locationStrategy.path(V))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(V,ue=""){return this.path()==this.normalize(V+je(ue))}normalize(V){return P.stripTrailingSlash(function xe(P,Q){if(!P||!Q.startsWith(P))return Q;const V=Q.substring(P.length);return""===V||["/",";","?","#"].includes(V[0])?V:Q}(this._basePath,Ct(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._locationStrategy.prepareExternalUrl(V)}go(V,ue="",we=null){this._locationStrategy.pushState(we,"",V,ue),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+je(ue)),we)}replaceState(V,ue="",we=null){this._locationStrategy.replaceState(we,"",V,ue),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+je(ue)),we)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(V=0){this._locationStrategy.historyGo?.(V)}onUrlChange(V){return this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ue=>{this._notifyUrlChangeListeners(ue.url,ue.state)})),()=>{const ue=this._urlChangeListeners.indexOf(V);this._urlChangeListeners.splice(ue,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(V="",ue){this._urlChangeListeners.forEach(we=>we(V,ue))}subscribe(V,ue,we){return this._subject.subscribe({next:V,error:ue,complete:we})}}return P.normalizeQueryParams=je,P.joinWithSlash=Le,P.stripTrailingSlash=Ge,P.\u0275fac=function(V){return new(V||P)(f.LFG(Qe))},P.\u0275prov=f.Yz7({token:P,factory:function(){return function Ue(){return new it((0,f.LFG)(Qe))}()},providedIn:"root"}),P})();function Ct(P){return P.replace(/\/index.html$/,"")}const Ze={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var Pt=(()=>((Pt=Pt||{})[Pt.Decimal=0]="Decimal",Pt[Pt.Percent=1]="Percent",Pt[Pt.Currency=2]="Currency",Pt[Pt.Scientific=3]="Scientific",Pt))(),St=(()=>((St=St||{})[St.Zero=0]="Zero",St[St.One=1]="One",St[St.Two=2]="Two",St[St.Few=3]="Few",St[St.Many=4]="Many",St[St.Other=5]="Other",St))(),rt=(()=>((rt=rt||{})[rt.Format=0]="Format",rt[rt.Standalone=1]="Standalone",rt))(),qe=(()=>((qe=qe||{})[qe.Narrow=0]="Narrow",qe[qe.Abbreviated=1]="Abbreviated",qe[qe.Wide=2]="Wide",qe[qe.Short=3]="Short",qe))(),lt=(()=>((lt=lt||{})[lt.Short=0]="Short",lt[lt.Medium=1]="Medium",lt[lt.Long=2]="Long",lt[lt.Full=3]="Full",lt))(),Xe=(()=>((Xe=Xe||{})[Xe.Decimal=0]="Decimal",Xe[Xe.Group=1]="Group",Xe[Xe.List=2]="List",Xe[Xe.PercentSign=3]="PercentSign",Xe[Xe.PlusSign=4]="PlusSign",Xe[Xe.MinusSign=5]="MinusSign",Xe[Xe.Exponential=6]="Exponential",Xe[Xe.SuperscriptingExponent=7]="SuperscriptingExponent",Xe[Xe.PerMille=8]="PerMille",Xe[Xe.Infinity=9]="Infinity",Xe[Xe.NaN=10]="NaN",Xe[Xe.TimeSeparator=11]="TimeSeparator",Xe[Xe.CurrencyDecimal=12]="CurrencyDecimal",Xe[Xe.CurrencyGroup=13]="CurrencyGroup",Xe))();function ir(P,Q){return dr((0,f.cg1)(P)[f.wAp.DateFormat],Q)}function Kr(P,Q){return dr((0,f.cg1)(P)[f.wAp.TimeFormat],Q)}function Pn(P,Q){return dr((0,f.cg1)(P)[f.wAp.DateTimeFormat],Q)}function pn(P,Q){const V=(0,f.cg1)(P),ue=V[f.wAp.NumberSymbols][Q];if(typeof ue>"u"){if(Q===Xe.CurrencyDecimal)return V[f.wAp.NumberSymbols][Xe.Decimal];if(Q===Xe.CurrencyGroup)return V[f.wAp.NumberSymbols][Xe.Group]}return ue}function si(P,Q){return(0,f.cg1)(P)[f.wAp.NumberFormats][Q]}const kt=f.kL8;function Vn(P){if(!P[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${P[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function dr(P,Q){for(let V=Q;V>-1;V--)if(typeof P[V]<"u")return P[V];throw new Error("Locale data API: locale data undefined")}function cn(P){const[Q,V]=P.split(":");return{hours:+Q,minutes:+V}}const qr=2,br=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Sn={},Yn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var hr=(()=>((hr=hr||{})[hr.Short=0]="Short",hr[hr.ShortGMT=1]="ShortGMT",hr[hr.Long=2]="Long",hr[hr.Extended=3]="Extended",hr))(),dn=(()=>((dn=dn||{})[dn.FullYear=0]="FullYear",dn[dn.Month=1]="Month",dn[dn.Date=2]="Date",dn[dn.Hours=3]="Hours",dn[dn.Minutes=4]="Minutes",dn[dn.Seconds=5]="Seconds",dn[dn.FractionalSeconds=6]="FractionalSeconds",dn[dn.Day=7]="Day",dn))(),Zt=(()=>((Zt=Zt||{})[Zt.DayPeriods=0]="DayPeriods",Zt[Zt.Days=1]="Days",Zt[Zt.Months=2]="Months",Zt[Zt.Eras=3]="Eras",Zt))();function Qn(P,Q,V,ue){let we=function Ft(P){if(Re(P))return P;if("number"==typeof P&&!isNaN(P))return new Date(P);if("string"==typeof P){if(P=P.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(P)){const[we,pt=1,Dt=1]=P.split("-").map(nn=>+nn);return yi(we,pt-1,Dt)}const V=parseFloat(P);if(!isNaN(P-V))return new Date(V);let ue;if(ue=P.match(br))return function Wt(P){const Q=new Date(0);let V=0,ue=0;const we=P[8]?Q.setUTCFullYear:Q.setFullYear,pt=P[8]?Q.setUTCHours:Q.setHours;P[9]&&(V=Number(P[9]+P[10]),ue=Number(P[9]+P[11])),we.call(Q,Number(P[1]),Number(P[2])-1,Number(P[3]));const Dt=Number(P[4]||0)-V,nn=Number(P[5]||0)-ue,Xr=Number(P[6]||0),Nr=Math.floor(1e3*parseFloat("0."+(P[7]||0)));return pt.call(Q,Dt,nn,Xr,Nr),Q}(ue)}const Q=new Date(P);if(!Re(Q))throw new Error(`Unable to convert "${P}" into a date`);return Q}(P);Q=Vr(V,Q)||Q;let nn,Dt=[];for(;Q;){if(nn=Yn.exec(Q),!nn){Dt.push(Q);break}{Dt=Dt.concat(nn.slice(1));const zn=Dt.pop();if(!zn)break;Q=zn}}let Xr=we.getTimezoneOffset();ue&&(Xr=Ie(ue,Xr),we=function ke(P,Q,V){const ue=V?-1:1,we=P.getTimezoneOffset();return function ot(P,Q){return(P=new Date(P.getTime())).setMinutes(P.getMinutes()+Q),P}(P,ue*(Ie(Q,we)-we))}(we,ue,!0));let Nr="";return Dt.forEach(zn=>{const gr=function ve(P){if(ge[P])return ge[P];let Q;switch(P){case"G":case"GG":case"GGG":Q=$n(Zt.Eras,qe.Abbreviated);break;case"GGGG":Q=$n(Zt.Eras,qe.Wide);break;case"GGGGG":Q=$n(Zt.Eras,qe.Narrow);break;case"y":Q=vr(dn.FullYear,1,0,!1,!0);break;case"yy":Q=vr(dn.FullYear,2,0,!0,!0);break;case"yyy":Q=vr(dn.FullYear,3,0,!1,!0);break;case"yyyy":Q=vr(dn.FullYear,4,0,!1,!0);break;case"Y":Q=Ot(1);break;case"YY":Q=Ot(2,!0);break;case"YYY":Q=Ot(3);break;case"YYYY":Q=Ot(4);break;case"M":case"L":Q=vr(dn.Month,1,1);break;case"MM":case"LL":Q=vr(dn.Month,2,1);break;case"MMM":Q=$n(Zt.Months,qe.Abbreviated);break;case"MMMM":Q=$n(Zt.Months,qe.Wide);break;case"MMMMM":Q=$n(Zt.Months,qe.Narrow);break;case"LLL":Q=$n(Zt.Months,qe.Abbreviated,rt.Standalone);break;case"LLLL":Q=$n(Zt.Months,qe.Wide,rt.Standalone);break;case"LLLLL":Q=$n(Zt.Months,qe.Narrow,rt.Standalone);break;case"w":Q=Ne(1);break;case"ww":Q=Ne(2);break;case"W":Q=Ne(1,!0);break;case"d":Q=vr(dn.Date,1);break;case"dd":Q=vr(dn.Date,2);break;case"c":case"cc":Q=vr(dn.Day,1);break;case"ccc":Q=$n(Zt.Days,qe.Abbreviated,rt.Standalone);break;case"cccc":Q=$n(Zt.Days,qe.Wide,rt.Standalone);break;case"ccccc":Q=$n(Zt.Days,qe.Narrow,rt.Standalone);break;case"cccccc":Q=$n(Zt.Days,qe.Short,rt.Standalone);break;case"E":case"EE":case"EEE":Q=$n(Zt.Days,qe.Abbreviated);break;case"EEEE":Q=$n(Zt.Days,qe.Wide);break;case"EEEEE":Q=$n(Zt.Days,qe.Narrow);break;case"EEEEEE":Q=$n(Zt.Days,qe.Short);break;case"a":case"aa":case"aaa":Q=$n(Zt.DayPeriods,qe.Abbreviated);break;case"aaaa":Q=$n(Zt.DayPeriods,qe.Wide);break;case"aaaaa":Q=$n(Zt.DayPeriods,qe.Narrow);break;case"b":case"bb":case"bbb":Q=$n(Zt.DayPeriods,qe.Abbreviated,rt.Standalone,!0);break;case"bbbb":Q=$n(Zt.DayPeriods,qe.Wide,rt.Standalone,!0);break;case"bbbbb":Q=$n(Zt.DayPeriods,qe.Narrow,rt.Standalone,!0);break;case"B":case"BB":case"BBB":Q=$n(Zt.DayPeriods,qe.Abbreviated,rt.Format,!0);break;case"BBBB":Q=$n(Zt.DayPeriods,qe.Wide,rt.Format,!0);break;case"BBBBB":Q=$n(Zt.DayPeriods,qe.Narrow,rt.Format,!0);break;case"h":Q=vr(dn.Hours,1,-12);break;case"hh":Q=vr(dn.Hours,2,-12);break;case"H":Q=vr(dn.Hours,1);break;case"HH":Q=vr(dn.Hours,2);break;case"m":Q=vr(dn.Minutes,1);break;case"mm":Q=vr(dn.Minutes,2);break;case"s":Q=vr(dn.Seconds,1);break;case"ss":Q=vr(dn.Seconds,2);break;case"S":Q=vr(dn.FractionalSeconds,1);break;case"SS":Q=vr(dn.FractionalSeconds,2);break;case"SSS":Q=vr(dn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":Q=lr(hr.Short);break;case"ZZZZZ":Q=lr(hr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":Q=lr(hr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":Q=lr(hr.Long);break;default:return null}return ge[P]=Q,Q}(zn);Nr+=gr?gr(we,V,Xr):"''"===zn?"'":zn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Nr}function yi(P,Q,V){const ue=new Date(0);return ue.setFullYear(P,Q,V),ue.setHours(0,0,0),ue}function Vr(P,Q){const V=function At(P){return(0,f.cg1)(P)[f.wAp.LocaleId]}(P);if(Sn[V]=Sn[V]||{},Sn[V][Q])return Sn[V][Q];let ue="";switch(Q){case"shortDate":ue=ir(P,lt.Short);break;case"mediumDate":ue=ir(P,lt.Medium);break;case"longDate":ue=ir(P,lt.Long);break;case"fullDate":ue=ir(P,lt.Full);break;case"shortTime":ue=Kr(P,lt.Short);break;case"mediumTime":ue=Kr(P,lt.Medium);break;case"longTime":ue=Kr(P,lt.Long);break;case"fullTime":ue=Kr(P,lt.Full);break;case"short":const we=Vr(P,"shortTime"),pt=Vr(P,"shortDate");ue=gi(Pn(P,lt.Short),[we,pt]);break;case"medium":const Dt=Vr(P,"mediumTime"),nn=Vr(P,"mediumDate");ue=gi(Pn(P,lt.Medium),[Dt,nn]);break;case"long":const Xr=Vr(P,"longTime"),Nr=Vr(P,"longDate");ue=gi(Pn(P,lt.Long),[Xr,Nr]);break;case"full":const zn=Vr(P,"fullTime"),gr=Vr(P,"fullDate");ue=gi(Pn(P,lt.Full),[zn,gr])}return ue&&(Sn[V][Q]=ue),ue}function gi(P,Q){return Q&&(P=P.replace(/\{([^}]+)}/g,function(V,ue){return null!=Q&&ue in Q?Q[ue]:V})),P}function Br(P,Q,V="-",ue,we){let pt="";(P<0||we&&P<=0)&&(we?P=1-P:(P=-P,pt=V));let Dt=String(P);for(;Dt.length<Q;)Dt="0"+Dt;return ue&&(Dt=Dt.slice(Dt.length-Q)),pt+Dt}function vr(P,Q,V=0,ue=!1,we=!1){return function(pt,Dt){let nn=function ki(P,Q){switch(P){case dn.FullYear:return Q.getFullYear();case dn.Month:return Q.getMonth();case dn.Date:return Q.getDate();case dn.Hours:return Q.getHours();case dn.Minutes:return Q.getMinutes();case dn.Seconds:return Q.getSeconds();case dn.FractionalSeconds:return Q.getMilliseconds();case dn.Day:return Q.getDay();default:throw new Error(`Unknown DateType value "${P}".`)}}(P,pt);if((V>0||nn>-V)&&(nn+=V),P===dn.Hours)0===nn&&-12===V&&(nn=12);else if(P===dn.FractionalSeconds)return function di(P,Q){return Br(P,3).substring(0,Q)}(nn,Q);const Xr=pn(Dt,Xe.MinusSign);return Br(nn,Q,Xr,ue,we)}}function $n(P,Q,V=rt.Format,ue=!1){return function(we,pt){return function ss(P,Q,V,ue,we,pt){switch(V){case Zt.Months:return function fn(P,Q,V){const ue=(0,f.cg1)(P),pt=dr([ue[f.wAp.MonthsFormat],ue[f.wAp.MonthsStandalone]],Q);return dr(pt,V)}(Q,we,ue)[P.getMonth()];case Zt.Days:return function rr(P,Q,V){const ue=(0,f.cg1)(P),pt=dr([ue[f.wAp.DaysFormat],ue[f.wAp.DaysStandalone]],Q);return dr(pt,V)}(Q,we,ue)[P.getDay()];case Zt.DayPeriods:const Dt=P.getHours(),nn=P.getMinutes();if(pt){const Nr=function qn(P){const Q=(0,f.cg1)(P);return Vn(Q),(Q[f.wAp.ExtraData][2]||[]).map(ue=>"string"==typeof ue?cn(ue):[cn(ue[0]),cn(ue[1])])}(Q),zn=function Fr(P,Q,V){const ue=(0,f.cg1)(P);Vn(ue);const pt=dr([ue[f.wAp.ExtraData][0],ue[f.wAp.ExtraData][1]],Q)||[];return dr(pt,V)||[]}(Q,we,ue),gr=Nr.findIndex(Wn=>{if(Array.isArray(Wn)){const[on,kr]=Wn,uo=Dt>=on.hours&&nn>=on.minutes,mr=Dt<kr.hours||Dt===kr.hours&&nn<kr.minutes;if(on.hours<kr.hours){if(uo&&mr)return!0}else if(uo||mr)return!0}else if(Wn.hours===Dt&&Wn.minutes===nn)return!0;return!1});if(-1!==gr)return zn[gr]}return function gn(P,Q,V){const ue=(0,f.cg1)(P),pt=dr([ue[f.wAp.DayPeriodsFormat],ue[f.wAp.DayPeriodsStandalone]],Q);return dr(pt,V)}(Q,we,ue)[Dt<12?0:1];case Zt.Eras:return function Kt(P,Q){return dr((0,f.cg1)(P)[f.wAp.Eras],Q)}(Q,ue)[P.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${V}`)}}(we,pt,P,Q,V,ue)}}function lr(P){return function(Q,V,ue){const we=-1*ue,pt=pn(V,Xe.MinusSign),Dt=we>0?Math.floor(we/60):Math.ceil(we/60);switch(P){case hr.Short:return(we>=0?"+":"")+Br(Dt,2,pt)+Br(Math.abs(we%60),2,pt);case hr.ShortGMT:return"GMT"+(we>=0?"+":"")+Br(Dt,1,pt);case hr.Long:return"GMT"+(we>=0?"+":"")+Br(Dt,2,pt)+":"+Br(Math.abs(we%60),2,pt);case hr.Extended:return 0===ue?"Z":(we>=0?"+":"")+Br(Dt,2,pt)+":"+Br(Math.abs(we%60),2,pt);default:throw new Error(`Unknown zone width "${P}"`)}}}const Oi=0,ei=4;function be(P){return yi(P.getFullYear(),P.getMonth(),P.getDate()+(ei-P.getDay()))}function Ne(P,Q=!1){return function(V,ue){let we;if(Q){const pt=new Date(V.getFullYear(),V.getMonth(),1).getDay()-1,Dt=V.getDate();we=1+Math.floor((Dt+pt)/7)}else{const pt=be(V),Dt=function Je(P){const Q=yi(P,Oi,1).getDay();return yi(P,0,1+(Q<=ei?ei:ei+7)-Q)}(pt.getFullYear()),nn=pt.getTime()-Dt.getTime();we=1+Math.round(nn/6048e5)}return Br(we,P,pn(ue,Xe.MinusSign))}}function Ot(P,Q=!1){return function(V,ue){return Br(be(V).getFullYear(),P,pn(ue,Xe.MinusSign),Q)}}const ge={};function Ie(P,Q){P=P.replace(/:/g,"");const V=Date.parse("Jan 01, 1970 00:00:00 "+P)/6e4;return isNaN(V)?Q:V}function Re(P){return P instanceof Date&&!isNaN(P.valueOf())}const Oe=/^(\d+)?\.((\d+)(-(\d+))?)?$/,he=22,Me=".",Ye="0",Vt=";",sn=",",Xn="#",Cr="\xa4";function gt(P,Q,V,ue,we,pt,Dt=!1){let nn="",Xr=!1;if(isFinite(P)){let Nr=function hn(P){let ue,we,pt,Dt,nn,Q=Math.abs(P)+"",V=0;for((we=Q.indexOf(Me))>-1&&(Q=Q.replace(Me,"")),(pt=Q.search(/e/i))>0?(we<0&&(we=pt),we+=+Q.slice(pt+1),Q=Q.substring(0,pt)):we<0&&(we=Q.length),pt=0;Q.charAt(pt)===Ye;pt++);if(pt===(nn=Q.length))ue=[0],we=1;else{for(nn--;Q.charAt(nn)===Ye;)nn--;for(we-=pt,ue=[],Dt=0;pt<=nn;pt++,Dt++)ue[Dt]=Number(Q.charAt(pt))}return we>he&&(ue=ue.splice(0,he-1),V=we-1,we=1),{digits:ue,exponent:V,integerLen:we}}(P);Dt&&(Nr=function Zn(P){if(0===P.digits[0])return P;const Q=P.digits.length-P.integerLen;return P.exponent?P.exponent+=2:(0===Q?P.digits.push(0,0):1===Q&&P.digits.push(0),P.integerLen+=2),P}(Nr));let zn=Q.minInt,gr=Q.minFrac,Wn=Q.maxFrac;if(pt){const es=pt.match(Oe);if(null===es)throw new Error(`${pt} is not a valid digit info`);const jn=es[1],ta=es[3],Lr=es[5];null!=jn&&(zn=tr(jn)),null!=ta&&(gr=tr(ta)),null!=Lr?Wn=tr(Lr):null!=ta&&gr>Wn&&(Wn=gr)}!function fr(P,Q,V){if(Q>V)throw new Error(`The minimum number of digits after fraction (${Q}) is higher than the maximum (${V}).`);let ue=P.digits,we=ue.length-P.integerLen;const pt=Math.min(Math.max(Q,we),V);let Dt=pt+P.integerLen,nn=ue[Dt];if(Dt>0){ue.splice(Math.max(P.integerLen,Dt));for(let gr=Dt;gr<ue.length;gr++)ue[gr]=0}else{we=Math.max(0,we),P.integerLen=1,ue.length=Math.max(1,Dt=pt+1),ue[0]=0;for(let gr=1;gr<Dt;gr++)ue[gr]=0}if(nn>=5)if(Dt-1<0){for(let gr=0;gr>Dt;gr--)ue.unshift(0),P.integerLen++;ue.unshift(1),P.integerLen++}else ue[Dt-1]++;for(;we<Math.max(0,pt);we++)ue.push(0);let Xr=0!==pt;const Nr=Q+P.integerLen,zn=ue.reduceRight(function(gr,Wn,on,kr){return kr[on]=(Wn+=gr)<10?Wn:Wn-10,Xr&&(0===kr[on]&&on>=Nr?kr.pop():Xr=!1),Wn>=10?1:0},0);zn&&(ue.unshift(zn),P.integerLen++)}(Nr,gr,Wn);let on=Nr.digits,kr=Nr.integerLen;const uo=Nr.exponent;let mr=[];for(Xr=on.every(es=>!es);kr<zn;kr++)on.unshift(0);for(;kr<0;kr++)on.unshift(0);kr>0?mr=on.splice(kr,on.length):(mr=on,on=[0]);const vn=[];for(on.length>=Q.lgSize&&vn.unshift(on.splice(-Q.lgSize,on.length).join(""));on.length>Q.gSize;)vn.unshift(on.splice(-Q.gSize,on.length).join(""));on.length&&vn.unshift(on.join("")),nn=vn.join(pn(V,ue)),mr.length&&(nn+=pn(V,we)+mr.join("")),uo&&(nn+=pn(V,Xe.Exponential)+"+"+uo)}else nn=pn(V,Xe.Infinity);return nn=P<0&&!Xr?Q.negPre+nn+Q.negSuf:Q.posPre+nn+Q.posSuf,nn}function On(P,Q="-"){const V={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},ue=P.split(Vt),we=ue[0],pt=ue[1],Dt=-1!==we.indexOf(Me)?we.split(Me):[we.substring(0,we.lastIndexOf(Ye)+1),we.substring(we.lastIndexOf(Ye)+1)],nn=Dt[0],Xr=Dt[1]||"";V.posPre=nn.substring(0,nn.indexOf(Xn));for(let zn=0;zn<Xr.length;zn++){const gr=Xr.charAt(zn);gr===Ye?V.minFrac=V.maxFrac=zn+1:gr===Xn?V.maxFrac=zn+1:V.posSuf+=gr}const Nr=nn.split(sn);if(V.gSize=Nr[1]?Nr[1].length:0,V.lgSize=Nr[2]||Nr[1]?(Nr[2]||Nr[1]).length:0,pt){const zn=we.length-V.posPre.length-V.posSuf.length,gr=pt.indexOf(Xn);V.negPre=pt.substring(0,gr).replace(/'/g,""),V.negSuf=pt.slice(gr+zn).replace(/'/g,"")}else V.negPre=Q+V.posPre,V.negSuf=V.posSuf;return V}function tr(P){const Q=parseInt(P);if(isNaN(Q))throw new Error("Invalid integer literal when parsing "+P);return Q}let ti=(()=>{class P{}return P.\u0275fac=function(V){return new(V||P)},P.\u0275prov=f.Yz7({token:P,factory:function(V){let ue=null;return V?ue=new V:(we=f.LFG(f.soG),ue=new Ms(we)),ue;var we},providedIn:"root"}),P})();let Ms=(()=>{class P extends ti{constructor(V){super(),this.locale=V}getPluralCategory(V,ue){switch(kt(ue||this.locale)(V)){case St.Zero:return"zero";case St.One:return"one";case St.Two:return"two";case St.Few:return"few";case St.Many:return"many";default:return"other"}}}return P.\u0275fac=function(V){return new(V||P)(f.LFG(f.soG))},P.\u0275prov=f.Yz7({token:P,factory:P.\u0275fac}),P})();function os(P,Q){Q=encodeURIComponent(Q);for(const V of P.split(";")){const ue=V.indexOf("="),[we,pt]=-1==ue?[V,""]:[V.slice(0,ue),V.slice(ue+1)];if(we.trim()===Q)return decodeURIComponent(pt)}return null}const jr=/\s+/,Bt=[];let bn=(()=>{class P{constructor(V,ue,we,pt){this._iterableDiffers=V,this._keyValueDiffers=ue,this._ngEl=we,this._renderer=pt,this.initialClasses=Bt,this.stateMap=new Map}set klass(V){this.initialClasses=null!=V?V.trim().split(jr):Bt}set ngClass(V){this.rawClass="string"==typeof V?V.trim().split(jr):V}ngDoCheck(){for(const ue of this.initialClasses)this._updateState(ue,!0);const V=this.rawClass;if(Array.isArray(V)||V instanceof Set)for(const ue of V)this._updateState(ue,!0);else if(null!=V)for(const ue of Object.keys(V))this._updateState(ue,Boolean(V[ue]));this._applyStateDiff()}_updateState(V,ue){const we=this.stateMap.get(V);void 0!==we?(we.enabled!==ue&&(we.changed=!0,we.enabled=ue),we.touched=!0):this.stateMap.set(V,{enabled:ue,changed:!0,touched:!0})}_applyStateDiff(){for(const V of this.stateMap){const ue=V[0],we=V[1];we.changed?(this._toggleClass(ue,we.enabled),we.changed=!1):we.touched||(we.enabled&&this._toggleClass(ue,!1),this.stateMap.delete(ue)),we.touched=!1}}_toggleClass(V,ue){(V=V.trim()).length>0&&V.split(jr).forEach(we=>{ue?this._renderer.addClass(this._ngEl.nativeElement,we):this._renderer.removeClass(this._ngEl.nativeElement,we)})}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.ZZ4),f.Y36(f.aQg),f.Y36(f.SBq),f.Y36(f.Qsj))},P.\u0275dir=f.lG2({type:P,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),P})();class er{constructor(Q,V,ue,we){this.$implicit=Q,this.ngForOf=V,this.index=ue,this.count=we}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let yr=(()=>{class P{set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}constructor(V,ue,we){this._viewContainer=V,this._template=ue,this._differs=we,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const ue=this._viewContainer;V.forEachOperation((we,pt,Dt)=>{if(null==we.previousIndex)ue.createEmbeddedView(this._template,new er(we.item,this._ngForOf,-1,-1),null===Dt?void 0:Dt);else if(null==Dt)ue.remove(null===pt?void 0:pt);else if(null!==pt){const nn=ue.get(pt);ue.move(nn,Dt),Ar(nn,we)}});for(let we=0,pt=ue.length;we<pt;we++){const nn=ue.get(we).context;nn.index=we,nn.count=pt,nn.ngForOf=this._ngForOf}V.forEachIdentityChange(we=>{Ar(ue.get(we.currentIndex),we)})}static ngTemplateContextGuard(V,ue){return!0}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},P.\u0275dir=f.lG2({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),P})();function Ar(P,Q){P.context.$implicit=Q.item}let _i=(()=>{class P{constructor(V,ue){this._viewContainer=V,this._context=new xn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ue}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){Er("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){Er("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,ue){return!0}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.s_b),f.Y36(f.Rgc))},P.\u0275dir=f.lG2({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),P})();class xn{constructor(){this.$implicit=null,this.ngIf=null}}function Er(P,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,f.AaK)(Q)}'.`)}class Nn{constructor(Q,V){this._viewContainerRef=Q,this._templateRef=V,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(Q){Q&&!this._created?this.create():!Q&&this._created&&this.destroy()}}let Yr=(()=>{class P{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(V){this._ngSwitch=V,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(V){this._defaultViews.push(V)}_matchCase(V){const ue=V==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ue,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ue}_updateDefaultCases(V){if(this._defaultViews.length>0&&V!==this._defaultUsed){this._defaultUsed=V;for(const ue of this._defaultViews)ue.enforceState(V)}}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275dir=f.lG2({type:P,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),P})(),Ts=(()=>{class P{constructor(V,ue,we){this.ngSwitch=we,we._addCase(),this._view=new Nn(V,ue)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(Yr,9))},P.\u0275dir=f.lG2({type:P,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),P})(),De=(()=>{class P{constructor(V,ue,we){we._addDefault(new Nn(V,ue))}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(Yr,9))},P.\u0275dir=f.lG2({type:P,selectors:[["","ngSwitchDefault",""]],standalone:!0}),P})(),Ht=(()=>{class P{constructor(V,ue,we){this._ngEl=V,this._differs=ue,this._renderer=we,this._ngStyle=null,this._differ=null}set ngStyle(V){this._ngStyle=V,!this._differ&&V&&(this._differ=this._differs.find(V).create())}ngDoCheck(){if(this._differ){const V=this._differ.diff(this._ngStyle);V&&this._applyChanges(V)}}_setStyle(V,ue){const[we,pt]=V.split("."),Dt=-1===we.indexOf("-")?void 0:f.JOm.DashCase;null!=ue?this._renderer.setStyle(this._ngEl.nativeElement,we,pt?`${ue}${pt}`:ue,Dt):this._renderer.removeStyle(this._ngEl.nativeElement,we,Dt)}_applyChanges(V){V.forEachRemovedItem(ue=>this._setStyle(ue.key,null)),V.forEachAddedItem(ue=>this._setStyle(ue.key,ue.currentValue)),V.forEachChangedItem(ue=>this._setStyle(ue.key,ue.currentValue))}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.SBq),f.Y36(f.aQg),f.Y36(f.Qsj))},P.\u0275dir=f.lG2({type:P,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),P})(),zt=(()=>{class P{constructor(V){this._viewContainerRef=V,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(V){if(V.ngTemplateOutlet||V.ngTemplateOutletInjector){const ue=this._viewContainerRef;if(this._viewRef&&ue.remove(ue.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:we,ngTemplateOutletContext:pt,ngTemplateOutletInjector:Dt}=this;this._viewRef=ue.createEmbeddedView(we,pt,Dt?{injector:Dt}:void 0)}else this._viewRef=null}else this._viewRef&&V.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.s_b))},P.\u0275dir=f.lG2({type:P,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[f.TTD]}),P})();function pr(P,Q){return new f.vHH(2100,!1)}class ur{createSubscription(Q,V){return Q.subscribe({next:V,error:ue=>{throw ue}})}dispose(Q){Q.unsubscribe()}}class hi{createSubscription(Q,V){return Q.then(V,ue=>{throw ue})}dispose(Q){}}const Dr=new hi,Mr=new ur;let Si=(()=>{class P{constructor(V){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=V}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(V){return this._obj?V!==this._obj?(this._dispose(),this.transform(V)):this._latestValue:(V&&this._subscribe(V),this._latestValue)}_subscribe(V){this._obj=V,this._strategy=this._selectStrategy(V),this._subscription=this._strategy.createSubscription(V,ue=>this._updateLatestValue(V,ue))}_selectStrategy(V){if((0,f.QGY)(V))return Dr;if((0,f.F4k)(V))return Mr;throw pr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(V,ue){V===this._obj&&(this._latestValue=ue,this._ref.markForCheck())}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.sBO,16))},P.\u0275pipe=f.Yjl({name:"async",type:P,pure:!1,standalone:!0}),P})(),ri=(()=>{class P{transform(V){if(null==V)return null;if("string"!=typeof V)throw pr();return V.toLowerCase()}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275pipe=f.Yjl({name:"lowercase",type:P,pure:!0,standalone:!0}),P})();const Ta=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let ii=(()=>{class P{transform(V){if(null==V)return null;if("string"!=typeof V)throw pr();return V.replace(Ta,ue=>ue[0].toUpperCase()+ue.slice(1).toLowerCase())}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275pipe=f.Yjl({name:"titlecase",type:P,pure:!0,standalone:!0}),P})(),wn=(()=>{class P{transform(V){if(null==V)return null;if("string"!=typeof V)throw pr();return V.toUpperCase()}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275pipe=f.Yjl({name:"uppercase",type:P,pure:!0,standalone:!0}),P})();const zs=new f.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),Gi=new f.OlP("DATE_PIPE_DEFAULT_OPTIONS");let sr=(()=>{class P{constructor(V,ue,we){this.locale=V,this.defaultTimezone=ue,this.defaultOptions=we}transform(V,ue,we,pt){if(null==V||""===V||V!=V)return null;try{return Qn(V,ue??this.defaultOptions?.dateFormat??"mediumDate",pt||this.locale,we??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(Dt){throw pr()}}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.soG,16),f.Y36(zs,24),f.Y36(Gi,24))},P.\u0275pipe=f.Yjl({name:"date",type:P,pure:!0,standalone:!0}),P})();const ro=/#/g;let bi=(()=>{class P{constructor(V){this._localization=V}transform(V,ue,we){if(null==V)return"";if("object"!=typeof ue||null===ue)throw pr();return ue[function ni(P,Q,V,ue){let we=`=${P}`;if(Q.indexOf(we)>-1||(we=V.getPluralCategory(P,ue),Q.indexOf(we)>-1))return we;if(Q.indexOf("other")>-1)return"other";throw new Error(`No plural message found for value "${P}"`)}(V,Object.keys(ue),this._localization,we)].replace(ro,V.toString())}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(ti,16))},P.\u0275pipe=f.Yjl({name:"i18nPlural",type:P,pure:!0,standalone:!0}),P})(),Os=(()=>{class P{transform(V,ue){if(null==V)return"";if("object"!=typeof ue||"string"!=typeof V)throw pr();return ue.hasOwnProperty(V)?ue[V]:ue.hasOwnProperty("other")?ue.other:""}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275pipe=f.Yjl({name:"i18nSelect",type:P,pure:!0,standalone:!0}),P})(),Gn=(()=>{class P{transform(V){return JSON.stringify(V,null,2)}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275pipe=f.Yjl({name:"json",type:P,pure:!1,standalone:!0}),P})(),Ks=(()=>{class P{constructor(V){this.differs=V,this.keyValues=[],this.compareFn=io}transform(V,ue=io){if(!V||!(V instanceof Map)&&"object"!=typeof V)return null;this.differ||(this.differ=this.differs.find(V).create());const we=this.differ.diff(V),pt=ue!==this.compareFn;return we&&(this.keyValues=[],we.forEachItem(Dt=>{this.keyValues.push(function mo(P,Q){return{key:P,value:Q}}(Dt.key,Dt.currentValue))})),(we||pt)&&(this.keyValues.sort(ue),this.compareFn=ue),this.keyValues}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.aQg,16))},P.\u0275pipe=f.Yjl({name:"keyvalue",type:P,pure:!1,standalone:!0}),P})();function io(P,Q){const V=P.key,ue=Q.key;if(V===ue)return 0;if(void 0===V)return 1;if(void 0===ue)return-1;if(null===V)return 1;if(null===ue)return-1;if("string"==typeof V&&"string"==typeof ue)return V<ue?-1:1;if("number"==typeof V&&"number"==typeof ue)return V-ue;if("boolean"==typeof V&&"boolean"==typeof ue)return V<ue?-1:1;const we=String(V),pt=String(ue);return we==pt?0:we<pt?-1:1}let bl=(()=>{class P{constructor(V){this._locale=V}transform(V,ue,we){if(!So(V))return null;we=we||this._locale;try{return function Xt(P,Q,V){return gt(P,On(si(Q,Pt.Decimal),pn(Q,Xe.MinusSign)),Q,Xe.Group,Xe.Decimal,V)}(Wi(V),we,ue)}catch(pt){throw pr()}}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.soG,16))},P.\u0275pipe=f.Yjl({name:"number",type:P,pure:!0,standalone:!0}),P})(),Bo=(()=>{class P{constructor(V){this._locale=V}transform(V,ue,we){if(!So(V))return null;we=we||this._locale;try{return function Nt(P,Q,V){return gt(P,On(si(Q,Pt.Percent),pn(Q,Xe.MinusSign)),Q,Xe.Group,Xe.Decimal,V,!0).replace(new RegExp("%","g"),pn(Q,Xe.PercentSign))}(Wi(V),we,ue)}catch(pt){throw pr()}}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.soG,16))},P.\u0275pipe=f.Yjl({name:"percent",type:P,pure:!0,standalone:!0}),P})(),To=(()=>{class P{constructor(V,ue="USD"){this._locale=V,this._defaultCurrencyCode=ue}transform(V,ue=this._defaultCurrencyCode,we="symbol",pt,Dt){if(!So(V))return null;Dt=Dt||this._locale,"boolean"==typeof we&&(we=we?"symbol":"code");let nn=ue||this._defaultCurrencyCode;"code"!==we&&(nn="symbol"===we||"symbol-narrow"===we?function Fi(P,Q,V="en"){const ue=function _t(P){return(0,f.cg1)(P)[f.wAp.Currencies]}(V)[P]||Ze[P]||[],we=ue[1];return"narrow"===Q&&"string"==typeof we?we:ue[0]||P}(nn,"symbol"===we?"wide":"narrow",Dt):we);try{return function nt(P,Q,V,ue,we){const Dt=On(si(Q,Pt.Currency),pn(Q,Xe.MinusSign));return Dt.minFrac=function wr(P){let Q;const V=Ze[P];return V&&(Q=V[2]),"number"==typeof Q?Q:qr}(ue),Dt.maxFrac=Dt.minFrac,gt(P,Dt,Q,Xe.CurrencyGroup,Xe.CurrencyDecimal,we).replace(Cr,V).replace(Cr,"").trim()}(Wi(V),Dt,nn,ue,pt)}catch(Xr){throw pr()}}}return P.\u0275fac=function(V){return new(V||P)(f.Y36(f.soG,16),f.Y36(f.EJc,16))},P.\u0275pipe=f.Yjl({name:"currency",type:P,pure:!0,standalone:!0}),P})();function So(P){return!(null==P||""===P||P!=P)}function Wi(P){if("string"==typeof P&&!isNaN(Number(P)-parseFloat(P)))return Number(P);if("number"!=typeof P)throw new Error(`${P} is not a number`);return P}let Sa=(()=>{class P{transform(V,ue,we){if(null==V)return null;if(!this.supports(V))throw pr();return V.slice(ue,we)}supports(V){return"string"==typeof V||Array.isArray(V)}}return P.\u0275fac=function(V){return new(V||P)},P.\u0275pipe=f.Yjl({name:"slice",type:P,pure:!1,standalone:!0}),P})(),Qi=(()=>{class P{}return P.\u0275fac=function(V){return new(V||P)},P.\u0275mod=f.oAB({type:P}),P.\u0275inj=f.cJS({}),P})();const as="browser";function jo(P){return P===as}let Ss=(()=>{class P{}return P.\u0275prov=(0,f.Yz7)({token:P,providedIn:"root",factory:()=>new kn((0,f.LFG)(ie),window)}),P})();class kn{constructor(Q,V){this.document=Q,this.window=V,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const V=function xs(P,Q){const V=P.getElementById(Q)||P.getElementsByName(Q)[0];if(V)return V;if("function"==typeof P.createTreeWalker&&P.body&&(P.body.createShadowRoot||P.body.attachShadow)){const ue=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let we=ue.currentNode;for(;we;){const pt=we.shadowRoot;if(pt){const Dt=pt.getElementById(Q)||pt.querySelector(`[name="${Q}"]`);if(Dt)return Dt}we=ue.nextNode()}}return null}(this.document,Q);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(Q){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=Q)}}scrollToElement(Q){const V=Q.getBoundingClientRect(),ue=V.left+this.window.pageXOffset,we=V.top+this.window.pageYOffset,pt=this.offset();this.window.scrollTo(ue-pt[0],we-pt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Q=Eo(this.window.history)||Eo(Object.getPrototypeOf(this.window.history));return!(!Q||!Q.writable&&!Q.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Eo(P){return Object.getOwnPropertyDescriptor(P,"scrollRestoration")}class Pr{}},529:(Se,ae,D)=>{D.d(ae,{Ed:()=>Oi,JF:()=>lr,LE:()=>ze,TP:()=>Kt,UA:()=>Xe,WM:()=>Z,Zn:()=>lt,eN:()=>At});var f=D(6895),I=D(4650),ee=D(9646),B=D(9751),q=D(4351),ie=D(9300),te=D(4004);class K{}class ne{}class Z{constructor(be){this.normalizedNames=new Map,this.lazyUpdate=null,be?this.lazyInit="string"==typeof be?()=>{this.headers=new Map,be.split("\n").forEach(Ne=>{const Ot=Ne.indexOf(":");if(Ot>0){const ge=Ne.slice(0,Ot),ve=ge.toLowerCase(),Ie=Ne.slice(Ot+1).trim();this.maybeSetNormalizedName(ge,ve),this.headers.has(ve)?this.headers.get(ve).push(Ie):this.headers.set(ve,[Ie])}})}:()=>{this.headers=new Map,Object.entries(be).forEach(([Ne,Ot])=>{let ge;if(ge="string"==typeof Ot?[Ot]:"number"==typeof Ot?[Ot.toString()]:Ot.map(ve=>ve.toString()),ge.length>0){const ve=Ne.toLowerCase();this.headers.set(ve,ge),this.maybeSetNormalizedName(Ne,ve)}})}:this.headers=new Map}has(be){return this.init(),this.headers.has(be.toLowerCase())}get(be){this.init();const Ne=this.headers.get(be.toLowerCase());return Ne&&Ne.length>0?Ne[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(be){return this.init(),this.headers.get(be.toLowerCase())||null}append(be,Ne){return this.clone({name:be,value:Ne,op:"a"})}set(be,Ne){return this.clone({name:be,value:Ne,op:"s"})}delete(be,Ne){return this.clone({name:be,value:Ne,op:"d"})}maybeSetNormalizedName(be,Ne){this.normalizedNames.has(Ne)||this.normalizedNames.set(Ne,be)}init(){this.lazyInit&&(this.lazyInit instanceof Z?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(be=>this.applyUpdate(be)),this.lazyUpdate=null))}copyFrom(be){be.init(),Array.from(be.headers.keys()).forEach(Ne=>{this.headers.set(Ne,be.headers.get(Ne)),this.normalizedNames.set(Ne,be.normalizedNames.get(Ne))})}clone(be){const Ne=new Z;return Ne.lazyInit=this.lazyInit&&this.lazyInit instanceof Z?this.lazyInit:this,Ne.lazyUpdate=(this.lazyUpdate||[]).concat([be]),Ne}applyUpdate(be){const Ne=be.name.toLowerCase();switch(be.op){case"a":case"s":let Ot=be.value;if("string"==typeof Ot&&(Ot=[Ot]),0===Ot.length)return;this.maybeSetNormalizedName(be.name,Ne);const ge=("a"===be.op?this.headers.get(Ne):void 0)||[];ge.push(...Ot),this.headers.set(Ne,ge);break;case"d":const ve=be.value;if(ve){let Ie=this.headers.get(Ne);if(!Ie)return;Ie=Ie.filter(ot=>-1===ve.indexOf(ot)),0===Ie.length?(this.headers.delete(Ne),this.normalizedNames.delete(Ne)):this.headers.set(Ne,Ie)}else this.headers.delete(Ne),this.normalizedNames.delete(Ne)}}forEach(be){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ne=>be(this.normalizedNames.get(Ne),this.headers.get(Ne)))}}class fe{encodeKey(be){return Qe(be)}encodeValue(be){return Qe(be)}decodeKey(be){return decodeURIComponent(be)}decodeValue(be){return decodeURIComponent(be)}}const Ge=/%(\d[a-f0-9])/gi,je={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Qe(Je){return encodeURIComponent(Je).replace(Ge,(be,Ne)=>je[Ne]??be)}function Be(Je){return`${Je}`}class ze{constructor(be={}){if(this.updates=null,this.cloneFrom=null,this.encoder=be.encoder||new fe,be.fromString){if(be.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Le(Je,be){const Ne=new Map;return Je.length>0&&Je.replace(/^\?/,"").split("&").forEach(ge=>{const ve=ge.indexOf("="),[Ie,ot]=-1==ve?[be.decodeKey(ge),""]:[be.decodeKey(ge.slice(0,ve)),be.decodeValue(ge.slice(ve+1))],ke=Ne.get(Ie)||[];ke.push(ot),Ne.set(Ie,ke)}),Ne}(be.fromString,this.encoder)}else be.fromObject?(this.map=new Map,Object.keys(be.fromObject).forEach(Ne=>{const Ot=be.fromObject[Ne],ge=Array.isArray(Ot)?Ot.map(Be):[Be(Ot)];this.map.set(Ne,ge)})):this.map=null}has(be){return this.init(),this.map.has(be)}get(be){this.init();const Ne=this.map.get(be);return Ne?Ne[0]:null}getAll(be){return this.init(),this.map.get(be)||null}keys(){return this.init(),Array.from(this.map.keys())}append(be,Ne){return this.clone({param:be,value:Ne,op:"a"})}appendAll(be){const Ne=[];return Object.keys(be).forEach(Ot=>{const ge=be[Ot];Array.isArray(ge)?ge.forEach(ve=>{Ne.push({param:Ot,value:ve,op:"a"})}):Ne.push({param:Ot,value:ge,op:"a"})}),this.clone(Ne)}set(be,Ne){return this.clone({param:be,value:Ne,op:"s"})}delete(be,Ne){return this.clone({param:be,value:Ne,op:"d"})}toString(){return this.init(),this.keys().map(be=>{const Ne=this.encoder.encodeKey(be);return this.map.get(be).map(Ot=>Ne+"="+this.encoder.encodeValue(Ot)).join("&")}).filter(be=>""!==be).join("&")}clone(be){const Ne=new ze({encoder:this.encoder});return Ne.cloneFrom=this.cloneFrom||this,Ne.updates=(this.updates||[]).concat(be),Ne}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(be=>this.map.set(be,this.cloneFrom.map.get(be))),this.updates.forEach(be=>{switch(be.op){case"a":case"s":const Ne=("a"===be.op?this.map.get(be.param):void 0)||[];Ne.push(Be(be.value)),this.map.set(be.param,Ne);break;case"d":if(void 0===be.value){this.map.delete(be.param);break}{let Ot=this.map.get(be.param)||[];const ge=Ot.indexOf(Be(be.value));-1!==ge&&Ot.splice(ge,1),Ot.length>0?this.map.set(be.param,Ot):this.map.delete(be.param)}}}),this.cloneFrom=this.updates=null)}}class it{constructor(){this.map=new Map}set(be,Ne){return this.map.set(be,Ne),this}get(be){return this.map.has(be)||this.map.set(be,be.defaultValue()),this.map.get(be)}delete(be){return this.map.delete(be),this}has(be){return this.map.has(be)}keys(){return this.map.keys()}}function xe(Je){return typeof ArrayBuffer<"u"&&Je instanceof ArrayBuffer}function Ct(Je){return typeof Blob<"u"&&Je instanceof Blob}function It(Je){return typeof FormData<"u"&&Je instanceof FormData}class Pt{constructor(be,Ne,Ot,ge){let ve;if(this.url=Ne,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=be.toUpperCase(),function Ue(Je){switch(Je){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||ge?(this.body=void 0!==Ot?Ot:null,ve=ge):ve=Ot,ve&&(this.reportProgress=!!ve.reportProgress,this.withCredentials=!!ve.withCredentials,ve.responseType&&(this.responseType=ve.responseType),ve.headers&&(this.headers=ve.headers),ve.context&&(this.context=ve.context),ve.params&&(this.params=ve.params)),this.headers||(this.headers=new Z),this.context||(this.context=new it),this.params){const Ie=this.params.toString();if(0===Ie.length)this.urlWithParams=Ne;else{const ot=Ne.indexOf("?");this.urlWithParams=Ne+(-1===ot?"?":ot<Ne.length-1?"&":"")+Ie}}else this.params=new ze,this.urlWithParams=Ne}serializeBody(){return null===this.body?null:xe(this.body)||Ct(this.body)||It(this.body)||function Ze(Je){return typeof URLSearchParams<"u"&&Je instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ze?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||It(this.body)?null:Ct(this.body)?this.body.type||null:xe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ze?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(be={}){const Ne=be.method||this.method,Ot=be.url||this.url,ge=be.responseType||this.responseType,ve=void 0!==be.body?be.body:this.body,Ie=void 0!==be.withCredentials?be.withCredentials:this.withCredentials,ot=void 0!==be.reportProgress?be.reportProgress:this.reportProgress;let ke=be.headers||this.headers,Ft=be.params||this.params;const Wt=be.context??this.context;return void 0!==be.setHeaders&&(ke=Object.keys(be.setHeaders).reduce((Re,Oe)=>Re.set(Oe,be.setHeaders[Oe]),ke)),be.setParams&&(Ft=Object.keys(be.setParams).reduce((Re,Oe)=>Re.set(Oe,be.setParams[Oe]),Ft)),new Pt(Ne,Ot,ve,{params:Ft,headers:ke,context:Wt,reportProgress:ot,responseType:ge,withCredentials:Ie})}}var St=(()=>((St=St||{})[St.Sent=0]="Sent",St[St.UploadProgress=1]="UploadProgress",St[St.ResponseHeader=2]="ResponseHeader",St[St.DownloadProgress=3]="DownloadProgress",St[St.Response=4]="Response",St[St.User=5]="User",St))();class rt{constructor(be,Ne=200,Ot="OK"){this.headers=be.headers||new Z,this.status=void 0!==be.status?be.status:Ne,this.statusText=be.statusText||Ot,this.url=be.url||null,this.ok=this.status>=200&&this.status<300}}class qe extends rt{constructor(be={}){super(be),this.type=St.ResponseHeader}clone(be={}){return new qe({headers:be.headers||this.headers,status:void 0!==be.status?be.status:this.status,statusText:be.statusText||this.statusText,url:be.url||this.url||void 0})}}class lt extends rt{constructor(be={}){super(be),this.type=St.Response,this.body=void 0!==be.body?be.body:null}clone(be={}){return new lt({body:void 0!==be.body?be.body:this.body,headers:be.headers||this.headers,status:void 0!==be.status?be.status:this.status,statusText:be.statusText||this.statusText,url:be.url||this.url||void 0})}}class Xe extends rt{constructor(be){super(be,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${be.url||"(unknown url)"}`:`Http failure response for ${be.url||"(unknown url)"}: ${be.status} ${be.statusText}`,this.error=be.error||null}}function vt(Je,be){return{body:be,headers:Je.headers,context:Je.context,observe:Je.observe,params:Je.params,reportProgress:Je.reportProgress,responseType:Je.responseType,withCredentials:Je.withCredentials}}let At=(()=>{class Je{constructor(Ne){this.handler=Ne}request(Ne,Ot,ge={}){let ve;if(Ne instanceof Pt)ve=Ne;else{let ke,Ft;ke=ge.headers instanceof Z?ge.headers:new Z(ge.headers),ge.params&&(Ft=ge.params instanceof ze?ge.params:new ze({fromObject:ge.params})),ve=new Pt(Ne,Ot,void 0!==ge.body?ge.body:null,{headers:ke,context:ge.context,params:Ft,reportProgress:ge.reportProgress,responseType:ge.responseType||"json",withCredentials:ge.withCredentials})}const Ie=(0,ee.of)(ve).pipe((0,q.b)(ke=>this.handler.handle(ke)));if(Ne instanceof Pt||"events"===ge.observe)return Ie;const ot=Ie.pipe((0,ie.h)(ke=>ke instanceof lt));switch(ge.observe||"body"){case"body":switch(ve.responseType){case"arraybuffer":return ot.pipe((0,te.U)(ke=>{if(null!==ke.body&&!(ke.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ke.body}));case"blob":return ot.pipe((0,te.U)(ke=>{if(null!==ke.body&&!(ke.body instanceof Blob))throw new Error("Response is not a Blob.");return ke.body}));case"text":return ot.pipe((0,te.U)(ke=>{if(null!==ke.body&&"string"!=typeof ke.body)throw new Error("Response is not a string.");return ke.body}));default:return ot.pipe((0,te.U)(ke=>ke.body))}case"response":return ot;default:throw new Error(`Unreachable: unhandled observe type ${ge.observe}}`)}}delete(Ne,Ot={}){return this.request("DELETE",Ne,Ot)}get(Ne,Ot={}){return this.request("GET",Ne,Ot)}head(Ne,Ot={}){return this.request("HEAD",Ne,Ot)}jsonp(Ne,Ot){return this.request("JSONP",Ne,{params:(new ze).append(Ot,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ne,Ot={}){return this.request("OPTIONS",Ne,Ot)}patch(Ne,Ot,ge={}){return this.request("PATCH",Ne,vt(ge,Ot))}post(Ne,Ot,ge={}){return this.request("POST",Ne,vt(ge,Ot))}put(Ne,Ot,ge={}){return this.request("PUT",Ne,vt(ge,Ot))}}return Je.\u0275fac=function(Ne){return new(Ne||Je)(I.LFG(K))},Je.\u0275prov=I.Yz7({token:Je,factory:Je.\u0275fac}),Je})();function gn(Je,be){return be(Je)}function rr(Je,be){return(Ne,Ot)=>be.intercept(Ne,{handle:ge=>Je(ge,Ot)})}const Kt=new I.OlP("HTTP_INTERCEPTORS"),Fn=new I.OlP("HTTP_INTERCEPTOR_FNS");function Cn(){let Je=null;return(be,Ne)=>(null===Je&&(Je=((0,I.f3M)(Kt,{optional:!0})??[]).reduceRight(rr,gn)),Je(be,Ne))}let Pn,ir=(()=>{class Je extends K{constructor(Ne,Ot){super(),this.backend=Ne,this.injector=Ot,this.chain=null}handle(Ne){if(null===this.chain){const Ot=Array.from(new Set(this.injector.get(Fn)));this.chain=Ot.reduceRight((ge,ve)=>function fn(Je,be,Ne){return(Ot,ge)=>Ne.runInContext(()=>be(Ot,ve=>Je(ve,ge)))}(ge,ve,this.injector),gn)}return this.chain(Ne,Ot=>this.backend.handle(Ot))}}return Je.\u0275fac=function(Ne){return new(Ne||Je)(I.LFG(ne),I.LFG(I.lqb))},Je.\u0275prov=I.Yz7({token:Je,factory:Je.\u0275fac}),Je})(),Kr=0;class Ve{}function _t(){return"object"==typeof window?window:{}}let kt=(()=>{class Je{constructor(Ne,Ot){this.callbackMap=Ne,this.document=Ot,this.resolvedPromise=Promise.resolve()}nextCallback(){return"ng_jsonp_callback_"+Kr++}handle(Ne){if("JSONP"!==Ne.method)throw new Error("JSONP requests must use JSONP request method.");if("json"!==Ne.responseType)throw new Error("JSONP requests must use Json response type.");if(Ne.headers.keys().length>0)throw new Error("JSONP requests do not support headers.");return new B.y(Ot=>{const ge=this.nextCallback(),ve=Ne.urlWithParams.replace(/=JSONP_CALLBACK(&|$)/,`=${ge}$1`),Ie=this.document.createElement("script");Ie.src=ve;let ot=null,ke=!1;this.callbackMap[ge]=Oe=>{delete this.callbackMap[ge],ot=Oe,ke=!0};const Ft=()=>{Ie.parentNode&&Ie.parentNode.removeChild(Ie),delete this.callbackMap[ge]};return Ie.addEventListener("load",Oe=>{this.resolvedPromise.then(()=>{Ft(),ke?(Ot.next(new lt({body:ot,status:200,statusText:"OK",url:ve})),Ot.complete()):Ot.error(new Xe({url:ve,status:0,statusText:"JSONP Error",error:new Error("JSONP injected script did not invoke callback.")}))})}),Ie.addEventListener("error",Oe=>{Ft(),Ot.error(new Xe({error:Oe,status:0,statusText:"JSONP Error",url:ve}))}),this.document.body.appendChild(Ie),Ot.next({type:St.Sent}),()=>{ke||this.removeListeners(Ie),Ft()}})}removeListeners(Ne){Pn||(Pn=this.document.implementation.createHTMLDocument()),Pn.adoptNode(Ne)}}return Je.\u0275fac=function(Ne){return new(Ne||Je)(I.LFG(Ve),I.LFG(f.K0))},Je.\u0275prov=I.Yz7({token:Je,factory:Je.\u0275fac}),Je})();function Vn(Je,be){return"JSONP"===Je.method?(0,I.f3M)(kt).handle(Je):be(Je)}const Fr=/^\)\]\}',?\n/;let dr=(()=>{class Je{constructor(Ne){this.xhrFactory=Ne}handle(Ne){if("JSONP"===Ne.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new B.y(Ot=>{const ge=this.xhrFactory.build();if(ge.open(Ne.method,Ne.urlWithParams),Ne.withCredentials&&(ge.withCredentials=!0),Ne.headers.forEach((he,Me)=>ge.setRequestHeader(he,Me.join(","))),Ne.headers.has("Accept")||ge.setRequestHeader("Accept","application/json, text/plain, */*"),!Ne.headers.has("Content-Type")){const he=Ne.detectContentTypeHeader();null!==he&&ge.setRequestHeader("Content-Type",he)}if(Ne.responseType){const he=Ne.responseType.toLowerCase();ge.responseType="json"!==he?he:"text"}const ve=Ne.serializeBody();let Ie=null;const ot=()=>{if(null!==Ie)return Ie;const he=ge.statusText||"OK",Me=new Z(ge.getAllResponseHeaders()),Ye=function is(Je){return"responseURL"in Je&&Je.responseURL?Je.responseURL:/^X-Request-URL:/m.test(Je.getAllResponseHeaders())?Je.getResponseHeader("X-Request-URL"):null}(ge)||Ne.url;return Ie=new qe({headers:Me,status:ge.status,statusText:he,url:Ye}),Ie},ke=()=>{let{headers:he,status:Me,statusText:Ye,url:Vt}=ot(),sn=null;204!==Me&&(sn=typeof ge.response>"u"?ge.responseText:ge.response),0===Me&&(Me=sn?200:0);let Xn=Me>=200&&Me<300;if("json"===Ne.responseType&&"string"==typeof sn){const Cr=sn;sn=sn.replace(Fr,"");try{sn=""!==sn?JSON.parse(sn):null}catch(Ti){sn=Cr,Xn&&(Xn=!1,sn={error:Ti,text:sn})}}Xn?(Ot.next(new lt({body:sn,headers:he,status:Me,statusText:Ye,url:Vt||void 0})),Ot.complete()):Ot.error(new Xe({error:sn,headers:he,status:Me,statusText:Ye,url:Vt||void 0}))},Ft=he=>{const{url:Me}=ot(),Ye=new Xe({error:he,status:ge.status||0,statusText:ge.statusText||"Unknown Error",url:Me||void 0});Ot.error(Ye)};let Wt=!1;const Re=he=>{Wt||(Ot.next(ot()),Wt=!0);let Me={type:St.DownloadProgress,loaded:he.loaded};he.lengthComputable&&(Me.total=he.total),"text"===Ne.responseType&&ge.responseText&&(Me.partialText=ge.responseText),Ot.next(Me)},Oe=he=>{let Me={type:St.UploadProgress,loaded:he.loaded};he.lengthComputable&&(Me.total=he.total),Ot.next(Me)};return ge.addEventListener("load",ke),ge.addEventListener("error",Ft),ge.addEventListener("timeout",Ft),ge.addEventListener("abort",Ft),Ne.reportProgress&&(ge.addEventListener("progress",Re),null!==ve&&ge.upload&&ge.upload.addEventListener("progress",Oe)),ge.send(ve),Ot.next({type:St.Sent}),()=>{ge.removeEventListener("error",Ft),ge.removeEventListener("abort",Ft),ge.removeEventListener("load",ke),ge.removeEventListener("timeout",Ft),Ne.reportProgress&&(ge.removeEventListener("progress",Re),null!==ve&&ge.upload&&ge.upload.removeEventListener("progress",Oe)),ge.readyState!==ge.DONE&&ge.abort()}})}}return Je.\u0275fac=function(Ne){return new(Ne||Je)(I.LFG(f.JF))},Je.\u0275prov=I.Yz7({token:Je,factory:Je.\u0275fac}),Je})();const cn=new I.OlP("XSRF_ENABLED"),qr=new I.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),br=new I.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Sn{}let Yn=(()=>{class Je{constructor(Ne,Ot,ge){this.doc=Ne,this.platform=Ot,this.cookieName=ge,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ne=this.doc.cookie||"";return Ne!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,f.Mx)(Ne,this.cookieName),this.lastCookieString=Ne),this.lastToken}}return Je.\u0275fac=function(Ne){return new(Ne||Je)(I.LFG(f.K0),I.LFG(I.Lbi),I.LFG(qr))},Je.\u0275prov=I.Yz7({token:Je,factory:Je.\u0275fac}),Je})();function hr(Je,be){const Ne=Je.url.toLowerCase();if(!(0,I.f3M)(cn)||"GET"===Je.method||"HEAD"===Je.method||Ne.startsWith("http://")||Ne.startsWith("https://"))return be(Je);const Ot=(0,I.f3M)(Sn).getToken(),ge=(0,I.f3M)(br);return null!=Ot&&!Je.headers.has(ge)&&(Je=Je.clone({headers:Je.headers.set(ge,Ot)})),be(Je)}var Zt=(()=>((Zt=Zt||{})[Zt.Interceptors=0]="Interceptors",Zt[Zt.LegacyInterceptors=1]="LegacyInterceptors",Zt[Zt.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Zt[Zt.NoXsrfProtection=3]="NoXsrfProtection",Zt[Zt.JsonpSupport=4]="JsonpSupport",Zt[Zt.RequestsMadeViaParent=5]="RequestsMadeViaParent",Zt))();function Qn(Je,be){return{\u0275kind:Je,\u0275providers:be}}function yi(...Je){const be=[At,dr,ir,{provide:K,useExisting:ir},{provide:ne,useExisting:dr},{provide:Fn,useValue:hr,multi:!0},{provide:cn,useValue:!0},{provide:Sn,useClass:Yn}];for(const Ne of Je)be.push(...Ne.\u0275providers);return(0,I.MR2)(be)}const gi=new I.OlP("LEGACY_INTERCEPTOR_FN");let lr=(()=>{class Je{}return Je.\u0275fac=function(Ne){return new(Ne||Je)},Je.\u0275mod=I.oAB({type:Je}),Je.\u0275inj=I.cJS({providers:[yi(Qn(Zt.LegacyInterceptors,[{provide:gi,useFactory:Cn},{provide:Fn,useExisting:gi,multi:!0}]))]}),Je})(),Oi=(()=>{class Je{}return Je.\u0275fac=function(Ne){return new(Ne||Je)},Je.\u0275mod=I.oAB({type:Je}),Je.\u0275inj=I.cJS({providers:[Qn(Zt.JsonpSupport,[kt,{provide:Ve,useFactory:_t},{provide:Fn,useValue:Vn,multi:!0}]).\u0275providers]}),Je})()},4650:(Se,ae,D)=>{D.d(ae,{$8M:()=>Ro,$WT:()=>ti,$Z:()=>od,AFp:()=>vE,ALo:()=>kv,AaK:()=>K,Akn:()=>Tl,AsE:()=>Om,B6R:()=>Cr,BQk:()=>yd,CHM:()=>zo,CRH:()=>Zv,CZH:()=>Xm,CqO:()=>ih,D6c:()=>IC,DdM:()=>Av,Dn7:()=>Bv,EJc:()=>UD,EiD:()=>Df,EpF:()=>Jh,F$t:()=>pm,F4k:()=>ef,FYo:()=>Nu,FiY:()=>Ia,G48:()=>sC,G7q:()=>jv,Gf:()=>Yv,GfV:()=>Tg,GkF:()=>Xh,Gpc:()=>le,Gre:()=>Gy,HOy:()=>ch,Hsn:()=>gm,IAx:()=>Gr,Ikx:()=>Wm,IyS:()=>hh,JOm:()=>No,JVY:()=>Gl,JZr:()=>Qe,Jf7:()=>Of,Jzz:()=>Qp,KtG:()=>Al,L6k:()=>Ch,LAX:()=>Ih,LFG:()=>lr,LMc:()=>TC,LSH:()=>Ou,Lbi:()=>ND,Lck:()=>k0,MAs:()=>th,MGl:()=>oh,MMx:()=>l_,MR2:()=>pg,MT6:()=>Lm,NdJ:()=>sh,O4$:()=>Ut,OlP:()=>Jr,Oqu:()=>Pm,P3R:()=>Tf,PXZ:()=>JD,PiD:()=>Nl,Q6J:()=>Rp,QGY:()=>rh,QbO:()=>LD,Qsj:()=>wg,R0b:()=>wu,RDi:()=>Rd,Rgc:()=>sg,SBq:()=>Du,Sil:()=>BD,Suo:()=>Qv,TTD:()=>gs,TgZ:()=>Zh,Tol:()=>Sm,Udp:()=>kc,VKq:()=>Mv,W1O:()=>eE,WLB:()=>Pv,X6Q:()=>iC,XFs:()=>cn,Xpm:()=>Xn,Xts:()=>zc,Y36:()=>ku,YKP:()=>vv,YNc:()=>Op,Yjl:()=>Zn,Yz7:()=>pn,Z0I:()=>Ve,ZZ4:()=>N_,_Bn:()=>_v,_UZ:()=>xp,_Vd:()=>Jc,_c5:()=>DC,_uU:()=>Dd,aQg:()=>L_,c2e:()=>FD,cJS:()=>Tt,cg1:()=>ph,d8E:()=>qp,dDg:()=>QD,dqk:()=>Yn,eBb:()=>Gc,eFA:()=>RE,eJc:()=>__,ekj:()=>cf,eoX:()=>AE,evT:()=>Mg,f3M:()=>ei,fQ9:()=>ln,g9A:()=>DE,gL8:()=>Cd,h0i:()=>pf,hGG:()=>CC,hij:()=>ju,iGM:()=>Kv,ifc:()=>ke,ip1:()=>_E,jDz:()=>Dv,kEZ:()=>Ov,kL8:()=>Jy,kcU:()=>ea,lG2:()=>On,lcZ:()=>Uv,lnq:()=>Rm,lqb:()=>Dc,lri:()=>SE,mCW:()=>v,n5z:()=>dl,oAB:()=>nt,oJD:()=>Xu,oxw:()=>Nc,pB0:()=>lg,q3G:()=>Vs,q4F:()=>Sg,qLn:()=>Ud,qOj:()=>Ep,qZA:()=>qh,qzn:()=>gc,rWj:()=>bE,s9C:()=>kp,sBO:()=>oC,s_b:()=>Qm,soG:()=>Jm,tBr:()=>ml,tb:()=>PE,tp0:()=>aa,uIk:()=>Ap,uOi:()=>_c,vHH:()=>Be,vpe:()=>lc,wAp:()=>Jn,xi3:()=>Vv,xp6:()=>kg,ynx:()=>nh,z2F:()=>ey,z3N:()=>Us,zSh:()=>Th,zs3:()=>Fu});var f=D(7579),I=D(727),ee=D(9751),B=D(6451),q=D(3099);function ie(n){for(let r in n)if(n[r]===ie)return r;throw Error("Could not find renamed property on target object.")}function te(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function K(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(K).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function ne(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const Z=ie({__forward_ref__:ie});function le(n){return n.__forward_ref__=le,n.toString=function(){return K(this())},n}function fe(n){return Le(n)?n():n}function Le(n){return"function"==typeof n&&n.hasOwnProperty(Z)&&n.__forward_ref__===le}function Ge(n){return n&&!!n.\u0275providers}const Qe="https://g.co/ng/security#xss";class Be extends Error{constructor(r,s){super(ze(r,s)),this.code=r}}function ze(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}function Ke(n){return"string"==typeof n?n:null==n?"":String(n)}function It(n,r){throw new Be(-201,!1)}function Fn(n,r){null==n&&function Cn(n,r,s,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function pn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function dt(n){return _t(n,qn)||_t(n,is)}function Ve(n){return null!==dt(n)}function _t(n,r){return n.hasOwnProperty(r)?n[r]:null}function Vn(n){return n&&(n.hasOwnProperty(Fr)||n.hasOwnProperty(dr))?n[Fr]:null}const qn=ie({\u0275prov:ie}),Fr=ie({\u0275inj:ie}),is=ie({ngInjectableDef:ie}),dr=ie({ngInjectorDef:ie});var cn=(()=>((cn=cn||{})[cn.Default=0]="Default",cn[cn.Host=1]="Host",cn[cn.Self=2]="Self",cn[cn.SkipSelf=4]="SkipSelf",cn[cn.Optional=8]="Optional",cn))();let Fi;function wr(n){const r=Fi;return Fi=n,r}function br(n,r,s){const a=dt(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&cn.Optional?null:void 0!==r?r:void It(K(n))}const Yn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Qn={},yi="__NG_DI_FLAG__",Vr="ngTempTokenPath",gi="ngTokenPath",Br=/\n/gm,di="\u0275",vr="__source";let ki;function $n(n){const r=ki;return ki=n,r}function ss(n,r=cn.Default){if(void 0===ki)throw new Be(-203,!1);return null===ki?br(n,void 0,r):ki.get(n,r&cn.Optional?null:void 0,r)}function lr(n,r=cn.Default){return(function qr(){return Fi}()||ss)(fe(n),r)}function ei(n,r=cn.Default){return lr(n,Je(r))}function Je(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function be(n){const r=[];for(let s=0;s<n.length;s++){const a=fe(n[s]);if(Array.isArray(a)){if(0===a.length)throw new Be(900,!1);let d,m=cn.Default;for(let S=0;S<a.length;S++){const x=a[S],U=Ot(x);"number"==typeof U?-1===U?d=x.token:m|=U:d=x}r.push(lr(d,m))}else r.push(lr(a))}return r}function Ne(n,r){return n[yi]=r,n.prototype[yi]=r,n}function Ot(n){return n[yi]}function Ie(n){return{toString:n}.toString()}var ot=(()=>((ot=ot||{})[ot.OnPush=0]="OnPush",ot[ot.Default=1]="Default",ot))(),ke=(()=>{return(n=ke||(ke={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ke;var n})();const Ft={},Wt=[],Re=ie({\u0275cmp:ie}),Oe=ie({\u0275dir:ie}),he=ie({\u0275pipe:ie}),Me=ie({\u0275mod:ie}),Ye=ie({\u0275fac:ie}),Vt=ie({__NG_ELEMENT_ID__:ie});let sn=0;function Xn(n){return Ie(()=>{const r=Ms(n),s={...r,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ot.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||ke.Emulated,id:"c"+sn++,styles:n.styles||Wt,_:null,schemas:n.schemas||null,tView:null};Ui(s);const a=n.dependencies;return s.directiveDefs=os(a,!1),s.pipeDefs=os(a,!0),s})}function Cr(n,r,s){const a=n.\u0275cmp;a.directiveDefs=os(r,!1),a.pipeDefs=os(s,!0)}function Ti(n){return hn(n)||fr(n)}function gt(n){return null!==n}function nt(n){return Ie(()=>({type:n.type,bootstrap:n.bootstrap||Wt,declarations:n.declarations||Wt,imports:n.imports||Wt,exports:n.exports||Wt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Xt(n,r){if(null==n)return Ft;const s={};for(const a in n)if(n.hasOwnProperty(a)){let d=n[a],m=d;Array.isArray(d)&&(m=d[1],d=d[0]),s[d]=a,r&&(r[d]=m)}return s}function On(n){return Ie(()=>{const r=Ms(n);return Ui(r),r})}function Zn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function hn(n){return n[Re]||null}function fr(n){return n[Oe]||null}function tr(n){return n[he]||null}function ti(n){const r=hn(n)||fr(n)||tr(n);return null!==r&&r.standalone}function ni(n,r){const s=n[Me]||null;if(!s&&!0===r)throw new Error(`Type ${K(n)} does not have '\u0275mod' property.`);return s}function Ms(n){const r={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Wt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Xt(n.inputs,r),outputs:Xt(n.outputs)}}function Ui(n){n.features?.forEach(r=>r(n))}function os(n,r){if(!n)return null;const s=r?tr:Ti;return()=>("function"==typeof n?n():n).map(a=>s(a)).filter(gt)}const jr=0,Bt=1,bn=2,mn=3,An=4,In=5,er=6,yr=7,Ar=8,oi=9,_i=10,xn=11,Er=12,Nn=13,Yr=14,Ts=15,De=16,at=17,We=18,mt=19,Ht=20,zt=21,Jt=22,ur=1,hi=2,Dr=7,Mr=8,Si=9,ri=10;function ii(n){return Array.isArray(n)&&"object"==typeof n[ur]}function wn(n){return Array.isArray(n)&&!0===n[ur]}function Ps(n){return 0!=(4&n.flags)}function zs(n){return n.componentOffset>-1}function Gi(n){return 1==(1&n.flags)}function sr(n){return!!n.template}function ro(n){return 0!=(256&n[bn])}function oo(n,r){return n.hasOwnProperty(Ye)?n[Ye]:null}class vo{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function gs(){return Ss}function Ss(n){return n.type.prototype.ngOnChanges&&(n.setInput=Eo),kn}function kn(){const n=Ba(this),r=n?.current;if(r){const s=n.previous;if(s===Ft)n.previous=r;else for(let a in r)s[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Eo(n,r,s,a){const d=this.declaredInputs[s],m=Ba(n)||function Pr(n,r){return n[xs]=r}(n,{previous:Ft,current:null}),S=m.current||(m.current={}),x=m.previous,U=x[d];S[d]=new vo(U&&U.currentValue,r,x===Ft),n[a]=r}gs.ngInherit=!0;const xs="__ngSimpleChanges__";function Ba(n){return n[xs]||null}const vi=function(n,r,s){},ao="svg";function $r(n){for(;Array.isArray(n);)n=n[jr];return n}function $o(n,r){return $r(r[n])}function Ei(n,r){return $r(r[n.index])}function Go(n,r){return n.data[r]}function Tr(n,r){return n[r]}function qi(n,r){const s=r[n];return ii(s)?s:s[jr]}function Ns(n){return 64==(64&n[bn])}function Ys(n,r){return null==r?null:n[r]}function ja(n){n[We]=0}function Ao(n,r){n[In]+=r;let s=n,a=n[mn];for(;null!==a&&(1===r&&1===s[In]||-1===r&&0===s[In]);)a[In]+=r,s=a,a=a[mn]}const Un={lFrame:$a(null),bindingsEnabled:!0};function et(){return Un.bindingsEnabled}function ln(){Un.bindingsEnabled=!0}function Gr(){Un.bindingsEnabled=!1}function yt(){return Un.lFrame.lView}function cr(){return Un.lFrame.tView}function zo(n){return Un.lFrame.contextLView=n,n[Ar]}function Al(n){return Un.lFrame.contextLView=null,n}function zi(){let n=Ha();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ha(){return Un.lFrame.currentTNode}function Bs(n,r){const s=Un.lFrame;s.currentTNode=n,s.isParent=r}function Mo(){return Un.lFrame.isParent}function Ko(){Un.lFrame.isParent=!1}function xi(){const n=Un.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function ai(){return Un.lFrame.bindingIndex}function Qo(){return Un.lFrame.bindingIndex++}function ys(n){const r=Un.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}function Bi(n,r){const s=Un.lFrame;s.bindingIndex=s.bindingRootIndex=n,lo(r)}function lo(n){Un.lFrame.currentDirectiveIndex=n}function Xi(n){const r=Un.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}function qo(){return Un.lFrame.currentQueryIndex}function qa(n){Un.lFrame.currentQueryIndex=n}function Ml(n){const r=n[Bt];return 2===r.type?r.declTNode:1===r.type?n[er]:null}function li(n,r,s){if(s&cn.SkipSelf){let d=r,m=n;for(;!(d=d.parent,null!==d||s&cn.Host||(d=Ml(m),null===d||(m=m[Ts],10&d.type))););if(null===d)return!1;r=d,n=m}const a=Un.lFrame=Xo();return a.currentTNode=r,a.lView=n,!0}function js(n){const r=Xo(),s=n[Bt];Un.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Xo(){const n=Un.lFrame,r=null===n?null:n.child;return null===r?$a(n):r}function $a(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function Ga(){const n=Un.lFrame;return Un.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Xa=Ga;function Jo(){const n=Ga();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Di(){return Un.lFrame.selectedIndex}function _s(n){Un.lFrame.selectedIndex=n}function Qr(){const n=Un.lFrame;return Go(n.tView,n.selectedIndex)}function Ut(){Un.lFrame.currentNamespace=ao}function ea(){!function Pl(){Un.lFrame.currentNamespace=null}()}function ll(n,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const m=n.data[s].type.prototype,{ngAfterContentInit:S,ngAfterContentChecked:x,ngAfterViewInit:U,ngAfterViewChecked:X,ngOnDestroy:de}=m;S&&(n.contentHooks??(n.contentHooks=[])).push(-s,S),x&&((n.contentHooks??(n.contentHooks=[])).push(s,x),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(s,x)),U&&(n.viewHooks??(n.viewHooks=[])).push(-s,U),X&&((n.viewHooks??(n.viewHooks=[])).push(s,X),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(s,X)),null!=de&&(n.destroyHooks??(n.destroyHooks=[])).push(s,de)}}function en(n,r,s){Q(n,r,3,s)}function ft(n,r,s,a){(3&n[bn])===s&&Q(n,r,s,a)}function P(n,r){let s=n[bn];(3&s)===r&&(s&=2047,s+=1,n[bn]=s)}function Q(n,r,s,a){const m=a??-1,S=r.length-1;let x=0;for(let U=void 0!==a?65535&n[We]:0;U<S;U++)if("number"==typeof r[U+1]){if(x=r[U],null!=a&&x>=a)break}else r[U]<0&&(n[We]+=65536),(x<m||-1==m)&&(V(n,s,r,U),n[We]=(4294901760&n[We])+U+2),U++}function V(n,r,s,a){const d=s[a]<0,m=s[a+1],x=n[d?-s[a]:s[a]];if(d){if(n[bn]>>11<n[We]>>16&&(3&n[bn])===r){n[bn]+=2048,vi(4,x,m);try{m.call(x)}finally{vi(5,x,m)}}}else{vi(4,x,m);try{m.call(x)}finally{vi(5,x,m)}}}const ue=-1;class we{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function on(n,r,s){let a=0;for(;a<s.length;){const d=s[a];if("number"==typeof d){if(0!==d)break;a++;const m=s[a++],S=s[a++],x=s[a++];n.setAttribute(r,S,x,m)}else{const m=d,S=s[++a];uo(m)?n.setProperty(r,m,S):n.setAttribute(r,m,S),a++}}return a}function kr(n){return 3===n||4===n||6===n}function uo(n){return 64===n.charCodeAt(0)}function mr(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const d=r[a];"number"==typeof d?s=d:0===s||vn(n,s,d,null,-1===s||2===s?r[++a]:null)}}return n}function vn(n,r,s,a,d){let m=0,S=n.length;if(-1===r)S=-1;else for(;m<n.length;){const x=n[m++];if("number"==typeof x){if(x===r){S=-1;break}if(x>r){S=m-1;break}}}for(;m<n.length;){const x=n[m];if("number"==typeof x)break;if(x===s){if(null===a)return void(null!==d&&(n[m+1]=d));if(a===n[m+1])return void(n[m+2]=d)}m++,null!==a&&m++,null!==d&&m++}-1!==S&&(n.splice(S,0,r),m=S+1),n.splice(m++,0,s),null!==a&&n.splice(m++,0,a),null!==d&&n.splice(m++,0,d)}function es(n){return n!==ue}function jn(n){return 32767&n}function Lr(n,r){let s=function ta(n){return n>>16}(n),a=r;for(;s>0;)a=a[Ts],s--;return a}let Yt=!0;function co(n){const r=Yt;return Yt=n,r}const na=255,va=5;let vs=0;const ho={};function Ma(n,r){const s=Hs(n,r);if(-1!==s)return s;const a=r[Bt];a.firstCreatePass&&(n.injectorIndex=r.length,ul(a.data,n),ul(r,null),ul(a.blueprint,null));const d=Ol(n,r),m=n.injectorIndex;if(es(d)){const S=jn(d),x=Lr(d,r),U=x[Bt].data;for(let X=0;X<8;X++)r[m+X]=x[S+X]|U[S+X]}return r[m+8]=d,m}function ul(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Hs(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Ol(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,a=null,d=r;for(;null!==d;){if(a=Fs(d),null===a)return ue;if(s++,d=d[Ts],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return ue}function ou(n,r,s){!function ra(n,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Vt)&&(a=s[Vt]),null==a&&(a=s[Vt]=vs++);const d=a&na;r.data[n+(d>>va)]|=1<<d}(n,r,s)}function Po(n,r,s){if(s&cn.Optional||void 0!==n)return n;It()}function Ja(n,r,s,a){if(s&cn.Optional&&void 0===a&&(a=null),!(s&(cn.Self|cn.Host))){const d=n[oi],m=wr(void 0);try{return d?d.get(r,a,s&cn.Optional):br(r,a,s&cn.Optional)}finally{wr(m)}}return Po(a,0,s)}function st(n,r,s,a=cn.Default,d){if(null!==n){if(1024&r[bn]){const S=function Ls(n,r,s,a,d){let m=n,S=r;for(;null!==m&&null!==S&&1024&S[bn]&&!(256&S[bn]);){const x=Pa(m,S,s,a|cn.Self,ho);if(x!==ho)return x;let U=m.parent;if(!U){const X=S[zt];if(X){const de=X.get(s,ho,a);if(de!==ho)return de}U=Fs(S),S=S[Ts]}m=U}return d}(n,r,s,a,ho);if(S!==ho)return S}const m=Pa(n,r,s,a,ho);if(m!==ho)return m}return Ja(r,s,a,d)}function Pa(n,r,s,a,d){const m=function Es(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Vt)?n[Vt]:void 0;return"number"==typeof r?r>=0?r&na:Ql:r}(s);if("function"==typeof m){if(!li(r,n,a))return a&cn.Host?Po(d,0,a):Ja(r,s,a,d);try{const S=m(a);if(null!=S||a&cn.Optional)return S;It()}finally{Xa()}}else if("number"==typeof m){let S=null,x=Hs(n,r),U=ue,X=a&cn.Host?r[De][er]:null;for((-1===x||a&cn.SkipSelf)&&(U=-1===x?Ol(n,r):r[x+8],U!==ue&&Oo(a,!1)?(S=r[Bt],x=jn(U),r=Lr(U,r)):x=-1);-1!==x;){const de=r[Bt];if(cl(m,x,de.data)){const Ce=bs(x,r,s,S,a,X);if(Ce!==ho)return Ce}U=r[x+8],U!==ue&&Oo(a,r[Bt].data[x+8]===X)&&cl(m,x,r)?(S=de,x=jn(U),r=Lr(U,r)):x=-1}}return d}function bs(n,r,s,a,d,m){const S=r[Bt],x=S.data[n+8],de=Rl(x,S,s,null==a?zs(x)&&Yt:a!=S&&0!=(3&x.type),d&cn.Host&&m===x);return null!==de?ts(r,S,de,x):ho}function Rl(n,r,s,a,d){const m=n.providerIndexes,S=r.data,x=1048575&m,U=n.directiveStart,de=m>>20,$e=d?x+de:n.directiveEnd;for(let ct=a?x:x+de;ct<$e;ct++){const Mt=S[ct];if(ct<U&&s===Mt||ct>=U&&Mt.type===s)return ct}if(d){const ct=S[U];if(ct&&sr(ct)&&ct.type===s)return U}return null}function ts(n,r,s,a){let d=n[s];const m=r.data;if(function pt(n){return n instanceof we}(d)){const S=d;S.resolving&&function Ue(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Be(-200,`Circular dependency in DI detected for ${n}${s}`)}(function it(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ke(n)}(m[s]));const x=co(S.canSeeViewProviders);S.resolving=!0;const U=S.injectImpl?wr(S.injectImpl):null;li(n,a,cn.Default);try{d=n[s]=S.factory(void 0,m,n,a),r.firstCreatePass&&s>=a.directiveStart&&function Tn(n,r,s){const{ngOnChanges:a,ngOnInit:d,ngDoCheck:m}=r.type.prototype;if(a){const S=Ss(r);(s.preOrderHooks??(s.preOrderHooks=[])).push(n,S),(s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(n,S)}d&&(s.preOrderHooks??(s.preOrderHooks=[])).push(0-n,d),m&&((s.preOrderHooks??(s.preOrderHooks=[])).push(n,m),(s.preOrderCheckHooks??(s.preOrderCheckHooks=[])).push(n,m))}(s,m[s],r)}finally{null!==U&&wr(U),co(x),S.resolving=!1,Xa()}}return d}function cl(n,r,s){return!!(s[r+(n>>va)]&1<<n)}function Oo(n,r){return!(n&cn.Self||n&cn.Host&&r)}class el{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return st(this._tNode,this._lView,r,Je(a),s)}}function Ql(){return new el(zi(),yt())}function dl(n){return Ie(()=>{const r=n.prototype.constructor,s=r[Ye]||Wa(r),a=Object.prototype;let d=Object.getPrototypeOf(n.prototype).constructor;for(;d&&d!==a;){const m=d[Ye]||Wa(d);if(m&&m!==s)return m;d=Object.getPrototypeOf(d)}return m=>new m})}function Wa(n){return Le(n)?()=>{const r=Wa(fe(n));return r&&r()}:oo(n)}function Fs(n){const r=n[Bt],s=r.type;return 2===s?r.declTNode:1===s?n[er]:null}function Ro(n){return function au(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const a=s.length;let d=0;for(;d<a;){const m=s[d];if(kr(m))break;if(0===m)d+=2;else if("number"==typeof m)for(d++;d<a&&"string"==typeof s[d];)d++;else{if(m===r)return s[d+1];d+=2}}}return null}(zi(),n)}const qs="__parameters__";function Ea(n,r,s){return Ie(()=>{const a=function Oa(n){return function(...s){if(n){const a=n(...s);for(const d in a)this[d]=a[d]}}}(r);function d(...m){if(this instanceof d)return a.apply(this,m),this;const S=new d(...m);return x.annotation=S,x;function x(U,X,de){const Ce=U.hasOwnProperty(qs)?U[qs]:Object.defineProperty(U,qs,{value:[]})[qs];for(;Ce.length<=de;)Ce.push(null);return(Ce[de]=Ce[de]||[]).push(S),U}}return s&&(d.prototype=Object.create(s.prototype)),d.prototype.ngMetadataName=n,d.annotationCls=d,d})}class Jr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=pn({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function W(n,r){n.forEach(s=>Array.isArray(s)?W(s,r):r(s))}function oe(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function pe(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function He(n,r){const s=[];for(let a=0;a<n;a++)s.push(r);return s}function Ur(n,r,s){let a=fi(n,r);return a>=0?n[1|a]=s:(a=~a,function un(n,r,s,a){let d=n.length;if(d==r)n.push(s,a);else if(1===d)n.push(a,n[0]),n[0]=s;else{for(d--,n.push(n[d-1],n[d]);d>r;)n[d]=n[d-2],d--;n[r]=s,n[r+1]=a}}(n,a,r,s)),a}function Ds(n,r){const s=fi(n,r);if(s>=0)return n[1|s]}function fi(n,r){return function ji(n,r,s){let a=0,d=n.length>>s;for(;d!==a;){const m=a+(d-a>>1),S=n[m<<s];if(r===S)return m<<s;S>r?d=m:a=m+1}return~(d<<s)}(n,r,1)}const ml=Ne(Ea("Inject",n=>({token:n})),-1),Ia=Ne(Ea("Optional"),8),Nl=Ne(Ea("Self"),2),aa=Ne(Ea("SkipSelf"),4);var No=(()=>((No=No||{})[No.Important=1]="Important",No[No.DashCase=2]="DashCase",No))();const Su=new Map;let gu=0;const Fo="__ngContext__";function ns(n,r){ii(r)?(n[Fo]=r[Ht],function Au(n){Su.set(n[Ht],n)}(r)):n[Fo]=r}let E;function _(n,r){return E(n,r)}function b(n){const r=n[mn];return wn(r)?r[mn]:r}function Ee(n){return tt(n[Nn])}function Te(n){return tt(n[An])}function tt(n){for(;null!==n&&!wn(n);)n=n[An];return n}function ht(n,r,s,a,d){if(null!=a){let m,S=!1;wn(a)?m=a:ii(a)&&(S=!0,a=a[jr]);const x=$r(a);0===n&&null!==s?null==d?ko(r,s,x):ca(r,s,x,d||null,!0):1===n&&null!==s?ca(r,s,x,d||null,!0):2===n?function Cl(n,r,s){const a=Bn(n,r);a&&function Mu(n,r,s,a){n.removeChild(r,s,a)}(n,a,r,s)}(r,x,S):3===n&&r.destroyNode(x),null!=m&&function cc(n,r,s,a,d){const m=s[Dr];m!==$r(s)&&ht(r,n,a,m,d);for(let x=ri;x<s.length;x++){const U=s[x];Li(U[Bt],U,n,r,a,m)}}(r,n,m,s,d)}}function Gt(n,r,s){return n.createElement(r,s)}function rs(n,r){const s=n[Si],a=s.indexOf(r),d=r[mn];512&r[bn]&&(r[bn]&=-513,Ao(d,-1)),s.splice(a,1)}function vl(n,r){if(n.length<=ri)return;const s=ri+r,a=n[s];if(a){const d=a[at];null!==d&&d!==n&&rs(d,a),r>0&&(n[s-1][An]=a[An]);const m=pe(n,ri+r);!function an(n,r){Li(n,r,r[xn],2,null,null),r[jr]=null,r[er]=null}(a[Bt],a);const S=m[mt];null!==S&&S.detachView(m[Bt]),a[mn]=null,a[An]=null,a[bn]&=-65}return a}function Is(n,r){if(!(128&r[bn])){const s=r[xn];s.destroyNode&&Li(n,r,s,3,null,null),function Mi(n){let r=n[Nn];if(!r)return po(n[Bt],n);for(;r;){let s=null;if(ii(r))s=r[Nn];else{const a=r[ri];a&&(s=a)}if(!s){for(;r&&!r[An]&&r!==n;)ii(r)&&po(r[Bt],r),r=r[mn];null===r&&(r=n),ii(r)&&po(r[Bt],r),s=r&&r[An]}r=s}}(r)}}function po(n,r){if(!(128&r[bn])){r[bn]&=-65,r[bn]|=128,function El(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let a=0;a<s.length;a+=2){const d=r[s[a]];if(!(d instanceof we)){const m=s[a+1];if(Array.isArray(m))for(let S=0;S<m.length;S+=2){const x=d[m[S]],U=m[S+1];vi(4,x,U);try{U.call(x)}finally{vi(5,x,U)}}else{vi(4,d,m);try{m.call(d)}finally{vi(5,d,m)}}}}}(n,r),function Ua(n,r){const s=n.cleanup,a=r[yr];let d=-1;if(null!==s)for(let m=0;m<s.length-1;m+=2)if("string"==typeof s[m]){const S=s[m+3];S>=0?a[d=S]():a[d=-S].unsubscribe(),m+=2}else{const S=a[d=s[m+1]];s[m].call(S)}if(null!==a){for(let m=d+1;m<a.length;m++)(0,a[m])();r[yr]=null}}(n,r),1===r[Bt].type&&r[xn].destroy();const s=r[at];if(null!==s&&wn(r[mn])){s!==r[mn]&&rs(s,r);const a=r[mt];null!==a&&a.detachView(n)}!function Yu(n){Su.delete(n[Ht])}(r)}}function al(n,r,s){return function ar(n,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[jr];{const{componentOffset:d}=a;if(d>-1){const{encapsulation:m}=n.data[a.directiveStart+d];if(m===ke.None||m===ke.Emulated)return null}return Ei(a,s)}}(n,r.parent,s)}function ca(n,r,s,a,d){n.insertBefore(r,s,a,d)}function ko(n,r,s){n.appendChild(r,s)}function $l(n,r,s,a,d){null!==a?ca(n,r,s,a,d):ko(n,r,s)}function Bn(n,r){return n.parentNode(r)}function Zr(n,r,s){return wa(n,r,s)}let Uo,jc,dc,hc,wa=function Js(n,r,s){return 40&n.type?Ei(n,s):null};function Yi(n,r,s,a){const d=al(n,a,r),m=r[xn],x=Zr(a.parent||r[er],a,r);if(null!=d)if(Array.isArray(s))for(let U=0;U<s.length;U++)$l(m,d,s[U],x,!1);else $l(m,d,s,x,!1);void 0!==Uo&&Uo(m,a,r,s,d)}function yu(n,r){if(null!==r){const s=r.type;if(3&s)return Ei(r,n);if(4&s)return hs(-1,n[r.index]);if(8&s){const a=r.child;if(null!==a)return yu(n,a);{const d=n[r.index];return wn(d)?hs(-1,d):$r(d)}}if(32&s)return _(r,n)()||$r(n[r.index]);{const a=Ad(n,r);return null!==a?Array.isArray(a)?a[0]:yu(b(n[De]),a):yu(n,r.next)}}return null}function Ad(n,r){return null!==r?n[De][er].projection[r.projection]:null}function hs(n,r){const s=ri+n+1;if(s<r.length){const a=r[s],d=a[Bt].firstChild;if(null!==d)return yu(a,d)}return r[Dr]}function da(n,r,s,a,d,m,S){for(;null!=s;){const x=a[s.index],U=s.type;if(S&&0===r&&(x&&ns($r(x),a),s.flags|=2),32!=(32&s.flags))if(8&U)da(n,r,s.child,a,d,m,!1),ht(r,n,d,x,m);else if(32&U){const X=_(s,a);let de;for(;de=X();)ht(r,n,d,de,m);ht(r,n,d,x,m)}else 16&U?mh(n,r,a,s,d,m):ht(r,n,d,x,m);s=S?s.projectionNext:s.next}}function Li(n,r,s,a,d,m){da(s,a,n.firstChild,r,d,m,!1)}function mh(n,r,s,a,d,m){const S=s[De],U=S[er].projection[a.projection];if(Array.isArray(U))for(let X=0;X<U.length;X++)ht(r,n,d,U[X],m);else da(n,r,U,S[mn],d,m,!0)}function yh(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function Zu(n,r,s){const{mergedAttrs:a,classes:d,styles:m}=s;null!==a&&on(n,r,a),null!==d&&yh(n,r,d),null!==m&&function Md(n,r,s){n.setAttribute(r,"style",s)}(n,r,m)}function qu(n){return function Hc(){if(void 0===jc&&(jc=null,Yn.trustedTypes))try{jc=Yn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return jc}()?.createHTML(n)||n}function Rd(n){dc=n}function xd(){if(void 0===hc&&(hc=null,Yn.trustedTypes))try{hc=Yn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return hc}function Nd(n){return xd()?.createHTML(n)||n}function vh(n){return xd()?.createScriptURL(n)||n}class _u{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qe})`}}class fc extends _u{getTypeName(){return"HTML"}}class pc extends _u{getTypeName(){return"Style"}}class Eh extends _u{getTypeName(){return"Script"}}class _f extends _u{getTypeName(){return"URL"}}class vf extends _u{getTypeName(){return"ResourceURL"}}function Us(n){return n instanceof _u?n.changingThisBreaksApplicationSecurity:n}function gc(n,r){const s=function Dh(n){return n instanceof _u&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Qe})`)}return s===r}function Gl(n){return new fc(n)}function Ch(n){return new pc(n)}function Gc(n){return new Eh(n)}function Ih(n){return new _f(n)}function lg(n){return new vf(n)}class ug{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(qu(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class h{constructor(r){this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(r){const s=this.inertDocument.createElement("template");return s.innerHTML=qu(r),s}}const c=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function v(n){return(n=String(n)).match(c)?n:"unsafe:"+n}function M(n){const r={};for(const s of n.split(","))r[s]=!0;return r}function j(...n){const r={};for(const s of n)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const Y=M("area,br,col,hr,img,wbr"),me=M("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ae=M("rp,rt"),Rt=j(Y,j(me,M("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),j(Ae,M("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),j(Ae,me)),En=M("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wo=j(En,M("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),M("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vu=M("script,style,template");class Ws{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let d=this.checkClobberedElement(s,s.nextSibling);if(d){s=d;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!Rt.hasOwnProperty(s))return this.sanitizedSomething=!0,!vu.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let d=0;d<a.length;d++){const m=a.item(d),S=m.name,x=S.toLowerCase();if(!wo.hasOwnProperty(x)){this.sanitizedSomething=!0;continue}let U=m.value;En[x]&&(U=v(U)),this.buf.push(" ",S,'="',wh(U),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();Rt.hasOwnProperty(s)&&!Y.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(wh(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const mc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ld=/([^\#-~ |!])/g;function wh(n){return n.replace(/&/g,"&amp;").replace(mc,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Ld,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ru;function Df(n,r){let s=null;try{ru=ru||function Ef(n){const r=new h(n);return function u(){try{return!!(new window.DOMParser).parseFromString(qu(""),"text/html")}catch{return!1}}()?new ug(r):r}(n);let a=r?String(r):"";s=ru.getInertBodyElement(a);let d=5,m=a;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,a=m,m=s.innerHTML,s=ru.getInertBodyElement(a)}while(a!==m);return qu((new Ws).sanitizeChildren(Cf(s)||s))}finally{if(s){const a=Cf(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function Cf(n){return"content"in n&&function cg(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Vs=(()=>((Vs=Vs||{})[Vs.NONE=0]="NONE",Vs[Vs.HTML=1]="HTML",Vs[Vs.STYLE=2]="STYLE",Vs[Vs.SCRIPT=3]="SCRIPT",Vs[Vs.URL=4]="URL",Vs[Vs.RESOURCE_URL=5]="RESOURCE_URL",Vs))();function Xu(n){const r=Wc();return r?Nd(r.sanitize(Vs.HTML,n)||""):gc(n,"HTML")?Nd(Us(n)):Df(function $c(){return void 0!==dc?dc:typeof document<"u"?document:void 0}(),Ke(n))}function Ou(n){const r=Wc();return r?r.sanitize(Vs.URL,n)||"":gc(n,"URL")?Us(n):v(Ke(n))}function _c(n){const r=Wc();if(r)return vh(r.sanitize(Vs.RESOURCE_URL,n)||"");if(gc(n,"ResourceURL"))return vh(Us(n));throw new Be(904,!1)}function Tf(n,r,s){return function hg(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?_c:Ou}(r,s)(n)}function Wc(){const n=yt();return n&&n[Er]}const zc=new Jr("ENVIRONMENT_INITIALIZER"),Kc=new Jr("INJECTOR",-1),Ju=new Jr("INJECTOR_DEF_TYPES");class fg{get(r,s=Qn){if(s===Qn){const a=new Error(`NullInjectorError: No provider for ${K(r)}!`);throw a.name="NullInjectorError",a}return s}}function pg(n){return{\u0275providers:n}}function sy(...n){return{\u0275providers:gg(0,n),\u0275fromNgModule:!0}}function gg(n,...r){const s=[],a=new Set;let d;return W(r,m=>{const S=m;vc(S,s,[],a)&&(d||(d=[]),d.push(S))}),void 0!==d&&mg(d,s),s}function mg(n,r){for(let s=0;s<n.length;s++){const{providers:d}=n[s];Eu(d,m=>{r.push(m)})}}function vc(n,r,s,a){if(!(n=fe(n)))return!1;let d=null,m=Vn(n);const S=!m&&hn(n);if(m||S){if(S&&!S.standalone)return!1;d=n}else{const U=n.ngModule;if(m=Vn(U),!m)return!1;d=U}const x=a.has(d);if(S){if(x)return!1;if(a.add(d),S.dependencies){const U="function"==typeof S.dependencies?S.dependencies():S.dependencies;for(const X of U)vc(X,r,s,a)}}else{if(!m)return!1;{if(null!=m.imports&&!x){let X;a.add(d);try{W(m.imports,de=>{vc(de,r,s,a)&&(X||(X=[]),X.push(de))})}finally{}void 0!==X&&mg(X,r)}if(!x){const X=oo(d)||(()=>new d);r.push({provide:d,useFactory:X,deps:Wt},{provide:Ju,useValue:d,multi:!0},{provide:zc,useValue:()=>lr(d),multi:!0})}const U=m.providers;null==U||x||Eu(U,de=>{r.push(de)})}}return d!==n&&void 0!==n.providers}function Eu(n,r){for(let s of n)Ge(s)&&(s=s.\u0275providers),Array.isArray(s)?Eu(s,r):r(s)}const yg=ie({provide:String,useValue:ie});function Sf(n){return null!==n&&"object"==typeof n&&yg in n}function Ru(n){return"function"==typeof n}const Th=new Jr("Set Injector scope."),Qc={},Mf={};let Sh;function Ec(){return void 0===Sh&&(Sh=new fg),Sh}class Dc{}class bh extends Dc{get destroyed(){return this._destroyed}constructor(r,s,a,d){super(),this.parent=s,this.source=a,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Va(r,S=>this.processProvider(S)),this.records.set(Kc,xu(void 0,this)),d.has("environment")&&this.records.set(Dc,xu(void 0,this));const m=this.records.get(Th);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Ju.multi,Wt,cn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=$n(this),a=wr(void 0);try{return r()}finally{$n(s),wr(a)}}get(r,s=Qn,a=cn.Default){this.assertNotDestroyed(),a=Je(a);const d=$n(this),m=wr(void 0);try{if(!(a&cn.SkipSelf)){let x=this.records.get(r);if(void 0===x){const U=function Dg(n){return"function"==typeof n||"object"==typeof n&&n instanceof Jr}(r)&&dt(r);x=U&&this.injectableDefInScope(U)?xu(Zc(r),Qc):null,this.records.set(r,x)}if(null!=x)return this.hydrate(r,x)}return(a&cn.Self?Ec():this.parent).get(r,s=a&cn.Optional&&s===Qn?null:s)}catch(S){if("NullInjectorError"===S.name){if((S[Vr]=S[Vr]||[]).unshift(K(r)),d)throw S;return function ge(n,r,s,a){const d=n[Vr];throw r[vr]&&d.unshift(r[vr]),n.message=function ve(n,r,s,a=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==di?n.slice(2):n;let d=K(r);if(Array.isArray(r))d=r.map(K).join(" -> ");else if("object"==typeof r){let m=[];for(let S in r)if(r.hasOwnProperty(S)){let x=r[S];m.push(S+":"+("string"==typeof x?JSON.stringify(x):K(x)))}d=`{${m.join(", ")}}`}return`${s}${a?"("+a+")":""}[${d}]: ${n.replace(Br,"\n  ")}`}("\n"+n.message,d,s,a),n[gi]=d,n[Vr]=null,n}(S,r,"R3InjectorError",this.source)}throw S}finally{wr(m),$n(d)}}resolveInjectorInitializers(){const r=$n(this),s=wr(void 0);try{const a=this.get(zc.multi,Wt,cn.Self);for(const d of a)d()}finally{$n(r),wr(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(K(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Be(205,!1)}processProvider(r){let s=Ru(r=fe(r))?r:fe(r&&r.provide);const a=function vg(n){return Sf(n)?xu(void 0,n.useValue):xu(qc(n),Qc)}(r);if(Ru(r)||!0!==r.multi)this.records.get(s);else{let d=this.records.get(s);d||(d=xu(void 0,Qc,!0),d.factory=()=>be(d.multi),this.records.set(s,d)),s=r,d.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===Qc&&(s.value=Mf,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Eg(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=fe(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Zc(n){const r=dt(n),s=null!==r?r.factory:oo(n);if(null!==s)return s;if(n instanceof Jr)throw new Be(204,!1);if(n instanceof Function)return function oy(n){const r=n.length;if(r>0)throw He(r,"?"),new Be(204,!1);const s=function kt(n){return n&&(n[qn]||n[is])||null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new Be(204,!1)}function qc(n,r,s){let a;if(Ru(n)){const d=fe(n);return oo(d)||Zc(d)}if(Sf(n))a=()=>fe(n.useValue);else if(function _g(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...be(n.deps||[]));else if(function bf(n){return!(!n||!n.useExisting)}(n))a=()=>lr(fe(n.useExisting));else{const d=fe(n&&(n.useClass||n.provide));if(!function Fd(n){return!!n.deps}(n))return oo(d)||Zc(d);a=()=>new d(...be(n.deps))}return a}function xu(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Va(n,r){for(const s of n)Array.isArray(s)?Va(s,r):s&&Ge(s)?Va(s.\u0275providers,r):r(s)}class Cg{}class kd{}class Xc{resolveComponentFactory(r){throw function Ah(n){const r=Error(`No component factory found for ${K(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Jc=(()=>{class n{}return n.NULL=new Xc,n})();function Ic(){return ed(zi(),yt())}function ed(n,r){return new Du(Ei(n,r))}let Du=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Ic,n})();function Ig(n){return n instanceof Du?n.nativeElement:n}class Nu{}let wg=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function ay(){const n=yt(),s=qi(zi().index,n);return(ii(s)?s:n)[xn]}(),n})(),ly=(()=>{class n{}return n.\u0275prov=pn({token:n,providedIn:"root",factory:()=>null}),n})();class Tg{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Sg=new Tg("15.2.10"),td={},Mh="ngOriginalError";function Ph(n){return n[Mh]}class Ud{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Ph(r);for(;s&&Ph(s);)s=Ph(s);return s||null}}function Of(n){return n.ownerDocument.defaultView}function Mg(n){return n.ownerDocument}function Lu(n){return n instanceof Function?n():n}function xf(n,r,s){let a=n.length;for(;;){const d=n.indexOf(r,s);if(-1===d)return d;if(0===d||n.charCodeAt(d-1)<=32){const m=r.length;if(d+m===a||n.charCodeAt(d+m)<=32)return d}s=d+1}}const Rg="ng-template";function Oh(n,r,s){let a=0,d=!0;for(;a<n.length;){let m=n[a++];if("string"==typeof m&&d){const S=n[a++];if(s&&"class"===m&&-1!==xf(S.toLowerCase(),r,0))return!0}else{if(1===m){for(;a<n.length&&"string"==typeof(m=n[a++]);)if(m.toLowerCase()===r)return!0;return!1}"number"==typeof m&&(d=!1)}}return!1}function xg(n){return 4===n.type&&n.value!==Rg}function Ng(n,r,s){return r===(4!==n.type||s?n.value:Rg)}function Nf(n,r,s){let a=4;const d=n.attrs||[],m=function Ff(n){for(let r=0;r<n.length;r++)if(kr(n[r]))return r;return n.length}(d);let S=!1;for(let x=0;x<r.length;x++){const U=r[x];if("number"!=typeof U){if(!S)if(4&a){if(a=2|1&a,""!==U&&!Ng(n,U,s)||""===U&&1===r.length){if(Il(a))return!1;S=!0}}else{const X=8&a?U:r[++x];if(8&a&&null!==n.attrs){if(!Oh(n.attrs,X,s)){if(Il(a))return!1;S=!0}continue}const Ce=Bd(8&a?"class":U,d,xg(n),s);if(-1===Ce){if(Il(a))return!1;S=!0;continue}if(""!==X){let $e;$e=Ce>m?"":d[Ce+1].toLowerCase();const ct=8&a?$e:null;if(ct&&-1!==xf(ct,X,0)||2&a&&X!==$e){if(Il(a))return!1;S=!0}}}}else{if(!S&&!Il(a)&&!Il(U))return!1;if(S&&Il(U))continue;S=!1,a=U|1&a}}return Il(a)||S}function Il(n){return 0==(1&n)}function Bd(n,r,s,a){if(null===r)return-1;let d=0;if(a||!s){let m=!1;for(;d<r.length;){const S=r[d];if(S===n)return d;if(3===S||6===S)m=!0;else{if(1===S||2===S){let x=r[++d];for(;"string"==typeof x;)x=r[++d];continue}if(4===S)break;if(0===S){d+=4;continue}}d+=m?1:2}return-1}return function Lg(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const a=n[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,n)}function jd(n,r,s=!1){for(let a=0;a<r.length;a++)if(Nf(n,r[a],s))return!0;return!1}function cy(n,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(n.length===a.length){for(let d=0;d<n.length;d++)if(n[d]!==a[d])continue e;return!0}}return!1}function kf(n,r){return n?":not("+r.trim()+")":r}function Fg(n){let r=n[0],s=1,a=2,d="",m=!1;for(;s<n.length;){let S=n[s];if("string"==typeof S)if(2&a){const x=n[++s];d+="["+S+(x.length>0?'="'+x+'"':"")+"]"}else 8&a?d+="."+S:4&a&&(d+=" "+S);else""!==d&&!Il(S)&&(r+=kf(m,d),d=""),a=S,m=m||!Il(a);s++}return""!==d&&(r+=kf(m,d)),r}const Ir={};function kg(n){Vf(cr(),yt(),Di()+n,!1)}function Vf(n,r,s,a){if(!a)if(3==(3&r[bn])){const m=n.preOrderCheckHooks;null!==m&&en(r,m,s)}else{const m=n.preOrderHooks;null!==m&&ft(r,m,0,s)}_s(s)}function Nh(n,r=null,s=null,a){const d=jg(n,r,s,a);return d.resolveInjectorInitializers(),d}function jg(n,r=null,s=null,a,d=new Set){const m=[s||Wt,sy(n)];return a=a||("object"==typeof n?void 0:K(n)),new bh(m,r||Ec(),a||null,d)}let Fu=(()=>{class n{static create(s,a){if(Array.isArray(s))return Nh({name:""},a,s,"");{const d=s.name??"";return Nh({name:d},s.parent,s.providers,d)}}}return n.THROW_IF_NOT_FOUND=Qn,n.NULL=new fg,n.\u0275prov=pn({token:n,providedIn:"any",factory:()=>lr(Kc)}),n.__NG_ELEMENT_ID__=-1,n})();function ku(n,r=cn.Default){const s=yt();return null===s?lr(n,r):st(zi(),s,fe(n),r)}function od(){throw new Error("invalid")}function zf(n,r){const s=n.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const m=s[a+1];if(-1!==m){const S=n.data[m];qa(s[a]),S.contentQueries(2,r[m],m)}}}function Wl(n,r,s,a,d,m,S,x,U,X,de){const Ce=r.blueprint.slice();return Ce[jr]=d,Ce[bn]=76|a,(null!==de||n&&1024&n[bn])&&(Ce[bn]|=1024),ja(Ce),Ce[mn]=Ce[Ts]=n,Ce[Ar]=s,Ce[_i]=S||n&&n[_i],Ce[xn]=x||n&&n[xn],Ce[Er]=U||n&&n[Er]||null,Ce[oi]=X||n&&n[oi]||null,Ce[er]=m,Ce[Ht]=function bu(){return gu++}(),Ce[zt]=de,Ce[De]=2==r.type?n[De]:Ce,Ce}function Sc(n,r,s,a,d){let m=n.data[r];if(null===m)m=function Qf(n,r,s,a,d){const m=Ha(),S=Mo(),U=n.data[r]=function Xg(n,r,s,a,d,m){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,S?m:m&&m.parent,s,r,a,d);return null===n.firstChild&&(n.firstChild=U),null!==m&&(S?null==m.child&&null!==U.parent&&(m.child=U):null===m.next&&(m.next=U,U.prev=m)),U}(n,r,s,a,d),function ba(){return Un.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=s,m.value=a,m.attrs=d;const S=function Ri(){const n=Un.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();m.injectorIndex=null===S?-1:S.injectorIndex}return Bs(m,!0),m}function bc(n,r,s,a){if(0===s)return-1;const d=r.length;for(let m=0;m<s;m++)r.push(a),n.blueprint.push(a),n.data.push(null);return d}function Zf(n,r,s){js(r);try{const a=n.viewQuery;null!==a&&hp(1,a,s);const d=n.template;null!==d&&Zg(n,r,d,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&zf(n,r),n.staticViewQueries&&hp(2,n.viewQuery,s);const m=n.components;null!==m&&function Yf(n,r){for(let s=0;s<r.length;s++)nm(n,r[s])}(r,m)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[bn]&=-5,Jo()}}function ad(n,r,s,a){const d=r[bn];if(128!=(128&d)){js(r);try{ja(r),function _a(n){return Un.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Zg(n,r,s,2,a);const S=3==(3&d);if(S){const X=n.preOrderCheckHooks;null!==X&&en(r,X,null)}else{const X=n.preOrderHooks;null!==X&&ft(r,X,0,null),P(r,0)}if(function up(n){for(let r=Ee(n);null!==r;r=Te(r)){if(!r[hi])continue;const s=r[Si];for(let a=0;a<s.length;a++){const d=s[a];512&d[bn]||Ao(d[mn],1),d[bn]|=512}}}(r),function Iy(n){for(let r=Ee(n);null!==r;r=Te(r))for(let s=ri;s<r.length;s++){const a=r[s],d=a[Bt];Ns(a)&&ad(d,a,d.template,a[Ar])}}(r),null!==n.contentQueries&&zf(n,r),S){const X=n.contentCheckHooks;null!==X&&en(r,X)}else{const X=n.contentHooks;null!==X&&ft(r,X,1),P(r,1)}!function Wf(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const d=s[a];if(d<0)_s(~d);else{const m=d,S=s[++a],x=s[++a];Bi(S,m),x(2,r[m])}}}finally{_s(-1)}}(n,r);const x=n.components;null!==x&&function Kf(n,r){for(let s=0;s<r.length;s++)cp(n,r[s])}(r,x);const U=n.viewQuery;if(null!==U&&hp(2,U,a),S){const X=n.viewCheckHooks;null!==X&&en(r,X)}else{const X=n.viewHooks;null!==X&&ft(r,X,2),P(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[bn]&=-41,512&r[bn]&&(r[bn]&=-513,Ao(r[mn],-1))}finally{Jo()}}}function Zg(n,r,s,a,d){const m=Di(),S=2&a;try{_s(-1),S&&r.length>Jt&&Vf(n,r,Jt,!1),vi(S?2:0,d),s(a,d)}finally{_s(m),vi(S?3:1,d)}}function zd(n,r,s){if(Ps(r)){const d=r.directiveEnd;for(let m=r.directiveStart;m<d;m++){const S=n.data[m];S.contentQueries&&S.contentQueries(1,s[m],m)}}}function ld(n,r,s){et()&&(function sp(n,r,s,a){const d=s.directiveStart,m=s.directiveEnd;zs(s)&&function Cy(n,r,s){const a=Ei(r,n),d=qf(s),m=n[_i],S=Zd(n,Wl(n,d,null,s.onPush?32:16,a,r,m,m.createRenderer(a,s),null,null,null));n[r.index]=S}(r,s,n.data[d+s.componentOffset]),n.firstCreatePass||Ma(s,r),ns(a,r);const S=s.initialInputs;for(let x=d;x<m;x++){const U=n.data[x],X=ts(r,n,x,s);ns(X,r),null!==S&&ap(0,x-d,X,U,0,S),sr(U)&&(qi(s.index,r)[Ar]=ts(r,n,x,s))}}(n,r,s,Ei(s,r)),64==(64&s.flags)&&Ac(n,r,s))}function Kd(n,r,s=Ei){const a=r.localNames;if(null!==a){let d=r.index+1;for(let m=0;m<a.length;m+=2){const S=a[m+1],x=-1===S?s(r,n):n[S];n[d++]=x}}}function qf(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=ec(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function ec(n,r,s,a,d,m,S,x,U,X){const de=Jt+a,Ce=de+d,$e=function Xf(n,r){const s=[];for(let a=0;a<r;a++)s.push(a<n?null:Ir);return s}(de,Ce),ct="function"==typeof X?X():X;return $e[Bt]={type:n,blueprint:$e,template:s,queries:null,viewQuery:x,declTNode:r,data:$e.slice().fill(null,de),bindingStartIndex:de,expandoStartIndex:Ce,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof S?S():S,firstChild:null,schemas:U,consts:ct,incompleteFirstPass:!1}}function qg(n,r,s,a){const d=rm(r);null===s?d.push(a):(d.push(s),n.firstCreatePass&&im(n).push(a,d.length-1))}function Jf(n,r,s,a){for(let d in n)if(n.hasOwnProperty(d)){s=null===s?{}:s;const m=n[d];null===a?Jg(s,r,d,m):a.hasOwnProperty(d)&&Jg(s,r,a[d],m)}return s}function Jg(n,r,s,a){n.hasOwnProperty(s)?n[s].push(r,a):n[s]=[r,a]}function Qa(n,r,s,a,d,m,S,x){const U=Ei(r,s);let de,X=r.inputs;!x&&null!=X&&(de=X[a])?(Jd(n,s,de,a,d),zs(r)&&function Ey(n,r){const s=qi(r,n);16&s[bn]||(s[bn]|=32)}(s,r.index)):3&r.type&&(a=function vy(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),d=null!=S?S(d,r.value||"",a):d,m.setProperty(U,a,d))}function Yd(n,r,s,a){if(et()){const d=null===a?null:{"":-1},m=function op(n,r){const s=n.directiveRegistry;let a=null,d=null;if(s)for(let m=0;m<s.length;m++){const S=s[m];if(jd(r,S.selectors,!1))if(a||(a=[]),sr(S))if(null!==S.findHostDirectiveDefs){const x=[];d=d||new Map,S.findHostDirectiveDefs(S,x,d),a.unshift(...x,S),nc(n,r,x.length)}else a.unshift(S),nc(n,r,0);else d=d||new Map,S.findHostDirectiveDefs?.(S,a,d),a.push(S)}return null===a?null:[a,d]}(n,s);let S,x;null===m?S=x=null:[S,x]=m,null!==S&&np(n,r,s,S,d,x),d&&function ud(n,r,s){if(r){const a=n.localNames=[];for(let d=0;d<r.length;d+=2){const m=s[r[d+1]];if(null==m)throw new Be(-301,!1);a.push(r[d],m)}}}(s,a,d)}s.mergedAttrs=mr(s.mergedAttrs,s.attrs)}function np(n,r,s,a,d,m){for(let X=0;X<a.length;X++)ou(Ma(s,r),n,a[X].type);!function cd(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}(s,n.data.length,a.length);for(let X=0;X<a.length;X++){const de=a[X];de.providersResolver&&de.providersResolver(de)}let S=!1,x=!1,U=bc(n,r,a.length,null);for(let X=0;X<a.length;X++){const de=a[X];s.mergedAttrs=mr(s.mergedAttrs,de.hostAttrs),Dy(n,s,r,U,de),em(U,de,d),null!==de.contentQueries&&(s.flags|=4),(null!==de.hostBindings||null!==de.hostAttrs||0!==de.hostVars)&&(s.flags|=64);const Ce=de.type.prototype;!S&&(Ce.ngOnChanges||Ce.ngOnInit||Ce.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(s.index),S=!0),!x&&(Ce.ngOnChanges||Ce.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(s.index),x=!0),U++}!function ep(n,r,s){const d=r.directiveEnd,m=n.data,S=r.attrs,x=[];let U=null,X=null;for(let de=r.directiveStart;de<d;de++){const Ce=m[de],$e=s?s.get(Ce):null,Mt=$e?$e.outputs:null;U=Jf(Ce.inputs,de,U,$e?$e.inputs:null),X=Jf(Ce.outputs,de,X,Mt);const Qt=null===U||null===S||xg(r)?null:lp(U,de,S);x.push(Qt)}null!==U&&(U.hasOwnProperty("class")&&(r.flags|=8),U.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=x,r.inputs=U,r.outputs=X}(n,s,m)}function Ac(n,r,s){const a=s.directiveStart,d=s.directiveEnd,m=s.index,S=function Do(){return Un.lFrame.currentDirectiveIndex}();try{_s(m);for(let x=a;x<d;x++){const U=n.data[x],X=r[x];lo(x),(null!==U.hostBindings||0!==U.hostVars||null!==U.hostAttrs)&&tc(U,X)}}finally{_s(-1),lo(S)}}function tc(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function nc(n,r,s){r.componentOffset=s,(n.components??(n.components=[])).push(r.index)}function em(n,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=n;sr(r)&&(s[""]=n)}}function Dy(n,r,s,a,d){n.data[a]=d;const m=d.factory||(d.factory=oo(d.type)),S=new we(m,sr(d),ku);n.blueprint[a]=S,s[a]=S,function rp(n,r,s,a,d){const m=d.hostBindings;if(m){let S=n.hostBindingOpCodes;null===S&&(S=n.hostBindingOpCodes=[]);const x=~r.index;(function ip(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(S)!=x&&S.push(x),S.push(s,a,m)}}(n,r,a,bc(n,s,d.hostVars,Ir),d)}function zl(n,r,s,a,d,m){const S=Ei(n,r);!function Qd(n,r,s,a,d,m,S){if(null==m)n.removeAttribute(r,d,s);else{const x=null==S?Ke(m):S(m,a||"",d);n.setAttribute(r,d,x,s)}}(r[xn],S,m,n.value,s,a,d)}function ap(n,r,s,a,d,m){const S=m[r];if(null!==S){const x=a.setInput;for(let U=0;U<S.length;){const X=S[U++],de=S[U++],Ce=S[U++];null!==x?a.setInput(s,Ce,X,de):s[de]=Ce}}}function lp(n,r,s){let a=null,d=0;for(;d<s.length;){const m=s[d];if(0!==m)if(5!==m){if("number"==typeof m)break;if(n.hasOwnProperty(m)){null===a&&(a=[]);const S=n[m];for(let x=0;x<S.length;x+=2)if(S[x]===r){a.push(m,S[x+1],s[d+1]);break}}d+=2}else d+=2;else d+=4}return a}function tm(n,r,s,a){return[n,!0,!1,r,null,0,a,s,null,null]}function cp(n,r){const s=qi(r,n);if(Ns(s)){const a=s[Bt];48&s[bn]?ad(a,s,a.template,s[Ar]):s[In]>0&&dp(s)}}function dp(n){for(let a=Ee(n);null!==a;a=Te(a))for(let d=ri;d<a.length;d++){const m=a[d];if(Ns(m))if(512&m[bn]){const S=m[Bt];ad(S,m,S.template,m[Ar])}else m[In]>0&&dp(m)}const s=n[Bt].components;if(null!==s)for(let a=0;a<s.length;a++){const d=qi(s[a],n);Ns(d)&&d[In]>0&&dp(d)}}function nm(n,r){const s=qi(r,n),a=s[Bt];(function wy(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(a,s),Zf(a,s,s[Ar])}function Zd(n,r){return n[Nn]?n[Yr][An]=r:n[Nn]=r,n[Yr]=r,r}function qd(n){for(;n;){n[bn]|=32;const r=b(n);if(ro(n)&&!r)return n;n=r}return null}function Xd(n,r,s,a=!0){const d=r[_i];d.begin&&d.begin();try{ad(n,r,n.template,s)}catch(S){throw a&&$h(r,S),S}finally{d.end&&d.end()}}function hp(n,r,s){qa(0),r(n,s)}function rm(n){return n[yr]||(n[yr]=[])}function im(n){return n.cleanup||(n.cleanup=[])}function $h(n,r){const s=n[oi],a=s?s.get(Ud,null):null;a&&a.handleError(r)}function Jd(n,r,s,a,d){for(let m=0;m<s.length;){const S=s[m++],x=s[m++],U=r[S],X=n.data[S];null!==X.setInput?X.setInput(U,d,a,x):U[x]=d}}function Uu(n,r,s){const a=$o(r,n);!function qt(n,r,s){n.setValue(r,s)}(n[xn],a,s)}function dd(n,r,s){let a=s?n.styles:null,d=s?n.classes:null,m=0;if(null!==r)for(let S=0;S<r.length;S++){const x=r[S];"number"==typeof x?m=x:1==m?d=ne(d,x):2==m&&(a=ne(a,x+": "+r[++S]+";"))}s?n.styles=a:n.stylesWithoutHost=a,s?n.classes=d:n.classesWithoutHost=d}function Gh(n,r,s,a,d=!1){for(;null!==s;){const m=r[s.index];if(null!==m&&a.push($r(m)),wn(m))for(let x=ri;x<m.length;x++){const U=m[x],X=U[Bt].firstChild;null!==X&&Gh(U[Bt],U,X,a)}const S=s.type;if(8&S)Gh(n,r,s.child,a);else if(32&S){const x=_(s,r);let U;for(;U=x();)a.push(U)}else if(16&S){const x=Ad(r,s);if(Array.isArray(x))a.push(...x);else{const U=b(r[De]);Gh(U[Bt],U,x,a,!0)}}s=d?s.projectionNext:s.next}return a}class Mc{get rootNodes(){const r=this._lView,s=r[Bt];return Gh(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ar]}set context(r){this._lView[Ar]=r}get destroyed(){return 128==(128&this._lView[bn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[mn];if(wn(r)){const s=r[Mr],a=s?s.indexOf(this):-1;a>-1&&(vl(r,a),pe(s,a))}this._attachedToViewContainer=!1}Is(this._lView[Bt],this._lView)}onDestroy(r){qg(this._lView[Bt],this._lView,null,r)}markForCheck(){qd(this._cdRefInjectingView||this._lView)}detach(){this._lView[bn]&=-65}reattach(){this._lView[bn]|=64}detectChanges(){Xd(this._lView[Bt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function or(n,r){Li(n,r,r[xn],2,null,null)}(this._lView[Bt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Be(902,!1);this._appRef=r}}class sm extends Mc{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Xd(r[Bt],r,r[Ar],!1)}checkNoChanges(){}get context(){return null}}class Wh extends Jc{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=hn(r);return new eh(s,this.ngModule)}}function fp(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class pp{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=Je(a);const d=this.injector.get(r,td,a);return d!==td||s===td?d:this.parentInjector.get(r,s,a)}}class eh extends kd{get inputs(){return fp(this.componentDef.inputs)}get outputs(){return fp(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Uf(n){return n.map(Fg).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,d){let m=(d=d||this.ngModule)instanceof Dc?d:d?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const S=m?new pp(r,m):r,x=S.get(Nu,null);if(null===x)throw new Be(407,!1);const U=S.get(ly,null),X=x.createRenderer(null,this.componentDef),de=this.componentDef.selectors[0][0]||"div",Ce=a?function _y(n,r,s){return n.selectRootElement(r,s===ke.ShadowDom)}(X,a,this.componentDef.encapsulation):Gt(X,de,function Sy(n){const r=n.toLowerCase();return"svg"===r?ao:"math"===r?"math":null}(de)),$e=this.componentDef.onPush?288:272,ct=ec(0,null,null,1,0,null,null,null,null,null),Mt=Wl(null,ct,null,$e,null,null,x,X,U,S,null);let Qt,_n;js(Mt);try{const Ln=this.componentDef;let _r,$t=null;Ln.findHostDirectiveDefs?(_r=[],$t=new Map,Ln.findHostDirectiveDefs(Ln,_r,$t),_r.push(Ln)):_r=[Ln];const xr=function mp(n,r){const s=n[Bt],a=Jt;return n[a]=r,Sc(s,a,2,"#host",null)}(Mt,Ce),no=function by(n,r,s,a,d,m,S,x){const U=d[Bt];!function yp(n,r,s,a){for(const d of n)r.mergedAttrs=mr(r.mergedAttrs,d.hostAttrs);null!==r.mergedAttrs&&(dd(r,r.mergedAttrs,!0),null!==s&&Zu(a,s,r))}(a,n,r,S);const X=m.createRenderer(r,s),de=Wl(d,qf(s),null,s.onPush?32:16,d[n.index],n,m,X,x||null,null,null);return U.firstCreatePass&&nc(U,n,a.length-1),Zd(d,de),d[n.index]=de}(xr,Ce,Ln,_r,Mt,x,X);_n=Go(ct,Jt),Ce&&function vp(n,r,s,a){if(a)on(n,s,["ng-version",Sg.full]);else{const{attrs:d,classes:m}=function dy(n){const r=[],s=[];let a=1,d=2;for(;a<n.length;){let m=n[a];if("string"==typeof m)2===d?""!==m&&r.push(m,n[++a]):8===d&&s.push(m);else{if(!Il(d))break;d=m}a++}return{attrs:r,classes:s}}(r.selectors[0]);d&&on(n,s,d),m&&m.length>0&&yh(n,s,m.join(" "))}}(X,Ln,Ce,a),void 0!==s&&function hd(n,r,s){const a=n.projection=[];for(let d=0;d<r.length;d++){const m=s[d];a.push(null!=m?Array.from(m):null)}}(_n,this.ngContentSelectors,s),Qt=function _p(n,r,s,a,d,m){const S=zi(),x=d[Bt],U=Ei(S,d);np(x,d,S,s,null,a);for(let de=0;de<s.length;de++)ns(ts(d,x,S.directiveStart+de,S),d);Ac(x,d,S),U&&ns(U,d);const X=ts(d,x,S.directiveStart+S.componentOffset,S);if(n[Ar]=d[Ar]=X,null!==m)for(const de of m)de(X,r);return zd(x,S,n),X}(no,Ln,_r,$t,Mt,[om]),Zf(ct,Mt,null)}finally{Jo()}return new gp(this.componentType,Qt,ed(_n,Mt),Mt,_n)}}class gp extends Cg{constructor(r,s,a,d,m){super(),this.location=a,this._rootLView=d,this._tNode=m,this.instance=s,this.hostView=this.changeDetectorRef=new sm(d),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let d;if(null!==a&&(d=a[r])){const m=this._rootLView;Jd(m[Bt],m,d,r,s),qd(qi(this._tNode.index,m))}}get injector(){return new el(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function om(){const n=zi();ll(yt()[Bt],n)}function Ep(n){let r=function zh(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const a=[n];for(;r;){let d;if(sr(n))d=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Be(903,!1);d=r.\u0275dir}if(d){if(s){a.push(d);const S=n;S.inputs=iu(n.inputs),S.declaredInputs=iu(n.declaredInputs),S.outputs=iu(n.outputs);const x=d.hostBindings;x&&Ip(n,x);const U=d.viewQuery,X=d.contentQueries;if(U&&Cp(n,U),X&&Ay(n,X),te(n.inputs,d.inputs),te(n.declaredInputs,d.declaredInputs),te(n.outputs,d.outputs),sr(d)&&d.data.animation){const de=n.data;de.animation=(de.animation||[]).concat(d.data.animation)}}const m=d.features;if(m)for(let S=0;S<m.length;S++){const x=m[S];x&&x.ngInherit&&x(n),x===Ep&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Dp(n){let r=0,s=null;for(let a=n.length-1;a>=0;a--){const d=n[a];d.hostVars=r+=d.hostVars,d.hostAttrs=mr(d.hostAttrs,s=mr(s,d.hostAttrs))}}(a)}function iu(n){return n===Ft?{}:n===Wt?[]:n}function Cp(n,r){const s=n.viewQuery;n.viewQuery=s?(a,d)=>{r(a,d),s(a,d)}:r}function Ay(n,r){const s=n.contentQueries;n.contentQueries=s?(a,d,m)=>{r(a,d,m),s(a,d,m)}:r}function Ip(n,r){const s=n.hostBindings;n.hostBindings=s?(a,d)=>{r(a,d),s(a,d)}:r}function fd(n){return!!Sp(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Sp(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Cu(n,r,s){return n[r]=s}function fa(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Vu(n,r,s,a){const d=fa(n,r,s);return fa(n,r+1,a)||d}function Qh(n,r,s,a,d){const m=Vu(n,r,s,a);return fa(n,r+2,d)||m}function wl(n,r,s,a,d,m){const S=Vu(n,r,s,a);return Vu(n,r+2,d,m)||S}function Ap(n,r,s,a){const d=yt();return fa(d,Qo(),r)&&(cr(),zl(Qr(),d,n,r,s,a)),Ap}function rc(n,r,s,a){return fa(n,Qo(),s)?r+Ke(s)+a:Ir}function ic(n,r,s,a,d,m){const x=Vu(n,ai(),s,d);return ys(2),x?r+Ke(s)+a+Ke(d)+m:Ir}function gd(n,r,s,a,d,m,S,x){const X=Qh(n,ai(),s,d,S);return ys(3),X?r+Ke(s)+a+Ke(d)+m+Ke(S)+x:Ir}function Op(n,r,s,a,d,m,S,x){const U=yt(),X=cr(),de=n+Jt,Ce=X.firstCreatePass?function W_(n,r,s,a,d,m,S,x,U){const X=r.consts,de=Sc(r,n,4,S||null,Ys(X,x));Yd(r,s,de,Ys(X,U)),ll(r,de);const Ce=de.tView=ec(2,de,a,d,m,r.directiveRegistry,r.pipeRegistry,null,r.schemas,X);return null!==r.queries&&(r.queries.template(r,de),Ce.queries=r.queries.embeddedTView(de)),de}(de,X,U,r,s,a,d,m,S):X.data[de];Bs(Ce,!1);const $e=U[xn].createComment("");Yi(X,U,$e,Ce),ns($e,U),Zd(U,U[de]=tm($e,U,$e,Ce)),Gi(Ce)&&ld(X,U,Ce),null!=S&&Kd(U,Ce,x)}function th(n){return Tr(function Yo(){return Un.lFrame.contextLView}(),Jt+n)}function Rp(n,r,s){const a=yt();return fa(a,Qo(),r)&&Qa(cr(),Qr(),a,n,r,a[xn],s,!1),Rp}function fm(n,r,s,a,d){const S=d?"class":"style";Jd(n,s,r.inputs[S],S,a)}function Zh(n,r,s,a){const d=yt(),m=cr(),S=Jt+n,x=d[xn],U=m.firstCreatePass?function Ly(n,r,s,a,d,m){const S=r.consts,U=Sc(r,n,2,a,Ys(S,d));return Yd(r,s,U,Ys(S,m)),null!==U.attrs&&dd(U,U.attrs,!1),null!==U.mergedAttrs&&dd(U,U.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,U),U}(S,m,d,r,s,a):m.data[S],X=d[S]=Gt(x,r,function yn(){return Un.lFrame.currentNamespace}()),de=Gi(U);return Bs(U,!0),Zu(x,X,U),32!=(32&U.flags)&&Yi(m,d,X,U),0===function H(){return Un.lFrame.elementDepthCount}()&&ns(X,d),function k(){Un.lFrame.elementDepthCount++}(),de&&(ld(m,d,U),zd(m,U,d)),null!==a&&Kd(d,U),Zh}function qh(){let n=zi();Mo()?Ko():(n=n.parent,Bs(n,!1));const r=n;!function ce(){Un.lFrame.elementDepthCount--}();const s=cr();return s.firstCreatePass&&(ll(s,n),Ps(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Nr(n){return 0!=(8&n.flags)}(r)&&fm(s,r,yt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function zn(n){return 0!=(16&n.flags)}(r)&&fm(s,r,yt(),r.stylesWithoutHost,!1),qh}function xp(n,r,s,a){return Zh(n,r,s,a),qh(),xp}function nh(n,r,s){const a=yt(),d=cr(),m=n+Jt,S=d.firstCreatePass?function Fy(n,r,s,a,d){const m=r.consts,S=Ys(m,a),x=Sc(r,n,8,"ng-container",S);return null!==S&&dd(x,S,!0),Yd(r,s,x,Ys(m,d)),null!==r.queries&&r.queries.elementStart(r,x),x}(m,d,a,r,s):d.data[m];Bs(S,!0);const x=a[m]=a[xn].createComment("");return Yi(d,a,x,S),ns(x,a),Gi(S)&&(ld(d,a,S),zd(d,S,a)),null!=s&&Kd(a,S),nh}function yd(){let n=zi();const r=cr();return Mo()?Ko():(n=n.parent,Bs(n,!1)),r.firstCreatePass&&(ll(r,n),Ps(n)&&r.queries.elementEnd(n)),yd}function Xh(n,r,s){return nh(n,r,s),yd(),Xh}function Jh(){return yt()}function rh(n){return!!n&&"function"==typeof n.then}function ef(n){return!!n&&"function"==typeof n.subscribe}const ih=ef;function sh(n,r,s,a){const d=yt(),m=cr(),S=zi();return function nf(n,r,s,a,d,m,S){const x=Gi(a),X=n.firstCreatePass&&im(n),de=r[Ar],Ce=rm(r);let $e=!0;if(3&a.type||S){const Qt=Ei(a,r),_n=S?S(Qt):Qt,Ln=Ce.length,_r=S?xr=>S($r(xr[a.index])):a.index;let $t=null;if(!S&&x&&($t=function tf(n,r,s,a){const d=n.cleanup;if(null!=d)for(let m=0;m<d.length-1;m+=2){const S=d[m];if(S===s&&d[m+1]===a){const x=r[yr],U=d[m+2];return x.length>U?x[U]:null}"string"==typeof S&&(m+=2)}return null}(n,r,d,a.index)),null!==$t)($t.__ngLastListenerFn__||$t).__ngNextListenerFn__=m,$t.__ngLastListenerFn__=m,$e=!1;else{m=Lp(a,r,de,m,!1);const xr=s.listen(_n,d,m);Ce.push(m,xr),X&&X.push(d,_r,Ln,Ln+1)}}else m=Lp(a,r,de,m,!1);const ct=a.outputs;let Mt;if($e&&null!==ct&&(Mt=ct[d])){const Qt=Mt.length;if(Qt)for(let _n=0;_n<Qt;_n+=2){const no=r[Mt[_n]][Mt[_n+1]].subscribe(m),Vo=Ce.length;Ce.push(m,no),X&&X.push(d,a.index,Vo,-(Vo+1))}}}(m,d,d[xn],S,n,r,a),sh}function rf(n,r,s,a){try{return vi(6,r,s),!1!==s(a)}catch(d){return $h(n,d),!1}finally{vi(7,r,s)}}function Lp(n,r,s,a,d){return function m(S){if(S===Function)return a;qd(n.componentOffset>-1?qi(n.index,r):r);let U=rf(r,s,a,S),X=m.__ngNextListenerFn__;for(;X;)U=rf(r,s,X,S)&&U,X=X.__ngNextListenerFn__;return d&&!1===U&&(S.preventDefault(),S.returnValue=!1),U}}function Nc(n=1){return function Ji(n){return(Un.lFrame.contextLView=function Qs(n,r){for(;n>0;)r=r[Ts],n--;return r}(n,Un.lFrame.contextLView))[Ar]}(n)}function Fp(n,r){let s=null;const a=function Lf(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(n);for(let d=0;d<r.length;d++){const m=r[d];if("*"!==m){if(null===a?jd(n,m,!0):cy(a,m))return d}else s=d}return s}function pm(n){const r=yt()[De][er];if(!r.projection){const a=r.projection=He(n?n.length:1,null),d=a.slice();let m=r.child;for(;null!==m;){const S=n?Fp(m,n):0;null!==S&&(d[S]?d[S].projectionNext=m:a[S]=m,d[S]=m),m=m.next}}}function gm(n,r=0,s){const a=yt(),d=cr(),m=Sc(d,Jt+n,16,null,s||null);null===m.projection&&(m.projection=r),Ko(),32!=(32&m.flags)&&function Pu(n,r,s){mh(r[xn],0,r,s,al(n,s,r),Zr(s.parent||r[er],s,r))}(d,a,m)}function kp(n,r,s){return oh(n,"",r,"",s),kp}function oh(n,r,s,a,d){const m=yt(),S=rc(m,r,s,a);return S!==Ir&&Qa(cr(),Qr(),m,n,S,m[xn],d,!1),oh}function Vp(n,r){return n<<17|r<<2}function Pi(n){return n>>17&32767}function to(n){return 2|n}function sc(n){return(131068&n)>>2}function Bp(n,r){return-131069&n|r<<2}function af(n){return 1|n}function Uy(n,r,s,a,d){const m=n[s+1],S=null===r;let x=a?Pi(m):sc(m),U=!1;for(;0!==x&&(!1===U||S);){const de=n[x+1];Z_(n[x],r)&&(U=!0,n[x+1]=a?af(de):to(de)),x=a?Pi(de):sc(de)}U&&(n[s+1]=a?to(m):af(m))}function Z_(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&fi(n,r)>=0}const ga={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jp(n){return n.substring(ga.key,ga.keyEnd)}function Lc(n){return n.substring(ga.value,ga.valueEnd)}function Vy(n,r){const s=ga.textEnd;return s===r?-1:(r=ga.keyEnd=function Im(n,r,s){for(;r<s&&n.charCodeAt(r)>32;)r++;return r}(n,ga.key=r,s),vd(n,r,s))}function uf(n,r){const s=ga.textEnd;let a=ga.key=vd(n,r,s);return s===a?-1:(a=ga.keyEnd=function wm(n,r,s){let a;for(;r<s&&(45===(a=n.charCodeAt(r))||95===a||(-33&a)>=65&&(-33&a)<=90||a>=48&&a<=57);)r++;return r}(n,a,s),a=ah(n,a,s),a=ga.value=vd(n,a,s),a=ga.valueEnd=function By(n,r,s){let a=-1,d=-1,m=-1,S=r,x=S;for(;S<s;){const U=n.charCodeAt(S++);if(59===U)return x;34===U||39===U?x=S=Fc(n,U,S,s):r===S-4&&85===m&&82===d&&76===a&&40===U?x=S=Fc(n,41,S,s):U>32&&(x=S),m=d,d=a,a=-33&U}return x}(n,a,s),ah(n,a,s))}function Cm(n){ga.key=0,ga.keyEnd=0,ga.value=0,ga.valueEnd=0,ga.textEnd=n.length}function vd(n,r,s){for(;r<s&&n.charCodeAt(r)<=32;)r++;return r}function ah(n,r,s,a){return(r=vd(n,r,s))<s&&r++,r}function Fc(n,r,s,a){let d=-1,m=s;for(;m<a;){const S=n.charCodeAt(m++);if(S==r&&92!==d)return m;d=92==S&&92===d?0:S}throw new Error}function kc(n,r,s){return Kl(n,r,s,!1),kc}function cf(n,r){return Kl(n,r,null,!0),cf}function Tl(n){Yl(zp,jy,n,!1)}function jy(n,r){for(let s=function lf(n){return Cm(n),uf(n,vd(n,0,ga.textEnd))}(r);s>=0;s=uf(r,s))zp(n,jp(r),Lc(r))}function Sm(n){Yl(Kp,Iu,n,!0)}function Iu(n,r){for(let s=function _d(n){return Cm(n),Vy(n,vd(n,0,ga.textEnd))}(r);s>=0;s=Vy(r,s))Ur(n,jp(r),!0)}function Kl(n,r,s,a){const d=yt(),m=cr(),S=ys(2);m.firstUpdatePass&&oc(m,n,S,a),r!==Ir&&fa(d,S,r)&&lh(m,m.data[Di()],d,d[xn],n,d[S+1]=function uh(n,r){return null==n||""===n||("string"==typeof r?n+=r:"object"==typeof n&&(n=K(Us(n)))),n}(r,s),a,S)}function Yl(n,r,s,a){const d=cr(),m=ys(2);d.firstUpdatePass&&oc(d,null,m,a);const S=yt();if(s!==Ir&&fa(S,m,s)){const x=d.data[Di()];if(Mm(x,a)&&!Hp(d,m)){let U=a?x.classesWithoutHost:x.stylesWithoutHost;null!==U&&(s=ne(U,s||"")),fm(d,x,S,s,a)}else!function Hy(n,r,s,a,d,m,S,x){d===Ir&&(d=Wt);let U=0,X=0,de=0<d.length?d[0]:null,Ce=0<m.length?m[0]:null;for(;null!==de||null!==Ce;){const $e=U<d.length?d[U+1]:void 0,ct=X<m.length?m[X+1]:void 0;let Qt,Mt=null;de===Ce?(U+=2,X+=2,$e!==ct&&(Mt=Ce,Qt=ct)):null===Ce||null!==de&&de<Ce?(U+=2,Mt=de):(X+=2,Mt=Ce,Qt=ct),null!==Mt&&lh(n,r,s,a,Mt,Qt,S,x),de=U<d.length?d[U]:null,Ce=X<m.length?m[X]:null}}(d,x,S,S[xn],S[m+1],S[m+1]=function df(n,r,s){if(null==s||""===s)return Wt;const a=[],d=Us(s);if(Array.isArray(d))for(let m=0;m<d.length;m++)n(a,d[m],!0);else if("object"==typeof d)for(const m in d)d.hasOwnProperty(m)&&n(a,m,d[m]);else"string"==typeof d&&r(a,d);return a}(n,r,s),a,m)}}function Hp(n,r){return r>=n.expandoStartIndex}function oc(n,r,s,a){const d=n.data;if(null===d[s+1]){const m=d[Di()],S=Hp(n,s);Mm(m,a)&&null===r&&!S&&(r=!1),r=function bm(n,r,s,a){const d=Xi(n);let m=a?r.residualClasses:r.residualStyles;if(null===d)0===(a?r.classBindings:r.styleBindings)&&(s=ac(s=Wp(null,n,r,s,a),r.attrs,a),m=null);else{const S=r.directiveStylingLast;if(-1===S||n[S]!==d)if(s=Wp(d,n,r,s,a),null===m){let U=function Am(n,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==sc(a))return n[Pi(a)]}(n,r,a);void 0!==U&&Array.isArray(U)&&(U=Wp(null,n,r,U[1],a),U=ac(U,r.attrs,a),function $p(n,r,s,a){n[Pi(s?r.classBindings:r.styleBindings)]=a}(n,r,a,U))}else m=function Gp(n,r,s){let a;const d=r.directiveEnd;for(let m=1+r.directiveStylingLast;m<d;m++)a=ac(a,n[m].hostAttrs,s);return ac(a,r.attrs,s)}(n,r,a)}return void 0!==m&&(a?r.residualClasses=m:r.residualStyles=m),s}(d,m,r,a),function Y_(n,r,s,a,d,m){let S=m?r.classBindings:r.styleBindings,x=Pi(S),U=sc(S);n[a]=s;let de,X=!1;if(Array.isArray(s)?(de=s[1],(null===de||fi(s,de)>0)&&(X=!0)):de=s,d)if(0!==U){const $e=Pi(n[x+1]);n[a+1]=Vp($e,x),0!==$e&&(n[$e+1]=Bp(n[$e+1],a)),n[x+1]=function ky(n,r){return 131071&n|r<<17}(n[x+1],a)}else n[a+1]=Vp(x,0),0!==x&&(n[x+1]=Bp(n[x+1],a)),x=a;else n[a+1]=Vp(U,0),0===x?x=a:n[U+1]=Bp(n[U+1],a),U=a;X&&(n[a+1]=to(n[a+1])),Uy(n,de,a,!0),Uy(n,de,a,!1),function Q_(n,r,s,a,d){const m=d?n.residualClasses:n.residualStyles;null!=m&&"string"==typeof r&&fi(m,r)>=0&&(s[a+1]=af(s[a+1]))}(r,de,n,a,m),S=Vp(x,U),m?r.classBindings=S:r.styleBindings=S}(d,m,r,s,S,a)}}function Wp(n,r,s,a,d){let m=null;const S=s.directiveEnd;let x=s.directiveStylingLast;for(-1===x?x=s.directiveStart:x++;x<S&&(m=r[x],a=ac(a,m.hostAttrs,d),m!==n);)x++;return null!==n&&(s.directiveStylingLast=x),a}function ac(n,r,s){const a=s?1:2;let d=-1;if(null!==r)for(let m=0;m<r.length;m++){const S=r[m];"number"==typeof S?d=S:d===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ur(n,S,!!s||r[++m]))}return void 0===n?null:n}function zp(n,r,s){Ur(n,r,Us(s))}function Kp(n,r,s){const a=String(r);""!==a&&!a.includes(" ")&&Ur(n,a,s)}function lh(n,r,s,a,d,m,S,x){if(!(3&r.type))return;const U=n.data,X=U[x+1],de=function K_(n){return 1==(1&n)}(X)?Yp(U,r,s,d,sc(X),S):void 0;Ed(de)||(Ed(m)||function z_(n){return 2==(2&n)}(X)&&(m=Yp(U,null,s,d,x,S)),function nu(n,r,s,a,d){if(r)d?n.addClass(s,a):n.removeClass(s,a);else{let m=-1===a.indexOf("-")?void 0:No.DashCase;null==d?n.removeStyle(s,a,m):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),m|=No.Important),n.setStyle(s,a,d,m))}}(a,S,$o(Di(),s),d,m))}function Yp(n,r,s,a,d,m){const S=null===r;let x;for(;d>0;){const U=n[d],X=Array.isArray(U),de=X?U[1]:U,Ce=null===de;let $e=s[d+1];$e===Ir&&($e=Ce?Wt:void 0);let ct=Ce?Ds($e,a):de===a?$e:void 0;if(X&&!Ed(ct)&&(ct=Ds(U,a)),Ed(ct)&&(x=ct,S))return x;const Mt=n[d+1];d=S?Pi(Mt):sc(Mt)}if(null!==r){let U=m?r.residualClasses:r.residualStyles;null!=U&&(x=Ds(U,a))}return x}function Ed(n){return void 0!==n}function Mm(n,r){return 0!=(n.flags&(r?8:16))}function Dd(n,r=""){const s=yt(),a=cr(),d=n+Jt,m=a.firstCreatePass?Sc(a,d,1,r,null):a.data[d],S=s[d]=function Lt(n,r){return n.createText(r)}(s[xn],r);Yi(a,s,S,m),Bs(m,!1)}function Pm(n){return ju("",n,""),Pm}function ju(n,r,s){const a=yt(),d=rc(a,n,r,s);return d!==Ir&&Uu(a,Di(),d),ju}function Om(n,r,s,a,d){const m=yt(),S=ic(m,n,r,s,a,d);return S!==Ir&&Uu(m,Di(),S),Om}function Rm(n,r,s,a,d,m,S){const x=yt(),U=gd(x,n,r,s,a,d,m,S);return U!==Ir&&Uu(x,Di(),U),Rm}function ch(n,r,s,a,d,m,S,x,U){const X=yt(),de=function Oc(n,r,s,a,d,m,S,x,U,X){const Ce=wl(n,ai(),s,d,S,U);return ys(4),Ce?r+Ke(s)+a+Ke(d)+m+Ke(S)+x+Ke(U)+X:Ir}(X,n,r,s,a,d,m,S,x,U);return de!==Ir&&Uu(X,Di(),de),ch}function Cd(n,r,s,a,d,m,S,x,U,X,de,Ce,$e){const ct=yt(),Mt=function Bu(n,r,s,a,d,m,S,x,U,X,de,Ce,$e,ct){const Mt=ai();let Qt=wl(n,Mt,s,d,S,U);return Qt=Vu(n,Mt+4,de,$e)||Qt,ys(6),Qt?r+Ke(s)+a+Ke(d)+m+Ke(S)+x+Ke(U)+X+Ke(de)+Ce+Ke($e)+ct:Ir}(ct,n,r,s,a,d,m,S,x,U,X,de,Ce,$e);return Mt!==Ir&&Uu(ct,Di(),Mt),Cd}function Gy(n,r,s){Yl(Ur,Iu,rc(yt(),n,r,s),!0)}function Lm(n,r,s,a,d){Yl(Ur,Iu,ic(yt(),n,r,s,a,d),!0)}function hh(n,r,s,a,d,m,S){Yl(Ur,Iu,gd(yt(),n,r,s,a,d,m,S),!0)}function Qp(n,r,s){Tl(rc(yt(),n,r,s))}function Wm(n,r,s){const a=yt();return fa(a,Qo(),r)&&Qa(cr(),Qr(),a,n,r,a[xn],s,!0),Wm}function qp(n,r,s){const a=yt();if(fa(a,Qo(),r)){const m=cr(),S=Qr();Qa(m,S,a,n,r,function Hh(n,r,s){return(null===n||sr(n))&&(s=function ms(n){for(;Array.isArray(n);){if("object"==typeof n[ur])return n;n=n[jr]}return null}(s[r.index])),s[xn]}(Xi(m.data),S,a),s,!0)}return qp}const Vc=void 0;var Xy=["en",[["a","p"],["AM","PM"],Vc],[["AM","PM"],Vc,Vc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vc,"{1} 'at' {0}",Vc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qy(n){const s=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let fh={};function ph(n){const r=function e_(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=zm(r);if(s)return s;const a=r.split("-")[0];if(s=zm(a),s)return s;if("en"===a)return Xy;throw new Be(701,!1)}function Jy(n){return ph(n)[Jn.PluralCase]}function zm(n){return n in fh||(fh[n]=Yn.ng&&Yn.ng.common&&Yn.ng.common.locales&&Yn.ng.common.locales[n]),fh[n]}var Jn=(()=>((Jn=Jn||{})[Jn.LocaleId=0]="LocaleId",Jn[Jn.DayPeriodsFormat=1]="DayPeriodsFormat",Jn[Jn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Jn[Jn.DaysFormat=3]="DaysFormat",Jn[Jn.DaysStandalone=4]="DaysStandalone",Jn[Jn.MonthsFormat=5]="MonthsFormat",Jn[Jn.MonthsStandalone=6]="MonthsStandalone",Jn[Jn.Eras=7]="Eras",Jn[Jn.FirstDayOfWeek=8]="FirstDayOfWeek",Jn[Jn.WeekendRange=9]="WeekendRange",Jn[Jn.DateFormat=10]="DateFormat",Jn[Jn.TimeFormat=11]="TimeFormat",Jn[Jn.DateTimeFormat=12]="DateTimeFormat",Jn[Jn.NumberSymbols=13]="NumberSymbols",Jn[Jn.NumberFormats=14]="NumberFormats",Jn[Jn.CurrencyCode=15]="CurrencyCode",Jn[Jn.CurrencySymbol=16]="CurrencySymbol",Jn[Jn.CurrencyName=17]="CurrencyName",Jn[Jn.Currencies=18]="Currencies",Jn[Jn.Directionality=19]="Directionality",Jn[Jn.PluralCase=20]="PluralCase",Jn[Jn.ExtraData=21]="ExtraData",Jn))();const Td="en-US";let eg=Td;function r_(n,r,s,a,d){if(n=fe(n),Array.isArray(n))for(let m=0;m<n.length;m++)r_(n[m],r,s,a,d);else{const m=cr(),S=yt();let x=Ru(n)?n:fe(n.provide),U=qc(n);const X=zi(),de=1048575&X.providerIndexes,Ce=X.directiveStart,$e=X.providerIndexes>>20;if(Ru(n)||!n.multi){const ct=new we(U,d,ku),Mt=s_(x,r,d?de:de+$e,Ce);-1===Mt?(ou(Ma(X,S),m,x),i_(m,n,r.length),r.push(x),X.directiveStart++,X.directiveEnd++,d&&(X.providerIndexes+=1048576),s.push(ct),S.push(ct)):(s[Mt]=ct,S[Mt]=ct)}else{const ct=s_(x,r,de+$e,Ce),Mt=s_(x,r,de,de+$e),_n=Mt>=0&&s[Mt];if(d&&!_n||!d&&!(ct>=0&&s[ct])){ou(Ma(X,S),m,x);const Ln=function F0(n,r,s,a,d){const m=new we(n,s,ku);return m.multi=[],m.index=r,m.componentProviders=0,yv(m,d,a&&!s),m}(d?L0:N0,s.length,d,a,U);!d&&_n&&(s[Mt].providerFactory=Ln),i_(m,n,r.length,0),r.push(x),X.directiveStart++,X.directiveEnd++,d&&(X.providerIndexes+=1048576),s.push(Ln),S.push(Ln)}else i_(m,n,ct>-1?ct:Mt,yv(s[d?Mt:ct],U,!d&&a));!d&&a&&_n&&s[Mt].componentProviders++}}}function i_(n,r,s,a){const d=Ru(r),m=function Af(n){return!!n.useClass}(r);if(d||m){const U=(m?fe(r.useClass):r).prototype.ngOnDestroy;if(U){const X=n.destroyHooks||(n.destroyHooks=[]);if(!d&&r.multi){const de=X.indexOf(s);-1===de?X.push(s,[a,U]):X[de+1].push(a,U)}else X.push(s,U)}}}function yv(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function s_(n,r,s,a){for(let d=s;d<a;d++)if(r[d]===n)return d;return-1}function N0(n,r,s,a){return o_(this.multi,[])}function L0(n,r,s,a){const d=this.multi;let m;if(this.providerFactory){const S=this.providerFactory.componentProviders,x=ts(s,s[Bt],this.providerFactory.index,a);m=x.slice(0,S),o_(d,m);for(let U=S;U<x.length;U++)m.push(x[U])}else m=[],o_(d,m);return m}function o_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function _v(n,r=[]){return s=>{s.providersResolver=(a,d)=>function x0(n,r,s){const a=cr();if(a.firstCreatePass){const d=sr(n);r_(s,a.data,a.blueprint,d,!0),r_(r,a.data,a.blueprint,d,!1)}}(a,d?d(n):n,r)}}class pf{}class vv{}function k0(n,r){return new Ev(n,r??null)}class Ev extends pf{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Wh(this);const a=ni(r);this._bootstrapComponents=Lu(a.bootstrap),this._r3Injector=jg(r,s,[{provide:pf,useValue:this},{provide:Jc,useValue:this.componentFactoryResolver}],K(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class a_ extends vv{constructor(r){super(),this.moduleType=r}create(r){return new Ev(this.moduleType,r)}}class U0 extends pf{constructor(r,s,a){super(),this.componentFactoryResolver=new Wh(this),this.instance=null;const d=new bh([...r,{provide:pf,useValue:this},{provide:Jc,useValue:this.componentFactoryResolver}],s||Ec(),a,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function l_(n,r,s=null){return new U0(n,r,s).injector}let V0=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const a=gg(0,s.type),d=a.length>0?l_([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,d)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=pn({token:n,providedIn:"environment",factory:()=>new n(lr(Dc))}),n})();function Dv(n){n.getStandaloneInjector=r=>r.get(V0).getOrCreateStandaloneInjector(n)}function Av(n,r,s){const a=xi()+n,d=yt();return d[a]===Ir?Cu(d,a,s?r.call(s):r()):function Pc(n,r){return n[r]}(d,a)}function Mv(n,r,s,a){return Rv(yt(),xi(),n,r,s,a)}function Pv(n,r,s,a,d){return xv(yt(),xi(),n,r,s,a,d)}function Ov(n,r,s,a,d,m){return Nv(yt(),xi(),n,r,s,a,d,m)}function rg(n,r){const s=n[r];return s===Ir?void 0:s}function Rv(n,r,s,a,d,m){const S=r+s;return fa(n,S,d)?Cu(n,S+1,m?a.call(m,d):a(d)):rg(n,S+1)}function xv(n,r,s,a,d,m,S){const x=r+s;return Vu(n,x,d,m)?Cu(n,x+2,S?a.call(S,d,m):a(d,m)):rg(n,x+2)}function Nv(n,r,s,a,d,m,S,x){const U=r+s;return Qh(n,U,d,m,S)?Cu(n,U+3,x?a.call(x,d,m,S):a(d,m,S)):rg(n,U+3)}function kv(n,r){const s=cr();let a;const d=n+Jt;s.firstCreatePass?(a=function eD(n,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(n===a.name)return a}}(r,s.pipeRegistry),s.data[d]=a,a.onDestroy&&(s.destroyHooks??(s.destroyHooks=[])).push(d,a.onDestroy)):a=s.data[d];const m=a.factory||(a.factory=oo(a.type)),S=wr(ku);try{const x=co(!1),U=m();return co(x),function hm(n,r,s,a){s>=n.data.length&&(n.data[s]=null,n.blueprint[s]=null),r[s]=a}(s,yt(),d,U),U}finally{wr(S)}}function Uv(n,r,s){const a=n+Jt,d=yt(),m=Tr(d,a);return ig(d,a)?Rv(d,xi(),r,m.transform,s,m):m.transform(s)}function Vv(n,r,s,a){const d=n+Jt,m=yt(),S=Tr(m,d);return ig(m,d)?xv(m,xi(),r,S.transform,s,a,S):S.transform(s,a)}function Bv(n,r,s,a,d){const m=n+Jt,S=yt(),x=Tr(S,m);return ig(S,m)?Nv(S,xi(),r,x.transform,s,a,d,x):x.transform(s,a,d)}function jv(n,r,s){const a=n+Jt,d=yt(),m=Tr(d,a);return ig(d,a)?function Fv(n,r,s,a,d,m){let S=r+s,x=!1;for(let U=0;U<d.length;U++)fa(n,S++,d[U])&&(x=!0);return x?Cu(n,S,a.apply(m,d)):rg(n,S)}(d,xi(),r,m.transform,s,m):m.transform.apply(m,s)}function ig(n,r){return n[Bt].data[r].pure}function c_(n){return r=>{setTimeout(n,void 0,r)}}const lc=class nD extends f.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let d=r,m=s||(()=>null),S=a;if(r&&"object"==typeof r){const U=r;d=U.next?.bind(U),m=U.error?.bind(U),S=U.complete?.bind(U)}this.__isAsync&&(m=c_(m),d&&(d=c_(d)),S&&(S=c_(S)));const x=super.subscribe({next:d,error:m,complete:S});return r instanceof I.w0&&r.add(x),x}};function rD(){return this._results[Symbol.iterator]()}class d_{get changes(){return this._changes||(this._changes=new lc)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=d_.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=rD)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const d=function F(n){return n.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function T(n,r,s){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let d=n[a],m=r[a];if(s&&(d=s(d),m=s(m)),m!==d)return!1}return!0}(a._results,d,s))&&(a._results=d,a.length=d.length,a.last=d[this.length-1],a.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let sg=(()=>{class n{}return n.__NG_ELEMENT_ID__=oD,n})();const iD=sg,sD=class extends iD{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r,s){const a=this._declarationTContainer.tView,d=Wl(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null,s||null);d[at]=this._declarationLView[this._declarationTContainer.index];const S=this._declarationLView[mt];return null!==S&&(d[mt]=S.createEmbeddedView(a)),Zf(a,d,r),new Mc(d)}};function oD(){return Ym(zi(),yt())}function Ym(n,r){return 4&n.type?new sD(r,n,ed(n,r)):null}let Qm=(()=>{class n{}return n.__NG_ELEMENT_ID__=aD,n})();function aD(){return Gv(zi(),yt())}const lD=Qm,Hv=class extends lD{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return ed(this._hostTNode,this._hostLView)}get injector(){return new el(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ol(this._hostTNode,this._hostLView);if(es(r)){const s=Lr(r,this._hostLView),a=jn(r);return new el(s[Bt].data[a+8],s)}return new el(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=$v(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-ri}createEmbeddedView(r,s,a){let d,m;"number"==typeof a?d=a:null!=a&&(d=a.index,m=a.injector);const S=r.createEmbeddedView(s||{},m);return this.insert(S,d),S}createComponent(r,s,a,d,m){const S=r&&!function O(n){return"function"==typeof n}(r);let x;if(S)x=s;else{const Ce=s||{};x=Ce.index,a=Ce.injector,d=Ce.projectableNodes,m=Ce.environmentInjector||Ce.ngModuleRef}const U=S?r:new eh(hn(r)),X=a||this.parentInjector;if(!m&&null==U.ngModule){const $e=(S?X:this.parentInjector).get(Dc,null);$e&&(m=$e)}const de=U.create(X,d,void 0,m);return this.insert(de.hostView,x),de}insert(r,s){const a=r._lView,d=a[Bt];if(function Za(n){return wn(n[mn])}(a)){const de=this.indexOf(r);if(-1!==de)this.detach(de);else{const Ce=a[mn],$e=new Hv(Ce,Ce[er],Ce[mn]);$e.detach($e.indexOf(r))}}const m=this._adjustIndex(s),S=this._lContainer;!function Rr(n,r,s,a){const d=ri+a,m=s.length;a>0&&(s[d-1][An]=r),a<m-ri?(r[An]=s[d],oe(s,ri+a,r)):(s.push(r),r[An]=null),r[mn]=s;const S=r[at];null!==S&&s!==S&&function ks(n,r){const s=n[Si];r[De]!==r[mn][mn][De]&&(n[hi]=!0),null===s?n[Si]=[r]:s.push(r)}(S,r);const x=r[mt];null!==x&&x.insertView(n),r[bn]|=64}(d,a,S,m);const x=hs(m,S),U=a[xn],X=Bn(U,S[Dr]);return null!==X&&function Rn(n,r,s,a,d,m){a[jr]=d,a[er]=r,Li(n,a,s,1,d,m)}(d,S[er],U,a,X,x),r.attachToViewContainerRef(),oe(h_(S),m,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=$v(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=vl(this._lContainer,s);a&&(pe(h_(this._lContainer),s),Is(a[Bt],a))}detach(r){const s=this._adjustIndex(r,-1),a=vl(this._lContainer,s);return a&&null!=pe(h_(this._lContainer),s)?new Mc(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function $v(n){return n[Mr]}function h_(n){return n[Mr]||(n[Mr]=[])}function Gv(n,r){let s;const a=r[n.index];if(wn(a))s=a;else{let d;if(8&n.type)d=$r(a);else{const m=r[xn];d=m.createComment("");const S=Ei(n,r);ca(m,Bn(m,S),d,function nr(n,r){return n.nextSibling(r)}(m,S),!1)}r[n.index]=s=tm(a,r,d,n),Zd(r,s)}return new Hv(s,n,r)}class f_{constructor(r){this.queryList=r,this.matches=null}clone(){return new f_(this.queryList)}setDirty(){this.queryList.setDirty()}}class p_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,d=[];for(let m=0;m<a;m++){const S=s.getByIndex(m);d.push(this.queries[S.indexInDeclarationView].clone())}return new p_(d)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==Jv(r,s).matches&&this.queries[s].setDirty()}}class Wv{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class g_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const d=null!==s?s.length:0,m=this.getByIndex(a).embeddedTView(r,d);m&&(m.indexInDeclarationView=a,null!==s?s.push(m):s=[m])}return null!==s?new g_(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class m_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new m_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let d=0;d<a.length;d++){const m=a[d];this.matchTNodeWithReadOption(r,s,uD(s,m)),this.matchTNodeWithReadOption(r,s,Rl(s,r,m,!1,!1))}else a===sg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Rl(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const d=this.metadata.read;if(null!==d)if(d===Du||d===Qm||d===sg&&4&s.type)this.addMatch(s.index,-2);else{const m=Rl(s,r,d,!1,!1);null!==m&&this.addMatch(s.index,m)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function uD(n,r){const s=n.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function dD(n,r,s,a){return-1===s?function cD(n,r){return 11&n.type?ed(n,r):4&n.type?Ym(n,r):null}(r,n):-2===s?function hD(n,r,s){return s===Du?ed(r,n):s===sg?Ym(r,n):s===Qm?Gv(r,n):void 0}(n,r,a):ts(n,n[Bt],s,r)}function zv(n,r,s,a){const d=r[mt].queries[a];if(null===d.matches){const m=n.data,S=s.matches,x=[];for(let U=0;U<S.length;U+=2){const X=S[U];x.push(X<0?null:dD(r,m[X],S[U+1],s.metadata.read))}d.matches=x}return d.matches}function y_(n,r,s,a){const d=n.queries.getByIndex(s),m=d.matches;if(null!==m){const S=zv(n,r,d,s);for(let x=0;x<m.length;x+=2){const U=m[x];if(U>0)a.push(S[x/2]);else{const X=m[x+1],de=r[-U];for(let Ce=ri;Ce<de.length;Ce++){const $e=de[Ce];$e[at]===$e[mn]&&y_($e[Bt],$e,X,a)}if(null!==de[Si]){const Ce=de[Si];for(let $e=0;$e<Ce.length;$e++){const ct=Ce[$e];y_(ct[Bt],ct,X,a)}}}}}return a}function Kv(n){const r=yt(),s=cr(),a=qo();qa(a+1);const d=Jv(s,a);if(n.dirty&&function bo(n){return 4==(4&n[bn])}(r)===(2==(2&d.metadata.flags))){if(null===d.matches)n.reset([]);else{const m=d.crossesNgTemplate?y_(s,r,a,[]):zv(s,r,d,a);n.reset(m,Ig),n.notifyOnChanges()}return!0}return!1}function Yv(n,r,s){const a=cr();a.firstCreatePass&&(Xv(a,new Wv(n,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),qv(a,yt(),r)}function Qv(n,r,s,a){const d=cr();if(d.firstCreatePass){const m=zi();Xv(d,new Wv(r,s,a),m.index),function pD(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(d,n),2==(2&s)&&(d.staticContentQueries=!0)}qv(d,yt(),s)}function Zv(){return function fD(n,r){return n[mt].queries[r].queryList}(yt(),qo())}function qv(n,r,s){const a=new d_(4==(4&s));qg(n,r,a,a.destroy),null===r[mt]&&(r[mt]=new p_),r[mt].queries.push(new f_(a))}function Xv(n,r,s){null===n.queries&&(n.queries=new g_),n.queries.track(new m_(r,s))}function Jv(n,r){return n.queries.getByIndex(r)}function eE(n,r){return Ym(n,r)}function __(n){return!!ni(n)}function qm(...n){}const _E=new Jr("Application Initializer");let Xm=(()=>{class n{constructor(s){this.appInits=s,this.resolve=qm,this.reject=qm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,d)=>{this.resolve=a,this.reject=d})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const m=this.appInits[d]();if(rh(m))s.push(m);else if(ih(m)){const S=new Promise((x,U)=>{m.subscribe({complete:x,error:U})});s.push(S)}}Promise.all(s).then(()=>{a()}).catch(d=>{this.reject(d)}),0===s.length&&a(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(lr(_E,8))},n.\u0275prov=pn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vE=new Jr("AppId",{providedIn:"root",factory:function EE(){return`${I_()}${I_()}${I_()}`}});function I_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const DE=new Jr("Platform Initializer"),ND=new Jr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),LD=new Jr("AnimationModuleType");let FD=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=pn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Jm=new Jr("LocaleId",{providedIn:"root",factory:()=>ei(Jm,cn.Optional|cn.SkipSelf)||function kD(){return typeof $localize<"u"&&$localize.locale||Td}()}),UD=new Jr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class VD{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let BD=(()=>{class n{compileModuleSync(s){return new a_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),m=Lu(ni(s).declarations).reduce((S,x)=>{const U=hn(x);return U&&S.push(new eh(U)),S},[]);return new VD(a,m)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=pn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $D=(()=>Promise.resolve(0))();function w_(n){typeof Zone>"u"?$D.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class wu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lc(!1),this.onMicrotaskEmpty=new lc(!1),this.onStable=new lc(!1),this.onError=new lc(!1),typeof Zone>"u")throw new Be(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!a&&s,d.shouldCoalesceRunChangeDetection=a,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function GD(){let n=Yn.requestAnimationFrame,r=Yn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function KD(n){const r=()=>{!function zD(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Yn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,S_(n),n.isCheckStableRunning=!0,T_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),S_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,d,m,S,x)=>{try{return wE(n),s.invokeTask(d,m,S,x)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||n.shouldCoalesceRunChangeDetection)&&r(),TE(n)}},onInvoke:(s,a,d,m,S,x,U)=>{try{return wE(n),s.invoke(d,m,S,x,U)}finally{n.shouldCoalesceRunChangeDetection&&r(),TE(n)}},onHasTask:(s,a,d,m)=>{s.hasTask(d,m),a===d&&("microTask"==m.change?(n._hasPendingMicrotasks=m.microTask,S_(n),T_(n)):"macroTask"==m.change&&(n.hasPendingMacrotasks=m.macroTask))},onHandleError:(s,a,d,m)=>(s.handleError(d,m),n.runOutsideAngular(()=>n.onError.emit(m)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wu.isInAngularZone())throw new Be(909,!1)}static assertNotInAngularZone(){if(wu.isInAngularZone())throw new Be(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,d){const m=this._inner,S=m.scheduleEventTask("NgZoneEvent: "+d,r,WD,qm,qm);try{return m.runTask(S,s,a)}finally{m.cancelTask(S)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const WD={};function T_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function S_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function wE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function TE(n){n._nesting--,T_(n)}class YD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lc,this.onMicrotaskEmpty=new lc,this.onStable=new lc,this.onError=new lc}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,d){return r.apply(s,a)}}const SE=new Jr(""),bE=new Jr("");let b_,QD=(()=>{class n{constructor(s,a,d){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,b_||(function ZD(n){b_=n}(d),d.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wu.assertNotInAngularZone(),w_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())w_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,d){let m=-1;a&&a>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(S=>S.timeoutId!==m),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:m,updateCb:d})}whenStable(s,a,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,d){return[]}}return n.\u0275fac=function(s){return new(s||n)(lr(wu),lr(AE),lr(bE))},n.\u0275prov=pn({token:n,factory:n.\u0275fac}),n})(),AE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return b_?.findTestabilityInTree(this,s,a)??null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=pn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Bc=!1;let bd=null;const ME=new Jr("AllowMultipleToken"),A_=new Jr("PlatformDestroyListeners"),PE=new Jr("appBootstrapListener");class JD{constructor(r,s){this.name=r,this.token=s}}function RE(n,r,s=[]){const a=`Platform: ${r}`,d=new Jr(a);return(m=[])=>{let S=M_();if(!S||S.injector.get(ME,!1)){const x=[...s,...m,{provide:d,useValue:!0}];n?n(x):function eC(n){if(bd&&!bd.get(ME,!1))throw new Be(400,!1);bd=n;const r=n.get(NE);(function OE(n){const r=n.get(DE,null);r&&r.forEach(s=>s())})(n)}(function xE(n=[],r){return Fu.create({name:r,providers:[{provide:Th,useValue:"platform"},{provide:A_,useValue:new Set([()=>bd=null])},...n]})}(x,a))}return function nC(n){const r=M_();if(!r)throw new Be(401,!1);return r}()}}function M_(){return bd?.get(NE)??null}let NE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const d=function FE(n,r){let s;return s="noop"===n?new YD:("zone.js"===n?void 0:n)||new wu(r),s}(a?.ngZone,function LE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(a)),m=[{provide:wu,useValue:d}];return d.run(()=>{const S=Fu.create({providers:m,parent:this.injector,name:s.moduleType.name}),x=s.create(S),U=x.injector.get(Ud,null);if(!U)throw new Be(402,!1);return d.runOutsideAngular(()=>{const X=d.onError.subscribe({next:de=>{U.handleError(de)}});x.onDestroy(()=>{ty(this._modules,x),X.unsubscribe()})}),function kE(n,r,s){try{const a=s();return rh(a)?a.catch(d=>{throw r.runOutsideAngular(()=>n.handleError(d)),d}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(U,d,()=>{const X=x.injector.get(Xm);return X.runInitializers(),X.donePromise.then(()=>(function i(n){Fn(n,"Expected localeId to be defined"),"string"==typeof n&&(eg=n.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Jm,Td)||Td),this._moduleDoBootstrap(x),x))})})}bootstrapModule(s,a=[]){const d=UE({},a);return function qD(n,r,s){const a=new a_(s);return Promise.resolve(a)}(0,0,s).then(m=>this.bootstrapModuleFactory(m,d))}_moduleDoBootstrap(s){const a=s.injector.get(ey);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(d=>a.bootstrap(d));else{if(!s.instance.ngDoBootstrap)throw new Be(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Be(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(A_,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(lr(Fu))},n.\u0275prov=pn({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function UE(n,r){return Array.isArray(r)?r.reduce(UE,n):{...n,...r}}let ey=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(s,a,d){this._zone=s,this._injector=a,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new ee.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),S=new ee.y(x=>{let U;this._zone.runOutsideAngular(()=>{U=this._zone.onStable.subscribe(()=>{wu.assertNotInAngularZone(),w_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const X=this._zone.onUnstable.subscribe(()=>{wu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{U.unsubscribe(),X.unsubscribe()}});this.isStable=(0,B.T)(m,S.pipe((0,q.B)()))}bootstrap(s,a){const d=s instanceof kd;if(!this._injector.get(Xm).done){!d&&ti(s);throw new Be(405,Bc)}let S;S=d?s:this._injector.get(Jc).resolveComponentFactory(s),this.componentTypes.push(S.componentType);const x=function XD(n){return n.isBoundToModule}(S)?void 0:this._injector.get(pf),X=S.create(Fu.NULL,[],a||S.selector,x),de=X.location.nativeElement,Ce=X.injector.get(SE,null);return Ce?.registerApplication(de),X.onDestroy(()=>{this.detachView(X.hostView),ty(this.components,X),Ce?.unregisterApplication(de)}),this._loadComponent(X),X}tick(){if(this._runningTick)throw new Be(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;ty(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(PE,[]);a.push(...this._bootstrapListeners),a.forEach(d=>d(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>ty(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Be(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(lr(wu),lr(Dc),lr(Ud))},n.\u0275prov=pn({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ty(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}function iC(){return!1}function sC(){}let oC=(()=>{class n{}return n.__NG_ELEMENT_ID__=aC,n})();function aC(n){return function lC(n,r,s){if(zs(n)&&!s){const a=qi(n.index,r);return new Mc(a,a)}return 47&n.type?new Mc(r[De],r):null}(zi(),yt(),16==(16&n))}class $E{constructor(){}supports(r){return fd(r)}create(r){return new pC(r)}}const fC=(n,r)=>r;class pC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||fC}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,d=0,m=null;for(;s||a;){const S=!a||s&&s.currentIndex<WE(a,d,m)?s:a,x=WE(S,d,m),U=S.currentIndex;if(S===a)d--,a=a._nextRemoved;else if(s=s._next,null==S.previousIndex)d++;else{m||(m=[]);const X=x-d,de=U-d;if(X!=de){for(let $e=0;$e<X;$e++){const ct=$e<m.length?m[$e]:m[$e]=0,Mt=ct+$e;de<=Mt&&Mt<X&&(m[$e]=ct+1)}m[S.previousIndex]=de-X}}x!==U&&r(S,x,U)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!fd(r))throw new Be(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let d,m,S,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let x=0;x<this.length;x++)m=r[x],S=this._trackByFn(x,m),null!==s&&Object.is(s.trackById,S)?(a&&(s=this._verifyReinsertion(s,m,S,x)),Object.is(s.item,m)||this._addIdentityChange(s,m)):(s=this._mismatch(s,m,S,x),a=!0),s=s._next}else d=0,function xy(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,x=>{S=this._trackByFn(d,x),null!==s&&Object.is(s.trackById,S)?(a&&(s=this._verifyReinsertion(s,x,S,d)),Object.is(s.item,x)||this._addIdentityChange(s,x)):(s=this._mismatch(s,x,S,d),a=!0),s=s._next,d++}),this.length=d;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,d){let m;return null===r?m=this._itTail:(m=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,m,d)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,d))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,m,d)):r=this._addAfter(new gC(s,a),m,d),r}_verifyReinsertion(r,s,a,d){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==m?r=this._reinsertAfter(m,r._prev,d):r.currentIndex!=d&&(r.currentIndex=d,this._addToMoves(r,d)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const d=r._prevRemoved,m=r._nextRemoved;return null===d?this._removalsHead=m:d._nextRemoved=m,null===m?this._removalsTail=d:m._prevRemoved=d,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const d=null===s?this._itHead:s._next;return r._next=d,r._prev=s,null===d?this._itTail=r:d._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new GE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new GE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class gC{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class GE{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new mC,this.map.set(s,a)),a.add(r)}get(r,s){const d=this.map.get(r);return d?d.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function WE(n,r,s){const a=n.previousIndex;if(null===a)return a;let d=0;return s&&a<s.length&&(d=s[a]),a+r+d}class zE{constructor(){}supports(r){return r instanceof Map||Sp(r)}create(){return new yC}}class yC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Sp(r)))throw new Be(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,d)=>{if(s&&s.key===d)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const m=this._getOrCreateRecordForKey(d,a);s=this._insertBeforeOrAppend(s,m)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const d=this._records.get(r);this._maybeAddToChanges(d,s);const m=d._prev,S=d._next;return m&&(m._next=S),S&&(S._prev=m),d._next=null,d._prev=null,d}const a=new _C(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class _C{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function KE(){return new N_([new $E])}let N_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(null!=a){const d=a.factories.slice();s=s.concat(d)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||KE()),deps:[[n,new aa,new Ia]]}}find(s){const a=this.factories.find(d=>d.supports(s));if(null!=a)return a;throw new Be(901,!1)}}return n.\u0275prov=pn({token:n,providedIn:"root",factory:KE}),n})();function YE(){return new L_([new zE])}let L_=(()=>{class n{constructor(s){this.factories=s}static create(s,a){if(a){const d=a.factories.slice();s=s.concat(d)}return new n(s)}static extend(s){return{provide:n,useFactory:a=>n.create(s,a||YE()),deps:[[n,new aa,new Ia]]}}find(s){const a=this.factories.find(d=>d.supports(s));if(a)return a;throw new Be(901,!1)}}return n.\u0275prov=pn({token:n,providedIn:"root",factory:YE}),n})();const DC=RE(null,"core",[]);let CC=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(lr(ey))},n.\u0275mod=nt({type:n}),n.\u0275inj=Tt({}),n})();function IC(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function TC(n,r){const s=hn(n),a=r.elementInjector||Ec();return new eh(s).create(a,r.projectableNodes,r.hostElement,r.environmentInjector)}},4006:(Se,ae,D)=>{D.d(ae,{CE:()=>Gn,Cf:()=>ze,EJ:()=>So,F:()=>er,Fd:()=>vo,Fj:()=>Ge,JJ:()=>dr,JL:()=>cn,JU:()=>K,K7:()=>so,Kr:()=>Hr,Mq:()=>We,NI:()=>oi,Oe:()=>Tr,On:()=>zt,Q7:()=>xs,UX:()=>Wo,Wl:()=>Z,YN:()=>Wi,_:()=>ri,_Y:()=>Jt,a5:()=>Vn,c5:()=>ms,cw:()=>ke,eT:()=>ii,gN:()=>kt,kI:()=>Ue,nD:()=>ls,oH:()=>zs,qQ:()=>Ss,qu:()=>Za,sg:()=>sr,u:()=>io,u5:()=>Un,wO:()=>vi,wV:()=>ur,x0:()=>bi});var f=D(4650),I=D(6895),ee=D(457),B=D(4128),q=D(4004);let ie=(()=>{class G{constructor(k,ce){this._renderer=k,this._elementRef=ce,this.onChange=et=>{},this.onTouched=()=>{}}setProperty(k,ce){this._renderer.setProperty(this._elementRef.nativeElement,k,ce)}registerOnTouched(k){this.onTouched=k}registerOnChange(k){this.onChange=k}setDisabledState(k){this.setProperty("disabled",k)}}return G.\u0275fac=function(k){return new(k||G)(f.Y36(f.Qsj),f.Y36(f.SBq))},G.\u0275dir=f.lG2({type:G}),G})(),te=(()=>{class G extends ie{}return G.\u0275fac=function(){let H;return function(ce){return(H||(H=f.n5z(G)))(ce||G)}}(),G.\u0275dir=f.lG2({type:G,features:[f.qOj]}),G})();const K=new f.OlP("NgValueAccessor"),ne={provide:K,useExisting:(0,f.Gpc)(()=>Z),multi:!0};let Z=(()=>{class G extends te{writeValue(k){this.setProperty("checked",k)}}return G.\u0275fac=function(){let H;return function(ce){return(H||(H=f.n5z(G)))(ce||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(k,ce){1&k&&f.NdJ("change",function(ln){return ce.onChange(ln.target.checked)})("blur",function(){return ce.onTouched()})},features:[f._Bn([ne]),f.qOj]}),G})();const le={provide:K,useExisting:(0,f.Gpc)(()=>Ge),multi:!0},Le=new f.OlP("CompositionEventMode");let Ge=(()=>{class G extends ie{constructor(k,ce,et){super(k,ce),this._compositionMode=et,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function fe(){const G=(0,I.q)()?(0,I.q)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(k){this.setProperty("value",k??"")}_handleInput(k){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(k)}_compositionStart(){this._composing=!0}_compositionEnd(k){this._composing=!1,this._compositionMode&&this.onChange(k)}}return G.\u0275fac=function(k){return new(k||G)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Le,8))},G.\u0275dir=f.lG2({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(k,ce){1&k&&f.NdJ("input",function(ln){return ce._handleInput(ln.target.value)})("blur",function(){return ce.onTouched()})("compositionstart",function(){return ce._compositionStart()})("compositionend",function(ln){return ce._compositionEnd(ln.target.value)})},features:[f._Bn([le]),f.qOj]}),G})();const je=!1;function Qe(G){return null==G||("string"==typeof G||Array.isArray(G))&&0===G.length}function Be(G){return null!=G&&"number"==typeof G.length}const ze=new f.OlP("NgValidators"),Ke=new f.OlP("NgAsyncValidators"),it=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ue{static min(H){return xe(H)}static max(H){return Ct(H)}static required(H){return It(H)}static requiredTrue(H){return function Ze(G){return!0===G.value?null:{required:!0}}(H)}static email(H){return function Pt(G){return Qe(G.value)||it.test(G.value)?null:{email:!0}}(H)}static minLength(H){return St(H)}static maxLength(H){return rt(H)}static pattern(H){return qe(H)}static nullValidator(H){return null}static compose(H){return Kt(H)}static composeAsync(H){return Cn(H)}}function xe(G){return H=>{if(Qe(H.value)||Qe(G))return null;const k=parseFloat(H.value);return!isNaN(k)&&k<G?{min:{min:G,actual:H.value}}:null}}function Ct(G){return H=>{if(Qe(H.value)||Qe(G))return null;const k=parseFloat(H.value);return!isNaN(k)&&k>G?{max:{max:G,actual:H.value}}:null}}function It(G){return Qe(G.value)?{required:!0}:null}function St(G){return H=>Qe(H.value)||!Be(H.value)?null:H.value.length<G?{minlength:{requiredLength:G,actualLength:H.value.length}}:null}function rt(G){return H=>Be(H.value)&&H.value.length>G?{maxlength:{requiredLength:G,actualLength:H.value.length}}:null}function qe(G){if(!G)return lt;let H,k;return"string"==typeof G?(k="","^"!==G.charAt(0)&&(k+="^"),k+=G,"$"!==G.charAt(G.length-1)&&(k+="$"),H=new RegExp(k)):(k=G.toString(),H=G),ce=>{if(Qe(ce.value))return null;const et=ce.value;return H.test(et)?null:{pattern:{requiredPattern:k,actualValue:et}}}}function lt(G){return null}function Xe(G){return null!=G}function vt(G){const H=(0,f.QGY)(G)?(0,ee.D)(G):G;if(je&&!(0,f.CqO)(H)){let k="Expected async validator to return Promise or Observable.";throw"object"==typeof G&&(k+=" Are you using a synchronous validator where an async validator is expected?"),new f.vHH(-1101,k)}return H}function At(G){let H={};return G.forEach(k=>{H=null!=k?{...H,...k}:H}),0===Object.keys(H).length?null:H}function gn(G,H){return H.map(k=>k(G))}function fn(G){return G.map(H=>function rr(G){return!G.validate}(H)?H:k=>H.validate(k))}function Kt(G){if(!G)return null;const H=G.filter(Xe);return 0==H.length?null:function(k){return At(gn(k,H))}}function Fn(G){return null!=G?Kt(fn(G)):null}function Cn(G){if(!G)return null;const H=G.filter(Xe);return 0==H.length?null:function(k){const ce=gn(k,H).map(vt);return(0,B.D)(ce).pipe((0,q.U)(At))}}function ir(G){return null!=G?Cn(fn(G)):null}function Kr(G,H){return null===G?[H]:Array.isArray(G)?[...G,H]:[G,H]}function Pn(G){return G._rawValidators}function pn(G){return G._rawAsyncValidators}function si(G){return G?Array.isArray(G)?G:[G]:[]}function Tt(G,H){return Array.isArray(G)?G.includes(H):G===H}function dt(G,H){const k=si(H);return si(G).forEach(et=>{Tt(k,et)||k.push(et)}),k}function Ve(G,H){return si(H).filter(k=>!Tt(G,k))}class _t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(H){this._rawValidators=H||[],this._composedValidatorFn=Fn(this._rawValidators)}_setAsyncValidators(H){this._rawAsyncValidators=H||[],this._composedAsyncValidatorFn=ir(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(H){this._onDestroyCallbacks.push(H)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(H=>H()),this._onDestroyCallbacks=[]}reset(H){this.control&&this.control.reset(H)}hasError(H,k){return!!this.control&&this.control.hasError(H,k)}getError(H,k){return this.control?this.control.getError(H,k):null}}class kt extends _t{get formDirective(){return null}get path(){return null}}class Vn extends _t{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qn{constructor(H){this._cd=H}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let dr=(()=>{class G extends qn{constructor(k){super(k)}}return G.\u0275fac=function(k){return new(k||G)(f.Y36(Vn,2))},G.\u0275dir=f.lG2({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(k,ce){2&k&&f.ekj("ng-untouched",ce.isUntouched)("ng-touched",ce.isTouched)("ng-pristine",ce.isPristine)("ng-dirty",ce.isDirty)("ng-valid",ce.isValid)("ng-invalid",ce.isInvalid)("ng-pending",ce.isPending)},features:[f.qOj]}),G})(),cn=(()=>{class G extends qn{constructor(k){super(k)}}return G.\u0275fac=function(k){return new(k||G)(f.Y36(kt,10))},G.\u0275dir=f.lG2({type:G,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(k,ce){2&k&&f.ekj("ng-untouched",ce.isUntouched)("ng-touched",ce.isTouched)("ng-pristine",ce.isPristine)("ng-dirty",ce.isDirty)("ng-valid",ce.isValid)("ng-invalid",ce.isInvalid)("ng-pending",ce.isPending)("ng-submitted",ce.isSubmitted)},features:[f.qOj]}),G})();function Br(G,H){return G?`with name: '${H}'`:`at index: ${H}`}const $n=!1,ss="VALID",lr="INVALID",Oi="PENDING",ei="DISABLED";function Je(G){return(ge(G)?G.validators:G)||null}function Ne(G,H){return(ge(H)?H.asyncValidators:G)||null}function ge(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}function ve(G,H,k){const ce=G.controls;if(!(H?Object.keys(ce):ce).length)throw new f.vHH(1e3,$n?function di(G){return`\n    There are no form controls registered with this ${G?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(H):"");if(!ce[k])throw new f.vHH(1001,$n?function vr(G,H){return`Cannot find form control ${Br(G,H)}`}(H,k):"")}function Ie(G,H,k){G._forEachChild((ce,et)=>{if(void 0===k[et])throw new f.vHH(1002,$n?function ki(G,H){return`Must supply a value for form control ${Br(G,H)}`}(H,et):"")})}class ot{constructor(H,k){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(H),this._assignAsyncValidators(k)}get validator(){return this._composedValidatorFn}set validator(H){this._rawValidators=this._composedValidatorFn=H}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(H){this._rawAsyncValidators=this._composedAsyncValidatorFn=H}get parent(){return this._parent}get valid(){return this.status===ss}get invalid(){return this.status===lr}get pending(){return this.status==Oi}get disabled(){return this.status===ei}get enabled(){return this.status!==ei}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(H){this._assignValidators(H)}setAsyncValidators(H){this._assignAsyncValidators(H)}addValidators(H){this.setValidators(dt(H,this._rawValidators))}addAsyncValidators(H){this.setAsyncValidators(dt(H,this._rawAsyncValidators))}removeValidators(H){this.setValidators(Ve(H,this._rawValidators))}removeAsyncValidators(H){this.setAsyncValidators(Ve(H,this._rawAsyncValidators))}hasValidator(H){return Tt(this._rawValidators,H)}hasAsyncValidator(H){return Tt(this._rawAsyncValidators,H)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(H={}){this.touched=!0,this._parent&&!H.onlySelf&&this._parent.markAsTouched(H)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(H=>H.markAllAsTouched())}markAsUntouched(H={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(k=>{k.markAsUntouched({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}markAsDirty(H={}){this.pristine=!1,this._parent&&!H.onlySelf&&this._parent.markAsDirty(H)}markAsPristine(H={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(k=>{k.markAsPristine({onlySelf:!0})}),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}markAsPending(H={}){this.status=Oi,!1!==H.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!H.onlySelf&&this._parent.markAsPending(H)}disable(H={}){const k=this._parentMarkedDirty(H.onlySelf);this.status=ei,this.errors=null,this._forEachChild(ce=>{ce.disable({...H,onlySelf:!0})}),this._updateValue(),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...H,skipPristineCheck:k}),this._onDisabledChange.forEach(ce=>ce(!0))}enable(H={}){const k=this._parentMarkedDirty(H.onlySelf);this.status=ss,this._forEachChild(ce=>{ce.enable({...H,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent}),this._updateAncestors({...H,skipPristineCheck:k}),this._onDisabledChange.forEach(ce=>ce(!1))}_updateAncestors(H){this._parent&&!H.onlySelf&&(this._parent.updateValueAndValidity(H),H.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(H){this._parent=H}getRawValue(){return this.value}updateValueAndValidity(H={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ss||this.status===Oi)&&this._runAsyncValidator(H.emitEvent)),!1!==H.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!H.onlySelf&&this._parent.updateValueAndValidity(H)}_updateTreeValidity(H={emitEvent:!0}){this._forEachChild(k=>k._updateTreeValidity(H)),this.updateValueAndValidity({onlySelf:!0,emitEvent:H.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ei:ss}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(H){if(this.asyncValidator){this.status=Oi,this._hasOwnPendingAsyncValidator=!0;const k=vt(this.asyncValidator(this));this._asyncValidationSubscription=k.subscribe(ce=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ce,{emitEvent:H})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(H,k={}){this.errors=H,this._updateControlsErrors(!1!==k.emitEvent)}get(H){let k=H;return null==k||(Array.isArray(k)||(k=k.split(".")),0===k.length)?null:k.reduce((ce,et)=>ce&&ce._find(et),this)}getError(H,k){const ce=k?this.get(k):this;return ce&&ce.errors?ce.errors[H]:null}hasError(H,k){return!!this.getError(H,k)}get root(){let H=this;for(;H._parent;)H=H._parent;return H}_updateControlsErrors(H){this.status=this._calculateStatus(),H&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(H)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?ei:this.errors?lr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oi)?Oi:this._anyControlsHaveStatus(lr)?lr:ss}_anyControlsHaveStatus(H){return this._anyControls(k=>k.status===H)}_anyControlsDirty(){return this._anyControls(H=>H.dirty)}_anyControlsTouched(){return this._anyControls(H=>H.touched)}_updatePristine(H={}){this.pristine=!this._anyControlsDirty(),this._parent&&!H.onlySelf&&this._parent._updatePristine(H)}_updateTouched(H={}){this.touched=this._anyControlsTouched(),this._parent&&!H.onlySelf&&this._parent._updateTouched(H)}_registerOnCollectionChange(H){this._onCollectionChange=H}_setUpdateStrategy(H){ge(H)&&null!=H.updateOn&&(this._updateOn=H.updateOn)}_parentMarkedDirty(H){return!H&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(H){return null}_assignValidators(H){this._rawValidators=Array.isArray(H)?H.slice():H,this._composedValidatorFn=function be(G){return Array.isArray(G)?Fn(G):G||null}(this._rawValidators)}_assignAsyncValidators(H){this._rawAsyncValidators=Array.isArray(H)?H.slice():H,this._composedAsyncValidatorFn=function Ot(G){return Array.isArray(G)?ir(G):G||null}(this._rawAsyncValidators)}}class ke extends ot{constructor(H,k,ce){super(Je(k),Ne(ce,k)),this.controls=H,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(H,k){return this.controls[H]?this.controls[H]:(this.controls[H]=k,k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange),k)}addControl(H,k,ce={}){this.registerControl(H,k),this.updateValueAndValidity({emitEvent:ce.emitEvent}),this._onCollectionChange()}removeControl(H,k={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}setControl(H,k,ce={}){this.controls[H]&&this.controls[H]._registerOnCollectionChange(()=>{}),delete this.controls[H],k&&this.registerControl(H,k),this.updateValueAndValidity({emitEvent:ce.emitEvent}),this._onCollectionChange()}contains(H){return this.controls.hasOwnProperty(H)&&this.controls[H].enabled}setValue(H,k={}){Ie(this,!0,H),Object.keys(H).forEach(ce=>{ve(this,!0,ce),this.controls[ce].setValue(H[ce],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue(H,k={}){null!=H&&(Object.keys(H).forEach(ce=>{const et=this.controls[ce];et&&et.patchValue(H[ce],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset(H={},k={}){this._forEachChild((ce,et)=>{ce.reset(H[et],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this._reduceChildren({},(H,k,ce)=>(H[ce]=k.getRawValue(),H))}_syncPendingControls(){let H=this._reduceChildren(!1,(k,ce)=>!!ce._syncPendingControls()||k);return H&&this.updateValueAndValidity({onlySelf:!0}),H}_forEachChild(H){Object.keys(this.controls).forEach(k=>{const ce=this.controls[k];ce&&H(ce,k)})}_setUpControls(){this._forEachChild(H=>{H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(H){for(const[k,ce]of Object.entries(this.controls))if(this.contains(k)&&H(ce))return!0;return!1}_reduceValue(){return this._reduceChildren({},(k,ce,et)=>((ce.enabled||this.disabled)&&(k[et]=ce.value),k))}_reduceChildren(H,k){let ce=H;return this._forEachChild((et,ln)=>{ce=k(ce,et,ln)}),ce}_allControlsDisabled(){for(const H of Object.keys(this.controls))if(this.controls[H].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(H){return this.controls.hasOwnProperty(H)?this.controls[H]:null}}class Re extends ke{}const he=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Me}),Me="always";function Ye(G,H){return[...H.path,G]}function Vt(G,H,k=Me){Ti(G,H),H.valueAccessor.writeValue(G.value),(G.disabled||"always"===k)&&H.valueAccessor.setDisabledState?.(G.disabled),function nt(G,H){H.valueAccessor.registerOnChange(k=>{G._pendingValue=k,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&Xt(G,H)})}(G,H),function On(G,H){const k=(ce,et)=>{H.valueAccessor.writeValue(ce),et&&H.viewToModelUpdate(ce)};G.registerOnChange(k),H._registerOnDestroy(()=>{G._unregisterOnChange(k)})}(G,H),function Nt(G,H){H.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&Xt(G,H),"submit"!==G.updateOn&&G.markAsTouched()})}(G,H),function Cr(G,H){if(H.valueAccessor.setDisabledState){const k=ce=>{H.valueAccessor.setDisabledState(ce)};G.registerOnDisabledChange(k),H._registerOnDestroy(()=>{G._unregisterOnDisabledChange(k)})}}(G,H)}function sn(G,H,k=!0){const ce=()=>{};H.valueAccessor&&(H.valueAccessor.registerOnChange(ce),H.valueAccessor.registerOnTouched(ce)),gt(G,H),G&&(H._invokeOnDestroyCallbacks(),G._registerOnCollectionChange(()=>{}))}function Xn(G,H){G.forEach(k=>{k.registerOnValidatorChange&&k.registerOnValidatorChange(H)})}function Ti(G,H){const k=Pn(G);null!==H.validator?G.setValidators(Kr(k,H.validator)):"function"==typeof k&&G.setValidators([k]);const ce=pn(G);null!==H.asyncValidator?G.setAsyncValidators(Kr(ce,H.asyncValidator)):"function"==typeof ce&&G.setAsyncValidators([ce]);const et=()=>G.updateValueAndValidity();Xn(H._rawValidators,et),Xn(H._rawAsyncValidators,et)}function gt(G,H){let k=!1;if(null!==G){if(null!==H.validator){const et=Pn(G);if(Array.isArray(et)&&et.length>0){const ln=et.filter(Gr=>Gr!==H.validator);ln.length!==et.length&&(k=!0,G.setValidators(ln))}}if(null!==H.asyncValidator){const et=pn(G);if(Array.isArray(et)&&et.length>0){const ln=et.filter(Gr=>Gr!==H.asyncValidator);ln.length!==et.length&&(k=!0,G.setAsyncValidators(ln))}}}const ce=()=>{};return Xn(H._rawValidators,ce),Xn(H._rawAsyncValidators,ce),k}function Xt(G,H){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),H.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function Zn(G,H){Ti(G,H)}function Ui(G,H){if(!G.hasOwnProperty("model"))return!1;const k=G.model;return!!k.isFirstChange()||!Object.is(H,k.currentValue)}function jr(G,H){G._syncPendingControls(),H.forEach(k=>{const ce=k.control;"submit"===ce.updateOn&&ce._pendingChange&&(k.viewToModelUpdate(ce._pendingValue),ce._pendingChange=!1)})}function Bt(G,H){if(!H)return null;let k,ce,et;return Array.isArray(H),H.forEach(ln=>{ln.constructor===Ge?k=ln:function os(G){return Object.getPrototypeOf(G.constructor)===te}(ln)?ce=ln:et=ln}),et||ce||k||null}const An={provide:kt,useExisting:(0,f.Gpc)(()=>er)},In=(()=>Promise.resolve())();let er=(()=>{class G extends kt{constructor(k,ce,et){super(),this.callSetDisabledState=et,this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new ke({},Fn(k),ir(ce))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(k){In.then(()=>{const ce=this._findContainer(k.path);k.control=ce.registerControl(k.name,k.control),Vt(k.control,k,this.callSetDisabledState),k.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(k)})}getControl(k){return this.form.get(k.path)}removeControl(k){In.then(()=>{const ce=this._findContainer(k.path);ce&&ce.removeControl(k.name),this._directives.delete(k)})}addFormGroup(k){In.then(()=>{const ce=this._findContainer(k.path),et=new ke({});Zn(et,k),ce.registerControl(k.name,et),et.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(k){In.then(()=>{const ce=this._findContainer(k.path);ce&&ce.removeControl(k.name)})}getFormGroup(k){return this.form.get(k.path)}updateModel(k,ce){In.then(()=>{this.form.get(k.path).setValue(ce)})}setValue(k){this.control.setValue(k)}onSubmit(k){return this.submitted=!0,jr(this.form,this._directives),this.ngSubmit.emit(k),"dialog"===k?.target?.method}onReset(){this.resetForm()}resetForm(k){this.form.reset(k),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(k){return k.pop(),k.length?this.form.get(k):this.form}}return G.\u0275fac=function(k){return new(k||G)(f.Y36(ze,10),f.Y36(Ke,10),f.Y36(he,8))},G.\u0275dir=f.lG2({type:G,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(k,ce){1&k&&f.NdJ("submit",function(ln){return ce.onSubmit(ln)})("reset",function(){return ce.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([An]),f.qOj]}),G})();function yr(G,H){const k=G.indexOf(H);k>-1&&G.splice(k,1)}function Ar(G){return"object"==typeof G&&null!==G&&2===Object.keys(G).length&&"value"in G&&"disabled"in G}const oi=class extends ot{constructor(H=null,k,ce){super(Je(k),Ne(ce,k)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(H),this._setUpdateStrategy(k),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ge(k)&&(k.nonNullable||k.initialValueIsDefault)&&(this.defaultValue=Ar(H)?H.value:H)}setValue(H,k={}){this.value=this._pendingValue=H,this._onChange.length&&!1!==k.emitModelToViewChange&&this._onChange.forEach(ce=>ce(this.value,!1!==k.emitViewToModelChange)),this.updateValueAndValidity(k)}patchValue(H,k={}){this.setValue(H,k)}reset(H=this.defaultValue,k={}){this._applyFormState(H),this.markAsPristine(k),this.markAsUntouched(k),this.setValue(this.value,k),this._pendingChange=!1}_updateValue(){}_anyControls(H){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(H){this._onChange.push(H)}_unregisterOnChange(H){yr(this._onChange,H)}registerOnDisabledChange(H){this._onDisabledChange.push(H)}_unregisterOnDisabledChange(H){yr(this._onDisabledChange,H)}_forEachChild(H){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(H){Ar(H)?(this.value=this._pendingValue=H.value,H.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=H}};let Er=(()=>{class G extends kt{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Ye(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return G.\u0275fac=function(){let H;return function(ce){return(H||(H=f.n5z(G)))(ce||G)}}(),G.\u0275dir=f.lG2({type:G,features:[f.qOj]}),G})();const at={provide:kt,useExisting:(0,f.Gpc)(()=>We)};let We=(()=>{class G extends Er{constructor(k,ce,et){super(),this._parent=k,this._setValidators(ce),this._setAsyncValidators(et)}_checkParentType(){}}return G.\u0275fac=function(k){return new(k||G)(f.Y36(kt,5),f.Y36(ze,10),f.Y36(Ke,10))},G.\u0275dir=f.lG2({type:G,selectors:[["","ngModelGroup",""]],inputs:{name:["ngModelGroup","name"]},exportAs:["ngModelGroup"],features:[f._Bn([at]),f.qOj]}),G})();const mt={provide:Vn,useExisting:(0,f.Gpc)(()=>zt)},Ht=(()=>Promise.resolve())();let zt=(()=>{class G extends Vn{constructor(k,ce,et,ln,Gr,yt){super(),this._changeDetectorRef=Gr,this.callSetDisabledState=yt,this.control=new oi,this._registered=!1,this.update=new f.vpe,this._parent=k,this._setValidators(ce),this._setAsyncValidators(et),this.valueAccessor=Bt(0,ln)}ngOnChanges(k){if(this._checkForErrors(),!this._registered||"name"in k){if(this._registered&&(this._checkName(),this.formDirective)){const ce=k.name.previousValue;this.formDirective.removeControl({name:ce,path:this._getPath(ce)})}this._setUpControl()}"isDisabled"in k&&this._updateDisabled(k),Ui(k,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Vt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(k){Ht.then(()=>{this.control.setValue(k,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(k){const ce=k.isDisabled.currentValue,et=0!==ce&&(0,f.D6c)(ce);Ht.then(()=>{et&&!this.control.disabled?this.control.disable():!et&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(k){return this._parent?Ye(k,this._parent):[k]}}return G.\u0275fac=function(k){return new(k||G)(f.Y36(kt,9),f.Y36(ze,10),f.Y36(Ke,10),f.Y36(K,10),f.Y36(f.sBO,8),f.Y36(he,8))},G.\u0275dir=f.lG2({type:G,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([mt]),f.qOj,f.TTD]}),G})(),Jt=(()=>{class G{}return G.\u0275fac=function(k){return new(k||G)},G.\u0275dir=f.lG2({type:G,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),G})();const pr={provide:K,useExisting:(0,f.Gpc)(()=>ur),multi:!0};let ur=(()=>{class G extends te{writeValue(k){this.setProperty("value",k??"")}registerOnChange(k){this.onChange=ce=>{k(""==ce?null:parseFloat(ce))}}}return G.\u0275fac=function(){let H;return function(ce){return(H||(H=f.n5z(G)))(ce||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(k,ce){1&k&&f.NdJ("input",function(ln){return ce.onChange(ln.target.value)})("blur",function(){return ce.onTouched()})},features:[f._Bn([pr]),f.qOj]}),G})();const hi={provide:K,useExisting:(0,f.Gpc)(()=>ri),multi:!0};let Mr=(()=>{class G{}return G.\u0275fac=function(k){return new(k||G)},G.\u0275mod=f.oAB({type:G}),G.\u0275inj=f.cJS({}),G})(),Si=(()=>{class G{constructor(){this._accessors=[]}add(k,ce){this._accessors.push([k,ce])}remove(k){for(let ce=this._accessors.length-1;ce>=0;--ce)if(this._accessors[ce][1]===k)return void this._accessors.splice(ce,1)}select(k){this._accessors.forEach(ce=>{this._isSameGroup(ce,k)&&ce[1]!==k&&ce[1].fireUncheck(k.value)})}_isSameGroup(k,ce){return!!k[0].control&&k[0]._parent===ce._control._parent&&k[1].name===ce.name}}return G.\u0275fac=function(k){return new(k||G)},G.\u0275prov=f.Yz7({token:G,factory:G.\u0275fac,providedIn:Mr}),G})(),ri=(()=>{class G extends te{constructor(k,ce,et,ln){super(k,ce),this._registry=et,this._injector=ln,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,f.f3M)(he,{optional:!0})??Me}ngOnInit(){this._control=this._injector.get(Vn),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(k){this._state=k===this.value,this.setProperty("checked",this._state)}registerOnChange(k){this._fn=k,this.onChange=()=>{k(this.value),this._registry.select(this)}}setDisabledState(k){(this.setDisabledStateFired||k||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",k),this.setDisabledStateFired=!0}fireUncheck(k){this.writeValue(k)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return G.\u0275fac=function(k){return new(k||G)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Si),f.Y36(f.zs3))},G.\u0275dir=f.lG2({type:G,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(k,ce){1&k&&f.NdJ("change",function(){return ce.onChange()})("blur",function(){return ce.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[f._Bn([hi]),f.qOj]}),G})();const Ta={provide:K,useExisting:(0,f.Gpc)(()=>ii),multi:!0};let ii=(()=>{class G extends te{writeValue(k){this.setProperty("value",parseFloat(k))}registerOnChange(k){this.onChange=ce=>{k(""==ce?null:parseFloat(ce))}}}return G.\u0275fac=function(){let H;return function(ce){return(H||(H=f.n5z(G)))(ce||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(k,ce){1&k&&f.NdJ("change",function(ln){return ce.onChange(ln.target.value)})("input",function(ln){return ce.onChange(ln.target.value)})("blur",function(){return ce.onTouched()})},features:[f._Bn([Ta]),f.qOj]}),G})();const wn=new f.OlP("NgModelWithFormControlWarning"),Ps={provide:Vn,useExisting:(0,f.Gpc)(()=>zs)};let zs=(()=>{class G extends Vn{set isDisabled(k){}constructor(k,ce,et,ln,Gr){super(),this._ngModelWarningConfig=ln,this.callSetDisabledState=Gr,this.update=new f.vpe,this._ngModelWarningSent=!1,this._setValidators(k),this._setAsyncValidators(ce),this.valueAccessor=Bt(0,et)}ngOnChanges(k){if(this._isControlChanged(k)){const ce=k.form.previousValue;ce&&sn(ce,this,!1),Vt(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Ui(k,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&sn(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}_isControlChanged(k){return k.hasOwnProperty("form")}}return G._ngModelWarningSentOnce=!1,G.\u0275fac=function(k){return new(k||G)(f.Y36(ze,10),f.Y36(Ke,10),f.Y36(K,10),f.Y36(wn,8),f.Y36(he,8))},G.\u0275dir=f.lG2({type:G,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[f._Bn([Ps]),f.qOj,f.TTD]}),G})();const Gi={provide:kt,useExisting:(0,f.Gpc)(()=>sr)};let sr=(()=>{class G extends kt{constructor(k,ce,et){super(),this.callSetDisabledState=et,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(k),this._setAsyncValidators(ce)}ngOnChanges(k){this._checkFormPresent(),k.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(gt(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(k){const ce=this.form.get(k.path);return Vt(ce,k,this.callSetDisabledState),ce.updateValueAndValidity({emitEvent:!1}),this.directives.push(k),ce}getControl(k){return this.form.get(k.path)}removeControl(k){sn(k.control||null,k,!1),function bn(G,H){const k=G.indexOf(H);k>-1&&G.splice(k,1)}(this.directives,k)}addFormGroup(k){this._setUpFormContainer(k)}removeFormGroup(k){this._cleanUpFormContainer(k)}getFormGroup(k){return this.form.get(k.path)}addFormArray(k){this._setUpFormContainer(k)}removeFormArray(k){this._cleanUpFormContainer(k)}getFormArray(k){return this.form.get(k.path)}updateModel(k,ce){this.form.get(k.path).setValue(ce)}onSubmit(k){return this.submitted=!0,jr(this.form,this.directives),this.ngSubmit.emit(k),"dialog"===k?.target?.method}onReset(){this.resetForm()}resetForm(k){this.form.reset(k),this.submitted=!1}_updateDomValue(){this.directives.forEach(k=>{const ce=k.control,et=this.form.get(k.path);ce!==et&&(sn(ce||null,k),(G=>G instanceof oi)(et)&&(Vt(et,k,this.callSetDisabledState),k.control=et))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(k){const ce=this.form.get(k.path);Zn(ce,k),ce.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(k){if(this.form){const ce=this.form.get(k.path);ce&&function hn(G,H){return gt(G,H)}(ce,k)&&ce.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ti(this.form,this),this._oldForm&&gt(this._oldForm,this)}_checkFormPresent(){}}return G.\u0275fac=function(k){return new(k||G)(f.Y36(ze,10),f.Y36(Ke,10),f.Y36(he,8))},G.\u0275dir=f.lG2({type:G,selectors:[["","formGroup",""]],hostBindings:function(k,ce){1&k&&f.NdJ("submit",function(ln){return ce.onSubmit(ln)})("reset",function(){return ce.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([Gi]),f.qOj,f.TTD]}),G})();const ro={provide:kt,useExisting:(0,f.Gpc)(()=>bi)};let bi=(()=>{class G extends Er{constructor(k,ce,et){super(),this._parent=k,this._setValidators(ce),this._setAsyncValidators(et)}_checkParentType(){mo(this._parent)}}return G.\u0275fac=function(k){return new(k||G)(f.Y36(kt,13),f.Y36(ze,10),f.Y36(Ke,10))},G.\u0275dir=f.lG2({type:G,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[f._Bn([ro]),f.qOj]}),G})();const Os={provide:kt,useExisting:(0,f.Gpc)(()=>Gn)};let Gn=(()=>{class G extends kt{constructor(k,ce,et){super(),this._parent=k,this._setValidators(ce),this._setAsyncValidators(et)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Ye(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){mo(this._parent)}}return G.\u0275fac=function(k){return new(k||G)(f.Y36(kt,13),f.Y36(ze,10),f.Y36(Ke,10))},G.\u0275dir=f.lG2({type:G,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[f._Bn([Os]),f.qOj]}),G})();function mo(G){return!(G instanceof bi||G instanceof sr||G instanceof Gn)}const Ks={provide:Vn,useExisting:(0,f.Gpc)(()=>io)};let io=(()=>{class G extends Vn{set isDisabled(k){}constructor(k,ce,et,ln,Gr){super(),this._ngModelWarningConfig=Gr,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=k,this._setValidators(ce),this._setAsyncValidators(et),this.valueAccessor=Bt(0,ln)}ngOnChanges(k){this._added||this._setUpControl(),Ui(k,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}get path(){return Ye(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return G._ngModelWarningSentOnce=!1,G.\u0275fac=function(k){return new(k||G)(f.Y36(kt,13),f.Y36(ze,10),f.Y36(Ke,10),f.Y36(K,10),f.Y36(wn,8))},G.\u0275dir=f.lG2({type:G,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([Ks]),f.qOj,f.TTD]}),G})();const bl={provide:K,useExisting:(0,f.Gpc)(()=>So),multi:!0};function Bo(G,H){return null==G?`${H}`:(H&&"object"==typeof H&&(H="Object"),`${G}: ${H}`.slice(0,50))}let So=(()=>{class G extends te{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(k){this._compareWith=k}writeValue(k){this.value=k;const et=Bo(this._getOptionId(k),k);this.setProperty("value",et)}registerOnChange(k){this.onChange=ce=>{this.value=this._getOptionValue(ce),k(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(k){for(const ce of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ce),k))return ce;return null}_getOptionValue(k){const ce=function To(G){return G.split(":")[0]}(k);return this._optionMap.has(ce)?this._optionMap.get(ce):k}}return G.\u0275fac=function(){let H;return function(ce){return(H||(H=f.n5z(G)))(ce||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(k,ce){1&k&&f.NdJ("change",function(ln){return ce.onChange(ln.target.value)})("blur",function(){return ce.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([bl]),f.qOj]}),G})(),Wi=(()=>{class G{constructor(k,ce,et){this._element=k,this._renderer=ce,this._select=et,this._select&&(this.id=this._select._registerOption())}set ngValue(k){null!=this._select&&(this._select._optionMap.set(this.id,k),this._setElementValue(Bo(this.id,k)),this._select.writeValue(this._select.value))}set value(k){this._setElementValue(k),this._select&&this._select.writeValue(this._select.value)}_setElementValue(k){this._renderer.setProperty(this._element.nativeElement,"value",k)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return G.\u0275fac=function(k){return new(k||G)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(So,9))},G.\u0275dir=f.lG2({type:G,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),G})();const Sa={provide:K,useExisting:(0,f.Gpc)(()=>so),multi:!0};function yo(G,H){return null==G?`${H}`:("string"==typeof H&&(H=`'${H}'`),H&&"object"==typeof H&&(H="Object"),`${G}: ${H}`.slice(0,50))}let so=(()=>{class G extends te{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(k){this._compareWith=k}writeValue(k){let ce;if(this.value=k,Array.isArray(k)){const et=k.map(ln=>this._getOptionId(ln));ce=(ln,Gr)=>{ln._setSelected(et.indexOf(Gr.toString())>-1)}}else ce=(et,ln)=>{et._setSelected(!1)};this._optionMap.forEach(ce)}registerOnChange(k){this.onChange=ce=>{const et=[],ln=ce.selectedOptions;if(void 0!==ln){const Gr=ln;for(let yt=0;yt<Gr.length;yt++){const zo=this._getOptionValue(Gr[yt].value);et.push(zo)}}else{const Gr=ce.options;for(let yt=0;yt<Gr.length;yt++){const cr=Gr[yt];if(cr.selected){const zo=this._getOptionValue(cr.value);et.push(zo)}}}this.value=et,k(et)}}_registerOption(k){const ce=(this._idCounter++).toString();return this._optionMap.set(ce,k),ce}_getOptionId(k){for(const ce of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ce)._value,k))return ce;return null}_getOptionValue(k){const ce=function Qi(G){return G.split(":")[0]}(k);return this._optionMap.has(ce)?this._optionMap.get(ce)._value:k}}return G.\u0275fac=function(){let H;return function(ce){return(H||(H=f.n5z(G)))(ce||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(k,ce){1&k&&f.NdJ("change",function(ln){return ce.onChange(ln.target)})("blur",function(){return ce.onTouched()})},inputs:{compareWith:"compareWith"},features:[f._Bn([Sa]),f.qOj]}),G})(),Hr=(()=>{class G{constructor(k,ce,et){this._element=k,this._renderer=ce,this._select=et,this._select&&(this.id=this._select._registerOption(this))}set ngValue(k){null!=this._select&&(this._value=k,this._setElementValue(yo(this.id,k)),this._select.writeValue(this._select.value))}set value(k){this._select?(this._value=k,this._setElementValue(yo(this.id,k)),this._select.writeValue(this._select.value)):this._setElementValue(k)}_setElementValue(k){this._renderer.setProperty(this._element.nativeElement,"value",k)}_setSelected(k){this._renderer.setProperty(this._element.nativeElement,"selected",k)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return G.\u0275fac=function(k){return new(k||G)(f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(so,9))},G.\u0275dir=f.lG2({type:G,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),G})();function _o(G){return"number"==typeof G?G:parseInt(G,10)}function jo(G){return"number"==typeof G?G:parseFloat(G)}let Rs=(()=>{class G{constructor(){this._validator=lt}ngOnChanges(k){if(this.inputName in k){const ce=this.normalizeInput(k[this.inputName].currentValue);this._enabled=this.enabled(ce),this._validator=this._enabled?this.createValidator(ce):lt,this._onChange&&this._onChange()}}validate(k){return this._validator(k)}registerOnValidatorChange(k){this._onChange=k}enabled(k){return null!=k}}return G.\u0275fac=function(k){return new(k||G)},G.\u0275dir=f.lG2({type:G,features:[f.TTD]}),G})();const oo={provide:ze,useExisting:(0,f.Gpc)(()=>vo),multi:!0};let vo=(()=>{class G extends Rs{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=k=>jo(k),this.createValidator=k=>Ct(k)}}return G.\u0275fac=function(){let H;return function(ce){return(H||(H=f.n5z(G)))(ce||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(k,ce){2&k&&f.uIk("max",ce._enabled?ce.max:null)},inputs:{max:"max"},features:[f._Bn([oo]),f.qOj]}),G})();const gs={provide:ze,useExisting:(0,f.Gpc)(()=>Ss),multi:!0};let Ss=(()=>{class G extends Rs{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=k=>jo(k),this.createValidator=k=>xe(k)}}return G.\u0275fac=function(){let H;return function(ce){return(H||(H=f.n5z(G)))(ce||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(k,ce){2&k&&f.uIk("min",ce._enabled?ce.min:null)},inputs:{min:"min"},features:[f._Bn([gs]),f.qOj]}),G})();const kn={provide:ze,useExisting:(0,f.Gpc)(()=>xs),multi:!0};let xs=(()=>{class G extends Rs{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.D6c,this.createValidator=k=>It}enabled(k){return k}}return G.\u0275fac=function(){let H;return function(ce){return(H||(H=f.n5z(G)))(ce||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(k,ce){2&k&&f.uIk("required",ce._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([kn]),f.qOj]}),G})();const Ho={provide:ze,useExisting:(0,f.Gpc)(()=>vi),multi:!0};let vi=(()=>{class G extends Rs{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=k=>_o(k),this.createValidator=k=>St(k)}}return G.\u0275fac=function(){let H;return function(ce){return(H||(H=f.n5z(G)))(ce||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(k,ce){2&k&&f.uIk("minlength",ce._enabled?ce.minlength:null)},inputs:{minlength:"minlength"},features:[f._Bn([Ho]),f.qOj]}),G})();const ao={provide:ze,useExisting:(0,f.Gpc)(()=>ls),multi:!0};let ls=(()=>{class G extends Rs{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=k=>_o(k),this.createValidator=k=>rt(k)}}return G.\u0275fac=function(){let H;return function(ce){return(H||(H=f.n5z(G)))(ce||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(k,ce){2&k&&f.uIk("maxlength",ce._enabled?ce.maxlength:null)},inputs:{maxlength:"maxlength"},features:[f._Bn([ao]),f.qOj]}),G})();const $r={provide:ze,useExisting:(0,f.Gpc)(()=>ms),multi:!0};let ms=(()=>{class G extends Rs{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=k=>k,this.createValidator=k=>qe(k)}}return G.\u0275fac=function(){let H;return function(ce){return(H||(H=f.n5z(G)))(ce||G)}}(),G.\u0275dir=f.lG2({type:G,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(k,ce){2&k&&f.uIk("pattern",ce._enabled?ce.pattern:null)},inputs:{pattern:"pattern"},features:[f._Bn([$r]),f.qOj]}),G})(),Go=(()=>{class G{}return G.\u0275fac=function(k){return new(k||G)},G.\u0275mod=f.oAB({type:G}),G.\u0275inj=f.cJS({imports:[Mr]}),G})();class Tr extends ot{constructor(H,k,ce){super(Je(k),Ne(ce,k)),this.controls=H,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(H){return this.controls[this._adjustIndex(H)]}push(H,k={}){this.controls.push(H),this._registerControl(H),this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}insert(H,k,ce={}){this.controls.splice(H,0,k),this._registerControl(k),this.updateValueAndValidity({emitEvent:ce.emitEvent})}removeAt(H,k={}){let ce=this._adjustIndex(H);ce<0&&(ce=0),this.controls[ce]&&this.controls[ce]._registerOnCollectionChange(()=>{}),this.controls.splice(ce,1),this.updateValueAndValidity({emitEvent:k.emitEvent})}setControl(H,k,ce={}){let et=this._adjustIndex(H);et<0&&(et=0),this.controls[et]&&this.controls[et]._registerOnCollectionChange(()=>{}),this.controls.splice(et,1),k&&(this.controls.splice(et,0,k),this._registerControl(k)),this.updateValueAndValidity({emitEvent:ce.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(H,k={}){Ie(this,!1,H),H.forEach((ce,et)=>{ve(this,!1,et),this.at(et).setValue(ce,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue(H,k={}){null!=H&&(H.forEach((ce,et)=>{this.at(et)&&this.at(et).patchValue(ce,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset(H=[],k={}){this._forEachChild((ce,et)=>{ce.reset(H[et],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this.controls.map(H=>H.getRawValue())}clear(H={}){this.controls.length<1||(this._forEachChild(k=>k._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:H.emitEvent}))}_adjustIndex(H){return H<0?H+this.length:H}_syncPendingControls(){let H=this.controls.reduce((k,ce)=>!!ce._syncPendingControls()||k,!1);return H&&this.updateValueAndValidity({onlySelf:!0}),H}_forEachChild(H){this.controls.forEach((k,ce)=>{H(k,ce)})}_updateValue(){this.value=this.controls.filter(H=>H.enabled||this.disabled).map(H=>H.value)}_anyControls(H){return this.controls.some(k=>k.enabled&&H(k))}_setUpControls(){this._forEachChild(H=>this._registerControl(H))}_allControlsDisabled(){for(const H of this.controls)if(H.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(H){H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange)}_find(H){return this.at(H)??null}}function Ns(G){return!!G&&(void 0!==G.asyncValidators||void 0!==G.validators||void 0!==G.updateOn)}let Za=(()=>{class G{constructor(){this.useNonNullable=!1}get nonNullable(){const k=new G;return k.useNonNullable=!0,k}group(k,ce=null){const et=this._reduceControls(k);let ln={};return Ns(ce)?ln=ce:null!==ce&&(ln.validators=ce.validator,ln.asyncValidators=ce.asyncValidator),new ke(et,ln)}record(k,ce=null){const et=this._reduceControls(k);return new Re(et,ce)}control(k,ce,et){let ln={};return this.useNonNullable?(Ns(ce)?ln=ce:(ln.validators=ce,ln.asyncValidators=et),new oi(k,{...ln,nonNullable:!0})):new oi(k,ce,et)}array(k,ce,et){const ln=k.map(Gr=>this._createControl(Gr));return new Tr(ln,ce,et)}_reduceControls(k){const ce={};return Object.keys(k).forEach(et=>{ce[et]=this._createControl(k[et])}),ce}_createControl(k){return k instanceof oi||k instanceof ot?k:Array.isArray(k)?this.control(k[0],k.length>1?k[1]:null,k.length>2?k[2]:null):this.control(k)}}return G.\u0275fac=function(k){return new(k||G)},G.\u0275prov=f.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"}),G})(),Un=(()=>{class G{static withConfig(k){return{ngModule:G,providers:[{provide:he,useValue:k.callSetDisabledState??Me}]}}}return G.\u0275fac=function(k){return new(k||G)},G.\u0275mod=f.oAB({type:G}),G.\u0275inj=f.cJS({imports:[Go]}),G})(),Wo=(()=>{class G{static withConfig(k){return{ngModule:G,providers:[{provide:wn,useValue:k.warnOnNgModelWithFormControl??"always"},{provide:he,useValue:k.callSetDisabledState??Me}]}}}return G.\u0275fac=function(k){return new(k||G)},G.\u0275mod=f.oAB({type:G}),G.\u0275inj=f.cJS({imports:[Go]}),G})()},1481:(Se,ae,D)=>{D.d(ae,{Dx:()=>hr,H7:()=>ot,b2:()=>qr,h_:()=>br,q6:()=>is,se:()=>Xe});var f=D(6895),I=D(4650);class ee extends f.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class B extends ee{static makeCurrent(){(0,f.HT)(new B)}onAndCancel(Oe,he,Me){return Oe.addEventListener(he,Me,!1),()=>{Oe.removeEventListener(he,Me,!1)}}dispatchEvent(Oe,he){Oe.dispatchEvent(he)}remove(Oe){Oe.parentNode&&Oe.parentNode.removeChild(Oe)}createElement(Oe,he){return(he=he||this.getDefaultDocument()).createElement(Oe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Oe){return Oe.nodeType===Node.ELEMENT_NODE}isShadowRoot(Oe){return Oe instanceof DocumentFragment}getGlobalEventTarget(Oe,he){return"window"===he?window:"document"===he?Oe:"body"===he?Oe.body:null}getBaseHref(Oe){const he=function ie(){return q=q||document.querySelector("base"),q?q.getAttribute("href"):null}();return null==he?null:function K(Re){te=te||document.createElement("a"),te.setAttribute("href",Re);const Oe=te.pathname;return"/"===Oe.charAt(0)?Oe:`/${Oe}`}(he)}resetBaseElement(){q=null}getUserAgent(){return window.navigator.userAgent}getCookie(Oe){return(0,f.Mx)(document.cookie,Oe)}}let te,q=null;const ne=new I.OlP("TRANSITION_ID"),le=[{provide:I.ip1,useFactory:function Z(Re,Oe,he){return()=>{he.get(I.CZH).donePromise.then(()=>{const Me=(0,f.q)(),Ye=Oe.querySelectorAll(`style[ng-transition="${Re}"]`);for(let Vt=0;Vt<Ye.length;Vt++)Me.remove(Ye[Vt])})}},deps:[ne,f.K0,I.zs3],multi:!0}];let Le=(()=>{class Re{build(){return new XMLHttpRequest}}return Re.\u0275fac=function(he){return new(he||Re)},Re.\u0275prov=I.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const Ge=new I.OlP("EventManagerPlugins");let je=(()=>{class Re{constructor(he,Me){this._zone=Me,this._eventNameToPlugin=new Map,he.forEach(Ye=>{Ye.manager=this}),this._plugins=he.slice().reverse()}addEventListener(he,Me,Ye){return this._findPluginFor(Me).addEventListener(he,Me,Ye)}addGlobalEventListener(he,Me,Ye){return this._findPluginFor(Me).addGlobalEventListener(he,Me,Ye)}getZone(){return this._zone}_findPluginFor(he){const Me=this._eventNameToPlugin.get(he);if(Me)return Me;const Ye=this._plugins;for(let Vt=0;Vt<Ye.length;Vt++){const sn=Ye[Vt];if(sn.supports(he))return this._eventNameToPlugin.set(he,sn),sn}throw new Error(`No event manager plugin found for event ${he}`)}}return Re.\u0275fac=function(he){return new(he||Re)(I.LFG(Ge),I.LFG(I.R0b))},Re.\u0275prov=I.Yz7({token:Re,factory:Re.\u0275fac}),Re})();class Qe{constructor(Oe){this._doc=Oe}addGlobalEventListener(Oe,he,Me){const Ye=(0,f.q)().getGlobalEventTarget(this._doc,Oe);if(!Ye)throw new Error(`Unsupported event target ${Ye} for event ${he}`);return this.addEventListener(Ye,he,Me)}}let Be=(()=>{class Re{constructor(){this.usageCount=new Map}addStyles(he){for(const Me of he)1===this.changeUsageCount(Me,1)&&this.onStyleAdded(Me)}removeStyles(he){for(const Me of he)0===this.changeUsageCount(Me,-1)&&this.onStyleRemoved(Me)}onStyleRemoved(he){}onStyleAdded(he){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(he,Me){const Ye=this.usageCount;let Vt=Ye.get(he)??0;return Vt+=Me,Vt>0?Ye.set(he,Vt):Ye.delete(he),Vt}ngOnDestroy(){for(const he of this.getAllStyles())this.onStyleRemoved(he);this.usageCount.clear()}}return Re.\u0275fac=function(he){return new(he||Re)},Re.\u0275prov=I.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),ze=(()=>{class Re extends Be{constructor(he){super(),this.doc=he,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(he){for(const Me of this.hostNodes)this.addStyleToHost(Me,he)}onStyleRemoved(he){const Me=this.styleRef;Me.get(he)?.forEach(Vt=>Vt.remove()),Me.delete(he)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(he){this.hostNodes.add(he);for(const Me of this.getAllStyles())this.addStyleToHost(he,Me)}removeHost(he){this.hostNodes.delete(he)}addStyleToHost(he,Me){const Ye=this.doc.createElement("style");Ye.textContent=Me,he.appendChild(Ye);const Vt=this.styleRef.get(Me);Vt?Vt.push(Ye):this.styleRef.set(Me,[Ye])}resetHostNodes(){const he=this.hostNodes;he.clear(),he.add(this.doc.head)}}return Re.\u0275fac=function(he){return new(he||Re)(I.LFG(f.K0))},Re.\u0275prov=I.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const Ke={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},it=/%COMP%/g,Pt=new I.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function qe(Re,Oe){return Oe.flat(100).map(he=>he.replace(it,Re))}function lt(Re){return Oe=>{if("__ngUnwrap__"===Oe)return Re;!1===Re(Oe)&&(Oe.preventDefault(),Oe.returnValue=!1)}}let Xe=(()=>{class Re{constructor(he,Me,Ye,Vt){this.eventManager=he,this.sharedStylesHost=Me,this.appId=Ye,this.removeStylesOnCompDestory=Vt,this.rendererByCompId=new Map,this.defaultRenderer=new vt(he)}createRenderer(he,Me){if(!he||!Me)return this.defaultRenderer;const Ye=this.getOrCreateRenderer(he,Me);return Ye instanceof Fn?Ye.applyToHost(he):Ye instanceof Kt&&Ye.applyStyles(),Ye}getOrCreateRenderer(he,Me){const Ye=this.rendererByCompId;let Vt=Ye.get(Me.id);if(!Vt){const sn=this.eventManager,Xn=this.sharedStylesHost,Cr=this.removeStylesOnCompDestory;switch(Me.encapsulation){case I.ifc.Emulated:Vt=new Fn(sn,Xn,Me,this.appId,Cr);break;case I.ifc.ShadowDom:return new fn(sn,Xn,he,Me);default:Vt=new Kt(sn,Xn,Me,Cr)}Vt.onDestroy=()=>Ye.delete(Me.id),Ye.set(Me.id,Vt)}return Vt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return Re.\u0275fac=function(he){return new(he||Re)(I.LFG(je),I.LFG(ze),I.LFG(I.AFp),I.LFG(Pt))},Re.\u0275prov=I.Yz7({token:Re,factory:Re.\u0275fac}),Re})();class vt{constructor(Oe){this.eventManager=Oe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Oe,he){return he?document.createElementNS(Ke[he]||he,Oe):document.createElement(Oe)}createComment(Oe){return document.createComment(Oe)}createText(Oe){return document.createTextNode(Oe)}appendChild(Oe,he){(rr(Oe)?Oe.content:Oe).appendChild(he)}insertBefore(Oe,he,Me){Oe&&(rr(Oe)?Oe.content:Oe).insertBefore(he,Me)}removeChild(Oe,he){Oe&&Oe.removeChild(he)}selectRootElement(Oe,he){let Me="string"==typeof Oe?document.querySelector(Oe):Oe;if(!Me)throw new Error(`The selector "${Oe}" did not match any elements`);return he||(Me.textContent=""),Me}parentNode(Oe){return Oe.parentNode}nextSibling(Oe){return Oe.nextSibling}setAttribute(Oe,he,Me,Ye){if(Ye){he=Ye+":"+he;const Vt=Ke[Ye];Vt?Oe.setAttributeNS(Vt,he,Me):Oe.setAttribute(he,Me)}else Oe.setAttribute(he,Me)}removeAttribute(Oe,he,Me){if(Me){const Ye=Ke[Me];Ye?Oe.removeAttributeNS(Ye,he):Oe.removeAttribute(`${Me}:${he}`)}else Oe.removeAttribute(he)}addClass(Oe,he){Oe.classList.add(he)}removeClass(Oe,he){Oe.classList.remove(he)}setStyle(Oe,he,Me,Ye){Ye&(I.JOm.DashCase|I.JOm.Important)?Oe.style.setProperty(he,Me,Ye&I.JOm.Important?"important":""):Oe.style[he]=Me}removeStyle(Oe,he,Me){Me&I.JOm.DashCase?Oe.style.removeProperty(he):Oe.style[he]=""}setProperty(Oe,he,Me){Oe[he]=Me}setValue(Oe,he){Oe.nodeValue=he}listen(Oe,he,Me){return"string"==typeof Oe?this.eventManager.addGlobalEventListener(Oe,he,lt(Me)):this.eventManager.addEventListener(Oe,he,lt(Me))}}function rr(Re){return"TEMPLATE"===Re.tagName&&void 0!==Re.content}class fn extends vt{constructor(Oe,he,Me,Ye){super(Oe),this.sharedStylesHost=he,this.hostEl=Me,this.shadowRoot=Me.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Vt=qe(Ye.id,Ye.styles);for(const sn of Vt){const Xn=document.createElement("style");Xn.textContent=sn,this.shadowRoot.appendChild(Xn)}}nodeOrShadowRoot(Oe){return Oe===this.hostEl?this.shadowRoot:Oe}appendChild(Oe,he){return super.appendChild(this.nodeOrShadowRoot(Oe),he)}insertBefore(Oe,he,Me){return super.insertBefore(this.nodeOrShadowRoot(Oe),he,Me)}removeChild(Oe,he){return super.removeChild(this.nodeOrShadowRoot(Oe),he)}parentNode(Oe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Oe)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Kt extends vt{constructor(Oe,he,Me,Ye,Vt=Me.id){super(Oe),this.sharedStylesHost=he,this.removeStylesOnCompDestory=Ye,this.rendererUsageCount=0,this.styles=qe(Vt,Me.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Fn extends Kt{constructor(Oe,he,Me,Ye,Vt){const sn=Ye+"-"+Me.id;super(Oe,he,Me,Vt,sn),this.contentAttr=function St(Re){return"_ngcontent-%COMP%".replace(it,Re)}(sn),this.hostAttr=function rt(Re){return"_nghost-%COMP%".replace(it,Re)}(sn)}applyToHost(Oe){this.applyStyles(),this.setAttribute(Oe,this.hostAttr,"")}createElement(Oe,he){const Me=super.createElement(Oe,he);return super.setAttribute(Me,this.contentAttr,""),Me}}let Cn=(()=>{class Re extends Qe{constructor(he){super(he)}supports(he){return!0}addEventListener(he,Me,Ye){return he.addEventListener(Me,Ye,!1),()=>this.removeEventListener(he,Me,Ye)}removeEventListener(he,Me,Ye){return he.removeEventListener(Me,Ye)}}return Re.\u0275fac=function(he){return new(he||Re)(I.LFG(f.K0))},Re.\u0275prov=I.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const ir=["alt","control","meta","shift"],Kr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pn={alt:Re=>Re.altKey,control:Re=>Re.ctrlKey,meta:Re=>Re.metaKey,shift:Re=>Re.shiftKey};let pn=(()=>{class Re extends Qe{constructor(he){super(he)}supports(he){return null!=Re.parseEventName(he)}addEventListener(he,Me,Ye){const Vt=Re.parseEventName(Me),sn=Re.eventCallback(Vt.fullKey,Ye,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,f.q)().onAndCancel(he,Vt.domEventName,sn))}static parseEventName(he){const Me=he.toLowerCase().split("."),Ye=Me.shift();if(0===Me.length||"keydown"!==Ye&&"keyup"!==Ye)return null;const Vt=Re._normalizeKey(Me.pop());let sn="",Xn=Me.indexOf("code");if(Xn>-1&&(Me.splice(Xn,1),sn="code."),ir.forEach(Ti=>{const gt=Me.indexOf(Ti);gt>-1&&(Me.splice(gt,1),sn+=Ti+".")}),sn+=Vt,0!=Me.length||0===Vt.length)return null;const Cr={};return Cr.domEventName=Ye,Cr.fullKey=sn,Cr}static matchEventFullKeyCode(he,Me){let Ye=Kr[he.key]||he.key,Vt="";return Me.indexOf("code.")>-1&&(Ye=he.code,Vt="code."),!(null==Ye||!Ye)&&(Ye=Ye.toLowerCase()," "===Ye?Ye="space":"."===Ye&&(Ye="dot"),ir.forEach(sn=>{sn!==Ye&&(0,Pn[sn])(he)&&(Vt+=sn+".")}),Vt+=Ye,Vt===Me)}static eventCallback(he,Me,Ye){return Vt=>{Re.matchEventFullKeyCode(Vt,he)&&Ye.runGuarded(()=>Me(Vt))}}static _normalizeKey(he){return"esc"===he?"escape":he}}return Re.\u0275fac=function(he){return new(he||Re)(I.LFG(f.K0))},Re.\u0275prov=I.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const is=(0,I.eFA)(I._c5,"browser",[{provide:I.Lbi,useValue:f.bD},{provide:I.g9A,useValue:function kt(){B.makeCurrent()},multi:!0},{provide:f.K0,useFactory:function qn(){return(0,I.RDi)(document),document},deps:[]}]),dr=new I.OlP(""),cn=[{provide:I.rWj,useClass:class fe{addToWindow(Oe){I.dqk.getAngularTestability=(Me,Ye=!0)=>{const Vt=Oe.findTestabilityInTree(Me,Ye);if(null==Vt)throw new Error("Could not find testability for element.");return Vt},I.dqk.getAllAngularTestabilities=()=>Oe.getAllTestabilities(),I.dqk.getAllAngularRootElements=()=>Oe.getAllRootElements(),I.dqk.frameworkStabilizers||(I.dqk.frameworkStabilizers=[]),I.dqk.frameworkStabilizers.push(Me=>{const Ye=I.dqk.getAllAngularTestabilities();let Vt=Ye.length,sn=!1;const Xn=function(Cr){sn=sn||Cr,Vt--,0==Vt&&Me(sn)};Ye.forEach(function(Cr){Cr.whenStable(Xn)})})}findTestabilityInTree(Oe,he,Me){return null==he?null:Oe.getTestability(he)??(Me?(0,f.q)().isShadowRoot(he)?this.findTestabilityInTree(Oe,he.host,!0):this.findTestabilityInTree(Oe,he.parentElement,!0):null)}},deps:[]},{provide:I.lri,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]},{provide:I.dDg,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]}],Fi=[{provide:I.zSh,useValue:"root"},{provide:I.qLn,useFactory:function Vn(){return new I.qLn},deps:[]},{provide:Ge,useClass:Cn,multi:!0,deps:[f.K0,I.R0b,I.Lbi]},{provide:Ge,useClass:pn,multi:!0,deps:[f.K0]},{provide:Xe,useClass:Xe,deps:[je,ze,I.AFp,Pt]},{provide:I.FYo,useExisting:Xe},{provide:Be,useExisting:ze},{provide:ze,useClass:ze,deps:[f.K0]},{provide:je,useClass:je,deps:[Ge,I.R0b]},{provide:f.JF,useClass:Le,deps:[]},[]];let qr=(()=>{class Re{constructor(he){}static withServerTransition(he){return{ngModule:Re,providers:[{provide:I.AFp,useValue:he.appId},{provide:ne,useExisting:I.AFp},le]}}}return Re.\u0275fac=function(he){return new(he||Re)(I.LFG(dr,12))},Re.\u0275mod=I.oAB({type:Re}),Re.\u0275inj=I.cJS({providers:[...Fi,...cn],imports:[f.ez,I.hGG]}),Re})(),br=(()=>{class Re{constructor(he){this._doc=he,this._dom=(0,f.q)()}addTag(he,Me=!1){return he?this._getOrCreateElement(he,Me):null}addTags(he,Me=!1){return he?he.reduce((Ye,Vt)=>(Vt&&Ye.push(this._getOrCreateElement(Vt,Me)),Ye),[]):[]}getTag(he){return he&&this._doc.querySelector(`meta[${he}]`)||null}getTags(he){if(!he)return[];const Me=this._doc.querySelectorAll(`meta[${he}]`);return Me?[].slice.call(Me):[]}updateTag(he,Me){if(!he)return null;Me=Me||this._parseSelector(he);const Ye=this.getTag(Me);return Ye?this._setMetaElementAttributes(he,Ye):this._getOrCreateElement(he,!0)}removeTag(he){this.removeTagElement(this.getTag(he))}removeTagElement(he){he&&this._dom.remove(he)}_getOrCreateElement(he,Me=!1){if(!Me){const sn=this._parseSelector(he),Xn=this.getTags(sn).filter(Cr=>this._containsAttributes(he,Cr))[0];if(void 0!==Xn)return Xn}const Ye=this._dom.createElement("meta");return this._setMetaElementAttributes(he,Ye),this._doc.getElementsByTagName("head")[0].appendChild(Ye),Ye}_setMetaElementAttributes(he,Me){return Object.keys(he).forEach(Ye=>Me.setAttribute(this._getMetaKeyMap(Ye),he[Ye])),Me}_parseSelector(he){const Me=he.name?"name":"property";return`${Me}="${he[Me]}"`}_containsAttributes(he,Me){return Object.keys(he).every(Ye=>Me.getAttribute(this._getMetaKeyMap(Ye))===he[Ye])}_getMetaKeyMap(he){return Sn[he]||he}}return Re.\u0275fac=function(he){return new(he||Re)(I.LFG(f.K0))},Re.\u0275prov=I.Yz7({token:Re,factory:function(he){let Me=null;return Me=he?new he:function wr(){return new br((0,I.LFG)(f.K0))}(),Me},providedIn:"root"}),Re})();const Sn={httpEquiv:"http-equiv"};let hr=(()=>{class Re{constructor(he){this._doc=he}getTitle(){return this._doc.title}setTitle(he){this._doc.title=he||""}}return Re.\u0275fac=function(he){return new(he||Re)(I.LFG(f.K0))},Re.\u0275prov=I.Yz7({token:Re,factory:function(he){let Me=null;return Me=he?new he:function Yn(){return new hr((0,I.LFG)(f.K0))}(),Me},providedIn:"root"}),Re})();typeof window<"u"&&window;let ot=(()=>{class Re{}return Re.\u0275fac=function(he){return new(he||Re)},Re.\u0275prov=I.Yz7({token:Re,factory:function(he){let Me=null;return Me=he?new(he||Re):I.LFG(Ft),Me},providedIn:"root"}),Re})(),Ft=(()=>{class Re extends ot{constructor(he){super(),this._doc=he}sanitize(he,Me){if(null==Me)return null;switch(he){case I.q3G.NONE:return Me;case I.q3G.HTML:return(0,I.qzn)(Me,"HTML")?(0,I.z3N)(Me):(0,I.EiD)(this._doc,String(Me)).toString();case I.q3G.STYLE:return(0,I.qzn)(Me,"Style")?(0,I.z3N)(Me):Me;case I.q3G.SCRIPT:if((0,I.qzn)(Me,"Script"))return(0,I.z3N)(Me);throw new Error("unsafe value used in a script context");case I.q3G.URL:return(0,I.qzn)(Me,"URL")?(0,I.z3N)(Me):(0,I.mCW)(String(Me));case I.q3G.RESOURCE_URL:if((0,I.qzn)(Me,"ResourceURL"))return(0,I.z3N)(Me);throw new Error(`unsafe value used in a resource URL context (see ${I.JZr})`);default:throw new Error(`Unexpected SecurityContext ${he} (see ${I.JZr})`)}}bypassSecurityTrustHtml(he){return(0,I.JVY)(he)}bypassSecurityTrustStyle(he){return(0,I.L6k)(he)}bypassSecurityTrustScript(he){return(0,I.eBb)(he)}bypassSecurityTrustUrl(he){return(0,I.LAX)(he)}bypassSecurityTrustResourceUrl(he){return(0,I.pB0)(he)}}return Re.\u0275fac=function(he){return new(he||Re)(I.LFG(f.K0))},Re.\u0275prov=I.Yz7({token:Re,factory:function(he){let Me=null;return Me=he?new he:function ke(Re){return new Ft(Re.get(f.K0))}(I.LFG(I.zs3)),Me},providedIn:"root"}),Re})()},4793:(Se,ae,D)=>{D.d(ae,{Bz:()=>hl,F0:()=>vs,OD:()=>bn,Od:()=>Ma,Q3:()=>er,gk:()=>An,gz:()=>wn,lC:()=>so,m2:()=>mn,rH:()=>ra,wN:()=>uo,yS:()=>ra});var f=D(4650),I=D(457),ee=D(9646),B=D(1135),q=D(6805),ie=D(9841),te=D(7272),K=D(9770),ne=D(9635),Z=D(2843),le=D(9751),fe=D(515),Le=D(4033),Ge=D(7579),je=D(6895),Qe=D(4004),Be=D(3900),ze=D(5698),Ke=D(8675),it=D(9300),Ue=D(5577),xe=D(590),Ct=D(4351),It=D(8505),Ze=D(262),Pt=D(5026),St=D(3103),rt=D(2529),qe=D(6590),lt=D(2035),Xe=D(9718),vt=D(8746),At=D(8343),gn=D(8189),rr=D(1481);const fn="primary",Kt=Symbol("RouteTitle");class Fn{constructor(O){this.params=O||{}}has(O){return Object.prototype.hasOwnProperty.call(this.params,O)}get(O){if(this.has(O)){const T=this.params[O];return Array.isArray(T)?T[0]:T}return null}getAll(O){if(this.has(O)){const T=this.params[O];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function Cn(A){return new Fn(A)}function ir(A,O,T){const F=T.path.split("/");if(F.length>A.length||"full"===T.pathMatch&&(O.hasChildren()||F.length<A.length))return null;const W={};for(let oe=0;oe<F.length;oe++){const pe=F[oe],He=A[oe];if(pe.startsWith(":"))W[pe.substring(1)]=He;else if(pe!==He.path)return null}return{consumed:A.slice(0,F.length),posParams:W}}function Pn(A,O){const T=A?Object.keys(A):void 0,F=O?Object.keys(O):void 0;if(!T||!F||T.length!=F.length)return!1;let W;for(let oe=0;oe<T.length;oe++)if(W=T[oe],!pn(A[W],O[W]))return!1;return!0}function pn(A,O){if(Array.isArray(A)&&Array.isArray(O)){if(A.length!==O.length)return!1;const T=[...A].sort(),F=[...O].sort();return T.every((W,oe)=>F[oe]===W)}return A===O}function si(A){return Array.prototype.concat.apply([],A)}function Tt(A){return A.length>0?A[A.length-1]:null}function Ve(A,O){for(const T in A)A.hasOwnProperty(T)&&O(A[T],T)}function _t(A){return(0,f.CqO)(A)?A:(0,f.QGY)(A)?(0,I.D)(Promise.resolve(A)):(0,ee.of)(A)}const kt=!1,Vn={exact:function dr(A,O,T){if(!dn(A.segments,O.segments)||!wr(A.segments,O.segments,T)||A.numberOfChildren!==O.numberOfChildren)return!1;for(const F in O.children)if(!A.children[F]||!dr(A.children[F],O.children[F],T))return!1;return!0},subset:Fi},qn={exact:function is(A,O){return Pn(A,O)},subset:function cn(A,O){return Object.keys(O).length<=Object.keys(A).length&&Object.keys(O).every(T=>pn(A[T],O[T]))},ignored:()=>!0};function Fr(A,O,T){return Vn[T.paths](A.root,O.root,T.matrixParams)&&qn[T.queryParams](A.queryParams,O.queryParams)&&!("exact"===T.fragment&&A.fragment!==O.fragment)}function Fi(A,O,T){return qr(A,O,O.segments,T)}function qr(A,O,T,F){if(A.segments.length>T.length){const W=A.segments.slice(0,T.length);return!(!dn(W,T)||O.hasChildren()||!wr(W,T,F))}if(A.segments.length===T.length){if(!dn(A.segments,T)||!wr(A.segments,T,F))return!1;for(const W in O.children)if(!A.children[W]||!Fi(A.children[W],O.children[W],F))return!1;return!0}{const W=T.slice(0,A.segments.length),oe=T.slice(A.segments.length);return!!(dn(A.segments,W)&&wr(A.segments,W,F)&&A.children[fn])&&qr(A.children[fn],O,oe,F)}}function wr(A,O,T){return O.every((F,W)=>qn[T](A[W].parameters,F.parameters))}class br{constructor(O=new Sn([],{}),T={},F=null){this.root=O,this.queryParams=T,this.fragment=F}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cn(this.queryParams)),this._queryParamMap}toString(){return Vr.serialize(this)}}class Sn{constructor(O,T){this.segments=O,this.children=T,this.parent=null,Ve(T,(F,W)=>F.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gi(this)}}class Yn{constructor(O,T){this.path=O,this.parameters=T}get parameterMap(){return this._parameterMap||(this._parameterMap=Cn(this.parameters)),this._parameterMap}toString(){return Oi(this)}}function dn(A,O){return A.length===O.length&&A.every((T,F)=>T.path===O[F].path)}let Qn=(()=>{class A{}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:function(){return new yi},providedIn:"root"}),A})();class yi{parse(O){const T=new ot(O);return new br(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(O){const T=`/${Br(O.root,!0)}`,F=function Je(A){const O=Object.keys(A).map(T=>{const F=A[T];return Array.isArray(F)?F.map(W=>`${vr(T)}=${vr(W)}`).join("&"):`${vr(T)}=${vr(F)}`}).filter(T=>!!T);return O.length?`?${O.join("&")}`:""}(O.queryParams);return`${T}${F}${"string"==typeof O.fragment?`#${function ki(A){return encodeURI(A)}(O.fragment)}`:""}`}}const Vr=new yi;function gi(A){return A.segments.map(O=>Oi(O)).join("/")}function Br(A,O){if(!A.hasChildren())return gi(A);if(O){const T=A.children[fn]?Br(A.children[fn],!1):"",F=[];return Ve(A.children,(W,oe)=>{oe!==fn&&F.push(`${oe}:${Br(W,!1)}`)}),F.length>0?`${T}(${F.join("//")})`:T}{const T=function Zt(A,O){let T=[];return Ve(A.children,(F,W)=>{W===fn&&(T=T.concat(O(F,W)))}),Ve(A.children,(F,W)=>{W!==fn&&(T=T.concat(O(F,W)))}),T}(A,(F,W)=>W===fn?[Br(A.children[fn],!1)]:[`${W}:${Br(F,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[fn]?`${gi(A)}/${T[0]}`:`${gi(A)}/(${T.join("//")})`}}function di(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vr(A){return di(A).replace(/%3B/gi,";")}function $n(A){return di(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ss(A){return decodeURIComponent(A)}function lr(A){return ss(A.replace(/\+/g,"%20"))}function Oi(A){return`${$n(A.path)}${function ei(A){return Object.keys(A).map(O=>`;${$n(O)}=${$n(A[O])}`).join("")}(A.parameters)}`}const be=/^[^\/()?;=#]+/;function Ne(A){const O=A.match(be);return O?O[0]:""}const Ot=/^[^=?&#]+/,ve=/^[^&#]+/;class ot{constructor(O){this.url=O,this.remaining=O}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Sn([],{}):new Sn([],this.parseChildren())}parseQueryParams(){const O={};if(this.consumeOptional("?"))do{this.parseQueryParam(O)}while(this.consumeOptional("&"));return O}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const O=[];for(this.peekStartsWith("(")||O.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),O.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let F={};return this.peekStartsWith("(")&&(F=this.parseParens(!1)),(O.length>0||Object.keys(T).length>0)&&(F[fn]=new Sn(O,T)),F}parseSegment(){const O=Ne(this.remaining);if(""===O&&this.peekStartsWith(";"))throw new f.vHH(4009,kt);return this.capture(O),new Yn(ss(O),this.parseMatrixParams())}parseMatrixParams(){const O={};for(;this.consumeOptional(";");)this.parseParam(O);return O}parseParam(O){const T=Ne(this.remaining);if(!T)return;this.capture(T);let F="";if(this.consumeOptional("=")){const W=Ne(this.remaining);W&&(F=W,this.capture(F))}O[ss(T)]=ss(F)}parseQueryParam(O){const T=function ge(A){const O=A.match(Ot);return O?O[0]:""}(this.remaining);if(!T)return;this.capture(T);let F="";if(this.consumeOptional("=")){const pe=function Ie(A){const O=A.match(ve);return O?O[0]:""}(this.remaining);pe&&(F=pe,this.capture(F))}const W=lr(T),oe=lr(F);if(O.hasOwnProperty(W)){let pe=O[W];Array.isArray(pe)||(pe=[pe],O[W]=pe),pe.push(oe)}else O[W]=oe}parseParens(O){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const F=Ne(this.remaining),W=this.remaining[F.length];if("/"!==W&&")"!==W&&";"!==W)throw new f.vHH(4010,kt);let oe;F.indexOf(":")>-1?(oe=F.slice(0,F.indexOf(":")),this.capture(oe),this.capture(":")):O&&(oe=fn);const pe=this.parseChildren();T[oe]=1===Object.keys(pe).length?pe[fn]:new Sn([],pe),this.consumeOptional("//")}return T}peekStartsWith(O){return this.remaining.startsWith(O)}consumeOptional(O){return!!this.peekStartsWith(O)&&(this.remaining=this.remaining.substring(O.length),!0)}capture(O){if(!this.consumeOptional(O))throw new f.vHH(4011,kt)}}function ke(A){return A.segments.length>0?new Sn([],{[fn]:A}):A}function Ft(A){const O={};for(const F of Object.keys(A.children)){const oe=Ft(A.children[F]);(oe.segments.length>0||oe.hasChildren())&&(O[F]=oe)}return function Wt(A){if(1===A.numberOfChildren&&A.children[fn]){const O=A.children[fn];return new Sn(A.segments.concat(O.segments),O.children)}return A}(new Sn(A.segments,O))}function Re(A){return A instanceof br}const Oe=!1;function Vt(A,O,T,F,W){if(0===T.length)return Cr(O.root,O.root,O.root,F,W);const oe=function nt(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new gt(!0,0,A);let O=0,T=!1;const F=A.reduce((W,oe,pe)=>{if("object"==typeof oe&&null!=oe){if(oe.outlets){const He={};return Ve(oe.outlets,(bt,tn)=>{He[tn]="string"==typeof bt?bt.split("/"):bt}),[...W,{outlets:He}]}if(oe.segmentPath)return[...W,oe.segmentPath]}return"string"!=typeof oe?[...W,oe]:0===pe?(oe.split("/").forEach((He,bt)=>{0==bt&&"."===He||(0==bt&&""===He?T=!0:".."===He?O++:""!=He&&W.push(He))}),W):[...W,oe]},[]);return new gt(T,O,F)}(T);return oe.toRoot()?Cr(O.root,O.root,new Sn([],{}),F,W):function pe(bt){const tn=function On(A,O,T,F){if(A.isAbsolute)return new Nt(O.root,!0,0);if(-1===F)return new Nt(T,T===O.root,0);return function Zn(A,O,T){let F=A,W=O,oe=T;for(;oe>W;){if(oe-=W,F=F.parent,!F)throw new f.vHH(4005,Oe&&"Invalid number of '../'");W=F.segments.length}return new Nt(F,!1,W-oe)}(T,F+(sn(A.commands[0])?0:1),A.numberOfDoubleDots)}(oe,O,A.snapshot?._urlSegment,bt),un=tn.processChildren?tr(tn.segmentGroup,tn.index,oe.commands):fr(tn.segmentGroup,tn.index,oe.commands);return Cr(O.root,tn.segmentGroup,un,F,W)}(A.snapshot?._lastPathIndex)}function sn(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function Xn(A){return"object"==typeof A&&null!=A&&A.outlets}function Cr(A,O,T,F,W){let pe,oe={};F&&Ve(F,(bt,tn)=>{oe[tn]=Array.isArray(bt)?bt.map(un=>`${un}`):`${bt}`}),pe=A===O?T:Ti(A,O,T);const He=ke(Ft(pe));return new br(He,oe,W)}function Ti(A,O,T){const F={};return Ve(A.children,(W,oe)=>{F[oe]=W===O?T:Ti(W,O,T)}),new Sn(A.segments,F)}class gt{constructor(O,T,F){if(this.isAbsolute=O,this.numberOfDoubleDots=T,this.commands=F,O&&F.length>0&&sn(F[0]))throw new f.vHH(4003,Oe&&"Root segment cannot have matrix parameters");const W=F.find(Xn);if(W&&W!==Tt(F))throw new f.vHH(4004,Oe&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nt{constructor(O,T,F){this.segmentGroup=O,this.processChildren=T,this.index=F}}function fr(A,O,T){if(A||(A=new Sn([],{})),0===A.segments.length&&A.hasChildren())return tr(A,O,T);const F=function ti(A,O,T){let F=0,W=O;const oe={match:!1,pathIndex:0,commandIndex:0};for(;W<A.segments.length;){if(F>=T.length)return oe;const pe=A.segments[W],He=T[F];if(Xn(He))break;const bt=`${He}`,tn=F<T.length-1?T[F+1]:null;if(W>0&&void 0===bt)break;if(bt&&tn&&"object"==typeof tn&&void 0===tn.outlets){if(!os(bt,tn,pe))return oe;F+=2}else{if(!os(bt,{},pe))return oe;F++}W++}return{match:!0,pathIndex:W,commandIndex:F}}(A,O,T),W=T.slice(F.commandIndex);if(F.match&&F.pathIndex<A.segments.length){const oe=new Sn(A.segments.slice(0,F.pathIndex),{});return oe.children[fn]=new Sn(A.segments.slice(F.pathIndex),A.children),tr(oe,0,W)}return F.match&&0===W.length?new Sn(A.segments,{}):F.match&&!A.hasChildren()?ni(A,O,T):F.match?tr(A,0,W):ni(A,O,T)}function tr(A,O,T){if(0===T.length)return new Sn(A.segments,{});{const F=function hn(A){return Xn(A[0])?A[0].outlets:{[fn]:A}}(T),W={};if(!F[fn]&&A.children[fn]&&1===A.numberOfChildren&&0===A.children[fn].segments.length){const oe=tr(A.children[fn],O,T);return new Sn(A.segments,oe.children)}return Ve(F,(oe,pe)=>{"string"==typeof oe&&(oe=[oe]),null!==oe&&(W[pe]=fr(A.children[pe],O,oe))}),Ve(A.children,(oe,pe)=>{void 0===F[pe]&&(W[pe]=oe)}),new Sn(A.segments,W)}}function ni(A,O,T){const F=A.segments.slice(0,O);let W=0;for(;W<T.length;){const oe=T[W];if(Xn(oe)){const bt=Ms(oe.outlets);return new Sn(F,bt)}if(0===W&&sn(T[0])){F.push(new Yn(A.segments[O].path,Ui(T[0]))),W++;continue}const pe=Xn(oe)?oe.outlets[fn]:`${oe}`,He=W<T.length-1?T[W+1]:null;pe&&He&&sn(He)?(F.push(new Yn(pe,Ui(He))),W+=2):(F.push(new Yn(pe,{})),W++)}return new Sn(F,{})}function Ms(A){const O={};return Ve(A,(T,F)=>{"string"==typeof T&&(T=[T]),null!==T&&(O[F]=ni(new Sn([],{}),0,T))}),O}function Ui(A){const O={};return Ve(A,(T,F)=>O[F]=`${T}`),O}function os(A,O,T){return A==T.path&&Pn(O,T.parameters)}const jr="imperative";class Bt{constructor(O,T){this.id=O,this.url=T}}class bn extends Bt{constructor(O,T,F="imperative",W=null){super(O,T),this.type=0,this.navigationTrigger=F,this.restoredState=W}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class mn extends Bt{constructor(O,T,F){super(O,T),this.urlAfterRedirects=F,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class An extends Bt{constructor(O,T,F,W){super(O,T),this.reason=F,this.code=W,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class In extends Bt{constructor(O,T,F,W){super(O,T),this.reason=F,this.code=W,this.type=16}}class er extends Bt{constructor(O,T,F,W){super(O,T),this.error=F,this.target=W,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yr extends Bt{constructor(O,T,F,W){super(O,T),this.urlAfterRedirects=F,this.state=W,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ar extends Bt{constructor(O,T,F,W){super(O,T),this.urlAfterRedirects=F,this.state=W,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oi extends Bt{constructor(O,T,F,W,oe){super(O,T),this.urlAfterRedirects=F,this.state=W,this.shouldActivate=oe,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _i extends Bt{constructor(O,T,F,W){super(O,T),this.urlAfterRedirects=F,this.state=W,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xn extends Bt{constructor(O,T,F,W){super(O,T),this.urlAfterRedirects=F,this.state=W,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Er{constructor(O){this.route=O,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Nn{constructor(O){this.route=O,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Yr{constructor(O){this.snapshot=O,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ts{constructor(O){this.snapshot=O,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class De{constructor(O){this.snapshot=O,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class at{constructor(O){this.snapshot=O,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class We{constructor(O,T,F){this.routerEvent=O,this.position=T,this.anchor=F,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let zt=(()=>{class A{createUrlTree(T,F,W,oe,pe,He){return Vt(T||F.root,W,oe,pe,He)}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac}),A})(),pr=(()=>{class A{}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:function(O){return zt.\u0275fac(O)},providedIn:"root"}),A})();class ur{constructor(O){this._root=O}get root(){return this._root.value}parent(O){const T=this.pathFromRoot(O);return T.length>1?T[T.length-2]:null}children(O){const T=hi(O,this._root);return T?T.children.map(F=>F.value):[]}firstChild(O){const T=hi(O,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(O){const T=Dr(O,this._root);return T.length<2?[]:T[T.length-2].children.map(W=>W.value).filter(W=>W!==O)}pathFromRoot(O){return Dr(O,this._root).map(T=>T.value)}}function hi(A,O){if(A===O.value)return O;for(const T of O.children){const F=hi(A,T);if(F)return F}return null}function Dr(A,O){if(A===O.value)return[O];for(const T of O.children){const F=Dr(A,T);if(F.length)return F.unshift(O),F}return[]}class Mr{constructor(O,T){this.value=O,this.children=T}toString(){return`TreeNode(${this.value})`}}function Si(A){const O={};return A&&A.children.forEach(T=>O[T.value.outlet]=T),O}class ri extends ur{constructor(O,T){super(O),this.snapshot=T,ro(this,O)}toString(){return this.snapshot.toString()}}function Ta(A,O){const T=function ii(A,O){const pe=new Gi([],{},{},"",{},fn,O,null,A.root,-1,{});return new sr("",new Mr(pe,[]))}(A,O),F=new B.X([new Yn("",{})]),W=new B.X({}),oe=new B.X({}),pe=new B.X({}),He=new B.X(""),bt=new wn(F,W,pe,He,oe,fn,O,T.root);return bt.snapshot=T.root,new ri(new Mr(bt,[]),T)}class wn{constructor(O,T,F,W,oe,pe,He,bt){this.url=O,this.params=T,this.queryParams=F,this.fragment=W,this.data=oe,this.outlet=pe,this.component=He,this.title=this.data?.pipe((0,Qe.U)(tn=>tn[Kt]))??(0,ee.of)(void 0),this._futureSnapshot=bt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qe.U)(O=>Cn(O)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qe.U)(O=>Cn(O)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ps(A,O="emptyOnly"){const T=A.pathFromRoot;let F=0;if("always"!==O)for(F=T.length-1;F>=1;){const W=T[F],oe=T[F-1];if(W.routeConfig&&""===W.routeConfig.path)F--;else{if(oe.component)break;F--}}return function zs(A){return A.reduce((O,T)=>({params:{...O.params,...T.params},data:{...O.data,...T.data},resolve:{...T.data,...O.resolve,...T.routeConfig?.data,...T._resolvedData}}),{params:{},data:{},resolve:{}})}(T.slice(F))}class Gi{get title(){return this.data?.[Kt]}constructor(O,T,F,W,oe,pe,He,bt,tn,un,Sr){this.url=O,this.params=T,this.queryParams=F,this.fragment=W,this.data=oe,this.outlet=pe,this.component=He,this.routeConfig=bt,this._urlSegment=tn,this._lastPathIndex=un,this._resolve=Sr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Cn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Cn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(F=>F.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class sr extends ur{constructor(O,T){super(T),this.url=O,ro(this,T)}toString(){return bi(this._root)}}function ro(A,O){O.value._routerState=A,O.children.forEach(T=>ro(A,T))}function bi(A){const O=A.children.length>0?` { ${A.children.map(bi).join(", ")} } `:"";return`${A.value}${O}`}function Os(A){if(A.snapshot){const O=A.snapshot,T=A._futureSnapshot;A.snapshot=T,Pn(O.queryParams,T.queryParams)||A.queryParams.next(T.queryParams),O.fragment!==T.fragment&&A.fragment.next(T.fragment),Pn(O.params,T.params)||A.params.next(T.params),function Kr(A,O){if(A.length!==O.length)return!1;for(let T=0;T<A.length;++T)if(!Pn(A[T],O[T]))return!1;return!0}(O.url,T.url)||A.url.next(T.url),Pn(O.data,T.data)||A.data.next(T.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function Gn(A,O){const T=Pn(A.params,O.params)&&function hr(A,O){return dn(A,O)&&A.every((T,F)=>Pn(T.parameters,O[F].parameters))}(A.url,O.url);return T&&!(!A.parent!=!O.parent)&&(!A.parent||Gn(A.parent,O.parent))}function Ks(A,O,T){if(T&&A.shouldReuseRoute(O.value,T.value.snapshot)){const F=T.value;F._futureSnapshot=O.value;const W=function io(A,O,T){return O.children.map(F=>{for(const W of T.children)if(A.shouldReuseRoute(F.value,W.value.snapshot))return Ks(A,F,W);return Ks(A,F)})}(A,O,T);return new Mr(F,W)}{if(A.shouldAttach(O.value)){const oe=A.retrieve(O.value);if(null!==oe){const pe=oe.route;return pe.value._futureSnapshot=O.value,pe.children=O.children.map(He=>Ks(A,He)),pe}}const F=function bl(A){return new wn(new B.X(A.url),new B.X(A.params),new B.X(A.queryParams),new B.X(A.fragment),new B.X(A.data),A.outlet,A.component,A)}(O.value),W=O.children.map(oe=>Ks(A,oe));return new Mr(F,W)}}const Bo="ngNavigationCancelingError";function To(A,O){const{redirectTo:T,navigationBehaviorOptions:F}=Re(O)?{redirectTo:O,navigationBehaviorOptions:void 0}:O,W=So(!1,0,O);return W.url=T,W.navigationBehaviorOptions=F,W}function So(A,O,T){const F=new Error("NavigationCancelingError: "+(A||""));return F[Bo]=!0,F.cancellationCode=O,T&&(F.url=T),F}function Wi(A){return Sa(A)&&Re(A.url)}function Sa(A){return A&&A[Bo]}class yo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Qi,this.attachRef=null}}let Qi=(()=>{class A{constructor(){this.contexts=new Map}onChildOutletCreated(T,F){const W=this.getOrCreateContext(T);W.outlet=F,this.contexts.set(T,W)}onChildOutletDestroyed(T){const F=this.getContext(T);F&&(F.outlet=null,F.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let F=this.getContext(T);return F||(F=new yo,this.contexts.set(T,F)),F}getContext(T){return this.contexts.get(T)||null}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const as=!1;let so=(()=>{class A{constructor(){this.activated=null,this._activatedRoute=null,this.name=fn,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(Qi),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb)}ngOnChanges(T){if(T.name){const{firstChange:F,previousValue:W}=T.name;if(F)return;this.isTrackedInParentContexts(W)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(W)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(T){return this.parentContexts.getContext(T)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const T=this.parentContexts.getContext(this.name);T?.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,as);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,as);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,as);this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,F){this.activated=T,this._activatedRoute=F,this.location.insert(T.hostView),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,F){if(this.isActivated)throw new f.vHH(4013,as);this._activatedRoute=T;const W=this.location,pe=T.snapshot.component,He=this.parentContexts.getOrCreateContext(this.name).children,bt=new Hr(T,He,W.injector);if(F&&function _o(A){return!!A.resolveComponentFactory}(F)){const tn=F.resolveComponentFactory(pe);this.activated=W.createComponent(tn,W.length,bt)}else this.activated=W.createComponent(pe,{index:W.length,injector:bt,environmentInjector:F??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275dir=f.lG2({type:A,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),A})();class Hr{constructor(O,T,F){this.route=O,this.childContexts=T,this.parent=F}get(O,T){return O===wn?this.route:O===Qi?this.childContexts:this.parent.get(O,T)}}let jo=(()=>{class A{}return A.\u0275fac=function(T){return new(T||A)},A.\u0275cmp=f.Xpm({type:A,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(T,F){1&T&&f._UZ(0,"router-outlet")},dependencies:[so],encapsulation:2}),A})();function Rs(A,O){return A.providers&&!A._injector&&(A._injector=(0,f.MMx)(A.providers,O,`Route: ${A.path}`)),A._injector??O}function Pr(A){const O=A.children&&A.children.map(Pr),T=O?{...A,children:O}:{...A};return!T.component&&!T.loadComponent&&(O||T.loadChildren)&&T.outlet&&T.outlet!==fn&&(T.component=jo),T}function Zi(A){return A.outlet||fn}function Ho(A,O){const T=A.filter(F=>Zi(F)===O);return T.push(...A.filter(F=>Zi(F)!==O)),T}function vi(A){if(!A)return null;if(A.routeConfig?._injector)return A.routeConfig._injector;for(let O=A.parent;O;O=O.parent){const T=O.routeConfig;if(T?._loadedInjector)return T._loadedInjector;if(T?._injector)return T._injector}return null}class ls{constructor(O,T,F,W){this.routeReuseStrategy=O,this.futureState=T,this.currState=F,this.forwardEvent=W}activate(O){const T=this.futureState._root,F=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,F,O),Os(this.futureState.root),this.activateChildRoutes(T,F,O)}deactivateChildRoutes(O,T,F){const W=Si(T);O.children.forEach(oe=>{const pe=oe.value.outlet;this.deactivateRoutes(oe,W[pe],F),delete W[pe]}),Ve(W,(oe,pe)=>{this.deactivateRouteAndItsChildren(oe,F)})}deactivateRoutes(O,T,F){const W=O.value,oe=T?T.value:null;if(W===oe)if(W.component){const pe=F.getContext(W.outlet);pe&&this.deactivateChildRoutes(O,T,pe.children)}else this.deactivateChildRoutes(O,T,F);else oe&&this.deactivateRouteAndItsChildren(T,F)}deactivateRouteAndItsChildren(O,T){O.value.component&&this.routeReuseStrategy.shouldDetach(O.value.snapshot)?this.detachAndStoreRouteSubtree(O,T):this.deactivateRouteAndOutlet(O,T)}detachAndStoreRouteSubtree(O,T){const F=T.getContext(O.value.outlet),W=F&&O.value.component?F.children:T,oe=Si(O);for(const pe of Object.keys(oe))this.deactivateRouteAndItsChildren(oe[pe],W);if(F&&F.outlet){const pe=F.outlet.detach(),He=F.children.onOutletDeactivated();this.routeReuseStrategy.store(O.value.snapshot,{componentRef:pe,route:O,contexts:He})}}deactivateRouteAndOutlet(O,T){const F=T.getContext(O.value.outlet),W=F&&O.value.component?F.children:T,oe=Si(O);for(const pe of Object.keys(oe))this.deactivateRouteAndItsChildren(oe[pe],W);F&&(F.outlet&&(F.outlet.deactivate(),F.children.onOutletDeactivated()),F.attachRef=null,F.resolver=null,F.route=null)}activateChildRoutes(O,T,F){const W=Si(T);O.children.forEach(oe=>{this.activateRoutes(oe,W[oe.value.outlet],F),this.forwardEvent(new at(oe.value.snapshot))}),O.children.length&&this.forwardEvent(new Ts(O.value.snapshot))}activateRoutes(O,T,F){const W=O.value,oe=T?T.value:null;if(Os(W),W===oe)if(W.component){const pe=F.getOrCreateContext(W.outlet);this.activateChildRoutes(O,T,pe.children)}else this.activateChildRoutes(O,T,F);else if(W.component){const pe=F.getOrCreateContext(W.outlet);if(this.routeReuseStrategy.shouldAttach(W.snapshot)){const He=this.routeReuseStrategy.retrieve(W.snapshot);this.routeReuseStrategy.store(W.snapshot,null),pe.children.onOutletReAttached(He.contexts),pe.attachRef=He.componentRef,pe.route=He.route.value,pe.outlet&&pe.outlet.attach(He.componentRef,He.route.value),Os(He.route.value),this.activateChildRoutes(O,null,pe.children)}else{const He=vi(W.snapshot),bt=He?.get(f._Vd)??null;pe.attachRef=null,pe.route=W,pe.resolver=bt,pe.injector=He,pe.outlet&&pe.outlet.activateWith(W,pe.injector),this.activateChildRoutes(O,null,pe.children)}}else this.activateChildRoutes(O,null,F)}}class $r{constructor(O){this.path=O,this.route=this.path[this.path.length-1]}}class ms{constructor(O,T){this.component=O,this.route=T}}function $o(A,O,T){const F=A._root;return Go(F,O?O._root:null,T,[F.value])}function us(A,O){const T=Symbol(),F=O.get(A,T);return F===T?"function"!=typeof A||(0,f.Z0I)(A)?O.get(A):A:F}function Go(A,O,T,F,W={canDeactivateChecks:[],canActivateChecks:[]}){const oe=Si(O);return A.children.forEach(pe=>{(function Tr(A,O,T,F,W={canDeactivateChecks:[],canActivateChecks:[]}){const oe=A.value,pe=O?O.value:null,He=T?T.getContext(A.value.outlet):null;if(pe&&oe.routeConfig===pe.routeConfig){const bt=function qi(A,O,T){if("function"==typeof T)return T(A,O);switch(T){case"pathParamsChange":return!dn(A.url,O.url);case"pathParamsOrQueryParamsChange":return!dn(A.url,O.url)||!Pn(A.queryParams,O.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gn(A,O)||!Pn(A.queryParams,O.queryParams);default:return!Gn(A,O)}}(pe,oe,oe.routeConfig.runGuardsAndResolvers);bt?W.canActivateChecks.push(new $r(F)):(oe.data=pe.data,oe._resolvedData=pe._resolvedData),Go(A,O,oe.component?He?He.children:null:T,F,W),bt&&He&&He.outlet&&He.outlet.isActivated&&W.canDeactivateChecks.push(new ms(He.outlet.component,pe))}else pe&&bo(O,He,W),W.canActivateChecks.push(new $r(F)),Go(A,null,oe.component?He?He.children:null:T,F,W)})(pe,oe[pe.value.outlet],T,F.concat([pe.value]),W),delete oe[pe.value.outlet]}),Ve(oe,(pe,He)=>bo(pe,T.getContext(He),W)),W}function bo(A,O,T){const F=Si(A),W=A.value;Ve(F,(oe,pe)=>{bo(oe,W.component?O?O.children.getContext(pe):null:O,T)}),T.canDeactivateChecks.push(new ms(W.component&&O&&O.outlet&&O.outlet.isActivated?O.outlet.component:null,W))}function Ns(A){return"function"==typeof A}function k(A){return A instanceof q.K||"EmptyError"===A?.name}const ce=Symbol("INITIAL_VALUE");function et(){return(0,Be.w)(A=>(0,ie.a)(A.map(O=>O.pipe((0,ze.q)(1),(0,Ke.O)(ce)))).pipe((0,Qe.U)(O=>{for(const T of O)if(!0!==T){if(T===ce)return ce;if(!1===T||T instanceof br)return T}return!0}),(0,it.h)(O=>O!==ce),(0,ze.q)(1)))}function Bs(A){return(0,ne.z)((0,It.b)(O=>{if(Re(O))throw To(0,O)}),(0,Qe.U)(O=>!0===O))}const Ko={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yo(A,O,T,F,W){const oe=Vi(A,O,T);return oe.matched?function Mo(A,O,T,F){const W=O.canMatch;if(!W||0===W.length)return(0,ee.of)(!0);const oe=W.map(pe=>{const He=us(pe,A);return _t(function Wo(A){return A&&Ns(A.canMatch)}(He)?He.canMatch(O,T):A.runInContext(()=>He(O,T)))});return(0,ee.of)(oe).pipe(et(),Bs())}(F=Rs(O,F),O,T).pipe((0,Qe.U)(pe=>!0===pe?oe:{...Ko})):(0,ee.of)(oe)}function Vi(A,O,T){if(""===O.path)return"full"===O.pathMatch&&(A.hasChildren()||T.length>0)?{...Ko}:{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const W=(O.matcher||ir)(T,A,O);if(!W)return{...Ko};const oe={};Ve(W.posParams,(He,bt)=>{oe[bt]=He.path});const pe=W.consumed.length>0?{...oe,...W.consumed[W.consumed.length-1].parameters}:oe;return{matched:!0,consumedSegments:W.consumed,remainingSegments:T.slice(W.consumed.length),parameters:pe,positionalParamSegments:W.posParams??{}}}function Ki(A,O,T,F){if(T.length>0&&function _a(A,O,T){return T.some(F=>ys(A,O,F)&&Zi(F)!==fn)}(A,T,F)){const oe=new Sn(O,function ai(A,O,T,F){const W={};W[fn]=F,F._sourceSegment=A,F._segmentIndexShift=O.length;for(const oe of T)if(""===oe.path&&Zi(oe)!==fn){const pe=new Sn([],{});pe._sourceSegment=A,pe._segmentIndexShift=O.length,W[Zi(oe)]=pe}return W}(A,O,F,new Sn(T,A.children)));return oe._sourceSegment=A,oe._segmentIndexShift=O.length,{segmentGroup:oe,slicedSegments:[]}}if(0===T.length&&function Qo(A,O,T){return T.some(F=>ys(A,O,F))}(A,T,F)){const oe=new Sn(A.segments,function xi(A,O,T,F,W){const oe={};for(const pe of F)if(ys(A,T,pe)&&!W[Zi(pe)]){const He=new Sn([],{});He._sourceSegment=A,He._segmentIndexShift=O.length,oe[Zi(pe)]=He}return{...W,...oe}}(A,O,T,F,A.children));return oe._sourceSegment=A,oe._segmentIndexShift=O.length,{segmentGroup:oe,slicedSegments:T}}const W=new Sn(A.segments,A.children);return W._sourceSegment=A,W._segmentIndexShift=O.length,{segmentGroup:W,slicedSegments:T}}function ys(A,O,T){return(!(A.hasChildren()||O.length>0)||"full"!==T.pathMatch)&&""===T.path}function ba(A,O,T,F){return!!(Zi(A)===F||F!==fn&&ys(O,T,A))&&("**"===A.path||Vi(O,A,T).matched)}function Zo(A,O,T){return 0===O.length&&!A.children[T]}const Bi=!1;class Do{constructor(O){this.segmentGroup=O||null}}class lo{constructor(O){this.urlTree=O}}function Xi(A){return(0,Z._)(new Do(A))}function qo(A){return(0,Z._)(new lo(A))}class js{constructor(O,T,F,W,oe){this.injector=O,this.configLoader=T,this.urlSerializer=F,this.urlTree=W,this.config=oe,this.allowRedirects=!0}apply(){const O=Ki(this.urlTree.root,[],[],this.config).segmentGroup,T=new Sn(O.segments,O.children);return this.expandSegmentGroup(this.injector,this.config,T,fn).pipe((0,Qe.U)(oe=>this.createUrlTree(Ft(oe),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Ze.K)(oe=>{if(oe instanceof lo)return this.allowRedirects=!1,this.match(oe.urlTree);throw oe instanceof Do?this.noMatchError(oe):oe}))}match(O){return this.expandSegmentGroup(this.injector,this.config,O.root,fn).pipe((0,Qe.U)(W=>this.createUrlTree(Ft(W),O.queryParams,O.fragment))).pipe((0,Ze.K)(W=>{throw W instanceof Do?this.noMatchError(W):W}))}noMatchError(O){return new f.vHH(4002,Bi)}createUrlTree(O,T,F){const W=ke(O);return new br(W,T,F)}expandSegmentGroup(O,T,F,W){return 0===F.segments.length&&F.hasChildren()?this.expandChildren(O,T,F).pipe((0,Qe.U)(oe=>new Sn([],oe))):this.expandSegment(O,F,T,F.segments,W,!0)}expandChildren(O,T,F){const W=[];for(const oe of Object.keys(F.children))"primary"===oe?W.unshift(oe):W.push(oe);return(0,I.D)(W).pipe((0,Ct.b)(oe=>{const pe=F.children[oe],He=Ho(T,oe);return this.expandSegmentGroup(O,He,pe,oe).pipe((0,Qe.U)(bt=>({segment:bt,outlet:oe})))}),(0,Pt.R)((oe,pe)=>(oe[pe.outlet]=pe.segment,oe),{}),(0,St.Z)())}expandSegment(O,T,F,W,oe,pe){return(0,I.D)(F).pipe((0,Ct.b)(He=>this.expandSegmentAgainstRoute(O,T,F,He,W,oe,pe).pipe((0,Ze.K)(tn=>{if(tn instanceof Do)return(0,ee.of)(null);throw tn}))),(0,xe.P)(He=>!!He),(0,Ze.K)((He,bt)=>{if(k(He))return Zo(T,W,oe)?(0,ee.of)(new Sn([],{})):Xi(T);throw He}))}expandSegmentAgainstRoute(O,T,F,W,oe,pe,He){return ba(W,T,oe,pe)?void 0===W.redirectTo?this.matchSegmentAgainstRoute(O,T,W,oe,pe):He&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(O,T,F,W,oe,pe):Xi(T):Xi(T)}expandSegmentAgainstRouteUsingRedirect(O,T,F,W,oe,pe){return"**"===W.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(O,F,W,pe):this.expandRegularSegmentAgainstRouteUsingRedirect(O,T,F,W,oe,pe)}expandWildCardWithParamsAgainstRouteUsingRedirect(O,T,F,W){const oe=this.applyRedirectCommands([],F.redirectTo,{});return F.redirectTo.startsWith("/")?qo(oe):this.lineralizeSegments(F,oe).pipe((0,Ue.z)(pe=>{const He=new Sn(pe,{});return this.expandSegment(O,He,T,pe,W,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(O,T,F,W,oe,pe){const{matched:He,consumedSegments:bt,remainingSegments:tn,positionalParamSegments:un}=Vi(T,W,oe);if(!He)return Xi(T);const Sr=this.applyRedirectCommands(bt,W.redirectTo,un);return W.redirectTo.startsWith("/")?qo(Sr):this.lineralizeSegments(W,Sr).pipe((0,Ue.z)(Ur=>this.expandSegment(O,T,F,Ur.concat(tn),pe,!1)))}matchSegmentAgainstRoute(O,T,F,W,oe){return"**"===F.path?(O=Rs(F,O),F.loadChildren?(F._loadedRoutes?(0,ee.of)({routes:F._loadedRoutes,injector:F._loadedInjector}):this.configLoader.loadChildren(O,F)).pipe((0,Qe.U)(He=>(F._loadedRoutes=He.routes,F._loadedInjector=He.injector,new Sn(W,{})))):(0,ee.of)(new Sn(W,{}))):Yo(T,F,W,O).pipe((0,Be.w)(({matched:pe,consumedSegments:He,remainingSegments:bt})=>pe?this.getChildConfig(O=F._injector??O,F,W).pipe((0,Ue.z)(un=>{const Sr=un.injector??O,Ur=un.routes,{segmentGroup:Ds,slicedSegments:fi}=Ki(T,He,bt,Ur),xa=new Sn(Ds.segments,Ds.children);if(0===fi.length&&xa.hasChildren())return this.expandChildren(Sr,Ur,xa).pipe((0,Qe.U)(fl=>new Sn(He,fl)));if(0===Ur.length&&0===fi.length)return(0,ee.of)(new Sn(He,{}));const ji=Zi(F)===oe;return this.expandSegment(Sr,xa,Ur,fi,ji?fn:oe,!0).pipe((0,Qe.U)(Ca=>new Sn(He.concat(Ca.segments),Ca.children)))})):Xi(T)))}getChildConfig(O,T,F){return T.children?(0,ee.of)({routes:T.children,injector:O}):T.loadChildren?void 0!==T._loadedRoutes?(0,ee.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):function Ri(A,O,T,F){const W=O.canLoad;if(void 0===W||0===W.length)return(0,ee.of)(!0);const oe=W.map(pe=>{const He=us(pe,A);return _t(function Ys(A){return A&&Ns(A.canLoad)}(He)?He.canLoad(O,T):A.runInContext(()=>He(O,T)))});return(0,ee.of)(oe).pipe(et(),Bs())}(O,T,F).pipe((0,Ue.z)(W=>W?this.configLoader.loadChildren(O,T).pipe((0,It.b)(oe=>{T._loadedRoutes=oe.routes,T._loadedInjector=oe.injector})):function Ml(A){return(0,Z._)(So(Bi,3))}())):(0,ee.of)({routes:[],injector:O})}lineralizeSegments(O,T){let F=[],W=T.root;for(;;){if(F=F.concat(W.segments),0===W.numberOfChildren)return(0,ee.of)(F);if(W.numberOfChildren>1||!W.children[fn])return O.redirectTo,(0,Z._)(new f.vHH(4e3,Bi));W=W.children[fn]}}applyRedirectCommands(O,T,F){return this.applyRedirectCreateUrlTree(T,this.urlSerializer.parse(T),O,F)}applyRedirectCreateUrlTree(O,T,F,W){const oe=this.createSegmentGroup(O,T.root,F,W);return new br(oe,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(O,T){const F={};return Ve(O,(W,oe)=>{if("string"==typeof W&&W.startsWith(":")){const He=W.substring(1);F[oe]=T[He]}else F[oe]=W}),F}createSegmentGroup(O,T,F,W){const oe=this.createSegments(O,T.segments,F,W);let pe={};return Ve(T.children,(He,bt)=>{pe[bt]=this.createSegmentGroup(O,He,F,W)}),new Sn(oe,pe)}createSegments(O,T,F,W){return T.map(oe=>oe.path.startsWith(":")?this.findPosParam(O,oe,W):this.findOrReturn(oe,F))}findPosParam(O,T,F){const W=F[T.path.substring(1)];if(!W)throw new f.vHH(4001,Bi);return W}findOrReturn(O,T){let F=0;for(const W of T){if(W.path===O.path)return T.splice(F),W;F++}return O}}class Ga{}class Ji{constructor(O,T,F,W,oe,pe,He){this.injector=O,this.rootComponentType=T,this.config=F,this.urlTree=W,this.url=oe,this.paramsInheritanceStrategy=pe,this.urlSerializer=He}recognize(){const O=Ki(this.urlTree.root,[],[],this.config.filter(T=>void 0===T.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,O,fn).pipe((0,Qe.U)(T=>{if(null===T)return null;const F=new Gi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},fn,this.rootComponentType,null,this.urlTree.root,-1,{}),W=new Mr(F,T),oe=new sr(this.url,W);return this.inheritParamsAndData(oe._root),oe}))}inheritParamsAndData(O){const T=O.value,F=Ps(T,this.paramsInheritanceStrategy);T.params=Object.freeze(F.params),T.data=Object.freeze(F.data),O.children.forEach(W=>this.inheritParamsAndData(W))}processSegmentGroup(O,T,F,W){return 0===F.segments.length&&F.hasChildren()?this.processChildren(O,T,F):this.processSegment(O,T,F,F.segments,W)}processChildren(O,T,F){return(0,I.D)(Object.keys(F.children)).pipe((0,Ct.b)(W=>{const oe=F.children[W],pe=Ho(T,W);return this.processSegmentGroup(O,pe,oe,W)}),(0,Pt.R)((W,oe)=>W&&oe?(W.push(...oe),W):null),(0,rt.o)(W=>null!==W),(0,qe.d)(null),(0,St.Z)(),(0,Qe.U)(W=>{if(null===W)return null;const oe=Qr(W);return function Qs(A){A.sort((O,T)=>O.value.outlet===fn?-1:T.value.outlet===fn?1:O.value.outlet.localeCompare(T.value.outlet))}(oe),oe}))}processSegment(O,T,F,W,oe){return(0,I.D)(T).pipe((0,Ct.b)(pe=>this.processSegmentAgainstRoute(pe._injector??O,pe,F,W,oe)),(0,xe.P)(pe=>!!pe),(0,Ze.K)(pe=>{if(k(pe))return Zo(F,W,oe)?(0,ee.of)([]):(0,ee.of)(null);throw pe}))}processSegmentAgainstRoute(O,T,F,W,oe){if(T.redirectTo||!ba(T,F,W,oe))return(0,ee.of)(null);let pe;if("**"===T.path){const He=W.length>0?Tt(W).parameters:{},bt=ea(F)+W.length,tn=new Gi(W,He,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,yn(T),Zi(T),T.component??T._loadedComponent??null,T,Ai(F),bt,Tn(T));pe=(0,ee.of)({snapshot:tn,consumedSegments:[],remainingSegments:[]})}else pe=Yo(F,T,W,O).pipe((0,Qe.U)(({matched:He,consumedSegments:bt,remainingSegments:tn,parameters:un})=>{if(!He)return null;const Sr=ea(F)+bt.length;return{snapshot:new Gi(bt,un,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,yn(T),Zi(T),T.component??T._loadedComponent??null,T,Ai(F),Sr,Tn(T)),consumedSegments:bt,remainingSegments:tn}}));return pe.pipe((0,Be.w)(He=>{if(null===He)return(0,ee.of)(null);const{snapshot:bt,consumedSegments:tn,remainingSegments:un}=He;O=T._injector??O;const Sr=T._loadedInjector??O,Ur=function Di(A){return A.children?A.children:A.loadChildren?A._loadedRoutes:[]}(T),{segmentGroup:Ds,slicedSegments:fi}=Ki(F,tn,un,Ur.filter(ji=>void 0===ji.redirectTo));if(0===fi.length&&Ds.hasChildren())return this.processChildren(Sr,Ur,Ds).pipe((0,Qe.U)(ji=>null===ji?null:[new Mr(bt,ji)]));if(0===Ur.length&&0===fi.length)return(0,ee.of)([new Mr(bt,[])]);const xa=Zi(T)===oe;return this.processSegment(Sr,Ur,Ds,fi,xa?fn:oe).pipe((0,Qe.U)(ji=>null===ji?null:[new Mr(bt,ji)]))}))}}function _s(A){const O=A.value.routeConfig;return O&&""===O.path&&void 0===O.redirectTo}function Qr(A){const O=[],T=new Set;for(const F of A){if(!_s(F)){O.push(F);continue}const W=O.find(oe=>F.value.routeConfig===oe.value.routeConfig);void 0!==W?(W.children.push(...F.children),T.add(W)):O.push(F)}for(const F of T){const W=Qr(F.children);O.push(new Mr(F.value,W))}return O.filter(F=>!T.has(F))}function Ai(A){let O=A;for(;O._sourceSegment;)O=O._sourceSegment;return O}function ea(A){let O=A,T=O._segmentIndexShift??0;for(;O._sourceSegment;)O=O._sourceSegment,T+=O._segmentIndexShift??0;return T-1}function yn(A){return A.data||{}}function Tn(A){return A.resolve||{}}function ue(A){return"string"==typeof A.title||null===A.title}function we(A){return(0,Be.w)(O=>{const T=A(O);return T?(0,I.D)(T).pipe((0,Qe.U)(()=>O)):(0,ee.of)(O)})}const Dt=new f.OlP("ROUTES");let nn=(()=>{class A{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(T){if(this.componentLoaders.get(T))return this.componentLoaders.get(T);if(T._loadedComponent)return(0,ee.of)(T._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(T);const F=_t(T.loadComponent()).pipe((0,Qe.U)(Nr),(0,It.b)(oe=>{this.onLoadEndListener&&this.onLoadEndListener(T),T._loadedComponent=oe}),(0,vt.x)(()=>{this.componentLoaders.delete(T)})),W=new Le.c(F,()=>new Ge.x).pipe((0,At.x)());return this.componentLoaders.set(T,W),W}loadChildren(T,F){if(this.childrenLoaders.get(F))return this.childrenLoaders.get(F);if(F._loadedRoutes)return(0,ee.of)({routes:F._loadedRoutes,injector:F._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(F);const oe=this.loadModuleFactoryOrRoutes(F.loadChildren).pipe((0,Qe.U)(He=>{this.onLoadEndListener&&this.onLoadEndListener(F);let bt,tn,un=!1;Array.isArray(He)?tn=He:(bt=He.create(T).injector,tn=si(bt.get(Dt,[],f.XFs.Self|f.XFs.Optional)));return{routes:tn.map(Pr),injector:bt}}),(0,vt.x)(()=>{this.childrenLoaders.delete(F)})),pe=new Le.c(oe,()=>new Ge.x).pipe((0,At.x)());return this.childrenLoaders.set(F,pe),pe}loadModuleFactoryOrRoutes(T){return _t(T()).pipe((0,Qe.U)(Nr),(0,Ue.z)(F=>F instanceof f.YKP||Array.isArray(F)?(0,ee.of)(F):(0,I.D)(this.compiler.compileModuleAsync(F))))}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Nr(A){return function Xr(A){return A&&"object"==typeof A&&"default"in A}(A)?A.default:A}let gr=(()=>{class A{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ge.x,this.configLoader=(0,f.f3M)(nn),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(Qn),this.rootContexts=(0,f.f3M)(Qi),this.navigationId=0,this.afterPreactivation=()=>(0,ee.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=W=>this.events.next(new Nn(W)),this.configLoader.onLoadStartListener=W=>this.events.next(new Er(W))}complete(){this.transitions?.complete()}handleNavigationRequest(T){const F=++this.navigationId;this.transitions?.next({...this.transitions.value,...T,id:F})}setupNavigations(T){return this.transitions=new B.X({id:0,targetPageId:0,currentUrlTree:T.currentUrlTree,currentRawUrl:T.currentUrlTree,extractedUrl:T.urlHandlingStrategy.extract(T.currentUrlTree),urlAfterRedirects:T.urlHandlingStrategy.extract(T.currentUrlTree),rawUrl:T.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:jr,restoredState:null,currentSnapshot:T.routerState.snapshot,targetSnapshot:null,currentRouterState:T.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,it.h)(F=>0!==F.id),(0,Qe.U)(F=>({...F,extractedUrl:T.urlHandlingStrategy.extract(F.rawUrl)})),(0,Be.w)(F=>{let W=!1,oe=!1;return(0,ee.of)(F).pipe((0,It.b)(pe=>{this.currentNavigation={id:pe.id,initialUrl:pe.rawUrl,extractedUrl:pe.extractedUrl,trigger:pe.source,extras:pe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Be.w)(pe=>{const He=T.browserUrlTree.toString(),bt=!T.navigated||pe.extractedUrl.toString()!==He||He!==T.currentUrlTree.toString();if(!bt&&"reload"!==(pe.extras.onSameUrlNavigation??T.onSameUrlNavigation)){const un="";return this.events.next(new In(pe.id,T.serializeUrl(F.rawUrl),un,0)),T.rawUrlTree=pe.rawUrl,pe.resolve(null),fe.E}if(T.urlHandlingStrategy.shouldProcessUrl(pe.rawUrl))return Wn(pe.source)&&(T.browserUrlTree=pe.extractedUrl),(0,ee.of)(pe).pipe((0,Be.w)(un=>{const Sr=this.transitions?.getValue();return this.events.next(new bn(un.id,this.urlSerializer.serialize(un.extractedUrl),un.source,un.restoredState)),Sr!==this.transitions?.getValue()?fe.E:Promise.resolve(un)}),function Xo(A,O,T,F){return(0,Be.w)(W=>function li(A,O,T,F,W){return new js(A,O,T,F,W).apply()}(A,O,T,W.extractedUrl,F).pipe((0,Qe.U)(oe=>({...W,urlAfterRedirects:oe}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,T.config),(0,It.b)(un=>{this.currentNavigation={...this.currentNavigation,finalUrl:un.urlAfterRedirects},F.urlAfterRedirects=un.urlAfterRedirects}),function ll(A,O,T,F,W){return(0,Ue.z)(oe=>function Jo(A,O,T,F,W,oe,pe="emptyOnly"){return new Ji(A,O,T,F,W,pe,oe).recognize().pipe((0,Be.w)(He=>null===He?function Xa(A){return new le.y(O=>O.error(A))}(new Ga):(0,ee.of)(He)))}(A,O,T,oe.urlAfterRedirects,F.serialize(oe.urlAfterRedirects),F,W).pipe((0,Qe.U)(pe=>({...oe,targetSnapshot:pe}))))}(this.environmentInjector,this.rootComponentType,T.config,this.urlSerializer,T.paramsInheritanceStrategy),(0,It.b)(un=>{if(F.targetSnapshot=un.targetSnapshot,"eager"===T.urlUpdateStrategy){if(!un.extras.skipLocationChange){const Ur=T.urlHandlingStrategy.merge(un.urlAfterRedirects,un.rawUrl);T.setBrowserUrl(Ur,un)}T.browserUrlTree=un.urlAfterRedirects}const Sr=new yr(un.id,this.urlSerializer.serialize(un.extractedUrl),this.urlSerializer.serialize(un.urlAfterRedirects),un.targetSnapshot);this.events.next(Sr)}));if(bt&&T.urlHandlingStrategy.shouldProcessUrl(T.rawUrlTree)){const{id:un,extractedUrl:Sr,source:Ur,restoredState:Ds,extras:fi}=pe,xa=new bn(un,this.urlSerializer.serialize(Sr),Ur,Ds);this.events.next(xa);const ji=Ta(Sr,this.rootComponentType).snapshot;return F={...pe,targetSnapshot:ji,urlAfterRedirects:Sr,extras:{...fi,skipLocationChange:!1,replaceUrl:!1}},(0,ee.of)(F)}{const un="";return this.events.next(new In(pe.id,T.serializeUrl(F.extractedUrl),un,1)),T.rawUrlTree=pe.rawUrl,pe.resolve(null),fe.E}}),(0,It.b)(pe=>{const He=new Ar(pe.id,this.urlSerializer.serialize(pe.extractedUrl),this.urlSerializer.serialize(pe.urlAfterRedirects),pe.targetSnapshot);this.events.next(He)}),(0,Qe.U)(pe=>F={...pe,guards:$o(pe.targetSnapshot,pe.currentSnapshot,this.rootContexts)}),function ln(A,O){return(0,Ue.z)(T=>{const{targetSnapshot:F,currentSnapshot:W,guards:{canActivateChecks:oe,canDeactivateChecks:pe}}=T;return 0===pe.length&&0===oe.length?(0,ee.of)({...T,guardsResult:!0}):function Gr(A,O,T,F){return(0,I.D)(A).pipe((0,Ue.z)(W=>function Ha(A,O,T,F,W){const oe=O&&O.routeConfig?O.routeConfig.canDeactivate:null;if(!oe||0===oe.length)return(0,ee.of)(!0);const pe=oe.map(He=>{const bt=vi(O)??W,tn=us(He,bt);return _t(function Un(A){return A&&Ns(A.canDeactivate)}(tn)?tn.canDeactivate(A,O,T,F):bt.runInContext(()=>tn(A,O,T,F))).pipe((0,xe.P)())});return(0,ee.of)(pe).pipe(et())}(W.component,W.route,T,O,F)),(0,xe.P)(W=>!0!==W,!0))}(pe,F,W,A).pipe((0,Ue.z)(He=>He&&function Za(A){return"boolean"==typeof A}(He)?function yt(A,O,T,F){return(0,I.D)(O).pipe((0,Ct.b)(W=>(0,te.z)(function zo(A,O){return null!==A&&O&&O(new Yr(A)),(0,ee.of)(!0)}(W.route.parent,F),function cr(A,O){return null!==A&&O&&O(new De(A)),(0,ee.of)(!0)}(W.route,F),function zi(A,O,T){const F=O[O.length-1],oe=O.slice(0,O.length-1).reverse().map(pe=>function Ei(A){const O=A.routeConfig?A.routeConfig.canActivateChild:null;return O&&0!==O.length?{node:A,guards:O}:null}(pe)).filter(pe=>null!==pe).map(pe=>(0,K.P)(()=>{const He=pe.guards.map(bt=>{const tn=vi(pe.node)??T,un=us(bt,tn);return _t(function Ao(A){return A&&Ns(A.canActivateChild)}(un)?un.canActivateChild(F,A):tn.runInContext(()=>un(F,A))).pipe((0,xe.P)())});return(0,ee.of)(He).pipe(et())}));return(0,ee.of)(oe).pipe(et())}(A,W.path,T),function Al(A,O,T){const F=O.routeConfig?O.routeConfig.canActivate:null;if(!F||0===F.length)return(0,ee.of)(!0);const W=F.map(oe=>(0,K.P)(()=>{const pe=vi(O)??T,He=us(oe,pe);return _t(function ja(A){return A&&Ns(A.canActivate)}(He)?He.canActivate(O,A):pe.runInContext(()=>He(O,A))).pipe((0,xe.P)())}));return(0,ee.of)(W).pipe(et())}(A,W.route,T))),(0,xe.P)(W=>!0!==W,!0))}(F,oe,A,O):(0,ee.of)(He)),(0,Qe.U)(He=>({...T,guardsResult:He})))})}(this.environmentInjector,pe=>this.events.next(pe)),(0,It.b)(pe=>{if(F.guardsResult=pe.guardsResult,Re(pe.guardsResult))throw To(0,pe.guardsResult);const He=new oi(pe.id,this.urlSerializer.serialize(pe.extractedUrl),this.urlSerializer.serialize(pe.urlAfterRedirects),pe.targetSnapshot,!!pe.guardsResult);this.events.next(He)}),(0,it.h)(pe=>!!pe.guardsResult||(T.restoreHistory(pe),this.cancelNavigationTransition(pe,"",3),!1)),we(pe=>{if(pe.guards.canActivateChecks.length)return(0,ee.of)(pe).pipe((0,It.b)(He=>{const bt=new _i(He.id,this.urlSerializer.serialize(He.extractedUrl),this.urlSerializer.serialize(He.urlAfterRedirects),He.targetSnapshot);this.events.next(bt)}),(0,Be.w)(He=>{let bt=!1;return(0,ee.of)(He).pipe(function en(A,O){return(0,Ue.z)(T=>{const{targetSnapshot:F,guards:{canActivateChecks:W}}=T;if(!W.length)return(0,ee.of)(T);let oe=0;return(0,I.D)(W).pipe((0,Ct.b)(pe=>function ft(A,O,T,F){const W=A.routeConfig,oe=A._resolve;return void 0!==W?.title&&!ue(W)&&(oe[Kt]=W.title),function P(A,O,T,F){const W=function Q(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}(A);if(0===W.length)return(0,ee.of)({});const oe={};return(0,I.D)(W).pipe((0,Ue.z)(pe=>function V(A,O,T,F){const W=vi(O)??F,oe=us(A,W);return _t(oe.resolve?oe.resolve(O,T):W.runInContext(()=>oe(O,T)))}(A[pe],O,T,F).pipe((0,xe.P)(),(0,It.b)(He=>{oe[pe]=He}))),(0,lt.h)(1),(0,Xe.h)(oe),(0,Ze.K)(pe=>k(pe)?fe.E:(0,Z._)(pe)))}(oe,A,O,F).pipe((0,Qe.U)(pe=>(A._resolvedData=pe,A.data=Ps(A,T).resolve,W&&ue(W)&&(A.data[Kt]=W.title),null)))}(pe.route,F,A,O)),(0,It.b)(()=>oe++),(0,lt.h)(1),(0,Ue.z)(pe=>oe===W.length?(0,ee.of)(T):fe.E))})}(T.paramsInheritanceStrategy,this.environmentInjector),(0,It.b)({next:()=>bt=!0,complete:()=>{bt||(T.restoreHistory(He),this.cancelNavigationTransition(He,"",2))}}))}),(0,It.b)(He=>{const bt=new xn(He.id,this.urlSerializer.serialize(He.extractedUrl),this.urlSerializer.serialize(He.urlAfterRedirects),He.targetSnapshot);this.events.next(bt)}))}),we(pe=>{const He=bt=>{const tn=[];bt.routeConfig?.loadComponent&&!bt.routeConfig._loadedComponent&&tn.push(this.configLoader.loadComponent(bt.routeConfig).pipe((0,It.b)(un=>{bt.component=un}),(0,Qe.U)(()=>{})));for(const un of bt.children)tn.push(...He(un));return tn};return(0,ie.a)(He(pe.targetSnapshot.root)).pipe((0,qe.d)(),(0,ze.q)(1))}),we(()=>this.afterPreactivation()),(0,Qe.U)(pe=>{const He=function mo(A,O,T){const F=Ks(A,O._root,T?T._root:void 0);return new ri(F,O)}(T.routeReuseStrategy,pe.targetSnapshot,pe.currentRouterState);return F={...pe,targetRouterState:He}}),(0,It.b)(pe=>{T.currentUrlTree=pe.urlAfterRedirects,T.rawUrlTree=T.urlHandlingStrategy.merge(pe.urlAfterRedirects,pe.rawUrl),T.routerState=pe.targetRouterState,"deferred"===T.urlUpdateStrategy&&(pe.extras.skipLocationChange||T.setBrowserUrl(T.rawUrlTree,pe),T.browserUrlTree=pe.urlAfterRedirects)}),((A,O,T)=>(0,Qe.U)(F=>(new ls(O,F.targetRouterState,F.currentRouterState,T).activate(A),F)))(this.rootContexts,T.routeReuseStrategy,pe=>this.events.next(pe)),(0,ze.q)(1),(0,It.b)({next:pe=>{W=!0,this.lastSuccessfulNavigation=this.currentNavigation,T.navigated=!0,this.events.next(new mn(pe.id,this.urlSerializer.serialize(pe.extractedUrl),this.urlSerializer.serialize(T.currentUrlTree))),T.titleStrategy?.updateTitle(pe.targetRouterState.snapshot),pe.resolve(!0)},complete:()=>{W=!0}}),(0,vt.x)(()=>{W||oe||this.cancelNavigationTransition(F,"",1),this.currentNavigation?.id===F.id&&(this.currentNavigation=null)}),(0,Ze.K)(pe=>{if(oe=!0,Sa(pe)){Wi(pe)||(T.navigated=!0,T.restoreHistory(F,!0));const He=new An(F.id,this.urlSerializer.serialize(F.extractedUrl),pe.message,pe.cancellationCode);if(this.events.next(He),Wi(pe)){const bt=T.urlHandlingStrategy.merge(pe.url,T.rawUrlTree),tn={skipLocationChange:F.extras.skipLocationChange,replaceUrl:"eager"===T.urlUpdateStrategy||Wn(F.source)};T.scheduleNavigation(bt,jr,null,tn,{resolve:F.resolve,reject:F.reject,promise:F.promise})}else F.resolve(!1)}else{T.restoreHistory(F,!0);const He=new er(F.id,this.urlSerializer.serialize(F.extractedUrl),pe,F.targetSnapshot??void 0);this.events.next(He);try{F.resolve(T.errorHandler(pe))}catch(bt){F.reject(bt)}}return fe.E}))}))}cancelNavigationTransition(T,F,W){const oe=new An(T.id,this.urlSerializer.serialize(T.extractedUrl),F,W);this.events.next(oe),T.resolve(!1)}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function Wn(A){return A!==jr}let on=(()=>{class A{buildTitle(T){let F,W=T.root;for(;void 0!==W;)F=this.getResolvedTitleForRoute(W)??F,W=W.children.find(oe=>oe.outlet===fn);return F}getResolvedTitleForRoute(T){return T.data[Kt]}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:function(){return(0,f.f3M)(kr)},providedIn:"root"}),A})(),kr=(()=>{class A extends on{constructor(T){super(),this.title=T}updateTitle(T){const F=this.buildTitle(T);void 0!==F&&this.title.setTitle(F)}}return A.\u0275fac=function(T){return new(T||A)(f.LFG(rr.Dx))},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),uo=(()=>{class A{}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:function(){return(0,f.f3M)(vn)},providedIn:"root"}),A})();class mr{shouldDetach(O){return!1}store(O,T){}shouldAttach(O){return!1}retrieve(O){return null}shouldReuseRoute(O,T){return O.routeConfig===T.routeConfig}}let vn=(()=>{class A extends mr{}return A.\u0275fac=function(){let O;return function(F){return(O||(O=f.n5z(A)))(F||A)}}(),A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const jn=new f.OlP("",{providedIn:"root",factory:()=>({})});let ta=(()=>{class A{}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:function(){return(0,f.f3M)(Lr)},providedIn:"root"}),A})(),Lr=(()=>{class A{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,F){return T}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function co(A){throw A}function Aa(A,O,T){return O.parse("/")}const na={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},va={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let vs=(()=>{class A{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this.options=(0,f.f3M)(jn,{optional:!0})||{},this.errorHandler=this.options.errorHandler||co,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Aa,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(ta),this.routeReuseStrategy=(0,f.f3M)(uo),this.urlCreationStrategy=(0,f.f3M)(pr),this.titleStrategy=(0,f.f3M)(on),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=si((0,f.f3M)(Dt,{optional:!0})??[]),this.navigationTransitions=(0,f.f3M)(gr),this.urlSerializer=(0,f.f3M)(Qn),this.location=(0,f.f3M)(je.Ye),this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new br,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ta(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(T=>{this.lastSuccessfulId=T.id,this.currentPageId=this.browserPageId??0},T=>{this.console.warn(`Unhandled Navigation Error: ${T}`)})}resetRootComponentType(T){this.routerState.root.component=T,this.navigationTransitions.rootComponentType=T}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const T=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),jr,T)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(T=>{const F="popstate"===T.type?"popstate":"hashchange";"popstate"===F&&setTimeout(()=>{this.navigateToSyncWithBrowser(T.url,F,T.state)},0)}))}navigateToSyncWithBrowser(T,F,W){const oe={replaceUrl:!0},pe=W?.navigationId?W:null;if(W){const bt={...W};delete bt.navigationId,delete bt.\u0275routerPageId,0!==Object.keys(bt).length&&(oe.state=bt)}const He=this.parseUrl(T);this.scheduleNavigation(He,F,pe,oe)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(T){this.config=T.map(Pr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(T,F={}){const{relativeTo:W,queryParams:oe,fragment:pe,queryParamsHandling:He,preserveFragment:bt}=F,tn=bt?this.currentUrlTree.fragment:pe;let un=null;switch(He){case"merge":un={...this.currentUrlTree.queryParams,...oe};break;case"preserve":un=this.currentUrlTree.queryParams;break;default:un=oe||null}return null!==un&&(un=this.removeEmptyProps(un)),this.urlCreationStrategy.createUrlTree(W,this.routerState,this.currentUrlTree,T,un,tn??null)}navigateByUrl(T,F={skipLocationChange:!1}){const W=Re(T)?T:this.parseUrl(T),oe=this.urlHandlingStrategy.merge(W,this.rawUrlTree);return this.scheduleNavigation(oe,jr,null,F)}navigate(T,F={skipLocationChange:!1}){return function ho(A){for(let O=0;O<A.length;O++){const T=A[O];if(null==T)throw new f.vHH(4008,false)}}(T),this.navigateByUrl(this.createUrlTree(T,F),F)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){let F;try{F=this.urlSerializer.parse(T)}catch(W){F=this.malformedUriErrorHandler(W,this.urlSerializer,T)}return F}isActive(T,F){let W;if(W=!0===F?{...na}:!1===F?{...va}:F,Re(T))return Fr(this.currentUrlTree,T,W);const oe=this.parseUrl(T);return Fr(this.currentUrlTree,oe,W)}removeEmptyProps(T){return Object.keys(T).reduce((F,W)=>{const oe=T[W];return null!=oe&&(F[W]=oe),F},{})}scheduleNavigation(T,F,W,oe,pe){if(this.disposed)return Promise.resolve(!1);let He,bt,tn,un;return pe?(He=pe.resolve,bt=pe.reject,tn=pe.promise):tn=new Promise((Sr,Ur)=>{He=Sr,bt=Ur}),un="computed"===this.canceledNavigationResolution?W&&W.\u0275routerPageId?W.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:un,source:F,restoredState:W,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:T,extras:oe,resolve:He,reject:bt,promise:tn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),tn.catch(Sr=>Promise.reject(Sr))}setBrowserUrl(T,F){const W=this.urlSerializer.serialize(T);if(this.location.isCurrentPathEqualTo(W)||F.extras.replaceUrl){const pe={...F.extras.state,...this.generateNgRouterState(F.id,this.browserPageId)};this.location.replaceState(W,"",pe)}else{const oe={...F.extras.state,...this.generateNgRouterState(F.id,F.targetPageId)};this.location.go(W,"",oe)}}restoreHistory(T,F=!1){if("computed"===this.canceledNavigationResolution){const oe=this.currentPageId-(this.browserPageId??this.currentPageId);0!==oe?this.location.historyGo(oe):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===oe&&(this.resetState(T),this.browserUrlTree=T.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(F&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=T.currentRouterState,this.currentUrlTree=T.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(T,F){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:F}:{navigationId:T}}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})(),ra=(()=>{class A{constructor(T,F,W,oe,pe,He){this.router=T,this.route=F,this.tabIndexAttribute=W,this.renderer=oe,this.el=pe,this.locationStrategy=He,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Ge.x;const bt=pe.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===bt||"area"===bt,this.isAnchorElement?this.subscription=T.events.subscribe(tn=>{tn instanceof mn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(T){this._preserveFragment=(0,f.D6c)(T)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(T){this._skipLocationChange=(0,f.D6c)(T)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(T){this._replaceUrl=(0,f.D6c)(T)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(T){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",T)}ngOnChanges(T){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(T){null!=T?(this.commands=Array.isArray(T)?T:[T],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(T,F,W,oe,pe){return!!(null===this.urlTree||this.isAnchorElement&&(0!==T||F||W||oe||pe||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const T=null===this.href?null:(0,f.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",T)}applyAttributeValue(T,F){const W=this.renderer,oe=this.el.nativeElement;null!==F?W.setAttribute(oe,T,F):W.removeAttribute(oe,T)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return A.\u0275fac=function(T){return new(T||A)(f.Y36(vs),f.Y36(wn),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(je.S$))},A.\u0275dir=f.lG2({type:A,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(T,F){1&T&&f.NdJ("click",function(oe){return F.onClick(oe.button,oe.ctrlKey,oe.shiftKey,oe.altKey,oe.metaKey)}),2&T&&f.uIk("target",F.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),A})(),Ma=(()=>{class A{get isActive(){return this._isActive}constructor(T,F,W,oe,pe){this.router=T,this.element=F,this.renderer=W,this.cdr=oe,this.link=pe,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new f.vpe,this.routerEventsSubscription=T.events.subscribe(He=>{He instanceof mn&&this.update()})}ngAfterContentInit(){(0,ee.of)(this.links.changes,(0,ee.of)(null)).pipe((0,gn.J)()).subscribe(T=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const T=[...this.links.toArray(),this.link].filter(F=>!!F).map(F=>F.onChanges);this.linkInputChangesSubscription=(0,I.D)(T).pipe((0,gn.J)()).subscribe(F=>{this._isActive!==this.isLinkActive(this.router)(F)&&this.update()})}set routerLinkActive(T){const F=Array.isArray(T)?T:T.split(" ");this.classes=F.filter(W=>!!W)}ngOnChanges(T){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const T=this.hasActiveLinks();this._isActive!==T&&(this._isActive=T,this.cdr.markForCheck(),this.classes.forEach(F=>{T?this.renderer.addClass(this.element.nativeElement,F):this.renderer.removeClass(this.element.nativeElement,F)}),T&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(T))})}isLinkActive(T){const F=function ul(A){return!!A.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return W=>!!W.urlTree&&T.isActive(W.urlTree,F)}hasActiveLinks(){const T=this.isLinkActive(this.router);return this.link&&T(this.link)||this.links.some(T)}}return A.\u0275fac=function(T){return new(T||A)(f.Y36(vs),f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(f.sBO),f.Y36(ra,8))},A.\u0275dir=f.lG2({type:A,selectors:[["","routerLinkActive",""]],contentQueries:function(T,F,W){if(1&T&&f.Suo(W,ra,5),2&T){let oe;f.iGM(oe=f.CRH())&&(F.links=oe)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[f.TTD]}),A})();class Hs{}let au=(()=>{class A{constructor(T,F,W,oe,pe){this.router=T,this.injector=W,this.preloadingStrategy=oe,this.loader=pe}setUpPreloading(){this.subscription=this.router.events.pipe((0,it.h)(T=>T instanceof mn),(0,Ct.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,F){const W=[];for(const oe of F){oe.providers&&!oe._injector&&(oe._injector=(0,f.MMx)(oe.providers,T,`Route: ${oe.path}`));const pe=oe._injector??T,He=oe._loadedInjector??pe;(oe.loadChildren&&!oe._loadedRoutes&&void 0===oe.canLoad||oe.loadComponent&&!oe._loadedComponent)&&W.push(this.preloadConfig(pe,oe)),(oe.children||oe._loadedRoutes)&&W.push(this.processRoutes(He,oe.children??oe._loadedRoutes))}return(0,I.D)(W).pipe((0,gn.J)())}preloadConfig(T,F){return this.preloadingStrategy.preload(F,()=>{let W;W=F.loadChildren&&void 0===F.canLoad?this.loader.loadChildren(T,F):(0,ee.of)(null);const oe=W.pipe((0,Ue.z)(pe=>null===pe?(0,ee.of)(void 0):(F._loadedRoutes=pe.routes,F._loadedInjector=pe.injector,this.processRoutes(pe.injector??T,pe.routes))));if(F.loadComponent&&!F._loadedComponent){const pe=this.loader.loadComponent(F);return(0,I.D)([oe,pe]).pipe((0,gn.J)())}return oe})}}return A.\u0275fac=function(T){return new(T||A)(f.LFG(vs),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(Hs),f.LFG(nn))},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Po=new f.OlP("");let Ja=(()=>{class A{constructor(T,F,W,oe,pe={}){this.urlSerializer=T,this.transitions=F,this.viewportScroller=W,this.zone=oe,this.options=pe,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},pe.scrollPositionRestoration=pe.scrollPositionRestoration||"disabled",pe.anchorScrolling=pe.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof bn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof mn&&(this.lastId=T.id,this.scheduleScrollEvent(T,this.urlSerializer.parse(T.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof We&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,F){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new We(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,F))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return A.\u0275fac=function(T){f.$Z()},A.\u0275prov=f.Yz7({token:A,factory:A.\u0275fac}),A})();var st=(()=>((st=st||{})[st.COMPLETE=0]="COMPLETE",st[st.FAILED=1]="FAILED",st[st.REDIRECTING=2]="REDIRECTING",st))();const bs=!1;function Es(A,O){return{\u0275kind:A,\u0275providers:O}}const cl=new f.OlP("",{providedIn:"root",factory:()=>!1});function dl(){const A=(0,f.f3M)(f.zs3);return O=>{const T=A.get(f.z2F);if(O!==T.components[0])return;const F=A.get(vs),W=A.get(Wa);1===A.get(Ls)&&F.initialNavigation(),A.get(qs,null,f.XFs.Optional)?.setUpPreloading(),A.get(Po,null,f.XFs.Optional)?.init(),F.resetRootComponentType(T.componentTypes[0]),W.closed||(W.next(),W.complete(),W.unsubscribe())}}const Wa=new f.OlP(bs?"bootstrap done indicator":"",{factory:()=>new Ge.x}),Ls=new f.OlP(bs?"initial navigation":"",{providedIn:"root",factory:()=>1});function Zs(){let A=[];return A=bs?[{provide:f.Xts,multi:!0,useFactory:()=>{const O=(0,f.f3M)(vs);return()=>O.events.subscribe(T=>{console.group?.(`Router Event: ${T.constructor.name}`),console.log(function mt(A){if(!("type"in A))return`Unknown Router Event: ${A.constructor.name}`;switch(A.type){case 14:return`ActivationEnd(path: '${A.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${A.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${A.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${A.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state}, shouldActivate: ${A.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 2:return`NavigationCancel(id: ${A.id}, url: '${A.url}')`;case 16:return`NavigationSkipped(id: ${A.id}, url: '${A.url}')`;case 1:return`NavigationEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${A.id}, url: '${A.url}', error: ${A.error})`;case 0:return`NavigationStart(id: ${A.id}, url: '${A.url}')`;case 6:return`ResolveEnd(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 5:return`ResolveStart(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 10:return`RouteConfigLoadEnd(path: ${A.route.path})`;case 9:return`RouteConfigLoadStart(path: ${A.route.path})`;case 4:return`RoutesRecognized(id: ${A.id}, url: '${A.url}', urlAfterRedirects: '${A.urlAfterRedirects}', state: ${A.state})`;case 15:return`Scroll(anchor: '${A.anchor}', position: '${A.position?`${A.position[0]}, ${A.position[1]}`:null}')`}}(T)),console.log(T),console.groupEnd?.()})}}]:[],Es(1,A)}const qs=new f.OlP(bs?"router preloader":"");function ia(A){return Es(0,[{provide:qs,useExisting:au},{provide:Hs,useExisting:A}])}const xl=!1,Jr=new f.OlP(xl?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Da=[je.Ye,{provide:Qn,useClass:yi},vs,Qi,{provide:wn,useFactory:function ts(A){return A.routerState.root},deps:[vs]},nn,xl?{provide:cl,useValue:!0}:[]];function ui(){return new f.PXZ("Router",vs)}let hl=(()=>{class A{constructor(T){}static forRoot(T,F){return{ngModule:A,providers:[Da,xl&&F?.enableTracing?Zs().\u0275providers:[],{provide:Dt,multi:!0,useValue:T},{provide:Jr,useFactory:nl,deps:[[vs,new f.FiY,new f.tp0]]},{provide:jn,useValue:F||{}},F?.useHash?{provide:je.S$,useClass:je.Do}:{provide:je.S$,useClass:je.b0},{provide:Po,useFactory:()=>{const A=(0,f.f3M)(je.EM),O=(0,f.f3M)(f.R0b),T=(0,f.f3M)(jn),F=(0,f.f3M)(gr),W=(0,f.f3M)(Qn);return T.scrollOffset&&A.setOffset(T.scrollOffset),new Ja(W,F,A,O,T)}},F?.preloadingStrategy?ia(F.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:ui},F?.initialNavigation?sa(F):[],[{provide:oa,useFactory:dl},{provide:f.tb,multi:!0,useExisting:oa}]]}}static forChild(T){return{ngModule:A,providers:[{provide:Dt,multi:!0,useValue:T}]}}}return A.\u0275fac=function(T){return new(T||A)(f.LFG(Jr,8))},A.\u0275mod=f.oAB({type:A}),A.\u0275inj=f.cJS({imports:[jo]}),A})();function nl(A){if(xl&&A)throw new f.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function sa(A){return["disabled"===A.initialNavigation?Es(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const O=(0,f.f3M)(vs);return()=>{O.setUpLocationChangeListener()}}},{provide:Ls,useValue:2}]).\u0275providers:[],"enabledBlocking"===A.initialNavigation?Es(2,[{provide:Ls,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:O=>{const T=O.get(je.V_,Promise.resolve());return()=>T.then(()=>new Promise(F=>{const W=O.get(vs),oe=O.get(Wa);(function Pa(A,O){A.events.pipe((0,it.h)(T=>T instanceof mn||T instanceof An||T instanceof er||T instanceof In),(0,Qe.U)(T=>T instanceof mn||T instanceof In?st.COMPLETE:T instanceof An&&(0===T.code||1===T.code)?st.REDIRECTING:st.FAILED),(0,it.h)(T=>T!==st.REDIRECTING),(0,ze.q)(1)).subscribe(()=>{O()})})(W,()=>{F(!0)}),O.get(gr).afterPreactivation=()=>(F(!0),oe.closed?(0,ee.of)(void 0):oe),W.initialNavigation()}))}}]).\u0275providers:[]]}const oa=new f.OlP(xl?"Router Initializer":"")},6881:(Se,ae,D)=>{D.d(ae,{Jn:()=>ki,qX:()=>yi,Xd:()=>Qn,Mq:()=>ss,C6:()=>lr,ZF:()=>$n,KN:()=>Je});var f=D(9671),I=D(4859),ee=D(1877),B=D(2090);const q=(gt,nt)=>nt.some(Nt=>gt instanceof Nt);let ie,te;const Z=new WeakMap,le=new WeakMap,fe=new WeakMap,Le=new WeakMap,Ge=new WeakMap;let Be={get(gt,nt,Nt){if(gt instanceof IDBTransaction){if("done"===nt)return le.get(gt);if("objectStoreNames"===nt)return gt.objectStoreNames||fe.get(gt);if("store"===nt)return Nt.objectStoreNames[1]?void 0:Nt.objectStore(Nt.objectStoreNames[0])}return Ue(gt[nt])},set:(gt,nt,Nt)=>(gt[nt]=Nt,!0),has:(gt,nt)=>gt instanceof IDBTransaction&&("done"===nt||"store"===nt)||nt in gt};function it(gt){return"function"==typeof gt?function Ke(gt){return gt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ne(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(gt)?function(...nt){return gt.apply(xe(this),nt),Ue(Z.get(this))}:function(...nt){return Ue(gt.apply(xe(this),nt))}:function(nt,...Nt){const Xt=gt.call(xe(this),nt,...Nt);return fe.set(Xt,nt.sort?nt.sort():[nt]),Ue(Xt)}}(gt):(gt instanceof IDBTransaction&&function Qe(gt){if(le.has(gt))return;const nt=new Promise((Nt,Xt)=>{const On=()=>{gt.removeEventListener("complete",Zn),gt.removeEventListener("error",hn),gt.removeEventListener("abort",hn)},Zn=()=>{Nt(),On()},hn=()=>{Xt(gt.error||new DOMException("AbortError","AbortError")),On()};gt.addEventListener("complete",Zn),gt.addEventListener("error",hn),gt.addEventListener("abort",hn)});le.set(gt,nt)}(gt),q(gt,function K(){return ie||(ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(gt,Be):gt)}function Ue(gt){if(gt instanceof IDBRequest)return function je(gt){const nt=new Promise((Nt,Xt)=>{const On=()=>{gt.removeEventListener("success",Zn),gt.removeEventListener("error",hn)},Zn=()=>{Nt(Ue(gt.result)),On()},hn=()=>{Xt(gt.error),On()};gt.addEventListener("success",Zn),gt.addEventListener("error",hn)});return nt.then(Nt=>{Nt instanceof IDBCursor&&Z.set(Nt,gt)}).catch(()=>{}),Ge.set(nt,gt),nt}(gt);if(Le.has(gt))return Le.get(gt);const nt=it(gt);return nt!==gt&&(Le.set(gt,nt),Ge.set(nt,gt)),nt}const xe=gt=>Ge.get(gt),Ze=["get","getKey","getAll","getAllKeys","count"],Pt=["put","add","delete","clear"],St=new Map;function rt(gt,nt){if(!(gt instanceof IDBDatabase)||nt in gt||"string"!=typeof nt)return;if(St.get(nt))return St.get(nt);const Nt=nt.replace(/FromIndex$/,""),Xt=nt!==Nt,On=Pt.includes(Nt);if(!(Nt in(Xt?IDBIndex:IDBObjectStore).prototype)||!On&&!Ze.includes(Nt))return;const Zn=function(){var hn=(0,f.Z)(function*(fr,...tr){const ti=this.transaction(fr,On?"readwrite":"readonly");let ni=ti.store;return Xt&&(ni=ni.index(tr.shift())),(yield Promise.all([ni[Nt](...tr),On&&ti.done]))[0]});return function(tr){return hn.apply(this,arguments)}}();return St.set(nt,Zn),Zn}!function ze(gt){Be=gt(Be)}(gt=>({...gt,get:(nt,Nt,Xt)=>rt(nt,Nt)||gt.get(nt,Nt,Xt),has:(nt,Nt)=>!!rt(nt,Nt)||gt.has(nt,Nt)}));class qe{constructor(nt){this.container=nt}getPlatformInfoString(){return this.container.getProviders().map(Nt=>{if(function lt(gt){return"VERSION"===gt.getComponent()?.type}(Nt)){const Xt=Nt.getImmediate();return`${Xt.library}/${Xt.version}`}return null}).filter(Nt=>Nt).join(" ")}}const Xe="@firebase/app",At=new ee.Yd("@firebase/app"),br="[DEFAULT]",Sn={[Xe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Yn=new Map,hr=new Map;function dn(gt,nt){try{gt.container.addComponent(nt)}catch(Nt){At.debug(`Component ${nt.name} failed to register with FirebaseApp ${gt.name}`,Nt)}}function Qn(gt){const nt=gt.name;if(hr.has(nt))return At.debug(`There were multiple attempts to register component ${nt}.`),!1;hr.set(nt,gt);for(const Nt of Yn.values())dn(Nt,gt);return!0}function yi(gt,nt){const Nt=gt.container.getProvider("heartbeat").getImmediate({optional:!0});return Nt&&Nt.triggerHeartbeat(),gt.container.getProvider(nt)}const di=new B.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class vr{constructor(nt,Nt,Xt){this._isDeleted=!1,this._options=Object.assign({},nt),this._config=Object.assign({},Nt),this._name=Nt.name,this._automaticDataCollectionEnabled=Nt.automaticDataCollectionEnabled,this._container=Xt,this.container.addComponent(new I.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(nt){this.checkDestroyed(),this._automaticDataCollectionEnabled=nt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(nt){this._isDeleted=nt}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}}const ki="9.17.1";function $n(gt,nt={}){let Nt=gt;"object"!=typeof nt&&(nt={name:nt});const Xt=Object.assign({name:br,automaticDataCollectionEnabled:!1},nt),On=Xt.name;if("string"!=typeof On||!On)throw di.create("bad-app-name",{appName:String(On)});if(Nt||(Nt=(0,B.aH)()),!Nt)throw di.create("no-options");const Zn=Yn.get(On);if(Zn){if((0,B.vZ)(Nt,Zn.options)&&(0,B.vZ)(Xt,Zn.config))return Zn;throw di.create("duplicate-app",{appName:On})}const hn=new I.H0(On);for(const tr of hr.values())hn.addComponent(tr);const fr=new vr(Nt,Xt,hn);return Yn.set(On,fr),fr}function ss(gt=br){const nt=Yn.get(gt);if(!nt&&gt===br)return $n();if(!nt)throw di.create("no-app",{appName:gt});return nt}function lr(){return Array.from(Yn.values())}function Je(gt,nt,Nt){var Xt;let On=null!==(Xt=Sn[gt])&&void 0!==Xt?Xt:gt;Nt&&(On+=`-${Nt}`);const Zn=On.match(/\s|\//),hn=nt.match(/\s|\//);if(Zn||hn){const fr=[`Unable to register library "${On}" with version "${nt}":`];return Zn&&fr.push(`library name "${On}" contains illegal characters (whitespace or "/")`),Zn&&hn&&fr.push("and"),hn&&fr.push(`version name "${nt}" contains illegal characters (whitespace or "/")`),void At.warn(fr.join(" "))}Qn(new I.wA(`${On}-version`,()=>({library:On,version:nt}),"VERSION"))}const Ot="firebase-heartbeat-database",ge=1,ve="firebase-heartbeat-store";let Ie=null;function ot(){return Ie||(Ie=function Ct(gt,nt,{blocked:Nt,upgrade:Xt,blocking:On,terminated:Zn}={}){const hn=indexedDB.open(gt,nt),fr=Ue(hn);return Xt&&hn.addEventListener("upgradeneeded",tr=>{Xt(Ue(hn.result),tr.oldVersion,tr.newVersion,Ue(hn.transaction))}),Nt&&hn.addEventListener("blocked",()=>Nt()),fr.then(tr=>{Zn&&tr.addEventListener("close",()=>Zn()),On&&tr.addEventListener("versionchange",()=>On())}).catch(()=>{}),fr}(Ot,ge,{upgrade:(gt,nt)=>{0===nt&&gt.createObjectStore(ve)}}).catch(gt=>{throw di.create("idb-open",{originalErrorMessage:gt.message})})),Ie}function Ft(){return(Ft=(0,f.Z)(function*(gt){try{return(yield ot()).transaction(ve).objectStore(ve).get(Oe(gt))}catch(nt){if(nt instanceof B.ZR)At.warn(nt.message);else{const Nt=di.create("idb-get",{originalErrorMessage:nt?.message});At.warn(Nt.message)}}})).apply(this,arguments)}function Wt(gt,nt){return Re.apply(this,arguments)}function Re(){return(Re=(0,f.Z)(function*(gt,nt){try{const Xt=(yield ot()).transaction(ve,"readwrite");return yield Xt.objectStore(ve).put(nt,Oe(gt)),Xt.done}catch(Nt){if(Nt instanceof B.ZR)At.warn(Nt.message);else{const Xt=di.create("idb-set",{originalErrorMessage:Nt?.message});At.warn(Xt.message)}}})).apply(this,arguments)}function Oe(gt){return`${gt.name}!${gt.options.appId}`}class Ye{constructor(nt){this.container=nt,this._heartbeatsCache=null;const Nt=this.container.getProvider("app").getImmediate();this._storage=new Xn(Nt),this._heartbeatsCachePromise=this._storage.read().then(Xt=>(this._heartbeatsCache=Xt,Xt))}triggerHeartbeat(){var nt=this;return(0,f.Z)(function*(){const Xt=nt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),On=Vt();if(null===nt._heartbeatsCache&&(nt._heartbeatsCache=yield nt._heartbeatsCachePromise),nt._heartbeatsCache.lastSentHeartbeatDate!==On&&!nt._heartbeatsCache.heartbeats.some(Zn=>Zn.date===On))return nt._heartbeatsCache.heartbeats.push({date:On,agent:Xt}),nt._heartbeatsCache.heartbeats=nt._heartbeatsCache.heartbeats.filter(Zn=>{const hn=new Date(Zn.date).valueOf();return Date.now()-hn<=2592e6}),nt._storage.overwrite(nt._heartbeatsCache)})()}getHeartbeatsHeader(){var nt=this;return(0,f.Z)(function*(){if(null===nt._heartbeatsCache&&(yield nt._heartbeatsCachePromise),null===nt._heartbeatsCache||0===nt._heartbeatsCache.heartbeats.length)return"";const Nt=Vt(),{heartbeatsToSend:Xt,unsentEntries:On}=function sn(gt,nt=1024){const Nt=[];let Xt=gt.slice();for(const On of gt){const Zn=Nt.find(hn=>hn.agent===On.agent);if(Zn){if(Zn.dates.push(On.date),Cr(Nt)>nt){Zn.dates.pop();break}}else if(Nt.push({agent:On.agent,dates:[On.date]}),Cr(Nt)>nt){Nt.pop();break}Xt=Xt.slice(1)}return{heartbeatsToSend:Nt,unsentEntries:Xt}}(nt._heartbeatsCache.heartbeats),Zn=(0,B.L)(JSON.stringify({version:2,heartbeats:Xt}));return nt._heartbeatsCache.lastSentHeartbeatDate=Nt,On.length>0?(nt._heartbeatsCache.heartbeats=On,yield nt._storage.overwrite(nt._heartbeatsCache)):(nt._heartbeatsCache.heartbeats=[],nt._storage.overwrite(nt._heartbeatsCache)),Zn})()}}function Vt(){return(new Date).toISOString().substring(0,10)}class Xn{constructor(nt){this.app=nt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,B.hl)()&&(0,B.eu)().then(()=>!0).catch(()=>!1)})()}read(){var nt=this;return(0,f.Z)(function*(){return(yield nt._canUseIndexedDBPromise)&&(yield function ke(gt){return Ft.apply(this,arguments)}(nt.app))||{heartbeats:[]}})()}overwrite(nt){var Nt=this;return(0,f.Z)(function*(){var Xt;if(yield Nt._canUseIndexedDBPromise){const Zn=yield Nt.read();return Wt(Nt.app,{lastSentHeartbeatDate:null!==(Xt=nt.lastSentHeartbeatDate)&&void 0!==Xt?Xt:Zn.lastSentHeartbeatDate,heartbeats:nt.heartbeats})}})()}add(nt){var Nt=this;return(0,f.Z)(function*(){var Xt;if(yield Nt._canUseIndexedDBPromise){const Zn=yield Nt.read();return Wt(Nt.app,{lastSentHeartbeatDate:null!==(Xt=nt.lastSentHeartbeatDate)&&void 0!==Xt?Xt:Zn.lastSentHeartbeatDate,heartbeats:[...Zn.heartbeats,...nt.heartbeats]})}})()}}function Cr(gt){return(0,B.L)(JSON.stringify({version:2,heartbeats:gt})).length}!function Ti(gt){Qn(new I.wA("platform-logger",nt=>new qe(nt),"PRIVATE")),Qn(new I.wA("heartbeat",nt=>new Ye(nt),"PRIVATE")),Je(Xe,"0.9.3",gt),Je(Xe,"0.9.3","esm2017"),Je("fire-js","")}("")},4859:(Se,ae,D)=>{D.d(ae,{H0:()=>K,wA:()=>ee});var f=D(9671),I=D(2090);class ee{constructor(Z,le,fe){this.name=Z,this.instanceFactory=le,this.type=fe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const B="[DEFAULT]";class q{constructor(Z,le){this.name=Z,this.container=le,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const le=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(le)){const fe=new I.BH;if(this.instancesDeferred.set(le,fe),this.isInitialized(le)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:le});Le&&fe.resolve(Le)}catch{}}return this.instancesDeferred.get(le).promise}getImmediate(Z){var le;const fe=this.normalizeInstanceIdentifier(Z?.identifier),Le=null!==(le=Z?.optional)&&void 0!==le&&le;if(!this.isInitialized(fe)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:fe})}catch(Ge){if(Le)return null;throw Ge}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function te(ne){return"EAGER"===ne.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:B})}catch{}for(const[le,fe]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(le);try{const Ge=this.getOrInitializeService({instanceIdentifier:Le});fe.resolve(Ge)}catch{}}}}clearInstance(Z=B){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,f.Z)(function*(){const le=Array.from(Z.instances.values());yield Promise.all([...le.filter(fe=>"INTERNAL"in fe).map(fe=>fe.INTERNAL.delete()),...le.filter(fe=>"_delete"in fe).map(fe=>fe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=B){return this.instances.has(Z)}getOptions(Z=B){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:le={}}=Z,fe=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(fe))throw Error(`${this.name}(${fe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:fe,options:le});for(const[Ge,je]of this.instancesDeferred.entries())fe===this.normalizeInstanceIdentifier(Ge)&&je.resolve(Le);return Le}onInit(Z,le){var fe;const Le=this.normalizeInstanceIdentifier(le),Ge=null!==(fe=this.onInitCallbacks.get(Le))&&void 0!==fe?fe:new Set;Ge.add(Z),this.onInitCallbacks.set(Le,Ge);const je=this.instances.get(Le);return je&&Z(je,Le),()=>{Ge.delete(Z)}}invokeOnInitCallbacks(Z,le){const fe=this.onInitCallbacks.get(le);if(fe)for(const Le of fe)try{Le(Z,le)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:le={}}){let fe=this.instances.get(Z);if(!fe&&this.component&&(fe=this.component.instanceFactory(this.container,{instanceIdentifier:(ne=Z,ne===B?void 0:ne),options:le}),this.instances.set(Z,fe),this.instancesOptions.set(Z,le),this.invokeOnInitCallbacks(fe,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,fe)}catch{}var ne;return fe||null}normalizeInstanceIdentifier(Z=B){return this.component?this.component.multipleInstances?Z:B:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class K{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const le=this.getProvider(Z.name);if(le.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);le.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const le=new q(Z,this);return this.providers.set(Z,le),le}getProviders(){return Array.from(this.providers.values())}}},1877:(Se,ae,D)=>{D.d(ae,{Yd:()=>te,in:()=>I});const f=[];var I=(()=>{return(Z=I||(I={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",I;var Z})();const ee={debug:I.DEBUG,verbose:I.VERBOSE,info:I.INFO,warn:I.WARN,error:I.ERROR,silent:I.SILENT},B=I.INFO,q={[I.DEBUG]:"log",[I.VERBOSE]:"log",[I.INFO]:"info",[I.WARN]:"warn",[I.ERROR]:"error"},ie=(Z,le,...fe)=>{if(le<Z.logLevel)return;const Le=(new Date).toISOString(),Ge=q[le];if(!Ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${le})`);console[Ge](`[${Le}]  ${Z.name}:`,...fe)};class te{constructor(le){this.name=le,this._logLevel=B,this._logHandler=ie,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(le){if(!(le in I))throw new TypeError(`Invalid value "${le}" assigned to \`logLevel\``);this._logLevel=le}setLogLevel(le){this._logLevel="string"==typeof le?ee[le]:le}get logHandler(){return this._logHandler}set logHandler(le){if("function"!=typeof le)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=le}get userLogHandler(){return this._userLogHandler}set userLogHandler(le){this._userLogHandler=le}debug(...le){this._userLogHandler&&this._userLogHandler(this,I.DEBUG,...le),this._logHandler(this,I.DEBUG,...le)}log(...le){this._userLogHandler&&this._userLogHandler(this,I.VERBOSE,...le),this._logHandler(this,I.VERBOSE,...le)}info(...le){this._userLogHandler&&this._userLogHandler(this,I.INFO,...le),this._logHandler(this,I.INFO,...le)}warn(...le){this._userLogHandler&&this._userLogHandler(this,I.WARN,...le),this._logHandler(this,I.WARN,...le)}error(...le){this._userLogHandler&&this._userLogHandler(this,I.ERROR,...le),this._logHandler(this,I.ERROR,...le)}}},825:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4650),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8555),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(515),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9751),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(9646),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6451),rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(233),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(4707),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3099),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9300),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4004),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4351),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7414),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8372),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(262),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5698),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2722),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(3900),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(5684),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5363),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1365),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(5026);const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(ae,D){if(this.action=ae,this.timestamp=D,this.type=PERFORM_ACTION,typeof ae.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(ae){this.timestamp=ae,this.type=RESET}}class Rollback{constructor(ae){this.timestamp=ae,this.type=ROLLBACK}}class Commit{constructor(ae){this.timestamp=ae,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(ae){this.id=ae,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(ae,D,f=!0){this.start=ae,this.end=D,this.active=f,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(ae){this.index=ae,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(ae){this.actionId=ae,this.type=JUMP_TO_ACTION}}class ImportState{constructor(ae){this.nextLiftedState=ae,this.type=IMPORT_STATE}}class LockChanges{constructor(ae){this.status=ae,this.type=LOCK_CHANGES}}class PauseRecording{constructor(ae){this.status=ae,this.type=PAUSE_RECORDING}}class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(Se){const ae={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},D="function"==typeof Se?Se():Se,ee=Object.assign({},ae,{features:D.features||!!D.logOnly&&{pause:!0,export:!0,test:!0}||ae.features},D);if(ee.maxAge&&ee.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${ee.maxAge}`);return ee}function difference(Se,ae){return Se.filter(D=>ae.indexOf(D)<0)}function unliftState(Se){const{computedStates:ae,currentStateIndex:D}=Se;if(D>=ae.length){const{state:I}=ae[ae.length-1];return I}const{state:f}=ae[D];return f}function unliftAction(Se){return Se.actionsById[Se.nextActionId-1]}function liftAction(Se){return new PerformAction(Se,+Date.now())}function sanitizeActions(Se,ae){return Object.keys(ae).reduce((D,f)=>{const I=Number(f);return D[I]=sanitizeAction(Se,ae[I],I),D},{})}function sanitizeAction(Se,ae,D){return{...ae,action:Se(ae.action,D)}}function sanitizeStates(Se,ae){return ae.map((D,f)=>({state:sanitizeState(Se,D.state,f),error:D.error}))}function sanitizeState(Se,ae,D){return Se(ae,D)}function shouldFilterActions(Se){return Se.predicate||Se.actionsSafelist||Se.actionsBlocklist}function filterLiftedState(Se,ae,D,f){const I=[],ee={},B=[];return Se.stagedActionIds.forEach((q,ie)=>{const te=Se.actionsById[q];te&&(ie&&isActionFiltered(Se.computedStates[ie],te,ae,D,f)||(ee[q]=te,I.push(q),B.push(Se.computedStates[ie])))}),{...Se,stagedActionIds:I,actionsById:ee,computedStates:B}}function isActionFiltered(Se,ae,D,f,I){const ee=D&&!D(Se,ae.action),B=f&&!ae.action.type.match(f.map(ie=>escapeRegExp(ie)).join("|")),q=I&&ae.action.type.match(I.map(ie=>escapeRegExp(ie)).join("|"));return ee||B||q}function escapeRegExp(Se){return Se.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}let DevtoolsDispatcher=(()=>{class Se extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO{}return Se.\u0275fac=function(){let ae;return function(f){return(ae||(ae=_angular_core__WEBPACK_IMPORTED_MODULE_0__.n5z(Se)))(f||Se)}}(),Se.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:Se,factory:Se.\u0275fac}),Se})();const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Redux Devtools Extension");let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(Se,ae,D){this.config=ae,this.dispatcher=D,this.devtoolsExtension=Se,this.createActionStreams()}notify(Se,ae){if(this.devtoolsExtension)if(Se.type===PERFORM_ACTION){if(ae.isLocked||ae.isPaused)return;const D=unliftState(ae);if(shouldFilterActions(this.config)&&isActionFiltered(D,Se,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const f=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,D,ae.currentStateIndex):D,I=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,Se,ae.nextActionId):Se;this.sendToReduxDevtools(()=>this.extensionConnection.send(I,f))}else{const D={...ae,stagedActionIds:ae.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,ae.actionsById):ae.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,ae.computedStates):ae.computedStates};this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,D,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.y(Se=>{const ae=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=ae,ae.init(),ae.subscribe(D=>Se.next(D)),ae.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.E}createActionStreams(){const Se=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()),ae=Se.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(q=>q.type===ExtensionActionTypes.START)),D=Se.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(q=>q.type===ExtensionActionTypes.STOP)),f=Se.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(q=>q.type===ExtensionActionTypes.DISPATCH),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(q=>this.unwrapAction(q.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)(q=>q.type===IMPORT_STATE?this.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(ie=>ie.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(()=>q),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.K)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(q)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(q))),ee=Se.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(q=>q.type===ExtensionActionTypes.ACTION),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(q=>this.unwrapAction(q.payload))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(D)),B=f.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(D));this.start$=ae.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(D)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>ee)),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>B))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(Se){const ae={name:Se.name,features:Se.features,serialize:Se.serialize,autoPause:Se.autoPause??!1};return!1!==Se.maxAge&&(ae.maxAge=Se.maxAge),ae}sendToReduxDevtools(Se){try{Se()}catch(ae){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",ae)}}}return DevtoolsExtension.\u0275fac=function Se(ae){return new(ae||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})();const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(Se,ae,D,f,I){if(f)return{state:D,error:"Interrupted by an error up the chain"};let B,ee=D;try{ee=Se(D,ae)}catch(q){B=q.toString(),I.handleError(q)}return{state:ee,error:B}}function recomputeStates(Se,ae,D,f,I,ee,B,q,ie){if(ae>=Se.length&&Se.length===ee.length)return Se;const te=Se.slice(0,ae),K=ee.length-(ie?1:0);for(let ne=ae;ne<K;ne++){const Z=ee[ne],le=I[Z].action,fe=te[ne-1],Le=fe?fe.state:f,Ge=fe?fe.error:void 0,Qe=B.indexOf(Z)>-1?fe:computeNextEntry(D,le,Le,Ge,q);te.push(Qe)}return ie&&te.push(Se[Se.length-1]),te}function liftInitialState(Se,ae){return{monitorState:ae(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:Se,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(Se,ae,D,f,I={}){return ee=>(B,q)=>{let{monitorState:ie,actionsById:te,nextActionId:K,stagedActionIds:ne,skippedActionIds:Z,committedState:le,currentStateIndex:fe,computedStates:Le,isLocked:Ge,isPaused:je}=B||ae;function Qe(Ke){let it=Ke,Ue=ne.slice(1,it+1);for(let xe=0;xe<Ue.length;xe++){if(Le[xe+1].error){it=xe,Ue=ne.slice(1,it+1);break}delete te[Ue[xe]]}Z=Z.filter(xe=>-1===Ue.indexOf(xe)),ne=[0,...ne.slice(it+1)],le=Le[it].state,Le=Le.slice(it),fe=fe>it?fe-it:0}function Be(){te={0:liftAction(INIT_ACTION)},K=1,ne=[0],Z=[],le=Le[fe].state,fe=0,Le=[]}B||(te=Object.create(te));let ze=0;switch(q.type){case LOCK_CHANGES:Ge=q.status,ze=1/0;break;case PAUSE_RECORDING:je=q.status,je?(ne=[...ne,K],te[K]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),K++,ze=ne.length-1,Le=Le.concat(Le[Le.length-1]),fe===ne.length-2&&fe++,ze=1/0):Be();break;case RESET:te={0:liftAction(INIT_ACTION)},K=1,ne=[0],Z=[],le=Se,fe=0,Le=[];break;case COMMIT:Be();break;case ROLLBACK:te={0:liftAction(INIT_ACTION)},K=1,ne=[0],Z=[],fe=0,Le=[];break;case TOGGLE_ACTION:{const{id:Ke}=q;Z=-1===Z.indexOf(Ke)?[Ke,...Z]:Z.filter(Ue=>Ue!==Ke),ze=ne.indexOf(Ke);break}case SET_ACTIONS_ACTIVE:{const{start:Ke,end:it,active:Ue}=q,xe=[];for(let Ct=Ke;Ct<it;Ct++)xe.push(Ct);Z=Ue?difference(Z,xe):[...Z,...xe],ze=ne.indexOf(Ke);break}case JUMP_TO_STATE:fe=q.index,ze=1/0;break;case JUMP_TO_ACTION:{const Ke=ne.indexOf(q.actionId);-1!==Ke&&(fe=Ke),ze=1/0;break}case SWEEP:ne=difference(ne,Z),Z=[],fe=Math.min(fe,ne.length-1);break;case PERFORM_ACTION:{if(Ge)return B||ae;if(je||B&&isActionFiltered(B.computedStates[fe],q,I.predicate,I.actionsSafelist,I.actionsBlocklist)){const it=Le[Le.length-1];Le=[...Le.slice(0,-1),computeNextEntry(ee,q.action,it.state,it.error,D)],ze=1/0;break}I.maxAge&&ne.length===I.maxAge&&Qe(1),fe===ne.length-1&&fe++;const Ke=K++;te[Ke]=q,ne=[...ne,Ke],ze=ne.length-1;break}case IMPORT_STATE:({monitorState:ie,actionsById:te,nextActionId:K,stagedActionIds:ne,skippedActionIds:Z,committedState:le,currentStateIndex:fe,computedStates:Le,isLocked:Ge,isPaused:je}=q.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg:ze=0,I.maxAge&&ne.length>I.maxAge&&(Le=recomputeStates(Le,ze,ee,le,te,ne,Z,D,je),Qe(ne.length-I.maxAge),ze=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb:if(Le.filter(it=>it.error).length>0)ze=0,I.maxAge&&ne.length>I.maxAge&&(Le=recomputeStates(Le,ze,ee,le,te,ne,Z,D,je),Qe(ne.length-I.maxAge),ze=1/0);else{if(!je&&!Ge){fe===ne.length-1&&fe++;const it=K++;te[it]=new PerformAction(q,+Date.now()),ne=[...ne,it],ze=ne.length-1,Le=recomputeStates(Le,ze,ee,le,te,ne,Z,D,je)}Le=Le.map(it=>({...it,state:ee(it.state,RECOMPUTE_ACTION)})),fe=ne.length-1,I.maxAge&&ne.length>I.maxAge&&Qe(ne.length-I.maxAge),ze=1/0}break;default:ze=1/0}return Le=recomputeStates(Le,ze,ee,le,te,ne,Z,D,je),ie=f(ie,q),{monitorState:ie,actionsById:te,nextActionId:K,stagedActionIds:ne,skippedActionIds:Z,committedState:le,currentStateIndex:fe,computedStates:Le,isLocked:Ge,isPaused:je}}}let StoreDevtools=(()=>{class Se{constructor(D,f,I,ee,B,q,ie,te){const K=liftInitialState(ie,te.monitor),ne=liftReducerWith(ie,K,q,te.monitor,te),Z=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)(f.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.T)(1)),ee.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(liftAction)),D,ee.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Q)(rxjs__WEBPACK_IMPORTED_MODULE_18__.N)),le=I.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(ne)),fe=new rxjs__WEBPACK_IMPORTED_MODULE_19__.t(1),Le=Z.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.M)(le),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.R)(({state:Be},[ze,Ke])=>{let it=Ke(Be,ze);return ze.type!==PERFORM_ACTION&&shouldFilterActions(te)&&(it=filterLiftedState(it,te.predicate,te.actionsSafelist,te.actionsBlocklist)),ee.notify(ze,it),{state:it,action:ze}},{state:K,action:null})).subscribe(({state:Be,action:ze})=>{fe.next(Be),ze.type===PERFORM_ACTION&&B.next(ze.action)}),Ge=ee.start$.subscribe(()=>{this.refresh()}),je=fe.asObservable(),Qe=je.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(unliftState));this.extensionStartSubscription=Ge,this.stateSubscription=Le,this.dispatcher=D,this.liftedState=je,this.state=Qe}dispatch(D){this.dispatcher.next(D)}next(D){this.dispatcher.next(D)}error(D){}complete(){}performAction(D){this.dispatch(new PerformAction(D,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(D){this.dispatch(new ToggleAction(D))}jumpToAction(D){this.dispatch(new JumpToAction(D))}jumpToState(D){this.dispatch(new JumpToState(D))}importState(D){this.dispatch(new ImportState(D))}lockChanges(D){this.dispatch(new LockChanges(D))}pauseRecording(D){this.dispatch(new PauseRecording(D))}}return Se.\u0275fac=function(D){return new(D||Se)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_0__.qLn),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG))},Se.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:Se,factory:Se.\u0275fac}),Se})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(Se,ae){return Boolean(Se)||ae.monitor!==noMonitor}function createReduxDevtoolsExtension(){const Se="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&typeof window[Se]<"u"?window[Se]:null}function provideStoreDevtools(Se={}){return{\u0275providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:Se},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.mK,useExisting:DevtoolsDispatcher}]}}function createStateObservable(Se){return Se.state}let StoreDevtoolsModule=(()=>{class Se{static instrument(D={}){return{ngModule:Se,providers:[...provideStoreDevtools(D).\u0275providers]}}}return Se.\u0275fac=function(D){return new(D||Se)},Se.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.oAB({type:Se}),Se.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.cJS({}),Se})()},8555:(Se,ae,D)=>{D.d(ae,{Aw:()=>Nn,CK:()=>Er,FR:()=>Yn,Ky:()=>je,Lq:()=>Ts,P1:()=>Wt,PH:()=>Ge,UO:()=>It,Y$:()=>br,Y6:()=>rt,Ys:()=>Vr,ZF:()=>he,cr:()=>xn,mK:()=>cn,n$:()=>dr,on:()=>Yr,qC:()=>qn,qg:()=>Ct,wb:()=>Fi,yh:()=>Qn});var f=D(4650),I=D(1135),ee=D(9751),B=D(7579),q=D(233),ie=D(5363),te=D(1365),K=D(5026),ne=D(4813),Z=D(4004),le=D(1884);const fe={};function Ge(De,at){if(fe[De]=(fe[De]||0)+1,"function"==typeof at)return Be(De,(...mt)=>({...at(...mt),type:De}));switch(at?at._as:"empty"){case"empty":return Be(De,()=>({type:De}));case"props":return Be(De,mt=>({...mt,type:De}));default:throw new Error("Unexpected config.")}}function je(){return{_as:"props",_p:void 0}}function Be(De,at){return Object.defineProperty(at,"type",{value:De,writable:!1})}const Ct="@ngrx/store/init";let It=(()=>{class De extends I.X{constructor(){super({type:Ct})}next(We){if("function"==typeof We)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(typeof We>"u")throw new TypeError("Actions must be objects");if(typeof We.type>"u")throw new TypeError("Actions must have a type property");super.next(We)}complete(){}ngOnDestroy(){super.complete()}}return De.\u0275fac=function(We){return new(We||De)},De.\u0275prov=f.Yz7({token:De,factory:De.\u0275fac}),De})();const Ze=[It],Pt=new f.OlP("@ngrx/store Internal Root Guard"),St=new f.OlP("@ngrx/store Internal Initial State"),rt=new f.OlP("@ngrx/store Initial State"),qe=new f.OlP("@ngrx/store Reducer Factory"),lt=new f.OlP("@ngrx/store Internal Reducer Factory Provider"),Xe=new f.OlP("@ngrx/store Initial Reducers"),vt=new f.OlP("@ngrx/store Internal Initial Reducers"),At=new f.OlP("@ngrx/store Store Features"),gn=new f.OlP("@ngrx/store Internal Store Reducers"),rr=new f.OlP("@ngrx/store Internal Feature Reducers"),fn=new f.OlP("@ngrx/store Internal Feature Configs"),Kt=new f.OlP("@ngrx/store Internal Store Features"),Fn=new f.OlP("@ngrx/store Internal Feature Reducers Token"),Cn=new f.OlP("@ngrx/store Feature Reducers"),ir=new f.OlP("@ngrx/store User Provided Meta Reducers"),Kr=new f.OlP("@ngrx/store Meta Reducers"),Pn=new f.OlP("@ngrx/store Internal Resolved Meta Reducers"),pn=new f.OlP("@ngrx/store User Runtime Checks Config"),si=new f.OlP("@ngrx/store Internal User Runtime Checks Config"),Tt=new f.OlP("@ngrx/store Internal Runtime Checks"),dt=new f.OlP("@ngrx/store Check if Action types are unique");function kt(De,at={}){const We=Object.keys(De),mt={};for(let zt=0;zt<We.length;zt++){const Jt=We[zt];"function"==typeof De[Jt]&&(mt[Jt]=De[Jt])}const Ht=Object.keys(mt);return function(Jt,pr){Jt=void 0===Jt?at:Jt;let ur=!1;const hi={};for(let Dr=0;Dr<Ht.length;Dr++){const Mr=Ht[Dr],ri=Jt[Mr],Ta=(0,mt[Mr])(ri,pr);hi[Mr]=Ta,ur=ur||Ta!==ri}return ur?hi:Jt}}function qn(...De){return function(at){if(0===De.length)return at;const We=De[De.length-1];return De.slice(0,-1).reduceRight((Ht,zt)=>zt(Ht),We(at))}}function Fr(De,at){return Array.isArray(at)&&at.length>0&&(De=qn.apply(null,[...at,De])),(We,mt)=>{const Ht=De(We);return(zt,Jt)=>Ht(zt=void 0===zt?mt:zt,Jt)}}new f.OlP("@ngrx/store Root Store Provider"),new f.OlP("@ngrx/store Feature State Provider");class dr extends ee.y{}class cn extends It{}const Fi="@ngrx/store/update-reducers";let qr=(()=>{class De extends I.X{constructor(We,mt,Ht,zt){super(zt(Ht,mt)),this.dispatcher=We,this.initialState=mt,this.reducers=Ht,this.reducerFactory=zt}get currentReducers(){return this.reducers}addFeature(We){this.addFeatures([We])}addFeatures(We){const mt=We.reduce((Ht,{reducers:zt,reducerFactory:Jt,metaReducers:pr,initialState:ur,key:hi})=>{const Dr="function"==typeof zt?function is(De){const at=Array.isArray(De)&&De.length>0?qn(...De):We=>We;return(We,mt)=>(We=at(We),(Ht,zt)=>We(Ht=void 0===Ht?mt:Ht,zt))}(pr)(zt,ur):Fr(Jt,pr)(zt,ur);return Ht[hi]=Dr,Ht},{});this.addReducers(mt)}removeFeature(We){this.removeFeatures([We])}removeFeatures(We){this.removeReducers(We.map(mt=>mt.key))}addReducer(We,mt){this.addReducers({[We]:mt})}addReducers(We){this.reducers={...this.reducers,...We},this.updateReducers(Object.keys(We))}removeReducer(We){this.removeReducers([We])}removeReducers(We){We.forEach(mt=>{this.reducers=function Vn(De,at){return Object.keys(De).filter(We=>We!==at).reduce((We,mt)=>Object.assign(We,{[mt]:De[mt]}),{})}(this.reducers,mt)}),this.updateReducers(We)}updateReducers(We){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:Fi,features:We})}ngOnDestroy(){this.complete()}}return De.\u0275fac=function(We){return new(We||De)(f.LFG(cn),f.LFG(rt),f.LFG(Xe),f.LFG(qe))},De.\u0275prov=f.Yz7({token:De,factory:De.\u0275fac}),De})();const wr=[qr,{provide:dr,useExisting:qr},{provide:cn,useExisting:It}];let br=(()=>{class De extends B.x{ngOnDestroy(){this.complete()}}return De.\u0275fac=function(){let at;return function(mt){return(at||(at=f.n5z(De)))(mt||De)}}(),De.\u0275prov=f.Yz7({token:De,factory:De.\u0275fac}),De})();const Sn=[br];class Yn extends ee.y{}let hr=(()=>{class De extends I.X{constructor(We,mt,Ht,zt){super(zt);const hi=We.pipe((0,ie.Q)(q.N)).pipe((0,te.M)(mt)).pipe((0,K.R)(dn,{state:zt}));this.stateSubscription=hi.subscribe(({state:Dr,action:Mr})=>{this.next(Dr),Ht.next(Mr)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return De.INIT=Ct,De.\u0275fac=function(We){return new(We||De)(f.LFG(It),f.LFG(dr),f.LFG(br),f.LFG(rt))},De.\u0275prov=f.Yz7({token:De,factory:De.\u0275fac}),De})();function dn(De={state:void 0},[at,We]){const{state:mt}=De;return{state:We(mt,at),action:at}}const Zt=[hr,{provide:Yn,useExisting:hr}];let Qn=(()=>{class De extends ee.y{constructor(We,mt,Ht){super(),this.actionsObserver=mt,this.reducerManager=Ht,this.source=We}select(We,...mt){return Vr.call(null,We,...mt)(this)}lift(We){const mt=new De(this,this.actionsObserver,this.reducerManager);return mt.operator=We,mt}dispatch(We){this.actionsObserver.next(We)}next(We){this.actionsObserver.next(We)}error(We){this.actionsObserver.error(We)}complete(){this.actionsObserver.complete()}addReducer(We,mt){this.reducerManager.addReducer(We,mt)}removeReducer(We){this.reducerManager.removeReducer(We)}}return De.\u0275fac=function(We){return new(We||De)(f.LFG(Yn),f.LFG(It),f.LFG(qr))},De.\u0275prov=f.Yz7({token:De,factory:De.\u0275fac}),De})();const yi=[Qn];function Vr(De,at,...We){return function(Ht){let zt;if("string"==typeof De){const Jt=[at,...We].filter(Boolean);zt=Ht.pipe((0,ne.j)(De,...Jt))}else{if("function"!=typeof De)throw new TypeError(`Unexpected type '${typeof De}' in select operator, expected 'string' or 'function'`);zt=Ht.pipe((0,Z.U)(Jt=>De(Jt,at)))}return zt.pipe((0,le.x)())}}const gi="https://ngrx.io/guide/store/configuration/runtime-checks";function Br(De){return void 0===De}function di(De){return null===De}function vr(De){return Array.isArray(De)}function lr(De){return"object"==typeof De&&null!==De}function Je(De){return"function"==typeof De}let Ot=!1;function Ie(De,at){return De===at}function Ft(De,at=Ie,We=Ie){let zt,mt=null,Ht=null;return{memoized:function hi(){if(void 0!==zt)return zt.result;if(!mt)return Ht=De.apply(null,arguments),mt=arguments,Ht;if(!function ot(De,at,We){for(let mt=0;mt<De.length;mt++)if(!We(De[mt],at[mt]))return!0;return!1}(arguments,mt,at))return Ht;const Dr=De.apply(null,arguments);return mt=arguments,We(Ht,Dr)?Ht:(Ht=Dr,Dr)},reset:function Jt(){mt=null,Ht=null},setResult:function pr(Dr){zt={result:Dr}},clearResult:function ur(){zt=void 0}}}function Wt(...De){return function Oe(De,at={stateFn:Re}){return function(...We){let mt=We;if(Array.isArray(mt[0])){const[Dr,...Mr]=mt;mt=[...Dr,...Mr]}const Ht=mt.slice(0,mt.length-1),zt=mt[mt.length-1],Jt=Ht.filter(Dr=>Dr.release&&"function"==typeof Dr.release),pr=De(function(...Dr){return zt.apply(null,Dr)}),ur=Ft(function(Dr,Mr){return at.stateFn.apply(null,[Dr,Ht,Mr,pr])});return Object.assign(ur.memoized,{release:function hi(){ur.reset(),pr.reset(),Jt.forEach(Dr=>Dr.release())},projector:pr.memoized,setResult:ur.setResult,clearResult:ur.clearResult})}}(Ft)(...De)}function Re(De,at,We,mt){if(void 0===We){const zt=at.map(Jt=>Jt(De));return mt.memoized.apply(null,zt)}const Ht=at.map(zt=>zt(De,We));return mt.memoized.apply(null,[...Ht,We])}function he(De){return Wt(at=>{const We=at[De];return!function ve(){return Ot}()&&(0,f.X6Q)()&&!(De in at)&&console.warn(`@ngrx/store: The feature name "${De}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${De}', ...) or StoreModule.forFeature('${De}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),We},at=>at)}function sn(De,at){return at instanceof f.OlP?De.get(at):at}function Xn(De,at,We){return We.map((mt,Ht)=>{if(at[Ht]instanceof f.OlP){const zt=De.get(at[Ht]);return{key:mt.key,reducerFactory:zt.reducerFactory?zt.reducerFactory:kt,metaReducers:zt.metaReducers?zt.metaReducers:[],initialState:zt.initialState}}return mt})}function Cr(De,at){return at.map(mt=>mt instanceof f.OlP?De.get(mt):mt)}function Ti(De){return"function"==typeof De?De():De}function gt(De,at){return De.concat(at)}function nt(De){if(De)throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function Xt(De){Object.freeze(De);const at=Je(De);return Object.getOwnPropertyNames(De).forEach(We=>{if(!We.startsWith("\u0275")&&function Ne(De,at){return Object.prototype.hasOwnProperty.call(De,at)}(De,We)&&(!at||"caller"!==We&&"callee"!==We&&"arguments"!==We)){const mt=De[We];(lr(mt)||Je(mt))&&!Object.isFrozen(mt)&&Xt(mt)}}),De}function Zn(De,at=[]){return(Br(De)||di(De))&&0===at.length?{path:["root"],value:De}:Object.keys(De).reduce((mt,Ht)=>{if(mt)return mt;const zt=De[Ht];return function be(De){return Je(De)&&De.hasOwnProperty("\u0275cmp")}(zt)?mt:!(Br(zt)||di(zt)||function ss(De){return"number"==typeof De}(zt)||function $n(De){return"boolean"==typeof De}(zt)||function ki(De){return"string"==typeof De}(zt)||vr(zt))&&(function ei(De){if(!function Oi(De){return lr(De)&&!vr(De)}(De))return!1;const at=Object.getPrototypeOf(De);return at===Object.prototype||null===at}(zt)?Zn(zt,[...at,Ht]):{path:[...at,Ht],value:zt})},!1)}function hn(De,at){if(!1===De)return;const We=De.path.join("."),mt=new Error(`Detected unserializable ${at} at "${We}". ${gi}#strict${at}serializability`);throw mt.value=De.value,mt.unserializablePath=We,mt}function tr(De){return(0,f.X6Q)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...De}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function ti({strictActionSerializability:De,strictStateSerializability:at}){return We=>De||at?function On(De,at){return function(We,mt){at.action(mt)&&hn(Zn(mt),"action");const Ht=De(We,mt);return at.state()&&hn(Zn(Ht),"state"),Ht}}(We,{action:mt=>De&&!Ms(mt),state:()=>at}):We}function ni({strictActionImmutability:De,strictStateImmutability:at}){return We=>De||at?function Nt(De,at){return function(We,mt){const Ht=at.action(mt)?Xt(mt):mt,zt=De(We,Ht);return at.state()?Xt(zt):zt}}(We,{action:mt=>De&&!Ms(mt),state:()=>at}):We}function Ms(De){return De.type.startsWith("@ngrx")}function Ui({strictActionWithinNgZone:De}){return at=>De?function fr(De,at){return function(We,mt){if(at.action(mt)&&!f.R0b.isInAngularZone())throw new Error(`Action '${mt.type}' running outside NgZone. ${gi}#strictactionwithinngzone`);return De(We,mt)}}(at,{action:We=>De&&!Ms(We)}):at}function os(De){return[{provide:si,useValue:De},{provide:pn,useFactory:Bt,deps:[si]},{provide:Tt,deps:[pn],useFactory:tr},{provide:Kr,multi:!0,deps:[Tt],useFactory:ni},{provide:Kr,multi:!0,deps:[Tt],useFactory:ti},{provide:Kr,multi:!0,deps:[Tt],useFactory:Ui}]}function jr(){return[{provide:dt,multi:!0,deps:[Tt],useFactory:bn}]}function Bt(De){return De}function bn(De){if(!De.strictActionTypeUniqueness)return;const at=Object.entries(fe).filter(([,We])=>We>1).map(([We])=>We);if(at.length)throw new Error(`Action types are registered more than once, ${at.map(We=>`"${We}"`).join(", ")}. ${gi}#strictactiontypeuniqueness`)}function An(De,at){return[{provide:Pt,useFactory:nt,deps:[[Qn,new f.FiY,new f.tp0]]},{provide:St,useValue:at.initialState},{provide:rt,useFactory:Ti,deps:[St]},{provide:vt,useValue:De},{provide:gn,useExisting:De instanceof f.OlP?De:vt},{provide:Xe,deps:[f.zs3,vt,[new f.tBr(gn)]],useFactory:sn},{provide:ir,useValue:at.metaReducers?at.metaReducers:[]},{provide:Pn,deps:[Kr,ir],useFactory:gt},{provide:lt,useValue:at.reducerFactory?at.reducerFactory:kt},{provide:qe,deps:[lt,Pn],useFactory:Fr},Ze,wr,Sn,Zt,yi,os(at.runtimeChecks),jr()]}function _i(De,at,We={}){return[{provide:fn,multi:!0,useValue:De instanceof Object?{}:We},{provide:At,multi:!0,useValue:{key:De instanceof Object?De.name:De,reducerFactory:We instanceof f.OlP||!We.reducerFactory?kt:We.reducerFactory,metaReducers:We instanceof f.OlP||!We.metaReducers?[]:We.metaReducers,initialState:We instanceof f.OlP||!We.initialState?void 0:We.initialState}},{provide:Kt,deps:[f.zs3,fn,At],useFactory:Xn},{provide:rr,multi:!0,useValue:De instanceof Object?De.reducer:at},{provide:Fn,multi:!0,useExisting:at instanceof f.OlP?at:rr},{provide:Cn,multi:!0,deps:[f.zs3,rr,[new f.tBr(Fn)]],useFactory:Cr},jr()]}let xn=(()=>{class De{constructor(We,mt,Ht,zt,Jt,pr){}}return De.\u0275fac=function(We){return new(We||De)(f.LFG(It),f.LFG(dr),f.LFG(br),f.LFG(Qn),f.LFG(Pt,8),f.LFG(dt,8))},De.\u0275mod=f.oAB({type:De}),De.\u0275inj=f.cJS({}),De})(),Er=(()=>{class De{constructor(We,mt,Ht,zt,Jt){this.features=We,this.featureReducers=mt,this.reducerManager=Ht;const pr=We.map((ur,hi)=>{const Mr=mt.shift()[hi];return{...ur,reducers:Mr,initialState:Ti(ur.initialState)}});Ht.addFeatures(pr)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return De.\u0275fac=function(We){return new(We||De)(f.LFG(Kt),f.LFG(Cn),f.LFG(qr),f.LFG(xn),f.LFG(dt,8))},De.\u0275mod=f.oAB({type:De}),De.\u0275inj=f.cJS({}),De})(),Nn=(()=>{class De{static forRoot(We,mt={}){return{ngModule:xn,providers:[...An(We,mt)]}}static forFeature(We,mt,Ht={}){return{ngModule:Er,providers:[..._i(We,mt,Ht)]}}}return De.\u0275fac=function(We){return new(We||De)},De.\u0275mod=f.oAB({type:De}),De.\u0275inj=f.cJS({}),De})();function Yr(...De){return{reducer:De.pop(),types:De.map(mt=>mt.type)}}function Ts(De,...at){const We=new Map;for(const mt of at)for(const Ht of mt.types){const zt=We.get(Ht);We.set(Ht,zt?(pr,ur)=>mt.reducer(zt(pr,ur),ur):mt.reducer)}return function(mt=De,Ht){const zt=We.get(Ht.type);return zt?zt(mt,Ht):mt}}},4440:(Se,ae,D)=>{D.d(ae,{C5:()=>si,G2:()=>ir,gm:()=>pn});var f=D(9671),I=D(4650),ee=D(6197),B=D(9751),q=D(4004),ie=D(6895),te=D(4793),K=D(529),ne=D(259),Z=D(9996),le=D(4716);class rt{constructor(){this.db=(0,ee.N8)()}create(dt,Ve={}){let _t=(0,ee.VF)((0,ee.iH)(this.db,dt));return(0,ee.t8)(_t,{key:_t.key,...Ve}).then(),Promise.resolve({key:_t.key})}set(dt,Ve={}){var _t=this;return(0,f.Z)(function*(){const kt=(0,ee.iH)(_t.db,dt);yield(0,ee.t8)(kt,Ve)})()}update(dt,Ve={}){var _t=this;return(0,f.Z)(function*(){const kt=(0,ee.iH)(_t.db,dt);yield(0,ee.Vx)(kt,Ve)})()}remove(dt){var Ve=this;return(0,f.Z)(function*(){const _t=(0,ee.iH)(Ve.db,dt);yield(0,ee.Od)(_t)})()}readRealTime(dt){return new B.y(Ve=>{(0,ee.jM)((0,ee.iH)(this.db,dt),_t=>{let kt=[];_t.exists()?(_t.forEach(Vn=>{kt.push({key:Vn.key,...Vn.val()})}),Ve.next(kt)):Ve.next([])})})}readOnceWithObserver(dt){return(0,ee.jM)((0,ee.iH)(this.db,dt),Ve=>Ve.val(),{onlyOnce:!0})}readOnce(dt){return new Promise((Ve,_t)=>{(0,ee.U2)((0,ee.iH)(this.db,dt)).then(kt=>{kt.exists()?Ve({key:kt.key,...kt.val()}):Ve([])}).catch(kt=>{_t(kt)})})}readReal(dt){return new B.y(Ve=>{(0,ee.jM)((0,ee.iH)(this.db,dt),_t=>{_t.exists()?Ve.next(_t.val()):Ve.next(null)})})}updateCounter(dt,Ve=!0){return new Promise((_t,kt)=>{const Vn=(0,ee.iH)(this.db);(0,ee.U2)((0,ee.iU)(Vn,"counter")).then(qn=>{(0,ee.Vx)((0,ee.iH)(this.db,dt),{counter:(0,ee.nP)(Ve?1:-1)}).then(Fr=>{_t(Fr)})})})}others(){}checkPresence(dt){const Ve=(0,ee.iH)(this.db,`${dt}/connections`),_t=(0,ee.iH)(this.db,`${dt}/lastOnline`),kt=(0,ee.iH)(this.db,".info/connected");(0,ee.jM)(kt,Vn=>{if(!0===Vn.val()){const qn=(0,ee.VF)(Ve);(0,ee.ae)(qn).remove().then(),(0,ee.t8)(qn,!0).then(),(0,ee.ae)(_t).set((0,ee.Bt)()).then()}})}onDisconnect(dt){const Ve=(0,ee.iH)(this.db,dt);return(0,ee.ae)(Ve)}detectingConnectionState(){return new B.y(dt=>{const Ve=(0,ee.iH)(this.db,".info/connected");(0,ee.jM)(Ve,_t=>{dt.next(_t.val())})})}}let qe=(()=>{class Tt extends rt{constructor(){super()}get timestamp(){return(new Date).getTime()}getPresence(Ve){return this.readReal(`status/${Ve}`)}getUserOnlineCounts(){return this.readRealTime("status").pipe((0,q.U)(Ve=>Ve.reduce((_t,kt)=>"online"===kt.status?++_t:_t,0)))}getTotalUserCounts(){return this.readRealTime("status").pipe((0,q.U)(Ve=>Ve))}setPresence(Ve,_t){return this.set(`status/${Ve}`,{status:_t,timestamp:this.timestamp})}updateOnAway(Ve){document.onvisibilitychange=_t=>{"hidden"===document.visibilityState?this.setPresence(Ve,"away"):this.setPresence(Ve,"online")}}updateOnUser(Ve){this.detectingConnectionState().pipe((0,q.U)(kt=>kt?"online":"offline")).subscribe(kt=>this.setPresence(Ve,kt))}updateOnDisconnect(Ve){this.onDisconnect(`status/${Ve}`).update({status:"offline",timestamp:this.timestamp})}configure(Ve){this.updateOnAway(Ve),this.updateOnUser(Ve),this.updateOnDisconnect(Ve)}configureUserPresenceByLocal(){let Ve=localStorage.getItem("uid");this.checkingUser(Ve)}configureUserPresenceByLogin(Ve,_t={}){this.checkingUser(Ve,_t)}checkingUser(Ve,_t={}){Ve?this.configure(Ve):this.create("status",{uid:Ve,..._t}).then(kt=>{localStorage.setItem("uid",kt.key),this.configure(kt.key)})}}return Tt.\u0275fac=function(Ve){return new(Ve||Tt)},Tt.\u0275prov=I.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})();const Xe={provide:I.ip1,useFactory:function lt(Tt){return()=>new Promise(function(){var dt=(0,f.Z)(function*(Ve,_t){yield Tt.configureUserPresenceByLocal(),Ve("done")});return function(Ve,_t){return dt.apply(this,arguments)}}())},deps:[qe],multi:!0};let At=(()=>{class Tt extends rt{constructor(Ve){super(),this.router=Ve}config(){this.router.events.subscribe(Ve=>{Ve instanceof te.m2&&(/[#$\[\]'?]/g.test(Ve.url)||this.updateCounter(`router-activities${Ve.url}`).then())})}}return Tt.\u0275fac=function(Ve){return new(Ve||Tt)(I.LFG(te.F0))},Tt.\u0275prov=I.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})();const rr={provide:I.ip1,useFactory:Tt=>()=>Tt.config(),multi:!0,deps:[At]},Kt={provide:K.TP,useClass:(()=>{class Tt extends rt{constructor(){super()}intercept(Ve,_t){return this.updateCounter("server-activities").then(),_t.handle(Ve)}}return Tt.\u0275fac=function(Ve){return new(Ve||Tt)},Tt.\u0275prov=I.Yz7({token:Tt,factory:Tt.\u0275fac}),Tt})(),multi:!0},Fn=new I.OlP(null);function Cn(Tt){return()=>{const dt=(0,ne.ZF)(Tt);(0,ee.N8)(dt),(0,Z.ad)(dt),console.log(`no of Firebase app:: ${(0,ne.C6)().length}`)}}let ir=(()=>{class Tt{constructor(Ve){this.config=Ve}static initializeApp(Ve){return{ngModule:Tt,providers:[{provide:Fn,useFactory:Cn(Ve)}]}}static initialize(Ve){let _t=[];return Ve.activityInHttp&&_t.push(Kt),Ve.activityInRouter&&_t.push(rr),Ve.activityOfAnonymousUser&&_t.push(Xe),{ngModule:Tt,providers:_t}}}return Tt.\u0275fac=function(Ve){return new(Ve||Tt)(I.LFG(Fn))},Tt.\u0275mod=I.oAB({type:Tt}),Tt.\u0275inj=I.cJS({providers:[At,qe],imports:[ie.ez]}),Tt})();const Kr="https://rktect-rest-default-rtdb.firebaseio.com/users.json",Pn="kpPiWBeAJJ3KlXNQ1tULjJcYLWZoLMwdEpDRzKSc";let pn=(()=>{class Tt{constructor(Ve){this.http=Ve}getUsers(){return this.http.get(Kr,{params:{auth:Pn}})}createUser(Ve){return this.http.post(Kr,Ve,{params:{auth:Pn}})}}return Tt.\u0275fac=function(Ve){return new(Ve||Tt)(I.LFG(K.eN))},Tt.\u0275prov=I.Yz7({token:Tt,factory:Tt.\u0275fac,providedIn:"root"}),Tt})();class si{constructor(){this.db=(0,Z.ad)(),this.auth=(0,le.v0)(),(0,Z.ST)(this.db).catch(dt=>{"failed-precondition"==dt.code?console.log("persistance failed"):"unimplemented"==dt.code&&console.log("persistance not available")})}get colRef(){return(0,Z.hJ)(this.db,this.collectionPath)}getCollectionData(){return new Promise((dt,Ve)=>{(0,Z.PL)(this.colRef).then(_t=>{let kt=this.setData2(_t);dt(kt)}).catch(_t=>{Ve(_t.message)})})}getSingleDoc(dt){const Ve=(0,Z.JU)(this.db,this.collectionPath,dt);return new Promise((_t,kt)=>(0,Z.QT)(Ve).then(Vn=>{let qn=this.transformSingleDoc(Vn);_t(qn)}).catch(Vn=>{kt(Vn.message)}))}getSingleDocFromCache(dt){var Ve=this;return(0,f.Z)(function*(){const _t=(0,Z.JU)(Ve.db,Ve.collectionPath,dt);try{const kt=yield(0,Z.kl)(_t);console.log("Cached document data:",kt.data())}catch(kt){console.log("Error getting cached document:",kt)}})()}getCollectionRealTime(dt){return this.unsubscribe=(0,Z.cf)(this.colRef,Ve=>{dt(this.setData2(Ve))})}getDocRealTime(dt,Ve){const _t=(0,Z.JU)(this.db,this.collectionPath,dt);return(0,Z.cf)(_t,kt=>{Ve(this.transformSingleDoc(kt))})}g(){(0,Z.cf)(void 0,Ve=>{Ve.docChanges().forEach(_t=>{"added"===_t.type&&console.log("New city: ",_t.doc.data()),"modified"===_t.type&&console.log("Modified city: ",_t.doc.data()),"removed"===_t.type&&console.log("Removed city: ",_t.doc.data())})})}addingDoc(dt={}){return(0,Z.ET)(this.colRef,{createdAt:(0,Z.Bt)(),updatedAt:(0,Z.Bt)(),...dt})}deletingDoc(dt){const Ve=(0,Z.JU)(this.db,this.collectionPath,dt);return(0,Z.oe)(Ve)}updatingDoc(dt,Ve){const _t=(0,Z.JU)(this.db,this.collectionPath,dt);return(0,Z.r7)(_t,{updatedAt:(0,Z.Bt)(),...Ve})}signUpWithEmailPass({email:dt,password:Ve}){return(0,le.Xb)(this.auth,dt,Ve).then(_t=>Promise.resolve(_t.user)).catch(_t=>Promise.reject(_t.message))}signInWithEmailPass({email:dt,password:Ve}){return(0,le.e5)(this.auth,dt,Ve).then(_t=>Promise.resolve(_t.user)).catch(_t=>Promise.reject(_t.message))}onSignOut(){return(0,le.w7)(this.auth).then(dt=>Promise.resolve(dt)).catch(dt=>Promise.reject(dt.message))}subscribingAuthChangedRealTime(dt){return(0,le.Aj)(this.auth,Ve=>{dt(Ve)})}getPaginationData1(dt={latestDoc:null,empty:!1,data:[]},Ve=5){return new Promise((_t,kt)=>{const Vn=(0,Z.IO)(this.colRef,(0,Z.Xo)("createdAt"),(0,Z.TQ)(dt.latestDoc||0),(0,Z.b9)(Ve));(0,Z.PL)(Vn).then(qn=>{let Fr=this.setData2(qn);dt.latestDoc=qn.docs[qn.docs.length-1],dt.data=[...dt.data,...Fr],dt.empty=qn.empty,_t(dt)}).catch(qn=>{kt(qn.message)})})}getPaginationData(dt={latestDoc:null,empty:!1,data:[],size:0},Ve=5){var _t=this;return(0,f.Z)(function*(){if(!dt.empty)try{const kt=(0,Z.IO)(_t.colRef,(0,Z.Xo)("createdAt"),(0,Z.TQ)(dt.latestDoc||0),(0,Z.b9)(Ve)),Vn=yield(0,Z.PL)(kt);let qn=_t.setData2(Vn);return dt.latestDoc=Vn.docs[Vn.docs.length-1],dt.data=[...dt.data,...qn],dt.empty=Vn.empty,dt.size=Vn.size,dt}catch(kt){return kt}})()}unsubscribeRealTime(){this.unsubscribe()}nextPage(dt={latestDoc:null,empty:!1,data:[],size:0},Ve=5){var _t=this;return(0,f.Z)(function*(){const kt=(0,Z.IO)(_t.colRef,(0,Z.Xo)("createdAt"),(0,Z.TQ)(dt.latestDoc||0),(0,Z.b9)(Ve));return yield _t.handlePagination(kt)})()}prePage(dt={latestDoc:null,empty:!1,data:[],size:0},Ve=5){var _t=this;return(0,f.Z)(function*(){const kt=(0,Z.IO)(_t.colRef,(0,Z.Xo)("createdAt"),(0,Z.Lx)(dt.latestDoc||0),(0,Z.b9)(Ve));return yield _t.handlePagination(kt,!1)})()}setData(dt){return dt.docs.map(Ve=>({id:Ve.id,...Ve.data()}))}setData2(dt){let Ve=[];return dt.docs.forEach(_t=>{Ve.push({..._t.data(),id:_t.id})}),Ve}transformSingleDoc(dt){return{...dt.data(),id:dt.id}}handlePagination(dt,Ve=!0){var _t=this;return(0,f.Z)(function*(){try{const kt=yield(0,Z.PL)(dt);let Vn=_t.setData2(kt);return{latestDoc:Ve?kt.docs[kt.docs.length-1]:kt.docs[0],data:Vn,empty:kt.empty,size:kt.size}}catch(kt){return kt}})()}}},259:(Se,ae,D)=>{D.d(ae,{C6:()=>f.C6,ZF:()=>f.ZF});var f=D(6881);(0,f.KN)("firebase","9.17.1","app")},4716:(Se,ae,D)=>{D.d(ae,{hJ:()=>io,Xb:()=>et,gK:()=>js,v0:()=>Hl,cx:()=>lu,Aj:()=>Xa,e5:()=>Gr,rh:()=>pe,w7:()=>Qs});var f=D(9671),I=D(2090),ee=D(6881),B=D(1877),q=D(655),ie=D(4859);const je=function Le(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Qe=new I.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ze=new B.Yd("@firebase/auth");function Ke(R,...y){ze.logLevel<=B.in.ERROR&&ze.error(`Auth (${ee.Jn}): ${R}`,...y)}function it(R,...y){throw It(R,...y)}function Ue(R,...y){return It(R,...y)}function xe(R,y,C){const L=Object.assign(Object.assign({},je()),{[y]:C});return new I.LL("auth","Firebase",L).create(y,{appName:R.name})}function It(R,...y){if("string"!=typeof R){const C=y[0],L=[...y.slice(1)];return L[0]&&(L[0].appName=R.name),R._errorFactory.create(C,...L)}return Qe.create(R,...y)}function Ze(R,y,...C){if(!R)throw It(y,...C)}function Pt(R){const y="INTERNAL ASSERTION FAILED: "+R;throw Ke(y),new Error(y)}function St(R,y){R||Pt(y)}const rt=new Map;function qe(R){St(R instanceof Function,"Expected a class definition");let y=rt.get(R);return y?(St(y instanceof R,"Instance stored in cache mismatched with class"),y):(y=new R,rt.set(R,y),y)}function vt(){var R;return typeof self<"u"&&(null===(R=self.location)||void 0===R?void 0:R.href)||""}function gn(){var R;return typeof self<"u"&&(null===(R=self.location)||void 0===R?void 0:R.protocol)||null}class Kt{constructor(y,C){this.shortDelay=y,this.longDelay=C,St(C>y,"Short delay should be less than long delay!"),this.isMobile=(0,I.uI)()||(0,I.b$)()}get(){return function rr(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function At(){return"http:"===gn()||"https:"===gn()}()||(0,I.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Fn(R,y){St(R.emulator,"Emulator should always be set here");const{url:C}=R.emulator;return y?`${C}${y.startsWith("/")?y.slice(1):y}`:C}class Cn{static initialize(y,C,L){this.fetchImpl=y,C&&(this.headersImpl=C),L&&(this.responseImpl=L)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Pt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Pt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Pt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ir={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Kr=new Kt(3e4,6e4);function Pn(R,y){return R.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:R.tenantId}):y}function pn(R,y,C,L){return si.apply(this,arguments)}function si(){return(si=(0,f.Z)(function*(R,y,C,L,se={}){return Tt(R,se,(0,f.Z)(function*(){let _e={},E={};L&&("GET"===y?E=L:_e={body:JSON.stringify(L)});const _=(0,I.xO)(Object.assign({key:R.config.apiKey},E)).slice(1),g=yield R._getAdditionalHeaders();return g["Content-Type"]="application/json",R.languageCode&&(g["X-Firebase-Locale"]=R.languageCode),Cn.fetch()(kt(R,R.config.apiHost,C,_),Object.assign({method:y,headers:g,referrerPolicy:"no-referrer"},_e))}))})).apply(this,arguments)}function Tt(R,y,C){return dt.apply(this,arguments)}function dt(){return(dt=(0,f.Z)(function*(R,y,C){R._canInitEmulator=!1;const L=Object.assign(Object.assign({},ir),y);try{const se=new Vn(R),_e=yield Promise.race([C(),se.promise]);se.clearNetworkTimeout();const E=yield _e.json();if("needConfirmation"in E)throw qn(R,"account-exists-with-different-credential",E);if(_e.ok&&!("errorMessage"in E))return E;{const _=_e.ok?E.errorMessage:E.error.message,[g,b]=_.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===g)throw qn(R,"credential-already-in-use",E);if("EMAIL_EXISTS"===g)throw qn(R,"email-already-in-use",E);if("USER_DISABLED"===g)throw qn(R,"user-disabled",E);const $=L[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw xe(R,$,b);it(R,$)}}catch(se){if(se instanceof I.ZR)throw se;it(R,"network-request-failed")}})).apply(this,arguments)}function Ve(R,y,C,L){return _t.apply(this,arguments)}function _t(){return(_t=(0,f.Z)(function*(R,y,C,L,se={}){const _e=yield pn(R,y,C,L,se);return"mfaPendingCredential"in _e&&it(R,"multi-factor-auth-required",{_serverResponse:_e}),_e})).apply(this,arguments)}function kt(R,y,C,L){const se=`${y}${C}?${L}`;return R.config.emulator?Fn(R.config,se):`${R.config.apiScheme}://${se}`}class Vn{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((C,L)=>{this.timer=setTimeout(()=>L(Ue(this.auth,"network-request-failed")),Kr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qn(R,y,C){const L={appName:R.name};C.email&&(L.email=C.email),C.phoneNumber&&(L.phoneNumber=C.phoneNumber);const se=Ue(R,y,L);return se.customData._tokenResponse=C,se}function is(){return(is=(0,f.Z)(function*(R,y){return pn(R,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function qr(){return(qr=(0,f.Z)(function*(R,y){return pn(R,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function wr(R){if(R)try{const y=new Date(Number(R));if(!isNaN(y.getTime()))return y.toUTCString()}catch{}}function Yn(){return(Yn=(0,f.Z)(function*(R,y=!1){const C=(0,I.m9)(R),L=yield C.getIdToken(y),se=dn(L);Ze(se&&se.exp&&se.auth_time&&se.iat,C.auth,"internal-error");const _e="object"==typeof se.firebase?se.firebase:void 0,E=_e?.sign_in_provider;return{claims:se,token:L,authTime:wr(hr(se.auth_time)),issuedAtTime:wr(hr(se.iat)),expirationTime:wr(hr(se.exp)),signInProvider:E||null,signInSecondFactor:_e?.sign_in_second_factor||null}})).apply(this,arguments)}function hr(R){return 1e3*Number(R)}function dn(R){const[y,C,L]=R.split(".");if(void 0===y||void 0===C||void 0===L)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const se=(0,I.tV)(C);return se?JSON.parse(se):(Ke("Failed to decode base64 JWT payload"),null)}catch(se){return Ke("Caught error parsing JWT payload as JSON",se?.toString()),null}}function Qn(R,y){return yi.apply(this,arguments)}function yi(){return(yi=(0,f.Z)(function*(R,y,C=!1){if(C)return y;try{return yield y}catch(L){throw L instanceof I.ZR&&function Vr({code:R}){return"auth/user-disabled"===R||"auth/user-token-expired"===R}(L)&&R.auth.currentUser===R&&(yield R.auth.signOut()),L}})).apply(this,arguments)}class gi{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var C;if(y){const L=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),L}{this.errorBackoff=3e4;const se=(null!==(C=this.user.stsTokenManager.expirationTime)&&void 0!==C?C:0)-Date.now()-3e5;return Math.max(0,se)}}schedule(y=!1){var C=this;if(!this.isRunning)return;const L=this.getInterval(y);this.timerId=setTimeout((0,f.Z)(function*(){yield C.iteration()}),L)}iteration(){var y=this;return(0,f.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===C?.code&&y.schedule(!0))}y.schedule()})()}}class Br{constructor(y,C){this.createdAt=y,this.lastLoginAt=C,this._initializeTime()}_initializeTime(){this.lastSignInTime=wr(this.lastLoginAt),this.creationTime=wr(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function di(R){return vr.apply(this,arguments)}function vr(){return vr=(0,f.Z)(function*(R){var y;const C=R.auth,L=yield R.getIdToken(),se=yield Qn(R,function Fi(R,y){return qr.apply(this,arguments)}(C,{idToken:L}));Ze(se?.users.length,C,"internal-error");const _e=se.users[0];R._notifyReloadListener(_e);const E=null!==(y=_e.providerUserInfo)&&void 0!==y&&y.length?function lr(R){return R.map(y=>{var{providerId:C}=y,L=(0,q._T)(y,["providerId"]);return{providerId:C,uid:L.rawId||"",displayName:L.displayName||null,email:L.email||null,phoneNumber:L.phoneNumber||null,photoURL:L.photoUrl||null}})}(_e.providerUserInfo):[],_=function ss(R,y){return[...R.filter(L=>!y.some(se=>se.providerId===L.providerId)),...y]}(R.providerData,E),$=!!R.isAnonymous&&!(R.email&&_e.passwordHash||_?.length),re={uid:_e.localId,displayName:_e.displayName||null,photoURL:_e.photoUrl||null,email:_e.email||null,emailVerified:_e.emailVerified||!1,phoneNumber:_e.phoneNumber||null,tenantId:_e.tenantId||null,providerData:_,metadata:new Br(_e.createdAt,_e.lastLoginAt),isAnonymous:$};Object.assign(R,re)}),vr.apply(this,arguments)}function $n(){return($n=(0,f.Z)(function*(R){const y=(0,I.m9)(R);yield di(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function ei(){return(ei=(0,f.Z)(function*(R,y){const C=yield Tt(R,{},(0,f.Z)(function*(){const L=(0,I.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:se,apiKey:_e}=R.config,E=kt(R,se,"/v1/token",`key=${_e}`),_=yield R._getAdditionalHeaders();return _["Content-Type"]="application/x-www-form-urlencoded",Cn.fetch()(E,{method:"POST",headers:_,body:L})}));return{accessToken:C.access_token,expiresIn:C.expires_in,refreshToken:C.refresh_token}})).apply(this,arguments)}class Je{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){Ze(y.idToken,"internal-error"),Ze(typeof y.idToken<"u","internal-error"),Ze(typeof y.refreshToken<"u","internal-error");const C="expiresIn"in y&&typeof y.expiresIn<"u"?Number(y.expiresIn):function Zt(R){const y=dn(R);return Ze(y,"internal-error"),Ze(typeof y.exp<"u","internal-error"),Ze(typeof y.iat<"u","internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,C)}getToken(y,C=!1){var L=this;return(0,f.Z)(function*(){return Ze(!L.accessToken||L.refreshToken,y,"user-token-expired"),C||!L.accessToken||L.isExpired?L.refreshToken?(yield L.refresh(y,L.refreshToken),L.accessToken):null:L.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,C){var L=this;return(0,f.Z)(function*(){const{accessToken:se,refreshToken:_e,expiresIn:E}=yield function Oi(R,y){return ei.apply(this,arguments)}(y,C);L.updateTokensAndExpiration(se,_e,Number(E))})()}updateTokensAndExpiration(y,C,L){this.refreshToken=C||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*L}static fromJSON(y,C){const{refreshToken:L,accessToken:se,expirationTime:_e}=C,E=new Je;return L&&(Ze("string"==typeof L,"internal-error",{appName:y}),E.refreshToken=L),se&&(Ze("string"==typeof se,"internal-error",{appName:y}),E.accessToken=se),_e&&(Ze("number"==typeof _e,"internal-error",{appName:y}),E.expirationTime=_e),E}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new Je,this.toJSON())}_performRefresh(){return Pt("not implemented")}}function be(R,y){Ze("string"==typeof R||typeof R>"u","internal-error",{appName:y})}class Ne{constructor(y){var{uid:C,auth:L,stsTokenManager:se}=y,_e=(0,q._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=C,this.auth=L,this.stsTokenManager=se,this.accessToken=se.accessToken,this.displayName=_e.displayName||null,this.email=_e.email||null,this.emailVerified=_e.emailVerified||!1,this.phoneNumber=_e.phoneNumber||null,this.photoURL=_e.photoURL||null,this.isAnonymous=_e.isAnonymous||!1,this.tenantId=_e.tenantId||null,this.providerData=_e.providerData?[..._e.providerData]:[],this.metadata=new Br(_e.createdAt||void 0,_e.lastLoginAt||void 0)}getIdToken(y){var C=this;return(0,f.Z)(function*(){const L=yield Qn(C,C.stsTokenManager.getToken(C.auth,y));return Ze(L,C.auth,"internal-error"),C.accessToken!==L&&(C.accessToken=L,yield C.auth._persistUserIfCurrent(C),C.auth._notifyListenersIfCurrent(C)),L})()}getIdTokenResult(y){return function Sn(R){return Yn.apply(this,arguments)}(this,y)}reload(){return function ki(R){return $n.apply(this,arguments)}(this)}_assign(y){this!==y&&(Ze(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(C=>Object.assign({},C)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new Ne(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){Ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,C=!1){var L=this;return(0,f.Z)(function*(){let se=!1;y.idToken&&y.idToken!==L.stsTokenManager.accessToken&&(L.stsTokenManager.updateFromServerResponse(y),se=!0),C&&(yield di(L)),yield L.auth._persistUserIfCurrent(L),se&&L.auth._notifyListenersIfCurrent(L)})()}delete(){var y=this;return(0,f.Z)(function*(){const C=yield y.getIdToken();return yield Qn(y,function Fr(R,y){return is.apply(this,arguments)}(y.auth,{idToken:C})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,C){var L,se,_e,E,_,g,b,$;const re=null!==(L=C.displayName)&&void 0!==L?L:void 0,Ee=null!==(se=C.email)&&void 0!==se?se:void 0,Te=null!==(_e=C.phoneNumber)&&void 0!==_e?_e:void 0,tt=null!==(E=C.photoURL)&&void 0!==E?E:void 0,ht=null!==(_=C.tenantId)&&void 0!==_?_:void 0,Lt=null!==(g=C._redirectEventId)&&void 0!==g?g:void 0,qt=null!==(b=C.createdAt)&&void 0!==b?b:void 0,rn=null!==($=C.lastLoginAt)&&void 0!==$?$:void 0,{uid:Gt,emailVerified:an,isAnonymous:Rn,providerData:or,stsTokenManager:Mi}=C;Ze(Gt&&Mi,y,"internal-error");const Rr=Je.fromJSON(this.name,Mi);Ze("string"==typeof Gt,y,"internal-error"),be(re,y.name),be(Ee,y.name),Ze("boolean"==typeof an,y,"internal-error"),Ze("boolean"==typeof Rn,y,"internal-error"),be(Te,y.name),be(tt,y.name),be(ht,y.name),be(Lt,y.name),be(qt,y.name),be(rn,y.name);const ks=new Ne({uid:Gt,auth:y,email:Ee,emailVerified:an,displayName:re,isAnonymous:Rn,photoURL:tt,phoneNumber:Te,tenantId:ht,stsTokenManager:Rr,createdAt:qt,lastLoginAt:rn});return or&&Array.isArray(or)&&(ks.providerData=or.map(rs=>Object.assign({},rs))),Lt&&(ks._redirectEventId=Lt),ks}static _fromIdTokenResponse(y,C,L=!1){return(0,f.Z)(function*(){const se=new Je;se.updateFromServerResponse(C);const _e=new Ne({uid:C.localId,auth:y,stsTokenManager:se,isAnonymous:L});return yield di(_e),_e})()}}const ge=(()=>{class R{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(C,L){var se=this;return(0,f.Z)(function*(){se.storage[C]=L})()}_get(C){var L=this;return(0,f.Z)(function*(){const se=L.storage[C];return void 0===se?null:se})()}_remove(C){var L=this;return(0,f.Z)(function*(){delete L.storage[C]})()}_addListener(C,L){}_removeListener(C,L){}}return R.type="NONE",R})();function ve(R,y,C){return`firebase:${R}:${y}:${C}`}class Ie{constructor(y,C,L){this.persistence=y,this.auth=C,this.userKey=L;const{config:se,name:_e}=this.auth;this.fullUserKey=ve(this.userKey,se.apiKey,_e),this.fullPersistenceKey=ve("persistence",se.apiKey,_e),this.boundEventHandler=C._onStorageEvent.bind(C),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,f.Z)(function*(){const C=yield y.persistence._get(y.fullUserKey);return C?Ne._fromJSON(y.auth,C):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var C=this;return(0,f.Z)(function*(){if(C.persistence===y)return;const L=yield C.getCurrentUser();return yield C.removeCurrentUser(),C.persistence=y,L?C.setCurrentUser(L):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,C,L="authUser"){return(0,f.Z)(function*(){if(!C.length)return new Ie(qe(ge),y,L);const se=(yield Promise.all(C.map(function(){var b=(0,f.Z)(function*($){if(yield $._isAvailable())return $});return function($){return b.apply(this,arguments)}}()))).filter(b=>b);let _e=se[0]||qe(ge);const E=ve(L,y.config.apiKey,y.name);let _=null;for(const b of C)try{const $=yield b._get(E);if($){const re=Ne._fromJSON(y,$);b!==_e&&(_=re),_e=b;break}}catch{}const g=se.filter(b=>b._shouldAllowMigration);return _e._shouldAllowMigration&&g.length?(_e=g[0],_&&(yield _e._set(E,_.toJSON())),yield Promise.all(C.map(function(){var b=(0,f.Z)(function*($){if($!==_e)try{yield $._remove(E)}catch{}});return function($){return b.apply(this,arguments)}}())),new Ie(_e,y,L)):new Ie(_e,y,L)})()}}function ot(R){const y=R.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(Re(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(ke(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(he(y))return"Blackberry";if(Me(y))return"Webos";if(Ft(y))return"Safari";if((y.includes("chrome/")||Wt(y))&&!y.includes("edge/"))return"Chrome";if(Oe(y))return"Android";{const L=R.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===L?.length)return L[1]}return"Other"}function ke(R=(0,I.z$)()){return/firefox\//i.test(R)}function Ft(R=(0,I.z$)()){const y=R.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function Wt(R=(0,I.z$)()){return/crios\//i.test(R)}function Re(R=(0,I.z$)()){return/iemobile/i.test(R)}function Oe(R=(0,I.z$)()){return/android/i.test(R)}function he(R=(0,I.z$)()){return/blackberry/i.test(R)}function Me(R=(0,I.z$)()){return/webos/i.test(R)}function Ye(R=(0,I.z$)()){return/iphone|ipad|ipod/i.test(R)||/macintosh/i.test(R)&&/mobile/i.test(R)}function Cr(R=(0,I.z$)()){return Ye(R)||Oe(R)||Me(R)||he(R)||/windows phone/i.test(R)||Re(R)}function gt(R,y=[]){let C;switch(R){case"Browser":C=ot((0,I.z$)());break;case"Worker":C=`${ot((0,I.z$)())}-${R}`;break;default:C=R}const L=y.length?y.join(","):"FirebaseCore-web";return`${C}/JsCore/${ee.Jn}/${L}`}class nt{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,C){const L=_e=>new Promise((E,_)=>{try{E(y(_e))}catch(g){_(g)}});L.onAbort=C,this.queue.push(L);const se=this.queue.length-1;return()=>{this.queue[se]=()=>Promise.resolve()}}runMiddleware(y){var C=this;return(0,f.Z)(function*(){if(C.auth.currentUser===y)return;const L=[];try{for(const se of C.queue)yield se(y),se.onAbort&&L.push(se.onAbort)}catch(se){L.reverse();for(const _e of L)try{_e()}catch{}throw C.auth._errorFactory.create("login-blocked",{originalMessage:se?.message})}})()}}class Nt{constructor(y,C,L){this.app=y,this.heartbeatServiceProvider=C,this.config=L,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new On(this),this.idTokenSubscription=new On(this),this.beforeStateQueue=new nt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=L.sdkClientVersion}_initializeWithPersistence(y,C){var L=this;return C&&(this._popupRedirectResolver=qe(C)),this._initializationPromise=this.queue((0,f.Z)(function*(){var se,_e;if(!L._deleted&&(L.persistenceManager=yield Ie.create(L,y),!L._deleted)){if(null!==(se=L._popupRedirectResolver)&&void 0!==se&&se._shouldInitProactively)try{yield L._popupRedirectResolver._initialize(L)}catch{}yield L.initializeCurrentUser(C),L.lastNotifiedUid=(null===(_e=L.currentUser)||void 0===_e?void 0:_e.uid)||null,!L._deleted&&(L._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,f.Z)(function*(){if(y._deleted)return;const C=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||C){if(y.currentUser&&C&&y.currentUser.uid===C.uid)return y._currentUser._assign(C),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(C,!0)}})()}initializeCurrentUser(y){var C=this;return(0,f.Z)(function*(){var L;const se=yield C.assertedPersistence.getCurrentUser();let _e=se,E=!1;if(y&&C.config.authDomain){yield C.getOrInitRedirectPersistenceManager();const _=null===(L=C.redirectUser)||void 0===L?void 0:L._redirectEventId,g=_e?._redirectEventId,b=yield C.tryRedirectSignIn(y);(!_||_===g)&&b?.user&&(_e=b.user,E=!0)}if(!_e)return C.directlySetCurrentUser(null);if(!_e._redirectEventId){if(E)try{yield C.beforeStateQueue.runMiddleware(_e)}catch(_){_e=se,C._popupRedirectResolver._overrideRedirectResult(C,()=>Promise.reject(_))}return _e?C.reloadAndSetCurrentUserOrClear(_e):C.directlySetCurrentUser(null)}return Ze(C._popupRedirectResolver,C,"argument-error"),yield C.getOrInitRedirectPersistenceManager(),C.redirectUser&&C.redirectUser._redirectEventId===_e._redirectEventId?C.directlySetCurrentUser(_e):C.reloadAndSetCurrentUserOrClear(_e)})()}tryRedirectSignIn(y){var C=this;return(0,f.Z)(function*(){let L=null;try{L=yield C._popupRedirectResolver._completeRedirectFn(C,y,!0)}catch{yield C._setRedirectUser(null)}return L})()}reloadAndSetCurrentUserOrClear(y){var C=this;return(0,f.Z)(function*(){try{yield di(y)}catch(L){if("auth/network-request-failed"!==L?.code)return C.directlySetCurrentUser(null)}return C.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function fn(){if(typeof navigator>"u")return null;const R=navigator;return R.languages&&R.languages[0]||R.language||null}()}_delete(){var y=this;return(0,f.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var C=this;return(0,f.Z)(function*(){const L=y?(0,I.m9)(y):null;return L&&Ze(L.auth.config.apiKey===C.config.apiKey,C,"invalid-user-token"),C._updateCurrentUser(L&&L._clone(C))})()}_updateCurrentUser(y,C=!1){var L=this;return(0,f.Z)(function*(){if(!L._deleted)return y&&Ze(L.tenantId===y.tenantId,L,"tenant-id-mismatch"),C||(yield L.beforeStateQueue.runMiddleware(y)),L.queue((0,f.Z)(function*(){yield L.directlySetCurrentUser(y),L.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,f.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var C=this;return this.queue((0,f.Z)(function*(){yield C.assertedPersistence.setPersistence(qe(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new I.LL("auth","Firebase",y())}onAuthStateChanged(y,C,L){return this.registerStateListener(this.authStateSubscription,y,C,L)}beforeAuthStateChanged(y,C){return this.beforeStateQueue.pushCallback(y,C)}onIdTokenChanged(y,C,L){return this.registerStateListener(this.idTokenSubscription,y,C,L)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,C){var L=this;return(0,f.Z)(function*(){const se=yield L.getOrInitRedirectPersistenceManager(C);return null===y?se.removeCurrentUser():se.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var C=this;return(0,f.Z)(function*(){if(!C.redirectPersistenceManager){const L=y&&qe(y)||C._popupRedirectResolver;Ze(L,C,"argument-error"),C.redirectPersistenceManager=yield Ie.create(C,[qe(L._redirectPersistence)],"redirectUser"),C.redirectUser=yield C.redirectPersistenceManager.getCurrentUser()}return C.redirectPersistenceManager})()}_redirectUserForId(y){var C=this;return(0,f.Z)(function*(){var L,se;return C._isInitialized&&(yield C.queue((0,f.Z)(function*(){}))),(null===(L=C._currentUser)||void 0===L?void 0:L._redirectEventId)===y?C._currentUser:(null===(se=C.redirectUser)||void 0===se?void 0:se._redirectEventId)===y?C.redirectUser:null})()}_persistUserIfCurrent(y){var C=this;return(0,f.Z)(function*(){if(y===C.currentUser)return C.queue((0,f.Z)(function*(){return C.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,C;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const L=null!==(C=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==C?C:null;this.lastNotifiedUid!==L&&(this.lastNotifiedUid=L,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,C,L,se){if(this._deleted)return()=>{};const _e="function"==typeof C?C:C.next.bind(C),E=this._isInitialized?Promise.resolve():this._initializationPromise;return Ze(E,this,"internal-error"),E.then(()=>_e(this.currentUser)),"function"==typeof C?y.addObserver(C,L,se):y.addObserver(C)}directlySetCurrentUser(y){var C=this;return(0,f.Z)(function*(){C.currentUser&&C.currentUser!==y&&C._currentUser._stopProactiveRefresh(),y&&C.isProactiveRefreshEnabled&&y._startProactiveRefresh(),C.currentUser=y,y?yield C.assertedPersistence.setCurrentUser(y):yield C.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return Ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=gt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,f.Z)(function*(){var C;const L={"X-Client-Version":y.clientVersion};y.app.options.appId&&(L["X-Firebase-gmpid"]=y.app.options.appId);const se=yield null===(C=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===C?void 0:C.getHeartbeatsHeader();return se&&(L["X-Firebase-Client"]=se),L})()}}function Xt(R){return(0,I.m9)(R)}class On{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,I.ne)(C=>this.observer=C)}get next(){return Ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function hn(R){const y=R.indexOf(":");return y<0?"":R.substr(0,y+1)}function tr(R){if(!R)return null;const y=Number(R);return isNaN(y)?null:y}class ni{constructor(y,C){this.providerId=y,this.signInMethod=C}toJSON(){return Pt("not implemented")}_getIdTokenResponse(y){return Pt("not implemented")}_linkToIdToken(y,C){return Pt("not implemented")}_getReauthenticationResolver(y){return Pt("not implemented")}}function os(R,y){return jr.apply(this,arguments)}function jr(){return(jr=(0,f.Z)(function*(R,y){return pn(R,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function An(){return(An=(0,f.Z)(function*(R,y){return Ve(R,"POST","/v1/accounts:signInWithPassword",Pn(R,y))})).apply(this,arguments)}function De(){return(De=(0,f.Z)(function*(R,y){return Ve(R,"POST","/v1/accounts:signInWithEmailLink",Pn(R,y))})).apply(this,arguments)}function We(){return(We=(0,f.Z)(function*(R,y){return Ve(R,"POST","/v1/accounts:signInWithEmailLink",Pn(R,y))})).apply(this,arguments)}class mt extends ni{constructor(y,C,L,se=null){super("password",L),this._email=y,this._password=C,this._tenantId=se}static _fromEmailAndPassword(y,C){return new mt(y,C,"password")}static _fromEmailAndCode(y,C,L=null){return new mt(y,C,"emailLink",L)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const C="string"==typeof y?JSON.parse(y):y;if(C?.email&&C?.password){if("password"===C.signInMethod)return this._fromEmailAndPassword(C.email,C.password);if("emailLink"===C.signInMethod)return this._fromEmailAndCode(C.email,C.password,C.tenantId)}return null}_getIdTokenResponse(y){var C=this;return(0,f.Z)(function*(){switch(C.signInMethod){case"password":return function mn(R,y){return An.apply(this,arguments)}(y,{returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function Ts(R,y){return De.apply(this,arguments)}(y,{email:C._email,oobCode:C._password});default:it(y,"internal-error")}})()}_linkToIdToken(y,C){var L=this;return(0,f.Z)(function*(){switch(L.signInMethod){case"password":return os(y,{idToken:C,returnSecureToken:!0,email:L._email,password:L._password});case"emailLink":return function at(R,y){return We.apply(this,arguments)}(y,{idToken:C,email:L._email,oobCode:L._password});default:it(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function Ht(R,y){return zt.apply(this,arguments)}function zt(){return(zt=(0,f.Z)(function*(R,y){return Ve(R,"POST","/v1/accounts:signInWithIdp",Pn(R,y))})).apply(this,arguments)}class pr extends ni{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const C=new pr(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(C.idToken=y.idToken),y.accessToken&&(C.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(C.nonce=y.nonce),y.pendingToken&&(C.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(C.accessToken=y.oauthToken,C.secret=y.oauthTokenSecret):it("argument-error"),C}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const C="string"==typeof y?JSON.parse(y):y,{providerId:L,signInMethod:se}=C,_e=(0,q._T)(C,["providerId","signInMethod"]);if(!L||!se)return null;const E=new pr(L,se);return E.idToken=_e.idToken||void 0,E.accessToken=_e.accessToken||void 0,E.secret=_e.secret,E.nonce=_e.nonce,E.pendingToken=_e.pendingToken||null,E}_getIdTokenResponse(y){return Ht(y,this.buildRequest())}_linkToIdToken(y,C){const L=this.buildRequest();return L.idToken=C,Ht(y,L)}_getReauthenticationResolver(y){const C=this.buildRequest();return C.autoCreate=!1,Ht(y,C)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const C={};this.idToken&&(C.id_token=this.idToken),this.accessToken&&(C.access_token=this.accessToken),this.secret&&(C.oauth_token_secret=this.secret),C.providerId=this.providerId,this.nonce&&!this.pendingToken&&(C.nonce=this.nonce),y.postBody=(0,I.xO)(C)}return y}}class sr{constructor(y){var C,L,se,_e,E,_;const g=(0,I.zd)((0,I.pd)(y)),b=null!==(C=g.apiKey)&&void 0!==C?C:null,$=null!==(L=g.oobCode)&&void 0!==L?L:null,re=function zs(R){switch(R){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(se=g.mode)&&void 0!==se?se:null);Ze(b&&$&&re,"argument-error"),this.apiKey=b,this.operation=re,this.code=$,this.continueUrl=null!==(_e=g.continueUrl)&&void 0!==_e?_e:null,this.languageCode=null!==(E=g.languageCode)&&void 0!==E?E:null,this.tenantId=null!==(_=g.tenantId)&&void 0!==_?_:null}static parseLink(y){const C=function Gi(R){const y=(0,I.zd)((0,I.pd)(R)).link,C=y?(0,I.zd)((0,I.pd)(y)).deep_link_id:null,L=(0,I.zd)((0,I.pd)(R)).deep_link_id;return(L?(0,I.zd)((0,I.pd)(L)).link:null)||L||C||y||R}(y);try{return new sr(C)}catch{return null}}}let bi=(()=>{class R{constructor(){this.providerId=R.PROVIDER_ID}static credential(C,L){return mt._fromEmailAndPassword(C,L)}static credentialWithLink(C,L){const se=sr.parseLink(L);return Ze(se,"argument-error"),mt._fromEmailAndCode(C,se.code,se.tenantId)}}return R.PROVIDER_ID="password",R.EMAIL_PASSWORD_SIGN_IN_METHOD="password",R.EMAIL_LINK_SIGN_IN_METHOD="emailLink",R})();class Os{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class Gn extends Os{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}let io=(()=>{class R extends Gn{constructor(){super("google.com"),this.addScope("profile")}static credential(C,L){return pr._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.GOOGLE_SIGN_IN_METHOD,idToken:C,accessToken:L})}static credentialFromResult(C){return R.credentialFromTaggedObject(C)}static credentialFromError(C){return R.credentialFromTaggedObject(C.customData||{})}static credentialFromTaggedObject({_tokenResponse:C}){if(!C)return null;const{oauthIdToken:L,oauthAccessToken:se}=C;if(!L&&!se)return null;try{return R.credential(L,se)}catch{return null}}}return R.GOOGLE_SIGN_IN_METHOD="google.com",R.PROVIDER_ID="google.com",R})();function yo(R,y){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,f.Z)(function*(R,y){return Ve(R,"POST","/v1/accounts:signUp",Pn(R,y))})).apply(this,arguments)}class as{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,C,L,se=!1){return(0,f.Z)(function*(){const _e=yield Ne._fromIdTokenResponse(y,L,se),E=so(L);return new as({user:_e,providerId:E,_tokenResponse:L,operationType:C})})()}static _forOperation(y,C,L){return(0,f.Z)(function*(){yield y._updateTokensIfNecessary(L,!0);const se=so(L);return new as({user:y,providerId:se,_tokenResponse:L,operationType:C})})()}}function so(R){return R.providerId?R.providerId:"phoneNumber"in R?"phone":null}class jo extends I.ZR{constructor(y,C,L,se){var _e;super(C.code,C.message),this.operationType=L,this.user=se,Object.setPrototypeOf(this,jo.prototype),this.customData={appName:y.name,tenantId:null!==(_e=y.tenantId)&&void 0!==_e?_e:void 0,_serverResponse:C.customData._serverResponse,operationType:L}}static _fromErrorAndOperation(y,C,L,se){return new jo(y,C,L,se)}}function Rs(R,y,C,L){return("reauthenticate"===y?C._getReauthenticationResolver(R):C._getIdTokenResponse(R)).catch(_e=>{throw"auth/multi-factor-auth-required"===_e.code?jo._fromErrorAndOperation(R,_e,y,L):_e})}function Ss(R,y){return kn.apply(this,arguments)}function kn(){return(kn=(0,f.Z)(function*(R,y,C=!1){const L=yield Qn(R,y._linkToIdToken(R.auth,yield R.getIdToken()),C);return as._forOperation(R,"link",L)})).apply(this,arguments)}function Ba(R,y){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,f.Z)(function*(R,y,C=!1){const{auth:L}=R,se="reauthenticate";try{const _e=yield Qn(R,Rs(L,se,y,R),C);Ze(_e.idToken,L,"internal-error");const E=dn(_e.idToken);Ze(E,L,"internal-error");const{sub:_}=E;return Ze(R.uid===_,L,"user-mismatch"),as._forOperation(R,se,_e)}catch(_e){throw"auth/user-not-found"===_e?.code&&it(L,"user-mismatch"),_e}})).apply(this,arguments)}function Zi(R,y){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,f.Z)(function*(R,y,C=!1){const L="signIn",se=yield Rs(R,L,y),_e=yield as._fromIdTokenResponse(R,L,se);return C||(yield R._updateCurrentUser(_e.user)),_e})).apply(this,arguments)}function vi(R,y){return ao.apply(this,arguments)}function ao(){return(ao=(0,f.Z)(function*(R,y){return Zi(Xt(R),y)})).apply(this,arguments)}function et(R,y,C){return ln.apply(this,arguments)}function ln(){return(ln=(0,f.Z)(function*(R,y,C){const L=Xt(R),se=yield yo(L,{returnSecureToken:!0,email:y,password:C}),_e=yield as._fromIdTokenResponse(L,"signIn",se);return yield L._updateCurrentUser(_e.user),_e})).apply(this,arguments)}function Gr(R,y,C){return vi((0,I.m9)(R),bi.credential(y,C))}class lo{constructor(y,C,L={}){this.isNewUser=y,this.providerId=C,this.profile=L}}class Xi extends lo{constructor(y,C,L,se){super(y,C,L),this.username=se}}class qo extends lo{constructor(y,C){super(y,"facebook.com",C)}}class qa extends Xi{constructor(y,C){super(y,"github.com",C,"string"==typeof C?.login?C?.login:null)}}class Ml extends lo{constructor(y,C){super(y,"google.com",C)}}class li extends Xi{constructor(y,C,L){super(y,"twitter.com",C,L)}}function js(R){const{user:y,_tokenResponse:C}=R;return y.isAnonymous&&!C?{providerId:null,isNewUser:!1,profile:null}:function Do(R){var y,C;if(!R)return null;const{providerId:L}=R,se=R.rawUserInfo?JSON.parse(R.rawUserInfo):{},_e=R.isNewUser||"identitytoolkit#SignupNewUserResponse"===R.kind;if(!L&&R?.idToken){const E=null===(C=null===(y=dn(R.idToken))||void 0===y?void 0:y.firebase)||void 0===C?void 0:C.sign_in_provider;if(E)return new lo(_e,"anonymous"!==E&&"custom"!==E?E:null)}if(!L)return null;switch(L){case"facebook.com":return new qo(_e,se);case"github.com":return new qa(_e,se);case"google.com":return new Ml(_e,se);case"twitter.com":return new li(_e,se,R.screenName||null);case"custom":case"anonymous":return new lo(_e,null);default:return new lo(_e,L,se)}}(C)}function Xa(R,y,C,L){return(0,I.m9)(R).onAuthStateChanged(y,C,L)}function Qs(R){return(0,I.m9)(R).signOut()}const ft="__sak";class P{constructor(y,C){this.storageRetriever=y,this.type=C}_isAvailable(){try{return this.storage?(this.storage.setItem(ft,"1"),this.storage.removeItem(ft),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(y,C){return this.storage.setItem(y,JSON.stringify(C)),Promise.resolve()}_get(y){const C=this.storage.getItem(y);return Promise.resolve(C?JSON.parse(C):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const pt=(()=>{class R extends P{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(C,L)=>this.onStorageEvent(C,L),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Q(){const R=(0,I.z$)();return Ft(R)||Ye(R)}()&&function Ti(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Cr(),this._shouldAllowMigration=!0}forAllChangedKeys(C){for(const L of Object.keys(this.listeners)){const se=this.storage.getItem(L),_e=this.localCache[L];se!==_e&&C(L,_e,se)}}onStorageEvent(C,L=!1){if(!C.key)return void this.forAllChangedKeys((_,g,b)=>{this.notifyListeners(_,b)});const se=C.key;if(L?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const _=this.storage.getItem(se);if(C.newValue!==_)null!==C.newValue?this.storage.setItem(se,C.newValue):this.storage.removeItem(se);else if(this.localCache[se]===C.newValue&&!L)return}const _e=()=>{const _=this.storage.getItem(se);!L&&this.localCache[se]===_||this.notifyListeners(se,_)},E=this.storage.getItem(se);!function Xn(){return(0,I.w1)()&&10===document.documentMode}()||E===C.newValue||C.newValue===C.oldValue?_e():setTimeout(_e,10)}notifyListeners(C,L){this.localCache[C]=L;const se=this.listeners[C];if(se)for(const _e of Array.from(se))_e(L&&JSON.parse(L))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((C,L,se)=>{this.onStorageEvent(new StorageEvent("storage",{key:C,oldValue:L,newValue:se}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(C,L){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[C]||(this.listeners[C]=new Set,this.localCache[C]=this.storage.getItem(C)),this.listeners[C].add(L)}_removeListener(C,L){this.listeners[C]&&(this.listeners[C].delete(L),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(C,L){var se=()=>super._set,_e=this;return(0,f.Z)(function*(){yield se().call(_e,C,L),_e.localCache[C]=JSON.stringify(L)})()}_get(C){var L=()=>super._get,se=this;return(0,f.Z)(function*(){const _e=yield L().call(se,C);return se.localCache[C]=JSON.stringify(_e),_e})()}_remove(C){var L=()=>super._remove,se=this;return(0,f.Z)(function*(){yield L().call(se,C),delete se.localCache[C]})()}}return R.type="LOCAL",R})(),nn=(()=>{class R extends P{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(C,L){}_removeListener(C,L){}}return R.type="SESSION",R})();let Nr=(()=>{class R{constructor(C){this.eventTarget=C,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(C){const L=this.receivers.find(_e=>_e.isListeningto(C));if(L)return L;const se=new R(C);return this.receivers.push(se),se}isListeningto(C){return this.eventTarget===C}handleEvent(C){var L=this;return(0,f.Z)(function*(){const se=C,{eventId:_e,eventType:E,data:_}=se.data,g=L.handlersMap[E];if(!g?.size)return;se.ports[0].postMessage({status:"ack",eventId:_e,eventType:E});const b=Array.from(g).map(function(){var re=(0,f.Z)(function*(Ee){return Ee(se.origin,_)});return function(Ee){return re.apply(this,arguments)}}()),$=yield function Xr(R){return Promise.all(R.map(function(){var y=(0,f.Z)(function*(C){try{return{fulfilled:!0,value:yield C}}catch(L){return{fulfilled:!1,reason:L}}});return function(C){return y.apply(this,arguments)}}()))}(b);se.ports[0].postMessage({status:"done",eventId:_e,eventType:E,response:$})})()}_subscribe(C,L){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[C]||(this.handlersMap[C]=new Set),this.handlersMap[C].add(L)}_unsubscribe(C,L){this.handlersMap[C]&&L&&this.handlersMap[C].delete(L),(!L||0===this.handlersMap[C].size)&&delete this.handlersMap[C],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return R.receivers=[],R})();function zn(R="",y=10){let C="";for(let L=0;L<y;L++)C+=Math.floor(10*Math.random());return R+C}class gr{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,C,L=50){var se=this;return(0,f.Z)(function*(){const _e=typeof MessageChannel<"u"?new MessageChannel:null;if(!_e)throw new Error("connection_unavailable");let E,_;return new Promise((g,b)=>{const $=zn("",20);_e.port1.start();const re=setTimeout(()=>{b(new Error("unsupported_event"))},L);_={messageChannel:_e,onMessage(Ee){const Te=Ee;if(Te.data.eventId===$)switch(Te.data.status){case"ack":clearTimeout(re),E=setTimeout(()=>{b(new Error("timeout"))},3e3);break;case"done":clearTimeout(E),g(Te.data.response);break;default:clearTimeout(re),clearTimeout(E),b(new Error("invalid_response"))}}},se.handlers.add(_),_e.port1.addEventListener("message",_.onMessage),se.target.postMessage({eventType:y,eventId:$,data:C},[_e.port2])}).finally(()=>{_&&se.removeMessageHandler(_)})})()}}function Wn(){return window}function kr(){return typeof Wn().WorkerGlobalScope<"u"&&"function"==typeof Wn().importScripts}function mr(){return(mr=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const jn="firebaseLocalStorageDb",ta=1,Lr="firebaseLocalStorage",Yt="fbase_key";class co{constructor(y){this.request=y}toPromise(){return new Promise((y,C)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{C(this.request.error)})})}}function Aa(R,y){return R.transaction([Lr],y?"readwrite":"readonly").objectStore(Lr)}function va(){const R=indexedDB.open(jn,ta);return new Promise((y,C)=>{R.addEventListener("error",()=>{C(R.error)}),R.addEventListener("upgradeneeded",()=>{const L=R.result;try{L.createObjectStore(Lr,{keyPath:Yt})}catch(se){C(se)}}),R.addEventListener("success",(0,f.Z)(function*(){const L=R.result;L.objectStoreNames.contains(Lr)?y(L):(L.close(),yield function na(){const R=indexedDB.deleteDatabase(jn);return new co(R).toPromise()}(),y(yield va()))}))})}function vs(R,y,C){return ho.apply(this,arguments)}function ho(){return(ho=(0,f.Z)(function*(R,y,C){const L=Aa(R,!0).put({[Yt]:y,value:C});return new co(L).toPromise()})).apply(this,arguments)}function Ma(){return(Ma=(0,f.Z)(function*(R,y){const C=Aa(R,!1).get(y),L=yield new co(C).toPromise();return void 0===L?null:L.value})).apply(this,arguments)}function ul(R,y){const C=Aa(R,!0).delete(y);return new co(C).toPromise()}const au=(()=>{class R{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var C=this;return(0,f.Z)(function*(){return C.db||(C.db=yield va()),C.db})()}_withRetries(C){var L=this;return(0,f.Z)(function*(){let se=0;for(;;)try{const _e=yield L._openDb();return yield C(_e)}catch(_e){if(se++>3)throw _e;L.db&&(L.db.close(),L.db=void 0)}})()}initializeServiceWorkerMessaging(){var C=this;return(0,f.Z)(function*(){return kr()?C.initializeReceiver():C.initializeSender()})()}initializeReceiver(){var C=this;return(0,f.Z)(function*(){C.receiver=Nr._getInstance(function es(){return kr()?self:null}()),C.receiver._subscribe("keyChanged",function(){var L=(0,f.Z)(function*(se,_e){return{keyProcessed:(yield C._poll()).includes(_e.key)}});return function(se,_e){return L.apply(this,arguments)}}()),C.receiver._subscribe("ping",function(){var L=(0,f.Z)(function*(se,_e){return["keyChanged"]});return function(se,_e){return L.apply(this,arguments)}}())})()}initializeSender(){var C=this;return(0,f.Z)(function*(){var L,se;if(C.activeServiceWorker=yield function uo(){return mr.apply(this,arguments)}(),!C.activeServiceWorker)return;C.sender=new gr(C.activeServiceWorker);const _e=yield C.sender._send("ping",{},800);_e&&null!==(L=_e[0])&&void 0!==L&&L.fulfilled&&null!==(se=_e[0])&&void 0!==se&&se.value.includes("keyChanged")&&(C.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(C){var L=this;return(0,f.Z)(function*(){if(L.sender&&L.activeServiceWorker&&function vn(){var R;return(null===(R=navigator?.serviceWorker)||void 0===R?void 0:R.controller)||null}()===L.activeServiceWorker)try{yield L.sender._send("keyChanged",{key:C},L.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const C=yield va();return yield vs(C,ft,"1"),yield ul(C,ft),!0}catch{}return!1})()}_withPendingWrite(C){var L=this;return(0,f.Z)(function*(){L.pendingWrites++;try{yield C()}finally{L.pendingWrites--}})()}_set(C,L){var se=this;return(0,f.Z)(function*(){return se._withPendingWrite((0,f.Z)(function*(){return yield se._withRetries(_e=>vs(_e,C,L)),se.localCache[C]=L,se.notifyServiceWorker(C)}))})()}_get(C){var L=this;return(0,f.Z)(function*(){const se=yield L._withRetries(_e=>function ra(R,y){return Ma.apply(this,arguments)}(_e,C));return L.localCache[C]=se,se})()}_remove(C){var L=this;return(0,f.Z)(function*(){return L._withPendingWrite((0,f.Z)(function*(){return yield L._withRetries(se=>ul(se,C)),delete L.localCache[C],L.notifyServiceWorker(C)}))})()}_poll(){var C=this;return(0,f.Z)(function*(){const L=yield C._withRetries(E=>{const _=Aa(E,!1).getAll();return new co(_).toPromise()});if(!L)return[];if(0!==C.pendingWrites)return[];const se=[],_e=new Set;for(const{fbase_key:E,value:_}of L)_e.add(E),JSON.stringify(C.localCache[E])!==JSON.stringify(_)&&(C.notifyListeners(E,_),se.push(E));for(const E of Object.keys(C.localCache))C.localCache[E]&&!_e.has(E)&&(C.notifyListeners(E,null),se.push(E));return se})()}notifyListeners(C,L){this.localCache[C]=L;const se=this.listeners[C];if(se)for(const _e of Array.from(se))_e(L)}startPolling(){var C=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return C._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(C,L){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[C]||(this.listeners[C]=new Set,this._get(C)),this.listeners[C].add(L)}_removeListener(C,L){this.listeners[C]&&(this.listeners[C].delete(L),0===this.listeners[C].size&&delete this.listeners[C]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return R.type="LOCAL",R})();function ts(R){return`__${R}${Math.floor(1e6*Math.random())}`}function cs(R,y){return y?qe(y):(Ze(R._popupRedirectResolver,R,"argument-error"),R._popupRedirectResolver)}ts("rcb"),new Kt(3e4,6e4);class Wr extends ni{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return Ht(y,this._buildIdpRequest())}_linkToIdToken(y,C){return Ht(y,this._buildIdpRequest(C))}_getReauthenticationResolver(y){return Ht(y,this._buildIdpRequest())}_buildIdpRequest(y){const C={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(C.idToken=y),C}}function A(R){return Zi(R.auth,new Wr(R),R.bypassAuthState)}function O(R){const{auth:y,user:C}=R;return Ze(C,y,"internal-error"),Ba(C,new Wr(R),R.bypassAuthState)}function T(R){return F.apply(this,arguments)}function F(){return(F=(0,f.Z)(function*(R){const{auth:y,user:C}=R;return Ze(C,y,"internal-error"),Ss(C,new Wr(R),R.bypassAuthState)})).apply(this,arguments)}class W{constructor(y,C,L,se,_e=!1){this.auth=y,this.resolver=L,this.user=se,this.bypassAuthState=_e,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(C)?C:[C]}execute(){var y=this;return new Promise(function(){var C=(0,f.Z)(function*(L,se){y.pendingPromise={resolve:L,reject:se};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(_e){y.reject(_e)}});return function(L,se){return C.apply(this,arguments)}}())}onAuthEvent(y){var C=this;return(0,f.Z)(function*(){const{urlResponse:L,sessionId:se,postBody:_e,tenantId:E,error:_,type:g}=y;if(_)return void C.reject(_);const b={auth:C.auth,requestUri:L,sessionId:se,tenantId:E||void 0,postBody:_e||void 0,user:C.user,bypassAuthState:C.bypassAuthState};try{C.resolve(yield C.getIdpTask(g)(b))}catch($){C.reject($)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return A;case"linkViaPopup":case"linkViaRedirect":return T;case"reauthViaPopup":case"reauthViaRedirect":return O;default:it(this.auth,"internal-error")}}resolve(y){St(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){St(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oe=new Kt(2e3,1e4);function pe(R,y,C){return He.apply(this,arguments)}function He(){return(He=(0,f.Z)(function*(R,y,C){const L=Xt(R);!function Ct(R,y,C){if(!(y instanceof C))throw C.name!==y.constructor.name&&it(R,"argument-error"),xe(R,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}(R,y,Os);const se=cs(L,C);return new Ur(L,"signInViaPopup",y,se).executeNotNull()})).apply(this,arguments)}let Ur=(()=>{class R extends W{constructor(C,L,se,_e,E){super(C,L,_e,E),this.provider=se,this.authWindow=null,this.pollId=null,R.currentPopupAction&&R.currentPopupAction.cancel(),R.currentPopupAction=this}executeNotNull(){var C=this;return(0,f.Z)(function*(){const L=yield C.execute();return Ze(L,C.auth,"internal-error"),L})()}onExecution(){var C=this;return(0,f.Z)(function*(){St(1===C.filter.length,"Popup operations only handle one event");const L=zn();C.authWindow=yield C.resolver._openPopup(C.auth,C.provider,C.filter[0],L),C.authWindow.associatedEvent=L,C.resolver._originValidation(C.auth).catch(se=>{C.reject(se)}),C.resolver._isIframeWebStorageSupported(C.auth,se=>{se||C.reject(Ue(C.auth,"web-storage-unsupported"))}),C.pollUserCancellation()})()}get eventId(){var C;return(null===(C=this.authWindow)||void 0===C?void 0:C.associatedEvent)||null}cancel(){this.reject(Ue(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,R.currentPopupAction=null}pollUserCancellation(){const C=()=>{var L,se;this.pollId=null!==(se=null===(L=this.authWindow)||void 0===L?void 0:L.window)&&void 0!==se&&se.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ue(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(C,oe.get())};C()}}return R.currentPopupAction=null,R})();const Ds="pendingRedirect",fi=new Map;class xa extends W{constructor(y,C,L=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],C,void 0,L),this.eventId=null}execute(){var y=()=>super.execute,C=this;return(0,f.Z)(function*(){let L=fi.get(C.auth._key());if(!L){try{const _e=(yield function ji(R,y){return za.apply(this,arguments)}(C.resolver,C.auth))?yield y().call(C):null;L=()=>Promise.resolve(_e)}catch(se){L=()=>Promise.reject(se)}fi.set(C.auth._key(),L)}return C.bypassAuthState||fi.set(C.auth._key(),()=>Promise.resolve(null)),L()})()}onAuthEvent(y){var C=()=>super.onAuthEvent,L=this;return(0,f.Z)(function*(){if("signInViaRedirect"===y.type)return C().call(L,y);if("unknown"!==y.type){if(y.eventId){const se=yield L.auth._redirectUserForId(y.eventId);if(se)return L.user=se,C().call(L,y);L.resolve(null)}}else L.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function za(){return(za=(0,f.Z)(function*(R,y){const C=function pl(R){return ve(Ds,R.config.apiKey,R.name)}(y),L=function rl(R){return qe(R._redirectPersistence)}(R);if(!(yield L._isAvailable()))return!1;const se="true"===(yield L._get(C));return yield L._remove(C),se})).apply(this,arguments)}function pi(R,y){fi.set(R._key(),y)}function lu(R,y){return ql.apply(this,arguments)}function ql(){return(ql=(0,f.Z)(function*(R,y){return yield Xt(R)._initializationPromise,Ya(R,y,!1)})).apply(this,arguments)}function Ya(R,y){return Na.apply(this,arguments)}function Na(){return(Na=(0,f.Z)(function*(R,y,C=!1){const L=Xt(R),se=cs(L,y),E=yield new xa(L,se,C).execute();return E&&!C&&(delete E.user._redirectEventId,yield L._persistUserIfCurrent(E.user),yield L._setRedirectUser(null,y)),E})).apply(this,arguments)}class Ni{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let C=!1;return this.consumers.forEach(L=>{this.isEventForConsumer(y,L)&&(C=!0,this.sendToConsumer(y,L),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function mi(R){switch(R.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return As(R);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,C||(this.queuedRedirectEvent=y,C=!0)),C}sendToConsumer(y,C){var L;if(y.error&&!As(y)){const se=(null===(L=y.error.code)||void 0===L?void 0:L.split("auth/")[1])||"internal-error";C.onError(Ue(this.auth,se))}else C.onAuthEvent(y)}isEventForConsumer(y,C){const L=null===C.eventId||!!y.eventId&&y.eventId===C.eventId;return C.filter.includes(y.type)&&L}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(la(y))}saveEventToCache(y){this.cachedEventUids.add(la(y)),this.lastProcessedEventTime=Date.now()}}function la(R){return[R.type,R.eventId,R.sessionId,R.tenantId].filter(y=>y).join("-")}function As({type:R,error:y}){return"unknown"===R&&"auth/no-auth-event"===y?.code}function Xs(){return(Xs=(0,f.Z)(function*(R,y={}){return pn(R,"GET","/v1/projects",y)})).apply(this,arguments)}const Cs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$s=/^https?/;function ci(){return ci=(0,f.Z)(function*(R){if(R.config.emulator)return;const{authorizedDomains:y}=yield function kl(R){return Xs.apply(this,arguments)}(R);for(const C of y)try{if(cu(C))return}catch{}it(R,"unauthorized-domain")}),ci.apply(this,arguments)}function cu(R){const y=vt(),{protocol:C,hostname:L}=new URL(y);if(R.startsWith("chrome-extension://")){const E=new URL(R);return""===E.hostname&&""===L?"chrome-extension:"===C&&R.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===C&&E.hostname===L}if(!$s.test(C))return!1;if(Cs.test(R))return L===R;const se=R.replace(/\./g,"\\.");return new RegExp("^(.+\\."+se+"|"+se+")$","i").test(L)}const Ul=new Kt(3e4,6e4);function yl(){const R=Wn().___jsl;if(R?.H)for(const y of Object.keys(R.H))if(R.H[y].r=R.H[y].r||[],R.H[y].L=R.H[y].L||[],R.H[y].r=[...R.H[y].L],R.CP)for(let C=0;C<R.CP.length;C++)R.CP[C]=null}let Fa=null;function Vl(R){return Fa=Fa||function fo(R){return new Promise((y,C)=>{var L,se,_e;function E(){yl(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{yl(),C(Ue(R,"network-request-failed"))},timeout:Ul.get()})}if(null!==(se=null===(L=Wn().gapi)||void 0===L?void 0:L.iframes)&&void 0!==se&&se.Iframe)y(gapi.iframes.getContext());else{if(null===(_e=Wn().gapi)||void 0===_e||!_e.load){const _=ts("iframefcb");return Wn()[_]=()=>{gapi.load?E():C(Ue(R,"network-request-failed"))},function Rl(R){return new Promise((y,C)=>{const L=document.createElement("script");L.setAttribute("src",R),L.onload=y,L.onerror=se=>{const _e=Ue("internal-error");_e.customData=se,C(_e)},L.type="text/javascript",L.charset="UTF-8",function bs(){var R,y;return null!==(y=null===(R=document.getElementsByTagName("head"))||void 0===R?void 0:R[0])&&void 0!==y?y:document}().appendChild(L)})}(`https://apis.google.com/js/api.js?onload=${_}`).catch(g=>C(g))}E()}}).catch(y=>{throw Fa=null,y})}(R),Fa}const du=new Kt(5e3,15e3),Wu="__/auth/iframe",Hi="emulator/auth/iframe",hu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zu(R){const y=R.config;Ze(y.authDomain,R,"auth-domain-config-required");const C=y.emulator?Fn(y,Hi):`https://${R.config.authDomain}/${Wu}`,L={apiKey:y.apiKey,appName:R.name,v:ee.Jn},se=Xl.get(R.config.apiHost);se&&(L.eid=se);const _e=R._getFrameworks();return _e.length&&(L.fw=_e.join(",")),`${C}?${(0,I.xO)(L).slice(1)}`}function Bl(){return Bl=(0,f.Z)(function*(R){const y=yield Vl(R),C=Wn().gapi;return Ze(C,R,"internal-error"),y.open({where:document.body,url:zu(R),messageHandlersFilter:C.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hu,dontclear:!0},L=>new Promise(function(){var se=(0,f.Z)(function*(_e,E){yield L.restyle({setHideOnLeave:!1});const _=Ue(R,"network-request-failed"),g=Wn().setTimeout(()=>{E(_)},du.get());function b(){Wn().clearTimeout(g),_e(L)}L.ping(b).then(b,()=>{E(_)})});return function(_e,E){return se.apply(this,arguments)}}()))}),Bl.apply(this,arguments)}const Tu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ua=500,ds=600,Jl="_blank",jl="http://localhost";class _l{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const eu="__/auth/handler",fu="emulator/auth/handler";function pu(R,y,C,L,se,_e){Ze(R.config.authDomain,R,"auth-domain-config-required"),Ze(R.config.apiKey,R,"invalid-api-key");const E={apiKey:R.config.apiKey,appName:R.name,authType:C,redirectUrl:L,v:ee.Jn,eventId:se};if(y instanceof Os){y.setDefaultLanguage(R.languageCode),E.providerId=y.providerId||"",(0,I.xb)(y.getCustomParameters())||(E.customParameters=JSON.stringify(y.getCustomParameters()));for(const[g,b]of Object.entries(_e||{}))E[g]=b}if(y instanceof Gn){const g=y.getScopes().filter(b=>""!==b);g.length>0&&(E.scopes=g.join(","))}R.tenantId&&(E.tid=R.tenantId);const _=E;for(const g of Object.keys(_))void 0===_[g]&&delete _[g];return`${function Su({config:R}){return R.emulator?Fn(R,fu):`https://${R.authDomain}/${eu}`}(R)}?${(0,I.xO)(_).slice(1)}`}const gu="webStorageSupport",Au=class bu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nn,this._completeRedirectFn=Ya,this._overrideRedirectResult=pi}_openPopup(y,C,L,se){var _e=this;return(0,f.Z)(function*(){var E;St(null===(E=_e.eventManagers[y._key()])||void 0===E?void 0:E.manager,"_initialize() not called before _openPopup()");const _=pu(y,C,L,vt(),se);return function No(R,y,C,L=ua,se=ds){const _e=Math.max((window.screen.availHeight-se)/2,0).toString(),E=Math.max((window.screen.availWidth-L)/2,0).toString();let _="";const g=Object.assign(Object.assign({},Tu),{width:L.toString(),height:se.toString(),top:_e,left:E}),b=(0,I.z$)().toLowerCase();C&&(_=Wt(b)?Jl:C),ke(b)&&(y=y||jl,g.scrollbars="yes");const $=Object.entries(g).reduce((Ee,[Te,tt])=>`${Ee}${Te}=${tt},`,"");if(function sn(R=(0,I.z$)()){var y;return Ye(R)&&!(null===(y=window.navigator)||void 0===y||!y.standalone)}(b)&&"_self"!==_)return function Io(R,y){const C=document.createElement("a");C.href=R,C.target=y;const L=document.createEvent("MouseEvent");L.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),C.dispatchEvent(L)}(y||"",_),new _l(null);const re=window.open(y||"",_,$);Ze(re,R,"popup-blocked");try{re.focus()}catch{}return new _l(re)}(y,_,zn())})()}_openRedirect(y,C,L,se){var _e=this;return(0,f.Z)(function*(){return yield _e._originValidation(y),function on(R){Wn().location.href=R}(pu(y,C,L,vt(),se)),new Promise(()=>{})})()}_initialize(y){const C=y._key();if(this.eventManagers[C]){const{manager:se,promise:_e}=this.eventManagers[C];return se?Promise.resolve(se):(St(_e,"If manager is not set, promise should be"),_e)}const L=this.initAndGetManager(y);return this.eventManagers[C]={promise:L},L.catch(()=>{delete this.eventManagers[C]}),L}initAndGetManager(y){var C=this;return(0,f.Z)(function*(){const L=yield function Ku(R){return Bl.apply(this,arguments)}(y),se=new Ni(y);return L.register("authEvent",_e=>(Ze(_e?.authEvent,y,"invalid-auth-event"),{status:se.onEvent(_e.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),C.eventManagers[y._key()]={manager:se},C.iframes[y._key()]=L,se})()}_isIframeWebStorageSupported(y,C){this.iframes[y._key()].send(gu,{type:gu},se=>{var _e;const E=null===(_e=se?.[0])||void 0===_e?void 0:_e[gu];void 0!==E&&C(!!E),it(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const C=y._key();return this.originValidationPromises[C]||(this.originValidationPromises[C]=function uu(R){return ci.apply(this,arguments)}(y)),this.originValidationPromises[C]}get _shouldInitProactively(){return Cr()||Ft()||Ye()}};var Gs="@firebase/auth";class Lo{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var C=this;return(0,f.Z)(function*(){return C.assertAuthConfigured(),yield C.auth._initializationPromise,C.auth.currentUser?{accessToken:yield C.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const C=this.auth.onIdTokenChanged(L=>{y(L?.stsTokenManager.accessToken||null)});this.internalListeners.set(y,C),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const C=this.internalListeners.get(y);C&&(this.internalListeners.delete(y),C(),this.updateProactiveRefresh())}assertAuthConfigured(){Ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ka=(0,I.Pz)("authIdTokenMaxAge")||300;let tu=null;const ol=R=>function(){var y=(0,f.Z)(function*(C){const L=C&&(yield C.getIdTokenResult()),se=L&&((new Date).getTime()-Date.parse(L.issuedAtTime))/1e3;if(se&&se>ka)return;const _e=L?.token;tu!==_e&&(tu=_e,yield fetch(R,{method:_e?"POST":"DELETE",headers:_e?{Authorization:`Bearer ${_e}`}:{}}))});return function(C){return y.apply(this,arguments)}}();function Hl(R=(0,ee.Mq)()){const y=(0,ee.qX)(R,"auth");if(y.isInitialized())return y.getImmediate();const C=function lt(R,y){const C=(0,ee.qX)(R,"auth");if(C.isInitialized()){const se=C.getImmediate(),_e=C.getOptions();if((0,I.vZ)(_e,y??{}))return se;it(se,"already-initialized")}return C.initialize({options:y})}(R,{popupRedirectResolver:Au,persistence:[au,pt,nn]}),L=(0,I.Pz)("authTokenSyncURL");if(L){const _e=ol(L);(function Ga(R,y,C){(0,I.m9)(R).beforeAuthStateChanged(y,C)})(C,_e,()=>_e(C.currentUser)),function $a(R,y,C,L){(0,I.m9)(R).onIdTokenChanged(y,C,L)}(C,E=>_e(E))}const se=(0,I.q4)("auth");return se&&function Zn(R,y,C){const L=Xt(R);Ze(L._canInitEmulator,L,"emulator-config-failed"),Ze(/^https?:\/\//.test(y),L,"invalid-emulator-scheme");const se=!!C?.disableWarnings,_e=hn(y),{host:E,port:_}=function fr(R){const y=hn(R),C=/(\/\/)?([^?#/]+)/.exec(R.substr(y.length));if(!C)return{host:"",port:null};const L=C[2].split("@").pop()||"",se=/^(\[[^\]]+\])(:|$)/.exec(L);if(se){const _e=se[1];return{host:_e,port:tr(L.substr(_e.length+1))}}{const[_e,E]=L.split(":");return{host:_e,port:tr(E)}}}(y);L.config.emulator={url:`${_e}//${E}${null===_?"":`:${_}`}/`},L.settings.appVerificationDisabledForTesting=!0,L.emulatorConfig=Object.freeze({host:E,port:_,protocol:_e.replace(":",""),options:Object.freeze({disableWarnings:se})}),se||function ti(){function R(){const y=document.createElement("p"),C=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",C.position="fixed",C.width="100%",C.backgroundColor="#ffffff",C.border=".1em solid #000000",C.color="#b50000",C.bottom="0px",C.left="0px",C.margin="0px",C.zIndex="10000",C.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",R):R())}()}(C,`http://${se}`),C}!function ns(R){(0,ee.Xd)(new ie.wA("auth",(y,{options:C})=>{const L=y.getProvider("app").getImmediate(),se=y.getProvider("heartbeat"),{apiKey:_e,authDomain:E}=L.options;return((_,g)=>{Ze(_e&&!_e.includes(":"),"invalid-api-key",{appName:_.name}),Ze(!E?.includes(":"),"argument-error",{appName:_.name});const b={apiKey:_e,authDomain:E,clientPlatform:R,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gt(R)},$=new Nt(_,g,b);return function Xe(R,y){const C=y?.persistence||[],L=(Array.isArray(C)?C:[C]).map(qe);y?.errorMap&&R._updateErrorMap(y.errorMap),R._initializeWithPersistence(L,y?.popupRedirectResolver)}($,C),$})(L,se)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,C,L)=>{y.getProvider("auth-internal").initialize()})),(0,ee.Xd)(new ie.wA("auth-internal",y=>{const C=Xt(y.getProvider("auth").getImmediate());return new Lo(C)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.KN)(Gs,"0.21.3",function Fo(R){switch(R){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(R)),(0,ee.KN)(Gs,"0.21.3","esm2017")}("Browser")},6197:(Se,ae,D)=>{D.d(ae,{iU:()=>Rr,U2:()=>al,N8:()=>Eh,nP:()=>Gc,S1:()=>Zr,ae:()=>ks,jM:()=>$l,VF:()=>rs,iH:()=>or,Od:()=>vl,Bt:()=>Ch,t8:()=>Is,Vx:()=>El});var f=D(9671),I=D(6881),ee=D(4859),B=D(2090),q=D(1877);const ie="@firebase/database";let K="";class Z{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,c){null==c?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,B.Wl)(c))}get(u){const c=this.domStorage_.getItem(this.prefixedName_(u));return null==c?null:(0,B.cI)(c)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class le{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,c){null==c?delete this.cache_[u]:this.cache_[u]=c}get(u){return(0,B.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const fe=function(h){try{if(typeof window<"u"&&typeof window[h]<"u"){const u=window[h];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new Z(u)}}catch{}return new le},Le=fe("localStorage"),Ge=fe("sessionStorage"),je=new q.Yd("@firebase/database"),Qe=function(){let h=1;return function(){return h++}}(),Be=function(h){const u=(0,B.dS)(h),c=new B.gQ;c.update(u);const v=c.digest();return B.US.encodeByteArray(v)},ze=function(...h){let u="";for(let c=0;c<h.length;c++){const v=h[c];Array.isArray(v)||v&&"object"==typeof v&&"number"==typeof v.length?u+=ze.apply(null,v):u+="object"==typeof v?(0,B.Wl)(v):v,u+=" "}return u};let Ke=null,it=!0;const xe=function(...h){if(!0===it&&(it=!1,null===Ke&&!0===Ge.get("logging_enabled")&&function(h,u){(0,B.hu)(!u||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(je.logLevel=q.in.VERBOSE,Ke=je.log.bind(je),u&&Ge.set("logging_enabled",!0)):"function"==typeof h?Ke=h:(Ke=null,Ge.remove("logging_enabled"))}(!0)),Ke){const u=ze.apply(null,h);Ke(u)}},Ct=function(h){return function(...u){xe(h,...u)}},It=function(...h){const u="FIREBASE INTERNAL ERROR: "+ze(...h);je.error(u)},Ze=function(...h){const u=`FIREBASE FATAL ERROR: ${ze(...h)}`;throw je.error(u),new Error(u)},Pt=function(...h){const u="FIREBASE WARNING: "+ze(...h);je.warn(u)},rt=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},lt="[MIN_NAME]",Xe="[MAX_NAME]",vt=function(h,u){if(h===u)return 0;if(h===lt||u===Xe)return-1;if(u===lt||h===Xe)return 1;{const c=Tt(h),v=Tt(u);return null!==c?null!==v?c-v==0?h.length-u.length:c-v:-1:null!==v?1:h<u?-1:1}},At=function(h,u){return h===u?0:h<u?-1:1},gn=function(h,u){if(u&&h in u)return u[h];throw new Error("Missing required key ("+h+") in object: "+(0,B.Wl)(u))},rr=function(h){if("object"!=typeof h||null===h)return(0,B.Wl)(h);const u=[];for(const v in h)u.push(v);u.sort();let c="{";for(let v=0;v<u.length;v++)0!==v&&(c+=","),c+=(0,B.Wl)(u[v]),c+=":",c+=rr(h[u[v]]);return c+="}",c},fn=function(h,u){const c=h.length;if(c<=u)return[h];const v=[];for(let M=0;M<c;M+=u)v.push(h.substring(M,M+u>c?c:M+u));return v};function Kt(h,u){for(const c in h)h.hasOwnProperty(c)&&u(c,h[c])}const Fn=function(h){(0,B.hu)(!rt(h),"Invalid JSON number");const v=1023;let M,j,Y,me,Ae;0===h?(j=0,Y=0,M=1/h==-1/0?1:0):(M=h<0,(h=Math.abs(h))>=Math.pow(2,1-v)?(me=Math.min(Math.floor(Math.log(h)/Math.LN2),v),j=me+v,Y=Math.round(h*Math.pow(2,52-me)-Math.pow(2,52))):(j=0,Y=Math.round(h/Math.pow(2,-1074))));const Fe=[];for(Ae=52;Ae;Ae-=1)Fe.push(Y%2?1:0),Y=Math.floor(Y/2);for(Ae=11;Ae;Ae-=1)Fe.push(j%2?1:0),j=Math.floor(j/2);Fe.push(M?1:0),Fe.reverse();const Et=Fe.join("");let wt="";for(Ae=0;Ae<64;Ae+=8){let Rt=parseInt(Et.substr(Ae,8),2).toString(16);1===Rt.length&&(Rt="0"+Rt),wt+=Rt}return wt.toLowerCase()},Pn=new RegExp("^-?(0*)\\d{1,10}$"),Tt=function(h){if(Pn.test(h)){const u=Number(h);if(u>=-2147483648&&u<=2147483647)return u}return null},dt=function(h){try{h()}catch(u){setTimeout(()=>{throw Pt("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},Ve=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},_t=function(h,u){const c=setTimeout(h,u);return"number"==typeof c&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class kt{constructor(u,c){this.appName_=u,this.appCheckProvider=c,this.appCheck=c?.getImmediate({optional:!0}),this.appCheck||c?.get().then(v=>this.appCheck=v)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((c,v)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(c,v):c(null)},0)})}addTokenChangeListener(u){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(v=>v.addTokenListener(u))}notifyForInvalidToken(){Pt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Vn{constructor(u,c,v){this.appName_=u,this.firebaseOptions_=c,this.authProvider_=v,this.auth_=null,this.auth_=v.getImmediate({optional:!0}),this.auth_||v.onInit(M=>this.auth_=M)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(c=>c&&"auth/token-not-initialized"===c.code?(xe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,v)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(c,v):c(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(c=>c.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(c=>c.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pt(u)}}let qn=(()=>{class h{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const qr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Yn="websocket",hr="long_polling";class dn{constructor(u,c,v,M,j=!1,Y="",me=!1,Ae=!1){this.secure=c,this.namespace=v,this.webSocketOnly=M,this.nodeAdmin=j,this.persistenceKey=Y,this.includeNamespaceInQueryParams=me,this.isUsingEmulator=Ae,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Le.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&Le.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Qn(h,u,c){let v;if((0,B.hu)("string"==typeof u,"typeof type must == string"),(0,B.hu)("object"==typeof c,"typeof params must == object"),u===Yn)v=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(u!==hr)throw new Error("Unknown connection type: "+u);v=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function Zt(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(c.ns=h.namespace);const M=[];return Kt(c,(j,Y)=>{M.push(j+"="+Y)}),v+M.join("&")}class yi{constructor(){this.counters_={}}incrementCounter(u,c=1){(0,B.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=c}get(){return(0,B.p$)(this.counters_)}}const Vr={},gi={};function Br(h){const u=h.toString();return Vr[u]||(Vr[u]=new yi),Vr[u]}class vr{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,c){this.closeAfterResponse=u,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,c){for(this.pendingResponses[u]=c;this.pendingResponses[this.currentResponseNum];){const v=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let M=0;M<v.length;++M)v[M]&&dt(()=>{this.onMessage_(v[M])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Re{constructor(u,c,v,M,j,Y,me){this.connId=u,this.repoInfo=c,this.applicationId=v,this.appCheckToken=M,this.authToken=j,this.transportSessionId=Y,this.lastSessionId=me,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ct(u),this.stats_=Br(c),this.urlFn=Ae=>(this.appCheckToken&&(Ae.ac=this.appCheckToken),Qn(c,hr,Ae))}open(u,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new vr(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,B.Yr)()||"complete"===document.readyState)h();else{let u=!1;const c=function(){document.body?u||(u=!0,h()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Oe((...j)=>{const[Y,me,Ae,Fe,Et]=j;if(this.incrementIncomingBytes_(j),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===Y)this.id=me,this.password=Ae;else{if("close"!==Y)throw new Error("Unrecognized command received: "+Y);me?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(me,()=>{this.onClosed_()})):this.onClosed_()}},(...j)=>{const[Y,me]=j;this.incrementIncomingBytes_(j),this.myPacketOrderer.handleResponse(Y,me)},()=>{this.onClosed_()},this.urlFn);const v={start:"t"};v.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(v.cb=this.scriptTagHolder.uniqueCallbackIdentifier),v.v="5",this.transportSessionId&&(v.s=this.transportSessionId),this.lastSessionId&&(v.ls=this.lastSessionId),this.applicationId&&(v.p=this.applicationId),this.appCheckToken&&(v.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&qr.test(location.hostname)&&(v.r="f");const M=this.urlFn(v);this.log_("Connecting via long-poll to "+M),this.scriptTagHolder.addTag(M,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Re.forceAllow_=!0}static forceDisallow(){Re.forceDisallow_=!0}static isAvailable(){return!((0,B.Yr)()||!Re.forceAllow_&&(Re.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const c=(0,B.Wl)(u);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const v=(0,B.h$)(c),M=fn(v,1840);for(let j=0;j<M.length;j++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,M.length,M[j]),this.curSegmentNum++}addDisconnectPingFrame(u,c){if((0,B.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const v={dframe:"t"};v.id=u,v.pw=c,this.myDisconnFrame.src=this.urlFn(v),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const c=(0,B.Wl)(u).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class Oe{constructor(u,c,v,M){if(this.onDisconnect=v,this.urlFn=M,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,B.Yr)())this.commandCB=u,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=Qe(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=Oe.createIFrame_();let j="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(j='<script>document.domain="'+document.domain+'";<\/script>');const Y="<html><body>"+j+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(Y),this.myIFrame.doc.close()}catch(me){xe("frame writing exception"),me.stack&&xe(me.stack),xe(me)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||xe("No IE domain setting required")}catch{const v=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+v+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,c){for(this.myID=u,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let c=this.urlFn(u),v="",M=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+v.length<=1870;){const Y=this.pendingSegs.shift();v=v+"&seg"+M+"="+Y.seg+"&ts"+M+"="+Y.ts+"&d"+M+"="+Y.d,M++}return c+=v,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(u,c,v){this.pendingSegs.push({seg:u,ts:c,d:v}),this.alive&&this.newRequest_()}addLongPollTag_(u,c){this.outstandingRequests.add(c);const v=()=>{this.outstandingRequests.delete(c),this.newRequest_()},M=setTimeout(v,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(M),v()})}addTag(u,c){(0,B.Yr)()?this.doNodeLongPoll(u,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const v=this.myIFrame.doc.createElement("script");v.type="text/javascript",v.async=!0,v.src=u,v.onload=v.onreadystatechange=function(){const M=v.readyState;(!M||"loaded"===M||"complete"===M)&&(v.onload=v.onreadystatechange=null,v.parentNode&&v.parentNode.removeChild(v),c())},v.onerror=()=>{xe("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(v)}catch{}},Math.floor(1))}}let Ye=null;typeof MozWebSocket<"u"?Ye=MozWebSocket:typeof WebSocket<"u"&&(Ye=WebSocket);let Vt=(()=>{class h{constructor(c,v,M,j,Y,me,Ae){this.connId=c,this.applicationId=M,this.appCheckToken=j,this.authToken=Y,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ct(this.connId),this.stats_=Br(v),this.connURL=h.connectionURL_(v,me,Ae,j,M),this.nodeAdmin=v.nodeAdmin}static connectionURL_(c,v,M,j,Y){const me={v:"5"};return!(0,B.Yr)()&&typeof location<"u"&&location.hostname&&qr.test(location.hostname)&&(me.r="f"),v&&(me.s=v),M&&(me.ls=M),j&&(me.ac=j),Y&&(me.p=Y),Qn(c,Yn,me)}open(c,v){this.onDisconnect=v,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Le.set("previous_websocket_failure",!0);try{let M;if((0,B.Yr)()){M={headers:{"User-Agent":`Firebase/5/${K}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(M.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(M.headers["X-Firebase-AppCheck"]=this.appCheckToken);const Y=process.env,me=0===this.connURL.indexOf("wss://")?Y.HTTPS_PROXY||Y.https_proxy:Y.HTTP_PROXY||Y.http_proxy;me&&(M.proxy={origin:me})}this.mySock=new Ye(this.connURL,[],M)}catch(M){this.log_("Error instantiating WebSocket.");const j=M.message||M.data;return j&&this.log_(j),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=M=>{this.handleIncomingFrame(M)},this.mySock.onerror=M=>{this.log_("WebSocket error.  Closing connection.");const j=M.message||M.data;j&&this.log_(j),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let c=!1;if(typeof navigator<"u"&&navigator.userAgent){const M=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);M&&M.length>1&&parseFloat(M[1])<4.4&&(c=!0)}return!c&&null!==Ye&&!h.forceDisallow_}static previouslyFailed(){return Le.isInMemoryStorage||!0===Le.get("previous_websocket_failure")}markConnectionHealthy(){Le.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const v=this.frames.join("");this.frames=null;const M=(0,B.cI)(v);this.onMessage(M)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,B.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const v=Number(c);if(!isNaN(v))return this.handleNewFrameCount_(v),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const v=c.data;if(this.bytesReceived+=v.length,this.stats_.incrementCounter("bytes_received",v.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(v);else{const M=this.extractFrameCount_(v);null!==M&&this.appendFrame_(M)}}send(c){this.resetKeepAlive();const v=(0,B.Wl)(c);this.bytesSent+=v.length,this.stats_.incrementCounter("bytes_sent",v.length);const M=fn(v,16384);M.length>1&&this.sendString_(String(M.length));for(let j=0;j<M.length;j++)this.sendString_(M[j])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(v){this.log_("Exception thrown from WebSocket.send():",v.message||v.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),sn=(()=>{class h{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[Re,Vt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const v=Vt&&Vt.isAvailable();let M=v&&!Vt.previouslyFailed();if(c.webSocketOnly&&(v||Pt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),M=!0),M)this.transports_=[Vt];else{const j=this.transports_=[];for(const Y of h.ALL_TRANSPORTS)Y&&Y.isAvailable()&&j.push(Y);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class Ms{constructor(u,c,v,M,j,Y,me,Ae,Fe,Et){this.id=u,this.repoInfo_=c,this.applicationId_=v,this.appCheckToken_=M,this.authToken_=j,this.onMessage_=Y,this.onReady_=me,this.onDisconnect_=Ae,this.onKill_=Fe,this.lastSessionId=Et,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ct("c:"+this.id+":"),this.transportManager_=new sn(c),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),v=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,v)},Math.floor(0));const M=u.healthyTimeout||0;M>0&&(this.healthyTimeout_=_t(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(M)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return c=>{u===this.conn_?this.onConnectionLost_(c):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return c=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(c):u===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const c=u.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const c=gn("t",u),v=gn("d",u);if("c"===c)this.onSecondaryControl_(v);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(v)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const c=gn("t",u),v=gn("d",u);"c"===c?this.onControl_(v):"d"===c&&this.onDataMessage_(v)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const c=gn("t",u);if("d"in u){const v=u.d;if("h"===c){const M=Object.assign({},v);this.repoInfo_.isUsingEmulator&&(M.h=this.repoInfo_.host),this.onHandshake_(M)}else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let M=0;M<this.pendingDataMessages.length;++M)this.onDataMessage_(this.pendingDataMessages[M]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(v):"r"===c?this.onReset_(v):"e"===c?It("Server Error: "+v):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):It("Unknown control packet command: "+c)}}onHandshake_(u){const c=u.ts,v=u.v,M=u.h;this.sessionId=u.s,this.repoInfo_.host=M,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==v&&Pt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),v=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,v),_t(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,c){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_t(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Le.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ui{put(u,c,v,M){}merge(u,c,v,M){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,c,v){}onDisconnectMerge(u,c,v){}onDisconnectCancel(u,c){}reportStats(u){}}class os{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,B.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...c){if(Array.isArray(this.listeners_[u])){const v=[...this.listeners_[u]];for(let M=0;M<v.length;M++)v[M].callback.apply(v[M].context,c)}}on(u,c,v){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:c,context:v});const M=this.getInitialEvent(u);M&&c.apply(v,M)}off(u,c,v){this.validateEventType_(u);const M=this.listeners_[u]||[];for(let j=0;j<M.length;j++)if(M[j].callback===c&&(!v||v===M[j].context))return void M.splice(j,1)}validateEventType_(u){(0,B.hu)(this.allowedEvents_.find(c=>c===u),"Unknown event: "+u)}}class jr extends os{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,B.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new jr}getInitialEvent(u){return(0,B.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}const Bt=32,bn=768;class mn{constructor(u,c){if(void 0===c){this.pieces_=u.split("/");let v=0;for(let M=0;M<this.pieces_.length;M++)this.pieces_[M].length>0&&(this.pieces_[v]=this.pieces_[M],v++);this.pieces_.length=v,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=c}toString(){let u="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(u+="/"+this.pieces_[c]);return u||"/"}}function An(){return new mn("")}function In(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function er(h){return h.pieces_.length-h.pieceNum_}function yr(h){let u=h.pieceNum_;return u<h.pieces_.length&&u++,new mn(h.pieces_,u)}function Ar(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function _i(h,u=0){return h.pieces_.slice(h.pieceNum_+u)}function xn(h){if(h.pieceNum_>=h.pieces_.length)return null;const u=[];for(let c=h.pieceNum_;c<h.pieces_.length-1;c++)u.push(h.pieces_[c]);return new mn(u,0)}function Er(h,u){const c=[];for(let v=h.pieceNum_;v<h.pieces_.length;v++)c.push(h.pieces_[v]);if(u instanceof mn)for(let v=u.pieceNum_;v<u.pieces_.length;v++)c.push(u.pieces_[v]);else{const v=u.split("/");for(let M=0;M<v.length;M++)v[M].length>0&&c.push(v[M])}return new mn(c,0)}function Nn(h){return h.pieceNum_>=h.pieces_.length}function Yr(h,u){const c=In(h),v=In(u);if(null===c)return u;if(c===v)return Yr(yr(h),yr(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+h+")")}function Ts(h,u){const c=_i(h,0),v=_i(u,0);for(let M=0;M<c.length&&M<v.length;M++){const j=vt(c[M],v[M]);if(0!==j)return j}return c.length===v.length?0:c.length<v.length?-1:1}function De(h,u){if(er(h)!==er(u))return!1;for(let c=h.pieceNum_,v=u.pieceNum_;c<=h.pieces_.length;c++,v++)if(h.pieces_[c]!==u.pieces_[v])return!1;return!0}function at(h,u){let c=h.pieceNum_,v=u.pieceNum_;if(er(h)>er(u))return!1;for(;c<h.pieces_.length;){if(h.pieces_[c]!==u.pieces_[v])return!1;++c,++v}return!0}class We{constructor(u,c){this.errorPrefix_=c,this.parts_=_i(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let v=0;v<this.parts_.length;v++)this.byteLength_+=(0,B.ug)(this.parts_[v]);zt(this)}}function zt(h){if(h.byteLength_>bn)throw new Error(h.errorPrefix_+"has a key path longer than "+bn+" bytes ("+h.byteLength_+").");if(h.parts_.length>Bt)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Bt+") or object contains a cycle "+Jt(h))}function Jt(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class pr extends os{constructor(){let u,c;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(c="visibilitychange",u="hidden"):typeof document.mozHidden<"u"?(c="mozvisibilitychange",u="mozHidden"):typeof document.msHidden<"u"?(c="msvisibilitychange",u="msHidden"):typeof document.webkitHidden<"u"&&(c="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const v=!document[u];v!==this.visible_&&(this.visible_=v,this.trigger("visible",v))},!1)}static getInstance(){return new pr}getInitialEvent(u){return(0,B.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const ur=1e3;let zs,ii=(()=>{class h extends Ui{constructor(c,v,M,j,Y,me,Ae,Fe){if(super(),this.repoInfo_=c,this.applicationId_=v,this.onDataUpdate_=M,this.onConnectStatus_=j,this.onServerInfoUpdate_=Y,this.authTokenProvider_=me,this.appCheckTokenProvider_=Ae,this.authOverride_=Fe,this.id=h.nextPersistentConnectionId_++,this.log_=Ct("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ur,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Fe&&!(0,B.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pr.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&jr.getInstance().on("online",this.onOnline_,this)}sendRequest(c,v,M){const j=++this.requestNumber_,Y={r:j,a:c,b:v};this.log_((0,B.Wl)(Y)),(0,B.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(Y),M&&(this.requestCBHash_[j]=M)}get(c){this.initConnection_();const v=new B.BH,j={action:"g",request:{p:c._path.toString(),q:c._queryObject},onComplete:me=>{const Ae=me.d;"ok"===me.s?v.resolve(Ae):v.reject(Ae)}};return this.outstandingGets_.push(j),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),v.promise}listen(c,v,M,j){this.initConnection_();const Y=c._queryIdentifier,me=c._path.toString();this.log_("Listen called for "+me+" "+Y),this.listens.has(me)||this.listens.set(me,new Map),(0,B.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,B.hu)(!this.listens.get(me).has(Y),"listen() called twice for same path/queryId.");const Ae={onComplete:j,hashFn:v,query:c,tag:M};this.listens.get(me).set(Y,Ae),this.connected_&&this.sendListen_(Ae)}sendGet_(c){const v=this.outstandingGets_[c];this.sendRequest("g",v.request,M=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),v.onComplete&&v.onComplete(M)})}sendListen_(c){const v=c.query,M=v._path.toString(),j=v._queryIdentifier;this.log_("Listen on "+M+" for "+j);const Y={p:M};c.tag&&(Y.q=v._queryObject,Y.t=c.tag),Y.h=c.hashFn(),this.sendRequest("q",Y,Ae=>{const Fe=Ae.d,Et=Ae.s;h.warnOnListenWarnings_(Fe,v),(this.listens.get(M)&&this.listens.get(M).get(j))===c&&(this.log_("listen response",Ae),"ok"!==Et&&this.removeListen_(M,j),c.onComplete&&c.onComplete(Et,Fe))})}static warnOnListenWarnings_(c,v){if(c&&"object"==typeof c&&(0,B.r3)(c,"w")){const M=(0,B.DV)(c,"w");if(Array.isArray(M)&&~M.indexOf("no_index")){const j='".indexOn": "'+v._queryParams.getIndex().toString()+'"',Y=v._path.toString();Pt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${j} at ${Y} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,B.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,v=(0,B.w9)(c)?"auth":"gauth",M={cred:c};null===this.authOverride_?M.noauth=!0:"object"==typeof this.authOverride_&&(M.authvar=this.authOverride_),this.sendRequest(v,M,j=>{const Y=j.s,me=j.d||"error";this.authToken_===c&&("ok"===Y?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(Y,me))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const v=c.s,M=c.d||"error";"ok"===v?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(v,M)})}unlisten(c,v){const M=c._path.toString(),j=c._queryIdentifier;this.log_("Unlisten called for "+M+" "+j),(0,B.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(M,j)&&this.connected_&&this.sendUnlisten_(M,j,c._queryObject,v)}sendUnlisten_(c,v,M,j){this.log_("Unlisten on "+c+" for "+v);const Y={p:c};j&&(Y.q=M,Y.t=j),this.sendRequest("n",Y)}onDisconnectPut(c,v,M){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,v,M):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:v,onComplete:M})}onDisconnectMerge(c,v,M){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,v,M):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:v,onComplete:M})}onDisconnectCancel(c,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,v):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:v})}sendOnDisconnect_(c,v,M,j){const Y={p:v,d:M};this.log_("onDisconnect "+c,Y),this.sendRequest(c,Y,me=>{j&&setTimeout(()=>{j(me.s,me.d)},Math.floor(0))})}put(c,v,M,j){this.putInternal("p",c,v,M,j)}merge(c,v,M,j){this.putInternal("m",c,v,M,j)}putInternal(c,v,M,j,Y){this.initConnection_();const me={p:v,d:M};void 0!==Y&&(me.h=Y),this.outstandingPuts_.push({action:c,request:me,onComplete:j}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+v)}sendPut_(c){const v=this.outstandingPuts_[c].action,M=this.outstandingPuts_[c].request,j=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(v,M,Y=>{this.log_(v+" response",Y),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),j&&j(Y.s,Y.d)})}reportStats(c){if(this.connected_){const v={c};this.log_("reportStats",v),this.sendRequest("s",v,M=>{"ok"!==M.s&&this.log_("reportStats","Error sending stats: "+M.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,B.Wl)(c));const v=c.r,M=this.requestCBHash_[v];M&&(delete this.requestCBHash_[v],M(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,v){this.log_("handleServerMessage",c,v),"d"===c?this.onDataUpdate_(v.p,v.d,!1,v.t):"m"===c?this.onDataUpdate_(v.p,v.d,!0,v.t):"c"===c?this.onListenRevoked_(v.p,v.q):"ac"===c?this.onAuthRevoked_(v.s,v.d):"apc"===c?this.onAppCheckRevoked_(v.s,v.d):"sd"===c?this.onSecurityDebugPacket_(v):It("Unrecognized action received from server: "+(0,B.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,v){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=v,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,B.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ur,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=ur,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ur),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let v=Math.max(0,this.reconnectDelay_-c);v=Math.random()*v,this.log_("Trying to reconnect in "+v+"ms"),this.scheduleConnect_(v),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,f.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const v=c.onDataMessage_.bind(c),M=c.onReady_.bind(c),j=c.onRealtimeDisconnect_.bind(c),Y=c.id+":"+h.nextConnectionId_++,me=c.lastSessionId;let Ae=!1,Fe=null;const Et=function(){Fe?Fe.close():(Ae=!0,j())};c.realtime_={close:Et,sendRequest:function(En){(0,B.hu)(Fe,"sendRequest call when we're not connected not allowed."),Fe.sendRequest(En)}};const Rt=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[En,Kn]=yield Promise.all([c.authTokenProvider_.getToken(Rt),c.appCheckTokenProvider_.getToken(Rt)]);Ae?xe("getToken() completed but was canceled"):(xe("getToken() completed. Creating connection."),c.authToken_=En&&En.accessToken,c.appCheckToken_=Kn&&Kn.token,Fe=new Ms(Y,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,v,M,j,Ii=>{Pt(Ii+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},me))}catch(En){c.log_("Failed to get token: "+En),Ae||(c.repoInfo_.nodeAdmin&&Pt(En),Et())}}})()}interrupt(c){xe("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){xe("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,B.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ur,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const v=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:v})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const v=this.outstandingPuts_[c];v&&"h"in v.request&&v.queued&&(v.onComplete&&v.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,v){let M;M=v?v.map(Y=>rr(Y)).join("$"):"default";const j=this.removeListen_(c,M);j&&j.onComplete&&j.onComplete("permission_denied")}removeListen_(c,v){const M=new mn(c).toString();let j;if(this.listens.has(M)){const Y=this.listens.get(M);j=Y.get(v),Y.delete(v),0===Y.size&&this.listens.delete(M)}else j=void 0;return j}onAuthRevoked_(c,v){xe("Auth token revoked: "+c+"/"+v),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,v){xe("App check token revoked: "+c+"/"+v),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const v of c.values())this.sendListen_(v);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let v="js";(0,B.Yr)()&&(v=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+v+"."+K.replace(/\./g,"-")]=1,(0,B.uI)()?c["framework.cordova"]=1:(0,B.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=jr.getInstance().currentlyOnline();return(0,B.xb)(this.interruptReasons_)&&c}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class wn{constructor(u,c){this.name=u,this.node=c}static Wrap(u,c){return new wn(u,c)}}class Ps{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,c){const v=new wn(lt,u),M=new wn(lt,c);return 0!==this.compare(v,M)}minPost(){return wn.MIN}}class Gi extends Ps{static get __EMPTY_NODE(){return zs}static set __EMPTY_NODE(u){zs=u}compare(u,c){return vt(u.name,c.name)}isDefinedOn(u){throw(0,B.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,c){return!1}minPost(){return wn.MIN}maxPost(){return new wn(Xe,zs)}makePost(u,c){return(0,B.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new wn(u,zs)}toString(){return".key"}}const sr=new Gi;class ro{constructor(u,c,v,M,j=null){this.isReverse_=M,this.resultGenerator_=j,this.nodeStack_=[];let Y=1;for(;!u.isEmpty();)if(Y=c?v(u.key,c):1,M&&(Y*=-1),Y<0)u=this.isReverse_?u.left:u.right;else{if(0===Y){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,u=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let io,bi=(()=>{class h{constructor(c,v,M,j,Y){this.key=c,this.value=v,this.color=M??h.RED,this.left=j??Gn.EMPTY_NODE,this.right=Y??Gn.EMPTY_NODE}copy(c,v,M,j,Y){return new h(c??this.key,v??this.value,M??this.color,j??this.left,Y??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,v,M){let j=this;const Y=M(c,j.key);return j=Y<0?j.copy(null,null,null,j.left.insert(c,v,M),null):0===Y?j.copy(null,v,null,null,null):j.copy(null,null,null,null,j.right.insert(c,v,M)),j.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gn.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,v){let M,j;if(M=this,v(c,M.key)<0)!M.left.isEmpty()&&!M.left.isRed_()&&!M.left.left.isRed_()&&(M=M.moveRedLeft_()),M=M.copy(null,null,null,M.left.remove(c,v),null);else{if(M.left.isRed_()&&(M=M.rotateRight_()),!M.right.isEmpty()&&!M.right.isRed_()&&!M.right.left.isRed_()&&(M=M.moveRedRight_()),0===v(c,M.key)){if(M.right.isEmpty())return Gn.EMPTY_NODE;j=M.right.min_(),M=M.copy(j.key,j.value,null,null,M.right.removeMin_())}M=M.copy(null,null,null,null,M.right.remove(c,v))}return M.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,v)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class Gn{constructor(u,c=Gn.EMPTY_NODE){this.comparator_=u,this.root_=c}insert(u,c){return new Gn(this.comparator_,this.root_.insert(u,c,this.comparator_).copy(null,null,bi.BLACK,null,null))}remove(u){return new Gn(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,bi.BLACK,null,null))}get(u){let c,v=this.root_;for(;!v.isEmpty();){if(c=this.comparator_(u,v.key),0===c)return v.value;c<0?v=v.left:c>0&&(v=v.right)}return null}getPredecessorKey(u){let c,v=this.root_,M=null;for(;!v.isEmpty();){if(c=this.comparator_(u,v.key),0===c){if(v.left.isEmpty())return M?M.key:null;for(v=v.left;!v.right.isEmpty();)v=v.right;return v.key}c<0?v=v.left:c>0&&(M=v,v=v.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new ro(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,c){return new ro(this.root_,u,this.comparator_,!1,c)}getReverseIteratorFrom(u,c){return new ro(this.root_,u,this.comparator_,!0,c)}getReverseIterator(u){return new ro(this.root_,null,this.comparator_,!0,u)}}function mo(h,u){return vt(h.name,u.name)}function Ks(h,u){return vt(h,u)}Gn.EMPTY_NODE=new class Os{copy(u,c,v,M,j){return this}insert(u,c,v){return new bi(u,c,null)}remove(u,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Bo=function(h){return"number"==typeof h?"number:"+Fn(h):"string:"+h},To=function(h){if(h.isLeafNode()){const u=h.val();(0,B.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,B.r3)(u,".sv"),"Priority must be a string or number.")}else(0,B.hu)(h===io||h.isEmpty(),"priority of unexpected type.");(0,B.hu)(h===io||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let So,Sa,yo,Wi=(()=>{class h{constructor(c,v=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=v,this.lazyHash_=null,(0,B.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),To(this.priorityNode_)}static set __childrenNodeConstructor(c){So=c}static get __childrenNodeConstructor(){return So}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new h(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return Nn(c)?this:".priority"===In(c)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,v){return null}updateImmediateChild(c,v){return".priority"===c?this.updatePriority(v):v.isEmpty()&&".priority"!==c?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,v).updatePriority(this.priorityNode_)}updateChild(c,v){const M=In(c);return null===M?v:v.isEmpty()&&".priority"!==M?this:((0,B.hu)(".priority"!==M||1===er(c),".priority must be the last token in a path"),this.updateImmediateChild(M,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(yr(c),v)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,v){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+Bo(this.priorityNode_.val())+":");const v=typeof this.value_;c+=v+":",c+="number"===v?Fn(this.value_):this.value_,this.lazyHash_=Be(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===h.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof h.__childrenNodeConstructor?-1:((0,B.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const v=typeof c.value_,M=typeof this.value_,j=h.VALUE_TYPE_ORDER.indexOf(v),Y=h.VALUE_TYPE_ORDER.indexOf(M);return(0,B.hu)(j>=0,"Unknown leaf type: "+v),(0,B.hu)(Y>=0,"Unknown leaf type: "+M),j===Y?"object"===M?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:Y-j}withIndex(){return this}isIndexed(){return!0}equals(c){return c===this||!!c.isLeafNode()&&(this.value_===c.value_&&this.priorityNode_.equals(c.priorityNode_))}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const Hr=new class so extends Ps{compare(u,c){const v=u.node.getPriority(),M=c.node.getPriority(),j=v.compareTo(M);return 0===j?vt(u.name,c.name):j}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,c){return!u.getPriority().equals(c.getPriority())}minPost(){return wn.MIN}maxPost(){return new wn(Xe,new Wi("[PRIORITY-POST]",yo))}makePost(u,c){const v=Sa(u);return new wn(c,new Wi("[PRIORITY-POST]",v))}toString(){return".priority"}},_o=Math.log(2);class jo{constructor(u){this.count=parseInt(Math.log(u+1)/_o,10),this.current_=this.count-1;const M=(j=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&M}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const Rs=function(h,u,c,v){h.sort(u);const M=function(Ae,Fe){const Et=Fe-Ae;let wt,Rt;if(0===Et)return null;if(1===Et)return wt=h[Ae],Rt=c?c(wt):wt,new bi(Rt,wt.node,bi.BLACK,null,null);{const En=parseInt(Et/2,10)+Ae,Kn=M(Ae,En),Ii=M(En+1,Fe);return wt=h[En],Rt=c?c(wt):wt,new bi(Rt,wt.node,bi.BLACK,Kn,Ii)}},me=function(Ae){let Fe=null,Et=null,wt=h.length;const Rt=function(Kn,Ii){const wo=wt-Kn,vu=wt;wt-=Kn;const Ws=M(wo+1,vu),mc=h[wo],Ld=c?c(mc):mc;En(new bi(Ld,mc.node,Ii,null,Ws))},En=function(Kn){Fe?(Fe.left=Kn,Fe=Kn):(Et=Kn,Fe=Kn)};for(let Kn=0;Kn<Ae.count;++Kn){const Ii=Ae.nextBitIsOne(),wo=Math.pow(2,Ae.count-(Kn+1));Ii?Rt(wo,bi.BLACK):(Rt(wo,bi.BLACK),Rt(wo,bi.RED))}return Et}(new jo(h.length));return new Gn(v||u,me)};let oo;const vo={};class gs{constructor(u,c){this.indexes_=u,this.indexSet_=c}static get Default(){return(0,B.hu)(vo&&Hr,"ChildrenNode.ts has not been loaded"),oo=oo||new gs({".priority":vo},{".priority":Hr}),oo}get(u){const c=(0,B.DV)(this.indexes_,u);if(!c)throw new Error("No index defined for "+u);return c instanceof Gn?c:null}hasIndex(u){return(0,B.r3)(this.indexSet_,u.toString())}addIndex(u,c){(0,B.hu)(u!==sr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const v=[];let M=!1;const j=c.getIterator(wn.Wrap);let me,Y=j.getNext();for(;Y;)M=M||u.isDefinedOn(Y.node),v.push(Y),Y=j.getNext();me=M?Rs(v,u.getCompare()):vo;const Ae=u.toString(),Fe=Object.assign({},this.indexSet_);Fe[Ae]=u;const Et=Object.assign({},this.indexes_);return Et[Ae]=me,new gs(Et,Fe)}addToIndexes(u,c){const v=(0,B.UI)(this.indexes_,(M,j)=>{const Y=(0,B.DV)(this.indexSet_,j);if((0,B.hu)(Y,"Missing index implementation for "+j),M===vo){if(Y.isDefinedOn(u.node)){const me=[],Ae=c.getIterator(wn.Wrap);let Fe=Ae.getNext();for(;Fe;)Fe.name!==u.name&&me.push(Fe),Fe=Ae.getNext();return me.push(u),Rs(me,Y.getCompare())}return vo}{const me=c.get(u.name);let Ae=M;return me&&(Ae=Ae.remove(new wn(u.name,me))),Ae.insert(u,u.node)}});return new gs(v,this.indexSet_)}removeFromIndexes(u,c){const v=(0,B.UI)(this.indexes_,M=>{if(M===vo)return M;{const j=c.get(u.name);return j?M.remove(new wn(u.name,j)):M}});return new gs(v,this.indexSet_)}}let Ss,kn=(()=>{class h{constructor(c,v,M){this.children_=c,this.priorityNode_=v,this.indexMap_=M,this.lazyHash_=null,this.priorityNode_&&To(this.priorityNode_),this.children_.isEmpty()&&(0,B.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ss||(Ss=new h(new Gn(Ks),null,gs.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ss}updatePriority(c){return this.children_.isEmpty()?this:new h(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const v=this.children_.get(c);return null===v?Ss:v}}getChild(c){const v=In(c);return null===v?this:this.getImmediateChild(v).getChild(yr(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,v){if((0,B.hu)(v,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(v);{const M=new wn(c,v);let j,Y;v.isEmpty()?(j=this.children_.remove(c),Y=this.indexMap_.removeFromIndexes(M,this.children_)):(j=this.children_.insert(c,v),Y=this.indexMap_.addToIndexes(M,this.children_));const me=j.isEmpty()?Ss:this.priorityNode_;return new h(j,me,Y)}}updateChild(c,v){const M=In(c);if(null===M)return v;{(0,B.hu)(".priority"!==In(c)||1===er(c),".priority must be the last token in a path");const j=this.getImmediateChild(M).updateChild(yr(c),v);return this.updateImmediateChild(M,j)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const v={};let M=0,j=0,Y=!0;if(this.forEachChild(Hr,(me,Ae)=>{v[me]=Ae.val(c),M++,Y&&h.INTEGER_REGEXP_.test(me)?j=Math.max(j,Number(me)):Y=!1}),!c&&Y&&j<2*M){const me=[];for(const Ae in v)me[Ae]=v[Ae];return me}return c&&!this.getPriority().isEmpty()&&(v[".priority"]=this.getPriority().val()),v}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+Bo(this.getPriority().val())+":"),this.forEachChild(Hr,(v,M)=>{const j=M.hash();""!==j&&(c+=":"+v+":"+j)}),this.lazyHash_=""===c?"":Be(c)}return this.lazyHash_}getPredecessorChildName(c,v,M){const j=this.resolveIndex_(M);if(j){const Y=j.getPredecessorKey(new wn(c,v));return Y?Y.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const v=this.resolveIndex_(c);if(v){const M=v.minKey();return M&&M.name}return this.children_.minKey()}getFirstChild(c){const v=this.getFirstChildName(c);return v?new wn(v,this.children_.get(v)):null}getLastChildName(c){const v=this.resolveIndex_(c);if(v){const M=v.maxKey();return M&&M.name}return this.children_.maxKey()}getLastChild(c){const v=this.getLastChildName(c);return v?new wn(v,this.children_.get(v)):null}forEachChild(c,v){const M=this.resolveIndex_(c);return M?M.inorderTraversal(j=>v(j.name,j.node)):this.children_.inorderTraversal(v)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,v){const M=this.resolveIndex_(v);if(M)return M.getIteratorFrom(c,j=>j);{const j=this.children_.getIteratorFrom(c.name,wn.Wrap);let Y=j.peek();for(;null!=Y&&v.compare(Y,c)<0;)j.getNext(),Y=j.peek();return j}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,v){const M=this.resolveIndex_(v);if(M)return M.getReverseIteratorFrom(c,j=>j);{const j=this.children_.getReverseIteratorFrom(c.name,wn.Wrap);let Y=j.peek();for(;null!=Y&&v.compare(Y,c)>0;)j.getNext(),Y=j.peek();return j}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===xs?-1:0}withIndex(c){if(c===sr||this.indexMap_.hasIndex(c))return this;{const v=this.indexMap_.addIndex(c,this.children_);return new h(this.children_,this.priorityNode_,v)}}isIndexed(c){return c===sr||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const v=c;if(this.getPriority().equals(v.getPriority())){if(this.children_.count()===v.children_.count()){const M=this.getIterator(Hr),j=v.getIterator(Hr);let Y=M.getNext(),me=j.getNext();for(;Y&&me;){if(Y.name!==me.name||!Y.node.equals(me.node))return!1;Y=M.getNext(),me=j.getNext()}return null===Y&&null===me}return!1}return!1}}resolveIndex_(c){return c===sr?null:this.indexMap_.get(c.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const xs=new class Eo extends kn{constructor(){super(new Gn(Ks),kn.EMPTY_NODE,gs.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return kn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(wn,{MIN:{value:new wn(lt,kn.EMPTY_NODE)},MAX:{value:new wn(Xe,xs)}}),Gi.__EMPTY_NODE=kn.EMPTY_NODE,Wi.__childrenNodeConstructor=kn,function bl(h){io=h}(xs),function as(h){yo=h}(xs);const Ba=!0;function Pr(h,u=null){if(null===h)return kn.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(u=h[".priority"]),(0,B.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new Wi(h,Pr(u));if(h instanceof Array||!Ba){let c=kn.EMPTY_NODE;return Kt(h,(v,M)=>{if((0,B.r3)(h,v)&&"."!==v.substring(0,1)){const j=Pr(M);(j.isLeafNode()||!j.isEmpty())&&(c=c.updateImmediateChild(v,j))}}),c.updatePriority(Pr(u))}{const c=[];let v=!1;if(Kt(h,(Y,me)=>{if("."!==Y.substring(0,1)){const Ae=Pr(me);Ae.isEmpty()||(v=v||!Ae.getPriority().isEmpty(),c.push(new wn(Y,Ae)))}}),0===c.length)return kn.EMPTY_NODE;const j=Rs(c,mo,Y=>Y.name,Ks);if(v){const Y=Rs(c,Hr.getCompare());return new kn(j,Pr(u),new gs({".priority":Y},{".priority":Hr}))}return new kn(j,Pr(u),gs.Default)}}!function Qi(h){Sa=h}(Pr);class Zi extends Ps{constructor(u){super(),this.indexPath_=u,(0,B.hu)(!Nn(u)&&".priority"!==In(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,c){const v=this.extractChild(u.node),M=this.extractChild(c.node),j=v.compareTo(M);return 0===j?vt(u.name,c.name):j}makePost(u,c){const v=Pr(u),M=kn.EMPTY_NODE.updateChild(this.indexPath_,v);return new wn(c,M)}maxPost(){const u=kn.EMPTY_NODE.updateChild(this.indexPath_,xs);return new wn(Xe,u)}toString(){return _i(this.indexPath_,0).join("/")}}const vi=new class Ho extends Ps{compare(u,c){const v=u.node.compareTo(c.node);return 0===v?vt(u.name,c.name):v}isDefinedOn(u){return!0}indexedValueChanged(u,c){return!u.equals(c)}minPost(){return wn.MIN}maxPost(){return wn.MAX}makePost(u,c){const v=Pr(u);return new wn(c,v)}toString(){return".value"}};function ao(h){return{type:"value",snapshotNode:h}}function ls(h,u){return{type:"child_added",snapshotNode:u,childName:h}}function $r(h,u){return{type:"child_removed",snapshotNode:u,childName:h}}function ms(h,u,c){return{type:"child_changed",snapshotNode:u,childName:h,oldSnap:c}}class Ei{constructor(u){this.index_=u}updateChild(u,c,v,M,j,Y){(0,B.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const me=u.getImmediateChild(c);return me.getChild(M).equals(v.getChild(M))&&me.isEmpty()===v.isEmpty()||(null!=Y&&(v.isEmpty()?u.hasChild(c)?Y.trackChildChange($r(c,me)):(0,B.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):me.isEmpty()?Y.trackChildChange(ls(c,v)):Y.trackChildChange(ms(c,v,me))),u.isLeafNode()&&v.isEmpty())?u:u.updateImmediateChild(c,v).withIndex(this.index_)}updateFullNode(u,c,v){return null!=v&&(u.isLeafNode()||u.forEachChild(Hr,(M,j)=>{c.hasChild(M)||v.trackChildChange($r(M,j))}),c.isLeafNode()||c.forEachChild(Hr,(M,j)=>{if(u.hasChild(M)){const Y=u.getImmediateChild(M);Y.equals(j)||v.trackChildChange(ms(M,j,Y))}else v.trackChildChange(ls(M,j))})),c.withIndex(this.index_)}updatePriority(u,c){return u.isEmpty()?kn.EMPTY_NODE:u.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class us{constructor(u){this.indexedFilter_=new Ei(u.getIndex()),this.index_=u.getIndex(),this.startPost_=us.getStartPost_(u),this.endPost_=us.getEndPost_(u),this.startIsInclusive_=!u.startAfterSet_,this.endIsInclusive_=!u.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){const c=this.startIsInclusive_?this.index_.compare(this.getStartPost(),u)<=0:this.index_.compare(this.getStartPost(),u)<0,v=this.endIsInclusive_?this.index_.compare(u,this.getEndPost())<=0:this.index_.compare(u,this.getEndPost())<0;return c&&v}updateChild(u,c,v,M,j,Y){return this.matches(new wn(c,v))||(v=kn.EMPTY_NODE),this.indexedFilter_.updateChild(u,c,v,M,j,Y)}updateFullNode(u,c,v){c.isLeafNode()&&(c=kn.EMPTY_NODE);let M=c.withIndex(this.index_);M=M.updatePriority(kn.EMPTY_NODE);const j=this;return c.forEachChild(Hr,(Y,me)=>{j.matches(new wn(Y,me))||(M=M.updateImmediateChild(Y,kn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,M,v)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const c=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),c)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const c=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),c)}return u.getIndex().maxPost()}}class Go{constructor(u){this.withinDirectionalStart=c=>this.reverse_?this.withinEndPost(c):this.withinStartPost(c),this.withinDirectionalEnd=c=>this.reverse_?this.withinStartPost(c):this.withinEndPost(c),this.withinStartPost=c=>{const v=this.index_.compare(this.rangedFilter_.getStartPost(),c);return this.startIsInclusive_?v<=0:v<0},this.withinEndPost=c=>{const v=this.index_.compare(c,this.rangedFilter_.getEndPost());return this.endIsInclusive_?v<=0:v<0},this.rangedFilter_=new us(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft(),this.startIsInclusive_=!u.startAfterSet_,this.endIsInclusive_=!u.endBeforeSet_}updateChild(u,c,v,M,j,Y){return this.rangedFilter_.matches(new wn(c,v))||(v=kn.EMPTY_NODE),u.getImmediateChild(c).equals(v)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,c,v,M,j,Y):this.fullLimitUpdateChild_(u,c,v,j,Y)}updateFullNode(u,c,v){let M;if(c.isLeafNode()||c.isEmpty())M=kn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let j;M=kn.EMPTY_NODE.withIndex(this.index_),j=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let Y=0;for(;j.hasNext()&&Y<this.limit_;){const me=j.getNext();if(this.withinDirectionalStart(me)){if(!this.withinDirectionalEnd(me))break;M=M.updateImmediateChild(me.name,me.node),Y++}}}else{let j;M=c.withIndex(this.index_),M=M.updatePriority(kn.EMPTY_NODE),j=this.reverse_?M.getReverseIterator(this.index_):M.getIterator(this.index_);let Y=0;for(;j.hasNext();){const me=j.getNext();Y<this.limit_&&this.withinDirectionalStart(me)&&this.withinDirectionalEnd(me)?Y++:M=M.updateImmediateChild(me.name,kn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,M,v)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,c,v,M,j){let Y;if(this.reverse_){const wt=this.index_.getCompare();Y=(Rt,En)=>wt(En,Rt)}else Y=this.index_.getCompare();const me=u;(0,B.hu)(me.numChildren()===this.limit_,"");const Ae=new wn(c,v),Fe=this.reverse_?me.getFirstChild(this.index_):me.getLastChild(this.index_),Et=this.rangedFilter_.matches(Ae);if(me.hasChild(c)){const wt=me.getImmediateChild(c);let Rt=M.getChildAfterChild(this.index_,Fe,this.reverse_);for(;null!=Rt&&(Rt.name===c||me.hasChild(Rt.name));)Rt=M.getChildAfterChild(this.index_,Rt,this.reverse_);const En=null==Rt?1:Y(Rt,Ae);if(Et&&!v.isEmpty()&&En>=0)return j?.trackChildChange(ms(c,v,wt)),me.updateImmediateChild(c,v);{j?.trackChildChange($r(c,wt));const Ii=me.updateImmediateChild(c,kn.EMPTY_NODE);return null!=Rt&&this.rangedFilter_.matches(Rt)?(j?.trackChildChange(ls(Rt.name,Rt.node)),Ii.updateImmediateChild(Rt.name,Rt.node)):Ii}}return v.isEmpty()?u:Et&&Y(Fe,Ae)>=0?(null!=j&&(j.trackChildChange($r(Fe.name,Fe.node)),j.trackChildChange(ls(c,v))),me.updateImmediateChild(c,v).updateImmediateChild(Fe.name,kn.EMPTY_NODE)):u}}class Tr{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Hr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:lt}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xe}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,B.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Hr}copy(){const u=new Tr;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.startAfterSet_=this.startAfterSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.endBeforeSet_=this.endBeforeSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function Wo(h){const u={};if(h.isDefault())return u;let c;if(h.index_===Hr?c="$priority":h.index_===vi?c="$value":h.index_===sr?c="$key":((0,B.hu)(h.index_ instanceof Zi,"Unrecognized index type!"),c=h.index_.toString()),u.orderBy=(0,B.Wl)(c),h.startSet_){const v=h.startAfterSet_?"startAfter":"startAt";u[v]=(0,B.Wl)(h.indexStartValue_),h.startNameSet_&&(u[v]+=","+(0,B.Wl)(h.indexStartName_))}if(h.endSet_){const v=h.endBeforeSet_?"endBefore":"endAt";u[v]=(0,B.Wl)(h.indexEndValue_),h.endNameSet_&&(u[v]+=","+(0,B.Wl)(h.indexEndName_))}return h.limitSet_&&(h.isViewFromLeft()?u.limitToFirst=h.limit_:u.limitToLast=h.limit_),u}function G(h){const u={};if(h.startSet_&&(u.sp=h.indexStartValue_,h.startNameSet_&&(u.sn=h.indexStartName_),u.sin=!h.startAfterSet_),h.endSet_&&(u.ep=h.indexEndValue_,h.endNameSet_&&(u.en=h.indexEndName_),u.ein=!h.endBeforeSet_),h.limitSet_){u.l=h.limit_;let c=h.viewFrom_;""===c&&(c=h.isViewFromLeft()?"l":"r"),u.vf=c}return h.index_!==Hr&&(u.i=h.index_.toString()),u}class H extends Ui{constructor(u,c,v,M){super(),this.repoInfo_=u,this.onDataUpdate_=c,this.authTokenProvider_=v,this.appCheckTokenProvider_=M,this.log_=Ct("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,c){return void 0!==c?"tag$"+c:((0,B.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,c,v,M){const j=u._path.toString();this.log_("Listen called for "+j+" "+u._queryIdentifier);const Y=H.getListenId_(u,v),me={};this.listens_[Y]=me;const Ae=Wo(u._queryParams);this.restRequest_(j+".json",Ae,(Fe,Et)=>{let wt=Et;if(404===Fe&&(wt=null,Fe=null),null===Fe&&this.onDataUpdate_(j,wt,!1,v),(0,B.DV)(this.listens_,Y)===me){let Rt;Rt=Fe?401===Fe?"permission_denied":"rest_error:"+Fe:"ok",M(Rt,null)}})}unlisten(u,c){const v=H.getListenId_(u,c);delete this.listens_[v]}get(u){const c=Wo(u._queryParams),v=u._path.toString(),M=new B.BH;return this.restRequest_(v+".json",c,(j,Y)=>{let me=Y;404===j&&(me=null,j=null),null===j?(this.onDataUpdate_(v,me,!1,null),M.resolve(me)):M.reject(new Error(me))}),M.promise}refreshAuthToken(u){}restRequest_(u,c={},v){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([M,j])=>{M&&M.accessToken&&(c.auth=M.accessToken),j&&j.token&&(c.ac=j.token);const Y=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,B.xO)(c);this.log_("Sending REST request for "+Y);const me=new XMLHttpRequest;me.onreadystatechange=()=>{if(v&&4===me.readyState){this.log_("REST Response for "+Y+" received. status:",me.status,"response:",me.responseText);let Ae=null;if(me.status>=200&&me.status<300){try{Ae=(0,B.cI)(me.responseText)}catch{Pt("Failed to parse JSON response for "+Y+": "+me.responseText)}v(null,Ae)}else 401!==me.status&&404!==me.status&&Pt("Got unsuccessful REST response for "+Y+" Status: "+me.status),v(me.status);v=null}},me.open("GET",Y,!0),me.send()})}}class k{constructor(){this.rootNode_=kn.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,c){this.rootNode_=this.rootNode_.updateChild(u,c)}}function ce(){return{value:null,children:new Map}}function et(h,u,c){if(Nn(u))h.value=c,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(u,c);else{const v=In(u);h.children.has(v)||h.children.set(v,ce()),et(h.children.get(v),u=yr(u),c)}}function ln(h,u){if(Nn(u))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const c=h.value;return h.value=null,c.forEachChild(Hr,(v,M)=>{et(h,new mn(v),M)}),ln(h,u)}}if(h.children.size>0){const c=In(u);return u=yr(u),h.children.has(c)&&ln(h.children.get(c),u)&&h.children.delete(c),0===h.children.size}return!0}function Gr(h,u,c){null!==h.value?c(u,h.value):function yt(h,u){h.children.forEach((c,v)=>{u(v,c)})}(h,(v,M)=>{Gr(M,new mn(u.toString()+"/"+v),c)})}class cr{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),c=Object.assign({},u);return this.last_&&Kt(this.last_,(v,M)=>{c[v]=c[v]-M}),this.last_=u,c}}class Ha{constructor(u,c){this.server_=c,this.statsToReport_={},this.statsListener_=new cr(u);const v=1e4+2e4*Math.random();_t(this.reportStats_.bind(this),Math.floor(v))}reportStats_(){const u=this.statsListener_.get(),c={};let v=!1;Kt(u,(M,j)=>{j>0&&(0,B.r3)(this.statsToReport_,M)&&(c[M]=j,v=!0)}),v&&this.server_.reportStats(c),_t(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ri=(()=>{return(h=Ri||(Ri={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Ri;var h})();function Ko(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class Yo{constructor(u,c,v){this.path=u,this.affectedTree=c,this.revert=v,this.type=Ri.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(Nn(this.path)){if(null!=this.affectedTree.value)return(0,B.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new mn(u));return new Yo(An(),c,this.revert)}}return(0,B.hu)(In(this.path)===u,"operationForChild called for unrelated child."),new Yo(yr(this.path),this.affectedTree,this.revert)}}class Vi{constructor(u,c){this.source=u,this.path=c,this.type=Ri.LISTEN_COMPLETE}operationForChild(u){return Nn(this.path)?new Vi(this.source,An()):new Vi(this.source,yr(this.path))}}class Ki{constructor(u,c,v){this.source=u,this.path=c,this.snap=v,this.type=Ri.OVERWRITE}operationForChild(u){return Nn(this.path)?new Ki(this.source,An(),this.snap.getImmediateChild(u)):new Ki(this.source,yr(this.path),this.snap)}}class xi{constructor(u,c,v){this.source=u,this.path=c,this.children=v,this.type=Ri.MERGE}operationForChild(u){if(Nn(this.path)){const c=this.children.subtree(new mn(u));return c.isEmpty()?null:c.value?new Ki(this.source,An(),c.value):new xi(this.source,An(),c)}return(0,B.hu)(In(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new xi(this.source,yr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ai{constructor(u,c,v){this.node_=u,this.fullyInitialized_=c,this.filtered_=v}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(Nn(u))return this.isFullyInitialized()&&!this.filtered_;const c=In(u);return this.isCompleteForChild(c)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class _a{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function ys(h,u,c,v,M,j){const Y=v.filter(me=>me.type===c);Y.sort((me,Ae)=>function Zo(h,u,c){if(null==u.childName||null==c.childName)throw(0,B.g5)("Should only compare child_ events.");const v=new wn(u.childName,u.snapshotNode),M=new wn(c.childName,c.snapshotNode);return h.index_.compare(v,M)}(h,me,Ae)),Y.forEach(me=>{const Ae=function ba(h,u,c){return"value"===u.type||"child_removed"===u.type||(u.prevName=c.getPredecessorChildName(u.childName,u.snapshotNode,h.index_)),u}(h,me,j);M.forEach(Fe=>{Fe.respondsTo(me.type)&&u.push(Fe.createEvent(Ae,h.query_))})})}function Bi(h,u){return{eventCache:h,serverCache:u}}function Do(h,u,c,v){return Bi(new ai(u,c,v),h.serverCache)}function lo(h,u,c,v){return Bi(h.eventCache,new ai(u,c,v))}function Xi(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function qo(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let qa;class li{constructor(u,c=(()=>(qa||(qa=new Gn(At)),qa))()){this.value=u,this.children=c}static fromObject(u){let c=new li(null);return Kt(u,(v,M)=>{c=c.set(new mn(v),M)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,c){if(null!=this.value&&c(this.value))return{path:An(),value:this.value};if(Nn(u))return null;{const v=In(u),M=this.children.get(v);if(null!==M){const j=M.findRootMostMatchingPathAndValue(yr(u),c);return null!=j?{path:Er(new mn(v),j.path),value:j.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(Nn(u))return this;{const c=In(u),v=this.children.get(c);return null!==v?v.subtree(yr(u)):new li(null)}}set(u,c){if(Nn(u))return new li(c,this.children);{const v=In(u),j=(this.children.get(v)||new li(null)).set(yr(u),c),Y=this.children.insert(v,j);return new li(this.value,Y)}}remove(u){if(Nn(u))return this.children.isEmpty()?new li(null):new li(null,this.children);{const c=In(u),v=this.children.get(c);if(v){const M=v.remove(yr(u));let j;return j=M.isEmpty()?this.children.remove(c):this.children.insert(c,M),null===this.value&&j.isEmpty()?new li(null):new li(this.value,j)}return this}}get(u){if(Nn(u))return this.value;{const c=In(u),v=this.children.get(c);return v?v.get(yr(u)):null}}setTree(u,c){if(Nn(u))return c;{const v=In(u),j=(this.children.get(v)||new li(null)).setTree(yr(u),c);let Y;return Y=j.isEmpty()?this.children.remove(v):this.children.insert(v,j),new li(this.value,Y)}}fold(u){return this.fold_(An(),u)}fold_(u,c){const v={};return this.children.inorderTraversal((M,j)=>{v[M]=j.fold_(Er(u,M),c)}),c(u,this.value,v)}findOnPath(u,c){return this.findOnPath_(u,An(),c)}findOnPath_(u,c,v){const M=!!this.value&&v(c,this.value);if(M)return M;if(Nn(u))return null;{const j=In(u),Y=this.children.get(j);return Y?Y.findOnPath_(yr(u),Er(c,j),v):null}}foreachOnPath(u,c){return this.foreachOnPath_(u,An(),c)}foreachOnPath_(u,c,v){if(Nn(u))return this;{this.value&&v(c,this.value);const M=In(u),j=this.children.get(M);return j?j.foreachOnPath_(yr(u),Er(c,M),v):new li(null)}}foreach(u){this.foreach_(An(),u)}foreach_(u,c){this.children.inorderTraversal((v,M)=>{M.foreach_(Er(u,v),c)}),this.value&&c(u,this.value)}foreachChild(u){this.children.inorderTraversal((c,v)=>{v.value&&u(c,v.value)})}}class js{constructor(u){this.writeTree_=u}static empty(){return new js(new li(null))}}function Xo(h,u,c){if(Nn(u))return new js(new li(c));{const v=h.writeTree_.findRootMostValueAndPath(u);if(null!=v){const M=v.path;let j=v.value;const Y=Yr(M,u);return j=j.updateChild(Y,c),new js(h.writeTree_.set(M,j))}{const M=new li(c),j=h.writeTree_.setTree(u,M);return new js(j)}}}function $a(h,u,c){let v=h;return Kt(c,(M,j)=>{v=Xo(v,Er(u,M),j)}),v}function Ga(h,u){if(Nn(u))return js.empty();{const c=h.writeTree_.setTree(u,new li(null));return new js(c)}}function Xa(h,u){return null!=Jo(h,u)}function Jo(h,u){const c=h.writeTree_.findRootMostValueAndPath(u);return null!=c?h.writeTree_.get(c.path).getChild(Yr(c.path,u)):null}function Ji(h){const u=[],c=h.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(Hr,(v,M)=>{u.push(new wn(v,M))}):h.writeTree_.children.inorderTraversal((v,M)=>{null!=M.value&&u.push(new wn(v,M.value))}),u}function Qs(h,u){if(Nn(u))return h;{const c=Jo(h,u);return new js(null!=c?new li(c):h.writeTree_.subtree(u))}}function Di(h){return h.writeTree_.isEmpty()}function _s(h,u){return Qr(An(),h.writeTree_,u)}function Qr(h,u,c){if(null!=u.value)return c.updateChild(h,u.value);{let v=null;return u.children.inorderTraversal((M,j)=>{".priority"===M?((0,B.hu)(null!==j.value,"Priority writes must always be leaf nodes"),v=j.value):c=Qr(Er(h,M),j,c)}),!c.getChild(h).isEmpty()&&null!==v&&(c=c.updateChild(Er(h,".priority"),v)),c}}function Ut(h,u){return kr(u,h)}function Tn(h,u){if(h.snap)return at(h.path,u);for(const c in h.children)if(h.children.hasOwnProperty(c)&&at(Er(h.path,c),u))return!0;return!1}function en(h){return h.visible}function ft(h,u,c){let v=js.empty();for(let M=0;M<h.length;++M){const j=h[M];if(u(j)){const Y=j.path;let me;if(j.snap)at(c,Y)?(me=Yr(c,Y),v=Xo(v,me,j.snap)):at(Y,c)&&(me=Yr(Y,c),v=Xo(v,An(),j.snap.getChild(me)));else{if(!j.children)throw(0,B.g5)("WriteRecord should have .snap or .children");if(at(c,Y))me=Yr(c,Y),v=$a(v,me,j.children);else if(at(Y,c))if(me=Yr(Y,c),Nn(me))v=$a(v,An(),j.children);else{const Ae=(0,B.DV)(j.children,In(me));if(Ae){const Fe=Ae.getChild(yr(me));v=Xo(v,An(),Fe)}}}}}return v}function P(h,u,c,v,M){if(v||M){const j=Qs(h.visibleWrites,u);return!M&&Di(j)?c:M||null!=c||Xa(j,An())?_s(ft(h.allWrites,function(Fe){return(Fe.visible||M)&&(!v||!~v.indexOf(Fe.writeId))&&(at(Fe.path,u)||at(u,Fe.path))},u),c||kn.EMPTY_NODE):null}{const j=Jo(h.visibleWrites,u);if(null!=j)return j;{const Y=Qs(h.visibleWrites,u);return Di(Y)?c:null!=c||Xa(Y,An())?_s(Y,c||kn.EMPTY_NODE):null}}}function nn(h,u,c,v){return P(h.writeTree,h.treePath,u,c,v)}function Xr(h,u){return function Q(h,u,c){let v=kn.EMPTY_NODE;const M=Jo(h.visibleWrites,u);if(M)return M.isLeafNode()||M.forEachChild(Hr,(j,Y)=>{v=v.updateImmediateChild(j,Y)}),v;if(c){const j=Qs(h.visibleWrites,u);return c.forEachChild(Hr,(Y,me)=>{const Ae=_s(Qs(j,new mn(Y)),me);v=v.updateImmediateChild(Y,Ae)}),Ji(j).forEach(Y=>{v=v.updateImmediateChild(Y.name,Y.node)}),v}return Ji(Qs(h.visibleWrites,u)).forEach(Y=>{v=v.updateImmediateChild(Y.name,Y.node)}),v}(h.writeTree,h.treePath,u)}function Nr(h,u,c,v){return function V(h,u,c,v,M){(0,B.hu)(v||M,"Either existingEventSnap or existingServerSnap must exist");const j=Er(u,c);if(Xa(h.visibleWrites,j))return null;{const Y=Qs(h.visibleWrites,j);return Di(Y)?M.getChild(c):_s(Y,M.getChild(c))}}(h.writeTree,h.treePath,u,c,v)}function zn(h,u){return function we(h,u){return Jo(h.visibleWrites,u)}(h.writeTree,Er(h.treePath,u))}function Wn(h,u,c){return function ue(h,u,c,v){const M=Er(u,c),j=Jo(h.visibleWrites,M);return null!=j?j:v.isCompleteForChild(c)?_s(Qs(h.visibleWrites,M),v.getNode().getImmediateChild(c)):null}(h.writeTree,h.treePath,u,c)}function on(h,u){return kr(Er(h.treePath,u),h.writeTree)}function kr(h,u){return{treePath:h,writeTree:u}}class uo{constructor(){this.changeMap=new Map}trackChildChange(u){const c=u.type,v=u.childName;(0,B.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,B.hu)(".priority"!==v,"Only non-priority child changes can be tracked.");const M=this.changeMap.get(v);if(M){const j=M.type;if("child_added"===c&&"child_removed"===j)this.changeMap.set(v,ms(v,u.snapshotNode,M.snapshotNode));else if("child_removed"===c&&"child_added"===j)this.changeMap.delete(v);else if("child_removed"===c&&"child_changed"===j)this.changeMap.set(v,$r(v,M.oldSnap));else if("child_changed"===c&&"child_added"===j)this.changeMap.set(v,ls(v,u.snapshotNode));else{if("child_changed"!==c||"child_changed"!==j)throw(0,B.g5)("Illegal combination of changes: "+u+" occurred after "+M);this.changeMap.set(v,ms(v,u.snapshotNode,M.oldSnap))}}else this.changeMap.set(v,u)}getChanges(){return Array.from(this.changeMap.values())}}const vn=new class mr{getCompleteChild(u){return null}getChildAfterChild(u,c,v){return null}};class es{constructor(u,c,v=null){this.writes_=u,this.viewCache_=c,this.optCompleteServerCache_=v}getCompleteChild(u){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(u))return c.getNode().getImmediateChild(u);{const v=null!=this.optCompleteServerCache_?new ai(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Wn(this.writes_,u,v)}}getChildAfterChild(u,c,v){const M=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:qo(this.viewCache_),j=function gr(h,u,c,v,M,j){return function pt(h,u,c,v,M,j,Y){let me;const Ae=Qs(h.visibleWrites,u),Fe=Jo(Ae,An());if(null!=Fe)me=Fe;else{if(null==c)return[];me=_s(Ae,c)}if(me=me.withIndex(Y),me.isEmpty()||me.isLeafNode())return[];{const Et=[],wt=Y.getCompare(),Rt=j?me.getReverseIteratorFrom(v,Y):me.getIteratorFrom(v,Y);let En=Rt.getNext();for(;En&&Et.length<M;)0!==wt(En,v)&&Et.push(En),En=Rt.getNext();return Et}}(h.writeTree,h.treePath,u,c,v,M,j)}(this.writes_,M,c,1,v,u);return 0===j.length?null:j[0]}}function co(h,u,c,v,M,j){const Y=u.eventCache;if(null!=zn(v,c))return u;{let me,Ae;if(Nn(c))if((0,B.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const Fe=qo(u),wt=Xr(v,Fe instanceof kn?Fe:kn.EMPTY_NODE);me=h.filter.updateFullNode(u.eventCache.getNode(),wt,j)}else{const Fe=nn(v,qo(u));me=h.filter.updateFullNode(u.eventCache.getNode(),Fe,j)}else{const Fe=In(c);if(".priority"===Fe){(0,B.hu)(1===er(c),"Can't have a priority with additional path components");const Et=Y.getNode();Ae=u.serverCache.getNode();const wt=Nr(v,c,Et,Ae);me=null!=wt?h.filter.updatePriority(Et,wt):Y.getNode()}else{const Et=yr(c);let wt;if(Y.isCompleteForChild(Fe)){Ae=u.serverCache.getNode();const Rt=Nr(v,c,Y.getNode(),Ae);wt=null!=Rt?Y.getNode().getImmediateChild(Fe).updateChild(Et,Rt):Y.getNode().getImmediateChild(Fe)}else wt=Wn(v,Fe,u.serverCache);me=null!=wt?h.filter.updateChild(Y.getNode(),Fe,wt,Et,M,j):Y.getNode()}}return Do(u,me,Y.isFullyInitialized()||Nn(c),h.filter.filtersNodes())}}function Aa(h,u,c,v,M,j,Y,me){const Ae=u.serverCache;let Fe;const Et=Y?h.filter:h.filter.getIndexedFilter();if(Nn(c))Fe=Et.updateFullNode(Ae.getNode(),v,null);else if(Et.filtersNodes()&&!Ae.isFiltered()){const En=Ae.getNode().updateChild(c,v);Fe=Et.updateFullNode(Ae.getNode(),En,null)}else{const En=In(c);if(!Ae.isCompleteForPath(c)&&er(c)>1)return u;const Kn=yr(c),wo=Ae.getNode().getImmediateChild(En).updateChild(Kn,v);Fe=".priority"===En?Et.updatePriority(Ae.getNode(),wo):Et.updateChild(Ae.getNode(),En,wo,Kn,vn,null)}const wt=lo(u,Fe,Ae.isFullyInitialized()||Nn(c),Et.filtersNodes());return co(h,wt,c,M,new es(M,wt,j),me)}function na(h,u,c,v,M,j,Y){const me=u.eventCache;let Ae,Fe;const Et=new es(M,u,j);if(Nn(c))Fe=h.filter.updateFullNode(u.eventCache.getNode(),v,Y),Ae=Do(u,Fe,!0,h.filter.filtersNodes());else{const wt=In(c);if(".priority"===wt)Fe=h.filter.updatePriority(u.eventCache.getNode(),v),Ae=Do(u,Fe,me.isFullyInitialized(),me.isFiltered());else{const Rt=yr(c),En=me.getNode().getImmediateChild(wt);let Kn;if(Nn(Rt))Kn=v;else{const Ii=Et.getCompleteChild(wt);Kn=null!=Ii?".priority"===Ar(Rt)&&Ii.getChild(xn(Rt)).isEmpty()?Ii:Ii.updateChild(Rt,v):kn.EMPTY_NODE}Ae=En.equals(Kn)?u:Do(u,h.filter.updateChild(me.getNode(),wt,Kn,Rt,Et,Y),me.isFullyInitialized(),h.filter.filtersNodes())}}return Ae}function va(h,u){return h.eventCache.isCompleteForChild(u)}function ho(h,u,c){return c.foreach((v,M)=>{u=u.updateChild(v,M)}),u}function ra(h,u,c,v,M,j,Y,me){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let Fe,Ae=u;Fe=Nn(c)?v:new li(null).setTree(c,v);const Et=u.serverCache.getNode();return Fe.children.inorderTraversal((wt,Rt)=>{if(Et.hasChild(wt)){const Kn=ho(0,u.serverCache.getNode().getImmediateChild(wt),Rt);Ae=Aa(h,Ae,new mn(wt),Kn,M,j,Y,me)}}),Fe.children.inorderTraversal((wt,Rt)=>{const En=!u.serverCache.isCompleteForChild(wt)&&null===Rt.value;if(!Et.hasChild(wt)&&!En){const Ii=ho(0,u.serverCache.getNode().getImmediateChild(wt),Rt);Ae=Aa(h,Ae,new mn(wt),Ii,M,j,Y,me)}}),Ae}class Ol{constructor(u,c){this.query_=u,this.eventRegistrations_=[];const v=this.query_._queryParams,M=new Ei(v.getIndex()),j=function qi(h){return h.loadsAllData()?new Ei(h.getIndex()):h.hasLimit()?new Go(h):new us(h)}(v);this.processor_=function jn(h){return{filter:h}}(j);const Y=c.serverCache,me=c.eventCache,Ae=M.updateFullNode(kn.EMPTY_NODE,Y.getNode(),null),Fe=j.updateFullNode(kn.EMPTY_NODE,me.getNode(),null),Et=new ai(Ae,Y.isFullyInitialized(),M.filtersNodes()),wt=new ai(Fe,me.isFullyInitialized(),j.filtersNodes());this.viewCache_=Bi(wt,Et),this.eventGenerator_=new _a(this.query_)}get query(){return this.query_}}function Po(h,u){const c=qo(h.viewCache_);return c&&(h.query._queryParams.loadsAllData()||!Nn(u)&&!c.getImmediateChild(In(u)).isEmpty())?c.getChild(u):null}function Ja(h){return 0===h.eventRegistrations_.length}function Pa(h,u,c){const v=[];if(c){(0,B.hu)(null==u,"A cancel should cancel all event registrations.");const M=h.query._path;h.eventRegistrations_.forEach(j=>{const Y=j.createCancelEvent(c,M);Y&&v.push(Y)})}if(u){let M=[];for(let j=0;j<h.eventRegistrations_.length;++j){const Y=h.eventRegistrations_[j];if(Y.matches(u)){if(u.hasAnyCallback()){M=M.concat(h.eventRegistrations_.slice(j+1));break}}else M.push(Y)}h.eventRegistrations_=M}else h.eventRegistrations_=[];return v}function bs(h,u,c,v){u.type===Ri.MERGE&&null!==u.source.queryId&&((0,B.hu)(qo(h.viewCache_),"We should always have a full cache before handling merges"),(0,B.hu)(Xi(h.viewCache_),"Missing event cache, even though we have a server cache"));const M=h.viewCache_,j=function Lr(h,u,c,v,M){const j=new uo;let Y,me;if(c.type===Ri.OVERWRITE){const Fe=c;Fe.source.fromUser?Y=na(h,u,Fe.path,Fe.snap,v,M,j):((0,B.hu)(Fe.source.fromServer,"Unknown source."),me=Fe.source.tagged||u.serverCache.isFiltered()&&!Nn(Fe.path),Y=Aa(h,u,Fe.path,Fe.snap,v,M,me,j))}else if(c.type===Ri.MERGE){const Fe=c;Fe.source.fromUser?Y=function vs(h,u,c,v,M,j,Y){let me=u;return v.foreach((Ae,Fe)=>{const Et=Er(c,Ae);va(u,In(Et))&&(me=na(h,me,Et,Fe,M,j,Y))}),v.foreach((Ae,Fe)=>{const Et=Er(c,Ae);va(u,In(Et))||(me=na(h,me,Et,Fe,M,j,Y))}),me}(h,u,Fe.path,Fe.children,v,M,j):((0,B.hu)(Fe.source.fromServer,"Unknown source."),me=Fe.source.tagged||u.serverCache.isFiltered(),Y=ra(h,u,Fe.path,Fe.children,v,M,me,j))}else if(c.type===Ri.ACK_USER_WRITE){const Fe=c;Y=Fe.revert?function Hs(h,u,c,v,M,j){let Y;if(null!=zn(v,c))return u;{const me=new es(v,u,M),Ae=u.eventCache.getNode();let Fe;if(Nn(c)||".priority"===In(c)){let Et;if(u.serverCache.isFullyInitialized())Et=nn(v,qo(u));else{const wt=u.serverCache.getNode();(0,B.hu)(wt instanceof kn,"serverChildren would be complete if leaf node"),Et=Xr(v,wt)}Fe=h.filter.updateFullNode(Ae,Et,j)}else{const Et=In(c);let wt=Wn(v,Et,u.serverCache);null==wt&&u.serverCache.isCompleteForChild(Et)&&(wt=Ae.getImmediateChild(Et)),Fe=null!=wt?h.filter.updateChild(Ae,Et,wt,yr(c),me,j):u.eventCache.getNode().hasChild(Et)?h.filter.updateChild(Ae,Et,kn.EMPTY_NODE,yr(c),me,j):Ae,Fe.isEmpty()&&u.serverCache.isFullyInitialized()&&(Y=nn(v,qo(u)),Y.isLeafNode()&&(Fe=h.filter.updateFullNode(Fe,Y,j)))}return Y=u.serverCache.isFullyInitialized()||null!=zn(v,An()),Do(u,Fe,Y,h.filter.filtersNodes())}}(h,u,Fe.path,v,M,j):function Ma(h,u,c,v,M,j,Y){if(null!=zn(M,c))return u;const me=u.serverCache.isFiltered(),Ae=u.serverCache;if(null!=v.value){if(Nn(c)&&Ae.isFullyInitialized()||Ae.isCompleteForPath(c))return Aa(h,u,c,Ae.getNode().getChild(c),M,j,me,Y);if(Nn(c)){let Fe=new li(null);return Ae.getNode().forEachChild(sr,(Et,wt)=>{Fe=Fe.set(new mn(Et),wt)}),ra(h,u,c,Fe,M,j,me,Y)}return u}{let Fe=new li(null);return v.foreach((Et,wt)=>{const Rt=Er(c,Et);Ae.isCompleteForPath(Rt)&&(Fe=Fe.set(Et,Ae.getNode().getChild(Rt)))}),ra(h,u,c,Fe,M,j,me,Y)}}(h,u,Fe.path,Fe.affectedTree,v,M,j)}else{if(c.type!==Ri.LISTEN_COMPLETE)throw(0,B.g5)("Unknown operation type: "+c.type);Y=function ul(h,u,c,v,M){const j=u.serverCache;return co(h,lo(u,j.getNode(),j.isFullyInitialized()||Nn(c),j.isFiltered()),c,v,vn,M)}(h,u,c.path,v,j)}const Ae=j.getChanges();return function Yt(h,u,c){const v=u.eventCache;if(v.isFullyInitialized()){const M=v.getNode().isLeafNode()||v.getNode().isEmpty(),j=Xi(h);(c.length>0||!h.eventCache.isFullyInitialized()||M&&!v.getNode().equals(j)||!v.getNode().getPriority().equals(j.getPriority()))&&c.push(ao(Xi(u)))}}(u,Y,Ae),{viewCache:Y,changes:Ae}}(h.processor_,M,u,c,v);return function ta(h,u){(0,B.hu)(u.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,B.hu)(u.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,j.viewCache),(0,B.hu)(j.viewCache.serverCache.isFullyInitialized()||!M.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=j.viewCache,ts(h,j.changes,j.viewCache.eventCache.getNode(),null)}function ts(h,u,c,v){return function Qo(h,u,c,v){const M=[],j=[];return u.forEach(Y=>{"child_changed"===Y.type&&h.index_.indexedValueChanged(Y.oldSnap,Y.snapshotNode)&&j.push(function $o(h,u){return{type:"child_moved",snapshotNode:u,childName:h}}(Y.childName,Y.snapshotNode))}),ys(h,M,"child_removed",u,v,c),ys(h,M,"child_added",u,v,c),ys(h,M,"child_moved",j,v,c),ys(h,M,"child_changed",u,v,c),ys(h,M,"value",u,v,c),M}(h.eventGenerator_,u,c,v?[v]:h.eventRegistrations_)}let Es,Ea;class cl{constructor(){this.views=new Map}}function dl(h,u,c,v){const M=u.source.queryId;if(null!==M){const j=h.views.get(M);return(0,B.hu)(null!=j,"SyncTree gave us an op for an invalid query."),bs(j,u,c,v)}{let j=[];for(const Y of h.views.values())j=j.concat(bs(Y,u,c,v));return j}}function Wa(h,u,c,v,M){const Y=h.views.get(u._queryIdentifier);if(!Y){let me=nn(c,M?v:null),Ae=!1;me?Ae=!0:v instanceof kn?(me=Xr(c,v),Ae=!1):(me=kn.EMPTY_NODE,Ae=!1);const Fe=Bi(new ai(me,Ae,!1),new ai(v,M,!1));return new Ol(u,Fe)}return Y}function Ro(h){const u=[];for(const c of h.views.values())c.query._queryParams.loadsAllData()||u.push(c);return u}function Zs(h,u){let c=null;for(const v of h.views.values())c=c||Po(v,u);return c}function qs(h,u){return u._queryParams.loadsAllData()?Oa(h):h.views.get(u._queryIdentifier)}function ia(h,u){return null!=qs(h,u)}function Co(h){return null!=Oa(h)}function Oa(h){for(const u of h.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let Jr=1;class Da{constructor(u){this.listenProvider_=u,this.syncPointTree_=new li(null),this.pendingWriteTree_=function Dt(){return{visibleWrites:js.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ui(h,u,c,v,M){return function Ai(h,u,c,v,M){(0,B.hu)(v>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===M&&(M=!0),h.allWrites.push({path:u,snap:c,writeId:v,visible:M}),M&&(h.visibleWrites=Xo(h.visibleWrites,u,c)),h.lastWriteId=v}(h.pendingWriteTree_,u,c,v,M),M?F(h,new Ki({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,c)):[]}function xo(h,u,c=!1){const v=function Pl(h,u){for(let c=0;c<h.allWrites.length;c++){const v=h.allWrites[c];if(v.writeId===u)return v}return null}(h.pendingWriteTree_,u);if(function yn(h,u){const c=h.allWrites.findIndex(me=>me.writeId===u);(0,B.hu)(c>=0,"removeWrite called with nonexistent writeId.");const v=h.allWrites[c];h.allWrites.splice(c,1);let M=v.visible,j=!1,Y=h.allWrites.length-1;for(;M&&Y>=0;){const me=h.allWrites[Y];me.visible&&(Y>=c&&Tn(me,v.path)?M=!1:at(v.path,me.path)&&(j=!0)),Y--}return!!M&&(j?(function ll(h){h.visibleWrites=ft(h.allWrites,en,An()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(v.snap?h.visibleWrites=Ga(h.visibleWrites,v.path):Kt(v.children,Ae=>{h.visibleWrites=Ga(h.visibleWrites,Er(v.path,Ae))}),!0))}(h.pendingWriteTree_,u)){let j=new li(null);return null!=v.snap?j=j.set(An(),!0):Kt(v.children,Y=>{j=j.set(new mn(Y),!0)}),F(h,new Yo(v.path,j,c))}return[]}function Ra(h,u,c){return F(h,new Ki({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,c))}function oa(h,u,c,v,M=!1){const j=u._path,Y=h.syncPointTree_.get(j);let me=[];if(Y&&("default"===u._queryIdentifier||ia(Y,u))){const Ae=function Fs(h,u,c,v){const M=u._queryIdentifier,j=[];let Y=[];const me=Co(h);if("default"===M)for(const[Ae,Fe]of h.views.entries())Y=Y.concat(Pa(Fe,c,v)),Ja(Fe)&&(h.views.delete(Ae),Fe.query._queryParams.loadsAllData()||j.push(Fe.query));else{const Ae=h.views.get(M);Ae&&(Y=Y.concat(Pa(Ae,c,v)),Ja(Ae)&&(h.views.delete(M),Ae.query._queryParams.loadsAllData()||j.push(Ae.query)))}return me&&!Co(h)&&j.push(new(function el(){return(0,B.hu)(Es,"Reference.ts has not been loaded"),Es}())(u._repo,u._path)),{removed:j,events:Y}}(Y,u,c,v);(function Ql(h){return 0===h.views.size})(Y)&&(h.syncPointTree_=h.syncPointTree_.remove(j));const Fe=Ae.removed;if(me=Ae.events,!M){const Et=-1!==Fe.findIndex(Rt=>Rt._queryParams.loadsAllData()),wt=h.syncPointTree_.findOnPath(j,(Rt,En)=>Co(En));if(Et&&!wt){const Rt=h.syncPointTree_.subtree(j);if(!Rt.isEmpty()){const En=function Ur(h){return h.fold((u,c,v)=>{if(c&&Co(c))return[Oa(c)];{let M=[];return c&&(M=Ro(c)),Kt(v,(j,Y)=>{M=M.concat(Y)}),M}})}(Rt);for(let Kn=0;Kn<En.length;++Kn){const Ii=En[Kn],wo=Ii.query,vu=pe(h,Ii);h.listenProvider_.startListening(Ds(wo),He(h,wo),vu.hashFn,vu.onComplete)}}}!wt&&Fe.length>0&&!v&&(Et?h.listenProvider_.stopListening(Ds(u),null):Fe.forEach(Rt=>{const En=h.queryToTagMap.get(bt(Rt));h.listenProvider_.stopListening(Ds(Rt),En)}))}!function fi(h,u){for(let c=0;c<u.length;++c){const v=u[c];if(!v._queryParams.loadsAllData()){const M=bt(v),j=h.queryToTagMap.get(M);h.queryToTagMap.delete(M),h.tagToQueryMap.delete(j)}}}(h,Fe)}return me}function cs(h,u,c,v){const M=tn(h,v);if(null!=M){const j=un(M),Y=j.path,me=j.queryId,Ae=Yr(Y,u);return Sr(h,Y,new Ki(Ko(me),Ae,c))}return[]}function A(h,u,c,v=!1){const M=u._path;let j=null,Y=!1;h.syncPointTree_.foreachOnPath(M,(Rt,En)=>{const Kn=Yr(Rt,M);j=j||Zs(En,Kn),Y=Y||Co(En)});let Ae,me=h.syncPointTree_.get(M);me?(Y=Y||Co(me),j=j||Zs(me,An())):(me=new cl,h.syncPointTree_=h.syncPointTree_.set(M,me)),null!=j?Ae=!0:(Ae=!1,j=kn.EMPTY_NODE,h.syncPointTree_.subtree(M).foreachChild((En,Kn)=>{const Ii=Zs(Kn,An());Ii&&(j=j.updateImmediateChild(En,Ii))}));const Fe=ia(me,u);if(!Fe&&!u._queryParams.loadsAllData()){const Rt=bt(u);(0,B.hu)(!h.queryToTagMap.has(Rt),"View does not exist, but we have a tag");const En=function xa(){return Jr++}();h.queryToTagMap.set(Rt,En),h.tagToQueryMap.set(En,Rt)}let wt=function Ls(h,u,c,v,M,j){const Y=Wa(h,u,v,M,j);return h.views.has(u._queryIdentifier)||h.views.set(u._queryIdentifier,Y),function st(h,u){h.eventRegistrations_.push(u)}(Y,c),function Rl(h,u){const c=h.viewCache_.eventCache,v=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(Hr,(j,Y)=>{v.push(ls(j,Y))}),c.isFullyInitialized()&&v.push(ao(c.getNode())),ts(h,v,c.getNode(),u)}(Y,c)}(me,u,c,Ut(h.pendingWriteTree_,M),j,Ae);if(!Fe&&!Y&&!v){const Rt=qs(me,u);wt=wt.concat(function ji(h,u,c){const v=u._path,M=He(h,u),j=pe(h,c),Y=h.listenProvider_.startListening(Ds(u),M,j.hashFn,j.onComplete),me=h.syncPointTree_.subtree(v);if(M)(0,B.hu)(!Co(me.value),"If we're adding a query, it shouldn't be shadowed");else{const Ae=me.fold((Fe,Et,wt)=>{if(!Nn(Fe)&&Et&&Co(Et))return[Oa(Et).query];{let Rt=[];return Et&&(Rt=Rt.concat(Ro(Et).map(En=>En.query))),Kt(wt,(En,Kn)=>{Rt=Rt.concat(Kn)}),Rt}});for(let Fe=0;Fe<Ae.length;++Fe){const Et=Ae[Fe];h.listenProvider_.stopListening(Ds(Et),He(h,Et))}}return Y}(h,u,Rt))}return wt}function O(h,u,c){const M=h.pendingWriteTree_,j=h.syncPointTree_.findOnPath(u,(Y,me)=>{const Fe=Zs(me,Yr(Y,u));if(Fe)return Fe});return P(M,u,j,c,!0)}function F(h,u){return W(u,h.syncPointTree_,null,Ut(h.pendingWriteTree_,An()))}function W(h,u,c,v){if(Nn(h.path))return oe(h,u,c,v);{const M=u.get(An());null==c&&null!=M&&(c=Zs(M,An()));let j=[];const Y=In(h.path),me=h.operationForChild(Y),Ae=u.children.get(Y);if(Ae&&me){const Fe=c?c.getImmediateChild(Y):null,Et=on(v,Y);j=j.concat(W(me,Ae,Fe,Et))}return M&&(j=j.concat(dl(M,h,v,c))),j}}function oe(h,u,c,v){const M=u.get(An());null==c&&null!=M&&(c=Zs(M,An()));let j=[];return u.children.inorderTraversal((Y,me)=>{const Ae=c?c.getImmediateChild(Y):null,Fe=on(v,Y),Et=h.operationForChild(Y);Et&&(j=j.concat(oe(Et,me,Ae,Fe)))}),M&&(j=j.concat(dl(M,h,v,c))),j}function pe(h,u){const c=u.query,v=He(h,c);return{hashFn:()=>(function ou(h){return h.viewCache_.serverCache.getNode()}(u)||kn.EMPTY_NODE).hash(),onComplete:M=>{if("ok"===M)return v?function sa(h,u,c){const v=tn(h,c);if(v){const M=un(v),j=M.path,Y=M.queryId,me=Yr(j,u);return Sr(h,j,new Vi(Ko(Y),me))}return[]}(h,c._path,v):function nl(h,u){return F(h,new Vi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(h,c._path);{const j=function Kr(h,u){let c="Unknown Error";"too_big"===h?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?c="Client doesn't have permission to access the desired data.":"unavailable"===h&&(c="The service is unavailable");const v=new Error(h+" at "+u._path.toString()+": "+c);return v.code=h.toUpperCase(),v}(M,c);return oa(h,c,null,j)}}}}function He(h,u){const c=bt(u);return h.queryToTagMap.get(c)}function bt(h){return h._path.toString()+"$"+h._queryIdentifier}function tn(h,u){return h.tagToQueryMap.get(u)}function un(h){const u=h.indexOf("$");return(0,B.hu)(-1!==u&&u<h.length-1,"Bad queryKey."),{queryId:h.substr(u+1),path:new mn(h.substr(0,u))}}function Sr(h,u,c){const v=h.syncPointTree_.get(u);return(0,B.hu)(v,"Missing sync point for query tag that we're tracking"),dl(v,c,Ut(h.pendingWriteTree_,u),null)}function Ds(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function Ci(){return(0,B.hu)(Ea,"Reference.ts has not been loaded"),Ea}())(h._repo,h._path):h}class za{constructor(u){this.node_=u}getImmediateChild(u){const c=this.node_.getImmediateChild(u);return new za(c)}node(){return this.node_}}class Ca{constructor(u,c){this.syncTree_=u,this.path_=c}getImmediateChild(u){const c=Er(this.path_,u);return new Ca(this.syncTree_,c)}node(){return O(this.syncTree_,this.path_)}}const fl=function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h},Or=function(h,u,c){return h&&"object"==typeof h?((0,B.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?pi(h[".sv"],u,c):"object"==typeof h[".sv"]?rl(h[".sv"],u):void(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},pi=function(h,u,c){if("timestamp"===h)return c.timestamp;(0,B.hu)(!1,"Unexpected server value: "+h)},rl=function(h,u,c){h.hasOwnProperty("increment")||(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const v=h.increment;"number"!=typeof v&&(0,B.hu)(!1,"Unexpected increment value: "+v);const M=u.node();if((0,B.hu)(null!==M&&typeof M<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!M.isLeafNode())return v;const Y=M.getValue();return"number"!=typeof Y?v:Y+v},pl=function(h,u,c,v){return ml(u,new Ca(c,h),v)},gl=function(h,u,c){return ml(h,new za(u),c)};function ml(h,u,c){const v=h.getPriority().val(),M=Or(v,u.getImmediateChild(".priority"),c);let j;if(h.isLeafNode()){const Y=h,me=Or(Y.getValue(),u,c);return me!==Y.getValue()||M!==Y.getPriority().val()?new Wi(me,Pr(M)):h}{const Y=h;return j=Y,M!==Y.getPriority().val()&&(j=j.updatePriority(new Wi(M))),Y.forEachChild(Hr,(me,Ae)=>{const Fe=ml(Ae,u.getImmediateChild(me),c);Fe!==Ae&&(j=j.updateImmediateChild(me,Fe))}),j}}class Ia{constructor(u="",c=null,v={children:{},childCount:0}){this.name=u,this.parent=c,this.node=v}}function Nl(h,u){let c=u instanceof mn?u:new mn(u),v=h,M=In(c);for(;null!==M;){const j=(0,B.DV)(v.node.children,M)||{children:{},childCount:0};v=new Ia(M,v,j),c=yr(c),M=In(c)}return v}function aa(h){return h.node.value}function Ll(h,u){h.node.value=u,Na(h)}function Gu(h){return h.node.childCount>0}function Ka(h,u){Kt(h.node.children,(c,v)=>{u(new Ia(c,h,v))})}function lu(h,u,c,v){c&&!v&&u(h),Ka(h,M=>{lu(M,u,!0,v)}),c&&v&&u(h)}function Ya(h){return new mn(null===h.parent?h.name:Ya(h.parent)+"/"+h.name)}function Na(h){null!==h.parent&&function Fl(h,u,c){const v=function Zl(h){return void 0===aa(h)&&!Gu(h)}(c),M=(0,B.r3)(h.node.children,u);v&&M?(delete h.node.children[u],h.node.childCount--,Na(h)):!v&&!M&&(h.node.children[u]=c.node,h.node.childCount++,Na(h))}(h.parent,h.name,h)}const La=/[\[\].#$\/\u0000-\u001F\u007F]/,uc=/[\[\].#$\u0000-\u001F\u007F]/,Ni=10485760,la=function(h){return"string"==typeof h&&0!==h.length&&!La.test(h)},As=function(h){return"string"==typeof h&&0!==h.length&&!uc.test(h)},kl=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!rt(h)||h&&"object"==typeof h&&(0,B.r3)(h,".sv")},Xs=function(h,u,c,v){v&&void 0===u||Cs((0,B.gK)(h,"value"),u,c)},Cs=function(h,u,c){const v=c instanceof mn?new We(c,h):c;if(void 0===u)throw new Error(h+"contains undefined "+Jt(v));if("function"==typeof u)throw new Error(h+"contains a function "+Jt(v)+" with contents = "+u.toString());if(rt(u))throw new Error(h+"contains "+u.toString()+" "+Jt(v));if("string"==typeof u&&u.length>Ni/3&&(0,B.ug)(u)>Ni)throw new Error(h+"contains a string greater than "+Ni+" utf8 bytes "+Jt(v)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let M=!1,j=!1;if(Kt(u,(Y,me)=>{if(".value"===Y)M=!0;else if(".priority"!==Y&&".sv"!==Y&&(j=!0,!la(Y)))throw new Error(h+" contains an invalid key ("+Y+") "+Jt(v)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function mt(h,u){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(u),h.byteLength_+=(0,B.ug)(u),zt(h)})(v,Y),Cs(h,me,v),function Ht(h){const u=h.parts_.pop();h.byteLength_-=(0,B.ug)(u),h.parts_.length>0&&(h.byteLength_-=1)}(v)}),M&&j)throw new Error(h+' contains ".value" child '+Jt(v)+" in addition to actual children.")}},uu=function(h,u,c,v){if(v&&void 0===u)return;const M=(0,B.gK)(h,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(M+" must be an object containing the children to replace.");const j=[];Kt(u,(Y,me)=>{const Ae=new mn(Y);if(Cs(M,me,Er(c,Ae)),".priority"===Ar(Ae)&&!kl(me))throw new Error(M+"contains an invalid value for '"+Ae.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");j.push(Ae)}),function(h,u){let c,v;for(c=0;c<u.length;c++){v=u[c];const j=_i(v);for(let Y=0;Y<j.length;Y++)if((".priority"!==j[Y]||Y!==j.length-1)&&!la(j[Y]))throw new Error(h+"contains an invalid key ("+j[Y]+") in path "+v.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(Ts);let M=null;for(c=0;c<u.length;c++){if(v=u[c],null!==M&&at(M,v))throw new Error(h+"contains a path "+M.toString()+" that is ancestor of another path "+v.toString());M=v}}(M,j)},Ul=function(h,u,c,v){if(!(v&&void 0===c||As(c)))throw new Error((0,B.gK)(h,u)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},yl=function(h,u,c,v){c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Ul(h,u,c,v)},fo=function(h,u){if(".info"===In(u))throw new Error(h+" failed = Can't modify data under /.info/")},Fa=function(h,u){const c=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!la(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==c.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),As(h)}(c))throw new Error((0,B.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Vl{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function du(h,u){let c=null;for(let v=0;v<u.length;v++){const M=u[v],j=M.getPath();null!==c&&!De(j,c.path)&&(h.eventLists_.push(c),c=null),null===c&&(c={events:[],path:j}),c.events.push(M)}c&&h.eventLists_.push(c)}function Wu(h,u,c){du(h,c),hu(h,v=>De(v,u))}function Hi(h,u,c){du(h,c),hu(h,v=>at(v,u)||at(u,v))}function hu(h,u){h.recursionDepth_++;let c=!0;for(let v=0;v<h.eventLists_.length;v++){const M=h.eventLists_[v];M&&(u(M.path)?(Xl(h.eventLists_[v]),h.eventLists_[v]=null):c=!1)}c&&(h.eventLists_=[]),h.recursionDepth_--}function Xl(h){for(let u=0;u<h.events.length;u++){const c=h.events[u];if(null!==c){h.events[u]=null;const v=c.getEventRunner();Ke&&xe("event: "+c.toString()),dt(v)}}}const zu="repo_interrupt",Ku=25;class Bl{constructor(u,c,v,M){this.repoInfo_=u,this.forceRestClient_=c,this.authTokenProvider_=v,this.appCheckProvider_=M,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Vl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ce(),this.transactionQueueTree_=new Ia,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ua(h){const c=h.infoData_.getNode(new mn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function ds(h){return fl({timestamp:ua(h)})}function Jl(h,u,c,v,M){h.dataUpdateCount++;const j=new mn(u);c=h.interceptServerDataCallback_?h.interceptServerDataCallback_(u,c):c;let Y=[];if(M)if(v){const Ae=(0,B.UI)(c,Fe=>Pr(Fe));Y=function Wr(h,u,c,v){const M=tn(h,v);if(M){const j=un(M),Y=j.path,me=j.queryId,Ae=Yr(Y,u),Fe=li.fromObject(c);return Sr(h,Y,new xi(Ko(me),Ae,Fe))}return[]}(h.serverSyncTree_,j,Ae,M)}else{const Ae=Pr(c);Y=cs(h.serverSyncTree_,j,Ae,M)}else if(v){const Ae=(0,B.UI)(c,Fe=>Pr(Fe));Y=function tl(h,u,c){const v=li.fromObject(c);return F(h,new xi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,v))}(h.serverSyncTree_,j,Ae)}else{const Ae=Pr(c);Y=Ra(h.serverSyncTree_,j,Ae)}let me=j;Y.length>0&&(me=ol(h,j)),Hi(h.eventQueue_,me,Y)}function jl(h,u){No(h,"connected",u),!1===u&&function Su(h){Lo(h,"onDisconnectEvents");const u=ds(h),c=ce();Gr(h.onDisconnect_,An(),(M,j)=>{const Y=pl(M,j,h.serverSyncTree_,u);et(c,M,Y)});let v=[];Gr(c,An(),(M,j)=>{v=v.concat(Ra(h.serverSyncTree_,M,j));const Y=se(h,M);ol(h,Y)}),h.onDisconnect_=ce(),Hi(h.eventQueue_,An(),v)}(h)}function No(h,u,c){const v=new mn("/.info/"+u),M=Pr(c);h.infoData_.updateSnapshot(v,M);const j=Ra(h.infoSyncTree_,v,M);Hi(h.eventQueue_,v,j)}function Io(h){return h.nextWriteId_++}function gu(h,u,c){h.server_.onDisconnectCancel(u.toString(),(v,M)=>{"ok"===v&&ln(h.onDisconnect_,u),Fo(0,c,v,M)})}function bu(h,u,c,v){const M=Pr(c);h.server_.onDisconnectPut(u.toString(),M.val(!0),(j,Y)=>{"ok"===j&&et(h.onDisconnect_,u,M),Fo(0,v,j,Y)})}function Qu(h,u,c){let v;v=".info"===In(u._path)?oa(h.infoSyncTree_,u,c):oa(h.serverSyncTree_,u,c),Wu(h.eventQueue_,u._path,v)}function Lo(h,...u){let c="";h.persistentConnection_&&(c=h.persistentConnection_.id+":"),xe(c,...u)}function Fo(h,u,c,v){u&&dt(()=>{if("ok"===c)u(null);else{const M=(c||"error").toUpperCase();let j=M;v&&(j+=": "+v);const Y=new Error(j);Y.code=M,u(Y)}})}function sl(h,u,c){return O(h.serverSyncTree_,u,c)||kn.EMPTY_NODE}function ka(h,u=h.transactionQueueTree_){if(u||L(h,u),aa(u)){const c=y(h,u);(0,B.hu)(c.length>0,"Sending zero length transaction queue"),c.every(M=>0===M.status)&&function tu(h,u,c){const v=c.map(Fe=>Fe.currentWriteId),M=sl(h,u,v);let j=M;const Y=M.hash();for(let Fe=0;Fe<c.length;Fe++){const Et=c[Fe];(0,B.hu)(0===Et.status,"tryToSendTransactionQueue_: items in queue should all be run."),Et.status=1,Et.retryCount++;const wt=Yr(u,Et.path);j=j.updateChild(wt,Et.currentOutputSnapshotRaw)}const me=j.val(!0),Ae=u;h.server_.put(Ae.toString(),me,Fe=>{Lo(h,"transaction put response",{path:Ae.toString(),status:Fe});let Et=[];if("ok"===Fe){const wt=[];for(let Rt=0;Rt<c.length;Rt++)c[Rt].status=2,Et=Et.concat(xo(h.serverSyncTree_,c[Rt].currentWriteId)),c[Rt].onComplete&&wt.push(()=>c[Rt].onComplete(null,!0,c[Rt].currentOutputSnapshotResolved)),c[Rt].unwatcher();L(h,Nl(h.transactionQueueTree_,u)),ka(h,h.transactionQueueTree_),Hi(h.eventQueue_,u,Et);for(let Rt=0;Rt<wt.length;Rt++)dt(wt[Rt])}else{if("datastale"===Fe)for(let wt=0;wt<c.length;wt++)c[wt].status=3===c[wt].status?4:0;else{Pt("transaction at "+Ae.toString()+" failed: "+Fe);for(let wt=0;wt<c.length;wt++)c[wt].status=4,c[wt].abortReason=Fe}ol(h,u)}},Y)}(h,Ya(u),c)}else Gu(u)&&Ka(u,c=>{ka(h,c)})}function ol(h,u){const c=R(h,u),v=Ya(c);return function Hl(h,u,c){if(0===u.length)return;const v=[];let M=[];const Y=u.filter(me=>0===me.status).map(me=>me.currentWriteId);for(let me=0;me<u.length;me++){const Ae=u[me],Fe=Yr(c,Ae.path);let wt,Et=!1;if((0,B.hu)(null!==Fe,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Ae.status)Et=!0,wt=Ae.abortReason,M=M.concat(xo(h.serverSyncTree_,Ae.currentWriteId,!0));else if(0===Ae.status)if(Ae.retryCount>=Ku)Et=!0,wt="maxretry",M=M.concat(xo(h.serverSyncTree_,Ae.currentWriteId,!0));else{const Rt=sl(h,Ae.path,Y);Ae.currentInputSnapshot=Rt;const En=u[me].update(Rt.val());if(void 0!==En){Cs("transaction failed: Data returned ",En,Ae.path);let Kn=Pr(En);"object"==typeof En&&null!=En&&(0,B.r3)(En,".priority")||(Kn=Kn.updatePriority(Rt.getPriority()));const wo=Ae.currentWriteId,vu=ds(h),Ws=gl(Kn,Rt,vu);Ae.currentOutputSnapshotRaw=Kn,Ae.currentOutputSnapshotResolved=Ws,Ae.currentWriteId=Io(h),Y.splice(Y.indexOf(wo),1),M=M.concat(ui(h.serverSyncTree_,Ae.path,Ws,Ae.currentWriteId,Ae.applyLocally)),M=M.concat(xo(h.serverSyncTree_,wo,!0))}else Et=!0,wt="nodata",M=M.concat(xo(h.serverSyncTree_,Ae.currentWriteId,!0))}Hi(h.eventQueue_,c,M),M=[],Et&&(u[me].status=2,setTimeout(u[me].unwatcher,Math.floor(0)),u[me].onComplete&&v.push("nodata"===wt?()=>u[me].onComplete(null,!1,u[me].currentInputSnapshot):()=>u[me].onComplete(new Error(wt),!1,null)))}L(h,h.transactionQueueTree_);for(let me=0;me<v.length;me++)dt(v[me]);ka(h,h.transactionQueueTree_)}(h,y(h,c),v),v}function R(h,u){let c,v=h.transactionQueueTree_;for(c=In(u);null!==c&&void 0===aa(v);)v=Nl(v,c),c=In(u=yr(u));return v}function y(h,u){const c=[];return C(h,u,c),c.sort((v,M)=>v.order-M.order),c}function C(h,u,c){const v=aa(u);if(v)for(let M=0;M<v.length;M++)c.push(v[M]);Ka(u,M=>{C(h,M,c)})}function L(h,u){const c=aa(u);if(c){let v=0;for(let M=0;M<c.length;M++)2!==c[M].status&&(c[v]=c[M],v++);c.length=v,Ll(u,c.length>0?c:void 0)}Ka(u,v=>{L(h,v)})}function se(h,u){const c=Ya(R(h,u)),v=Nl(h.transactionQueueTree_,u);return function ql(h,u,c){let v=c?h:h.parent;for(;null!==v;){if(u(v))return!0;v=v.parent}}(v,M=>{_e(h,M)}),_e(h,v),lu(v,M=>{_e(h,M)}),c}function _e(h,u){const c=aa(u);if(c){const v=[];let M=[],j=-1;for(let Y=0;Y<c.length;Y++)3===c[Y].status||(1===c[Y].status?((0,B.hu)(j===Y-1,"All SENT items should be at beginning of queue."),j=Y,c[Y].status=3,c[Y].abortReason="set"):((0,B.hu)(0===c[Y].status,"Unexpected transaction status in abort"),c[Y].unwatcher(),M=M.concat(xo(h.serverSyncTree_,c[Y].currentWriteId,!0)),c[Y].onComplete&&v.push(c[Y].onComplete.bind(null,new Error("set"),!1,null))));-1===j?Ll(u,void 0):c.length=j+1,Hi(h.eventQueue_,Ya(u),M);for(let Y=0;Y<v.length;Y++)dt(v[Y])}}const g=function(h,u){const c=b(h),v=c.namespace;return"firebase.com"===c.domain&&Ze(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!v||"undefined"===v)&&"localhost"!==c.domain&&Ze("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Pt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new dn(c.host,c.secure,v,"ws"===c.scheme||"wss"===c.scheme,u,"",v!==c.subdomain),path:new mn(c.pathString)}},b=function(h){let u="",c="",v="",M="",j="",Y=!0,me="https",Ae=443;if("string"==typeof h){let Fe=h.indexOf("//");Fe>=0&&(me=h.substring(0,Fe-1),h=h.substring(Fe+2));let Et=h.indexOf("/");-1===Et&&(Et=h.length);let wt=h.indexOf("?");-1===wt&&(wt=h.length),u=h.substring(0,Math.min(Et,wt)),Et<wt&&(M=function E(h){let u="";const c=h.split("/");for(let v=0;v<c.length;v++)if(c[v].length>0){let M=c[v];try{M=decodeURIComponent(M.replace(/\+/g," "))}catch{}u+="/"+M}return u}(h.substring(Et,wt)));const Rt=function _(h){const u={};"?"===h.charAt(0)&&(h=h.substring(1));for(const c of h.split("&")){if(0===c.length)continue;const v=c.split("=");2===v.length?u[decodeURIComponent(v[0])]=decodeURIComponent(v[1]):Pt(`Invalid query segment '${c}' in query '${h}'`)}return u}(h.substring(Math.min(h.length,wt)));Fe=u.indexOf(":"),Fe>=0?(Y="https"===me||"wss"===me,Ae=parseInt(u.substring(Fe+1),10)):Fe=u.length;const En=u.slice(0,Fe);if("localhost"===En.toLowerCase())c="localhost";else if(En.split(".").length<=2)c=En;else{const Kn=u.indexOf(".");v=u.substring(0,Kn).toLowerCase(),c=u.substring(Kn+1),j=v}"ns"in Rt&&(j=Rt.ns)}return{host:u,port:Ae,domain:c,subdomain:v,secure:Y,scheme:me,pathString:M,namespace:j}},$="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",re=function(){let h=0;const u=[];return function(c){const v=c===h;let M;h=c;const j=new Array(8);for(M=7;M>=0;M--)j[M]=$.charAt(c%64),c=Math.floor(c/64);(0,B.hu)(0===c,"Cannot push at time == 0");let Y=j.join("");if(v){for(M=11;M>=0&&63===u[M];M--)u[M]=0;u[M]++}else for(M=0;M<12;M++)u[M]=Math.floor(64*Math.random());for(M=0;M<12;M++)Y+=$.charAt(u[M]);return(0,B.hu)(20===Y.length,"nextPushId: Length should be 20."),Y}}();class Ee{constructor(u,c,v,M){this.eventType=u,this.eventRegistration=c,this.snapshot=v,this.prevName=M}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,B.Wl)(this.snapshot.exportVal())}}class Te{constructor(u,c,v){this.eventRegistration=u,this.error=c,this.path=v}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class tt{constructor(u,c){this.snapshotCallback=u,this.cancelCallback=c}onValue(u,c){this.snapshotCallback.call(null,u,c)}onCancel(u){return(0,B.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class ht{constructor(u,c){this._repo=u,this._path=c}cancel(){const u=new B.BH;return gu(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){fo("OnDisconnect.remove",this._path);const u=new B.BH;return bu(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){fo("OnDisconnect.set",this._path),Xs("OnDisconnect.set",u,this._path,!1);const c=new B.BH;return bu(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}setWithPriority(u,c){fo("OnDisconnect.setWithPriority",this._path),Xs("OnDisconnect.setWithPriority",u,this._path,!1),function(h,u,c){if(!c||void 0!==u){if(rt(u))throw new Error((0,B.gK)(h,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!kl(u))throw new Error((0,B.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}("OnDisconnect.setWithPriority",c,!1);const v=new B.BH;return function Au(h,u,c,v,M){const j=Pr(c,v);h.server_.onDisconnectPut(u.toString(),j.val(!0),(Y,me)=>{"ok"===Y&&et(h.onDisconnect_,u,j),Fo(0,M,Y,me)})}(this._repo,this._path,u,c,v.wrapCallback(()=>{})),v.promise}update(u){fo("OnDisconnect.update",this._path),uu("OnDisconnect.update",u,this._path,!1);const c=new B.BH;return function mu(h,u,c,v){if((0,B.xb)(c))return xe("onDisconnect().update() called with empty data.  Don't do anything."),void Fo(0,v,"ok",void 0);h.server_.onDisconnectMerge(u.toString(),c,(M,j)=>{"ok"===M&&Kt(c,(Y,me)=>{const Ae=Pr(me);et(h.onDisconnect_,Er(u,Y),Ae)}),Fo(0,v,M,j)})}(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}}class Lt{constructor(u,c,v,M){this._repo=u,this._path=c,this._queryParams=v,this._orderByCalled=M}get key(){return Nn(this._path)?null:Ar(this._path)}get ref(){return new an(this._repo,this._path)}get _queryIdentifier(){const u=G(this._queryParams),c=rr(u);return"{}"===c?"default":c}get _queryObject(){return G(this._queryParams)}isEqual(u){if(!((u=(0,B.m9)(u))instanceof Lt))return!1;const c=this._repo===u._repo,v=De(this._path,u._path);return c&&v&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function oi(h){let u="";for(let c=h.pieceNum_;c<h.pieces_.length;c++)""!==h.pieces_[c]&&(u+="/"+encodeURIComponent(String(h.pieces_[c])));return u||"/"}(this._path)}}class an extends Lt{constructor(u,c){super(u,c,new Tr,!1)}get parent(){const u=xn(this._path);return null===u?null:new an(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class Rn{constructor(u,c,v){this._node=u,this.ref=c,this._index=v}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const c=new mn(u),v=Rr(this.ref,u);return new Rn(this._node.getChild(c),v,Hr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(v,M)=>u(new Rn(M,Rr(this.ref,v),Hr)))}hasChild(u){const c=new mn(u);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function or(h,u){return(h=(0,B.m9)(h))._checkNotDeleted("ref"),void 0!==u?Rr(h._root,u):h._root}function Rr(h,u){return null===In((h=(0,B.m9)(h))._path)?yl("child","path",u,!1):Ul("child","path",u,!1),new an(h._repo,Er(h._path,u))}function ks(h){return h=(0,B.m9)(h),new ht(h._repo,h._path)}function rs(h,u){h=(0,B.m9)(h),fo("push",h._path),Xs("push",u,h._path,!0);const c=ua(h._repo),v=re(c),M=Rr(h,v),j=Rr(h,v);let Y;return Y=null!=u?Is(j,u).then(()=>j):Promise.resolve(j),M.then=Y.then.bind(Y),M.catch=Y.then.bind(Y,void 0),M}function vl(h){return fo("remove",h._path),Is(h,null)}function Is(h,u){h=(0,B.m9)(h),fo("set",h._path),Xs("set",u,h._path,!1);const c=new B.BH;return function fu(h,u,c,v,M){Lo(h,"set",{path:u.toString(),value:c,priority:v});const j=ds(h),Y=Pr(c,v),me=O(h.serverSyncTree_,u),Ae=gl(Y,me,j),Fe=Io(h),Et=ui(h.serverSyncTree_,u,Ae,Fe,!0);du(h.eventQueue_,Et),h.server_.put(u.toString(),Y.val(!0),(Rt,En)=>{const Kn="ok"===Rt;Kn||Pt("set at "+u+" failed: "+Rt);const Ii=xo(h.serverSyncTree_,Fe,!Kn);Hi(h.eventQueue_,u,Ii),Fo(0,M,Rt,En)});const wt=se(h,u);ol(h,wt),Hi(h.eventQueue_,wt,[])}(h._repo,h._path,u,null,c.wrapCallback(()=>{})),c.promise}function El(h,u){uu("update",u,h._path,!1);const c=new B.BH;return function pu(h,u,c,v){Lo(h,"update",{path:u.toString(),value:c});let M=!0;const j=ds(h),Y={};if(Kt(c,(me,Ae)=>{M=!1,Y[me]=pl(Er(u,me),Pr(Ae),h.serverSyncTree_,j)}),M)xe("update() called with empty data.  Don't do anything."),Fo(0,v,"ok",void 0);else{const me=Io(h),Ae=function hl(h,u,c,v){!function ea(h,u,c,v){(0,B.hu)(v>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:u,children:c,writeId:v,visible:!0}),h.visibleWrites=$a(h.visibleWrites,u,c),h.lastWriteId=v}(h.pendingWriteTree_,u,c,v);const M=li.fromObject(c);return F(h,new xi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,M))}(h.serverSyncTree_,u,Y,me);du(h.eventQueue_,Ae),h.server_.merge(u.toString(),c,(Fe,Et)=>{const wt="ok"===Fe;wt||Pt("update at "+u+" failed: "+Fe);const Rt=xo(h.serverSyncTree_,me,!wt),En=Rt.length>0?ol(h,u):u;Hi(h.eventQueue_,En,Rt),Fo(0,v,Fe,Et)}),Kt(c,Fe=>{const Et=se(h,Er(u,Fe));ol(h,Et)}),Hi(h.eventQueue_,u,[])}}(h._repo,h._path,u,c.wrapCallback(()=>{})),c.promise}function al(h){h=(0,B.m9)(h);const u=new tt(()=>{}),c=new ar(u);return function eu(h,u,c){const v=function T(h,u){const c=u._path;let v=null;h.syncPointTree_.foreachOnPath(c,(Fe,Et)=>{const wt=Yr(Fe,c);v=v||Zs(Et,wt)});let M=h.syncPointTree_.get(c);M?v=v||Zs(M,An()):(M=new cl,h.syncPointTree_=h.syncPointTree_.set(c,M));const j=null!=v,Y=j?new ai(v,!0,!1):null;return function au(h){return Xi(h.viewCache_)}(Wa(M,u,Ut(h.pendingWriteTree_,u._path),j?Y.getNode():kn.EMPTY_NODE,j))}(h.serverSyncTree_,u);return null!=v?Promise.resolve(v):h.server_.get(u).then(M=>{const j=Pr(M).withIndex(u._queryParams.getIndex());let Y;if(A(h.serverSyncTree_,u,c,!0),u._queryParams.loadsAllData())Y=Ra(h.serverSyncTree_,u._path,j);else{const me=He(h.serverSyncTree_,u);Y=cs(h.serverSyncTree_,u._path,j,me)}return Hi(h.eventQueue_,u._path,Y),oa(h.serverSyncTree_,u,c,null,!0),j},M=>(Lo(h,"get for query "+(0,B.Wl)(u)+" failed: "+M),Promise.reject(new Error(M))))}(h._repo,h,c).then(v=>new Rn(v,new an(h._repo,h._path),h._queryParams.getIndex()))}class ar{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,c){const v=c._queryParams.getIndex();return new Ee("value",this,new Rn(u.snapshotNode,new an(c._repo,c._path),v))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new Te(this,u,c):null}matches(u){return u instanceof ar&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ca{constructor(u,c){this.eventType=u,this.callbackContext=c}respondsTo(u){let c="children_added"===u?"child_added":u;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new Te(this,u,c):null}createEvent(u,c){(0,B.hu)(null!=u.childName,"Child events should have a childName.");const v=Rr(new an(c._repo,c._path),u.childName),M=c._queryParams.getIndex();return new Ee(u.type,this,new Rn(u.snapshotNode,v,M),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof ca&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function $l(h,u,c,v){return function ko(h,u,c,v,M){let j;if("object"==typeof v&&(j=void 0,M=v),"function"==typeof v&&(j=v),M&&M.onlyOnce){const Ae=c,Fe=(Et,wt)=>{Qu(h._repo,h,me),Ae(Et,wt)};Fe.userCallback=c.userCallback,Fe.context=c.context,c=Fe}const Y=new tt(c,j||void 0),me="value"===u?new ar(Y):new ca(u,Y);return function Yu(h,u,c){let v;v=".info"===In(u._path)?A(h.infoSyncTree_,u,c):A(h.serverSyncTree_,u,c),Wu(h.eventQueue_,u._path,v)}(h._repo,h,me),()=>Qu(h._repo,h,me)}(h,"value",u,c,v)}function Zr(h,u,c){let v=null;const M=c?new tt(c):null;"value"===u?v=new ar(M):u&&(v=new ca(u,M)),Qu(h._repo,h,v)}(function Oo(h){(0,B.hu)(!Es,"__referenceConstructor has already been defined"),Es=h})(an),function xl(h){(0,B.hu)(!Ea,"__referenceConstructor has already been defined"),Ea=h}(an);const Od="FIREBASE_DATABASE_EMULATOR_HOST",dc={};let Rd=!1;class vh{constructor(u,c){this._repoInternal=u,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Tu(h,u,c){if(h.stats_=Br(h.repoInfo_),h.forceRestClient_||Ve())h.server_=new H(h.repoInfo_,(v,M,j,Y)=>{Jl(h,v,M,j,Y)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>jl(h,!0),0);else{if(typeof c<"u"&&null!==c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,B.Wl)(c)}catch(v){throw new Error("Invalid authOverride provided: "+v)}}h.persistentConnection_=new ii(h.repoInfo_,u,(v,M,j,Y)=>{Jl(h,v,M,j,Y)},v=>{jl(h,v)},v=>{!function _l(h,u){Kt(u,(c,v)=>{No(h,c,v)})}(h,v)},h.authTokenProvider_,h.appCheckProvider_,c),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(v=>{h.server_.refreshAuthToken(v)}),h.appCheckProvider_.addTokenChangeListener(v=>{h.server_.refreshAppCheckToken(v.token)}),h.statsReporter_=function di(h,u){const c=h.toString();return gi[c]||(gi[c]=u()),gi[c]}(h.repoInfo_,()=>new Ha(h.stats_,h.server_)),h.infoData_=new k,h.infoSyncTree_=new Da({startListening:(v,M,j,Y)=>{let me=[];const Ae=h.infoData_.getNode(v._path);return Ae.isEmpty()||(me=Ra(h.infoSyncTree_,v._path,Ae),setTimeout(()=>{Y("ok")},0)),me},stopListening:()=>{}}),No(h,"connected",!1),h.serverSyncTree_=new Da({startListening:(v,M,j,Y)=>(h.server_.listen(v,j,M,(me,Ae)=>{const Fe=Y(me,Ae);Hi(h.eventQueue_,v._path,Fe)}),[]),stopListening:(v,M)=>{h.server_.unlisten(v,M)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new an(this._repo,An())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function xd(h,u){const c=dc[u];(!c||c[h.key]!==h)&&Ze(`Database ${u}(${h.repoInfo_}) has already been deleted.`),function Gs(h){h.persistentConnection_&&h.persistentConnection_.interrupt(zu)}(h),delete c[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&Ze("Cannot call "+u+" on a deleted database.")}}function Eh(h=(0,I.Mq)(),u){const c=(0,I.qX)(h,"database").getImmediate({identifier:u});if(!c._instanceStarted){const v=(0,B.P0)("database");v&&function _f(h,u,c,v={}){(h=(0,B.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&Ze("Cannot call useEmulator() after instance has already been initialized.");const M=h._repoInternal;let j;if(M.repoInfo_.nodeAdmin)v.mockUserToken&&Ze('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),j=new qn(qn.OWNER);else if(v.mockUserToken){const Y="string"==typeof v.mockUserToken?v.mockUserToken:(0,B.Sg)(v.mockUserToken,h.app.options.projectId);j=new qn(Y)}!function $c(h,u,c,v){h.repoInfo_=new dn(`${u}:${c}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams,!0),v&&(h.authTokenProvider_=v)}(M,u,c,j)}(c,...v)}return c}const Gl={".sv":"timestamp"};function Ch(){return Gl}function Gc(h){return{".sv":{increment:h}}}ii.prototype.simpleListen=function(h,u){this.sendRequest("q",{p:h},u)},ii.prototype.echo=function(h,u){this.sendRequest("echo",{d:h},u)},function Dh(h){(function ne(h){K=h})(I.Jn),(0,I.Xd)(new ee.wA("database",(u,{instanceIdentifier:c})=>function hc(h,u,c,v,M){let j=v||h.options.databaseURL;void 0===j&&(h.options.projectId||Ze("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xe("Using default host for project ",h.options.projectId),j=`${h.options.projectId}-default-rtdb.firebaseio.com`);let Ae,Fe,Y=g(j,M),me=Y.repoInfo;typeof process<"u"&&process.env&&(Fe=process.env[Od]),Fe?(Ae=!0,j=`http://${Fe}?ns=${me.namespace}`,Y=g(j,M),me=Y.repoInfo):Ae=!Y.repoInfo.secure;const Et=M&&Ae?new qn(qn.OWNER):new Vn(h.name,h.options,u);Fa("Invalid Firebase Database URL",Y),Nn(Y.path)||Ze("Database URL must point to the root of a Firebase Database (not including a child path).");const wt=function Nd(h,u,c,v){let M=dc[u.name];M||(M={},dc[u.name]=M);let j=M[h.toURLString()];return j&&Ze("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),j=new Bl(h,Rd,c,v),M[h.toURLString()]=j,j}(me,h,Et,new kt(h.name,c));return new vh(wt,h)}(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,I.KN)(ie,"0.14.3",h),(0,I.KN)(ie,"0.14.3","esm2017")}()},9996:(Se,ae,D)=>{D.d(ae,{ET:()=>qy,hJ:()=>cm,oe:()=>Vc,JU:()=>dm,ST:()=>Bp,Lx:()=>Wy,QT:()=>Hm,kl:()=>$m,PL:()=>Gm,ad:()=>ky,b9:()=>Nm,cf:()=>Xy,Xo:()=>xm,IO:()=>Mm,Bt:()=>Td,TQ:()=>Lm,r7:()=>qp});var K,f=D(9671),I=D(6881),ee=D(4859),B=D(1877),q=D(2090),ie=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},te={},ne=ne||{},Z=ie||self;function le(){}function fe(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Le(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var je="closure_uid_"+(1e9*Math.random()>>>0),Qe=0;function Be(i,e,t){return i.call.apply(i.bind,arguments)}function ze(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var l=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(l,o),i.apply(e,l)}}return function(){return i.apply(e,arguments)}}function Ke(i,e,t){return(Ke=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Be:ze).apply(null,arguments)}function it(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Ue(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(o,l,p){for(var w=Array(arguments.length-2),N=2;N<arguments.length;N++)w[N-2]=arguments[N];return e.prototype[l].apply(o,w)}}function xe(){this.s=this.s,this.o=this.o}xe.prototype.s=!1,xe.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Ge(i){Object.prototype.hasOwnProperty.call(i,je)&&i[je]||(i[je]=++Qe)}(this)},xe.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const It=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Ze(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function Pt(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(fe(o)){const l=i.length||0,p=o.length||0;i.length=l+p;for(let w=0;w<p;w++)i[l+w]=o[w]}else i.push(o)}}function St(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}St.prototype.h=function(){this.defaultPrevented=!0};var rt=function(){if(!Z.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{Z.addEventListener("test",le,e),Z.removeEventListener("test",le,e)}catch{}return i}();function qe(i){return/^[\s\xa0]*$/.test(i)}var lt=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Xe(i,e){return i<e?-1:i>e?1:0}function vt(){var i=Z.navigator;return i&&(i=i.userAgent)?i:""}function At(i){return-1!=vt().indexOf(i)}function gn(i){return gn[" "](i),i}gn[" "]=le;var pn,i,fn=At("Opera"),Kt=At("Trident")||At("MSIE"),Fn=At("Edge"),Cn=Fn||Kt,ir=At("Gecko")&&!(-1!=vt().toLowerCase().indexOf("webkit")&&!At("Edge"))&&!(At("Trident")||At("MSIE"))&&!At("Edge"),Kr=-1!=vt().toLowerCase().indexOf("webkit")&&!At("Edge");function Pn(){var i=Z.document;return i?i.documentMode:void 0}e:{var si="",Tt=(i=vt(),ir?/rv:([^\);]+)(\)|;)/.exec(i):Fn?/Edge\/([\d\.]+)/.exec(i):Kt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Kr?/WebKit\/(\S+)/.exec(i):fn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Tt&&(si=Tt?Tt[1]:""),Kt){var dt=Pn();if(null!=dt&&dt>parseFloat(si)){pn=String(dt);break e}}pn=si}var Ve={};var qn=Z.document&&Kt&&(Pn()||parseInt(pn,10))||void 0;function Fr(i,e){if(St.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(ir){e:{try{gn(e.nodeName);var l=!0;break e}catch{}l=!1}l||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:is[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Fr.X.h.call(this)}}Ue(Fr,St);var is={2:"touch",3:"pen",4:"mouse"};Fr.prototype.h=function(){Fr.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var dr="closure_listenable_"+(1e6*Math.random()|0),cn=0;function Fi(i,e,t,o,l){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=l,this.key=++cn,this.ba=this.ea=!1}function qr(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function wr(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function br(i){const e={};for(const t in i)e[t]=i[t];return e}const Sn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Yn(i,e){let t,o;for(let l=1;l<arguments.length;l++){for(t in o=arguments[l],o)i[t]=o[t];for(let p=0;p<Sn.length;p++)t=Sn[p],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function hr(i){this.src=i,this.g={},this.h=0}function dn(i,e){var t=e.type;if(t in i.g){var p,o=i.g[t],l=It(o,e);(p=0<=l)&&Array.prototype.splice.call(o,l,1),p&&(qr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Zt(i,e,t,o){for(var l=0;l<i.length;++l){var p=i[l];if(!p.ba&&p.listener==e&&p.capture==!!t&&p.ha==o)return l}return-1}hr.prototype.add=function(i,e,t,o,l){var p=i.toString();(i=this.g[p])||(i=this.g[p]=[],this.h++);var w=Zt(i,e,o,l);return-1<w?(e=i[w],t||(e.ea=!1)):((e=new Fi(e,this.src,p,!!o,l)).ea=t,i.push(e)),e};var Qn="closure_lm_"+(1e6*Math.random()|0),yi={};function Vr(i,e,t,o,l){if(o&&o.once)return di(i,e,t,o,l);if(Array.isArray(e)){for(var p=0;p<e.length;p++)Vr(i,e[p],t,o,l);return null}return t=ei(t),i&&i[dr]?i.N(e,t,Le(o)?!!o.capture:!!o,l):gi(i,e,t,!1,o,l)}function gi(i,e,t,o,l,p){if(!e)throw Error("Invalid event type");var w=Le(l)?!!l.capture:!!l,N=lr(i);if(N||(i[Qn]=N=new hr(i)),(t=N.add(e,t,o,w,p)).proxy)return t;if(o=function Br(){const e=ss;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)rt||(l=w),void 0===l&&(l=!1),i.addEventListener(e.toString(),o,l);else if(i.attachEvent)i.attachEvent($n(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function di(i,e,t,o,l){if(Array.isArray(e)){for(var p=0;p<e.length;p++)di(i,e[p],t,o,l);return null}return t=ei(t),i&&i[dr]?i.O(e,t,Le(o)?!!o.capture:!!o,l):gi(i,e,t,!0,o,l)}function vr(i,e,t,o,l){if(Array.isArray(e))for(var p=0;p<e.length;p++)vr(i,e[p],t,o,l);else o=Le(o)?!!o.capture:!!o,t=ei(t),i&&i[dr]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Zt(p=i.g[e],t,o,l))&&(qr(p[t]),Array.prototype.splice.call(p,t,1),0==p.length&&(delete i.g[e],i.h--))):i&&(i=lr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Zt(e,t,o,l)),(t=-1<i?e[i]:null)&&ki(t))}function ki(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[dr])dn(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent($n(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=lr(e))?(dn(t,i),0==t.h&&(t.src=null,e[Qn]=null)):qr(i)}}}function $n(i){return i in yi?yi[i]:yi[i]="on"+i}function ss(i,e){if(i.ba)i=!0;else{e=new Fr(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&ki(i),i=t.call(o,e)}return i}function lr(i){return(i=i[Qn])instanceof hr?i:null}var Oi="__closure_events_fn_"+(1e9*Math.random()>>>0);function ei(i){return"function"==typeof i?i:(i[Oi]||(i[Oi]=function(e){return i.handleEvent(e)}),i[Oi])}function Je(){xe.call(this),this.i=new hr(this),this.P=this,this.I=null}function be(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new St(e,i);else if(e instanceof St)e.target=e.target||i;else{var l=e;Yn(e=new St(o,i),l)}if(l=!0,t)for(var p=t.length-1;0<=p;p--){var w=e.g=t[p];l=Ne(w,o,!0,e)&&l}if(l=Ne(w=e.g=i,o,!0,e)&&l,l=Ne(w,o,!1,e)&&l,t)for(p=0;p<t.length;p++)l=Ne(w=e.g=t[p],o,!1,e)&&l}function Ne(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var l=!0,p=0;p<e.length;++p){var w=e[p];if(w&&!w.ba&&w.capture==t){var N=w.listener,z=w.ha||w.src;w.ea&&dn(i.i,w),l=!1!==N.call(z,o)&&l}}return l&&!o.defaultPrevented}Ue(Je,xe),Je.prototype[dr]=!0,Je.prototype.removeEventListener=function(i,e,t,o){vr(this,i,e,t,o)},Je.prototype.M=function(){if(Je.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)qr(t[o]);delete i.g[e],i.h--}}this.I=null},Je.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},Je.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Ot=Z.JSON.stringify;function ge(){var i=he;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Wt,Ie=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new ot,i=>i.reset());class ot{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ke(i){Z.setTimeout(()=>{throw i},0)}function Ft(i,e){Wt||function Re(){var i=Z.Promise.resolve(void 0);Wt=function(){i.then(Me)}}(),Oe||(Wt(),Oe=!0),he.add(i,e)}var Oe=!1,he=new class ve{constructor(){this.h=this.g=null}add(e,t){const o=Ie.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function Me(){for(var i;i=ge();){try{i.h.call(i.g)}catch(t){ke(t)}var e=Ie;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Oe=!1}function Ye(i,e){Je.call(this),this.h=i||1,this.g=e||Z,this.j=Ke(this.lb,this),this.l=Date.now()}function Vt(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function sn(i,e,t){if("function"==typeof i)t&&(i=Ke(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ke(i.handleEvent,i)}return 2147483647<Number(e)?-1:Z.setTimeout(i,e||0)}function Xn(i){i.g=sn(()=>{i.g=null,i.i&&(i.i=!1,Xn(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Ue(Ye,Je),(K=Ye.prototype).ca=!1,K.R=null,K.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),be(this,"tick"),this.ca&&(Vt(this),this.start()))}},K.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},K.M=function(){Ye.X.M.call(this),Vt(this),delete this.g};class Cr extends xe{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Xn(this)}M(){super.M(),this.g&&(Z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ti(i){xe.call(this),this.h=i,this.g={}}Ue(Ti,xe);var gt=[];function nt(i,e,t,o){Array.isArray(t)||(t&&(gt[0]=t.toString()),t=gt);for(var l=0;l<t.length;l++){var p=Vr(e,t[l],o||i.handleEvent,!1,i.h||i);if(!p)break;i.g[p.key]=p}}function Nt(i){wr(i.g,function(e,t){this.g.hasOwnProperty(t)&&ki(e)},i),i.g={}}function Xt(){this.g=!0}function hn(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function tr(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var l=o[1];if(Array.isArray(l)&&!(1>l.length)){var p=l[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var w=1;w<l.length;w++)l[w]=""}}}return Ot(t)}catch{return e}}(i,t)+(o?" "+o:"")})}Ti.prototype.M=function(){Ti.X.M.call(this),Nt(this)},Ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xt.prototype.Aa=function(){this.g=!1},Xt.prototype.info=function(){};var ti={},ni=null;function Ms(){return ni=ni||new Je}function Ui(i){St.call(this,ti.Pa,i)}function os(i){const e=Ms();be(e,new Ui(e))}function jr(i,e){St.call(this,ti.STAT_EVENT,i),this.stat=e}function Bt(i){const e=Ms();be(e,new jr(e,i))}function bn(i,e){St.call(this,ti.Qa,i),this.size=e}function mn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Z.setTimeout(function(){i()},e)}ti.Pa="serverreachability",Ue(Ui,St),ti.STAT_EVENT="statevent",Ue(jr,St),ti.Qa="timingevent",Ue(bn,St);var An={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},In={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function er(){}function Ar(){}er.prototype.h=null;var Er,oi={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function _i(){St.call(this,"d")}function xn(){St.call(this,"c")}function Nn(){}function Yr(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new Ti(this),this.O=De,this.T=new Ye(i=Cn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ts}function Ts(){this.i=null,this.g="",this.h=!1}Ue(_i,St),Ue(xn,St),Ue(Nn,er),Nn.prototype.g=function(){return new XMLHttpRequest},Nn.prototype.i=function(){return{}},Er=new Nn;var De=45e3,at={},We={};function mt(i,e,t){i.K=1,i.v=mo(sr(e)),i.s=t,i.P=!0,Ht(i,null)}function Ht(i,e){i.F=Date.now(),ur(i),i.A=sr(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),Hr(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Ts,i.g=ys(i.l,t?e:null,!i.s),0<i.N&&(i.L=new Cr(Ke(i.La,i,i.g),i.N)),nt(i.S,i.g,"readystatechange",i.ib),e=i.H?br(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),os(),function On(i,e,t,o,l,p){i.info(function(){if(i.g)if(p)for(var w="",N=p.split("&"),z=0;z<N.length;z++){var J=N[z].split("=");if(1<J.length){var ye=J[0];J=J[1];var Pe=ye.split("_");w=2<=Pe.length&&"type"==Pe[1]?w+(ye+"=")+J+"&":w+(ye+"=redacted&")}}else w=null;else w=p;return"XMLHTTP REQ ("+o+") [attempt "+l+"]: "+e+"\n"+t+"\n"+w})}(i.j,i.u,i.A,i.m,i.U,i.s)}function zt(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Jt(i,e,t){let l,o=!0;for(;!i.I&&i.C<t.length;){if(l=pr(i,t),l==We){4==e&&(i.o=4,Bt(14),o=!1),hn(i.j,i.m,null,"[Incomplete Response]");break}if(l==at){i.o=4,Bt(15),hn(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}hn(i.j,i.m,l,null),ri(i,l)}zt(i)&&l!=We&&l!=at&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Bt(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Ko(e),e.K=!0,Bt(11))):(hn(i.j,i.m,t,"[Invalid Chunked Response]"),Si(i),Mr(i))}function pr(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?We:(t=Number(e.substring(t,o)),isNaN(t)?at:(o+=1)+t>e.length?We:(e=e.substr(o,t),i.C=o+t,e))}function ur(i){i.V=Date.now()+i.O,hi(i,i.O)}function hi(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=mn(Ke(i.gb,i),e)}function Dr(i){i.B&&(Z.clearTimeout(i.B),i.B=null)}function Mr(i){0==i.l.G||i.I||Ki(i.l,i)}function Si(i){Dr(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Vt(i.T),Nt(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function ri(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||kn(t.h,i)))if(!i.J&&kn(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var l=o;if(0==l[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;Vi(t),yt(t)}Mo(t),Bt(18)}}else t.Ba=l[1],0<t.Ba-t.T&&37500>l[2]&&t.L&&0==t.A&&!t.v&&(t.v=mn(Ke(t.cb,t),6e3));if(1>=Ss(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ai(t,11)}else if((i.J||t.g==i)&&Vi(t),!qe(e))for(l=t.Fa.g.parse(e),e=0;e<l.length;e++){let J=l[e];if(t.T=J[0],J=J[1],2==t.G)if("c"==J[0]){t.I=J[1],t.ka=J[2];const ye=J[3];null!=ye&&(t.ma=ye,t.j.info("VER="+t.ma));const Pe=J[4];null!=Pe&&(t.Ca=Pe,t.j.info("SVER="+t.Ca));const ut=J[5];null!=ut&&"number"==typeof ut&&0<ut&&(t.J=o=1.5*ut,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const xt=i.g;if(xt){const jt=xt.g?xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jt){var p=o.h;p.g||-1==jt.indexOf("spdy")&&-1==jt.indexOf("quic")&&-1==jt.indexOf("h2")||(p.j=p.l,p.g=new Set,p.h&&(Eo(p,p.h),p.h=null))}if(o.D){const Dn=xt.g?xt.g.getResponseHeader("X-HTTP-Session-Id"):null;Dn&&(o.za=Dn,Gn(o.F,o.D,Dn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var w=i;if((o=t).sa=Qo(o,o.H?o.ka:null,o.V),w.J){xs(o.h,w);var N=w,z=o.J;z&&N.setTimeout(z),N.B&&(Dr(N),ur(N)),o.g=w}else Bs(o);0<t.i.length&&zo(t)}else"stop"!=J[0]&&"close"!=J[0]||ai(t,7);else 3==t.G&&("stop"==J[0]||"close"==J[0]?"stop"==J[0]?ai(t,7):Gr(t):"noop"!=J[0]&&t.l&&t.l.wa(J),t.A=0)}os()}catch{}}function wn(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(fe(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ii(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(fe(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function Ta(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(fe(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),l=o.length,p=0;p<l;p++)e.call(void 0,o[p],t&&t[p],i)}(K=Yr.prototype).setTimeout=function(i){this.O=i},K.ib=function(i){i=i.target;const e=this.L;e&&3==G(i)?e.l():this.La(i)},K.La=function(i){try{if(i==this.g)e:{const ye=G(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ye)&&(3!=ye||Cn||this.g&&(this.h.h||this.g.fa()||H(this.g)))){this.I||4!=ye||7==e||os(),Dr(this);var t=this.g.aa();this.Y=t;t:if(zt(this)){var o=H(this.g);i="";var l=o.length,p=4==G(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Si(this),Mr(this);var w="";break t}this.h.i=new Z.TextDecoder}for(e=0;e<l;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:p&&e==l-1});o.splice(0,l),this.h.g+=i,this.C=0,w=this.h.g}else w=this.g.fa();if(this.i=200==t,function Zn(i,e,t,o,l,p,w){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+l+"]: "+e+"\n"+t+"\n"+p+" "+w})}(this.j,this.u,this.A,this.m,this.U,ye,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var N,z=this.g;if((N=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qe(N)){var J=N;break t}}J=null}if(!(t=J)){this.i=!1,this.o=3,Bt(12),Si(this),Mr(this);break e}hn(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ri(this,t)}this.P?(Jt(this,ye,w),Cn&&this.i&&3==ye&&(nt(this.S,this.T,"tick",this.hb),this.T.start())):(hn(this.j,this.m,w,null),ri(this,w)),4==ye&&Si(this),this.i&&!this.I&&(4==ye?Ki(this.l,this):(this.i=!1,ur(this)))}else 400==t&&0<w.indexOf("Unknown SID")?(this.o=3,Bt(12)):(this.o=0,Bt(13)),Si(this),Mr(this)}}}catch{}},K.hb=function(){if(this.g){var i=G(this.g),e=this.g.fa();this.C<e.length&&(Dr(this),Jt(this,i,e),this.i&&4!=i&&ur(this))}},K.cancel=function(){this.I=!0,Si(this)},K.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function fr(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(os(),Bt(17)),Si(this),this.o=2,Mr(this)):hi(this,this.V-i)};var Ps=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gi(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Gi){this.h=void 0!==e?e:i.h,ro(this,i.j),this.s=i.s,this.g=i.g,bi(this,i.m),this.l=i.l,e=i.i;var t=new yo;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Os(this,t),this.o=i.o}else i&&(t=String(i).match(Ps))?(this.h=!!e,ro(this,t[1]||"",!0),this.s=Ks(t[2]||""),this.g=Ks(t[3]||"",!0),bi(this,t[4]),this.l=Ks(t[5]||"",!0),Os(this,t[6]||"",!0),this.o=Ks(t[7]||"")):(this.h=!!e,this.i=new yo(null,this.h))}function sr(i){return new Gi(i)}function ro(i,e,t){i.j=t?Ks(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function bi(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Os(i,e,t){e instanceof yo?(i.i=e,function jo(i,e){e&&!i.j&&(Qi(i),i.i=null,i.g.forEach(function(t,o){var l=o.toLowerCase();o!=l&&(as(this,o),Hr(this,l,t))},i)),i.j=e}(i.i,i.h)):(t||(e=io(e,Wi)),i.i=new yo(e,i.h))}function Gn(i,e,t){i.i.set(e,t)}function mo(i){return Gn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ks(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function io(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,bl),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function bl(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Gi.prototype.toString=function(){var i=[],e=this.j;e&&i.push(io(e,Bo,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(io(e,Bo,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(io(t,"/"==t.charAt(0)?So:To,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",io(t,Sa)),i.join("")};var Bo=/[#\/\?@]/g,To=/[#\?:]/g,So=/[#\?]/g,Wi=/[#\?@]/g,Sa=/#/g;function yo(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Qi(i){i.g||(i.g=new Map,i.h=0,i.i&&function zs(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),l=null;if(0<=o){var p=i[t].substring(0,o);l=i[t].substring(o+1)}else p=i[t];e(p,l?decodeURIComponent(l.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function as(i,e){Qi(i),e=_o(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function so(i,e){return Qi(i),e=_o(i,e),i.g.has(e)}function Hr(i,e,t){as(i,e),0<t.length&&(i.i=null,i.g.set(_o(i,e),Ze(t)),i.h+=t.length)}function _o(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function oo(i){this.l=i||vo,i=Z.PerformanceNavigationTiming?0<(i=Z.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Z.g&&Z.g.Ga&&Z.g.Ga()&&Z.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(K=yo.prototype).add=function(i,e){Qi(this),this.i=null,i=_o(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},K.forEach=function(i,e){Qi(this),this.g.forEach(function(t,o){t.forEach(function(l){i.call(e,l,o,this)},this)},this)},K.oa=function(){Qi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const l=i[o];for(let p=0;p<l.length;p++)t.push(e[o])}return t},K.W=function(i){Qi(this);let e=[];if("string"==typeof i)so(this,i)&&(e=e.concat(this.g.get(_o(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},K.set=function(i,e){return Qi(this),this.i=null,so(this,i=_o(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},K.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},K.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const p=encodeURIComponent(String(o)),w=this.W(o);for(o=0;o<w.length;o++){var l=p;""!==w[o]&&(l+="="+encodeURIComponent(String(w[o]))),i.push(l)}}return this.i=i.join("&")};var vo=10;function gs(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Ss(i){return i.h?1:i.g?i.g.size:0}function kn(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Eo(i,e){i.g?i.g.add(e):i.h=e}function xs(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Ba(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Ze(i.i)}function Pr(){}function Zi(){this.g=new Pr}function Ho(i,e,t){const o=t||"";try{wn(i,function(l,p){let w=l;Le(l)&&(w=Ot(l)),e.push(o+p+"="+encodeURIComponent(w))})}catch(l){throw e.push(o+"type="+encodeURIComponent("_badmap")),l}}function ao(i,e,t,o,l){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,l(o)}catch{}}function ls(i){this.l=i.ac||null,this.j=i.jb||!1}function $r(i,e){Je.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=ms,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}oo.prototype.cancel=function(){if(this.i=Ba(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Pr.prototype.stringify=function(i){return Z.JSON.stringify(i,void 0)},Pr.prototype.parse=function(i){return Z.JSON.parse(i,void 0)},Ue(ls,er),ls.prototype.g=function(){return new $r(this.l,this.j)},ls.prototype.i=function(i){return function(){return i}}({}),Ue($r,Je);var ms=0;function $o(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function Ei(i){i.readyState=4,i.l=null,i.j=null,i.A=null,us(i)}function us(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(K=$r.prototype).open=function(i,e){if(this.readyState!=ms)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,us(this)},K.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||Z).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},K.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ei(this)),this.readyState=ms},K.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,us(this)),this.g&&(this.readyState=3,us(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Z.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$o(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},K.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Ei(this):us(this),3==this.readyState&&$o(this)}},K.Va=function(i){this.g&&(this.response=this.responseText=i,Ei(this))},K.Ua=function(i){this.g&&(this.response=i,Ei(this))},K.ga=function(){this.g&&Ei(this)},K.setRequestHeader=function(i,e){this.v.append(i,e)},K.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},K.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty($r.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Go=Z.JSON.parse;function Tr(i){Je.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qi,this.K=this.L=!1}Ue(Tr,Je);var qi="",bo=/^https?$/i,Ns=["POST","PUT"];function Ys(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,ja(i),Un(i)}function ja(i){i.D||(i.D=!0,be(i,"complete"),be(i,"error"))}function Ao(i){if(i.h&&typeof ne<"u"&&(!i.C[1]||4!=G(i)||2!=i.aa()))if(i.v&&4==G(i))sn(i.Ha,0,i);else if(be(i,"readystatechange"),4==G(i)){i.h=!1;try{const N=i.aa();e:switch(N){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===N){var l=String(i.H).match(Ps)[1]||null;if(!l&&Z.self&&Z.self.location){var p=Z.self.location.protocol;l=p.substr(0,p.length-1)}o=!bo.test(l?l.toLowerCase():"")}t=o}if(t)be(i,"complete"),be(i,"success");else{i.m=6;try{var w=2<G(i)?i.g.statusText:""}catch{w=""}i.j=w+" ["+i.aa()+"]",ja(i)}}finally{Un(i)}}}function Un(i,e){if(i.g){Wo(i);const t=i.g,o=i.C[0]?le:null;i.g=null,i.C=null,e||be(i,"ready");try{t.onreadystatechange=o}catch{}}}function Wo(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(Z.clearTimeout(i.A),i.A=null)}function G(i){return i.g?i.g.readyState:0}function H(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case qi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function k(i){let e="";return wr(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function ce(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=k(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Gn(i,e,t))}function et(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function ln(i){this.Ca=0,this.i=[],this.j=new Xt,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=et("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=et("baseRetryDelayMs",5e3,i),this.bb=et("retryDelaySeedMs",1e4,i),this.$a=et("forwardChannelMaxRetries",2,i),this.ta=et("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new oo(i&&i.concurrentRequestLimit),this.Fa=new Zi,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Gr(i){if(cr(i),3==i.G){var e=i.U++,t=sr(i.F);Gn(t,"SID",i.I),Gn(t,"RID",e),Gn(t,"TYPE","terminate"),Ha(i,t),(e=new Yr(i,i.j,e,void 0)).K=2,e.v=mo(sr(t)),t=!1,Z.navigator&&Z.navigator.sendBeacon&&(t=Z.navigator.sendBeacon(e.v.toString(),"")),!t&&Z.Image&&((new Image).src=e.v,t=!0),t||(e.g=ys(e.l,null),e.g.da(e.v)),e.F=Date.now(),ur(e)}_a(i)}function yt(i){i.g&&(Ko(i),i.g.cancel(),i.g=null)}function cr(i){yt(i),i.u&&(Z.clearTimeout(i.u),i.u=null),Vi(i),i.h.cancel(),i.m&&("number"==typeof i.m&&Z.clearTimeout(i.m),i.m=null)}function zo(i){gs(i.h)||i.m||(i.m=!0,Ft(i.Ja,i),i.C=0)}function zi(i,e){var t;t=e?e.m:i.U++;const o=sr(i.F);Gn(o,"SID",i.I),Gn(o,"RID",t),Gn(o,"AID",i.T),Ha(i,o),i.o&&i.s&&ce(o,i.o,i.s),t=new Yr(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=Ri(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),Eo(i.h,t),mt(t,o,e)}function Ha(i,e){i.ia&&wr(i.ia,function(t,o){Gn(e,o,t)}),i.l&&wn({},function(t,o){Gn(e,o,t)})}function Ri(i,e,t){t=Math.min(i.i.length,t);var o=i.l?Ke(i.l.Ra,i.l,i):null;e:{var l=i.i;let p=-1;for(;;){const w=["count="+t];-1==p?0<t?(p=l[0].h,w.push("ofs="+p)):p=0:w.push("ofs="+p);let N=!0;for(let z=0;z<t;z++){let J=l[z].h;const ye=l[z].g;if(J-=p,0>J)p=Math.max(0,l[z].h-100),N=!1;else try{Ho(ye,w,"req"+J+"_")}catch{o&&o(ye)}}if(N){o=w.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function Bs(i){i.g||i.u||(i.Z=1,Ft(i.Ia,i),i.A=0)}function Mo(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=mn(Ke(i.Ia,i),xi(i,i.A)),i.A++,0))}function Ko(i){null!=i.B&&(Z.clearTimeout(i.B),i.B=null)}function Yo(i){i.g=new Yr(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=sr(i.sa);Gn(e,"RID","rpc"),Gn(e,"SID",i.I),Gn(e,"CI",i.L?"0":"1"),Gn(e,"AID",i.T),Gn(e,"TYPE","xmlhttp"),Ha(i,e),i.o&&i.s&&ce(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=mo(sr(e)),t.s=null,t.P=!0,Ht(t,i)}function Vi(i){null!=i.v&&(Z.clearTimeout(i.v),i.v=null)}function Ki(i,e){var t=null;if(i.g==e){Vi(i),Ko(i),i.g=null;var o=2}else{if(!kn(i.h,e))return;t=e.D,xs(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var l=i.C;be(o=Ms(),new bn(o,t)),zo(i)}else Bs(i);else if(3==(l=e.o)||0==l&&0<i.pa||!(1==o&&function Al(i,e){return!(Ss(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=mn(Ke(i.Ja,i,e),xi(i,i.C)),i.C++,0)))}(i,e)||2==o&&Mo(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),l){case 1:ai(i,5);break;case 4:ai(i,10);break;case 3:ai(i,6);break;default:ai(i,2)}}function xi(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function ai(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=Ke(i.kb,i);t||(t=new Gi("//www.google.com/images/cleardot.gif"),Z.location&&"http"==Z.location.protocol||ro(t,"https"),mo(t)),function vi(i,e){const t=new Xt;if(Z.Image){const o=new Image;o.onload=it(ao,t,o,"TestLoadImage: loaded",!0,e),o.onerror=it(ao,t,o,"TestLoadImage: error",!1,e),o.onabort=it(ao,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=it(ao,t,o,"TestLoadImage: timeout",!1,e),Z.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else Bt(2);i.G=0,i.l&&i.l.va(e),_a(i),cr(i)}function _a(i){if(i.G=0,i.la=[],i.l){const e=Ba(i.h);(0!=e.length||0!=i.i.length)&&(Pt(i.la,e),Pt(i.la,i.i),i.h.i.length=0,Ze(i.i),i.i.length=0),i.l.ua()}}function Qo(i,e,t){var o=t instanceof Gi?sr(t):new Gi(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),bi(o,o.m);else{var l=Z.location;o=l.protocol,e=e?e+"."+l.hostname:l.hostname,l=+l.port;var p=new Gi(null,void 0);o&&ro(p,o),e&&(p.g=e),l&&bi(p,l),t&&(p.l=t),o=p}return e=i.za,(t=i.D)&&e&&Gn(o,t,e),Gn(o,"VER",i.ma),Ha(i,o),o}function ys(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Tr(t&&i.Da&&!i.ra?new ls({jb:!0}):i.ra)).Ka(i.H),e}function ba(){}function Zo(){if(Kt&&!(10<=Number(qn)))throw Error("Environmental error: no available transport.")}function Bi(i,e){Je.call(this),this.g=new ln(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!qe(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qe(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Xi(this)}function Do(i){_i.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function lo(){xn.call(this),this.status=1}function Xi(i){this.g=i}(K=Tr.prototype).Ka=function(i){this.L=i},K.da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Er.g(),this.C=function yr(i){return i.h||(i.h=i.i())}(this.u?this.u:Er),this.g.onreadystatechange=Ke(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(p){return void Ys(this,p)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var l in o)t.set(l,o[l]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const p of o.keys())t.set(p,o.get(p))}o=Array.from(t.keys()).find(p=>"content-type"==p.toLowerCase()),l=Z.FormData&&i instanceof Z.FormData,!(0<=It(Ns,e))||o||l||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[p,w]of t)this.g.setRequestHeader(p,w);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Wo(this),0<this.B&&((this.K=function Za(i){return Kt&&function _t(){return function rr(i){var e=Ve;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=lt(String(pn)).split("."),t=lt("9").split("."),o=Math.max(e.length,t.length);for(let w=0;0==i&&w<o;w++){var l=e[w]||"",p=t[w]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],0==l[0].length&&0==p[0].length)break;i=Xe(0==l[1].length?0:parseInt(l[1],10),0==p[1].length?0:parseInt(p[1],10))||Xe(0==l[2].length,0==p[2].length)||Xe(l[2],p[2]),l=l[3],p=p[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ke(this.qa,this)):this.A=sn(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(p){Ys(this,p)}},K.qa=function(){typeof ne<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,be(this,"timeout"),this.abort(8))},K.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,be(this,"complete"),be(this,"abort"),Un(this))},K.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Un(this,!0)),Tr.X.M.call(this)},K.Ha=function(){this.s||(this.F||this.v||this.l?Ao(this):this.fb())},K.fb=function(){Ao(this)},K.aa=function(){try{return 2<G(this)?this.g.status:-1}catch{return-1}},K.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},K.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Go(e)}},K.Ea=function(){return this.m},K.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(K=ln.prototype).ma=8,K.G=1,K.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const l=new Yr(this,this.j,i,void 0);let p=this.s;if(this.S&&(p?(p=br(p),Yn(p,this.S)):p=this.S),null!==this.o||this.N||(l.H=p,p=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ri(this,l,e),Gn(t=sr(this.F),"RID",i),Gn(t,"CVER",22),this.D&&Gn(t,"X-HTTP-Session-Id",this.D),Ha(this,t),p&&(this.N?e="headers="+encodeURIComponent(String(k(p)))+"&"+e:this.o&&ce(t,this.o,p)),Eo(this.h,l),this.Ya&&Gn(t,"TYPE","init"),this.O?(Gn(t,"$req",e),Gn(t,"SID","null"),l.Z=!0,mt(l,t,null)):mt(l,t,e),this.G=2}}else 3==this.G&&(i?zi(this,i):0==this.i.length||gs(this.h)||zi(this))},K.Ia=function(){if(this.u=null,Yo(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=mn(Ke(this.eb,this),i)}},K.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Bt(10),yt(this),Yo(this))},K.cb=function(){null!=this.v&&(this.v=null,yt(this),Mo(this),Bt(19))},K.kb=function(i){i?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))},(K=ba.prototype).xa=function(){},K.wa=function(){},K.va=function(){},K.ua=function(){},K.Ra=function(){},Zo.prototype.g=function(i,e){return new Bi(i,e)},Ue(Bi,Je),Bi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;Bt(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Qo(i,null,i.V),zo(i)},Bi.prototype.close=function(){Gr(this.g)},Bi.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Ot(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&zo(e)},Bi.prototype.M=function(){this.g.l=null,delete this.j,Gr(this.g),delete this.g,Bi.X.M.call(this)},Ue(Do,_i),Ue(lo,xn),Ue(Xi,ba),Xi.prototype.xa=function(){be(this.g,"a")},Xi.prototype.wa=function(i){be(this.g,new Do(i))},Xi.prototype.va=function(i){be(this.g,new lo)},Xi.prototype.ua=function(){be(this.g,"b")},Zo.prototype.createWebChannel=Zo.prototype.g,Bi.prototype.send=Bi.prototype.u,Bi.prototype.open=Bi.prototype.m,Bi.prototype.close=Bi.prototype.close,An.NO_ERROR=0,An.TIMEOUT=8,An.HTTP_ERROR=6,In.COMPLETE="complete",Ar.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",Je.prototype.listen=Je.prototype.N,Tr.prototype.listenOnce=Tr.prototype.O,Tr.prototype.getLastError=Tr.prototype.Oa,Tr.prototype.getLastErrorCode=Tr.prototype.Ea,Tr.prototype.getStatus=Tr.prototype.aa,Tr.prototype.getResponseJson=Tr.prototype.Sa,Tr.prototype.getResponseText=Tr.prototype.fa,Tr.prototype.send=Tr.prototype.da,Tr.prototype.setWithCredentials=Tr.prototype.Ka;var qo=te.createWebChannelTransport=function(){return new Zo},qa=te.getStatEventTarget=function(){return Ms()},Ml=te.ErrorCode=An,li=te.EventType=In,js=te.Event=ti,Xo=te.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},$a=te.FetchXmlHttpFactory=ls,Ga=te.WebChannel=Ar,Xa=te.XhrIo=Tr;const Jo="@firebase/firestore";class Ji{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ji.UNAUTHENTICATED=new Ji(null),Ji.GOOGLE_CREDENTIALS=new Ji("google-credentials-uid"),Ji.FIRST_PARTY=new Ji("first-party-uid"),Ji.MOCK_USER=new Ji("mock-user");let Qs="9.17.1";const Di=new B.Yd("@firebase/firestore");function _s(){return Di.logLevel}function Ut(i,...e){if(Di.logLevel<=B.in.DEBUG){const t=e.map(Pl);Di.debug(`Firestore (${Qs}): ${i}`,...t)}}function Ai(i,...e){if(Di.logLevel<=B.in.ERROR){const t=e.map(Pl);Di.error(`Firestore (${Qs}): ${i}`,...t)}}function ea(i,...e){if(Di.logLevel<=B.in.WARN){const t=e.map(Pl);Di.warn(`Firestore (${Qs}): ${i}`,...t)}}function Pl(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function yn(i="Unexpected state"){const e=`FIRESTORE (${Qs}) INTERNAL ASSERTION FAILED: `+i;throw Ai(e),new Error(e)}function Tn(i,e){i||yn()}function en(i,e){return i}const ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class P extends q.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Q{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class V{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ue{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ji.UNAUTHENTICATED))}shutdown(){}}class we{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pt{constructor(e){this.t=e,this.currentUser=Ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let l=this.i;const p=J=>this.i!==l?(l=this.i,t(J)):Promise.resolve();let w=new Q;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new Q,e.enqueueRetryable(()=>p(this.currentUser))};const N=()=>{const J=w;e.enqueueRetryable((0,f.Z)(function*(){yield J.promise,yield p(o.currentUser)}))},z=J=>{Ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=J,this.auth.addAuthTokenListener(this.o),N()};this.t.onInit(J=>z(J)),setTimeout(()=>{if(!this.auth){const J=this.t.getImmediate({optional:!0});J?z(J):(Ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new Q)}},0),N()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(Ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Tn("string"==typeof o.accessToken),new V(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tn(null===e||"string"==typeof e),new Ji(e)}}class Dt{constructor(e,t,o,l){this.h=e,this.l=t,this.m=o,this.g=l,this.type="FirstParty",this.user=Ji.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Tn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class nn{constructor(e,t,o,l){this.h=e,this.l=t,this.m=o,this.g=l}getToken(){return Promise.resolve(new Dt(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ji.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nr{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=p=>{null!=p.error&&Ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const w=p.token!==this.A;return this.A=p.token,Ut("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?t(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>o(p))};const l=p=>{Ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.T.onInit(p=>l(p)),setTimeout(()=>{if(!this.appCheck){const p=this.T.getImmediate({optional:!0});p?l(p):Ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tn("string"==typeof t.token),this.A=t.token,new Xr(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function gr(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class Wn{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const l=gr(40);for(let p=0;p<l.length;++p)o.length<20&&l[p]<t&&(o+=e.charAt(l[p]%e.length))}return o}}function on(i,e){return i<e?-1:i>e?1:0}function kr(i,e,t){return i.length===e.length&&i.every((o,l)=>t(o,e[l]))}function uo(i){return i+"\0"}class mr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mr.fromMillis(Date.now())}static fromDate(e){return mr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new mr(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?on(this.nanoseconds,e.nanoseconds):on(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vn(e)}static min(){return new vn(new mr(0,0))}static max(){return new vn(new mr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class es{constructor(e,t,o){void 0===t?t=0:t>e.length&&yn(),void 0===o?o=e.length-t:o>e.length-t&&yn(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===es.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof es?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let l=0;l<o;l++){const p=e.get(l),w=t.get(l);if(p<w)return-1;if(p>w)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class jn extends es{construct(e,t,o){return new jn(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new P(ft.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(l=>l.length>0))}return new jn(t)}static emptyPath(){return new jn([])}}const ta=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lr extends es{construct(e,t,o){return new Lr(e,t,o)}static isValidIdentifier(e){return ta.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Lr(["__name__"])}static fromServerFormat(e){const t=[];let o="",l=0;const p=()=>{if(0===o.length)throw new P(ft.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let w=!1;for(;l<e.length;){const N=e[l];if("\\"===N){if(l+1===e.length)throw new P(ft.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const z=e[l+1];if("\\"!==z&&"."!==z&&"`"!==z)throw new P(ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=z,l+=2}else"`"===N?(w=!w,l++):"."!==N||w?(o+=N,l++):(p(),l++)}if(p(),w)throw new P(ft.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lr(t)}static emptyPath(){return new Lr([])}}class Yt{constructor(e){this.path=e}static fromPath(e){return new Yt(jn.fromString(e))}static fromName(e){return new Yt(jn.fromString(e).popFirst(5))}static empty(){return new Yt(jn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===jn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return jn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Yt(new jn(e.slice()))}}class co{constructor(e,t,o,l){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=l}}function Aa(i){return i.fields.find(e=>2===e.kind)}function na(i){return i.fields.filter(e=>2!==e.kind)}co.UNKNOWN_ID=-1;class vs{constructor(e,t){this.fieldPath=e,this.kind=t}}class ra{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ra(0,Hs.min())}}function ul(i){return new Hs(i.readTime,i.key,-1)}class Hs{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Hs(vn.min(),Yt.empty(),-1)}static max(){return new Hs(vn.max(),Yt.empty(),-1)}}function Ol(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Yt.comparator(i.documentKey,e.documentKey),0!==t?t:on(i.largestBatchId,e.largestBatchId))}const ou="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class au{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Po(i){return Ja.apply(this,arguments)}function Ja(){return Ja=(0,f.Z)(function*(i){if(i.code!==ft.FAILED_PRECONDITION||i.message!==ou)throw i;Ut("LocalStore","Unexpectedly lost primary lease")}),Ja.apply(this,arguments)}class st{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&yn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new st((o,l)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(o,l)},this.catchCallback=p=>{this.wrapFailure(t,p).next(o,l)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof st?t:st.resolve(t)}catch(t){return st.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):st.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):st.reject(t)}static resolve(e){return new st((t,o)=>{t(e)})}static reject(e){return new st((t,o)=>{o(e)})}static waitFor(e){return new st((t,o)=>{let l=0,p=0,w=!1;e.forEach(N=>{++l,N.next(()=>{++p,w&&p===l&&t()},z=>o(z))}),w=!0,p===l&&t()})}static or(e){let t=st.resolve(!1);for(const o of e)t=t.next(l=>l?st.resolve(l):o());return t}static forEach(e,t){const o=[];return e.forEach((l,p)=>{o.push(t.call(this,l,p))}),this.waitFor(o)}static mapArray(e,t){return new st((o,l)=>{const p=e.length,w=new Array(p);let N=0;for(let z=0;z<p;z++){const J=z;t(e[J]).next(ye=>{w[J]=ye,++N,N===p&&o(w)},ye=>l(ye))}})}static doWhile(e,t){return new st((o,l)=>{const p=()=>{!0===e()?t().next(()=>{p()},l):o()};p()})}}class Pa{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Q,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new ts(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const l=Ql(o.target.error);this.P.reject(new ts(e,l))}}static open(e,t,o,l){try{return new Pa(t,e.transaction(l,o))}catch(p){throw new ts(t,p)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ut("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new cl(t)}}class bs{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===bs.D((0,q.z$)())&&Ai("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ut("SimpleDb","Removing database:",e),Oo(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,q.hl)())return!1;if(bs.N())return!0;const e=(0,q.z$)(),t=bs.D(e),o=0<t&&t<10,l=bs.k(e),p=0<l&&l<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||p)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,f.Z)(function*(){return t.db||(Ut("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,l)=>{const p=indexedDB.open(t.name,t.version);p.onsuccess=w=>{o(w.target.result)},p.onblocked=()=>{l(new ts(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=w=>{const N=w.target.error;l("VersionError"===N.name?new P(ft.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===N.name?new P(ft.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+N):new ts(e,N))},p.onupgradeneeded=w=>{Ut("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',w.oldVersion),t.S.$(w.target.result,p.transaction,w.oldVersion,t.version).next(()=>{Ut("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,l){var p=this;return(0,f.Z)(function*(){const w="readonly"===t;let N=0;for(;;){++N;try{p.db=yield p.F(e);const z=Pa.open(p.db,e,w?"readonly":"readwrite",o),J=l(z).next(ye=>(z.V(),ye)).catch(ye=>(z.abort(ye),st.reject(ye))).toPromise();return J.catch(()=>{}),yield z.v,J}catch(z){const J=z,ye="FirebaseError"!==J.name&&N<3;if(Ut("SimpleDb","Transaction failed with error:",J.message,"Retrying:",ye),p.close(),!ye)return Promise.reject(J)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Rl{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Oo(this.q.delete())}}class ts extends P{constructor(e,t){super(ft.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Es(i){return"IndexedDbTransactionError"===i.name}class cl{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(Ut("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(Ut("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Oo(o)}add(e){return Ut("SimpleDb","ADD",this.store.name,e,e),Oo(this.store.add(e))}get(e){return Oo(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ut("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ut("SimpleDb","DELETE",this.store.name,e),Oo(this.store.delete(e))}count(){return Ut("SimpleDb","COUNT",this.store.name),Oo(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const l=this.cursor(o),p=[];return this.H(l,(w,N)=>{p.push(N)}).next(()=>p)}{const l=this.store.getAll(o.range);return new st((p,w)=>{l.onerror=N=>{w(N.target.error)},l.onsuccess=N=>{p(N.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new st((l,p)=>{o.onerror=w=>{p(w.target.error)},o.onsuccess=w=>{l(w.target.result)}})}Y(e,t){Ut("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const l=this.cursor(o);return this.H(l,(p,w,N)=>N.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const l=this.cursor(o);return this.H(l,t)}tt(e){const t=this.cursor({});return new st((o,l)=>{t.onerror=p=>{const w=Ql(p.target.error);l(w)},t.onsuccess=p=>{const w=p.target.result;w?e(w.primaryKey,w.value).next(N=>{N?w.continue():o()}):o()}})}H(e,t){const o=[];return new st((l,p)=>{e.onerror=w=>{p(w.target.error)},e.onsuccess=w=>{const N=w.target.result;if(!N)return void l();const z=new Rl(N),J=t(N.primaryKey,N.value,z);if(J instanceof st){const ye=J.catch(Pe=>(z.done(),st.reject(Pe)));o.push(ye)}z.isDone?l():null===z.G?N.continue():N.continue(z.G)}}).next(()=>st.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Oo(i){return new st((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const l=Ql(o.target.error);t(l)}})}let el=!1;function Ql(i){const e=bs.D((0,q.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return el||(el=!0,setTimeout(()=>{throw o},0)),o}}return i}class dl{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ut("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,f.Z)(function*(){t.task=null;try{Ut("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){Es(o)?Ut("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield Po(o)}yield t.nt(6e4)}))}}class Wa{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,f.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let l=t,p=!0;return st.doWhile(()=>!0===p&&l>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!o.has(w))return Ut("IndexBackiller",`Processing collection: ${w}`),this.rt(e,w,l).next(N=>{l-=N,o.add(w)});p=!1})).next(()=>t-l)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(l=>this.localStore.localDocuments.getNextDocuments(e,t,l,o).next(p=>{const w=p.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.ot(l,p)).next(N=>(Ut("IndexBackiller",`Updating offset: ${N}`),this.localStore.indexManager.updateCollectionGroup(e,t,N))).next(()=>w.size)}))}ot(e,t){let o=e;return t.changes.forEach((l,p)=>{const w=ul(p);Ol(w,o)>0&&(o=w)}),new Hs(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ls=(()=>{class i{constructor(t,o){this.previousValue=t,o&&(o.sequenceNumberHandler=l=>this.ut(l),this.ct=l=>o.writeSequenceNumber(l))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return i.at=-1,i})();class Fs{constructor(e,t,o,l,p,w,N,z){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=l,this.ssl=p,this.forceLongPolling=w,this.autoDetectLongPolling=N,this.useFetchStreams=z}}class Ro{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ro("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ro&&e.projectId===this.projectId&&e.database===this.database}}function Zs(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function qs(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function ia(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Co(i){return null==i}function Oa(i){return 0===i&&1/i==-1/0}class Ci{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ci(t)}static fromUint8Array(e){const t=function(o){let l="";for(let p=0;p<o.length;++p)l+=String.fromCharCode(o[p]);return l}(e);return new Ci(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return on(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ci.EMPTY_BYTE_STRING=new Ci("");const Jr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Da(i){if(Tn(!!i),"string"==typeof i){let e=0;const t=Jr.exec(i);if(Tn(!!t),t[1]){let l=t[1];l=(l+"000000000").substr(0,9),e=Number(l)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:ui(i.seconds),nanos:ui(i.nanos)}}function ui(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function hl(i){return"string"==typeof i?Ci.fromBase64String(i):Ci.fromUint8Array(i)}function xo(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ra(i){const e=i.mapValue.fields.__previous_value__;return xo(e)?Ra(e):e}function tl(i){const e=Da(i.mapValue.fields.__local_write_time__.timestampValue);return new mr(e.seconds,e.nanos)}const nl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sa={nullValue:"NULL_VALUE"};function oa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?xo(i)?4:Sr(i)?9007199254740991:10:yn()}function cs(i,e){if(i===e)return!0;const t=oa(i);if(t!==oa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return tl(i).isEqual(tl(e));case 3:return function(o,l){if("string"==typeof o.timestampValue&&"string"==typeof l.timestampValue&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const p=Da(o.timestampValue),w=Da(l.timestampValue);return p.seconds===w.seconds&&p.nanos===w.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return l=e,hl(i.bytesValue).isEqual(hl(l.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,l){return ui(o.geoPointValue.latitude)===ui(l.geoPointValue.latitude)&&ui(o.geoPointValue.longitude)===ui(l.geoPointValue.longitude)}(i,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return ui(o.integerValue)===ui(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const p=ui(o.doubleValue),w=ui(l.doubleValue);return p===w?Oa(p)===Oa(w):isNaN(p)&&isNaN(w)}return!1}(i,e);case 9:return kr(i.arrayValue.values||[],e.arrayValue.values||[],cs);case 10:return function(o,l){const p=o.mapValue.fields||{},w=l.mapValue.fields||{};if(Zs(p)!==Zs(w))return!1;for(const N in p)if(p.hasOwnProperty(N)&&(void 0===w[N]||!cs(p[N],w[N])))return!1;return!0}(i,e);default:return yn()}var l}function Wr(i,e){return void 0!==(i.values||[]).find(t=>cs(t,e))}function A(i,e){if(i===e)return 0;const t=oa(i),o=oa(e);if(t!==o)return on(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return on(i.booleanValue,e.booleanValue);case 2:return function(l,p){const w=ui(l.integerValue||l.doubleValue),N=ui(p.integerValue||p.doubleValue);return w<N?-1:w>N?1:w===N?0:isNaN(w)?isNaN(N)?0:-1:1}(i,e);case 3:return O(i.timestampValue,e.timestampValue);case 4:return O(tl(i),tl(e));case 5:return on(i.stringValue,e.stringValue);case 6:return function(l,p){const w=hl(l),N=hl(p);return w.compareTo(N)}(i.bytesValue,e.bytesValue);case 7:return function(l,p){const w=l.split("/"),N=p.split("/");for(let z=0;z<w.length&&z<N.length;z++){const J=on(w[z],N[z]);if(0!==J)return J}return on(w.length,N.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,p){const w=on(ui(l.latitude),ui(p.latitude));return 0!==w?w:on(ui(l.longitude),ui(p.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(l,p){const w=l.values||[],N=p.values||[];for(let z=0;z<w.length&&z<N.length;++z){const J=A(w[z],N[z]);if(J)return J}return on(w.length,N.length)}(i.arrayValue,e.arrayValue);case 10:return function(l,p){if(l===nl.mapValue&&p===nl.mapValue)return 0;if(l===nl.mapValue)return 1;if(p===nl.mapValue)return-1;const w=l.fields||{},N=Object.keys(w),z=p.fields||{},J=Object.keys(z);N.sort(),J.sort();for(let ye=0;ye<N.length&&ye<J.length;++ye){const Pe=on(N[ye],J[ye]);if(0!==Pe)return Pe;const ut=A(w[N[ye]],z[J[ye]]);if(0!==ut)return ut}return on(N.length,J.length)}(i.mapValue,e.mapValue);default:throw yn()}}function O(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return on(i,e);const t=Da(i),o=Da(e),l=on(t.seconds,o.seconds);return 0!==l?l:on(t.nanos,o.nanos)}function T(i){return F(i)}function F(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const l=Da(o);return`time(${l.seconds},${l.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?hl(i.bytesValue).toBase64():"referenceValue"in i?Yt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let l="[",p=!0;for(const w of o.values||[])p?p=!1:l+=",",l+=F(w);return l+"]"}(i.arrayValue):"mapValue"in i?function(o){const l=Object.keys(o.fields||{}).sort();let p="{",w=!0;for(const N of l)w?w=!1:p+=",",p+=`${N}:${F(o.fields[N])}`;return p+"}"}(i.mapValue):yn();var e}function W(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function oe(i){return!!i&&"integerValue"in i}function pe(i){return!!i&&"arrayValue"in i}function He(i){return!!i&&"nullValue"in i}function bt(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function tn(i){return!!i&&"mapValue"in i}function un(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return qs(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=un(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=un(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Sr(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ur(i){return"nullValue"in i?sa:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?W(Ro.empty(),Yt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:yn()}function Ds(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?W(Ro.empty(),Yt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?nl:yn()}function fi(i,e){const t=A(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function xa(i,e){const t=A(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class ji{constructor(e,t){this.position=e,this.inclusive=t}}function za(i,e,t){let o=0;for(let l=0;l<i.position.length;l++){const p=e[l],w=i.position[l];if(o=p.field.isKeyField()?Yt.comparator(Yt.fromName(w.referenceValue),t.key):A(w,t.data.field(p.field)),"desc"===p.dir&&(o*=-1),0!==o)break}return o}function Ca(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!cs(i.position[t],e.position[t]))return!1;return!0}class fl{}class Or extends fl{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,o):new Gu(e,t,o):"array-contains"===t?new ql(e,o):"in"===t?new Ya(e,o):"not-in"===t?new Na(e,o):"array-contains-any"===t?new Fl(e,o):new Or(e,t,o)}static createKeyFieldInFilter(e,t,o){return"in"===t?new Zl(e,o):new Ka(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(A(t,this.value)):null!==t&&oa(this.value)===oa(t)&&this.matchesComparison(A(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class pi extends fl{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new pi(e,t)}matches(e){return rl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function rl(i){return"and"===i.op}function pl(i){return"or"===i.op}function gl(i){return ml(i)&&rl(i)}function ml(i){for(const e of i.filters)if(e instanceof pi)return!1;return!0}function Ia(i){if(i instanceof Or)return i.field.canonicalString()+i.op.toString()+T(i.value);if(gl(i))return i.filters.map(e=>Ia(e)).join(",");{const e=i.filters.map(t=>Ia(t)).join(",");return`${i.op}(${e})`}}function Nl(i,e){return i instanceof Or?(t=i,(o=e)instanceof Or&&t.op===o.op&&t.field.isEqual(o.field)&&cs(t.value,o.value)):i instanceof pi?function(t,o){return o instanceof pi&&t.op===o.op&&t.filters.length===o.filters.length&&t.filters.reduce((l,p,w)=>l&&Nl(p,o.filters[w]),!0)}(i,e):void yn();var t,o}function aa(i,e){const t=i.filters.concat(e);return pi.create(t,i.op)}function Ll(i){return i instanceof Or?`${(e=i).field.canonicalString()} ${e.op} ${T(e.value)}`:i instanceof pi?function(e){return e.op.toString()+" {"+e.getFilters().map(Ll).join(" ,")+"}"}(i):"Filter";var e}class Gu extends Or{constructor(e,t,o){super(e,t,o),this.key=Yt.fromName(o.referenceValue)}matches(e){const t=Yt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Zl extends Or{constructor(e,t){super(e,"in",t),this.keys=lu(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ka extends Or{constructor(e,t){super(e,"not-in",t),this.keys=lu(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lu(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>Yt.fromName(o.referenceValue))}class ql extends Or{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pe(t)&&Wr(t.arrayValue,this.value)}}class Ya extends Or{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Wr(this.value.arrayValue,t)}}class Na extends Or{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Wr(this.value.arrayValue,t)}}class Fl extends Or{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pe(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>Wr(this.value.arrayValue,o))}}class La{constructor(e,t="asc"){this.field=e,this.dir=t}}function uc(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Ni{constructor(e,t){this.comparator=e,this.root=t||As.EMPTY}insert(e,t){return new Ni(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,As.BLACK,null,null))}remove(e){return new Ni(this.comparator,this.root.remove(e,this.comparator).copy(null,null,As.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const l=this.comparator(e,o.key);if(0===l)return t+o.left.size;l<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new la(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new la(this.root,e,this.comparator,!1)}getReverseIterator(){return new la(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new la(this.root,e,this.comparator,!0)}}class la{constructor(e,t,o,l){this.isReverse=l,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=t?o(e.key,t):1,t&&l&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class As{constructor(e,t,o,l,p){this.key=e,this.value=t,this.color=o??As.RED,this.left=l??As.EMPTY,this.right=p??As.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,l,p){return new As(e??this.key,t??this.value,o??this.color,l??this.left,p??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let l=this;const p=o(e,l.key);return l=p<0?l.copy(null,null,null,l.left.insert(e,t,o),null):0===p?l.copy(null,t,null,null,null):l.copy(null,null,null,null,l.right.insert(e,t,o)),l.fixUp()}removeMin(){if(this.left.isEmpty())return As.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,l=this;if(t(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,t),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),0===t(e,l.key)){if(l.right.isEmpty())return As.EMPTY;o=l.right.min(),l=l.copy(o.key,o.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,t))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,As.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,As.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw yn();const e=this.left.check();if(e!==this.right.check())throw yn();return e+(this.isRed()?0:1)}}As.EMPTY=null,As.RED=!0,As.BLACK=!1,As.EMPTY=new class{constructor(){this.size=0}get key(){throw yn()}get value(){throw yn()}get color(){throw yn()}get left(){throw yn()}get right(){throw yn()}copy(i,e,t,o,l){return this}insert(i,e,t){return new As(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mi{constructor(e){this.comparator=e,this.data=new Ni(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const l=o.getNext();if(this.comparator(l.key,e[1])>=0)return;t(l.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new kl(this.data.getIterator())}getIteratorFrom(e){return new kl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof mi)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const l=t.getNext().key,p=o.getNext().key;if(0!==this.comparator(l,p))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mi(this.comparator);return t.data=e,t}}class kl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xs(i){return i.hasNext()?i.getNext():void 0}class Cs{constructor(e){this.fields=e,e.sort(Lr.comparator)}static empty(){return new Cs([])}unionWith(e){let t=new mi(Lr.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new Cs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kr(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class $s{constructor(e){this.value=e}static empty(){return new $s({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!tn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=un(t)}setAll(e){let t=Lr.emptyPath(),o={},l=[];e.forEach((w,N)=>{if(!t.isImmediateParentOf(N)){const z=this.getFieldsMap(t);this.applyChanges(z,o,l),o={},l=[],t=N.popLast()}w?o[N.lastSegment()]=un(w):l.push(N.lastSegment())});const p=this.getFieldsMap(t);this.applyChanges(p,o,l)}delete(e){const t=this.field(e.popLast());tn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let l=t.mapValue.fields[e.get(o)];tn(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=l),t=l}return t.mapValue.fields}applyChanges(e,t,o){qs(t,(l,p)=>e[l]=p);for(const l of o)delete e[l]}clone(){return new $s(un(this.value))}}function uu(i){const e=[];return qs(i.fields,(t,o)=>{const l=new Lr([t]);if(tn(o)){const p=uu(o.mapValue).fields;if(0===p.length)e.push(l);else for(const w of p)e.push(l.child(w))}else e.push(l)}),new Cs(e)}class ci{constructor(e,t,o,l,p,w,N){this.key=e,this.documentType=t,this.version=o,this.readTime=l,this.createTime=p,this.data=w,this.documentState=N}static newInvalidDocument(e){return new ci(e,0,vn.min(),vn.min(),vn.min(),$s.empty(),0)}static newFoundDocument(e,t,o,l){return new ci(e,1,t,vn.min(),o,l,0)}static newNoDocument(e,t){return new ci(e,2,t,vn.min(),vn.min(),$s.empty(),0)}static newUnknownDocument(e,t){return new ci(e,3,t,vn.min(),vn.min(),$s.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$s.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$s.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ci&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ci(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cu{constructor(e,t=null,o=[],l=[],p=null,w=null,N=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=l,this.limit=p,this.startAt=w,this.endAt=N,this.ft=null}}function Ul(i,e=null,t=[],o=[],l=null,p=null,w=null){return new cu(i,e,t,o,l,p,w)}function yl(i){const e=en(i);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>Ia(o)).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(l=o).field.canonicalString()+l.dir;var l}).join(","),Co(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>T(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>T(o)).join(",")),e.ft=t}return e.ft}function fo(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!uc(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Nl(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ca(i.startAt,e.startAt)&&Ca(i.endAt,e.endAt)}function Fa(i){return Yt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Vl(i,e){return i.filters.filter(t=>t instanceof Or&&t.field.isEqual(e))}function du(i,e,t){let o=sa,l=!0;for(const p of Vl(i,e)){let w=sa,N=!0;switch(p.op){case"<":case"<=":w=Ur(p.value);break;case"==":case"in":case">=":w=p.value;break;case">":w=p.value,N=!1;break;case"!=":case"not-in":w=sa}fi({value:o,inclusive:l},{value:w,inclusive:N})<0&&(o=w,l=N)}if(null!==t)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const w=t.position[p];fi({value:o,inclusive:l},{value:w,inclusive:t.inclusive})<0&&(o=w,l=t.inclusive);break}return{value:o,inclusive:l}}function Wu(i,e,t){let o=nl,l=!0;for(const p of Vl(i,e)){let w=nl,N=!0;switch(p.op){case">=":case">":w=Ds(p.value),N=!1;break;case"==":case"in":case"<=":w=p.value;break;case"<":w=p.value,N=!1;break;case"!=":case"not-in":w=nl}xa({value:o,inclusive:l},{value:w,inclusive:N})>0&&(o=w,l=N)}if(null!==t)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const w=t.position[p];xa({value:o,inclusive:l},{value:w,inclusive:t.inclusive})>0&&(o=w,l=t.inclusive);break}return{value:o,inclusive:l}}class Hi{constructor(e,t=null,o=[],l=[],p=null,w="F",N=null,z=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=l,this.limit=p,this.limitType=w,this.startAt=N,this.endAt=z,this.dt=null,this._t=null}}function Xl(i){return new Hi(i)}function zu(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Ku(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Bl(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Tu(i){return null!==i.collectionGroup}function ua(i){const e=en(i);if(null===e.dt){e.dt=[];const t=Bl(e),o=Ku(e);if(null!==t&&null===o)t.isKeyField()||e.dt.push(new La(t)),e.dt.push(new La(Lr.keyField(),"asc"));else{let l=!1;for(const p of e.explicitOrderBy)e.dt.push(p),p.field.isKeyField()&&(l=!0);if(!l){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new La(Lr.keyField(),p))}}}return e.dt}function ds(i){const e=en(i);if(!e._t)if("F"===e.limitType)e._t=Ul(e.path,e.collectionGroup,ua(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const p of ua(e))t.push(new La(p.field,"desc"===p.dir?"asc":"desc"));const o=e.endAt?new ji(e.endAt.position,e.endAt.inclusive):null,l=e.startAt?new ji(e.startAt.position,e.startAt.inclusive):null;e._t=Ul(e.path,e.collectionGroup,t,e.filters,e.limit,o,l)}return e._t}function Jl(i,e){e.getFirstInequalityField(),Bl(i);const t=i.filters.concat([e]);return new Hi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function jl(i,e,t){return new Hi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function _l(i,e){return fo(ds(i),ds(e))&&i.limitType===e.limitType}function No(i){return`${yl(ds(i))}|lt:${i.limitType}`}function Io(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(o=>Ll(o)).join(", ")}]`),Co(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(o=>{return`${(l=o).field.canonicalString()} (${l.dir})`;var l}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>T(o)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>T(o)).join(",")),`Target(${t})`}(ds(i))}; limitType=${i.limitType})`}function eu(i,e){return e.isFoundDocument()&&function(t,o){const l=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(l):Yt.isDocumentKey(t.path)?t.path.isEqual(l):t.path.isImmediateParentOf(l)}(i,e)&&function(t,o){for(const l of ua(t))if(!l.field.isKeyField()&&null===o.data.field(l.field))return!1;return!0}(i,e)&&function(t,o){for(const l of t.filters)if(!l.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(l,p,w){const N=za(l,p,w);return l.inclusive?N<=0:N<0}(t.startAt,ua(t),o)||t.endAt&&!function(l,p,w){const N=za(l,p,w);return l.inclusive?N>=0:N>0}(t.endAt,ua(t),o)));var t,o}function pu(i){return(e,t)=>{let o=!1;for(const l of ua(i)){const p=Su(l,e,t);if(0!==p)return p;o=o||l.field.isKeyField()}return 0}}function Su(i,e,t){const o=i.field.isKeyField()?Yt.comparator(e.key,t.key):function(l,p,w){const N=p.data.field(l),z=w.data.field(l);return null!==N&&null!==z?A(N,z):yn()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return yn()}}function gu(i,e){if(i.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oa(e)?"-0":e}}function bu(i){return{integerValue:""+i}}function Au(i,e){return function Ea(i){return"number"==typeof i&&Number.isInteger(i)&&!Oa(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}(e)?bu(e):gu(i,e)}class mu{constructor(){this._=void 0}}function Yu(i,e,t){return i instanceof il?function(o,l){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&(p.fields.__previous_value__=l),{mapValue:p}}(t,e):i instanceof Lo?Fo(i,e):i instanceof ns?sl(i,e):function(o,l){const p=Gs(o,l),w=tu(p)+tu(o.gt);return oe(p)&&oe(o.gt)?bu(w):gu(o.yt,w)}(i,e)}function Qu(i,e,t){return i instanceof Lo?Fo(i,e):i instanceof ns?sl(i,e):t}function Gs(i,e){return i instanceof ka?oe(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class il extends mu{}class Lo extends mu{constructor(e){super(),this.elements=e}}function Fo(i,e){const t=ol(e);for(const o of i.elements)t.some(l=>cs(l,o))||t.push(o);return{arrayValue:{values:t}}}class ns extends mu{constructor(e){super(),this.elements=e}}function sl(i,e){let t=ol(e);for(const o of i.elements)t=t.filter(l=>!cs(l,o));return{arrayValue:{values:t}}}class ka extends mu{constructor(e,t){super(),this.yt=e,this.gt=t}}function tu(i){return ui(i.integerValue||i.doubleValue)}function ol(i){return pe(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Hl{constructor(e,t){this.field=e,this.transform=t}}class y{constructor(e,t){this.version=e,this.transformResults=t}}class C{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new C}static exists(e){return new C(void 0,e)}static updateTime(e){return new C(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function L(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class se{}function _e(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new ht(i.key,C.none()):new $(i.key,i.data,C.none());{const t=i.data,o=$s.empty();let l=new mi(Lr.comparator);for(let p of e.fields)if(!l.has(p)){let w=t.field(p);null===w&&p.length>1&&(p=p.popLast(),w=t.field(p)),null===w?o.delete(p):o.set(p,w),l=l.add(p)}return new re(i.key,o,new Cs(l.toArray()),C.none())}}function E(i,e,t){i instanceof $?function(o,l,p){const w=o.value.clone(),N=Te(o.fieldTransforms,l,p.transformResults);w.setAll(N),l.convertToFoundDocument(p.version,w).setHasCommittedMutations()}(i,e,t):i instanceof re?function(o,l,p){if(!L(o.precondition,l))return void l.convertToUnknownDocument(p.version);const w=Te(o.fieldTransforms,l,p.transformResults),N=l.data;N.setAll(Ee(o)),N.setAll(w),l.convertToFoundDocument(p.version,N).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _(i,e,t,o){return i instanceof $?function(l,p,w,N){if(!L(l.precondition,p))return w;const z=l.value.clone(),J=tt(l.fieldTransforms,N,p);return z.setAll(J),p.convertToFoundDocument(p.version,z).setHasLocalMutations(),null}(i,e,t,o):i instanceof re?function(l,p,w,N){if(!L(l.precondition,p))return w;const z=tt(l.fieldTransforms,N,p),J=p.data;return J.setAll(Ee(l)),J.setAll(z),p.convertToFoundDocument(p.version,J).setHasLocalMutations(),null===w?null:w.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(ye=>ye.field))}(i,e,t,o):(w=t,L(i.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):w);var p,w}function g(i,e){let t=null;for(const o of i.fieldTransforms){const l=e.data.field(o.field),p=Gs(o.transform,l||null);null!=p&&(null===t&&(t=$s.empty()),t.set(o.field,p))}return t||null}function b(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&kr(t,o,(l,p)=>function R(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Lo&&o instanceof Lo||t instanceof ns&&o instanceof ns?kr(t.elements,o.elements,cs):t instanceof ka&&o instanceof ka?cs(t.gt,o.gt):t instanceof il&&o instanceof il);var t,o}(l,p))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class $ extends se{constructor(e,t,o,l=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class re extends se{constructor(e,t,o,l,p=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=l,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function Ee(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Te(i,e,t){const o=new Map;Tn(i.length===t.length);for(let l=0;l<t.length;l++){const p=i[l],w=p.transform,N=e.data.field(p.field);o.set(p.field,Qu(w,N,t[l]))}return o}function tt(i,e,t){const o=new Map;for(const l of i){const p=l.transform,w=t.data.field(l.field);o.set(l.field,Yu(p,w,e))}return o}class ht extends se{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lt extends se{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qt{constructor(e){this.count=e}}var rn,Gt;function Rn(i){if(void 0===i)return Ai("GRPC error has no .code"),ft.UNKNOWN;switch(i){case rn.OK:return ft.OK;case rn.CANCELLED:return ft.CANCELLED;case rn.UNKNOWN:return ft.UNKNOWN;case rn.DEADLINE_EXCEEDED:return ft.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return ft.RESOURCE_EXHAUSTED;case rn.INTERNAL:return ft.INTERNAL;case rn.UNAVAILABLE:return ft.UNAVAILABLE;case rn.UNAUTHENTICATED:return ft.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return ft.INVALID_ARGUMENT;case rn.NOT_FOUND:return ft.NOT_FOUND;case rn.ALREADY_EXISTS:return ft.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return ft.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return ft.FAILED_PRECONDITION;case rn.ABORTED:return ft.ABORTED;case rn.OUT_OF_RANGE:return ft.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return ft.UNIMPLEMENTED;case rn.DATA_LOSS:return ft.DATA_LOSS;default:return yn()}}(Gt=rn||(rn={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";class or{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[l,p]of o)if(this.equalsFn(l,e))return p}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),l=this.inner[o];if(void 0===l)return this.inner[o]=[[e,t]],void this.innerSize++;for(let p=0;p<l.length;p++)if(this.equalsFn(l[p][0],e))return void(l[p]=[e,t]);l.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return 1===o.length?delete this.inner[t]:o.splice(l,1),this.innerSize--,!0;return!1}forEach(e){qs(this.inner,(t,o)=>{for(const[l,p]of o)e(l,p)})}isEmpty(){return ia(this.inner)}size(){return this.innerSize}}const Mi=new Ni(Yt.comparator);function Rr(){return Mi}const ks=new Ni(Yt.comparator);function rs(...i){let e=ks;for(const t of i)e=e.insert(t.key,t);return e}function vl(i){let e=ks;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Is(){return Ua()}function po(){return Ua()}function Ua(){return new or(i=>i.toString(),(i,e)=>i.isEqual(e))}const El=new Ni(Yt.comparator),al=new mi(Yt.comparator);function ar(...i){let e=al;for(const t of i)e=e.add(t);return e}const ca=new mi(on);function ko(){return ca}class $l{constructor(e,t,o,l,p){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=l,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const l=new Map;return l.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new $l(vn.min(),l,ko(),Rr(),ar())}}class Mu{constructor(e,t,o,l,p){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=l,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Mu(o,t,ar(),ar(),ar())}}class Mn{constructor(e,t,o,l){this.It=e,this.removedTargetIds=t,this.key=o,this.Tt=l}}class Bn{constructor(e,t){this.targetId=e,this.Et=t}}class nr{constructor(e,t,o=Ci.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=l}}class Zr{constructor(){this.At=0,this.Rt=Uo(),this.bt=Ci.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=ar(),t=ar(),o=ar();return this.Rt.forEach((l,p)=>{switch(p){case 0:e=e.add(l);break;case 2:t=t.add(l);break;case 1:o=o.add(l);break;default:yn()}}),new Mu(this.bt,this.Pt,e,t,o)}xt(){this.vt=!1,this.Rt=Uo()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Js{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Rr(),this.qt=wa(),this.Ut=new mi(on)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const o=this.Wt(t);switch(e.state){case 0:this.zt(t)&&o.Dt(e.resumeToken);break;case 1:o.Mt(),o.Vt||o.xt(),o.Dt(e.resumeToken);break;case 2:o.Mt(),o.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(o.Ft(),o.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),o.Dt(e.resumeToken));break;default:yn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((o,l)=>{this.zt(l)&&t(l)})}Jt(e){const t=e.targetId,o=e.Et.count,l=this.Yt(t);if(l){const p=l.target;if(Fa(p))if(0===o){const w=new Yt(p.path);this.Qt(t,w,ci.newNoDocument(w,vn.min()))}else Tn(1===o);else this.Xt(t)!==o&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((p,w)=>{const N=this.Yt(w);if(N){if(p.current&&Fa(N.target)){const z=new Yt(N.target.path);null!==this.Lt.get(z)||this.te(w,z)||this.Qt(w,z,ci.newNoDocument(z,e))}p.St&&(t.set(w,p.Ct()),p.xt())}});let o=ar();this.qt.forEach((p,w)=>{let N=!0;w.forEachWhile(z=>{const J=this.Yt(z);return!J||2===J.purpose||(N=!1,!1)}),N&&(o=o.add(p))}),this.Lt.forEach((p,w)=>w.setReadTime(e));const l=new $l(e,t,this.Ut,this.Lt,o);return this.Lt=Rr(),this.qt=wa(),this.Ut=new mi(on),l}Gt(e,t){if(!this.zt(e))return;const o=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,o),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,o){if(!this.zt(e))return;const l=this.Wt(e);this.te(e,t)?l.Nt(t,1):l.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),o&&(this.Lt=this.Lt.insert(t,o))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new Zr,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new mi(on),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Ut("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new Zr),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function wa(){return new Ni(Yt.comparator)}function Uo(){return new Ni(Yt.comparator)}const Dl={asc:"ASCENDING",desc:"DESCENDING"},Yi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yu={and:"AND",or:"OR"};class Ad{constructor(e,t){this.databaseId=e,this.wt=t}}function hs(i,e){return i.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cl(i,e){return i.wt?e.toBase64():e.toUint8Array()}function da(i,e){return hs(i,e.toTimestamp())}function Li(i){return Tn(!!i),vn.fromTimestamp(function(e){const t=Da(e);return new mr(t.seconds,t.nanos)}(i))}function Pu(i,e){return(t=i,new jn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function mh(i){const e=jn.fromString(i);return Tn(vf(e)),e}function cc(i,e){return Pu(i.databaseId,e.path)}function nu(i,e){const t=mh(e);if(t.get(1)!==i.databaseId.projectId)throw new P(ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new P(ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Yt(jc(t))}function Md(i,e){return Pu(i.databaseId,e)}function yh(i){const e=mh(i);return 4===e.length?jn.emptyPath():jc(e)}function Zu(i){return new jn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function jc(i){return Tn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Hc(i,e,t){return{name:cc(i,e),fields:t.value.mapValue.fields}}function Pd(i,e){let t;if(e instanceof $)t={update:Hc(i,e.key,e.value)};else if(e instanceof ht)t={delete:cc(i,e.key)};else if(e instanceof re)t={update:Hc(i,e.key,e.data),updateMask:_f(e.fieldMask)};else{if(!(e instanceof Lt))return yn();t={verify:cc(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(l,p){const w=p.transform;if(w instanceof il)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof Lo)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof ns)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof ka)return{fieldPath:p.field.canonicalString(),increment:w.gt};throw yn()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(l=e.precondition).updateTime?{updateTime:da(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:yn()),t;var l}function Od(i,e){const t=e.currentDocument?void 0!==(l=e.currentDocument).updateTime?C.updateTime(Li(l.updateTime)):void 0!==l.exists?C.exists(l.exists):C.none():C.none(),o=e.updateTransforms?e.updateTransforms.map(l=>function(p,w){let N=null;"setToServerValue"in w?(Tn("REQUEST_TIME"===w.setToServerValue),N=new il):"appendMissingElements"in w?N=new Lo(w.appendMissingElements.values||[]):"removeAllFromArray"in w?N=new ns(w.removeAllFromArray.values||[]):"increment"in w?N=new ka(p,w.increment):yn();const z=Lr.fromServerFormat(w.fieldPath);return new Hl(z,N)}(i,l)):[];var l;if(e.update){const l=nu(i,e.update.name),p=new $s({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new Cs((e.updateMask.fieldPaths||[]).map(J=>Lr.fromServerFormat(J)));return new re(l,p,w,t,o)}return new $(l,p,t,o)}if(e.delete){const l=nu(i,e.delete);return new ht(l,t)}if(e.verify){const l=nu(i,e.verify);return new Lt(l,t)}return yn()}function Rd(i,e){return{documents:[Md(i,e.path)]}}function $c(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Md(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Md(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const l=function(z){if(0!==z.length)return Eh(pi.create(z,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const p=function(z){if(0!==z.length)return z.map(J=>{return{field:fc((ye=J).field),direction:_h(ye.dir)};var ye})}(e.orderBy);p&&(t.structuredQuery.orderBy=p);const w=(J=e.limit,i.wt||Co(J)?J:{value:J});var J,N,z;return null!==w&&(t.structuredQuery.limit=w),e.startAt&&(t.structuredQuery.startAt={before:(N=e.startAt).inclusive,values:N.position}),e.endAt&&(t.structuredQuery.endAt={before:!(z=e.endAt).inclusive,values:z.position}),t}function hc(i){let e=yh(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let l=null;if(o>0){Tn(1===o);const ye=t.from[0];ye.allDescendants?l=ye.collectionId:e=e.child(ye.collectionId)}let p=[];t.where&&(p=function(ye){const Pe=Nd(ye);return Pe instanceof pi&&gl(Pe)?Pe.getFilters():[Pe]}(t.where));let w=[];t.orderBy&&(w=t.orderBy.map(ye=>{return new La(pc((Pe=ye).field),function(ut){switch(ut){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Pe.direction));var Pe}));let N=null;t.limit&&(N=function(ye){let Pe;return Pe="object"==typeof ye?ye.value:ye,Co(Pe)?null:Pe}(t.limit));let z=null;var ye;t.startAt&&(z=new ji((ye=t.startAt).values||[],!!ye.before));let J=null;return t.endAt&&(J=function(ye){return new ji(ye.values||[],!ye.before)}(t.endAt)),function hu(i,e,t,o,l,p,w,N){return new Hi(i,e,t,o,l,p,w,N)}(e,l,w,p,N,"F",z,J)}function Nd(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=pc(e.unaryFilter.field);return Or.create(t,"==",{doubleValue:NaN});case"IS_NULL":const o=pc(e.unaryFilter.field);return Or.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=pc(e.unaryFilter.field);return Or.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=pc(e.unaryFilter.field);return Or.create(p,"!=",{nullValue:"NULL_VALUE"});default:return yn()}}(i):void 0!==i.fieldFilter?Or.create(pc((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return pi.create(e.compositeFilter.filters.map(t=>Nd(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return yn()}}(e.compositeFilter.op))}(i):yn();var e}function _h(i){return Dl[i]}function vh(i){return Yi[i]}function _u(i){return yu[i]}function fc(i){return{fieldPath:i.canonicalString()}}function pc(i){return Lr.fromServerFormat(i.fieldPath)}function Eh(i){return i instanceof Or?function(e){if("=="===e.op){if(bt(e.value))return{unaryFilter:{field:fc(e.field),op:"IS_NAN"}};if(He(e.value))return{unaryFilter:{field:fc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(bt(e.value))return{unaryFilter:{field:fc(e.field),op:"IS_NOT_NAN"}};if(He(e.value))return{unaryFilter:{field:fc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fc(e.field),op:vh(e.op),value:e.value}}}(i):i instanceof pi?function(e){const t=e.getFilters().map(o=>Eh(o));return 1===t.length?t[0]:{compositeFilter:{op:_u(e.op),filters:t}}}(i):yn()}function _f(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Us(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Dh(e)),e=gc(i.get(t),e);return Dh(e)}function gc(i,e){let t=e;const o=i.length;for(let l=0;l<o;l++){const p=i.charAt(l);switch(p){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=p}}return t}function Dh(i){return i+"\x01\x01"}function Gl(i){const e=i.length;if(Tn(e>=2),2===e)return Tn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),jn.emptyPath();const t=e-2,o=[];let l="";for(let p=0;p<e;){const w=i.indexOf("\x01",p);switch((w<0||w>t)&&yn(),i.charAt(w+1)){case"\x01":const N=i.substring(p,w);let z;0===l.length?z=N:(l+=N,z=l,l=""),o.push(z);break;case"\x10":l+=i.substring(p,w),l+="\0";break;case"\x11":l+=i.substring(p,w+1);break;default:yn()}p=w+2}return new jn(o)}const Ch=["userId","batchId"];function Gc(i,e){return[i,Us(e)]}function Ih(i,e,t){return[i,Us(e),t]}const lg={},Ef=["prefixPath","collectionGroup","readTime","documentId"],ug=["prefixPath","collectionGroup","documentId"],h=["collectionGroup","readTime","prefixPath","documentId"],u=["canonicalId","targetId"],c=["targetId","path"],v=["path","targetId"],M=["collectionId","parent"],j=["indexId","uid"],Y=["uid","sequenceNumber"],me=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ae=["indexId","uid","orderedDocumentKey"],Fe=["userId","collectionPath","documentId"],Et=["userId","collectionPath","largestBatchId"],wt=["userId","collectionGroup","largestBatchId"],Rt=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],En=[...Rt,"documentOverlays"],Kn=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ii=Kn,wo=[...Ii,"indexConfiguration","indexState","indexEntries"];class vu extends au{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Ws(i,e){const t=en(i);return bs.M(t.se,e)}class mc{constructor(e,t,o,l){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=l}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let l=0;l<this.mutations.length;l++){const p=this.mutations[l];p.key.isEqual(e.key)&&E(p,e,o[l])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=_(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=_(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=po();return this.mutations.forEach(l=>{const p=e.get(l.key),w=p.overlayedDocument;let N=this.applyToLocalView(w,p.mutatedFields);N=t.has(l.key)?null:N;const z=_e(w,N);null!==z&&o.set(l.key,z),w.isValidDocument()||w.convertToNoDocument(vn.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ar())}isEqual(e){return this.batchId===e.batchId&&kr(this.mutations,e.mutations,(t,o)=>b(t,o))&&kr(this.baseMutations,e.baseMutations,(t,o)=>b(t,o))}}class Ld{constructor(e,t,o,l){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=l}static from(e,t,o){Tn(e.mutations.length===o.length);let l=El;const p=e.mutations;for(let w=0;w<p.length;w++)l=l.insert(p[w].key,o[w].version);return new Ld(e,t,o,l)}}class wh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ru{constructor(e,t,o,l,p=vn.min(),w=vn.min(),N=Ci.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=l,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=N}withSequenceNumber(e){return new ru(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ru(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ru(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Df{constructor(e){this.ie=e}}function cg(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vs(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:cc(l=i.ie,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:hs(l,p.version.toTimestamp()),createTime:hs(l,p.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:Xu(e.version)};else{if(!e.isUnknownDocument())return yn();o.unknownDocument={path:t.path.toArray(),version:Xu(e.version)}}var l,p;return o}function Vs(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Xu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yc(i){const e=new mr(i.seconds,i.nanoseconds);return vn.fromTimestamp(e)}function Ou(i,e){const t=(e.baseMutations||[]).map(p=>Od(i.ie,p));for(let p=0;p<e.mutations.length-1;++p)p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(e.mutations[p].updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p);const o=e.mutations.map(p=>Od(i.ie,p)),l=mr.fromMillis(e.localWriteTimeMs);return new mc(e.batchId,l,t,o)}function _c(i){const e=yc(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?yc(i.lastLimboFreeSnapshotVersion):vn.min();let o;var l;return void 0!==i.query.documents?(Tn(1===(l=i.query).documents.length),o=ds(Xl(yh(l.documents[0])))):o=ds(hc(i.query)),new ru(o,i.targetId,0,i.lastListenSequenceNumber,e,t,Ci.fromBase64String(i.resumeToken))}function dg(i,e){const t=Xu(e.snapshotVersion),o=Xu(e.lastLimboFreeSnapshotVersion);let l;l=Fa(e.target)?Rd(i.ie,e.target):$c(i.ie,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yl(e.target),readTime:t,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:l}}function If(i){const e=hc({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?jl(e,e.limit,"L"):e}function wf(i,e){return new wh(e.largestBatchId,Od(i.ie,e.overlayMutation))}function hg(i,e){const t=e.path.lastSegment();return[i,Us(e.path.popLast()),t]}function Tf(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Xu(o.readTime),documentKey:Us(o.documentKey.path),largestBatchId:o.largestBatchId}}class F_{getBundleMetadata(e,t){return iy(e).get(t).next(o=>{if(o)return{id:(l=o).bundleId,createTime:yc(l.createTime),version:l.version};var l})}saveBundleMetadata(e,t){return iy(e).put({bundleId:(o=t).id,createTime:Xu(Li(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Wc(e).get(t).next(o=>{if(o)return{name:(l=o).name,query:If(l.bundledQuery),readTime:yc(l.readTime)};var l})}saveNamedQuery(e,t){return Wc(e).put({name:(o=t).name,readTime:Xu(Li(o.readTime)),bundledQuery:o.bundledQuery});var o}}function iy(i){return Ws(i,"bundles")}function Wc(i){return Ws(i,"namedQueries")}class zc{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new zc(e,t.uid||"")}getOverlay(e,t){return Kc(e).get(hg(this.userId,t)).next(o=>o?wf(this.yt,o):null)}getOverlays(e,t){const o=Is();return st.forEach(t,l=>this.getOverlay(e,l).next(p=>{null!==p&&o.set(l,p)})).next(()=>o)}saveOverlays(e,t,o){const l=[];return o.forEach((p,w)=>{const N=new wh(t,w);l.push(this.oe(e,N))}),st.waitFor(l)}removeOverlaysForBatchId(e,t,o){const l=new Set;t.forEach(w=>l.add(Us(w.getCollectionPath())));const p=[];return l.forEach(w=>{const N=IDBKeyRange.bound([this.userId,w,o],[this.userId,w,o+1],!1,!0);p.push(Kc(e).Y("collectionPathOverlayIndex",N))}),st.waitFor(p)}getOverlaysForCollection(e,t,o){const l=Is(),p=Us(t),w=IDBKeyRange.bound([this.userId,p,o],[this.userId,p,Number.POSITIVE_INFINITY],!0);return Kc(e).W("collectionPathOverlayIndex",w).next(N=>{for(const z of N){const J=wf(this.yt,z);l.set(J.getKey(),J)}return l})}getOverlaysForCollectionGroup(e,t,o,l){const p=Is();let w;const N=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kc(e).Z({index:"collectionGroupOverlayIndex",range:N},(z,J,ye)=>{const Pe=wf(this.yt,J);p.size()<l||Pe.largestBatchId===w?(p.set(Pe.getKey(),Pe),w=Pe.largestBatchId):ye.done()}).next(()=>p)}oe(e,t){return Kc(e).put(function(o,l,p){const[w,N,z]=hg(l,p.mutation.key);return{userId:l,collectionPath:N,documentId:z,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:Pd(o.ie,p.mutation)}}(this.yt,this.userId,t))}}function Kc(i){return Ws(i,"documentOverlays")}class Ju{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(ui(e.integerValue));else if("doubleValue"in e){const o=ui(e.doubleValue);isNaN(o)?this.he(t,13):(this.he(t,15),Oa(o)?t.le(0):t.le(o))}else if("timestampValue"in e){const o=e.timestampValue;this.he(t,20),"string"==typeof o?t.fe(o):(t.fe(`${o.seconds||""}`),t.le(o.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(hl(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.he(t,45),t.le(o.latitude||0),t.le(o.longitude||0)}else"mapValue"in e?Sr(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):yn()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const o=e.fields||{};this.he(t,55);for(const l of Object.keys(o))this.de(l,t),this.ce(o[l],t)}ye(e,t){const o=e.values||[];this.he(t,50);for(const l of o)this.ce(l,t)}me(e,t){this.he(t,37),Yt.fromName(e).path.forEach(o=>{this.he(t,60),this.pe(o,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function fg(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function pg(i){const e=64-function(t){let o=0;for(let l=0;l<8;++l){const p=fg(255&t[l]);if(o+=p,8!==p)break}return o}(i);return Math.ceil(e/8)}Ju.Ie=new Ju;class sy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ee(o.value),o=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.be(o.value),o=t.next();this.Pe()}ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ee(o);else if(o<2048)this.Ee(960|o>>>6),this.Ee(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|o>>>12),this.Ee(128|63&o>>>6),this.Ee(128|63&o);else{const l=t.codePointAt(0);this.Ee(240|l>>>18),this.Ee(128|63&l>>>12),this.Ee(128|63&l>>>6),this.Ee(128|63&l)}}this.Ae()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.be(o);else if(o<2048)this.be(960|o>>>6),this.be(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.be(480|o>>>12),this.be(128|63&o>>>6),this.be(128|63&o);else{const l=t.codePointAt(0);this.be(240|l>>>18),this.be(128|63&l>>>12),this.be(128|63&l>>>6),this.be(128|63&l)}}this.Pe()}Se(e){const t=this.De(e),o=pg(t);this.Ce(1+o),this.buffer[this.position++]=255&o;for(let l=t.length-o;l<t.length;++l)this.buffer[this.position++]=255&t[l]}xe(e){const t=this.De(e),o=pg(t);this.Ce(1+o),this.buffer[this.position++]=~(255&o);for(let l=t.length-o;l<t.length;++l)this.buffer[this.position++]=~(255&t[l])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(l){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,l,!1),new Uint8Array(p.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let l=1;l<t.length;++l)t[l]^=o?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const l=new Uint8Array(o);l.set(this.buffer),this.buffer=l}}class gg{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class mg{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class vc{constructor(){this.$e=new sy,this.Be=new gg(this.$e),this.Le=new mg(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Yc{constructor(e,t,o,l){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=l}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Yc(this.indexId,this.documentKey,this.arrayValue,o)}}function Eu(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=yg(i.arrayValue,e.arrayValue),0!==t?t:(t=yg(i.directionalValue,e.directionalValue),0!==t?t:Yt.comparator(i.documentKey,e.documentKey)))}function yg(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Sf{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const o=t;o.isInequality()?this.Qe=o:this.Ge.push(o)}}je(e){Tn(e.collectionGroup===this.collectionId);const t=Aa(e);if(void 0!==t&&!this.We(t))return!1;const o=na(e);let l=0,p=0;for(;l<o.length&&this.We(o[l]);++l);if(l===o.length)return!0;if(void 0!==this.Qe){const w=o[l];if(!this.ze(this.Qe,w)||!this.He(this.Ke[p++],w))return!1;++l}for(;l<o.length;++l)if(p>=this.Ke.length||!this.He(this.Ke[p++],o[l]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function bf(i){var e,t;if(Tn(i instanceof Or||i instanceof pi),i instanceof Or){if(i instanceof Ya){const l=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(p=>Or.create(i.field,"==",p)))||[];return pi.create(l,"or")}return i}const o=i.filters.map(l=>bf(l));return pi.create(o,i.op)}function _g(i){if(0===i.getFilters().length)return[];const e=Qc(bf(i));return Tn(Th(e)),Ru(e)||Af(e)?[e]:e.getFilters()}function Ru(i){return i instanceof Or}function Af(i){return i instanceof pi&&gl(i)}function Th(i){return Ru(i)||Af(i)||function(e){if(e instanceof pi&&pl(e)){for(const t of e.getFilters())if(!Ru(t)&&!Af(t))return!1;return!0}return!1}(i)}function Qc(i){if(Tn(i instanceof Or||i instanceof pi),i instanceof Or)return i;if(1===i.filters.length)return Qc(i.filters[0]);const e=i.filters.map(o=>Qc(o));let t=pi.create(e,i.op);return t=Ec(t),Th(t)?t:(Tn(t instanceof pi),Tn(rl(t)),Tn(t.filters.length>1),t.filters.reduce((o,l)=>Mf(o,l)))}function Mf(i,e){let t;return Tn(i instanceof Or||i instanceof pi),Tn(e instanceof Or||e instanceof pi),t=i instanceof Or?e instanceof Or?pi.create([i,e],"and"):Sh(i,e):e instanceof Or?Sh(e,i):function(o,l){if(Tn(o.filters.length>0&&l.filters.length>0),rl(o)&&rl(l))return aa(o,l.getFilters());const p=pl(o)?o:l,w=pl(o)?l:o,N=p.filters.map(z=>Mf(z,w));return pi.create(N,"or")}(i,e),Ec(t)}function Sh(i,e){if(rl(e))return aa(e,i.getFilters());{const t=e.filters.map(o=>Mf(i,o));return pi.create(t,"or")}}function Ec(i){if(Tn(i instanceof Or||i instanceof pi),i instanceof Or)return i;const e=i.getFilters();if(1===e.length)return Ec(e[0]);if(ml(i))return i;const t=e.map(l=>Ec(l)),o=[];return t.forEach(l=>{l instanceof Or?o.push(l):l instanceof pi&&(l.op===i.op?o.push(...l.filters):o.push(l))}),1===o.length?o[0]:pi.create(o,i.op)}class Dc{constructor(){this.Je=new bh}addToCollectionParentIndex(e,t){return this.Je.add(t),st.resolve()}getCollectionParents(e,t){return st.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return st.resolve()}deleteFieldIndex(e,t){return st.resolve()}getDocumentsMatchingTarget(e,t){return st.resolve(null)}getIndexType(e,t){return st.resolve(0)}getFieldIndexes(e,t){return st.resolve([])}getNextCollectionGroupToUpdate(e){return st.resolve(null)}getMinOffset(e,t){return st.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,t){return st.resolve(Hs.min())}updateCollectionGroup(e,t,o){return st.resolve()}updateIndexEntries(e,t){return st.resolve()}}class bh{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),l=this.index[t]||new mi(jn.comparator),p=!l.has(o);return this.index[t]=l.add(o),p}has(e){const t=e.lastSegment(),o=e.popLast(),l=this.index[t];return l&&l.has(o)}getEntries(e){return(this.index[e]||new mi(jn.comparator)).toArray()}}const Zc=new Uint8Array(0);class oy{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new bh,this.Xe=new or(o=>yl(o),(o,l)=>fo(o,l)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const o=t.lastSegment(),l=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const p={collectionId:o,parent:Us(l)};return vg(e).put(p)}return st.resolve()}getCollectionParents(e,t){const o=[],l=IDBKeyRange.bound([t,""],[uo(t),""],!1,!0);return vg(e).W(l).next(p=>{for(const w of p){if(w.collectionId!==t)break;o.push(Gl(w.parent))}return o})}addFieldIndex(e,t){const o=xu(e),l={indexId:(w=t).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var w;delete l.indexId;const p=o.add(l);if(t.indexState){const w=Fd(e);return p.next(N=>{w.put(Tf(N,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return p.next()}deleteFieldIndex(e,t){const o=xu(e),l=Fd(e),p=qc(e);return o.delete(t.indexId).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=qc(e);let l=!0;const p=new Map;return st.forEach(this.Ze(t),w=>this.tn(e,w).next(N=>{l&&(l=!!N),p.set(w,N)})).next(()=>{if(l){let w=ar();const N=[];return st.forEach(p,(z,J)=>{var ye;Ut("IndexedDbIndexManager",`Using index ${ye=z,`id=${ye.indexId}|cg=${ye.collectionGroup}|f=${ye.fields.map(wi=>`${wi.fieldPath}:${wi.kind}`).join(",")}`} to execute ${yl(t)}`);const Pe=function(wi,ma){const ps=Aa(ma);if(void 0===ps)return null;for(const $i of Vl(wi,ps.fieldPath))switch($i.op){case"array-contains-any":return $i.value.arrayValue.values||[];case"array-contains":return[$i.value]}return null}(J,z),ut=function(wi,ma){const ps=new Map;for(const $i of na(ma))for(const ya of Vl(wi,$i.fieldPath))switch(ya.op){case"==":case"in":ps.set($i.fieldPath.canonicalString(),ya.value);break;case"not-in":case"!=":return ps.set($i.fieldPath.canonicalString(),ya.value),Array.from(ps.values())}return null}(J,z),xt=function(wi,ma){const ps=[];let $i=!0;for(const ya of na(ma)){const Sd=0===ya.kind?du(wi,ya.fieldPath,wi.startAt):Wu(wi,ya.fieldPath,wi.startAt);ps.push(Sd.value),$i&&($i=Sd.inclusive)}return new ji(ps,$i)}(J,z),jt=function(wi,ma){const ps=[];let $i=!0;for(const ya of na(ma)){const Sd=0===ya.kind?Wu(wi,ya.fieldPath,wi.endAt):du(wi,ya.fieldPath,wi.endAt);ps.push(Sd.value),$i&&($i=Sd.inclusive)}return new ji(ps,$i)}(J,z),Dn=this.en(z,J,xt),Hn=this.en(z,J,jt),ws=this.nn(z,J,ut),fs=this.sn(z.indexId,Pe,Dn,xt.inclusive,Hn,jt.inclusive,ws);return st.forEach(fs,wi=>o.J(wi,t.limit).next(ma=>{ma.forEach(ps=>{const $i=Yt.fromSegments(ps.documentKey);w.has($i)||(w=w.add($i),N.push($i))})}))}).next(()=>N)}return st.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:_g(pi.create(e.filters,"and")).map(o=>Ul(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,o,l,p,w,N){const z=(null!=t?t.length:1)*Math.max(o.length,p.length),J=z/(null!=t?t.length:1),ye=[];for(let Pe=0;Pe<z;++Pe){const ut=t?this.rn(t[Pe/J]):Zc,xt=this.on(e,ut,o[Pe%J],l),jt=this.un(e,ut,p[Pe%J],w),Dn=N.map(Hn=>this.on(e,ut,Hn,!0));ye.push(...this.createRange(xt,jt,Dn))}return ye}on(e,t,o,l){const p=new Yc(e,Yt.empty(),t,o);return l?p:p.Ue()}un(e,t,o,l){const p=new Yc(e,Yt.empty(),t,o);return l?p.Ue():p}tn(e,t){const o=new Sf(t),l=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,l).next(p=>{let w=null;for(const N of p)o.je(N)&&(!w||N.fields.length>w.fields.length)&&(w=N);return w})}getIndexType(e,t){let o=2;const l=this.Ze(t);return st.forEach(l,p=>this.tn(e,p).next(w=>{w?0!==o&&w.fields.length<function(N){let z=new mi(Lr.comparator),J=!1;for(const ye of N.filters)for(const Pe of ye.getFlattenedFilters())Pe.field.isKeyField()||("array-contains"===Pe.op||"array-contains-any"===Pe.op?J=!0:z=z.add(Pe.field));for(const ye of N.orderBy)ye.field.isKeyField()||(z=z.add(ye.field));return z.size+(J?1:0)}(p)&&(o=1):o=0})).next(()=>null!==t.limit&&l.length>1&&2===o?1:o)}cn(e,t){const o=new vc;for(const l of na(e)){const p=t.data.field(l.fieldPath);if(null==p)return null;const w=o.qe(l.kind);Ju.Ie.ue(p,w)}return o.Fe()}rn(e){const t=new vc;return Ju.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const o=new vc;return Ju.Ie.ue(W(this.databaseId,t),o.qe(function(l){const p=na(l);return 0===p.length?0:p[p.length-1].kind}(e))),o.Fe()}nn(e,t,o){if(null===o)return[];let l=[];l.push(new vc);let p=0;for(const w of na(e)){const N=o[p++];for(const z of l)if(this.hn(t,w.fieldPath)&&pe(N))l=this.ln(l,w,N);else{const J=z.qe(w.kind);Ju.Ie.ue(N,J)}}return this.fn(l)}en(e,t,o){return this.nn(e,t,o.position)}fn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].Fe();return t}ln(e,t,o){const l=[...e],p=[];for(const w of o.arrayValue.values||[])for(const N of l){const z=new vc;z.seed(N.Fe()),Ju.Ie.ue(w,z.qe(t.kind)),p.push(z)}return p}hn(e,t){return!!e.filters.find(o=>o instanceof Or&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=xu(e),l=Fd(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(p=>{const w=[];return st.forEach(p,N=>l.get([N.indexId,this.uid]).next(z=>{w.push(function(J,ye){const Pe=ye?new ra(ye.sequenceNumber,new Hs(yc(ye.readTime),new Yt(Gl(ye.documentKey)),ye.largestBatchId)):ra.empty(),ut=J.fields.map(([xt,jt])=>new vs(Lr.fromServerFormat(xt),jt));return new co(J.indexId,J.collectionGroup,ut,Pe)}(N,z))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,l)=>{const p=o.indexState.sequenceNumber-l.indexState.sequenceNumber;return 0!==p?p:on(o.collectionGroup,l.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const l=xu(e),p=Fd(e);return this.dn(e).next(w=>l.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(N=>st.forEach(N,z=>p.put(Tf(z.indexId,this.user,w,o)))))}updateIndexEntries(e,t){const o=new Map;return st.forEach(t,(l,p)=>{const w=o.get(l.collectionGroup);return(w?st.resolve(w):this.getFieldIndexes(e,l.collectionGroup)).next(N=>(o.set(l.collectionGroup,N),st.forEach(N,z=>this._n(e,l,z).next(J=>{const ye=this.wn(p,z);return J.isEqual(ye)?st.resolve():this.mn(e,p,z,J,ye)}))))})}gn(e,t,o,l){return qc(e).put({indexId:l.indexId,uid:this.uid,arrayValue:l.arrayValue,directionalValue:l.directionalValue,orderedDocumentKey:this.an(o,t.key),documentKey:t.key.path.toArray()})}yn(e,t,o,l){return qc(e).delete([l.indexId,this.uid,l.arrayValue,l.directionalValue,this.an(o,t.key),t.key.path.toArray()])}_n(e,t,o){const l=qc(e);let p=new mi(Eu);return l.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.an(o,t)])},(w,N)=>{p=p.add(new Yc(o.indexId,t,N.arrayValue,N.directionalValue))}).next(()=>p)}wn(e,t){let o=new mi(Eu);const l=this.cn(t,e);if(null==l)return o;const p=Aa(t);if(null!=p){const w=e.data.field(p.fieldPath);if(pe(w))for(const N of w.arrayValue.values||[])o=o.add(new Yc(t.indexId,e.key,this.rn(N),l))}else o=o.add(new Yc(t.indexId,e.key,Zc,l));return o}mn(e,t,o,l,p){Ut("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const w=[];return function(N,z,J,ye,Pe){const ut=N.getIterator(),xt=z.getIterator();let jt=Xs(ut),Dn=Xs(xt);for(;jt||Dn;){let Hn=!1,ws=!1;if(jt&&Dn){const fs=J(jt,Dn);fs<0?ws=!0:fs>0&&(Hn=!0)}else null!=jt?ws=!0:Hn=!0;Hn?(ye(Dn),Dn=Xs(xt)):ws?(Pe(jt),jt=Xs(ut)):(jt=Xs(ut),Dn=Xs(xt))}}(l,p,Eu,N=>{w.push(this.gn(e,t,o,N))},N=>{w.push(this.yn(e,t,o,N))}),st.waitFor(w)}dn(e){let t=1;return Fd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,l,p)=>{p.done(),t=l.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((w,N)=>Eu(w,N)).filter((w,N,z)=>!N||0!==Eu(w,z[N-1]));const l=[];l.push(e);for(const w of o){const N=Eu(w,e),z=Eu(w,t);if(0===N)l[0]=e.Ue();else if(N>0&&z<0)l.push(w),l.push(w.Ue());else if(z>0)break}l.push(t);const p=[];for(let w=0;w<l.length;w+=2){if(this.pn(l[w],l[w+1]))return[];p.push(IDBKeyRange.bound([l[w].indexId,this.uid,l[w].arrayValue,l[w].directionalValue,Zc,[]],[l[w+1].indexId,this.uid,l[w+1].arrayValue,l[w+1].directionalValue,Zc,[]]))}return p}pn(e,t){return Eu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Eg)}getMinOffset(e,t){return st.mapArray(this.Ze(t),o=>this.tn(e,o).next(l=>l||yn())).next(Eg)}}function vg(i){return Ws(i,"collectionParents")}function qc(i){return Ws(i,"indexEntries")}function xu(i){return Ws(i,"indexConfiguration")}function Fd(i){return Ws(i,"indexState")}function Eg(i){Tn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const l=i[o].indexState.offset;Ol(l,e)<0&&(e=l),t<l.largestBatchId&&(t=l.largestBatchId)}return new Hs(e.readTime,e.documentKey,t)}const Dg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Va{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Va(e,Va.DEFAULT_COLLECTION_PERCENTILE,Va.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Cg(i,e,t){const o=i.store("mutations"),l=i.store("documentMutations"),p=[],w=IDBKeyRange.only(t.batchId);let N=0;const z=o.Z({range:w},(ye,Pe,ut)=>(N++,ut.delete()));p.push(z.next(()=>{Tn(1===N)}));const J=[];for(const ye of t.mutations){const Pe=Ih(e,ye.key.path,t.batchId);p.push(l.delete(Pe)),J.push(ye.key)}return st.waitFor(p).next(()=>J)}function kd(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw yn();e=i.noDocument}return JSON.stringify(e).length}Va.DEFAULT_COLLECTION_PERCENTILE=10,Va.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Va.DEFAULT=new Va(41943040,Va.DEFAULT_COLLECTION_PERCENTILE,Va.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Va.DISABLED=new Va(-1,0,0);class Ah{constructor(e,t,o,l){this.userId=e,this.yt=t,this.indexManager=o,this.referenceDelegate=l,this.In={}}static re(e,t,o,l){Tn(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new Ah(p,t,o,l)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cc(e).Z({index:"userMutationsIndex",range:o},(l,p,w)=>{t=!1,w.done()}).next(()=>t)}addMutationBatch(e,t,o,l){const p=Xc(e),w=Cc(e);return w.add({}).next(N=>{Tn("number"==typeof N);const z=new mc(N,t,o,l),J=function(ut,xt,jt){const Dn=jt.baseMutations.map(ws=>Pd(ut.ie,ws)),Hn=jt.mutations.map(ws=>Pd(ut.ie,ws));return{userId:xt,batchId:jt.batchId,localWriteTimeMs:jt.localWriteTime.toMillis(),baseMutations:Dn,mutations:Hn}}(this.yt,this.userId,z),ye=[];let Pe=new mi((ut,xt)=>on(ut.canonicalString(),xt.canonicalString()));for(const ut of l){const xt=Ih(this.userId,ut.key.path,N);Pe=Pe.add(ut.key.path.popLast()),ye.push(w.put(J)),ye.push(p.put(xt,lg))}return Pe.forEach(ut=>{ye.push(this.indexManager.addToCollectionParentIndex(e,ut))}),e.addOnCommittedListener(()=>{this.In[N]=z.keys()}),st.waitFor(ye).next(()=>z)})}lookupMutationBatch(e,t){return Cc(e).get(t).next(o=>o?(Tn(o.userId===this.userId),Ou(this.yt,o)):null)}Tn(e,t){return this.In[t]?st.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const l=o.keys();return this.In[t]=l,l}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,l=IDBKeyRange.lowerBound([this.userId,o]);let p=null;return Cc(e).Z({index:"userMutationsIndex",range:l},(w,N,z)=>{N.userId===this.userId&&(Tn(N.batchId>=o),p=Ou(this.yt,N)),z.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Cc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(l,p,w)=>{o=p.batchId,w.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cc(e).W("userMutationsIndex",t).next(o=>o.map(l=>Ou(this.yt,l)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Gc(this.userId,t.path),l=IDBKeyRange.lowerBound(o),p=[];return Xc(e).Z({range:l},(w,N,z)=>{const[J,ye,Pe]=w,ut=Gl(ye);if(J===this.userId&&t.path.isEqual(ut))return Cc(e).get(Pe).next(xt=>{if(!xt)throw yn();Tn(xt.userId===this.userId),p.push(Ou(this.yt,xt))});z.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new mi(on);const l=[];return t.forEach(p=>{const w=Gc(this.userId,p.path),N=IDBKeyRange.lowerBound(w),z=Xc(e).Z({range:N},(J,ye,Pe)=>{const[ut,xt,jt]=J,Dn=Gl(xt);ut===this.userId&&p.path.isEqual(Dn)?o=o.add(jt):Pe.done()});l.push(z)}),st.waitFor(l).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,l=o.length+1,p=Gc(this.userId,o),w=IDBKeyRange.lowerBound(p);let N=new mi(on);return Xc(e).Z({range:w},(z,J,ye)=>{const[Pe,ut,xt]=z,jt=Gl(ut);Pe===this.userId&&o.isPrefixOf(jt)?jt.length===l&&(N=N.add(xt)):ye.done()}).next(()=>this.En(e,N))}En(e,t){const o=[],l=[];return t.forEach(p=>{l.push(Cc(e).get(p).next(w=>{if(null===w)throw yn();Tn(w.userId===this.userId),o.push(Ou(this.yt,w))}))}),st.waitFor(l).next(()=>o)}removeMutationBatch(e,t){return Cg(e.se,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),st.forEach(o,l=>this.referenceDelegate.markPotentiallyOrphaned(e,l))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return st.resolve();const o=IDBKeyRange.lowerBound([this.userId]),l=[];return Xc(e).Z({range:o},(p,w,N)=>{if(p[0]===this.userId){const z=Gl(p[1]);l.push(z)}else N.done()}).next(()=>{Tn(0===l.length)})})}containsKey(e,t){return Pf(e,this.userId,t)}Rn(e){return Jc(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Pf(i,e,t){const o=Gc(e,t.path),l=o[1],p=IDBKeyRange.lowerBound(o);let w=!1;return Xc(i).Z({range:p,X:!0},(N,z,J)=>{const[ye,Pe,ut]=N;ye===e&&Pe===l&&(w=!0),J.done()}).next(()=>w)}function Cc(i){return Ws(i,"mutations")}function Xc(i){return Ws(i,"documentMutations")}function Jc(i){return Ws(i,"mutationQueues")}class Ic{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Ic(0)}static vn(){return new Ic(-1)}}class ed{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new Ic(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>vn.fromTimestamp(new mr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(l=>(l.highestListenSequenceNumber=t,o&&(l.lastRemoteSnapshotVersion=o.toTimestamp()),t>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=t),this.Sn(e,l)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Du(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(Tn(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let l=0;const p=[];return Du(e).Z((w,N)=>{const z=_c(N);z.sequenceNumber<=t&&null===o.get(z.targetId)&&(l++,p.push(this.removeTargetData(e,z)))}).next(()=>st.waitFor(p)).next(()=>l)}forEachTarget(e,t){return Du(e).Z((o,l)=>{const p=_c(l);t(p)})}Vn(e){return Ig(e).get("targetGlobalKey").next(t=>(Tn(null!==t),t))}Sn(e,t){return Ig(e).put("targetGlobalKey",t)}Dn(e,t){return Du(e).put(dg(this.yt,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=yl(t),l=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let p=null;return Du(e).Z({range:l,index:"queryTargetsIndex"},(w,N,z)=>{const J=_c(N);fo(t,J.target)&&(p=J,z.done())}).next(()=>p)}addMatchingKeys(e,t,o){const l=[],p=Nu(e);return t.forEach(w=>{const N=Us(w.path);l.push(p.put({targetId:o,path:N})),l.push(this.referenceDelegate.addReference(e,o,w))}),st.waitFor(l)}removeMatchingKeys(e,t,o){const l=Nu(e);return st.forEach(t,p=>{const w=Us(p.path);return st.waitFor([l.delete([o,w]),this.referenceDelegate.removeReference(e,o,p)])})}removeMatchingKeysForTargetId(e,t){const o=Nu(e),l=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(l)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),l=Nu(e);let p=ar();return l.Z({range:o,X:!0},(w,N,z)=>{const J=Gl(w[1]),ye=new Yt(J);p=p.add(ye)}).next(()=>p)}containsKey(e,t){const o=Us(t.path),l=IDBKeyRange.bound([o],[uo(o)],!1,!0);let p=0;return Nu(e).Z({index:"documentTargetsIndex",X:!0,range:l},([w,N],z,J)=>{0!==w&&(p++,J.done())}).next(()=>p>0)}ne(e,t){return Du(e).get(t).next(o=>o?_c(o):null)}}function Du(i){return Ws(i,"targets")}function Ig(i){return Ws(i,"targetGlobal")}function Nu(i){return Ws(i,"targetDocuments")}function wg([i,e],[t,o]){const l=on(i,t);return 0===l?on(e,o):l}class ay{constructor(e){this.xn=e,this.buffer=new mi(wg),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();wg(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ly{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ut("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,f.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){Es(o)?Ut("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Po(o)}yield t.Fn(3e5)}))}}class Tg{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return st.resolve(Ls.at);const o=new ay(t);return this.$n.forEachTarget(e,l=>o.On(l.sequenceNumber)).next(()=>this.$n.Ln(e,l=>o.On(l))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ut("LruGarbageCollector","Garbage collection skipped; disabled"),st.resolve(Dg)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Ut("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dg):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let o,l,p,w,N,z,J;const ye=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Pe=>(Pe>this.params.maximumSequenceNumbersToCollect?(Ut("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Pe}`),l=this.params.maximumSequenceNumbersToCollect):l=Pe,w=Date.now(),this.nthSequenceNumber(e,l))).next(Pe=>(o=Pe,N=Date.now(),this.removeTargets(e,o,t))).next(Pe=>(p=Pe,z=Date.now(),this.removeOrphanedDocuments(e,o))).next(Pe=>(J=Date.now(),_s()<=B.in.DEBUG&&Ut("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-ye}ms\n\tDetermined least recently used ${l} in `+(N-w)+`ms\n\tRemoved ${p} targets in `+(z-N)+`ms\n\tRemoved ${Pe} documents in `+(J-z)+`ms\nTotal Duration: ${J-ye}ms`),st.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:p,documentsRemoved:Pe})))}}class Sg{constructor(e,t){this.db=e,this.garbageCollector=new Tg(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(l=>o+l))}Un(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,l)=>t(l))}addReference(e,t,o){return td(e,o)}removeReference(e,t,o){return td(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return td(e,t)}Gn(e,t){return function(o,l){let p=!1;return Jc(o).tt(w=>Pf(o,w,l).next(N=>(N&&(p=!0),st.resolve(!N)))).next(()=>p)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let p=0;return this.Kn(e,(w,N)=>{if(N<=t){const z=this.Gn(e,w).next(J=>{if(!J)return p++,o.getEntry(e,w).next(()=>(o.removeEntry(w,vn.min()),Nu(e).delete([0,Us(w.path)])))});l.push(z)}}).next(()=>st.waitFor(l)).next(()=>o.apply(e)).next(()=>p)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return td(e,t)}Kn(e,t){const o=Nu(e);let l,p=Ls.at;return o.Z({index:"documentTargetsIndex"},([w,N],{path:z,sequenceNumber:J})=>{0===w?(p!==Ls.at&&t(new Yt(Gl(l)),p),p=J,l=z):p=Ls.at}).next(()=>{p!==Ls.at&&t(new Yt(Gl(l)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function td(i,e){return Nu(i).put((o=i.currentSequenceNumber,{targetId:0,path:Us(e.path),sequenceNumber:o}));var o}class Mh{constructor(){this.changes=new or(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ci.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?st.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class uy{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return wc(e).put(o)}removeEntry(e,t,o){return wc(e).delete(function(l,p){const w=l.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],Vs(p),w[w.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=ci.newInvalidDocument(t);return wc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vd(t))},(l,p)=>{o=this.jn(t,p)}).next(()=>o)}Wn(e,t){let o={size:0,document:ci.newInvalidDocument(t)};return wc(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Vd(t))},(l,p)=>{o={document:this.jn(t,p),size:kd(p)}}).next(()=>o)}getEntries(e,t){let o=Rr();return this.zn(e,t,(l,p)=>{const w=this.jn(l,p);o=o.insert(l,w)}).next(()=>o)}Hn(e,t){let o=Rr(),l=new Ni(Yt.comparator);return this.zn(e,t,(p,w)=>{const N=this.jn(p,w);o=o.insert(p,N),l=l.insert(p,kd(w))}).next(()=>({documents:o,Jn:l}))}zn(e,t,o){if(t.isEmpty())return st.resolve();let l=new mi(Of);t.forEach(z=>l=l.add(z));const p=IDBKeyRange.bound(Vd(l.first()),Vd(l.last())),w=l.getIterator();let N=w.getNext();return wc(e).Z({index:"documentKeyIndex",range:p},(z,J,ye)=>{const Pe=Yt.fromSegments([...J.prefixPath,J.collectionGroup,J.documentId]);for(;N&&Of(N,Pe)<0;)o(N,null),N=w.getNext();N&&N.isEqual(Pe)&&(o(N,J),N=w.hasNext()?w.getNext():null),N?ye.j(Vd(N)):ye.done()}).next(()=>{for(;N;)o(N,null),N=w.hasNext()?w.getNext():null})}getDocumentsMatchingQuery(e,t,o,l){const p=t.path,w=[p.popLast().toArray(),p.lastSegment(),Vs(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],N=[p.popLast().toArray(),p.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return wc(e).W(IDBKeyRange.bound(w,N,!0)).next(z=>{let J=Rr();for(const ye of z){const Pe=this.jn(Yt.fromSegments(ye.prefixPath.concat(ye.collectionGroup,ye.documentId)),ye);Pe.isFoundDocument()&&(eu(t,Pe)||l.has(Pe.key))&&(J=J.insert(Pe.key,Pe))}return J})}getAllFromCollectionGroup(e,t,o,l){let p=Rr();const w=Ag(t,o),N=Ag(t,Hs.max());return wc(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,N,!0)},(z,J,ye)=>{const Pe=this.jn(Yt.fromSegments(J.prefixPath.concat(J.collectionGroup,J.documentId)),J);p=p.insert(Pe.key,Pe),p.size===l&&ye.done()}).next(()=>p)}newChangeBuffer(e){return new Ud(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return bg(e).get("remoteDocumentGlobalKey").next(t=>(Tn(!!t),t))}Qn(e,t){return bg(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function Cf(i,e){let t;if(e.document)t=function qu(i,e,t){const o=nu(i,e.name),l=Li(e.updateTime),p=e.createTime?Li(e.createTime):vn.min(),w=new $s({mapValue:{fields:e.fields}}),N=ci.newFoundDocument(o,l,p,w);return t&&N.setHasCommittedMutations(),t?N.setHasCommittedMutations():N}(i.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Yt.fromSegments(e.noDocument.path),l=yc(e.noDocument.readTime);t=ci.newNoDocument(o,l),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return yn();{const o=Yt.fromSegments(e.unknownDocument.path),l=yc(e.unknownDocument.version);t=ci.newUnknownDocument(o,l)}}return e.readTime&&t.setReadTime(function(o){const l=new mr(o[0],o[1]);return vn.fromTimestamp(l)}(e.readTime)),t}(this.yt,t);if(!o.isNoDocument()||!o.version.isEqual(vn.min()))return o}return ci.newInvalidDocument(e)}}function Ph(i){return new uy(i)}class Ud extends Mh{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new or(o=>o.toString(),(o,l)=>o.isEqual(l))}applyChanges(e){const t=[];let o=0,l=new mi((p,w)=>on(p.canonicalString(),w.canonicalString()));return this.changes.forEach((p,w)=>{const N=this.Xn.get(p);if(t.push(this.Yn.removeEntry(e,p,N.readTime)),w.isValidDocument()){const z=cg(this.Yn.yt,w);l=l.add(p.path.popLast());const J=kd(z);o+=J-N.size,t.push(this.Yn.addEntry(e,p,z))}else if(o-=N.size,this.trackRemovals){const z=cg(this.Yn.yt,w.convertToNoDocument(vn.min()));t.push(this.Yn.addEntry(e,p,z))}}),l.forEach(p=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,p))}),t.push(this.Yn.updateMetadata(e,o)),st.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:l})=>(l.forEach((p,w)=>{this.Xn.set(p,{size:w,readTime:o.get(p).readTime})}),o))}}function bg(i){return Ws(i,"remoteDocumentGlobal")}function wc(i){return Ws(i,"remoteDocumentsV14")}function Vd(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ag(i,e){const t=e.documentKey.path.toArray();return[i,Vs(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Of(i,e){const t=i.path.toArray(),o=e.path.toArray();let l=0;for(let p=0;p<t.length-2&&p<o.length-2;++p)if(l=on(t[p],o[p]),l)return l;return l=on(t.length,o.length),l||(l=on(t[t.length-2],o[o.length-2]),l||on(t[t.length-1],o[o.length-1]))}class Mg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Pg{constructor(e,t,o,l){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=l}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(l=>(o=l,this.remoteDocumentCache.getEntry(e,t))).next(l=>(null!==o&&_(o.mutation,l,Cs.empty(),mr.now()),l))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,ar()).next(()=>o))}getLocalViewOfDocuments(e,t,o=ar()){const l=Is();return this.populateOverlays(e,l,t).next(()=>this.computeViews(e,t,l,o).next(p=>{let w=rs();return p.forEach((N,z)=>{w=w.insert(N,z.overlayedDocument)}),w}))}getOverlayedDocuments(e,t){const o=Is();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,ar()))}populateOverlays(e,t,o){const l=[];return o.forEach(p=>{t.has(p)||l.push(p)}),this.documentOverlayCache.getOverlays(e,l).next(p=>{p.forEach((w,N)=>{t.set(w,N)})})}computeViews(e,t,o,l){let p=Rr();const w=Ua(),N=Ua();return t.forEach((z,J)=>{const ye=o.get(J.key);l.has(J.key)&&(void 0===ye||ye.mutation instanceof re)?p=p.insert(J.key,J):void 0!==ye?(w.set(J.key,ye.mutation.getFieldMask()),_(ye.mutation,J,ye.mutation.getFieldMask(),mr.now())):w.set(J.key,Cs.empty())}),this.recalculateAndSaveOverlays(e,p).next(z=>(z.forEach((J,ye)=>w.set(J,ye)),t.forEach((J,ye)=>{var Pe;return N.set(J,new Mg(ye,null!==(Pe=w.get(J))&&void 0!==Pe?Pe:null))}),N))}recalculateAndSaveOverlays(e,t){const o=Ua();let l=new Ni((w,N)=>w-N),p=ar();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(w=>{for(const N of w)N.keys().forEach(z=>{const J=t.get(z);if(null===J)return;let ye=o.get(z)||Cs.empty();ye=N.applyToLocalView(J,ye),o.set(z,ye);const Pe=(l.get(N.batchId)||ar()).add(z);l=l.insert(N.batchId,Pe)})}).next(()=>{const w=[],N=l.getReverseIterator();for(;N.hasNext();){const z=N.getNext(),J=z.key,ye=z.value,Pe=po();ye.forEach(ut=>{if(!p.has(ut)){const xt=_e(t.get(ut),o.get(ut));null!==xt&&Pe.set(ut,xt),p=p.add(ut)}}),w.push(this.documentOverlayCache.saveOverlays(e,J,Pe))}return st.waitFor(w)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return Yt.isDocumentKey((l=t).path)&&null===l.collectionGroup&&0===l.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Tu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var l}getNextDocuments(e,t,o,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,l).next(p=>{const w=l-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,l-p.size):st.resolve(Is());let N=-1,z=p;return w.next(J=>st.forEach(J,(ye,Pe)=>(N<Pe.largestBatchId&&(N=Pe.largestBatchId),p.get(ye)?st.resolve():this.remoteDocumentCache.getEntry(e,ye).next(ut=>{z=z.insert(ye,ut)}))).next(()=>this.populateOverlays(e,J,p)).next(()=>this.computeViews(e,z,J,ar())).next(ye=>({batchId:N,changes:vl(ye)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Yt(t)).next(o=>{let l=rs();return o.isFoundDocument()&&(l=l.insert(o.key,o)),l})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const l=t.collectionGroup;let p=rs();return this.indexManager.getCollectionParents(e,l).next(w=>st.forEach(w,N=>{const z=(J=t,ye=N.child(l),new Hi(ye,null,J.explicitOrderBy.slice(),J.filters.slice(),J.limit,J.limitType,J.startAt,J.endAt));var J,ye;return this.getDocumentsMatchingCollectionQuery(e,z,o).next(J=>{J.forEach((ye,Pe)=>{p=p.insert(ye,Pe)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,t,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next(p=>(l=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,l))).next(p=>{l.forEach((N,z)=>{const J=z.getKey();null===p.get(J)&&(p=p.insert(J,ci.newInvalidDocument(J)))});let w=rs();return p.forEach((N,z)=>{const J=l.get(N);void 0!==J&&_(J.mutation,z,Cs.empty(),mr.now()),eu(t,z)&&(w=w.insert(N,z))}),w})}}class nd{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return st.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:Li(o.createTime)}),st.resolve()}getNamedQuery(e,t){return st.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:If(o.bundledQuery),readTime:Li(o.readTime)}),st.resolve();var o}}class Lu{constructor(){this.overlays=new Ni(Yt.comparator),this.es=new Map}getOverlay(e,t){return st.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Is();return st.forEach(t,l=>this.getOverlay(e,l).next(p=>{null!==p&&o.set(l,p)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((l,p)=>{this.oe(e,t,p)}),st.resolve()}removeOverlaysForBatchId(e,t,o){const l=this.es.get(o);return void 0!==l&&(l.forEach(p=>this.overlays=this.overlays.remove(p)),this.es.delete(o)),st.resolve()}getOverlaysForCollection(e,t,o){const l=Is(),p=t.length+1,w=new Yt(t.child("")),N=this.overlays.getIteratorFrom(w);for(;N.hasNext();){const z=N.getNext().value,J=z.getKey();if(!t.isPrefixOf(J.path))break;J.path.length===p&&z.largestBatchId>o&&l.set(z.getKey(),z)}return st.resolve(l)}getOverlaysForCollectionGroup(e,t,o,l){let p=new Ni((J,ye)=>J-ye);const w=this.overlays.getIterator();for(;w.hasNext();){const J=w.getNext().value;if(J.getKey().getCollectionGroup()===t&&J.largestBatchId>o){let ye=p.get(J.largestBatchId);null===ye&&(ye=Is(),p=p.insert(J.largestBatchId,ye)),ye.set(J.getKey(),J)}}const N=Is(),z=p.getIterator();for(;z.hasNext()&&(z.getNext().value.forEach((J,ye)=>N.set(J,ye)),!(N.size()>=l)););return st.resolve(N)}oe(e,t,o){const l=this.overlays.get(o.key);if(null!==l){const w=this.es.get(l.largestBatchId).delete(o.key);this.es.set(l.largestBatchId,w)}this.overlays=this.overlays.insert(o.key,new wh(t,o));let p=this.es.get(t);void 0===p&&(p=ar(),this.es.set(t,p)),this.es.set(t,p.add(o.key))}}class Rf{constructor(){this.ns=new mi(ha.ss),this.rs=new mi(ha.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new ha(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new ha(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new Yt(new jn([])),o=new ha(t,e),l=new ha(t,e+1),p=[];return this.rs.forEachInRange([o,l],w=>{this.cs(w),p.push(w.key)}),p}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Yt(new jn([])),o=new ha(t,e),l=new ha(t,e+1);let p=ar();return this.rs.forEachInRange([o,l],w=>{p=p.add(w.key)}),p}containsKey(e){const t=new ha(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class ha{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Yt.comparator(e.key,t.key)||on(e._s,t._s)}static os(e,t){return on(e._s,t._s)||Yt.comparator(e.key,t.key)}}class k_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new mi(ha.ss)}checkEmpty(e){return st.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,l){const p=this.ws;this.ws++;const w=new mc(p,t,o,l);this.mutationQueue.push(w);for(const N of l)this.gs=this.gs.add(new ha(N.key,p)),this.indexManager.addToCollectionParentIndex(e,N.key.path.popLast());return st.resolve(w)}lookupMutationBatch(e,t){return st.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const l=this.ps(t+1),p=l<0?0:l;return st.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return st.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return st.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new ha(t,0),l=new ha(t,Number.POSITIVE_INFINITY),p=[];return this.gs.forEachInRange([o,l],w=>{const N=this.ys(w._s);p.push(N)}),st.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new mi(on);return t.forEach(l=>{const p=new ha(l,0),w=new ha(l,Number.POSITIVE_INFINITY);this.gs.forEachInRange([p,w],N=>{o=o.add(N._s)})}),st.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,l=o.length+1;let p=o;Yt.isDocumentKey(p)||(p=p.child(""));const w=new ha(new Yt(p),0);let N=new mi(on);return this.gs.forEachWhile(z=>{const J=z.key.path;return!!o.isPrefixOf(J)&&(J.length===l&&(N=N.add(z._s)),!0)},w),st.resolve(this.Is(N))}Is(e){const t=[];return e.forEach(o=>{const l=this.ys(o);null!==l&&t.push(l)}),t}removeMutationBatch(e,t){Tn(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return st.forEach(t.mutations,l=>{const p=new ha(l.key,t.batchId);return o=o.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new ha(t,0),l=this.gs.firstAfterOrEqual(o);return st.resolve(t.isEqual(l&&l.key))}performConsistencyCheck(e){return st.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class U_{constructor(e){this.Es=e,this.docs=new Ni(Yt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,l=this.docs.get(o),p=l?l.size:0,w=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:w}),this.size+=w-p,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return st.resolve(o?o.document.mutableCopy():ci.newInvalidDocument(t))}getEntries(e,t){let o=Rr();return t.forEach(l=>{const p=this.docs.get(l);o=o.insert(l,p?p.document.mutableCopy():ci.newInvalidDocument(l))}),st.resolve(o)}getDocumentsMatchingQuery(e,t,o,l){let p=Rr();const w=t.path,N=new Yt(w.child("")),z=this.docs.getIteratorFrom(N);for(;z.hasNext();){const{key:J,value:{document:ye}}=z.getNext();if(!w.isPrefixOf(J.path))break;J.path.length>w.length+1||Ol(ul(ye),o)<=0||(l.has(ye.key)||eu(t,ye))&&(p=p.insert(ye.key,ye.mutableCopy()))}return st.resolve(p)}getAllFromCollectionGroup(e,t,o,l){yn()}As(e,t){return st.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new Og(this)}getSize(e){return st.resolve(this.size)}}class Og extends Mh{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,l)=>{l.isValidDocument()?t.push(this.Yn.addEntry(e,l)):this.Yn.removeEntry(o)}),st.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class V_{constructor(e){this.persistence=e,this.Rs=new or(t=>yl(t),fo),this.lastRemoteSnapshotVersion=vn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Rf,this.targetCount=0,this.vs=Ic.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,l)=>t(l)),st.resolve()}getLastRemoteSnapshotVersion(e){return st.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return st.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),st.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),st.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Ic(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,st.resolve()}updateTargetData(e,t){return this.Dn(t),st.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,st.resolve()}removeTargets(e,t,o){let l=0;const p=[];return this.Rs.forEach((w,N)=>{N.sequenceNumber<=t&&null===o.get(N.targetId)&&(this.Rs.delete(w),p.push(this.removeMatchingKeysForTargetId(e,N.targetId)),l++)}),st.waitFor(p).next(()=>l)}getTargetCount(e){return st.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return st.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),st.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const l=this.persistence.referenceDelegate,p=[];return l&&t.forEach(w=>{p.push(l.markPotentiallyOrphaned(e,w))}),st.waitFor(p)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),st.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return st.resolve(o)}containsKey(e,t){return st.resolve(this.Ps.containsKey(t))}}class xf{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ls(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new V_(this),this.indexManager=new Dc,this.remoteDocumentCache=new U_(o=>this.referenceDelegate.xs(o)),this.yt=new Df(t),this.Ns=new nd(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new k_(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){Ut("MemoryPersistence","Starting transaction:",e);const l=new Rg(this.Ss.next());return this.referenceDelegate.ks(),o(l).next(p=>this.referenceDelegate.Os(l).next(()=>p)).toPromise().then(p=>(l.raiseOnCommittedEvent(),p))}Ms(e,t){return st.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class Rg extends au{constructor(e){super(),this.currentSequenceNumber=e}}class Oh{constructor(e){this.persistence=e,this.Fs=new Rf,this.$s=null}static Bs(e){return new Oh(e)}get Ls(){if(this.$s)return this.$s;throw yn()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),st.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),st.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),st.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(l=>this.Ls.add(l.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(l=>{l.forEach(p=>this.Ls.add(p.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return st.forEach(this.Ls,o=>{const l=Yt.fromPath(o);return this.qs(e,l).next(p=>{p||t.removeEntry(l,vn.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return st.or([()=>st.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class xg{constructor(e){this.yt=e}$(e,t,o,l){const p=new Pa("createOrUpgrade",t);var N;o<1&&l>=1&&(e.createObjectStore("owner"),(N=e).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ch,{unique:!0}),N.createObjectStore("documentMutations"),Ng(e),function(N){N.createObjectStore("remoteDocuments")}(e));let w=st.resolve();return o<3&&l>=3&&(0!==o&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(e),Ng(e)),w=w.next(()=>function(N){const z=N.store("targetGlobal"),J={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vn.min().toTimestamp(),targetCount:0};return z.put("targetGlobalKey",J)}(p))),o<4&&l>=4&&(0!==o&&(w=w.next(()=>function(N,z){return z.store("mutations").W().next(J=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ch,{unique:!0});const ye=z.store("mutations"),Pe=J.map(ut=>ye.put(ut));return st.waitFor(Pe)})}(e,p))),w=w.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&l>=5&&(w=w.next(()=>this.Us(p))),o<6&&l>=6&&(w=w.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(p)))),o<7&&l>=7&&(w=w.next(()=>this.Gs(p))),o<8&&l>=8&&(w=w.next(()=>this.Qs(e,p))),o<9&&l>=9&&(w=w.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&l>=10&&(w=w.next(()=>this.js(p))),o<11&&l>=11&&(w=w.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&l>=12&&(w=w.next(()=>{!function(N){const z=N.createObjectStore("documentOverlays",{keyPath:Fe});z.createIndex("collectionPathOverlayIndex",Et,{unique:!1}),z.createIndex("collectionGroupOverlayIndex",wt,{unique:!1})}(e)})),o<13&&l>=13&&(w=w.next(()=>function(N){const z=N.createObjectStore("remoteDocumentsV14",{keyPath:Ef});z.createIndex("documentKeyIndex",ug),z.createIndex("collectionGroupIndex",h)}(e)).next(()=>this.Ws(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&l>=14&&(w=w.next(()=>this.zs(e,p))),o<15&&l>=15&&(w=w.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:j}).createIndex("sequenceNumberIndex",Y,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:me}).createIndex("documentKeyIndex",Ae,{unique:!1})}(e))),w}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,l)=>{t+=kd(l)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Us(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(l=>st.forEach(l,p=>{const w=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",w).next(N=>st.forEach(N,z=>{Tn(z.userId===p.userId);const J=Ou(this.yt,z);return Cg(e,p.userId,J).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(l=>{const p=[];return o.Z((w,N)=>{const z=new jn(w),J=[0,Us(z)];p.push(t.get(J).next(ye=>ye?st.resolve():t.put({targetId:0,path:Us(z),sequenceNumber:l.highestListenSequenceNumber})))}).next(()=>st.waitFor(p))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:M});const o=t.store("collectionParents"),l=new bh,p=w=>{if(l.add(w)){const N=w.lastSegment(),z=w.popLast();return o.put({collectionId:N,parent:Us(z)})}};return t.store("remoteDocuments").Z({X:!0},(w,N)=>{const z=new jn(w);return p(z.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([w,N,z],J)=>{const ye=Gl(N);return p(ye.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,l)=>{const p=_c(l),w=dg(this.yt,p);return t.put(w)})}Ws(e,t){const o=t.store("remoteDocuments"),l=[];return o.Z((p,w)=>{const N=t.store("remoteDocumentsV14"),z=(J=w,J.document?new Yt(jn.fromString(J.document.name).popFirst(5)):J.noDocument?Yt.fromSegments(J.noDocument.path):J.unknownDocument?Yt.fromSegments(J.unknownDocument.path):yn()).path.toArray();var J;const ye={prefixPath:z.slice(0,z.length-2),collectionGroup:z[z.length-2],documentId:z[z.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};l.push(N.put(ye))}).next(()=>st.waitFor(l))}zs(e,t){const o=t.store("mutations"),l=Ph(this.yt),p=new xf(Oh.Bs,this.yt.ie);return o.W().next(w=>{const N=new Map;return w.forEach(z=>{var J;let ye=null!==(J=N.get(z.userId))&&void 0!==J?J:ar();Ou(this.yt,z).keys().forEach(Pe=>ye=ye.add(Pe)),N.set(z.userId,ye)}),st.forEach(N,(z,J)=>{const ye=new Ji(J),Pe=zc.re(this.yt,ye),ut=p.getIndexManager(ye),xt=Ah.re(ye,this.yt,ut,p.referenceDelegate);return new Pg(l,xt,Pe,ut).recalculateAndSaveOverlaysForDocumentKeys(new vu(t,Ls.at),z).next()})})}}function Ng(i){i.createObjectStore("targetDocuments",{keyPath:c}).createIndex("documentTargetsIndex",v,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",u,{unique:!0}),i.createObjectStore("targetGlobal")}const Nf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Il{constructor(e,t,o,l,p,w,N,z,J,ye,Pe=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=p,this.window=w,this.document=N,this.Js=J,this.Ys=ye,this.Xs=Pe,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=ut=>Promise.resolve(),!Il.C())throw new P(ft.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Sg(this,l),this.ii=t+"main",this.yt=new Df(z),this.ri=new bs(this.ii,this.Xs,new xg(this.yt)),this.Cs=new ed(this.referenceDelegate,this.yt),this.remoteDocumentCache=Ph(this.yt),this.Ns=new F_,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===ye&&Ai("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(ft.FAILED_PRECONDITION,Nf);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ls(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,f.Z)(function*(l){if(t.started)return e(l)});return function(l){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,f.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,f.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Es(e))return Ut("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ut("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Bd(e).get("owner").next(t=>st.resolve(this.mi(t)))}gi(e){return jd(e).delete(this.clientId)}yi(){var e=this;return(0,f.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const l=Ws(o,"clientMetadata");return l.W().next(p=>{const w=e.Ii(p,18e5),N=p.filter(z=>-1===w.indexOf(z));return st.forEach(N,z=>l.delete(z.clientId)).next(()=>N)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?st.resolve(!0):Bd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new P(ft.FAILED_PRECONDITION,Nf);return!1}}return!(!this.networkEnabled||!this.inForeground)||jd(e).W().next(o=>void 0===this.Ii(o,5e3).find(l=>!(this.clientId===l.clientId||!(!this.networkEnabled&&l.networkEnabled||!this.inForeground&&l.inForeground&&this.networkEnabled===l.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ut("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,f.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new vu(t,Ls.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>jd(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Ah.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new oy(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return zc.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){Ut("IndexedDbPersistence","Starting transaction:",e);const l="readonly"===t?"readonly":"readwrite",p=15===(w=this.Xs)?wo:14===w?Ii:13===w?Kn:12===w?En:11===w?Rt:void yn();var w;let N;return this.ri.runTransaction(e,l,p,z=>(N=new vu(z,this.Ss?this.Ss.next():Ls.at),"readwrite-primary"===t?this.fi(N).next(J=>!!J||this.di(N)).next(J=>{if(!J)throw Ai(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new P(ft.FAILED_PRECONDITION,ou);return o(N)}).next(J=>this.wi(N).next(()=>J)):this.Vi(N).next(()=>o(N)))).then(z=>(N.raiseOnCommittedEvent(),z))}Vi(e){return Bd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(ft.FAILED_PRECONDITION,Nf)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bd(e).put("owner",t)}static C(){return bs.C()}_i(e){const t=Bd(e);return t.get("owner").next(o=>this.mi(o)?(Ut("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):st.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(Ai(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,q.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ut("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Ai("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Ai("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Bd(i){return Ws(i,"owner")}function jd(i){return Ws(i,"clientMetadata")}class Ff{constructor(e,t,o,l){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=l}static Ci(e,t){let o=ar(),l=ar();for(const p of t.docChanges)switch(p.type){case 0:o=o.add(p.doc.key);break;case 1:l=l.add(p.doc.key)}return new Ff(e,t.fromCache,o,l)}}class Lg{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,l){return this.ki(e,t).next(p=>p||this.Oi(e,t,l,o)).next(p=>p||this.Mi(e,t))}ki(e,t){if(zu(t))return st.resolve(null);let o=ds(t);return this.indexManager.getIndexType(e,o).next(l=>0===l?null:(null!==t.limit&&1===l&&(t=jl(t,null,"F"),o=ds(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(p=>{const w=ar(...p);return this.Ni.getDocuments(e,w).next(N=>this.indexManager.getMinOffset(e,o).next(z=>{const J=this.Fi(t,N);return this.$i(t,J,w,z.readTime)?this.ki(e,jl(t,null,"F")):this.Bi(e,J,t,z)}))})))}Oi(e,t,o,l){return zu(t)||l.isEqual(vn.min())?this.Mi(e,t):this.Ni.getDocuments(e,o).next(p=>{const w=this.Fi(t,p);return this.$i(t,w,o,l)?this.Mi(e,t):(_s()<=B.in.DEBUG&&Ut("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Io(t)),this.Bi(e,w,t,function Ma(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,l=vn.fromTimestamp(1e9===o?new mr(t+1,0):new mr(t,o));return new Hs(l,Yt.empty(),e)}(l,-1)))})}Fi(e,t){let o=new mi(pu(e));return t.forEach((l,p)=>{eu(e,p)&&(o=o.add(p))}),o}$i(e,t,o,l){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const p="F"===e.limitType?t.last():t.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(l)>0)}Mi(e,t){return _s()<=B.in.DEBUG&&Ut("QueryEngine","Using full collection scan to execute query:",Io(t)),this.Ni.getDocumentsMatchingQuery(e,t,Hs.min())}Bi(e,t,o,l){return this.Ni.getDocumentsMatchingQuery(e,o,l).next(p=>(t.forEach(w=>{p=p.insert(w.key,w)}),p))}}class cy{constructor(e,t,o,l){this.persistence=e,this.Li=t,this.yt=l,this.qi=new Ni(on),this.Ui=new or(p=>yl(p),fo),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pg(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function kf(i,e,t,o){return new cy(i,e,t,o)}function Fg(i,e){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,f.Z)(function*(i,e){const t=en(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let l;return t.mutationQueue.getAllMutationBatches(o).next(p=>(l=p,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(p=>{const w=[],N=[];let z=ar();for(const J of l){w.push(J.batchId);for(const ye of J.mutations)z=z.add(ye.key)}for(const J of p){N.push(J.batchId);for(const ye of J.mutations)z=z.add(ye.key)}return t.localDocuments.getDocuments(o,z).next(J=>({ji:J,removedBatchIds:w,addedBatchIds:N}))})})}),Uf.apply(this,arguments)}function Ir(i){const e=en(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Ug(i,e){const t=en(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function id(i,e,t){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,f.Z)(function*(i,e,t){const o=en(i),l=o.qi.get(e),p=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",p,w=>o.persistence.referenceDelegate.removeTarget(w,l)))}catch(w){if(!Es(w))throw w;Ut("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}o.qi=o.qi.remove(e),o.Ui.delete(l.target)}),Rh.apply(this,arguments)}function xh(i,e,t){const o=en(i);let l=vn.min(),p=ar();return o.persistence.runTransaction("Execute query","readonly",w=>function(N,z,J){const ye=en(N),Pe=ye.Ui.get(J);return void 0!==Pe?st.resolve(ye.qi.get(Pe)):ye.Cs.getTargetData(z,J)}(o,w,ds(e)).next(N=>{if(N)return l=N.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(w,N.targetId).next(z=>{p=z})}).next(()=>o.Li.getDocumentsMatchingQuery(w,e,t?l:vn.min(),t?p:ar())).next(N=>(function Bg(i,e,t){let o=i.Ki.get(e)||vn.min();t.forEach((l,p)=>{p.readTime.compareTo(o)>0&&(o=p.readTime)}),i.Ki.set(e,o)}(o,function fu(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}(e),N),{documents:N,Hi:p})))}class Hf{constructor(){this.activeTargetIds=ko()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hy{constructor(){this.Lr=new Hf,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,o){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Hf,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fy{Ur(e){}shutdown(){}}class Tc{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ut("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ut("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const py={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gg{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Vh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,o,l,p){const w=this.ho(e,t);Ut("RestConnection","Sending: ",w,o);const N={};return this.lo(N,l,p),this.fo(e,w,N,o).then(z=>(Ut("RestConnection","Received: ",z),z),z=>{throw ea("RestConnection",`${e} failed with error: `,z,"url: ",w,"request:",o),z})}_o(e,t,o,l,p,w){return this.ao(e,t,o,l,p)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+Qs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((l,p)=>e[p]=l),o&&o.headers.forEach((l,p)=>e[p]=l)}ho(e,t){return`${this.oo}/v1/${t}:${py[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,l){return new Promise((p,w)=>{const N=new Xa;N.setWithCredentials(!0),N.listenOnce(li.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case Ml.NO_ERROR:const J=N.getResponseJson();Ut("Connection","XHR received:",JSON.stringify(J)),p(J);break;case Ml.TIMEOUT:Ut("Connection",'RPC "'+e+'" timed out'),w(new P(ft.DEADLINE_EXCEEDED,"Request time out"));break;case Ml.HTTP_ERROR:const ye=N.getStatus();if(Ut("Connection",'RPC "'+e+'" failed with status:',ye,"response text:",N.getResponseText()),ye>0){let Pe=N.getResponseJson();Array.isArray(Pe)&&(Pe=Pe[0]);const ut=Pe?.error;if(ut&&ut.status&&ut.message){const xt=function(jt){const Dn=jt.toLowerCase().replace(/_/g,"-");return Object.values(ft).indexOf(Dn)>=0?Dn:ft.UNKNOWN}(ut.status);w(new P(xt,ut.message))}else w(new P(ft.UNKNOWN,"Server responded with status "+N.getStatus()))}else w(new P(ft.UNAVAILABLE,"Connection failed."));break;default:yn()}}finally{Ut("Connection",'RPC "'+e+'" completed.')}});const z=JSON.stringify(l);N.send(t,"POST",z,o,15)})}wo(e,t,o){const l=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=qo(),w=qa(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(N.xmlHttpFactory=new $a({})),this.lo(N.initMessageHeaders,t,o),N.encodeInitMessageHeaders=!0;const z=l.join("");Ut("Connection","Creating WebChannel: "+z,N);const J=p.createWebChannel(z,N);let ye=!1,Pe=!1;const ut=new Gg({Hr:jt=>{Pe?Ut("Connection","Not sending because WebChannel is closed:",jt):(ye||(Ut("Connection","Opening WebChannel transport."),J.open(),ye=!0),Ut("Connection","WebChannel sending:",jt),J.send(jt))},Jr:()=>J.close()}),xt=(jt,Dn,Hn)=>{jt.listen(Dn,ws=>{try{Hn(ws)}catch(fs){setTimeout(()=>{throw fs},0)}})};return xt(J,Ga.EventType.OPEN,()=>{Pe||Ut("Connection","WebChannel transport opened.")}),xt(J,Ga.EventType.CLOSE,()=>{Pe||(Pe=!0,Ut("Connection","WebChannel transport closed"),ut.io())}),xt(J,Ga.EventType.ERROR,jt=>{Pe||(Pe=!0,ea("Connection","WebChannel transport errored:",jt),ut.io(new P(ft.UNAVAILABLE,"The operation could not be completed")))}),xt(J,Ga.EventType.MESSAGE,jt=>{var Dn;if(!Pe){const Hn=jt.data[0];Tn(!!Hn);const fs=Hn.error||(null===(Dn=Hn[0])||void 0===Dn?void 0:Dn.error);if(fs){Ut("Connection","WebChannel received error:",fs);const wi=fs.status;let ma=function($i){const ya=rn[$i];if(void 0!==ya)return Rn(ya)}(wi),ps=fs.message;void 0===ma&&(ma=ft.INTERNAL,ps="Unknown error status: "+wi+" with message "+fs.message),Pe=!0,ut.io(new P(ma,ps)),J.close()}else Ut("Connection","WebChannel received:",Hn),ut.ro(Hn)}}),xt(w,js.STAT_EVENT,jt=>{jt.stat===Xo.PROXY?Ut("Connection","Detected buffering proxy"):jt.stat===Xo.NOPROXY&&Ut("Connection","Detected no buffering proxy")}),setTimeout(()=>{ut.so()},0),ut}}function $d(){return typeof document<"u"?document:null}function Gd(i){return new Ad(i,!0)}class $f{constructor(e,t,o=1e3,l=1.5,p=6e4){this.Hs=e,this.timerId=t,this.mo=o,this.yo=l,this.po=p,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),l=Math.max(0,t-o);l>0&&Ut("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,l,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class zg{constructor(e,t,o,l,p,w,N,z){this.Hs=e,this.vo=o,this.Vo=l,this.connection=p,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=N,this.listener=z,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new $f(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,f.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,f.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var o=this;return(0,f.Z)(function*(){o.Lo(),o.qo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():t&&t.code===ft.RESOURCE_EXHAUSTED?(Ai(t.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),o.xo.Ao()):t&&t.code===ft.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Uo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,l])=>{this.So===t&&this.Go(o,l)},o=>{e(()=>{const l=new P(ft.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(l)})})}Go(e,t){const o=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(l=>{o(()=>this.Qo(l))}),this.stream.onMessage(l=>{o(()=>this.onMessage(l))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,f.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ut("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ut("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gy extends zg{constructor(e,t,o,l,p,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,l,w),this.yt=p}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function ag(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(z=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===z?1:"REMOVE"===z?2:"CURRENT"===z?3:"RESET"===z?4:yn(),l=e.targetChange.targetIds||[],p=function(z,J){return z.wt?(Tn(void 0===J||"string"==typeof J),Ci.fromBase64String(J||"")):(Tn(void 0===J||J instanceof Uint8Array),Ci.fromUint8Array(J||new Uint8Array))}(i,e.targetChange.resumeToken),w=e.targetChange.cause,N=w&&function(z){const J=void 0===z.code?ft.UNKNOWN:Rn(z.code);return new P(J,z.message||"")}(w);t=new nr(o,l,p,N||null)}else if("documentChange"in e){const o=e.documentChange,l=nu(i,o.document.name),p=Li(o.document.updateTime),w=o.document.createTime?Li(o.document.createTime):vn.min(),N=new $s({mapValue:{fields:o.document.fields}}),z=ci.newFoundDocument(l,p,w,N);t=new Mn(o.targetIds||[],o.removedTargetIds||[],z.key,z)}else if("documentDelete"in e){const o=e.documentDelete,l=nu(i,o.document),p=o.readTime?Li(o.readTime):vn.min(),w=ci.newNoDocument(l,p);t=new Mn([],o.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const o=e.documentRemove,l=nu(i,o.document);t=new Mn([],o.removedTargetIds||[],l,null)}else{if(!("filter"in e))return yn();{const o=e.filter,p=new qt(o.count||0);t=new Bn(o.targetId,p)}}var z;return t}(this.yt,e),o=function(l){if(!("targetChange"in l))return vn.min();const p=l.targetChange;return p.targetIds&&p.targetIds.length?vn.min():p.readTime?Li(p.readTime):vn.min()}(e);return this.listener.Wo(t,o)}zo(e){const t={};t.database=Zu(this.yt),t.addTarget=function(l,p){let w;const N=p.target;return w=Fa(N)?{documents:Rd(l,N)}:{query:$c(l,N)},w.targetId=p.targetId,p.resumeToken.approximateByteSize()>0?w.resumeToken=Cl(l,p.resumeToken):p.snapshotVersion.compareTo(vn.min())>0&&(w.readTime=hs(l,p.snapshotVersion.toTimestamp())),w}(this.yt,e);const o=function xd(i,e){const t=function(o,l){switch(l){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return yn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Bo(t)}Ho(e){const t={};t.database=Zu(this.yt),t.removeTarget=e,this.Bo(t)}}class my extends zg{constructor(e,t,o,l,p,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,l,w),this.yt=p,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Tn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function dc(i,e){return i&&i.length>0?(Tn(void 0!==e),i.map(t=>function(o,l){let p=Li(o.updateTime?o.updateTime:l);return p.isEqual(vn.min())&&(p=Li(l)),new y(p,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Li(e.commitTime);return this.listener.Zo(o,t)}return Tn(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Zu(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>Pd(this.yt,o))};this.Bo(t)}}class Kg extends class{}{constructor(e,t,o,l){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.yt=l,this.nu=!1}su(){if(this.nu)throw new P(ft.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,p])=>this.connection.ao(e,t,o,l,p)).catch(l=>{throw"FirebaseError"===l.name?(l.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new P(ft.UNKNOWN,l.toString())})}_o(e,t,o,l){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,w])=>this.connection._o(e,t,o,p,w,l)).catch(p=>{throw"FirebaseError"===p.name?(p.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new P(ft.UNKNOWN,p.toString())})}terminate(){this.nu=!0}}class Yg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Ai(t),this.ou=!1):Ut("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Gf{constructor(e,t,o,l,p){var w=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=p,this.mu.Ur(N=>{o.enqueueAndForget((0,f.Z)(function*(){var z;Wl(w)&&(Ut("RemoteStore","Restarting streams for network reachability change."),yield(z=(0,f.Z)(function*(J){const ye=en(J);ye._u.add(4),yield sd(ye),ye.gu.set("Unknown"),ye._u.delete(4),yield jh(ye)}),function(J){return z.apply(this,arguments)})(w))}))}),this.gu=new Yg(o,l)}}function jh(i){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,f.Z)(function*(i){if(Wl(i))for(const e of i.wu)yield e(!0)}),Wd.apply(this,arguments)}function sd(i){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,f.Z)(function*(i){for(const e of i.wu)yield e(!1)}),Qg.apply(this,arguments)}function ku(i,e){const t=en(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Yf(t)?Kf(t):Ac(t).ko()&&Wf(t,e))}function od(i,e){const t=en(i),o=Ac(t);t.du.delete(e),o.ko()&&zf(t,e),0===t.du.size&&(o.ko()?o.Fo():Wl(t)&&t.gu.set("Unknown"))}function Wf(i,e){i.yu.Ot(e.targetId),Ac(i).zo(e)}function zf(i,e){i.yu.Ot(e),Ac(i).Ho(e)}function Kf(i){i.yu=new Js({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.du.get(e)||null}),Ac(i).start(),i.gu.uu()}function Yf(i){return Wl(i)&&!Ac(i).No()&&i.du.size>0}function Wl(i){return 0===en(i)._u.size}function Sc(i){i.yu=void 0}function Qf(i){return bc.apply(this,arguments)}function bc(){return bc=(0,f.Z)(function*(i){i.du.forEach((e,t)=>{Wf(i,e)})}),bc.apply(this,arguments)}function Zf(i,e){return ad.apply(this,arguments)}function ad(){return ad=(0,f.Z)(function*(i,e){Sc(i),Yf(i)?(i.gu.hu(e),Kf(i)):i.gu.set("Unknown")}),ad.apply(this,arguments)}function Zg(i,e,t){return zd.apply(this,arguments)}function zd(){return zd=(0,f.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof nr&&2===e.state&&e.cause)try{yield(o=(0,f.Z)(function*(l,p){const w=p.cause;for(const N of p.targetIds)l.du.has(N)&&(yield l.remoteSyncer.rejectListen(N,w),l.du.delete(N),l.yu.removeTarget(N))}),function(l,p){return o.apply(this,arguments)})(i,e)}catch(o){Ut("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield ld(i,o)}else if(e instanceof Mn?i.yu.Kt(e):e instanceof Bn?i.yu.Jt(e):i.yu.jt(e),!t.isEqual(vn.min()))try{const o=yield Ir(i.localStore);t.compareTo(o)>=0&&(yield function(l,p){const w=l.yu.Zt(p);return w.targetChanges.forEach((N,z)=>{if(N.resumeToken.approximateByteSize()>0){const J=l.du.get(z);J&&l.du.set(z,J.withResumeToken(N.resumeToken,p))}}),w.targetMismatches.forEach(N=>{const z=l.du.get(N);if(!z)return;l.du.set(N,z.withResumeToken(Ci.EMPTY_BYTE_STRING,z.snapshotVersion)),zf(l,N);const J=new ru(z.target,N,1,z.sequenceNumber);Wf(l,J)}),l.remoteSyncer.applyRemoteEvent(w)}(i,t))}catch(o){Ut("RemoteStore","Failed to raise snapshot:",o),yield ld(i,o)}var o}),zd.apply(this,arguments)}function ld(i,e,t){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,f.Z)(function*(i,e,t){if(!Es(e))throw e;i._u.add(1),yield sd(i),i.gu.set("Offline"),t||(t=()=>Ir(i.localStore)),i.asyncQueue.enqueueRetryable((0,f.Z)(function*(){Ut("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield jh(i)}))}),Kd.apply(this,arguments)}function qf(i,e){return e().catch(t=>ld(i,t,e))}function ec(i){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,f.Z)(function*(i){const e=en(i),t=tc(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;_y(e);)try{const l=yield Ug(e.localStore,o);if(null===l){0===e.fu.length&&t.Fo();break}o=l.batchId,qg(e,l)}catch(l){yield ld(e,l)}Xg(e)&&Jf(e)}),Xf.apply(this,arguments)}function _y(i){return Wl(i)&&i.fu.length<10}function qg(i,e){i.fu.push(e);const t=tc(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Xg(i){return Wl(i)&&!tc(i).No()&&i.fu.length>0}function Jf(i){tc(i).start()}function Jg(i){return ep.apply(this,arguments)}function ep(){return ep=(0,f.Z)(function*(i){tc(i).eu()}),ep.apply(this,arguments)}function vy(i){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,f.Z)(function*(i){const e=tc(i);for(const t of i.fu)e.Xo(t.mutations)}),Qa.apply(this,arguments)}function Ey(i,e,t){return tp.apply(this,arguments)}function tp(){return tp=(0,f.Z)(function*(i,e,t){const o=i.fu.shift(),l=Ld.from(o,e,t);yield qf(i,()=>i.remoteSyncer.applySuccessfulWrite(l)),yield ec(i)}),tp.apply(this,arguments)}function j_(i,e){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,f.Z)(function*(i,e){var t;e&&tc(i).Yo&&(yield(t=(0,f.Z)(function*(o,l){if(function an(i){switch(i){default:return yn();case ft.CANCELLED:case ft.UNKNOWN:case ft.DEADLINE_EXCEEDED:case ft.RESOURCE_EXHAUSTED:case ft.INTERNAL:case ft.UNAVAILABLE:case ft.UNAUTHENTICATED:return!1;case ft.INVALID_ARGUMENT:case ft.NOT_FOUND:case ft.ALREADY_EXISTS:case ft.PERMISSION_DENIED:case ft.FAILED_PRECONDITION:case ft.ABORTED:case ft.OUT_OF_RANGE:case ft.UNIMPLEMENTED:case ft.DATA_LOSS:return!0}}(p=l.code)&&p!==ft.ABORTED){const w=o.fu.shift();tc(o).Mo(),yield qf(o,()=>o.remoteSyncer.rejectFailedWrite(w.batchId,l)),yield ec(o)}var p}),function(o,l){return t.apply(this,arguments)})(i,e)),Xg(i)&&Jf(i)}),Yd.apply(this,arguments)}function np(i,e){return rp.apply(this,arguments)}function rp(){return rp=(0,f.Z)(function*(i,e){const t=en(i);t.asyncQueue.verifyOperationInProgress(),Ut("RemoteStore","RemoteStore received new credentials");const o=Wl(t);t._u.add(3),yield sd(t),o&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield jh(t)}),rp.apply(this,arguments)}function sp(){return sp=(0,f.Z)(function*(i,e){const t=en(i);e?(t._u.delete(2),yield jh(t)):e||(t._u.add(2),yield sd(t),t.gu.set("Unknown"))}),sp.apply(this,arguments)}function Ac(i){return i.pu||(i.pu=function(e,t,o){const l=en(e);return l.su(),new gy(t,l.connection,l.authCredentials,l.appCheckCredentials,l.yt,o)}(i.datastore,i.asyncQueue,{Yr:Qf.bind(null,i),Zr:Zf.bind(null,i),Wo:Zg.bind(null,i)}),i.wu.push(function(){var e=(0,f.Z)(function*(t){t?(i.pu.Mo(),Yf(i)?Kf(i):i.gu.set("Unknown")):(yield i.pu.stop(),Sc(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function tc(i){return i.Iu||(i.Iu=function(e,t,o){const l=en(e);return l.su(),new my(t,l.connection,l.authCredentials,l.appCheckCredentials,l.yt,o)}(i.datastore,i.asyncQueue,{Yr:Jg.bind(null,i),Zr:j_.bind(null,i),tu:vy.bind(null,i),Zo:Ey.bind(null,i)}),i.wu.push(function(){var e=(0,f.Z)(function*(t){t?(i.Iu.Mo(),yield ec(i)):(yield i.Iu.stop(),i.fu.length>0&&(Ut("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class op{constructor(e,t,o,l,p){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=l,this.removalCallback=p,this.deferred=new Q,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,t,o,l,p){const w=Date.now()+o,N=new op(e,t,w,l,p);return N.start(o),N}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new P(ft.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nc(i,e){if(Ai("AsyncQueue",`${e}: ${i}`),Es(i))return new P(ft.UNAVAILABLE,`${e}: ${i}`);throw i}class ud{constructor(e){this.comparator=e?(t,o)=>e(t,o)||Yt.comparator(t.key,o.key):(t,o)=>Yt.comparator(t.key,o.key),this.keyedMap=rs(),this.sortedSet=new Ni(this.comparator)}static emptySet(e){return new ud(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ud)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const l=t.getNext().key,p=o.getNext().key;if(!l.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new ud;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class em{constructor(){this.Tu=new Ni(Yt.comparator)}track(e){const t=e.doc.key,o=this.Tu.get(t);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(t):1===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):yn():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,o)=>{e.push(o)}),e}}class cd{constructor(e,t,o,l,p,w,N,z,J){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=l,this.mutatedKeys=p,this.fromCache=w,this.syncStateChanged=N,this.excludesMetadataChanges=z,this.hasCachedResults=J}static fromInitialDocuments(e,t,o,l,p){const w=[];return t.forEach(N=>{w.push({type:0,doc:N})}),new cd(e,t,ud.emptySet(t),w,o,l,!0,!1,p)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_l(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let l=0;l<t.length;l++)if(t[l].type!==o[l].type||!t[l].doc.isEqual(o[l].doc))return!1;return!0}}class Dy{constructor(){this.Au=void 0,this.listeners=[]}}class Cy{constructor(){this.queries=new or(e=>No(e),_l),this.onlineState="Unknown",this.Ru=new Set}}function zl(i,e){return Qd.apply(this,arguments)}function Qd(){return Qd=(0,f.Z)(function*(i,e){const t=en(i),o=e.query;let l=!1,p=t.queries.get(o);if(p||(l=!0,p=new Dy),l)try{p.Au=yield t.onListen(o)}catch(w){const N=nc(w,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(N)}t.queries.set(o,p),p.listeners.push(e),e.bu(t.onlineState),p.Au&&e.Pu(p.Au)&&up(t)}),Qd.apply(this,arguments)}function ap(i,e){return lp.apply(this,arguments)}function lp(){return lp=(0,f.Z)(function*(i,e){const t=en(i),o=e.query;let l=!1;const p=t.queries.get(o);if(p){const w=p.listeners.indexOf(e);w>=0&&(p.listeners.splice(w,1),l=0===p.listeners.length)}if(l)return t.queries.delete(o),t.onUnlisten(o)}),lp.apply(this,arguments)}function tm(i,e){const t=en(i);let o=!1;for(const l of e){const w=t.queries.get(l.query);if(w){for(const N of w.listeners)N.Pu(l)&&(o=!0);w.Au=l}}o&&up(t)}function Iy(i,e,t){const o=en(i),l=o.queries.get(e);if(l)for(const p of l.listeners)p.onError(t);o.queries.delete(e)}function up(i){i.Ru.forEach(e=>{e.next()})}class cp{constructor(e,t,o){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const l of e.docChanges)3!==l.type&&o.push(l);e=new cd(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class qd{constructor(e){this.key=e}}class Xd{constructor(e){this.key=e}}class Ty{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=ar(),this.mutatedKeys=ar(),this.Gu=pu(e),this.Qu=new ud(this.Gu)}get ju(){return this.qu}Wu(e,t){const o=t?t.zu:new em,l=t?t.Qu:this.Qu;let p=t?t.mutatedKeys:this.mutatedKeys,w=l,N=!1;const z="F"===this.query.limitType&&l.size===this.query.limit?l.last():null,J="L"===this.query.limitType&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal((ye,Pe)=>{const ut=l.get(ye),xt=eu(this.query,Pe)?Pe:null,jt=!!ut&&this.mutatedKeys.has(ut.key),Dn=!!xt&&(xt.hasLocalMutations||this.mutatedKeys.has(xt.key)&&xt.hasCommittedMutations);let Hn=!1;ut&&xt?ut.data.isEqual(xt.data)?jt!==Dn&&(o.track({type:3,doc:xt}),Hn=!0):this.Hu(ut,xt)||(o.track({type:2,doc:xt}),Hn=!0,(z&&this.Gu(xt,z)>0||J&&this.Gu(xt,J)<0)&&(N=!0)):!ut&&xt?(o.track({type:0,doc:xt}),Hn=!0):ut&&!xt&&(o.track({type:1,doc:ut}),Hn=!0,(z||J)&&(N=!0)),Hn&&(xt?(w=w.add(xt),p=Dn?p.add(ye):p.delete(ye)):(w=w.delete(ye),p=p.delete(ye)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const ye="F"===this.query.limitType?w.last():w.first();w=w.delete(ye.key),p=p.delete(ye.key),o.track({type:1,doc:ye})}return{Qu:w,zu:o,$i:N,mutatedKeys:p}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const l=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const p=e.zu.Eu();p.sort((J,ye)=>function(Pe,ut){const xt=jt=>{switch(jt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yn()}};return xt(Pe)-xt(ut)}(J.type,ye.type)||this.Gu(J.doc,ye.doc)),this.Ju(o);const w=t?this.Yu():[],N=0===this.Ku.size&&this.current?1:0,z=N!==this.Uu;return this.Uu=N,0!==p.length||z?{snapshot:new cd(this.query,e.Qu,l,p,e.mutatedKeys,0===N,z,!1,!!o&&o.resumeToken.approximateByteSize()>0),Xu:w}:{Xu:w}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new em,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=ar(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new Xd(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new qd(o))}),t}tc(e){this.qu=e.Hi,this.Ku=ar();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return cd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class hp{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class H_{constructor(e){this.key=e,this.nc=!1}}class rm{constructor(e,t,o,l,p,w){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=l,this.currentUser=p,this.maxConcurrentLimboResolutions=w,this.sc={},this.ic=new or(N=>No(N),_l),this.rc=new Map,this.oc=new Set,this.uc=new Ni(Yt.comparator),this.cc=new Map,this.ac=new Rf,this.hc={},this.lc=new Map,this.fc=Ic.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function im(i,e){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,f.Z)(function*(i,e){const t=function fa(i){const e=en(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=sm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=My.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sy.bind(null,e),e.sc.Wo=tm.bind(null,e.eventManager),e.sc.wc=Iy.bind(null,e.eventManager),e}(i);let o,l;const p=t.ic.get(e);if(p)o=p.targetId,t.sharedClientState.addLocalQueryTarget(o),l=p.view.ec();else{const w=yield function rd(i,e){const t=en(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let l;return t.Cs.getTargetData(o,e).next(p=>p?(l=p,st.resolve(l)):t.Cs.allocateTargetId(o).next(w=>(l=new ru(e,w,0,o.currentSequenceNumber),t.Cs.addTargetData(o,l).next(()=>l))))}).then(o=>{const l=t.qi.get(o.targetId);return(null===l||o.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(t.qi=t.qi.insert(o.targetId,o),t.Ui.set(e,o.targetId)),o})}(t.localStore,ds(e));t.isPrimaryClient&&ku(t.remoteStore,w);const N=t.sharedClientState.addLocalQueryTarget(w.targetId);o=w.targetId,l=yield function $h(i,e,t,o,l){return Jd.apply(this,arguments)}(t,e,o,"current"===N,w.resumeToken)}return l}),Hh.apply(this,arguments)}function Jd(){return Jd=(0,f.Z)(function*(i,e,t,o,l){i._c=(Pe,ut,xt)=>{return(jt=(0,f.Z)(function*(Dn,Hn,ws,fs){let wi=Hn.view.Wu(ws);wi.$i&&(wi=yield xh(Dn.localStore,Hn.query,!1).then(({documents:$i})=>Hn.view.Wu($i,wi)));const ma=fs&&fs.targetChanges.get(Hn.targetId),ps=Hn.view.applyChanges(wi,Dn.isPrimaryClient,ma);return zh(Dn,Hn.targetId,ps.Xu),ps.snapshot}),function(Dn,Hn,ws,fs){return jt.apply(this,arguments)})(i,Pe,ut,xt);var jt};const p=yield xh(i.localStore,e,!0),w=new Ty(e,p.Hi),N=w.Wu(p.documents),z=Mu.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,l),J=w.applyChanges(N,i.isPrimaryClient,z);zh(i,t,J.Xu);const ye=new hp(e,t,w);return i.ic.set(e,ye),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),J.snapshot}),Jd.apply(this,arguments)}function Uu(i,e){return dd.apply(this,arguments)}function dd(){return dd=(0,f.Z)(function*(i,e){const t=en(i),o=t.ic.get(e),l=t.rc.get(o.targetId);if(l.length>1)return t.rc.set(o.targetId,l.filter(p=>!_l(p,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield id(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),od(t.remoteStore,o.targetId),hd(t,o.targetId)}).catch(Po))):(hd(t,o.targetId),yield id(t.localStore,o.targetId,!0))}),dd.apply(this,arguments)}function Mc(){return Mc=(0,f.Z)(function*(i,e,t){const o=Vu(i);try{const l=yield function(p,w){const N=en(p),z=mr.now(),J=w.reduce((ut,xt)=>ut.add(xt.key),ar());let ye,Pe;return N.persistence.runTransaction("Locally write mutations","readwrite",ut=>{let xt=Rr(),jt=ar();return N.Gi.getEntries(ut,J).next(Dn=>{xt=Dn,xt.forEach((Hn,ws)=>{ws.isValidDocument()||(jt=jt.add(Hn))})}).next(()=>N.localDocuments.getOverlayedDocuments(ut,xt)).next(Dn=>{ye=Dn;const Hn=[];for(const ws of w){const fs=g(ws,ye.get(ws.key).overlayedDocument);null!=fs&&Hn.push(new re(ws.key,fs,uu(fs.value.mapValue),C.exists(!0)))}return N.mutationQueue.addMutationBatch(ut,z,Hn,w)}).next(Dn=>{Pe=Dn;const Hn=Dn.applyToLocalDocumentSet(ye,jt);return N.documentOverlayCache.saveOverlays(ut,Dn.batchId,Hn)})}).then(()=>({batchId:Pe.batchId,changes:vl(ye)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(l.batchId),function(p,w,N){let z=p.hc[p.currentUser.toKey()];z||(z=new Ni(on)),z=z.insert(w,N),p.hc[p.currentUser.toKey()]=z}(o,l.batchId,t),yield iu(o,l.changes),yield ec(o.remoteStore)}catch(l){const p=nc(l,"Failed to persist write");t.reject(p)}}),Mc.apply(this,arguments)}function sm(i,e){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,f.Z)(function*(i,e){const t=en(i);try{const o=yield function kg(i,e){const t=en(i),o=e.snapshotVersion;let l=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const w=t.Gi.newChangeBuffer({trackRemovals:!0});l=t.qi;const N=[];e.targetChanges.forEach((ye,Pe)=>{const ut=l.get(Pe);if(!ut)return;N.push(t.Cs.removeMatchingKeys(p,ye.removedDocuments,Pe).next(()=>t.Cs.addMatchingKeys(p,ye.addedDocuments,Pe)));let xt=ut.withSequenceNumber(p.currentSequenceNumber);var jt,Dn,Hn;e.targetMismatches.has(Pe)?xt=xt.withResumeToken(Ci.EMPTY_BYTE_STRING,vn.min()).withLastLimboFreeSnapshotVersion(vn.min()):ye.resumeToken.approximateByteSize()>0&&(xt=xt.withResumeToken(ye.resumeToken,o)),l=l.insert(Pe,xt),Dn=xt,Hn=ye,(0===(jt=ut).resumeToken.approximateByteSize()||Dn.snapshotVersion.toMicroseconds()-jt.snapshotVersion.toMicroseconds()>=3e8||Hn.addedDocuments.size+Hn.modifiedDocuments.size+Hn.removedDocuments.size>0)&&N.push(t.Cs.updateTargetData(p,xt))});let z=Rr(),J=ar();if(e.documentUpdates.forEach(ye=>{e.resolvedLimboDocuments.has(ye)&&N.push(t.persistence.referenceDelegate.updateLimboDocument(p,ye))}),N.push(function Vf(i,e,t){let o=ar(),l=ar();return t.forEach(p=>o=o.add(p)),e.getEntries(i,o).next(p=>{let w=Rr();return t.forEach((N,z)=>{const J=p.get(N);z.isFoundDocument()!==J.isFoundDocument()&&(l=l.add(N)),z.isNoDocument()&&z.version.isEqual(vn.min())?(e.removeEntry(N,z.readTime),w=w.insert(N,z)):!J.isValidDocument()||z.version.compareTo(J.version)>0||0===z.version.compareTo(J.version)&&J.hasPendingWrites?(e.addEntry(z),w=w.insert(N,z)):Ut("LocalStore","Ignoring outdated watch update for ",N,". Current version:",J.version," Watch version:",z.version)}),{Wi:w,zi:l}})}(p,w,e.documentUpdates).next(ye=>{z=ye.Wi,J=ye.zi})),!o.isEqual(vn.min())){const ye=t.Cs.getLastRemoteSnapshotVersion(p).next(Pe=>t.Cs.setTargetsMetadata(p,p.currentSequenceNumber,o));N.push(ye)}return st.waitFor(N).next(()=>w.apply(p)).next(()=>t.localDocuments.getLocalViewOfDocuments(p,z,J)).next(()=>z)}).then(p=>(t.qi=l,p))}(t.localStore,e);e.targetChanges.forEach((l,p)=>{const w=t.cc.get(p);w&&(Tn(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?w.nc=!0:l.modifiedDocuments.size>0?Tn(w.nc):l.removedDocuments.size>0&&(Tn(w.nc),w.nc=!1))}),yield iu(t,o,e)}catch(o){yield Po(o)}}),Wh.apply(this,arguments)}function fp(i,e,t){const o=en(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const l=[];o.ic.forEach((p,w)=>{const N=w.view.bu(e);N.snapshot&&l.push(N.snapshot)}),function(p,w){const N=en(p);N.onlineState=w;let z=!1;N.queries.forEach((J,ye)=>{for(const Pe of ye.listeners)Pe.bu(w)&&(z=!0)}),z&&up(N)}(o.eventManager,e),l.length&&o.sc.Wo(l),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Sy(i,e,t){return pp.apply(this,arguments)}function pp(){return pp=(0,f.Z)(function*(i,e,t){const o=en(i);o.sharedClientState.updateQueryState(e,"rejected",t);const l=o.cc.get(e),p=l&&l.key;if(p){let w=new Ni(Yt.comparator);w=w.insert(p,ci.newNoDocument(p,vn.min()));const N=ar().add(p),z=new $l(vn.min(),new Map,new mi(on),w,N);yield sm(o,z),o.uc=o.uc.remove(p),o.cc.delete(e),Dp(o)}else yield id(o.localStore,e,!1).then(()=>hd(o,e,t)).catch(Po)}),pp.apply(this,arguments)}function eh(i,e){return gp.apply(this,arguments)}function gp(){return gp=(0,f.Z)(function*(i,e){const t=en(i),o=e.batch.batchId;try{const l=yield function dy(i,e){const t=en(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const l=e.batch.keys(),p=t.Gi.newChangeBuffer({trackRemovals:!0});return function(w,N,z,J){const ye=z.batch,Pe=ye.keys();let ut=st.resolve();return Pe.forEach(xt=>{ut=ut.next(()=>J.getEntry(N,xt)).next(jt=>{const Dn=z.docVersions.get(xt);Tn(null!==Dn),jt.version.compareTo(Dn)<0&&(ye.applyToRemoteDocument(jt,z),jt.isValidDocument()&&(jt.setReadTime(z.commitVersion),J.addEntry(jt)))})}),ut.next(()=>w.mutationQueue.removeMutationBatch(N,ye))}(t,o,e,p).next(()=>p.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,l,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(w){let N=ar();for(let z=0;z<w.mutationResults.length;++z)w.mutationResults[z].transformResults.length>0&&(N=N.add(w.batch.mutations[z].key));return N}(e))).next(()=>t.localDocuments.getDocuments(o,l))})}(t.localStore,e);vp(t,o,null),_p(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield iu(t,l)}catch(l){yield Po(l)}}),gp.apply(this,arguments)}function $_(i,e,t){return mp.apply(this,arguments)}function mp(){return mp=(0,f.Z)(function*(i,e,t){const o=en(i);try{const l=yield function(p,w){const N=en(p);return N.persistence.runTransaction("Reject batch","readwrite-primary",z=>{let J;return N.mutationQueue.lookupMutationBatch(z,w).next(ye=>(Tn(null!==ye),J=ye.keys(),N.mutationQueue.removeMutationBatch(z,ye))).next(()=>N.mutationQueue.performConsistencyCheck(z)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(z,J,w)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(z,J)).next(()=>N.localDocuments.getDocuments(z,J))})}(o.localStore,e);vp(o,e,t),_p(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield iu(o,l)}catch(l){yield Po(l)}}),mp.apply(this,arguments)}function _p(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function vp(i,e,t){const o=en(i);let l=o.hc[o.currentUser.toKey()];if(l){const p=l.get(e);p&&(t?p.reject(t):p.resolve(),l=l.remove(e)),o.hc[o.currentUser.toKey()]=l}}function hd(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.rc.get(e))i.ic.delete(o),t&&i.sc.wc(o,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(o=>{i.ac.containsKey(o)||om(i,o)})}function om(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(od(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),Dp(i))}function zh(i,e,t){for(const o of t)o instanceof qd?(i.ac.addReference(o.key,e),Ep(i,o)):o instanceof Xd?(Ut("SyncEngine","Document no longer in limbo: "+o.key),i.ac.removeReference(o.key,e),i.ac.containsKey(o.key)||om(i,o.key)):yn()}function Ep(i,e){const t=e.key,o=t.path.canonicalString();i.uc.get(t)||i.oc.has(o)||(Ut("SyncEngine","New document in limbo: "+t),i.oc.add(o),Dp(i))}function Dp(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new Yt(jn.fromString(e)),o=i.fc.next();i.cc.set(o,new H_(t)),i.uc=i.uc.insert(t,o),ku(i.remoteStore,new ru(ds(Xl(t.path)),o,2,Ls.at))}}function iu(i,e,t){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,f.Z)(function*(i,e,t){const o=en(i),l=[],p=[],w=[];var N;o.ic.isEmpty()||(o.ic.forEach((N,z)=>{w.push(o._c(z,e,t).then(J=>{if((J||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(z.targetId,J?.fromCache?"not-current":"current"),J){l.push(J);const ye=Ff.Ci(z.targetId,J);p.push(ye)}}))}),yield Promise.all(w),o.sc.Wo(l),yield(N=(0,f.Z)(function*(z,J){const ye=en(z);try{yield ye.persistence.runTransaction("notifyLocalViewChanges","readwrite",Pe=>st.forEach(J,ut=>st.forEach(ut.Si,xt=>ye.persistence.referenceDelegate.addReference(Pe,ut.targetId,xt)).next(()=>st.forEach(ut.Di,xt=>ye.persistence.referenceDelegate.removeReference(Pe,ut.targetId,xt)))))}catch(Pe){if(!Es(Pe))throw Pe;Ut("LocalStore","Failed to update sequence numbers: "+Pe)}for(const Pe of J){const ut=Pe.targetId;if(!Pe.fromCache){const xt=ye.qi.get(ut),Dn=xt.withLastLimboFreeSnapshotVersion(xt.snapshotVersion);ye.qi=ye.qi.insert(ut,Dn)}}}),function(z,J){return N.apply(this,arguments)})(o.localStore,p))}),Cp.apply(this,arguments)}function Ay(i,e){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,f.Z)(function*(i,e){const t=en(i);if(!t.currentUser.isEqual(e)){Ut("SyncEngine","User change. New user:",e.toKey());const o=yield Fg(t.localStore,e);t.currentUser=e,(l=t).lc.forEach(w=>{w.forEach(N=>{N.reject(new P(ft.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.lc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield iu(t,o.ji)}var l}),Ip.apply(this,arguments)}function My(i,e){const t=en(i),o=t.cc.get(e);if(o&&o.nc)return ar().add(o.key);{let l=ar();const p=t.rc.get(e);if(!p)return l;for(const w of p){const N=t.ic.get(w);l=l.unionWith(N.view.ju)}return l}}function Vu(i){const e=en(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$_.bind(null,e),e}class wl{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,f.Z)(function*(){t.yt=Gd(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return kf(this.persistence,new Lg,e.initialUser,this.yt)}yc(e){return new xf(Oh.Bs,this.yt)}gc(e){return new hy}terminate(){var e=this;return(0,f.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Ap extends wl{constructor(e,t,o){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,f.Z)(function*(){yield t().call(o,e),yield o.Ac.initialize(o,e),yield Vu(o.Ac.syncEngine),yield ec(o.Ac.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return kf(this.persistence,new Lg,e.initialUser,this.yt)}Tc(e,t){return new ly(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const o=new Wa(t,this.persistence);return new dl(e.asyncQueue,o)}yc(e){const t=function Lf(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Va.withCacheSize(this.cacheSizeBytes):Va.DEFAULT;return new Il(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,function Wg(){return typeof window<"u"?window:null}(),$d(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new hy}}class rc{initialize(e,t){var o=this;return(0,f.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=l=>fp(o.syncEngine,l,1),o.remoteStore.remoteSyncer.handleCredentialChange=Ay.bind(null,o.syncEngine),yield function ip(i,e){return sp.apply(this,arguments)}(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Cy}createDatastore(e){const t=Gd(e.databaseInfo.databaseId),o=new Vh(e.databaseInfo);return new Kg(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,l=e.asyncQueue,p=N=>fp(this.syncEngine,N,0),w=Tc.C()?new Tc:new fy,new Gf(t,o,l,p,w);var t,o,l,p,w}createSyncEngine(e,t){return function(o,l,p,w,N,z,J){const ye=new rm(o,l,p,w,N,z);return J&&(ye.dc=!0),ye}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,f.Z)(function*(t){const o=en(t);Ut("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield sd(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function ic(i,e,t){if(!t)throw new P(ft.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Oc(i){if(!Yt.isDocumentKey(i))throw new P(ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Rc(i){if(Yt.isDocumentKey(i))throw new P(ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Bu(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":yn()}function zr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new P(ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bu(i);throw new P(ft.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}const Mp=new Map;class Pp{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new P(ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new P(ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function gd(i,e,t,o){if(!0===e&&!0===o)throw new P(ft.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class md{constructor(e,t,o,l){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new P(ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new P(ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pp(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ue;switch(t.type){case"gapi":return new nn(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new P(ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Mp.get(e);t&&(Ut("ComponentProvider","Removing Datastore"),Mp.delete(e),t.terminate())}(this),Promise.resolve()}}class eo{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new eo(this.firestore,e,this._key)}}class pa{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new pa(this.firestore,e,this._query)}}class su extends pa{constructor(e,t,o){super(e,t,Xl(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new eo(this.firestore,null,new Yt(e))}withConverter(e){return new su(this.firestore,e,this._path)}}function cm(i,e,...t){if(i=(0,q.m9)(i),ic("collection","path",e),i instanceof md){const o=jn.fromString(e,...t);return Rc(o),new su(i,null,o)}{if(!(i instanceof eo||i instanceof su))throw new P(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(jn.fromString(e,...t));return Rc(o),new su(i.firestore,null,o)}}function dm(i,e,...t){if(i=(0,q.m9)(i),1===arguments.length&&(e=Wn.R()),ic("doc","path",e),i instanceof md){const o=jn.fromString(e,...t);return Oc(o),new eo(i,null,new Yt(o))}{if(!(i instanceof eo||i instanceof su))throw new P(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(jn.fromString(e,...t));return Oc(o),new eo(i.firestore,i instanceof su?i.converter:null,new Yt(o))}}class th{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Fy{constructor(e,t,o,l){var p=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=l,this.user=Ji.UNAUTHENTICATED,this.clientId=Wn.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var w=(0,f.Z)(function*(N){Ut("FirestoreClient","Received user=",N.uid),yield p.authCredentialListener(N),p.user=N});return function(N){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(o,w=>(Ut("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,f.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new P(ft.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Q;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,f.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const l=nc(o,"Failed to shutdown persistence");t.reject(l)}})),t.promise}}function nh(i,e){return yd.apply(this,arguments)}function yd(){return yd=(0,f.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Ut("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var l=(0,f.Z)(function*(p){o.isEqual(p)||(yield Fg(e.localStore,p),o=p)});return function(p){return l.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),yd.apply(this,arguments)}function Xh(i,e){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,f.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield rh(i);Ut("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(l=>np(e.remoteStore,l)),i.setAppCheckTokenChangeListener((l,p)=>np(e.remoteStore,p)),i.onlineComponents=e}),Jh.apply(this,arguments)}function rh(i){return ef.apply(this,arguments)}function ef(){return ef=(0,f.Z)(function*(i){return i.offlineComponents||(Ut("FirestoreClient","Using default OfflineComponentProvider"),yield nh(i,new wl)),i.offlineComponents}),ef.apply(this,arguments)}function ih(i){return sh.apply(this,arguments)}function sh(){return sh=(0,f.Z)(function*(i){return i.onlineComponents||(Ut("FirestoreClient","Using default OnlineComponentProvider"),yield Xh(i,new rc)),i.onlineComponents}),sh.apply(this,arguments)}function Nc(i){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,f.Z)(function*(i){const e=yield ih(i),t=e.eventManager;return t.onListen=im.bind(null,e.syncEngine),t.onUnlisten=Uu.bind(null,e.syncEngine),t}),Fp.apply(this,arguments)}class Em{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new $f(this,"async_queue_retry"),this.Wc=()=>{const t=$d();t&&Ut("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=$d();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=$d();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Q;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,f.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Es(t))throw t;Ut("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(o=>{throw this.Kc=o,this.Gc=!1,Ai("INTERNAL UNHANDLED ERROR: ",function(p){let w=p.message||"";return p.stack&&(w=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),w}(o)),o}).then(o=>(this.Gc=!1,o))));return this.Bc=t,t}enqueueAfterDelay(e,t,o){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const l=op.createAndSchedule(this,e,t,o,p=>this.Yc(p));return this.Uc.push(l),l}zc(){this.Kc&&yn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,f.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function sf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const l of["next","error","complete"])if(l in o&&"function"==typeof o[l])return!0;return!1}(i)}class Pi extends md{constructor(e,t,o,l){super(e,t,o,l),this.type="firestore",this._queue=new Em,this._persistenceKey=l?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||sc(this),this._firestoreClient.terminate()}}function ky(i,e){const t="object"==typeof i?i:(0,I.Mq)(),o="string"==typeof i?i:e||"(default)",l=(0,I.qX)(t,"firestore").getImmediate({identifier:o});if(!l._initialized){const p=(0,q.P0)("firestore");p&&function um(i,e,t,o={}){var l;const p=(i=zr(i,md))._getSettings();if("firestore.googleapis.com"!==p.host&&p.host!==e&&ea("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},p),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let w,N;if("string"==typeof o.mockUserToken)w=o.mockUserToken,N=Ji.MOCK_USER;else{w=(0,q.Sg)(o.mockUserToken,null===(l=i._app)||void 0===l?void 0:l.options.projectId);const z=o.mockUserToken.sub||o.mockUserToken.user_id;if(!z)throw new P(ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new Ji(z)}i._authCredentials=new we(new V(w,N))}}(l,...p)}return l}function to(i){return i._firestoreClient||sc(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function sc(i){var e;const t=i._freezeSettings(),o=(p=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Fs(i._databaseId,p,i._persistenceKey,(N=t).host,N.ssl,N.experimentalForceLongPolling,N.experimentalAutoDetectLongPolling,N.useFetchStreams));var p,N;i._firestoreClient=new Fy(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Bp(i,e){!function jp(i){if(i._initialized||i._terminated)throw new P(ft.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}(i=zr(i,Pi));const t=to(i),o=i._freezeSettings(),l=new rc;return function af(i,e,t){const o=new Q;return i.asyncQueue.enqueue((0,f.Z)(function*(){try{yield nh(i,t),yield Xh(i,e),o.resolve()}catch(l){const p=l;if(!("FirebaseError"===(w=p).name?w.code===ft.FAILED_PRECONDITION||w.code===ft.UNIMPLEMENTED:!(typeof DOMException<"u"&&w instanceof DOMException)||22===w.code||20===w.code||11===w.code))throw p;ea("Error enabling offline persistence. Falling back to persistence disabled: "+p),o.reject(p)}var w})).then(()=>o.promise)}(t,l,new Ap(l,o.cacheSizeBytes,e?.forceOwnership))}class Lc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lc(Ci.fromBase64String(e))}catch(t){throw new P(ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lc(Ci.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _d{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new P(ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class lf{constructor(e){this._methodName=e}}class uf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return on(this._lat,e._lat)||on(this._long,e._long)}}const Cm=/^__.*__$/;class vd{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new re(e,this.data,this.fieldMask,t,this.fieldTransforms):new $(e,this.data,t,this.fieldTransforms)}}class Im{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new re(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yn()}}class ah{constructor(e,t,o,l,p,w){this.settings=e,this.databaseId=t,this.yt=o,this.ignoreUndefinedProperties=l,void 0===p&&this.na(),this.fieldTransforms=p||[],this.fieldMask=w||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ah(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),l=this.ia({path:o,oa:!1});return l.ua(e),l}ca(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),l=this.ia({path:o,oa:!1});return l.na(),l}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return df(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(wm(this.sa)&&Cm.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class By{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=o||Gd(e)}da(e,t,o,l=!1){return new ah({sa:e,methodName:t,fa:o,path:Lr.emptyPath(),oa:!1,la:l},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Fc(i){const e=i._freezeSettings(),t=Gd(i._databaseId);return new By(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Tm(i,e,t,o,l,p={}){const w=i.da(p.merge||p.mergeFields?2:0,e,t,l);$p("Data must be an object, but it was:",w,o);const N=bm(o,w);let z,J;if(p.merge)z=new Cs(w.fieldMask),J=w.fieldTransforms;else if(p.mergeFields){const ye=[];for(const Pe of p.mergeFields){const ut=Gp(e,Pe,t);if(!w.contains(ut))throw new P(ft.INVALID_ARGUMENT,`Field '${ut}' is specified in your field mask but missing from your input data.`);zp(ye,ut)||ye.push(ut)}z=new Cs(ye),J=w.fieldTransforms.filter(Pe=>z.covers(Pe.field))}else z=null,J=w.fieldTransforms;return new vd(new $s(N),z,J)}class kc extends lf{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kc}}class Tl extends lf{_toFieldTransform(e){return new Hl(e.path,new il)}isEqual(e){return e instanceof Tl}}function Hp(i,e,t,o=!1){return oc(t,i.da(o?4:3,e))}function oc(i,e){if(Am(i=(0,q.m9)(i)))return $p("Unsupported field value:",e,i),bm(i,e);if(i instanceof lf)return function(t,o){if(!wm(o.sa))throw o.ha(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ha(`${t._methodName}() is not currently supported inside arrays`);const l=t._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,o){const l=[];let p=0;for(const w of t){let N=oc(w,o.aa(p));null==N&&(N={nullValue:"NULL_VALUE"}),l.push(N),p++}return{arrayValue:{values:l}}}(i,e)}return function(t,o){if(null===(t=(0,q.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Au(o.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const l=mr.fromDate(t);return{timestampValue:hs(o.yt,l)}}if(t instanceof mr){const l=new mr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:hs(o.yt,l)}}if(t instanceof uf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Lc)return{bytesValue:Cl(o.yt,t._byteString)};if(t instanceof eo){const l=o.databaseId,p=t.firestore._databaseId;if(!p.isEqual(l))throw o.ha(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Pu(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ha(`Unsupported field value: ${Bu(t)}`)}(i,e)}function bm(i,e){const t={};return ia(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qs(i,(o,l)=>{const p=oc(l,e.ra(o));null!=p&&(t[o]=p)}),{mapValue:{fields:t}}}function Am(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof mr||i instanceof uf||i instanceof Lc||i instanceof eo||i instanceof lf)}function $p(i,e,t){if(!Am(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Bu(t);throw e.ha("an object"===o?i+" a custom object":i+" "+o)}var o}function Gp(i,e,t){if((e=(0,q.m9)(e))instanceof _d)return e._internalPath;if("string"==typeof e)return ac(i,e);throw df("Field path arguments must be of type string or ",i,!1,void 0,t)}const Wp=new RegExp("[~\\*/\\[\\]]");function ac(i,e,t){if(e.search(Wp)>=0)throw df(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new _d(...e.split("."))._internalPath}catch{throw df(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function df(i,e,t,o,l){const p=o&&!o.isEmpty(),w=void 0!==l;let N=`Function ${e}() called with invalid data`;t&&(N+=" (via `toFirestore()`)"),N+=". ";let z="";return(p||w)&&(z+=" (found",p&&(z+=` in field ${o}`),w&&(z+=` in document ${l}`),z+=")"),new P(ft.INVALID_ARGUMENT,N+i+z)}function zp(i,e){return i.some(t=>t.isEqual(e))}class Kp{constructor(e,t,o,l,p){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=l,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new eo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Hy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Hy extends Kp{data(){return super.data()}}function lh(i,e){return"string"==typeof e?ac(i,e):e instanceof _d?e._internalPath:e._delegate._internalPath}function Yp(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new P(ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ed{}class uh extends Ed{}function Mm(i,e,...t){let o=[];e instanceof Ed&&o.push(e),o=o.concat(t),function(l){const p=l.filter(N=>N instanceof ju).length,w=l.filter(N=>N instanceof Dd).length;if(p>1||p>0&&w>0)throw new P(ft.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const l of o)i=l._apply(i);return i}class Dd extends uh{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new Dd(e,t,o)}_apply(e){const t=this._parse(e);return Vm(e._query,t),new pa(e.firestore,e.converter,Jl(e._query,t))}_parse(e){const t=Fc(e.firestore);return function(l,p,w,N,z,J,ye){let Pe;if(z.isKeyField()){if("array-contains"===J||"array-contains-any"===J)throw new P(ft.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on documentId().`);if("in"===J||"not-in"===J){Um(ye,J);const ut=[];for(const xt of ye)ut.push(km(N,l,xt));Pe={arrayValue:{values:ut}}}else Pe=km(N,l,ye)}else"in"!==J&&"not-in"!==J&&"array-contains-any"!==J||Um(ye,J),Pe=Hp(w,"where",ye,"in"===J||"not-in"===J);return Or.create(z,J,Pe)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ju extends Ed{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ju(e,t)}_parse(e){const t=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===t.length?t[0]:pi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(o,l){let p=o;const w=l.getFlattenedFilters();for(const N of w)Vm(p,N),p=Jl(p,N)}(e._query,t),new pa(e.firestore,e.converter,Jl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ch extends uh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ch(e,t)}_apply(e){const t=function(o,l,p){if(null!==o.startAt)throw new P(ft.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new P(ft.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new La(l,p);return function(N,z){if(null===Ku(N)){const J=Bl(N);null!==J&&Qp(0,J,z.field)}}(o,w),w}(e._query,this._field,this._direction);return new pa(e.firestore,e.converter,function(o,l){const p=o.explicitOrderBy.concat([l]);return new Hi(o.path,o.collectionGroup,p,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function xm(i,e="asc"){const t=e,o=lh("orderBy",i);return ch._create(o,t)}class Cd extends uh{constructor(e,t,o){super(),this.type=e,this._limit=t,this._limitType=o}static _create(e,t,o){return new Cd(e,t,o)}_apply(e){return new pa(e.firestore,e.converter,jl(e._query,this._limit,this._limitType))}}function Nm(i){return function xc(i,e){if(e<=0)throw new P(ft.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}("limit",i),Cd._create("limit",i,"F")}class dh extends uh{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new dh(e,t,o)}_apply(e){const t=Fm(e,this.type,this._docOrFields,this._inclusive);return new pa(e.firestore,e.converter,(l=t,new Hi((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,l,o.endAt)));var o,l}}function Lm(...i){return dh._create("startAfter",i,!1)}class hh extends uh{constructor(e,t,o){super(),this.type=e,this._docOrFields=t,this._inclusive=o}static _create(e,t,o){return new hh(e,t,o)}_apply(e){const t=Fm(e,this.type,this._docOrFields,this._inclusive);return new pa(e.firestore,e.converter,(l=t,new Hi((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,l)));var o,l}}function Wy(...i){return hh._create("endBefore",i,!1)}function Fm(i,e,t,o){if(t[0]=(0,q.m9)(t[0]),t[0]instanceof Kp)return function(l,p,w,N,z){if(!N)throw new P(ft.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const J=[];for(const ye of ua(l))if(ye.field.isKeyField())J.push(W(p,N.key));else{const Pe=N.data.field(ye.field);if(xo(Pe))throw new P(ft.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ye.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Pe){const ut=ye.field.canonicalString();throw new P(ft.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ut}' (used as the orderBy) does not exist.`)}J.push(Pe)}return new ji(J,z)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const l=Fc(i.firestore);return function(p,w,N,z,J,ye){const Pe=p.explicitOrderBy;if(J.length>Pe.length)throw new P(ft.INVALID_ARGUMENT,`Too many arguments provided to ${z}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ut=[];for(let xt=0;xt<J.length;xt++){const jt=J[xt];if(Pe[xt].field.isKeyField()){if("string"!=typeof jt)throw new P(ft.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${z}(), but got a ${typeof jt}`);if(!Tu(p)&&-1!==jt.indexOf("/"))throw new P(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${z}() must be a plain document ID, but '${jt}' contains a slash.`);const Dn=p.path.child(jn.fromString(jt));if(!Yt.isDocumentKey(Dn))throw new P(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${z}() must result in a valid document path, but '${Dn}' is not because it contains an odd number of segments.`);const Hn=new Yt(Dn);ut.push(W(w,Hn))}else{const Dn=Hp(N,z,jt);ut.push(Dn)}}return new ji(ut,ye)}(i._query,i.firestore._databaseId,l,e,t,o)}}function km(i,e,t){if("string"==typeof(t=(0,q.m9)(t))){if(""===t)throw new P(ft.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tu(e)&&-1!==t.indexOf("/"))throw new P(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(jn.fromString(t));if(!Yt.isDocumentKey(o))throw new P(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return W(i,new Yt(o))}if(t instanceof eo)return W(i,t._key);throw new P(ft.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bu(t)}.`)}function Um(i,e){if(!Array.isArray(i)||0===i.length)throw new P(ft.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new P(ft.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Vm(i,e){if(e.isInequality()){const o=Bl(i),l=e.field;if(null!==o&&!o.isEqual(l))throw new P(ft.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${o.toString()}' and '${l.toString()}'`);const p=Ku(i);null!==p&&Qp(0,l,p)}const t=function(o,l){for(const p of o)for(const w of p.getFlattenedFilters())if(l.indexOf(w.op)>=0)return w.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new P(ft.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Qp(i,e,t){if(!t.isEqual(e))throw new P(ft.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class zy{convertValue(e,t="none"){switch(oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ui(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(hl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw yn()}}convertObject(e,t){const o={};return qs(e.fields,(l,p)=>{o[l]=this.convertValue(p,t)}),o}convertGeoPoint(e){return new uf(ui(e.latitude),ui(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=Ra(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(tl(e));default:return null}}convertTimestamp(e){const t=Da(e);return new mr(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=jn.fromString(e);Tn(vf(o));const l=new Ro(o.get(1),o.get(3)),p=new Yt(o.popFirst(5));return l.isEqual(t)||Ai(`Document ${p} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),p}}class Uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Id extends Kp{constructor(e,t,o,l,p,w){super(e,t,o,l,w),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(lh("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class hf extends Id{data(e={}){return super.data(e)}}class wd{constructor(e,t,o,l){this._firestore=e,this._userDataWriter=t,this._snapshot=l,this.metadata=new Uc(l.hasPendingWrites,l.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new hf(this._firestore,this._userDataWriter,o.key,o,new Uc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let p=0;return o._snapshot.docChanges.map(w=>({type:"added",doc:new hf(o._firestore,o._userDataWriter,w.doc.key,w.doc,new Uc(o._snapshot.mutatedKeys.has(w.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:p++}))}{let p=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(w=>l||3!==w.type).map(w=>{const N=new hf(o._firestore,o._userDataWriter,w.doc.key,w.doc,new Uc(o._snapshot.mutatedKeys.has(w.doc.key),o._snapshot.fromCache),o.query.converter);let z=-1,J=-1;return 0!==w.type&&(z=p.indexOf(w.doc.key),p=p.delete(w.doc.key)),1!==w.type&&(p=p.add(w.doc),J=p.indexOf(w.doc.key)),{type:jm(w.type),doc:N,oldIndex:z,newIndex:J}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function jm(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yn()}}function Hm(i){i=zr(i,eo);const e=zr(i.firestore,Pi);return function oh(i,e,t={}){const o=new Q;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function(l,p,w,N,z){const J=new th({next:Pe=>{p.enqueueAndForget(()=>ap(l,ye));const ut=Pe.docs.has(w);!ut&&Pe.fromCache?z.reject(new P(ft.UNAVAILABLE,"Failed to get document because the client is offline.")):ut&&Pe.fromCache&&N&&"server"===N.source?z.reject(new P(ft.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):z.resolve(Pe)},error:Pe=>z.reject(Pe)}),ye=new cp(Xl(w.path),J,{includeMetadataChanges:!0,Nu:!0});return zl(l,ye)}(yield Nc(i),i.asyncQueue,e,t,o)})),o.promise}(to(e),i._key).then(t=>ph(e,i,t))}class Hu extends zy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new eo(this.firestore,null,t)}}function $m(i){i=zr(i,eo);const e=zr(i.firestore,Pi),t=to(e),o=new Hu(e);return function kp(i,e){const t=new Q;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return(o=(0,f.Z)(function*(l,p,w){try{const N=yield function(z,J){const ye=en(z);return ye.persistence.runTransaction("read document","readonly",Pe=>ye.localDocuments.getDocument(Pe,J))}(l,p);N.isFoundDocument()?w.resolve(N):N.isNoDocument()?w.resolve(null):w.reject(new P(ft.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const z=nc(N,`Failed to get document '${p} from cache`);w.reject(z)}}),function(l,p,w){return o.apply(this,arguments)})(yield function tf(i){return rh(i).then(e=>e.localStore)}(i),e,t);var o})),t.promise}(t,i._key).then(l=>new Id(e,o,i._key,l,new Uc(null!==l&&l.hasLocalMutations,!0),i.converter))}function Gm(i){i=zr(i,pa);const e=zr(i.firestore,Pi),t=to(e),o=new Hu(e);return Yp(i._query),function Up(i,e,t={}){const o=new Q;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function(l,p,w,N,z){const J=new th({next:Pe=>{p.enqueueAndForget(()=>ap(l,ye)),Pe.fromCache&&"server"===N.source?z.reject(new P(ft.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):z.resolve(Pe)},error:Pe=>z.reject(Pe)}),ye=new cp(w,J,{includeMetadataChanges:!0,Nu:!0});return zl(l,ye)}(yield Nc(i),i.asyncQueue,e,t,o)})),o.promise}(t,i._query).then(l=>new wd(e,o,i,l))}function qp(i,e,t,...o){i=zr(i,eo);const l=zr(i.firestore,Pi),p=Fc(l);let w;return w="string"==typeof(e=(0,q.m9)(e))||e instanceof _d?function Yl(i,e,t,o,l,p){const w=i.da(1,e,t),N=[Gp(e,o,t)],z=[l];if(p.length%2!=0)throw new P(ft.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ut=0;ut<p.length;ut+=2)N.push(Gp(e,p[ut])),z.push(p[ut+1]);const J=[],ye=$s.empty();for(let ut=N.length-1;ut>=0;--ut)if(!zp(J,N[ut])){const xt=N[ut];let jt=z[ut];jt=(0,q.m9)(jt);const Dn=w.ca(xt);if(jt instanceof kc)J.push(xt);else{const Hn=oc(jt,Dn);null!=Hn&&(J.push(xt),ye.set(xt,Hn))}}const Pe=new Cs(J);return new Im(ye,Pe,w.fieldTransforms)}(p,"updateDoc",i._key,e,t,o):function Kl(i,e,t,o){const l=i.da(1,e,t);$p("Data must be an object, but it was:",l,o);const p=[],w=$s.empty();qs(o,(z,J)=>{const ye=ac(e,z,t);J=(0,q.m9)(J);const Pe=l.ca(ye);if(J instanceof kc)p.push(ye);else{const ut=oc(J,Pe);null!=ut&&(p.push(ye),w.set(ye,ut))}});const N=new Cs(p);return new Im(w,N,l.fieldTransforms)}(p,"updateDoc",i._key,e),ff(l,[w.toMutation(i._key,C.exists(!0))])}function Vc(i){return ff(zr(i.firestore,Pi),[new ht(i._key,C.none())])}function qy(i,e){const t=zr(i.firestore,Pi),o=dm(i),l=function Zp(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}(i.converter,e);return ff(t,[Tm(Fc(i.firestore),"addDoc",o._key,l,null!==i.converter,{}).toMutation(o._key,C.exists(!1))]).then(()=>o)}function Xy(i,...e){var t,o,l;i=(0,q.m9)(i);let p={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||sf(e[w])||(p=e[w],w++);const N={includeMetadataChanges:p.includeMetadataChanges};if(sf(e[w])){const Pe=e[w];e[w]=null===(t=Pe.next)||void 0===t?void 0:t.bind(Pe),e[w+1]=null===(o=Pe.error)||void 0===o?void 0:o.bind(Pe),e[w+2]=null===(l=Pe.complete)||void 0===l?void 0:l.bind(Pe)}let z,J,ye;if(i instanceof eo)J=zr(i.firestore,Pi),ye=Xl(i._key.path),z={next:Pe=>{e[w]&&e[w](ph(J,i,Pe))},error:e[w+1],complete:e[w+2]};else{const Pe=zr(i,pa);J=zr(Pe.firestore,Pi),ye=Pe._query;const ut=new Hu(J);z={next:xt=>{e[w]&&e[w](new wd(J,ut,Pe,xt))},error:e[w+1],complete:e[w+2]},Yp(i._query)}return function(Pe,ut,xt,jt){const Dn=new th(jt),Hn=new cp(ut,Dn,xt);return Pe.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return zl(yield Nc(Pe),Hn)})),()=>{Dn.bc(),Pe.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return ap(yield Nc(Pe),Hn)}))}}(to(J),ye,N,z)}function ff(i,e){return function(t,o){const l=new Q;return t.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function Gh(i,e,t){return Mc.apply(this,arguments)}(yield function rf(i){return ih(i).then(e=>e.syncEngine)}(t),o,l)})),l.promise}(to(i),e)}function ph(i,e,t){const o=t.docs.get(e._key),l=new Hu(i);return new Id(i,l,e._key,o,new Uc(t.hasPendingWrites,t.fromCache),e.converter)}function Td(){return new Tl("serverTimestamp")}!function(i,e=!0){Qs=I.Jn,(0,I.Xd)(new ee.wA("firestore",(t,{instanceIdentifier:o,options:l})=>{const p=t.getProvider("app").getImmediate(),w=new Pi(new pt(t.getProvider("auth-internal")),new Nr(t.getProvider("app-check-internal")),function(N,z){if(!Object.prototype.hasOwnProperty.apply(N.options,["projectId"]))throw new P(ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ro(N.options.projectId,z)}(p,o),p);return l=Object.assign({useFetchStreams:e},l),w._setSettings(l),w},"PUBLIC").setMultipleInstances(!0)),(0,I.KN)(Jo,"3.8.3",i),(0,I.KN)(Jo,"3.8.3","esm2017")}()},4147:Se=>{Se.exports={i8:"0.0.215"}}},Se=>{Se(Se.s=2077)}]);