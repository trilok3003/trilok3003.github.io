"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[4939],{4939:(A,y,o)=>{o.r(y),o.d(y,{CategoriesNavigationsComponent:()=>b});var c=o(4438),d=o(9949),$=o(7901),C=o(8326),v=o(8701),P=o(177);function D(l,E){if(1&l&&(c.j41(0,"ng-sidenav-link",0),c.EFF(1),c.k0s()),2&l){const g=E.$implicit;c.Mz_("routerLink","category/details/",null==g?null:g.key,""),c.R7$(),c.SpI(" ",null==g?null:g.title," ")}}let b=(()=>{class l{constructor(){this.postDataService=(0,c.WQX)(d.A),this.categories$=this.postDataService.getCategories()}static{this.\u0275fac=function(f){return new(f||l)}}static{this.\u0275cmp=c.VBU({type:l,selectors:[["app-categories-navigations"]],standalone:!1,decls:4,vars:2,consts:[[3,"routerLink"]],template:function(f,M){1&f&&(c.j41(0,"ng-sidenav"),c.Z7z(1,D,2,3,"ng-sidenav-link",0,c.fX1),c.nI1(3,"async"),c.k0s()),2&f&&(c.R7$(),c.Dyx(c.bMT(3,0,M.categories$)))},dependencies:[$.Wk,C.D,v.$,P.AsyncPipe],encapsulation:2})}}return l})()},9949:(A,y,o)=>{o.d(y,{A:()=>w});var c=o(467),d=o(4438),$=o(4668),C=o(7673),v=o(4572),P=o(8810),D=o(9437),b=o(8141),l=o(6354);function R(s){return new Date(s).toISOString().split("T")[0]}var T=o(9972);let O=(()=>{class s{constructor(){this.methodCallCount={}}trackMethodCall(t){this.methodCallCount[t]||(this.methodCallCount[t]=0),this.methodCallCount[t]++,console.log(`${t} called ${this.methodCallCount[t]} times`)}getMethodCallCount(t){return this.methodCallCount[t]||0}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var m=function(s){return s.CATEGORY="categories_wise",s.STATUS="status_wise",s.DATE="date_wise",s}(m||{});let w=(()=>{class s{constructor(t,e){this.firebaseRealtimeDatabaseService=t,this.trackingService=e,this.basePath="topics-db",this.postEndpoint="posts",this.categoryEndpoint="categories",this.sprintEndpoint="sprints",this.totalPosts=(0,d.vPA)(0),this.posts$=this.fetchPosts().pipe((0,$.t)(1)),this.categories$=this.fetchCategories().pipe((0,$.t)(1)),this.safePosts$=this.posts$.pipe((0,D.W)(a=>(this.handleError(a),(0,C.of)([])))),this.postsWithCategory$=(0,v.z)([this.posts$,this.categories$]).pipe((0,b.M)(([a])=>this.totalPosts.set(a.length)),(0,l.T)(([a,n])=>this.attachCategoryNames(a,n))),this.groupedCategories$=(0,v.z)([this.categories$,this.posts$]).pipe((0,l.T)(([a,n])=>a.reduce((i,h)=>{const p=n.filter(S=>S.categoryId===h.key);return(p.length?i.withPosts:i.withoutPosts).push({...h,posts:p}),i},{withPosts:[],withoutPosts:[]})))}fetchPosts(){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.basePath}/${this.postEndpoint}`)}fetchCategories(){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.basePath}/${this.categoryEndpoint}`)}attachCategoryNames(t,e){return t.map(a=>({...a,categoryName:e.find(n=>n.key===a.categoryId)?.title||"Uncategorized"}))}createPost(t){return this.firebaseRealtimeDatabaseService.create(`${this.basePath}/${this.postEndpoint}`,t)}updatePost(t,e){return this.firebaseRealtimeDatabaseService.update(`${this.basePath}/${this.postEndpoint}/${t}`,e)}removePost(t){return this.firebaseRealtimeDatabaseService.remove(`${this.basePath}/${this.postEndpoint}/${t}`)}removeMultiplePosts(t){var e=this;return(0,c.A)(function*(){const a=t.map(n=>e.removePost(n));yield Promise.all(a)})()}getPost(t){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.basePath}/${this.postEndpoint}/${t}`)}getCategoriesWisePosts(){return this.postsWithCategory$.pipe((0,l.T)(t=>this.manageData(m.CATEGORY,t)))}createCategory(t){return this.firebaseRealtimeDatabaseService.create(`${this.basePath}/${this.categoryEndpoint}`,t)}removeCategory(t){return this.firebaseRealtimeDatabaseService.remove(`${this.basePath}/${this.categoryEndpoint}/${t}`)}getCategories(){return this.categories$}getCategory(t){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.basePath}/${this.categoryEndpoint}/${t}`)}getPostsByCategoryId(t){return this.postsWithCategory$.pipe((0,l.T)(e=>e.filter(a=>a.categoryId===t)))}getPostsBySprintId(t){return this.postsWithCategory$.pipe((0,l.T)(e=>e.filter(a=>a.sprintId===t)))}filterPosts(t,e,a="All",n="createdAt",i="desc",h="",p=null){return this.postsWithCategory$.pipe((0,l.T)(u=>function B(s,r,t,e,a,n,i,h){const p=t.toLowerCase().trim();return function f(s,r,t="asc"){return[...s].sort((e,a)=>{const n=e[r],i=a[r],h=n<i?-1:n>i?1:0;return"asc"===t?h:-h})}(s,a,n).filter(u=>{const S=!r||u.categoryId===r,I=u.title?.toLowerCase().includes(p)||u.body?.toLowerCase().includes(p);return S&&I&&("All"===e||u.status===e)&&(!i||u.sprintId===i)&&(null===h||u.bookmark===h)})}(u,t,e,a,n,i,h,p)))}matchesSearch(t,e){const a=t.title?.toLowerCase().includes(e),n=t.body?.toLowerCase().includes(e);return!(!a&&!n)}handleError(t){return console.error("Error occurred:",t),(0,P.$)(()=>new Error("Unknown error occurred. Please try again later."))}manageData(t,e){let a,n;switch(t){case m.CATEGORY:a=i=>i.categoryId,n=i=>i.categoryName;break;case m.STATUS:a=i=>i.status,n=i=>i.status;break;case m.DATE:a=i=>R(i.updatedAt),n=i=>R(i.updatedAt);break;default:return[]}return function E(s,r,t){const e={};for(const a of s){const n=r(a),i=t(a);e[n]||(e[n]={key:n,title:i,data:[]}),e[n].data.push(a)}return Object.values(e)}(e,a,n)}createSprint(t){return this.firebaseRealtimeDatabaseService.create(`${this.basePath}/${this.sprintEndpoint}`,t)}getSprints(){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.basePath}/${this.sprintEndpoint}`)}getSprint(t){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.basePath}/${this.sprintEndpoint}/${t}`)}updateSprint(t,e){return this.firebaseRealtimeDatabaseService.update(`${this.basePath}/${this.sprintEndpoint}/${t}`,e)}static{this.\u0275fac=function(e){return new(e||s)(d.KVO(T.h),d.KVO(O))}}static{this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()}}]);