"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[1447],{1447:(b,u,r)=>{r.r(u),r.d(u,{default:()=>l});var e=r(4438),c=r(7765);let f=(()=>{class s extends c.u{constructor(){super(...arguments),this.basePath="whiteboard-db",this.endpoint=""}static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=e.xGo(s)))(a||s)}})()}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var d=r(9417);const p=["canvas"];let l=(()=>{class s{constructor(){this.drawing=!1,this.lastPoint=null,this.whiteboardService=(0,e.WQX)(f),this.sessionId="room-1",this.color="#000000",this.lineWidth=2,this.points=[]}ngOnInit(){const t=this.canvasRef.nativeElement;t.width=t.offsetWidth,t.height=600,this.ctx=t.getContext("2d"),this.initEvents(),this.whiteboardService.getById(this.sessionId).subscribe(i=>{this.points=i?.data??[],this.redrawFromPoints(this.points)})}initEvents(){const t=this.canvasRef.nativeElement;t.addEventListener("mousedown",i=>this.startDraw(i)),t.addEventListener("mousemove",i=>this.draw(i)),t.addEventListener("mouseup",()=>this.endDraw()),t.addEventListener("mouseleave",()=>this.endDraw())}startDraw(t){this.drawing=!0;const i=this.getCoordinates(t);this.lastPoint=i}draw(t){if(!this.drawing)return;const i=this.getCoordinates(t);this.drawOnCanvas(i,!0)}endDraw(){this.drawing=!1,this.lastPoint=null}getCoordinates(t){const a=this.canvasRef.nativeElement.getBoundingClientRect();return{x:t.clientX-a.left,y:t.clientY-a.top}}drawOnCanvas(t,i){this.ctx&&(this.ctx.lineWidth=this.lineWidth,this.ctx.lineCap="round",this.ctx.strokeStyle=this.color,this.lastPoint&&(this.ctx.beginPath(),this.ctx.moveTo(this.lastPoint.x,this.lastPoint.y),this.ctx.lineTo(t.x,t.y),this.ctx.stroke()),this.lastPoint={x:t.x,y:t.y},i&&(this.points.push({...this.lastPoint,color:this.color,width:this.lineWidth}),this.whiteboardService.update(this.sessionId,{data:this.points})))}redrawFromPoints(t){const i=this.canvasRef.nativeElement;this.ctx.clearRect(0,0,i.width,i.height),this.lastPoint=null,t.forEach(a=>{this.color=a.color,this.lineWidth=a.width,this.drawOnCanvas(a,!1)})}clearCanvas(){this.points=[],this.ctx.clearRect(0,0,this.canvasRef.nativeElement.width,this.canvasRef.nativeElement.height),this.whiteboardService.update(this.sessionId,{data:[]})}static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-whiteboard"]],viewQuery:function(i,a){if(1&i&&e.GBs(p,7),2&i){let o;e.mGM(o=e.lsd())&&(a.canvasRef=o.first)}},decls:7,vars:2,consts:[["canvas",""],[1,"toolbar"],["type","color",3,"ngModelChange","ngModel"],["type","range","min","1","max","10",3,"ngModelChange","ngModel"],[3,"click"],["width","800","height","600",2,"border","1px solid #ccc"]],template:function(i,a){if(1&i){const o=e.RV6();e.j41(0,"div",1)(1,"input",2),e.mxI("ngModelChange",function(h){return e.eBV(o),e.DH7(a.color,h)||(a.color=h),e.Njj(h)}),e.k0s(),e.j41(2,"input",3),e.mxI("ngModelChange",function(h){return e.eBV(o),e.DH7(a.lineWidth,h)||(a.lineWidth=h),e.Njj(h)}),e.k0s(),e.j41(3,"button",4),e.bIt("click",function(){return e.eBV(o),e.Njj(a.clearCanvas())}),e.EFF(4,"\u{1f9f9} Clear"),e.k0s()(),e.nrm(5,"canvas",5,0)}2&i&&(e.R7$(),e.R50("ngModel",a.color),e.R7$(),e.R50("ngModel",a.lineWidth))},dependencies:[d.YN,d.me,d.MR,d.BC,d.vS],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px;background:#f5f7fa;height:100vh;box-sizing:border-box;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:16px;background:#fff;padding:10px 20px;border-radius:8px;box-shadow:0 2px 6px #0000001a}.toolbar[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{width:40px;height:40px;border:none;background:none;padding:0;cursor:pointer}.toolbar[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{width:120px}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;background-color:#ff5252;border:none;color:#fff;font-weight:700;border-radius:6px;cursor:pointer;transition:background-color .3s ease}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#e53935}canvas[_ngcontent-%COMP%]{width:100%;max-width:1000px;height:auto;border:2px solid #cfd8dc;background-color:#fff;box-shadow:0 0 10px #0000000d;border-radius:8px}"]})}}return s})()},7765:(b,u,r)=>{r.d(u,{u:()=>p});var e=r(467),c=r(4438),f=r(9972),d=r(1469);let p=(()=>{class l{constructor(){this.db=(0,c.WQX)(f.h),this.storageService=(0,c.WQX)(d._)}get fullPath(){return`${this.basePath}/${this.endpoint}`}generatePath(n=""){return n?`${this.fullPath}/${n}`:this.fullPath}create(n="",t){return this.db.create(this.generatePath(n),t)}get$(){return this.db.readRealtime$(this.fullPath)}getById(n){return this.db.readRealtimeOriginal$(`${this.fullPath}/${n}`)}update(n,t){return this.db.update(`${this.fullPath}/${n}`,t)}remove(n){return this.db.remove(`${this.fullPath}/${n}`)}set(n,t){return this.db.set(this.generatePath(n),t)}getKeys$(n=""){return this.db.getKeys$(this.generatePath(n))}getKeys(n=""){return this.db.getKeys(this.generatePath(n))}readOnce(n=""){return this.db.readOnce(this.generatePath(n))}read$(n=""){return this.db.readRealtime$(this.generatePath(n))}readRealtimeWhere$(n,t){return this.db.readRealtimeWhere$(this.generatePath(n),t)}clearDb(){return this.set("",null)}updateCounter(n,t=!0){return this.db.updateCounterV2(this.generatePath(n),t)}createWithFile(n="",t,i,a){var o=this;return(0,e.A)(function*(){if(!i)throw new Error("Please select an image.");const g=yield o.storageService.uploadFile(o.generatePath(n),i,a),h={...t,imageUrl:g};yield o.create(n,h)})()}uploadFile(n="",t,i){var a=this;return(0,e.A)(function*(){if(!t)throw new Error("Please select an image.");return yield a.storageService.uploadFile(a.generatePath(n),t,i)})()}extractAndUploadFiles(n="",t,i){var a=this;return(0,e.A)(function*(){return a.storageService.extractAndUploadFiles(t,a.generatePath(n),i)})()}static{this.\u0275fac=function(t){return new(t||l)}}static{this.\u0275prov=c.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})()}}]);