"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[4333],{4333:(G,f,i)=>{i.r(f),i.d(f,{EncapsulatingModule:()=>b});var m=i(6895),h=i(4793),e=i(4650);class u{}var c=i(4006);function M(a,r){if(1&a){const t=e.EpF();e.TgZ(0,"li",5),e._uU(1),e.TgZ(2,"a",6),e.NdJ("click",function(){const g=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.deleteMessage(g))}),e._uU(3,"Delete"),e.qZA()()}if(2&a){const t=r.$implicit;e.MGl("title","Created at ",t.createdAt.toTimeString(),""),e.xp6(1),e.hij(" ",t.text," \u2014 ")}}function y(a,r){if(1&a&&(e.TgZ(0,"ul"),e.YNc(1,M,4,2,"li",4),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.messages)}}const C=[{path:"",component:(()=>{class a{constructor(t){this.messageGateway=t,this.form={message:""},this.messages=[]}addMessage(){this.form.message&&(this.messageGateway.createMessage({text:this.form.message,createdAt:new Date}),this.form.message="")}deleteMessage(t){this.messageGateway.deleteMessage(t.id)}ngOnInit(){this.messageGateway.readMessagesAsStream().subscribe(s=>{this.messages=s},s=>{console.warn("Read Message As Stream Error"),console.error(s)})}static#e=this.\u0275fac=function(s){return new(s||a)(e.Y36(u))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-encapsulating"]],decls:11,vars:3,consts:[[4,"ngIf"],[3,"submit"],["type","text","name","message","autofocus","",3,"ngModel","ngModelChange"],["type","submit","value","Add Message"],[3,"title",4,"ngFor","ngForOf"],[3,"title"],[3,"click"]],template:function(s,n){1&s&&(e.TgZ(0,"h2"),e._uU(1),e.qZA(),e.YNc(2,y,2,1,"ul",0),e.TgZ(3,"form",1),e.NdJ("submit",function(){return n.addMessage()}),e.TgZ(4,"input",2),e.NdJ("ngModelChange",function(l){return n.form.message=l}),e.qZA(),e._UZ(5,"input",3),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"h2"),e._uU(8," Choose A Gateway Implementation\n"),e.qZA(),e.TgZ(9,"p"),e._uU(10,' Note that all of these implementations provide a "stream" I/O method.\n'),e.qZA()),2&s&&(e.xp6(1),e.hij(" You Have ",n.messages.length," Message(s)!\n"),e.xp6(1),e.Q6J("ngIf",n.messages.length),e.xp6(2),e.Q6J("ngModel",n.form.message))},dependencies:[m.sg,m.O5,c._Y,c.Fj,c.JJ,c.JL,c.On,c.F]})}return a})()}];let v=(()=>{class a{static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275mod=e.oAB({type:a});static#s=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(C),h.Bz]})}return a})();var A=i(259),o=i(6197),w=i(9751),x=i(2340);class Z extends u{constructor(){super(),this.firebaseApp=(0,A.ZF)(x.N.firebaseConfig),this.firebaseDB=(0,o.N8)(this.firebaseApp)}createMessage(r){const t=(0,o.VF)((0,o.iH)(this.firebaseDB,"/2017-09-03/")),s={id:t.key,text:r.text,createdAt:r.createdAt.getTime()};return(0,o.t8)(t,s).catch(n=>{console.log("Create Message Failed"),console.error(n),console.log("Transfer Object:"),console.dir(s)}),Promise.resolve(t.key)}deleteMessage(r){return(0,o.Od)((0,o.iH)(this.firebaseDB,"/2017-09-03/"+r)).catch(t=>{console.log("Delete Message Failed"),console.error(t),console.log("ID:",r)}),Promise.resolve()}readMessages(){const r=(0,o.iH)(this.firebaseDB,"/2017-09-03/");return(0,o.U2)(r).then(s=>{const n=[];return s.exists()&&s.forEach(g=>{const l=g.val();return n.push({id:l.id,text:l.text,createdAt:new Date(l.createdAt)}),!1}),n})}readMessagesAsStream(){return new w.y(t=>{let s=(0,o.iH)(this.firebaseDB,"/2017-09-03/"),n=(0,o.jM)(s,l=>{const d=[];l.exists()?(l.forEach(T=>{const p=T.val();return d.push({id:p.id,text:p.text,createdAt:new Date(p.createdAt)}),!1}),t.next(d)):t.next(d)});return function g(){(0,o.S1)(s,"value",n),s=n=null}})}}let b=(()=>{class a{static#e=this.\u0275fac=function(s){return new(s||a)};static#t=this.\u0275mod=e.oAB({type:a});static#s=this.\u0275inj=e.cJS({providers:[{provide:u,useClass:Z}],imports:[m.ez,v,c.u5]})}return a})()}}]);