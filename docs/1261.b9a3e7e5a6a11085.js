"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[1261],{1261:(v,h,i)=>{i.r(h),i.d(h,{default:()=>y});var _=i(467),t=i(4438),l=i(9417),f=i(8591),P=i(9079),u=i(177),M=i(7765);let e=(()=>{class o extends M.u{constructor(){super(...arguments),this.basePath="POSTS-DB",this.endpoint=""}static{this.\u0275fac=(()=>{let n;return function(r){return(n||(n=t.xGo(o)))(r||o)}})()}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();function s(o,d){1&o&&(t.j41(0,"div",3),t.EFF(1,"Title is required."),t.k0s())}function c(o,d){1&o&&(t.j41(0,"div",3),t.EFF(1,"Content is required."),t.k0s())}function g(o,d){if(1&o&&(t.j41(0,"div",8)(1,"p"),t.EFF(2,"Preview:"),t.k0s(),t.nrm(3,"img",12),t.k0s()),2&o){const n=t.XpG();t.R7$(3),t.Y8G("src",n.imagePreview,t.B4B)}}function C(o,d){if(1&o&&(t.j41(0,"div",9),t.EFF(1),t.k0s()),2&o){const n=t.XpG();t.R7$(),t.SpI("Uploading... ",n.uploadProgress.toFixed(0),"%")}}function b(o,d){1&o&&t.EFF(0," loading posts... ")}function O(o,d){if(1&o&&(t.j41(0,"div",13),t.nrm(1,"img",14),t.j41(2,"div",15)(3,"h3"),t.EFF(4),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s(),t.j41(7,"small"),t.EFF(8),t.nI1(9,"date"),t.k0s()()()),2&o){const n=d.$implicit;t.R7$(),t.Y8G("src",n.imageUrl,t.B4B),t.R7$(3),t.JRh(n.title),t.R7$(2),t.JRh(n.content),t.R7$(2),t.JRh(t.i5U(9,4,n.createdAt,"short"))}}function F(o,d){if(1&o&&t.Z7z(0,O,10,7,"div",13,t.Vm6),2&o){const n=t.XpG();t.Dyx(n.dataResource.value())}}function x(o,d){if(1&o){const n=t.RV6();t.EFF(0),t.j41(1,"button",16),t.bIt("click",function(){t.eBV(n);const r=t.XpG();return t.Njj(r.dataResource.reload())}),t.EFF(2,"Retry"),t.k0s()}if(2&o){const n=t.XpG();t.SpI(" The request failed. Reason: ",n.dataResource.error," ")}}let y=(()=>{class o{constructor(){this.selectedFile=null,this.imagePreview=null,this.uploading=!1,this.uploadProgress=0,this.fb=(0,t.WQX)(l.ok),this.storageService=(0,t.WQX)(f._),this.facebookService=(0,t.WQX)(e),this.dataResource=(0,P.ZX)({loader:()=>this.facebookService.get$()}),this.postForm=this.fb.group({title:["",l.k0.required],content:["",l.k0.required]})}onFileSelected(n){const a=n.target;if(a.files?.length){this.selectedFile=a.files[0];const r=new FileReader;r.onload=()=>this.imagePreview=r.result,r.readAsDataURL(this.selectedFile)}}submitPost(){var n=this;return(0,_.A)(function*(){if(n.selectedFile){n.uploading=!0;try{const a=yield n.storageService.uploadFile("posts",n.selectedFile,p=>{n.uploadProgress=p}),r={...n.postForm.value,imageUrl:a};yield n.facebookService.create(r),n.resetForm(),alert("Post submitted successfully!")}catch(a){console.error("Error uploading post:",a)}finally{n.uploading=!1}}else alert("Please select an image.")})()}resetForm(){this.postForm.reset(),this.imagePreview=null,this.selectedFile=null,this.uploadProgress=0}static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-posts-app"]],decls:25,vars:8,consts:[[1,"post-form",3,"ngSubmit","formGroup"],["for","title"],["id","title","formControlName","title","type","text"],[1,"error"],["for","content"],["id","content","formControlName","content"],["for","image"],["id","image","type","file","accept","image/*",3,"change"],[1,"image-preview"],[1,"progress-bar"],["type","submit",3,"disabled"],[1,"post-list"],["alt","Image preview",3,"src"],[1,"post-card"],["alt","Post image",3,"src"],[1,"post-content"],[3,"click"]],template:function(a,r){if(1&a&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return r.submitPost()}),t.j41(1,"h2"),t.EFF(2,"Create Post"),t.k0s(),t.j41(3,"div")(4,"label",1),t.EFF(5,"Title"),t.k0s(),t.nrm(6,"input",2),t.DNE(7,s,2,0,"div",3),t.k0s(),t.j41(8,"div")(9,"label",4),t.EFF(10,"Content"),t.k0s(),t.nrm(11,"textarea",5),t.DNE(12,c,2,0,"div",3),t.k0s(),t.j41(13,"div")(14,"label",6),t.EFF(15,"Image"),t.k0s(),t.j41(16,"input",7),t.bIt("change",function(m){return r.onFileSelected(m)}),t.k0s()(),t.DNE(17,g,4,1,"div",8)(18,C,2,1,"div",9),t.j41(19,"button",10),t.EFF(20),t.k0s()(),t.j41(21,"div",11),t.DNE(22,b,1,0)(23,F,2,0)(24,x,3,1),t.k0s()),2&a){let p,m;t.Y8G("formGroup",r.postForm),t.R7$(7),t.vxM(null!=(p=r.postForm.get("title"))&&p.invalid&&null!=(p=r.postForm.get("title"))&&p.touched?7:-1),t.R7$(5),t.vxM(null!=(m=r.postForm.get("content"))&&m.invalid&&null!=(m=r.postForm.get("content"))&&m.touched?12:-1),t.R7$(5),t.vxM(r.imagePreview?17:-1),t.R7$(),t.vxM(r.uploading?18:-1),t.R7$(),t.Y8G("disabled",r.postForm.invalid||r.uploading),t.R7$(),t.SpI(" ",r.uploading?"Uploading...":"Submit Post"," "),t.R7$(2),t.vxM(r.dataResource.isLoading()?22:r.dataResource.hasValue()?23:24)}},dependencies:[l.X1,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,u.DatePipe],styles:[".post-form[_ngcontent-%COMP%]{max-width:500px;margin:2rem auto;padding:1.5rem;display:flex;flex-direction:column;gap:1rem;background-color:#f9f9f9;border-radius:8px;border:1px solid #e0e0e0}.post-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .post-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.post-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .post-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.post-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#007bff;color:#fff;border:none;border-radius:4px;font-weight:500;cursor:pointer;transition:background .3s ease}.post-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.post-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.post-form[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red;font-size:.85rem}.post-form[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{font-size:.9rem;color:#555}.post-form[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:200px;display:block;margin-top:.5rem;border-radius:4px;object-fit:cover}.post-list[_ngcontent-%COMP%]{margin:3rem auto;max-width:800px;display:grid;gap:1.5rem}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]{display:flex;gap:1rem;background:#fff;border:1px solid #ddd;padding:1rem;border-radius:6px;box-shadow:0 1px 3px #0000000d;transition:box-shadow .3s ease}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #0000001a}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:100%;object-fit:cover;border-radius:4px;flex-shrink:0}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.2rem}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#444}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#888;font-size:.85rem}@media (max-width: 600px){.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]{flex-direction:column}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}}"]})}}return o})()},7765:(v,h,i)=>{i.d(h,{u:()=>P});var _=i(467),t=i(4438),l=i(1994),f=i(8591);let P=(()=>{class u{constructor(){this.db=(0,t.WQX)(l.h),this.storageService=(0,t.WQX)(f._)}get fullPath(){return`${this.basePath}/${this.endpoint}`}generatePath(e=""){return e?`${this.fullPath}/${e}`:this.fullPath}create(e,s){return this.db.create(this.generatePath(s),e)}get$(){return this.db.readRealtime$(this.fullPath)}getById(e){return this.db.readRealtimeOriginal$(`${this.fullPath}/${e}`)}update(e,s){return this.db.update(`${this.fullPath}/${e}`,s)}remove(e){return this.db.remove(`${this.fullPath}/${e}`)}set(e,s){return this.db.set(this.generatePath(e),s)}getKeys$(e=""){return this.db.getKeys$(this.generatePath(e))}getKeys(e=""){return this.db.getKeys(this.generatePath(e))}readOnce(e=""){return this.db.readOnce(this.generatePath(e))}read$(e=""){return this.db.readRealtime$(this.generatePath(e))}clearDb(){return this.set("",null)}updateCounter(e,s=!0){return this.db.updateCounterV2(this.generatePath(e),s)}createWithFile(e,s,c){var g=this;return(0,_.A)(function*(){if(!s)throw new Error("Please select an image.");const C=yield g.storageService.uploadFile(g.basePath,s,c),b={...e,imageUrl:C};yield g.create(b)})()}uploadFile(e,s){var c=this;return(0,_.A)(function*(){if(!e)throw new Error("Please select an image.");return yield c.storageService.uploadFile(c.basePath,e,s)})()}extractAndUploadFiles(e,s){var c=this;return(0,_.A)(function*(){return c.storageService.extractAndUploadFiles(e,c.basePath,s)})()}static{this.\u0275fac=function(s){return new(s||u)}}static{this.\u0275prov=t.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()}}]);