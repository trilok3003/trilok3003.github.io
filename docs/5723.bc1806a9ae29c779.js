"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[5723],{5723:(X,p,o)=>{o.r(p),o.d(p,{default:()=>L});var g=o(467),v=o(306),l=o(177),h=o(7200),d=o(1979),b=o(150),E=o(8475),t=o(4438),F=o(6651),y=o(6812);const A=e=>({$implicit:e}),m=(e,s)=>({$implicit:e,parent:s}),u=(e,s)=>s.key;function O(e,s){1&e&&(t.j41(0,"h1"),t.EFF(1),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",s.length," "))}function $(e,s){if(1&e&&(t.j41(0,"app-theme-semantic-badge",6),t.EFF(1),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",n.status," ")}}function T(e,s){if(1&e&&(t.j41(0,"app-theme-semantic-badge",5),t.EFF(1),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",n.status," ")}}function k(e,s){if(1&e&&(t.j41(0,"app-theme-semantic-badge",3),t.EFF(1),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",n.status," ")}}function j(e,s){if(1&e&&(t.qex(0),t.j41(1,"b"),t.EFF(2,"Last Active At"),t.k0s(),t.EFF(3),t.nI1(4,"date"),t.bVm()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.SpI(" ",t.bMT(4,1,n.timestamp)," ")}}function C(e,s){if(1&e){const n=t.RV6();t.j41(0,"button",16),t.bIt("click",function(){t.eBV(n);const i=t.XpG().$implicit,a=t.XpG(2);return t.Njj(a.setOffline(null==i?null:i.key))}),t.EFF(1,"Offline"),t.k0s()}}function R(e,s){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.DNE(4,$,2,1,"app-theme-semantic-badge",11)(5,T,2,1,"app-theme-semantic-badge",12)(6,k,2,1,"app-theme-semantic-badge",13),t.k0s(),t.j41(7,"td"),t.DNE(8,j,5,3,"ng-container",14),t.k0s(),t.j41(9,"td"),t.DNE(10,C,2,0,"button",15),t.k0s()()),2&e){const n=s.$implicit;t.R7$(2),t.SpI(" ",n.key,""),t.R7$(2),t.Y8G("ngIf","offline"===n.status),t.R7$(),t.Y8G("ngIf","online"===n.status),t.R7$(),t.Y8G("ngIf","away"===n.status),t.R7$(2),t.Y8G("ngIf","offline"===n.status),t.R7$(2),t.Y8G("ngIf","offline"!==n.status)}}function I(e,s){if(1&e&&(t.j41(0,"app-table-container",10)(1,"h2"),t.EFF(2,"Users"),t.k0s(),t.j41(3,"table")(4,"thead")(5,"tr")(6,"th"),t.EFF(7,"Id"),t.k0s(),t.j41(8,"th"),t.EFF(9,"Status"),t.k0s(),t.j41(10,"th"),t.EFF(11,"Date"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Action"),t.k0s()()(),t.j41(14,"tbody"),t.Z7z(15,R,11,6,"tr",null,u),t.k0s()()()),2&e){const n=s.ngIf;t.R7$(15),t.Dyx(n)}}function D(e,s){1&e&&t.eu8(0)}function M(e,s){if(1&e&&(t.j41(0,"tr")(1,"td",17)(2,"strong"),t.EFF(3),t.nI1(4,"uppercase"),t.k0s()()(),t.DNE(5,D,1,0,"ng-container",18)),2&e){const n=s.$implicit;t.XpG();const _=t.sdS(44);t.R7$(3),t.JRh(t.bMT(4,3,n.key)),t.R7$(2),t.Y8G("ngTemplateOutlet",_)("ngTemplateOutletContext",t.eq3(5,A,n))}}function P(e,s){if(1&e&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"b"),t.EFF(5),t.k0s()()()),2&e){const n=t.XpG(2),_=n.parent,i=n.$implicit;t.R7$(2),t.E5c(" ",_," ",_?"/":""," ",i.key," "),t.R7$(3),t.JRh(i.value.counter)}}function G(e,s){1&e&&t.eu8(0)}function U(e,s){if(1&e&&(t.qex(0),t.DNE(1,P,6,4,"tr",14)(2,G,1,0,"ng-container",18),t.bVm()),2&e){const n=t.XpG(),_=n.parent,i=n.$implicit;t.XpG();const a=t.sdS(46);t.R7$(),t.Y8G("ngIf",i.value.counter),t.R7$(),t.Y8G("ngTemplateOutlet",a)("ngTemplateOutletContext",t.l_i(3,m,i,_?_+" / "+i.key:i.key))}}function S(e,s){1&e&&t.DNE(0,U,3,6,"ng-container",14),2&e&&t.Y8G("ngIf","counter"!==s.$implicit.key)}function x(e,s){1&e&&t.eu8(0)}function N(e,s){if(1&e&&(t.qex(0),t.DNE(1,x,1,0,"ng-container",18),t.bVm()),2&e){const n=s.$implicit,_=t.XpG().parent;t.XpG();const i=t.sdS(44);t.R7$(),t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.l_i(2,m,n,_))}}function B(e,s){1&e&&(t.DNE(0,N,2,5,"ng-container",19),t.nI1(1,"keyvalue")),2&e&&t.Y8G("ngForOf",t.bMT(1,1,s.$implicit.value))}let L=(()=>{class e{constructor(n,_){this.presenceService=n,this.activityMonitorService=_,this.counts$=this.presenceService.getUserOnlineCounts$,this.totalUsers$=this.presenceService.getUsers$("desc"),this.flattenObject1=i=>{const a={};return Object.keys(i).forEach(c=>{const r=i[c];"object"!=typeof r||null===r||Array.isArray(r)?a[c]=r:Object.assign(a,this.flattenObject1(r))}),a},this.flattenObject=i=>{let a={};for(const c in i)if(i.hasOwnProperty(c))if("object"!=typeof i[c]||Array.isArray(i[c]))a[c]=i[c];else{const r=this.flattenObject(i[c]);for(const f in r)a[c+"_"+f]=r[f]}return a}}setOffline(n){this.presenceService.setPresence(n,"offline")}ngOnInit(){var n=this;this.activityMonitorService.getServer$().subscribe(_=>{this.serverActivities=_}),this.activityMonitorService.getErrorLogs$().subscribe(_=>{console.log("logging-activities",_)}),this.activityMonitorService.getRouter$().subscribe(function(){var _=(0,g.A)(function*(i){n.routerActivities=i,n.routerActivitiesCount=Object.keys(n.routerActivities).length});return function(i){return _.apply(this,arguments)}}())}d(n){let _={};for(let i in n)if(n.hasOwnProperty(i)){const a=typeof n[i];"string"===a?_[i]=n[i]:"object"===a&&this.d(n[i])}}logOutAllUsers(){confirm("Are u Sure ?")&&this.presenceService.logOutAllUsers()}static{this.\u0275fac=function(_){return new(_||e)(t.rXU(F.BF),t.rXU(y.L))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["fb-activities"]],decls:47,vars:14,consts:[["rows",""],["inner",""],["appGrid",""],["variant","info"],["variant","warning"],["variant","success"],["variant","danger"],["app-theme-semantic-button","","variant","info",3,"click"],["appGrid","",3,"cols"],["height","500px",4,"ngIf"],["height","500px"],["variant","danger",4,"ngIf"],["variant","success",4,"ngIf"],["variant","info",4,"ngIf"],[4,"ngIf"],["app-theme-semantic-button","","variant","danger",3,"click",4,"ngIf"],["app-theme-semantic-button","","variant","danger",3,"click"],["colspan","2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"]],template:function(_,i){if(1&_){const a=t.RV6();t.j41(0,"section",2)(1,"app-theme-semantic-card",3)(2,"h1"),t.EFF(3),t.nI1(4,"async"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Online Users"),t.k0s()(),t.j41(7,"app-theme-semantic-card",4),t.DNE(8,O,2,1,"h1"),t.nI1(9,"async"),t.j41(10,"p"),t.EFF(11,"Total Users"),t.k0s()(),t.j41(12,"app-theme-semantic-card",5)(13,"h1"),t.EFF(14),t.k0s(),t.j41(15,"p"),t.EFF(16,"Server Requests"),t.k0s()(),t.j41(17,"app-theme-semantic-card",6)(18,"h1"),t.EFF(19),t.k0s(),t.j41(20,"p"),t.EFF(21,"Pages Views"),t.k0s()()(),t.j41(22,"section")(23,"app-theme-semantic-card",6)(24,"button",7),t.bIt("click",function(){return t.eBV(a),t.Njj(i.logOutAllUsers())}),t.EFF(25,"Logout All Users"),t.k0s()()(),t.j41(26,"section",8),t.DNE(27,I,17,0,"app-table-container",9),t.nI1(28,"async"),t.j41(29,"app-table-container",10)(30,"h2"),t.EFF(31,"Router Activities"),t.k0s(),t.j41(32,"table")(33,"thead")(34,"tr")(35,"th"),t.EFF(36,"Modules"),t.k0s(),t.j41(37,"th"),t.EFF(38,"Views"),t.k0s()()(),t.j41(39,"tbody"),t.Z7z(40,M,6,7,null,null,u),t.nI1(42,"keyvalue"),t.k0s()()()(),t.DNE(43,S,1,1,"ng-template",null,0,t.C5r)(45,B,2,3,"ng-template",null,1,t.C5r)}if(2&_){let a;t.R7$(3),t.SpI(" ",t.bMT(4,6,i.counts$)," "),t.R7$(5),t.vxM((a=t.bMT(9,8,i.totalUsers$))?8:-1,a),t.R7$(6),t.JRh(null==i.serverActivities?null:i.serverActivities.counter),t.R7$(5),t.JRh(i.routerActivitiesCount),t.R7$(7),t.Y8G("cols",1),t.R7$(),t.Y8G("ngIf",t.bMT(28,10,i.totalUsers$)),t.R7$(13),t.Dyx(t.bMT(42,12,i.routerActivities))}},dependencies:[v.F,l.AsyncPipe,l.DatePipe,l.KeyValuePipe,l.UpperCasePipe,l.NgFor,h.i,d.d,b.g,l.NgIf,l.NgTemplateOutlet,E.rh],encapsulation:2})}}return e})()}}]);