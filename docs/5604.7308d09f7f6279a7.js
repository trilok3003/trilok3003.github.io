"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[5604],{2743:(I,m,o)=>{o.d(m,{A:()=>T});var c=o(467),g=o(4438),b=o(4668),y=o(7673),v=o(4572),C=o(8810),P=o(9437),D=o(8141),h=o(6354);function k(s){return new Date(s).toISOString().split("T")[0]}var M=o(9972);let A=(()=>{class s{constructor(){this.methodCallCount={}}trackMethodCall(t){this.methodCallCount[t]||(this.methodCallCount[t]=0),this.methodCallCount[t]++,console.log(`${t} called ${this.methodCallCount[t]} times`)}getMethodCallCount(t){return this.methodCallCount[t]||0}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=g.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var $=function(s){return s.CATEGORY="categories_wise",s.STATUS="status_wise",s.DATE="date_wise",s}($||{});let T=(()=>{class s{constructor(t,e){this.firebaseRealtimeDatabaseService=t,this.trackingService=e,this.basePath="topics-db",this.postEndpoint="posts",this.categoryEndpoint="categories",this.sprintEndpoint="sprints",this.checklistEndpoint="checklist",this.totalPosts=(0,g.vPA)(0),this.posts$=this.fetchPosts().pipe((0,b.t)(1)),this.categories$=this.fetchCategories().pipe((0,b.t)(1)),this.safePosts$=this.posts$.pipe((0,P.W)(a=>(this.handleError(a),(0,y.of)([])))),this.postsWithCategory$=(0,v.z)([this.posts$,this.categories$]).pipe((0,D.M)(([a])=>this.totalPosts.set(a.length)),(0,h.T)(([a,r])=>this.attachCategoryNames(a,r))),this.groupedCategories$=(0,v.z)([this.categories$,this.posts$]).pipe((0,h.T)(([a,r])=>a.reduce((n,l)=>{const p=r.filter(S=>S.categoryId===l.key);return(p.length?n.withPosts:n.withoutPosts).push({...l,posts:p}),n},{withPosts:[],withoutPosts:[]})))}fetchPosts(){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.basePath}/${this.postEndpoint}`)}fetchCategories(){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.basePath}/${this.categoryEndpoint}`)}attachCategoryNames(t,e){return t.map(a=>({...a,categoryName:e.find(r=>r.key===a.categoryId)?.title||"Uncategorized"}))}createPost(t){return this.firebaseRealtimeDatabaseService.create(`${this.basePath}/${this.postEndpoint}`,t)}updatePost(t,e){return this.firebaseRealtimeDatabaseService.update(`${this.basePath}/${this.postEndpoint}/${t}`,e)}removePost(t){return this.firebaseRealtimeDatabaseService.remove(`${this.basePath}/${this.postEndpoint}/${t}`)}removeMultiplePosts(t){var e=this;return(0,c.A)(function*(){const a=t.map(r=>e.removePost(r));yield Promise.all(a)})()}getPost(t){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.basePath}/${this.postEndpoint}/${t}`)}getCategoriesWisePosts(){return this.postsWithCategory$.pipe((0,h.T)(t=>this.manageData($.CATEGORY,t)))}createCategory(t){return this.firebaseRealtimeDatabaseService.create(`${this.basePath}/${this.categoryEndpoint}`,t)}removeCategory(t){return this.firebaseRealtimeDatabaseService.remove(`${this.basePath}/${this.categoryEndpoint}/${t}`)}getCategories(){return this.categories$}getCategory(t){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.basePath}/${this.categoryEndpoint}/${t}`)}getPostsByCategoryId(t){return this.postsWithCategory$.pipe((0,h.T)(e=>e.filter(a=>a.categoryId===t)))}getPostsBySprintId(t){return this.postsWithCategory$.pipe((0,h.T)(e=>e.filter(a=>a.sprintId===t)))}filterPosts(t,e,a="All",r="createdAt",n="desc",l="",p=null){return this.postsWithCategory$.pipe((0,h.T)(u=>function O(s,i,t,e,a,r,n,l){const p=t.toLowerCase().trim();return function f(s,i,t="asc"){return[...s].sort((e,a)=>{const r=e[i],n=a[i],l=r<n?-1:r>n?1:0;return"asc"===t?l:-l})}(s,a,r).filter(u=>{const S=!i||u.categoryId===i,B=u.title?.toLowerCase().includes(p)||u.body?.toLowerCase().includes(p);return S&&B&&("All"===e||u.status===e)&&(!n||u.sprintId===n)&&(null===l||u.bookmark===l)})}(u,t,e,a,r,n,l,p)))}matchesSearch(t,e){const a=t.title?.toLowerCase().includes(e),r=t.body?.toLowerCase().includes(e);return!(!a&&!r)}handleError(t){return console.error("Error occurred:",t),(0,C.$)(()=>new Error("Unknown error occurred. Please try again later."))}manageData(t,e){let a,r;switch(t){case $.CATEGORY:a=n=>n.categoryId,r=n=>n.categoryName;break;case $.STATUS:a=n=>n.status,r=n=>n.status;break;case $.DATE:a=n=>k(n.updatedAt),r=n=>k(n.updatedAt);break;default:return[]}return function E(s,i,t){const e={};for(const a of s){const r=i(a),n=t(a);e[r]||(e[r]={key:r,title:n,data:[]}),e[r].data.push(a)}return Object.values(e)}(e,a,r)}createSprint(t){return this.firebaseRealtimeDatabaseService.create(`${this.basePath}/${this.sprintEndpoint}`,t)}getSprints(){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.basePath}/${this.sprintEndpoint}`)}getSprint(t){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.basePath}/${this.sprintEndpoint}/${t}`)}updateSprint(t,e){return this.firebaseRealtimeDatabaseService.update(`${this.basePath}/${this.sprintEndpoint}/${t}`,e)}moveLists(t,e,a=!1){return(0,c.A)(function*(){})()}createChecklist(t){return this.firebaseRealtimeDatabaseService.create(`${this.basePath}/${this.checklistEndpoint}`,t)}updateChecklist(t,e){return this.firebaseRealtimeDatabaseService.update(`${this.basePath}/${this.checklistEndpoint}/${t}`,e)}getChecklist(){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.basePath}/${this.checklistEndpoint}`)}getChecklistByCategoryId(t){return this.firebaseRealtimeDatabaseService.readRealtimeWhere$(`${this.basePath}/${this.checklistEndpoint}`,{categoryId:t})}getChecklistById(t){return this.firebaseRealtimeDatabaseService.readRealtimeOriginal$(`${this.basePath}/${this.checklistEndpoint}/${t}`)}getChecklistItemsById(t){return this.firebaseRealtimeDatabaseService.readRealtime$(`${this.basePath}/${this.checklistEndpoint}/${t}/items`)}updateTitle(t,e){return this.firebaseRealtimeDatabaseService.update(`${this.basePath}/${this.checklistEndpoint}/${t}`,{title:e})}addItem(t,e,a=!1){return this.firebaseRealtimeDatabaseService.create(`${this.basePath}/${this.checklistEndpoint}/${t}/items`,{name:e,completed:a})}toggleItem(t,e,a){return this.firebaseRealtimeDatabaseService.update(`${this.basePath}/${this.checklistEndpoint}/${t}/items/${e}`,{completed:a})}renameItem(t,e,a){return this.firebaseRealtimeDatabaseService.update(`${this.basePath}/${this.checklistEndpoint}/${t}/items/${e}`,{name:a})}removeItem(t,e){return this.firebaseRealtimeDatabaseService.remove(`${this.basePath}/${this.checklistEndpoint}/${t}/items/${e}`)}createCheckListWithOrginalKey(t,e){var a=this;return(0,c.A)(function*(){yield a.firebaseRealtimeDatabaseService.set(`${a.basePath}/${a.checklistEndpoint}/${t}`,e)})()}addItemWithKey(t,e,a){return this.firebaseRealtimeDatabaseService.set(`${this.basePath}/${this.checklistEndpoint}/${t}/items/${e}`,{name:a.name,completed:a.completed})}checkIfExists(t){return this.firebaseRealtimeDatabaseService.readOnceOriginal(`${this.basePath}/${this.checklistEndpoint}/${t}`)}static{this.\u0275fac=function(e){return new(e||s)(g.KVO(M.h),g.KVO(A))}}static{this.\u0275prov=g.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},5604:(I,m,o)=>{o.r(m),o.d(m,{CategoriesNavigationsComponent:()=>D});var c=o(4438),g=o(2743),b=o(2557),y=o(8326),v=o(8701),C=o(177);function P(h,E){if(1&h&&(c.j41(0,"ng-sidenav-link",0),c.EFF(1),c.k0s()),2&h){const d=E.$implicit;c.Mz_("routerLink","category/details/",null==d?null:d.key,""),c.R7$(),c.SpI(" ",null==d?null:d.title," ")}}let D=(()=>{class h{constructor(){this.postDataService=(0,c.WQX)(g.A),this.categories$=this.postDataService.getCategories()}static{this.\u0275fac=function(f){return new(f||h)}}static{this.\u0275cmp=c.VBU({type:h,selectors:[["app-categories-navigations"]],standalone:!1,decls:4,vars:2,consts:[[3,"routerLink"]],template:function(f,R){1&f&&(c.j41(0,"ng-sidenav"),c.Z7z(1,P,2,3,"ng-sidenav-link",0,c.fX1),c.nI1(3,"async"),c.k0s()),2&f&&(c.R7$(),c.Dyx(c.bMT(3,0,R.categories$)))},dependencies:[b.Wk,y.D,v.$,C.AsyncPipe],encapsulation:2})}}return h})()}}]);