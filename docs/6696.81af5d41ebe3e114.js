"use strict";(self.webpackChunkportfolio_all_in_one=self.webpackChunkportfolio_all_in_one||[]).push([[6696],{46696:(M,f,s)=>{s.r(f),s.d(f,{default:()=>y});var _=s(10467),t=s(54438),l=s(89417),P=s(21469),C=s(89079),g=s(60177),O=s(67765);let e=(()=>{class n extends O.u{constructor(){super(...arguments),this.basePath="POSTS-DB",this.endpoint=""}static{this.\u0275fac=(()=>{let o;return function(r){return(o||(o=t.xGo(n)))(r||n)}})()}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function i(n,p){1&n&&(t.j41(0,"div",3),t.EFF(1,"Title is required."),t.k0s())}function d(n,p){1&n&&(t.j41(0,"div",3),t.EFF(1,"Content is required."),t.k0s())}function c(n,p){if(1&n&&(t.j41(0,"div",8)(1,"p"),t.EFF(2,"Preview:"),t.k0s(),t.nrm(3,"img",12),t.k0s()),2&n){const o=t.XpG();t.R7$(3),t.Y8G("src",o.imagePreview,t.B4B)}}function m(n,p){if(1&n&&(t.j41(0,"div",9),t.EFF(1),t.k0s()),2&n){const o=t.XpG();t.R7$(),t.SpI("Uploading... ",o.uploadProgress.toFixed(0),"%")}}function b(n,p){1&n&&t.EFF(0," loading posts... ")}function v(n,p){if(1&n&&(t.j41(0,"div",13),t.nrm(1,"img",14),t.j41(2,"div",15)(3,"h3"),t.EFF(4),t.k0s(),t.j41(5,"p"),t.EFF(6),t.k0s(),t.j41(7,"small"),t.EFF(8),t.nI1(9,"date"),t.k0s()()()),2&n){const o=p.$implicit;t.R7$(),t.Y8G("src",o.imageUrl,t.B4B),t.R7$(3),t.JRh(o.title),t.R7$(2),t.JRh(o.content),t.R7$(2),t.JRh(t.i5U(9,4,o.createdAt,"short"))}}function F(n,p){if(1&n&&t.Z7z(0,v,10,7,"div",13,t.Vm6),2&n){const o=t.XpG();t.Dyx(o.dataResource.value())}}function x(n,p){if(1&n){const o=t.RV6();t.EFF(0),t.j41(1,"button",16),t.bIt("click",function(){t.eBV(o);const r=t.XpG();return t.Njj(r.dataResource.reload())}),t.EFF(2,"Retry"),t.k0s()}if(2&n){const o=t.XpG();t.SpI(" The request failed. Reason: ",o.dataResource.error," ")}}let y=(()=>{class n{constructor(){this.selectedFile=null,this.imagePreview=null,this.uploading=!1,this.uploadProgress=0,this.fb=(0,t.WQX)(l.ok),this.storageService=(0,t.WQX)(P._),this.facebookService=(0,t.WQX)(e),this.dataResource=(0,C.ZX)({loader:()=>this.facebookService.get$()}),this.postForm=this.fb.group({title:["",l.k0.required],content:["",l.k0.required]})}onFileSelected(o){const a=o.target;if(a.files?.length){this.selectedFile=a.files[0];const r=new FileReader;r.onload=()=>this.imagePreview=r.result,r.readAsDataURL(this.selectedFile)}}submitPost(){var o=this;return(0,_.A)(function*(){if(o.selectedFile){o.uploading=!0;try{const a=yield o.storageService.uploadFile("posts",o.selectedFile,u=>{o.uploadProgress=u}),r={...o.postForm.value,imageUrl:a};yield o.facebookService.create("",r),o.resetForm(),alert("Post submitted successfully!")}catch(a){console.error("Error uploading post:",a)}finally{o.uploading=!1}}else alert("Please select an image.")})()}resetForm(){this.postForm.reset(),this.imagePreview=null,this.selectedFile=null,this.uploadProgress=0}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-posts-app"]],decls:25,vars:8,consts:[[1,"post-form",3,"ngSubmit","formGroup"],["for","title"],["id","title","formControlName","title","type","text"],[1,"error"],["for","content"],["id","content","formControlName","content"],["for","image"],["id","image","type","file","accept","image/*",3,"change"],[1,"image-preview"],[1,"progress-bar"],["type","submit",3,"disabled"],[1,"post-list"],["alt","Image preview",3,"src"],[1,"post-card"],["alt","Post image",3,"src"],[1,"post-content"],[3,"click"]],template:function(a,r){if(1&a&&(t.j41(0,"form",0),t.bIt("ngSubmit",function(){return r.submitPost()}),t.j41(1,"h2"),t.EFF(2,"Create Post"),t.k0s(),t.j41(3,"div")(4,"label",1),t.EFF(5,"Title"),t.k0s(),t.nrm(6,"input",2),t.DNE(7,i,2,0,"div",3),t.k0s(),t.j41(8,"div")(9,"label",4),t.EFF(10,"Content"),t.k0s(),t.nrm(11,"textarea",5),t.DNE(12,d,2,0,"div",3),t.k0s(),t.j41(13,"div")(14,"label",6),t.EFF(15,"Image"),t.k0s(),t.j41(16,"input",7),t.bIt("change",function(h){return r.onFileSelected(h)}),t.k0s()(),t.DNE(17,c,4,1,"div",8)(18,m,2,1,"div",9),t.j41(19,"button",10),t.EFF(20),t.k0s()(),t.j41(21,"div",11),t.DNE(22,b,1,0)(23,F,2,0)(24,x,3,1),t.k0s()),2&a){let u,h;t.Y8G("formGroup",r.postForm),t.R7$(7),t.vxM(null!=(u=r.postForm.get("title"))&&u.invalid&&null!=(u=r.postForm.get("title"))&&u.touched?7:-1),t.R7$(5),t.vxM(null!=(h=r.postForm.get("content"))&&h.invalid&&null!=(h=r.postForm.get("content"))&&h.touched?12:-1),t.R7$(5),t.vxM(r.imagePreview?17:-1),t.R7$(),t.vxM(r.uploading?18:-1),t.R7$(),t.Y8G("disabled",r.postForm.invalid||r.uploading),t.R7$(),t.SpI(" ",r.uploading?"Uploading...":"Submit Post"," "),t.R7$(2),t.vxM(r.dataResource.isLoading()?22:r.dataResource.hasValue()?23:24)}},dependencies:[l.X1,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,g.DatePipe],styles:[".post-form[_ngcontent-%COMP%]{max-width:500px;margin:2rem auto;padding:1.5rem;display:flex;flex-direction:column;gap:1rem;background-color:#f9f9f9;border-radius:8px;border:1px solid #e0e0e0}.post-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .post-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;font-size:1rem;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}.post-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .post-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none}.post-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#007bff;color:#fff;border:none;border-radius:4px;font-weight:500;cursor:pointer;transition:background .3s ease}.post-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}.post-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.post-form[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red;font-size:.85rem}.post-form[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{font-size:.9rem;color:#555}.post-form[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:200px;display:block;margin-top:.5rem;border-radius:4px;object-fit:cover}.post-list[_ngcontent-%COMP%]{margin:3rem auto;max-width:800px;display:grid;gap:1.5rem}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]{display:flex;gap:1rem;background:#fff;border:1px solid #ddd;padding:1rem;border-radius:6px;box-shadow:0 1px 3px #0000000d;transition:box-shadow .3s ease}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #0000001a}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:100%;object-fit:cover;border-radius:4px;flex-shrink:0}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1.2rem}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#444}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]   .post-content[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#888;font-size:.85rem}@media (max-width: 600px){.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]{flex-direction:column}.post-list[_ngcontent-%COMP%]   .post-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}}"]})}}return n})()},67765:(M,f,s)=>{s.d(f,{u:()=>C});var _=s(10467),t=s(54438),l=s(9972),P=s(21469);let C=(()=>{class g{constructor(){this.db=(0,t.WQX)(l.h),this.storageService=(0,t.WQX)(P._)}get fullPath(){return`${this.basePath}/${this.endpoint}`}generatePath(e=""){return e?`${this.fullPath}/${e}`:this.fullPath}create(e="",i){return this.db.create(this.generatePath(e),i)}get$(){return this.db.readRealtime$(this.fullPath)}getById(e){return this.db.readRealtimeOriginal$(`${this.fullPath}/${e}`)}update(e,i){return this.db.update(`${this.fullPath}/${e}`,i)}remove(e){return this.db.remove(`${this.fullPath}/${e}`)}set(e,i){return this.db.set(this.generatePath(e),i)}getKeys$(e=""){return this.db.getKeys$(this.generatePath(e))}getKeys(e=""){return this.db.getKeys(this.generatePath(e))}readOnce(e=""){return this.db.readOnce(this.generatePath(e))}read$(e=""){return this.db.readRealtime$(this.generatePath(e))}readRealtimeWhere$(e,i){return this.db.readRealtimeWhere$(this.generatePath(e),i)}clearDb(){return this.set("",null)}updateCounter(e,i=!0){return this.db.updateCounterV2(this.generatePath(e),i)}createWithFile(e="",i,d,c){var m=this;return(0,_.A)(function*(){if(!d)throw new Error("Please select an image.");const b=yield m.storageService.uploadFile(m.generatePath(e),d,c),v={...i,imageUrl:b};yield m.create(e,v)})()}uploadFile(e="",i,d){var c=this;return(0,_.A)(function*(){if(!i)throw new Error("Please select an image.");return yield c.storageService.uploadFile(c.generatePath(e),i,d)})()}extractAndUploadFiles(e="",i,d){var c=this;return(0,_.A)(function*(){return c.storageService.extractAndUploadFiles(i,c.generatePath(e),d)})()}static{this.\u0275fac=function(i){return new(i||g)}}static{this.\u0275prov=t.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}}return g})()}}]);